var ax=Object.defineProperty;var pc=e=>{throw TypeError(e)};var ox=(e,t,n)=>t in e?ax(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var It=(e,t,n)=>ox(e,typeof t!="symbol"?t+"":t,n),Ea=(e,t,n)=>t.has(e)||pc("Cannot "+n);var B=(e,t,n)=>(Ea(e,t,"read from private field"),n?n.call(e):t.get(e)),Ce=(e,t,n)=>t.has(e)?pc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ye=(e,t,n,r)=>(Ea(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),at=(e,t,n)=>(Ea(e,t,"access private method"),n);var Gs=(e,t,n,r)=>({set _(s){ye(e,t,s,n)},get _(){return B(e,t,r)}});import{j as i,V as qd,R as Hd,A as Gd,C as Wd,X as gr,T as Yd,D as Kd,P as lx,c as Zr,a as Ui,u as Je,b as Qd,d as We,e as me,f as fn,g as Xd,h as Jd,S as cx,i as ux,k as Zd,l as co,m as qi,n as em,o as be,W as dx,L as Yr,p as Hi,q as tm,M as Nn,r as nm,s as mx,N as Xo,t as rm,v as sm,w as hx,x as fx,F as px,y as gx,I as xx,z as wn,B as im,E as yx,G as vx,H as bx,J as Jo,K as wx,O as Sx,Q as am,U as om,Y as jx,Z as lm,_ as cm,$ as Ex,a0 as Nx,a1 as um,a2 as Cx,a3 as jn,a4 as Gi,a5 as Fs,a6 as es,a7 as Ix,a8 as an,a9 as En,aa as Zo,ab as dm,ac as el,ad as mm,ae as hm,af as fm,ag as kx,ah as Ax,ai as Tx,aj as uo,ak as Yn,al as Px,am as _x,an as pm,ao as gm,ap as Mx,aq as xm,ar as ym,as as Dx,at as vm,au as Rx,av as bm,aw as wm,ax as Ox,ay as Lx,az as Sm,aA as Fx,aB as $x,aC as jm,aD as Em,aE as zx,aF as Na,aG as Bx,aH as Vx,aI as Ux,aJ as ps,aK as gc,aL as xc,aM as qx,aN as Hx,aO as tl,aP as Gx,aQ as Wx,aR as Yx,aS as yc,aT as Kx,aU as Qx,aV as Xx,aW as Jx,aX as Zx,aY as ey,aZ as ty}from"./vendor-ui-CuO9rIeA.js";import{a as ny,r as p,R as $,G as ry,u as xt,c as In,L as Ir,d as yi,g as Nm,H as sy,e as iy,f as Ws,N as vc}from"./vendor-react-D2LSdJQX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Cm,bc=ny;Cm=bc.createRoot,bc.hydrateRoot;const ay="modulepreload",oy=function(e){return"/1Hall1Artiste/"+e},wc={},$s=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=oy(c),c in wc)return;wc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ay,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},vi="app_errors",Sc=50,mo=(e,t,n)=>{try{const r=typeof e=="string"?e:e.message,s=typeof e=="string"?void 0:e.stack,a={message:r,stack:s,url:window.location.href,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,path:window.location.pathname,componentName:t,additionalInfo:n},o=localStorage.getItem(vi);let l=[];if(o)try{l=JSON.parse(o),Array.isArray(l)||(l=[])}catch(c){console.error("Erreur lors de la lecture des erreurs stock√©es:",c),l=[]}l.push(a),l.length>Sc&&(l=l.slice(-Sc)),localStorage.setItem(vi,JSON.stringify(l)),console.error("Erreur captur√©e:",a)}catch(r){console.error("Erreur lors de la capture d'erreur:",r)}},Im=()=>{try{const e=localStorage.getItem(vi);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Erreur lors de la r√©cup√©ration des erreurs stock√©es:",e),[]}},ly=()=>{localStorage.removeItem(vi)},cy="service_3l31ox3",uy="template_q7nh8h2",dy=async()=>{try{const e=await $s(()=>import("./index-CQgKCrt3.js"),[])}catch(e){console.error("Erreur lors de l'initialisation d'EmailJS:",e)}},jc=async()=>{const e=Im();e.length>=1?await km():e.length>0&&console.log(`${e.length} erreur(s) en attente d'envoi`)},km=async()=>{try{const e=Im();if(e.length===0)return!0;if(!0){console.log(`Envoi de ${e.length} erreurs par email`);const n=await $s(()=>import("./index-CQgKCrt3.js"),[]),r={errors_json:JSON.stringify(e,null,2),error_count:e.length,timestamp:new Date().toISOString(),user_agent:navigator.userAgent,app_version:"1.0.0",app_name:"Collectif Feydeau"},a=await n.send(cy,uy,r,"HoNWMyqrINGzjeK6E");if(a.status===200)return console.log("Erreurs envoy√©es avec succ√®s"),ly(),!0;throw new Error(`Erreur lors de l'envoi: ${a.text}`)}}catch(e){return console.error("Erreur lors de l'envoi des erreurs:",e),!1}},Ec=()=>{window.onerror=(e,t,n,r,s)=>(mo(s||String(e),"GlobalErrorHandler",{source:t,lineno:n,colno:r}),!1),window.addEventListener("unhandledrejection",e=>{mo(e.reason||"Promesse rejet√©e non g√©r√©e","UnhandledRejection")})},my=async()=>{console.log("üß™ Test du syst√®me de suivi d'erreurs..."),mo("Erreur de test pour v√©rifier le syst√®me de suivi","TestErrorReporting",{testMode:!0,timestamp:new Date().toISOString()});const e=await km();console.log(e?"‚úÖ Test r√©ussi : Erreur envoy√©e par email":"‚ùå Test √©chou√© : Erreur non envoy√©e")};typeof window<"u"&&(window.testErrorReporting=my);const hy=()=>{};var Nc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},fy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=e[n++],o=e[n++],l=e[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return t.join("")},Tm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const a=e[s],o=s+1<e.length,l=o?e[s+1]:0,c=s+2<e.length,d=c?e[s+2]:0,u=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|d>>6,f=d&63;c||(f=64,o||(m=64)),r.push(n[u],n[h],n[m],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Am(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const a=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const d=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,a==null||l==null||d==null||h==null)throw new py;const m=a<<2|l>>4;if(r.push(m),d!==64){const f=l<<4&240|d>>2;if(r.push(f),h!==64){const x=d<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class py extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gy=function(e){const t=Am(e);return Tm.encodeByteArray(t,!0)},Pm=function(e){return gy(e).replace(/\./g,"")},xy=function(e){try{return Tm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=()=>yy().__FIREBASE_DEFAULTS__,by=()=>{if(typeof process>"u"||typeof Nc>"u")return;const e=Nc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},wy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&xy(e[1]);return t&&JSON.parse(t)},Sy=()=>{try{return hy()||vy()||by()||wy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_m=()=>{var e;return(e=Sy())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Mm(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function nl(){try{return typeof indexedDB=="object"}catch{return!1}}function rl(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}function Dm(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="FirebaseError";class Sr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ey,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wi.prototype.create)}}class Wi{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,a=this.errors[t],o=a?Ny(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,l,r)}}function Ny(e,t){return e.replace(Cy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Cy=/\{\$([^}]+)}/g;function bi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const a=e[s],o=t[s];if(Cc(a)&&Cc(o)){if(!bi(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=1e3,ky=2,Ay=4*60*60*1e3,Ty=.5;function Ic(e,t=Iy,n=ky){const r=t*Math.pow(n,e),s=Math.round(Ty*r*(Math.random()-.5)*2);return Math.min(Ay,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(e){return e&&e._delegate?e._delegate:e}class Kn{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Py=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new jy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(My(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(t=rr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rr){return this.instances.has(t)}getOptions(t=rr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&t(o,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_y(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=rr){return this.component?this.component.multipleInstances?t:rr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _y(e){return e===rr?void 0:e}function My(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Py(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Le||(Le={}));const Ry={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Oy=Le.INFO,Ly={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Fy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ly[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rm{constructor(t){this.name=t,this._logLevel=Oy,this._logHandler=Fy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Le))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ry[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...t),this._logHandler(this,Le.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...t),this._logHandler(this,Le.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...t),this._logHandler(this,Le.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...t),this._logHandler(this,Le.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...t),this._logHandler(this,Le.ERROR,...t)}}const $y=(e,t)=>t.some(n=>e instanceof n);let kc,Ac;function zy(){return kc||(kc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function By(){return Ac||(Ac=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Om=new WeakMap,ho=new WeakMap,Lm=new WeakMap,Ca=new WeakMap,il=new WeakMap;function Vy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(qn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Om.set(n,e)}).catch(()=>{}),il.set(t,e),t}function Uy(e){if(ho.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});ho.set(e,t)}let fo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ho.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Lm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function qy(e){fo=e(fo)}function Hy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ia(this),t,...n);return Lm.set(r,t.sort?t.sort():[t]),qn(r)}:By().includes(e)?function(...t){return e.apply(Ia(this),t),qn(Om.get(this))}:function(...t){return qn(e.apply(Ia(this),t))}}function Gy(e){return typeof e=="function"?Hy(e):(e instanceof IDBTransaction&&Uy(e),$y(e,zy())?new Proxy(e,fo):e)}function qn(e){if(e instanceof IDBRequest)return Vy(e);if(Ca.has(e))return Ca.get(e);const t=Gy(e);return t!==e&&(Ca.set(e,t),il.set(t,e)),t}const Ia=e=>il.get(e);function Fm(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(e,t),l=qn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qn(o.result),c.oldVersion,c.newVersion,qn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Wy=["get","getKey","getAll","getAllKeys","count"],Yy=["put","add","delete","clear"],ka=new Map;function Tc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ka.get(t))return ka.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Yy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Wy.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return ka.set(t,a),a}qy(e=>({...e,get:(t,n,r)=>Tc(t,n)||e.get(t,n,r),has:(t,n)=>!!Tc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const po="@firebase/app",Pc="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new Rm("@firebase/app"),Xy="@firebase/app-compat",Jy="@firebase/analytics-compat",Zy="@firebase/analytics",ev="@firebase/app-check-compat",tv="@firebase/app-check",nv="@firebase/auth",rv="@firebase/auth-compat",sv="@firebase/database",iv="@firebase/data-connect",av="@firebase/database-compat",ov="@firebase/functions",lv="@firebase/functions-compat",cv="@firebase/installations",uv="@firebase/installations-compat",dv="@firebase/messaging",mv="@firebase/messaging-compat",hv="@firebase/performance",fv="@firebase/performance-compat",pv="@firebase/remote-config",gv="@firebase/remote-config-compat",xv="@firebase/storage",yv="@firebase/storage-compat",vv="@firebase/firestore",bv="@firebase/ai",wv="@firebase/firestore-compat",Sv="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]",jv={[po]:"fire-core",[Xy]:"fire-core-compat",[Zy]:"fire-analytics",[Jy]:"fire-analytics-compat",[tv]:"fire-app-check",[ev]:"fire-app-check-compat",[nv]:"fire-auth",[rv]:"fire-auth-compat",[sv]:"fire-rtdb",[iv]:"fire-data-connect",[av]:"fire-rtdb-compat",[ov]:"fire-fn",[lv]:"fire-fn-compat",[cv]:"fire-iid",[uv]:"fire-iid-compat",[dv]:"fire-fcm",[mv]:"fire-fcm-compat",[hv]:"fire-perf",[fv]:"fire-perf-compat",[pv]:"fire-rc",[gv]:"fire-rc-compat",[xv]:"fire-gcs",[yv]:"fire-gcs-compat",[vv]:"fire-fst",[wv]:"fire-fst-compat",[bv]:"fire-vertex","fire-js":"fire-js",[Sv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Map,Ev=new Map,xo=new Map;function _c(e,t){try{e.container.addComponent(t)}catch(n){Cn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function xr(e){const t=e.name;if(xo.has(t))return Cn.debug(`There were multiple attempts to register component ${t}.`),!1;xo.set(t,e);for(const n of wi.values())_c(n,e);for(const n of Ev.values())_c(n,e);return!0}function Yi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new Wi("app","Firebase",Nv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}function Iv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:go,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw Hn.create("bad-app-name",{appName:String(s)});if(n||(n=_m()),!n)throw Hn.create("no-options");const a=wi.get(s);if(a){if(bi(n,a.options)&&bi(r,a.config))return a;throw Hn.create("duplicate-app",{appName:s})}const o=new Dy(s);for(const c of xo.values())o.addComponent(c);const l=new Cv(n,r,o);return wi.set(s,l),l}function kv(e=go){const t=wi.get(e);if(!t&&e===go&&_m())return Iv();if(!t)throw Hn.create("no-app",{appName:e});return t}function Gn(e,t,n){var r;let s=(r=jv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${t}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cn.warn(l.join(" "));return}xr(new Kn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="firebase-heartbeat-database",Tv=1,Ns="firebase-heartbeat-store";let Aa=null;function $m(){return Aa||(Aa=Fm(Av,Tv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ns)}catch(n){console.warn(n)}}}}).catch(e=>{throw Hn.create("idb-open",{originalErrorMessage:e.message})})),Aa}async function Pv(e){try{const n=(await $m()).transaction(Ns),r=await n.objectStore(Ns).get(zm(e));return await n.done,r}catch(t){if(t instanceof Sr)Cn.warn(t.message);else{const n=Hn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Cn.warn(n.message)}}}async function Mc(e,t){try{const r=(await $m()).transaction(Ns,"readwrite");await r.objectStore(Ns).put(t,zm(e)),await r.done}catch(n){if(n instanceof Sr)Cn.warn(n.message);else{const r=Hn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function zm(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=1024,Mv=30;class Dv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ov(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Dc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Mv){const o=Lv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dc(),{heartbeatsToSend:r,unsentEntries:s}=Rv(this._heartbeatsCache.heartbeats),a=Pm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Cn.warn(n),""}}}function Dc(){return new Date().toISOString().substring(0,10)}function Rv(e,t=_v){const n=[];let r=e.slice();for(const s of e){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Rc(n)>t){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ov{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nl()?rl().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Pv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Rc(e){return Pm(JSON.stringify({version:2,heartbeats:e})).length}function Lv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(e){xr(new Kn("platform-logger",t=>new Ky(t),"PRIVATE")),xr(new Kn("heartbeat",t=>new Dv(t),"PRIVATE")),Gn(po,Pc,e),Gn(po,Pc,"esm2017"),Gn("fire-js","")}Fv("");var $v="firebase",zv="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn($v,zv,"app");const Bm="@firebase/installations",al="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=1e4,Um=`w:${al}`,qm="FIS_v2",Bv="https://firebaseinstallations.googleapis.com/v1",Vv=60*60*1e3,Uv="installations",qv="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yr=new Wi(Uv,qv,Hv);function Hm(e){return e instanceof Sr&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm({projectId:e}){return`${Bv}/projects/${e}/installations`}function Wm(e){return{token:e.token,requestStatus:2,expiresIn:Wv(e.expiresIn),creationTime:Date.now()}}async function Ym(e,t){const r=(await t.json()).error;return yr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Km({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Gv(e,{refreshToken:t}){const n=Km(e);return n.append("Authorization",Yv(t)),n}async function Qm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Wv(e){return Number(e.replace("s","000"))}function Yv(e){return`${qm} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Gm(e),s=Km(e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:qm,appId:e.appId,sdkVersion:Um},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Qm(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Wm(d.authToken)}}else throw await Ym("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=/^[cdef][\w-]{21}$/,yo="";function Jv(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=Zv(e);return Xv.test(n)?n:yo}catch{return yo}}function Zv(e){return Qv(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map;function Zm(e,t){const n=Ki(e);eh(n,t),eb(n,t)}function eh(e,t){const n=Jm.get(e);if(n)for(const r of n)r(t)}function eb(e,t){const n=tb();n&&n.postMessage({key:e,fid:t}),nb()}let lr=null;function tb(){return!lr&&"BroadcastChannel"in self&&(lr=new BroadcastChannel("[Firebase] FID Change"),lr.onmessage=e=>{eh(e.data.key,e.data.fid)}),lr}function nb(){Jm.size===0&&lr&&(lr.close(),lr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="firebase-installations-database",sb=1,vr="firebase-installations-store";let Ta=null;function ol(){return Ta||(Ta=Fm(rb,sb,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(vr)}}})),Ta}async function Si(e,t){const n=Ki(e),s=(await ol()).transaction(vr,"readwrite"),a=s.objectStore(vr),o=await a.get(n);return await a.put(t,n),await s.done,(!o||o.fid!==t.fid)&&Zm(e,t.fid),t}async function th(e){const t=Ki(e),r=(await ol()).transaction(vr,"readwrite");await r.objectStore(vr).delete(t),await r.done}async function Qi(e,t){const n=Ki(e),s=(await ol()).transaction(vr,"readwrite"),a=s.objectStore(vr),o=await a.get(n),l=t(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&Zm(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(e){let t;const n=await Qi(e.appConfig,r=>{const s=ib(r),a=ab(e,s);return t=a.registrationPromise,a.installationEntry});return n.fid===yo?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function ib(e){const t=e||{fid:Jv(),registrationStatus:0};return nh(t)}function ab(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(yr.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=ob(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:lb(e)}:{installationEntry:t}}async function ob(e,t){try{const n=await Kv(e,t);return Si(e.appConfig,n)}catch(n){throw Hm(n)&&n.customData.serverCode===409?await th(e.appConfig):await Si(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function lb(e){let t=await Oc(e.appConfig);for(;t.registrationStatus===1;)await Xm(100),t=await Oc(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ll(e);return r||n}return t}function Oc(e){return Qi(e,t=>{if(!t)throw yr.create("installation-not-found");return nh(t)})}function nh(e){return cb(e)?{fid:e.fid,registrationStatus:0}:e}function cb(e){return e.registrationStatus===1&&e.registrationTime+Vm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub({appConfig:e,heartbeatServiceProvider:t},n){const r=db(e,n),s=Gv(e,n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:Um,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Qm(()=>fetch(r,l));if(c.ok){const d=await c.json();return Wm(d)}else throw await Ym("Generate Auth Token",c)}function db(e,{fid:t}){return`${Gm(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(e,t=!1){let n;const r=await Qi(e.appConfig,a=>{if(!rh(a))throw yr.create("not-registered");const o=a.authToken;if(!t&&fb(o))return a;if(o.requestStatus===1)return n=mb(e,t),a;{if(!navigator.onLine)throw yr.create("app-offline");const l=gb(a);return n=hb(e,l),l}});return n?await n:r.authToken}async function mb(e,t){let n=await Lc(e.appConfig);for(;n.authToken.requestStatus===1;)await Xm(100),n=await Lc(e.appConfig);const r=n.authToken;return r.requestStatus===0?cl(e,t):r}function Lc(e){return Qi(e,t=>{if(!rh(t))throw yr.create("not-registered");const n=t.authToken;return xb(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function hb(e,t){try{const n=await ub(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Si(e.appConfig,r),n}catch(n){if(Hm(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await th(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Si(e.appConfig,r)}throw n}}function rh(e){return e!==void 0&&e.registrationStatus===2}function fb(e){return e.requestStatus===2&&!pb(e)}function pb(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Vv}function gb(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function xb(e){return e.requestStatus===1&&e.requestTime+Vm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(e){const t=e,{installationEntry:n,registrationPromise:r}=await ll(t);return r?r.catch(console.error):cl(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(e,t=!1){const n=e;return await bb(n),(await cl(n,t)).token}async function bb(e){const{registrationPromise:t}=await ll(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e){if(!e||!e.options)throw Pa("App Configuration");if(!e.name)throw Pa("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Pa(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Pa(e){return yr.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="installations",Sb="installations-internal",jb=e=>{const t=e.getProvider("app").getImmediate(),n=wb(t),r=Yi(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Eb=e=>{const t=e.getProvider("app").getImmediate(),n=Yi(t,sh).getImmediate();return{getId:()=>yb(n),getToken:s=>vb(n,s)}};function Nb(){xr(new Kn(sh,jb,"PUBLIC")),xr(new Kn(Sb,Eb,"PRIVATE"))}Nb();Gn(Bm,al);Gn(Bm,al,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="analytics",Cb="firebase_id",Ib="origin",kb=60*1e3,Ab="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ul="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt=new Rm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new Wi("analytics","Analytics",Tb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(e){if(!e.startsWith(ul)){const t=Ot.create("invalid-gtag-resource",{gtagURL:e});return gt.warn(t.message),""}return e}function ih(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function _b(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Mb(e,t){const n=_b("firebase-js-sdk-policy",{createScriptURL:Pb}),r=document.createElement("script"),s=`${ul}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Db(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Rb(e,t,n,r,s,a){const o=r[s];try{if(o)await t[o];else{const c=(await ih(n)).find(d=>d.measurementId===s);c&&await t[c.appId]}}catch(l){gt.error(l)}e("config",s,a)}async function Ob(e,t,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await ih(n);for(const c of o){const d=l.find(h=>h.measurementId===c),u=d&&t[d.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e("event",r,s||{})}catch(a){gt.error(a)}}function Lb(e,t,n,r){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await Ob(e,t,n,l,c)}else if(a==="config"){const[l,c]=o;await Rb(e,t,n,r,l,c)}else if(a==="consent"){const[l,c]=o;e("consent",l,c)}else if(a==="get"){const[l,c,d]=o;e("get",l,c,d)}else if(a==="set"){const[l]=o;e("set",l)}else e(a,...o)}catch(l){gt.error(l)}}return s}function Fb(e,t,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=Lb(a,e,t,n),{gtagCore:a,wrappedGtag:window[s]}}function $b(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ul)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=30,Bb=1e3;class Vb{constructor(t={},n=Bb){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const ah=new Vb;function Ub(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function qb(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:Ub(r)},a=Ab.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function Hb(e,t=ah,n){const{appId:r,apiKey:s,measurementId:a}=e.options;if(!r)throw Ot.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Ot.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Yb;return setTimeout(async()=>{l.abort()},kb),oh({appId:r,apiKey:s,measurementId:a},o,l,t)}async function oh(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=ah){var a;const{appId:o,measurementId:l}=e;try{await Gb(r,t)}catch(c){if(l)return gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await qb(e);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!Wb(d)){if(s.deleteThrottleMetadata(o),l)return gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const u=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?Ic(n,s.intervalMillis,zb):Ic(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),gt.debug(`Calling attemptFetch again in ${u} millis`),oh(e,h,r,s)}}function Gb(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(a),r(Ot.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Wb(e){if(!(e instanceof Sr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Yb{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Kb(e,t,n,r,s){if(s&&s.global){e("event",n,r);return}else{const a=await t,o=Object.assign(Object.assign({},r),{send_to:a});e("event",n,o)}}async function Qb(e,t){const n=await e;window[`ga-disable-${n}`]=!t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(){if(nl())try{await rl()}catch(e){return gt.warn(Ot.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return gt.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Jb(e,t,n,r,s,a,o){var l;const c=Hb(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&gt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>gt.error(f)),t.push(c);const d=Xb().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,d]);$b(a)||Mb(a,u.measurementId),s("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[Ib]="firebase",m.update=!0,h!=null&&(m[Cb]=h),s("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zb=class{constructor(t){this.app=t}_delete(){return delete Dr[this.app.options.appId],Promise.resolve()}},Dr={},Fc=[];const $c={};let _a="dataLayer",e0="gtag",zc,lh,Bc=!1;function t0(){const e=[];if(Mm()&&e.push("This is a browser extension environment."),Dm()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:t});gt.warn(n.message)}}function n0(e,t,n){t0();const r=e.options.appId;if(!r)throw Ot.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(Dr[r]!=null)throw Ot.create("already-exists",{id:r});if(!Bc){Db(_a);const{wrappedGtag:a,gtagCore:o}=Fb(Dr,Fc,$c,_a,e0);lh=a,zc=o,Bc=!0}return Dr[r]=Jb(e,Fc,$c,t,zc,_a,n),new Zb(e)}function Xi(e=kv()){e=sl(e);const t=Yi(e,ji);return t.isInitialized()?t.getImmediate():ch(e)}function ch(e,t={}){const n=Yi(e,ji);if(n.isInitialized()){const s=n.getImmediate();if(bi(t,n.getOptions()))return s;throw Ot.create("already-initialized")}return n.initialize({options:t})}async function uh(){if(Mm()||!Dm()||!nl())return!1;try{return await rl()}catch{return!1}}function dh(e,t){e=sl(e),Qb(Dr[e.app.options.appId],t).catch(n=>gt.error(n))}function dl(e,t,n,r){e=sl(e),Kb(lh,Dr[e.app.options.appId],t,n,r).catch(s=>gt.error(s))}const Vc="@firebase/analytics",Uc="0.10.16";function r0(){xr(new Kn(ji,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return n0(r,s,n)},"PUBLIC")),xr(new Kn("analytics-internal",e,"PRIVATE")),Gn(Vc,Uc),Gn(Vc,Uc,"esm2017");function e(t){try{const n=t.getProvider(ji).getImmediate();return{logEvent:(r,s,a)=>dl(n,r,s,a)}}catch(n){throw Ot.create("interop-component-reg-failed",{reason:n})}}}r0();const s0=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:Xi,initializeAnalytics:ch,isSupported:uh,logEvent:dl,setAnalyticsCollectionEnabled:dh},Symbol.toStringTag,{value:"Module"}));let Ma=null;const i0=()=>(console.warn("Firebase non initialis√©: cl√© API manquante"),null),ml=()=>(Ma||(Ma=i0()),Ma);let vo=null;const a0=()=>{if(typeof window<"u"){const e=ml();if(e)try{return vo=Xi(e),vo}catch(t){console.warn("Erreur lors de l'initialisation de Firebase Analytics:",t)}}return null},o0=()=>vo;var mh=(e=>(e.NAVIGATION="navigation",e.INTERACTION="interaction",e.CONTENT="content",e.MEDIA="media",e.PERFORMANCE="performance",e.ERROR="error",e.USER="user",e.FEATURE="feature",e.ONBOARDING="onboarding",e.COMMUNITY="community",e.PROGRAM="program",e.MAP="map",e.DONATION="donation",e))(mh||{}),ee=(e=>(e.PAGE_VIEW="page_view",e.ROUTE_CHANGE="route_change",e.EXTERNAL_LINK="external_link",e.BACK="back",e.FORWARD="forward",e.CLICK="click",e.SWIPE="swipe",e.SCROLL="scroll",e.ZOOM="zoom",e.DRAG="drag",e.HOVER="hover",e.FOCUS="focus",e.BLUR="blur",e.VIEW="view",e.SEARCH="search",e.FILTER="filter",e.SORT="sort",e.SHARE="share",e.SAVE="save",e.UNSAVE="unsave",e.LIKE="like",e.UNLIKE="unlike",e.PLAY="play",e.PAUSE="pause",e.COMPLETE="complete",e.SEEK="seek",e.VOLUME_CHANGE="volume_change",e.FULLSCREEN="fullscreen",e.LOAD_TIME="load_time",e.FIRST_PAINT="first_paint",e.FIRST_CONTENTFUL_PAINT="first_contentful_paint",e.FIRST_INPUT_DELAY="first_input_delay",e.JS_ERROR="js_error",e.API_ERROR="api_error",e.RESOURCE_ERROR="resource_error",e.LOGIN="login",e.LOGOUT="logout",e.REGISTER="register",e.PROFILE_UPDATE="profile_update",e.FEATURE_ENABLE="feature_enable",e.FEATURE_DISABLE="feature_disable",e.FEATURE_USE="feature_use",e.ONBOARDING_START="onboarding_start",e.ONBOARDING_COMPLETE="onboarding_complete",e.ONBOARDING_SKIP="onboarding_skip",e.ONBOARDING_SLIDE_VIEW="onboarding_slide_view",e.CONTRIBUTION="contribution",e.COMMENT="comment",e.UPLOAD="upload",e.EVENT_VIEW="event_view",e.EVENT_DETAILS="event_details",e.EVENT_REMINDER="event_reminder",e.MAP_LOAD="map_load",e.LOCATION_VIEW="location_view",e.ROUTE_CALCULATE="route_calculate",e.USER_LOCATION="user_location",e.DONATION_START="donation_start",e.DONATION_COMPLETE="donation_complete",e.DONATION_CANCEL="donation_cancel",e))(ee||{});class l0{trackEvent(t,n,r){try{const s=o0();if(!s)return;const a=`${t}_${n}`,o={event_category:t,event_action:n,timestamp:new Date().toISOString(),...r};try{const l=typeof window<"u"&&window.location.search.includes("firebase_debug=1"),c=typeof window<"u"&&localStorage.getItem("analytics_debug")==="1";(l||c)&&(o.debug_mode=!0)}catch{}dl(s,a,o)}catch(s){console.error("[Analytics] Erreur lors du tracking de l'√©v√©nement:",s)}}trackPageView(t,n){this.trackEvent("navigation","page_view",{page_path:t,page_title:n})}trackRouteChange(t,n){this.trackEvent("navigation","route_change",{from_route:t,to_route:n})}trackInteraction(t,n,r){this.trackEvent("interaction",t,{element:n,...r})}trackContentInteraction(t,n,r,s){this.trackEvent("content",t,{content_type:n,content_id:r,...s})}trackMediaInteraction(t,n,r,s){this.trackEvent("media",t,{media_type:n,media_id:r,...s})}trackPerformance(t,n,r){this.trackEvent("performance",t,{value:n,...r})}trackError(t,n,r){this.trackEvent("error",t,{error_message:n,...r})}trackUserAction(t,n){this.trackEvent("user",t,n)}trackFeatureUse(t,n){this.trackEvent("feature","feature_use",{feature_name:t,...n})}trackOnboarding(t,n){this.trackEvent("onboarding",t,n)}trackMapInteraction(t,n){this.trackEvent("map",t,n)}trackProgramInteraction(t,n){this.trackEvent("program",t,n)}trackCommunityInteraction(t,n){this.trackEvent("community",t,n)}trackDonationInteraction(t,n){this.trackEvent("donation",t,n)}trackSwipe(t,n,r,s){this.trackEvent("interaction","swipe",{swipe_direction:t,swipe_source:n,swipe_success:r,...s})}startSession(){this.trackEvent("user","login",{session_start:Date.now()}),sessionStorage.setItem("session_start",Date.now().toString())}endSession(){const t=sessionStorage.getItem("session_start");if(t){const n=Date.now()-parseInt(t,10);this.trackEvent("user","logout",{session_duration:n})}}trackBuildingView(t,n){this.trackEvent("content","view",{content_type:"building",building_id:t,building_name:n})}trackBuildingHistoryView(t,n){this.trackEvent("content","view",{content_type:"building_history",building_id:t,section_title:n})}trackArtistView(t,n){this.trackEvent("content","view",{content_type:"artist",artist_id:t,artist_name:n})}trackConcertView(t,n,r){this.trackEvent("program","event_view",{event_id:t,event_title:n,event_date:r})}trackProgramCTA(t,n){this.trackEvent("program","click",{cta_action:t,event_id:n})}trackDonationPageOpen(t){this.trackEvent("donation","view",{page:"donation",source:t})}trackIntroVideo(t){const r={start:"play",complete:"complete",skip:"pause"}[t]||"play";this.trackEvent("media",r,{media_type:"intro_video"})}trackAudio(t,n,r){const a={play:"play",pause:"pause",seek:"seek",volume_change:"volume_change"}[t]||"play";this.trackEvent("media",a,{media_type:"audio",media_id:n,value:r})}}const V=new l0,c0=(e,t)=>V.trackPageView(e,t),u0=(e,t,n)=>V.trackEvent(e,t,n),bo=(e,t,n)=>V.trackInteraction(e,t,n),d0=(e,t,n,r)=>V.trackSwipe(e,t,n,r),m0=(e,t)=>V.trackFeatureUse(e,t),h0=2e3;let Da=0;function f0(){return Da=(Da+1)%Number.MAX_SAFE_INTEGER,Da.toString()}const Ra=new Map,qc=e=>{if(Ra.has(e))return;const t=setTimeout(()=>{Ra.delete(e),gs({type:"REMOVE_TOAST",toastId:e})},h0);Ra.set(e,t)},p0=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[...e.toasts,t.toast]};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?qc(n):e.toasts.forEach(r=>{qc(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},ci=[];let ui={toasts:[]};function gs(e){ui=p0(ui,e),ci.forEach(t=>{t(ui)})}function wt(e){const t=f0(),n=s=>gs({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>gs({type:"DISMISS_TOAST",toastId:t});return gs({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function hl(){const[e,t]=p.useState(ui);return p.useEffect(()=>(ci.push(t),()=>{const n=ci.indexOf(t);n>-1&&ci.splice(n,1)}),[e]),{...e,toast:wt,dismiss:n=>gs({type:"DISMISS_TOAST",toastId:n})}}function hh(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=hh(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fh(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=hh(e))&&(r&&(r+=" "),r+=t);return r}const Hc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gc=fh,Ji=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Gc(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const m=Hc(u)||Hc(h);return s[d][m]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...d,h,m]:d},[]);return Gc(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},fl="-",g0=e=>{const t=y0(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(fl);return l[0]===""&&l.length!==1&&l.shift(),ph(l,t)||x0(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},ph=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?ph(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(fl);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},Wc=/^\[(.+)\]$/,x0=e=>{if(Wc.test(e)){const t=Wc.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},y0=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return b0(Object.entries(e.classGroups),n).forEach(([a,o])=>{wo(o,r,a,t)}),r},wo=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:Yc(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(v0(s)){wo(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{wo(o,Yc(t,a),n,r)})})},Yc=(e,t)=>{let n=e;return t.split(fl).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},v0=e=>e.isThemeGetter,b0=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,s]}):e,w0=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},gh="!",S0=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let y=0;y<l.length;y++){let S=l[y];if(d===0){if(S===s&&(r||l.slice(y,y+a)===t)){c.push(l.slice(u,y)),u=y+a;continue}if(S==="/"){h=y;continue}}S==="["?d++:S==="]"&&d--}const m=c.length===0?l:l.substring(u),f=m.startsWith(gh),x=f?m.substring(1):m,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},j0=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},E0=e=>({cache:w0(e.cacheSize),parseClassName:S0(e),...g0(e)}),N0=/\s+/,C0=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(N0);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(d);let x=!!f,g=r(x?m.substring(0,f):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const y=j0(u).join(":"),S=h?y+gh:y,v=S+g;if(a.includes(v))continue;a.push(v);const b=s(g,x);for(let w=0;w<b.length;++w){const k=b[w];a.push(S+k)}l=d+(l.length>0?" "+l:l)}return l};function I0(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=xh(t))&&(r&&(r+=" "),r+=n);return r}const xh=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=xh(e[r]))&&(n&&(n+=" "),n+=t);return n};function k0(e,...t){let n,r,s,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=E0(d),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=C0(c,n);return s(c,u),u}return function(){return a(I0.apply(null,arguments))}}const Re=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},yh=/^\[(?:([a-z-]+):)?(.+)\]$/i,A0=/^\d+\/\d+$/,T0=new Set(["px","full","screen"]),P0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M0=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D0=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,R0=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xn=e=>Rr(e)||T0.has(e)||A0.test(e),Tn=e=>ts(e,"length",U0),Rr=e=>!!e&&!Number.isNaN(Number(e)),Oa=e=>ts(e,"number",Rr),as=e=>!!e&&Number.isInteger(Number(e)),O0=e=>e.endsWith("%")&&Rr(e.slice(0,-1)),ge=e=>yh.test(e),Pn=e=>P0.test(e),L0=new Set(["length","size","percentage"]),F0=e=>ts(e,L0,vh),$0=e=>ts(e,"position",vh),z0=new Set(["image","url"]),B0=e=>ts(e,z0,H0),V0=e=>ts(e,"",q0),os=()=>!0,ts=(e,t,n)=>{const r=yh.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},U0=e=>_0.test(e)&&!M0.test(e),vh=()=>!1,q0=e=>D0.test(e),H0=e=>R0.test(e),G0=()=>{const e=Re("colors"),t=Re("spacing"),n=Re("blur"),r=Re("brightness"),s=Re("borderColor"),a=Re("borderRadius"),o=Re("borderSpacing"),l=Re("borderWidth"),c=Re("contrast"),d=Re("grayscale"),u=Re("hueRotate"),h=Re("invert"),m=Re("gap"),f=Re("gradientColorStops"),x=Re("gradientColorStopPositions"),g=Re("inset"),y=Re("margin"),S=Re("opacity"),v=Re("padding"),b=Re("saturate"),w=Re("scale"),k=Re("sepia"),N=Re("skew"),P=Re("space"),D=Re("translate"),A=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",ge,t],T=()=>[ge,t],z=()=>["",xn,Tn],Y=()=>["auto",Rr,ge],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",ge],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Rr,ge];return{cacheSize:500,separator:":",theme:{colors:[os],spacing:[xn,Tn],blur:["none","",Pn,ge],brightness:K(),borderColor:[e],borderRadius:["none","","full",Pn,ge],borderSpacing:T(),borderWidth:z(),contrast:K(),grayscale:H(),hueRotate:K(),invert:H(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[O0,Tn],inset:C(),margin:C(),opacity:K(),padding:T(),saturate:K(),scale:K(),sepia:H(),skew:K(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",ge]}],container:["container"],columns:[{columns:[Pn]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),ge]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",as,ge]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ge]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",as,ge]}],"grid-cols":[{"grid-cols":[os]}],"col-start-end":[{col:["auto",{span:["full",as,ge]},ge]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[os]}],"row-start-end":[{row:["auto",{span:[as,ge]},ge]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ge]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ge,t]}],"min-w":[{"min-w":[ge,t,"min","max","fit"]}],"max-w":[{"max-w":[ge,t,"none","full","min","max","fit","prose",{screen:[Pn]},Pn]}],h:[{h:[ge,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ge,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ge,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ge,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Pn,Tn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Oa]}],"font-family":[{font:[os]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ge]}],"line-clamp":[{"line-clamp":["none",Rr,Oa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xn,ge]}],"list-image":[{"list-image":["none",ge]}],"list-style-type":[{list:["none","disc","decimal",ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xn,Tn]}],"underline-offset":[{"underline-offset":["auto",xn,ge]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),$0]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",F0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},B0]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[xn,ge]}],"outline-w":[{outline:[xn,Tn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[xn,Tn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pn,V0]}],"shadow-color":[{shadow:[os]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pn,ge]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ge]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",ge]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[as,ge]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ge]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ge]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ge]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xn,Tn,Oa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},W0=k0(G0);function se(...e){return W0(fh(e))}const Y0=lx,bh=p.forwardRef(({className:e,...t},n)=>i.jsx(qd,{ref:n,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));bh.displayName=qd.displayName;const K0=Ji("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wh=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(Hd,{ref:r,className:se(K0({variant:t}),e),...n}));wh.displayName=Hd.displayName;const Sh=p.forwardRef(({className:e,...t},n)=>i.jsx(Gd,{ref:n,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Sh.displayName=Gd.displayName;const jh=p.forwardRef(({className:e,...t},n)=>i.jsx(Wd,{ref:n,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(gr,{className:"h-4 w-4"})}));jh.displayName=Wd.displayName;const Eh=p.forwardRef(({className:e,...t},n)=>i.jsx(Yd,{ref:n,className:se("text-sm font-semibold",e),...t}));Eh.displayName=Yd.displayName;const Nh=p.forwardRef(({className:e,...t},n)=>i.jsx(Kd,{ref:n,className:se("text-sm opacity-90",e),...t}));Nh.displayName=Kd.displayName;function Q0(){const{toasts:e}=hl();return i.jsxs(Y0,{"data-swipe-direction":"right",swipeThreshold:10,children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return i.jsxs(wh,{...a,"data-swipe-direction":"right",children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Eh,{children:n}),r&&i.jsx(Nh,{children:r})]}),s,i.jsx(jh,{})]},t)}),i.jsx(bh,{})]})}var di={linear:function(e,t,n,r){var s=n-t;return s*e/r+t},easeInQuad:function(e,t,n,r){var s=n-t;return s*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){var s=n-t;return-s*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){var s=n-t;return-s*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var s=n-t;return-s*Math.cos(e/r*(Math.PI/2))+s+t},easeOutSine:function(e,t,n,r){var s=n-t;return s*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){var s=n-t;return-s/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){var s=n-t;return e==0?t:s*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var s=n-t;return e==r?t+s:s*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){var s=n-t;return e===0?t:e===r?t+s:(e/=r/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,r){var s=n-t;return-s*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){var s=n-t;return s*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t)},easeOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*e)*Math.sin((e*r-l)*(2*Math.PI)/o)+s+t)},easeInOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r/2)===2?t+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),e<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o)*.5+s+t)},easeInBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*(e/=r)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*((e=e/r-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),(e/=r/2)<1?a/2*(e*e*(((s*=1.525)+1)*e-s))+t:a/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},easeInBounce:function(e,t,n,r){var s=n-t,a;return a=di.easeOutBounce(r-e,0,s,r),s-a+t},easeOutBounce:function(e,t,n,r){var s=n-t;return(e/=r)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){var s=n-t,a;return e<r/2?(a=di.easeInBounce(e*2,0,s,r),a*.5+t):(a=di.easeOutBounce(e*2-r,0,s,r),a*.5+s*.5+t)}},X0=di;function J0(e){return e*Math.PI/180}function At(e,t){return e+Math.random()*(t-e)}function Z0(e,t){return Math.floor(e+Math.random()*(t-e+1))}var xs;(function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"})(xs||(xs={}));var On;(function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"})(On||(On={}));const ew=1e3/60;class tw{constructor(t,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=t,this.x=r,this.y=s,this.w=At(5,20),this.h=At(5,20),this.radius=At(5,10),this.vx=typeof o=="number"?At(-o,o):At(o.min,o.max),this.vy=typeof l=="number"?At(-l,0):At(l.min,l.max),this.shape=Z0(0,2),this.angle=J0(At(0,360)),this.angularSpin=At(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=At(0,1),this.rotationDirection=At(0,1)?On.Positive:On.Negative}update(t){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=t/ew;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===On.Positive?this.rotationDirection=On.Negative:this.rotateY<=-1&&this.rotationDirection===On.Negative&&(this.rotationDirection=On.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case xs.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case xs.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case xs.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class nw{constructor(t,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=At(this.x,this.w+this.x),a=At(this.y,this.h+this.y);return new tw(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:d,recycle:u,numberOfPieces:h,debug:m,tweenFunction:f,tweenDuration:x}=this.getOptions();if(!d)return!1;const g=this.particles.length,y=u?g:l;if(y<h){c!==h&&(this.tweenProgress=0,this.tweenFrom=y,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const S=f(this.tweenProgress,this.tweenFrom,h,x),v=Math.round(S-y);for(let b=0;b<v;b++)this.particles.push(this.getParticle());this.particlesGenerated+=v}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${g}`,a.width-10,a.height-20));for(let S=this.particles.length-1;S>=0;S--){const v=this.particles[S];v.update(s),(v.y>a.height||v.y<-100||v.x>a.width+100||v.x<-100)&&(u&&y<=h?this.particles[S]=this.getParticle():this.removeParticleAt(S))}return g>0||y<h},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const pl={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:X0.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class rw{constructor(t,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...pl,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:c,context:d}=this,u=Math.min(s-this.lastFrameTime,50);if(l&&u<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?u%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new nw(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(t){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&n===!1&&this.update()}}const sw=$.createRef();class gl extends $.Component{constructor(t){super(t),this.canvas=$.createRef(),this.canvas=t.canvasRef||sw}componentDidMount(){if(this.canvas.current){const t=La(this.props)[0];this.confetti=new rw(this.canvas.current,t)}}componentDidUpdate(){const t=La(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,n]=La(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...n,style:r})}}gl.defaultProps={...pl};gl.displayName="ReactConfetti";function La(e){const t={},n={},r={},s=[...Object.keys(pl),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in e){const l=e[o];s.includes(o)?t[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[t,r,n]}const iw=$.forwardRef((e,t)=>i.jsx(gl,{canvasRef:t,...e})),aw=()=>{const[e,t]=p.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return p.useEffect(()=>{const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),e},mi=({trigger:e,duration:t=3e3,message:n,onComplete:r})=>{const[s,a]=p.useState(!1),{width:o,height:l}=aw(),c=o||window.innerWidth||document.documentElement.clientWidth||375,d=l||window.innerHeight||document.documentElement.clientHeight||667;return p.useEffect(()=>{if(e){console.log("Celebration triggered with message:",n),a(!0);const u=setTimeout(()=>{a(!1),r&&r()},t);return()=>clearTimeout(u)}},[e,t,n,r]),s?i.jsxs("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[i.jsx(iw,{width:c,height:d,recycle:!1,numberOfPieces:200,gravity:.2,tweenDuration:5e3}),n&&i.jsx("div",{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white bg-opacity-80 px-6 py-3 rounded-lg shadow-lg text-center",children:i.jsx("p",{className:"text-lg font-bold text-[#4a5d94]",children:n})})]}):null};var st=(e=>(e.FIRST_EVENT_SAVED="first_event_saved",e.ALL_LOCATIONS_VISITED="all_locations_visited",e.MULTIPLE_EVENTS_SAVED="multiple_events_saved",e.NOTIFICATION_SET="notification_set",e.FIRST_LOCATION_VISITED="first_location_visited",e.THREE_LOCATIONS_VISITED="three_locations_visited",e.FIVE_LOCATIONS_VISITED="five_locations_visited",e))(st||{});const ow=[{id:"first_event_saved",title:"Premier √©v√©nement sauvegard√©",description:"Vous avez sauvegard√© votre premier √©v√©nement",celebrationMessage:"F√©licitations ! Vous avez sauvegard√© votre premier √©v√©nement !"},{id:"all_locations_visited",title:"Explorateur de l'√éle",description:"Vous avez visit√© tous les lieux de l'√éle Feydeau",celebrationMessage:"Bravo ! Vous avez visit√© tous les lieux de l'√éle Feydeau !"},{id:"multiple_events_saved",title:"Collectionneur d'√©v√©nements",description:"Vous avez sauvegard√© 5 √©v√©nements ou plus",celebrationMessage:"Impressionnant ! Vous √™tes un vrai collectionneur d'√©v√©nements !"},{id:"notification_set",title:"Toujours √† l'heure",description:"Vous avez configur√© votre premi√®re notification",celebrationMessage:"Super ! Vous ne manquerez plus aucun √©v√©nement !"},{id:"first_location_visited",title:"Premier pas sur l'√éle",description:"Vous avez visit√© votre premier lieu sur l'√éle Feydeau",celebrationMessage:"F√©licitations ! Vous avez fait votre premier pas sur l'√éle Feydeau !"},{id:"three_locations_visited",title:"Explorateur en herbe",description:"Vous avez visit√© 3 lieux sur l'√éle Feydeau",celebrationMessage:"Vous commencez √† bien conna√Ætre l'√éle Feydeau !"},{id:"five_locations_visited",title:"Guide de l'√éle",description:"Vous avez visit√© 5 lieux sur l'√éle Feydeau",celebrationMessage:"Impressionnant ! Vous pourriez maintenant guider les visiteurs sur l'√éle Feydeau !"}],hi=e=>{try{const t=localStorage.getItem("unlockedAchievements");return t?!!JSON.parse(t)[e]:!1}catch(t){return console.error("Erreur dans isAchievementUnlocked:",t),!1}},Ei=e=>{try{console.log(`[achievements] Tentative de d√©blocage de l'achievement: ${e}`);const t=hi(e);if(console.log(`[achievements] Achievement d√©j√† d√©bloqu√©: ${t}`),t)return console.log("[achievements] Achievement d√©j√† d√©bloqu√©, aucune action n√©cessaire"),!1;const n=localStorage.getItem("unlockedAchievements");console.log(`[achievements] R√©cup√©ration des achievements d√©bloqu√©s depuis localStorage: ${n||"aucun"}`);let r={};if(n)try{r=JSON.parse(n),console.log("[achievements] Achievements d√©bloqu√©s pars√©s:",r)}catch(a){console.error("[achievements] Erreur lors de la lecture des r√©alisations d√©bloqu√©es:",a),r={}}const s=new Date().toISOString();r[e]=s,localStorage.setItem("unlockedAchievements",JSON.stringify(r)),console.log(`[achievements] Achievement ${e} d√©bloqu√© √† ${s}`);try{console.log("[achievements] Planification du d√©clenchement de l'√©v√©nement d'achievement dans 100ms"),setTimeout(()=>{const a=fi(e);if(console.log(`[achievements] Message de c√©l√©bration: ${a}`),a){console.log(`[achievements] D√©clenchement de l'√©v√©nement global app-achievement pour: ${e}`);const o=new CustomEvent("app-achievement",{detail:{type:e,message:a}});window.dispatchEvent(o),console.log("[achievements] √âv√©nement global dispatch√© avec succ√®s")}else console.error(`[achievements] Impossible de trouver un message pour l'achievement ${e}`)},100)}catch(a){console.error("[achievements] Erreur lors du d√©clenchement de l'achievement:",a)}return!0}catch(t){return console.error("[achievements] Erreur globale dans unlockAchievement:",t),!1}},fi=e=>{const t=ow.find(n=>n.id===e);return t?t.celebrationMessage:null};var Kc=["light","dark"],lw="(prefers-color-scheme: dark)",cw=p.createContext(void 0),uw={setTheme:e=>{},themes:[]},dw=()=>{var e;return(e=p.useContext(cw))!=null?e:uw};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let d=a==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Kc.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,y=!0)=>{let S=o?o[x]:x,v=g?x+"|| ''":`'${S}'`,b="";return s&&y&&!g&&Kc.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),n==="class"?g||S?b+=`c.add(${v})`:b+="null":S&&(b+=`d[s](n,${v})`),b},f=e?`!function(){${u}${m(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${lw}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var mw=e=>{switch(e){case"success":return pw;case"info":return xw;case"warning":return gw;case"error":return yw;default:return null}},hw=Array(12).fill(0),fw=({visible:e})=>$.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},$.createElement("div",{className:"sonner-spinner"},hw.map((t,n)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),pw=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gw=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xw=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yw=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),vw=()=>{let[e,t]=$.useState(document.hidden);return $.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},So=1,bw=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:So++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0;return r.then(async a=>{if(Sw(a)&&!a.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:n,type:"error",message:o,description:l})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=t.finally)==null||a.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||So++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},_t=new bw,ww=(e,t)=>{let n=(t==null?void 0:t.id)||So++;return _t.addToast({title:e,...t,id:n}),n},Sw=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",jw=ww,Ew=()=>_t.toasts;Object.assign(jw,{success:_t.success,info:_t.info,warning:_t.warning,error:_t.error,custom:_t.custom,message:_t.message,promise:_t.promise,dismiss:_t.dismiss,loading:_t.loading},{getHistory:Ew});function Nw(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Nw(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ys(e){return e.label!==void 0}var Cw=3,Iw="32px",kw=4e3,Aw=356,Tw=14,Pw=20,_w=200;function Mw(...e){return e.filter(Boolean).join(" ")}var Dw=e=>{var t,n,r,s,a,o,l,c,d,u;let{invert:h,toast:m,unstyled:f,interacting:x,setHeights:g,visibleToasts:y,heights:S,index:v,toasts:b,expanded:w,removeToast:k,defaultRichColors:N,closeButton:P,style:D,cancelButtonStyle:A,actionButtonStyle:M,className:C="",descriptionClassName:T="",duration:z,position:Y,gap:q,loadingIcon:J,expandByDefault:ne,classNames:L,icons:H,closeButtonAriaLabel:j="Close toast",pauseWhenPageIsHidden:K,cn:ie}=e,[E,le]=$.useState(!1),[Ae,F]=$.useState(!1),[te,ce]=$.useState(!1),[he,ze]=$.useState(!1),[Et,Nt]=$.useState(0),[Ft,Ze]=$.useState(0),tt=$.useRef(null),Ct=$.useRef(null),kn=v===0,I=v+1<=y,_=m.type,O=m.dismissible!==!1,Z=m.className||"",Q=m.descriptionClassName||"",G=$.useMemo(()=>S.findIndex(ue=>ue.toastId===m.id)||0,[S,m.id]),ae=$.useMemo(()=>{var ue;return(ue=m.closeButton)!=null?ue:P},[m.closeButton,P]),pe=$.useMemo(()=>m.duration||z||kw,[m.duration,z]),R=$.useRef(0),U=$.useRef(0),oe=$.useRef(0),fe=$.useRef(null),[we,nt]=Y.split("-"),$t=$.useMemo(()=>S.reduce((ue,De,Te)=>Te>=G?ue:ue+De.height,0),[S,G]),ut=vw(),gn=m.invert||h,zt=_==="loading";U.current=$.useMemo(()=>G*q+$t,[G,$t]),$.useEffect(()=>{le(!0)},[]),$.useLayoutEffect(()=>{if(!E)return;let ue=Ct.current,De=ue.style.height;ue.style.height="auto";let Te=ue.getBoundingClientRect().height;ue.style.height=De,Ze(Te),g(Xt=>Xt.find(Jt=>Jt.toastId===m.id)?Xt.map(Jt=>Jt.toastId===m.id?{...Jt,height:Te}:Jt):[{toastId:m.id,height:Te,position:m.position},...Xt])},[E,m.title,m.description,g,m.id]);let Ve=$.useCallback(()=>{F(!0),Nt(U.current),g(ue=>ue.filter(De=>De.toastId!==m.id)),setTimeout(()=>{k(m)},_w)},[m,k,g,U]);$.useEffect(()=>{if(m.promise&&_==="loading"||m.duration===1/0||m.type==="loading")return;let ue,De=pe;return w||x||K&&ut?(()=>{if(oe.current<R.current){let Te=new Date().getTime()-R.current;De=De-Te}oe.current=new Date().getTime()})():De!==1/0&&(R.current=new Date().getTime(),ue=setTimeout(()=>{var Te;(Te=m.onAutoClose)==null||Te.call(m,m),Ve()},De)),()=>clearTimeout(ue)},[w,x,ne,m,pe,Ve,m.promise,_,K,ut]),$.useEffect(()=>{let ue=Ct.current;if(ue){let De=ue.getBoundingClientRect().height;return Ze(De),g(Te=>[{toastId:m.id,height:De,position:m.position},...Te]),()=>g(Te=>Te.filter(Xt=>Xt.toastId!==m.id))}},[g,m.id]),$.useEffect(()=>{m.delete&&Ve()},[Ve,m.delete]);function An(){return H!=null&&H.loading?$.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},H.loading):J?$.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},J):$.createElement(fw,{visible:_==="loading"})}return $.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ct,className:ie(C,Z,L==null?void 0:L.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[_],(n=m==null?void 0:m.classNames)==null?void 0:n[_]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||f),"data-mounted":E,"data-promise":!!m.promise,"data-removed":Ae,"data-visible":I,"data-y-position":we,"data-x-position":nt,"data-index":v,"data-front":kn,"data-swiping":te,"data-dismissible":O,"data-type":_,"data-invert":gn,"data-swipe-out":he,"data-expanded":!!(w||ne&&E),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${Ae?Et:U.current}px`,"--initial-height":ne?"auto":`${Ft}px`,...D,...m.style},onPointerDown:ue=>{zt||!O||(tt.current=new Date,Nt(U.current),ue.target.setPointerCapture(ue.pointerId),ue.target.tagName!=="BUTTON"&&(ce(!0),fe.current={x:ue.clientX,y:ue.clientY}))},onPointerUp:()=>{var ue,De,Te,Xt;if(he||!O)return;fe.current=null;let Jt=Number(((ue=Ct.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Hs=new Date().getTime()-((De=tt.current)==null?void 0:De.getTime()),ix=Math.abs(Jt)/Hs;if(Math.abs(Jt)>=Pw||ix>.11){Nt(U.current),(Te=m.onDismiss)==null||Te.call(m,m),Ve(),ze(!0);return}(Xt=Ct.current)==null||Xt.style.setProperty("--swipe-amount","0px"),ce(!1)},onPointerMove:ue=>{var De;if(!fe.current||!O)return;let Te=ue.clientY-fe.current.y,Xt=ue.clientX-fe.current.x,Jt=(we==="top"?Math.min:Math.max)(0,Te),Hs=ue.pointerType==="touch"?10:2;Math.abs(Jt)>Hs?(De=Ct.current)==null||De.style.setProperty("--swipe-amount",`${Te}px`):Math.abs(Xt)>Hs&&(fe.current=null)}},ae&&!m.jsx?$.createElement("button",{"aria-label":j,"data-disabled":zt,"data-close-button":!0,onClick:zt||!O?()=>{}:()=>{var ue;Ve(),(ue=m.onDismiss)==null||ue.call(m,m)},className:ie(L==null?void 0:L.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||$.isValidElement(m.title)?m.jsx||m.title:$.createElement($.Fragment,null,_||m.icon||m.promise?$.createElement("div",{"data-icon":"",className:ie(L==null?void 0:L.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||An():null,m.type!=="loading"?m.icon||(H==null?void 0:H[_])||mw(_):null):null,$.createElement("div",{"data-content":"",className:ie(L==null?void 0:L.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},$.createElement("div",{"data-title":"",className:ie(L==null?void 0:L.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?$.createElement("div",{"data-description":"",className:ie(T,Q,L==null?void 0:L.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),$.isValidElement(m.cancel)?m.cancel:m.cancel&&Ys(m.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:ue=>{var De,Te;Ys(m.cancel)&&O&&((Te=(De=m.cancel).onClick)==null||Te.call(De,ue),Ve())},className:ie(L==null?void 0:L.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,$.isValidElement(m.action)?m.action:m.action&&Ys(m.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:ue=>{var De,Te;Ys(m.action)&&(ue.defaultPrevented||((Te=(De=m.action).onClick)==null||Te.call(De,ue),Ve()))},className:ie(L==null?void 0:L.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function Qc(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var Rw=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:m=Cw,toastOptions:f,dir:x=Qc(),gap:g=Tw,loadingIcon:y,icons:S,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:b,cn:w=Mw}=e,[k,N]=$.useState([]),P=$.useMemo(()=>Array.from(new Set([n].concat(k.filter(K=>K.position).map(K=>K.position)))),[k,n]),[D,A]=$.useState([]),[M,C]=$.useState(!1),[T,z]=$.useState(!1),[Y,q]=$.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=$.useRef(null),ne=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=$.useRef(null),H=$.useRef(!1),j=$.useCallback(K=>{var ie;(ie=k.find(E=>E.id===K.id))!=null&&ie.delete||_t.dismiss(K.id),N(E=>E.filter(({id:le})=>le!==K.id))},[k]);return $.useEffect(()=>_t.subscribe(K=>{if(K.dismiss){N(ie=>ie.map(E=>E.id===K.id?{...E,delete:!0}:E));return}setTimeout(()=>{ry.flushSync(()=>{N(ie=>{let E=ie.findIndex(le=>le.id===K.id);return E!==-1?[...ie.slice(0,E),{...ie[E],...K},...ie.slice(E+1)]:[K,...ie]})})})}),[]),$.useEffect(()=>{if(c!=="system"){q(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:K})=>{q(K?"dark":"light")})},[c]),$.useEffect(()=>{k.length<=1&&C(!1)},[k]),$.useEffect(()=>{let K=ie=>{var E,le;r.every(Ae=>ie[Ae]||ie.code===Ae)&&(C(!0),(E=J.current)==null||E.focus()),ie.code==="Escape"&&(document.activeElement===J.current||(le=J.current)!=null&&le.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[r]),$.useEffect(()=>{if(J.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,H.current=!1)}},[J.current]),k.length?$.createElement("section",{"aria-label":`${v} ${ne}`,tabIndex:-1},P.map((K,ie)=>{var E;let[le,Ae]=K.split("-");return $.createElement("ol",{key:K,dir:x==="auto"?Qc():x,tabIndex:-1,ref:J,className:o,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":le,"data-x-position":Ae,style:{"--front-toast-height":`${((E=D[0])==null?void 0:E.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||Iw,"--width":`${Aw}px`,"--gap":`${g}px`,...h},onBlur:F=>{H.current&&!F.currentTarget.contains(F.relatedTarget)&&(H.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||H.current||(H.current=!0,L.current=F.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{T||C(!1)},onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},k.filter(F=>!F.position&&ie===0||F.position===K).map((F,te)=>{var ce,he;return $.createElement(Dw,{key:F.id,icons:S,index:te,toast:F,defaultRichColors:d,duration:(ce=f==null?void 0:f.duration)!=null?ce:u,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:t,visibleToasts:m,closeButton:(he=f==null?void 0:f.closeButton)!=null?he:a,interacting:T,position:K,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:j,toasts:k.filter(ze=>ze.position==F.position),heights:D.filter(ze=>ze.position==F.position),setHeights:A,expandByDefault:s,gap:g,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:b,cn:w})}))})):null};const Ow=({...e})=>{const{theme:t="system"}=dw();return i.jsx(Rw,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[Zi,T2]=Zr("Tooltip",[Ui]),ea=Ui(),Ch="TooltipProvider",Lw=700,jo="tooltip.open",[Fw,xl]=Zi(Ch),Ih=e=>{const{__scopeTooltip:t,delayDuration:n=Lw,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,[o,l]=p.useState(!0),c=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),i.jsx(Fw,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(u=>{c.current=u},[]),disableHoverableContent:s,children:a})};Ih.displayName=Ch;var ta="Tooltip",[$w,na]=Zi(ta),kh=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=xl(ta,e.__scopeTooltip),d=ea(t),[u,h]=p.useState(null),m=co(),f=p.useRef(0),x=o??c.disableHoverableContent,g=l??c.delayDuration,y=p.useRef(!1),[S=!1,v]=qi({prop:r,defaultProp:s,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(jo))):c.onClose(),a==null||a(P)}}),b=p.useMemo(()=>S?y.current?"delayed-open":"instant-open":"closed",[S]),w=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y.current=!1,v(!0)},[v]),k=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),N=p.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,v(!0),f.current=0},g)},[g,v]);return p.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),i.jsx(em,{...d,children:i.jsx($w,{scope:t,contentId:m,open:S,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?N():w()},[c.isOpenDelayed,N,w]),onTriggerLeave:p.useCallback(()=>{x?k():(window.clearTimeout(f.current),f.current=0)},[k,x]),onOpen:w,onClose:k,disableHoverableContent:x,children:n})})};kh.displayName=ta;var Eo="TooltipTrigger",Ah=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=na(Eo,n),a=xl(Eo,n),o=ea(n),l=p.useRef(null),c=Je(t,l,s.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),h=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Qd,{asChild:!0,...o,children:i.jsx(We.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:me(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:me(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:me(e.onBlur,s.onClose),onClick:me(e.onClick,s.onClose)})})});Ah.displayName=Eo;var zw="TooltipPortal",[P2,Bw]=Zi(zw,{forceMount:void 0}),Kr="TooltipContent",Th=p.forwardRef((e,t)=>{const n=Bw(Kr,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=na(Kr,e.__scopeTooltip);return i.jsx(fn,{present:r||o.open,children:o.disableHoverableContent?i.jsx(Ph,{side:s,...a,ref:t}):i.jsx(Vw,{side:s,...a,ref:t})})}),Vw=p.forwardRef((e,t)=>{const n=na(Kr,e.__scopeTooltip),r=xl(Kr,e.__scopeTooltip),s=p.useRef(null),a=Je(t,s),[o,l]=p.useState(null),{trigger:c,onClose:d}=n,u=s.current,{onPointerInTransitChange:h}=r,m=p.useCallback(()=>{l(null),h(!1)},[h]),f=p.useCallback((x,g)=>{const y=x.currentTarget,S={x:x.clientX,y:x.clientY},v=Gw(S,y.getBoundingClientRect()),b=Ww(S,v),w=Yw(g.getBoundingClientRect()),k=Qw([...b,...w]);l(k),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&u){const x=y=>f(y,u),g=y=>f(y,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,f,m]),p.useEffect(()=>{if(o){const x=g=>{const y=g.target,S={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),b=!Kw(S,o);v?m():b&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),i.jsx(Ph,{...e,ref:a})}),[Uw,qw]=Zi(ta,{isInside:!1}),Ph=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=na(Kr,n),d=ea(n),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(jo,u),()=>document.removeEventListener(jo,u)),[u]),p.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),i.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:i.jsxs(Jd,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(cx,{children:r}),i.jsx(Uw,{scope:n,isInside:!0,children:i.jsx(ux,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Th.displayName=Kr;var _h="TooltipArrow",Hw=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ea(n);return qw(_h,n).isInside?null:i.jsx(Zd,{...s,...r,ref:t})});Hw.displayName=_h;function Gw(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ww(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Yw(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Kw(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function Qw(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Xw(t)}function Xw(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Jw=Ih,Zw=kh,e1=Ah,Mh=Th;const Dh=Jw,t1=Zw,n1=e1,Rh=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Mh,{ref:r,sideOffset:t,className:se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Rh.displayName=Mh.displayName;var ra=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sa=typeof window>"u"||"Deno"in globalThis;function Gt(){}function r1(e,t){return typeof e=="function"?e(t):e}function s1(e){return typeof e=="number"&&e>=0&&e!==1/0}function i1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xc(e,t){return typeof e=="function"?e(t):e}function a1(e,t){return typeof e=="function"?e(t):e}function Jc(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==yl(o,t.options))return!1}else if(!Is(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Zc(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Cs(t.options.mutationKey)!==Cs(a))return!1}else if(!Is(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function yl(e,t){return((t==null?void 0:t.queryKeyHashFn)||Cs)(e)}function Cs(e){return JSON.stringify(e,(t,n)=>No(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Is(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Is(e[n],t[n])):!1}function Oh(e,t){if(e===t)return e;const n=eu(e)&&eu(t);if(n||No(e)&&No(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Oh(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function eu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function No(e){if(!tu(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!tu(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tu(e){return Object.prototype.toString.call(e)==="[object Object]"}function o1(e){return new Promise(t=>{setTimeout(t,e)})}function l1(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Oh(e,t):t}function c1(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function u1(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var vl=Symbol();function Lh(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vl?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var dr,$n,$r,Od,d1=(Od=class extends ra{constructor(){super();Ce(this,dr);Ce(this,$n);Ce(this,$r);ye(this,$r,t=>{if(!sa&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,$n)||this.setEventListener(B(this,$r))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,$n))==null||t.call(this),ye(this,$n,void 0))}setEventListener(t){var n;ye(this,$r,t),(n=B(this,$n))==null||n.call(this),ye(this,$n,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,dr)!==t&&(ye(this,dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,dr)=="boolean"?B(this,dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dr=new WeakMap,$n=new WeakMap,$r=new WeakMap,Od),Fh=new d1,zr,zn,Br,Ld,m1=(Ld=class extends ra{constructor(){super();Ce(this,zr,!0);Ce(this,zn);Ce(this,Br);ye(this,Br,t=>{if(!sa&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,zn)||this.setEventListener(B(this,Br))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,zn))==null||t.call(this),ye(this,zn,void 0))}setEventListener(t){var n;ye(this,Br,t),(n=B(this,zn))==null||n.call(this),ye(this,zn,t(this.setOnline.bind(this)))}setOnline(t){B(this,zr)!==t&&(ye(this,zr,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,zr)}},zr=new WeakMap,zn=new WeakMap,Br=new WeakMap,Ld),Ni=new m1;function h1(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function f1(e){return Math.min(1e3*2**e,3e4)}function $h(e){return(e??"online")==="online"?Ni.isOnline():!0}var zh=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Fa(e){return e instanceof zh}function Bh(e){let t=!1,n=0,r=!1,s;const a=h1(),o=g=>{var y;r||(m(new zh(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Fh.isFocused()&&(e.networkMode==="always"||Ni.isOnline())&&e.canRun(),u=()=>$h(e.networkMode)&&e.canRun(),h=g=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,g),s==null||s(),a.resolve(g))},m=g=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,g),s==null||s(),a.reject(g))},f=()=>new Promise(g=>{var y;s=S=>{(r||d())&&g(S)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(r)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(S){g=Promise.reject(S)}Promise.resolve(g).then(h).catch(S=>{var N;if(r)return;const v=e.retry??(sa?0:3),b=e.retryDelay??f1,w=typeof b=="function"?b(n,S):b,k=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,S);if(t||!k){m(S);return}n++,(N=e.onFail)==null||N.call(e,n,S),o1(w).then(()=>d()?void 0:f()).then(()=>{t?m(S):x()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():f().then(x),a)}}function p1(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var ht=p1(),mr,Fd,Vh=(Fd=class{constructor(){Ce(this,mr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s1(this.gcTime)&&ye(this,mr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(sa?1/0:5*60*1e3))}clearGcTimeout(){B(this,mr)&&(clearTimeout(B(this,mr)),ye(this,mr,void 0))}},mr=new WeakMap,Fd),Vr,Ur,Bt,ot,Os,hr,Wt,vn,$d,g1=($d=class extends Vh{constructor(t){super();Ce(this,Wt);Ce(this,Vr);Ce(this,Ur);Ce(this,Bt);Ce(this,ot);Ce(this,Os);Ce(this,hr);ye(this,hr,!1),ye(this,Os,t.defaultOptions),this.setOptions(t.options),this.observers=[],ye(this,Bt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ye(this,Vr,y1(this.options)),this.state=t.state??B(this,Vr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,ot))==null?void 0:t.promise}setOptions(t){this.options={...B(this,Os),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Bt).remove(this)}setData(t,n){const r=l1(this.state.data,t,this.options);return at(this,Wt,vn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){at(this,Wt,vn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=B(this,ot))==null?void 0:r.promise;return(s=B(this,ot))==null||s.cancel(t),n?n.then(Gt).catch(Gt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Vr))}isActive(){return this.observers.some(t=>a1(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!i1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,ot))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,ot))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,Bt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,ot)&&(B(this,hr)?B(this,ot).cancel({revert:!0}):B(this,ot).cancelRetry()),this.scheduleGc()),B(this,Bt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,Wt,vn).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,ot))return B(this,ot).continueRetry(),B(this,ot).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ye(this,hr,!0),r.signal)})},a=()=>{const h=Lh(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return s(m),ye(this,hr,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),ye(this,Ur,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&at(this,Wt,vn).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,f,x,g;Fa(h)&&h.silent||at(this,Wt,vn).call(this,{type:"error",error:h}),Fa(h)||((f=(m=B(this,Bt).config).onError)==null||f.call(m,h,this),(g=(x=B(this,Bt).config).onSettled)==null||g.call(x,this.state.data,h,this)),this.scheduleGc()};return ye(this,ot,Bh({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,f,x,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){l(y);return}(f=(m=B(this,Bt).config).onSuccess)==null||f.call(m,h,this),(g=(x=B(this,Bt).config).onSettled)==null||g.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{at(this,Wt,vn).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{at(this,Wt,vn).call(this,{type:"pause"})},onContinue:()=>{at(this,Wt,vn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),B(this,ot).start()}},Vr=new WeakMap,Ur=new WeakMap,Bt=new WeakMap,ot=new WeakMap,Os=new WeakMap,hr=new WeakMap,Wt=new WeakSet,vn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...x1(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Fa(s)&&s.revert&&B(this,Ur)?{...B(this,Ur),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ht.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,Bt).notify({query:this,type:"updated",action:t})})},$d);function x1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$h(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function y1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var nn,zd,v1=(zd=class extends ra{constructor(t={}){super();Ce(this,nn);this.config=t,ye(this,nn,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??yl(s,n);let o=this.get(a);return o||(o=new g1({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){B(this,nn).has(t.queryHash)||(B(this,nn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,nn).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,nn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ht.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,nn).get(t)}getAll(){return[...B(this,nn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Jc(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Jc(t,r)):n}notify(t){ht.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},nn=new WeakMap,zd),rn,dt,fr,sn,Rn,Bd,b1=(Bd=class extends Vh{constructor(t){super();Ce(this,sn);Ce(this,rn);Ce(this,dt);Ce(this,fr);this.mutationId=t.mutationId,ye(this,dt,t.mutationCache),ye(this,rn,[]),this.state=t.state||w1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,rn).includes(t)||(B(this,rn).push(t),this.clearGcTimeout(),B(this,dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ye(this,rn,B(this,rn).filter(n=>n!==t)),this.scheduleGc(),B(this,dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,rn).length||(this.state.status==="pending"?this.scheduleGc():B(this,dt).remove(this))}continue(){var t;return((t=B(this,fr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,l,c,d,u,h,m,f,x,g,y,S,v,b,w,k,N,P;ye(this,fr,Bh({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,A)=>{at(this,sn,Rn).call(this,{type:"failed",failureCount:D,error:A})},onPause:()=>{at(this,sn,Rn).call(this,{type:"pause"})},onContinue:()=>{at(this,sn,Rn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,dt).canRun(this)}));const n=this.state.status==="pending",r=!B(this,fr).canStart();try{if(!n){at(this,sn,Rn).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=B(this,dt).config).onMutate)==null?void 0:a.call(s,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&at(this,sn,Rn).call(this,{type:"pending",context:A,variables:t,isPaused:r})}const D=await B(this,fr).start();return await((d=(c=B(this,dt).config).onSuccess)==null?void 0:d.call(c,D,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,D,t,this.state.context)),await((f=(m=B(this,dt).config).onSettled)==null?void 0:f.call(m,D,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,D,null,t,this.state.context)),at(this,sn,Rn).call(this,{type:"success",data:D}),D}catch(D){try{throw await((S=(y=B(this,dt).config).onError)==null?void 0:S.call(y,D,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,D,t,this.state.context)),await((k=(w=B(this,dt).config).onSettled)==null?void 0:k.call(w,void 0,D,this.state.variables,this.state.context,this)),await((P=(N=this.options).onSettled)==null?void 0:P.call(N,void 0,D,t,this.state.context)),D}finally{at(this,sn,Rn).call(this,{type:"error",error:D})}}finally{B(this,dt).runNext(this)}}},rn=new WeakMap,dt=new WeakMap,fr=new WeakMap,sn=new WeakSet,Rn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ht.batch(()=>{B(this,rn).forEach(r=>{r.onMutationUpdate(t)}),B(this,dt).notify({mutation:this,type:"updated",action:t})})},Bd);function w1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pt,Ls,Vd,S1=(Vd=class extends ra{constructor(t={}){super();Ce(this,Pt);Ce(this,Ls);this.config=t,ye(this,Pt,new Map),ye(this,Ls,Date.now())}build(t,n,r){const s=new b1({mutationCache:this,mutationId:++Gs(this,Ls)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Ks(t),r=B(this,Pt).get(n)??[];r.push(t),B(this,Pt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Ks(t);if(B(this,Pt).has(n)){const s=(r=B(this,Pt).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?B(this,Pt).delete(n):B(this,Pt).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=B(this,Pt).get(Ks(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=B(this,Pt).get(Ks(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ht.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Pt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Zc(n,r))}findAll(t={}){return this.getAll().filter(n=>Zc(t,n))}notify(t){ht.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ht.batch(()=>Promise.all(t.map(n=>n.continue().catch(Gt))))}},Pt=new WeakMap,Ls=new WeakMap,Vd);function Ks(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function nu(e){return{onFetch:(t,n)=>{var u,h,m,f,x;const r=t.options,s=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},S=Lh(t.options,t.fetchOptions),v=async(b,w,k)=>{if(g)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const N={queryKey:t.queryKey,pageParam:w,direction:k?"backward":"forward",meta:t.options.meta};y(N);const P=await S(N),{maxPages:D}=t.options,A=k?u1:c1;return{pages:A(b.pages,P,D),pageParams:A(b.pageParams,w,D)}};if(s&&a.length){const b=s==="backward",w=b?j1:ru,k={pages:a,pageParams:o},N=w(r,k);l=await v(k,N,b)}else{const b=e??a.length;do{const w=c===0?o[0]??r.initialPageParam:ru(r,l);if(c>0&&w==null)break;l=await v(l,w),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function ru(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function j1(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var qe,Bn,Vn,qr,Hr,Un,Gr,Wr,Ud,E1=(Ud=class{constructor(e={}){Ce(this,qe);Ce(this,Bn);Ce(this,Vn);Ce(this,qr);Ce(this,Hr);Ce(this,Un);Ce(this,Gr);Ce(this,Wr);ye(this,qe,e.queryCache||new v1),ye(this,Bn,e.mutationCache||new S1),ye(this,Vn,e.defaultOptions||{}),ye(this,qr,new Map),ye(this,Hr,new Map),ye(this,Un,0)}mount(){Gs(this,Un)._++,B(this,Un)===1&&(ye(this,Gr,Fh.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,qe).onFocus())})),ye(this,Wr,Ni.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,qe).onOnline())})))}unmount(){var e,t;Gs(this,Un)._--,B(this,Un)===0&&((e=B(this,Gr))==null||e.call(this),ye(this,Gr,void 0),(t=B(this,Wr))==null||t.call(this),ye(this,Wr,void 0))}isFetching(e){return B(this,qe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,Bn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,qe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=B(this,qe).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Xc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,qe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=B(this,qe).get(r.queryHash),a=s==null?void 0:s.state.data,o=r1(t,a);if(o!==void 0)return B(this,qe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ht.batch(()=>B(this,qe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,qe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,qe);ht.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,qe),r={type:"active",...e};return ht.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=ht.batch(()=>B(this,qe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Gt).catch(Gt)}invalidateQueries(e={},t={}){return ht.batch(()=>{if(B(this,qe).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=ht.batch(()=>B(this,qe).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Gt)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Gt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,qe).build(this,t);return n.isStaleByTime(Xc(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Gt).catch(Gt)}fetchInfiniteQuery(e){return e.behavior=nu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Gt).catch(Gt)}ensureInfiniteQueryData(e){return e.behavior=nu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ni.isOnline()?B(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,qe)}getMutationCache(){return B(this,Bn)}getDefaultOptions(){return B(this,Vn)}setDefaultOptions(e){ye(this,Vn,e)}setQueryDefaults(e,t){B(this,qr).set(Cs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,qr).values()];let n={};return t.forEach(r=>{Is(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){B(this,Hr).set(Cs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Hr).values()];let n={};return t.forEach(r=>{Is(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Vn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=yl(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===vl&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Vn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,qe).clear(),B(this,Bn).clear()}},qe=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,qr=new WeakMap,Hr=new WeakMap,Un=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,Ud),N1=p.createContext(void 0),C1=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(N1.Provider,{value:e,children:t}));const I1={info:"#4a5d94",warn:"#ff7a45",error:"#e53935",debug:"#2e7d32"},$a=[],k1=100;function cr(e,t,n="info",r){if(n==="info"&&["Rendu du marqueur utilisateur","Position utilisateur mise √† jour","Position utilisateur mise √† jour sur la carte","redimensionn√©","Marqueur utilisateur","Rendu du marqueur","Position utilisateur"].some(u=>t.includes(u)||r&&JSON.stringify(r).includes(u))&&!t.includes("Toast d'√©loignement"))return;const s=new Date,o=`[${s.toISOString().split("T")[1].split(".")[0]}][${e}]`,l=`color: ${I1[n]}; font-weight: bold`;switch($a.push({timestamp:s.toISOString(),module:e,message:t,level:n,data:r}),$a.length>k1&&$a.shift(),n){case"info":console.log(`%c${o} ${t}`,l,r||"");break;case"warn":console.warn(`%c${o} ${t}`,l,r||"");break;case"error":console.error(`%c${o} ${t}`,l,r||"");break;case"debug":console.debug(`%c${o} ${t}`,l,r||"");break}}function Ye(e){return{info:(t,n)=>cr(e,t,"info",n),warn:(t,n)=>cr(e,t,"warn",n),error:(t,n)=>cr(e,t,"error",n),debug:(t,n)=>cr(e,t,"debug",n)}}function A1(){window.onerror=(e,t,n,r,s)=>(cr("GlobalErrorHandler",`Erreur non g√©r√©e: ${e}`,"error",{source:t,lineno:n,colno:r,error:s}),!1),window.onunhandledrejection=e=>{cr("GlobalErrorHandler","Promesse rejet√©e non g√©r√©e","error",{reason:e.reason})},cr("Logger","Gestionnaires d'erreurs globaux initialis√©s","info")}const tr=Ye("NavigationContext"),T1=p.createContext(void 0),su=20,P1=({children:e})=>{const t=xt(),n=In(),[r,s]=p.useState([]),[a,o]=p.useState(-1),l=a>0,c=a<r.length-1;p.useEffect(()=>{const x={path:n.pathname,state:n.state,timestamp:Date.now()};s([x]),o(0),tr.info("Historique de navigation initialis√©",{path:n.pathname})},[]),p.useEffect(()=>{if(r.length===0)return;if(!r.some(g=>g.path===n.pathname&&JSON.stringify(g.state)===JSON.stringify(n.state))){const g={path:n.pathname,state:n.state,timestamp:Date.now()},y=[...r.slice(0,a+1),g],S=y.length>su?y.slice(y.length-su):y;s(S),o(S.length-1),tr.info("Nouvelle entr√©e ajout√©e √† l'historique",{path:n.pathname,historyLength:S.length})}},[n,r,a]);const f={history:r,currentIndex:a,goBack:()=>{if(l){const x=r[a-1];t(x.path,{state:x.state}),o(a-1),tr.info("Navigation arri√®re",{to:x.path})}else tr.warn("Tentative de navigation arri√®re impossible")},goForward:()=>{if(c){const x=r[a+1];t(x.path,{state:x.state}),o(a+1),tr.info("Navigation avant",{to:x.path})}else tr.warn("Tentative de navigation avant impossible")},navigateTo:(x,g,y)=>{t(x,{state:g}),tr.info("Navigation vers",{path:x,hasState:!!g})},canGoBack:l,canGoForward:c,getPreviousPath:()=>a>0?r[a-1].path:null};return i.jsx(T1.Provider,{value:f,children:e})},_1=({size:e="medium",color:t="#4a5d94",fullScreen:n=!1,text:r="Chargement..."})=>{const a={small:"w-6 h-6",medium:"w-10 h-10",large:"w-16 h-16"}[e],o=n?({children:l})=>i.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50",children:l}):({children:l})=>i.jsx("div",{className:"flex flex-col items-center justify-center py-4",children:l});return i.jsx(o,{children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`${a} animate-spin`,children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:t,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&i.jsx("p",{className:"mt-2 text-sm font-medium",style:{color:t},children:r})]})})},M1=p.createContext({isLoading:!1,startLoading:()=>{},stopLoading:()=>{}}),D1=({children:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState("Chargement..."),a=p.useCallback(l=>{l&&s(l),n(!0)},[]),o=p.useCallback(()=>{n(!1),setTimeout(()=>{s("Chargement...")},300)},[]);return i.jsxs(M1.Provider,{value:{isLoading:t,startLoading:a,stopLoading:o},children:[e,t&&i.jsx(_1,{fullScreen:!0,text:r})]})},Qs=["/map","/program","/saved","/about","/donate"],R1={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},slide:{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{type:"spring",stiffness:300,damping:30}},scale:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:30}},flip:{initial:{rotateY:90,opacity:0},animate:{rotateY:0,opacity:1},exit:{rotateY:-90,opacity:0},transition:{duration:.4}}},O1={"/map":"scale","/program":"slide","/saved-events":"slide","/donate":"fade","/about":"fade","/admin":"fade","/location-history":"flip"},L1=["/","/map","/program","/saved","/about","/donate"];function bl({children:e,transitionType:t,enableSwipe:n=!1}){const r=xt(),s=In(),[a,o]=p.useState(null),[l,c]=p.useState(0),[d,u]=p.useState(null);p.useEffect(()=>{const v=s.pathname==="/"?"/map":s.pathname,b=Qs.indexOf(v);b!==-1&&c(b)},[s.pathname]);const m=t||O1[s.pathname]||"fade",f=R1[m],x=v=>{n&&o(v.touches[0].clientX)},g=v=>{if(!n||a===null)return;const w=v.changedTouches[0].clientX-a,k=window.innerWidth*.2;Math.abs(w)>k&&(w>0&&l>0?(u("right"),r(Qs[l-1])):w<0&&l<Qs.length-1&&(u("left"),r(Qs[l+1]))),o(null)},S=n?{initial:v=>({x:v==="right"?"-100%":v==="left"?"100%":0,opacity:0}),animate:{x:0,opacity:1,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}},exit:v=>({x:v==="left"?"-100%":v==="right"?"100%":0,opacity:0,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}})}:{initial:f.initial,animate:f.animate,exit:f.exit,transition:f.transition};return i.jsx(be.div,{className:"animated-page-transition",onTouchStart:x,onTouchEnd:g,initial:"initial",animate:"animate",exit:"exit",variants:S,custom:d,style:{width:"100%",height:"100%",overflowX:"hidden",position:"relative",touchAction:"pan-y"},children:e},s.pathname)}function F1(e){return L1.includes(e)}const $1=Ye("ServiceWorker"),iu=()=>{$1.info("Service worker registration is temporarily disabled")},ks=()=>typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,z1=e=>{if(typeof window>"u")return;const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),e(ks()),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}},B1=(e,t)=>{},V1=()=>{};class U1{constructor(){It(this,"cache",new Map);It(this,"defaultExpiry",30*60*1e3)}set(t,n,r=this.defaultExpiry){this.cache.set(t,{data:n,timestamp:Date.now(),expiry:r})}get(t){const n=this.cache.get(t);return n?n.expiry!==null&&Date.now()-n.timestamp>n.expiry?(this.cache.delete(t),null):n.data:null}async getOrSet(t,n,r=this.defaultExpiry){const s=this.get(t);if(s!==null)return s;const a=await n();return this.set(t,a,r),a}remove(t){this.cache.delete(t)}has(t){return this.get(t)!==null}clear(){this.cache.clear()}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries())r.expiry!==null&&t-r.timestamp>r.expiry&&this.cache.delete(n)}}const dn=new U1,Uh=[{id:"bruno-barbier",name:"Bruno Barbier",type:"exposition",title:"Peintures et dessins",presentation:"Artiste peintre et dessinateur install√© √† Nantes, explorant les th√®mes du souvenir et de la nostalgie, Bruno Barbier √©voque des fragments de m√©moire, entre √©motions pass√©es et traces du temps.",instagram:"https://www.instagram.com/brunobarbierpainter"},{id:"alain-gremillet",name:"Alain Gremillet",type:"exposition",title:"Peinture abstraite",presentation:"Artiste peintre abstrait, associant couleurs, mouvements et lumi√®re pour susciter l'√©motion. L'artiste peintre abstrait Alain Gremillet explore librement la mati√®re avec acrylique, spatules et objets du quotidien, donnant naissance √† des ≈ìuvres uniques et lumineuses.",instagram:"https://www.instagram.com/alaingremillet"},{id:"jerome-gourdon",name:"J√©r√¥me Gourdon",type:"exposition",title:"Photo-√©mographie",presentation:"Photo-√©mographe, m√™lant photographie, intervention in-situ et peinture acrylique. J√©r√¥me Gourdon se d√©finit comme un photo-√©mographe. Son travail explore les fronti√®res entre image capt√©e et image transform√©e, pour cr√©er des ≈ìuvres √† la crois√©e des m√©diums.",instagram:"https://www.instagram.com/jerome_gourdon"},{id:"nadege-hameau",name:"Nad√®ge Hameau",type:"exposition",title:"Marqueur acrylique",presentation:"Artiste autodidacte. Des mondes imaginaires prennent forme au marqueur acrylique, dans un style m√™lant pointillisme, pr√©cision et r√™verie. Autodidacte, Nadhame.artiste, alias Nad√®ge Hameau, cultive une d√©marche empreinte de patience et de po√©sie visuelle.",instagram:"https://www.instagram.com/nadhame.artiste"},{id:"pauline-crusson",name:"Pauline Crusson",type:"exposition",title:"PaoaNaoned",presentation:"Illustratrice nantaise. Revisitant les cartes postales du vieux Nantes avec un style unique et d√©taill√©, Pauline Crusson sous le nom de PaoaNaoned, redonne vie √† ces images anciennes. Elle capture ainsi l'essence de la ville √† travers ses dessins.",instagram:"https://www.instagram.com/paoanaoned"},{id:"marie-husson",name:"Marie Husson",type:"exposition",title:"Dessins et peintures",presentation:"Artiste peintre et dessinatrice. Explorant des instants d'intimit√© √† la lisi√®re du visible, Marie Husson archive ses d√©couvertes sous forme de dessins et peintures m√™lant aquarelle, encre, broderie ou huile. Sa pratique, exp√©rimentale et sensible, donne naissance √† des images profondes, fragiles et puissamment po√©tiques.",instagram:"https://www.instagram.com/marie.husson.art"},{id:"clotilde-debar-zablocki",name:"Clotilde Debar Zablocki",type:"exposition",title:"apolline.design",presentation:"Artiste et d√©coratrice. Inspir√©e par l'histoire et le patrimoine local, notamment celui d'Anne de Bretagne, Clotilde Debar-Zablocki cr√©e un univers po√©tique et sensible. Avec David, elle forme le duo apolline.design, sp√©cialis√© en fresques d√©coratives et patines.",instagram:"https://www.instagram.com/apolline.design"},{id:"gael-caudoux",name:"Ga√´l Caudoux",type:"exposition",title:"Cartographies imaginaires",presentation:"Artiste cartographe. Vastes cartographies de territoires imaginaires, riches en d√©tails et en narration, Ga√´l Caudoux les r√©alise √† la main depuis l'enfance. Ses grands formats, en constante √©volution, invitent √† la d√©couverte d'un univers unique et fascinant.",instagram:"https://www.instagram.com/gaelcaudoux.imaginarium"},{id:"atelier-norg",name:"Atelier Norg",type:"exposition",title:"Peinture, sculpture et dessin",presentation:"Plasticien nantais. Norg est un plasticien bas√© √† Nantes dont le travail navigue entre peinture, sculpture et dessin, avec une √©nergie brute et expressive. Son univers visuel est direct et instinctif.",instagram:"https://www.instagram.com/ateliernorg"},{id:"jerome-luneau",name:"J√©r√¥me Luneau",type:"exposition",title:"Chun Yong Ho",presentation:"Chun Yong Ho, artiste peintre originaire de Cor√©e du Sud, explore l'abstraction √† travers des jeux de couleurs et de lignes √©voquant des paysages mentaux. Son travail invite √† un voyage int√©rieur, entre sensations et √©motions.",instagram:"https://www.instagram.com/yonghochun"},{id:"andry-shango-rajoelina",name:"Andry Shango Rajoelina",type:"exposition",title:"Illustration pop culture",presentation:`A travers ses "Super Families", Andry "Shango" Rajoelina, character designer dans l'animation, rend hommage aux personnages de ses films, jeux vid√©os, comics, s√©ries TV et dessins anim√©s pr√©f√©r√©s, des ann√©es 80 √† aujourd'hui. De "Retour Vers le Futur" aux "Avengers" en passant par "Les Indestructibles", il s'amuse √† redessiner √† sa mani√®re les grandes familles de la pop culture. Une s√©rie d'illustration pour les petits et les grands enfants.`,instagram:"https://www.instagram.com/andryshango",email:"rajoelina.a@gmail.com"},{id:"expo9",name:"Jocelyn Prouff (Joss Proof)",type:"exposition",title:"Carnets Nantais",presentation:'Croquant in situ des lieux urbains o√π la nature reprend ses droits, avec une attention particuli√®re √† la lumi√®re et aux d√©tails, Joss Proof invite √† un autre regard sur la ville √† travers ses carnets sensibles. Il partage cet univers dans son livre "Carnets Nantais".',instagram:"https://www.instagram.com/joss_proof"},{id:"emmanuelle-boisson",name:"Emmanuelle Boisson (Manoukidessine)",type:"exposition",title:"Illustrations et Carnets",presentation:"Port√©e par le d√©sir de raconter des histoires en images, Manoukidessine explore avec tendresse les √©motions, le quotidien et l'imaginaire. Elle partage son univers √† travers dessins, carnets et albums jeunesse.",instagram:"https://www.instagram.com/manoukidessine"},{id:"catherine-clement",name:"Catherine Cl√©ment (Kat Klementi)",type:"exposition",title:"Les Petits Formats",presentation:"Depuis 2018, je d√©veloppe une s√©rie de petits formats r√©alis√©s √† partir de cadres anciens chin√©s. Ces ≈ìuvres sont √† la crois√©e d'une recherche esth√©tique et d'une narration silencieuse. Le cadre, loin d'√™tre un simple ornement : ¬´ Le choix des cadres est essentiel. Ils doivent dialoguer avec l'≈ìuvre, la compl√©ter, la renforcer. Ce ne sont pas de simples √©l√©ments d√©coratifs : ils soulignent le sujet et rendent chaque tableau unique. ¬ª Les petits formats repr√©sentent des personnages, des objets isol√©s, des int√©rieurs... toujours cadr√©s au plus proche. Le regard oscille entre micro-natures mortes, mini-portraits et sc√®nes intimistes. ¬´ Jouer avec les √©chelles oblige le spectateur √† regarder de plus pr√®s, √† observer avec attention. ¬ª Isoler un objet de son contexte lui donne une nouvelle pr√©sence, une intensit√© singuli√®re ¬´ Ce n'est plus un simple objet du quotidien, mais un √©l√©ment qui appelle √† l'introspection. J'insiste sur l'individualit√© dans chacune de mes compositions. ¬ª Les rayures sont un motif r√©current dans mes peintures, les rayures instaurent un rythme visuel qui attire l'≈ìil et structure l'espace. ¬´ Les rayures apportent une harmonie, un √©quilibre. Elles unifient l'ensemble des peintures et permettent aux sujets de s'inscrire dans un d√©cor coh√©rent. ¬ª",instagram:"https://www.instagram.com/katklementi"},{id:"mostapha-rouine",name:"Mostapha Rouine",type:"exposition",title:"Entre Bretagne et Maroc",presentation:"Puisant son inspiration entre la Bretagne et le Maroc, entre p√™che √† pied et sc√®nes de vie quotidienne, Mostapha Rouine cr√©e avec aquarelles, brou de noix et huiles. L'artiste peintre autodidacte fait vibrer la lumi√®re, l'ambiance et les couleurs de ces deux mondes.",instagram:"https://www.instagram.com/mostapharouine"},{id:"elizaveta-vodyanova",name:"Elizaveta Vodyanova",type:"exposition",title:"Peinture",presentation:"Artiste peintre contemporaine bas√©e √† Nantes, Elizaveta Vodyanova explore la peinture figurative √† l'acrylique. Ses ≈ìuvres, intimes et po√©tiques, capturent des instants de vie ‚Äî int√©rieurs, visages, paysages marins ‚Äî avec une palette subtile et vibrante.",email:"vojnovich@yandex.com",instagram:"https://www.instagram.com/elvodyanova"},{id:"fabienne-choyau",name:"Fabienne Choyau",type:"exposition",title:"Peinture contemporaine",presentation:"Guid√©e par sa passion pour la couleur, Fabienne Choyau puise son inspiration dans la nature et les instants du quotidien. Son regard se laisse porter par ce qui l'entoure, transformant √©motions et impressions en toiles vibrantes",email:"fabienne.choyau@laposte.net",instagram:"https://www.instagram.com/fabiennechoyau/"},{id:"violoncelles",name:"Ensemble de violoncelles du conservatoire",type:"concert",title:"Ensemble de violoncelles du conservatoire",presentation:""},{id:"clarine",name:"Clarine Julienne",type:"concert",title:"Concert de Clarine Julienne",presentation:"Apr√®s avoir sillonn√© l'Am√©rique Latine avec sa guitare, Clarine revient avec de nombreuses chansons de l'Argentine au Mexique, en passant par les Andes p√©ruviennes. Elle propose un set doux, rythm√© et color√©, m√™lant musiques traditionnelles et compositions personnelles.",email:"clarine.julienne@gmail.com",instagram:"https://www.instagram.com/clarinemusic",youtube:"https://www.youtube.com/clarinemusic",tiktok:"https://www.tiktok.com/@clarine.musica",photos:["/concerts/Clarine/Clarine.JPG"],videos:["https://www.youtube.com/watch?v=-RMQS5dNWfE&authuser=0","https://www.youtube.com/watch?v=5mpeAOWKl-M&authuser=0"]},{id:"nota-bene",name:"Nota Bene",type:"concert",title:"Choeur de femmes Nota Bene",presentation:"Notre ch≈ìur est dirig√© par Nelly ABRAN-FEVAI depuis 2013. Le r√©pertoire est vari√© (classique, extraits d‚Äôop√©ra, chanson fran√ßaise/√©trang√®re...). Nous r√©p√©tons tous les lundis de 20h √† 22h au Restaurant Inter g√©n√©rationnel du Breil, rue de Malville √† Nantes, ainsi que 5 dimanches par saison. Nous serons heureuses de vous accueillir !",email:"contact@notabene.fr",instagram:""},{id:"philippe-peaud",name:"Philippe Peaud",type:"concert",title:"Philippe P√©aud - Conteur",presentation:"",email:"philippe.peaud@club-internet.fr",instagram:""},{id:"scarabees",name:"Les Scarab√©es R√¥dent",type:"concert",title:"Les Scarab√©es R√¥dent",presentation:"",email:"contact@scarabees.fr",instagram:""},{id:"aperto",name:"Aperto !",type:"concert",title:"Aperto !",presentation:`Allegro aperto est le titre du premier mouvement d'un concerto pour fl√ªte de Mozart.

Le mot Aperto signifie ¬´ ouvert ¬ª en italien.

L'ensemble est ouvert √† tou.te.s les fl√ªtistes : √©l√®ves du conservatoire, anciens √©l√®ves, amateurs et musiciens professionnels.

Il est √©galement ouvert √† toutes les musiques :

- musique classique : de Bach √† Bartok
- musiques du monde : Irlande (reels et jigs), Europe centrale (klezmer), Espagne (sardanes), Br√©sil (choros), Gr√®ce (kalamatianos), etc.
- chansons populaires : Beatles, Simon & Garfunkel, com√©dies musicales, films Disney, etc.`,email:"contact@aperto.fr",instagram:"",link:"https://youtu.be/aKxyrWCofOI",photos:["/concerts/Aperto/Aperto1.jpg","/concerts/Aperto/Aperto2.jpg"]},{id:"quatuor-liger",name:"Quatuor Liger",type:"concert",title:"Quatuor Liger",presentation:`Le Quatuor Liger est un quatuor √† cordes form√© en 1995 √† Nantes, et qui a √©volu√© ces derni√®res ann√©es avec de nouveaux membres.Compos√© de quatre musiciens passionn√©s (Patrick F√©vai, Solenne Guilbert, Gwenola Morin, C√©dric Forr√©), le quatuor propose un r√©pertoire vari√© allant de la musique classique aux arrangements contemporains. Leur interpr√©tation sensible et dynamique offre une exp√©rience musicale unique.

---

## PROGRAMME

### Wolfgang Mozart (1756-1791)
**Quatuor n¬∞17 "La chasse" - 25 min**

Le quatuor n¬∞17 en si b√©mol majeur, surnomm√© "La Chasse", fait partie des six quatuors d√©di√©s √† Haydn par Mozart. Compos√© en 1784, il doit son surnom √† son premier mouvement, dont le caract√®re rythm√© et l√©ger rappelle une sc√®ne de chasse. L'≈ìuvre est pleine de vitalit√© et de charme, t√©moignant de l'amiti√© et de l'admiration de Mozart pour Haydn.

### Franz Schubert (1797-1828)
**Quatuor n¬∞10 - 25 min**

Le quatuor √† cordes n¬∞10 en mi b√©mol majeur de Schubert, √©galement appel√© "Quatuor jeunesse", a √©t√© √©crit en 1813 alors que le compositeur n'avait que 16 ans. Malgr√© son jeune √¢ge, cette ≈ìuvre r√©v√®le d√©j√† une grande ma√Ætrise de la forme et une sensibilit√© profonde. Moins dramatique que ses ≈ìuvres ult√©rieures, le quatuor se distingue par sa fra√Æcheur m√©lodique et son atmosph√®re paisible.

---

Mozart et Schubert ont √©t√© au c≈ìur de l'√©volution du quatuor √† cordes, garants d'une transmission et cr√©ateurs de g√©nie. Ces deux quatuors, de p√©riodes et de styles diff√©rents, sont des t√©moignages brillants du g√©nie de leurs compositeurs respectifs, et contiennent √† la fois ce classicisme et cette r√©volution qui s'est op√©r√©e en 30 ans.

Le Quatuor Liger interpr√®te ces compositeurs viennois du tournant des XVIIIe et XIXe si√®cle sur des instruments historiques (cordes en boyaux, archets classiques).`,members:"Patrick F√©vai, Solenne Guilbert, Gwenola Morin, C√©dric Forr√©",instagram:"",email:"solenne.guilbert@quatuorliger.fr",link:"",photos:["/concerts/QuatuorLiger/quatuor-liger-1.jpg","/concerts/QuatuorLiger/quatuor-liger-2.jpg"]},{id:"eva",name:"L'Ensemble Vocal EVA",type:"concert",title:"L'Ensemble Vocal EVA",presentation:"L'Ensemble Vocal EVA, dirig√© depuis 2023 par Pascale GARCIA, fait le choix d'un r√©pertoire ouvert sur diff√©rentes √©poques, incluant des ≈ìuvres profanes ou sacr√©es, peu connues ou in√©dites. L'Ensemble Vocal EVA propose des cr√©ations de compositeurs embl√©matiques des XXe et XXIe si√®cles, qui savent magnifier des textes po√©tiques ou bibliques, chant√©s √† 3, 4, 5 ou m√™me 6 voix, a cappella ou accompagn√©s d'instruments.",website:"https://www.choeureva.fr",facebook:"EVA-choeur de femmes",phone:"06 87 08 63 84",director:"Pascale Garcia",email:"contact@choeureva.fr",instagram:""},{id:"swing-it",name:"Swing it !",type:"concert",title:"Swing it !",presentation:"",email:"contact@swingit.fr",instagram:""},{id:"variabilis",name:"Variabilis",type:"concert",title:"Variabilis",presentation:`VARIABILIS, C'EST 70 MUSICIENS AMATEURS.

L'ambition de cet ensemble :

Vivre la musique dans un esprit d'ouverture et de partage.

Explorer la diversit√© du r√©pertoire classique.

Pr√©senter des concerts dans des formats et des lieux vari√©s.

Aller au devant de publics parfois √©loign√©s des sc√®nes musicales classiques.`,email:"contact@variabilis.fr",instagram:"https://www.instagram.com/variabilis_ensemble/?igshid=MzRlODBiNWFlZA%3D%3D",photos:["/concerts/Variabilis/Variabilis.jpg"],facebook:"https://www.facebook.com/EnsembleVariabilis",website:"https://www.variabilis.fr"},{id:"Semaphore Omega",name:"Semaphore Omega",type:"concert",title:"Semaphore Omega",presentation:"Les lectures po√©tiques d'Olivier Bardoul r√©sonnent aux vibrations profondes du didgeridoo de Jean-Yves Redor.",email:"bardoul.olivier@netcourrier.com",instagram:""}];function q1(e){return Uh.find(t=>t.id===e)}function wl(e){const t=lt.find(n=>n.id===e);return t?t.name:""}function qh(e){const t=lt.find(n=>n.id===e);return t&&t.gps?t.gps:null}function ia(){return lt}const lt=[{id:"maison-jules-verne",name:"Maison natale de Jules Verne",x:170,y:50,description:"Maison natale de Jules Verne (1828). Situ√©e au 4 Cours Olivier de Clisson (ancien 2 quai Jean-Bart), c'est ici que naquit le c√©l√®bre √©crivain le 8 f√©vrier 1828. Il y passa les quatorze premi√®res ann√©es de sa vie, dans un immeuble qui dominait le confluent de la Loire et de l'Erdre.",image:"/images/locations/jules-enfant-cibot.jpg",audio:"/audio/4-cours-Olivier-de-Clisson.mp3",hasProgram:!1,history:`La maison natale de Jules Verne se trouve au c≈ìur de Nantes, sur l'√Æle Feydeau, au 2 quai Jean-Bart, aujourd'hui connu sous le nom de 4 Cours Olivier de Clisson. Il y naquit le 8 f√©vrier 1828 et y passa les quatorze premi√®res ann√©es de sa vie. L'immeuble dominait le confluent de la Loire et de l'Erdre.

Alors que Jules √©tait √¢g√© d'une dizaine d'ann√©es, la famille fit l'acquisition d'une maison de campagne dans le village de Chantenay (aujourd'hui un quartier de Nantes). Depuis celle-ci, on voyait l'activit√© du port se d√©ployer jusqu'au c≈ìur de la ville, marquant profond√©ment le jeune gar√ßon.

S'il n'a vu la mer pour la premi√®re fois qu'√† l'√¢ge de douze ans, les √Æles, les ports et les bateaux √©taient depuis longtemps d√©j√† dans sa vie et dans ses r√™ves.

¬´ Il y a cette circonstance que je suis n√© √† Nantes, o√π mon enfance s'est tout enti√®re √©coul√©e. ¬ª Jules Verne, Souvenirs d'enfance et de jeunesse, 1891.
Dans la famille Verne, on pratiquait volontiers la po√©sie de circonstance : naissances et mariages √©taient l'occasion de c√©l√©brer en vers les joies de l'amour et de la famille.

√Ä l'adolescence, il commen√ßa √† remplir les deux cahiers de po√©sies qui l'ont accompagn√© toute sa vie. Rest√©s in√©dits √† sa mort, ils ne furent publi√©s qu'en 1989. Po√©sie lyrique ou satirique, √©mois amoureux ou rimes de chansonnier, les genres les plus divers s'y c√¥toient. Plus tard, il fut aussi parolier, fournissant √† son ami le compositeur Aristide Hignard des po√®mes √† mettre en musique. Ces chansons, r√©unies en recueil, parurent en 1857, sous le titre de Rimes et m√©lodies.

¬´ D√®s l'√¢ge de douze ou quatorze ans, j'avais toujours un crayon sur moi et du temps o√π j'allais √† l'√©cole, je n'arr√™tais pas d'√©crire, travaillant surtout la po√©sie. ¬ª Jules Verne.

Au d√©but des ann√©es 1850, Jules Verne monta √† Paris pour y terminer ses √©tudes de droit.`,visited:!1,gps:{latitude:47.213307,longitude:-1.554879}},{id:"quai-turenne-8",name:"8 quai Turenne",x:300,y:108,description:"B√¢timent historique du XVIIIe si√®cle situ√© au 8 all√©e Turenne/9 rue Kerv√©gan. Construit en 1753 pour Jacques Berouette, n√©gociant et actionnaire d'origine du lotissement de l'√éle Feydeau. L'immeuble pr√©sente des fa√ßades richement d√©cor√©es avec des mascarons √† th√®mes marins. Les fa√ßades et la cage d'escalier sont inscrites aux monuments historiques depuis 1984.",image:"/8 quai Turenne.jpg",audio:"/audio/8-quai-turenne.mp3",history:`Habit√© par un des actionnaires d'origine

Jacques Berouette, n√©gociant et avocat du roi est l'un des actionnaires d'origine de la compagnie cr√©√©e pour construire le lotissement. En 1753, il habite sa nouvelle maison de l'√éle Feydeau.

Le b√¢ti

Les deux fa√ßades de l'immeuble ont beaucoup de points communs avec le 15, all√©e Duguay-Trouin/28, rue Kerv√©gan. Celle c√¥t√© quai est plus richement d√©cor√©e. Les mascarons traitent de th√®mes marins. Contrairement √† beaucoup d'immeubles pour lesquels l'escalier est situ√© dans une tourelle, il a √©t√© choisi ici de l'int√©grer au b√¢ti. 
Il donne sur chacun des couloirs d'entr√©e. Le mur-noyau en est ajour√© pour donner plus de clart√©. Le balcon du 1er √©tage est mont√© sur des consoles, celui du 2√®me en encorbellement sur une Trompe.

Les mat√©riaux

La partie basse du rez-de-chauss√©e est construite en granite alors que la partie haute et notamment les mascarons sont en calcaire de Saint-Savinien (Charente maritime), une pierre semi-dure. Les √©tages sont construits en tuffeau de la r√©gion de Saumur.

Un immeuble inscrit

En 1933, les deux immeubles ont √©t√© s√©par√©s. La restauration de chacun a √©t√© effectu√©e √† quelques ann√©es d'intervalle. Les fa√ßades sur rue et sur cour ainsi que la cage d'escalier ont √©t√© inscrits √† l'inventaire suppl√©mentaire des monuments historiques le 5 d√©cembre 1984.`,visited:!1,gps:{latitude:47.212746973313344,longitude:-1.5547571895170953}},{id:"quai-turenne-9",name:"09 quai Turenne / 11 rue Kerv√©gan",x:260,y:150,description:"Immeuble dit √† la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire √† pans coup√©s. D√©cors caract√©ristiques: mascarons et ferronneries. Double acc√®s c√¥t√© quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",history:`Immeuble dit √† la "Cour Ovale"
En 1756, Joseph Raimbaud (marchand de bois) acquiert sur l'√Æle Feydeau, deux terrains contigus et y fait √©difier deux immeubles avec une cour commune, vaste cour rectangulaire √† pans coup√©s, la "Cour ovale". Les deux immeubles aux d√©cors caract√©ristiques du milieu du si√®cle (mascarons et ferronneries) ont un double acc√®s, c√¥t√© quai et c√¥t√© rue. Les deux fa√ßades sur quai sont trait√©es de mani√®re identique et en sym√©trie, les 12 trav√©es √©tant group√©es deux par deux. Les fa√ßades sur rue sont moins ostentatoires, les quatre doubles trav√©es de gauche n'ont re√ßu qu'un seul √©tage, le programme architectural n'ayant pas √©t√© achev√©. Immeuble class√© au titre des Monuments Historiques depuis 1984.`,visited:!1,gps:{latitude:47.212306,longitude:-1.556986}},{id:"quai-turenne-9-concert",name:"09 quai Turenne / 11 rue Kerv√©gan",x:260,y:180,description:"Immeuble dit √† la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire √† pans coup√©s. D√©cors caract√©ristiques: mascarons et ferronneries. Double acc√®s c√¥t√© quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",historyRef:"quai-turenne-9",visited:!1,gps:{latitude:47.21273557840543,longitude:-1.5552255095605205}},{id:"quai-turenne-10",name:"10 quai Turenne / 13 rue Kerv√©gan",x:260,y:224,description:"Immeuble de n√©gociant (1755-56). Construit par Joseph Raimbaud, marchand de bois. Innovation architecturale: premier immeuble de Feydeau avec des appartements √† couloir plut√¥t qu'en enfilade. 3 √©tages et combles sans entresol. Inscrit aux Monuments Historiques depuis 1984.",image:"/10 quai Turenne.jpg",audio:"/audio/10-quai-Turenne.mp3",history:`Un immeuble de n√©gociant

Jacques Goubert, ing√©nieur, est un des actionnaires d'origine du lotissement. Il est l'auteur des plans du parcellaire. Il propose √©galement dans son projet un mod√®le d'√©l√©vation qui ne sera pas suivi par les constructeurs.
Il revend sa parcelle √† Joseph Raimbaud, marchand de bois en lien avec le milieu de la construction navale. Celui-ci fait construire l'immeuble en 1755-56.

3 √©tages et combles sans entresol

Les immeubles du lotissement Feydeau sont tant√¥t entresol√©, tant√¥t non. La pr√©sence de l'entresol r√©v√®le l'importance accord√©e √† l'activit√© commerciale : celui-ci permet d'installer des r√©serves et des bureaux. Dans le cas pr√©sent, les constructeurs ont souhait√© privil√©gier le logement. Aussi le rez-de-chauss√©e est-il occup√© par des appartements.

Une innovation : des appartements avec un couloir

Jusqu'au d√©but du XVIIIe si√®cle, on ne conna√Æt qu'une seule mani√®re d'agencer les pi√®ces d'un appartement : l'enfilade. Les diff√©rentes salles se commandent les unes les autres. Au fil du si√®cle, le d√©sir d'intimit√© grandissant, on voit appara√Ætre le couloir, jug√© plus pratique. Cet immeuble est le seul dans Feydeau √† pr√©senter cette particularit√©.

Une d√©coration soign√©e

Contrairement √† d'autres immeubles du lotissement, les fa√ßades sur rue et quai sont identiques. Toutes les ouvertures comportent un mascaron, avec des visages africains. Les balcons sont construits sur des consoles au 1er √©tage et sur trompe au 2√®me. Les angles de la cour ainsi que les demi-tourelles de latrines sont √† pans coup√©s. L'immeuble est Inscrit sur l'inventaire suppl√©mentaire des monuments historiques depuis 1984.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"rue-kervegan-17",name:"17 rue Kerv√©gan / 11 quai Turenne",x:220,y:407,description:"Immeuble de la 'galaxie Pierre Rousseau' (apr√®s 1775). Construit pour Pierre Lassalle, gendre de Pierre Rousseau. Particularit√©: corps de b√¢timents ind√©pendants sur quai et rue, avec cour commune. Fa√ßade sobre typique de la fin du 18√®me si√®cle, mais int√©rieurs richement d√©cor√©s.",image:"/17 rue Kerv√©gan.jpg",audio:"/audio/17-rue-Kervegan.mp3",history:`Un immeuble de la "galaxie Pierre Rousseau"

Cet immeuble a √©t√© construit apr√®s 1775 pour Pierre Lassalle, gendre de Pierre Rousseau. Ce dernier reprend une partie des dispositions adopt√©es au 12, all√©e Turenne, qu'il a construit comme immeuble de rapport en 1753.

Une parcelle pour deux immeubles ind√©pendants

Contrairement √† d'autres immeubles de Feydeau. Le corps de b√¢timent sur le quai Turenne et celui sur la rue Kerv√©gan sont ind√©pendants. Si la cour est commune, Ils poss√®dent chacun leur propre escalier et deux latrines par √©tage. 

Chacun des immeubles comprenait √† l'origine un appartement par √©tage, constitu√© de 4 pi√®ces en fa√ßade et deux pi√®ces de part et d'autre de l'escalier. Par la suite, certains logements ont √©t√© divis√©s.

D√©coration

Au fil du 18√®me si√®cle, on s'achemine vers un type de fa√ßade de plus en plus sobre : les mascarons, les balcons sur trompe ou sur consoles sculpt√©es disparaissent, La place Royale en est un bon exemple. Si les fa√ßades de cet immeuble ne comportent ni balcons, ni d√©coration, les int√©rieurs n'ont rien √† envier √† ceux de la g√©n√©ration pr√©c√©dente.

Petits ou grand vitrages

Jusqu'aux ann√©es 1750, les vantaux des fen√™tres sont √† petits bois. Dans les ann√©es 1760 appara√Æt le grand carreau, qui est, dans un premier temps, r√©serv√© aux grandes demeures. On peut donc affirmer avec certitude que tous les immeubles de l'√éle Feydeau avaient √† l'origine des fen√™tres √† petits bois.`,visited:!1,gps:{latitude:47.21247281536768,longitude:-1.5562154487439073}},{id:"allee-duguay-trouin-11",name:"11 all√©e Duguay Trouin / 20 rue Kerv√©gan",x:150,y:186,description:"Immeuble de rapport (1752) construit par Bertrand Doudet, n√©gociant. Particularit√©: syst√®me de galeries tr√®s d√©velopp√© avec escalier unique ouvrant sur trois faces. Deux appartements spacieux par √©tage (200 m¬≤). Fa√ßade c√¥t√© Duguay-Trouin reconstruite √† l'identique apr√®s les bombardements de 1945.",image:"/20 rue Kerv√©gan.jpg",audio:"/audio/11-allee-duguay-trouin.mp3",history:`Un immeuble de rapport

Bertrand Doudet, n√©gociant, acquiert en 1747 une des parcelles du lotissement aupr√®s de la veuve Beaulieu-Belloteau, dont le mari √©tait un des actionnaires d'origine. En 1752, la 'maison' est termin√©e : il en habite un des appartements. Les autres sont probablement lou√©s. 

Des appartements donnant sur des galeries

De tous les immeubles de l'√Æle Feydeau, c'est dans celui-ci que ce syst√®me constructif est le plus d√©velopp√© : l'unique escalier ouvre sur trois faces de galeries. Chaque √©tage comprend √† l'origine deux appartements : l'un c√¥t√© Kerv√©gan, l'autre c√¥t√© Duguay-Trouin, soit un peu plus de 200 m2 par appartement. On trouve donc deux portes d'entr√©e sur chaque palier de l'escalier, qui donnent sur la coursi√®re de chaque appartement. Sur celle-ci ouvrent les porte-fen√™tres de chaque pi√®ce. On trouve √©galement, juste apr√®s la porte d'entr√©e, des toilettes. On habite en fonction de sa condition‚Ä¶ 

On peut supposer que Bertrand Doudet s'√©tait r√©serv√© un des deux appartements du 1er √©tage. Il faut imaginer qu'√† l'√©poque, habiter haut, c'est multiplier les contraintes : monter les seaux d'eau, le bois‚Ä¶ Par ailleurs, le 1er √©tage est toujours celui qui offre la plus grande hauteur sous plafond, les plus belles chemin√©es, et les √©l√©ments de d√©coration les plus remarquables (boiseries, parquets √† la fran√ßaise, fontaines √† eau dans des niches...). Certains de ces √©l√©ments sont encore pr√©sents dans l'immeuble.

Ni class√©, ni inscrit

M√™me s'il s'agit d'un immeuble remarquable, cette maison ne comporte pas d'√©l√©ments de d√©coration qui justifient une demande de protection. La fa√ßade ne pr√©sente ni mascarons, ni balcons sur trompe ou sur consoles. Ce type d'immeuble se retrouve fr√©quemment dans le centre ancien. Ce qui fait la typicit√© de celui-ci, comme de tous les immeubles de Feydeau, est la largeur des fa√ßades, qui a permis de cr√©er dans chacun des appartements une enfilade de trois grandes pi√®ces.

Les modes passent

A la fin du XVIII√®me si√®cle, Feydeau n'est plus √† la mode. Les Nantais pr√©f√®rent habiter les nouveaux quartiers plus en hauteur : les cours pr√®s de la Cath√©drale et surtout le quartier Graslin. Les propri√©taires changent et certains des appartements sont divis√©s. Les habitants des immeubles sont souvent de condition plus modeste.

Les vicissitudes de la seconde guerre mondiale

L'immeuble a souffert durant les bombardements. En 1945, sa fa√ßade c√¥t√© Duguay-Trouin est pour partie d√©truite. La SNCF, locataire de l'immeuble pour y loger son personnel, fait d√©molir et reconstruire cette fa√ßade √† l'identique. Seules les baies du rez-de-chauss√©e sont agrandies, pour faciliter l'activit√© commerciale. Pour ce chantier, on r√©utilise les parpaings de granite du rez-de-chauss√©e, et on remplace le tuffeau des √©tages par une pierre plus dure. L'immeuble a fait l'objet d'une restauration g√©n√©rale durant les ann√©es 1990. La fa√ßade c√¥t√© Duguay-Trouin en cours de reconstruction au printemps 1948.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"allee-duguay-trouin-15",name:"15 all√©e Duguay Trouin",x:105,y:407,description:"Deux immeubles de rapport (1753) construits par les n√©gociants Razeau et Geslin. Fa√ßade remarquable avec six trav√©es et d√©cor soign√©: balcons sur consoles sculpt√©es, chapiteaux ioniques, fronton et ferronneries. Habit√© par des n√©gociants occupant un √©tage entier. Restaur√© en 1995. Monument Historique depuis 1984.",image:"/15 all√©e Duguay-Trouin.jpg",audio:"/audio/15-allee-duguay-trouin.mp3",history:`15 all√©e Duguay Trouin
Deux immeubles de rapport

De m√™me que pour d'autres parcelles du lotissement, le propri√©taire initial du terrain, Adrien van Voorn, n'en est pas le b√¢tisseur. Il revend sa parcelle √† Paul-Louis-Julien Razeau et Ren√© Geslin, tous deux n√©gociants. Ceux-ci font construire par les architectes Nicolas Rainard et Pierre Despr√©es deux immeubles de rapport achev√©s en 1753.
Une architecture soign√©e

La fa√ßade poss√®de six trav√©es √† arcs surbaiss√©s au rez-de-chauss√©e. Les deux trav√©es centrales sont richement trait√©es : balcons sur consoles sculpt√©es au 1er √©tage et sur trompe au 2√®me, chapiteaux ioniques et fronton. Les ferronneries sont remarquables. La cour comporte deux tourelles pour les toilettes.
Les habitants

En 1776, les deux immeubles sont essentiellement habit√©s par des n√©gociants, qui disposent chacun d'un √©tage entier (appartements de 6 ou 7 pi√®ces).
Une restauration exemplaire c√¥t√© Duguay-Trouin

L'immeuble a √©t√© enti√®rement restaur√© √† partir de 1995. Le relev√© de l'existant a √©t√© effectu√© avec beaucoup de soin. Des menuiseries √† petits bois ont √©t√© r√©introduites, qui redonnent √† la fa√ßade son aspect du XVIIIe si√®cle. Les fa√ßades et toitures sur l'all√©e Duguay-Trouin, la rue Kerv√©gan et la cour sont inscrites √† l'inventaire suppl√©mentaire des Monuments historiques depuis le 5 d√©cembre 1984.`,visited:!1,gps:{latitude:47.21274016472948,longitude:-1.5567136782622693}},{id:"allee-duguay-trouin-16",name:"16 all√©e Duguay Trouin",x:105,y:450,description:"Immeuble du XVIIIe si√®cle situ√© dans la partie sud de l'√éle Feydeau. Cet immeuble pr√©sente une architecture typique du lotissement avec une cour int√©rieure et des espaces d'exposition. Il accueille aujourd'hui des artistes contemporains dans ses espaces r√©nov√©s.",image:"/16 all√©e Duguay-Trouin.jpg",audio:"/audio/16-allee-duguay-trouin.mp3",history:`Un espace artistique contemporain

Cet immeuble du XVIIIe si√®cle, situ√© dans la partie sud de l'√éle Feydeau, t√©moigne de l'architecture typique du lotissement. Construit √† l'origine pour des n√©gociants nantais, il a connu diverses transformations au fil des si√®cles. Aujourd'hui, ses espaces r√©nov√©s accueillent des artistes contemporains qui y trouvent un cadre historique inspirant pour leurs cr√©ations.

Une architecture pr√©serv√©e

L'immeuble conserve les caract√©ristiques architecturales de l'√©poque: une cour int√©rieure, des espaces g√©n√©reux et une fa√ßade sobre typique de la fin du XVIIIe si√®cle. La r√©novation a permis de pr√©server l'esprit du lieu tout en l'adaptant aux besoins des artistes qui y exposent r√©guli√®rement.

Un lieu de cr√©ation et d'exposition

Le b√¢timent est devenu un lieu important pour la sc√®ne artistique nantaise, accueillant des expositions temporaires et des ateliers d'artistes. Sa configuration avec une cour et un hall offre des espaces d'exposition vari√©s, permettant de mettre en valeur diff√©rentes formes d'expression artistique.`,visited:!1,gps:{latitude:47.21265104842529,longitude:-1.5568766504416809}},{id:"rue-kervegan-32",name:"32 rue Kerv√©gan",x:185,y:507,description:"Immeuble construit entre 1747 et 1752 par Guillaume Grou, n√©gociant-armateur. Fa√ßade modifi√©e au 19e si√®cle avec ajout d'un troisi√®me √©tage. Organisation typique: appartement de l'armateur au premier, bureaux au rez-de-chauss√©e entresol√©, appartements locatifs aux √©tages sup√©rieurs. Monument Historique: fa√ßade et ferronneries (1932), cage d'escalier (1986).",image:"/32 rue Kervegan.jpg",audio:"/audio/32-rue-kervegan.mp3",history:"Entre 1747 et 1752, Guillaume Grou, n√©gociant-armateur, fait construire cet immeuble sur l'√Æle Feydeau. La composition d'origine de la fa√ßade a √©t√© modifi√©e au d√©but du 19e si√®cle par l'ajout d'un troisi√®me √©tage. L'immeuble abritait au premier √©tage l'appartement de l'armateur dont l'acc√®s se faisait par la porte de la fa√ßade principale. Le rez-de-chauss√©e entresol√© √©tait occup√© par des bureaux et magasins. Les appartements locatifs des √©tages sup√©rieurs √©taient desservis par une porte lat√©rale donnant rue Kerv√©gan. La fa√ßade y compris les ferronneries et la toiture sont inscrites au titre des Monuments Historiques depuis 1932, la cage d'escalier int√©rieur est, quant √† elle, inscrite en 1986.",visited:!1,gps:{latitude:47.2123232,longitude:-1.5570202}},{id:"rue-duguesclin",name:"Rue Duguesclin",x:130,y:310,description:"Mur Le Chat Noir jusqu'√† rue Kerv√©gan. Situ√©e sur l'√éle Feydeau, cette rue pi√©tonne relie la rue Kerv√©gan √† l'all√©e Duguay Trouin. Elle est caract√©ris√©e par son architecture du XVIIIe si√®cle et abrite aujourd'hui des espaces d'exposition temporaires.",audio:"/audio/rue-duguayclin.mp3",history:"Cette rue pi√©tonne de l'√éle Feydeau porte le nom de Bertrand du Guesclin, conn√©table de France au XIVe si√®cle. Elle fait partie du lotissement original de l'√éle, con√ßu au XVIIIe si√®cle. Aujourd'hui, elle accueille des expositions temporaires qui animent ce passage historique entre la rue Kerv√©gan et l'all√©e Duguay Trouin.",hasProgram:!1,visited:!1,gps:{latitude:47.21299917260203,longitude:-1.556253314217484}}],H1=Object.freeze(Object.defineProperty({__proto__:null,getLocationGPSById:qh,getLocationNameById:wl,getLocations:ia,locations:lt},Symbol.toStringTag,{value:"Module"})),G1=[{id:"clarine",artistId:"clarine",title:"Clarine Julienne",time:"14h00 - 14h30",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-nota-bene",artistId:"nota-bene",title:"Choeur de femmes Nota Bene",time:"14h45 - 15h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures po√©tiques en musique)",time:"15h30 - 16h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-samedi",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-dimanche",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-violoncelles",artistId:"violoncelles",title:"Ensemble de violoncelles du conservatoire",time:"17h45 - 18h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"scarabees",artistId:"scarabees",title:"Les Scarab√©es R√¥dent",time:"17h45 - 18h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"aperto",artistId:"aperto",title:"Aperto !",time:"18h30 - 19h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-quatuor-liger",artistId:"quatuor-liger",title:"Quatuor Liger",time:"14h00 - 14h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-eva",artistId:"eva",title:"L'Ensemble Vocal EVA",time:"14h45 - 15h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures po√©tiques en musique)",time:"15h30 - 16h00",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-swing-it",artistId:"swing-it",title:"Swing it !",time:"17h00 - 17h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-variabilis",artistId:"variabilis",title:"Variabilis",time:"17h45 - 18h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"expo-emmanuelle-boisson",artistId:"emmanuelle-boisson",title:"Illustrations et Carnets",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-catherine-clement",artistId:"catherine-clement",title:"Peintures en Miniature",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-mostapha-rouine",artistId:"mostapha-rouine",title:"Entre Bretagne et Maroc",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-bruno-barbier",artistId:"bruno-barbier",title:"Peintures et dessins",time:"12h00 - 19h00",days:["samedi","dimanche"],locationId:"quai-turenne-9"},{id:"expo-alain-gremillet",artistId:"alain-gremillet",title:"Peinture abstraite",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-jerome-gourdon",artistId:"jerome-gourdon",title:"Photo-√©mographie",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-nadege-hameau",artistId:"nadege-hameau",title:"Marqueur acrylique",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-pauline-crusson-2",artistId:"pauline-crusson",title:"PaoaNaoned",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-marie-husson",artistId:"marie-husson",title:"Dessins et peintures",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"rue-kervegan-17"},{id:"expo-clotilde-debar-zablocki",artistId:"clotilde-debar-zablocki",title:"apolline.design",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"},{id:"expo-gael-caudoux",artistId:"gael-caudoux",title:"Cartographies imaginaires",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-andry-shango-rajoelina",artistId:"andry-shango-rajoelina",title:"Illustration pop culture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jerome-luneau",artistId:"jerome-luneau",title:"Chun Yong Ho",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jocelyn-prouff",artistId:"expo9",title:"Carnets Nantais",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-elizaveta-vodyanova",artistId:"elizaveta-vodyanova",title:"Peinture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-fabienne-choyau",artistId:"fabienne-choyau",title:"Peinture contemporaine",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"}],Lt=G1.map(e=>{const t=q1(e.artistId);return t?{id:e.id,artistId:e.artistId,title:e.title,time:e.time,days:e.days,locationId:e.locationId,locationName:wl(e.locationId),artistName:t.name,type:t.type,image:t.image}:(console.error(`Artist not found for ID: ${e.artistId} (Event ID: ${e.id}). Check data consistency.`),null)}).filter(e=>e!==null);function Xs(e){return Lt.filter(t=>t.days.includes(e))}function W1(e){const n=Y1().find(r=>r.name===e);return n?Lt.filter(r=>r.locationId===n.id):[]}function Y1(){const e=new Map;try{$s(()=>Promise.resolve().then(()=>H1),void 0).then(n=>{const r=n.locations,s=new Map;Lt.forEach(a=>{var o;s.has(a.locationId)?(o=s.get(a.locationId))==null||o.push(a.id):s.set(a.locationId,[a.id])}),r.forEach(a=>{const o=s.get(a.id)||[];e.set(a.name,{id:a.id,name:a.name,description:a.description,x:a.x,y:a.y,events:o,visited:a.visited||!1})})}).catch(n=>{console.warn("Could not load locations data:",n),t()})}catch(n){console.warn("Dynamic import not available, using fallback for locations:",n),t()}function t(){const n=new Map;Lt.forEach(r=>{var s;n.has(r.locationId)?(s=n.get(r.locationId))==null||s.push(r.id):n.set(r.locationId,[r.id])}),Lt.forEach(r=>{e.has(r.locationName)||e.set(r.locationName,{id:r.locationId,name:r.locationName,description:"",x:0,y:0,events:n.get(r.locationId)||[],visited:!1})})}return e.size===0&&t(),Array.from(e.values())}const it=()=>{try{const e=localStorage.getItem("savedEvents");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>{if(!n)return null;const r=Lt.find(s=>s&&s.id===n);return r?{...r,savedAt:new Date().toISOString()}:null}).filter(Boolean):[]}catch(e){return console.error("Erreur dans getSavedEvents:",e),[]}},Sl=e=>{try{if(!e||!e.id)return console.error("Tentative de sauvegarde d'un √©v√©nement invalide:",e),it();const t=localStorage.getItem("savedEvents");let n=[];try{n=t?JSON.parse(t):[],Array.isArray(n)||(n=[])}catch(s){console.error("Erreur lors de la lecture des √©v√©nements sauvegard√©s:",s),n=[]}console.log(`[savedEvents] √âv√©nements d√©j√† sauvegard√©s: ${n.length}`,n);const r=n.includes(e.id);if(console.log(`[savedEvents] √âv√©nement d√©j√† sauvegard√©: ${r}`),r)console.log("[savedEvents] √âv√©nement d√©j√† sauvegard√©, aucune action n√©cessaire");else{const s=[...n,e.id];localStorage.setItem("savedEvents",JSON.stringify(s)),console.log(`[savedEvents] √âv√©nement sauvegard√©, nouveau total: ${s.length}`),console.log("[savedEvents] Planification du d√©clenchement des achievements dans 500ms"),setTimeout(()=>{s.length===1&&(console.log("[savedEvents] D√©clenchement de l'achievement FIRST_EVENT_SAVED (premier √©v√©nement)"),Ei(st.FIRST_EVENT_SAVED)),s.length>=5&&(console.log(`[savedEvents] D√©clenchement de l'achievement MULTIPLE_EVENTS_SAVED (${s.length} √©v√©nements)`),Ei(st.MULTIPLE_EVENTS_SAVED))},500)}return it()}catch(t){return console.error("Erreur dans saveEvent:",t),it()}},aa=e=>{try{if(!e)return console.error("Tentative de suppression d'un √©v√©nement avec un ID invalide"),it();const t=localStorage.getItem("savedEvents");if(!t)return[];let n=[];try{n=JSON.parse(t),Array.isArray(n)||(n=[])}catch(s){return console.error("Erreur lors de la lecture des √©v√©nements sauvegard√©s:",s),[]}const r=n.filter(s=>s!==e);return localStorage.setItem("savedEvents",JSON.stringify(r)),it()}catch(t){return console.error("Erreur dans removeSavedEvent:",t),[]}},K1=(e,t)=>{try{if(!e)return console.error("Tentative de d√©finir une notification pour un √©v√©nement avec un ID invalide"),it();const n=localStorage.getItem("eventNotifications");let r={};try{r=n?JSON.parse(n):{},typeof r!="object"&&(r={})}catch(o){console.error("Erreur lors de la lecture des notifications:",o),r={}}const s=Object.keys(r).length===0;return r[e]=t,localStorage.setItem("eventNotifications",JSON.stringify(r)),s&&Ei(st.NOTIFICATION_SET),it().map(o=>o&&o.id===e?{...o,notificationTime:t}:o)}catch(n){return console.error("Erreur dans setEventNotification:",n),it()}},Q1=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL:"/",jl=e=>{const t=Q1();if(e.startsWith(t))return e;const n=e.startsWith("/")?e.substring(1):e;return`${t}${n}`},mn={SAVED_EVENTS:"offline_saved_events",LOCATIONS:"offline_locations",MAP_IMAGE:"offline_map_image",LOCATION_IMAGES:"offline_location_images",HISTORY_IMAGES:"offline_history_images"},Jn=7*24*60*60*1e3,Hh=async()=>{try{console.log("[OfflineService] Pr√©chargement des √©v√©nements sauvegard√©s");const e=it();return e.length===0?(console.log("[OfflineService] Aucun √©v√©nement sauvegard√© √† pr√©charger"),[]):(dn.set(mn.SAVED_EVENTS,e,Jn),console.log(`[OfflineService] ${e.length} √©v√©nements sauvegard√©s mis en cache`),e)}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des √©v√©nements:",e),[]}},X1=async()=>dn.getOrSet(mn.SAVED_EVENTS,async()=>Hh(),Jn),Gh=async()=>{try{console.log("[OfflineService] Pr√©chargement des lieux");const e=await X1();if(e.length===0)return console.log("[OfflineService] Aucun lieu √† pr√©charger (pas d'√©v√©nements sauvegard√©s)"),[];const t=ia(),n=e.map(a=>a.locationId),r=[...new Set(n)],s=t.filter(a=>r.includes(a.id));return dn.set(mn.LOCATIONS,s,Jn),console.log(`[OfflineService] ${s.length} lieux mis en cache`),s}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des lieux:",e),[]}},J1=async()=>dn.getOrSet(mn.LOCATIONS,async()=>Gh(),Jn),Z1=async()=>{try{console.log("[OfflineService] Pr√©chargement des images des lieux");const e=await J1();if(e.length===0)return console.log("[OfflineService] Aucune image de lieu √† pr√©charger"),[];const t=e.filter(a=>a.image).map(a=>{const o=a.image;return o.startsWith("http://")||o.startsWith("https://")?o:jl(o)}),n=t.map(async a=>{try{const o=await fetch(a,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!o.ok&&o.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${o.status}`);const l=await o.blob();return dn.set(`${mn.LOCATION_IMAGES}_${a}`,{url:a,size:l.size,type:l.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image pr√©charg√©e: ${a} (${l.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_LOCATION_IMAGE",url:a}),a}catch(o){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image ${a}:`,o),null}}),s=(await Promise.all(n)).filter(a=>a!==null);return console.log(`[OfflineService] ${s.length}/${t.length} images pr√©charg√©es`),s}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des images:",e),[]}},eS=async()=>{try{console.log("[OfflineService] Pr√©chargement des images des historiques");const t=ia().filter(o=>o.history&&o.image);if(t.length===0)return console.log("[OfflineService] Aucune image d'historique √† pr√©charger"),[];const n=t.map(o=>{const l=o.image;return l.startsWith("http://")||l.startsWith("https://")?l:jl(l)}),r=n.map(async o=>{try{if(dn.has(`${mn.HISTORY_IMAGES}_${o}`))return console.log(`[OfflineService] Image d'historique d√©j√† en cache: ${o}`),o;const l=await fetch(o,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!l.ok&&l.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image d'historique: ${l.status}`);const c=await l.blob();return dn.set(`${mn.HISTORY_IMAGES}_${o}`,{url:o,size:c.size,type:c.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image d'historique pr√©charg√©e: ${o} (${c.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:o}),o}catch(l){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image d'historique ${o}:`,l),null}}),a=(await Promise.all(r)).filter(o=>o!==null);return console.log(`[OfflineService] ${a.length}/${n.length} images d'historique pr√©charg√©es`),a}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des images d'historique:",e),[]}},Co=async()=>{try{console.log("[OfflineService] Pr√©chargement de l'image de la carte");const e=jl("map-feydeau.png"),t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000",Pragma:"no-cache"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image de la carte: ${t.status}`);const n=await t.blob();return dn.set(mn.MAP_IMAGE,{url:e,size:n.size,type:n.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image de la carte pr√©charg√©e (${n.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_MAP_IMAGE",url:e}),!0}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement de l'image de la carte:",e),!1}},Wh=async()=>{try{console.log("[OfflineService] D√©marrage du pr√©chargement des donn√©es hors-ligne");const e=await Co();console.log(`[OfflineService] Pr√©chargement de la carte: ${e?"r√©ussi":"√©chou√©"}`),await Hh(),await Gh(),await Z1(),await eS(),e||(console.log("[OfflineService] Nouvelle tentative de pr√©chargement de la carte"),await Co()),console.log("[OfflineService] Pr√©chargement des donn√©es hors-ligne termin√©")}catch(e){console.error("[OfflineService] Erreur lors du pr√©chargement des donn√©es hors-ligne:",e)}},Yh=e=>dn.has(`${mn.HISTORY_IMAGES}_${e}`),tS=async e=>{try{if(Yh(e))return console.log(`[OfflineService] Image d√©j√† en cache: ${e}`),!0;console.log(`[OfflineService] Pr√©chargement de l'image: ${e}`);const t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${t.status}`);const n=await t.blob();return dn.set(`${mn.HISTORY_IMAGES}_${e}`,{url:e,size:n.size,type:n.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image pr√©charg√©e: ${e} (${n.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:e}),!0}catch(t){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image ${e}:`,t),!1}},nS=()=>{const[e,t]=p.useState(ks()),[n,r]=p.useState(!1),[s,a]=p.useState(!1),o=p.useCallback(async()=>{if(!s)try{a(!0),console.log("[useOfflineMode] D√©marrage du pr√©chargement des donn√©es"),await Wh();const l=it(),c=ia().filter(d=>l.some(u=>u.locationId===d.id));l.length>0&&B1(l,c),await Co(),V1(),r(!0),console.log("[useOfflineMode] Pr√©chargement des donn√©es termin√©")}catch(l){console.error("[useOfflineMode] Erreur lors du pr√©chargement des donn√©es:",l)}finally{a(!1)}},[s]);return p.useEffect(()=>{const l=z1(c=>{t(c),c&&!n&&!s&&o()});return()=>{l&&l()}},[n,s,o]),p.useEffect(()=>{e&&!n&&!s&&o()},[e,n,s,o]),{online:e,offlineReady:n,preloadingData:s,preloadData:o}},rS=()=>{const{online:e,offlineReady:t,preloadingData:n,preloadData:r}=nS();return e&&t?null:i.jsx("div",{className:"fixed bottom-16 left-0 right-0 z-50 flex justify-center pointer-events-none",children:i.jsxs("div",{className:`px-4 py-2 rounded-full shadow-md flex items-center gap-2 pointer-events-auto ${e?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:[!e&&i.jsx(dx,{className:"h-4 w-4"}),!e&&i.jsxs("span",{className:"text-sm font-medium",children:["Mode hors ligne",t&&" (donn√©es disponibles)"]}),e&&!t&&i.jsx(i.Fragment,{children:n?i.jsxs(i.Fragment,{children:[i.jsx(Yr,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{className:"text-sm font-medium",children:"Pr√©paration du mode hors-ligne..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm font-medium",children:"Pr√©parer le mode hors-ligne"}),i.jsx("button",{onClick:()=>r(),className:"ml-2 bg-blue-200 hover:bg-blue-300 text-blue-800 px-2 py-1 rounded text-xs",children:"Activer"})]})}),e&&t&&i.jsxs(i.Fragment,{children:[i.jsx(Hi,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Mode hors-ligne pr√™t"})]})]})})},sS=Ji("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),X=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?tm:"button";return i.jsx(o,{className:se(sS({variant:t,size:n,className:e})),ref:a,...s})});X.displayName="Button";const Js=Ye("LocationActivator"),iS=({onLocationEnabled:e,onLocationDenied:t,onLocationDisabled:n})=>{const[r,s]=p.useState(!1);p.useEffect(()=>{const o=localStorage.getItem("locationConsent");s(o==="granted")},[]);const a=()=>{if(r){localStorage.removeItem("locationConsent"),s(!1),n&&n();return}navigator.geolocation?(Js.info("Demande d'autorisation de g√©olocalisation explicite"),navigator.geolocation.getCurrentPosition(o=>{Js.info("Autorisation de g√©olocalisation accord√©e",{coords:{latitude:o.coords.latitude,longitude:o.coords.longitude,accuracy:o.coords.accuracy}}),localStorage.setItem("locationConsent","granted"),s(!0),e&&e()},o=>{Js.warn("Autorisation de g√©olocalisation refus√©e",{code:o.code,message:o.message}),t&&t()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):Js.warn("G√©olocalisation non support√©e par le navigateur")};return i.jsxs(X,{variant:r?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:a,children:[i.jsx(Nn,{className:"h-4 w-4"}),r?"D√©sactiver localisation":"Activer localisation"]})};let Ht=null,au=!1;const aS=({onAudioEnabled:e,onAudioDisabled:t})=>{const[n,r]=p.useState(()=>localStorage.getItem("audioEnabled")==="true");p.useEffect(()=>{if(!au){if(!Ht){Ht=new Audio,Ht.loop=!0,Ht.volume=.5;const a=window.location.hostname.includes("github.io")?"/1Hall1Artiste/audio/Port-marchand.mp3":"/audio/Port-marchand.mp3";Ht.src=a}au=!0,n&&Ht&&Ht.play().catch(a=>{console.warn("Impossible de lire l'audio automatiquement",a)})}},[n]);const s=()=>{const a=!n;r(a),localStorage.setItem("audioEnabled",a.toString()),a?(Ht&&Ht.play().catch(o=>{console.warn("Impossible de lire l'audio",o),r(!1),localStorage.setItem("audioEnabled","false")}),e&&e()):(Ht&&Ht.pause(),t&&t())};return i.jsx(X,{variant:n?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:s,children:n?i.jsxs(i.Fragment,{children:[i.jsx(nm,{className:"h-4 w-4"}),"D√©sactiver son"]}):i.jsxs(i.Fragment,{children:[i.jsx(mx,{className:"h-4 w-4"}),"Activer son"]})})},oS=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL.endsWith("/")?window.APP_CONFIG.BASE_URL.slice(0,-1):window.APP_CONFIG.BASE_URL:"/1Hall1Artiste";function ft(e){const n=(e.startsWith("/")?e:`/${e}`).split("/").map(r=>r?encodeURIComponent(r):"").join("/");return`${oS()}${n}`}const Ee={topLeft:{latitude:47.21349,longitude:-1.555052},topRight:{latitude:47.21285,longitude:-1.554495},bottomLeft:{latitude:47.212509,longitude:-1.557447},bottomRight:{latitude:47.21186198914097,longitude:-1.5569021991319243}},Ln={latitude:(Ee.topLeft.latitude+Ee.topRight.latitude+Ee.bottomLeft.latitude+Ee.bottomRight.latitude)/4,longitude:(Ee.topLeft.longitude+Ee.topRight.longitude+Ee.bottomLeft.longitude+Ee.bottomRight.longitude)/4},lS=6371e3,Kh=(e,t,n,r)=>{const s=e*Math.PI/180,a=n*Math.PI/180,o=(n-e)*Math.PI/180,l=(r-t)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(s)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return lS*d},cS=Kh(Ee.topLeft.latitude,Ee.topLeft.longitude,Ee.topRight.latitude,Ee.topRight.longitude),uS=Kh(Ee.topLeft.latitude,Ee.topLeft.longitude,Ee.bottomLeft.latitude,Ee.bottomLeft.longitude),ou={width:cS,height:uS},_n={topLeft:{x:100,y:50},topRight:{x:300,y:50},bottomLeft:{x:100,y:550},bottomRight:{x:300,y:550}};function dS(e,t){const n=[{x:Ee.topLeft.longitude,y:Ee.topLeft.latitude},{x:Ee.topRight.longitude,y:Ee.topRight.latitude},{x:Ee.bottomLeft.longitude,y:Ee.bottomLeft.latitude},{x:Ee.bottomRight.longitude,y:Ee.bottomRight.latitude}],r=[{x:_n.topLeft.x,y:_n.topLeft.y},{x:_n.topRight.x,y:_n.topRight.y},{x:_n.bottomLeft.x,y:_n.bottomLeft.y},{x:_n.bottomRight.x,y:_n.bottomRight.y}],s=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],a=[r[0].x,r[1].x,r[2].x],o=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],l=[r[0].y,r[1].y,r[2].y],c=lu(s,a),d=lu(o,l);if(!c||!d){const m=Math.min(...n.map(D=>D.x)),f=Math.max(...n.map(D=>D.x)),x=Math.min(...n.map(D=>D.y)),g=Math.max(...n.map(D=>D.y)),y=Math.min(...r.map(D=>D.x)),S=Math.max(...r.map(D=>D.x)),v=Math.min(...r.map(D=>D.y)),b=Math.max(...r.map(D=>D.y)),w=(t-m)/(f-m),k=1-(e-x)/(g-x),N=y+w*(S-y),P=v+k*(b-v);return{x:Math.round(N),y:Math.round(P)}}const u=c[0]*t+c[1]*e+c[2],h=d[0]*t+d[1]*e+d[2];return{x:Math.round(u),y:Math.round(h)}}function lu(e,t){const n=Zs(e);if(Math.abs(n)<1e-10)return null;const r=[[t[0],e[0][1],e[0][2]],[t[1],e[1][1],e[1][2]],[t[2],e[2][1],e[2][2]]],s=[[e[0][0],t[0],e[0][2]],[e[1][0],t[1],e[1][2]],[e[2][0],t[2],e[2][2]]],a=[[e[0][0],e[0][1],t[0]],[e[1][0],e[1][1],t[1]],[e[2][0],e[2][1],t[2]]],o=Zs(r),l=Zs(s),c=Zs(a);return[o/n,l/n,c/n]}function Zs(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])}function mS(e){const{latitude:t,longitude:n}=e,r=.001,s=.0014,a=Math.min(Ee.bottomLeft.latitude,Ee.bottomRight.latitude)-r,o=Math.max(Ee.topLeft.latitude,Ee.topRight.latitude)+r,l=Math.min(Ee.topLeft.longitude,Ee.bottomLeft.longitude)-s,c=Math.max(Ee.topRight.longitude,Ee.bottomRight.longitude)+s,d=t>=a&&t<=o,u=n>=l&&n<=c;return El(t,n)<150?!0:d&&u}function El(e,t){const r=e*Math.PI/180,s=Ln.latitude*Math.PI/180,a=(Ln.latitude-e)*Math.PI/180,o=(Ln.longitude-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(s)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function hS(e){const{latitude:t,longitude:n}=e,r=Math.sin(Ln.longitude-n)*Math.cos(Ln.latitude),s=Math.cos(t)*Math.sin(Ln.latitude)-Math.sin(t)*Math.cos(Ln.latitude)*Math.cos(Ln.longitude-n);let a=Math.atan2(r,s)*180/Math.PI;return a=(a+360)%360,a>=337.5||a<22.5?"nord":a>=22.5&&a<67.5?"nord-est":a>=67.5&&a<112.5?"est":a>=112.5&&a<157.5?"sud-est":a>=157.5&&a<202.5?"sud":a>=202.5&&a<247.5?"sud-ouest":a>=247.5&&a<292.5?"ouest":"nord-ouest"}const fS=Ye("ToastService");class pS{show(t){const{title:n,description:r,variant:s="default",duration:a,action:o,source:l,context:c}=t,d=s==="destructive"?"error":"info";wt({title:n,description:r,variant:s,duration:a,action:o}),this.logToast(n,d,r,l,c)}success(t){this.show({...t,variant:"default"})}error(t){this.show({...t,variant:"destructive"})}location(t){this.show({...t,source:"LocationService"})}logToast(t,n,r,s,a){if(n==="error"){const o=`Toast [${n}]: ${t}${r?` - ${r}`:""}`,l={source:s||"Unknown",...a};fS.warn(o,l)}}}const ys=new pS,ls=Ye("locationService"),cs={info:(e,t)=>e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise √† jour")?e.includes("Toast d'√©loignement")?ls.info(e,t):void 0:ls.info(e,t),warn:ls.warn,error:ls.error,debug:(e,t)=>{if(!(e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise √† jour")))return ls.debug(e,t)}},gS=5e3,xS=1e4,yS=3e4,za="locationConsent",Ba="locationActivationTimestamp",vS=5e3,cu={enableHighAccuracy:!0,timeout:xS,maximumAge:yS};class bS{constructor(){It(this,"watchId",null);It(this,"lastPosition",null);It(this,"onLocationUpdateCallback",null);It(this,"onPermissionChangeCallback",null);It(this,"permissionDenied",!1);It(this,"isLocalDevelopment",!1);It(this,"simulationInterval",null);this.isLocalDevelopment=!1,!navigator.geolocation&&!this.isLocalDevelopment&&cs.warn("La g√©olocalisation n'est pas prise en charge par ce navigateur"),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}handleVisibilityChange(){if(document.visibilityState==="visible"&&this.watchId!==null&&this.isLocationActivated()){cs.info("Application revenue au premier plan, r√©initialisation du suivi de localisation");const t=this.onLocationUpdateCallback,n=this.onPermissionChangeCallback;this.stopTracking(),t&&setTimeout(()=>{this.startTracking(t,n||void 0)},500)}}startTracking(t,n){if(this.onLocationUpdateCallback=t,this.onPermissionChangeCallback=n||null,this.permissionDenied=!1,this.notifyPermissionChange(!1),!this.isLocationActivated()){cs.info("La localisation n'est pas activ√©e, le suivi ne d√©marre pas");return}if(this.isLocalDevelopment){this.startPositionSimulation();return}if(!navigator.geolocation){cs.warn("La g√©olocalisation n'est pas prise en charge par ce navigateur"),ys.error({title:"Localisation non disponible",description:"Votre navigateur ne prend pas en charge la g√©olocalisation.",source:"LocationService.startTracking",context:{browserSupport:!1}});return}navigator.geolocation.getCurrentPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),cu);const r=navigator.geolocation.watchPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),cu);this.watchId=r}stopTracking(){this.simulationInterval!==null&&(window.clearInterval(this.simulationInterval),this.simulationInterval=null),this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.onLocationUpdateCallback=null,this.onPermissionChangeCallback=null}isLocationActivated(){return localStorage.getItem(za)==="granted"}activateLocation(){localStorage.setItem(za,"granted"),localStorage.setItem(Ba,Date.now().toString()),ys.success({title:"Localisation activ√©e",description:"Vous pouvez maintenant voir votre position sur la carte.",duration:3e3,source:"LocationService.activateLocation",context:{timestamp:Date.now()}})}deactivateLocation(){localStorage.removeItem(za),localStorage.removeItem(Ba),ys.show({title:"Localisation d√©sactiv√©e",description:"Votre position ne sera plus suivie.",duration:3e3,source:"LocationService.deactivateLocation",context:{timestamp:Date.now()}}),this.stopTracking()}isRecentlyActivated(){const t=localStorage.getItem(Ba);if(!t)return!1;const n=parseInt(t,10);return Date.now()-n<vS}notifyPermissionChange(t){this.permissionDenied!==t&&(this.permissionDenied=t,this.onPermissionChangeCallback&&this.onPermissionChangeCallback(t))}handlePositionSuccess(t){const n={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy};this.lastPosition=n,El(n.latitude,n.longitude),this.lastPosition,this.isRecentlyActivated(),this.onLocationUpdateCallback&&this.onLocationUpdateCallback(0,0,n)}handlePositionError(t){switch(t.code!==t.TIMEOUT&&cs.error("Erreur de g√©olocalisation",{code:t.code,message:t.message}),t.code){case t.PERMISSION_DENIED:this.notifyPermissionChange(!0);break;case t.POSITION_UNAVAILABLE:break;case t.TIMEOUT:break}}startPositionSimulation(){const t={latitude:47.2126,longitude:-1.5559,accuracy:10};this.handlePositionSuccess({coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()}),this.simulationInterval=window.setInterval(()=>{const n=(Math.random()-.5)*2e-4,r=(Math.random()-.5)*2e-4,s={latitude:47.2126+n,longitude:-1.5559+r,accuracy:5+Math.random()*10};this.handlePositionSuccess({coords:{latitude:s.latitude,longitude:s.longitude,accuracy:s.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()})},gS)}}const uu=new bS,kr=Ye("UserLocation"),Va=400,wS=600,du="locationActivationTimestamp",SS=5e3,mu="locationNotificationTimestamp",hu="lastLocationNotificationKey",jS=30*60*1e3,ES=({onLocationUpdate:e,showNavigation:t=!1,onPermissionChange:n,scale:r=1})=>{const[s,a]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(!1),u=p.useRef(!0),h=p.useRef(null),m=()=>{const y=localStorage.getItem(du);if(!y)return!1;const S=parseInt(y,10);return Date.now()-S<SS},f=y=>{const S=Date.now(),v=localStorage.getItem(mu),b=localStorage.getItem(hu);if(v){const w=parseInt(v,10);if(S-w<jS||b===y)return!1}return localStorage.setItem(mu,S.toString()),localStorage.setItem(hu,y),h.current=y,!0},x=$.useCallback((y,S,v)=>{if(!v)return;console.log(`[UserLocation] Nouvelle position GPS re√ßue: lat=${v.latitude}, lng=${v.longitude}, accuracy=${v.accuracy}`),a(v);const b=dS(v.latitude,v.longitude);l(b);const w=mS(v),k=El(v.latitude,v.longitude),N=k>300,P=b.x>=0&&b.x<=Va&&b.y>=0&&b.y<=wS;if(!w&&!u.current&&!m()&&N&&!P){const D=hS(v),A=`distance-${Math.round(k/100)}00-${D}`;f(A)&&(console.log("Toast d'√©loignement de l'√éle Feydeau",{direction:D,distance:Math.round(k),isWithin:w,isFarFromCenter:N,notificationKey:A,isVisibleOnMap:P,position:{latitude:v.latitude,longitude:v.longitude,mapX:b.x,mapY:b.y,accuracy:v.accuracy}}),kr.info("Toast d'√©loignement de l'√éle Feydeau",{direction:D,distance:Math.round(k),isWithin:w,isFarFromCenter:N,notificationKey:A,isVisibleOnMap:P}),ys.show({title:"Vous √™tes √©loign√© de l'√éle Feydeau",description:`L'√éle Feydeau se trouve au ${D} de votre position actuelle.`,duration:5e3,action:i.jsx(Sh,{altText:"Me guider",children:"Me guider"}),source:"UserLocation.handleLocationUpdate",context:{direction:D,distance:Math.round(k),isWithin:w,isFarFromCenter:N,notificationKey:A}}))}u.current&&(u.current=!1),e&&e(b.x,b.y,v)},[e,u,m,f]),g=$.useCallback(y=>{d(y),n&&n(y),y&&ys.error({title:"Localisation refus√©e",description:"Vous avez refus√© l'acc√®s √† votre position. Certaines fonctionnalit√©s ne seront pas disponibles.",duration:5e3,source:"UserLocation.handlePermissionChange",context:{permissionDenied:!0}})},[n]);return p.useEffect(()=>{localStorage.setItem(du,Date.now().toString());const y=(v,b,w)=>{w&&x(0,0,w)},S=v=>{g(v)};return uu.startTracking(y,S),()=>{uu.stopTracking()}},[]),$.useEffect(()=>{const y=kr.info,S=kr.debug;return kr.info=(v,b)=>{if(v.includes("Toast d'√©loignement"))return console.log("LOG INFO (TOAST):",v,b),y(v,b);if(!(v.includes("Rendu du marqueur")||v.includes("Position utilisateur")||v.includes("mise √† jour")))return y(v,b)},()=>{kr.info=y,kr.debug=S}},[]),!o||c?i.jsx("div",{className:"absolute left-1/2 top-8 z-40 w-full flex justify-center pointer-events-none",children:i.jsx("div",{className:"bg-white/90 text-[#ff7a45] border border-[#ff7a45] rounded px-3 py-2 text-center shadow-md text-sm max-w-xs",children:c?"Localisation d√©sactiv√©e ou refus√©e. Activez la g√©olocalisation pour voir votre position.":"Position utilisateur indisponible. En attente de signal GPS ou autorisation."})}):i.jsx(i.Fragment,{children:i.jsx("div",{className:"absolute z-30 pointer-events-none",style:{left:`${o.x*r}px`,top:`${o.y*r}px`,transform:"translate(-50%, -50%)"},children:i.jsxs("div",{className:"relative",children:[s&&i.jsx("div",{className:"absolute rounded-full bg-blue-500/20 border border-blue-500/50",style:{width:`${s.accuracy/ou.width*Va*1*r}px`,height:`${s.accuracy/ou.width*Va*1*r}px`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}}),i.jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:t?i.jsx(Xo,{className:"h-8 w-8 text-blue-600 drop-shadow-md"}):i.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full border-4 border-white shadow-lg pulse-animation z-50"})})]})})})},Ua=Ye("NavigationGuideSimple"),NS=20;function CS(e,t,n,r){const a=m=>m*Math.PI/180,o=a(e),l=a(n),c=a(n-e),d=a(r-t),u=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function IS(e){return Math.round(e)}function kS(e,t,n,r){const s=Math.sin(r-t)*Math.cos(n),a=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(r-t);let o=Math.atan2(s,a)*180/Math.PI;return o=(o+360)%360,o>=337.5||o<22.5?"nord":o>=22.5&&o<67.5?"nord-est":o>=67.5&&o<112.5?"est":o>=112.5&&o<157.5?"sud-est":o>=157.5&&o<202.5?"sud":o>=202.5&&o<247.5?"sud-ouest":o>=247.5&&o<292.5?"ouest":"nord-ouest"}function AS(e){const{userPosition:t,targetLocation:n,onClose:r,mapCoords:s,targetMapCoords:a,scale:o=1}=e,[l,c]=p.useState({distance:0,direction:"",isNearby:!1});return p.useEffect(()=>{if(t&&n)try{const d=qh(n.id);if(!d){Ua.warn("[NavigationGuideSimple] Coordonn√©es GPS non trouv√©es pour",n.id);return}const u=CS(t.latitude,t.longitude,d.latitude,d.longitude),h=kS(t.latitude,t.longitude,d.latitude,d.longitude),m=u<NS,f=IS(u);c({distance:f,direction:h,isNearby:m}),Ua.info("[NavigationGuideSimple] Navigation calcul√©e",{userPosition:t,targetLocation:n.id,distance:f,direction:h,isNearby:m})}catch(d){Ua.error("[NavigationGuideSimple] Erreur lors du calcul de la navigation",d)}},[t,n]),!t||!n?null:i.jsxs(i.Fragment,{children:[s&&a&&i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full z-40",children:[i.jsxs("svg",{width:"100%",height:"100%",className:"absolute top-0 left-0 pointer-events-none",children:[i.jsx("line",{x1:s.x*o,y1:s.y*o,x2:a.x*o,y2:a.y*o,stroke:"#3b82f6",strokeWidth:"4",strokeDasharray:"8,4"}),i.jsx("circle",{cx:s.x*o,cy:s.y*o,r:"6",fill:"#3b82f6"}),i.jsx("circle",{cx:a.x*o,cy:a.y*o,r:"6",fill:"#ef4444"})]}),i.jsxs("div",{className:"absolute bg-white/90 px-3 py-1.5 rounded text-sm font-medium text-blue-700 shadow-md flex items-center gap-2 cursor-pointer hover:bg-white/100 transition-colors",style:{left:`${(s.x+a.x)/2*o}px`,top:`${(s.y+a.y)/2*o}px`,transform:"translate(-50%, -50%)"},onClick:r,children:[i.jsxs("span",{children:[l.distance," m"]}),i.jsx(gr,{className:"w-3 h-3 text-gray-500"})]})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 z-50 p-4 bg-white/90 shadow-lg rounded-t-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Nn,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-lg",children:n.name})]}),i.jsxs(X,{variant:"destructive",size:"sm",onClick:r,className:"flex items-center gap-1",children:[i.jsx(gr,{className:"w-4 h-4"}),"Arr√™ter"]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xo,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("div",{children:i.jsx("p",{className:"font-medium",children:l.isNearby?"Vous √™tes arriv√©!":`${l.distance} m√®tres`})})]})})]})]})}const ei=Ye("MapComponent"),fu={info:(e,t)=>{if(!e.includes("redimensionn√©"))return ei.info(e,t)},warn:ei.warn,error:ei.error,debug:ei.debug},ti=400,pu=600,Qh=({locations:e,visitedLocations:t=[],onLocationClick:n,highlightedLocation:r=null,testPoint:s,testPointAffine:a,activeLocation:o=null,onClick:l,readOnly:c=!1,onScaleChange:d,userLocationProps:u,navigationProps:h,onPanStart:m,onPan:f,onPanEnd:x})=>{const g=p.useRef(null),[y,S]=p.useState(1),[v,b]=p.useState(!1);p.useState({x:0,y:0}),p.useState({x:0,y:0});const[w,k]=p.useState(null);p.useRef(null);const N=p.useRef(null),P=p.useRef(null),D=p.useRef({dx:0,dy:0}),A=p.useRef(0);return p.useRef(!1),p.useEffect(()=>{const M=()=>{var z;if(g.current){const Y=((z=g.current.parentElement)==null?void 0:z.clientWidth)||window.innerWidth,J=Math.min(Y,ti)/ti;S(J),d&&d(J),g.current.style.width=`${ti*J}px`,g.current.style.height=`${pu*J}px`}};M();const C=T(M,100);window.addEventListener("resize",C);function T(z,Y){let q=null;return function(){q&&window.clearTimeout(q),q=window.setTimeout(()=>{z(),q=null},Y)}}return()=>{window.removeEventListener("resize",C)}},[d]),p.useEffect(()=>{if(c)return;const M=q=>{if(!v||!N.current)return;const J={x:q.clientX,y:q.clientY};if(!P.current){P.current=J;return}const ne=J.x-P.current.x,L=J.y-P.current.y;D.current.dx+=ne,D.current.dy+=L,P.current=J,f&&f({dx:ne,dy:L,x:J.x,y:J.y})},C=()=>{if(!v)return;b(!1);const q=Date.now()-A.current,{dx:J,dy:ne}=D.current,L=Math.hypot(J,ne);N.current=null,P.current=null,D.current={dx:0,dy:0},x&&x({totalDx:J,totalDy:ne,distance:L,durationMs:q}),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",C)},T=(q,J)=>{b(!0),N.current={x:q,y:J},P.current={x:q,y:J},D.current={dx:0,dy:0},A.current=Date.now(),m&&m({x:q,y:J}),window.addEventListener("mousemove",M),window.addEventListener("mouseup",C)},z=g.current;if(!z)return;const Y=q=>{q.button===0&&T(q.clientX,q.clientY)};return z.addEventListener("mousedown",Y),()=>{z.removeEventListener("mousedown",Y),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",C)}},[v,c,m,f,x]),p.useEffect(()=>{e&&e.length>0&&fu.info("Coordonn√©es des points sur la carte",{activeLocationId:o||"aucun",points:e.map(M=>({id:M.id,name:M.name,x:M.x,y:M.y}))})},[e,o]),i.jsxs("div",{ref:g,className:"relative border border-[#d8e3ff] rounded-lg bg-[#f0f5ff] mb-4 overflow-hidden mx-auto",style:{width:`${ti*y}px`,height:`${pu*y}px`},children:[i.jsx("div",{className:"absolute inset-0 bg-white flex items-center justify-center",onClick:c?void 0:l,style:{cursor:c?"default":"pointer"},children:i.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url(${ft("/map-feydeau.png")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:.9,pointerEvents:"none"},children:i.jsx("img",{src:ft("/map-feydeau.png"),alt:"Plan de l'√éle Feydeau",className:"hidden",onError:M=>{fu.error("Erreur de chargement de l'image de la carte",{online:ks()})}})})}),i.jsxs("div",{className:"absolute inset-0",children:[s&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${s.x*y}px`,top:`${s.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#ff0000]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),a&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${a.x*y}px`,top:`${a.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#0000ff]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),e.map(M=>i.jsx("div",{id:`location-${M.id}`,"data-location-id":M.id,className:"absolute",style:{position:"absolute",left:`${M.x*y}px`,top:`${M.y*y}px`,zIndex:20,width:`${60*y}px`,height:`${60*y}px`,transform:"translate(-50%, -50%)",pointerEvents:c?"none":"auto",cursor:c?"default":"pointer"},onClick:c?void 0:C=>{C.stopPropagation(),l&&l(C)},children:i.jsx("div",{className:`absolute top-1/2 left-1/2 w-8 h-8 rounded-full shadow-lg border-2 border-white
                ${o===M.id?"bg-[#ff7a45]/90 ring-2 ring-[#ff7a45] ring-opacity-70 scale-110":r===M.id?M.visited?"bg-[#4CAF50]/90 ring-4 ring-green-400 ring-opacity-80":"bg-[#ff7a45]/90 ring-4 ring-yellow-400 ring-opacity-80":M.hasProgram===!1?"bg-[#757575]/90":M.visited?"bg-[#4CAF50]/90":"bg-[#4a5d94]/90"}`,style:{transform:"translate(-50%, -50%)",width:`${32*y}px`,height:`${32*y}px`}})},M.id))]}),u&&i.jsx(ES,{...u,scale:y,onLocationUpdate:(M,C,T)=>{k({x:M,y:C}),u.onLocationUpdate&&u.onLocationUpdate(M,C,T)}}),h&&u&&i.jsx(AS,{...h,mapCoords:w,targetMapCoords:h.targetLocation?{x:h.targetLocation.x,y:h.targetLocation.y}:null,scale:y})]})};var Io=["Enter"," "],TS=["ArrowDown","PageUp","Home"],Xh=["ArrowUp","PageDown","End"],PS=[...TS,...Xh],_S={ltr:[...Io,"ArrowRight"],rtl:[...Io,"ArrowLeft"]},MS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zs="Menu",[As,DS,RS]=rm(zs),[jr,Jh]=Zr(zs,[RS,Ui,sm]),oa=Ui(),Zh=sm(),[OS,Er]=jr(zs),[LS,Bs]=jr(zs),ef=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=e,l=oa(t),[c,d]=p.useState(null),u=p.useRef(!1),h=wn(a),m=Jo(s);return p.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(em,{...l,children:i.jsx(OS,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:i.jsx(LS,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:r})})})};ef.displayName=zs;var FS="MenuAnchor",Nl=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=oa(n);return i.jsx(Qd,{...s,...r,ref:t})});Nl.displayName=FS;var Cl="MenuPortal",[$S,tf]=jr(Cl,{forceMount:void 0}),nf=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=Er(Cl,t);return i.jsx($S,{scope:t,forceMount:n,children:i.jsx(fn,{present:n||a.open,children:i.jsx(bx,{asChild:!0,container:s,children:r})})})};nf.displayName=Cl;var Ut="MenuContent",[zS,Il]=jr(Ut),rf=p.forwardRef((e,t)=>{const n=tf(Ut,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Er(Ut,e.__scopeMenu),o=Bs(Ut,e.__scopeMenu);return i.jsx(As.Provider,{scope:e.__scopeMenu,children:i.jsx(fn,{present:r||a.open,children:i.jsx(As.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(BS,{...s,ref:t}):i.jsx(VS,{...s,ref:t})})})})}),BS=p.forwardRef((e,t)=>{const n=Er(Ut,e.__scopeMenu),r=p.useRef(null),s=Je(t,r);return p.useEffect(()=>{const a=r.current;if(a)return hx(a)},[]),i.jsx(kl,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),VS=p.forwardRef((e,t)=>{const n=Er(Ut,e.__scopeMenu);return i.jsx(kl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),kl=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:x,...g}=e,y=Er(Ut,n),S=Bs(Ut,n),v=oa(n),b=Zh(n),w=DS(n),[k,N]=p.useState(null),P=p.useRef(null),D=Je(t,P,y.onContentChange),A=p.useRef(0),M=p.useRef(""),C=p.useRef(0),T=p.useRef(null),z=p.useRef("right"),Y=p.useRef(0),q=x?yx:p.Fragment,J=x?{as:tm,allowPinchZoom:!0}:void 0,ne=H=>{var te,ce;const j=M.current+H,K=w().filter(he=>!he.disabled),ie=document.activeElement,E=(te=K.find(he=>he.ref.current===ie))==null?void 0:te.textValue,le=K.map(he=>he.textValue),Ae=ej(le,j,E),F=(ce=K.find(he=>he.textValue===Ae))==null?void 0:ce.ref.current;(function he(ze){M.current=ze,window.clearTimeout(A.current),ze!==""&&(A.current=window.setTimeout(()=>he(""),1e3))})(j),F&&setTimeout(()=>F.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),fx();const L=p.useCallback(H=>{var K,ie;return z.current===((K=T.current)==null?void 0:K.side)&&nj(H,(ie=T.current)==null?void 0:ie.area)},[]);return i.jsx(zS,{scope:n,searchRef:M,onItemEnter:p.useCallback(H=>{L(H)&&H.preventDefault()},[L]),onItemLeave:p.useCallback(H=>{var j;L(H)||((j=P.current)==null||j.focus(),N(null))},[L]),onTriggerLeave:p.useCallback(H=>{L(H)&&H.preventDefault()},[L]),pointerGraceTimerRef:C,onPointerGraceIntentChange:p.useCallback(H=>{T.current=H},[]),children:i.jsx(q,{...J,children:i.jsx(px,{asChild:!0,trapped:s,onMountAutoFocus:me(a,H=>{var j;H.preventDefault(),(j=P.current)==null||j.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:i.jsx(gx,{asChild:!0,...b,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:N,onEntryFocus:me(c,H=>{S.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Jd,{role:"menu","aria-orientation":"vertical","data-state":bf(y.open),"data-radix-menu-content":"",dir:S.dir,...v,...g,ref:D,style:{outline:"none",...g.style},onKeyDown:me(g.onKeyDown,H=>{const K=H.target.closest("[data-radix-menu-content]")===H.currentTarget,ie=H.ctrlKey||H.altKey||H.metaKey,E=H.key.length===1;K&&(H.key==="Tab"&&H.preventDefault(),!ie&&E&&ne(H.key));const le=P.current;if(H.target!==le||!PS.includes(H.key))return;H.preventDefault();const F=w().filter(te=>!te.disabled).map(te=>te.ref.current);Xh.includes(H.key)&&F.reverse(),JS(F)}),onBlur:me(e.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(A.current),M.current="")}),onPointerMove:me(e.onPointerMove,Ts(H=>{const j=H.target,K=Y.current!==H.clientX;if(H.currentTarget.contains(j)&&K){const ie=H.clientX>Y.current?"right":"left";z.current=ie,Y.current=H.clientX}}))})})})})})})});rf.displayName=Ut;var US="MenuGroup",Al=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(We.div,{role:"group",...r,ref:t})});Al.displayName=US;var qS="MenuLabel",sf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(We.div,{...r,ref:t})});sf.displayName=qS;var Ci="MenuItem",gu="menu.itemSelect",la=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=p.useRef(null),o=Bs(Ci,e.__scopeMenu),l=Il(Ci,e.__scopeMenu),c=Je(t,a),d=p.useRef(!1),u=()=>{const h=a.current;if(!n&&h){const m=new CustomEvent(gu,{bubbles:!0,cancelable:!0});h.addEventListener(gu,f=>r==null?void 0:r(f),{once:!0}),vx(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(af,{...s,ref:c,disabled:n,onClick:me(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:me(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:me(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Io.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});la.displayName=Ci;var af=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,o=Il(Ci,n),l=Zh(n),c=p.useRef(null),d=Je(t,c),[u,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&f((x.textContent??"").trim())},[a.children]),i.jsx(As.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(xx,{asChild:!0,...l,focusable:!r,children:i.jsx(We.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:me(e.onPointerMove,Ts(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(e.onPointerLeave,Ts(x=>o.onItemLeave(x))),onFocus:me(e.onFocus,()=>h(!0)),onBlur:me(e.onBlur,()=>h(!1))})})})}),HS="MenuCheckboxItem",of=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return i.jsx(mf,{scope:e.__scopeMenu,checked:n,children:i.jsx(la,{role:"menuitemcheckbox","aria-checked":Ii(n)?"mixed":n,...s,ref:t,"data-state":Pl(n),onSelect:me(s.onSelect,()=>r==null?void 0:r(Ii(n)?!0:!n),{checkForDefaultPrevented:!1})})})});of.displayName=HS;var lf="MenuRadioGroup",[GS,WS]=jr(lf,{value:void 0,onValueChange:()=>{}}),cf=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=wn(r);return i.jsx(GS,{scope:e.__scopeMenu,value:n,onValueChange:a,children:i.jsx(Al,{...s,ref:t})})});cf.displayName=lf;var uf="MenuRadioItem",df=p.forwardRef((e,t)=>{const{value:n,...r}=e,s=WS(uf,e.__scopeMenu),a=n===s.value;return i.jsx(mf,{scope:e.__scopeMenu,checked:a,children:i.jsx(la,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Pl(a),onSelect:me(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});df.displayName=uf;var Tl="MenuItemIndicator",[mf,YS]=jr(Tl,{checked:!1}),hf=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=YS(Tl,n);return i.jsx(fn,{present:r||Ii(a.checked)||a.checked===!0,children:i.jsx(We.span,{...s,ref:t,"data-state":Pl(a.checked)})})});hf.displayName=Tl;var KS="MenuSeparator",ff=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ff.displayName=KS;var QS="MenuArrow",pf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=oa(n);return i.jsx(Zd,{...s,...r,ref:t})});pf.displayName=QS;var XS="MenuSub",[_2,gf]=jr(XS),fs="MenuSubTrigger",xf=p.forwardRef((e,t)=>{const n=Er(fs,e.__scopeMenu),r=Bs(fs,e.__scopeMenu),s=gf(fs,e.__scopeMenu),a=Il(fs,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(Nl,{asChild:!0,...d,children:i.jsx(af,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":bf(n.open),...e,ref:im(t,s.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(e.onPointerMove,Ts(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:me(e.onPointerLeave,Ts(h=>{var f,x;u();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const g=(x=n.content)==null?void 0:x.dataset.side,y=g==="right",S=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+S,y:h.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:me(e.onKeyDown,h=>{var f;const m=a.searchRef.current!=="";e.disabled||m&&h.key===" "||_S[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});xf.displayName=fs;var yf="MenuSubContent",vf=p.forwardRef((e,t)=>{const n=tf(Ut,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Er(Ut,e.__scopeMenu),o=Bs(Ut,e.__scopeMenu),l=gf(yf,e.__scopeMenu),c=p.useRef(null),d=Je(t,c);return i.jsx(As.Provider,{scope:e.__scopeMenu,children:i.jsx(fn,{present:r||a.open,children:i.jsx(As.Slot,{scope:e.__scopeMenu,children:i.jsx(kl,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:me(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:me(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:me(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),m=MS[o.dir].includes(u.key);h&&m&&(a.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});vf.displayName=yf;function bf(e){return e?"open":"closed"}function Ii(e){return e==="indeterminate"}function Pl(e){return Ii(e)?"indeterminate":e?"checked":"unchecked"}function JS(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function ZS(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function ej(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=ZS(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function tj(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function nj(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return tj(n,t)}function Ts(e){return t=>t.pointerType==="mouse"?e(t):void 0}var rj=ef,sj=Nl,ij=nf,aj=rf,oj=Al,lj=sf,cj=la,uj=of,dj=cf,mj=df,hj=hf,fj=ff,pj=pf,gj=xf,xj=vf,_l="DropdownMenu",[yj,M2]=Zr(_l,[Jh]),yt=Jh(),[vj,wf]=yj(_l),Sf=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=yt(t),d=p.useRef(null),[u=!1,h]=qi({prop:s,defaultProp:a,onChange:o});return i.jsx(vj,{scope:t,triggerId:co(),triggerRef:d,contentId:co(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(rj,{...c,open:u,onOpenChange:h,dir:r,modal:l,children:n})})};Sf.displayName=_l;var jf="DropdownMenuTrigger",Ef=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=wf(jf,n),o=yt(n);return i.jsx(sj,{asChild:!0,...o,children:i.jsx(We.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:im(t,a.triggerRef),onPointerDown:me(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:me(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ef.displayName=jf;var bj="DropdownMenuPortal",Nf=e=>{const{__scopeDropdownMenu:t,...n}=e,r=yt(t);return i.jsx(ij,{...r,...n})};Nf.displayName=bj;var Cf="DropdownMenuContent",If=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=wf(Cf,n),a=yt(n),o=p.useRef(!1);return i.jsx(aj,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:me(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:me(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});If.displayName=Cf;var wj="DropdownMenuGroup",Sj=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(oj,{...s,...r,ref:t})});Sj.displayName=wj;var jj="DropdownMenuLabel",kf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(lj,{...s,...r,ref:t})});kf.displayName=jj;var Ej="DropdownMenuItem",Af=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(cj,{...s,...r,ref:t})});Af.displayName=Ej;var Nj="DropdownMenuCheckboxItem",Tf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(uj,{...s,...r,ref:t})});Tf.displayName=Nj;var Cj="DropdownMenuRadioGroup",Ij=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(dj,{...s,...r,ref:t})});Ij.displayName=Cj;var kj="DropdownMenuRadioItem",Pf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(mj,{...s,...r,ref:t})});Pf.displayName=kj;var Aj="DropdownMenuItemIndicator",_f=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(hj,{...s,...r,ref:t})});_f.displayName=Aj;var Tj="DropdownMenuSeparator",Mf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(fj,{...s,...r,ref:t})});Mf.displayName=Tj;var Pj="DropdownMenuArrow",_j=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(pj,{...s,...r,ref:t})});_j.displayName=Pj;var Mj="DropdownMenuSubTrigger",Df=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(gj,{...s,...r,ref:t})});Df.displayName=Mj;var Dj="DropdownMenuSubContent",Rf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yt(n);return i.jsx(xj,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Rf.displayName=Dj;var Rj=Sf,Oj=Ef,Lj=Nf,Of=If,Lf=kf,Ff=Af,$f=Tf,zf=Pf,Bf=_f,Vf=Mf,Uf=Df,qf=Rf;const Fj=Rj,$j=Oj,zj=p.forwardRef(({className:e,inset:t,children:n,...r},s)=>i.jsxs(Uf,{ref:s,className:se("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(wx,{className:"ml-auto h-4 w-4"})]}));zj.displayName=Uf.displayName;const Bj=p.forwardRef(({className:e,...t},n)=>i.jsx(qf,{ref:n,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Bj.displayName=qf.displayName;const Hf=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Lj,{children:i.jsx(Of,{ref:r,sideOffset:t,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Hf.displayName=Of.displayName;const sr=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Ff,{ref:r,className:se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));sr.displayName=Ff.displayName;const Vj=p.forwardRef(({className:e,children:t,checked:n,...r},s)=>i.jsxs($f,{ref:s,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Bf,{children:i.jsx(Hi,{className:"h-4 w-4"})})}),t]}));Vj.displayName=$f.displayName;const Uj=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(zf,{ref:r,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Bf,{children:i.jsx(Sx,{className:"h-2 w-2 fill-current"})})}),t]}));Uj.displayName=zf.displayName;const qj=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Lf,{ref:r,className:se("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));qj.displayName=Lf.displayName;const Hj=p.forwardRef(({className:e,...t},n)=>i.jsx(Vf,{ref:n,className:se("-mx-1 my-1 h-px bg-muted",e),...t}));Hj.displayName=Vf.displayName;var Gj=Object.defineProperty,ki=Object.getOwnPropertySymbols,Gf=Object.prototype.hasOwnProperty,Wf=Object.prototype.propertyIsEnumerable,xu=(e,t,n)=>t in e?Gj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ko=(e,t)=>{for(var n in t||(t={}))Gf.call(t,n)&&xu(e,n,t[n]);if(ki)for(var n of ki(t))Wf.call(t,n)&&xu(e,n,t[n]);return e},Ao=(e,t)=>{var n={};for(var r in e)Gf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ki)for(var r of ki(e))t.indexOf(r)<0&&Wf.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var br;(e=>{const t=class ve{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<ve.MIN_VERSION||c>ve.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),h==-1){let x=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const y=this.getPenaltyScore();y<x&&(h=g,x=y),this.applyMask(g)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=e.QrSegment.makeSegments(c);return ve.encodeSegments(u,d)}static encodeBinary(c,d){const u=e.QrSegment.makeBytes(c);return ve.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,m=-1,f=!0){if(!(ve.MIN_VERSION<=u&&u<=h&&h<=ve.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,g;for(x=u;;x++){const b=ve.getNumDataCodewords(x,d)*8,w=o.getTotalBits(c,x);if(w<=b){g=w;break}if(x>=h)throw new RangeError("Data too long")}for(const b of[ve.Ecc.MEDIUM,ve.Ecc.QUARTILE,ve.Ecc.HIGH])f&&g<=ve.getNumDataCodewords(x,b)*8&&(d=b);let y=[];for(const b of c){n(b.mode.modeBits,4,y),n(b.numChars,b.mode.numCharCountBits(x),y);for(const w of b.getData())y.push(w)}s(y.length==g);const S=ve.getNumDataCodewords(x,d)*8;s(y.length<=S),n(0,Math.min(4,S-y.length),y),n(0,(8-y.length%8)%8,y),s(y.length%8==0);for(let b=236;y.length<S;b^=253)n(b,8,y);let v=[];for(;v.length*8<y.length;)v.push(0);return y.forEach((b,w)=>v[w>>>3]|=b<<7-(w&7)),new ve(x,d,v,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,r(h,m));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,r(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,r(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,r(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;s(d>>>18==0);for(let u=0;u<18;u++){const h=r(d,u),m=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(m,f,h),this.setFunctionModule(f,m,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(u)),f=c+h,x=d+u;0<=f&&f<this.size&&0<=x&&x<this.size&&this.setFunctionModule(f,x,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=ve.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=ve.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],m=ve.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(ve.getNumRawDataModules(d)/8),x=h-f%h,g=Math.floor(f/h);let y=[];const S=ve.reedSolomonComputeDivisor(m);for(let b=0,w=0;b<h;b++){let k=c.slice(w,w+g-m+(b<x?0:1));w+=k.length;const N=ve.reedSolomonComputeRemainder(k,S);b<x&&k.push(0),y.push(k.concat(N))}let v=[];for(let b=0;b<y[0].length;b++)y.forEach((w,k)=>{(b!=g-m||k>=x)&&v.push(w[b])});return s(v.length==f),v}drawCodewords(c){if(c.length!=Math.floor(ve.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const f=u-m,g=(u+1&2)==0?this.size-1-h:h;!this.isFunction[g][f]&&d<c.length*8&&(this.modules[g][f]=r(c[d>>>3],7-(d&7)),d++)}}s(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[m][y]==f?(x++,x==5?c+=ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*ve.PENALTY_N3),f=this.modules[m][y],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*ve.PENALTY_N3}for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][m]==f?(x++,x==5?c+=ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*ve.PENALTY_N3),f=this.modules[y][m],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*ve.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let f=0;f<this.size-1;f++){const x=this.modules[m][f];x==this.modules[m][f+1]&&x==this.modules[m+1][f]&&x==this.modules[m+1][f+1]&&(c+=ve.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((f,x)=>f+(x?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return s(0<=h&&h<=9),c+=h*ve.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<ve.MIN_VERSION||c>ve.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(ve.getNumRawDataModules(c)/8)-ve.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*ve.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let m=0;m<d.length;m++)d[m]=ve.reedSolomonMultiply(d[m],u),m+1<d.length&&(d[m]^=d[m+1]);u=ve.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const m=h^u.shift();u.push(0),d.forEach((f,x)=>u[x]^=ve.reedSolomonMultiply(f,m))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return s(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];s(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function r(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const a=class Ue{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)n(u,8,d);return new Ue(Ue.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Ue.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);n(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new Ue(Ue.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Ue.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=Ue.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=Ue.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),n(h,11,d)}return u<c.length&&n(Ue.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new Ue(Ue.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Ue.isNumeric(c)?[Ue.makeNumeric(c)]:Ue.isAlphanumeric(c)?[Ue.makeAlphanumeric(c)]:[Ue.makeBytes(Ue.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Ue(Ue.Mode.ECI,0,d)}static isNumeric(c){return Ue.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Ue.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const m=h.mode.numCharCountBits(d);if(h.numChars>=1<<m)return 1/0;u+=4+m+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=a;e.QrSegment=a})(br||(br={}));(e=>{(t=>{const n=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(br||(br={}));(e=>{(t=>{const n=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(br||(br={}));var _r=br;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Wj={L:_r.QrCode.Ecc.LOW,M:_r.QrCode.Ecc.MEDIUM,Q:_r.QrCode.Ecc.QUARTILE,H:_r.QrCode.Ecc.HIGH},Yf=128,Kf="L",Qf="#FFFFFF",Xf="#000000",Jf=!1,Zf=1,Yj=4,Kj=0,Qj=.1;function ep(e,t=0){const n=[];return e.forEach(function(r,s){let a=null;r.forEach(function(o,l){if(!o&&a!==null){n.push(`M${a+t} ${s+t}h${l-a}v1H${a+t}z`),a=null;return}if(l===r.length-1){if(!o)return;a===null?n.push(`M${l+t},${s+t} h1v1H${l+t}z`):n.push(`M${a+t},${s+t} h${l+1-a}v1H${a+t}z`);return}o&&a===null&&(a=l)})}),n.join("")}function tp(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((s,a)=>a<t.x||a>=t.x+t.w?s:!1))}function Xj(e,t,n,r){if(r==null)return null;const s=e.length+n*2,a=Math.floor(t*Qj),o=s/t,l=(r.width||a)*o,c=(r.height||a)*o,d=r.x==null?e.length/2-l/2:r.x*o,u=r.y==null?e.length/2-c/2:r.y*o,h=r.opacity==null?1:r.opacity;let m=null;if(r.excavate){let x=Math.floor(d),g=Math.floor(u),y=Math.ceil(l+d-x),S=Math.ceil(c+u-g);m={x,y:g,w:y,h:S}}const f=r.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:m,opacity:h,crossOrigin:f}}function Jj(e,t){return t!=null?Math.max(Math.floor(t),0):e?Yj:Kj}function np({value:e,level:t,minVersion:n,includeMargin:r,marginSize:s,imageSettings:a,size:o,boostLevel:l}){let c=$.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((g,y)=>(g.push(..._r.QrSegment.makeSegments(y)),g),[]);return _r.QrCode.encodeSegments(x,Wj[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=$.useMemo(()=>{let f=c.getModules();const x=Jj(r,s),g=f.length+x*2,y=Xj(f,o,x,a);return{cells:f,margin:x,numCells:g,calculatedImageSettings:y}},[c,o,a,r,s]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var Zj=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),eE=$.forwardRef(function(t,n){const r=t,{value:s,size:a=Yf,level:o=Kf,bgColor:l=Qf,fgColor:c=Xf,includeMargin:d=Jf,minVersion:u=Zf,boostLevel:h,marginSize:m,imageSettings:f}=r,g=Ao(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=g,S=Ao(g,["style"]),v=f==null?void 0:f.src,b=$.useRef(null),w=$.useRef(null),k=$.useCallback(Y=>{b.current=Y,typeof n=="function"?n(Y):n&&(n.current=Y)},[n]),[N,P]=$.useState(!1),{margin:D,cells:A,numCells:M,calculatedImageSettings:C}=np({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:m,imageSettings:f,size:a});$.useEffect(()=>{if(b.current!=null){const Y=b.current,q=Y.getContext("2d");if(!q)return;let J=A;const ne=w.current,L=C!=null&&ne!==null&&ne.complete&&ne.naturalHeight!==0&&ne.naturalWidth!==0;L&&C.excavation!=null&&(J=tp(A,C.excavation));const H=window.devicePixelRatio||1;Y.height=Y.width=a*H;const j=a/M*H;q.scale(j,j),q.fillStyle=l,q.fillRect(0,0,M,M),q.fillStyle=c,Zj?q.fill(new Path2D(ep(J,D))):A.forEach(function(K,ie){K.forEach(function(E,le){E&&q.fillRect(le+D,ie+D,1,1)})}),C&&(q.globalAlpha=C.opacity),L&&q.drawImage(ne,C.x+D,C.y+D,C.w,C.h)}}),$.useEffect(()=>{P(!1)},[v]);const T=ko({height:a,width:a},y);let z=null;return v!=null&&(z=$.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{P(!0)},ref:w,crossOrigin:C==null?void 0:C.crossOrigin})),$.createElement($.Fragment,null,$.createElement("canvas",ko({style:T,height:a,width:a,ref:k,role:"img"},S)),z)});eE.displayName="QRCodeCanvas";var rp=$.forwardRef(function(t,n){const r=t,{value:s,size:a=Yf,level:o=Kf,bgColor:l=Qf,fgColor:c=Xf,includeMargin:d=Jf,minVersion:u=Zf,boostLevel:h,title:m,marginSize:f,imageSettings:x}=r,g=Ao(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:S,numCells:v,calculatedImageSettings:b}=np({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:x,size:a});let w=S,k=null;x!=null&&b!=null&&(b.excavation!=null&&(w=tp(S,b.excavation)),k=$.createElement("image",{href:x.src,height:b.h,width:b.w,x:b.x+y,y:b.y+y,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const N=ep(w,y);return $.createElement("svg",ko({height:a,width:a,viewBox:`0 0 ${v} ${v}`,ref:n,role:"img"},g),!!m&&$.createElement("title",null,m),$.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),$.createElement("path",{fill:c,d:N,shapeRendering:"crispEdges"}),k)});rp.displayName="QRCodeSVG";const sp=Nx,tE=Ex,ip=$.forwardRef(({className:e,...t},n)=>i.jsx(am,{ref:n,className:se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ip.displayName=am.displayName;const Ml=$.forwardRef(({className:e,children:t,...n},r)=>{const s=$.useId();return i.jsxs(tE,{children:[i.jsx(ip,{}),i.jsxs(om,{ref:r,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-2 border border-slate-200 bg-white p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:p-6 sm:gap-4 max-h-[90vh] overflow-y-auto",e),"aria-describedby":s,...n,children:[i.jsx("div",{id:s,className:"sr-only",children:"Contenu de la bo√Æte de dialogue"}),t,i.jsxs(jx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","aria-label":"Close dialog",children:[i.jsx(gr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Ml.displayName=om.displayName;const Dl=({className:e,...t})=>i.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Dl.displayName="DialogHeader";const ap=({className:e,...t})=>i.jsx("div",{className:se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ap.displayName="DialogFooter";const Rl=$.forwardRef(({className:e,...t},n)=>i.jsx(lm,{ref:n,className:se("text-lg font-semibold leading-none tracking-tight",e),...t}));Rl.displayName=lm.displayName;const nE=$.forwardRef(({className:e,...t},n)=>i.jsx(cm,{ref:n,className:se("text-sm text-muted-foreground",e),...t}));nE.displayName=cm.displayName;function ca({title:e,text:t,url:n}){const r=n||(typeof window<"u"?window.location.href:""),[s,a]=$.useState(!1),o=async d=>{try{V.trackFeatureUse("share",{platform:d,title:e});const u=r.startsWith("http")?r:typeof window<"u"?window.location.origin+r:r;switch(d){case"native":if(navigator.share)try{await navigator.share({title:e,text:t,url:u})}catch(h){console.error("Error sharing:",h),l(u)}else l(u);break;case"facebook":try{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Facebook share:",h),l(u)}break;case"x":try{window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Twitter share:",h),l(u)}break;case"instagram":try{const h=/iPad|iPhone|iPod/.test(navigator.userAgent),m=/Android/.test(navigator.userAgent);h||m?(window.location.href="instagram://",setTimeout(()=>{window.location.href="https://www.instagram.com/"},2e3)):window.open("https://www.instagram.com/","_blank")}catch(h){console.error("Error opening Instagram:",h),l(u)}break;case"copy":l(u);break}}catch(u){console.error("Error in handleShare:",u);try{l(r)}catch(h){console.error("Error in fallback copy:",h),alert("Impossible de partager. Veuillez copier manuellement : "+r)}}},l=d=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(d).then(()=>{alert("Lien copi√© dans le presse-papier")}).catch(u=>{console.error("Erreur lors de la copie :",u),c(d)}):c(d)},c=d=>{try{const u=document.createElement("textarea");u.value=d,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();const h=document.execCommand("copy");document.body.removeChild(u),alert(h?"Lien copi√© dans le presse-papier":"Impossible de copier le lien. Veuillez le copier manuellement : "+d)}catch(u){console.error("Erreur lors de la copie fallback :",u),alert("Impossible de copier le lien. Veuillez le copier manuellement : "+d)}};return i.jsxs(i.Fragment,{children:[i.jsxs(Fj,{children:[i.jsx($j,{asChild:!0,children:i.jsx(X,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",children:i.jsx(um,{className:"h-5 w-5"})})}),i.jsxs(Hf,{align:"end",className:"min-w-[150px]",children:[typeof navigator<"u"&&navigator.share&&i.jsx(sr,{onClick:()=>o("native"),className:"cursor-pointer",children:"Partager"}),i.jsx(sr,{onClick:()=>o("facebook"),className:"cursor-pointer",children:"Facebook"}),i.jsx(sr,{onClick:()=>o("x"),className:"cursor-pointer",children:"X"}),i.jsx(sr,{onClick:()=>o("instagram"),className:"cursor-pointer",children:"Instagram"}),i.jsx(sr,{onClick:()=>o("copy"),className:"cursor-pointer",children:"Copier le lien"}),i.jsxs(sr,{onClick:()=>a(!0),className:"cursor-pointer",children:[i.jsx(Cx,{className:"h-4 w-4 mr-2"}),"Afficher QR code"]})]})]}),i.jsx(sp,{open:s,onOpenChange:a,children:i.jsxs(Ml,{className:"sm:max-w-[425px]",children:[i.jsx(Dl,{children:i.jsx(Rl,{children:"Scannez ce QR code"})}),i.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[i.jsx(rp,{value:r,size:200,bgColor:"#ffffff",fgColor:"#4a5d94",level:"H",includeMargin:!0}),i.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:"Partagez facilement cette page en scannant le code QR"})]}),i.jsx(ap,{children:i.jsx(X,{onClick:()=>a(!1),children:"Fermer"})})]})})]})}function Zn(){const t=In().pathname,n=r=>t===r;return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-center h-16 z-[9999] shadow-lg",children:i.jsxs("div",{className:"w-full max-w-screen-lg grid grid-cols-6 gap-0 px-1 mx-auto",children:[i.jsxs(Ir,{to:"/map",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/")||n("/map")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Nn,{className:`${n("/")||n("/map")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/")||n("/map")?"text-[11px]":"text-[10px]"}`,children:"Carte"})]}),i.jsxs(Ir,{to:"/program",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/program")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(jn,{className:`${n("/program")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/program")?"text-[11px]":"text-[10px]"}`,children:"Programme"})]}),i.jsxs(Ir,{to:"/saved",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/saved")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Gi,{className:`${n("/saved")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/saved")?"text-[11px]":"text-[10px]"}`,children:"Enregistr√©s"})]}),i.jsxs(Ir,{to:"/galleries",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/galleries")||n("/community")||n("/historical")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Fs,{className:`${n("/galleries")||n("/community")||n("/historical")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/galleries")||n("/community")||n("/historical")?"text-[11px]":"text-[10px]"}`,children:"Galeries"})]}),i.jsxs(Ir,{to:"/about",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/about")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(es,{className:`${n("/about")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/about")?"text-[11px]":"text-[10px]"}`,children:"√Ä propos"})]}),i.jsxs(Ir,{to:"/donate",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${n("/donate")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Ix,{className:`${n("/donate")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${n("/donate")?"text-[11px]":"text-[10px]"}`,children:"Dons"})]})]})})}const ua="contribution_context";function rE(e){const t={type:"event",id:e.id,name:e.title,imageUrl:e.image?ft(e.image):void 0,locationId:e.locationId};try{localStorage.setItem(ua,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function sE(e){const t={type:"location",id:e.id,name:e.name,imageUrl:e.image?ft(e.image):void 0};try{localStorage.setItem(ua,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function op(){try{const e=localStorage.getItem(ua);return e?JSON.parse(e):null}catch(e){return console.error("Erreur lors de la r√©cup√©ration du contexte de contribution:",e),null}}function iE(){try{localStorage.removeItem(ua)}catch(e){console.error("Erreur lors de la suppression du contexte de contribution:",e)}}function aE(e){const t=op();return t?{...e,contextType:t.type,contextId:t.id}:e}function oE(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const lE=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uE={};function yu(e,t){return(uE.jsx?cE:lE).test(e)}const dE=/[ \t\n\f\r]/g;function mE(e){return typeof e=="object"?e.type==="text"?vu(e.value):!1:vu(e)}function vu(e){return e.replace(dE,"")===""}class Vs{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Vs.prototype.normal={};Vs.prototype.property={};Vs.prototype.space=void 0;function lp(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Vs(n,r,t)}function To(e){return e.toLowerCase()}class jt{constructor(t,n){this.attribute=n,this.property=t}}jt.prototype.attribute="";jt.prototype.booleanish=!1;jt.prototype.boolean=!1;jt.prototype.commaOrSpaceSeparated=!1;jt.prototype.commaSeparated=!1;jt.prototype.defined=!1;jt.prototype.mustUseProperty=!1;jt.prototype.number=!1;jt.prototype.overloadedBoolean=!1;jt.prototype.property="";jt.prototype.spaceSeparated=!1;jt.prototype.space=void 0;let hE=0;const xe=Nr(),Ke=Nr(),Po=Nr(),W=Nr(),_e=Nr(),Or=Nr(),kt=Nr();function Nr(){return 2**++hE}const _o=Object.freeze(Object.defineProperty({__proto__:null,boolean:xe,booleanish:Ke,commaOrSpaceSeparated:kt,commaSeparated:Or,number:W,overloadedBoolean:Po,spaceSeparated:_e},Symbol.toStringTag,{value:"Module"})),qa=Object.keys(_o);class Ol extends jt{constructor(t,n,r,s){let a=-1;if(super(t,n),bu(this,"space",s),typeof r=="number")for(;++a<qa.length;){const o=qa[a];bu(this,qa[a],(r&_o[o])===_o[o])}}}Ol.prototype.defined=!0;function bu(e,t,n){n&&(e[t]=n)}function ns(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new Ol(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[To(r)]=r,n[To(a.attribute)]=r}return new Vs(t,n,e.space)}const cp=ns({properties:{ariaActiveDescendant:null,ariaAtomic:Ke,ariaAutoComplete:null,ariaBusy:Ke,ariaChecked:Ke,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:_e,ariaCurrent:null,ariaDescribedBy:_e,ariaDetails:null,ariaDisabled:Ke,ariaDropEffect:_e,ariaErrorMessage:null,ariaExpanded:Ke,ariaFlowTo:_e,ariaGrabbed:Ke,ariaHasPopup:null,ariaHidden:Ke,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_e,ariaLevel:W,ariaLive:null,ariaModal:Ke,ariaMultiLine:Ke,ariaMultiSelectable:Ke,ariaOrientation:null,ariaOwns:_e,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:Ke,ariaReadOnly:Ke,ariaRelevant:null,ariaRequired:Ke,ariaRoleDescription:_e,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:Ke,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function up(e,t){return t in e?e[t]:t}function dp(e,t){return up(e,t.toLowerCase())}const fE=ns({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Or,acceptCharset:_e,accessKey:_e,action:null,allow:null,allowFullScreen:xe,allowPaymentRequest:xe,allowUserMedia:xe,alt:null,as:null,async:xe,autoCapitalize:null,autoComplete:_e,autoFocus:xe,autoPlay:xe,blocking:_e,capture:null,charSet:null,checked:xe,cite:null,className:_e,cols:W,colSpan:null,content:null,contentEditable:Ke,controls:xe,controlsList:_e,coords:W|Or,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xe,defer:xe,dir:null,dirName:null,disabled:xe,download:Po,draggable:Ke,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xe,formTarget:null,headers:_e,height:W,hidden:Po,high:W,href:null,hrefLang:null,htmlFor:_e,httpEquiv:_e,id:null,imageSizes:null,imageSrcSet:null,inert:xe,inputMode:null,integrity:null,is:null,isMap:xe,itemId:null,itemProp:_e,itemRef:_e,itemScope:xe,itemType:_e,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xe,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:xe,muted:xe,name:null,nonce:null,noModule:xe,noValidate:xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xe,optimum:W,pattern:null,ping:_e,placeholder:null,playsInline:xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xe,referrerPolicy:null,rel:_e,required:xe,reversed:xe,rows:W,rowSpan:W,sandbox:_e,scope:null,scoped:xe,seamless:xe,selected:xe,shadowRootClonable:xe,shadowRootDelegatesFocus:xe,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:Ke,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:xe,useMap:null,value:Ke,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_e,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xe,declare:xe,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:xe,noHref:xe,noShade:xe,noWrap:xe,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:Ke,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xe,disableRemotePlayback:xe,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:dp}),pE=ns({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:kt,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:_e,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Or,g2:Or,glyphName:Or,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:kt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_e,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kt,rev:kt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kt,requiredFeatures:kt,requiredFonts:kt,requiredFormats:kt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:kt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kt,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:up}),mp=ns({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),hp=ns({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:dp}),fp=ns({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),gE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xE=/[A-Z]/g,wu=/-[a-z]/g,yE=/^data[-\w.:]+$/i;function vE(e,t){const n=To(t);let r=t,s=jt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yE.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(wu,wE);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!wu.test(a)){let o=a.replace(xE,bE);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Ol}return new s(r,t)}function bE(e){return"-"+e.toLowerCase()}function wE(e){return e.charAt(1).toUpperCase()}const SE=lp([cp,fE,mp,hp,fp],"html"),Ll=lp([cp,pE,mp,hp,fp],"svg");function jE(e){return e.join(" ").trim()}var Fl={},Su=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,EE=/\n/g,NE=/^\s*/,CE=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,IE=/^:\s*/,kE=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AE=/^[;\s]*/,TE=/^\s+|\s+$/g,PE=`
`,ju="/",Eu="*",ar="",_E="comment",ME="declaration",DE=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(x){var g=x.match(EE);g&&(n+=g.length);var y=x.lastIndexOf(PE);r=~y?x.length-y:r+x.length}function a(){var x={line:n,column:r};return function(g){return g.position=new o(x),d(),g}}function o(x){this.start=x,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+n+":"+r+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var y=g[0];return s(y),e=e.slice(y.length),g}}function d(){c(NE)}function u(x){var g;for(x=x||[];g=h();)g!==!1&&x.push(g);return x}function h(){var x=a();if(!(ju!=e.charAt(0)||Eu!=e.charAt(1))){for(var g=2;ar!=e.charAt(g)&&(Eu!=e.charAt(g)||ju!=e.charAt(g+1));)++g;if(g+=2,ar===e.charAt(g-1))return l("End of comment missing");var y=e.slice(2,g-2);return r+=2,s(y),e=e.slice(g),r+=2,x({type:_E,comment:y})}}function m(){var x=a(),g=c(CE);if(g){if(h(),!c(IE))return l("property missing ':'");var y=c(kE),S=x({type:ME,property:Nu(g[0].replace(Su,ar)),value:y?Nu(y[0].replace(Su,ar)):ar});return c(AE),S}}function f(){var x=[];u(x);for(var g;g=m();)g!==!1&&(x.push(g),u(x));return x}return d(),f()};function Nu(e){return e?e.replace(TE,ar):ar}var RE=yi&&yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.default=LE;var OE=RE(DE);function LE(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,OE.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;s?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var da={};Object.defineProperty(da,"__esModule",{value:!0});da.camelCase=void 0;var FE=/^--[a-zA-Z0-9_-]+$/,$E=/-([a-z])/g,zE=/^[^-]+$/,BE=/^-(webkit|moz|ms|o|khtml)-/,VE=/^-(ms)-/,UE=function(e){return!e||zE.test(e)||FE.test(e)},qE=function(e,t){return t.toUpperCase()},Cu=function(e,t){return"".concat(t,"-")},HE=function(e,t){return t===void 0&&(t={}),UE(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(VE,Cu):e=e.replace(BE,Cu),e.replace($E,qE))};da.camelCase=HE;var GE=yi&&yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},WE=GE(Fl),YE=da;function Mo(e,t){var n={};return!e||typeof e!="string"||(0,WE.default)(e,function(r,s){r&&s&&(n[(0,YE.camelCase)(r,t)]=s)}),n}Mo.default=Mo;var KE=Mo;const QE=Nm(KE),pp=gp("end"),$l=gp("start");function gp(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function XE(e){const t=$l(e),n=pp(e);if(t&&n)return{start:t,end:n}}function vs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Iu(e.position):"start"in e||"end"in e?Iu(e):"line"in e||"column"in e?Do(e):""}function Do(e){return ku(e&&e.line)+":"+ku(e&&e.column)}function Iu(e){return Do(e&&e.start)+"-"+Do(e&&e.end)}function ku(e){return e&&typeof e=="number"?e:1}class ct extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=vs(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}ct.prototype.file="";ct.prototype.name="";ct.prototype.reason="";ct.prototype.message="";ct.prototype.stack="";ct.prototype.column=void 0;ct.prototype.line=void 0;ct.prototype.ancestors=void 0;ct.prototype.cause=void 0;ct.prototype.fatal=void 0;ct.prototype.place=void 0;ct.prototype.ruleId=void 0;ct.prototype.source=void 0;const zl={}.hasOwnProperty,JE=new Map,ZE=/[A-Z]/g,eN=new Set(["table","tbody","thead","tfoot","tr"]),tN=new Set(["td","th"]),xp="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function nN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=uN(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=cN(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ll:SE,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=yp(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function yp(e,t,n){if(t.type==="element")return rN(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return sN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return aN(e,t,n);if(t.type==="mdxjsEsm")return iN(e,t);if(t.type==="root")return oN(e,t,n);if(t.type==="text")return lN(e,t)}function rN(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Ll,e.schema=s),e.ancestors.push(t);const a=bp(e,t.tagName,!1),o=dN(e,t);let l=Vl(e,t);return eN.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!mE(c):!0})),vp(e,o,a,t),Bl(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function sN(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ps(e,t.position)}function iN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ps(e,t.position)}function aN(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Ll,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:bp(e,t.name,!0),o=mN(e,t),l=Vl(e,t);return vp(e,o,a,t),Bl(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function oN(e,t,n){const r={};return Bl(r,Vl(e,t)),e.create(t,e.Fragment,r,n)}function lN(e,t){return t.value}function vp(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Bl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function cN(e,t,n){return r;function r(s,a,o,l){const d=Array.isArray(o.children)?n:t;return l?d(a,o,l):d(a,o)}}function uN(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=$l(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function dN(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&zl.call(t.properties,s)){const a=hN(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&tN.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function mN(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Ps(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else Ps(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Vl(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:JE;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=s.get(c)||0;o=c+"-"+d,s.set(c,d+1)}}const l=yp(e,a,o);l!==void 0&&n.push(l)}return n}function hN(e,t,n){const r=vE(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?oE(n):jE(n)),r.property==="style"){let s=typeof n=="object"?n:fN(e,String(n));return e.stylePropertyNameCase==="css"&&(s=pN(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?gE[r.property]||r.property:r.attribute,n]}}function fN(e,t){try{return QE(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new ct("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=xp+"#cannot-parse-style-attribute",s}}function bp(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=yu(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=yu(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return zl.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ps(e)}function Ps(e,t){const n=new ct("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=xp+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pN(e){const t={};let n;for(n in e)zl.call(e,n)&&(t[gN(n)]=e[n]);return t}function gN(e){let t=e.replace(ZE,xN);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function xN(e){return"-"+e.toLowerCase()}const Ha={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yN={};function vN(e,t){const n=yN,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return wp(e,r,s)}function wp(e,t,n){if(bN(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Au(e.children,t,n)}return Array.isArray(e)?Au(e,t,n):""}function Au(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=wp(e[s],t,n);return r.join("")}function bN(e){return!!(e&&typeof e=="object")}const Tu=document.createElement("i");function Ul(e){const t="&"+e+";";Tu.innerHTML=t;const n=Tu.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hn(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Vt(e,t){return e.length>0?(hn(e,e.length,0,t),e):t}const Pu={}.hasOwnProperty;function wN(e){const t={};let n=-1;for(;++n<e.length;)SN(t,e[n]);return t}function SN(e,t){let n;for(n in t){const s=(Pu.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Pu.call(s,o)||(s[o]=[]);const l=a[o];jN(s[o],Array.isArray(l)?l:l?[l]:[])}}}function jN(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hn(e,0,0,r)}function Sp(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ÔøΩ":String.fromCodePoint(n)}function Lr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const on=er(/[A-Za-z]/),Mt=er(/[\dA-Za-z]/),EN=er(/[#-'*+\--9=?A-Z^-~]/);function Ro(e){return e!==null&&(e<32||e===127)}const Oo=er(/\d/),NN=er(/[\dA-Fa-f]/),CN=er(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function St(e){return e!==null&&(e<0||e===32)}function Ne(e){return e===-2||e===-1||e===32}const IN=er(new RegExp("\\p{P}|\\p{S}","u")),kN=er(/\s/);function er(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function rs(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Mt(e.charCodeAt(n+1))&&Mt(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o="ÔøΩ"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Me(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return Ne(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ne(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const AN={tokenize:TN};function TN(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Me(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const PN={tokenize:_N},_u={tokenize:MN};function _N(e){const t=this,n=[];let r=0,s,a,o;return l;function l(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,c,d)(b)}return d(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const w=t.events.length;let k=w,N;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){N=t.events[k][1].end;break}S(r);let P=w;for(;P<t.events.length;)t.events[P][1].end={...N},P++;return hn(t.events,k+1,0,t.events.slice(w)),t.events.length=P,d(b)}return l(b)}function d(b){if(r===n.length){if(!s)return m(b);if(s.currentConstruct&&s.currentConstruct.concrete)return x(b);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(_u,u,h)(b)}function u(b){return s&&v(),S(r),m(b)}function h(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(b)}function m(b){return t.containerState={},e.attempt(_u,f,x)(b)}function f(b){return r++,n.push([t.currentConstruct,t.containerState]),m(b)}function x(b){if(b===null){s&&v(),S(0),e.consume(b);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),g(b)}function g(b){if(b===null){y(e.exit("chunkFlow"),!0),S(0),e.consume(b);return}return de(b)?(e.consume(b),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(b),g)}function y(b,w){const k=t.sliceStream(b);if(w&&k.push(null),b.previous=a,a&&(a.next=b),a=b,s.defineSkip(b.start),s.write(k),t.parser.lazy[b.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<o&&(!s.events[N][1].end||s.events[N][1].end.offset>o))return;const P=t.events.length;let D=P,A,M;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(A){M=t.events[D][1].end;break}A=!0}for(S(r),N=P;N<t.events.length;)t.events[N][1].end={...M},N++;hn(t.events,D+1,0,t.events.slice(P)),t.events.length=N}}function S(b){let w=n.length;for(;w-- >b;){const k=n[w];t.containerState=k[1],k[0].exit.call(t,e)}n.length=b}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function MN(e,t,n){return Me(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Mu(e){if(e===null||St(e)||kN(e))return 1;if(IN(e))return 2}function ql(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Lo={name:"attention",resolveAll:DN,tokenize:RN};function DN(e,t){let n=-1,r,s,a,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};Du(h,-c),Du(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=Vt(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=Vt(d,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=Vt(d,ql(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=Vt(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=Vt(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,hn(e,r-1,n-r+3,d),n=r+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function RN(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Mu(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const d=e.exit("attentionSequence"),u=Mu(c),h=!u||u===2&&s||n.includes(c),m=!s||s===2&&u||n.includes(r);return d._open=!!(a===42?h:h&&(s||!m)),d._close=!!(a===42?m:m&&(u||!h)),t(c)}}function Du(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ON={name:"autolink",tokenize:LN};function LN(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return on(f)?(e.consume(f),o):f===64?n(f):d(f)}function o(f){return f===43||f===45||f===46||Mt(f)?(r=1,l(f)):d(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||Mt(f))&&r++<32?(e.consume(f),l):(r=0,d(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Ro(f)?n(f):(e.consume(f),c)}function d(f){return f===64?(e.consume(f),u):EN(f)?(e.consume(f),d):n(f)}function u(f){return Mt(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,u):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||Mt(f))&&r++<63){const x=f===45?m:h;return e.consume(f),x}return n(f)}}const ma={partial:!0,tokenize:FN};function FN(e,t,n){return r;function r(a){return Ne(a)?Me(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||de(a)?t(a):n(a)}}const jp={continuation:{tokenize:zN},exit:BN,name:"blockQuote",tokenize:$N};function $N(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Ne(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function zN(e,t,n){const r=this;return s;function s(o){return Ne(o)?Me(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(jp,t,n)(o)}}function BN(e){e.exit("blockQuote")}const Ep={name:"characterEscape",tokenize:VN};function VN(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return CN(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Np={name:"characterReference",tokenize:UN};function UN(e,t,n){const r=this;let s=0,a,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Mt,u(h))}function d(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=NN,u):(e.enter("characterReferenceValue"),a=7,o=Oo,u(h))}function u(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return o===Mt&&!Ul(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<a?(e.consume(h),u):n(h)}}const Ru={partial:!0,tokenize:HN},Ou={concrete:!0,name:"codeFenced",tokenize:qN};function qN(e,t,n){const r=this,s={partial:!0,tokenize:k};let a=0,o=0,l;return c;function c(N){return d(N)}function d(N){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(N)}function u(N){return N===l?(o++,e.consume(N),u):o<3?n(N):(e.exit("codeFencedFenceSequence"),Ne(N)?Me(e,h,"whitespace")(N):h(N))}function h(N){return N===null||de(N)?(e.exit("codeFencedFence"),r.interrupt?t(N):e.check(Ru,g,w)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||de(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):Ne(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Me(e,f,"whitespace")(N)):N===96&&N===l?n(N):(e.consume(N),m)}function f(N){return N===null||de(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(N))}function x(N){return N===null||de(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===l?n(N):(e.consume(N),x)}function g(N){return e.attempt(s,w,y)(N)}function y(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),S}function S(N){return a>0&&Ne(N)?Me(e,v,"linePrefix",a+1)(N):v(N)}function v(N){return N===null||de(N)?e.check(Ru,g,w)(N):(e.enter("codeFlowValue"),b(N))}function b(N){return N===null||de(N)?(e.exit("codeFlowValue"),v(N)):(e.consume(N),b)}function w(N){return e.exit("codeFenced"),t(N)}function k(N,P,D){let A=0;return M;function M(q){return N.enter("lineEnding"),N.consume(q),N.exit("lineEnding"),C}function C(q){return N.enter("codeFencedFence"),Ne(q)?Me(N,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):T(q)}function T(q){return q===l?(N.enter("codeFencedFenceSequence"),z(q)):D(q)}function z(q){return q===l?(A++,N.consume(q),z):A>=o?(N.exit("codeFencedFenceSequence"),Ne(q)?Me(N,Y,"whitespace")(q):Y(q)):D(q)}function Y(q){return q===null||de(q)?(N.exit("codeFencedFence"),P(q)):D(q)}}}function HN(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Ga={name:"codeIndented",tokenize:WN},GN={partial:!0,tokenize:YN};function WN(e,t,n){const r=this;return s;function s(d){return e.enter("codeIndented"),Me(e,a,"linePrefix",5)(d)}function a(d){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):de(d)?e.attempt(GN,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||de(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function YN(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Me(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):de(o)?s(o):n(o)}}const KN={name:"codeText",previous:XN,resolve:QN,tokenize:JN};function QN(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function XN(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JN(e,t,n){let r=0,s,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(a=e.enter("codeTextSequence"),s=0,u(h)):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||de(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),d)}function u(h){return h===96?(e.consume(h),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",d(h))}}class ZN{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&us(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),us(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),us(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);us(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);us(this.left,n.reverse())}}}function us(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Cp(e){const t={};let n=-1,r,s,a,o,l,c,d;const u=new ZN(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,eC(u,n)),n=t[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},l=u.slice(s,n),l.unshift(r),u.splice(s,n-s+1,l))}}return hn(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function eC(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,m=-1,f=n,x=0,g=0;const y=[g];for(;f;){for(;e.get(++s)[1]!==f;);a.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(g=m+1,y.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),m=y.length;m--;){const S=l.slice(y[m],y[m+1]),v=a.pop();c.push([v,v+S.length-1]),e.splice(v,2,S)}for(c.reverse(),m=-1;++m<c.length;)d[x+c[m][0]]=x+c[m][1],x+=c[m][1]-c[m][0]-1;return d}const tC={resolve:rC,tokenize:sC},nC={partial:!0,tokenize:iC};function rC(e){return Cp(e),e}function sC(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):de(l)?e.check(nC,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function iC(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Me(e,a,"linePrefix")}function a(o){if(o===null||de(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Ip(e,t,n,r,s,a,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(S){return S===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(S),e.exit(a),m):S===null||S===32||S===41||Ro(S)?n(S):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(S))}function m(S){return S===62?(e.enter(a),e.consume(S),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===62?(e.exit("chunkString"),e.exit(l),m(S)):S===null||S===60||de(S)?n(S):(e.consume(S),S===92?x:f)}function x(S){return S===60||S===62||S===92?(e.consume(S),f):f(S)}function g(S){return!u&&(S===null||S===41||St(S))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(S)):u<d&&S===40?(e.consume(S),u++,g):S===41?(e.consume(S),u--,g):S===null||S===32||S===40||Ro(S)?n(S):(e.consume(S),S===92?y:g)}function y(S){return S===40||S===41||S===92?(e.consume(S),g):g(S)}}function kp(e,t,n,r,s,a){const o=this;let l=0,c;return d;function d(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(a),u}function u(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(a),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||de(f)||l++>999?(e.exit("chunkString"),u(f)):(e.consume(f),c||(c=!Ne(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function Ap(e,t,n,r,s,a){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(a),d(m))}function d(m){return m===o?(e.exit(a),c(o)):m===null?n(m):de(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Me(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||de(m)?(e.exit("chunkString"),d(m)):(e.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(e.consume(m),u):u(m)}}function bs(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ne(s)?Me(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const aC={name:"definition",tokenize:lC},oC={partial:!0,tokenize:cC};function lC(e,t,n){const r=this;let s;return a;function a(f){return e.enter("definition"),o(f)}function o(f){return kp.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return St(f)?bs(e,d)(f):d(f)}function d(f){return Ip(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return e.attempt(oC,h,h)(f)}function h(f){return Ne(f)?Me(e,m,"whitespace")(f):m(f)}function m(f){return f===null||de(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function cC(e,t,n){return r;function r(l){return St(l)?bs(e,s)(l):n(l)}function s(l){return Ap(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Ne(l)?Me(e,o,"whitespace")(l):o(l)}function o(l){return l===null||de(l)?t(l):n(l)}}const uC={name:"hardBreakEscape",tokenize:dC};function dC(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return de(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const mC={name:"headingAtx",resolve:hC,tokenize:fC};function hC(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hn(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function fC(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||St(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||de(u)?(e.exit("atxHeading"),t(u)):Ne(u)?Me(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||St(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const pC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lu=["pre","script","style","textarea"],gC={concrete:!0,name:"htmlFlow",resolveTo:vC,tokenize:bC},xC={partial:!0,tokenize:SC},yC={partial:!0,tokenize:wC};function vC(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bC(e,t,n){const r=this;let s,a,o,l,c;return d;function d(E){return u(E)}function u(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),h}function h(E){return E===33?(e.consume(E),m):E===47?(e.consume(E),a=!0,g):E===63?(e.consume(E),s=3,r.interrupt?t:j):on(E)?(e.consume(E),o=String.fromCharCode(E),y):n(E)}function m(E){return E===45?(e.consume(E),s=2,f):E===91?(e.consume(E),s=5,l=0,x):on(E)?(e.consume(E),s=4,r.interrupt?t:j):n(E)}function f(E){return E===45?(e.consume(E),r.interrupt?t:j):n(E)}function x(E){const le="CDATA[";return E===le.charCodeAt(l++)?(e.consume(E),l===le.length?r.interrupt?t:T:x):n(E)}function g(E){return on(E)?(e.consume(E),o=String.fromCharCode(E),y):n(E)}function y(E){if(E===null||E===47||E===62||St(E)){const le=E===47,Ae=o.toLowerCase();return!le&&!a&&Lu.includes(Ae)?(s=1,r.interrupt?t(E):T(E)):pC.includes(o.toLowerCase())?(s=6,le?(e.consume(E),S):r.interrupt?t(E):T(E)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(E):a?v(E):b(E))}return E===45||Mt(E)?(e.consume(E),o+=String.fromCharCode(E),y):n(E)}function S(E){return E===62?(e.consume(E),r.interrupt?t:T):n(E)}function v(E){return Ne(E)?(e.consume(E),v):M(E)}function b(E){return E===47?(e.consume(E),M):E===58||E===95||on(E)?(e.consume(E),w):Ne(E)?(e.consume(E),b):M(E)}function w(E){return E===45||E===46||E===58||E===95||Mt(E)?(e.consume(E),w):k(E)}function k(E){return E===61?(e.consume(E),N):Ne(E)?(e.consume(E),k):b(E)}function N(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),c=E,P):Ne(E)?(e.consume(E),N):D(E)}function P(E){return E===c?(e.consume(E),c=null,A):E===null||de(E)?n(E):(e.consume(E),P)}function D(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||St(E)?k(E):(e.consume(E),D)}function A(E){return E===47||E===62||Ne(E)?b(E):n(E)}function M(E){return E===62?(e.consume(E),C):n(E)}function C(E){return E===null||de(E)?T(E):Ne(E)?(e.consume(E),C):n(E)}function T(E){return E===45&&s===2?(e.consume(E),J):E===60&&s===1?(e.consume(E),ne):E===62&&s===4?(e.consume(E),K):E===63&&s===3?(e.consume(E),j):E===93&&s===5?(e.consume(E),H):de(E)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(xC,ie,z)(E)):E===null||de(E)?(e.exit("htmlFlowData"),z(E)):(e.consume(E),T)}function z(E){return e.check(yC,Y,ie)(E)}function Y(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),q}function q(E){return E===null||de(E)?z(E):(e.enter("htmlFlowData"),T(E))}function J(E){return E===45?(e.consume(E),j):T(E)}function ne(E){return E===47?(e.consume(E),o="",L):T(E)}function L(E){if(E===62){const le=o.toLowerCase();return Lu.includes(le)?(e.consume(E),K):T(E)}return on(E)&&o.length<8?(e.consume(E),o+=String.fromCharCode(E),L):T(E)}function H(E){return E===93?(e.consume(E),j):T(E)}function j(E){return E===62?(e.consume(E),K):E===45&&s===2?(e.consume(E),j):T(E)}function K(E){return E===null||de(E)?(e.exit("htmlFlowData"),ie(E)):(e.consume(E),K)}function ie(E){return e.exit("htmlFlow"),t(E)}}function wC(e,t,n){const r=this;return s;function s(o){return de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function SC(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(ma,t,n)}}const jC={name:"htmlText",tokenize:EC};function EC(e,t,n){const r=this;let s,a,o;return l;function l(j){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(j),c}function c(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),k):j===63?(e.consume(j),b):on(j)?(e.consume(j),D):n(j)}function d(j){return j===45?(e.consume(j),u):j===91?(e.consume(j),a=0,x):on(j)?(e.consume(j),v):n(j)}function u(j){return j===45?(e.consume(j),f):n(j)}function h(j){return j===null?n(j):j===45?(e.consume(j),m):de(j)?(o=h,ne(j)):(e.consume(j),h)}function m(j){return j===45?(e.consume(j),f):h(j)}function f(j){return j===62?J(j):j===45?m(j):h(j)}function x(j){const K="CDATA[";return j===K.charCodeAt(a++)?(e.consume(j),a===K.length?g:x):n(j)}function g(j){return j===null?n(j):j===93?(e.consume(j),y):de(j)?(o=g,ne(j)):(e.consume(j),g)}function y(j){return j===93?(e.consume(j),S):g(j)}function S(j){return j===62?J(j):j===93?(e.consume(j),S):g(j)}function v(j){return j===null||j===62?J(j):de(j)?(o=v,ne(j)):(e.consume(j),v)}function b(j){return j===null?n(j):j===63?(e.consume(j),w):de(j)?(o=b,ne(j)):(e.consume(j),b)}function w(j){return j===62?J(j):b(j)}function k(j){return on(j)?(e.consume(j),N):n(j)}function N(j){return j===45||Mt(j)?(e.consume(j),N):P(j)}function P(j){return de(j)?(o=P,ne(j)):Ne(j)?(e.consume(j),P):J(j)}function D(j){return j===45||Mt(j)?(e.consume(j),D):j===47||j===62||St(j)?A(j):n(j)}function A(j){return j===47?(e.consume(j),J):j===58||j===95||on(j)?(e.consume(j),M):de(j)?(o=A,ne(j)):Ne(j)?(e.consume(j),A):J(j)}function M(j){return j===45||j===46||j===58||j===95||Mt(j)?(e.consume(j),M):C(j)}function C(j){return j===61?(e.consume(j),T):de(j)?(o=C,ne(j)):Ne(j)?(e.consume(j),C):A(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),s=j,z):de(j)?(o=T,ne(j)):Ne(j)?(e.consume(j),T):(e.consume(j),Y)}function z(j){return j===s?(e.consume(j),s=void 0,q):j===null?n(j):de(j)?(o=z,ne(j)):(e.consume(j),z)}function Y(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||St(j)?A(j):(e.consume(j),Y)}function q(j){return j===47||j===62||St(j)?A(j):n(j)}function J(j){return j===62?(e.consume(j),e.exit("htmlTextData"),e.exit("htmlText"),t):n(j)}function ne(j){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),L}function L(j){return Ne(j)?Me(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):H(j)}function H(j){return e.enter("htmlTextData"),o(j)}}const Hl={name:"labelEnd",resolveAll:kC,resolveTo:AC,tokenize:TC},NC={tokenize:PC},CC={tokenize:_C},IC={tokenize:MC};function kC(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&hn(e,0,e.length,n),e}function AC(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=Vt(l,e.slice(a+1,a+r+3)),l=Vt(l,[["enter",u,t]]),l=Vt(l,ql(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=Vt(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=Vt(l,e.slice(o+1)),l=Vt(l,[["exit",c,t]]),hn(e,a,e.length,l),e}function TC(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(m){return a?a._inactive?h(m):(o=r.parser.defined.includes(Lr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(NC,u,o?u:h)(m):m===91?e.attempt(CC,u,o?d:h)(m):o?u(m):h(m)}function d(m){return e.attempt(IC,u,h)(m)}function u(m){return t(m)}function h(m){return a._balanced=!0,n(m)}}function PC(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return St(h)?bs(e,a)(h):a(h)}function a(h){return h===41?u(h):Ip(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return St(h)?bs(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Ap(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return St(h)?bs(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function _C(e,t,n){const r=this;return s;function s(l){return kp.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function MC(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const DC={name:"labelStartImage",resolveAll:Hl.resolveAll,tokenize:RC};function RC(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const OC={name:"labelStartLink",resolveAll:Hl.resolveAll,tokenize:LC};function LC(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Wa={name:"lineEnding",tokenize:FC};function FC(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Me(e,t,"linePrefix")}}const pi={name:"thematicBreak",tokenize:$C};function $C(e,t,n){let r=0,s;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return s=d,l(d)}function l(d){return d===s?(e.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||de(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===s?(e.consume(d),r++,c):(e.exit("thematicBreakSequence"),Ne(d)?Me(e,l,"whitespace")(d):l(d))}}const vt={continuation:{tokenize:UC},exit:HC,name:"list",tokenize:VC},zC={partial:!0,tokenize:GC},BC={partial:!0,tokenize:qC};function VC(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const x=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Oo(f)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(pi,n,d)(f):d(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Oo(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),d(f)):n(f)}function d(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(ma,r.interrupt?n:u,e.attempt(zC,m,h))}function u(f){return r.containerState.initialBlankLine=!0,a++,m(f)}function h(f){return Ne(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function UC(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ma,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Me(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!Ne(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(BC,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Me(e,e.attempt(vt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function qC(e,t,n){const r=this;return Me(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function HC(e){e.exit(this.containerState.type)}function GC(e,t,n){const r=this;return Me(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!Ne(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Fu={name:"setextUnderline",resolveTo:WC,tokenize:YC};function WC(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function YC(e,t,n){const r=this;let s;return a;function a(d){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===s?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),Ne(d)?Me(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||de(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const KC={tokenize:QC};function QC(e){const t=this,n=e.attempt(ma,r,e.attempt(this.parser.constructs.flowInitial,s,Me(e,e.attempt(this.parser.constructs.flow,s,e.attempt(tC,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const XC={resolveAll:Pp()},JC=Tp("string"),ZC=Tp("text");function Tp(e){return{resolveAll:Pp(e==="text"?eI:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(u){return d(u)?a(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),a(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const h=s[u];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Pp(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function eI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const d=s[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const tI={42:vt,43:vt,45:vt,48:vt,49:vt,50:vt,51:vt,52:vt,53:vt,54:vt,55:vt,56:vt,57:vt,62:jp},nI={91:aC},rI={[-2]:Ga,[-1]:Ga,32:Ga},sI={35:mC,42:pi,45:[Fu,pi],60:gC,61:Fu,95:pi,96:Ou,126:Ou},iI={38:Np,92:Ep},aI={[-5]:Wa,[-4]:Wa,[-3]:Wa,33:DC,38:Np,42:Lo,60:[ON,jC],91:OC,92:[uC,Ep],93:Hl,95:Lo,96:KN},oI={null:[Lo,XC]},lI={null:[42,95]},cI={null:[]},uI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:lI,contentInitial:nI,disable:cI,document:tI,flow:sI,flowInitial:rI,insideSpan:oI,string:iI,text:aI},Symbol.toStringTag,{value:"Module"}));function dI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:P(k),check:P(N),consume:v,enter:b,exit:w,interrupt:P(N,{interrupt:!0})},d={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let u=t.tokenize.call(d,c);return t.resolveAll&&a.push(t),d;function h(C){return o=Vt(o,C),y(),o[o.length-1]!==null?[]:(D(t,0),d.events=ql(a,d.events,d),d.events)}function m(C,T){return hI(f(C),T)}function f(C){return mI(o,C)}function x(){const{_bufferIndex:C,_index:T,line:z,column:Y,offset:q}=r;return{_bufferIndex:C,_index:T,line:z,column:Y,offset:q}}function g(C){s[C.line]=C.column,M()}function y(){let C;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<T.length;)S(T.charCodeAt(r._bufferIndex));else S(T)}}function S(C){u=u(C)}function v(C){de(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,M()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=C}function b(C,T){const z=T||{};return z.type=C,z.start=x(),d.events.push(["enter",z,d]),l.push(z),z}function w(C){const T=l.pop();return T.end=x(),d.events.push(["exit",T,d]),T}function k(C,T){D(C,T.from)}function N(C,T){T.restore()}function P(C,T){return z;function z(Y,q,J){let ne,L,H,j;return Array.isArray(Y)?ie(Y):"tokenize"in Y?ie([Y]):K(Y);function K(F){return te;function te(ce){const he=ce!==null&&F[ce],ze=ce!==null&&F.null,Et=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return ie(Et)(ce)}}function ie(F){return ne=F,L=0,F.length===0?J:E(F[L])}function E(F){return te;function te(ce){return j=A(),H=F,F.partial||(d.currentConstruct=F),F.name&&d.parser.constructs.disable.null.includes(F.name)?Ae():F.tokenize.call(T?Object.assign(Object.create(d),T):d,c,le,Ae)(ce)}}function le(F){return C(H,j),q}function Ae(F){return j.restore(),++L<ne.length?E(ne[L]):J}}}function D(C,T){C.resolveAll&&!a.includes(C)&&a.push(C),C.resolve&&hn(d.events,T,d.events.length-T,C.resolve(d.events.slice(T),d)),C.resolveTo&&(d.events=C.resolveTo(d.events,d))}function A(){const C=x(),T=d.previous,z=d.currentConstruct,Y=d.events.length,q=Array.from(l);return{from:Y,restore:J};function J(){r=C,d.previous=T,d.currentConstruct=z,d.events.length=Y,l=q,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function mI(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function hI(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function fI(e){const r={constructs:wN([uI,...(e||{}).extensions||[]]),content:s(AN),defined:[],document:s(PN),flow:s(KC),lazy:{},string:s(JC),text:s(ZC)};return r;function s(a){return o;function o(l){return dI(r,a,l)}}}function pI(e){for(;!Cp(e););return e}const $u=/[\0\t\n\r]/g;function gI(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let d,u,h,m,f;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if($u.lastIndex=h,d=$u.exec(a),m=d&&d.index!==void 0?d.index:a.length,f=a.charCodeAt(m),!d){t=a.slice(h);break}if(f===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(a.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const xI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yI(e){return e.replace(xI,vI)}function vI(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Sp(n.slice(a?2:1),a?16:10)}return Ul(n)||e}const _p={}.hasOwnProperty;function bI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wI(n)(pI(fI(n).document().write(gI()(e,t,!0))))}function wI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(_),autolinkProtocol:A,autolinkEmail:A,atxHeading:a(tt),blockQuote:a(ze),characterEscape:A,characterReference:A,codeFenced:a(Et),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Et,o),codeText:a(Nt,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(Ft),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Ze),hardBreakEscape:a(Ct),hardBreakTrailing:a(Ct),htmlFlow:a(kn,o),htmlFlowData:A,htmlText:a(kn,o),htmlTextData:A,image:a(I),label:o,link:a(_),listItem:a(Z),listItemValue:m,listOrdered:a(O,h),listUnordered:a(O),paragraph:a(Q),reference:E,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(tt),strong:a(G),thematicBreak:a(pe)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:he,autolinkProtocol:ce,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:Ae,characterReferenceMarkerNumeric:Ae,characterReferenceValue:F,characterReference:te,codeFenced:c(y),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:c(S),codeText:c(q),codeTextData:M,data:M,definition:c(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(T),hardBreakTrailing:c(T),htmlFlow:c(z),htmlFlowData:M,htmlText:c(Y),htmlTextData:M,image:c(ne),label:H,labelText:L,lineEnding:C,link:c(J),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:le,resourceDestinationString:j,resourceTitleString:K,resource:ie,setextHeading:c(D),setextHeadingLineSequence:P,setextHeadingText:N,strong:c(),thematicBreak:c()}};Mp(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(R){let U={type:"root",children:[]};const oe={stack:[U],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},fe=[];let we=-1;for(;++we<R.length;)if(R[we][1].type==="listOrdered"||R[we][1].type==="listUnordered")if(R[we][0]==="enter")fe.push(we);else{const nt=fe.pop();we=s(R,nt,we)}for(we=-1;++we<R.length;){const nt=t[R[we][0]];_p.call(nt,R[we][1].type)&&nt[R[we][1].type].call(Object.assign({sliceSerialize:R[we][2].sliceSerialize},oe),R[we][1])}if(oe.tokenStack.length>0){const nt=oe.tokenStack[oe.tokenStack.length-1];(nt[1]||zu).call(oe,void 0,nt[0])}for(U.position={start:Mn(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Mn(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},we=-1;++we<t.transforms.length;)U=t.transforms[we](U)||U;return U}function s(R,U,oe){let fe=U-1,we=-1,nt=!1,$t,ut,gn,zt;for(;++fe<=oe;){const Ve=R[fe];switch(Ve[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ve[0]==="enter"?we++:we--,zt=void 0;break}case"lineEndingBlank":{Ve[0]==="enter"&&($t&&!zt&&!we&&!gn&&(gn=fe),zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:zt=void 0}if(!we&&Ve[0]==="enter"&&Ve[1].type==="listItemPrefix"||we===-1&&Ve[0]==="exit"&&(Ve[1].type==="listUnordered"||Ve[1].type==="listOrdered")){if($t){let An=fe;for(ut=void 0;An--;){const ue=R[An];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;ut&&(R[ut][1].type="lineEndingBlank",nt=!0),ue[1].type="lineEnding",ut=An}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}gn&&(!ut||gn<ut)&&($t._spread=!0),$t.end=Object.assign({},ut?R[ut][1].start:Ve[1].end),R.splice(ut||fe,0,["exit",$t,Ve[2]]),fe++,oe++}if(Ve[1].type==="listItemPrefix"){const An={type:"listItem",_spread:!1,start:Object.assign({},Ve[1].start),end:void 0};$t=An,R.splice(fe,0,["enter",An,Ve[2]]),fe++,oe++,gn=void 0,zt=!0}}}return R[U][1]._spread=nt,oe}function a(R,U){return oe;function oe(fe){l.call(this,R(fe),fe),U&&U.call(this,fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(R,U,oe){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([U,oe||void 0]),R.position={start:Mn(U.start),end:void 0}}function c(R){return U;function U(oe){R&&R.call(this,oe),d.call(this,oe)}}function d(R,U){const oe=this.stack.pop(),fe=this.tokenStack.pop();if(fe)fe[0].type!==R.type&&(U?U.call(this,R,fe[0]):(fe[1]||zu).call(this,R,fe[0]));else throw new Error("Cannot close `"+R.type+"` ("+vs({start:R.start,end:R.end})+"): it‚Äôs not open");oe.position.end=Mn(R.end)}function u(){return vN(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(R){if(this.data.expectingFirstListItemValue){const U=this.stack[this.stack.length-2];U.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function f(){const R=this.resume(),U=this.stack[this.stack.length-1];U.lang=R}function x(){const R=this.resume(),U=this.stack[this.stack.length-1];U.meta=R}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/(\r?\n|\r)$/g,"")}function v(R){const U=this.resume(),oe=this.stack[this.stack.length-1];oe.label=U,oe.identifier=Lr(this.sliceSerialize(R)).toLowerCase()}function b(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function w(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function k(R){const U=this.stack[this.stack.length-1];if(!U.depth){const oe=this.sliceSerialize(R).length;U.depth=oe}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function P(R){const U=this.stack[this.stack.length-1];U.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function A(R){const oe=this.stack[this.stack.length-1].children;let fe=oe[oe.length-1];(!fe||fe.type!=="text")&&(fe=ae(),fe.position={start:Mn(R.start),end:void 0},oe.push(fe)),this.stack.push(fe)}function M(R){const U=this.stack.pop();U.value+=this.sliceSerialize(R),U.position.end=Mn(R.end)}function C(R){const U=this.stack[this.stack.length-1];if(this.data.atHardBreak){const oe=U.children[U.children.length-1];oe.position.end=Mn(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(U.type)&&(A.call(this,R),M.call(this,R))}function T(){this.data.atHardBreak=!0}function z(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function Y(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function q(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function J(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function ne(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function L(R){const U=this.sliceSerialize(R),oe=this.stack[this.stack.length-2];oe.label=yI(U),oe.identifier=Lr(U).toLowerCase()}function H(){const R=this.stack[this.stack.length-1],U=this.resume(),oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,oe.type==="link"){const fe=R.children;oe.children=fe}else oe.alt=U}function j(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function K(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function ie(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function le(R){const U=this.resume(),oe=this.stack[this.stack.length-1];oe.label=U,oe.identifier=Lr(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function Ae(R){this.data.characterReferenceType=R.type}function F(R){const U=this.sliceSerialize(R),oe=this.data.characterReferenceType;let fe;oe?(fe=Sp(U,oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):fe=Ul(U);const we=this.stack[this.stack.length-1];we.value+=fe}function te(R){const U=this.stack.pop();U.position.end=Mn(R.end)}function ce(R){M.call(this,R);const U=this.stack[this.stack.length-1];U.url=this.sliceSerialize(R)}function he(R){M.call(this,R);const U=this.stack[this.stack.length-1];U.url="mailto:"+this.sliceSerialize(R)}function ze(){return{type:"blockquote",children:[]}}function Et(){return{type:"code",lang:null,meta:null,value:""}}function Nt(){return{type:"inlineCode",value:""}}function Ft(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ze(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function Ct(){return{type:"break"}}function kn(){return{type:"html",value:""}}function I(){return{type:"image",title:null,url:"",alt:null}}function _(){return{type:"link",title:null,url:"",children:[]}}function O(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function Z(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function Q(){return{type:"paragraph",children:[]}}function G(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function pe(){return{type:"thematicBreak"}}}function Mn(e){return{line:e.line,column:e.column,offset:e.offset}}function Mp(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Mp(e,r):SI(e,r)}}function SI(e,t){let n;for(n in t)if(_p.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function zu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+vs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+vs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+vs({start:t.start,end:t.end})+") is still open")}function jI(e){const t=this;t.parser=n;function n(r){return bI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function EI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function NI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function CI(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function II(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function AI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=rs(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function TI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function PI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Dp(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function _I(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Dp(e,t);const s={src:rs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function MI(e,t){const n={src:rs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function DI(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function RI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Dp(e,t);const s={href:rs(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function OI(e,t){const n={href:rs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LI(e,t,n){const r=e.all(t),s=n?FI(n):Rp(t),a={},o=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(s||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function FI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Rp(n[r])}return t}function Rp(e){const t=e.spread;return t??e.children.length>1}function $I(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function zI(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function BI(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function VI(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UI(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=$l(t.children[1]),c=pp(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function qI(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let x={type:"element",tagName:a,properties:m,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function HI(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Bu=9,Vu=32;function GI(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Uu(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Uu(t.slice(s),s>0,!1)),a.join("")}function Uu(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===Bu||a===Vu;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===Bu||a===Vu;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function WI(e,t){const n={type:"text",value:GI(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function YI(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const KI={blockquote:EI,break:NI,code:CI,delete:II,emphasis:kI,footnoteReference:AI,heading:TI,html:PI,imageReference:_I,image:MI,inlineCode:DI,linkReference:RI,link:OI,listItem:LI,list:$I,paragraph:zI,root:BI,strong:VI,table:UI,tableCell:HI,tableRow:qI,text:WI,thematicBreak:YI,toml:ni,yaml:ni,definition:ni,footnoteDefinition:ni};function ni(){}const Op=-1,ha=0,ws=1,Ai=2,Gl=3,Wl=4,Yl=5,Kl=6,Lp=7,Fp=8,qu=typeof self=="object"?self:globalThis,QI=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case ha:case Op:return n(o,s);case ws:{const l=n([],s);for(const c of o)l.push(r(c));return l}case Ai:{const l=n({},s);for(const[c,d]of o)l[r(c)]=r(d);return l}case Gl:return n(new Date(o),s);case Wl:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Yl:{const l=n(new Map,s);for(const[c,d]of o)l.set(r(c),r(d));return l}case Kl:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case Lp:{const{name:l,message:c}=o;return n(new qu[l](c),s)}case Fp:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new qu[a](o),s)};return r},Hu=e=>QI(new Map,e)(0),Ar="",{toString:XI}={},{keys:JI}=Object,ds=e=>{const t=typeof e;if(t!=="object"||!e)return[ha,t];const n=XI.call(e).slice(8,-1);switch(n){case"Array":return[ws,Ar];case"Object":return[Ai,Ar];case"Date":return[Gl,Ar];case"RegExp":return[Wl,Ar];case"Map":return[Yl,Ar];case"Set":return[Kl,Ar];case"DataView":return[ws,n]}return n.includes("Array")?[ws,n]:n.includes("Error")?[Lp,n]:[Ai,n]},ri=([e,t])=>e===ha&&(t==="function"||t==="symbol"),ZI=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=ds(o);switch(l){case ha:{let u=o;switch(c){case"bigint":l=Fp,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return s([Op],o)}return s([l,u],o)}case ws:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const u=[],h=s([l,u],o);for(const m of o)u.push(a(m));return h}case Ai:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],h=s([l,u],o);for(const m of JI(o))(e||!ri(ds(o[m])))&&u.push([a(m),a(o[m])]);return h}case Gl:return s([l,o.toISOString()],o);case Wl:{const{source:u,flags:h}=o;return s([l,{source:u,flags:h}],o)}case Yl:{const u=[],h=s([l,u],o);for(const[m,f]of o)(e||!(ri(ds(m))||ri(ds(f))))&&u.push([a(m),a(f)]);return h}case Kl:{const u=[],h=s([l,u],o);for(const m of o)(e||!ri(ds(m)))&&u.push(a(m));return h}}const{message:d}=o;return s([l,{name:c,message:d}],o)};return a},Gu=(e,{json:t,lossy:n}={})=>{const r=[];return ZI(!(t||n),!!t,new Map,r)(e),r},Ti=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Hu(Gu(e,t)):structuredClone(e):(e,t)=>Hu(Gu(e,t));function ek(e,t){const n=[{type:"text",value:"‚Ü©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function tk(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function nk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ek,r=e.options.footnoteBackLabel||tk,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),h=String(d.identifier).toUpperCase(),m=rs(h.toLowerCase());let f=0;const x=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){x.length>0&&x.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const v=y.children[y.children.length-1];v&&v.type==="text"?v.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...x)}else u.push(...x);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(d,S),l.push(S)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Ti(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const $p=function(e){if(e==null)return ak;if(typeof e=="function")return fa(e);if(typeof e=="object")return Array.isArray(e)?rk(e):sk(e);if(typeof e=="string")return ik(e);throw new Error("Expected function, string, or object as test")};function rk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=$p(e[n]);return fa(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function sk(e){const t=e;return fa(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function ik(e){return fa(t);function t(n){return n&&n.type===e}}function fa(e){return t;function t(n,r,s){return!!(ok(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function ak(){return!0}function ok(e){return e!==null&&typeof e=="object"&&"type"in e}const zp=[],lk=!0,Wu=!1,ck="skip";function uk(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=$p(s),o=r?-1:1;l(e,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=zp,x,g,y;if((!t||a(c,d,u[u.length-1]||void 0))&&(f=dk(n(c,u)),f[0]===Wu))return f;if("children"in c&&c.children){const S=c;if(S.children&&f[0]!==ck)for(g=(r?S.children.length:-1)+o,y=u.concat(S);g>-1&&g<S.children.length;){const v=S.children[g];if(x=l(v,g,y)(),x[0]===Wu)return x;g=typeof x[1]=="number"?x[1]:g+o}}return f}}}function dk(e){return Array.isArray(e)?e:typeof e=="number"?[lk,e]:e==null?zp:[e]}function Bp(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),uk(e,a,l,s);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const Fo={}.hasOwnProperty,mk={};function hk(e,t){const n=t||mk,r=new Map,s=new Map,a=new Map,o={...KI,...n.handlers},l={all:d,applyData:pk,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:fk,wrap:xk};return Bp(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:s,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),l;function c(u,h){const m=u.type,f=l.handlers[m];if(Fo.call(l.handlers,m)&&f)return f(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in u){const{children:g,...y}=u,S=Ti(y);return S.children=l.all(u),S}return Ti(u)}return(l.options.unknownHandler||gk)(l,u,h)}function d(u){const h=[];if("children"in u){const m=u.children;let f=-1;for(;++f<m.length;){const x=l.one(m[f],u);if(x){if(f&&m[f-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Yu(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=Yu(g.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function fk(e,t){e.position&&(t.position=XE(e))}function pk(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Ti(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function gk(e,t){const n=t.data||{},r="value"in t&&!(Fo.call(n,"hProperties")||Fo.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function xk(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Yu(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ku(e,t){const n=hk(e,t),r=n.one(e,void 0),s=nk(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function yk(e,t){return e&&"run"in e?async function(n,r){const s=Ku(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Ku(n,{file:r,...e||t})}}function Qu(e){if(e)throw e}var gi=Object.prototype.hasOwnProperty,Vp=Object.prototype.toString,Xu=Object.defineProperty,Ju=Object.getOwnPropertyDescriptor,Zu=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Vp.call(t)==="[object Array]"},ed=function(t){if(!t||Vp.call(t)!=="[object Object]")return!1;var n=gi.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&gi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||gi.call(t,s)},td=function(t,n){Xu&&n.name==="__proto__"?Xu(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},nd=function(t,n){if(n==="__proto__")if(gi.call(t,n)){if(Ju)return Ju(t,n).value}else return;return t[n]},vk=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)r=nd(l,n),s=nd(t,n),l!==s&&(u&&s&&(ed(s)||(a=Zu(s)))?(a?(a=!1,o=r&&Zu(r)?r:[]):o=r&&ed(r)?r:{},td(l,{name:n,newValue:e(u,o,s)})):typeof s<"u"&&td(l,{name:n,newValue:s}));return l};const Ya=Nm(vk);function $o(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function bk(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...d){const u=e[++a];let h=-1;if(c){o(c);return}for(;++h<s.length;)(d[h]===null||d[h]===void 0)&&(d[h]=s[h]);s=d,u?wk(u,l)(...d):o(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function wk(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return s(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const en={basename:Sk,dirname:jk,extname:Ek,join:Nk,sep:"/"};function Sk(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Us(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function jk(e){if(Us(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ek(e){Us(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function Nk(...e){let t=-1,n;for(;++t<e.length;)Us(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ck(n)}function Ck(e){Us(e);const t=e.codePointAt(0)===47;let n=Ik(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Ik(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function Us(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kk={cwd:Ak};function Ak(){return"/"}function zo(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Tk(e){if(typeof e=="string")e=new URL(e);else if(!zo(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Pk(e)}function Pk(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Ka=["history","path","basename","stem","extname","dirname"];class Up{constructor(t){let n;t?zo(t)?n={path:t}:typeof t=="string"||_k(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":kk.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ka.length;){const a=Ka[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Ka.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?en.basename(this.path):void 0}set basename(t){Xa(t,"basename"),Qa(t,"basename"),this.path=en.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?en.dirname(this.path):void 0}set dirname(t){rd(this.basename,"dirname"),this.path=en.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?en.extname(this.path):void 0}set extname(t){if(Qa(t,"extname"),rd(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=en.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){zo(t)&&(t=Tk(t)),Xa(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?en.basename(this.path,this.extname):void 0}set stem(t){Xa(t,"stem"),Qa(t,"stem"),this.path=en.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new ct(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Qa(e,t){if(e&&e.includes(en.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+en.sep+"`")}function Xa(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rd(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function _k(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Mk=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},Dk={}.hasOwnProperty;class Ql extends Mk{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=bk()}copy(){const t=new Ql;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ya(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(eo("data",this.frozen),this.namespace[t]=n,this):Dk.call(this.namespace,t)&&this.namespace[t]||void 0:t?(eo("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=si(t),r=this.parser||this.Parser;return Ja("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Ja("process",this.parser||this.Parser),Za("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=si(t),c=r.parse(l);r.run(c,l,function(u,h,m){if(u||!h||!m)return d(u);const f=h,x=r.stringify(f,m);Lk(x)?m.value=x:m.result=x,d(u,m)});function d(u,h){u||!h?o(u):a?a(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Ja("processSync",this.parser||this.Parser),Za("processSync",this.compiler||this.Compiler),this.process(t,s),id("processSync","process",n),r;function s(a,o){n=!0,Qu(a),r=o}}run(t,n,r){sd(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=si(n);s.run(t,c,d);function d(u,h,m){const f=h||t;u?l(u):o?o(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),id("runSync","run",r),s;function a(o,l){Qu(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=si(n),s=this.compiler||this.Compiler;return Za("stringify",s),sd(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(eo("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(s.settings=Ya(!0,s.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===d){m=h;break}if(m===-1)r.push([d,...u]);else if(u.length>0){let[f,...x]=u;const g=r[m][1];$o(g)&&$o(f)&&(f=Ya(!0,g,f)),r[m]=[d,f,...x]}}}}const Rk=new Ql().freeze();function Ja(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Za(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function eo(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sd(e){if(!$o(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function id(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function si(e){return Ok(e)?e:new Up(e)}function Ok(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Lk(e){return typeof e=="string"||Fk(e)}function Fk(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $k="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ad=[],od={allowDangerousHtml:!0},zk=/^(https?|ircs?|mailto|xmpp)$/i,Bk=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vk(e){const t=Uk(e),n=qk(e);return Hk(t.runSync(t.parse(n),n),e)}function Uk(e){const t=e.rehypePlugins||ad,n=e.remarkPlugins||ad,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...od}:od;return Rk().use(jI).use(n).use(yk,r).use(t)}function qk(e){const t=e.children||"",n=new Up;return typeof t=="string"&&(n.value=t),n}function Hk(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Gk;for(const u of Bk)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+$k+u.id,void 0);return Bp(e,d),nN(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function d(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let f;for(f in Ha)if(Object.hasOwn(Ha,f)&&Object.hasOwn(u.properties,f)){const x=u.properties[f],g=Ha[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=c(String(x||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(u,h,m)),f&&m&&typeof h=="number")return l&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function Gk(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||zk.test(e.slice(0,t))?e:""}const Ss=({text:e,maxLength:t=50,className:n="",tooltipEnabled:r=!1,as:s="span"})=>{const[a,o]=p.useState(!1);if(!e||e.length<=t)return i.jsx(s,{className:n,children:e});const l=`${e.substring(0,t)}...`;return r?i.jsx(Dh,{children:i.jsxs(t1,{open:a,onOpenChange:o,children:[i.jsx(n1,{asChild:!0,children:i.jsx(s,{className:`${n} cursor-help`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),children:l})}),i.jsx(Rh,{className:"max-w-xs bg-white text-black p-2 rounded shadow-md border border-gray-200",children:i.jsx("p",{children:e})})]})}):i.jsx(s,{className:n,children:l})},bn=Ye("calendarService");var _s=(e=>(e.NOT_SUPPORTED="NOT_SUPPORTED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.GENERAL_ERROR="GENERAL_ERROR",e))(_s||{});const qp=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t="share"in navigator&&"canShare"in navigator,n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=!e;return bn.info("V√©rification du support calendrier",{isMobile:e,hasWebShare:t,isIOS:n,isDesktop:r,userAgent:navigator.userAgent}),t||n||r},Wk=e=>{new Date().getFullYear();let n=new Date;if(e.days.includes("samedi"))for(;n.getDay()!==6;)n.setDate(n.getDate()+1);else if(e.days.includes("dimanche"))for(;n.getDay()!==0;)n.setDate(n.getDate()+1);const r=e.time.split(" - ")[0],s=e.time.split(" - ")[1]||parseInt(r.split("h")[0])+1+"h00",a=new Date(n),[o,l]=r.split("h").map(x=>parseInt(x)||0);a.setHours(o,l,0);const c=new Date(n),[d,u]=s.split("h").map(x=>parseInt(x)||0);c.setHours(d,u,0);const h=x=>x.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=x=>x.replace(/\n/g,"\\n").replace(/,/g,"\\,");return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Collectif Feydeau//App//FR","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${e.id}@collectif-feydeau.app`,`DTSTAMP:${h(new Date)}`,`DTSTART:${h(a)}`,`DTEND:${h(c)}`,`SUMMARY:${m(e.title)}`,`DESCRIPTION:${m(e.artistBio||"")}`,`LOCATION:${m("√éle Feydeau, Nantes")}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`)},Xl=async e=>{try{const t=Wk(e),n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent),s=n||r||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);bn.info("D√©tection de plateforme",{isIOS:n,isAndroid:r,isMobile:s,userAgent:navigator.userAgent});const a=new Blob([t],{type:"text/calendar;charset=utf-8"});if(n)try{const c=URL.createObjectURL(a),d=document.createElement("a");return d.href=c.replace("blob:","webcal:"),d.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(c),100),bn.info("√âv√©nement ajout√© au calendrier iOS",{eventId:e.id}),{success:!0}}catch(c){bn.warn("Erreur lors de l'ajout au calendrier iOS",{iosError:c})}if(r)try{if(navigator.share){const c=URL.createObjectURL(a);return await navigator.share({title:`Ajouter "${e.title}" √† votre calendrier`,text:`√âv√©nement: ${e.title} - ${e.days.join(" et ")} √† ${e.time}
Lieu: √éle Feydeau, Nantes`,url:window.location.href}),setTimeout(()=>URL.revokeObjectURL(c),100),bn.info("Informations partag√©es pour ajout au calendrier Android",{eventId:e.id}),{success:!0}}}catch{}if(s&&navigator.share)try{const c=new File([a],`${e.title.replace(/\s+/g,"_")}.ics`,{type:"text/calendar"});if(navigator.canShare&&navigator.canShare({files:[c]}))return await navigator.share({files:[c],title:`Ajouter "${e.title}" √† votre calendrier`,text:`√âv√©nement: ${e.title} - ${e.days.join(" et ")} √† ${e.time}`}),bn.info("Fichier partag√© pour ajout au calendrier",{eventId:e.id}),{success:!0}}catch(c){bn.warn("Erreur lors du partage de fichier",{shareError:c})}const o=URL.createObjectURL(a),l=document.createElement("a");return l.href=o,l.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>URL.revokeObjectURL(o),100),bn.info("Fichier .ics t√©l√©charg√©",{eventId:e.id,platform:r?"Android":n?"iOS":"Desktop"}),{success:!0}}catch(t){return bn.error("Erreur lors de l'ajout au calendrier",{error:t}),{success:!1,errorType:"GENERAL_ERROR",errorMessage:t instanceof Error?t.message:"Une erreur inconnue est survenue"}}},Yk=Object.freeze(Object.defineProperty({__proto__:null,CalendarErrorType:_s,addToCalendar:Xl,isCalendarSupported:qp},Symbol.toStringTag,{value:"Module"})),Qn="https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app",Pi="likes-data",Kk=5*60*1e3,_i=new Map;function Qk(e){const t=_i.get(e);return t?Date.now()-t.timestamp>Kk?(_i.delete(e),null):(console.log(`üì¶ Cache hit pour ${e}:`,t.data),t.data):null}function Hp(e,t){_i.set(e,{data:t,timestamp:Date.now()}),console.log(`üíæ Cache mis √† jour pour ${e}:`,t)}function Xk(e){_i.delete(e),console.log(`üóëÔ∏è Cache invalid√© pour ${e}`)}function pa(){let e=localStorage.getItem("user-session-id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("user-session-id",e)),e}async function Jk(e,t){var n;try{const r=t||pa();console.log(`üîÑ Toggle like pour ${e} par ${r}`);const s=await fetch(`${Qn}/${Pi}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[],lastLiked:null},l=((n=o.likedBy)==null?void 0:n.includes(r))||!1;let c=o.likedBy||[],d=o.likes||0;l?(c=c.filter(m=>m!==r),d=Math.max(0,d-1),console.log(`‚ù§Ô∏è Like retir√© pour ${e}`)):(c.push(r),d+=1,console.log(`üíñ Like ajout√© pour ${e}`));const u={likes:d,likedBy:c,lastLiked:new Date().toISOString()};if(!(await fetch(`${Qn}/${Pi}/${e}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Erreur lors de la mise √† jour des likes");return Xk(e),await tA(),{success:!0,liked:!l,total:d}}catch(r){return console.error("‚ùå Erreur toggle like:",r),{success:!1,liked:!1,total:0,error:r instanceof Error?r.message:"Erreur inconnue"}}}async function Zk(e,t){try{const n=t||pa(),r=Qk(e);if(r)return{...r,liked:Array.isArray(r.likedBy)&&r.likedBy.includes(n)};const s=await fetch(`${Qn}/${Pi}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[]},l={liked:Array.isArray(o.likedBy)&&o.likedBy.includes(n),total:o.likes||0,likedBy:o.likedBy||[]};return Hp(e,l),l}catch(n){return console.error("‚ùå Erreur getLikeData:",n),{liked:!1,total:0}}}async function eA(e,t){try{const n=t||pa();console.log(`üîÑ R√©cup√©ration fra√Æche depuis Firebase pour ${e}`);const r=await fetch(`${Qn}/${Pi}/${e}.json`),a=(r.ok?await r.json():null)||{likes:0,likedBy:[]},o={liked:Array.isArray(a.likedBy)&&a.likedBy.includes(n),total:a.likes||0,likedBy:a.likedBy||[]};return Hp(e,o),console.log(`üîÑ Donn√©es fra√Æches r√©cup√©r√©es pour ${e}:`,o),o}catch(n){return console.error("‚ùå Erreur getLikeDataFresh:",n),{liked:!1,total:0}}}async function Gp(){try{const e=await fetch(`${Qn}/likes-stats.json`),n=(e.ok?await e.json():null)||{total:0,today:0,topEntry:null};return console.log("üìà Stats globales:",n),n}catch(e){return console.error("‚ùå Erreur getLikeStats:",e),{total:0,today:0}}}async function tA(){try{const e=await fetch(`${Qn}/likes-data.json`),t=e.ok?await e.json():{};let n=0,r="",s=0;Object.entries(t||{}).forEach(([o,l])=>{const c=(l==null?void 0:l.likes)||0;n+=c,c>s&&(s=c,r=o)});const a={total:n,today:0,topEntry:r||null,lastUpdated:new Date().toISOString()};await fetch(`${Qn}/likes-stats.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),console.log(`üìä Stats mises √† jour: ${n} likes total, top: ${r}`)}catch(e){console.error("‚ùå Erreur updateGlobalStats:",e)}}async function nA(){try{const e={timestamp:new Date().toISOString(),message:"Test de connexion likes"},t=await fetch(`${Qn}/test-connection.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(console.log("‚úÖ Connexion Firebase OK pour les likes"),!0):(console.error("‚ùå Erreur connexion Firebase:",t.status),!1)}catch(e){return console.error("‚ùå Erreur connexion Firebase:",e),!1}}function Wp(e){const[t,n]=p.useState(!1),[r,s]=p.useState(0),[a,o]=p.useState(!0),[l,c]=p.useState(null),[d,u]=p.useState(!1),h=pa(),m=p.useCallback(async()=>{try{o(!0),c(null);const y=await Zk(e,h);n(y.liked),s(y.total),console.log(`üîÑ Donn√©es likes charg√©es pour ${e}:`,y)}catch(y){console.error("‚ùå Erreur chargement likes:",y),c(y instanceof Error?y.message:"Erreur de chargement")}finally{o(!1)}},[e,h]),f=p.useCallback(async()=>{try{c(null);const y=await eA(e,h);n(y.liked),s(y.total),console.log(`üîÑ Donn√©es likes fra√Æches pour ${e}:`,y)}catch(y){console.error("‚ùå Erreur chargement likes fresh:",y),c(y instanceof Error?y.message:"Erreur de chargement")}},[e,h]);p.useEffect(()=>{if(!e)return;console.log(`üéß Chargement initial pour ${e}`),m();const y=setInterval(()=>{console.log(`‚è∞ Polling automatique pour ${e}`),f()},5e3);return()=>{console.log(`üîá Arr√™t polling pour ${e}`),clearInterval(y)}},[e,h,m,f]);const x=p.useCallback(async()=>{if(d){console.log(`‚è≥ Toggle like d√©j√† en cours pour ${e}, ignor√©`);return}try{u(!0),c(null),console.log(`üîÑ Toggle like pour ${e}...`);const y=!t,S=y?r+1:Math.max(0,r-1);n(y),s(S);const v=await Jk(e,h);v.success?console.log(`‚úÖ Like toggled avec succ√®s pour ${e}`):(n(t),s(r),c(v.error||"Erreur lors du like"),console.error("‚ùå Erreur toggle like:",v.error))}catch(y){n(t),s(r),c(y instanceof Error?y.message:"Erreur inconnue"),console.error("‚ùå Erreur toggle like:",y)}finally{setTimeout(()=>{u(!1)},500)}},[e,h,t,r,d]),g=p.useCallback(async()=>{await m()},[m]);return{liked:t,total:r,loading:a,error:l,isToggling:d,toggleLike:x,refresh:g}}const to=({value:e,loading:t})=>{const[n,r]=p.useState(e),[s,a]=p.useState(!1);return p.useEffect(()=>{e!==n&&!t&&(a(!0),setTimeout(()=>{r(e),setTimeout(()=>a(!1),150)},150))},[e,n,t]),t?i.jsx("span",{children:"..."}):i.jsx(be.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:se("font-medium transition-colors",s&&"text-green-400"),children:n},n)},rA=({isToggling:e,error:t,liked:n})=>e?i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full"}):t?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}):null,Xn=({entryId:e,className:t,variant:n="compact",showCount:r=!0})=>{const{liked:s,total:a,loading:o,error:l,isToggling:c,toggleLike:d}=Wp(e),[u,h]=p.useState(!1),m=f=>{f.stopPropagation(),f.preventDefault(),!o&&!c&&(d(),h(!0),setTimeout(()=>h(!1),1e3))};return n==="compact"?i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("absolute bottom-2 right-2 flex items-center gap-1 px-2 py-1 rounded-full","bg-black/60 backdrop-blur-sm text-white text-xs z-10","hover:bg-black/80 transition-colors","disabled:opacity-50 cursor-pointer",c&&"animate-pulse",u&&"bg-green-500/80",l&&"bg-red-500/80",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},children:[i.jsx(an,{mode:"wait",children:c?i.jsx(rA,{isToggling:!0,error:null,liked:s},"loading"):i.jsx(be.div,{animate:s?{scale:[1,1.3,1],rotate:[0,-10,10,0]}:{scale:1},transition:{duration:.4,ease:"easeOut"},children:i.jsx(En,{size:12,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-white")})},"heart")}),r&&i.jsx(to,{value:a,loading:o}),i.jsx(an,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):n==="icon"?i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500","bg-white hover:shadow-sm transition-all duration-200","disabled:opacity-50 cursor-pointer relative",c&&"animate-pulse",u&&"border-green-400 text-green-500",l&&"border-red-400 text-red-500",s&&"border-red-400 text-red-500",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},title:`${s?"Retirer le":"Ajouter un"} like${r&&a>0?` (${a})`:""}`,children:[i.jsx(an,{mode:"wait",children:c?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"})},"loading"):i.jsx(be.div,{initial:{scale:0},animate:s?{scale:[1,1.2,1],rotate:[0,-10,10,0]}:{scale:1},exit:{scale:0},transition:{duration:.4,ease:"easeOut"},children:i.jsx(En,{size:18,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-gray-500")})},"heart")}),r&&a>0&&i.jsx(be.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:i.jsx(to,{value:a,loading:o})}),i.jsx(an,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("flex items-center gap-3 px-4 py-3 rounded-lg relative overflow-hidden","bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700","transition-all duration-300 disabled:opacity-50",c&&"animate-pulse",u&&"bg-green-100 dark:bg-green-900/30",l&&"bg-red-100 dark:bg-red-900/30",t),whileTap:c?{}:{scale:.98},whileHover:c?{}:{scale:1.02},animate:u?{scale:[1,1.02,1]}:{},children:[i.jsx(an,{mode:"wait",children:c?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full"})},"loading"):i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:i.jsx(be.div,{animate:s?{scale:[1,1.4,1],rotate:[0,-15,15,0]}:{scale:1},transition:{duration:.5,ease:"easeOut"},children:i.jsx(En,{size:20,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-lg":"text-slate-600 dark:text-slate-400")})})},"heart")}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx(be.span,{className:"text-sm font-medium",animate:u?{color:"#10b981"}:{},children:c?"En cours...":s?"Lik√© !":"Liker"}),r&&i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(to,{value:a,loading:o}),i.jsxs("span",{children:["like",a!==1?"s":""]})]})]}),i.jsx(an,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:.8},animate:{scale:4,opacity:0},exit:{opacity:0},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0 bg-green-400/20 rounded-lg"})})]})},sA=({text:e})=>{const[t,n]=p.useState(!1),s=(l=>{if(l.length<=120)return l;const d=l.substring(0,120),u=d.lastIndexOf(" ");return d.substring(0,u)+"..."})(e),a=e.length>s.length,o=()=>{n(!t)};return i.jsx("div",{className:"text-sm text-[#4a5d94]",children:i.jsxs("div",{onClick:a?o:void 0,onKeyDown:l=>{a&&(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},tabIndex:a?0:void 0,role:a?"button":void 0,"aria-expanded":t,className:a?"cursor-pointer":"",children:[i.jsx(Vk,{components:{p:({node:l,...c})=>i.jsx("p",{className:"mb-3",...c}),h2:({node:l,...c})=>i.jsx("h2",{className:"text-lg font-bold mb-2",...c}),h3:({node:l,...c})=>i.jsx("h3",{className:"text-md font-semibold mb-2",...c}),hr:({node:l,...c})=>i.jsx("hr",{className:"my-4 border-t border-[#d8e3ff]",...c})},children:t?e:s}),a&&i.jsx("div",{className:"flex items-center text-xs text-[#8c9db5] mt-1",children:t?i.jsxs(i.Fragment,{children:[i.jsx(dm,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"R√©duire"})]}):i.jsxs(i.Fragment,{children:[i.jsx(el,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"(pour voir +)"})]})})]})})},Jl=({event:e,isOpen:t,onClose:n,source:r})=>{const s=xt(),{toast:a}=hl(),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,h]=p.useState([]);p.useEffect(()=>{t&&e&&V.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:e.id,event_title:e.title,source:r})},[t,e,r]),p.useEffect(()=>{if(e){const b=it();if(l(b),d(qp()),e.locationId){const w=W1(e.locationId).filter(k=>k.id!==e.id);h(w)}}},[e]);const m=e?o.some(b=>b.id===e.id):!1,f=()=>{e&&(console.log(`[EventDetails] Navigation vers la carte pour l'√©v√©nement ${e.id} au lieu ${e.locationId}`),console.log(`[EventDetails] Source de navigation: ${r}`),bo(ee.CLICK,"view_on_map_button",{from:"event_details",event_id:e.id,location_id:e.locationId,source:r}),n(),setTimeout(()=>{console.log(`[EventDetails] Redirection vers /map avec highlightLocationId=${e.locationId}`),s("/map",{state:{highlightLocationId:e.locationId,fromEvent:!0,timestamp:new Date().getTime()}})},100))},x=b=>{b.preventDefault(),b.stopPropagation(),e&&(rE(e),s("/community?tab=contribute"),n(),V.trackCommunityInteraction(ee.CONTRIBUTION,{from:"event_details",event_id:e.id,event_title:e.title}))},g=b=>{if(b.preventDefault(),b.stopPropagation(),!e)return;o.some(k=>k.id===e.id)?(aa(e.id),l(it()),V.trackContentInteraction(ee.UNSAVE,"event",e.id,{event_title:e.title,source:r})):(Sl(e),l(it()),V.trackContentInteraction(ee.SAVE,"event",e.id,{event_title:e.title,source:r}))},y=async b=>{if(b.preventDefault(),b.stopPropagation(),!!e)try{V.trackProgramCTA("add_to_calendar",e.id);const w=await Xl(e);w.success?a({title:"√âv√©nement ajout√© au calendrier",description:`${e.title} a √©t√© ajout√© √† votre calendrier.`}):w.errorType===_s.NOT_SUPPORTED?a({title:"Fonctionnalit√© non support√©e",description:"Votre appareil ne supporte pas l'ajout au calendrier.",variant:"destructive"}):(a({title:"Erreur",description:w.errorMessage||"Une erreur est survenue lors de l'ajout au calendrier.",variant:"destructive"}),V.trackError(ee.API_ERROR,"add_to_calendar",{event_id:e.id,error_message:w.errorMessage}))}catch(w){console.error("Erreur lors de l'ajout au calendrier:",w),a({title:"Erreur",description:"Une erreur inattendue est survenue.",variant:"destructive"}),V.trackError(ee.API_ERROR,"add_to_calendar_exception",{event_id:e==null?void 0:e.id,error_message:w==null?void 0:w.message})}};if(!e||!t)return null;const S=m,v=Uh.find(b=>b.id===e.artistId);return i.jsx(sp,{open:t,onOpenChange:b=>!b&&n(),children:i.jsxs(Ml,{className:"w-[95vw] sm:w-[90vw] md:w-[80vw] lg:max-w-md max-h-[85vh] overflow-y-auto pt-14","aria-describedby":"event-details-description",children:[i.jsx("div",{id:"event-details-description",className:"sr-only",children:"D√©tails de l'√©v√©nement s√©lectionn√©"}),i.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-end items-center p-3 bg-white z-10",children:i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(Xn,{entryId:`event-${e.id}`,variant:"icon",showCount:!0}),i.jsx("button",{className:`flex items-center justify-center h-10 w-10 rounded-full border ${S?"border-[#ff7a45] text-[#ff7a45]":"border-gray-300 text-gray-500"} transition-all duration-200 hover:shadow-sm`,onClick:g,title:S?"Retirer des favoris":"Ajouter aux favoris",type:"button",children:S?i.jsx(Zo,{className:"h-5 w-5"}):i.jsx(Gi,{className:"h-5 w-5"})}),i.jsx(ca,{title:`${e.title} - √éle Feydeau`,text:`D√©couvrez ${e.title} par ${e.artistName} sur l'√éle Feydeau √† Nantes!`,url:window.location.href}),i.jsx("button",{className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500 transition-all duration-200 hover:shadow-sm",onClick:n,title:"Fermer",type:"button",children:i.jsx(gr,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Dl,{className:"sr-only",children:i.jsx(Rl,{children:e.title})}),i.jsxs("div",{className:"py-2 px-1 overflow-x-hidden",children:[e.type==="exposition"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#e0ebff] p-3 rounded-lg mb-2",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-2",children:i.jsx(Ss,{text:e.artistName,maxLength:40,className:"text-sm text-[#4a5d94]"})})]}):i.jsx("div",{className:"bg-[#f9f2ee] p-3 rounded-lg mb-3",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(Ss,{text:`${wl(e.locationId)} ‚Ä¢ ${e.time}`,maxLength:40,className:"text-xs text-[#8c9db5]"})})]}),i.jsxs("div",{className:"bg-[#f0f5ff] p-3 rounded-lg mb-4",children:[(v==null?void 0:v.presentation)&&i.jsx(sA,{text:v.presentation}),e.type==="concert"&&v&&i.jsxs("div",{className:"space-y-4 mt-4",children:[v.email&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Contact email:"}),i.jsx("a",{href:`mailto:${v.email}`,className:"text-sm text-blue-600 hover:underline",children:v.email})]}),v.website&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Site web:"}),i.jsx("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.website.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.phone&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"T√©l√©phone:"}),i.jsx("a",{href:`tel:${v.phone}`,className:"text-sm text-blue-600 hover:underline",children:v.phone})]}),v.facebook&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Facebook:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.facebook})]}),v.youtube&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"YouTube:"}),i.jsx("a",{href:v.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.youtube.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.tiktok&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"TikTok:"}),i.jsx("a",{href:v.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.tiktok.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.director&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Direction:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.director})]}),v.members&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Membres:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.members})]})]}),e.type==="concert"&&(v==null?void 0:v.photos)&&v.photos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Photos"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:v.photos.map((b,w)=>i.jsx("div",{className:"relative pb-[75%] overflow-hidden rounded-lg",children:i.jsx("img",{src:ft(b),alt:`${e.artistName} - photo ${w+1}`,className:"absolute top-0 left-0 object-cover w-full h-full",loading:"lazy",onError:k=>{console.error(`Erreur de chargement de l'image: ${b}`),k.currentTarget.style.display="none"}})},w))})]}),e.type==="concert"&&(v==null?void 0:v.videos)&&v.videos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Vid√©os"]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 w-full",children:v.videos.map((b,w)=>{let k=b;if(b.includes("youtube.com")||b.includes("youtu.be")){let N="";if(b.includes("youtube.com/watch?v=")){N=b.split("v=")[1];const P=N.indexOf("&");P!==-1&&(N=N.substring(0,P))}else b.includes("youtu.be/")&&(N=b.split("youtu.be/")[1]);N&&(k=`https://www.youtube.com/embed/${N}`)}return i.jsx("div",{className:"relative w-full pb-[56.25%] overflow-hidden rounded-lg",children:i.jsx("iframe",{src:k,title:`${e.artistName} - vid√©o ${w+1}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full",loading:"lazy"})},w)})})]}),v&&v.instagram&&v.instagram.includes("instagram")&&(()=>{const w=(k=>{try{return new URL(k).pathname.replace(/\/$/,"").split("/").filter(Boolean).pop()||""}catch{return k.split("?")[0].replace(/\/$/,"").split("/").filter(Boolean).pop()||""}})(v.instagram);return w?i.jsx("div",{className:"border-t border-[#d8e3ff] pt-4 mt-4",children:i.jsx("div",{className:"instagram-embed-container w-full overflow-hidden rounded-lg relative",style:{paddingBottom:"100%",height:0},children:i.jsx("iframe",{title:`Instagram feed de ${e.artistName}`,src:`https://www.instagram.com/${w}/embed?hidecaption=1&header=0`,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowtransparency:"true",loading:"lazy",style:{position:"absolute",top:"-43px",left:0,width:"100%",height:"calc(100% + 43px)"}})})}):null})(),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-2 mt-6 border-t border-[#d8e3ff] pt-4",children:[r==="program"?i.jsxs(X,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:f,children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]}):i.jsxs(X,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:()=>s("/program"),children:[i.jsx(jn,{className:"h-4 w-4 mr-2"}),"Voir le programme"]}),i.jsxs(X,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm",onClick:()=>{e&&(bo(ee.CLICK,"history_button",{from:"event_details",event_id:e.id,location_id:e.locationId}),V.trackBuildingHistoryView(e.locationId,"from_event_details")),s("/location-history",{state:{selectedLocationId:e.locationId,fromEvent:!0}}),n()},children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),"Histoire du lieu"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3",children:[i.jsx(X,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm min-w-0",onClick:y,disabled:!c,children:c?i.jsxs(i.Fragment,{children:[i.jsx(jn,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Ajouter au calendrier"})]}):i.jsxs(i.Fragment,{children:[i.jsx(um,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager l'√©v√©nement"})]})}),i.jsxs(X,{variant:"outline",className:"border-[#ff7a45] text-[#ff7a45] flex-1 text-xs sm:text-sm min-w-0",onClick:x,children:[i.jsx(Fs,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager un souvenir"})]})]}),i.jsx(X,{className:"w-full mt-3 border-[#8c9db5] text-[#8c9db5] text-xs sm:text-sm",variant:"outline",onClick:n,children:"Retour"})]})]})]})})},Mi=Ye("ValidationService"),Di=e=>{const t=[];if(e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.title||e.title.trim()==="")&&t.push({field:"title",message:"Le titre est obligatoire"}),(!e.artistName||e.artistName.trim()==="")&&t.push({field:"artistName",message:"Le nom de l'artiste est obligatoire"}),e.type?e.type!=="exposition"&&e.type!=="concert"&&t.push({field:"type",message:`Le type d'√©v√©nement doit √™tre "exposition" ou "concert"`}):t.push({field:"type",message:"Le type d'√©v√©nement est obligatoire"}),(!e.artistBio||e.artistBio.trim()==="")&&t.push({field:"artistBio",message:"La biographie de l'artiste est obligatoire"}),(!e.time||e.time.trim()==="")&&t.push({field:"time",message:"L'heure est obligatoire"}),!e.days||e.days.length===0)t.push({field:"days",message:"Au moins un jour doit √™tre s√©lectionn√©"});else for(const n of e.days)if(n!=="samedi"&&n!=="dimanche"){t.push({field:"days",message:'Les jours doivent √™tre "samedi" ou "dimanche"'});break}return(!e.locationName||e.locationName.trim()==="")&&t.push({field:"locationName",message:"Le nom du lieu est obligatoire"}),t.length>0?Mi.warn(`Validation de l'√©v√©nement ${e.id} √©chou√©e`,{errors:t}):Mi.info(`Validation de l'√©v√©nement ${e.id} r√©ussie`),{isValid:t.length===0,errors:t}},Bo=e=>{const t=[];return e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.name||e.name.trim()==="")&&t.push({field:"name",message:"Le nom est obligatoire"}),(!e.description||e.description.trim()==="")&&t.push({field:"description",message:"La description est obligatoire"}),typeof e.x!="number"&&t.push({field:"x",message:"La coordonn√©e X doit √™tre un nombre"}),typeof e.y!="number"&&t.push({field:"y",message:"La coordonn√©e Y doit √™tre un nombre"}),t.length>0?Mi.warn(`Validation du lieu ${e.id} √©chou√©e`,{errors:t}):Mi.info(`Validation du lieu ${e.id} r√©ussie`),{isValid:t.length===0,errors:t}},ii=e=>e.map(t=>`${t.field}: ${t.message}`).join(`
`),Ie=Ye("DataService"),ld={events:Lt,locations:lt,isLoading:!1,error:null},or=class or{constructor(){It(this,"state");It(this,"listeners",[]);Ie.info("Initialisation du service de donn√©es"),this.state=this.loadFromLocalStorage()||ld}static getInstance(){return or.instance||(or.instance=new or),or.instance}getState(){return{...this.state}}getEvents(){return[...this.state.events]}getLocations(){return[...this.state.locations]}getEventById(t){return this.state.events.find(n=>n.id===t)}getLocationById(t){return this.state.locations.find(n=>n.id===t)}getEventsByLocationId(t){return this.state.events.filter(n=>n.locationId===t)}updateEvent(t){Ie.info(`Mise √† jour de l'√©v√©nement ${t.id}`);const n=Di(t);if(!n.isValid){const r=ii(n.errors);return Ie.error(`Validation √©chou√©e pour l'√©v√©nement ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:this.state.events.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}updateLocation(t){Ie.info(`Mise √† jour du lieu ${t.id}`);const n=Bo(t);if(!n.isValid){const r=ii(n.errors);return Ie.error(`Validation √©chou√©e pour le lieu ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:this.state.locations.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}addEvent(t){if(Ie.info(`Ajout d'un nouvel √©v√©nement: ${t.title}`),this.state.events.some(r=>r.id===t.id)){const r=`Un √©v√©nement avec l'ID ${t.id} existe d√©j√†`;return Ie.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Di(t);if(!n.isValid){const r=ii(n.errors);return Ie.error("Validation √©chou√©e pour le nouvel √©v√©nement",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:[...this.state.events,t],error:null}),{success:!0}}addLocation(t){if(Ie.info(`Ajout d'un nouveau lieu: ${t.name}`),this.state.locations.some(r=>r.id===t.id)){const r=`Un lieu avec l'ID ${t.id} existe d√©j√†`;return Ie.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Bo(t);if(!n.isValid){const r=ii(n.errors);return Ie.error("Validation √©chou√©e pour le nouveau lieu",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:[...this.state.locations,t],error:null}),{success:!0}}removeEvent(t){Ie.info(`Suppression de l'√©v√©nement ${t}`),this.setState({...this.state,events:this.state.events.filter(n=>n.id!==t)})}removeLocation(t){Ie.info(`Suppression du lieu ${t}`),this.setState({...this.state,locations:this.state.locations.filter(n=>n.id!==t)})}saveToLocalStorage(){Ie.info("Sauvegarde des donn√©es dans le localStorage");try{Ie.debug("D√©tails des donn√©es √† sauvegarder",{eventsCount:this.state.events.length,locationsCount:this.state.locations.length,firstLocation:this.state.locations[0]?{id:this.state.locations[0].id,name:this.state.locations[0].name,x:this.state.locations[0].x,y:this.state.locations[0].y}:"Aucun lieu"}),localStorage.setItem("events",JSON.stringify(this.state.events)),localStorage.setItem("locations",JSON.stringify(this.state.locations));const t=localStorage.getItem("locations");if(t){const n=JSON.parse(t);Ie.debug("V√©rification de la sauvegarde",{savedLocationsCount:n.length,firstSavedLocation:n[0]?{id:n[0].id,name:n[0].name,x:n[0].x,y:n[0].y}:"Aucun lieu"})}Ie.info("Donn√©es sauvegard√©es avec succ√®s dans le localStorage")}catch(t){Ie.error("Erreur lors de la sauvegarde des donn√©es",t),this.setState({...this.state,error:"Erreur lors de la sauvegarde des donn√©es"})}}loadFromLocalStorage(){Ie.info("Chargement des donn√©es depuis le localStorage");try{const t=localStorage.getItem("events"),n=localStorage.getItem("locations");if(Ie.debug("Donn√©es r√©cup√©r√©es du localStorage",{eventsDataExists:!!t,locationsDataExists:!!n,eventsDataLength:t?t.length:0,locationsDataLength:n?n.length:0}),!t||!n)return Ie.info("Aucune donn√©e trouv√©e dans le localStorage"),null;const r=JSON.parse(t),s=JSON.parse(n);return Ie.debug("Donn√©es pars√©es du localStorage",{eventsCount:r.length,locationsCount:s.length,firstLocation:s[0]?{id:s[0].id,name:s[0].name,x:s[0].x,y:s[0].y}:"Aucun lieu"}),Ie.info("Donn√©es charg√©es avec succ√®s depuis le localStorage"),{events:r,locations:s,isLoading:!1,error:null}}catch(t){return Ie.error("Erreur lors du chargement des donn√©es",t),{...ld,error:"Erreur lors du chargement des donn√©es"}}}exportData(){Ie.info("Export des donn√©es au format JSON");try{const t={events:this.state.events,locations:this.state.locations,exportDate:new Date().toISOString()};return JSON.stringify(t,null,2)}catch(t){return Ie.error("Erreur lors de l'export des donn√©es",t),this.setState({...this.state,error:"Erreur lors de l'export des donn√©es"}),""}}importData(t){Ie.info("Import des donn√©es depuis JSON");try{const n=JSON.parse(t);return!n.events||!n.locations?(Ie.error("Format de donn√©es invalide"),this.setState({...this.state,error:"Format de donn√©es invalide"}),!1):(this.setState({...this.state,events:n.events,locations:n.locations,error:null}),this.saveToLocalStorage(),!0)}catch(n){return Ie.error("Erreur lors de l'import des donn√©es",n),this.setState({...this.state,error:"Erreur lors de l'import des donn√©es"}),!1}}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}setState(t){this.state=t,this.listeners.forEach(n=>n(this.state)),this.saveToLocalStorage()}};It(or,"instance");let Vo=or;const et=Vo.getInstance(),Zt=Ye("useData"),ga=()=>{const[e,t]=p.useState(et.getState());p.useEffect(()=>{Zt.info("Initialisation du hook useData");const g=et.subscribe(y=>{t(y)});return()=>{Zt.info("Nettoyage du hook useData"),g()}},[]);const n=()=>e.events,r=()=>e.locations,s=g=>e.events.find(y=>y.id===g),a=g=>e.locations.find(y=>y.id===g),o=g=>g?e.events.filter(y=>y.locationId===g):[],l=g=>(Zt.info(`Mise √† jour de l'√©v√©nement ${g.id}`),et.updateEvent(g)),c=g=>(Zt.info(`Mise √† jour du lieu ${g.id}`),et.updateLocation(g)),d=g=>(Zt.info(`Ajout d'un nouvel √©v√©nement: ${g.title}`),et.addEvent(g)),u=g=>(Zt.info(`Ajout d'un nouveau lieu: ${g.name}`),et.addLocation(g)),h=g=>{Zt.info(`Suppression de l'√©v√©nement ${g}`),et.removeEvent(g)},m=g=>{Zt.info(`Suppression du lieu ${g}`),et.removeLocation(g)},f=()=>(Zt.info("Export des donn√©es"),et.exportData()),x=g=>(Zt.info("Import des donn√©es"),et.importData(g));return{events:e.events,locations:e.locations,isLoading:e.isLoading,error:e.error,getEvents:n,getLocations:r,getEventById:s,getLocationById:a,getEventsByLocationId:o,updateEvent:l,updateLocation:c,addEvent:d,addLocation:u,removeEvent:h,removeLocation:m,exportData:f,importData:x}},Yp=()=>{const{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}=ga();return{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}},Zl=()=>{const{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}=ga();return{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}},Pe=Ye("Map"),iA=({fullScreen:e=!1})=>{var E,le,Ae;const t=xt(),n=In(),{locations:r}=Zl(),{getEventById:s,getEventsByLocationId:a}=Yp(),[o,l]=p.useState(r),[c,d]=p.useState([]),[u,h]=p.useState(null),[m,f]=p.useState(null),[x,g]=p.useState(null),[y,S]=p.useState(null),[v,b]=p.useState(null),[w,k]=p.useState(1),[N,P]=p.useState(null),[D,A]=p.useState(!1),[M,C]=p.useState(!1),[T,z]=p.useState(!1),Y=p.useMemo(()=>!1,[]);p.useEffect(()=>{V.trackInteraction(ee.ZOOM,"map",{scale:w})},[w]),p.useEffect(()=>{V.trackPageView("/map","Carte"),V.trackMapInteraction(ee.MAP_LOAD,{total_locations:r.length});const F=localStorage.getItem("mapLocations");if(F)try{const te=JSON.parse(F),ce=r.map(he=>{const ze=te.find(Et=>Et.id===he.id);return ze?{...he,visited:ze.visited}:he});l(ce)}catch(te){Pe.error("Erreur lors du chargement des lieux visit√©s",{error:te})}},[r]),p.useEffect(()=>{const te=it().map(ce=>ce.id);d(te)},[Y]),p.useEffect(()=>{if(!u){const te=it().map(ce=>ce.id);d(te)}},[u]),p.useEffect(()=>{Pe.info("Mise √† jour des emplacements sur la carte depuis le service de donn√©es"),l(r)},[r]);const q=(F,te)=>{te.stopPropagation(),Pe.info(`Tentative de sauvegarde de l'√©v√©nement: ${F.id} depuis la carte`),c.includes(F.id)?(aa(F.id),d(c.filter(he=>he!==F.id)),V.trackContentInteraction(ee.UNSAVE,"event",F.id,{source:"map"}),Pe.info(`√âv√©nement ${F.id} retir√© avec succ√®s depuis la carte`)):(Sl(F),d([...c,F.id]),V.trackContentInteraction(ee.SAVE,"event",F.id,{source:"map"}),Pe.info(`√âv√©nement ${F.id} sauvegard√© avec succ√®s depuis la carte`))};p.useEffect(()=>{var Ct,kn,I;const F=(Ct=n.state)==null?void 0:Ct.highlightLocationId,te=((kn=n.state)==null?void 0:kn.fromEvent)===!0,ce=((I=n.state)==null?void 0:I.fromHistory)===!0,he=new URLSearchParams(window.location.search),ze=he.get("highlight"),Et=he.get("location"),Nt=he.get("event"),Ft=ze||Et||F||Nt;if(!Ft)return;Pe.info(`Mise en √©vidence du lieu avec ID: ${Ft}`);let Ze=Ft;if(Nt&&Ft===Nt){const _=Lt.find(O=>O.id===Nt);_&&(Ze=_.locationId,Pe.debug(`Conversion de l'ID d'√©v√©nement ${Nt} en ID de lieu ${Ze}`),setTimeout(()=>{h(_),Pe.info(`Ouverture automatique des d√©tails de l'√©v√©nement ${_.id}`)},500))}let tt=o.find(_=>_.id===Ze);!tt&&Ze&&(tt=o.find(_=>_.id.startsWith(Ze)),tt&&(Pe.info(`Lieu avec ID exact ${Ze} non trouv√©, mais un lieu correspondant a √©t√© trouv√©: ${tt.id}`),Ze=tt.id)),tt?(Pe.debug("Lieu trouv√© pour mise en √©vidence",{id:tt.id,name:tt.name,x:tt.x,y:tt.y}),g(Ze),!ce&&!te&&f(Ze),Pe.debug(`Mise en √©vidence permanente du lieu ${Ze} jusqu'√† la prochaine action utilisateur`)):Pe.warn(`Lieu avec ID ${Ft} non trouv√© dans mapLocations`)},[n,o,Lt]);const J=F=>{Pe.info(`Clic sur l'emplacement ${F}`),g(F),f(F);const te=a(F);Pe.debug(`R√©cup√©ration des √©v√©nements pour le lieu ${F} via getEventsByLocationId`,te),Pe.debug(`√âv√©nements trouv√©s pour ${F}`,te);const ce=o.find(he=>he.id===F);ce&&V.trackBuildingView(ce.id,ce.name),V.trackMapInteraction(ee.LOCATION_VIEW,{building_id:F,from:"map"}),h(null)},ne=(F,te)=>{const ce=o.map(he=>he.id===F?{...he,visited:te}:he);l(ce),localStorage.setItem("mapLocations",JSON.stringify(ce)),V.trackFeatureUse("location_mark_visited",{location_id:F,visited:te}),g(F),te&&(Pe.info(`Lieu ${F} marqu√© comme visit√©, v√©rification des achievements`),ce.every(ze=>ze.visited)&&(Pe.info("Tous les lieux ont √©t√© visit√©s, d√©blocage de l'achievement ALL_LOCATIONS_VISITED"),Ei(st.ALL_LOCATIONS_VISITED)))},L=F=>{const te=a(F);return Pe.debug(`√âv√©nements trouv√©s pour ${F} via getEventsByLocationId`,te),te},H=o.filter(F=>F.visited).length,j=o.length,K=()=>{localStorage.setItem("locationConsent","granted"),C(!0),z(!1),A(!1)};p.useEffect(()=>{if(Y){z(!0),A(!1),C(!0),localStorage.setItem("locationConsent","granted"),Pe.info("Environnement de d√©veloppement d√©tect√©, localisation activ√©e automatiquement");return}localStorage.removeItem("locationConsent"),z(!1),A(!1),C(!1)},[]);const ie=(F,te,ce)=>{S({x:F,y:te}),ce&&b(ce)};return i.jsxs("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsx("div",{className:"w-1/4"}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94] text-center",children:"Carte"}),i.jsx("div",{className:"flex items-center space-x-2 w-1/4 justify-end",children:i.jsx(ca,{title:"Parcours √éle Feydeau",text:"D√©couvrez mon parcours sur l'√éle Feydeau √† Nantes!"})})]}),i.jsx("div",{className:"flex items-center justify-center mb-4 text-sm text-[#4a5d94] fade-in",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4CAF50] rounded-full mr-1 text-white text-xs font-medium",children:H}),i.jsx("span",{className:"text-xs",children:H>1?"Visit√©s":"Visit√©"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4a5d94] rounded-full mr-1 text-white text-xs font-medium",children:j-H}),i.jsx("span",{className:"text-xs",children:"√Ä d√©couvrir"})]})]})}),i.jsxs("div",{className:"flex justify-center gap-2 my-2",children:[i.jsx(iS,{onLocationEnabled:()=>{A(!1),C(!0),z(!0),Pe.info("Localisation activ√©e manuellement par l'utilisateur"),V.trackMapInteraction(ee.USER_LOCATION,{granted:!0})},onLocationDenied:()=>{A(!0),C(!1),Pe.warn("Localisation refus√©e par l'utilisateur"),V.trackMapInteraction(ee.USER_LOCATION,{granted:!1})},onLocationDisabled:()=>{C(!1),P(null),Pe.info("Localisation d√©sactiv√©e manuellement par l'utilisateur"),V.trackMapInteraction(ee.USER_LOCATION,{granted:!1,disabled:!0})}}),i.jsx(aS,{onAudioEnabled:()=>{Pe.info("Son activ√© manuellement par l'utilisateur"),V.trackFeatureUse("map_sound_toggle",{enabled:!0})},onAudioDisabled:()=>{Pe.info("Son d√©sactiv√© par l'utilisateur"),V.trackFeatureUse("map_sound_toggle",{enabled:!1})}})]}),i.jsx("div",{className:"relative",children:i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsxs("div",{className:"relative h-full",children:[i.jsx(Qh,{locations:o,activeLocation:m,highlightedLocation:x,onClick:F=>{const te=F.currentTarget.dataset.locationId||F.currentTarget.id.replace("location-","");te?J(te):V.trackInteraction(ee.CLICK,"map_background")},readOnly:!1,onScaleChange:k,onPanStart:({x:F,y:te})=>{V.trackMapInteraction(ee.DRAG,{phase:"start",x:Math.round(F),y:Math.round(te)})},onPanEnd:({totalDx:F,totalDy:te,distance:ce,durationMs:he})=>{V.trackMapInteraction(ee.DRAG,{total_dx:Math.round(F),total_dy:Math.round(te),distance:Math.round(ce),duration_ms:Math.round(he)})},userLocationProps:M?{onLocationUpdate:ie,showNavigation:!1,onPermissionChange:F=>A(F)}:void 0,navigationProps:N&&y&&v?{userPosition:v,targetLocation:o.find(F=>F.id===N)||null,onClose:()=>P(null)}:void 0}),D&&!Y&&i.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-red-500 text-white p-2 text-center",children:[i.jsx("div",{className:"mb-2",children:"Acc√®s refus√© - Vous avez refus√© l'acc√®s √† votre position."}),i.jsx(X,{size:"sm",onClick:K,className:"bg-white text-red-500 hover:bg-gray-100 text-xs",children:"Activer la localisation"})]})]})})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:()=>f(null),children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-[#4a5d94]",children:(E=o.find(F=>F.id===m))==null?void 0:E.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xn,{entryId:`building-${m}`,variant:"icon",showCount:!0}),i.jsx(X,{variant:"ghost",size:"sm",className:"-mt-2 -mr-2",onClick:()=>{m&&V.trackInteraction(ee.BACK,"location_details_close",{building_id:m}),f(null)},children:i.jsx(gr,{className:"h-4 w-4"})})]})]}),i.jsx("p",{className:"text-sm text-[#8c9db5] mb-3",children:"√éle Feydeau, Nantes"}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-4",children:(le=o.find(F=>F.id===m))==null?void 0:le.description}),i.jsxs(X,{size:"sm",variant:"outline",className:"text-xs border-[#4a5d94] text-[#4a5d94]",onClick:()=>{if(m){Pe.info(`Navigation vers l'histoire du lieu: ${m}`);const F=o.find(te=>te.id===m);F&&V.trackBuildingHistoryView(F.id,"from_map"),V.trackInteraction(ee.CLICK,"history_button",{from:"map",building_id:m}),t("/location-history",{state:{selectedLocationId:m}})}else Pe.warn("Tentative de navigation vers l'histoire d'un lieu non s√©lectionn√©")},children:[i.jsx(es,{className:"h-3 w-3 mr-1"}),"Histoire du lieu"]}),i.jsx("div",{className:"mb-6"}),L(m).length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"font-medium text-[#1a2138] mb-2",children:"√âv√©nements √† cet endroit:"}),i.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 -mr-2",children:L(m).map(F=>i.jsx("div",{className:`bg-[#f0f5ff] p-3 rounded-lg cursor-pointer hover:bg-[#e0ebff] transition-colors ${c.includes(F.id)?"border-l-4 border-l-[#ff7a45]":""}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",onClick:()=>{V.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:F.id,source:"map"}),h(F)},children:[i.jsx("p",{className:"font-medium text-[#1a2138]",children:F.title}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx(jn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsxs("p",{className:"text-xs text-[#8c9db5]",children:[F.days.map(te=>te==="samedi"?"Sa":"Di").join("/"),", ",F.time]})]}),i.jsx("p",{className:"text-xs text-[#4a5d94] mt-1",children:F.artistName})]}),i.jsx(X,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:te=>q(F,te),children:c.includes(F.id)?i.jsx(Zo,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(Gi,{className:"h-5 w-5 text-[#8c9db5]"})})]})},F.id))})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-between mb-4",children:[i.jsx(X,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] text-xs sm:text-sm px-1 sm:px-2 min-h-[44px]",onClick:()=>{var F;return m&&ne(m,!((F=o.find(te=>te.id===m))!=null&&F.visited))},children:(Ae=o.find(F=>F.id===m))!=null&&Ae.visited?"Non visit√©":"Marquer visit√©"}),i.jsx(X,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] text-sm min-h-[44px]",onClick:()=>{m&&V.trackInteraction(ee.BACK,"location_details_back",{building_id:m}),f(null)},children:"Retour √† la carte"})]}),M&&i.jsx("div",{className:"mb-16",children:i.jsxs(X,{variant:"secondary",className:"w-full text-sm bg-[#f0f5ff] text-[#4a5d94] hover:bg-[#d8e3ff] min-h-[44px]",onClick:()=>{m&&(P(m),f(null),V.trackMapInteraction(ee.ROUTE_CALCULATE,{building_id:m,has_user_position:!!y}))},children:[i.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Me guider vers ce lieu"]})})]})}),i.jsx(Jl,{event:u,isOpen:!!u,onClose:()=>{h(null),g(null)},source:"map"}),i.jsx(Zn,{})]})},ss=kx,Cr=p.forwardRef(({className:e,...t},n)=>i.jsx(mm,{ref:n,className:se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Cr.displayName=mm.displayName;const Fe=p.forwardRef(({className:e,...t},n)=>i.jsx(hm,{ref:n,className:se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Fe.displayName=hm.displayName;const $e=p.forwardRef(({className:e,...t},n)=>i.jsx(fm,{ref:n,className:se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));$e.displayName=fm.displayName;function aA({onFilterChange:e,currentFilter:t}){return i.jsxs("div",{className:"flex space-x-2 mb-4",children:[i.jsx(X,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>e("all"),className:t==="all"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:"Tous"}),i.jsxs(X,{variant:t==="exposition"?"default":"outline",size:"sm",onClick:()=>e("exposition"),className:t==="exposition"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Ax,{className:"h-4 w-4 mr-2"}),"Expositions"]}),i.jsxs(X,{variant:t==="concert"?"default":"outline",size:"sm",onClick:()=>e("concert"),className:t==="concert"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Tx,{className:"h-4 w-4 mr-2"}),"Concerts"]})]})}const je=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const Dt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex flex-col space-y-1.5 p-6",e),...t}));Dt.displayName="CardHeader";const Rt=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:se("text-2xl font-semibold leading-none tracking-tight",e),...t}));Rt.displayName="CardTitle";const ec=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:se("text-sm text-muted-foreground",e),...t}));ec.displayName="CardDescription";const Qe=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("p-6 pt-0",e),...t}));Qe.displayName="CardContent";const Kp=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex items-center p-6 pt-0",e),...t}));Kp.displayName="CardFooter";const cd=({event:e,isSaved:t,onEventClick:n,onSaveClick:r})=>i.jsxs(je,{className:"shadow-md border-0 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1",onClick:n,children:[i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Qe,{className:"p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#1a2138]",children:i.jsx(Ss,{text:e.title,maxLength:25,className:"font-medium text-[#1a2138]"})}),e.type==="exposition"&&i.jsx("p",{className:"text-sm text-[#4a5d94]",children:i.jsx(Ss,{text:e.artistName,maxLength:20,className:"text-sm text-[#4a5d94]"})}),i.jsxs("div",{className:"flex flex-col space-y-1 mt-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(uo,{className:"h-3 w-3 mr-1 text-[#ff7a45]"}),i.jsx("p",{className:"text-xs font-medium text-[#ff7a45]",children:e.time})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(Ss,{text:e.locationName,maxLength:30,className:"text-xs text-[#8c9db5]"})})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Xn,{entryId:`event-${e.id}`,variant:"compact",showCount:!0,className:"scale-75 -mr-1"}),i.jsx(X,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:r,children:t?i.jsx(Zo,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(Gi,{className:"h-5 w-5 text-[#8c9db5]"})})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.type==="exposition"?"bg-[#e0ebff] text-[#4a5d94]":"bg-[#fff2ee] text-[#ff7a45]"}`,children:e.type==="exposition"?"Exposition":"Concert"})]})]})})]}),oA=()=>{const e=xt(),[t,n]=p.useState(null),[r,s]=p.useState("all"),[a,o]=p.useState([]);p.useEffect(()=>{V.trackPageView("/program","Programme")},[]),p.useEffect(()=>{const f=it().map(x=>x.id);o(f)},[]);const l=(m,f)=>{f.stopPropagation(),console.log(`[Program] Tentative de sauvegarde de l'√©v√©nement: ${m.id}`),a.includes(m.id)?(aa(m.id),o(a.filter(g=>g!==m.id)),console.log(`[Program] √âv√©nement ${m.id} retir√© avec succ√®s`),V.trackContentInteraction(ee.UNSAVE,"event",m.id,{event_title:m.title,source:"program"})):(Sl(m),o([...a,m.id]),console.log(`[Program] √âv√©nement ${m.id} sauvegard√© avec succ√®s`),V.trackContentInteraction(ee.SAVE,"event",m.id,{event_title:m.title,source:"program"}))},c=m=>{s(m),V.trackProgramInteraction(ee.FILTER,{filter:m})},d=(m,f)=>f==="all"?m:m.filter(x=>x.type===f),u=m=>{const f=m.match(/(\d{1,2})h(\d{2})/);if(!f)return Number.MAX_SAFE_INTEGER;const x=parseInt(f[1],10),g=parseInt(f[2],10);return x*60+g},h=m=>[...m].sort((f,x)=>u(f.time)-u(x.time));return i.jsxs("div",{className:"min-h-screen app-gradient pb-20",children:[i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Programme"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(X,{variant:"ghost",size:"icon","aria-label":"Ajouter au calendrier",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",onClick:async()=>{try{V.trackProgramCTA("add_to_calendar");const{addToCalendar:m}=await $s(async()=>{const{addToCalendar:y}=await Promise.resolve().then(()=>Yk);return{addToCalendar:y}},void 0),f=Lt;let x=0,g=0;for(const y of f)(await m(y)).success?x++:g++;x>0&&wt({title:"√âv√©nements ajout√©s au calendrier",description:`${x} √©v√©nement(s) ajout√©(s) avec succ√®s.`}),g>0&&(wt({title:"Erreur lors de l'ajout au calendrier",description:`${g} √©v√©nement(s) n'ont pas pu √™tre ajout√©s.`,variant:"destructive"}),V.trackError(ee.API_ERROR,"program_add_all_to_calendar_errors",{error_count:g}))}catch(m){wt({title:"Erreur inattendue",description:m instanceof Error?m.message:"Impossible d'ajouter au calendrier.",variant:"destructive"}),V.trackError(ee.API_ERROR,"program_add_all_to_calendar_exception",{message:m==null?void 0:m.message})}},children:i.jsx(jn,{className:"h-5 w-5"})})})]}),i.jsx("div",{className:"mb-4 fade-in",children:i.jsx(aA,{onFilterChange:c,currentFilter:r})}),i.jsx("div",{className:"text-center mb-4 text-sm text-[#ff7a45] slide-in-bottom"}),i.jsxs(ss,{defaultValue:"samedi",className:"w-full",children:[i.jsxs(Cr,{className:"grid grid-cols-2 mb-4 bg-[#e0ebff]",children:[i.jsxs(Fe,{value:"samedi",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(jn,{className:"h-4 w-4 mr-2"}),"Samedi"]}),i.jsxs(Fe,{value:"dimanche",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(jn,{className:"h-4 w-4 mr-2"}),"Dimanche"]})]}),i.jsxs($e,{value:"samedi",className:"space-y-4",children:[h(d(Xs("samedi"),r)).map((m,f)=>{const x=`samedi-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(cd,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),V.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(Xs("samedi"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun √©v√©nement ne correspond √† ce filtre pour ce jour."})})]}),i.jsxs($e,{value:"dimanche",className:"space-y-4",children:[h(d(Xs("dimanche"),r)).map((m,f)=>{const x=`dimanche-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(cd,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),V.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(Xs("dimanche"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun √©v√©nement ne correspond √† ce filtre pour ce jour."})})]})]}),i.jsx(Jl,{event:t,isOpen:!!t,onClose:()=>n(null),source:"program"})]}),i.jsx(Zn,{})]})},ai={history:"Notre association est n√©e de la volont√© commune des habitants de ce quartier historique de Nantes, situ√© sur ce qui √©tait autrefois une √Æle. Fond√©e en 2017, elle regroupe 20 passionn√©s d√©termin√©s √† pr√©server et partager le patrimoine unique de ce lieu.",mission:"Nous ≈ìuvrons pour la pr√©servation de notre patrimoine architectural et culturel, tout en favorisant l'acc√®s √† l'art et √† la culture pour tous. Chaque ann√©e, le troisi√®me week-end de septembre, nous ouvrons nos portes au public pour partager ce lieu exceptionnel √† travers des expositions et concerts.",neighborhood:"Situ√© au c≈ìur de Nantes, notre quartier √©tait autrefois une √Æle entour√©e par les bras de la Loire. Au fil des si√®cles, l'urbanisation a transform√© le paysage, mais nous conservons pr√©cieusement l'h√©ritage architectural et l'esprit communautaire qui caract√©risent ce lieu si particulier.",event:"Notre √©v√©nement annuel transforme le quartier en une galerie d'art vivante o√π les visiteurs peuvent d√©couvrir des expositions dans les halls historiques et profiter de concerts dans notre cour int√©rieure. C'est l'occasion de rencontrer des artistes locaux et de vivre une exp√©rience culturelle unique dans un cadre exceptionnel."},nr={name:"Collectif Ile Feydeau",shortName:"FEYDEAU",description:"Association culturelle mettant en valeur le patrimoine historique d'un ancien quartier insulaire de Nantes.",yearFounded:2017,memberCount:20,eventWeekend:"Troisi√®me week-end de septembre",contactEmail:"collectif.ile.feydeau@gmail.com",instagram:"https://www.instagram.com/collectif_ile_feydeau"},lA=[{id:"member1",name:"Julien Fritsch",role:"Pr√©sident",description:"Organisateur du projet."},{id:"member2",name:"Philippe Ch√¢tel",role:"Tr√©sorier",description:"Coordonne les communications et partenariats artistiques."},{id:"member3",name:"Edwige Filleux",role:"Secr√©taire",description:"Fondation de l'association."}],cA=()=>{const e=xt();return i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>e("/map"),children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"√Ä propos"}),i.jsx(ca,{title:"√Ä propos du Collectif √éle Feydeau",text:"D√©couvrez l'histoire et la mission du Collectif √éle Feydeau √† Nantes!"})]}),i.jsxs(ss,{defaultValue:"association",className:"w-full mb-6",children:[i.jsxs(Cr,{className:"grid grid-cols-4 mb-4",children:[i.jsx(Fe,{value:"association",children:"Association"}),i.jsx(Fe,{value:"history",children:"Histoire"}),i.jsx(Fe,{value:"team",children:"√âquipes"}),i.jsx(Fe,{value:"support",children:"Nous aider"})]}),i.jsx($e,{value:"history",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Histoire de l'√éle Feydeau"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"L'√éle Feydeau est un quartier historique de Nantes, construit au XVIIIe si√®cle sur une √Æle de la Loire. Ce lotissement, con√ßu par l'architecte Jean-Baptiste Ceineray, est un exemple remarquable d'architecture n√©oclassique et t√©moigne de la prosp√©rit√© des armateurs et n√©gociants nantais de l'√©poque."}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsx(X,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white",onClick:()=>e("/location-history"),children:"Voir l'histoire d√©taill√©e des lieux"})}),i.jsx("div",{className:"mt-8"}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Architecture unique"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Les immeubles de l'√éle Feydeau se caract√©risent par leurs fa√ßades orn√©es de mascarons, leurs balcons en fer forg√© et leur soubassement en granit. L'affaissement des b√¢timents, d√ª √† la nature mar√©cageuse du sol, conf√®re √† l'ensemble une silhouette l√©g√®rement pench√©e, caract√©ristique de ce quartier."}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Patrimoine pr√©serv√©"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Aujourd'hui, l'√éle Feydeau n'est plus une √Æle suite aux travaux de comblement de la Loire, mais son patrimoine architectural est pr√©serv√© et valoris√©. De nombreux immeubles sont class√©s ou inscrits aux Monuments Historiques, t√©moignant de l'importance de ce quartier dans l'histoire de Nantes."})]})}),i.jsxs($e,{value:"association",className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:space-x-4 space-y-3 md:space-y-0 mt-4 mb-2 p-4 bg-white rounded-lg shadow-md",children:[i.jsxs("a",{href:"https://www.instagram.com/ilefeydeau/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#E1306C] transition-colors w-full md:w-auto justify-center",children:[i.jsx(Px,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@ilefeydeau"})]}),i.jsxs("a",{href:"https://x.com/Ilefeydeau",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#1DA1F2] transition-colors w-full md:w-auto justify-center",children:[i.jsx(_x,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@Ilefeydeau"})]}),i.jsxs("a",{href:`mailto:${nr.contactEmail}`,className:"flex items-center text-gray-700 hover:text-[#4285F4] transition-colors w-full md:w-auto justify-center break-all",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 flex-shrink-0",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),i.jsx("span",{className:"truncate",children:nr.contactEmail})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"D√©couvrez notre collectif en vid√©o"}),i.jsx("div",{className:"aspect-video w-full mb-4 bg-gray-100 rounded overflow-hidden",children:i.jsx("video",{className:"w-full h-full object-contain",controls:!0,playsInline:!0,poster:ft("intro-video-image.png"),src:ft("/video/intro-video.mp4"),"aria-label":"Vid√©o de pr√©sentation du Collectif √éle Feydeau"})}),i.jsx("p",{className:"text-gray-700 text-sm italic text-center",children:"Vid√©o d'introduction du Collectif √éle Feydeau (45 secondes)"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre histoire"}),i.jsx("p",{className:"text-gray-700 mb-4",children:ai.history}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre mission"}),i.jsx("p",{className:"text-gray-700 mb-4",children:ai.mission}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre quartier"}),i.jsx("p",{className:"text-gray-700 mb-4",children:ai.neighborhood}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"√âv√©nement annuel"}),i.jsx("p",{className:"text-gray-700 mb-4",children:ai.event})]})]}),i.jsxs($e,{value:"team",className:"space-y-4",children:[i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:i.jsxs("p",{className:"text-gray-700",children:["Notre association compte ",nr.memberCount," membres actifs, tous habitants du quartier et passionn√©s par sa valorisation. Voici quelques-uns des membres du bureau qui coordonnent nos actions."]})}),i.jsx("div",{className:"space-y-4",children:lA.map(t=>i.jsx(je,{children:i.jsx(Qe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"min-w-[48px] w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center overflow-hidden",children:i.jsx("span",{className:"text-purple-600 font-semibold text-center",children:t.name.split(" ").map(n=>n[0]).join("")})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium truncate",children:t.name}),i.jsx("p",{className:"text-sm text-purple-600",children:t.role}),i.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description})]})]})})},t.id))})]}),i.jsx($e,{value:"support",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Comment nous aider ?"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Plusieurs fa√ßons s'offrent √† vous pour soutenir notre association et contribuer √† la pr√©servation et l'animation de ce lieu historique de Nantes."}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsxs("div",{className:"border-l-4 border-red-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(En,{className:"h-5 w-5 mr-2 text-red-500"}),"Faire un don"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Soutenez financi√®rement nos actions de pr√©servation et de valorisation du patrimoine."}),i.jsxs(X,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>e("/donate"),children:[i.jsx(En,{className:"h-4 w-4 mr-2 text-red-500"}),"Acc√©der √† la page de don"]})]}),i.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(pm,{className:"h-5 w-5 mr-2 text-blue-500"}),"Devenir membre"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Rejoignez notre √©quipe de b√©n√©voles et participez activement √† nos projets. Contactez-nous √† ",i.jsx("a",{href:`mailto:${nr.contactEmail}`,className:"text-blue-600 hover:underline",children:nr.contactEmail}),"."]})]}),i.jsxs("div",{className:"border-l-4 border-green-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 text-green-500",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Proposer une id√©e"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Vous avez des id√©es pour am√©liorer notre √©v√©nement annuel ou pour d'autres projets ? Contactez-nous √† ",i.jsx("a",{href:`mailto:${nr.contactEmail}`,className:"text-blue-600 hover:underline",children:nr.contactEmail})]})]})]})]})})]})]}),i.jsx(Zn,{})]})},uA=()=>{const e=xt();return p.useEffect(()=>{V.trackPageView("/donate","Faire un don"),V.trackDonationPageOpen("app")},[]),i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>{V.trackDonationInteraction(ee.DONATION_CANCEL,{method:"helloasso",reason:"back_click"}),e("/map")},children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Faire un don"}),i.jsx(ca,{title:"Faire un don au Collectif √éle Feydeau",text:"Soutenez les actions du Collectif √éle Feydeau pour la pr√©servation du patrimoine nantais!"})]}),i.jsx(je,{className:"mb-6",children:i.jsx(Qe,{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:i.jsx("iframe",{id:"haWidget",title:"Formulaire de don HelloAsso",scrolling:"auto",src:"https://www.helloasso.com/associations/collectif-feydeau/formulaires/1/widget",style:{width:"100%",height:"750px",border:"none"},onLoad:()=>V.trackDonationInteraction(ee.DONATION_START,{method:"helloasso",widget_loaded:!0})})})})}),i.jsxs("div",{className:"text-center text-sm text-gray-600",children:[i.jsx("p",{children:"Pour toute question concernant les dons, contactez-nous √† :"}),i.jsx("p",{className:"font-medium",children:i.jsx("a",{href:"mailto:collectif.ile.feydeau@gmail.com",className:"text-blue-600 hover:underline",children:"collectif.ile.feydeau@gmail.com"})})]})]}),i.jsx(Zn,{})]})},dA=()=>{const e=In();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},mA=({onComplete:e,isFirstVisit:t})=>{const[n,r]=p.useState(!1);xt(),p.useEffect(()=>{const o=setTimeout(()=>{r(!0),setTimeout(()=>{e()},300)},2e3);return()=>clearTimeout(o)},[e]);const s={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.8,ease:"easeOut"}},exit:{opacity:0,scale:1.1,transition:{duration:.3,ease:"easeIn"}}};return i.jsx(be.div,{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-blue-50 to-blue-100 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:i.jsxs(be.div,{className:"flex flex-col items-center",variants:s,initial:"hidden",animate:"visible",exit:"exit",children:[i.jsx(be.h1,{className:"text-2xl font-bold text-[#4a5d94] mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:"1 Hall 1 Artiste 2025"}),i.jsx(be.img,{src:ft("/Logo.png"),alt:"Collectif Feydeau Logo",className:"w-48 h-48 object-contain mb-6"}),i.jsx(be.h2,{className:"text-xl font-semibold text-[#4a5d94] mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:"Collectif Feydeau"}),i.jsx(be.p,{className:"text-sm text-gray-600 text-center max-w-xs px-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:t?"Bienvenue dans l'application du Collectif √éle Feydeau":"D√©couvrez le patrimoine historique de l'√éle Feydeau"})]})})},Kt=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Kt.displayName="Input";var hA="Label",Qp=p.forwardRef((e,t)=>i.jsx(We.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Qp.displayName=hA;var Xp=Qp;const fA=Ji("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=p.forwardRef(({className:e,...t},n)=>i.jsx(Xp,{ref:n,className:se(fA(),e),...t}));Be.displayName=Xp.displayName;const pt=Ye("ImportExportService"),Jp="1.0.0",pA=()=>{pt.info("Exportation de toutes les donn√©es");try{const{events:e,locations:t}=et.getState(),n={events:e,locations:t,exportDate:new Date().toISOString(),version:Jp},r=JSON.stringify(n,null,2);return pt.info(`Exportation r√©ussie: ${e.length} √©v√©nements et ${t.length} lieux`),r}catch(e){throw pt.error("Erreur lors de l'exportation des donn√©es",e),new Error("Erreur lors de l'exportation des donn√©es")}},gA=()=>{pt.info("Exportation des √©v√©nements");try{const{events:e}=et.getState(),t={events:e,exportDate:new Date().toISOString(),version:Jp},n=JSON.stringify(t,null,2);return pt.info(`Exportation r√©ussie: ${e.length} √©v√©nements`),n}catch(e){throw pt.error("Erreur lors de l'exportation des √©v√©nements",e),new Error("Erreur lors de l'exportation des √©v√©nements")}},xA=()=>{pt.info("Exportation des √©v√©nements au format CSV");try{const{events:e}=et.getState(),t=["id","title","artistName","type","artistBio","time","days","locationName"],n=e.map(s=>[s.id,`"${s.title.replace(/"/g,'""')}"`,`"${s.artistName.replace(/"/g,'""')}"`,s.type,`"${s.artistBio.replace(/"/g,'""')}"`,`"${s.time.replace(/"/g,'""')}"`,`"${s.days.join(",")}"`,`"${s.locationName.replace(/"/g,'""')}"`].join(",")),r=[t.join(","),...n].join(`
`);return pt.info(`Exportation CSV r√©ussie: ${e.length} √©v√©nements`),r}catch(e){throw pt.error("Erreur lors de l'exportation des √©v√©nements au format CSV",e),new Error("Erreur lors de l'exportation des √©v√©nements au format CSV")}},yA=e=>{pt.info("Importation de donn√©es depuis JSON");try{const t=JSON.parse(e),n=[];let r=0,s=0;if(!t)return{success:!1,message:"Donn√©es d'importation invalides",errors:["Format JSON invalide"]};if(t.locations&&Array.isArray(t.locations)){pt.info(`Tentative d'importation de ${t.locations.length} lieux`);for(const o of t.locations){const l=Bo(o);if(l.isValid){const c=et.addLocation(o);c.success?s++:c.error&&n.push(`Erreur lors de l'importation du lieu ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation √©chou√©e pour le lieu ${o.id||"sans ID"}: ${c}`)}}}if(t.events&&Array.isArray(t.events)){pt.info(`Tentative d'importation de ${t.events.length} √©v√©nements`);for(const o of t.events){const l=Di(o);if(l.isValid){const c=et.addEvent(o);c.success?r++:c.error&&n.push(`Erreur lors de l'importation de l'√©v√©nement ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation √©chou√©e pour l'√©v√©nement ${o.id||"sans ID"}: ${c}`)}}}let a="";return s>0&&(a+=`${s} lieu(x) import√©(s). `),r>0&&(a+=`${r} √©v√©nement(s) import√©(s).`),s===0&&r===0&&(a="Aucune donn√©e import√©e."),et.saveToLocalStorage(),{success:r>0||s>0,message:a,importedEvents:r,importedLocations:s,errors:n.length>0?n:void 0}}catch(t){return pt.error("Erreur lors de l'importation des donn√©es",t),{success:!1,message:"Erreur lors de l'importation des donn√©es",errors:[t.message]}}},vA=e=>{pt.info("Importation d'√©v√©nements depuis CSV");try{const t=e.split(`
`).filter(d=>d.trim()!=="");if(t.length<2)return{success:!1,message:"Le fichier CSV ne contient pas suffisamment de donn√©es",errors:["Format CSV invalide"]};const n=t[0].split(","),s=["id","title","artistName","type","locationName"].filter(d=>!n.includes(d));if(s.length>0)return{success:!1,message:`En-t√™tes manquants dans le fichier CSV: ${s.join(", ")}`,errors:[`En-t√™tes manquants: ${s.join(", ")}`]};const a=d=>{const u=[];let h="",m=!1;for(let f=0;f<d.length;f++){const x=d[f];x==='"'?m&&f+1<d.length&&d[f+1]==='"'?(h+='"',f++):m=!m:x===","&&!m?(u.push(h),h=""):h+=x}return u.push(h),u},o=[],l=[];for(let d=1;d<t.length;d++)try{const u=a(t[d]),h={};for(let f=0;f<n.length;f++)if(f<u.length){const x=n[f];let g=u[f];x==="x"||x==="y"?h[x]=parseFloat(g):x==="days"?h[x]=g.split(",").map(y=>y.trim()):h[x]=g}const m=Di(h);if(m.isValid)o.push(h);else{const f=m.errors.map(x=>`${x.field}: ${x.message}`).join(", ");l.push(`Ligne ${d+1}: Validation √©chou√©e - ${f}`)}}catch(u){l.push(`Erreur lors du traitement de la ligne ${d+1}: ${u.message}`)}let c=0;for(const d of o){const u=et.addEvent(d);u.success?c++:u.error&&l.push(`Erreur lors de l'importation de l'√©v√©nement ${d.id}: ${u.error}`)}return et.saveToLocalStorage(),{success:c>0,message:`${c} √©v√©nement(s) import√©(s) sur ${o.length} √©v√©nements valides.`,importedEvents:c,errors:l.length>0?l:void 0}}catch(t){return pt.error("Erreur lors de l'importation des √©v√©nements depuis CSV",t),{success:!1,message:"Erreur lors de l'importation des √©v√©nements depuis CSV",errors:[t.message]}}},bA=()=>{const e=$.useRef(null),t=$.useRef(null),n=()=>{try{const c=pA();l(c,`feydeau-export-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation",c)}},r=()=>{try{const c=gA();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation des √©v√©nements",c)}},s=()=>{try{const c=xA();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.csv`,"text/csv;charset=utf-8")}catch(c){console.error("Erreur d'exportation des √©v√©nements au format CSV",c)}},a=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=yA(x);g.success?console.log("Importation r√©ussie:",g.message):(console.error("Erreurs lors de l'importation:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation:",g.errors))}catch(x){console.error("Erreur d'importation des donn√©es",x)}e.current&&(e.current.value="")},u.readAsText(d)},o=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=vA(x);g.success?console.log("Importation CSV r√©ussie:",g.message):(console.error("Erreurs lors de l'importation CSV:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation CSV:",g.errors))}catch(x){console.error("Erreur d'importation CSV",x)}t.current&&(t.current.value="")},u.readAsText(d)},l=(c,d,u)=>{const h=new Blob([c],{type:u}),m=URL.createObjectURL(h),f=document.createElement("a");f.href=m,f.download=d,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m)};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Import/Export de donn√©es"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Exportation"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(X,{onClick:n,children:"Exporter toutes les donn√©es"}),i.jsx(X,{onClick:r,children:"Exporter les √©v√©nements"}),i.jsx(X,{onClick:s,children:"Exporter les √©v√©nements (CSV)"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Importation"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{children:[i.jsx(X,{onClick:()=>{var c;return(c=e.current)==null?void 0:c.click()},children:"Importer depuis JSON"}),i.jsx("input",{type:"file",ref:e,onChange:a,accept:".json",className:"hidden"})]}),i.jsxs("div",{children:[i.jsx(X,{onClick:()=>{var c;return(c=t.current)==null?void 0:c.click()},children:"Importer √©v√©nements depuis CSV"}),i.jsx("input",{type:"file",ref:t,onChange:o,accept:".csv",className:"hidden"})]})]})]})]})},Ri=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ri.displayName="Textarea";const Ms=Fx,Ds=$x,Qr=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(gm,{ref:r,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(Mx,{asChild:!0,children:i.jsx(el,{className:"h-4 w-4 opacity-50"})})]}));Qr.displayName=gm.displayName;const Zp=p.forwardRef(({className:e,...t},n)=>i.jsx(xm,{ref:n,className:se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(dm,{className:"h-4 w-4"})}));Zp.displayName=xm.displayName;const eg=p.forwardRef(({className:e,...t},n)=>i.jsx(ym,{ref:n,className:se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(el,{className:"h-4 w-4"})}));eg.displayName=ym.displayName;const Xr=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(Dx,{children:i.jsxs(vm,{ref:s,className:se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(Zp,{}),i.jsx(Rx,{className:se("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(eg,{})]})}));Xr.displayName=vm.displayName;const wA=p.forwardRef(({className:e,...t},n)=>i.jsx(bm,{ref:n,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));wA.displayName=bm.displayName;const pr=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(wm,{ref:r,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Ox,{children:i.jsx(Hi,{className:"h-4 w-4"})})}),i.jsx(Lx,{children:t})]}));pr.displayName=wm.displayName;const SA=p.forwardRef(({className:e,...t},n)=>i.jsx(Sm,{ref:n,className:se("-mx-1 my-1 h-px bg-muted",e),...t}));SA.displayName=Sm.displayName;var tc="Checkbox",[jA,O2]=Zr(tc),[EA,NA]=jA(tc),tg=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,f]=p.useState(null),x=Je(t,w=>f(w)),g=p.useRef(!1),y=m?u||!!m.closest("form"):!0,[S=!1,v]=qi({prop:s,defaultProp:a,onChange:d}),b=p.useRef(S);return p.useEffect(()=>{const w=m==null?void 0:m.form;if(w){const k=()=>v(b.current);return w.addEventListener("reset",k),()=>w.removeEventListener("reset",k)}},[m,v]),i.jsxs(EA,{scope:n,state:S,disabled:l,children:[i.jsx(We.button,{type:"button",role:"checkbox","aria-checked":Wn(S)?"mixed":S,"aria-required":o,"data-state":sg(S),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:me(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:me(e.onClick,w=>{v(k=>Wn(k)?!0:!k),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&i.jsx(CA,{control:m,bubbles:!g.current,name:r,value:c,checked:S,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Wn(a)?!1:a})]})});tg.displayName=tc;var ng="CheckboxIndicator",rg=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=NA(ng,n);return i.jsx(fn,{present:r||Wn(a.state)||a.state===!0,children:i.jsx(We.span,{"data-state":sg(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});rg.displayName=ng;var CA=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...a}=e,o=p.useRef(null),l=jm(n),c=Em(t);p.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const x=new Event("click",{bubbles:r});u.indeterminate=Wn(n),f.call(u,Wn(n)?!1:n),u.dispatchEvent(x)}},[l,n,r]);const d=p.useRef(Wn(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wn(e){return e==="indeterminate"}function sg(e){return Wn(e)?"indeterminate":e?"checked":"unchecked"}var ig=tg,IA=rg;const Uo=p.forwardRef(({className:e,...t},n)=>i.jsx(ig,{ref:n,className:se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(IA,{className:se("flex items-center justify-center text-current"),children:i.jsx(Hi,{className:"h-4 w-4"})})}));Uo.displayName=ig.displayName;const rt=[];for(let e=0;e<256;++e)rt.push((e+256).toString(16).slice(1));function kA(e,t=0){return(rt[e[t+0]]+rt[e[t+1]]+rt[e[t+2]]+rt[e[t+3]]+"-"+rt[e[t+4]]+rt[e[t+5]]+"-"+rt[e[t+6]]+rt[e[t+7]]+"-"+rt[e[t+8]]+rt[e[t+9]]+"-"+rt[e[t+10]]+rt[e[t+11]]+rt[e[t+12]]+rt[e[t+13]]+rt[e[t+14]]+rt[e[t+15]]).toLowerCase()}let no;const AA=new Uint8Array(16);function TA(){if(!no){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");no=crypto.getRandomValues.bind(crypto)}return no(AA)}const PA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ud={randomUUID:PA};function dd(e,t,n){var s;if(ud.randomUUID&&!t&&!e)return ud.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??TA();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,kA(r)}const ro=Ye("EventForm");function _A({onSuccess:e,editingEvent:t}){var v,b;const{locations:n}=Zl(),{addEvent:r,updateEvent:s}=ga(),[a,o]=p.useState(t||{id:dd(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),[l,c]=p.useState({}),[d,u]=p.useState(!1),[h,m]=p.useState({text:"",type:""}),f=w=>{const{name:k,value:N}=w.target;o(P=>({...P,[k]:N})),l[k]&&c(P=>{const D={...P};return delete D[k],D})},x=(w,k)=>{if(o(N=>({...N,[w]:k})),w==="locationId"){const N=n.find(P=>P.id===k);N&&o(P=>({...P,locationName:N.name}))}l[w]&&c(N=>{const P={...N};return delete P[w],P})},g=(w,k)=>{o(N=>{const P=N.days||[];let D;return k?D=[...P,w]:D=P.filter(A=>A!==w),{...N,days:D}}),l.days&&c(N=>{const P={...N};return delete P.days,P})},y=()=>{var k,N,P;const w={};return(k=a.title)!=null&&k.trim()||(w.title="Le titre est obligatoire"),(N=a.artistName)!=null&&N.trim()||(w.artistName="Le nom de l'artiste est obligatoire"),(P=a.description)!=null&&P.trim()||(w.description="La description est obligatoire"),a.locationId||(w.locationId="Veuillez s√©lectionner un lieu"),(!a.days||a.days.length===0)&&(w.days="Veuillez s√©lectionner au moins un jour"),c(w),Object.keys(w).length===0},S=async w=>{if(w.preventDefault(),!y()){m({text:"Veuillez corriger les erreurs dans le formulaire",type:"error"});return}u(!0),m({text:"",type:""});try{ro.info(`${t?"Mise √† jour":"Cr√©ation"} d'un √©v√©nement`),ro.debug("Donn√©es de l'√©v√©nement",a);const k=a;let N;t?N=s(k):N=r(k),N.success?(m({text:`√âv√©nement ${t?"mis √† jour":"cr√©√©"} avec succ√®s`,type:"success"}),t||o({id:dd(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),e&&e()):m({text:`Erreur: ${N.error}`,type:"error"})}catch(k){ro.error("Erreur lors de la soumission du formulaire",k),m({text:`Une erreur est survenue: ${k}`,type:"error"})}finally{u(!1)}};return i.jsxs(je,{className:"w-full max-w-3xl mx-auto",children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:t?"Modifier un √©v√©nement":"Ajouter un nouvel √©v√©nement"})}),i.jsx(Qe,{children:i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"title",children:"Titre de l'√©v√©nement *"}),i.jsx(Kt,{id:"title",name:"title",value:a.title||"",onChange:f,placeholder:"Titre de l'√©v√©nement",className:l.title?"border-red-500":""}),l.title&&i.jsx("p",{className:"text-red-500 text-sm",children:l.title})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"artistName",children:"Nom de l'artiste *"}),i.jsx(Kt,{id:"artistName",name:"artistName",value:a.artistName||"",onChange:f,placeholder:"Nom de l'artiste",className:l.artistName?"border-red-500":""}),l.artistName&&i.jsx("p",{className:"text-red-500 text-sm",children:l.artistName})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"type",children:"Type d'√©v√©nement *"}),i.jsxs(Ms,{value:a.type,onValueChange:w=>x("type",w),children:[i.jsx(Qr,{className:l.type?"border-red-500":"",children:i.jsx(Ds,{placeholder:"S√©lectionner un type"})}),i.jsxs(Xr,{children:[i.jsx(pr,{value:"exposition",children:"Exposition"}),i.jsx(pr,{value:"concert",children:"Concert"})]})]}),l.type&&i.jsx("p",{className:"text-red-500 text-sm",children:l.type})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description *"}),i.jsx(Ri,{id:"description",name:"description",value:a.description||"",onChange:f,placeholder:"Description de l'√©v√©nement",className:`min-h-24 ${l.description?"border-red-500":""}`}),l.description&&i.jsx("p",{className:"text-red-500 text-sm",children:l.description})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"artistBio",children:"Biographie de l'artiste"}),i.jsx(Ri,{id:"artistBio",name:"artistBio",value:a.artistBio||"",onChange:f,placeholder:"Biographie de l'artiste",className:"min-h-24"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"time",children:"Horaires"}),i.jsx(Kt,{id:"time",name:"time",value:a.time||"",onChange:f,placeholder:"Ex: 10h00 - 18h00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{children:"Jours *"}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Uo,{id:"samedi",checked:((v=a.days)==null?void 0:v.includes("samedi"))||!1,onCheckedChange:w=>g("samedi",w)}),i.jsx(Be,{htmlFor:"samedi",className:"cursor-pointer",children:"Samedi"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Uo,{id:"dimanche",checked:((b=a.days)==null?void 0:b.includes("dimanche"))||!1,onCheckedChange:w=>g("dimanche",w)}),i.jsx(Be,{htmlFor:"dimanche",className:"cursor-pointer",children:"Dimanche"})]})]}),l.days&&i.jsx("p",{className:"text-red-500 text-sm",children:l.days})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"locationId",children:"Lieu *"}),i.jsxs(Ms,{value:a.locationId,onValueChange:w=>x("locationId",w),children:[i.jsx(Qr,{className:l.locationId?"border-red-500":"",children:i.jsx(Ds,{placeholder:"S√©lectionner un lieu"})}),i.jsx(Xr,{children:n.map(w=>i.jsx(pr,{value:w.id,children:w.name},w.id))})]}),l.locationId&&i.jsx("p",{className:"text-red-500 text-sm",children:l.locationId})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"image",children:"URL de l'image (optionnel)"}),i.jsx(Kt,{id:"image",name:"image",value:a.image||"",onChange:f,placeholder:"URL de l'image"})]}),i.jsxs(Kp,{className:"flex justify-between px-0",children:[i.jsx(X,{type:"submit",disabled:d,className:"bg-[#4a5d94] hover:bg-[#3a4d84]",children:d?"En cours...":t?"Mettre √† jour":"Ajouter l'√©v√©nement"}),h.text&&i.jsx("p",{className:`text-sm ${h.type==="error"?"text-red-500":"text-green-500"}`,children:h.text})]})]})})]})}const md=Ye("AdminLogin"),MA="5321",DA=({onLogin:e})=>{const[t,n]=p.useState(""),[r,s]=p.useState(!1),[a,o]=p.useState(0),l=c=>{c.preventDefault(),t===MA?(md.info("Connexion administrateur r√©ussie"),sessionStorage.setItem("adminAuthenticated","true"),e()):(md.warn("Tentative de connexion administrateur √©chou√©e"),s(!0),o(a+1),n(""))};return i.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:i.jsxs(je,{className:"w-full max-w-md",children:[i.jsxs(Dt,{className:"space-y-1",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"bg-[#4a5d94] p-3 rounded-full",children:i.jsx(zx,{className:"h-6 w-6 text-white"})})}),i.jsx(Rt,{className:"text-2xl text-center text-[#4a5d94]",children:"Acc√®s Administrateur"}),i.jsx(ec,{className:"text-center",children:"Veuillez entrer le mot de passe pour acc√©der √† l'interface d'administration"})]}),i.jsx(Qe,{children:i.jsx("form",{onSubmit:l,children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"password",children:"Code PIN"}),i.jsx(Kt,{id:"password",type:"number",inputMode:"numeric",pattern:"[0-9]*",maxLength:4,value:t,onChange:c=>{c.target.value.length<=4&&(n(c.target.value),r&&s(!1))},className:`text-center text-2xl tracking-widest ${r?"border-red-500":""}`,placeholder:"____"}),r&&i.jsxs("p",{className:"text-sm text-red-500 text-center",children:["Code PIN incorrect. ",a>1?`${a} tentatives √©chou√©es.`:""]})]}),i.jsx(X,{type:"submit",className:"w-full bg-[#4a5d94]",children:"Se connecter"})]})})})]})})},nc={databaseURL:"https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app"};async function rc(){try{!localStorage.getItem("cloudinary_revolution_started")&&(localStorage.removeItem("community_entries"),localStorage.setItem("cloudinary_revolution_started","true"),console.log("[CloudinaryService] Syst√®me initialis√©"));const t=await fetch(`${nc.databaseURL}/community-photos.json`);if(!t.ok)return console.error("[CloudinaryService] Erreur API:",t.status),[];const n=await t.json(),r=n?Object.values(n):[];return console.log(`[CloudinaryService] ${r.length} photos charg√©es`),r.sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("[CloudinaryService] Erreur:",e),[]}}async function RA(e){var a,o,l,c;const t=e.cloudinaryUrl||e.imageUrl,r={id:t?((a=t.match(/\/v\d+\/([^\.]+)/))==null?void 0:a[1])||`photo_${Date.now()}`:`text_${Date.now()}`,type:t?"photo":"testimonial",displayName:((o=e.displayName)==null?void 0:o.trim())||"Anonyme",content:((l=e.content)==null?void 0:l.trim())||"",imageUrl:t||"",thumbnailUrl:t||"",description:((c=e.description)==null?void 0:c.trim())||"",createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),moderation:{status:"approved",moderatedAt:new Date().toISOString()}};if(!(await fetch(`${nc.databaseURL}/community-photos/${r.id}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Impossible de sauvegarder la photo. V√©rifiez votre connexion.");return console.log("[CloudinaryService] Photo sauvegard√©e"),r}async function OA(e){if(!(await fetch(`${nc.databaseURL}/community-photos/${e}.json`,{method:"DELETE"})).ok)throw new Error("Impossible de supprimer la photo");console.log("[CloudinaryService] ‚úÖ Photo supprim√©e")}function Qt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function wr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ag=6048e5,LA=864e5;let FA={};function xa(){return FA}function Rs(e,t){var l,c,d,u;const n=xa(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Qt(e),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Oi(e){return Rs(e,{weekStartsOn:1})}function og(e){const t=Qt(e),n=t.getFullYear(),r=wr(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Oi(r),a=wr(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Oi(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function hd(e){const t=Qt(e);return t.setHours(0,0,0,0),t}function fd(e){const t=Qt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function $A(e,t){const n=hd(e),r=hd(t),s=+n-fd(n),a=+r-fd(r);return Math.round((s-a)/LA)}function zA(e){const t=og(e),n=wr(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Oi(n)}function BA(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function VA(e){if(!BA(e)&&typeof e!="number")return!1;const t=Qt(e);return!isNaN(Number(t))}function UA(e){const t=Qt(e),n=wr(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const qA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HA=(e,t,n)=>{let r;const s=qA[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Fr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const GA={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WA={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YA={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KA={date:Fr({formats:GA,defaultWidth:"full"}),time:Fr({formats:WA,defaultWidth:"full"}),dateTime:Fr({formats:YA,defaultWidth:"full"})},QA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XA=(e,t,n,r)=>QA[e];function ln(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const JA={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iT={ordinalNumber:sT,era:ln({values:JA,defaultWidth:"wide"}),quarter:ln({values:ZA,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ln({values:eT,defaultWidth:"wide"}),day:ln({values:tT,defaultWidth:"wide"}),dayPeriod:ln({values:nT,defaultWidth:"wide",formattingValues:rT,defaultFormattingWidth:"wide"})};function cn(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?oT(l,h=>h.test(o)):aT(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function aT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function oT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function lg(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const lT=/^(\d+)(th|st|nd|rd)?/i,cT=/\d+/i,uT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dT={any:[/^b/i,/^(a|c)/i]},mT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hT={any:[/1/i,/2/i,/3/i,/4/i]},fT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bT={ordinalNumber:lg({matchPattern:lT,parsePattern:cT,valueCallback:e=>parseInt(e,10)}),era:cn({matchPatterns:uT,defaultMatchWidth:"wide",parsePatterns:dT,defaultParseWidth:"any"}),quarter:cn({matchPatterns:mT,defaultMatchWidth:"wide",parsePatterns:hT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:cn({matchPatterns:fT,defaultMatchWidth:"wide",parsePatterns:pT,defaultParseWidth:"any"}),day:cn({matchPatterns:gT,defaultMatchWidth:"wide",parsePatterns:xT,defaultParseWidth:"any"}),dayPeriod:cn({matchPatterns:yT,defaultMatchWidth:"any",parsePatterns:vT,defaultParseWidth:"any"})},wT={code:"en-US",formatDistance:HA,formatLong:KA,formatRelative:XA,localize:iT,match:bT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ST(e){const t=Qt(e);return $A(t,UA(t))+1}function jT(e){const t=Qt(e),n=+Oi(t)-+zA(t);return Math.round(n/ag)+1}function cg(e,t){var u,h,m,f;const n=Qt(e),r=n.getFullYear(),s=xa(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=wr(e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Rs(o,t),c=wr(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Rs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function ET(e,t){var l,c,d,u;const n=xa(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=cg(e,t),a=wr(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Rs(a,t)}function NT(e,t){const n=Qt(e),r=+Rs(n,t)-+ET(n,t);return Math.round(r/ag)+1}function ke(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Dn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ke(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ke(n+1,2)},d(e,t){return ke(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ke(e.getHours()%12||12,t.length)},H(e,t){return ke(e.getHours(),t.length)},m(e,t){return ke(e.getMinutes(),t.length)},s(e,t){return ke(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ke(s,t.length)}},Tr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pd={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Dn.y(e,t)},Y:function(e,t,n,r){const s=cg(e,r),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return ke(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):ke(a,t.length)},R:function(e,t){const n=og(e);return ke(n,t.length)},u:function(e,t){const n=e.getFullYear();return ke(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ke(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ke(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Dn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ke(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=NT(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ke(s,t.length)},I:function(e,t,n){const r=jT(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ke(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Dn.d(e,t)},D:function(e,t,n){const r=ST(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ke(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return ke(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return ke(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return ke(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Tr.noon:r===0?s=Tr.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Tr.evening:r>=12?s=Tr.afternoon:r>=4?s=Tr.morning:s=Tr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Dn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ke(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ke(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Dn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Dn.s(e,t)},S:function(e,t){return Dn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xd(r);case"XXXX":case"XX":return ir(r);case"XXXXX":case"XXX":default:return ir(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return xd(r);case"xxxx":case"xx":return ir(r);case"xxxxx":case"xxx":default:return ir(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+gd(r,":");case"OOOO":default:return"GMT"+ir(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+gd(r,":");case"zzzz":default:return"GMT"+ir(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return ke(r,t.length)},T:function(e,t,n){const r=e.getTime();return ke(r,t.length)}};function gd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+ke(a,2)}function xd(e,t){return e%60===0?(e>0?"-":"+")+ke(Math.abs(e)/60,2):ir(e,t)}function ir(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=ke(Math.trunc(r/60),2),a=ke(r%60,2);return n+s+t+a}const yd=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ug=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},CT=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return yd(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",yd(r,t)).replace("{{time}}",ug(s,t))},IT={p:ug,P:CT},kT=/^D+$/,AT=/^Y+$/,TT=["D","DD","YY","YYYY"];function PT(e){return kT.test(e)}function _T(e){return AT.test(e)}function MT(e,t,n){const r=DT(e,t,n);if(console.warn(r),TT.includes(e))throw new RangeError(r)}function DT(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,OT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LT=/^'([^]*?)'?$/,FT=/''/g,$T=/[a-zA-Z]/;function ya(e,t,n){var u,h,m,f,x,g,y,S;const r=xa(),s=(n==null?void 0:n.locale)??r.locale??wT,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((S=(y=r.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??0,l=Qt(e);if(!VA(l))throw new RangeError("Invalid time value");let c=t.match(OT).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=IT[b];return w(v,s.formatLong)}return v}).join("").match(RT).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:zT(v)};if(pd[b])return{isToken:!0,value:v};if(b.match($T))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_T(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&PT(b))&&MT(b,t,String(e));const w=pd[b[0]];return w(l,b,s.localize,d)}).join("")}function zT(e){const t=e.match(LT);return t?t[1].replace(FT,"'"):e}const BT={lessThanXSeconds:{one:"moins d‚Äôune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d‚Äôune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d‚Äôun an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu‚Äôun an",other:"presque {{count}} ans"}},VT=(e,t,n)=>{let r;const s=BT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},UT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},qT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},HT={full:"{{date}} '√†' {{time}}",long:"{{date}} '√†' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GT={date:Fr({formats:UT,defaultWidth:"full"}),time:Fr({formats:qT,defaultWidth:"full"}),dateTime:Fr({formats:HT,defaultWidth:"full"})},WT={lastWeek:"eeee 'dernier √†' p",yesterday:"'hier √†' p",today:"'aujourd‚Äôhui √†' p",tomorrow:"'demain √†' p'",nextWeek:"eeee 'prochain √†' p",other:"P"},YT=(e,t,n,r)=>WT[e],KT={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J√©sus-Christ","apr√®s J√©sus-Christ"]},QT={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2√®me trim.","3√®me trim.","4√®me trim."],wide:["1er trimestre","2√®me trimestre","3√®me trimestre","4√®me trimestre"]},XT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f√©vr.","mars","avr.","mai","juin","juil.","ao√ªt","sept.","oct.","nov.","d√©c."],wide:["janvier","f√©vrier","mars","avril","mai","juin","juillet","ao√ªt","septembre","octobre","novembre","d√©cembre"]},JT={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},ZT={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr√®s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l‚Äôapr√®s-midi",evening:"du soir",night:"du matin"}},eP=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"√®re":"er":a="√®me",n+a},tP=["MMM","MMMM"],nP={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&tP.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:eP,era:ln({values:KT,defaultWidth:"wide"}),quarter:ln({values:QT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ln({values:XT,defaultWidth:"wide"}),day:ln({values:JT,defaultWidth:"wide"}),dayPeriod:ln({values:ZT,defaultWidth:"wide"})},rP=/^(\d+)(i√®me|√®re|√®me|er|e)?/i,sP=/\d+/i,iP={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J√©sus-Christ|apr√®s J√©sus-Christ)/i},aP={any:[/^av/i,/^ap/i]},oP={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|√®me|e)? trim\.?/i,wide:/^[1234](er|√®me|e)? trimestre/i},lP={any:[/1/i,/2/i,/3/i,/4/i]},cP={narrow:/^[jfmasond]/i,abbreviated:/^(janv|f√©vr|mars|avr|mai|juin|juill|juil|ao√ªt|sept|oct|nov|d√©c)\.?/i,wide:/^(janvier|f√©vrier|mars|avril|mai|juin|juillet|ao√ªt|septembre|octobre|novembre|d√©cembre)/i},uP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},dP={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},mP={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},hP={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr√®s[-\s]midi|du soir|de la nuit)/i},fP={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},pP={ordinalNumber:lg({matchPattern:rP,parsePattern:sP,valueCallback:e=>parseInt(e)}),era:cn({matchPatterns:iP,defaultMatchWidth:"wide",parsePatterns:aP,defaultParseWidth:"any"}),quarter:cn({matchPatterns:oP,defaultMatchWidth:"wide",parsePatterns:lP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:cn({matchPatterns:cP,defaultMatchWidth:"wide",parsePatterns:uP,defaultParseWidth:"any"}),day:cn({matchPatterns:dP,defaultMatchWidth:"wide",parsePatterns:mP,defaultParseWidth:"any"}),dayPeriod:cn({matchPatterns:hP,defaultMatchWidth:"any",parsePatterns:fP,defaultParseWidth:"any"})},va={code:"fr",formatDistance:VT,formatLong:GT,formatRelative:YT,localize:nP,match:pP,options:{weekStartsOn:1,firstWeekContainsDate:4}},gP=({entryId:e,className:t})=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const l=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${e}.json`);if(l.ok){const c=await l.json();r((c==null?void 0:c.likes)||0)}else r(0)}catch(l){console.warn(`Erreur lors de la r√©cup√©ration des likes pour ${e}:`,l),r(0)}finally{a(!1)}})()},[e]),s?i.jsxs("div",{className:`flex items-center gap-1 text-gray-400 ${t}`,children:[i.jsx(En,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"..."})]}):i.jsxs("div",{className:`flex items-center gap-1 ${n&&n>0?"text-red-500":"text-gray-400"} ${t}`,children:[i.jsx(En,{className:`h-4 w-4 ${n&&n>0?"fill-current":""}`}),i.jsx("span",{className:"text-sm font-medium",children:n||0})]})},oi=Ye("CommunityManagement");function xP(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[s,a]=p.useState(null);p.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const u=await rc();oi.info(`${u.length} contributions charg√©es`),t(u)}catch(u){oi.error("Erreur lors du chargement des contributions",u),wt({title:"Erreur",description:"Impossible de charger les contributions",variant:"destructive"})}finally{r(!1)}},l=async u=>{try{a(u),oi.info(`Suppression de la contribution ${u}`),await OA(u),t(h=>h.filter(m=>m.id!==u)),wt({title:"Succ√®s",description:"Contribution supprim√©e avec succ√®s",variant:"default"})}catch(h){oi.error(`Erreur lors de la suppression de la contribution ${u}`,h),wt({title:"Erreur",description:"Impossible de supprimer la contribution",variant:"destructive"})}finally{a(null)}},c=u=>{try{if(!u)return"Date inconnue";const h=new Date(u);return isNaN(h.getTime())?"Date invalide":ya(h,"dd/MM/yyyy HH:mm",{locale:va})}catch{return"Date invalide"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Gestion des contributions communautaires"}),i.jsxs(X,{onClick:o,variant:"outline",size:"sm",disabled:n,children:[n?i.jsx(Na,{className:"h-4 w-4 animate-spin mr-2"}):null,"Actualiser"]})]}),i.jsxs(ss,{defaultValue:"all",children:[i.jsxs(Cr,{className:"mb-4 flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(Fe,{value:"all",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Toutes"}),i.jsx(Fe,{value:"photos",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Photos"}),i.jsx(Fe,{value:"testimonials",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"T√©moignages"}),i.jsx(Fe,{value:"pending",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"En attente"}),i.jsx(Fe,{value:"archived",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Archiv√©es"})]}),i.jsx($e,{value:"all",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx($e,{value:"photos",children:d(e.filter(u=>{var h;return u.type==="photo"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx($e,{value:"testimonials",children:d(e.filter(u=>{var h;return u.type==="testimonial"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx($e,{value:"pending",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)==="pending"}),s,l)}),i.jsx($e,{value:"archived",children:i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Fonction de restauration supprim√©e avec le nouveau syst√®me Firebase"})})]})]});function d(u,h,m){return n?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(Na,{className:"h-8 w-8 animate-spin text-gray-500"})}):u.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucune contribution trouv√©e"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(f=>{var x,g;return i.jsx(je,{className:"overflow-hidden",children:i.jsxs(Qe,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:f.displayName||"Anonyme"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[f.type==="photo"?"Photo":"T√©moignage"," ‚Ä¢ ",c(f.timestamp||f.createdAt)]}),i.jsx(gP,{entryId:f.id,className:"mt-1"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[((x=f.moderation)==null?void 0:x.status)==="approved"?i.jsx(Bx,{className:"h-5 w-5 text-green-500"}):((g=f.moderation)==null?void 0:g.status)==="rejected"?i.jsx(Vx,{className:"h-5 w-5 text-red-500"}):i.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"En attente"}),i.jsx(X,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>m(f.id),disabled:h===f.id,children:h===f.id?i.jsx(Na,{className:"h-4 w-4 animate-spin"}):i.jsx(Ux,{className:"h-4 w-4"})})]})]}),f.type==="photo"&&f.imageUrl&&i.jsx("div",{className:"mt-3 relative pt-[56.25%]",children:i.jsx("img",{src:f.imageUrl,alt:`Contribution de ${f.displayName}`,className:"absolute top-0 left-0 w-full h-full object-cover rounded-md",onError:y=>{const S=typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"";y.currentTarget.src=`${S}/images/placeholder-image.jpg`}})}),f.type==="testimonial"&&i.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:f.content&&f.content.trim()?i.jsx("p",{className:"text-gray-700",children:f.content.trim()}):f.description&&f.description.trim()?i.jsx("p",{className:"text-gray-700",children:f.description.trim()}):i.jsx("p",{className:"text-gray-500 italic",children:"Contenu non disponible"})}),i.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[i.jsxs("p",{children:["ID: ",f.id]}),f.eventId&&i.jsxs("p",{children:["√âv√©nement: ",f.eventId]}),f.locationId&&i.jsxs("p",{children:["Lieu: ",f.locationId]})]})]})},f.id)})})}}const yP=()=>{const[e,t]=p.useState("test-entry-1"),[n,r]=p.useState(null),[s,a]=p.useState(null),[o,l]=p.useState("user-1"),{liked:c,total:d,loading:u,error:h,toggleLike:m,refresh:f}=Wp(e),x=async()=>{console.log("üîÑ Test de connexion Firebase...");const v=await nA();r(v)},g=async()=>{console.log("üîÑ R√©cup√©ration des stats...");const v=await Gp();a(v)},y=()=>{const v=`test-entry-${Date.now()}`;t(v),console.log(`üîÑ Changement d'entr√©e test vers: ${v}`)},S=()=>{const v=["user-1","user-2","user-3","user-4"],b=v.indexOf(o),w=v[(b+1)%v.length];l(w);const k=`session_${Date.now()}_${w}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("user-session-id",k),console.log(`üë§ Changement d'utilisateur vers: ${w} (${k})`),setTimeout(()=>f(),100)};return i.jsxs("div",{style:{padding:"20px",border:"2px solid #007bff",borderRadius:"8px",margin:"20px",backgroundColor:"#f8f9fa"},children:[i.jsx("h2",{children:"üß™ Test Syst√®me de Likes - √âtape 1"}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"1. Test de connexion Firebase"}),i.jsx("button",{onClick:x,style:{marginRight:"10px"},children:"Tester la connexion"}),i.jsxs("span",{children:["Status: ",n===null?"‚ùì Non test√©":n?"‚úÖ Connect√©":"‚ùå Erreur"]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"2. Test du hook useLikes"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Utilisateur actuel:"})," ",i.jsx("span",{style:{color:"#007bff",fontWeight:"bold"},children:o})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entry ID:"})," ",e]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Loading:"})," ",u?"‚è≥ Chargement...":"‚úÖ Charg√©"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Liked:"})," ",c?"‚ù§Ô∏è Lik√©":"ü§ç Pas lik√©"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Total:"})," ",d," likes"]}),h&&i.jsxs("p",{style:{color:"red"},children:[i.jsx("strong",{children:"Erreur:"})," ",h]}),i.jsxs("div",{style:{marginTop:"10px"},children:[i.jsx("button",{onClick:m,disabled:u,style:{marginRight:"10px"},children:c?"üíî Retirer like":"‚ù§Ô∏è Ajouter like"}),i.jsx("button",{onClick:f,disabled:u,style:{marginRight:"10px"},children:"üîÑ Rafra√Æchir"}),i.jsx("button",{onClick:y,style:{marginRight:"10px"},children:"üÜï Nouvelle entr√©e test"}),i.jsx("button",{onClick:S,style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px"},children:"üë§ Changer d'utilisateur"})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"3. Test des statistiques globales"}),i.jsx("button",{onClick:g,style:{marginRight:"10px"},children:"R√©cup√©rer les stats"}),s&&i.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Total likes:"})," ",s.total]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Likes aujourd'hui:"})," ",s.today]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entr√©e la plus populaire:"})," ",s.topEntry||"Aucune"]})]})]}),i.jsxs("div",{style:{backgroundColor:"#fff3cd",padding:"15px",borderRadius:"4px",border:"1px solid #ffeaa7"},children:[i.jsx("h4",{children:"üìã Checklist de validation √âtape 1:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"‚úÖ Types TypeScript cr√©√©s"}),i.jsx("li",{children:"‚úÖ Service likesService.ts cr√©√©"}),i.jsx("li",{children:"‚úÖ Hook useLikes cr√©√©"}),i.jsx("li",{children:"üîÑ Test de connexion Firebase"}),i.jsx("li",{children:"üîÑ Test toggle like"}),i.jsx("li",{children:"üîÑ Test temps r√©el (ouvrir 2 onglets)"}),i.jsx("li",{children:"üîÑ Test persistance (rafra√Æchir la page)"})]}),i.jsx("p",{children:i.jsx("strong",{children:"Instructions:"})}),i.jsxs("ol",{children:[i.jsx("li",{children:'Cliquer sur "Tester la connexion" ‚Üí doit afficher ‚úÖ'}),i.jsx("li",{children:'Cliquer sur "‚ù§Ô∏è Ajouter like" ‚Üí compteur doit augmenter'}),i.jsxs("li",{children:[i.jsx("strong",{children:"üÜï Test multi-utilisateur :"}),` Cliquer sur "üë§ Changer d'utilisateur" ‚Üí maintenant vous pouvez liker √† nouveau !`]}),i.jsx("li",{children:"Ouvrir un 2√®me onglet ‚Üí les likes doivent se synchroniser"}),i.jsx("li",{children:"Rafra√Æchir la page ‚Üí les likes doivent persister"})]})]})]})},vP=()=>{const[e,t]=p.useState(null),[n,r]=p.useState(!0),[s,a]=p.useState(null),[o,l]=p.useState(null),c=async()=>{try{r(!0),a(null);const d=await Gp(),u=await rc(),h=[];let m=0;for(const g of u)try{const y=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${g.id}.json`);if(y.ok){const S=await y.json(),v=(S==null?void 0:S.likes)||0;h.push({...g,likesCount:v}),m+=v}else h.push({...g,likesCount:0})}catch(y){console.warn(`Erreur lors de la r√©cup√©ration des likes pour ${g.id}:`,y),h.push({...g,likesCount:0})}const f=h.sort((g,y)=>y.likesCount-g.likesCount).slice(0,5),x=u.length>0?m/u.length:0;t({totalLikes:m,totalContributions:u.length,averageLikes:Math.round(x*10)/10,topContributions:f}),l(new Date)}catch(d){console.error("Erreur lors du chargement des statistiques:",d),a("Impossible de charger les statistiques")}finally{r(!1)}};return p.useEffect(()=>{c()},[]),n?i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2",children:[i.jsx(ps,{className:"h-5 w-5"}),"Statistiques des Likes"]})}),i.jsx(Qe,{children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Chargement des statistiques..."})]})})]}):s?i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2 text-red-600",children:[i.jsx(ps,{className:"h-5 w-5"}),"Erreur"]})}),i.jsxs(Qe,{children:[i.jsx("p",{className:"text-red-600 mb-4",children:s}),i.jsx(X,{onClick:c,variant:"outline",children:"R√©essayer"})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2",children:[i.jsx(ps,{className:"h-5 w-5 sm:h-6 sm:w-6"}),"Statistiques des Likes"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[o&&i.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Mis √† jour : ",o.toLocaleTimeString()]}),i.jsx(X,{onClick:c,variant:"outline",size:"sm",children:"üîÑ Actualiser"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(je,{children:i.jsx(Qe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total des Likes"}),i.jsx("p",{className:"text-3xl font-bold text-red-500",children:(e==null?void 0:e.totalLikes)||0})]}),i.jsx(En,{className:"h-8 w-8 text-red-500"})]})})}),i.jsx(je,{children:i.jsx(Qe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contributions"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(e==null?void 0:e.totalContributions)||0})]}),i.jsx(pm,{className:"h-8 w-8 text-blue-600"})]})})}),i.jsx(je,{children:i.jsx(Qe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moyenne par contribution"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:(e==null?void 0:e.averageLikes)||0})]}),i.jsx(gc,{className:"h-8 w-8 text-green-600"})]})})})]}),i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2",children:[i.jsx(gc,{className:"h-5 w-5"}),"Top 5 des Contributions les Plus Lik√©es"]})}),i.jsx(Qe,{children:e!=null&&e.topContributions&&e.topContributions.length>0?i.jsx("div",{className:"space-y-4",children:e.topContributions.map((d,u)=>i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-lg gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[i.jsx("div",{className:"flex items-center justify-center w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-blue-100 text-blue-600 font-bold text-sm",children:u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:d.displayName}),i.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:d.description||d.content||"Sans description"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.type==="photo"?"üì∑ Photo":"üí¨ T√©moignage"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold self-end sm:self-center",children:[i.jsx(En,{className:"h-4 w-4 fill-current"}),i.jsx("span",{className:"text-lg",children:d.likesCount})]})]},d.id))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucune contribution avec des likes pour le moment"})})]}),i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-sm",children:"Informations Techniques"})}),i.jsx(Qe,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs sm:text-sm",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Base de donn√©es :"})," Firebase Realtime Database"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Synchronisation :"})," Temps r√©el (polling 5s)"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Pr√©vention spam :"})," 1 like par session utilisateur"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Persistance :"})," Donn√©es sauvegard√©es automatiquement"]})]})]})})]})]})},Se=Ye("Admin");function bP(){Se.info("Initialisation du composant Admin");const e=xt(),{events:t}=Yp(),{locations:n}=Zl(),{updateEvent:r,updateLocation:s}=ga(),[a,o]=p.useState([]),[l,c]=p.useState(null),[d,u]=p.useState({x:0,y:0}),[h,m]=p.useState(!1),[f,x]=p.useState(!1);p.useEffect(()=>{sessionStorage.getItem("adminAuthenticated")==="true"&&x(!0)},[]),p.useEffect(()=>{Se.info("Chargement initial des lieux"),Se.debug("Donn√©es de lieux charg√©es",n),o(n)},[n]);const g=P=>{Se.info(`S√©lection du lieu ${P}`),c(P);const D=a.find(A=>A.id===P);D&&u({x:D.x,y:D.y})},y=P=>{Se.info("Clic sur la carte");try{const D=Math.round(P.nativeEvent.offsetX),A=Math.round(P.nativeEvent.offsetY);Se.info(`Coordonn√©es du clic: x=${D}, y=${A}`),u({x:D,y:A}),m(!0),v()}catch(D){Se.error("Erreur lors du clic sur la carte",D)}},S=()=>{var P;Se.info("Demande de mise √† jour des coordonn√©es"),Se.debug("√âtat actuel",{activeLocation:l,coordinates:d,mapClicked:h});try{if(!l){Se.warn("Tentative de mise √† jour sans lieu s√©lectionn√©"),alert("Veuillez d'abord s√©lectionner un lieu");return}if(!h&&(!d.x||!d.y)){Se.warn("Tentative de mise √† jour avec des coordonn√©es invalides"),alert("Veuillez cliquer sur la carte pour d√©finir les nouvelles coordonn√©es");return}const D=a.map(C=>C.id===l?(Se.debug("Mise √† jour des coordonn√©es pour",{id:C.id,name:C.name,oldX:C.x,oldY:C.y,newX:d.x,newY:d.y}),{...C,x:d.x,y:d.y}):C);o(D),m(!1),Se.info("Mise √† jour des coordonn√©es via le service de donn√©es"),Se.debug("Nouvelles coordonn√©es",D);const A=n.find(C=>C.id===l);if(A){Se.info(`Mise √† jour des coordonn√©es dans le service de donn√©es pour ${A.name}`);const C={...A,x:d.x,y:d.y},T=s(C);if(T.success){Se.debug("Coordonn√©es mises √† jour dans le service de donn√©es",{id:C.id,name:C.name,oldX:A.x,oldY:A.y,newX:d.x,newY:d.y});const z=t.filter(Y=>Y.locationName===C.name);Se.info(`Mise √† jour de ${z.length} √©v√©nements associ√©s au lieu ${C.name}`),Se.info(`${z.length} √©v√©nements associ√©s au lieu ${C.name} h√©riteront automatiquement des nouvelles coordonn√©es`),Se.info(`Coordonn√©es mises √† jour pour ${C.name} et ${z.length} √©v√©nements associ√©s`)}else Se.error(`Erreur lors de la mise √† jour du lieu ${A.id}`,T.error)}else Se.warn(`Lieu avec ID ${l} non trouv√© dans la liste globale des lieux`);const M=(P=a.find(C=>C.id===l))==null?void 0:P.name;Se.info(`Confirmation de mise √† jour pour ${M}`),alert(`Coordonn√©es mises √† jour pour ${M}
X: ${d.x}, Y: ${d.y}

Les modifications ont √©t√© enregistr√©es avec succ√®s.`)}catch(D){Se.error("Erreur lors de la mise √† jour des coordonn√©es",D),alert(`Erreur lors de la mise √† jour des coordonn√©es: ${D}`)}},v=()=>{if(Se.info("Test des coordonn√©es sur la carte"),!l){Se.warn("Tentative de test sans lieu s√©lectionn√©"),alert("Veuillez d'abord s√©lectionner un lieu");return}const P=a.map(D=>{if(D.id===l){const A={...D,x:d.x,y:d.y};return Se.debug("Mise √† jour temporaire des coordonn√©es pour le test",{id:D.id,name:D.name,oldX:D.x,oldY:D.y,newX:d.x,newY:d.y}),A}return D});o(P),Se.info("Coordonn√©es de test appliqu√©es temporairement",d)},b=()=>{Se.info("Exportation des coordonn√©es");try{const P=JSON.stringify(a,null,2),D=new Blob([P],{type:"application/json"}),A=URL.createObjectURL(D),M=document.createElement("a");M.href=A,M.download="locations.json",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(A),Se.info("Exportation des coordonn√©es r√©ussie")}catch(P){Se.error("Erreur lors de l'exportation des coordonn√©es",P),alert(`Erreur lors de l'exportation des coordonn√©es: ${P}`)}},w=()=>{x(!0),sessionStorage.setItem("adminAuthenticated","true")},k=()=>{localStorage.clear(),wt({title:"LocalStorage vid√©",description:"Toutes les donn√©es locales ont √©t√© effac√©es.",variant:"destructive"}),Se.info("LocalStorage vid√© par l'administrateur"),setTimeout(()=>window.location.reload(),1500)},N=()=>{localStorage.removeItem("hasSeenOnboarding"),wt({title:"Onboarding r√©initialis√©",description:"L'onboarding s'affichera au prochain chargement de l'application."}),Se.info("Onboarding r√©initialis√© par l'administrateur")};return f?i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(X,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs(ss,{defaultValue:"coordinates",className:"w-full",children:[i.jsxs(Cr,{className:"w-full flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(Fe,{value:"events",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"√âv√©nements"}),i.jsx(Fe,{value:"locations",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Lieux"}),i.jsx(Fe,{value:"community",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Contributions"}),i.jsx(Fe,{value:"likes-stats",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"üìä Stats"}),i.jsx(Fe,{value:"likes-test",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"üß™ Test"}),i.jsx(Fe,{value:"import-export",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Import/Export"}),i.jsx(Fe,{value:"reset",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Reset"})]}),i.jsx($e,{value:"locations",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Gestion des coordonn√©es"})}),i.jsx(Qe,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Lieux"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"S√©lectionnez un lieu pour modifier ses coordonn√©es"}),i.jsx("div",{className:"space-y-2",children:a.map(P=>i.jsx(X,{variant:l===P.id?"default":"outline",className:`w-full justify-start ${l===P.id?"bg-[#4a5d94]":""}`,onClick:()=>g(P.id),children:P.name},P.id))})]}),l&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Coordonn√©es"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Modifiez les coordonn√©es du lieu s√©lectionn√©"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"new-x",children:"X"}),i.jsx(Kt,{id:"new-x",type:"number",value:d.x,onChange:P=>u({...d,x:P.target.value?parseInt(P.target.value):0})})]}),i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"new-y",children:"Y"}),i.jsx(Kt,{id:"new-y",type:"number",value:d.y,onChange:P=>u({...d,y:P.target.value?parseInt(P.target.value):0})})]})]}),i.jsx(X,{className:"w-full bg-[#4a5d94] mb-2",onClick:S,children:"Mettre √† jour les coordonn√©es"}),i.jsx(X,{className:"w-full bg-[#ff7a45] mb-2",onClick:v,children:"Tester sur la carte"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Carte"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cliquez sur la carte pour d√©finir la position du lieu s√©lectionn√©"}),i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsx("div",{className:"flex justify-center",children:i.jsx(Qh,{locations:a,activeLocation:l,onClick:y})})})]})]})})]})}),i.jsx($e,{value:"events",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Gestion des √©v√©nements"})}),i.jsx(Qe,{children:i.jsx(_A,{onSuccess:()=>{Se.info("√âv√©nement ajout√© avec succ√®s")}})})]})}),i.jsx($e,{value:"community",className:"space-y-4",children:i.jsx(xP,{})}),i.jsx($e,{value:"likes-stats",className:"space-y-4",children:i.jsx(vP,{})}),i.jsx($e,{value:"likes-test",className:"space-y-4",children:i.jsx(yP,{})}),i.jsx($e,{value:"import-export",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Import / Export des donn√©es"})}),i.jsxs(Qe,{children:[i.jsx(bA,{}),i.jsx("div",{className:"mt-4",children:i.jsx(X,{className:"w-full bg-[#4a5d94]",onClick:b,children:"Exporter les coordonn√©es"})})]})]})}),i.jsx($e,{value:"reset",className:"space-y-4",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"R√©initialisation des donn√©es"})}),i.jsx(Qe,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"R√©initialisation du localStorage"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Attention : cette action effacera toutes les donn√©es locales de l'application, y compris les √©v√©nements sauvegard√©s, les lieux visit√©s et les pr√©f√©rences utilisateur."}),i.jsx(X,{onClick:k,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Vider le localStorage"})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"R√©initialisation de l'onboarding"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Cette action r√©initialisera uniquement l'onboarding. L'√©cran d'accueil s'affichera au prochain chargement de l'application."}),i.jsx(X,{onClick:N,className:"w-full bg-gray-800 hover:bg-gray-900 text-white",children:"R√©initialiser l'onboarding"})]})]})})]})})]})})]}):i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(X,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx(DA,{onLogin:w})]})}const li=Ye("SavedEvents");function wP(){const e=xt(),[t,n]=p.useState([]),[r,s]=p.useState(""),[a,o]=p.useState(""),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[g,y]=p.useState(!1),[S,v]=p.useState(!1),[b,w]=p.useState(!0);p.useEffect(()=>{n(it()),w(!0),V.trackPageView("/saved","√âv√©nements enregistr√©s");const A=localStorage.getItem("celebrationsShown"),M=A?JSON.parse(A):{};hi(st.FIRST_EVENT_SAVED)&&!M[st.FIRST_EVENT_SAVED]&&(x(!0),M[st.FIRST_EVENT_SAVED]=!0),hi(st.MULTIPLE_EVENTS_SAVED)&&!M[st.MULTIPLE_EVENTS_SAVED]&&(y(!0),M[st.MULTIPLE_EVENTS_SAVED]=!0),hi(st.NOTIFICATION_SET)&&!M[st.NOTIFICATION_SET]&&(v(!0),M[st.NOTIFICATION_SET]=!0),localStorage.setItem("celebrationsShown",JSON.stringify(M))},[]);const k=A=>{const M=aa(A);n(M),V.trackContentInteraction(ee.UNSAVE,"event",A,{source:"saved"})},N=A=>{if(!r||!a)return;const M=new Date(`${r}T${a}`),C=K1(A,M.toISOString());n(C),c(null),s(""),o(""),V.trackProgramInteraction(ee.EVENT_REMINDER,{event_id:A,reminder_at:M.toISOString(),source:"saved"})},P=async A=>{try{li.info("Tentative d'ajout au calendrier",{eventId:A.id});const M=await Xl(A);if(M.success)wt({title:"Ajout au calendrier",description:"L'√©v√©nement a √©t√© ajout√© √† votre calendrier",variant:"default"}),li.info("Ajout au calendrier r√©ussi",{eventId:A.id}),V.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!0,source:"saved"});else{let C="Une erreur est survenue lors de l'ajout au calendrier";M.errorType===_s.NOT_SUPPORTED?C="L'ajout au calendrier n'est pas support√© sur cet appareil":M.errorType===_s.PERMISSION_DENIED&&(C="Permission refus√©e pour acc√©der au calendrier"),wt({title:"Erreur",description:C,variant:"destructive"}),li.error("Erreur lors de l'ajout au calendrier",{eventId:A.id,errorType:M.errorType,errorMessage:M.errorMessage}),V.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!1,error_type:M.errorType,source:"saved"})}}catch(M){wt({title:"Erreur",description:"Une erreur inattendue est survenue",variant:"destructive"}),li.error("Exception lors de l'ajout au calendrier",{error:M}),V.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!1,exception:!0,source:"saved"})}},D=A=>{const M=new Date(A);return ya(M,"EEEE d MMMM yyyy",{locale:va})};return i.jsxs("div",{className:"min-h-screen bg-white pb-20",children:[i.jsx(mi,{trigger:f,message:fi(st.FIRST_EVENT_SAVED),onComplete:()=>x(!1)}),i.jsx(mi,{trigger:g,message:fi(st.MULTIPLE_EVENTS_SAVED),onComplete:()=>y(!1)}),i.jsx(mi,{trigger:S,message:fi(st.NOTIFICATION_SET),onComplete:()=>v(!1)}),i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[i.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>{V.trackInteraction(ee.BACK,"button",{from:"saved_events"}),e("/")},children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"√âv√©nements enregistr√©s"}),i.jsx("div",{className:"w-20"})]}),t.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore sauvegard√© d'√©v√©nements."}),i.jsx(X,{className:"mt-4 bg-[#4a5d94]",onClick:()=>e("/program"),children:"Voir le programme"})]}):i.jsx("div",{className:"space-y-2",children:t.map(A=>i.jsxs(je,{className:"border-[#e0ebff]",children:[i.jsx(Dt,{className:"py-1 px-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(Rt,{className:"text-base font-medium",children:A.title}),i.jsxs("div",{className:"flex items-center",children:[!A.notificationTime&&i.jsx(X,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>c(A.id),children:i.jsx(xc,{className:"h-3 w-3"})}),b&&i.jsx(X,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>P(A),title:"Ajouter au calendrier",children:i.jsx(jn,{className:"h-3 w-3"})}),i.jsx(X,{variant:"ghost",size:"sm",className:"text-red-500 h-7 w-7 p-0",onClick:()=>k(A.id),children:i.jsx(qx,{className:"h-3 w-3"})})]})]})}),i.jsx(Qe,{className:"py-1 px-3 pt-0",children:i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(jn,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:[A.days.map(M=>M==="samedi"?"Sa":"Di").join("/"),", ",A.time]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(Nn,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:A.locationName})]}),i.jsxs(X,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[#4a5d94] hover:bg-[#e0ebff] text-xs flex items-center justify-center transition-all duration-200",onClick:()=>{m(!0),u(A),V.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:A.id,source:"saved"})},children:[i.jsx(es,{className:"h-3 w-3 mr-1"}),"D√©tails"]})]}),A.notificationTime&&i.jsxs("div",{className:"flex items-center text-[#4a5d94]",children:[i.jsx(xc,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:["Rappel: ",D(A.notificationTime)]})]}),l===A.id?i.jsxs("div",{className:"mt-2 p-2 bg-[#f0f5ff] rounded-md",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(Be,{className:"text-xs mb-1 block",children:"Choisir un rappel"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(X,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const M=A.days[0],C=new Date,T=M==="samedi"?6:0;for(;C.getDay()!==T;)C.setDate(C.getDate()+1);const z=new Date(C);z.setDate(z.getDate()-1),s(z.toISOString().split("T")[0]),o("10:00"),N(A.id)},children:"1 jour avant"}),i.jsx(X,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const M=A.days[0],C=new Date,T=M==="samedi"?6:0;for(;C.getDay()!==T;)C.setDate(C.getDate()+1);const z=A.time.split("h");C.setHours(parseInt(z[0]),parseInt(z[1]||"0"),0);const Y=new Date(C);Y.setHours(Y.getHours()-3),s(Y.toISOString().split("T")[0]),o(`${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`),N(A.id)},children:"3 heures avant"}),i.jsx(X,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const M=A.days[0],C=new Date,T=M==="samedi"?6:0;for(;C.getDay()!==T;)C.setDate(C.getDate()+1);s(C.toISOString().split("T")[0]),o("08:00"),N(A.id)},children:"Le matin m√™me"}),i.jsx(X,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const M=A.days[0],C=new Date,T=M==="samedi"?6:0;for(;C.getDay()!==T;)C.setDate(C.getDate()+1);s(C.toISOString().split("T")[0]),o("10:00")},children:"Choix pr√©cis"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[i.jsxs("div",{children:[i.jsx(Be,{htmlFor:`date-${A.id}`,className:"text-xs mb-1",children:"Date"}),i.jsx(Kt,{id:`date-${A.id}`,type:"date",className:"h-8 text-sm",value:r,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx(Be,{htmlFor:`time-${A.id}`,className:"text-xs mb-1",children:"Heure"}),i.jsx(Kt,{id:`time-${A.id}`,type:"time",className:"h-8 text-sm",value:a,onChange:M=>o(M.target.value)})]})]}),i.jsxs("div",{className:"flex space-x-2 mt-1",children:[i.jsx(X,{className:"flex-1 bg-[#4a5d94] h-8 text-xs",onClick:()=>N(A.id),children:"D√©finir"}),i.jsx(X,{variant:"outline",className:"flex-1 h-8 text-xs",onClick:()=>c(null),children:"Annuler"})]})]}):null]})})]},A.id))}),i.jsx(Zn,{}),i.jsx(Jl,{event:d,isOpen:h,onClose:()=>{m(!1),u(null)},source:"saved"})]})]})}const SP=p.createContext({userInteracted:!1,setUserInteracted:()=>{}}),jP=()=>p.useContext(SP);function dg(){const e=In(),t=p.useRef(null);return p.useEffect(()=>{const n=e.pathname,r=document.title;c0(n,r),t.current&&t.current!==n&&V.trackRouteChange(t.current,n),t.current=n},[e.pathname]),{trackEvent:(n,r,s)=>u0(n,r,s),trackInteraction:(n,r,s)=>bo(n,r,s),trackSwipe:(n,r,s,a)=>d0(n,r,s,a),trackFeatureUse:(n,r)=>m0(n,r),trackContentInteraction:(n,r,s,a)=>V.trackContentInteraction(n,r,s,a),trackMediaInteraction:(n,r,s,a)=>V.trackMediaInteraction(n,r,s,a),trackMapInteraction:(n,r)=>V.trackMapInteraction(n,r),trackProgramInteraction:(n,r)=>V.trackProgramInteraction(n,r),trackCommunityInteraction:(n,r)=>V.trackCommunityInteraction(n,r),trackDonationInteraction:(n,r)=>V.trackDonationInteraction(n,r),trackOnboarding:(n,r)=>V.trackOnboarding(n,r),trackError:(n,r,s)=>V.trackError(n,r,s)}}function EP(){const e=xt(),[t,n]=p.useState(0),[r,s]=p.useState(!1),{setUserInteracted:a}=jP(),o=dg();p.useEffect(()=>{o.trackOnboarding(ee.ONBOARDING_START,{timestamp:new Date().toISOString()})},[]),p.useEffect(()=>{const g=l[t];o.trackOnboarding(ee.ONBOARDING_SLIDE_VIEW,{slide_index:t,slide_title:g.title,has_video:!!g.video})},[t]),p.useEffect(()=>{console.log("[Onboarding] Pr√©paration de l'interaction utilisateur"),localStorage.setItem("userHasInteracted","true"),a(!0)},[a]);const l=[{title:"Bienvenue sur l'application Collectif √éle Feydeau",description:["D√©couvrez le <strong>patrimoine unique</strong> de l'√éle Feydeau √† travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organis√©s par les artistes du collectif."],image:"intro-video-image.png",video:"/video/intro-video.mp4"},{title:"Bienvenue sur l'application Collectif √éle Feydeau",description:["D√©couvrez le <strong>patrimoine unique</strong> de l'√éle Feydeau √† travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organis√©s par les artistes du collectif."],image:"/onboarding-image.webp"},{title:"Programme et horaires",description:["Consultez le <strong>programme complet</strong> des √©v√©nements par jour.","Les <strong>horaires</strong> sont clairement indiqu√©s pour chaque √©v√©nement.","<strong>Filtrez</strong> par type d'√©v√©nement : expositions ou concerts."],image:"/onboarding-image.webp"},{title:"Carte interactive",description:["<strong>Localisez</strong> tous les √©v√©nements sur la <strong>carte</strong> de l'√éle Feydeau.","<strong>Naviguez</strong> facilement entre les diff√©rents lieux.","<strong>Marquez</strong> les lieux que vous avez visit√©s."],image:"/onboarding-image.webp"},{title:"Fonctionnalit√©s pratiques",description:["<strong>Enregistrez</strong> vos √©v√©nements favoris pour y acc√©der rapidement.","Configurez des <strong>rappels</strong> pour ne manquer aucun √©v√©nement.","L'application fonctionne <strong>hors-ligne</strong> pour consulter le programme sans connexion."],image:"/onboarding-image.webp"}],c=()=>{console.log("[Onboarding] Interaction utilisateur via nextSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("left","button",!0,{current_slide:t,total_slides:l.length}),t<l.length-1&&n(t+1)},d=()=>{console.log("[Onboarding] Interaction utilisateur via prevSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("right","button",!0,{current_slide:t,total_slides:l.length}),t>0&&n(t-1)},u=()=>{if(r){console.log("[Onboarding] Navigation d√©j√† en cours, ignor√©");return}try{s(!0),console.log("[Onboarding] ===== D√©but de handleFinish ====="),console.log("[Onboarding] Avant localStorage.setItem - hasSeenOnboarding actuel:",localStorage.getItem("hasSeenOnboarding")),localStorage.setItem("hasSeenOnboarding","true"),console.log("[Onboarding] Apr√®s localStorage.setItem - hasSeenOnboarding:",localStorage.getItem("hasSeenOnboarding")),o.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:t+1,completion_time:new Date().toISOString()}),console.log("[Onboarding] URL actuelle avant navigation:",window.location.href),console.log("[Onboarding] Navigation vers la carte..."),e("/map",{replace:!0}),console.log("[Onboarding] navigate() appel√© vers /map"),setTimeout(()=>{console.log("[Onboarding] URL apr√®s navigation (500ms):",window.location.href)},500)}catch(g){console.error("[Onboarding] Erreur lors de la finalisation de l'onboarding:",g),e("/map",{replace:!0})}finally{setTimeout(()=>s(!1),1e3)}},h=(g,y)=>{y.offset.x<-50&&t<l.length-1?(o.trackSwipe("left","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t+1)):y.offset.x>50&&t>0?(o.trackSwipe("right","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t-1)):o.trackSwipe(y.offset.x<0?"left":"right","gesture",!1,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)})},m=()=>{console.log("[Onboarding] Vid√©o d√©marr√©e"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackMediaInteraction(ee.PLAY,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},f=()=>{console.log("[Onboarding] Vid√©o mise en pause"),o.trackMediaInteraction(ee.PAUSE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},x=()=>{console.log("[Onboarding] Vid√©o termin√©e"),o.trackMediaInteraction(ee.COMPLETE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})};return i.jsxs("div",{className:"flex flex-col h-screen bg-white relative overflow-hidden",children:[i.jsx("div",{className:"p-4 flex justify-end"}),i.jsx("div",{className:"absolute top-4 left-0 right-0 flex justify-center z-50",children:i.jsx("div",{className:"flex space-x-2",children:l.map((g,y)=>i.jsx("div",{className:`h-2 w-2 rounded-full ${y===t?"bg-[#ff7a45]":"bg-gray-300"}`},y))})}),i.jsx(be.div,{className:"absolute inset-0 z-10 pointer-events-auto touch-pan-x",drag:"x",dragConstraints:{left:0,right:0},onDragEnd:h,style:{touchAction:"pan-x"}}),i.jsx("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold text-center my-4 relative",children:l[t].title}),t===0?i.jsx("div",{className:"relative overflow-hidden bg-gray-200 mb-[80px] h-[50vh] md:h-[60vh] z-20",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:ft(l[t].video||""),"aria-label":`Vid√©o: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative h-[30vh] md:h-[40vh] overflow-hidden bg-gray-200",children:l[t].video?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:ft(l[t].video||""),"aria-label":`Vid√©o: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})}):i.jsx("div",{className:"absolute inset-0 bg-center bg-no-repeat bg-contain",style:{backgroundImage:`url(${ft(l[t].image)})`},"aria-label":l[t].title})}),i.jsx("div",{className:"flex-1 p-4 overflow-y-auto pb-[80px]",children:Array.isArray(l[t].description)?i.jsx("div",{className:"space-y-3",children:l[t].description.map((g,y)=>i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:g}},y))}):i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:l[t].description}})})]})]})}),i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 flex space-x-4 border-t border-gray-100 bg-white z-50",children:[t>0&&i.jsx(X,{onClick:d,className:"flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Pr√©c√©dent"}),i.jsx(X,{onClick:t===l.length-1?u:c,className:"flex-1 bg-[#4a5d94] text-white",children:t===l.length-1?"Commencer":"Suivant"})]})]})}function NP(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var sc="ScrollArea",[mg,L2]=Zr(sc),[CP,qt]=mg(sc),hg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState(null),[g,y]=p.useState(null),[S,v]=p.useState(0),[b,w]=p.useState(0),[k,N]=p.useState(!1),[P,D]=p.useState(!1),A=Je(t,C=>c(C)),M=Jo(s);return i.jsx(CP,{scope:n,type:r,dir:M,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:k,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:D,onCornerWidthChange:v,onCornerHeightChange:w,children:i.jsx(We.div,{dir:M,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});hg.displayName=sc;var fg="ScrollAreaViewport",pg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:a,...o}=e,l=qt(fg,n),c=p.useRef(null),d=Je(t,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(We.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:OP({asChild:s,children:r},u=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});pg.displayName=fg;var pn="ScrollAreaScrollbar",ic=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(pn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(IP,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(kP,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(gg,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(ac,{...r,ref:t}):null});ic.displayName=pn;var IP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(pn,e.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(fn,{present:n||a,children:i.jsx(gg,{"data-state":a?"visible":"hidden",...r,ref:t})})}),kP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(pn,e.__scopeScrollArea),a=e.orientation==="horizontal",o=wa(()=>c("SCROLL_END"),100),[l,c]=NP("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const d=s.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const f=d[u];h!==f&&(c("SCROLL"),o()),h=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(fn,{present:n||l!=="hidden",children:i.jsx(ac,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:me(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),gg=p.forwardRef((e,t)=>{const n=qt(pn,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=p.useState(!1),l=e.orientation==="horizontal",c=wa(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Jr(n.viewport,c),Jr(n.content,c),i.jsx(fn,{present:r||a,children:i.jsx(ac,{"data-state":a?"visible":"hidden",...s,ref:t})})}),ac=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=qt(pn,e.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=wg(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return DP(m,o.current,l,f)}return n==="horizontal"?i.jsx(AP,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,f=vd(m,l,s.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(TP,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,f=vd(m,l);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),AP=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qt(pn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=Je(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(yg,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ba(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),jg(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Fi(o.paddingLeft),paddingEnd:Fi(o.paddingRight)}})}})}),TP=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qt(pn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=Je(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(yg,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ba(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),jg(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Fi(o.paddingTop),paddingEnd:Fi(o.paddingBottom)}})}})}),[PP,xg]=mg(pn),yg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,f=qt(pn,n),[x,g]=p.useState(null),y=Je(t,A=>g(A)),S=p.useRef(null),v=p.useRef(""),b=f.viewport,w=r.content-r.viewport,k=wn(u),N=wn(c),P=wa(h,10);function D(A){if(S.current){const M=A.clientX-S.current.left,C=A.clientY-S.current.top;d({x:M,y:C})}}return p.useEffect(()=>{const A=M=>{const C=M.target;(x==null?void 0:x.contains(C))&&k(M,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,x,w,k]),p.useEffect(N,[r,N]),Jr(x,P),Jr(f.content,P),i.jsx(PP,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:wn(a),onThumbPointerUp:wn(o),onThumbPositionChange:N,onThumbPointerDown:wn(l),children:i.jsx(We.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:me(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),S.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),D(A))}),onPointerMove:me(e.onPointerMove,D),onPointerUp:me(e.onPointerUp,A=>{const M=A.target;M.hasPointerCapture(A.pointerId)&&M.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),S.current=null})})})}),Li="ScrollAreaThumb",vg=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=xg(Li,e.__scopeScrollArea);return i.jsx(fn,{present:n||s.hasThumb,children:i.jsx(_P,{ref:t,...r})})}),_P=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=qt(Li,n),o=xg(Li,n),{onThumbPositionChange:l}=o,c=Je(t,h=>o.onThumbChange(h)),d=p.useRef(),u=wa(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(u(),!d.current){const f=RP(h,l);d.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,u,l]),i.jsx(We.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),x=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:me(e.onPointerUp,o.onThumbPointerUp)})});vg.displayName=Li;var oc="ScrollAreaCorner",bg=p.forwardRef((e,t)=>{const n=qt(oc,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(MP,{...e,ref:t}):null});bg.displayName=oc;var MP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=qt(oc,n),[a,o]=p.useState(0),[l,c]=p.useState(0),d=!!(a&&l);return Jr(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),Jr(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),d?i.jsx(We.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fi(e){return e?parseInt(e,10):0}function wg(e,t){const n=e/t;return isNaN(n)?0:n}function ba(e){const t=wg(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function DP(e,t,n,r="ltr"){const s=ba(n),a=s/2,o=t||a,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return Sg([c,d],h)(e)}function vd(e,t,n="ltr"){const r=ba(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],d=tl(e,c);return Sg([0,o],[0,l])(d)}function Sg(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function jg(e,t){return e>0&&e<t}var RP=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function wa(e,t){const n=wn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Jr(e,t){const n=wn(t);Hx(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}function OP(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const s=p.Children.only(r);return p.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var Eg=hg,LP=pg,FP=bg;const Ng=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Eg,{ref:r,className:se("relative overflow-hidden",e),...n,children:[i.jsx(LP,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Cg,{}),i.jsx(FP,{})]}));Ng.displayName=Eg.displayName;const Cg=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(ic,{ref:r,orientation:t,className:se("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(vg,{className:"relative flex-1 rounded-full bg-border"})}));Cg.displayName=ic.displayName;var Ig=["PageUp","PageDown"],kg=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ag={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},is="Slider",[qo,$P,zP]=rm(is),[Tg,F2]=Zr(is,[zP]),[BP,Sa]=Tg(is),Pg=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:x,...g}=e,y=p.useRef(new Set),S=p.useRef(0),b=o==="horizontal"?VP:UP,[w=[],k]=qi({prop:u,defaultProp:d,onChange:C=>{var z;(z=[...y.current][S.current])==null||z.focus(),h(C)}}),N=p.useRef(w);function P(C){const T=YP(w,C);M(C,T)}function D(C){M(C,S.current)}function A(){const C=N.current[S.current];w[S.current]!==C&&m(w)}function M(C,T,{commit:z}={commit:!1}){const Y=JP(a),q=ZP(Math.round((C-r)/a)*a+r,Y),J=tl(q,[r,s]);k((ne=[])=>{const L=GP(ne,J,T);if(XP(L,c*a)){S.current=L.indexOf(J);const H=String(L)!==String(ne);return H&&z&&m(L),H?L:ne}else return ne})}return i.jsx(BP,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:S,thumbs:y.current,values:w,orientation:o,form:x,children:i.jsx(qo.Provider,{scope:e.__scopeSlider,children:i.jsx(qo.Slot,{scope:e.__scopeSlider,children:i.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:me(g.onPointerDown,()=>{l||(N.current=w)}),min:r,max:s,inverted:f,onSlideStart:l?void 0:P,onSlideMove:l?void 0:D,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&M(r,0,{commit:!0}),onEndKeyDown:()=>!l&&M(s,w.length-1,{commit:!0}),onStepKeyDown:({event:C,direction:T})=>{if(!l){const q=Ig.includes(C.key)||C.shiftKey&&kg.includes(C.key)?10:1,J=S.current,ne=w[J],L=a*q*T;M(ne+L,J,{commit:!0})}}})})})})});Pg.displayName=is;var[_g,Mg]=Tg(is,{startEdge:"left",endEdge:"right",size:"width",direction:1}),VP=p.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,m]=p.useState(null),f=Je(t,b=>m(b)),x=p.useRef(),g=Jo(s),y=g==="ltr",S=y&&!a||!y&&a;function v(b){const w=x.current||h.getBoundingClientRect(),k=[0,w.width],P=lc(k,S?[n,r]:[r,n]);return x.current=w,P(b-w.left)}return i.jsx(_g,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:i.jsx(Dg,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const w=v(b.clientX);o==null||o(w)},onSlideMove:b=>{const w=v(b.clientX);l==null||l(w)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:b=>{const k=Ag[S?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:k?-1:1})}})})}),UP=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=p.useRef(null),h=Je(t,u),m=p.useRef(),f=!s;function x(g){const y=m.current||u.current.getBoundingClientRect(),S=[0,y.height],b=lc(S,f?[r,n]:[n,r]);return m.current=y,b(g-y.top)}return i.jsx(_g,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:i.jsx(Dg,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=x(g.clientY);a==null||a(y)},onSlideMove:g=>{const y=x(g.clientY);o==null||o(y)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const S=Ag[f?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:S?-1:1})}})})}),Dg=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Sa(is,n);return i.jsx(We.span,{...d,ref:t,onKeyDown:me(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Ig.concat(kg).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:me(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():r(h)}),onPointerMove:me(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:me(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),Rg="SliderTrack",Og=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Sa(Rg,n);return i.jsx(We.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});Og.displayName=Rg;var Ho="SliderRange",Lg=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Sa(Ho,n),a=Mg(Ho,n),o=p.useRef(null),l=Je(t,o),c=s.values.length,d=s.values.map(m=>$g(m,s.min,s.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return i.jsx(We.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:h+"%"}})});Lg.displayName=Ho;var Go="SliderThumb",Fg=p.forwardRef((e,t)=>{const n=$P(e.__scopeSlider),[r,s]=p.useState(null),a=Je(t,l=>s(l)),o=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(qP,{...e,ref:a,index:o})}),qP=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,o=Sa(Go,n),l=Mg(Go,n),[c,d]=p.useState(null),u=Je(t,v=>d(v)),h=c?o.form||!!c.closest("form"):!0,m=Em(c),f=o.values[r],x=f===void 0?0:$g(f,o.min,o.max),g=WP(r,o.values.length),y=m==null?void 0:m[l.size],S=y?KP(y,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${S}px)`},children:[i.jsx(qo.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(We.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:me(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&i.jsx(HP,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},r)]})});Fg.displayName=Go;var HP=e=>{const{value:t,...n}=e,r=p.useRef(null),s=jm(t);return p.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[s,t]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function GP(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function $g(e,t,n){const a=100/(n-t)*(e-t);return tl(a,[0,100])}function WP(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function YP(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function KP(e,t,n){const r=e/2,a=lc([0,50],[0,r]);return(r-a(t)*n)*n}function QP(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function XP(e,t){if(t>0){const n=QP(e);return Math.min(...n)>=t}return!0}function lc(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function JP(e){return(String(e).split(".")[1]||"").length}function ZP(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var zg=Pg,e_=Og,t_=Lg,n_=Fg;const Bg=p.forwardRef(({className:e,...t},n)=>i.jsxs(zg,{ref:n,className:se("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(e_,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(t_,{className:"absolute h-full bg-primary"})}),i.jsx(n_,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Bg.displayName=zg.displayName;const so=Ye("LocationHistory");function r_(){var M;const e=xt(),t=In(),[n,r]=p.useState({}),s=p.useRef(null),[a,o]=p.useState(!1),[l,c]=p.useState(0),[d,u]=p.useState(0),[h,m]=p.useState(!1),f=(M=t.state)==null?void 0:M.selectedLocationId,x=f?lt.find(C=>C.id===f):null;let g=[];const y=new Set,S=[...lt].sort((C,T)=>C.history&&!T.history?-1:!C.history&&T.history?1:0);for(const C of S)(C.history||C.historyRef)&&(y.has(C.name)||(g.push(C),y.add(C.name)));(x!=null&&x.history||x!=null&&x.historyRef)&&!g.some(C=>C.id===f)&&g.push(x);const[v,b]=p.useState(()=>{var C,T,z;return f&&lt.find(Y=>Y.id===f)&&((C=lt.find(Y=>Y.id===f))!=null&&C.history||(T=lt.find(Y=>Y.id===f))!=null&&T.historyRef)?f:((z=g[0])==null?void 0:z.id)||null}),w=g.find(C=>C.id===v),k=()=>{s.current&&(a?(s.current.pause(),w!=null&&w.id&&V.trackAudio("pause",w.id)):(s.current.play(),w!=null&&w.id&&V.trackAudio("play",w.id)),o(!a))},N=()=>{s.current&&u(s.current.currentTime)},P=()=>{s.current&&(c(s.current.duration),m(!1))},D=C=>{s.current&&(s.current.currentTime=C[0],u(C[0]),w!=null&&w.id&&V.trackAudio("seek",w.id,C[0]))},A=C=>{const T=Math.floor(C/60),z=Math.floor(C%60);return`${T}:${z<10?"0":""}${z}`};return p.useEffect(()=>{V.trackPageView("/history","Histoire des lieux")},[]),p.useEffect(()=>{if(w!=null&&w.image){const C=ft(w.image);Yh(C)||(r(T=>({...T,[C]:!0})),tS(C).then(T=>{so.info(`Pr√©chargement de l'image ${T?"r√©ussi":"√©chou√©"}:`,{imagePath:C}),r(z=>({...z,[C]:!1}))}).catch(T=>{so.error("Erreur lors du pr√©chargement de l'image:",{imagePath:C,error:T}),r(z=>({...z,[C]:!1}))}))}w&&(V.trackBuildingView(w.id,w.name),V.trackBuildingHistoryView(w.id,"Histoire compl√®te"))},[w]),p.useEffect(()=>{s.current&&a&&(s.current.pause(),o(!1)),u(0),c(0),w!=null&&w.audio&&m(!0)},[v]),i.jsxs("div",{className:"container max-w-md mx-auto px-4 pb-20 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(X,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Histoire des lieux"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2 text-[#4a5d94]",children:"S√©lectionnez un lieu"}),i.jsxs(Ms,{value:v,onValueChange:C=>b(C),children:[i.jsx(Qr,{className:"w-full border-[#4a5d94] text-[#4a5d94]",children:i.jsx(Ds,{placeholder:"Choisir un lieu"})}),i.jsx(Xr,{children:g.map(C=>i.jsx(pr,{value:C.id,children:C.name},C.id))})]})]}),w?i.jsxs(je,{className:"shadow-md border-[#d8e3ff] mb-6",children:[i.jsx(Dt,{className:"pb-6",children:i.jsxs("div",{className:"flex flex-col mb-2",children:[i.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[i.jsx(Rt,{className:"text-xl font-bold text-[#4a5d94] mr-2",children:w.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xn,{entryId:`location-${w.id}`,variant:"icon",showCount:!0}),i.jsxs(X,{variant:"outline",size:"sm",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white whitespace-nowrap px-2 py-1 text-xs flex-shrink-0",onClick:()=>{e("/map",{state:{highlightLocationId:w.id,fromHistory:!0}}),V.trackMapInteraction(ee.LOCATION_VIEW,{building_id:w.id,from:"history_page"})},children:[i.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Voir sur la carte"]})]})]}),i.jsx(ec,{className:"text-sm text-slate-600 mt-2 mb-2",children:w.description})]})}),i.jsxs(Qe,{children:[w.image&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"w-full h-64 rounded-md shadow-md border border-[#d8e3ff] relative",style:{backgroundImage:`url(${ft(w.image)})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[n[ft(w.image)]&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:i.jsx(Yr,{className:"h-8 w-8 animate-spin text-[#4a5d94]"})}),i.jsx("img",{src:ft(w.image),alt:`Photo historique de ${w.name}`,className:"hidden",onError:C=>{so.error("Erreur de chargement de l'image:",{image:w.image,online:ks()}),V.trackError(ee.RESOURCE_ERROR,"history_image_load_failed",{image:w.image,building_id:w.id,online:ks()})}})]}),i.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["Photo de ",w.name]})]}),w.audio&&i.jsxs("div",{className:"mb-4 p-3 bg-[#f5f8ff] rounded-md border border-[#d8e3ff]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(nm,{className:"h-4 w-4 text-[#4a5d94] mr-2"}),i.jsx("span",{className:"text-sm font-medium text-[#4a5d94]",children:"√âcouter l'histoire"})]}),i.jsx(X,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:k,disabled:h,children:h?i.jsx(Yr,{className:"h-4 w-4 animate-spin text-[#4a5d94]"}):a?i.jsx(Gx,{className:"h-4 w-4 text-[#4a5d94]"}):i.jsx(Wx,{className:"h-4 w-4 text-[#4a5d94]"})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Bg,{value:[d],max:l||100,step:.1,onValueChange:D,disabled:h,className:"cursor-pointer"}),i.jsxs("div",{className:"flex justify-between text-xs text-[#4a5d94]",children:[i.jsx("span",{children:A(d)}),i.jsx("span",{children:A(l)})]})]}),i.jsx("audio",{ref:s,src:w.audio?window.location.hostname.includes("github.io")?`/1Hall1Artiste${w.audio}`:w.audio:"",onTimeUpdate:N,onLoadedMetadata:P,onEnded:()=>{o(!1),w!=null&&w.id&&V.trackAudio("pause",w.id)},onCanPlay:()=>m(!1),onError:C=>{console.error("Erreur de chargement audio:",C,w.audio),m(!1)},preload:"metadata",className:"hidden"})]}),i.jsx("h3",{className:"text-base font-bold text-[#4a5d94] mb-3 pb-1 border-b border-[#d8e3ff]",children:"Histoire compl√®te"}),i.jsx(Ng,{className:"h-[60vh] pr-4",children:i.jsx("div",{className:"space-y-4",children:(()=>{let C="";if(w.history)C=w.history;else if(w.historyRef){const T=lt.find(z=>z.id===w.historyRef);T!=null&&T.history&&(C=T.history)}return C.split(`

`).map((T,z)=>T.trim()&&i.jsx("div",{className:"mb-4",children:T.startsWith("#")?i.jsx("h4",{className:"text-lg font-bold text-[#4a5d94] mb-2",children:T.replace("#","").trim()}):i.jsx("p",{className:"text-[#4a5d94] leading-relaxed text-sm",children:T})},z))})()})})]})]}):i.jsxs("div",{className:"text-center py-10 border rounded-lg border-dashed border-gray-300 bg-gray-50",children:[i.jsx(es,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 mb-1",children:"S√©lectionnez un lieu"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Pour afficher son histoire compl√®te"})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 mx-auto max-w-md px-4 z-10 space-y-2",children:[w&&i.jsxs(X,{className:"w-full border-[#ff7a45] text-[#ff7a45] hover:bg-[#fff5f0] text-sm min-h-[44px]",variant:"outline",onClick:()=>{w&&(sE(w),e("/community?tab=contribute"),V.trackCommunityInteraction(ee.CONTRIBUTION,{source:"history_page",building_id:w.id}))},children:[i.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Partager un souvenir de ce lieu"]}),i.jsxs(X,{className:"w-full bg-[#ff7a45] hover:bg-[#ff9d6e] text-white text-sm min-h-[44px]",onClick:()=>{e("/map",{state:{highlightLocationId:v,fromHistory:!0,timestamp:new Date().getTime()}})},children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]})]}),i.jsx(Zn,{})]})}function s_(){const e=dg(),[t,n]=p.useState("overview"),[r,s]=p.useState(!1),[a,o]=p.useState(null);p.useEffect(()=>{e.trackFeatureUse("analytics_dashboard",{tab:t})},[t,e]),p.useEffect(()=>{(async()=>{s(!0);try{await new Promise(d=>setTimeout(d,1e3)),o({overview:{totalUsers:1245,activeUsers:328,sessionsToday:156,averageSessionDuration:"3m 42s",bounceRate:"24%"},events:[{name:"onboarding_onboarding_start",count:523,users:523},{name:"onboarding_onboarding_complete",count:412,users:412},{name:"onboarding_onboarding_skip",count:111,users:111},{name:"interaction_swipe",count:2456,users:387},{name:"navigation_page_view",count:5678,users:523},{name:"media_play",count:345,users:289},{name:"media_complete",count:198,users:198},{name:"feature_feature_use",count:1234,users:456}],topPages:[{path:"/map",views:1245,users:423},{path:"/program",views:987,users:356},{path:"/community",views:756,users:289},{path:"/about",views:543,users:234},{path:"/saved",views:432,users:198}],userRetention:{day1:"76%",day7:"45%",day30:"28%"}})}catch(d){console.error("Erreur lors du chargement des donn√©es analytics:",d)}finally{s(!1)}})()},[]);const l=()=>{if(!a)return;e.trackFeatureUse("analytics_export",{format:"json"});const c=JSON.stringify(a,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`analytics-export-${new Date().toISOString().split("T")[0]}.json`,h=document.createElement("a");h.setAttribute("href",d),h.setAttribute("download",u),h.click()};return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Statistiques d'utilisation"}),i.jsxs(X,{variant:"outline",onClick:l,disabled:r||!a,children:[i.jsx(Yx,{className:"mr-2 h-4 w-4"}),"Exporter"]})]}),i.jsxs(ss,{value:t,onValueChange:n,className:"w-full",children:[i.jsxs(Cr,{className:"grid grid-cols-4 mb-6",children:[i.jsx(Fe,{value:"overview",children:"Vue d'ensemble"}),i.jsx(Fe,{value:"events",children:"√âv√©nements"}),i.jsx(Fe,{value:"pages",children:"Pages"}),i.jsx(Fe,{value:"users",children:"Utilisateurs"})]}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx(Yr,{className:"h-8 w-8 animate-spin text-gray-500"})}):a?i.jsxs(i.Fragment,{children:[i.jsxs($e,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs totaux"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.totalUsers})]}),i.jsx(ps,{className:"h-8 w-8 text-blue-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs actifs"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.activeUsers})]}),i.jsx(yc,{className:"h-8 w-8 text-green-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Sessions aujourd'hui"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.sessionsToday})]}),i.jsx(Kx,{className:"h-8 w-8 text-purple-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Dur√©e moyenne de session"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.averageSessionDuration})]}),i.jsx(Qx,{className:"h-8 w-8 text-orange-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Taux de rebond"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.bounceRate})]}),i.jsx(yc,{className:"h-8 w-8 text-red-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"R√©tention J+30"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.userRetention.day30})]}),i.jsx(ps,{className:"h-8 w-8 text-indigo-500"})]})})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"R√©tention des utilisateurs"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 1"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day1})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 7"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day7})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 30"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day30})]})]})]})]}),i.jsx($e,{value:"events",className:"space-y-4",children:i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"√âv√©nements les plus fr√©quents"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"√âv√©nement"}),i.jsx("th",{className:"text-right py-2",children:"Nombre"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.events.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.name}),i.jsx("td",{className:"text-right py-2",children:c.count}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsx($e,{value:"pages",className:"space-y-4",children:i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Pages les plus visit√©es"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"Page"}),i.jsx("th",{className:"text-right py-2",children:"Vues"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.topPages.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.path}),i.jsx("td",{className:"text-right py-2",children:c.views}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsxs($e,{value:"users",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Nouveaux vs. R√©currents"}),i.jsx("div",{className:"flex justify-center items-center h-48",children:i.jsxs("div",{className:"flex items-center space-x-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"68%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Nouveaux"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"32%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"R√©currents"})]})]})})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Engagement"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Onboarding compl√©t√©"}),i.jsx("span",{className:"text-sm font-medium",children:"78%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"78%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Vid√©os visionn√©es"}),i.jsx("span",{className:"text-sm font-medium",children:"57%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"57%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Interactions carte"}),i.jsx("span",{className:"text-sm font-medium",children:"42%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"42%"}})})]})]})]})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Parcours utilisateur"}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 md:gap-4",children:[i.jsx("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:"Onboarding"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"Carte"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:"Programme"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm",children:"D√©tails √©v√©nement"})]})]})]})]}):i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"Impossible de charger les donn√©es d'analytics"})})]}),i.jsxs("div",{className:"mt-8 text-sm text-gray-500",children:[i.jsx("p",{children:"Note: Ces donn√©es sont simul√©es √† des fins de d√©monstration. Dans une impl√©mentation r√©elle, vous utiliseriez l'API Firebase Analytics pour r√©cup√©rer les donn√©es r√©elles."}),i.jsxs("p",{className:"mt-1",children:["Pour acc√©der aux donn√©es r√©elles, consultez la ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"console Firebase"}),"."]})]})]})}const i_=({children:e,className:t=""})=>i.jsx("div",{className:`container mx-auto px-4 py-6 max-w-screen-lg ${t}`,children:e}),a_=({title:e,subtitle:t,children:n})=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),t&&i.jsx("p",{className:"text-gray-600",children:t}),n]});var qs=e=>e.type==="checkbox",ur=e=>e instanceof Date,mt=e=>e==null;const Vg=e=>typeof e=="object";var Ge=e=>!mt(e)&&!Array.isArray(e)&&Vg(e)&&!ur(e),o_=e=>Ge(e)&&e.target?qs(e.target)?e.target.checked:e.target.value:e,l_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,c_=(e,t)=>e.has(l_(t)),u_=e=>{const t=e.constructor&&e.constructor.prototype;return Ge(t)&&t.hasOwnProperty("isPrototypeOf")},cc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tt(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(cc&&(e instanceof Blob||e instanceof FileList))&&(n||Ge(e)))if(t=n?[]:{},!n&&!u_(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Tt(e[r]));else return e;return t}var ja=e=>Array.isArray(e)?e.filter(Boolean):[],He=e=>e===void 0,re=(e,t,n)=>{if(!t||!Ge(e))return n;const r=ja(t.split(/[,[\].]+?/)).reduce((s,a)=>mt(s)?s:s[a],e);return He(r)||r===e?He(e[t])?n:e[t]:r},tn=e=>typeof e=="boolean",uc=e=>/^\w*$/.test(e),Ug=e=>ja(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Oe=(e,t,n)=>{let r=-1;const s=uc(t)?[t]:Ug(t),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const d=e[l];c=Ge(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__")return;e[l]=c,e=e[l]}return e};const bd={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Yt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},yn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},d_=$.createContext(null),m_=()=>$.useContext(d_);var h_=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Yt.all&&(t._proxyFormState[o]=!r||Yt.all),e[o]}});return s},bt=e=>Ge(e)&&!Object.keys(e).length,f_=(e,t,n,r)=>{n(e);const{name:s,...a}=e;return bt(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===Yt.all)},js=e=>Array.isArray(e)?e:[e],p_=(e,t,n)=>!e||!t||e===t||js(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function qg(e){const t=$.useRef(e);t.current=e,$.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var un=e=>typeof e=="string",Hg=(e,t,n,r,s)=>un(e)?(r&&t.watch.add(e),re(n,e,s)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),re(n,a))):(r&&(t.watchAll=!0),n);function g_(e){const t=m_(),{control:n=t.control,name:r,defaultValue:s,disabled:a,exact:o}=e||{},l=$.useRef(r);l.current=r,qg({disabled:a,subject:n._subjects.values,next:u=>{p_(l.current,u.name,o)&&d(Tt(Hg(l.current,n._names,u.values||n._formValues,!1,s)))}});const[c,d]=$.useState(n._getWatch(r,s));return $.useEffect(()=>n._removeUnmounted()),c}var x_=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},wd=e=>({isOnSubmit:!e||e===Yt.onSubmit,isOnBlur:e===Yt.onBlur,isOnChange:e===Yt.onChange,isOnAll:e===Yt.all,isOnTouch:e===Yt.onTouched}),Sd=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Es=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const a=re(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Es(l,t))break}else if(Ge(l)&&Es(l,t))break}}};var y_=(e,t,n)=>{const r=js(re(e,n));return Oe(r,"root",t[n]),Oe(e,n,r),e},dc=e=>e.type==="file",Sn=e=>typeof e=="function",$i=e=>{if(!cc)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},xi=e=>un(e),mc=e=>e.type==="radio",zi=e=>e instanceof RegExp;const jd={value:!1,isValid:!1},Ed={value:!0,isValid:!0};var Gg=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!He(e[0].attributes.value)?He(e[0].value)||e[0].value===""?Ed:{value:e[0].value,isValid:!0}:Ed:jd}return jd};const Nd={isValid:!1,value:null};var Wg=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Nd):Nd;function Cd(e,t,n="validate"){if(xi(e)||Array.isArray(e)&&e.every(xi)||tn(e)&&!e)return{type:n,message:xi(e)?e:"",ref:t}}var Pr=e=>Ge(e)&&!zi(e)?e:{value:e,message:""},Id=async(e,t,n,r,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:m,validate:f,name:x,valueAsNumber:g,mount:y,disabled:S}=e._f,v=re(t,x);if(!y||S)return{};const b=o?o[0]:a,w=T=>{r&&b.reportValidity&&(b.setCustomValidity(tn(T)?"":T||""),b.reportValidity())},k={},N=mc(a),P=qs(a),D=N||P,A=(g||dc(a))&&He(a.value)&&He(v)||$i(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,M=x_.bind(null,x,n,k),C=(T,z,Y,q=yn.maxLength,J=yn.minLength)=>{const ne=T?z:Y;k[x]={type:T?q:J,message:ne,ref:a,...M(T?q:J,ne)}};if(s?!Array.isArray(v)||!v.length:l&&(!D&&(A||mt(v))||tn(v)&&!v||P&&!Gg(o).isValid||N&&!Wg(o).isValid)){const{value:T,message:z}=xi(l)?{value:!!l,message:l}:Pr(l);if(T&&(k[x]={type:yn.required,message:z,ref:b,...M(yn.required,z)},!n))return w(z),k}if(!A&&(!mt(u)||!mt(h))){let T,z;const Y=Pr(h),q=Pr(u);if(!mt(v)&&!isNaN(v)){const J=a.valueAsNumber||v&&+v;mt(Y.value)||(T=J>Y.value),mt(q.value)||(z=J<q.value)}else{const J=a.valueAsDate||new Date(v),ne=j=>new Date(new Date().toDateString()+" "+j),L=a.type=="time",H=a.type=="week";un(Y.value)&&v&&(T=L?ne(v)>ne(Y.value):H?v>Y.value:J>new Date(Y.value)),un(q.value)&&v&&(z=L?ne(v)<ne(q.value):H?v<q.value:J<new Date(q.value))}if((T||z)&&(C(!!T,Y.message,q.message,yn.max,yn.min),!n))return w(k[x].message),k}if((c||d)&&!A&&(un(v)||s&&Array.isArray(v))){const T=Pr(c),z=Pr(d),Y=!mt(T.value)&&v.length>+T.value,q=!mt(z.value)&&v.length<+z.value;if((Y||q)&&(C(Y,T.message,z.message),!n))return w(k[x].message),k}if(m&&!A&&un(v)){const{value:T,message:z}=Pr(m);if(zi(T)&&!v.match(T)&&(k[x]={type:yn.pattern,message:z,ref:a,...M(yn.pattern,z)},!n))return w(z),k}if(f){if(Sn(f)){const T=await f(v,t),z=Cd(T,b);if(z&&(k[x]={...z,...M(yn.validate,z.message)},!n))return w(z.message),k}else if(Ge(f)){let T={};for(const z in f){if(!bt(T)&&!n)break;const Y=Cd(await f[z](v,t),b,z);Y&&(T={...Y,...M(z,Y.message)},w(Y.message),n&&(k[x]=T))}if(!bt(T)&&(k[x]={ref:b,...T},!n))return k}}return w(!0),k};function v_(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=He(e)?r++:e[t[r++]];return e}function b_(e){for(const t in e)if(e.hasOwnProperty(t)&&!He(e[t]))return!1;return!0}function Xe(e,t){const n=Array.isArray(t)?t:uc(t)?[t]:Ug(t),r=n.length===1?e:v_(e,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Ge(r)&&bt(r)||Array.isArray(r)&&b_(r))&&Xe(e,n.slice(0,-1)),e}var io=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}},Wo=e=>mt(e)||!Vg(e);function Fn(e,t){if(Wo(e)||Wo(t))return e===t;if(ur(e)&&ur(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n){const a=e[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=t[s];if(ur(a)&&ur(o)||Ge(a)&&Ge(o)||Array.isArray(a)&&Array.isArray(o)?!Fn(a,o):a!==o)return!1}}return!0}var Yg=e=>e.type==="select-multiple",w_=e=>mc(e)||qs(e),ao=e=>$i(e)&&e.isConnected,Kg=e=>{for(const t in e)if(Sn(e[t]))return!0;return!1};function Bi(e,t={}){const n=Array.isArray(e);if(Ge(e)||n)for(const r in e)Array.isArray(e[r])||Ge(e[r])&&!Kg(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Bi(e[r],t[r])):mt(e[r])||(t[r]=!0);return t}function Qg(e,t,n){const r=Array.isArray(e);if(Ge(e)||r)for(const s in e)Array.isArray(e[s])||Ge(e[s])&&!Kg(e[s])?He(t)||Wo(n[s])?n[s]=Array.isArray(e[s])?Bi(e[s],[]):{...Bi(e[s])}:Qg(e[s],mt(t)?{}:t[s],n[s]):n[s]=!Fn(e[s],t[s]);return n}var ms=(e,t)=>Qg(e,t,Bi(t)),Xg=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>He(e)?e:t?e===""?NaN:e&&+e:n&&un(e)?new Date(e):r?r(e):e;function oo(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return dc(t)?t.files:mc(t)?Wg(e.refs).value:Yg(t)?[...t.selectedOptions].map(({value:n})=>n):qs(t)?Gg(e.refs).value:Xg(He(t.value)?e.ref.value:t.value,e)}var S_=(e,t,n,r)=>{const s={};for(const a of e){const o=re(t,a);o&&Oe(s,a,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},hs=e=>He(e)?e:zi(e)?e.source:Ge(e)?zi(e.value)?e.value.source:e.value:e;const kd="AsyncFunction";var j_=e=>(!e||!e.validate)&&!!(Sn(e.validate)&&e.validate.constructor.name===kd||Ge(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===kd)),E_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Ad(e,t,n){const r=re(e,n);if(r||uc(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=re(t,a),l=re(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var N_=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,C_=(e,t)=>!ja(re(e,t)).length&&Xe(e,t);const I_={mode:Yt.onSubmit,reValidateMode:Yt.onChange,shouldFocusError:!0};function k_(e={}){let t={...I_,...e},n={submitCount:0,isDirty:!1,isLoading:Sn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Ge(t.defaultValues)||Ge(t.values)?Tt(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Tt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:io(),array:io(),state:io()},m=wd(t.mode),f=wd(t.reValidateMode),x=t.criteriaMode===Yt.all,g=I=>_=>{clearTimeout(d),d=setTimeout(I,_)},y=async I=>{if(!e.disabled&&(u.isValid||I)){const _=t.resolver?bt((await D()).errors):await M(r,!0);_!==n.isValid&&h.state.next({isValid:_})}},S=(I,_)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((I||Array.from(l.mount)).forEach(O=>{O&&(_?Oe(n.validatingFields,O,_):Xe(n.validatingFields,O))}),h.state.next({validatingFields:n.validatingFields,isValidating:!bt(n.validatingFields)}))},v=(I,_=[],O,Z,Q=!0,G=!0)=>{if(Z&&O&&!e.disabled){if(o.action=!0,G&&Array.isArray(re(r,I))){const ae=O(re(r,I),Z.argA,Z.argB);Q&&Oe(r,I,ae)}if(G&&Array.isArray(re(n.errors,I))){const ae=O(re(n.errors,I),Z.argA,Z.argB);Q&&Oe(n.errors,I,ae),C_(n.errors,I)}if(u.touchedFields&&G&&Array.isArray(re(n.touchedFields,I))){const ae=O(re(n.touchedFields,I),Z.argA,Z.argB);Q&&Oe(n.touchedFields,I,ae)}u.dirtyFields&&(n.dirtyFields=ms(s,a)),h.state.next({name:I,isDirty:T(I,_),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Oe(a,I,_)},b=(I,_)=>{Oe(n.errors,I,_),h.state.next({errors:n.errors})},w=I=>{n.errors=I,h.state.next({errors:n.errors,isValid:!1})},k=(I,_,O,Z)=>{const Q=re(r,I);if(Q){const G=re(a,I,He(O)?re(s,I):O);He(G)||Z&&Z.defaultChecked||_?Oe(a,I,_?G:oo(Q._f)):q(I,G),o.mount&&y()}},N=(I,_,O,Z,Q)=>{let G=!1,ae=!1;const pe={name:I};if(!e.disabled){const R=!!(re(r,I)&&re(r,I)._f&&re(r,I)._f.disabled);if(!O||Z){u.isDirty&&(ae=n.isDirty,n.isDirty=pe.isDirty=T(),G=ae!==pe.isDirty);const U=R||Fn(re(s,I),_);ae=!!(!R&&re(n.dirtyFields,I)),U||R?Xe(n.dirtyFields,I):Oe(n.dirtyFields,I,!0),pe.dirtyFields=n.dirtyFields,G=G||u.dirtyFields&&ae!==!U}if(O){const U=re(n.touchedFields,I);U||(Oe(n.touchedFields,I,O),pe.touchedFields=n.touchedFields,G=G||u.touchedFields&&U!==O)}G&&Q&&h.state.next(pe)}return G?pe:{}},P=(I,_,O,Z)=>{const Q=re(n.errors,I),G=u.isValid&&tn(_)&&n.isValid!==_;if(e.delayError&&O?(c=g(()=>b(I,O)),c(e.delayError)):(clearTimeout(d),c=null,O?Oe(n.errors,I,O):Xe(n.errors,I)),(O?!Fn(Q,O):Q)||!bt(Z)||G){const ae={...Z,...G&&tn(_)?{isValid:_}:{},errors:n.errors,name:I};n={...n,...ae},h.state.next(ae)}},D=async I=>{S(I,!0);const _=await t.resolver(a,t.context,S_(I||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S(I),_},A=async I=>{const{errors:_}=await D(I);if(I)for(const O of I){const Z=re(_,O);Z?Oe(n.errors,O,Z):Xe(n.errors,O)}else n.errors=_;return _},M=async(I,_,O={valid:!0})=>{for(const Z in I){const Q=I[Z];if(Q){const{_f:G,...ae}=Q;if(G){const pe=l.array.has(G.name),R=Q._f&&j_(Q._f);R&&u.validatingFields&&S([Z],!0);const U=await Id(Q,a,x,t.shouldUseNativeValidation&&!_,pe);if(R&&u.validatingFields&&S([Z]),U[G.name]&&(O.valid=!1,_))break;!_&&(re(U,G.name)?pe?y_(n.errors,U,G.name):Oe(n.errors,G.name,U[G.name]):Xe(n.errors,G.name))}!bt(ae)&&await M(ae,_,O)}}return O.valid},C=()=>{for(const I of l.unMount){const _=re(r,I);_&&(_._f.refs?_._f.refs.every(O=>!ao(O)):!ao(_._f.ref))&&F(I)}l.unMount=new Set},T=(I,_)=>!e.disabled&&(I&&_&&Oe(a,I,_),!Fn(K(),s)),z=(I,_,O)=>Hg(I,l,{...o.mount?a:He(_)?s:un(I)?{[I]:_}:_},O,_),Y=I=>ja(re(o.mount?a:s,I,e.shouldUnregister?re(s,I,[]):[])),q=(I,_,O={})=>{const Z=re(r,I);let Q=_;if(Z){const G=Z._f;G&&(!G.disabled&&Oe(a,I,Xg(_,G)),Q=$i(G.ref)&&mt(_)?"":_,Yg(G.ref)?[...G.ref.options].forEach(ae=>ae.selected=Q.includes(ae.value)):G.refs?qs(G.ref)?G.refs.length>1?G.refs.forEach(ae=>(!ae.defaultChecked||!ae.disabled)&&(ae.checked=Array.isArray(Q)?!!Q.find(pe=>pe===ae.value):Q===ae.value)):G.refs[0]&&(G.refs[0].checked=!!Q):G.refs.forEach(ae=>ae.checked=ae.value===Q):dc(G.ref)?G.ref.value="":(G.ref.value=Q,G.ref.type||h.values.next({name:I,values:{...a}})))}(O.shouldDirty||O.shouldTouch)&&N(I,Q,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&j(I)},J=(I,_,O)=>{for(const Z in _){const Q=_[Z],G=`${I}.${Z}`,ae=re(r,G);(l.array.has(I)||Ge(Q)||ae&&!ae._f)&&!ur(Q)?J(G,Q,O):q(G,Q,O)}},ne=(I,_,O={})=>{const Z=re(r,I),Q=l.array.has(I),G=Tt(_);Oe(a,I,G),Q?(h.array.next({name:I,values:{...a}}),(u.isDirty||u.dirtyFields)&&O.shouldDirty&&h.state.next({name:I,dirtyFields:ms(s,a),isDirty:T(I,G)})):Z&&!Z._f&&!mt(G)?J(I,G,O):q(I,G,O),Sd(I,l)&&h.state.next({...n}),h.values.next({name:o.mount?I:void 0,values:{...a}})},L=async I=>{o.mount=!0;const _=I.target;let O=_.name,Z=!0;const Q=re(r,O),G=()=>_.type?oo(Q._f):o_(I),ae=pe=>{Z=Number.isNaN(pe)||ur(pe)&&isNaN(pe.getTime())||Fn(pe,re(a,O,pe))};if(Q){let pe,R;const U=G(),oe=I.type===bd.BLUR||I.type===bd.FOCUS_OUT,fe=!E_(Q._f)&&!t.resolver&&!re(n.errors,O)&&!Q._f.deps||N_(oe,re(n.touchedFields,O),n.isSubmitted,f,m),we=Sd(O,l,oe);Oe(a,O,U),oe?(Q._f.onBlur&&Q._f.onBlur(I),c&&c(0)):Q._f.onChange&&Q._f.onChange(I);const nt=N(O,U,oe,!1),$t=!bt(nt)||we;if(!oe&&h.values.next({name:O,type:I.type,values:{...a}}),fe)return u.isValid&&(e.mode==="onBlur"?oe&&y():y()),$t&&h.state.next({name:O,...we?{}:nt});if(!oe&&we&&h.state.next({...n}),t.resolver){const{errors:ut}=await D([O]);if(ae(U),Z){const gn=Ad(n.errors,r,O),zt=Ad(ut,r,gn.name||O);pe=zt.error,O=zt.name,R=bt(ut)}}else S([O],!0),pe=(await Id(Q,a,x,t.shouldUseNativeValidation))[O],S([O]),ae(U),Z&&(pe?R=!1:u.isValid&&(R=await M(r,!0)));Z&&(Q._f.deps&&j(Q._f.deps),P(O,R,pe,nt))}},H=(I,_)=>{if(re(n.errors,_)&&I.focus)return I.focus(),1},j=async(I,_={})=>{let O,Z;const Q=js(I);if(t.resolver){const G=await A(He(I)?I:Q);O=bt(G),Z=I?!Q.some(ae=>re(G,ae)):O}else I?(Z=(await Promise.all(Q.map(async G=>{const ae=re(r,G);return await M(ae&&ae._f?{[G]:ae}:ae)}))).every(Boolean),!(!Z&&!n.isValid)&&y()):Z=O=await M(r);return h.state.next({...!un(I)||u.isValid&&O!==n.isValid?{}:{name:I},...t.resolver||!I?{isValid:O}:{},errors:n.errors}),_.shouldFocus&&!Z&&Es(r,H,I?Q:l.mount),Z},K=I=>{const _={...o.mount?a:s};return He(I)?_:un(I)?re(_,I):I.map(O=>re(_,O))},ie=(I,_)=>({invalid:!!re((_||n).errors,I),isDirty:!!re((_||n).dirtyFields,I),error:re((_||n).errors,I),isValidating:!!re(n.validatingFields,I),isTouched:!!re((_||n).touchedFields,I)}),E=I=>{I&&js(I).forEach(_=>Xe(n.errors,_)),h.state.next({errors:I?n.errors:{}})},le=(I,_,O)=>{const Z=(re(r,I,{_f:{}})._f||{}).ref,Q=re(n.errors,I)||{},{ref:G,message:ae,type:pe,...R}=Q;Oe(n.errors,I,{...R,..._,ref:Z}),h.state.next({name:I,errors:n.errors,isValid:!1}),O&&O.shouldFocus&&Z&&Z.focus&&Z.focus()},Ae=(I,_)=>Sn(I)?h.values.subscribe({next:O=>I(z(void 0,_),O)}):z(I,_,!0),F=(I,_={})=>{for(const O of I?js(I):l.mount)l.mount.delete(O),l.array.delete(O),_.keepValue||(Xe(r,O),Xe(a,O)),!_.keepError&&Xe(n.errors,O),!_.keepDirty&&Xe(n.dirtyFields,O),!_.keepTouched&&Xe(n.touchedFields,O),!_.keepIsValidating&&Xe(n.validatingFields,O),!t.shouldUnregister&&!_.keepDefaultValue&&Xe(s,O);h.values.next({values:{...a}}),h.state.next({...n,..._.keepDirty?{isDirty:T()}:{}}),!_.keepIsValid&&y()},te=({disabled:I,name:_,field:O,fields:Z,value:Q})=>{if(tn(I)&&o.mount||I){const G=I?void 0:He(Q)?oo(O?O._f:re(Z,_)._f):Q;Oe(a,_,G),N(_,G,!1,!1,!0)}},ce=(I,_={})=>{let O=re(r,I);const Z=tn(_.disabled)||tn(e.disabled);return Oe(r,I,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:I}},name:I,mount:!0,..._}}),l.mount.add(I),O?te({field:O,disabled:tn(_.disabled)?_.disabled:e.disabled,name:I,value:_.value}):k(I,!0,_.value),{...Z?{disabled:_.disabled||e.disabled}:{},...t.progressive?{required:!!_.required,min:hs(_.min),max:hs(_.max),minLength:hs(_.minLength),maxLength:hs(_.maxLength),pattern:hs(_.pattern)}:{},name:I,onChange:L,onBlur:L,ref:Q=>{if(Q){ce(I,_),O=re(r,I);const G=He(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,ae=w_(G),pe=O._f.refs||[];if(ae?pe.find(R=>R===G):G===O._f.ref)return;Oe(r,I,{_f:{...O._f,...ae?{refs:[...pe.filter(ao),G,...Array.isArray(re(s,I))?[{}]:[]],ref:{type:G.type,name:I}}:{ref:G}}}),k(I,!1,void 0,G)}else O=re(r,I,{}),O._f&&(O._f.mount=!1),(t.shouldUnregister||_.shouldUnregister)&&!(c_(l.array,I)&&o.action)&&l.unMount.add(I)}}},he=()=>t.shouldFocusError&&Es(r,H,l.mount),ze=I=>{tn(I)&&(h.state.next({disabled:I}),Es(r,(_,O)=>{const Z=re(r,O);Z&&(_.disabled=Z._f.disabled||I,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(Q=>{Q.disabled=Z._f.disabled||I}))},0,!1))},Et=(I,_)=>async O=>{let Z;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let Q=Tt(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:G,values:ae}=await D();n.errors=G,Q=ae}else await M(r);if(Xe(n.errors,"root"),bt(n.errors)){h.state.next({errors:{}});try{await I(Q,O)}catch(G){Z=G}}else _&&await _({...n.errors},O),he(),setTimeout(he);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bt(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},Nt=(I,_={})=>{re(r,I)&&(He(_.defaultValue)?ne(I,Tt(re(s,I))):(ne(I,_.defaultValue),Oe(s,I,Tt(_.defaultValue))),_.keepTouched||Xe(n.touchedFields,I),_.keepDirty||(Xe(n.dirtyFields,I),n.isDirty=_.defaultValue?T(I,Tt(re(s,I))):T()),_.keepError||(Xe(n.errors,I),u.isValid&&y()),h.state.next({...n}))},Ft=(I,_={})=>{const O=I?Tt(I):s,Z=Tt(O),Q=bt(I),G=Q?s:Z;if(_.keepDefaultValues||(s=O),!_.keepValues){if(_.keepDirtyValues){const ae=new Set([...l.mount,...Object.keys(ms(s,a))]);for(const pe of Array.from(ae))re(n.dirtyFields,pe)?Oe(G,pe,re(a,pe)):ne(pe,re(G,pe))}else{if(cc&&He(I))for(const ae of l.mount){const pe=re(r,ae);if(pe&&pe._f){const R=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if($i(R)){const U=R.closest("form");if(U){U.reset();break}}}}r={}}a=e.shouldUnregister?_.keepDefaultValues?Tt(s):{}:Tt(G),h.array.next({values:{...G}}),h.values.next({values:{...G}})}l={mount:_.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!_.keepIsValid||!!_.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:_.keepSubmitCount?n.submitCount:0,isDirty:Q?!1:_.keepDirty?n.isDirty:!!(_.keepDefaultValues&&!Fn(I,s)),isSubmitted:_.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Q?{}:_.keepDirtyValues?_.keepDefaultValues&&a?ms(s,a):n.dirtyFields:_.keepDefaultValues&&I?ms(s,I):_.keepDirty?n.dirtyFields:{},touchedFields:_.keepTouched?n.touchedFields:{},errors:_.keepErrors?n.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ze=(I,_)=>Ft(Sn(I)?I(a):I,_);return{control:{register:ce,unregister:F,getFieldState:ie,handleSubmit:Et,setError:le,_executeSchema:D,_getWatch:z,_getDirty:T,_updateValid:y,_removeUnmounted:C,_updateFieldArray:v,_updateDisabledField:te,_getFieldArray:Y,_reset:Ft,_resetDefaultValues:()=>Sn(t.defaultValues)&&t.defaultValues().then(I=>{Ze(I,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:I=>{n={...n,...I}},_disableForm:ze,_subjects:h,_proxyFormState:u,_setErrors:w,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(I){o=I},get _defaultValues(){return s},get _names(){return l},set _names(I){l=I},get _formState(){return n},set _formState(I){n=I},get _options(){return t},set _options(I){t={...t,...I}}},trigger:j,register:ce,handleSubmit:Et,watch:Ae,setValue:ne,getValues:K,reset:Ze,resetField:Nt,clearErrors:E,unregister:F,setError:le,setFocus:(I,_={})=>{const O=re(r,I),Z=O&&O._f;if(Z){const Q=Z.refs?Z.refs[0]:Z.ref;Q.focus&&(Q.focus(),_.shouldSelect&&Q.select())}},getFieldState:ie}}function A_(e={}){const t=$.useRef(),n=$.useRef(),[r,s]=$.useState({isDirty:!1,isValidating:!1,isLoading:Sn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Sn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...k_(e),formState:r});const a=t.current.control;return a._options=e,qg({subject:a._subjects.state,next:o=>{f_(o,a._proxyFormState,a._updateFormState)&&s({...a._formState})}}),$.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),$.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),$.useEffect(()=>{e.values&&!Fn(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,s(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),$.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),$.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),$.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),$.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[r]),t.current.formState=h_(r,a),t.current}const T_=Ji("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Yo=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:se(T_({variant:t}),e),...n}));Yo.displayName="Alert";const P_=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:se("mb-1 font-medium leading-none tracking-tight",e),...t}));P_.displayName="AlertTitle";const Ko=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("text-sm [&_p]:leading-relaxed",e),...t}));Ko.displayName="AlertDescription";function __(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:f,...x}=h,g=(m==null?void 0:m[e][c])||l,y=p.useMemo(()=>x,Object.values(x));return i.jsx(g.Provider,{value:y,children:f})}function u(h,m){const f=(m==null?void 0:m[e][c])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const s=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,M_(s,...t)]}function M_(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var hc="Progress",fc=100,[D_,$2]=__(hc),[R_,O_]=D_(hc),Jg=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=L_,...o}=e;(s||s===0)&&!Td(s)&&console.error(F_(`${s}`,"Progress"));const l=Td(s)?s:fc;r!==null&&!Pd(r,l)&&console.error($_(`${r}`,"Progress"));const c=Pd(r,l)?r:null,d=Vi(c)?a(c,l):void 0;return i.jsx(R_,{scope:n,value:c,max:l,children:i.jsx(We.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Vi(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":tx(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});Jg.displayName=hc;var Zg="ProgressIndicator",ex=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=O_(Zg,n);return i.jsx(We.div,{"data-state":tx(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});ex.displayName=Zg;function L_(e,t){return`${Math.round(e/t*100)}%`}function tx(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Vi(e){return typeof e=="number"}function Td(e){return Vi(e)&&!isNaN(e)&&e>0}function Pd(e,t){return Vi(e)&&!isNaN(e)&&e<=t&&e>=0}function F_(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fc}\`.`}function $_(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fc} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nx=Jg,z_=ex;const rx=p.forwardRef(({className:e,value:t,...n},r)=>i.jsx(nx,{ref:r,className:se("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(z_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));rx.displayName=nx.displayName;const B_=async(e,t={})=>{const{maxWidth:n=1920,maxHeight:r=1080,quality:s=.8,format:a="jpeg",maxSizeKB:o=2048}=t;return new Promise((l,c)=>{const d=new Image,u=document.createElement("canvas"),h=u.getContext("2d");if(!h){c(new Error("Impossible de cr√©er le contexte Canvas"));return}d.onload=()=>{const{width:m,height:f}=V_(d.width,d.height,n,r);u.width=m,u.height=f,h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(d,0,0,m,f);const x=`image/${a}`;u.toBlob(async g=>{if(!g){c(new Error("√âchec de la compression"));return}let y=g;g.size>o*1024&&a!=="png"&&(y=await U_(u,x,o*1024,s));const v={file:new File([y],`compressed_${e.name.replace(/\.[^/.]+$/,"")}.${a}`,{type:x}),originalSize:e.size,compressedSize:y.size,compressionRatio:Math.round((1-y.size/e.size)*100),width:m,height:f};l(v)},x,s)},d.onerror=()=>{c(new Error("Impossible de charger l'image"))},d.src=URL.createObjectURL(e)})},V_=(e,t,n,r)=>{let{width:s,height:a}={width:e,height:t};if(s<=n&&a<=r)return{width:s,height:a};const o=n/s,l=r/a,c=Math.min(o,l);return{width:Math.round(s*c),height:Math.round(a*c)}},U_=async(e,t,n,r)=>{let s=r,a=null;for(;s>.1&&(a=await new Promise(o=>{e.toBlob(o,t,s)}),!(a&&a.size<=n));)s-=.1;return a||new Blob},q_=e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>50*1024*1024?{valid:!1,error:"Fichier trop volumineux. Maximum 50MB."}:{valid:!0}:{valid:!1,error:"Format non support√©. Utilisez JPG, PNG ou WebP."},lo=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,r)).toFixed(1))} ${n[r]}`};function H_(e,t){let n;const r=(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)};return r.cancel=()=>{clearTimeout(n)},r}const G_=({key:e,data:t,delay:n=1e3,enabled:r=!0})=>{const s=p.useRef(null),a=c=>{try{const d=JSON.stringify({data:c,timestamp:Date.now(),version:"1.0"});localStorage.setItem(`draft_${e}`,d),console.log(`[AutoSave] Brouillon sauvegard√©: ${e}`)}catch(d){console.error(`[AutoSave] Erreur sauvegarde ${e}:`,d)}},o=()=>{try{const c=localStorage.getItem(`draft_${e}`);if(!c)return null;const d=JSON.parse(c),u=24*60*60*1e3;return Date.now()-d.timestamp>u?(localStorage.removeItem(`draft_${e}`),null):(console.log(`[AutoSave] Brouillon r√©cup√©r√©: ${e}`),d.data)}catch(c){return console.error(`[AutoSave] Erreur r√©cup√©ration ${e}:`,c),null}},l=()=>{try{localStorage.removeItem(`draft_${e}`),console.log(`[AutoSave] Brouillon supprim√©: ${e}`)}catch(c){console.error(`[AutoSave] Erreur suppression ${e}:`,c)}};return p.useEffect(()=>(s.current=H_(a,n),()=>{s.current&&s.current.cancel()}),[n]),p.useEffect(()=>{var d;!r||!t||typeof t=="object"&&Object.keys(t).length===0||(d=s.current)==null||d.call(s,t)},[t,r]),{loadDraft:o,clearDraft:l,hasDraft:()=>{try{return localStorage.getItem(`draft_${e}`)!==null}catch{return!1}}}},W_=({onSubmit:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState(!1),[a,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(""),[h,m]=p.useState(""),[f,x]=p.useState(!1),[g,y]=p.useState(0),[S,v]=p.useState(null),[b,w]=p.useState(!1),k=p.useRef(null),{register:N,handleSubmit:P,reset:D,setValue:A,formState:{errors:M},control:C}=A_(),T=g_({control:C}),{loadDraft:z,clearDraft:Y,hasDraft:q}=G_({key:"contribution_form",data:{...T,selectedEventId:d,selectedLocationId:h,imagePreview:a?"has_image":null},delay:2e3,enabled:!r});p.useEffect(()=>{z()&&q()&&w(!0)},[z,q]),p.useEffect(()=>{const L=op();L&&(c(L),console.log("[ContributionForm] Contexte re√ßu:",L),L.type==="event"?(A("eventId",L.id),u(L.id),console.log("[ContributionForm] Contexte √©v√©nement d√©fini:",L.id),console.log("[ContributionForm] Liste des √©v√©nements disponibles:",Lt.map(H=>H.id)),console.log("[ContributionForm] L'ID de l'√©v√©nement est-il dans la liste ?",Lt.some(H=>H.id===L.id)),L.locationId&&(A("locationId",L.locationId),m(L.locationId),console.log("[ContributionForm] Lieu associ√© √† l'√©v√©nement pr√©-rempli:",L.locationId),console.log("[ContributionForm] Le lieu associ√© est-il dans la liste ?",lt.some(H=>H.id===L.locationId)))):L.type==="location"&&(A("locationId",L.id),m(L.id),console.log("[ContributionForm] Contexte lieu d√©fini:",L.id),console.log("[ContributionForm] Liste des lieux disponibles:",lt.map(j=>j.id)),console.log("[ContributionForm] L'ID du lieu est-il dans la liste ?",lt.some(j=>j.id===L.id)),lt.some(j=>j.id===L.id)||console.warn("[ContributionForm] ATTENTION: L'ID du lieu dans le contexte ne correspond √† aucun lieu disponible dans la liste d√©roulante"))),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"open_form"})},[A]);const J=async L=>{var H,j;console.log("üî• [handleImageChange] FONCTION APPEL√âE !",(H=L.target.files)==null?void 0:H.length,"fichier(s)");try{const K=(j=L.target.files)==null?void 0:j[0];if(!K)return;const ie=q_(K);if(!ie.valid){alert(ie.error);return}console.log("[ContributionForm] D√©but compression:",K.name,lo(K.size)),x(!0),y(0);const E=setInterval(()=>{y(le=>Math.min(le+10,90))},100);try{const le=await B_(K,{maxWidth:1920,maxHeight:1080,quality:.8,format:"jpeg",maxSizeKB:1024});clearInterval(E),y(100),v(le),console.log("[ContributionForm] Compression termin√©e:",{original:lo(le.originalSize),compressed:lo(le.compressedSize),ratio:le.compressionRatio+"%",dimensions:`${le.width}x${le.height}`});const Ae=new FileReader;Ae.onload=ce=>{ce.target&&ce.target.result&&o(ce.target.result)},Ae.readAsDataURL(le.file);const F=new FormData;F.append("file",le.file),F.append("upload_preset","collectif_photos"),F.append("cloud_name","dpatqkgsc"),console.log("[ContributionForm] Requ√™te Cloudinary avec image compress√©e:",{url:"https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",preset:"collectif_photos",fileSize:le.compressedSize,fileType:le.file.type});const te=await fetch("https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",{method:"POST",body:F});if(console.log("[ContributionForm] Cloudinary response status:",te.status,te.statusText),te.ok){const ce=await te.json();console.log("[ContributionForm] Cloudinary response data:",ce),A("imageUrl",ce.secure_url),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"image_uploaded",compression_ratio:le.compressionRatio,original_size:le.originalSize,compressed_size:le.compressedSize})}else{const ce=await te.text();throw console.error("[ContributionForm] Erreur Cloudinary:",ce),new Error(`Erreur Cloudinary: ${te.status}`)}}catch(le){clearInterval(E),console.error("[ContributionForm] Erreur de compression:",le),alert("Erreur lors de la compression de l'image. Veuillez r√©essayer.")}}catch(K){console.error("[ContributionForm] Erreur g√©n√©rale:",K),alert("Erreur lors du traitement de l'image. Veuillez r√©essayer.")}finally{x(!1),y(0)}},ne=async L=>{var H,j;console.log("[ContributionForm] === D√âBUT DE SOUMISSION ==="),console.log("[ContributionForm] Donn√©es re√ßues du formulaire:",L);try{n(!0),console.log("[ContributionForm] √âtat de soumission activ√©"),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"submit_start"});const K=L.imageUrl||((j=(H=k.current)==null?void 0:H.files)==null?void 0:j[0]),ie=K?"photo":"testimonial";console.log("[ContributionForm] Type d√©termin√© automatiquement:",ie,K?"(avec image)":"(sans image)"),L.type=ie,L.imageUrl?console.log("[ContributionForm] URL Cloudinary disponible:",L.imageUrl):console.log("[ContributionForm] Aucune URL Cloudinary disponible"),console.log("[ContributionForm] Contexte avant enrichissement:",l),L=aE(L),console.log("[ContributionForm] Donn√©es apr√®s enrichissement avec contexte:",L),console.log("[ContributionForm] Appel du service de soumission...");const E=await RA(L);console.log("[ContributionForm] Contribution soumise avec succ√®s:",E),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"success",entry_id:E.id,type:E.type}),wt({title:"Contribution ajout√©e",description:"Votre contribution est maintenant visible."}),s(!0),setTimeout(()=>{console.log("[ContributionForm] R√©initialisation du formulaire..."),D(),o(null),iE(),c(null),u(""),m(""),s(!1),console.log("[ContributionForm] Formulaire r√©initialis√©")},5e3),console.log("[ContributionForm] Notification du composant parent..."),e(E),console.log("[ContributionForm] === SOUMISSION TERMIN√âE AVEC SUCC√àS ===")}catch(K){console.error("[ContributionForm] === ERREUR LORS DE LA SOUMISSION ==="),console.error("[ContributionForm] Erreur d√©taill√©e:",K),console.error("[ContributionForm] Stack trace:",K instanceof Error?K.stack:"N/A"),alert("Une erreur est survenue lors de l'envoi de votre contribution. Veuillez r√©essayer."),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"failure"})}finally{n(!1),console.log("[ContributionForm] √âtat de soumission d√©sactiv√©")}};return i.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6 pb-20",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Partagez votre exp√©rience"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Contribuez √† la m√©moire collective de l'√Æle Feydeau en partageant vos photos et t√©moignages."}),r&&i.jsxs(Yo,{className:"mt-4 bg-blue-50 border-blue-300 border-2",children:[i.jsx(uo,{className:"h-5 w-5 text-blue-600"}),i.jsxs(Ko,{className:"space-y-3",children:[i.jsx("div",{className:"font-bold text-blue-900 text-lg",children:"üì§ Contribution envoy√©e !"}),i.jsxs("div",{className:"bg-blue-100 p-3 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[i.jsx(uo,{className:"h-4 w-4"}),i.jsx("span",{children:"‚è±Ô∏è Votre photo sera visible dans 1-2 minutes"})]}),i.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Le temps que notre syst√®me traite automatiquement votre contribution"})]}),i.jsx("div",{className:"text-sm text-blue-600",children:"‚ú® Merci de contribuer √† la m√©moire collective de l'√Æle Feydeau !"})]})]}),l&&!r&&i.jsxs(Yo,{className:"mt-4 bg-blue-50 border-blue-200",children:[i.jsx(es,{className:"h-4 w-4 text-blue-500"}),i.jsxs(Ko,{children:["Votre contribution sera associ√©e √† ",l.type==="event"?"l'√©v√©nement":"l'emplacement"," ",i.jsx("strong",{children:l.name})]})]})]}),!r&&i.jsxs("form",{onSubmit:P(ne),className:"space-y-6",autoComplete:"off","data-form-type":"contribution",noValidate:!0,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"image",children:"Photo"}),i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>{var L;return(L=k.current)==null?void 0:L.click()},children:[a?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:a,alt:"Aper√ßu",className:"max-h-64 mx-auto rounded"}),i.jsx(X,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:L=>{L.stopPropagation(),o(null),k.current&&(k.current.value="")},children:"Changer l'image"})]}):i.jsxs("div",{className:"py-8 flex flex-col items-center gap-2",children:[i.jsx(Xx,{className:"h-8 w-8 text-slate-400"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Cliquez pour s√©lectionner une image ou glissez-d√©posez"}),f&&i.jsx(rx,{value:g,max:100})]}),i.jsx("input",{type:"file",ref:k,accept:"image/*",capture:"environment",className:"hidden",onChange:J,"data-form-type":"contribution-image",autoComplete:"off"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description ou t√©moignage"}),i.jsx(Ri,{id:"description",placeholder:"D√©crivez votre photo ou partagez votre t√©moignage...",autoComplete:"off","data-form-type":"contribution-description",...N("description")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"displayName",children:"Nom d'affichage (optionnel)"}),i.jsx(Kt,{id:"displayName",placeholder:"Votre nom ou pseudonyme",defaultValue:"Anonyme",autoComplete:"off","data-form-type":"contribution-displayname",...N("displayName")}),i.jsx("p",{className:"text-xs text-slate-500",children:"Laissez vide pour contribuer anonymement"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"eventId",children:"√âv√©nement associ√© (optionnel)"}),i.jsxs(Ms,{value:d,onValueChange:L=>{u(L),A("eventId",L)},children:[i.jsx(Qr,{children:i.jsx(Ds,{placeholder:"S√©lectionnez un √©v√©nement"})}),i.jsx(Xr,{children:Lt.map(L=>i.jsx(pr,{value:L.id,children:L.title},L.id))})]}),i.jsx("input",{type:"hidden",...N("eventId"),value:d,"data-form-type":"contribution-event",autoComplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"locationId",children:"Lieu associ√© (optionnel)"}),i.jsxs(Ms,{value:h,onValueChange:L=>{m(L),A("locationId",L)},children:[i.jsx(Qr,{children:i.jsx(Ds,{placeholder:"S√©lectionnez un lieu"})}),i.jsx(Xr,{children:lt.map(L=>i.jsx(pr,{value:L.id,children:L.name},L.id))})]}),i.jsx("input",{type:"hidden",...N("locationId"),value:h,"data-form-type":"contribution-location",autoComplete:"off"})]}),i.jsx(X,{type:"submit",className:"w-full",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Yr,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Partager"})]})]})},Y_=({src:e,alt:t,className:n,placeholderSrc:r,blurDataURL:s,onLoad:a,onError:o,priority:l=!1})=>{const[c,d]=p.useState(!1),[u,h]=p.useState(l),[m,f]=p.useState(!e),x=p.useRef(null),g=p.useRef(null);console.log(`[LazyImage] Initialisation: ${e}, priority: ${l}, isInView: ${u}`),(!e||e==="undefined")&&console.warn(`[LazyImage] URL d'image invalide: ${e}`),p.useEffect(()=>{if(l){console.log(`[LazyImage] Priority image, skip observer: ${e}`);return}console.log(`[LazyImage] Setting up observer for: ${e}`);const b=new IntersectionObserver(w=>{w.forEach(k=>{console.log(`[LazyImage] Observer callback: ${e}, isIntersecting: ${k.isIntersecting}`),k.isIntersecting&&(h(!0),b.unobserve(k.target))})},{rootMargin:"50px",threshold:.1});return g.current=b,x.current&&(console.log(`[LazyImage] Observing element: ${e}`),b.observe(x.current)),()=>{g.current&&g.current.disconnect()}},[l,e]);const y=()=>{console.log(`[LazyImage] Image loaded: ${e}`),d(!0),a==null||a()},S=b=>{console.error(`[LazyImage] Image error: ${e}`,b),f(!0),o==null||o(b.nativeEvent)},v="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==";return console.log(`[LazyImage] Render state: isInView=${u}, isLoaded=${c}, hasError=${m}`),i.jsxs("div",{ref:x,className:se("relative overflow-hidden",n),children:[!c&&i.jsx("div",{className:"absolute inset-0 bg-slate-200 animate-pulse",style:{backgroundImage:`url(${s||v})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(10px)",transform:"scale(1.1)"}}),u&&e&&e!=="undefined"&&i.jsx("img",{src:e,alt:t,className:se("w-full h-full object-cover transition-opacity duration-300",c?"opacity-100":"opacity-0"),onLoad:y,onError:S,loading:l?"eager":"lazy"}),u&&!c&&!m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"})}),m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100",children:i.jsxs("div",{className:"text-center text-slate-500",children:[i.jsx("div",{className:"text-2xl mb-2",children:"üì∑"}),i.jsx("div",{className:"text-sm",children:"Image indisponible"})]})})]})},K_=({entries:e,onEntryClick:t})=>{const n={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.5}})};return i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pb-20",children:e.map((r,s)=>i.jsxs(be.div,{custom:s,variants:n,initial:"hidden",animate:"visible",className:"relative rounded-lg overflow-hidden",onClick:()=>t(r),children:[r.type==="photo"&&(r.thumbnailUrl||r.imageUrl)?i.jsxs("div",{className:"aspect-square relative",children:[i.jsx(Y_,{src:r.thumbnailUrl||r.imageUrl,alt:r.description||"Photo communautaire",className:"w-full h-full object-cover",priority:s<6}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-100 md:opacity-0 md:hover:opacity-100 transition-opacity flex flex-col justify-end p-2 pb-8",children:i.jsx("p",{className:"text-white text-sm line-clamp-2",children:r.description||r.content})})]}):r.type==="photo"?i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:"üì∑"}),i.jsx("p",{className:"text-sm text-center text-slate-500",children:"Image non disponible"}),i.jsx("p",{className:"text-xs text-center text-slate-400 mt-1 line-clamp-2",children:r.content})]}):i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col justify-center",children:[i.jsxs("div",{className:"text-center mb-2",children:[i.jsx("div",{className:"text-2xl mb-1",children:"üí¨"}),i.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"T√©moignage"})]}),i.jsx("p",{className:"text-sm line-clamp-4 text-center flex-grow",children:r.content&&r.content.trim()||r.description&&r.description.trim()||"Contenu disponible"})]}),i.jsx(Xn,{entryId:r.id,variant:"compact"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-xs",children:i.jsxs("div",{className:"truncate",children:[i.jsx("span",{children:r.displayName}),i.jsx("span",{className:"text-xs text-slate-300 ml-1",children:r.timestamp&&!isNaN(new Date(r.timestamp).getTime())?ya(new Date(r.timestamp),"d MMM",{locale:va}):""})]})})]},r.id))})},Q_="Left",X_="Right",J_="Up",Z_="Down",Mr={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Qo={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},_d="mousemove",Md="mouseup",e2="touchend",t2="touchmove",n2="touchstart";function r2(e,t,n,r){return e>t?n>0?X_:Q_:r>0?Z_:J_}function Dd(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),s=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,s]}function s2(e,t){const n=u=>{const h="touches"in u;h&&u.touches.length>1||e((m,f)=>{f.trackMouse&&!h&&(document.addEventListener(_d,r),document.addEventListener(Md,o));const{clientX:x,clientY:g}=h?u.touches[0]:u,y=Dd([x,g],f.rotationAngle);return f.onTouchStartOrOnMouseDown&&f.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},m),Qo),{initial:y.slice(),xy:y,start:u.timeStamp||0})})},r=u=>{e((h,m)=>{const f="touches"in u;if(f&&u.touches.length>1)return h;if(u.timeStamp-h.start>m.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:x,clientY:g}=f?u.touches[0]:u,[y,S]=Dd([x,g],m.rotationAngle),v=y-h.xy[0],b=S-h.xy[1],w=Math.abs(v),k=Math.abs(b),N=(u.timeStamp||0)-h.start,P=Math.sqrt(w*w+k*k)/(N||1),D=[v/(N||1),b/(N||1)],A=r2(w,k,v,b),M=typeof m.delta=="number"?m.delta:m.delta[A.toLowerCase()]||Mr.delta;if(w<M&&k<M&&!h.swiping)return h;const C={absX:w,absY:k,deltaX:v,deltaY:b,dir:A,event:u,first:h.first,initial:h.initial,velocity:P,vxvy:D};C.first&&m.onSwipeStart&&m.onSwipeStart(C),m.onSwiping&&m.onSwiping(C);let T=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${A}`])&&(T=!0),T&&m.preventScrollOnSwipe&&m.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:C,swiping:!0})})},s=u=>{e((h,m)=>{let f;if(h.swiping&&h.eventData){if(u.timeStamp-h.start<m.swipeDuration){f=Object.assign(Object.assign({},h.eventData),{event:u}),m.onSwiped&&m.onSwiped(f);const x=m[`onSwiped${f.dir}`];x&&x(f)}}else m.onTap&&m.onTap({event:u});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},h),Qo),{eventData:f})})},a=()=>{document.removeEventListener(_d,r),document.removeEventListener(Md,o)},o=u=>{a(),s(u)},l=(u,h)=>{let m=()=>{};if(u&&u.addEventListener){const f=Object.assign(Object.assign({},Mr.touchEventOptions),h.touchEventOptions),x=[[n2,n,f],[t2,r,Object.assign(Object.assign({},f),h.preventScrollOnSwipe?{passive:!1}:{})],[e2,s,f]];x.forEach(([g,y,S])=>u.addEventListener(g,y,S)),m=()=>x.forEach(([g,y])=>u.removeEventListener(g,y))}return m},d={ref:u=>{u!==null&&e((h,m)=>{if(h.el===u)return h;const f={};return h.el&&h.el!==u&&h.cleanUpTouch&&(h.cleanUpTouch(),f.cleanUpTouch=void 0),m.trackTouch&&u&&(f.cleanUpTouch=l(u,m)),Object.assign(Object.assign(Object.assign({},h),{el:u}),f)})}};return t.trackMouse&&(d.onMouseDown=n),[d,l]}function i2(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function sx(e){const{trackMouse:t}=e,n=p.useRef(Object.assign({},Qo)),r=p.useRef(Object.assign({},Mr)),s=p.useRef(Object.assign({},r.current));s.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Mr),e);let a;for(a in Mr)r.current[a]===void 0&&(r.current[a]=Mr[a]);const[o,l]=p.useMemo(()=>s2(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=i2(n.current,r.current,s.current,l),o}const a2=()=>typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"",o2=({src:e,alt:t,className:n="",fallbackSrc:r=`${a2()}/images/placeholder-image.jpg`})=>{const[s,a]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState(!1),[u,h]=p.useState(0);if(p.useEffect(()=>{(()=>{l(!0),d(!1);try{if(!e){console.error("LocalImage: src prop is undefined or empty"),d(!0),l(!1);return}if(e&&typeof e=="string"&&e.startsWith("local:")){const x=e.substring(6),g=localStorage.getItem(`community_image_${x}`);g?a(g):(console.error(`Image non trouv√©e dans localStorage: ${x}`),caches&&"match"in caches&&u===0?caches.open("image-cache").then(y=>{y.match(`community-images/${x}`).then(S=>{S?S.blob().then(v=>{const b=URL.createObjectURL(v);a(b),h(w=>w+1)}):d(!0)})}).catch(()=>{d(!0)}):d(!0))}else a(e)}catch(x){console.error("Erreur lors du chargement de l'image:",x),d(!0)}finally{l(!1)}})()},[e,u]),o)return i.jsx("div",{className:`bg-gray-200 animate-pulse ${n}`,children:i.jsx("span",{className:"sr-only",children:"Chargement..."})});if(c){const f=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:f,alt:t,className:n,onError:x=>{var y,S;x.currentTarget.style.display="none",(y=x.currentTarget.parentElement)==null||y.classList.add("bg-gray-200","flex","items-center","justify-center");const g=document.createElement("span");g.className="text-sm text-gray-500",g.textContent="Image non disponible",(S=x.currentTarget.parentElement)==null||S.appendChild(g)}})}const m=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:s,alt:t,className:n,onError:f=>{var x,g;if(console.log("Erreur de chargement de l'image, utilisation de l'image de secours"),f.currentTarget.src!==m)f.currentTarget.src=m;else{f.currentTarget.style.display="none",(x=f.currentTarget.parentElement)==null||x.classList.add("bg-gray-200","flex","items-center","justify-center");const y=document.createElement("span");y.className="text-sm text-gray-500",y.textContent="Image non disponible",(g=f.currentTarget.parentElement)==null||g.appendChild(y)}}})},l2=({entry:e,entries:t,currentIndex:n,onClose:r,onNavigate:s})=>{$.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const a=n>0,o=n<t.length-1,l=()=>{a&&s(n-1)},c=()=>{o&&s(n+1)},d=sx({onSwipedLeft:()=>{o&&c()},onSwipedRight:()=>{a&&l()},trackMouse:!0,preventScrollOnSwipe:!0,delta:50});$.useEffect(()=>{const m=f=>{f.key==="ArrowLeft"&&a?l():f.key==="ArrowRight"&&o?c():f.key==="Escape"&&r()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[a,o,r]);const u={hidden:{opacity:0},visible:{opacity:1}},h={hidden:{opacity:0,y:50,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300}}};return i.jsx(an,{children:i.jsx(be.div,{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",variants:u,initial:"hidden",animate:"visible",exit:"hidden",onClick:r,children:i.jsxs(be.div,{className:"bg-white dark:bg-slate-900 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",variants:h,initial:"hidden",animate:"visible",exit:"hidden",onClick:m=>m.stopPropagation(),...d,children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:e.displayName}),i.jsx(X,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8",children:i.jsx(gr,{size:16})})]}),i.jsx("div",{className:"flex-grow overflow-auto",children:e.type==="photo"?i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"relative",children:i.jsx(o2,{src:e.imageUrl,alt:e.description||"Photo communautaire",className:"w-full h-auto"})}),e.description&&i.jsx("p",{className:"p-4 text-sm",children:e.description})]}):i.jsx("div",{className:"p-6 min-h-[200px] flex items-center justify-center",children:i.jsx("div",{className:"text-center space-y-4 max-w-md",children:e.content&&e.content.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.content.trim()}):e.description&&e.description.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.description.trim()}):i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 italic",children:"Aucun contenu disponible"}),i.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:['Debug: content="',e.content,'", description="',e.description,'"']})]})})})}),i.jsxs("div",{className:"p-3 border-t flex items-center justify-between",children:[i.jsx(Xn,{entryId:e.id,variant:"full"}),i.jsx("span",{className:"text-sm text-slate-500",children:ya(new Date(e.timestamp),"d MMMM yyyy",{locale:va})})]})]})})})},c2=({onRefresh:e,children:t,disabled:n=!1,threshold:r=80})=>{const[s,a]=p.useState(!1),[o,l]=p.useState(0),[c,d]=p.useState(!1),[u,h]=p.useState(0),m=p.useRef(null),f=async()=>{if(!(n||s)){a(!0);try{await e()}finally{a(!1),l(0),d(!1)}}},x=N=>{if(n||s)return;const P=m.current;!P||P.scrollTop>0||(h(N.touches[0].clientY),d(!0))},g=N=>{if(!c||n||s)return;const P=m.current;if(!P||P.scrollTop>0){d(!1),l(0);return}const D=N.touches[0].clientY,A=Math.max(0,D-u),M=Math.min(A*.5,r*1.5);l(M),A>10&&N.preventDefault()},y=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))},S=N=>{if(n||s)return;const P=m.current;!P||P.scrollTop>0||(h(N.clientY),d(!0))},v=N=>{if(!c||n||s)return;const P=m.current;if(!P||P.scrollTop>0){d(!1),l(0);return}const D=Math.max(0,N.clientY-u),A=Math.min(D*.3,r*1.5);l(A)},b=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))};p.useEffect(()=>{if(c){const N=D=>{if(!c)return;const A=Math.max(0,D.clientY-u),M=Math.min(A*.3,r*1.5);l(M)},P=()=>{o>=r?f():(l(0),d(!1))};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",P)}}},[c,u,o,r]);const w=o>=r,k=Math.min(o/r,1);return i.jsxs("div",{ref:m,className:"relative h-full overflow-auto",onTouchStart:x,onTouchMove:g,onTouchEnd:y,onMouseDown:S,onMouseMove:v,onMouseUp:b,style:{transform:`translateY(${Math.min(o*.5,40)}px)`,transition:c?"none":"transform 0.3s ease-out"},children:[i.jsx(an,{children:(c||s)&&i.jsx(be.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-center py-4",style:{transform:`translateY(-${Math.max(0,60-o)}px)`},children:i.jsxs("div",{className:"flex items-center gap-2 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg",children:[i.jsx(Jx,{className:`transition-all duration-200 ${s?"animate-spin":""} ${w?"text-green-500":"text-slate-500"}`,size:16,style:{transform:`rotate(${k*180}deg)`}}),i.jsx("span",{className:`text-sm font-medium transition-colors ${w?"text-green-500":"text-slate-500"}`,children:s?"Actualisation...":w?"Rel√¢cher pour actualiser":"Tirer pour actualiser"})]})})}),i.jsx("div",{className:"min-h-full",children:t})]})},u2=()=>{const{toast:e}=hl(),t=In(),[n,r]=p.useState([]),[s,a]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState("all"),[u,h]=p.useState("gallery"),[m,f]=p.useState(0),[x,g]=p.useState(null),[y,S]=p.useState(0);p.useEffect(()=>{new URLSearchParams(t.search).get("tab")==="contribute"&&(h("contribute"),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"url_param"}))},[t]);const v=async(N=!1)=>{try{l(null);const P=await rc();if(N&&m>0&&P.length>m){const D=P.length-m;e({title:"üéâ Nouvelles contributions !",description:`${D} nouvelle${D>1?"s":""} contribution${D>1?"s":""} ajout√©e${D>1?"s":""}`,duration:5e3})}r(P),f(P.length),V.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",entries_count:P.length})}catch(P){console.error("Erreur lors du chargement des entr√©es:",P),l("Impossible de charger les contributions. Veuillez r√©essayer."),V.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",error:"load_failed"})}finally{a(!1)}};p.useEffect(()=>{v()},[]),p.useEffect(()=>{const N=setInterval(()=>{u==="gallery"&&(console.log("[CommunityGallery] V√©rification des nouvelles contributions..."),v(!0))},12e4);return()=>clearInterval(N)},[u,m]);const b=async()=>{await v(),e({title:"‚úÖ Galerie actualis√©e",description:"Les derni√®res contributions ont √©t√© charg√©es",duration:2e3}),V.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",action:"manual_refresh"})},w=N=>{r(P=>[N,...P]),h("gallery"),e({title:"üéâ Contribution envoy√©e !",description:"Votre contribution sera visible dans quelques minutes",duration:4e3}),V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"completed",content_type:N.type})},k=n.filter(N=>{var P;return((P=N.moderation)==null?void 0:P.status)==="rejected"?!1:c==="all"?!0:N.type===c});return i.jsxs(i_,{children:[i.jsx(a_,{title:"Galerie Communautaire",subtitle:"Partagez vos moments et d√©couvrez ceux des autres"}),i.jsx(be.div,{initial:"hidden",animate:"visible",className:"flex flex-col h-full pb-32",children:i.jsxs(ss,{value:u,onValueChange:N=>{h(N),N==="contribute"&&V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"tab_click"})},className:"w-full",children:[i.jsxs(Cr,{className:"grid w-full grid-cols-2 mb-4",children:[i.jsxs(Fe,{value:"gallery",className:"flex items-center gap-2",children:[i.jsx(Fs,{size:16}),i.jsx("span",{children:"Galerie"})]}),i.jsxs(Fe,{value:"contribute",className:"flex items-center gap-2",children:[i.jsx(Zx,{size:16}),i.jsx("span",{children:"Contribuer"})]})]}),i.jsx($e,{value:"gallery",className:"h-full",children:i.jsx(c2,{onRefresh:b,disabled:s,children:s?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(Yr,{className:"w-8 h-8 animate-spin text-primary"})}):o?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-red-500 mb-4",children:o}),i.jsx(X,{onClick:()=>window.location.reload(),children:"R√©essayer"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ey,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Filtrer:"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(X,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>{d("all"),V.trackCommunityInteraction(ee.FILTER,{filter:"all"})},children:"Tous"}),i.jsx(X,{variant:c==="photo"?"default":"outline",size:"sm",onClick:()=>{d("photo"),V.trackCommunityInteraction(ee.FILTER,{filter:"photo"})},children:"Photos"}),i.jsx(X,{variant:c==="testimonial"?"default":"outline",size:"sm",onClick:()=>{d("testimonial"),V.trackCommunityInteraction(ee.FILTER,{filter:"testimonial"})},children:"T√©moignages"})]})]}),k.length>0?i.jsx(K_,{entries:k,onEntryClick:N=>{const P=k.findIndex(D=>D.id===N.id);S(P),g(N),V.trackCommunityInteraction(ee.VIEW,{content_type:"entry",entry_id:N.id})}}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"Aucune contribution dans cette cat√©gorie"}),i.jsx(X,{onClick:()=>{V.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"empty_state"}),h("contribute")},children:"Soyez le premier √† contribuer"})]})]})})}),i.jsx($e,{value:"contribute",className:"h-full",children:i.jsx(W_,{onSubmit:w})})]})}),x&&i.jsx(l2,{entry:x,entries:k,currentIndex:y,onClose:()=>g(null),onNavigate:N=>{S(N),g(k[N])}}),i.jsx(Zn,{})]})},d2=()=>{const e=xt(),[t,n]=p.useState([]),[r,s]=p.useState(!0),[a,o]=p.useState(null),[l,c]=p.useState(-1),d=p.useCallback(async()=>{try{const g=[],y=window.location.hostname.includes("github.io")?"/1Hall1Artiste/images/historical":"/images/historical";for(let S=1;S<=151;S++)g.push({id:`photos-${S}`,path:`${y}/photos-${S}.jpg`,loaded:!1});console.log(`[HistoricalGallery] ${g.length} photos charg√©es`),n(g),s(!1),V.trackFeatureUse("historical_gallery",{photo_count:g.length,timestamp:new Date().toISOString()})}catch(g){console.error("Erreur lors du chargement des photos:",g),s(!1)}},[]);p.useEffect(()=>{d()},[d]);const u=(g,y)=>{o(g),c(y),V.trackContentInteraction(ee.VIEW,"historical_photo",g.id,{photo_index:y,timestamp:new Date().toISOString()})},h=()=>{o(null),c(-1)},m=g=>{if(l===-1)return;let y=l;g==="prev"?y=l>0?l-1:t.length-1:y=l<t.length-1?l+1:0,c(y),o(t[y])};p.useEffect(()=>{const g=y=>{if(a)switch(y.key){case"Escape":h();break;case"ArrowLeft":m("prev");break;case"ArrowRight":m("next");break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[a,l]);const f={hidden:{opacity:0,y:20},visible:g=>({opacity:1,y:0,transition:{delay:g*.02,duration:.3}})},x=sx({onSwipedLeft:()=>{a&&m("next")},onSwipedRight:()=>{a&&m("prev")},trackMouse:!0,preventScrollOnSwipe:!0,delta:50,swipeDuration:500});return i.jsx(bl,{children:i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[i.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-sm border-b border-slate-200",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(X,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full",children:["‚Üê",i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Galerie Historique"}),i.jsx("p",{className:"text-slate-600",children:"Photos d'√©poque de l'√éle Feydeau"})]})]}),i.jsxs("div",{className:"text-sm text-slate-500",children:[t.length," photos"]})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-6",children:r?i.jsx("div",{className:"flex items-center justify-center min-h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map((g,y)=>i.jsxs(be.div,{custom:y,variants:f,initial:"hidden",animate:"visible",className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group",onClick:()=>u(g,y),children:[i.jsx("img",{src:g.path,alt:`Photo historique ${y+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:y<8?"eager":"lazy",onLoad:()=>{n(S=>S.map(v=>v.id===g.id?{...v,loaded:!0}:v))},onError:S=>{console.warn(`Erreur chargement image ${g.path}`);const v=S.target;v.style.display="none";const b=v.closest(".aspect-square");b&&(b.style.display="none")}}),i.jsx(Xn,{entryId:`historical-${g.id}`,variant:"compact",className:"absolute bottom-2 right-2"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:i.jsxs("span",{className:"text-white text-xs font-medium",children:["Photo ",y+1]})})]},g.id))})}),i.jsx(an,{children:a&&i.jsxs(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:h,...x,children:[i.jsxs(X,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20 rounded-full",onClick:h,children:[i.jsx("span",{className:"sr-only",children:"Fermer"}),i.jsx("span",{className:"text-2xl",children:"√ó"})]}),i.jsx(X,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("prev")},title:"Photo pr√©c√©dente (‚Üê ou swipe droite)",children:"‚Üê"}),i.jsx(X,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("next")},title:"Photo suivante (‚Üí ou swipe gauche)",children:"‚Üí"}),i.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:[l+1," / ",t.length]}),i.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-10",children:i.jsx(Xn,{entryId:`historical-${a.id}`,variant:"full",className:"bg-black/60 backdrop-blur-sm text-white hover:bg-black/80"})}),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 text-white/70 text-xs bg-black/50 px-3 py-1 rounded-full md:hidden",children:"Swipe ‚Üê ‚Üí pour naviguer"}),i.jsx(be.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},src:a.path,alt:`Photo historique ${l+1}`,className:"max-h-full max-w-full object-contain",onClick:g=>g.stopPropagation()},a.id)]})})]})})},m2=()=>{const e=xt(),t=n=>{V.trackContentInteraction(ee.VIEW,"gallery",n,{gallery_type:n,timestamp:new Date().toISOString()}),e(`/${n}`)};return i.jsx(bl,{children:i.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white shadow-sm",children:i.jsxs("div",{className:"flex items-center h-16 px-4",children:[i.jsxs(X,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:[i.jsx(Yn,{className:"h-6 w-6"}),i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsx("h1",{className:"text-xl font-semibold",children:"Galeries"})]})}),i.jsxs("div",{className:"flex-1 p-4 pb-20",children:[" ",i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("community"),children:[i.jsx("div",{className:"relative h-40 bg-gray-100",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(Fs,{className:"h-12 w-12 text-gray-400"})})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos de la communaut√©"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"D√©couvrez les photos partag√©es par la communaut√© de l'√éle Feydeau"})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("historical"),children:[i.jsx("div",{className:"relative h-40 bg-gray-100",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(ty,{className:"h-12 w-12 text-gray-400"})})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos historiques"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Explorez notre collection de 165 photos historiques de l'√éle Feydeau"})]})]})]})]}),i.jsx(Zn,{})]})})},h2=()=>{try{const e=ml();if(!e){console.warn("Firebase non initialis√©, impossible d'utiliser Analytics");return}const t=Xi(e);if(!t){console.warn("[FirebaseDebug] Analytics non disponible pour l'√©v√©nement de test");return}$s(async()=>{const{logEvent:n}=await Promise.resolve().then(()=>s0);return{logEvent:n}},void 0).then(({logEvent:n})=>{n(t,"test_debug_event",{timestamp:new Date().toISOString(),debug:!0}),console.log("[FirebaseDebug] √âv√©nement de test envoy√©")})}catch(e){console.error("[FirebaseDebug] Erreur lors de l'envoi de l'√©v√©nement de test:",e)}},f2=()=>{try{if(!window.gtag){console.warn("[GtagDebug] gtag n'est pas initialis√©");return}window.gtag("event","test_event",{event_category:"debug",event_label:"test_label",debug_mode:!0,timestamp:new Date().toISOString()}),console.log("[GtagDebug] √âv√©nement de test envoy√© via gtag")}catch(e){console.error("[GtagDebug] Erreur lors de l'envoi de l'√©v√©nement de test:",e)}},p2=async()=>{const e=[];try{const t=await uh();if(e.push({success:t,message:t?"Firebase Analytics est support√© dans cet environnement":"Firebase Analytics n'est PAS support√© dans cet environnement"}),!t)return e;const n=ml(),r=!!n;if(e.push({success:r,message:r?"Firebase est correctement initialis√©":"Firebase n'est PAS initialis√©"}),!r)return e;const s=n?n.options:{},a=!!s.measurementId;e.push({success:a,message:a?"MeasurementId est configur√©":"MeasurementId est MANQUANT dans la configuration",details:{measurementId:s.measurementId||"Non d√©fini",apiKey:s.apiKey?"Configur√©":"Non configur√©",projectId:s.projectId||"Non d√©fini"}});let o=null;try{n?o=Xi(n):console.warn("Firebase non initialis√©, impossible d'utiliser Analytics"),e.push({success:!!o,message:o?"Analytics a √©t√© initialis√© avec succ√®s":"√âchec de l'initialisation d'Analytics"})}catch(f){return e.push({success:!1,message:"Erreur lors de l'initialisation d'Analytics",details:{error:f instanceof Error?f.message:String(f)}}),e}const l=new URL(window.location.href),c=l.searchParams.has("firebase_debug"),d=l.searchParams.has("debug_mode"),u=l.searchParams.has("gtm_debug");e.push({success:c||d||u,message:c||d||u?"Param√®tres de debug d√©tect√©s dans l'URL":"Aucun param√®tre de debug dans l'URL",details:{firebase_debug:c?"Pr√©sent":"Absent",debug_mode:d?"Pr√©sent":"Absent",gtm_debug:u?"Pr√©sent":"Absent"}});try{dh(o,!0),e.push({success:!0,message:"La collecte de donn√©es Analytics est activ√©e"})}catch(f){e.push({success:!1,message:"Erreur lors de l'activation de la collecte de donn√©es",details:{error:f instanceof Error?f.message:String(f)}})}const h=typeof window.gtag=="function";e.push({success:h,message:h?"La fonction gtag est disponible":"La fonction gtag n'est PAS disponible"});const m=g2();e.push({success:m.length===0,message:m.length===0?"Aucun bloqueur potentiel d√©tect√©":`${m.length} bloqueur(s) potentiel(s) d√©tect√©(s)`,details:{blockers:m}})}catch(t){e.push({success:!1,message:"Erreur lors du diagnostic",details:{error:t instanceof Error?t.message:String(t)}})}return e};function g2(){const e=[];(document.getElementById("adblock-detector")||document.getElementById("ublock-detector")||document.getElementById("adblock-notice"))&&e.push("Bloqueur de publicit√©s d√©tect√©");try{document.cookie="testcookie=1; SameSite=Lax; Secure",document.cookie.indexOf("testcookie=")===-1&&e.push("Les cookies sont bloqu√©s")}catch{e.push("Erreur lors du test des cookies")}try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch{e.push("localStorage n'est pas disponible")}const t=0,n=window.RequestFileSystem||window.webkitRequestFileSystem;if(n)try{n(t,100,()=>{},()=>{e.push("Navigation priv√©e d√©tect√©e")})}catch{}return e}const x2=async()=>{console.group("üîç Diagnostic Firebase Analytics"),console.log("D√©marrage du diagnostic...");const e=await p2();let t=0,n=0;return e.forEach((r,s)=>{r.success?(t++,console.log(`‚úÖ ${s+1}. ${r.message}`)):(n++,console.warn(`‚ùå ${s+1}. ${r.message}`)),r.details&&console.log("  D√©tails:",r.details)}),console.log(`
R√©sultat: ${t} succ√®s, ${n} probl√®mes`),n>0&&(console.log(`
Recommandations:`),console.log("1. V√©rifiez que la configuration Firebase est correcte"),console.log("2. Assurez-vous que les param√®tres de debug sont pr√©sents dans l'URL"),console.log("3. D√©sactivez les bloqueurs de publicit√©s"),console.log("4. Utilisez Chrome pour les tests"),console.log("5. V√©rifiez que le measurementId correspond √† votre projet Google Analytics")),console.groupEnd(),{results:e,summary:{total:e.length,success:t,failure:n}}};function y2(){const[e,t]=p.useState([]),[n,r]=p.useState("firebase"),[s,a]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(!1);p.useEffect(()=>{const b=new URL(window.location.href),w=[];b.searchParams.has("firebase_debug")&&w.push("firebase_debug=true"),b.searchParams.has("gtm_debug")&&w.push("gtm_debug=x"),b.searchParams.has("debug_mode")&&w.push("debug_mode=true"),a(w.join(", ")||"Aucun param√®tre de debug d√©tect√©"),u("Debugger initialis√©")},[]);const u=b=>{t(w=>[...w,`${new Date().toLocaleTimeString()}: ${b}`])},h=()=>{n==="firebase"?(h2(),u("√âv√©nement de test Firebase envoy√©")):(f2(),u("√âv√©nement de test Gtag envoy√©"))},m=()=>{V.trackPageView("/debug-page","Page de d√©bogage"),u("√âv√©nement page_view envoy√© via Firebase Analytics"),n==="gtag"&&window.gtag&&(window.gtag("event","page_view",{page_title:"Page de d√©bogage",page_path:"/debug-page",debug_mode:!0}),u("√âv√©nement page_view envoy√© via Gtag"))},f=()=>{V.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:5,completion_time:new Date().toISOString()}),u("√âv√©nement onboarding_complete envoy√©")},x=()=>{V.trackMapInteraction(ee.MAP_LOAD,{map_type:"debug",load_time:1200}),u("√âv√©nement map_load envoy√©")},g=()=>{V.trackEvent(mh.FEATURE,ee.FEATURE_USE,{feature_name:"analytics_debugger",custom_param:"test_value"}),u("√âv√©nement personnalis√© feature_feature_use envoy√©")},y=()=>{const b=new URL(window.location.href);b.searchParams.set("firebase_debug","true"),b.searchParams.set("debug_mode","true"),b.searchParams.set("gtm_debug","x"),window.history.replaceState({},document.title,b.toString()),a("firebase_debug=true, debug_mode=true, gtm_debug=x"),u("Param√®tres de debug ajout√©s √† l'URL")},S=()=>{t([]),u("Logs effac√©s")},v=async()=>{d(!0),u("D√©marrage du diagnostic...");try{const b=await x2();l(b),u(`Diagnostic termin√©: ${b.summary.success} succ√®s, ${b.summary.failure} probl√®mes`)}catch(b){u(`Erreur lors du diagnostic: ${b instanceof Error?b.message:String(b)}`)}finally{d(!1)}};return i.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md max-w-3xl mx-auto my-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Analytics Debugger"}),i.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"√âtat du d√©bogage"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Mode:"})," ",n==="firebase"?"Firebase Analytics":"Google Tag Manager"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Param√®tres URL:"})," ",s]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"Mode de d√©bogage"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>r("firebase"),className:`px-3 py-1 rounded ${n==="firebase"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Firebase Analytics"}),i.jsx("button",{onClick:()=>r("gtag"),className:`px-3 py-1 rounded ${n==="gtag"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Google Tag (gtag)"})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:v,disabled:c,className:`w-full py-2 px-4 rounded ${c?"bg-gray-400":"bg-green-600 hover:bg-green-700"} text-white flex items-center justify-center`,children:c?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Ex√©cution du diagnostic..."]}):"Ex√©cuter le diagnostic"})})]}),o&&i.jsxs("div",{className:"mb-4 p-3 border rounded bg-gray-50",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"R√©sultats du diagnostic"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{children:"Tests r√©ussis:"}),i.jsxs("span",{className:"font-medium text-green-600",children:[o.summary.success," / ",o.summary.total]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Probl√®mes d√©tect√©s:"}),i.jsx("span",{className:`font-medium ${o.summary.failure>0?"text-red-600":"text-green-600"}`,children:o.summary.failure})]}),o.summary.failure>0&&i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"Des probl√®mes ont √©t√© d√©tect√©s. Consultez la console du navigateur pour plus de d√©tails."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsx("button",{onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded",children:"Envoyer √©v√©nement de test"}),i.jsx("button",{onClick:m,className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded",children:"Simuler page_view"}),i.jsx("button",{onClick:f,className:"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded",children:"Simuler onboarding_complete"}),i.jsx("button",{onClick:x,className:"bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded",children:"Simuler map_load"}),i.jsx("button",{onClick:g,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",children:"Envoyer √©v√©nement personnalis√©"}),i.jsx("button",{onClick:y,className:"bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded",children:"Ajouter param√®tres debug √† l'URL"})]}),i.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Journal des √©v√©nements"}),i.jsx("button",{onClick:S,className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"Effacer"})]}),i.jsx("div",{className:"h-48 overflow-y-auto text-sm",children:e.length===0?i.jsx("p",{className:"text-gray-500 italic",children:"Aucun √©v√©nement envoy√©"}):i.jsx("ul",{className:"space-y-1",children:e.map((b,w)=>i.jsx("li",{className:"border-b border-gray-100 pb-1",children:b},w))})})]}),i.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:[i.jsx("h3",{className:"font-semibold",children:"Instructions:"}),i.jsxs("ol",{className:"list-decimal pl-5 space-y-1 mt-2",children:[i.jsxs("li",{children:["Assurez-vous que l'URL contient les param√®tres de debug (",i.jsx("code",{children:"?firebase_debug=true"}),")"]}),i.jsx("li",{children:"Ouvrez la console Firebase > Analytics > DebugView"}),i.jsx("li",{children:"Ouvrez √©galement Google Analytics > Rapports > Temps r√©el"}),i.jsx("li",{children:"Cliquez sur les boutons ci-dessus pour envoyer des √©v√©nements de test"}),i.jsx("li",{children:"V√©rifiez que les √©v√©nements apparaissent dans DebugView ou dans les rapports temps r√©el"}),i.jsx("li",{children:"Si rien n'appara√Æt, essayez de changer de mode (Firebase/Gtag) et r√©essayez"})]}),i.jsxs("div",{className:"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[i.jsx("p",{className:"font-semibold",children:"R√©solution de probl√®mes:"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"V√©rifiez que vous n'avez pas de bloqueur de publicit√©s actif"}),i.jsx("li",{children:"Utilisez Chrome plut√¥t qu'un autre navigateur"}),i.jsx("li",{children:"V√©rifiez que la configuration Firebase est correcte"}),i.jsx("li",{children:"Consultez la console du navigateur pour voir les erreurs √©ventuelles"})]})]})]})]})}const v2=new E1,b2=()=>{const e=In(),t=xt(),n=p.useRef(e.pathname),[r,s]=p.useState(()=>localStorage.getItem("hasSeenOnboarding")==="true");p.useEffect(()=>{console.log("[App] Initialisation des √©couteurs d'√©v√©nements d'onboarding");const m=()=>{const g=localStorage.getItem("hasSeenOnboarding")==="true";g!==r&&(console.log("[App] Mise √† jour de hasSeenOnboarding depuis localStorage:",g),s(g))};window.addEventListener("storage",m);const f=setInterval(m,500);return()=>{window.removeEventListener("storage",m),clearInterval(f)}},[r]);const[a,o]=p.useState(!0),l=()=>{o(!1),r||t("/onboarding")};p.useEffect(()=>{if(console.log("[App] useEffect navigation - √âtat actuel:",{showSplash:a,hasSeenOnboarding:r,pathname:e.pathname}),a){console.log("[App] √âcran d'accueil encore affich√©, aucune action");return}!r&&e.pathname!=="/onboarding"?(console.log("[App] Redirection vers onboarding depuis:",e.pathname),t("/onboarding")):r&&e.pathname==="/onboarding"?(console.log("[App] Onboarding termin√©, redirection vers /map"),t("/map")):console.log("[App] Aucune action de navigation n√©cessaire")},[r,e.pathname,t,a]),p.useEffect(()=>{const m=n.current,f=e.pathname;m!==f&&(V.trackRouteChange(m,f),n.current=f)},[e.pathname]);const c=[{path:"/map",component:iA,swipeable:!0},{path:"/debug-analytics",component:y2},{path:"/program",component:oA,swipeable:!0},{path:"/saved",component:wP,swipeable:!0},{path:"/community",component:u2,swipeable:!0},{path:"/galleries",component:m2,swipeable:!1},{path:"/historical",component:d2,swipeable:!1},{path:"/about",component:cA,swipeable:!0},{path:"/donate",component:uA,swipeable:!0}],d=[{path:"/admin",component:bP},{path:"/onboarding",component:EP},{path:"/location-history",component:r_},{path:"/analytics",component:s_}],u=F1(e.pathname),h=(m,f=!1)=>i.jsx(bl,{enableSwipe:f,children:i.jsx(m,{})});return a?i.jsx(mA,{onComplete:l,isFirstVisit:!r}):i.jsx(an,{mode:"wait",children:i.jsxs(iy,{location:e,children:[i.jsx(Ws,{path:"/",element:r?i.jsx(vc,{to:"/map",replace:!0}):i.jsx(vc,{to:"/onboarding",replace:!0})}),c.map(m=>i.jsx(Ws,{path:m.path,element:h(m.component,u&&m.swipeable)},m.path)),d.map(m=>i.jsx(Ws,{path:m.path,element:h(m.component)},m.path)),i.jsx(Ws,{path:"*",element:h(dA)})]},e.pathname)})},w2=()=>i.jsx(b2,{}),Rd=new EventTarget,S2=()=>{const[e,t]=p.useState({show:!1,message:""});return p.useEffect(()=>{console.log("[App] Initialisation des √©couteurs d'√©v√©nements d'achievement");const n=s=>{const a=s;console.log("[App] √âv√©nement interne achievement re√ßu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] C√©l√©bration activ√©e avec le message:",a.detail.message)},r=s=>{const a=s;console.log("[App] √âv√©nement global app-achievement re√ßu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] C√©l√©bration activ√©e avec le message:",a.detail.message)};return console.log(`[App] Ajout de l'√©couteur pour l'√©v√©nement interne "achievement"`),Rd.addEventListener("achievement",n),console.log(`[App] Ajout de l'√©couteur pour l'√©v√©nement global "app-achievement"`),window.addEventListener("app-achievement",r),window.resetOnboardingTest=()=>{console.log("[App] [TEST] R√©initialisation de l'onboarding..."),localStorage.removeItem("hasSeenOnboarding"),window.location.reload()},console.log("[App] [TEST] Fonction resetOnboardingTest() disponible dans la console"),()=>{console.log("[App] Nettoyage des √©couteurs d'√©v√©nements"),Rd.removeEventListener("achievement",n),window.removeEventListener("app-achievement",r)}},[]),p.useEffect(()=>{var n;return console.log("[App] Base URL d√©tect√©e:",((n=window.APP_CONFIG)==null?void 0:n.BASE_URL)||"/"),iu(),Ec(),dy(),a0(),console.log("[App] Firebase Analytics initialis√©"),V.startSession(),V.trackFeatureUse("app_start",{timestamp:new Date().toISOString(),referrer:document.referrer||"direct"}),setInterval(()=>{jc()},30*60*1e3),jc(),Ec(),iu(),Wh(),()=>{V.endSession()}},[]),p.useEffect(()=>{try{const n=performance.getEntriesByType("navigation");if(n&&n.length>0){const r=n[0],s=r.loadEventEnd-r.startTime;isFinite(s)&&s>=0&&V.trackPerformance(ee.LOAD_TIME,Math.round(s))}else if(performance.timing){const r=performance.timing,s=r.loadEventEnd-r.navigationStart;isFinite(s)&&s>=0&&V.trackPerformance(ee.LOAD_TIME,Math.round(s))}if("PerformanceObserver"in window){const r=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.name;l==="first-paint"?V.trackPerformance(ee.FIRST_PAINT,Math.round(o.startTime)):l==="first-contentful-paint"&&V.trackPerformance(ee.FIRST_CONTENTFUL_PAINT,Math.round(o.startTime))}});try{r.observe({type:"paint",buffered:!0})}catch{}const s=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.processingStart-o.startTime;isFinite(l)&&l>=0&&V.trackPerformance(ee.FIRST_INPUT_DELAY,Math.round(l),{name:o.name,duration:Math.round(o.duration)})}});try{s.observe({type:"first-input",buffered:!0})}catch{}}}catch{}},[]),window.location.hostname.includes("github.io"),i.jsx(C1,{client:v2,children:i.jsx(D1,{children:i.jsxs(Dh,{children:[i.jsx(Q0,{}),i.jsx(Ow,{}),i.jsx(sy,{children:i.jsxs(P1,{children:[i.jsx(w2,{}),i.jsx(rS,{}),e.show&&i.jsx(mi,{trigger:e.show,message:e.message,duration:5e3,onComplete:()=>t({show:!1,message:""})})]})})]})})})},j2=Ye("ErrorHandling");function E2(){A1(),j2.info("Syst√®me de gestion des erreurs initialis√©")}E2();Cm(document.getElementById("root")).render(i.jsx(S2,{}));
//# sourceMappingURL=index--LcL_9ba.js.map
