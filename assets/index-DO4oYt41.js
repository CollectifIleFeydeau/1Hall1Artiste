var jx=Object.defineProperty;var kc=e=>{throw TypeError(e)};var Sx=(e,t,n)=>t in e?jx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var at=(e,t,n)=>Sx(e,typeof t!="symbol"?t+"":t,n),Da=(e,t,n)=>t.has(e)||kc("Cannot "+n);var V=(e,t,n)=>(Da(e,t,"read from private field"),n?n.call(e):t.get(e)),ke=(e,t,n)=>t.has(e)?kc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ve=(e,t,n,r)=>(Da(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),dt=(e,t,n)=>(Da(e,t,"access private method"),n);var ti=(e,t,n,r)=>({set _(s){ve(e,t,s,n)},get _(){return V(e,t,r)}});import{j as i,V as sm,R as im,A as am,C as om,X as br,T as lm,D as cm,P as Nx,c as ss,a as ea,u as tt,b as um,d as Je,e as me,f as vn,g as dm,h as mm,S as Ex,i as Cx,k as hm,l as jo,m as ta,n as fm,o as je,W as Ix,L as Qn,p as na,q as pm,M as kn,r as ra,s as ol,N as ll,t as gm,v as xm,w as kx,x as Ax,F as Tx,y as Px,I as _x,z as En,B as ym,E as Mx,G as Dx,H as Rx,J as cl,K as Ox,O as Lx,Q as vm,U as bm,Y as Fx,Z as wm,_ as jm,$ as $x,a0 as zx,a1 as Sm,a2 as Vx,a3 as pn,a4 as sa,a5 as is,a6 as Cr,a7 as Bx,a8 as un,a9 as In,aa as ul,ab as Nm,ac as dl,ad as ml,ae as Em,af as Cm,ag as hl,ah as fl,ai as qx,aj as Im,ak as km,al as Am,am as Ux,an as Hx,ao as Gx,ap as Ii,aq as Xn,ar as Wx,as as Yx,at as Tm,au as Kx,av as Ra,aw as Qx,ax as Xx,ay as Jx,az as js,aA as Ac,aB as Lr,aC as Pm,aD as Zx,aE as ey,aF as _m,aG as ty,aH as Mm,aI as Dm,aJ as ny,aK as Rm,aL as ry,aM as Om,aN as Lm,aO as sy,aP as iy,aQ as Fm,aR as ay,aS as oy,aT as Tc,aU as ly,aV as cy,aW as uy,aX as dy,aY as my,aZ as Pc,a_ as hy,a$ as fy,b0 as py}from"./vendor-ui-BgMVMd13.js";import{a as gy,r as p,R as F,G as xy,u as St,c as Tn,L as _r,d as ki,g as $m,H as yy,e as vy,f as ni,N as _c}from"./vendor-react-D2LSdJQX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var zm,Mc=gy;zm=Mc.createRoot,Mc.hydrateRoot;const by="modulepreload",wy=function(e){return"/1Hall1Artiste/"+e},Dc={},Gs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=wy(c),c in Dc)return;Dc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":by,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Ai="app_errors",Rc=50,jy=["https://www.google-analytics.com/mp/collect","Access to fetch at 'https://www.google-analytics.com","CORS policy: Response to preflight request doesn't pass access control check","No 'Access-Control-Allow-Origin' header is present","Failed to fetch","NetworkError","TypeError: Failed to fetch","adblock","uBlock","AdGuard"],Sy=(e,t)=>{const n=`${e} ${t||""}`;return jy.some(r=>n.toLowerCase().includes(r.toLowerCase()))},Oc=(e,t,n)=>{try{const r=typeof e=="string"?e:e.message,s=typeof e=="string"?void 0:e.stack;if(Sy(r,s)){console.log(`[ErrorTracking] Erreur ignorée (normale): ${r}`);return}const a={message:r,stack:s,url:window.location.href,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,path:window.location.pathname,componentName:t,additionalInfo:n},o=localStorage.getItem(Ai);let l=[];if(o)try{l=JSON.parse(o),Array.isArray(l)||(l=[])}catch(c){console.error("Erreur lors de la lecture des erreurs stockées:",c),l=[]}l.push(a),l.length>Rc&&(l=l.slice(-Rc)),localStorage.setItem(Ai,JSON.stringify(l)),console.error("Erreur capturée:",a)}catch(r){console.error("Erreur lors de la capture d'erreur:",r)}},Vm=()=>{try{const e=localStorage.getItem(Ai);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Erreur lors de la récupération des erreurs stockées:",e),[]}},Ny=()=>{localStorage.removeItem(Ai)},Ey="service_3l31ox3",Cy="template_q7nh8h2",Iy=async()=>{try{(await Gs(()=>import("./index-CQgKCrt3.js"),[])).init("HoNWMyqrINGzjeK6E"),console.log("EmailJS initialisé avec succès via npm package")}catch(e){console.error("Erreur lors de l'initialisation d'EmailJS:",e)}},Lc=async()=>{const e=Vm();e.length>=1?await ky():e.length>0&&console.log(`${e.length} erreur(s) en attente d'envoi`)},ky=async()=>{try{const e=Vm();if(e.length===0)return!0;if(!0){console.log(`Envoi de ${e.length} erreurs par email`);const n=await Gs(()=>import("./index-CQgKCrt3.js"),[]),r={errors_json:JSON.stringify(e,null,2),error_count:e.length,timestamp:new Date().toISOString(),user_agent:navigator.userAgent,app_version:"1.0.0",app_name:"Collectif Feydeau"},a=await n.send(Ey,Cy,r,"HoNWMyqrINGzjeK6E");if(a.status===200)return console.log("Erreurs envoyées avec succès"),Ny(),!0;throw new Error(`Erreur lors de l'envoi: ${a.text}`)}}catch(e){return console.error("Erreur lors de l'envoi des erreurs:",e),!1}},Fc=()=>{window.onerror=(e,t,n,r,s)=>(Oc(s||String(e),"GlobalErrorHandler",{source:t,lineno:n,colno:r}),!1),window.addEventListener("unhandledrejection",e=>{Oc(e.reason||"Promesse rejetée non gérée","UnhandledRejection")})};const Ay=()=>{};var $c={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Ty=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=e[n++],o=e[n++],l=e[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return t.join("")},qm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const a=e[s],o=s+1<e.length,l=o?e[s+1]:0,c=s+2<e.length,d=c?e[s+2]:0,u=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|d>>6,f=d&63;c||(f=64,o||(m=64)),r.push(n[u],n[h],n[m],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bm(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ty(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const a=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const d=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,a==null||l==null||d==null||h==null)throw new Py;const m=a<<2|l>>4;if(r.push(m),d!==64){const f=l<<4&240|d>>2;if(r.push(f),h!==64){const x=d<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Py extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _y=function(e){const t=Bm(e);return qm.encodeByteArray(t,!0)},Um=function(e){return _y(e).replace(/\./g,"")},My=function(e){try{return qm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=()=>Dy().__FIREBASE_DEFAULTS__,Oy=()=>{if(typeof process>"u"||typeof $c>"u")return;const e=$c.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ly=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&My(e[1]);return t&&JSON.parse(t)},Fy=()=>{try{return Ay()||Ry()||Oy()||Ly()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Hm=()=>{var e;return(e=Fy())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Gm(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function pl(){try{return typeof indexedDB=="object"}catch{return!1}}function gl(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}function Wm(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="FirebaseError";class Ir extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=zy,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ia.prototype.create)}}class ia{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,a=this.errors[t],o=a?Vy(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ir(s,l,r)}}function Vy(e,t){return e.replace(By,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const By=/\{\$([^}]+)}/g;function Ti(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const a=e[s],o=t[s];if(zc(a)&&zc(o)){if(!Ti(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=1e3,Uy=2,Hy=4*60*60*1e3,Gy=.5;function Vc(e,t=qy,n=Uy){const r=t*Math.pow(n,e),s=Math.round(Gy*r*(Math.random()-.5)*2);return Math.min(Hy,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(e){return e&&e._delegate?e._delegate:e}class Jn{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new $y;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ky(t))try{this.getOrInitializeService({instanceIdentifier:or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(t=or){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=or){return this.instances.has(t)}getOptions(t=or){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&t(o,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=or){return this.component?this.component.multipleInstances?t:or:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Yy(e){return e===or?void 0:e}function Ky(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Wy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ue||(Ue={}));const Xy={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Jy=Ue.INFO,Zy={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},ev=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Zy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ym{constructor(t){this.name=t,this._logLevel=Jy,this._logHandler=ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ue))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Xy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...t),this._logHandler(this,Ue.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...t),this._logHandler(this,Ue.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...t),this._logHandler(this,Ue.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...t),this._logHandler(this,Ue.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...t),this._logHandler(this,Ue.ERROR,...t)}}const tv=(e,t)=>t.some(n=>e instanceof n);let Bc,qc;function nv(){return Bc||(Bc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rv(){return qc||(qc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Km=new WeakMap,So=new WeakMap,Qm=new WeakMap,Oa=new WeakMap,yl=new WeakMap;function sv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(Gn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Km.set(n,e)}).catch(()=>{}),yl.set(t,e),t}function iv(e){if(So.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});So.set(e,t)}let No={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return So.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Qm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function av(e){No=e(No)}function ov(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(La(this),t,...n);return Qm.set(r,t.sort?t.sort():[t]),Gn(r)}:rv().includes(e)?function(...t){return e.apply(La(this),t),Gn(Km.get(this))}:function(...t){return Gn(e.apply(La(this),t))}}function lv(e){return typeof e=="function"?ov(e):(e instanceof IDBTransaction&&iv(e),tv(e,nv())?new Proxy(e,No):e)}function Gn(e){if(e instanceof IDBRequest)return sv(e);if(Oa.has(e))return Oa.get(e);const t=lv(e);return t!==e&&(Oa.set(e,t),yl.set(t,e)),t}const La=e=>yl.get(e);function Xm(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(e,t),l=Gn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gn(o.result),c.oldVersion,c.newVersion,Gn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const cv=["get","getKey","getAll","getAllKeys","count"],uv=["put","add","delete","clear"],Fa=new Map;function Uc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Fa.get(t))return Fa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=uv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cv.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Fa.set(t,a),a}av(e=>({...e,get:(t,n,r)=>Uc(t,n)||e.get(t,n,r),has:(t,n)=>!!Uc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Eo="@firebase/app",Hc="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Ym("@firebase/app"),hv="@firebase/app-compat",fv="@firebase/analytics-compat",pv="@firebase/analytics",gv="@firebase/app-check-compat",xv="@firebase/app-check",yv="@firebase/auth",vv="@firebase/auth-compat",bv="@firebase/database",wv="@firebase/data-connect",jv="@firebase/database-compat",Sv="@firebase/functions",Nv="@firebase/functions-compat",Ev="@firebase/installations",Cv="@firebase/installations-compat",Iv="@firebase/messaging",kv="@firebase/messaging-compat",Av="@firebase/performance",Tv="@firebase/performance-compat",Pv="@firebase/remote-config",_v="@firebase/remote-config-compat",Mv="@firebase/storage",Dv="@firebase/storage-compat",Rv="@firebase/firestore",Ov="@firebase/ai",Lv="@firebase/firestore-compat",Fv="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]",$v={[Eo]:"fire-core",[hv]:"fire-core-compat",[pv]:"fire-analytics",[fv]:"fire-analytics-compat",[xv]:"fire-app-check",[gv]:"fire-app-check-compat",[yv]:"fire-auth",[vv]:"fire-auth-compat",[bv]:"fire-rtdb",[wv]:"fire-data-connect",[jv]:"fire-rtdb-compat",[Sv]:"fire-fn",[Nv]:"fire-fn-compat",[Ev]:"fire-iid",[Cv]:"fire-iid-compat",[Iv]:"fire-fcm",[kv]:"fire-fcm-compat",[Av]:"fire-perf",[Tv]:"fire-perf-compat",[Pv]:"fire-rc",[_v]:"fire-rc-compat",[Mv]:"fire-gcs",[Dv]:"fire-gcs-compat",[Rv]:"fire-fst",[Lv]:"fire-fst-compat",[Ov]:"fire-vertex","fire-js":"fire-js",[Fv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Map,zv=new Map,Io=new Map;function Gc(e,t){try{e.container.addComponent(t)}catch(n){An.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function wr(e){const t=e.name;if(Io.has(t))return An.debug(`There were multiple attempts to register component ${t}.`),!1;Io.set(t,e);for(const n of Pi.values())Gc(n,e);for(const n of zv.values())Gc(n,e);return!0}function aa(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new ia("app","Firebase",Vv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}function Jm(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Co,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw Wn.create("bad-app-name",{appName:String(s)});if(n||(n=Hm()),!n)throw Wn.create("no-options");const a=Pi.get(s);if(a){if(Ti(n,a.options)&&Ti(r,a.config))return a;throw Wn.create("duplicate-app",{appName:s})}const o=new Qy(s);for(const c of Io.values())o.addComponent(c);const l=new Bv(n,r,o);return Pi.set(s,l),l}function qv(e=Co){const t=Pi.get(e);if(!t&&e===Co&&Hm())return Jm();if(!t)throw Wn.create("no-app",{appName:e});return t}function Yn(e,t,n){var r;let s=(r=$v[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${t}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),An.warn(l.join(" "));return}wr(new Jn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="firebase-heartbeat-database",Hv=1,_s="firebase-heartbeat-store";let $a=null;function Zm(){return $a||($a=Xm(Uv,Hv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(_s)}catch(n){console.warn(n)}}}}).catch(e=>{throw Wn.create("idb-open",{originalErrorMessage:e.message})})),$a}async function Gv(e){try{const n=(await Zm()).transaction(_s),r=await n.objectStore(_s).get(eh(e));return await n.done,r}catch(t){if(t instanceof Ir)An.warn(t.message);else{const n=Wn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});An.warn(n.message)}}}async function Wc(e,t){try{const r=(await Zm()).transaction(_s,"readwrite");await r.objectStore(_s).put(t,eh(e)),await r.done}catch(n){if(n instanceof Ir)An.warn(n.message);else{const r=Wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function eh(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=1024,Yv=30;class Kv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Yc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Yv){const o=Jv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yc(),{heartbeatsToSend:r,unsentEntries:s}=Qv(this._heartbeatsCache.heartbeats),a=Um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return An.warn(n),""}}}function Yc(){return new Date().toISOString().substring(0,10)}function Qv(e,t=Wv){const n=[];let r=e.slice();for(const s of e){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Kc(n)>t){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pl()?gl().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Kc(e){return Um(JSON.stringify({version:2,heartbeats:e})).length}function Jv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(e){wr(new Jn("platform-logger",t=>new dv(t),"PRIVATE")),wr(new Jn("heartbeat",t=>new Kv(t),"PRIVATE")),Yn(Eo,Hc,e),Yn(Eo,Hc,"esm2017"),Yn("fire-js","")}Zv("");var eb="firebase",tb="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(eb,tb,"app");const th="@firebase/installations",vl="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=1e4,rh=`w:${vl}`,sh="FIS_v2",nb="https://firebaseinstallations.googleapis.com/v1",rb=60*60*1e3,sb="installations",ib="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},jr=new ia(sb,ib,ab);function ih(e){return e instanceof Ir&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah({projectId:e}){return`${nb}/projects/${e}/installations`}function oh(e){return{token:e.token,requestStatus:2,expiresIn:lb(e.expiresIn),creationTime:Date.now()}}async function lh(e,t){const r=(await t.json()).error;return jr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ch({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ob(e,{refreshToken:t}){const n=ch(e);return n.append("Authorization",cb(t)),n}async function uh(e){const t=await e();return t.status>=500&&t.status<600?e():t}function lb(e){return Number(e.replace("s","000"))}function cb(e){return`${sh} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=ah(e),s=ch(e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:sh,appId:e.appId,sdkVersion:rh},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await uh(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:oh(d.authToken)}}else throw await lh("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=/^[cdef][\w-]{21}$/,ko="";function hb(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=fb(e);return mb.test(n)?n:ko}catch{return ko}}function fb(e){return db(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map;function hh(e,t){const n=oa(e);fh(n,t),pb(n,t)}function fh(e,t){const n=mh.get(e);if(n)for(const r of n)r(t)}function pb(e,t){const n=gb();n&&n.postMessage({key:e,fid:t}),xb()}let mr=null;function gb(){return!mr&&"BroadcastChannel"in self&&(mr=new BroadcastChannel("[Firebase] FID Change"),mr.onmessage=e=>{fh(e.data.key,e.data.fid)}),mr}function xb(){mh.size===0&&mr&&(mr.close(),mr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebase-installations-database",vb=1,Sr="firebase-installations-store";let za=null;function bl(){return za||(za=Xm(yb,vb,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Sr)}}})),za}async function _i(e,t){const n=oa(e),s=(await bl()).transaction(Sr,"readwrite"),a=s.objectStore(Sr),o=await a.get(n);return await a.put(t,n),await s.done,(!o||o.fid!==t.fid)&&hh(e,t.fid),t}async function ph(e){const t=oa(e),r=(await bl()).transaction(Sr,"readwrite");await r.objectStore(Sr).delete(t),await r.done}async function la(e,t){const n=oa(e),s=(await bl()).transaction(Sr,"readwrite"),a=s.objectStore(Sr),o=await a.get(n),l=t(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&hh(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(e){let t;const n=await la(e.appConfig,r=>{const s=bb(r),a=wb(e,s);return t=a.registrationPromise,a.installationEntry});return n.fid===ko?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function bb(e){const t=e||{fid:hb(),registrationStatus:0};return gh(t)}function wb(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(jr.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=jb(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Sb(e)}:{installationEntry:t}}async function jb(e,t){try{const n=await ub(e,t);return _i(e.appConfig,n)}catch(n){throw ih(n)&&n.customData.serverCode===409?await ph(e.appConfig):await _i(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function Sb(e){let t=await Qc(e.appConfig);for(;t.registrationStatus===1;)await dh(100),t=await Qc(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await wl(e);return r||n}return t}function Qc(e){return la(e,t=>{if(!t)throw jr.create("installation-not-found");return gh(t)})}function gh(e){return Nb(e)?{fid:e.fid,registrationStatus:0}:e}function Nb(e){return e.registrationStatus===1&&e.registrationTime+nh<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb({appConfig:e,heartbeatServiceProvider:t},n){const r=Cb(e,n),s=ob(e,n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:rh,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await uh(()=>fetch(r,l));if(c.ok){const d=await c.json();return oh(d)}else throw await lh("Generate Auth Token",c)}function Cb(e,{fid:t}){return`${ah(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(e,t=!1){let n;const r=await la(e.appConfig,a=>{if(!xh(a))throw jr.create("not-registered");const o=a.authToken;if(!t&&Ab(o))return a;if(o.requestStatus===1)return n=Ib(e,t),a;{if(!navigator.onLine)throw jr.create("app-offline");const l=Pb(a);return n=kb(e,l),l}});return n?await n:r.authToken}async function Ib(e,t){let n=await Xc(e.appConfig);for(;n.authToken.requestStatus===1;)await dh(100),n=await Xc(e.appConfig);const r=n.authToken;return r.requestStatus===0?jl(e,t):r}function Xc(e){return la(e,t=>{if(!xh(t))throw jr.create("not-registered");const n=t.authToken;return _b(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function kb(e,t){try{const n=await Eb(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await _i(e.appConfig,r),n}catch(n){if(ih(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ph(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await _i(e.appConfig,r)}throw n}}function xh(e){return e!==void 0&&e.registrationStatus===2}function Ab(e){return e.requestStatus===2&&!Tb(e)}function Tb(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+rb}function Pb(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function _b(e){return e.requestStatus===1&&e.requestTime+nh<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(e){const t=e,{installationEntry:n,registrationPromise:r}=await wl(t);return r?r.catch(console.error):jl(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(e,t=!1){const n=e;return await Rb(n),(await jl(n,t)).token}async function Rb(e){const{registrationPromise:t}=await wl(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(e){if(!e||!e.options)throw Va("App Configuration");if(!e.name)throw Va("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Va(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Va(e){return jr.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="installations",Lb="installations-internal",Fb=e=>{const t=e.getProvider("app").getImmediate(),n=Ob(t),r=aa(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$b=e=>{const t=e.getProvider("app").getImmediate(),n=aa(t,yh).getImmediate();return{getId:()=>Mb(n),getToken:s=>Db(n,s)}};function zb(){wr(new Jn(yh,Fb,"PUBLIC")),wr(new Jn(Lb,$b,"PRIVATE"))}zb();Yn(th,vl);Yn(th,vl,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="analytics",Vb="firebase_id",Bb="origin",qb=60*1e3,Ub="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sl="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new Ym("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$t=new ia("analytics","Analytics",Hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(e){if(!e.startsWith(Sl)){const t=$t.create("invalid-gtag-resource",{gtagURL:e});return jt.warn(t.message),""}return e}function vh(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Wb(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Yb(e,t){const n=Wb("firebase-js-sdk-policy",{createScriptURL:Gb}),r=document.createElement("script"),s=`${Sl}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Kb(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Qb(e,t,n,r,s,a){const o=r[s];try{if(o)await t[o];else{const c=(await vh(n)).find(d=>d.measurementId===s);c&&await t[c.appId]}}catch(l){jt.error(l)}e("config",s,a)}async function Xb(e,t,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await vh(n);for(const c of o){const d=l.find(h=>h.measurementId===c),u=d&&t[d.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e("event",r,s||{})}catch(a){jt.error(a)}}function Jb(e,t,n,r){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await Xb(e,t,n,l,c)}else if(a==="config"){const[l,c]=o;await Qb(e,t,n,r,l,c)}else if(a==="consent"){const[l,c]=o;e("consent",l,c)}else if(a==="get"){const[l,c,d]=o;e("get",l,c,d)}else if(a==="set"){const[l]=o;e("set",l)}else e(a,...o)}catch(l){jt.error(l)}}return s}function Zb(e,t,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=Jb(a,e,t,n),{gtagCore:a,wrappedGtag:window[s]}}function ew(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Sl)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=30,nw=1e3;class rw{constructor(t={},n=nw){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const bh=new rw;function sw(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function iw(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:sw(r)},a=Ub.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw $t.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function aw(e,t=bh,n){const{appId:r,apiKey:s,measurementId:a}=e.options;if(!r)throw $t.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw $t.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new cw;return setTimeout(async()=>{l.abort()},qb),wh({appId:r,apiKey:s,measurementId:a},o,l,t)}async function wh(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=bh){var a;const{appId:o,measurementId:l}=e;try{await ow(r,t)}catch(c){if(l)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await iw(e);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!lw(d)){if(s.deleteThrottleMetadata(o),l)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const u=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?Vc(n,s.intervalMillis,tw):Vc(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),jt.debug(`Calling attemptFetch again in ${u} millis`),wh(e,h,r,s)}}function ow(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(a),r($t.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function lw(e){if(!(e instanceof Ir)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class cw{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function uw(e,t,n,r,s){if(s&&s.global){e("event",n,r);return}else{const a=await t,o=Object.assign(Object.assign({},r),{send_to:a});e("event",n,o)}}async function dw(e,t){const n=await e;window[`ga-disable-${n}`]=!t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(){if(pl())try{await gl()}catch(e){return jt.warn($t.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return jt.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hw(e,t,n,r,s,a,o){var l;const c=aw(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>jt.error(f)),t.push(c);const d=mw().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,d]);ew(a)||Yb(a,u.measurementId),s("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[Bb]="firebase",m.update=!0,h!=null&&(m[Vb]=h),s("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fw=class{constructor(t){this.app=t}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}},zr={},Jc=[];const Zc={};let Ba="dataLayer",pw="gtag",eu,jh,tu=!1;function gw(){const e=[];if(Gm()&&e.push("This is a browser extension environment."),Wm()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:t});jt.warn(n.message)}}function xw(e,t,n){gw();const r=e.options.appId;if(!r)throw $t.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $t.create("no-api-key");if(zr[r]!=null)throw $t.create("already-exists",{id:r});if(!tu){Kb(Ba);const{wrappedGtag:a,gtagCore:o}=Zb(zr,Jc,Zc,Ba,pw);jh=a,eu=o,tu=!0}return zr[r]=hw(e,Jc,Zc,t,eu,Ba,n),new fw(e)}function ca(e=qv()){e=xl(e);const t=aa(e,Mi);return t.isInitialized()?t.getImmediate():Sh(e)}function Sh(e,t={}){const n=aa(e,Mi);if(n.isInitialized()){const s=n.getImmediate();if(Ti(t,n.getOptions()))return s;throw $t.create("already-initialized")}return n.initialize({options:t})}async function Nh(){if(Gm()||!Wm()||!pl())return!1;try{return await gl()}catch{return!1}}function Eh(e,t){e=xl(e),dw(zr[e.app.options.appId],t).catch(n=>jt.error(n))}function Nl(e,t,n,r){e=xl(e),uw(jh,zr[e.app.options.appId],t,n,r).catch(s=>jt.error(s))}const nu="@firebase/analytics",ru="0.10.16";function yw(){wr(new Jn(Mi,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return xw(r,s,n)},"PUBLIC")),wr(new Jn("analytics-internal",e,"PRIVATE")),Yn(nu,ru),Yn(nu,ru,"esm2017");function e(t){try{const n=t.getProvider(Mi).getImmediate();return{logEvent:(r,s,a)=>Nl(n,r,s,a)}}catch(n){throw $t.create("interop-component-reg-failed",{reason:n})}}}yw();const vw=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:ca,initializeAnalytics:Sh,isSupported:Nh,logEvent:Nl,setAnalyticsCollectionEnabled:Eh},Symbol.toStringTag,{value:"Module"})),bw={apiKey:"AIzaSyAjiVgKin-J3S7zsirw9xImh4sOBxAwUuU",authDomain:"collectif-ile-feydeau----app.firebaseapp.com",databaseURL:"https://collectif-ile-feydeau----app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"collectif-ile-feydeau----app",storageBucket:"collectif-ile-feydeau----app.firebasestorage.app",messagingSenderId:"705686402200",appId:"1:705686402200:web:3e36a3b2c359a62be14ced",measurementId:"G-D6K43TLW5Y"};function ww(){return console.log("🔥 [Firebase] Utilisation de la configuration production"),bw}const qa=ww();let Ua=null;const jw=()=>{if(qa.apiKey)try{return console.log("🔥 [Firebase] Initialisation avec clé API:",qa.apiKey.substring(0,10)+"..."),Jm(qa)}catch(e){return console.warn("Erreur lors de l'initialisation de Firebase:",e),null}else return console.warn("Firebase non initialisé: clé API manquante"),null},El=()=>(Ua||(Ua=jw()),Ua);let Ao=null;const Sw=()=>{if(typeof window<"u"){const e=El();if(e)try{return Ao=ca(e),Ao}catch(t){console.warn("Erreur lors de l'initialisation de Firebase Analytics:",t)}}return null},Nw=()=>Ao;var Ch=(e=>(e.NAVIGATION="navigation",e.INTERACTION="interaction",e.CONTENT="content",e.MEDIA="media",e.PERFORMANCE="performance",e.ERROR="error",e.USER="user",e.FEATURE="feature",e.ONBOARDING="onboarding",e.COMMUNITY="community",e.PROGRAM="program",e.MAP="map",e.DONATION="donation",e))(Ch||{}),ee=(e=>(e.PAGE_VIEW="page_view",e.ROUTE_CHANGE="route_change",e.EXTERNAL_LINK="external_link",e.BACK="back",e.FORWARD="forward",e.CLICK="click",e.SWIPE="swipe",e.SCROLL="scroll",e.ZOOM="zoom",e.DRAG="drag",e.HOVER="hover",e.FOCUS="focus",e.BLUR="blur",e.VIEW="view",e.SEARCH="search",e.FILTER="filter",e.SORT="sort",e.SHARE="share",e.SAVE="save",e.UNSAVE="unsave",e.LIKE="like",e.UNLIKE="unlike",e.PLAY="play",e.PAUSE="pause",e.COMPLETE="complete",e.SEEK="seek",e.VOLUME_CHANGE="volume_change",e.FULLSCREEN="fullscreen",e.LOAD_TIME="load_time",e.FIRST_PAINT="first_paint",e.FIRST_CONTENTFUL_PAINT="first_contentful_paint",e.FIRST_INPUT_DELAY="first_input_delay",e.JS_ERROR="js_error",e.API_ERROR="api_error",e.RESOURCE_ERROR="resource_error",e.LOGIN="login",e.LOGOUT="logout",e.REGISTER="register",e.PROFILE_UPDATE="profile_update",e.FEATURE_ENABLE="feature_enable",e.FEATURE_DISABLE="feature_disable",e.FEATURE_USE="feature_use",e.ONBOARDING_START="onboarding_start",e.ONBOARDING_COMPLETE="onboarding_complete",e.ONBOARDING_SKIP="onboarding_skip",e.ONBOARDING_SLIDE_VIEW="onboarding_slide_view",e.CONTRIBUTION="contribution",e.COMMENT="comment",e.UPLOAD="upload",e.EVENT_VIEW="event_view",e.EVENT_DETAILS="event_details",e.EVENT_REMINDER="event_reminder",e.MAP_LOAD="map_load",e.LOCATION_VIEW="location_view",e.ROUTE_CALCULATE="route_calculate",e.USER_LOCATION="user_location",e.DONATION_START="donation_start",e.DONATION_COMPLETE="donation_complete",e.DONATION_CANCEL="donation_cancel",e))(ee||{});class Ew{trackEvent(t,n,r){try{const s=Nw();if(!s)return;const a=`${t}_${n}`,o={event_category:t,event_action:n,timestamp:new Date().toISOString(),...r};try{const l=typeof window<"u"&&window.location.search.includes("firebase_debug=1"),c=typeof window<"u"&&localStorage.getItem("analytics_debug")==="1";(l||c)&&(o.debug_mode=!0)}catch{}Nl(s,a,o)}catch(s){console.error("[Analytics] Erreur lors du tracking de l'événement:",s)}}trackPageView(t,n){this.trackEvent("navigation","page_view",{page_path:t,page_title:n})}trackRouteChange(t,n){this.trackEvent("navigation","route_change",{from_route:t,to_route:n})}trackInteraction(t,n,r){this.trackEvent("interaction",t,{element:n,...r})}trackContentInteraction(t,n,r,s){this.trackEvent("content",t,{content_type:n,content_id:r,...s})}trackMediaInteraction(t,n,r,s){this.trackEvent("media",t,{media_type:n,media_id:r,...s})}trackPerformance(t,n,r){this.trackEvent("performance",t,{value:n,...r})}trackError(t,n,r){this.trackEvent("error",t,{error_message:n,...r})}trackUserAction(t,n){this.trackEvent("user",t,n)}trackFeatureUse(t,n){this.trackEvent("feature","feature_use",{feature_name:t,...n})}trackOnboarding(t,n){this.trackEvent("onboarding",t,n)}trackMapInteraction(t,n){this.trackEvent("map",t,n)}trackProgramInteraction(t,n){this.trackEvent("program",t,n)}trackCommunityInteraction(t,n){this.trackEvent("community",t,n)}trackDonationInteraction(t,n){this.trackEvent("donation",t,n)}trackSwipe(t,n,r,s){this.trackEvent("interaction","swipe",{swipe_direction:t,swipe_source:n,swipe_success:r,...s})}startSession(){this.trackEvent("user","login",{session_start:Date.now()}),sessionStorage.setItem("session_start",Date.now().toString())}endSession(){const t=sessionStorage.getItem("session_start");if(t){const n=Date.now()-parseInt(t,10);this.trackEvent("user","logout",{session_duration:n})}}trackBuildingView(t,n){this.trackEvent("content","view",{content_type:"building",building_id:t,building_name:n})}trackBuildingHistoryView(t,n){this.trackEvent("content","view",{content_type:"building_history",building_id:t,section_title:n})}trackArtistView(t,n){this.trackEvent("content","view",{content_type:"artist",artist_id:t,artist_name:n})}trackConcertView(t,n,r){this.trackEvent("program","event_view",{event_id:t,event_title:n,event_date:r})}trackProgramCTA(t,n){this.trackEvent("program","click",{cta_action:t,event_id:n})}trackDonationPageOpen(t){this.trackEvent("donation","view",{page:"donation",source:t})}trackIntroVideo(t){const r={start:"play",complete:"complete",skip:"pause"}[t]||"play";this.trackEvent("media",r,{media_type:"intro_video"})}trackAudio(t,n,r){const a={play:"play",pause:"pause",seek:"seek",volume_change:"volume_change"}[t]||"play";this.trackEvent("media",a,{media_type:"audio",media_id:n,value:r})}}const B=new Ew,Cw=(e,t)=>B.trackPageView(e,t),Iw=(e,t,n)=>B.trackEvent(e,t,n),To=(e,t,n)=>B.trackInteraction(e,t,n),kw=(e,t,n,r)=>B.trackSwipe(e,t,n,r),Aw=(e,t)=>B.trackFeatureUse(e,t),Tw=2e3;let Ha=0;function Pw(){return Ha=(Ha+1)%Number.MAX_SAFE_INTEGER,Ha.toString()}const Ga=new Map,su=e=>{if(Ga.has(e))return;const t=setTimeout(()=>{Ga.delete(e),Ss({type:"REMOVE_TOAST",toastId:e})},Tw);Ga.set(e,t)},_w=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[...e.toasts,t.toast]};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?su(n):e.toasts.forEach(r=>{su(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},yi=[];let vi={toasts:[]};function Ss(e){vi=_w(vi,e),yi.forEach(t=>{t(vi)})}function ft(e){const t=Pw(),n=s=>Ss({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Ss({type:"DISMISS_TOAST",toastId:t});return Ss({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Cl(){const[e,t]=p.useState(vi);return p.useEffect(()=>(yi.push(t),()=>{const n=yi.indexOf(t);n>-1&&yi.splice(n,1)}),[e]),{...e,toast:ft,dismiss:n=>Ss({type:"DISMISS_TOAST",toastId:n})}}function Ih(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ih(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function kh(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ih(e))&&(r&&(r+=" "),r+=t);return r}const iu=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,au=kh,Ws=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return au(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const m=iu(u)||iu(h);return s[d][m]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...d,h,m]:d},[]);return au(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},Il="-",Mw=e=>{const t=Rw(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(Il);return l[0]===""&&l.length!==1&&l.shift(),Ah(l,t)||Dw(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Ah=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Ah(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Il);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},ou=/^\[(.+)\]$/,Dw=e=>{if(ou.test(e)){const t=ou.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Rw=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Lw(Object.entries(e.classGroups),n).forEach(([a,o])=>{Po(o,r,a,t)}),r},Po=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:lu(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(Ow(s)){Po(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Po(o,lu(t,a),n,r)})})},lu=(e,t)=>{let n=e;return t.split(Il).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Ow=e=>e.isThemeGetter,Lw=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,s]}):e,Fw=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},Th="!",$w=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let y=0;y<l.length;y++){let j=l[y];if(d===0){if(j===s&&(r||l.slice(y,y+a)===t)){c.push(l.slice(u,y)),u=y+a;continue}if(j==="/"){h=y;continue}}j==="["?d++:j==="]"&&d--}const m=c.length===0?l:l.substring(u),f=m.startsWith(Th),x=f?m.substring(1):m,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},zw=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Vw=e=>({cache:Fw(e.cacheSize),parseClassName:$w(e),...Mw(e)}),Bw=/\s+/,qw=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(Bw);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(d);let x=!!f,g=r(x?m.substring(0,f):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const y=zw(u).join(":"),j=h?y+Th:y,v=j+g;if(a.includes(v))continue;a.push(v);const b=s(g,x);for(let w=0;w<b.length;++w){const T=b[w];a.push(j+T)}l=d+(l.length>0?" "+l:l)}return l};function Uw(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Ph(t))&&(r&&(r+=" "),r+=n);return r}const Ph=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ph(e[r]))&&(n&&(n+=" "),n+=t);return n};function Hw(e,...t){let n,r,s,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=Vw(d),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=qw(c,n);return s(c,u),u}return function(){return a(Uw.apply(null,arguments))}}const Be=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},_h=/^\[(?:([a-z-]+):)?(.+)\]$/i,Gw=/^\d+\/\d+$/,Ww=new Set(["px","full","screen"]),Yw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Kw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jn=e=>Vr(e)||Ww.has(e)||Gw.test(e),_n=e=>as(e,"length",a0),Vr=e=>!!e&&!Number.isNaN(Number(e)),Wa=e=>as(e,"number",Vr),ds=e=>!!e&&Number.isInteger(Number(e)),Zw=e=>e.endsWith("%")&&Vr(e.slice(0,-1)),xe=e=>_h.test(e),Mn=e=>Yw.test(e),e0=new Set(["length","size","percentage"]),t0=e=>as(e,e0,Mh),n0=e=>as(e,"position",Mh),r0=new Set(["image","url"]),s0=e=>as(e,r0,l0),i0=e=>as(e,"",o0),ms=()=>!0,as=(e,t,n)=>{const r=_h.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},a0=e=>Kw.test(e)&&!Qw.test(e),Mh=()=>!1,o0=e=>Xw.test(e),l0=e=>Jw.test(e),c0=()=>{const e=Be("colors"),t=Be("spacing"),n=Be("blur"),r=Be("brightness"),s=Be("borderColor"),a=Be("borderRadius"),o=Be("borderSpacing"),l=Be("borderWidth"),c=Be("contrast"),d=Be("grayscale"),u=Be("hueRotate"),h=Be("invert"),m=Be("gap"),f=Be("gradientColorStops"),x=Be("gradientColorStopPositions"),g=Be("inset"),y=Be("margin"),j=Be("opacity"),v=Be("padding"),b=Be("saturate"),w=Be("scale"),T=Be("sepia"),E=Be("skew"),P=Be("space"),M=Be("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",xe,t],k=()=>[xe,t],$=()=>["",jn,_n],W=()=>["auto",Vr,xe],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",xe],S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Vr,xe];return{cacheSize:500,separator:":",theme:{colors:[ms],spacing:[jn,_n],blur:["none","",Mn,xe],brightness:K(),borderColor:[e],borderRadius:["none","","full",Mn,xe],borderSpacing:k(),borderWidth:$(),contrast:K(),grayscale:z(),hueRotate:K(),invert:z(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Zw,_n],inset:I(),margin:I(),opacity:K(),padding:k(),saturate:K(),scale:K(),sepia:z(),skew:K(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[Mn]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),xe]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ds,xe]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",ds,xe]}],"grid-cols":[{"grid-cols":[ms]}],"col-start-end":[{col:["auto",{span:["full",ds,xe]},xe]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[ms]}],"row-start-end":[{row:["auto",{span:[ds,xe]},xe]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,t]}],"min-w":[{"min-w":[xe,t,"min","max","fit"]}],"max-w":[{"max-w":[xe,t,"none","full","min","max","fit","prose",{screen:[Mn]},Mn]}],h:[{h:[xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Mn,_n]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wa]}],"font-family":[{font:[ms]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Vr,Wa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jn,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jn,_n]}],"underline-offset":[{"underline-offset":["auto",jn,xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),n0]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",t0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},s0]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[jn,xe]}],"outline-w":[{outline:[jn,_n]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[jn,_n]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Mn,i0]}],"shadow-color":[{shadow:[ms]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Mn,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ds,xe]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jn,_n,Wa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},u0=Hw(c0);function re(...e){return u0(kh(e))}const d0=Nx,Dh=p.forwardRef(({className:e,...t},n)=>i.jsx(sm,{ref:n,className:re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Dh.displayName=sm.displayName;const m0=Ws("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rh=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(im,{ref:r,className:re(m0({variant:t}),e),...n}));Rh.displayName=im.displayName;const Oh=p.forwardRef(({className:e,...t},n)=>i.jsx(am,{ref:n,className:re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Oh.displayName=am.displayName;const Lh=p.forwardRef(({className:e,...t},n)=>i.jsx(om,{ref:n,className:re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(br,{className:"h-4 w-4"})}));Lh.displayName=om.displayName;const Fh=p.forwardRef(({className:e,...t},n)=>i.jsx(lm,{ref:n,className:re("text-sm font-semibold",e),...t}));Fh.displayName=lm.displayName;const $h=p.forwardRef(({className:e,...t},n)=>i.jsx(cm,{ref:n,className:re("text-sm opacity-90",e),...t}));$h.displayName=cm.displayName;function h0(){const{toasts:e}=Cl();return i.jsxs(d0,{"data-swipe-direction":"right",swipeThreshold:10,children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return i.jsxs(Rh,{...a,"data-swipe-direction":"right",children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Fh,{children:n}),r&&i.jsx($h,{children:r})]}),s,i.jsx(Lh,{})]},t)}),i.jsx(Dh,{})]})}var bi={linear:function(e,t,n,r){var s=n-t;return s*e/r+t},easeInQuad:function(e,t,n,r){var s=n-t;return s*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){var s=n-t;return-s*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){var s=n-t;return-s*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var s=n-t;return-s*Math.cos(e/r*(Math.PI/2))+s+t},easeOutSine:function(e,t,n,r){var s=n-t;return s*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){var s=n-t;return-s/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){var s=n-t;return e==0?t:s*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var s=n-t;return e==r?t+s:s*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){var s=n-t;return e===0?t:e===r?t+s:(e/=r/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,r){var s=n-t;return-s*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){var s=n-t;return s*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t)},easeOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*e)*Math.sin((e*r-l)*(2*Math.PI)/o)+s+t)},easeInOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r/2)===2?t+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),e<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o)*.5+s+t)},easeInBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*(e/=r)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*((e=e/r-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),(e/=r/2)<1?a/2*(e*e*(((s*=1.525)+1)*e-s))+t:a/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},easeInBounce:function(e,t,n,r){var s=n-t,a;return a=bi.easeOutBounce(r-e,0,s,r),s-a+t},easeOutBounce:function(e,t,n,r){var s=n-t;return(e/=r)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){var s=n-t,a;return e<r/2?(a=bi.easeInBounce(e*2,0,s,r),a*.5+t):(a=bi.easeOutBounce(e*2-r,0,s,r),a*.5+s*.5+t)}},f0=bi;function p0(e){return e*Math.PI/180}function Dt(e,t){return e+Math.random()*(t-e)}function g0(e,t){return Math.floor(e+Math.random()*(t-e+1))}var Ns;(function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"})(Ns||(Ns={}));var Fn;(function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"})(Fn||(Fn={}));const x0=1e3/60;class y0{constructor(t,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=t,this.x=r,this.y=s,this.w=Dt(5,20),this.h=Dt(5,20),this.radius=Dt(5,10),this.vx=typeof o=="number"?Dt(-o,o):Dt(o.min,o.max),this.vy=typeof l=="number"?Dt(-l,0):Dt(l.min,l.max),this.shape=g0(0,2),this.angle=p0(Dt(0,360)),this.angularSpin=Dt(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Dt(0,1),this.rotationDirection=Dt(0,1)?Fn.Positive:Fn.Negative}update(t){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=t/x0;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===Fn.Positive?this.rotationDirection=Fn.Negative:this.rotateY<=-1&&this.rotationDirection===Fn.Negative&&(this.rotationDirection=Fn.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Ns.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ns.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ns.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class v0{constructor(t,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Dt(this.x,this.w+this.x),a=Dt(this.y,this.h+this.y);return new y0(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:d,recycle:u,numberOfPieces:h,debug:m,tweenFunction:f,tweenDuration:x}=this.getOptions();if(!d)return!1;const g=this.particles.length,y=u?g:l;if(y<h){c!==h&&(this.tweenProgress=0,this.tweenFrom=y,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const j=f(this.tweenProgress,this.tweenFrom,h,x),v=Math.round(j-y);for(let b=0;b<v;b++)this.particles.push(this.getParticle());this.particlesGenerated+=v}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${g}`,a.width-10,a.height-20));for(let j=this.particles.length-1;j>=0;j--){const v=this.particles[j];v.update(s),(v.y>a.height||v.y<-100||v.x>a.width+100||v.x<-100)&&(u&&y<=h?this.particles[j]=this.getParticle():this.removeParticleAt(j))}return g>0||y<h},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const kl={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:f0.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class b0{constructor(t,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...kl,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:c,context:d}=this,u=Math.min(s-this.lastFrameTime,50);if(l&&u<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?u%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new v0(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(t){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&n===!1&&this.update()}}const w0=F.createRef();class Al extends F.Component{constructor(t){super(t),this.canvas=F.createRef(),this.canvas=t.canvasRef||w0}componentDidMount(){if(this.canvas.current){const t=Ya(this.props)[0];this.confetti=new b0(this.canvas.current,t)}}componentDidUpdate(){const t=Ya(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,n]=Ya(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...n,style:r})}}Al.defaultProps={...kl};Al.displayName="ReactConfetti";function Ya(e){const t={},n={},r={},s=[...Object.keys(kl),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in e){const l=e[o];s.includes(o)?t[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[t,r,n]}const j0=F.forwardRef((e,t)=>i.jsx(Al,{canvasRef:t,...e})),S0=()=>{const[e,t]=p.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return p.useEffect(()=>{const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),e},wi=({trigger:e,duration:t=3e3,message:n,onComplete:r})=>{const[s,a]=p.useState(!1),{width:o,height:l}=S0(),c=o||window.innerWidth||document.documentElement.clientWidth||375,d=l||window.innerHeight||document.documentElement.clientHeight||667;return p.useEffect(()=>{if(e){console.log("Celebration triggered with message:",n),a(!0);const u=setTimeout(()=>{a(!1),r&&r()},t);return()=>clearTimeout(u)}},[e,t,n,r]),s?i.jsxs("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[i.jsx(j0,{width:c,height:d,recycle:!1,numberOfPieces:200,gravity:.2,tweenDuration:5e3}),n&&i.jsx("div",{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white bg-opacity-80 px-6 py-3 rounded-lg shadow-lg text-center",children:i.jsx("p",{className:"text-lg font-bold text-[#4a5d94]",children:n})})]}):null};var lt=(e=>(e.FIRST_EVENT_SAVED="first_event_saved",e.ALL_LOCATIONS_VISITED="all_locations_visited",e.MULTIPLE_EVENTS_SAVED="multiple_events_saved",e.NOTIFICATION_SET="notification_set",e.FIRST_LOCATION_VISITED="first_location_visited",e.THREE_LOCATIONS_VISITED="three_locations_visited",e.FIVE_LOCATIONS_VISITED="five_locations_visited",e))(lt||{});const N0=[{id:"first_event_saved",title:"Premier événement sauvegardé",description:"Vous avez sauvegardé votre premier événement",celebrationMessage:"Félicitations ! Vous avez sauvegardé votre premier événement !"},{id:"all_locations_visited",title:"Explorateur de l'Île",description:"Vous avez visité tous les lieux de l'Île Feydeau",celebrationMessage:"Bravo ! Vous avez visité tous les lieux de l'Île Feydeau !"},{id:"multiple_events_saved",title:"Collectionneur d'événements",description:"Vous avez sauvegardé 5 événements ou plus",celebrationMessage:"Impressionnant ! Vous êtes un vrai collectionneur d'événements !"},{id:"notification_set",title:"Toujours à l'heure",description:"Vous avez configuré votre première notification",celebrationMessage:"Super ! Vous ne manquerez plus aucun événement !"},{id:"first_location_visited",title:"Premier pas sur l'Île",description:"Vous avez visité votre premier lieu sur l'Île Feydeau",celebrationMessage:"Félicitations ! Vous avez fait votre premier pas sur l'Île Feydeau !"},{id:"three_locations_visited",title:"Explorateur en herbe",description:"Vous avez visité 3 lieux sur l'Île Feydeau",celebrationMessage:"Vous commencez à bien connaître l'Île Feydeau !"},{id:"five_locations_visited",title:"Guide de l'Île",description:"Vous avez visité 5 lieux sur l'Île Feydeau",celebrationMessage:"Impressionnant ! Vous pourriez maintenant guider les visiteurs sur l'Île Feydeau !"}],ji=e=>{try{const t=localStorage.getItem("unlockedAchievements");return t?!!JSON.parse(t)[e]:!1}catch(t){return console.error("Erreur dans isAchievementUnlocked:",t),!1}},Di=e=>{try{console.log(`[achievements] Tentative de déblocage de l'achievement: ${e}`);const t=ji(e);if(console.log(`[achievements] Achievement déjà débloqué: ${t}`),t)return console.log("[achievements] Achievement déjà débloqué, aucune action nécessaire"),!1;const n=localStorage.getItem("unlockedAchievements");console.log(`[achievements] Récupération des achievements débloqués depuis localStorage: ${n||"aucun"}`);let r={};if(n)try{r=JSON.parse(n),console.log("[achievements] Achievements débloqués parsés:",r)}catch(a){console.error("[achievements] Erreur lors de la lecture des réalisations débloquées:",a),r={}}const s=new Date().toISOString();r[e]=s,localStorage.setItem("unlockedAchievements",JSON.stringify(r)),console.log(`[achievements] Achievement ${e} débloqué à ${s}`);try{console.log("[achievements] Planification du déclenchement de l'événement d'achievement dans 100ms"),setTimeout(()=>{const a=Si(e);if(console.log(`[achievements] Message de célébration: ${a}`),a){console.log(`[achievements] Déclenchement de l'événement global app-achievement pour: ${e}`);const o=new CustomEvent("app-achievement",{detail:{type:e,message:a}});window.dispatchEvent(o),console.log("[achievements] Événement global dispatché avec succès")}else console.error(`[achievements] Impossible de trouver un message pour l'achievement ${e}`)},100)}catch(a){console.error("[achievements] Erreur lors du déclenchement de l'achievement:",a)}return!0}catch(t){return console.error("[achievements] Erreur globale dans unlockAchievement:",t),!1}},Si=e=>{const t=N0.find(n=>n.id===e);return t?t.celebrationMessage:null};var cu=["light","dark"],E0="(prefers-color-scheme: dark)",C0=p.createContext(void 0),I0={setTheme:e=>{},themes:[]},k0=()=>{var e;return(e=p.useContext(C0))!=null?e:I0};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let d=a==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?cu.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,y=!0)=>{let j=o?o[x]:x,v=g?x+"|| ''":`'${j}'`,b="";return s&&y&&!g&&cu.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),n==="class"?g||j?b+=`c.add(${v})`:b+="null":j&&(b+=`d[s](n,${v})`),b},f=e?`!function(){${u}${m(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${E0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var A0=e=>{switch(e){case"success":return _0;case"info":return D0;case"warning":return M0;case"error":return R0;default:return null}},T0=Array(12).fill(0),P0=({visible:e})=>F.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},F.createElement("div",{className:"sonner-spinner"},T0.map((t,n)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),_0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),M0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),D0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),R0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),O0=()=>{let[e,t]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},_o=1,L0=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:_o++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0;return r.then(async a=>{if($0(a)&&!a.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:n,type:"error",message:o,description:l})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=t.finally)==null||a.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||_o++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Lt=new L0,F0=(e,t)=>{let n=(t==null?void 0:t.id)||_o++;return Lt.addToast({title:e,...t,id:n}),n},$0=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",z0=F0,V0=()=>Lt.toasts;Object.assign(z0,{success:Lt.success,info:Lt.info,warning:Lt.warning,error:Lt.error,custom:Lt.custom,message:Lt.message,promise:Lt.promise,dismiss:Lt.dismiss,loading:Lt.loading},{getHistory:V0});function B0(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}B0(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ri(e){return e.label!==void 0}var q0=3,U0="32px",H0=4e3,G0=356,W0=14,Y0=20,K0=200;function Q0(...e){return e.filter(Boolean).join(" ")}var X0=e=>{var t,n,r,s,a,o,l,c,d,u;let{invert:h,toast:m,unstyled:f,interacting:x,setHeights:g,visibleToasts:y,heights:j,index:v,toasts:b,expanded:w,removeToast:T,defaultRichColors:E,closeButton:P,style:M,cancelButtonStyle:A,actionButtonStyle:R,className:I="",descriptionClassName:k="",duration:$,position:W,gap:Q,loadingIcon:J,expandByDefault:te,classNames:D,icons:z,closeButtonAriaLabel:S="Close toast",pauseWhenPageIsHidden:K,cn:se}=e,[N,oe]=F.useState(!1),[Re,ae]=F.useState(!1),[Te,Ne]=F.useState(!1),[_e,G]=F.useState(!1),[ce,ge]=F.useState(0),[ze,Et]=F.useState(0),en=F.useRef(null),ut=F.useRef(null),Wt=v===0,C=v+1<=y,_=m.type,L=m.dismissible!==!1,Z=m.className||"",X=m.descriptionClassName||"",H=F.useMemo(()=>j.findIndex(ue=>ue.toastId===m.id)||0,[j,m.id]),ie=F.useMemo(()=>{var ue;return(ue=m.closeButton)!=null?ue:P},[m.closeButton,P]),fe=F.useMemo(()=>m.duration||$||H0,[m.duration,$]),O=F.useRef(0),q=F.useRef(0),le=F.useRef(0),he=F.useRef(null),[Se,it]=W.split("-"),Vt=F.useMemo(()=>j.reduce((ue,Ve,Oe)=>Oe>=H?ue:ue+Ve.height,0),[j,H]),gt=O0(),wn=m.invert||h,Bt=_==="loading";q.current=F.useMemo(()=>H*Q+Vt,[H,Vt]),F.useEffect(()=>{oe(!0)},[]),F.useLayoutEffect(()=>{if(!N)return;let ue=ut.current,Ve=ue.style.height;ue.style.height="auto";let Oe=ue.getBoundingClientRect().height;ue.style.height=Ve,Et(Oe),g(tn=>tn.find(nn=>nn.toastId===m.id)?tn.map(nn=>nn.toastId===m.id?{...nn,height:Oe}:nn):[{toastId:m.id,height:Oe,position:m.position},...tn])},[N,m.title,m.description,g,m.id]);let We=F.useCallback(()=>{ae(!0),ge(q.current),g(ue=>ue.filter(Ve=>Ve.toastId!==m.id)),setTimeout(()=>{T(m)},K0)},[m,T,g,q]);F.useEffect(()=>{if(m.promise&&_==="loading"||m.duration===1/0||m.type==="loading")return;let ue,Ve=fe;return w||x||K&&gt?(()=>{if(le.current<O.current){let Oe=new Date().getTime()-O.current;Ve=Ve-Oe}le.current=new Date().getTime()})():Ve!==1/0&&(O.current=new Date().getTime(),ue=setTimeout(()=>{var Oe;(Oe=m.onAutoClose)==null||Oe.call(m,m),We()},Ve)),()=>clearTimeout(ue)},[w,x,te,m,fe,We,m.promise,_,K,gt]),F.useEffect(()=>{let ue=ut.current;if(ue){let Ve=ue.getBoundingClientRect().height;return Et(Ve),g(Oe=>[{toastId:m.id,height:Ve,position:m.position},...Oe]),()=>g(Oe=>Oe.filter(tn=>tn.toastId!==m.id))}},[g,m.id]),F.useEffect(()=>{m.delete&&We()},[We,m.delete]);function Pn(){return z!=null&&z.loading?F.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},z.loading):J?F.createElement("div",{className:"sonner-loader","data-visible":_==="loading"},J):F.createElement(P0,{visible:_==="loading"})}return F.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ut,className:se(I,Z,D==null?void 0:D.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[_],(n=m==null?void 0:m.classNames)==null?void 0:n[_]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:E,"data-styled":!(m.jsx||m.unstyled||f),"data-mounted":N,"data-promise":!!m.promise,"data-removed":Re,"data-visible":C,"data-y-position":Se,"data-x-position":it,"data-index":v,"data-front":Wt,"data-swiping":Te,"data-dismissible":L,"data-type":_,"data-invert":wn,"data-swipe-out":_e,"data-expanded":!!(w||te&&N),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${Re?ce:q.current}px`,"--initial-height":te?"auto":`${ze}px`,...M,...m.style},onPointerDown:ue=>{Bt||!L||(en.current=new Date,ge(q.current),ue.target.setPointerCapture(ue.pointerId),ue.target.tagName!=="BUTTON"&&(Ne(!0),he.current={x:ue.clientX,y:ue.clientY}))},onPointerUp:()=>{var ue,Ve,Oe,tn;if(_e||!L)return;he.current=null;let nn=Number(((ue=ut.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ei=new Date().getTime()-((Ve=en.current)==null?void 0:Ve.getTime()),wx=Math.abs(nn)/ei;if(Math.abs(nn)>=Y0||wx>.11){ge(q.current),(Oe=m.onDismiss)==null||Oe.call(m,m),We(),G(!0);return}(tn=ut.current)==null||tn.style.setProperty("--swipe-amount","0px"),Ne(!1)},onPointerMove:ue=>{var Ve;if(!he.current||!L)return;let Oe=ue.clientY-he.current.y,tn=ue.clientX-he.current.x,nn=(Se==="top"?Math.min:Math.max)(0,Oe),ei=ue.pointerType==="touch"?10:2;Math.abs(nn)>ei?(Ve=ut.current)==null||Ve.style.setProperty("--swipe-amount",`${Oe}px`):Math.abs(tn)>ei&&(he.current=null)}},ie&&!m.jsx?F.createElement("button",{"aria-label":S,"data-disabled":Bt,"data-close-button":!0,onClick:Bt||!L?()=>{}:()=>{var ue;We(),(ue=m.onDismiss)==null||ue.call(m,m)},className:se(D==null?void 0:D.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||F.isValidElement(m.title)?m.jsx||m.title:F.createElement(F.Fragment,null,_||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:se(D==null?void 0:D.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Pn():null,m.type!=="loading"?m.icon||(z==null?void 0:z[_])||A0(_):null):null,F.createElement("div",{"data-content":"",className:se(D==null?void 0:D.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},F.createElement("div",{"data-title":"",className:se(D==null?void 0:D.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?F.createElement("div",{"data-description":"",className:se(k,X,D==null?void 0:D.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),F.isValidElement(m.cancel)?m.cancel:m.cancel&&ri(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:ue=>{var Ve,Oe;ri(m.cancel)&&L&&((Oe=(Ve=m.cancel).onClick)==null||Oe.call(Ve,ue),We())},className:se(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,F.isValidElement(m.action)?m.action:m.action&&ri(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:ue=>{var Ve,Oe;ri(m.action)&&(ue.defaultPrevented||((Oe=(Ve=m.action).onClick)==null||Oe.call(Ve,ue),We()))},className:se(D==null?void 0:D.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function uu(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var J0=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:m=q0,toastOptions:f,dir:x=uu(),gap:g=W0,loadingIcon:y,icons:j,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:b,cn:w=Q0}=e,[T,E]=F.useState([]),P=F.useMemo(()=>Array.from(new Set([n].concat(T.filter(K=>K.position).map(K=>K.position)))),[T,n]),[M,A]=F.useState([]),[R,I]=F.useState(!1),[k,$]=F.useState(!1),[W,Q]=F.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=F.useRef(null),te=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=F.useRef(null),z=F.useRef(!1),S=F.useCallback(K=>{var se;(se=T.find(N=>N.id===K.id))!=null&&se.delete||Lt.dismiss(K.id),E(N=>N.filter(({id:oe})=>oe!==K.id))},[T]);return F.useEffect(()=>Lt.subscribe(K=>{if(K.dismiss){E(se=>se.map(N=>N.id===K.id?{...N,delete:!0}:N));return}setTimeout(()=>{xy.flushSync(()=>{E(se=>{let N=se.findIndex(oe=>oe.id===K.id);return N!==-1?[...se.slice(0,N),{...se[N],...K},...se.slice(N+1)]:[K,...se]})})})}),[]),F.useEffect(()=>{if(c!=="system"){Q(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:K})=>{Q(K?"dark":"light")})},[c]),F.useEffect(()=>{T.length<=1&&I(!1)},[T]),F.useEffect(()=>{let K=se=>{var N,oe;r.every(Re=>se[Re]||se.code===Re)&&(I(!0),(N=J.current)==null||N.focus()),se.code==="Escape"&&(document.activeElement===J.current||(oe=J.current)!=null&&oe.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[r]),F.useEffect(()=>{if(J.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,z.current=!1)}},[J.current]),T.length?F.createElement("section",{"aria-label":`${v} ${te}`,tabIndex:-1},P.map((K,se)=>{var N;let[oe,Re]=K.split("-");return F.createElement("ol",{key:K,dir:x==="auto"?uu():x,tabIndex:-1,ref:J,className:o,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":oe,"data-x-position":Re,style:{"--front-toast-height":`${((N=M[0])==null?void 0:N.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||U0,"--width":`${G0}px`,"--gap":`${g}px`,...h},onBlur:ae=>{z.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(z.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||z.current||(z.current=!0,D.current=ae.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{k||I(!1)},onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},T.filter(ae=>!ae.position&&se===0||ae.position===K).map((ae,Te)=>{var Ne,_e;return F.createElement(X0,{key:ae.id,icons:j,index:Te,toast:ae,defaultRichColors:d,duration:(Ne=f==null?void 0:f.duration)!=null?Ne:u,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:t,visibleToasts:m,closeButton:(_e=f==null?void 0:f.closeButton)!=null?_e:a,interacting:k,position:K,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:S,toasts:T.filter(G=>G.position==ae.position),heights:M.filter(G=>G.position==ae.position),setHeights:A,expandByDefault:s,gap:g,loadingIcon:y,expanded:R,pauseWhenPageIsHidden:b,cn:w})}))})):null};const Z0=({...e})=>{const{theme:t="system"}=k0();return i.jsx(J0,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[ua,mM]=ss("Tooltip",[ea]),da=ea(),zh="TooltipProvider",ej=700,Mo="tooltip.open",[tj,Tl]=ua(zh),Vh=e=>{const{__scopeTooltip:t,delayDuration:n=ej,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,[o,l]=p.useState(!0),c=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),i.jsx(tj,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(u=>{c.current=u},[]),disableHoverableContent:s,children:a})};Vh.displayName=zh;var ma="Tooltip",[nj,ha]=ua(ma),Bh=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=Tl(ma,e.__scopeTooltip),d=da(t),[u,h]=p.useState(null),m=jo(),f=p.useRef(0),x=o??c.disableHoverableContent,g=l??c.delayDuration,y=p.useRef(!1),[j=!1,v]=ta({prop:r,defaultProp:s,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(Mo))):c.onClose(),a==null||a(P)}}),b=p.useMemo(()=>j?y.current?"delayed-open":"instant-open":"closed",[j]),w=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y.current=!1,v(!0)},[v]),T=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),E=p.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,v(!0),f.current=0},g)},[g,v]);return p.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),i.jsx(fm,{...d,children:i.jsx(nj,{scope:t,contentId:m,open:j,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:p.useCallback(()=>{x?T():(window.clearTimeout(f.current),f.current=0)},[T,x]),onOpen:w,onClose:T,disableHoverableContent:x,children:n})})};Bh.displayName=ma;var Do="TooltipTrigger",qh=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ha(Do,n),a=Tl(Do,n),o=da(n),l=p.useRef(null),c=tt(t,l,s.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),h=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(um,{asChild:!0,...o,children:i.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:me(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:me(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:me(e.onBlur,s.onClose),onClick:me(e.onClick,s.onClose)})})});qh.displayName=Do;var rj="TooltipPortal",[hM,sj]=ua(rj,{forceMount:void 0}),es="TooltipContent",Uh=p.forwardRef((e,t)=>{const n=sj(es,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=ha(es,e.__scopeTooltip);return i.jsx(vn,{present:r||o.open,children:o.disableHoverableContent?i.jsx(Hh,{side:s,...a,ref:t}):i.jsx(ij,{side:s,...a,ref:t})})}),ij=p.forwardRef((e,t)=>{const n=ha(es,e.__scopeTooltip),r=Tl(es,e.__scopeTooltip),s=p.useRef(null),a=tt(t,s),[o,l]=p.useState(null),{trigger:c,onClose:d}=n,u=s.current,{onPointerInTransitChange:h}=r,m=p.useCallback(()=>{l(null),h(!1)},[h]),f=p.useCallback((x,g)=>{const y=x.currentTarget,j={x:x.clientX,y:x.clientY},v=cj(j,y.getBoundingClientRect()),b=uj(j,v),w=dj(g.getBoundingClientRect()),T=hj([...b,...w]);l(T),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&u){const x=y=>f(y,u),g=y=>f(y,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,f,m]),p.useEffect(()=>{if(o){const x=g=>{const y=g.target,j={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),b=!mj(j,o);v?m():b&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),i.jsx(Hh,{...e,ref:a})}),[aj,oj]=ua(ma,{isInside:!1}),Hh=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=ha(es,n),d=da(n),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(Mo,u),()=>document.removeEventListener(Mo,u)),[u]),p.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),i.jsx(dm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:i.jsxs(mm,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(Ex,{children:r}),i.jsx(aj,{scope:n,isInside:!0,children:i.jsx(Cx,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Uh.displayName=es;var Gh="TooltipArrow",lj=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=da(n);return oj(Gh,n).isInside?null:i.jsx(hm,{...s,...r,ref:t})});lj.displayName=Gh;function cj(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function uj(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function dj(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function mj(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function hj(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),fj(t)}function fj(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var pj=Vh,gj=Bh,xj=qh,Wh=Uh;const Yh=pj,yj=gj,vj=xj,Kh=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Wh,{ref:r,sideOffset:t,className:re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Kh.displayName=Wh.displayName;var fa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pa=typeof window>"u"||"Deno"in globalThis;function Kt(){}function bj(e,t){return typeof e=="function"?e(t):e}function wj(e){return typeof e=="number"&&e>=0&&e!==1/0}function jj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function du(e,t){return typeof e=="function"?e(t):e}function Sj(e,t){return typeof e=="function"?e(t):e}function mu(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Pl(o,t.options))return!1}else if(!Ds(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function hu(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Ms(t.options.mutationKey)!==Ms(a))return!1}else if(!Ds(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Pl(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ms)(e)}function Ms(e){return JSON.stringify(e,(t,n)=>Ro(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ds(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Ds(e[n],t[n])):!1}function Qh(e,t){if(e===t)return e;const n=fu(e)&&fu(t);if(n||Ro(e)&&Ro(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Qh(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function fu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ro(e){if(!pu(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!pu(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function pu(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nj(e){return new Promise(t=>{setTimeout(t,e)})}function Ej(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Qh(e,t):t}function Cj(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Ij(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var _l=Symbol();function Xh(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===_l?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var pr,Vn,Hr,Qd,kj=(Qd=class extends fa{constructor(){super();ke(this,pr);ke(this,Vn);ke(this,Hr);ve(this,Hr,t=>{if(!pa&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){V(this,Vn)||this.setEventListener(V(this,Hr))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,Vn))==null||t.call(this),ve(this,Vn,void 0))}setEventListener(t){var n;ve(this,Hr,t),(n=V(this,Vn))==null||n.call(this),ve(this,Vn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){V(this,pr)!==t&&(ve(this,pr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof V(this,pr)=="boolean"?V(this,pr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pr=new WeakMap,Vn=new WeakMap,Hr=new WeakMap,Qd),Jh=new kj,Gr,Bn,Wr,Xd,Aj=(Xd=class extends fa{constructor(){super();ke(this,Gr,!0);ke(this,Bn);ke(this,Wr);ve(this,Wr,t=>{if(!pa&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,Bn)||this.setEventListener(V(this,Wr))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,Bn))==null||t.call(this),ve(this,Bn,void 0))}setEventListener(t){var n;ve(this,Wr,t),(n=V(this,Bn))==null||n.call(this),ve(this,Bn,t(this.setOnline.bind(this)))}setOnline(t){V(this,Gr)!==t&&(ve(this,Gr,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return V(this,Gr)}},Gr=new WeakMap,Bn=new WeakMap,Wr=new WeakMap,Xd),Ri=new Aj;function Tj(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function Pj(e){return Math.min(1e3*2**e,3e4)}function Zh(e){return(e??"online")==="online"?Ri.isOnline():!0}var ef=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ka(e){return e instanceof ef}function tf(e){let t=!1,n=0,r=!1,s;const a=Tj(),o=g=>{var y;r||(m(new ef(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Jh.isFocused()&&(e.networkMode==="always"||Ri.isOnline())&&e.canRun(),u=()=>Zh(e.networkMode)&&e.canRun(),h=g=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,g),s==null||s(),a.resolve(g))},m=g=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,g),s==null||s(),a.reject(g))},f=()=>new Promise(g=>{var y;s=j=>{(r||d())&&g(j)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(r)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(j){g=Promise.reject(j)}Promise.resolve(g).then(h).catch(j=>{var E;if(r)return;const v=e.retry??(pa?0:3),b=e.retryDelay??Pj,w=typeof b=="function"?b(n,j):b,T=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,j);if(t||!T){m(j);return}n++,(E=e.onFail)==null||E.call(e,n,j),Nj(w).then(()=>d()?void 0:f()).then(()=>{t?m(j):x()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():f().then(x),a)}}function _j(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var vt=_j(),gr,Jd,nf=(Jd=class{constructor(){ke(this,gr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wj(this.gcTime)&&ve(this,gr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pa?1/0:5*60*1e3))}clearGcTimeout(){V(this,gr)&&(clearTimeout(V(this,gr)),ve(this,gr,void 0))}},gr=new WeakMap,Jd),Yr,Kr,qt,mt,Us,xr,Qt,Nn,Zd,Mj=(Zd=class extends nf{constructor(t){super();ke(this,Qt);ke(this,Yr);ke(this,Kr);ke(this,qt);ke(this,mt);ke(this,Us);ke(this,xr);ve(this,xr,!1),ve(this,Us,t.defaultOptions),this.setOptions(t.options),this.observers=[],ve(this,qt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ve(this,Yr,Rj(this.options)),this.state=t.state??V(this,Yr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=V(this,mt))==null?void 0:t.promise}setOptions(t){this.options={...V(this,Us),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,qt).remove(this)}setData(t,n){const r=Ej(this.state.data,t,this.options);return dt(this,Qt,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){dt(this,Qt,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=V(this,mt))==null?void 0:r.promise;return(s=V(this,mt))==null||s.cancel(t),n?n.then(Kt).catch(Kt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,Yr))}isActive(){return this.observers.some(t=>Sj(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_l||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!jj(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=V(this,mt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=V(this,mt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),V(this,qt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(V(this,mt)&&(V(this,xr)?V(this,mt).cancel({revert:!0}):V(this,mt).cancelRetry()),this.scheduleGc()),V(this,qt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||dt(this,Qt,Nn).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(V(this,mt))return V(this,mt).continueRetry(),V(this,mt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ve(this,xr,!0),r.signal)})},a=()=>{const h=Xh(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return s(m),ve(this,xr,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),ve(this,Kr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&dt(this,Qt,Nn).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,f,x,g;Ka(h)&&h.silent||dt(this,Qt,Nn).call(this,{type:"error",error:h}),Ka(h)||((f=(m=V(this,qt).config).onError)==null||f.call(m,h,this),(g=(x=V(this,qt).config).onSettled)==null||g.call(x,this.state.data,h,this)),this.scheduleGc()};return ve(this,mt,tf({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,f,x,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){l(y);return}(f=(m=V(this,qt).config).onSuccess)==null||f.call(m,h,this),(g=(x=V(this,qt).config).onSettled)==null||g.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{dt(this,Qt,Nn).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{dt(this,Qt,Nn).call(this,{type:"pause"})},onContinue:()=>{dt(this,Qt,Nn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,mt).start()}},Yr=new WeakMap,Kr=new WeakMap,qt=new WeakMap,mt=new WeakMap,Us=new WeakMap,xr=new WeakMap,Qt=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Dj(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Ka(s)&&s.revert&&V(this,Kr)?{...V(this,Kr),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),vt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),V(this,qt).notify({query:this,type:"updated",action:t})})},Zd);function Dj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zh(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var on,em,Oj=(em=class extends fa{constructor(t={}){super();ke(this,on);this.config=t,ve(this,on,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Pl(s,n);let o=this.get(a);return o||(o=new Mj({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){V(this,on).has(t.queryHash)||(V(this,on).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=V(this,on).get(t.queryHash);n&&(t.destroy(),n===t&&V(this,on).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return V(this,on).get(t)}getAll(){return[...V(this,on).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>mu(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>mu(t,r)):n}notify(t){vt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){vt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},on=new WeakMap,em),ln,xt,yr,cn,Ln,tm,Lj=(tm=class extends nf{constructor(t){super();ke(this,cn);ke(this,ln);ke(this,xt);ke(this,yr);this.mutationId=t.mutationId,ve(this,xt,t.mutationCache),ve(this,ln,[]),this.state=t.state||Fj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){V(this,ln).includes(t)||(V(this,ln).push(t),this.clearGcTimeout(),V(this,xt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ve(this,ln,V(this,ln).filter(n=>n!==t)),this.scheduleGc(),V(this,xt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){V(this,ln).length||(this.state.status==="pending"?this.scheduleGc():V(this,xt).remove(this))}continue(){var t;return((t=V(this,yr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,l,c,d,u,h,m,f,x,g,y,j,v,b,w,T,E,P;ve(this,yr,tf({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,A)=>{dt(this,cn,Ln).call(this,{type:"failed",failureCount:M,error:A})},onPause:()=>{dt(this,cn,Ln).call(this,{type:"pause"})},onContinue:()=>{dt(this,cn,Ln).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,xt).canRun(this)}));const n=this.state.status==="pending",r=!V(this,yr).canStart();try{if(!n){dt(this,cn,Ln).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=V(this,xt).config).onMutate)==null?void 0:a.call(s,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&dt(this,cn,Ln).call(this,{type:"pending",context:A,variables:t,isPaused:r})}const M=await V(this,yr).start();return await((d=(c=V(this,xt).config).onSuccess)==null?void 0:d.call(c,M,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,M,t,this.state.context)),await((f=(m=V(this,xt).config).onSettled)==null?void 0:f.call(m,M,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,M,null,t,this.state.context)),dt(this,cn,Ln).call(this,{type:"success",data:M}),M}catch(M){try{throw await((j=(y=V(this,xt).config).onError)==null?void 0:j.call(y,M,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,M,t,this.state.context)),await((T=(w=V(this,xt).config).onSettled)==null?void 0:T.call(w,void 0,M,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,M,t,this.state.context)),M}finally{dt(this,cn,Ln).call(this,{type:"error",error:M})}}finally{V(this,xt).runNext(this)}}},ln=new WeakMap,xt=new WeakMap,yr=new WeakMap,cn=new WeakSet,Ln=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vt.batch(()=>{V(this,ln).forEach(r=>{r.onMutationUpdate(t)}),V(this,xt).notify({mutation:this,type:"updated",action:t})})},tm);function Fj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ot,Hs,nm,$j=(nm=class extends fa{constructor(t={}){super();ke(this,Ot);ke(this,Hs);this.config=t,ve(this,Ot,new Map),ve(this,Hs,Date.now())}build(t,n,r){const s=new Lj({mutationCache:this,mutationId:++ti(this,Hs)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=si(t),r=V(this,Ot).get(n)??[];r.push(t),V(this,Ot).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=si(t);if(V(this,Ot).has(n)){const s=(r=V(this,Ot).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?V(this,Ot).delete(n):V(this,Ot).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=V(this,Ot).get(si(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=V(this,Ot).get(si(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){vt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...V(this,Ot).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>hu(n,r))}findAll(t={}){return this.getAll().filter(n=>hu(t,n))}notify(t){vt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return vt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Kt))))}},Ot=new WeakMap,Hs=new WeakMap,nm);function si(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function gu(e){return{onFetch:(t,n)=>{var u,h,m,f,x;const r=t.options,s=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},j=Xh(t.options,t.fetchOptions),v=async(b,w,T)=>{if(g)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const E={queryKey:t.queryKey,pageParam:w,direction:T?"backward":"forward",meta:t.options.meta};y(E);const P=await j(E),{maxPages:M}=t.options,A=T?Ij:Cj;return{pages:A(b.pages,P,M),pageParams:A(b.pageParams,w,M)}};if(s&&a.length){const b=s==="backward",w=b?zj:xu,T={pages:a,pageParams:o},E=w(r,T);l=await v(T,E,b)}else{const b=e??a.length;do{const w=c===0?o[0]??r.initialPageParam:xu(r,l);if(c>0&&w==null)break;l=await v(l,w),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function xu(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function zj(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ke,qn,Un,Qr,Xr,Hn,Jr,Zr,rm,Vj=(rm=class{constructor(e={}){ke(this,Ke);ke(this,qn);ke(this,Un);ke(this,Qr);ke(this,Xr);ke(this,Hn);ke(this,Jr);ke(this,Zr);ve(this,Ke,e.queryCache||new Oj),ve(this,qn,e.mutationCache||new $j),ve(this,Un,e.defaultOptions||{}),ve(this,Qr,new Map),ve(this,Xr,new Map),ve(this,Hn,0)}mount(){ti(this,Hn)._++,V(this,Hn)===1&&(ve(this,Jr,Jh.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Ke).onFocus())})),ve(this,Zr,Ri.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Ke).onOnline())})))}unmount(){var e,t;ti(this,Hn)._--,V(this,Hn)===0&&((e=V(this,Jr))==null||e.call(this),ve(this,Jr,void 0),(t=V(this,Zr))==null||t.call(this),ve(this,Zr,void 0))}isFetching(e){return V(this,Ke).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,qn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=V(this,Ke).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=V(this,Ke).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(du(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return V(this,Ke).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=V(this,Ke).get(r.queryHash),a=s==null?void 0:s.state.data,o=bj(t,a);if(o!==void 0)return V(this,Ke).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return vt.batch(()=>V(this,Ke).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=V(this,Ke).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=V(this,Ke);vt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=V(this,Ke),r={type:"active",...e};return vt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=vt.batch(()=>V(this,Ke).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Kt).catch(Kt)}invalidateQueries(e={},t={}){return vt.batch(()=>{if(V(this,Ke).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=vt.batch(()=>V(this,Ke).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Kt)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Kt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=V(this,Ke).build(this,t);return n.isStaleByTime(du(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Kt).catch(Kt)}fetchInfiniteQuery(e){return e.behavior=gu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Kt).catch(Kt)}ensureInfiniteQueryData(e){return e.behavior=gu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ri.isOnline()?V(this,qn).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,Ke)}getMutationCache(){return V(this,qn)}getDefaultOptions(){return V(this,Un)}setDefaultOptions(e){ve(this,Un,e)}setQueryDefaults(e,t){V(this,Qr).set(Ms(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,Qr).values()];let n={};return t.forEach(r=>{Ds(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){V(this,Xr).set(Ms(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,Xr).values()];let n={};return t.forEach(r=>{Ds(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,Un).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Pl(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===_l&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...V(this,Un).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,Ke).clear(),V(this,qn).clear()}},Ke=new WeakMap,qn=new WeakMap,Un=new WeakMap,Qr=new WeakMap,Xr=new WeakMap,Hn=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,rm),Bj=p.createContext(void 0),qj=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(Bj.Provider,{value:e,children:t}));const Uj={info:"#4a5d94",warn:"#ff7a45",error:"#e53935",debug:"#2e7d32"},Qa=[],Hj=100;function hr(e,t,n="info",r){if(n==="info"&&["Rendu du marqueur utilisateur","Position utilisateur mise à jour","Position utilisateur mise à jour sur la carte","redimensionné","Marqueur utilisateur","Rendu du marqueur","Position utilisateur"].some(u=>t.includes(u)||r&&JSON.stringify(r).includes(u))&&!t.includes("Toast d'éloignement"))return;const s=new Date,o=`[${s.toISOString().split("T")[1].split(".")[0]}][${e}]`,l=`color: ${Uj[n]}; font-weight: bold`;switch(Qa.push({timestamp:s.toISOString(),module:e,message:t,level:n,data:r}),Qa.length>Hj&&Qa.shift(),n){case"info":console.log(`%c${o} ${t}`,l,r||"");break;case"warn":console.warn(`%c${o} ${t}`,l,r||"");break;case"error":console.error(`%c${o} ${t}`,l,r||"");break;case"debug":console.debug(`%c${o} ${t}`,l,r||"");break}}function He(e){return{info:(t,n)=>hr(e,t,"info",n),warn:(t,n)=>hr(e,t,"warn",n),error:(t,n)=>hr(e,t,"error",n),debug:(t,n)=>hr(e,t,"debug",n)}}function Gj(){window.onerror=(e,t,n,r,s)=>(hr("GlobalErrorHandler",`Erreur non gérée: ${e}`,"error",{source:t,lineno:n,colno:r,error:s}),!1),window.onunhandledrejection=e=>{hr("GlobalErrorHandler","Promesse rejetée non gérée","error",{reason:e.reason})},hr("Logger","Gestionnaires d'erreurs globaux initialisés","info")}const ir=He("NavigationContext"),Wj=p.createContext(void 0),yu=20,Yj=({children:e})=>{const t=St(),n=Tn(),[r,s]=p.useState([]),[a,o]=p.useState(-1),l=a>0,c=a<r.length-1;p.useEffect(()=>{const x={path:n.pathname,state:n.state,timestamp:Date.now()};s([x]),o(0),ir.info("Historique de navigation initialisé",{path:n.pathname})},[]),p.useEffect(()=>{if(r.length===0)return;if(!r.some(g=>g.path===n.pathname&&JSON.stringify(g.state)===JSON.stringify(n.state))){const g={path:n.pathname,state:n.state,timestamp:Date.now()},y=[...r.slice(0,a+1),g],j=y.length>yu?y.slice(y.length-yu):y;s(j),o(j.length-1),ir.info("Nouvelle entrée ajoutée à l'historique",{path:n.pathname,historyLength:j.length})}},[n,r,a]);const f={history:r,currentIndex:a,goBack:()=>{if(l){const x=r[a-1];t(x.path,{state:x.state}),o(a-1),ir.info("Navigation arrière",{to:x.path})}else ir.warn("Tentative de navigation arrière impossible")},goForward:()=>{if(c){const x=r[a+1];t(x.path,{state:x.state}),o(a+1),ir.info("Navigation avant",{to:x.path})}else ir.warn("Tentative de navigation avant impossible")},navigateTo:(x,g,y)=>{t(x,{state:g}),ir.info("Navigation vers",{path:x,hasState:!!g})},canGoBack:l,canGoForward:c,getPreviousPath:()=>a>0?r[a-1].path:null};return i.jsx(Wj.Provider,{value:f,children:e})},Kj=({size:e="medium",color:t="#4a5d94",fullScreen:n=!1,text:r="Chargement..."})=>{const a={small:"w-6 h-6",medium:"w-10 h-10",large:"w-16 h-16"}[e],o=n?({children:l})=>i.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50",children:l}):({children:l})=>i.jsx("div",{className:"flex flex-col items-center justify-center py-4",children:l});return i.jsx(o,{children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`${a} animate-spin`,children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:t,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&i.jsx("p",{className:"mt-2 text-sm font-medium",style:{color:t},children:r})]})})},Qj=p.createContext({isLoading:!1,startLoading:()=>{},stopLoading:()=>{}}),Xj=({children:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState("Chargement..."),a=p.useCallback(l=>{l&&s(l),n(!0)},[]),o=p.useCallback(()=>{n(!1),setTimeout(()=>{s("Chargement...")},300)},[]);return i.jsxs(Qj.Provider,{value:{isLoading:t,startLoading:a,stopLoading:o},children:[e,t&&i.jsx(Kj,{fullScreen:!0,text:r})]})},ii=["/map","/program","/saved","/about","/donate"],Jj={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},slide:{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{type:"spring",stiffness:300,damping:30}},scale:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:30}},flip:{initial:{rotateY:90,opacity:0},animate:{rotateY:0,opacity:1},exit:{rotateY:-90,opacity:0},transition:{duration:.4}}},Zj={"/map":"scale","/program":"slide","/saved-events":"slide","/donate":"fade","/about":"fade","/admin":"fade","/location-history":"flip"},eS=["/","/map","/program","/saved","/about","/donate"];function Ml({children:e,transitionType:t,enableSwipe:n=!1}){const r=St(),s=Tn(),[a,o]=p.useState(null),[l,c]=p.useState(0),[d,u]=p.useState(null);p.useEffect(()=>{const v=s.pathname==="/"?"/map":s.pathname,b=ii.indexOf(v);b!==-1&&c(b)},[s.pathname]);const m=t||Zj[s.pathname]||"fade",f=Jj[m],x=v=>{n&&o(v.touches[0].clientX)},g=v=>{if(!n||a===null)return;const w=v.changedTouches[0].clientX-a,T=window.innerWidth*.2;Math.abs(w)>T&&(w>0&&l>0?(u("right"),r(ii[l-1])):w<0&&l<ii.length-1&&(u("left"),r(ii[l+1]))),o(null)},j=n?{initial:v=>({x:v==="right"?"-100%":v==="left"?"100%":0,opacity:0}),animate:{x:0,opacity:1,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}},exit:v=>({x:v==="left"?"-100%":v==="right"?"100%":0,opacity:0,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}})}:{initial:f.initial,animate:f.animate,exit:f.exit,transition:f.transition};return i.jsx(je.div,{className:"animated-page-transition",onTouchStart:x,onTouchEnd:g,initial:"initial",animate:"animate",exit:"exit",variants:j,custom:d,style:{width:"100%",height:"100%",overflowX:"hidden",position:"relative",touchAction:"pan-y"},children:e},s.pathname)}function tS(e){return eS.includes(e)}const nS=He("ServiceWorker"),vu=()=>{nS.info("Service worker registration is temporarily disabled")},Rs=()=>typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,rS=e=>{if(typeof window>"u")return;const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),e(Rs()),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}},sS=(e,t)=>{},iS=()=>{};class aS{constructor(){at(this,"cache",new Map);at(this,"defaultExpiry",30*60*1e3)}set(t,n,r=this.defaultExpiry){this.cache.set(t,{data:n,timestamp:Date.now(),expiry:r})}get(t){const n=this.cache.get(t);return n?n.expiry!==null&&Date.now()-n.timestamp>n.expiry?(this.cache.delete(t),null):n.data:null}async getOrSet(t,n,r=this.defaultExpiry){const s=this.get(t);if(s!==null)return s;const a=await n();return this.set(t,a,r),a}remove(t){this.cache.delete(t)}has(t){return this.get(t)!==null}clear(){this.cache.clear()}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries())r.expiry!==null&&t-r.timestamp>r.expiry&&this.cache.delete(n)}}const gn=new aS,rf=[{id:"bruno-barbier",name:"Bruno Barbier",type:"exposition",title:"Peintures et dessins",presentation:"Artiste peintre et dessinateur installé à Nantes, explorant les thèmes du souvenir et de la nostalgie, Bruno Barbier évoque des fragments de mémoire, entre émotions passées et traces du temps.",instagram:"https://www.instagram.com/brunobarbierpainter"},{id:"alain-gremillet",name:"Alain Gremillet",type:"exposition",title:"Peinture abstraite",presentation:"Artiste peintre abstrait, associant couleurs, mouvements et lumière pour susciter l'émotion. L'artiste peintre abstrait Alain Gremillet explore librement la matière avec acrylique, spatules et objets du quotidien, donnant naissance à des œuvres uniques et lumineuses.",instagram:"https://www.instagram.com/alaingremillet"},{id:"jerome-gourdon",name:"Jérôme Gourdon",type:"exposition",title:"Photo-émographie",presentation:"Photo-émographe, mêlant photographie, intervention in-situ et peinture acrylique. Jérôme Gourdon se définit comme un photo-émographe. Son travail explore les frontières entre image captée et image transformée, pour créer des œuvres à la croisée des médiums.",instagram:"https://www.instagram.com/jerome_gourdon"},{id:"nadege-hameau",name:"Nadège Hameau",type:"exposition",title:"Marqueur acrylique",presentation:"Artiste autodidacte. Des mondes imaginaires prennent forme au marqueur acrylique, dans un style mêlant pointillisme, précision et rêverie. Autodidacte, Nadhame.artiste, alias Nadège Hameau, cultive une démarche empreinte de patience et de poésie visuelle.",instagram:"https://www.instagram.com/nadhame.artiste"},{id:"pauline-crusson",name:"Pauline Crusson",type:"exposition",title:"PaoaNaoned",presentation:"Illustratrice nantaise. Revisitant les cartes postales du vieux Nantes avec un style unique et détaillé, Pauline Crusson sous le nom de PaoaNaoned, redonne vie à ces images anciennes. Elle capture ainsi l'essence de la ville à travers ses dessins.",instagram:"https://www.instagram.com/paoanaoned"},{id:"marie-husson",name:"Marie Husson",type:"exposition",title:"Dessins et peintures",presentation:"Artiste peintre et dessinatrice. Explorant des instants d'intimité à la lisière du visible, Marie Husson archive ses découvertes sous forme de dessins et peintures mêlant aquarelle, encre, broderie ou huile. Sa pratique, expérimentale et sensible, donne naissance à des images profondes, fragiles et puissamment poétiques.",instagram:"https://www.instagram.com/marie.husson.art"},{id:"clotilde-debar-zablocki",name:"Clotilde Debar Zablocki",type:"exposition",title:"apolline.design",presentation:"Artiste et décoratrice. Inspirée par l'histoire et le patrimoine local, notamment celui d'Anne de Bretagne, Clotilde Debar-Zablocki crée un univers poétique et sensible. Avec David, elle forme le duo apolline.design, spécialisé en fresques décoratives et patines.",instagram:"https://www.instagram.com/apolline.design"},{id:"gael-caudoux",name:"Gaël Caudoux",type:"exposition",title:"Cartographies imaginaires",presentation:"Artiste cartographe. Vastes cartographies de territoires imaginaires, riches en détails et en narration, Gaël Caudoux les réalise à la main depuis l'enfance. Ses grands formats, en constante évolution, invitent à la découverte d'un univers unique et fascinant.",instagram:"https://www.instagram.com/gaelcaudoux.imaginarium"},{id:"atelier-norg",name:"Atelier Norg",type:"exposition",title:"Peinture, sculpture et dessin",presentation:"Plasticien nantais. Norg est un plasticien basé à Nantes dont le travail navigue entre peinture, sculpture et dessin, avec une énergie brute et expressive. Son univers visuel est direct et instinctif.",instagram:"https://www.instagram.com/ateliernorg"},{id:"jerome-luneau",name:"Jérôme Luneau",type:"exposition",title:"Chun Yong Ho",presentation:"Chun Yong Ho, artiste peintre originaire de Corée du Sud, explore l'abstraction à travers des jeux de couleurs et de lignes évoquant des paysages mentaux. Son travail invite à un voyage intérieur, entre sensations et émotions.",instagram:"https://www.instagram.com/yonghochun"},{id:"andry-shango-rajoelina",name:"Andry Shango Rajoelina",type:"exposition",title:"Illustration pop culture",presentation:`A travers ses "Super Families", Andry "Shango" Rajoelina, character designer dans l'animation, rend hommage aux personnages de ses films, jeux vidéos, comics, séries TV et dessins animés préférés, des années 80 à aujourd'hui. De "Retour Vers le Futur" aux "Avengers" en passant par "Les Indestructibles", il s'amuse à redessiner à sa manière les grandes familles de la pop culture. Une série d'illustration pour les petits et les grands enfants.`,instagram:"https://www.instagram.com/andryshango",email:"rajoelina.a@gmail.com"},{id:"expo9",name:"Jocelyn Prouff (Joss Proof)",type:"exposition",title:"Carnets Nantais",presentation:'Croquant in situ des lieux urbains où la nature reprend ses droits, avec une attention particulière à la lumière et aux détails, Joss Proof invite à un autre regard sur la ville à travers ses carnets sensibles. Il partage cet univers dans son livre "Carnets Nantais".',instagram:"https://www.instagram.com/joss_proof"},{id:"emmanuelle-boisson",name:"Emmanuelle Boisson (Manoukidessine)",type:"exposition",title:"Illustrations et Carnets",presentation:"Portée par le désir de raconter des histoires en images, Manoukidessine explore avec tendresse les émotions, le quotidien et l'imaginaire. Elle partage son univers à travers dessins, carnets et albums jeunesse.",instagram:"https://www.instagram.com/manoukidessine"},{id:"catherine-clement",name:"Catherine Clément (Kat Klementi)",type:"exposition",title:"Les Petits Formats",presentation:"Depuis 2018, je développe une série de petits formats réalisés à partir de cadres anciens chinés. Ces œuvres sont à la croisée d'une recherche esthétique et d'une narration silencieuse. Le cadre, loin d'être un simple ornement : « Le choix des cadres est essentiel. Ils doivent dialoguer avec l'œuvre, la compléter, la renforcer. Ce ne sont pas de simples éléments décoratifs : ils soulignent le sujet et rendent chaque tableau unique. » Les petits formats représentent des personnages, des objets isolés, des intérieurs... toujours cadrés au plus proche. Le regard oscille entre micro-natures mortes, mini-portraits et scènes intimistes. « Jouer avec les échelles oblige le spectateur à regarder de plus près, à observer avec attention. » Isoler un objet de son contexte lui donne une nouvelle présence, une intensité singulière « Ce n'est plus un simple objet du quotidien, mais un élément qui appelle à l'introspection. J'insiste sur l'individualité dans chacune de mes compositions. » Les rayures sont un motif récurrent dans mes peintures, les rayures instaurent un rythme visuel qui attire l'œil et structure l'espace. « Les rayures apportent une harmonie, un équilibre. Elles unifient l'ensemble des peintures et permettent aux sujets de s'inscrire dans un décor cohérent. »",instagram:"https://www.instagram.com/katklementi"},{id:"mostapha-rouine",name:"Mostapha Rouine",type:"exposition",title:"Entre Bretagne et Maroc",presentation:"Puisant son inspiration entre la Bretagne et le Maroc, entre pêche à pied et scènes de vie quotidienne, Mostapha Rouine crée avec aquarelles, brou de noix et huiles. L'artiste peintre autodidacte fait vibrer la lumière, l'ambiance et les couleurs de ces deux mondes.",instagram:"https://www.instagram.com/mostapharouine"},{id:"elizaveta-vodyanova",name:"Elizaveta Vodyanova",type:"exposition",title:"Peinture",presentation:"Artiste peintre contemporaine basée à Nantes, Elizaveta Vodyanova explore la peinture figurative à l'acrylique. Ses œuvres, intimes et poétiques, capturent des instants de vie — intérieurs, visages, paysages marins — avec une palette subtile et vibrante.",email:"vojnovich@yandex.com",instagram:"https://www.instagram.com/elvodyanova"},{id:"fabienne-choyau",name:"Fabienne Choyau",type:"exposition",title:"Peinture contemporaine",presentation:"Guidée par sa passion pour la couleur, Fabienne Choyau puise son inspiration dans la nature et les instants du quotidien. Son regard se laisse porter par ce qui l'entoure, transformant émotions et impressions en toiles vibrantes",email:"fabienne.choyau@laposte.net",instagram:"https://www.instagram.com/fabiennechoyau/"},{id:"violoncelles",name:"Ensemble de violoncelles du conservatoire",type:"concert",title:"Ensemble de violoncelles du conservatoire",presentation:""},{id:"clarine",name:"Clarine Julienne",type:"concert",title:"Concert de Clarine Julienne",presentation:"Après avoir sillonné l'Amérique Latine avec sa guitare, Clarine revient avec de nombreuses chansons de l'Argentine au Mexique, en passant par les Andes péruviennes. Elle propose un set doux, rythmé et coloré, mêlant musiques traditionnelles et compositions personnelles.",email:"clarine.julienne@gmail.com",instagram:"https://www.instagram.com/clarinemusic",youtube:"https://www.youtube.com/clarinemusic",tiktok:"https://www.tiktok.com/@clarine.musica",photos:["/concerts/Clarine/Clarine.JPG"],videos:["https://www.youtube.com/watch?v=-RMQS5dNWfE&authuser=0","https://www.youtube.com/watch?v=5mpeAOWKl-M&authuser=0"]},{id:"nota-bene",name:"Nota Bene",type:"concert",title:"Choeur de femmes Nota Bene",presentation:"Notre chœur est dirigé par Nelly ABRAN-FEVAI depuis 2013. Le répertoire est varié (classique, extraits d’opéra, chanson française/étrangère...). Nous répétons tous les lundis de 20h à 22h au Restaurant Inter générationnel du Breil, rue de Malville à Nantes, ainsi que 5 dimanches par saison. Nous serons heureuses de vous accueillir !",email:"contact@notabene.fr",instagram:""},{id:"philippe-peaud",name:"Philippe Peaud",type:"concert",title:"Philippe Péaud - Conteur",presentation:"",email:"philippe.peaud@club-internet.fr",instagram:""},{id:"scarabees",name:"Les Scarabées Rôdent",type:"concert",title:"Les Scarabées Rôdent",presentation:"",email:"contact@scarabees.fr",instagram:""},{id:"aperto",name:"Aperto !",type:"concert",title:"Aperto !",presentation:`Allegro aperto est le titre du premier mouvement d'un concerto pour flûte de Mozart.

Le mot Aperto signifie « ouvert » en italien.

L'ensemble est ouvert à tou.te.s les flûtistes : élèves du conservatoire, anciens élèves, amateurs et musiciens professionnels.

Il est également ouvert à toutes les musiques :

- musique classique : de Bach à Bartok
- musiques du monde : Irlande (reels et jigs), Europe centrale (klezmer), Espagne (sardanes), Brésil (choros), Grèce (kalamatianos), etc.
- chansons populaires : Beatles, Simon & Garfunkel, comédies musicales, films Disney, etc.`,email:"contact@aperto.fr",instagram:"",link:"https://youtu.be/aKxyrWCofOI",photos:["/concerts/Aperto/Aperto1.jpg","/concerts/Aperto/Aperto2.jpg"]},{id:"quatuor-liger",name:"Quatuor Liger",type:"concert",title:"Quatuor Liger",presentation:`Le Quatuor Liger est un quatuor à cordes formé en 1995 à Nantes, et qui a évolué ces dernières années avec de nouveaux membres.Composé de quatre musiciens passionnés (Patrick Févai, Solenne Guilbert, Gwenola Morin, Cédric Forré), le quatuor propose un répertoire varié allant de la musique classique aux arrangements contemporains. Leur interprétation sensible et dynamique offre une expérience musicale unique.

---

## PROGRAMME

### Wolfgang Mozart (1756-1791)
**Quatuor n°17 "La chasse" - 25 min**

Le quatuor n°17 en si bémol majeur, surnommé "La Chasse", fait partie des six quatuors dédiés à Haydn par Mozart. Composé en 1784, il doit son surnom à son premier mouvement, dont le caractère rythmé et léger rappelle une scène de chasse. L'œuvre est pleine de vitalité et de charme, témoignant de l'amitié et de l'admiration de Mozart pour Haydn.

### Franz Schubert (1797-1828)
**Quatuor n°10 - 25 min**

Le quatuor à cordes n°10 en mi bémol majeur de Schubert, également appelé "Quatuor jeunesse", a été écrit en 1813 alors que le compositeur n'avait que 16 ans. Malgré son jeune âge, cette œuvre révèle déjà une grande maîtrise de la forme et une sensibilité profonde. Moins dramatique que ses œuvres ultérieures, le quatuor se distingue par sa fraîcheur mélodique et son atmosphère paisible.

---

Mozart et Schubert ont été au cœur de l'évolution du quatuor à cordes, garants d'une transmission et créateurs de génie. Ces deux quatuors, de périodes et de styles différents, sont des témoignages brillants du génie de leurs compositeurs respectifs, et contiennent à la fois ce classicisme et cette révolution qui s'est opérée en 30 ans.

Le Quatuor Liger interprète ces compositeurs viennois du tournant des XVIIIe et XIXe siècle sur des instruments historiques (cordes en boyaux, archets classiques).`,members:"Patrick Févai, Solenne Guilbert, Gwenola Morin, Cédric Forré",instagram:"",email:"solenne.guilbert@quatuorliger.fr",link:"",photos:["/concerts/QuatuorLiger/quatuor-liger-1.jpg","/concerts/QuatuorLiger/quatuor-liger-2.jpg"]},{id:"eva",name:"L'Ensemble Vocal EVA",type:"concert",title:"L'Ensemble Vocal EVA",presentation:"L'Ensemble Vocal EVA, dirigé depuis 2023 par Pascale GARCIA, fait le choix d'un répertoire ouvert sur différentes époques, incluant des œuvres profanes ou sacrées, peu connues ou inédites. L'Ensemble Vocal EVA propose des créations de compositeurs emblématiques des XXe et XXIe siècles, qui savent magnifier des textes poétiques ou bibliques, chantés à 3, 4, 5 ou même 6 voix, a cappella ou accompagnés d'instruments.",website:"https://www.choeureva.fr",facebook:"EVA-choeur de femmes",phone:"06 87 08 63 84",director:"Pascale Garcia",email:"contact@choeureva.fr",instagram:""},{id:"swing-it",name:"Swing it !",type:"concert",title:"Swing it !",presentation:"",email:"contact@swingit.fr",instagram:""},{id:"variabilis",name:"Variabilis",type:"concert",title:"Variabilis",presentation:`VARIABILIS, C'EST 70 MUSICIENS AMATEURS.

L'ambition de cet ensemble :

Vivre la musique dans un esprit d'ouverture et de partage.

Explorer la diversité du répertoire classique.

Présenter des concerts dans des formats et des lieux variés.

Aller au devant de publics parfois éloignés des scènes musicales classiques.`,email:"contact@variabilis.fr",instagram:"https://www.instagram.com/variabilis_ensemble/?igshid=MzRlODBiNWFlZA%3D%3D",photos:["/concerts/Variabilis/Variabilis.jpg"],facebook:"https://www.facebook.com/EnsembleVariabilis",website:"https://www.variabilis.fr"},{id:"Semaphore Omega",name:"Semaphore Omega",type:"concert",title:"Semaphore Omega",presentation:"Les lectures poétiques d'Olivier Bardoul résonnent aux vibrations profondes du didgeridoo de Jean-Yves Redor.",email:"bardoul.olivier@netcourrier.com",instagram:""}];function oS(e){return rf.find(t=>t.id===e)}function Dl(e){const t=ht.find(n=>n.id===e);return t?t.name:""}function sf(e){const t=ht.find(n=>n.id===e);return t&&t.gps?t.gps:null}function ga(){return ht}const ht=[{id:"maison-jules-verne",name:"Maison natale de Jules Verne",x:170,y:50,description:"Maison natale de Jules Verne (1828). Située au 4 Cours Olivier de Clisson (ancien 2 quai Jean-Bart), c'est ici que naquit le célèbre écrivain le 8 février 1828. Il y passa les quatorze premières années de sa vie, dans un immeuble qui dominait le confluent de la Loire et de l'Erdre.",image:"/images/locations/jules-enfant-cibot.jpg",audio:"/audio/4-cours-Olivier-de-Clisson.mp3",hasProgram:!1,history:`La maison natale de Jules Verne se trouve au cœur de Nantes, sur l'île Feydeau, au 2 quai Jean-Bart, aujourd'hui connu sous le nom de 4 Cours Olivier de Clisson. Il y naquit le 8 février 1828 et y passa les quatorze premières années de sa vie. L'immeuble dominait le confluent de la Loire et de l'Erdre.

Alors que Jules était âgé d'une dizaine d'années, la famille fit l'acquisition d'une maison de campagne dans le village de Chantenay (aujourd'hui un quartier de Nantes). Depuis celle-ci, on voyait l'activité du port se déployer jusqu'au cœur de la ville, marquant profondément le jeune garçon.

S'il n'a vu la mer pour la première fois qu'à l'âge de douze ans, les îles, les ports et les bateaux étaient depuis longtemps déjà dans sa vie et dans ses rêves.

« Il y a cette circonstance que je suis né à Nantes, où mon enfance s'est tout entière écoulée. » Jules Verne, Souvenirs d'enfance et de jeunesse, 1891.
Dans la famille Verne, on pratiquait volontiers la poésie de circonstance : naissances et mariages étaient l'occasion de célébrer en vers les joies de l'amour et de la famille.

À l'adolescence, il commença à remplir les deux cahiers de poésies qui l'ont accompagné toute sa vie. Restés inédits à sa mort, ils ne furent publiés qu'en 1989. Poésie lyrique ou satirique, émois amoureux ou rimes de chansonnier, les genres les plus divers s'y côtoient. Plus tard, il fut aussi parolier, fournissant à son ami le compositeur Aristide Hignard des poèmes à mettre en musique. Ces chansons, réunies en recueil, parurent en 1857, sous le titre de Rimes et mélodies.

« Dès l'âge de douze ou quatorze ans, j'avais toujours un crayon sur moi et du temps où j'allais à l'école, je n'arrêtais pas d'écrire, travaillant surtout la poésie. » Jules Verne.

Au début des années 1850, Jules Verne monta à Paris pour y terminer ses études de droit.`,visited:!1,gps:{latitude:47.213307,longitude:-1.554879}},{id:"quai-turenne-8",name:"8 quai Turenne",x:300,y:108,description:"Bâtiment historique du XVIIIe siècle situé au 8 allée Turenne/9 rue Kervégan. Construit en 1753 pour Jacques Berouette, négociant et actionnaire d'origine du lotissement de l'Île Feydeau. L'immeuble présente des façades richement décorées avec des mascarons à thèmes marins. Les façades et la cage d'escalier sont inscrites aux monuments historiques depuis 1984.",image:"/8 quai Turenne.jpg",audio:"/audio/8-quai-turenne.mp3",history:`Habité par un des actionnaires d'origine

Jacques Berouette, négociant et avocat du roi est l'un des actionnaires d'origine de la compagnie créée pour construire le lotissement. En 1753, il habite sa nouvelle maison de l'Île Feydeau.

Le bâti

Les deux façades de l'immeuble ont beaucoup de points communs avec le 15, allée Duguay-Trouin/28, rue Kervégan. Celle côté quai est plus richement décorée. Les mascarons traitent de thèmes marins. Contrairement à beaucoup d'immeubles pour lesquels l'escalier est situé dans une tourelle, il a été choisi ici de l'intégrer au bâti. 
Il donne sur chacun des couloirs d'entrée. Le mur-noyau en est ajouré pour donner plus de clarté. Le balcon du 1er étage est monté sur des consoles, celui du 2ème en encorbellement sur une Trompe.

Les matériaux

La partie basse du rez-de-chaussée est construite en granite alors que la partie haute et notamment les mascarons sont en calcaire de Saint-Savinien (Charente maritime), une pierre semi-dure. Les étages sont construits en tuffeau de la région de Saumur.

Un immeuble inscrit

En 1933, les deux immeubles ont été séparés. La restauration de chacun a été effectuée à quelques années d'intervalle. Les façades sur rue et sur cour ainsi que la cage d'escalier ont été inscrits à l'inventaire supplémentaire des monuments historiques le 5 décembre 1984.`,visited:!1,gps:{latitude:47.212746973313344,longitude:-1.5547571895170953}},{id:"quai-turenne-9",name:"09 quai Turenne / 11 rue Kervégan",x:260,y:150,description:"Immeuble dit à la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire à pans coupés. Décors caractéristiques: mascarons et ferronneries. Double accès côté quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",history:`Immeuble dit à la "Cour Ovale"
En 1756, Joseph Raimbaud (marchand de bois) acquiert sur l'île Feydeau, deux terrains contigus et y fait édifier deux immeubles avec une cour commune, vaste cour rectangulaire à pans coupés, la "Cour ovale". Les deux immeubles aux décors caractéristiques du milieu du siècle (mascarons et ferronneries) ont un double accès, côté quai et côté rue. Les deux façades sur quai sont traitées de manière identique et en symétrie, les 12 travées étant groupées deux par deux. Les façades sur rue sont moins ostentatoires, les quatre doubles travées de gauche n'ont reçu qu'un seul étage, le programme architectural n'ayant pas été achevé. Immeuble classé au titre des Monuments Historiques depuis 1984.`,visited:!1,gps:{latitude:47.212306,longitude:-1.556986}},{id:"quai-turenne-9-concert",name:"09 quai Turenne / 11 rue Kervégan",x:260,y:180,description:"Immeuble dit à la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire à pans coupés. Décors caractéristiques: mascarons et ferronneries. Double accès côté quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",historyRef:"quai-turenne-9",visited:!1,gps:{latitude:47.21273557840543,longitude:-1.5552255095605205}},{id:"quai-turenne-10",name:"10 quai Turenne / 13 rue Kervégan",x:260,y:224,description:"Immeuble de négociant (1755-56). Construit par Joseph Raimbaud, marchand de bois. Innovation architecturale: premier immeuble de Feydeau avec des appartements à couloir plutôt qu'en enfilade. 3 étages et combles sans entresol. Inscrit aux Monuments Historiques depuis 1984.",image:"/10 quai Turenne.jpg",audio:"/audio/10-quai-Turenne.mp3",history:`Un immeuble de négociant

Jacques Goubert, ingénieur, est un des actionnaires d'origine du lotissement. Il est l'auteur des plans du parcellaire. Il propose également dans son projet un modèle d'élévation qui ne sera pas suivi par les constructeurs.
Il revend sa parcelle à Joseph Raimbaud, marchand de bois en lien avec le milieu de la construction navale. Celui-ci fait construire l'immeuble en 1755-56.

3 étages et combles sans entresol

Les immeubles du lotissement Feydeau sont tantôt entresolé, tantôt non. La présence de l'entresol révèle l'importance accordée à l'activité commerciale : celui-ci permet d'installer des réserves et des bureaux. Dans le cas présent, les constructeurs ont souhaité privilégier le logement. Aussi le rez-de-chaussée est-il occupé par des appartements.

Une innovation : des appartements avec un couloir

Jusqu'au début du XVIIIe siècle, on ne connaît qu'une seule manière d'agencer les pièces d'un appartement : l'enfilade. Les différentes salles se commandent les unes les autres. Au fil du siècle, le désir d'intimité grandissant, on voit apparaître le couloir, jugé plus pratique. Cet immeuble est le seul dans Feydeau à présenter cette particularité.

Une décoration soignée

Contrairement à d'autres immeubles du lotissement, les façades sur rue et quai sont identiques. Toutes les ouvertures comportent un mascaron, avec des visages africains. Les balcons sont construits sur des consoles au 1er étage et sur trompe au 2ème. Les angles de la cour ainsi que les demi-tourelles de latrines sont à pans coupés. L'immeuble est Inscrit sur l'inventaire supplémentaire des monuments historiques depuis 1984.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"rue-kervegan-17",name:"17 rue Kervégan / 11 quai Turenne",x:220,y:407,description:"Immeuble de la 'galaxie Pierre Rousseau' (après 1775). Construit pour Pierre Lassalle, gendre de Pierre Rousseau. Particularité: corps de bâtiments indépendants sur quai et rue, avec cour commune. Façade sobre typique de la fin du 18ème siècle, mais intérieurs richement décorés.",image:"/17 rue Kervégan.jpg",audio:"/audio/17-rue-Kervegan.mp3",history:`Un immeuble de la "galaxie Pierre Rousseau"

Cet immeuble a été construit après 1775 pour Pierre Lassalle, gendre de Pierre Rousseau. Ce dernier reprend une partie des dispositions adoptées au 12, allée Turenne, qu'il a construit comme immeuble de rapport en 1753.

Une parcelle pour deux immeubles indépendants

Contrairement à d'autres immeubles de Feydeau. Le corps de bâtiment sur le quai Turenne et celui sur la rue Kervégan sont indépendants. Si la cour est commune, Ils possèdent chacun leur propre escalier et deux latrines par étage. 

Chacun des immeubles comprenait à l'origine un appartement par étage, constitué de 4 pièces en façade et deux pièces de part et d'autre de l'escalier. Par la suite, certains logements ont été divisés.

Décoration

Au fil du 18ème siècle, on s'achemine vers un type de façade de plus en plus sobre : les mascarons, les balcons sur trompe ou sur consoles sculptées disparaissent, La place Royale en est un bon exemple. Si les façades de cet immeuble ne comportent ni balcons, ni décoration, les intérieurs n'ont rien à envier à ceux de la génération précédente.

Petits ou grand vitrages

Jusqu'aux années 1750, les vantaux des fenêtres sont à petits bois. Dans les années 1760 apparaît le grand carreau, qui est, dans un premier temps, réservé aux grandes demeures. On peut donc affirmer avec certitude que tous les immeubles de l'Île Feydeau avaient à l'origine des fenêtres à petits bois.`,visited:!1,gps:{latitude:47.21247281536768,longitude:-1.5562154487439073}},{id:"allee-duguay-trouin-11",name:"11 allée Duguay Trouin / 20 rue Kervégan",x:150,y:186,description:"Immeuble de rapport (1752) construit par Bertrand Doudet, négociant. Particularité: système de galeries très développé avec escalier unique ouvrant sur trois faces. Deux appartements spacieux par étage (200 m²). Façade côté Duguay-Trouin reconstruite à l'identique après les bombardements de 1945.",image:"/20 rue Kervégan.jpg",audio:"/audio/11-allee-duguay-trouin.mp3",history:`Un immeuble de rapport

Bertrand Doudet, négociant, acquiert en 1747 une des parcelles du lotissement auprès de la veuve Beaulieu-Belloteau, dont le mari était un des actionnaires d'origine. En 1752, la 'maison' est terminée : il en habite un des appartements. Les autres sont probablement loués. 

Des appartements donnant sur des galeries

De tous les immeubles de l'île Feydeau, c'est dans celui-ci que ce système constructif est le plus développé : l'unique escalier ouvre sur trois faces de galeries. Chaque étage comprend à l'origine deux appartements : l'un côté Kervégan, l'autre côté Duguay-Trouin, soit un peu plus de 200 m2 par appartement. On trouve donc deux portes d'entrée sur chaque palier de l'escalier, qui donnent sur la coursière de chaque appartement. Sur celle-ci ouvrent les porte-fenêtres de chaque pièce. On trouve également, juste après la porte d'entrée, des toilettes. On habite en fonction de sa condition… 

On peut supposer que Bertrand Doudet s'était réservé un des deux appartements du 1er étage. Il faut imaginer qu'à l'époque, habiter haut, c'est multiplier les contraintes : monter les seaux d'eau, le bois… Par ailleurs, le 1er étage est toujours celui qui offre la plus grande hauteur sous plafond, les plus belles cheminées, et les éléments de décoration les plus remarquables (boiseries, parquets à la française, fontaines à eau dans des niches...). Certains de ces éléments sont encore présents dans l'immeuble.

Ni classé, ni inscrit

Même s'il s'agit d'un immeuble remarquable, cette maison ne comporte pas d'éléments de décoration qui justifient une demande de protection. La façade ne présente ni mascarons, ni balcons sur trompe ou sur consoles. Ce type d'immeuble se retrouve fréquemment dans le centre ancien. Ce qui fait la typicité de celui-ci, comme de tous les immeubles de Feydeau, est la largeur des façades, qui a permis de créer dans chacun des appartements une enfilade de trois grandes pièces.

Les modes passent

A la fin du XVIIIème siècle, Feydeau n'est plus à la mode. Les Nantais préfèrent habiter les nouveaux quartiers plus en hauteur : les cours près de la Cathédrale et surtout le quartier Graslin. Les propriétaires changent et certains des appartements sont divisés. Les habitants des immeubles sont souvent de condition plus modeste.

Les vicissitudes de la seconde guerre mondiale

L'immeuble a souffert durant les bombardements. En 1945, sa façade côté Duguay-Trouin est pour partie détruite. La SNCF, locataire de l'immeuble pour y loger son personnel, fait démolir et reconstruire cette façade à l'identique. Seules les baies du rez-de-chaussée sont agrandies, pour faciliter l'activité commerciale. Pour ce chantier, on réutilise les parpaings de granite du rez-de-chaussée, et on remplace le tuffeau des étages par une pierre plus dure. L'immeuble a fait l'objet d'une restauration générale durant les années 1990. La façade côté Duguay-Trouin en cours de reconstruction au printemps 1948.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"allee-duguay-trouin-15",name:"15 allée Duguay Trouin",x:105,y:407,description:"Deux immeubles de rapport (1753) construits par les négociants Razeau et Geslin. Façade remarquable avec six travées et décor soigné: balcons sur consoles sculptées, chapiteaux ioniques, fronton et ferronneries. Habité par des négociants occupant un étage entier. Restauré en 1995. Monument Historique depuis 1984.",image:"/15 allée Duguay-Trouin.jpg",audio:"/audio/15-allee-duguay-trouin.mp3",history:`15 allée Duguay Trouin
Deux immeubles de rapport

De même que pour d'autres parcelles du lotissement, le propriétaire initial du terrain, Adrien van Voorn, n'en est pas le bâtisseur. Il revend sa parcelle à Paul-Louis-Julien Razeau et René Geslin, tous deux négociants. Ceux-ci font construire par les architectes Nicolas Rainard et Pierre Desprées deux immeubles de rapport achevés en 1753.
Une architecture soignée

La façade possède six travées à arcs surbaissés au rez-de-chaussée. Les deux travées centrales sont richement traitées : balcons sur consoles sculptées au 1er étage et sur trompe au 2ème, chapiteaux ioniques et fronton. Les ferronneries sont remarquables. La cour comporte deux tourelles pour les toilettes.
Les habitants

En 1776, les deux immeubles sont essentiellement habités par des négociants, qui disposent chacun d'un étage entier (appartements de 6 ou 7 pièces).
Une restauration exemplaire côté Duguay-Trouin

L'immeuble a été entièrement restauré à partir de 1995. Le relevé de l'existant a été effectué avec beaucoup de soin. Des menuiseries à petits bois ont été réintroduites, qui redonnent à la façade son aspect du XVIIIe siècle. Les façades et toitures sur l'allée Duguay-Trouin, la rue Kervégan et la cour sont inscrites à l'inventaire supplémentaire des Monuments historiques depuis le 5 décembre 1984.`,visited:!1,gps:{latitude:47.21274016472948,longitude:-1.5567136782622693}},{id:"allee-duguay-trouin-16",name:"16 allée Duguay Trouin",x:105,y:450,description:"Immeuble du XVIIIe siècle situé dans la partie sud de l'Île Feydeau. Cet immeuble présente une architecture typique du lotissement avec une cour intérieure et des espaces d'exposition. Il accueille aujourd'hui des artistes contemporains dans ses espaces rénovés.",image:"/16 allée Duguay-Trouin.jpg",audio:"/audio/16-allee-duguay-trouin.mp3",history:`Un espace artistique contemporain

Cet immeuble du XVIIIe siècle, situé dans la partie sud de l'Île Feydeau, témoigne de l'architecture typique du lotissement. Construit à l'origine pour des négociants nantais, il a connu diverses transformations au fil des siècles. Aujourd'hui, ses espaces rénovés accueillent des artistes contemporains qui y trouvent un cadre historique inspirant pour leurs créations.

Une architecture préservée

L'immeuble conserve les caractéristiques architecturales de l'époque: une cour intérieure, des espaces généreux et une façade sobre typique de la fin du XVIIIe siècle. La rénovation a permis de préserver l'esprit du lieu tout en l'adaptant aux besoins des artistes qui y exposent régulièrement.

Un lieu de création et d'exposition

Le bâtiment est devenu un lieu important pour la scène artistique nantaise, accueillant des expositions temporaires et des ateliers d'artistes. Sa configuration avec une cour et un hall offre des espaces d'exposition variés, permettant de mettre en valeur différentes formes d'expression artistique.`,visited:!1,gps:{latitude:47.21265104842529,longitude:-1.5568766504416809}},{id:"rue-kervegan-32",name:"32 rue Kervégan",x:185,y:507,description:"Immeuble construit entre 1747 et 1752 par Guillaume Grou, négociant-armateur. Façade modifiée au 19e siècle avec ajout d'un troisième étage. Organisation typique: appartement de l'armateur au premier, bureaux au rez-de-chaussée entresolé, appartements locatifs aux étages supérieurs. Monument Historique: façade et ferronneries (1932), cage d'escalier (1986).",image:"/32 rue Kervegan.jpg",audio:"/audio/32-rue-kervegan.mp3",history:"Entre 1747 et 1752, Guillaume Grou, négociant-armateur, fait construire cet immeuble sur l'île Feydeau. La composition d'origine de la façade a été modifiée au début du 19e siècle par l'ajout d'un troisième étage. L'immeuble abritait au premier étage l'appartement de l'armateur dont l'accès se faisait par la porte de la façade principale. Le rez-de-chaussée entresolé était occupé par des bureaux et magasins. Les appartements locatifs des étages supérieurs étaient desservis par une porte latérale donnant rue Kervégan. La façade y compris les ferronneries et la toiture sont inscrites au titre des Monuments Historiques depuis 1932, la cage d'escalier intérieur est, quant à elle, inscrite en 1986.",visited:!1,gps:{latitude:47.2123232,longitude:-1.5570202}},{id:"rue-duguesclin",name:"Rue Duguesclin",x:130,y:310,description:"Mur Le Chat Noir jusqu'à rue Kervégan. Située sur l'Île Feydeau, cette rue piétonne relie la rue Kervégan à l'allée Duguay Trouin. Elle est caractérisée par son architecture du XVIIIe siècle et abrite aujourd'hui des espaces d'exposition temporaires.",audio:"/audio/rue-duguayclin.mp3",history:"Cette rue piétonne de l'Île Feydeau porte le nom de Bertrand du Guesclin, connétable de France au XIVe siècle. Elle fait partie du lotissement original de l'Île, conçu au XVIIIe siècle. Aujourd'hui, elle accueille des expositions temporaires qui animent ce passage historique entre la rue Kervégan et l'allée Duguay Trouin.",hasProgram:!1,visited:!1,gps:{latitude:47.21299917260203,longitude:-1.556253314217484}}],lS=Object.freeze(Object.defineProperty({__proto__:null,getLocationGPSById:sf,getLocationNameById:Dl,getLocations:ga,locations:ht},Symbol.toStringTag,{value:"Module"})),cS=[{id:"clarine",artistId:"clarine",title:"Clarine Julienne",time:"14h00 - 14h30",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-nota-bene",artistId:"nota-bene",title:"Choeur de femmes Nota Bene",time:"14h45 - 15h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures poétiques en musique)",time:"15h30 - 16h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-samedi",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-dimanche",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-violoncelles",artistId:"violoncelles",title:"Ensemble de violoncelles du conservatoire",time:"17h00 - 17h30",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"scarabees",artistId:"scarabees",title:"Les Scarabées Rôdent",time:"17h45 - 18h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"aperto",artistId:"aperto",title:"Aperto !",time:"18h30 - 19h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-quatuor-liger",artistId:"quatuor-liger",title:"Quatuor Liger",time:"14h00 - 14h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-eva",artistId:"eva",title:"L'Ensemble Vocal EVA",time:"14h45 - 15h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures poétiques en musique)",time:"15h30 - 16h00",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-swing-it",artistId:"swing-it",title:"Swing it !",time:"17h00 - 17h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-variabilis",artistId:"variabilis",title:"Variabilis",time:"17h45 - 18h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"expo-emmanuelle-boisson",artistId:"emmanuelle-boisson",title:"Illustrations et Carnets",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-catherine-clement",artistId:"catherine-clement",title:"Peintures en Miniature",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-mostapha-rouine",artistId:"mostapha-rouine",title:"Entre Bretagne et Maroc",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-bruno-barbier",artistId:"bruno-barbier",title:"Peintures et dessins",time:"12h00 - 19h00",days:["samedi","dimanche"],locationId:"quai-turenne-9"},{id:"expo-alain-gremillet",artistId:"alain-gremillet",title:"Peinture abstraite",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-jerome-gourdon",artistId:"jerome-gourdon",title:"Photo-émographie",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-nadege-hameau",artistId:"nadege-hameau",title:"Marqueur acrylique",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-pauline-crusson-2",artistId:"pauline-crusson",title:"PaoaNaoned",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-marie-husson",artistId:"marie-husson",title:"Dessins et peintures",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"rue-kervegan-17"},{id:"expo-clotilde-debar-zablocki",artistId:"clotilde-debar-zablocki",title:"apolline.design",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"},{id:"expo-gael-caudoux",artistId:"gael-caudoux",title:"Cartographies imaginaires",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-andry-shango-rajoelina",artistId:"andry-shango-rajoelina",title:"Illustration pop culture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jerome-luneau",artistId:"jerome-luneau",title:"Chun Yong Ho",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jocelyn-prouff",artistId:"expo9",title:"Carnets Nantais",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-elizaveta-vodyanova",artistId:"elizaveta-vodyanova",title:"Peinture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-fabienne-choyau",artistId:"fabienne-choyau",title:"Peinture contemporaine",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"}],zt=cS.map(e=>{const t=oS(e.artistId);return t?{id:e.id,artistId:e.artistId,title:e.title,time:e.time,days:e.days,locationId:e.locationId,locationName:Dl(e.locationId),artistName:t.name,type:t.type,image:t.image}:(console.error(`Artist not found for ID: ${e.artistId} (Event ID: ${e.id}). Check data consistency.`),null)}).filter(e=>e!==null);function ai(e){return zt.filter(t=>t.days.includes(e))}function uS(e){const n=dS().find(r=>r.name===e);return n?zt.filter(r=>r.locationId===n.id):[]}function dS(){const e=new Map;try{Gs(()=>Promise.resolve().then(()=>lS),void 0).then(n=>{const r=n.locations,s=new Map;zt.forEach(a=>{var o;s.has(a.locationId)?(o=s.get(a.locationId))==null||o.push(a.id):s.set(a.locationId,[a.id])}),r.forEach(a=>{const o=s.get(a.id)||[];e.set(a.name,{id:a.id,name:a.name,description:a.description,x:a.x,y:a.y,events:o,visited:a.visited||!1})})}).catch(n=>{console.warn("Could not load locations data:",n),t()})}catch(n){console.warn("Dynamic import not available, using fallback for locations:",n),t()}function t(){const n=new Map;zt.forEach(r=>{var s;n.has(r.locationId)?(s=n.get(r.locationId))==null||s.push(r.id):n.set(r.locationId,[r.id])}),zt.forEach(r=>{e.has(r.locationName)||e.set(r.locationName,{id:r.locationId,name:r.locationName,description:"",x:0,y:0,events:n.get(r.locationId)||[],visited:!1})})}return e.size===0&&t(),Array.from(e.values())}const ct=()=>{try{const e=localStorage.getItem("savedEvents");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>{if(!n)return null;const r=zt.find(s=>s&&s.id===n);return r?{...r,savedAt:new Date().toISOString()}:null}).filter(Boolean):[]}catch(e){return console.error("Erreur dans getSavedEvents:",e),[]}},Rl=e=>{try{if(!e||!e.id)return console.error("Tentative de sauvegarde d'un événement invalide:",e),ct();const t=localStorage.getItem("savedEvents");let n=[];try{n=t?JSON.parse(t):[],Array.isArray(n)||(n=[])}catch(s){console.error("Erreur lors de la lecture des événements sauvegardés:",s),n=[]}console.log(`[savedEvents] Événements déjà sauvegardés: ${n.length}`,n);const r=n.includes(e.id);if(console.log(`[savedEvents] Événement déjà sauvegardé: ${r}`),r)console.log("[savedEvents] Événement déjà sauvegardé, aucune action nécessaire");else{const s=[...n,e.id];localStorage.setItem("savedEvents",JSON.stringify(s)),console.log(`[savedEvents] Événement sauvegardé, nouveau total: ${s.length}`),console.log("[savedEvents] Planification du déclenchement des achievements dans 500ms"),setTimeout(()=>{s.length===1&&(console.log("[savedEvents] Déclenchement de l'achievement FIRST_EVENT_SAVED (premier événement)"),Di(lt.FIRST_EVENT_SAVED)),s.length>=5&&(console.log(`[savedEvents] Déclenchement de l'achievement MULTIPLE_EVENTS_SAVED (${s.length} événements)`),Di(lt.MULTIPLE_EVENTS_SAVED))},500)}return ct()}catch(t){return console.error("Erreur dans saveEvent:",t),ct()}},xa=e=>{try{if(!e)return console.error("Tentative de suppression d'un événement avec un ID invalide"),ct();const t=localStorage.getItem("savedEvents");if(!t)return[];let n=[];try{n=JSON.parse(t),Array.isArray(n)||(n=[])}catch(s){return console.error("Erreur lors de la lecture des événements sauvegardés:",s),[]}const r=n.filter(s=>s!==e);return localStorage.setItem("savedEvents",JSON.stringify(r)),ct()}catch(t){return console.error("Erreur dans removeSavedEvent:",t),[]}},mS=(e,t)=>{try{if(!e)return console.error("Tentative de définir une notification pour un événement avec un ID invalide"),ct();const n=localStorage.getItem("eventNotifications");let r={};try{r=n?JSON.parse(n):{},typeof r!="object"&&(r={})}catch(o){console.error("Erreur lors de la lecture des notifications:",o),r={}}const s=Object.keys(r).length===0;return r[e]=t,localStorage.setItem("eventNotifications",JSON.stringify(r)),s&&Di(lt.NOTIFICATION_SET),ct().map(o=>o&&o.id===e?{...o,notificationTime:t}:o)}catch(n){return console.error("Erreur dans setEventNotification:",n),ct()}},hS=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL:"/",Ol=e=>{const t=hS();if(e.startsWith(t))return e;const n=e.startsWith("/")?e.substring(1):e;return`${t}${n}`},xn={SAVED_EVENTS:"offline_saved_events",LOCATIONS:"offline_locations",MAP_IMAGE:"offline_map_image",LOCATION_IMAGES:"offline_location_images",HISTORY_IMAGES:"offline_history_images"},nr=7*24*60*60*1e3,af=async()=>{try{console.log("[OfflineService] Préchargement des événements sauvegardés");const e=ct();return e.length===0?(console.log("[OfflineService] Aucun événement sauvegardé à précharger"),[]):(gn.set(xn.SAVED_EVENTS,e,nr),console.log(`[OfflineService] ${e.length} événements sauvegardés mis en cache`),e)}catch(e){return console.error("[OfflineService] Erreur lors du préchargement des événements:",e),[]}},fS=async()=>gn.getOrSet(xn.SAVED_EVENTS,async()=>af(),nr),of=async()=>{try{console.log("[OfflineService] Préchargement des lieux");const e=await fS();if(e.length===0)return console.log("[OfflineService] Aucun lieu à précharger (pas d'événements sauvegardés)"),[];const t=ga(),n=e.map(a=>a.locationId),r=[...new Set(n)],s=t.filter(a=>r.includes(a.id));return gn.set(xn.LOCATIONS,s,nr),console.log(`[OfflineService] ${s.length} lieux mis en cache`),s}catch(e){return console.error("[OfflineService] Erreur lors du préchargement des lieux:",e),[]}},pS=async()=>gn.getOrSet(xn.LOCATIONS,async()=>of(),nr),gS=async()=>{try{console.log("[OfflineService] Préchargement des images des lieux");const e=await pS();if(e.length===0)return console.log("[OfflineService] Aucune image de lieu à précharger"),[];const t=e.filter(a=>a.image).map(a=>{const o=a.image;return o.startsWith("http://")||o.startsWith("https://")?o:Ol(o)}),n=t.map(async a=>{try{const o=await fetch(a,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!o.ok&&o.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${o.status}`);const l=await o.blob();return gn.set(`${xn.LOCATION_IMAGES}_${a}`,{url:a,size:l.size,type:l.type,timestamp:Date.now()},nr),console.log(`[OfflineService] Image préchargée: ${a} (${l.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_LOCATION_IMAGE",url:a}),a}catch(o){return console.error(`[OfflineService] Erreur lors du préchargement de l'image ${a}:`,o),null}}),s=(await Promise.all(n)).filter(a=>a!==null);return console.log(`[OfflineService] ${s.length}/${t.length} images préchargées`),s}catch(e){return console.error("[OfflineService] Erreur lors du préchargement des images:",e),[]}},xS=async()=>{try{console.log("[OfflineService] Préchargement des images des historiques");const t=ga().filter(o=>o.history&&o.image);if(t.length===0)return console.log("[OfflineService] Aucune image d'historique à précharger"),[];const n=t.map(o=>{const l=o.image;return l.startsWith("http://")||l.startsWith("https://")?l:Ol(l)}),r=n.map(async o=>{try{if(gn.has(`${xn.HISTORY_IMAGES}_${o}`))return console.log(`[OfflineService] Image d'historique déjà en cache: ${o}`),o;const l=await fetch(o,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!l.ok&&l.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image d'historique: ${l.status}`);const c=await l.blob();return gn.set(`${xn.HISTORY_IMAGES}_${o}`,{url:o,size:c.size,type:c.type,timestamp:Date.now()},nr),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:o}),o}catch(l){return console.error(`[OfflineService] Erreur lors du préchargement de l'image d'historique ${o}:`,l),null}}),a=(await Promise.all(r)).filter(o=>o!==null);return a.length<n.length&&console.log(`[OfflineService] ${a.length}/${n.length} images d'historique préchargées`),a}catch(e){return console.error("[OfflineService] Erreur lors du préchargement des images d'historique:",e),[]}},Oo=async()=>{try{console.log("[OfflineService] Préchargement de l'image de la carte");const e=Ol("map-feydeau.png"),t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000",Pragma:"no-cache"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image de la carte: ${t.status}`);const n=await t.blob();return gn.set(xn.MAP_IMAGE,{url:e,size:n.size,type:n.type,timestamp:Date.now()},nr),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_MAP_IMAGE",url:e}),!0}catch(e){return console.error("[OfflineService] Erreur lors du préchargement de l'image de la carte:",e),!1}},lf=async()=>{try{console.log("[OfflineService] Démarrage du préchargement des données hors-ligne");const e=await Oo();console.log(`[OfflineService] Préchargement de la carte: ${e?"réussi":"échoué"}`),await af(),await of(),await gS(),await xS(),e||(console.log("[OfflineService] Nouvelle tentative de préchargement de la carte"),await Oo()),console.log("[OfflineService] Préchargement des données hors-ligne terminé")}catch(e){console.error("[OfflineService] Erreur lors du préchargement des données hors-ligne:",e)}},cf=e=>gn.has(`${xn.HISTORY_IMAGES}_${e}`),yS=async e=>{try{if(cf(e))return console.log(`[OfflineService] Image déjà en cache: ${e}`),!0;console.log(`[OfflineService] Préchargement de l'image: ${e}`);const t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${t.status}`);const n=await t.blob();return gn.set(`${xn.HISTORY_IMAGES}_${e}`,{url:e,size:n.size,type:n.type,timestamp:Date.now()},nr),console.log(`[OfflineService] Image préchargée: ${e} (${n.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:e}),!0}catch(t){return console.error(`[OfflineService] Erreur lors du préchargement de l'image ${e}:`,t),!1}},vS=()=>{const[e,t]=p.useState(Rs()),[n,r]=p.useState(!1),[s,a]=p.useState(!1),o=p.useCallback(async()=>{if(!s)try{a(!0),console.log("[useOfflineMode] Démarrage du préchargement des données"),await lf();const l=ct(),c=ga().filter(d=>l.some(u=>u.locationId===d.id));l.length>0&&sS(l,c),await Oo(),iS(),r(!0),console.log("[useOfflineMode] Préchargement des données terminé")}catch(l){console.error("[useOfflineMode] Erreur lors du préchargement des données:",l)}finally{a(!1)}},[s]);return p.useEffect(()=>{const l=rS(c=>{t(c),c&&!n&&!s&&o()});return()=>{l&&l()}},[n,s,o]),p.useEffect(()=>{e&&!n&&!s&&o()},[e,n,s,o]),{online:e,offlineReady:n,preloadingData:s,preloadData:o}},bS=()=>{const{online:e,offlineReady:t,preloadingData:n,preloadData:r}=vS();return e&&t?null:i.jsx("div",{className:"fixed bottom-16 left-0 right-0 z-50 flex justify-center pointer-events-none",children:i.jsxs("div",{className:`px-4 py-2 rounded-full shadow-md flex items-center gap-2 pointer-events-auto ${e?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:[!e&&i.jsx(Ix,{className:"h-4 w-4"}),!e&&i.jsxs("span",{className:"text-sm font-medium",children:["Mode hors ligne",t&&" (données disponibles)"]}),e&&!t&&i.jsx(i.Fragment,{children:n?i.jsxs(i.Fragment,{children:[i.jsx(Qn,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{className:"text-sm font-medium",children:"Préparation du mode hors-ligne..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm font-medium",children:"Préparer le mode hors-ligne"}),i.jsx("button",{onClick:()=>r(),className:"ml-2 bg-blue-200 hover:bg-blue-300 text-blue-800 px-2 py-1 rounded text-xs",children:"Activer"})]})}),e&&t&&i.jsxs(i.Fragment,{children:[i.jsx(na,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Mode hors-ligne prêt"})]})]})})},wS=Ws("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?pm:"button";return i.jsx(o,{className:re(wS({variant:t,size:n,className:e})),ref:a,...s})});U.displayName="Button";const oi=He("LocationActivator"),jS=({onLocationEnabled:e,onLocationDenied:t,onLocationDisabled:n})=>{const[r,s]=p.useState(!1);p.useEffect(()=>{const o=localStorage.getItem("locationConsent");s(o==="granted")},[]);const a=()=>{if(r){localStorage.removeItem("locationConsent"),s(!1),n&&n();return}navigator.geolocation?(oi.info("Demande d'autorisation de géolocalisation explicite"),navigator.geolocation.getCurrentPosition(o=>{oi.info("Autorisation de géolocalisation accordée",{coords:{latitude:o.coords.latitude,longitude:o.coords.longitude,accuracy:o.coords.accuracy}}),localStorage.setItem("locationConsent","granted"),s(!0),e&&e()},o=>{oi.warn("Autorisation de géolocalisation refusée",{code:o.code,message:o.message}),t&&t()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):oi.warn("Géolocalisation non supportée par le navigateur")};return i.jsxs(U,{variant:r?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:a,children:[i.jsx(kn,{className:"h-4 w-4"}),r?"Désactiver localisation":"Activer localisation"]})};let Yt=null,bu=!1;const SS=({onAudioEnabled:e,onAudioDisabled:t})=>{const[n,r]=p.useState(()=>localStorage.getItem("audioEnabled")==="true");p.useEffect(()=>{if(!bu){if(!Yt){Yt=new Audio,Yt.loop=!0,Yt.volume=.5;const a=window.location.hostname.includes("github.io")?"/1Hall1Artiste/audio/Port-marchand.mp3":"/audio/Port-marchand.mp3";Yt.src=a}bu=!0,n&&Yt&&Yt.play().catch(a=>{console.warn("Impossible de lire l'audio automatiquement",a)})}},[n]);const s=()=>{const a=!n;r(a),localStorage.setItem("audioEnabled",a.toString()),a?(Yt&&Yt.play().catch(o=>{console.warn("Impossible de lire l'audio",o),r(!1),localStorage.setItem("audioEnabled","false")}),e&&e()):(Yt&&Yt.pause(),t&&t())};return i.jsx(U,{variant:n?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:s,children:n?i.jsxs(i.Fragment,{children:[i.jsx(ra,{className:"h-4 w-4"}),"Désactiver son"]}):i.jsxs(i.Fragment,{children:[i.jsx(ol,{className:"h-4 w-4"}),"Activer son"]})})},NS=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL.endsWith("/")?window.APP_CONFIG.BASE_URL.slice(0,-1):window.APP_CONFIG.BASE_URL:"/1Hall1Artiste";function bt(e){const n=(e.startsWith("/")?e:`/${e}`).split("/").map(r=>r?encodeURIComponent(r):"").join("/");return`${NS()}${n}`}const Ce={topLeft:{latitude:47.21349,longitude:-1.555052},topRight:{latitude:47.21285,longitude:-1.554495},bottomLeft:{latitude:47.212509,longitude:-1.557447},bottomRight:{latitude:47.21186198914097,longitude:-1.5569021991319243}},$n={latitude:(Ce.topLeft.latitude+Ce.topRight.latitude+Ce.bottomLeft.latitude+Ce.bottomRight.latitude)/4,longitude:(Ce.topLeft.longitude+Ce.topRight.longitude+Ce.bottomLeft.longitude+Ce.bottomRight.longitude)/4},ES=6371e3,uf=(e,t,n,r)=>{const s=e*Math.PI/180,a=n*Math.PI/180,o=(n-e)*Math.PI/180,l=(r-t)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(s)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return ES*d},CS=uf(Ce.topLeft.latitude,Ce.topLeft.longitude,Ce.topRight.latitude,Ce.topRight.longitude),IS=uf(Ce.topLeft.latitude,Ce.topLeft.longitude,Ce.bottomLeft.latitude,Ce.bottomLeft.longitude),wu={width:CS,height:IS},Dn={topLeft:{x:100,y:50},topRight:{x:300,y:50},bottomLeft:{x:100,y:550},bottomRight:{x:300,y:550}};function kS(e,t){const n=[{x:Ce.topLeft.longitude,y:Ce.topLeft.latitude},{x:Ce.topRight.longitude,y:Ce.topRight.latitude},{x:Ce.bottomLeft.longitude,y:Ce.bottomLeft.latitude},{x:Ce.bottomRight.longitude,y:Ce.bottomRight.latitude}],r=[{x:Dn.topLeft.x,y:Dn.topLeft.y},{x:Dn.topRight.x,y:Dn.topRight.y},{x:Dn.bottomLeft.x,y:Dn.bottomLeft.y},{x:Dn.bottomRight.x,y:Dn.bottomRight.y}],s=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],a=[r[0].x,r[1].x,r[2].x],o=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],l=[r[0].y,r[1].y,r[2].y],c=ju(s,a),d=ju(o,l);if(!c||!d){const m=Math.min(...n.map(M=>M.x)),f=Math.max(...n.map(M=>M.x)),x=Math.min(...n.map(M=>M.y)),g=Math.max(...n.map(M=>M.y)),y=Math.min(...r.map(M=>M.x)),j=Math.max(...r.map(M=>M.x)),v=Math.min(...r.map(M=>M.y)),b=Math.max(...r.map(M=>M.y)),w=(t-m)/(f-m),T=1-(e-x)/(g-x),E=y+w*(j-y),P=v+T*(b-v);return{x:Math.round(E),y:Math.round(P)}}const u=c[0]*t+c[1]*e+c[2],h=d[0]*t+d[1]*e+d[2];return{x:Math.round(u),y:Math.round(h)}}function ju(e,t){const n=li(e);if(Math.abs(n)<1e-10)return null;const r=[[t[0],e[0][1],e[0][2]],[t[1],e[1][1],e[1][2]],[t[2],e[2][1],e[2][2]]],s=[[e[0][0],t[0],e[0][2]],[e[1][0],t[1],e[1][2]],[e[2][0],t[2],e[2][2]]],a=[[e[0][0],e[0][1],t[0]],[e[1][0],e[1][1],t[1]],[e[2][0],e[2][1],t[2]]],o=li(r),l=li(s),c=li(a);return[o/n,l/n,c/n]}function li(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])}function AS(e){const{latitude:t,longitude:n}=e,r=.001,s=.0014,a=Math.min(Ce.bottomLeft.latitude,Ce.bottomRight.latitude)-r,o=Math.max(Ce.topLeft.latitude,Ce.topRight.latitude)+r,l=Math.min(Ce.topLeft.longitude,Ce.bottomLeft.longitude)-s,c=Math.max(Ce.topRight.longitude,Ce.bottomRight.longitude)+s,d=t>=a&&t<=o,u=n>=l&&n<=c;return Ll(t,n)<150?!0:d&&u}function Ll(e,t){const r=e*Math.PI/180,s=$n.latitude*Math.PI/180,a=($n.latitude-e)*Math.PI/180,o=($n.longitude-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(s)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function TS(e){const{latitude:t,longitude:n}=e,r=Math.sin($n.longitude-n)*Math.cos($n.latitude),s=Math.cos(t)*Math.sin($n.latitude)-Math.sin(t)*Math.cos($n.latitude)*Math.cos($n.longitude-n);let a=Math.atan2(r,s)*180/Math.PI;return a=(a+360)%360,a>=337.5||a<22.5?"nord":a>=22.5&&a<67.5?"nord-est":a>=67.5&&a<112.5?"est":a>=112.5&&a<157.5?"sud-est":a>=157.5&&a<202.5?"sud":a>=202.5&&a<247.5?"sud-ouest":a>=247.5&&a<292.5?"ouest":"nord-ouest"}const PS=He("ToastService");class _S{show(t){const{title:n,description:r,variant:s="default",duration:a,action:o,source:l,context:c}=t,d=s==="destructive"?"error":"info";ft({title:n,description:r,variant:s,duration:a,action:o}),this.logToast(n,d,r,l,c)}success(t){this.show({...t,variant:"default"})}error(t){this.show({...t,variant:"destructive"})}location(t){this.show({...t,source:"LocationService"})}logToast(t,n,r,s,a){if(n==="error"){const o=`Toast [${n}]: ${t}${r?` - ${r}`:""}`,l={source:s||"Unknown",...a};PS.warn(o,l)}}}const Es=new _S,hs=He("locationService"),fs={info:(e,t)=>e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise à jour")?e.includes("Toast d'éloignement")?hs.info(e,t):void 0:hs.info(e,t),warn:hs.warn,error:hs.error,debug:(e,t)=>{if(!(e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise à jour")))return hs.debug(e,t)}},MS=5e3,DS=1e4,RS=3e4,Xa="locationConsent",Ja="locationActivationTimestamp",OS=5e3,Su={enableHighAccuracy:!0,timeout:DS,maximumAge:RS};class LS{constructor(){at(this,"watchId",null);at(this,"lastPosition",null);at(this,"onLocationUpdateCallback",null);at(this,"onPermissionChangeCallback",null);at(this,"permissionDenied",!1);at(this,"isLocalDevelopment",!1);at(this,"simulationInterval",null);this.isLocalDevelopment=!1,!navigator.geolocation&&!this.isLocalDevelopment&&fs.warn("La géolocalisation n'est pas prise en charge par ce navigateur"),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}handleVisibilityChange(){if(document.visibilityState==="visible"&&this.watchId!==null&&this.isLocationActivated()){fs.info("Application revenue au premier plan, réinitialisation du suivi de localisation");const t=this.onLocationUpdateCallback,n=this.onPermissionChangeCallback;this.stopTracking(),t&&setTimeout(()=>{this.startTracking(t,n||void 0)},500)}}startTracking(t,n){if(this.onLocationUpdateCallback=t,this.onPermissionChangeCallback=n||null,this.permissionDenied=!1,this.notifyPermissionChange(!1),!this.isLocationActivated()){fs.info("La localisation n'est pas activée, le suivi ne démarre pas");return}if(this.isLocalDevelopment){this.startPositionSimulation();return}if(!navigator.geolocation){fs.warn("La géolocalisation n'est pas prise en charge par ce navigateur"),Es.error({title:"Localisation non disponible",description:"Votre navigateur ne prend pas en charge la géolocalisation.",source:"LocationService.startTracking",context:{browserSupport:!1}});return}navigator.geolocation.getCurrentPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),Su);const r=navigator.geolocation.watchPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),Su);this.watchId=r}stopTracking(){this.simulationInterval!==null&&(window.clearInterval(this.simulationInterval),this.simulationInterval=null),this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.onLocationUpdateCallback=null,this.onPermissionChangeCallback=null}isLocationActivated(){return localStorage.getItem(Xa)==="granted"}activateLocation(){localStorage.setItem(Xa,"granted"),localStorage.setItem(Ja,Date.now().toString()),Es.success({title:"Localisation activée",description:"Vous pouvez maintenant voir votre position sur la carte.",duration:3e3,source:"LocationService.activateLocation",context:{timestamp:Date.now()}})}deactivateLocation(){localStorage.removeItem(Xa),localStorage.removeItem(Ja),Es.show({title:"Localisation désactivée",description:"Votre position ne sera plus suivie.",duration:3e3,source:"LocationService.deactivateLocation",context:{timestamp:Date.now()}}),this.stopTracking()}isRecentlyActivated(){const t=localStorage.getItem(Ja);if(!t)return!1;const n=parseInt(t,10);return Date.now()-n<OS}notifyPermissionChange(t){this.permissionDenied!==t&&(this.permissionDenied=t,this.onPermissionChangeCallback&&this.onPermissionChangeCallback(t))}handlePositionSuccess(t){const n={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy};this.lastPosition=n,Ll(n.latitude,n.longitude),this.lastPosition,this.isRecentlyActivated(),this.onLocationUpdateCallback&&this.onLocationUpdateCallback(0,0,n)}handlePositionError(t){switch(t.code!==t.TIMEOUT&&fs.error("Erreur de géolocalisation",{code:t.code,message:t.message}),t.code){case t.PERMISSION_DENIED:this.notifyPermissionChange(!0);break;case t.POSITION_UNAVAILABLE:break;case t.TIMEOUT:break}}startPositionSimulation(){const t={latitude:47.2126,longitude:-1.5559,accuracy:10};this.handlePositionSuccess({coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()}),this.simulationInterval=window.setInterval(()=>{const n=(Math.random()-.5)*2e-4,r=(Math.random()-.5)*2e-4,s={latitude:47.2126+n,longitude:-1.5559+r,accuracy:5+Math.random()*10};this.handlePositionSuccess({coords:{latitude:s.latitude,longitude:s.longitude,accuracy:s.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()})},MS)}}const Nu=new LS,Mr=He("UserLocation"),Za=400,FS=600,Eu="locationActivationTimestamp",$S=5e3,Cu="locationNotificationTimestamp",Iu="lastLocationNotificationKey",zS=30*60*1e3,VS=({onLocationUpdate:e,showNavigation:t=!1,onPermissionChange:n,scale:r=1})=>{const[s,a]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(!1),u=p.useRef(!0),h=p.useRef(null),m=()=>{try{const y=localStorage.getItem(Eu);if(!y)return!1;const j=parseInt(y,10);return Date.now()-j<$S}catch(y){return console.warn("Erreur localStorage dans isRecentlyActivated:",y),!1}},f=y=>{try{const j=Date.now(),v=localStorage.getItem(Cu),b=localStorage.getItem(Iu);if(v){const w=parseInt(v,10);if(j-w<zS||b===y)return!1}return localStorage.setItem(Cu,j.toString()),localStorage.setItem(Iu,y),h.current=y,!0}catch(j){return console.warn("Erreur localStorage dans canShowNotification:",j),!1}},x=F.useCallback((y,j,v)=>{if(!v)return;console.log(`[UserLocation] Nouvelle position GPS reçue: lat=${v.latitude}, lng=${v.longitude}, accuracy=${v.accuracy}`),a(v);const b=kS(v.latitude,v.longitude);l(b);const w=AS(v),T=Ll(v.latitude,v.longitude),E=T>300,P=b.x>=0&&b.x<=Za&&b.y>=0&&b.y<=FS;if(!w&&!u.current&&!m()&&E&&!P){const M=TS(v),A=`distance-${Math.round(T/100)}00-${M}`;f(A)&&(console.log("Toast d'éloignement de l'Île Feydeau",{direction:M,distance:Math.round(T),isWithin:w,isFarFromCenter:E,notificationKey:A,isVisibleOnMap:P,position:{latitude:v.latitude,longitude:v.longitude,mapX:b.x,mapY:b.y,accuracy:v.accuracy}}),Mr.info("Toast d'éloignement de l'Île Feydeau",{direction:M,distance:Math.round(T),isWithin:w,isFarFromCenter:E,notificationKey:A,isVisibleOnMap:P}),Es.show({title:"Vous êtes éloigné de l'Île Feydeau",description:`L'Île Feydeau se trouve au ${M} de votre position actuelle.`,duration:5e3,action:i.jsx(Oh,{altText:"Me guider",children:"Me guider"}),source:"UserLocation.handleLocationUpdate",context:{direction:M,distance:Math.round(T),isWithin:w,isFarFromCenter:E,notificationKey:A}}))}u.current&&(u.current=!1),e&&e(b.x,b.y,v)},[e,u,m,f]),g=F.useCallback(y=>{d(y),n&&n(y),y&&Es.error({title:"Localisation refusée",description:"Vous avez refusé l'accès à votre position. Certaines fonctionnalités ne seront pas disponibles.",duration:5e3,source:"UserLocation.handlePermissionChange",context:{permissionDenied:!0}})},[n]);return p.useEffect(()=>{try{localStorage.setItem(Eu,Date.now().toString())}catch(v){console.warn("Erreur localStorage dans useEffect:",v)}const y=(v,b,w)=>{w&&x(0,0,w)},j=v=>{g(v)};return Nu.startTracking(y,j),()=>{Nu.stopTracking()}},[]),F.useEffect(()=>{const y=Mr.info,j=Mr.debug;return Mr.info=(v,b)=>{if(v.includes("Toast d'éloignement"))return console.log("LOG INFO (TOAST):",v,b),y(v,b);if(!(v.includes("Rendu du marqueur")||v.includes("Position utilisateur")||v.includes("mise à jour")))return y(v,b)},()=>{Mr.info=y,Mr.debug=j}},[]),!o||c?i.jsx("div",{className:"absolute left-1/2 top-8 z-40 w-full flex justify-center pointer-events-none",children:i.jsx("div",{className:"bg-white/90 text-[#ff7a45] border border-[#ff7a45] rounded px-3 py-2 text-center shadow-md text-sm max-w-xs",children:c?"Localisation désactivée ou refusée. Activez la géolocalisation pour voir votre position.":"Position utilisateur indisponible. En attente de signal GPS ou autorisation."})}):i.jsx(i.Fragment,{children:i.jsx("div",{className:"absolute z-30 pointer-events-none",style:{left:`${o.x*r}px`,top:`${o.y*r}px`,transform:"translate(-50%, -50%)"},children:i.jsxs("div",{className:"relative",children:[s&&i.jsx("div",{className:"absolute rounded-full bg-blue-500/20 border border-blue-500/50",style:{width:`${s.accuracy/wu.width*Za*1*r}px`,height:`${s.accuracy/wu.width*Za*1*r}px`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}}),i.jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:t?i.jsx(ll,{className:"h-8 w-8 text-blue-600 drop-shadow-md"}):i.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full border-4 border-white shadow-lg pulse-animation z-50"})})]})})})},eo=He("NavigationGuideSimple"),BS=20;function qS(e,t,n,r){const a=m=>m*Math.PI/180,o=a(e),l=a(n),c=a(n-e),d=a(r-t),u=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function US(e){return Math.round(e)}function HS(e,t,n,r){const s=Math.sin(r-t)*Math.cos(n),a=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(r-t);let o=Math.atan2(s,a)*180/Math.PI;return o=(o+360)%360,o>=337.5||o<22.5?"nord":o>=22.5&&o<67.5?"nord-est":o>=67.5&&o<112.5?"est":o>=112.5&&o<157.5?"sud-est":o>=157.5&&o<202.5?"sud":o>=202.5&&o<247.5?"sud-ouest":o>=247.5&&o<292.5?"ouest":"nord-ouest"}function GS(e){const{userPosition:t,targetLocation:n,onClose:r,mapCoords:s,targetMapCoords:a,scale:o=1}=e,[l,c]=p.useState({distance:0,direction:"",isNearby:!1});return p.useEffect(()=>{if(t&&n)try{const d=sf(n.id);if(!d){eo.warn("[NavigationGuideSimple] Coordonnées GPS non trouvées pour",n.id);return}const u=qS(t.latitude,t.longitude,d.latitude,d.longitude),h=HS(t.latitude,t.longitude,d.latitude,d.longitude),m=u<BS,f=US(u);c({distance:f,direction:h,isNearby:m}),eo.info("[NavigationGuideSimple] Navigation calculée",{userPosition:t,targetLocation:n.id,distance:f,direction:h,isNearby:m})}catch(d){eo.error("[NavigationGuideSimple] Erreur lors du calcul de la navigation",d)}},[t,n]),!t||!n?null:i.jsxs(i.Fragment,{children:[s&&a&&i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full z-40",children:[i.jsxs("svg",{width:"100%",height:"100%",className:"absolute top-0 left-0 pointer-events-none",children:[i.jsx("line",{x1:s.x*o,y1:s.y*o,x2:a.x*o,y2:a.y*o,stroke:"#3b82f6",strokeWidth:"4",strokeDasharray:"8,4"}),i.jsx("circle",{cx:s.x*o,cy:s.y*o,r:"6",fill:"#3b82f6"}),i.jsx("circle",{cx:a.x*o,cy:a.y*o,r:"6",fill:"#ef4444"})]}),i.jsxs("div",{className:"absolute bg-white/90 px-3 py-1.5 rounded text-sm font-medium text-blue-700 shadow-md flex items-center gap-2 cursor-pointer hover:bg-white/100 transition-colors",style:{left:`${(s.x+a.x)/2*o}px`,top:`${(s.y+a.y)/2*o}px`,transform:"translate(-50%, -50%)"},onClick:r,children:[i.jsxs("span",{children:[l.distance," m"]}),i.jsx(br,{className:"w-3 h-3 text-gray-500"})]})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 z-50 p-4 bg-white/90 shadow-lg rounded-t-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(kn,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-lg",children:n.name})]}),i.jsxs(U,{variant:"destructive",size:"sm",onClick:r,className:"flex items-center gap-1",children:[i.jsx(br,{className:"w-4 h-4"}),"Arrêter"]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ll,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("div",{children:i.jsx("p",{className:"font-medium",children:l.isNearby?"Vous êtes arrivé!":`${l.distance} mètres`})})]})})]})]})}const ci=He("MapComponent"),ku={info:(e,t)=>{if(!e.includes("redimensionné"))return ci.info(e,t)},warn:ci.warn,error:ci.error,debug:ci.debug},ps=400,to=600,df=({locations:e,visitedLocations:t=[],onLocationClick:n,highlightedLocation:r=null,testPoint:s,testPointAffine:a,activeLocation:o=null,onClick:l,readOnly:c=!1,onScaleChange:d,userLocationProps:u,navigationProps:h,onPanStart:m,onPan:f,onPanEnd:x})=>{const g=p.useRef(null),[y,j]=p.useState(1),[v,b]=p.useState(!1);p.useState({x:0,y:0}),p.useState({x:0,y:0});const[w,T]=p.useState(null);p.useRef(null);const E=p.useRef(null),P=p.useRef(null),M=p.useRef({dx:0,dy:0}),A=p.useRef(0);p.useRef(!1),p.useEffect(()=>{let k=!1;const $=()=>{try{if(k||!g.current)return;const J=g.current.parentElement;if(!J)return;const te=J.clientWidth||window.innerWidth,z=Math.min(te,ps)/ps;if(k)return;j(z),d&&!k&&d(z),!k&&g.current&&g.current.parentElement&&(g.current.style.width=`${ps*z}px`,g.current.style.height=`${to*z}px`)}catch(J){console.warn("[MapComponent] Error in calculateScale:",J)}};$();const W=Q($,100);window.addEventListener("resize",W);function Q(J,te){let D=null;return function(){D&&window.clearTimeout(D),D=window.setTimeout(()=>{J(),D=null},te)}}return()=>{k=!0;try{window.removeEventListener("resize",W)}catch(J){console.warn("[MapComponent] Error cleaning up resize listener:",J)}}},[d]),p.useEffect(()=>{if(c)return;let k=!1;const $=D=>{if(k||!v||!E.current)return;const z={x:D.clientX,y:D.clientY};if(!P.current){P.current=z;return}const S=z.x-P.current.x,K=z.y-P.current.y;M.current.dx+=S,M.current.dy+=K,P.current=z,f&&f({dx:S,dy:K,x:z.x,y:z.y})},W=()=>{if(k||!v)return;b(!1);const D=Date.now()-A.current,{dx:z,dy:S}=M.current,K=Math.hypot(z,S);E.current=null,P.current=null,M.current={dx:0,dy:0},x&&x({totalDx:z,totalDy:S,distance:K,durationMs:D}),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",W)},Q=(D,z)=>{b(!0),E.current={x:D,y:z},P.current={x:D,y:z},M.current={dx:0,dy:0},A.current=Date.now(),m&&m({x:D,y:z}),window.addEventListener("mousemove",$),window.addEventListener("mouseup",W)},J=g.current;if(!J||k)return;const te=D=>{D.button!==0||k||!J.parentElement||!document.contains(J)||Q(D.clientX,D.clientY)};try{J.addEventListener("mousedown",te)}catch(D){return console.warn("[MapComponent] Error adding mousedown listener:",D),()=>{}}return()=>{k=!0;try{J&&J.removeEventListener&&document.contains(J)&&J.removeEventListener("mousedown",te),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",W)}catch(D){console.warn("[MapComponent] Error cleaning up event listeners:",D)}}},[v,c,m,f,x]),p.useEffect(()=>{e&&e.length>0&&ku.info("Coordonnées des points sur la carte",{activeLocationId:o||"aucun",points:e.map(k=>({id:k.id,name:k.name,x:k.x,y:k.y}))})},[e,o]);const[R,I]=p.useState(null);return p.useEffect(()=>()=>{},[]),R?i.jsx("div",{className:"relative border border-[#d8e3ff] rounded-lg bg-[#f0f5ff] mb-4 overflow-hidden mx-auto flex items-center justify-center",style:{width:`${ps*y}px`,height:`${to*y}px`},children:i.jsxs("div",{className:"text-center text-[#4a5d94]",children:[i.jsx("p",{className:"text-sm mb-2",children:R}),i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#4a5d94] mx-auto"})]})}):i.jsxs("div",{ref:g,className:"relative border border-[#d8e3ff] rounded-lg bg-[#f0f5ff] mb-4 overflow-hidden mx-auto",style:{width:`${ps*y}px`,height:`${to*y}px`},children:[i.jsx("div",{className:"absolute inset-0 bg-white flex items-center justify-center",onClick:c?void 0:l,style:{cursor:c?"default":"pointer"},children:i.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url(${bt("/map-feydeau.png")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:.9,pointerEvents:"none"},children:i.jsx("img",{src:bt("/map-feydeau.png"),alt:"Plan de l'Île Feydeau",className:"hidden",onError:k=>{ku.error("Erreur de chargement de l'image de la carte",{online:Rs()})}})})}),i.jsxs("div",{className:"absolute inset-0",children:[s&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${s.x*y}px`,top:`${s.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#ff0000]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),a&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${a.x*y}px`,top:`${a.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#0000ff]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),e.map(k=>i.jsx("div",{id:`location-${k.id}`,"data-location-id":k.id,className:"absolute",style:{position:"absolute",left:`${k.x*y}px`,top:`${k.y*y}px`,zIndex:20,width:`${60*y}px`,height:`${60*y}px`,transform:"translate(-50%, -50%)",pointerEvents:c?"none":"auto",cursor:c?"default":"pointer"},onClick:c?void 0:$=>{$.stopPropagation(),l&&l($)},children:i.jsx("div",{className:`absolute top-1/2 left-1/2 w-8 h-8 rounded-full shadow-lg border-2 border-white
                ${o===k.id?"bg-[#ff7a45]/90 ring-2 ring-[#ff7a45] ring-opacity-70 scale-110":r===k.id?k.visited?"bg-[#4CAF50]/90 ring-4 ring-green-400 ring-opacity-80":"bg-[#ff7a45]/90 ring-4 ring-yellow-400 ring-opacity-80":k.hasProgram===!1?"bg-[#757575]/90":k.visited?"bg-[#4CAF50]/90":"bg-[#4a5d94]/90"}`,style:{transform:"translate(-50%, -50%)",width:`${32*y}px`,height:`${32*y}px`}})},k.id))]}),u&&i.jsx(VS,{...u,scale:y,onLocationUpdate:(k,$,W)=>{T({x:k,y:$}),u.onLocationUpdate&&u.onLocationUpdate(k,$,W)}}),h&&u&&i.jsx(GS,{...h,mapCoords:w,targetMapCoords:h.targetLocation?{x:h.targetLocation.x,y:h.targetLocation.y}:null,scale:y})]})};var Lo=["Enter"," "],WS=["ArrowDown","PageUp","Home"],mf=["ArrowUp","PageDown","End"],YS=[...WS,...mf],KS={ltr:[...Lo,"ArrowRight"],rtl:[...Lo,"ArrowLeft"]},QS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ys="Menu",[Os,XS,JS]=gm(Ys),[kr,hf]=ss(Ys,[JS,ea,xm]),ya=ea(),ff=xm(),[ZS,Ar]=kr(Ys),[e1,Ks]=kr(Ys),pf=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=e,l=ya(t),[c,d]=p.useState(null),u=p.useRef(!1),h=En(a),m=cl(s);return p.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(fm,{...l,children:i.jsx(ZS,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:i.jsx(e1,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:r})})})};pf.displayName=Ys;var t1="MenuAnchor",Fl=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ya(n);return i.jsx(um,{...s,...r,ref:t})});Fl.displayName=t1;var $l="MenuPortal",[n1,gf]=kr($l,{forceMount:void 0}),xf=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=Ar($l,t);return i.jsx(n1,{scope:t,forceMount:n,children:i.jsx(vn,{present:n||a.open,children:i.jsx(Rx,{asChild:!0,container:s,children:r})})})};xf.displayName=$l;var Ht="MenuContent",[r1,zl]=kr(Ht),yf=p.forwardRef((e,t)=>{const n=gf(Ht,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Ar(Ht,e.__scopeMenu),o=Ks(Ht,e.__scopeMenu);return i.jsx(Os.Provider,{scope:e.__scopeMenu,children:i.jsx(vn,{present:r||a.open,children:i.jsx(Os.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(s1,{...s,ref:t}):i.jsx(i1,{...s,ref:t})})})})}),s1=p.forwardRef((e,t)=>{const n=Ar(Ht,e.__scopeMenu),r=p.useRef(null),s=tt(t,r);return p.useEffect(()=>{const a=r.current;if(a)return kx(a)},[]),i.jsx(Vl,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),i1=p.forwardRef((e,t)=>{const n=Ar(Ht,e.__scopeMenu);return i.jsx(Vl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Vl=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:x,...g}=e,y=Ar(Ht,n),j=Ks(Ht,n),v=ya(n),b=ff(n),w=XS(n),[T,E]=p.useState(null),P=p.useRef(null),M=tt(t,P,y.onContentChange),A=p.useRef(0),R=p.useRef(""),I=p.useRef(0),k=p.useRef(null),$=p.useRef("right"),W=p.useRef(0),Q=x?Mx:p.Fragment,J=x?{as:pm,allowPinchZoom:!0}:void 0,te=z=>{var Te,Ne;const S=R.current+z,K=w().filter(_e=>!_e.disabled),se=document.activeElement,N=(Te=K.find(_e=>_e.ref.current===se))==null?void 0:Te.textValue,oe=K.map(_e=>_e.textValue),Re=x1(oe,S,N),ae=(Ne=K.find(_e=>_e.textValue===Re))==null?void 0:Ne.ref.current;(function _e(G){R.current=G,window.clearTimeout(A.current),G!==""&&(A.current=window.setTimeout(()=>_e(""),1e3))})(S),ae&&setTimeout(()=>ae.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),Ax();const D=p.useCallback(z=>{var K,se;return $.current===((K=k.current)==null?void 0:K.side)&&v1(z,(se=k.current)==null?void 0:se.area)},[]);return i.jsx(r1,{scope:n,searchRef:R,onItemEnter:p.useCallback(z=>{D(z)&&z.preventDefault()},[D]),onItemLeave:p.useCallback(z=>{var S;D(z)||((S=P.current)==null||S.focus(),E(null))},[D]),onTriggerLeave:p.useCallback(z=>{D(z)&&z.preventDefault()},[D]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback(z=>{k.current=z},[]),children:i.jsx(Q,{...J,children:i.jsx(Tx,{asChild:!0,trapped:s,onMountAutoFocus:me(a,z=>{var S;z.preventDefault(),(S=P.current)==null||S.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(dm,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:i.jsx(Px,{asChild:!0,...b,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:E,onEntryFocus:me(c,z=>{j.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(mm,{role:"menu","aria-orientation":"vertical","data-state":Df(y.open),"data-radix-menu-content":"",dir:j.dir,...v,...g,ref:M,style:{outline:"none",...g.style},onKeyDown:me(g.onKeyDown,z=>{const K=z.target.closest("[data-radix-menu-content]")===z.currentTarget,se=z.ctrlKey||z.altKey||z.metaKey,N=z.key.length===1;K&&(z.key==="Tab"&&z.preventDefault(),!se&&N&&te(z.key));const oe=P.current;if(z.target!==oe||!YS.includes(z.key))return;z.preventDefault();const ae=w().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);mf.includes(z.key)&&ae.reverse(),p1(ae)}),onBlur:me(e.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(A.current),R.current="")}),onPointerMove:me(e.onPointerMove,Ls(z=>{const S=z.target,K=W.current!==z.clientX;if(z.currentTarget.contains(S)&&K){const se=z.clientX>W.current?"right":"left";$.current=se,W.current=z.clientX}}))})})})})})})});yf.displayName=Ht;var a1="MenuGroup",Bl=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Je.div,{role:"group",...r,ref:t})});Bl.displayName=a1;var o1="MenuLabel",vf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Je.div,{...r,ref:t})});vf.displayName=o1;var Oi="MenuItem",Au="menu.itemSelect",va=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=p.useRef(null),o=Ks(Oi,e.__scopeMenu),l=zl(Oi,e.__scopeMenu),c=tt(t,a),d=p.useRef(!1),u=()=>{const h=a.current;if(!n&&h){const m=new CustomEvent(Au,{bubbles:!0,cancelable:!0});h.addEventListener(Au,f=>r==null?void 0:r(f),{once:!0}),Dx(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(bf,{...s,ref:c,disabled:n,onClick:me(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:me(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:me(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Lo.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});va.displayName=Oi;var bf=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,o=zl(Oi,n),l=ff(n),c=p.useRef(null),d=tt(t,c),[u,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&f((x.textContent??"").trim())},[a.children]),i.jsx(Os.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(_x,{asChild:!0,...l,focusable:!r,children:i.jsx(Je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:me(e.onPointerMove,Ls(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(e.onPointerLeave,Ls(x=>o.onItemLeave(x))),onFocus:me(e.onFocus,()=>h(!0)),onBlur:me(e.onBlur,()=>h(!1))})})})}),l1="MenuCheckboxItem",wf=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return i.jsx(Cf,{scope:e.__scopeMenu,checked:n,children:i.jsx(va,{role:"menuitemcheckbox","aria-checked":Li(n)?"mixed":n,...s,ref:t,"data-state":Ul(n),onSelect:me(s.onSelect,()=>r==null?void 0:r(Li(n)?!0:!n),{checkForDefaultPrevented:!1})})})});wf.displayName=l1;var jf="MenuRadioGroup",[c1,u1]=kr(jf,{value:void 0,onValueChange:()=>{}}),Sf=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=En(r);return i.jsx(c1,{scope:e.__scopeMenu,value:n,onValueChange:a,children:i.jsx(Bl,{...s,ref:t})})});Sf.displayName=jf;var Nf="MenuRadioItem",Ef=p.forwardRef((e,t)=>{const{value:n,...r}=e,s=u1(Nf,e.__scopeMenu),a=n===s.value;return i.jsx(Cf,{scope:e.__scopeMenu,checked:a,children:i.jsx(va,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Ul(a),onSelect:me(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});Ef.displayName=Nf;var ql="MenuItemIndicator",[Cf,d1]=kr(ql,{checked:!1}),If=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=d1(ql,n);return i.jsx(vn,{present:r||Li(a.checked)||a.checked===!0,children:i.jsx(Je.span,{...s,ref:t,"data-state":Ul(a.checked)})})});If.displayName=ql;var m1="MenuSeparator",kf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});kf.displayName=m1;var h1="MenuArrow",Af=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ya(n);return i.jsx(hm,{...s,...r,ref:t})});Af.displayName=h1;var f1="MenuSub",[fM,Tf]=kr(f1),ws="MenuSubTrigger",Pf=p.forwardRef((e,t)=>{const n=Ar(ws,e.__scopeMenu),r=Ks(ws,e.__scopeMenu),s=Tf(ws,e.__scopeMenu),a=zl(ws,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(Fl,{asChild:!0,...d,children:i.jsx(bf,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Df(n.open),...e,ref:ym(t,s.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(e.onPointerMove,Ls(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:me(e.onPointerLeave,Ls(h=>{var f,x;u();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const g=(x=n.content)==null?void 0:x.dataset.side,y=g==="right",j=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+j,y:h.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:me(e.onKeyDown,h=>{var f;const m=a.searchRef.current!=="";e.disabled||m&&h.key===" "||KS[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});Pf.displayName=ws;var _f="MenuSubContent",Mf=p.forwardRef((e,t)=>{const n=gf(Ht,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Ar(Ht,e.__scopeMenu),o=Ks(Ht,e.__scopeMenu),l=Tf(_f,e.__scopeMenu),c=p.useRef(null),d=tt(t,c);return i.jsx(Os.Provider,{scope:e.__scopeMenu,children:i.jsx(vn,{present:r||a.open,children:i.jsx(Os.Slot,{scope:e.__scopeMenu,children:i.jsx(Vl,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:me(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:me(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:me(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),m=QS[o.dir].includes(u.key);h&&m&&(a.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});Mf.displayName=_f;function Df(e){return e?"open":"closed"}function Li(e){return e==="indeterminate"}function Ul(e){return Li(e)?"indeterminate":e?"checked":"unchecked"}function p1(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function g1(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function x1(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=g1(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function y1(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function v1(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return y1(n,t)}function Ls(e){return t=>t.pointerType==="mouse"?e(t):void 0}var b1=pf,w1=Fl,j1=xf,S1=yf,N1=Bl,E1=vf,C1=va,I1=wf,k1=Sf,A1=Ef,T1=If,P1=kf,_1=Af,M1=Pf,D1=Mf,Hl="DropdownMenu",[R1,pM]=ss(Hl,[hf]),Nt=hf(),[O1,Rf]=R1(Hl),Of=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=Nt(t),d=p.useRef(null),[u=!1,h]=ta({prop:s,defaultProp:a,onChange:o});return i.jsx(O1,{scope:t,triggerId:jo(),triggerRef:d,contentId:jo(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(b1,{...c,open:u,onOpenChange:h,dir:r,modal:l,children:n})})};Of.displayName=Hl;var Lf="DropdownMenuTrigger",Ff=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=Rf(Lf,n),o=Nt(n);return i.jsx(w1,{asChild:!0,...o,children:i.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ym(t,a.triggerRef),onPointerDown:me(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:me(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ff.displayName=Lf;var L1="DropdownMenuPortal",$f=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Nt(t);return i.jsx(j1,{...r,...n})};$f.displayName=L1;var zf="DropdownMenuContent",Vf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Rf(zf,n),a=Nt(n),o=p.useRef(!1);return i.jsx(S1,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:me(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:me(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vf.displayName=zf;var F1="DropdownMenuGroup",$1=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(N1,{...s,...r,ref:t})});$1.displayName=F1;var z1="DropdownMenuLabel",Bf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(E1,{...s,...r,ref:t})});Bf.displayName=z1;var V1="DropdownMenuItem",qf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(C1,{...s,...r,ref:t})});qf.displayName=V1;var B1="DropdownMenuCheckboxItem",Uf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(I1,{...s,...r,ref:t})});Uf.displayName=B1;var q1="DropdownMenuRadioGroup",U1=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(k1,{...s,...r,ref:t})});U1.displayName=q1;var H1="DropdownMenuRadioItem",Hf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(A1,{...s,...r,ref:t})});Hf.displayName=H1;var G1="DropdownMenuItemIndicator",Gf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(T1,{...s,...r,ref:t})});Gf.displayName=G1;var W1="DropdownMenuSeparator",Wf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(P1,{...s,...r,ref:t})});Wf.displayName=W1;var Y1="DropdownMenuArrow",K1=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(_1,{...s,...r,ref:t})});K1.displayName=Y1;var Q1="DropdownMenuSubTrigger",Yf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(M1,{...s,...r,ref:t})});Yf.displayName=Q1;var X1="DropdownMenuSubContent",Kf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Nt(n);return i.jsx(D1,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Kf.displayName=X1;var J1=Of,Z1=Ff,eN=$f,Qf=Vf,Xf=Bf,Jf=qf,Zf=Uf,ep=Hf,tp=Gf,np=Wf,rp=Yf,sp=Kf;const tN=J1,nN=Z1,rN=p.forwardRef(({className:e,inset:t,children:n,...r},s)=>i.jsxs(rp,{ref:s,className:re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Ox,{className:"ml-auto h-4 w-4"})]}));rN.displayName=rp.displayName;const sN=p.forwardRef(({className:e,...t},n)=>i.jsx(sp,{ref:n,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));sN.displayName=sp.displayName;const ip=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(eN,{children:i.jsx(Qf,{ref:r,sideOffset:t,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ip.displayName=Qf.displayName;const lr=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Jf,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));lr.displayName=Jf.displayName;const iN=p.forwardRef(({className:e,children:t,checked:n,...r},s)=>i.jsxs(Zf,{ref:s,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(tp,{children:i.jsx(na,{className:"h-4 w-4"})})}),t]}));iN.displayName=Zf.displayName;const aN=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(ep,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(tp,{children:i.jsx(Lx,{className:"h-2 w-2 fill-current"})})}),t]}));aN.displayName=ep.displayName;const oN=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Xf,{ref:r,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));oN.displayName=Xf.displayName;const lN=p.forwardRef(({className:e,...t},n)=>i.jsx(np,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));lN.displayName=np.displayName;var cN=Object.defineProperty,Fi=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,Tu=(e,t,n)=>t in e?cN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fo=(e,t)=>{for(var n in t||(t={}))ap.call(t,n)&&Tu(e,n,t[n]);if(Fi)for(var n of Fi(t))op.call(t,n)&&Tu(e,n,t[n]);return e},$o=(e,t)=>{var n={};for(var r in e)ap.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Fi)for(var r of Fi(e))t.indexOf(r)<0&&op.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Nr;(e=>{const t=class be{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<be.MIN_VERSION||c>be.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),h==-1){let x=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const y=this.getPenaltyScore();y<x&&(h=g,x=y),this.applyMask(g)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=e.QrSegment.makeSegments(c);return be.encodeSegments(u,d)}static encodeBinary(c,d){const u=e.QrSegment.makeBytes(c);return be.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,m=-1,f=!0){if(!(be.MIN_VERSION<=u&&u<=h&&h<=be.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,g;for(x=u;;x++){const b=be.getNumDataCodewords(x,d)*8,w=o.getTotalBits(c,x);if(w<=b){g=w;break}if(x>=h)throw new RangeError("Data too long")}for(const b of[be.Ecc.MEDIUM,be.Ecc.QUARTILE,be.Ecc.HIGH])f&&g<=be.getNumDataCodewords(x,b)*8&&(d=b);let y=[];for(const b of c){n(b.mode.modeBits,4,y),n(b.numChars,b.mode.numCharCountBits(x),y);for(const w of b.getData())y.push(w)}s(y.length==g);const j=be.getNumDataCodewords(x,d)*8;s(y.length<=j),n(0,Math.min(4,j-y.length),y),n(0,(8-y.length%8)%8,y),s(y.length%8==0);for(let b=236;y.length<j;b^=253)n(b,8,y);let v=[];for(;v.length*8<y.length;)v.push(0);return y.forEach((b,w)=>v[w>>>3]|=b<<7-(w&7)),new be(x,d,v,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,r(h,m));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,r(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,r(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,r(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;s(d>>>18==0);for(let u=0;u<18;u++){const h=r(d,u),m=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(m,f,h),this.setFunctionModule(f,m,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(u)),f=c+h,x=d+u;0<=f&&f<this.size&&0<=x&&x<this.size&&this.setFunctionModule(f,x,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=be.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=be.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],m=be.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(be.getNumRawDataModules(d)/8),x=h-f%h,g=Math.floor(f/h);let y=[];const j=be.reedSolomonComputeDivisor(m);for(let b=0,w=0;b<h;b++){let T=c.slice(w,w+g-m+(b<x?0:1));w+=T.length;const E=be.reedSolomonComputeRemainder(T,j);b<x&&T.push(0),y.push(T.concat(E))}let v=[];for(let b=0;b<y[0].length;b++)y.forEach((w,T)=>{(b!=g-m||T>=x)&&v.push(w[b])});return s(v.length==f),v}drawCodewords(c){if(c.length!=Math.floor(be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const f=u-m,g=(u+1&2)==0?this.size-1-h:h;!this.isFunction[g][f]&&d<c.length*8&&(this.modules[g][f]=r(c[d>>>3],7-(d&7)),d++)}}s(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[m][y]==f?(x++,x==5?c+=be.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*be.PENALTY_N3),f=this.modules[m][y],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*be.PENALTY_N3}for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][m]==f?(x++,x==5?c+=be.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*be.PENALTY_N3),f=this.modules[y][m],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*be.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let f=0;f<this.size-1;f++){const x=this.modules[m][f];x==this.modules[m][f+1]&&x==this.modules[m+1][f]&&x==this.modules[m+1][f+1]&&(c+=be.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((f,x)=>f+(x?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return s(0<=h&&h<=9),c+=h*be.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<be.MIN_VERSION||c>be.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(be.getNumRawDataModules(c)/8)-be.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*be.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let m=0;m<d.length;m++)d[m]=be.reedSolomonMultiply(d[m],u),m+1<d.length&&(d[m]^=d[m+1]);u=be.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const m=h^u.shift();u.push(0),d.forEach((f,x)=>u[x]^=be.reedSolomonMultiply(f,m))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return s(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];s(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function r(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const a=class Ye{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)n(u,8,d);return new Ye(Ye.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Ye.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);n(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new Ye(Ye.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Ye.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=Ye.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=Ye.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),n(h,11,d)}return u<c.length&&n(Ye.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new Ye(Ye.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Ye.isNumeric(c)?[Ye.makeNumeric(c)]:Ye.isAlphanumeric(c)?[Ye.makeAlphanumeric(c)]:[Ye.makeBytes(Ye.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Ye(Ye.Mode.ECI,0,d)}static isNumeric(c){return Ye.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Ye.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const m=h.mode.numCharCountBits(d);if(h.numChars>=1<<m)return 1/0;u+=4+m+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=a;e.QrSegment=a})(Nr||(Nr={}));(e=>{(t=>{const n=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Nr||(Nr={}));(e=>{(t=>{const n=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Nr||(Nr={}));var Fr=Nr;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var uN={L:Fr.QrCode.Ecc.LOW,M:Fr.QrCode.Ecc.MEDIUM,Q:Fr.QrCode.Ecc.QUARTILE,H:Fr.QrCode.Ecc.HIGH},lp=128,cp="L",up="#FFFFFF",dp="#000000",mp=!1,hp=1,dN=4,mN=0,hN=.1;function fp(e,t=0){const n=[];return e.forEach(function(r,s){let a=null;r.forEach(function(o,l){if(!o&&a!==null){n.push(`M${a+t} ${s+t}h${l-a}v1H${a+t}z`),a=null;return}if(l===r.length-1){if(!o)return;a===null?n.push(`M${l+t},${s+t} h1v1H${l+t}z`):n.push(`M${a+t},${s+t} h${l+1-a}v1H${a+t}z`);return}o&&a===null&&(a=l)})}),n.join("")}function pp(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((s,a)=>a<t.x||a>=t.x+t.w?s:!1))}function fN(e,t,n,r){if(r==null)return null;const s=e.length+n*2,a=Math.floor(t*hN),o=s/t,l=(r.width||a)*o,c=(r.height||a)*o,d=r.x==null?e.length/2-l/2:r.x*o,u=r.y==null?e.length/2-c/2:r.y*o,h=r.opacity==null?1:r.opacity;let m=null;if(r.excavate){let x=Math.floor(d),g=Math.floor(u),y=Math.ceil(l+d-x),j=Math.ceil(c+u-g);m={x,y:g,w:y,h:j}}const f=r.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:m,opacity:h,crossOrigin:f}}function pN(e,t){return t!=null?Math.max(Math.floor(t),0):e?dN:mN}function gp({value:e,level:t,minVersion:n,includeMargin:r,marginSize:s,imageSettings:a,size:o,boostLevel:l}){let c=F.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((g,y)=>(g.push(...Fr.QrSegment.makeSegments(y)),g),[]);return Fr.QrCode.encodeSegments(x,uN[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=F.useMemo(()=>{let f=c.getModules();const x=pN(r,s),g=f.length+x*2,y=fN(f,o,x,a);return{cells:f,margin:x,numCells:g,calculatedImageSettings:y}},[c,o,a,r,s]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var gN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),xN=F.forwardRef(function(t,n){const r=t,{value:s,size:a=lp,level:o=cp,bgColor:l=up,fgColor:c=dp,includeMargin:d=mp,minVersion:u=hp,boostLevel:h,marginSize:m,imageSettings:f}=r,g=$o(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=g,j=$o(g,["style"]),v=f==null?void 0:f.src,b=F.useRef(null),w=F.useRef(null),T=F.useCallback(W=>{b.current=W,typeof n=="function"?n(W):n&&(n.current=W)},[n]),[E,P]=F.useState(!1),{margin:M,cells:A,numCells:R,calculatedImageSettings:I}=gp({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:m,imageSettings:f,size:a});F.useEffect(()=>{if(b.current!=null){const W=b.current,Q=W.getContext("2d");if(!Q)return;let J=A;const te=w.current,D=I!=null&&te!==null&&te.complete&&te.naturalHeight!==0&&te.naturalWidth!==0;D&&I.excavation!=null&&(J=pp(A,I.excavation));const z=window.devicePixelRatio||1;W.height=W.width=a*z;const S=a/R*z;Q.scale(S,S),Q.fillStyle=l,Q.fillRect(0,0,R,R),Q.fillStyle=c,gN?Q.fill(new Path2D(fp(J,M))):A.forEach(function(K,se){K.forEach(function(N,oe){N&&Q.fillRect(oe+M,se+M,1,1)})}),I&&(Q.globalAlpha=I.opacity),D&&Q.drawImage(te,I.x+M,I.y+M,I.w,I.h)}}),F.useEffect(()=>{P(!1)},[v]);const k=Fo({height:a,width:a},y);let $=null;return v!=null&&($=F.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{P(!0)},ref:w,crossOrigin:I==null?void 0:I.crossOrigin})),F.createElement(F.Fragment,null,F.createElement("canvas",Fo({style:k,height:a,width:a,ref:T,role:"img"},j)),$)});xN.displayName="QRCodeCanvas";var xp=F.forwardRef(function(t,n){const r=t,{value:s,size:a=lp,level:o=cp,bgColor:l=up,fgColor:c=dp,includeMargin:d=mp,minVersion:u=hp,boostLevel:h,title:m,marginSize:f,imageSettings:x}=r,g=$o(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:j,numCells:v,calculatedImageSettings:b}=gp({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:x,size:a});let w=j,T=null;x!=null&&b!=null&&(b.excavation!=null&&(w=pp(j,b.excavation)),T=F.createElement("image",{href:x.src,height:b.h,width:b.w,x:b.x+y,y:b.y+y,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const E=fp(w,y);return F.createElement("svg",Fo({height:a,width:a,viewBox:`0 0 ${v} ${v}`,ref:n,role:"img"},g),!!m&&F.createElement("title",null,m),F.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),F.createElement("path",{fill:c,d:E,shapeRendering:"crispEdges"}),T)});xp.displayName="QRCodeSVG";const yp=zx,yN=$x,vp=F.forwardRef(({className:e,...t},n)=>i.jsx(vm,{ref:n,className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));vp.displayName=vm.displayName;const Gl=F.forwardRef(({className:e,children:t,...n},r)=>{const s=F.useId();return i.jsxs(yN,{children:[i.jsx(vp,{}),i.jsxs(bm,{ref:r,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-2 border border-slate-200 bg-white p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:p-6 sm:gap-4 max-h-[90vh] overflow-y-auto",e),"aria-describedby":s,...n,children:[i.jsx("div",{id:s,className:"sr-only",children:"Contenu de la boîte de dialogue"}),t,i.jsxs(Fx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","aria-label":"Close dialog",children:[i.jsx(br,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Gl.displayName=bm.displayName;const Wl=({className:e,...t})=>i.jsx("div",{className:re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Wl.displayName="DialogHeader";const bp=({className:e,...t})=>i.jsx("div",{className:re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bp.displayName="DialogFooter";const Yl=F.forwardRef(({className:e,...t},n)=>i.jsx(wm,{ref:n,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));Yl.displayName=wm.displayName;const vN=F.forwardRef(({className:e,...t},n)=>i.jsx(jm,{ref:n,className:re("text-sm text-muted-foreground",e),...t}));vN.displayName=jm.displayName;function ba({title:e,text:t,url:n}){const r=n||(typeof window<"u"?window.location.href:""),[s,a]=F.useState(!1),o=async d=>{try{B.trackFeatureUse("share",{platform:d,title:e});const u=r.startsWith("http")?r:typeof window<"u"?window.location.origin+r:r;switch(d){case"native":if(navigator.share)try{await navigator.share({title:e,text:t,url:u})}catch(h){console.error("Error sharing:",h),l(u)}else l(u);break;case"facebook":try{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Facebook share:",h),l(u)}break;case"x":try{window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Twitter share:",h),l(u)}break;case"instagram":try{const h=/iPad|iPhone|iPod/.test(navigator.userAgent),m=/Android/.test(navigator.userAgent);h||m?(window.location.href="instagram://",setTimeout(()=>{window.location.href="https://www.instagram.com/"},2e3)):window.open("https://www.instagram.com/","_blank")}catch(h){console.error("Error opening Instagram:",h),l(u)}break;case"copy":l(u);break}}catch(u){console.error("Error in handleShare:",u);try{l(r)}catch(h){console.error("Error in fallback copy:",h),alert("Impossible de partager. Veuillez copier manuellement : "+r)}}},l=d=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(d).then(()=>{alert("Lien copié dans le presse-papier")}).catch(u=>{console.error("Erreur lors de la copie :",u),c(d)}):c(d)},c=d=>{let u=null;try{u=document.createElement("textarea"),u.value=d,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();const h=document.execCommand("copy");alert(h?"Lien copié dans le presse-papier":"Impossible de copier le lien. Veuillez le copier manuellement : "+d)}catch(h){console.error("Erreur lors de la copie fallback :",h),alert("Impossible de copier le lien. Veuillez le copier manuellement : "+d)}finally{if(u&&document.body.contains(u))try{document.body.removeChild(u)}catch(h){console.warn("[ShareButton] Error cleaning up textarea:",h)}}};return i.jsxs(i.Fragment,{children:[i.jsxs(tN,{children:[i.jsx(nN,{asChild:!0,children:i.jsx(U,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",children:i.jsx(Sm,{className:"h-5 w-5"})})}),i.jsxs(ip,{align:"end",className:"min-w-[150px]",children:[typeof navigator<"u"&&navigator.share&&i.jsx(lr,{onClick:()=>o("native"),className:"cursor-pointer",children:"Partager"}),i.jsx(lr,{onClick:()=>o("facebook"),className:"cursor-pointer",children:"Facebook"}),i.jsx(lr,{onClick:()=>o("x"),className:"cursor-pointer",children:"X"}),i.jsx(lr,{onClick:()=>o("instagram"),className:"cursor-pointer",children:"Instagram"}),i.jsx(lr,{onClick:()=>o("copy"),className:"cursor-pointer",children:"Copier le lien"}),i.jsxs(lr,{onClick:()=>a(!0),className:"cursor-pointer",children:[i.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Afficher QR code"]})]})]}),i.jsx(yp,{open:s,onOpenChange:a,children:i.jsxs(Gl,{className:"sm:max-w-[425px]","aria-describedby":"qr-code-description",children:[i.jsx(Wl,{children:i.jsx(Yl,{children:"Scannez ce QR code"})}),i.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[i.jsx(xp,{value:r,size:200,bgColor:"#ffffff",fgColor:"#4a5d94",level:"H"}),i.jsx("p",{id:"qr-code-description",className:"text-sm text-gray-600 mt-4 text-center",children:"Scannez ce code avec votre téléphone pour accéder directement à cette page"})]}),i.jsx(bp,{children:i.jsx(U,{onClick:()=>a(!1),children:"Fermer"})})]})})]})}const wp=({count:e=0,show:t=!1,className:n,children:r})=>{const s=t&&e>0;return i.jsxs("div",{className:"relative inline-block",children:[r,s&&i.jsx("div",{className:re("absolute -top-2 -right-2 min-w-[18px] h-[18px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white","animate-pulse",n),children:e>99?"99+":e})]})},Kl={databaseURL:"https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app"};async function Fs(){try{let e=!1;try{e=!localStorage.getItem("cloudinary_revolution_started"),e&&(localStorage.removeItem("community_entries"),localStorage.setItem("cloudinary_revolution_started","true"),console.log("[CloudinaryService] Système initialisé"))}catch(s){console.warn("[CloudinaryService] Erreur localStorage:",s)}const t=await fetch(`${Kl.databaseURL}/community-photos.json`);if(!t.ok)return console.error("[CloudinaryService] Erreur API:",t.status),[];const n=await t.json(),r=n?Object.values(n):[];return console.log(`[CloudinaryService] ${r.length} photos chargées`),r.sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("[CloudinaryService] Erreur:",e),[]}}async function bN(e){var a,o,l,c;const t=e.cloudinaryUrl||e.imageUrl,r={id:t?((a=t.match(/\/v\d+\/([^\.]+)/))==null?void 0:a[1])||`photo_${Date.now()}`:`text_${Date.now()}`,type:t?"photo":"testimonial",displayName:((o=e.displayName)==null?void 0:o.trim())||"Anonyme",content:((l=e.content)==null?void 0:l.trim())||"",imageUrl:t||"",thumbnailUrl:t||"",description:((c=e.description)==null?void 0:c.trim())||"",createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),moderation:{status:"approved",moderatedAt:new Date().toISOString()}};if(!(await fetch(`${Kl.databaseURL}/community-photos/${r.id}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Impossible de sauvegarder la photo. Vérifiez votre connexion.");return console.log("[CloudinaryService] Photo sauvegardée"),r}async function wN(e){if(!(await fetch(`${Kl.databaseURL}/community-photos/${e}.json`,{method:"DELETE"})).ok)throw new Error("Impossible de supprimer la photo");console.log("[CloudinaryService] ✅ Photo supprimée")}const ui="lastKnownPhotosCount",jN=2*60*1e3;function jp(){const[e,t]=p.useState(!1),[n,r]=p.useState(0),[s,a]=p.useState(0),o=p.useCallback(()=>{try{const f=localStorage.getItem(ui);return f?parseInt(f,10):0}catch(f){return console.warn("[NewPhotosNotification] Error reading localStorage:",f),0}},[]),l=p.useCallback(f=>{try{localStorage.setItem(ui,f.toString())}catch(x){console.warn("[NewPhotosNotification] Error writing to localStorage:",x)}},[]),c=p.useCallback(async()=>{try{const x=(await Fs()).length,g=o();if(console.log(`[NewPhotosNotification] Vérification: ${x} photos actuelles, ${g} connues`),a(x),x>g&&g>=0){const y=x-g;r(y),t(!0),console.log(`[NewPhotosNotification] 🎉 ${y} nouvelles photos détectées !`)}else x===g?console.log(`[NewPhotosNotification] Aucune nouvelle photo (${x} = ${g})`):x<g&&(console.log(`[NewPhotosNotification] Photos supprimées ou simulation: ${g} -> ${x}`),l(x))}catch(f){console.error("[NewPhotosNotification] Error checking for new photos:",f)}},[o,l]),d=p.useCallback(()=>{t(!1),r(0),l(s),console.log("[NewPhotosNotification] Photos marquées comme vues - Badge masqué")},[s,l]),u=p.useCallback(async()=>{console.log("[NewPhotosNotification] Vérification forcée des nouvelles photos"),await c()},[c]),h=p.useCallback((f=1)=>{const x=o(),g=Math.max(0,x-f);try{localStorage.setItem(ui,g.toString()),console.log(`[NewPhotosNotification] 🧪 Test: Simulation de ${f} nouvelles photos (${x} -> ${g})`);const y=setTimeout(()=>{c()},500);return()=>clearTimeout(y)}catch(y){return console.error("[NewPhotosNotification] Erreur simulation:",y),()=>{}}},[o,c]),m=p.useCallback(()=>{try{localStorage.removeItem(ui),t(!1),r(0),a(0),console.log("[NewPhotosNotification] 🔄 Système réinitialisé")}catch(f){console.error("[NewPhotosNotification] Erreur réinitialisation:",f)}},[]);return p.useEffect(()=>{(async()=>{if(o()===0)try{const y=await Fs();a(y.length),r(2),t(!0),console.log("[NewPhotosNotification] Premier chargement: Affichage de 2 nouvelles photos pour inciter à découvrir")}catch(y){console.error("[NewPhotosNotification] Erreur initialisation:",y)}else c()})();const x=setInterval(c,jN);return()=>{clearInterval(x)}},[c,o,l]),{hasNewPhotos:e,newPhotosCount:n,totalPhotos:s,markAsViewed:d,forceCheck:u,simulateNewPhotos:h,resetNotification:m}}if(typeof window<"u"){let e=null;window.registerNotificationHook=t=>{e=t},window.testNewPhotos=(t=1)=>{e?e.simulateNewPhotos(t):console.warn("📸 Hook de notification non disponible. Naviguez vers une page avec galerie.")},window.resetPhotoNotifications=()=>{e?e.resetNotification():console.warn("📸 Hook de notification non disponible. Naviguez vers une page avec galerie.")},window.checkPhotoNotifications=()=>{e?e.forceCheck():console.warn("📸 Hook de notification non disponible. Naviguez vers une page avec galerie.")}}function rr(){const t=Tn().pathname,n=jp(),{hasNewPhotos:r,newPhotosCount:s,markAsViewed:a}=n;p.useEffect(()=>{typeof window<"u"&&window.registerNotificationHook&&window.registerNotificationHook(n)},[n]);const o=l=>t===l;return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-center h-16 z-[9999] shadow-lg",children:i.jsxs("div",{className:"w-full max-w-screen-lg grid grid-cols-6 gap-0 px-1 mx-auto",children:[i.jsxs(_r,{to:"/map",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/")||o("/map")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(kn,{className:`${o("/")||o("/map")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${o("/")||o("/map")?"text-[11px]":"text-[10px]"}`,children:"Carte"})]}),i.jsxs(_r,{to:"/program",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/program")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(pn,{className:`${o("/program")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${o("/program")?"text-[11px]":"text-[10px]"}`,children:"Programme"})]}),i.jsxs(_r,{to:"/saved",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/saved")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(sa,{className:`${o("/saved")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${o("/saved")?"text-[11px]":"text-[10px]"}`,children:"Enregistrés"})]}),i.jsxs(_r,{to:"/galleries",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/galleries")||o("/community")||o("/historical")?"text-[#ff7a45] font-medium":"text-gray-500"}`,onClick:()=>{r&&a()},children:[i.jsx(wp,{count:s,show:r,children:i.jsx(is,{className:`${o("/galleries")||o("/community")||o("/historical")?"h-7 w-7":"h-6 w-6"}`})}),i.jsx("span",{className:`mt-1 leading-tight ${o("/galleries")||o("/community")||o("/historical")?"text-[11px]":"text-[10px]"}`,children:"Galeries"})]}),i.jsxs(_r,{to:"/about",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/about")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Cr,{className:`${o("/about")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${o("/about")?"text-[11px]":"text-[10px]"}`,children:"À propos"})]}),i.jsxs(_r,{to:"/donate",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${o("/donate")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Bx,{className:`${o("/donate")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${o("/donate")?"text-[11px]":"text-[10px]"}`,children:"Dons"})]})]})})}const wa="contribution_context";function SN(e){const t={type:"event",id:e.id,name:e.title,imageUrl:e.image?bt(e.image):void 0,locationId:e.locationId};try{localStorage.setItem(wa,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function NN(e){const t={type:"location",id:e.id,name:e.name,imageUrl:e.image?bt(e.image):void 0};try{localStorage.setItem(wa,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function Sp(){try{const e=localStorage.getItem(wa);return e?JSON.parse(e):null}catch(e){return console.error("Erreur lors de la récupération du contexte de contribution:",e),null}}function EN(){try{localStorage.removeItem(wa)}catch(e){console.error("Erreur lors de la suppression du contexte de contribution:",e)}}function CN(e){const t=Sp();return t?{...e,contextType:t.type,contextId:t.id}:e}function IN(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const kN=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,AN=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TN={};function Pu(e,t){return(TN.jsx?AN:kN).test(e)}const PN=/[ \t\n\f\r]/g;function _N(e){return typeof e=="object"?e.type==="text"?_u(e.value):!1:_u(e)}function _u(e){return e.replace(PN,"")===""}class Qs{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Qs.prototype.normal={};Qs.prototype.property={};Qs.prototype.space=void 0;function Np(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Qs(n,r,t)}function zo(e){return e.toLowerCase()}class Tt{constructor(t,n){this.attribute=n,this.property=t}}Tt.prototype.attribute="";Tt.prototype.booleanish=!1;Tt.prototype.boolean=!1;Tt.prototype.commaOrSpaceSeparated=!1;Tt.prototype.commaSeparated=!1;Tt.prototype.defined=!1;Tt.prototype.mustUseProperty=!1;Tt.prototype.number=!1;Tt.prototype.overloadedBoolean=!1;Tt.prototype.property="";Tt.prototype.spaceSeparated=!1;Tt.prototype.space=void 0;let MN=0;const ye=Tr(),Ze=Tr(),Vo=Tr(),Y=Tr(),Fe=Tr(),Br=Tr(),_t=Tr();function Tr(){return 2**++MN}const Bo=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:Ze,commaOrSpaceSeparated:_t,commaSeparated:Br,number:Y,overloadedBoolean:Vo,spaceSeparated:Fe},Symbol.toStringTag,{value:"Module"})),no=Object.keys(Bo);class Ql extends Tt{constructor(t,n,r,s){let a=-1;if(super(t,n),Mu(this,"space",s),typeof r=="number")for(;++a<no.length;){const o=no[a];Mu(this,no[a],(r&Bo[o])===Bo[o])}}}Ql.prototype.defined=!0;function Mu(e,t,n){n&&(e[t]=n)}function os(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new Ql(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[zo(r)]=r,n[zo(a.attribute)]=r}return new Qs(t,n,e.space)}const Ep=os({properties:{ariaActiveDescendant:null,ariaAtomic:Ze,ariaAutoComplete:null,ariaBusy:Ze,ariaChecked:Ze,ariaColCount:Y,ariaColIndex:Y,ariaColSpan:Y,ariaControls:Fe,ariaCurrent:null,ariaDescribedBy:Fe,ariaDetails:null,ariaDisabled:Ze,ariaDropEffect:Fe,ariaErrorMessage:null,ariaExpanded:Ze,ariaFlowTo:Fe,ariaGrabbed:Ze,ariaHasPopup:null,ariaHidden:Ze,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Fe,ariaLevel:Y,ariaLive:null,ariaModal:Ze,ariaMultiLine:Ze,ariaMultiSelectable:Ze,ariaOrientation:null,ariaOwns:Fe,ariaPlaceholder:null,ariaPosInSet:Y,ariaPressed:Ze,ariaReadOnly:Ze,ariaRelevant:null,ariaRequired:Ze,ariaRoleDescription:Fe,ariaRowCount:Y,ariaRowIndex:Y,ariaRowSpan:Y,ariaSelected:Ze,ariaSetSize:Y,ariaSort:null,ariaValueMax:Y,ariaValueMin:Y,ariaValueNow:Y,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Cp(e,t){return t in e?e[t]:t}function Ip(e,t){return Cp(e,t.toLowerCase())}const DN=os({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Br,acceptCharset:Fe,accessKey:Fe,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:Fe,autoFocus:ye,autoPlay:ye,blocking:Fe,capture:null,charSet:null,checked:ye,cite:null,className:Fe,cols:Y,colSpan:null,content:null,contentEditable:Ze,controls:ye,controlsList:Fe,coords:Y|Br,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:Vo,draggable:Ze,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:Fe,height:Y,hidden:Vo,high:Y,href:null,hrefLang:null,htmlFor:Fe,httpEquiv:Fe,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:Fe,itemRef:Fe,itemScope:ye,itemType:Fe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:Y,manifest:null,max:null,maxLength:Y,media:null,method:null,min:null,minLength:Y,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:Y,pattern:null,ping:Fe,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:Fe,required:ye,reversed:ye,rows:Y,rowSpan:Y,sandbox:Fe,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:Y,sizes:null,slot:null,span:Y,spellCheck:Ze,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Y,step:null,style:null,tabIndex:Y,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:Ze,width:Y,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Fe,axis:null,background:null,bgColor:null,border:Y,borderColor:null,bottomMargin:Y,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:Y,leftMargin:Y,link:null,longDesc:null,lowSrc:null,marginHeight:Y,marginWidth:Y,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:Y,rules:null,scheme:null,scrolling:Ze,standby:null,summary:null,text:null,topMargin:Y,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Y,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:Y,security:null,unselectable:null},space:"html",transform:Ip}),RN=os({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_t,accentHeight:Y,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Y,amplitude:Y,arabicForm:null,ascent:Y,attributeName:null,attributeType:null,azimuth:Y,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Y,by:null,calcMode:null,capHeight:Y,className:Fe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Y,diffuseConstant:Y,direction:null,display:null,dur:null,divisor:Y,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:Y,enableBackground:null,end:null,event:null,exponent:Y,externalResourcesRequired:null,fill:null,fillOpacity:Y,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Br,g2:Br,glyphName:Br,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Y,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Y,horizOriginX:Y,horizOriginY:Y,id:null,ideographic:Y,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Y,k:Y,k1:Y,k2:Y,k3:Y,k4:Y,kernelMatrix:_t,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Y,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Y,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Y,overlineThickness:Y,paintOrder:null,panose1:null,path:null,pathLength:Y,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Fe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Y,pointsAtY:Y,pointsAtZ:Y,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_t,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_t,rev:_t,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_t,requiredFeatures:_t,requiredFonts:_t,requiredFormats:_t,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Y,specularExponent:Y,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Y,strikethroughThickness:Y,string:null,stroke:null,strokeDashArray:_t,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Y,strokeOpacity:Y,strokeWidth:null,style:null,surfaceScale:Y,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_t,tabIndex:Y,tableValues:null,target:null,targetX:Y,targetY:Y,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_t,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Y,underlineThickness:Y,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Y,values:null,vAlphabetic:Y,vMathematical:Y,vectorEffect:null,vHanging:Y,vIdeographic:Y,version:null,vertAdvY:Y,vertOriginX:Y,vertOriginY:Y,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Y,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Cp}),kp=os({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ap=os({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ip}),Tp=os({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ON={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LN=/[A-Z]/g,Du=/-[a-z]/g,FN=/^data[-\w.:]+$/i;function $N(e,t){const n=zo(t);let r=t,s=Tt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FN.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Du,VN);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Du.test(a)){let o=a.replace(LN,zN);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Ql}return new s(r,t)}function zN(e){return"-"+e.toLowerCase()}function VN(e){return e.charAt(1).toUpperCase()}const BN=Np([Ep,DN,kp,Ap,Tp],"html"),Xl=Np([Ep,RN,kp,Ap,Tp],"svg");function qN(e){return e.join(" ").trim()}var Jl={},Ru=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,UN=/\n/g,HN=/^\s*/,GN=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,WN=/^:\s*/,YN=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,KN=/^[;\s]*/,QN=/^\s+|\s+$/g,XN=`
`,Ou="/",Lu="*",ur="",JN="comment",ZN="declaration",eE=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(x){var g=x.match(UN);g&&(n+=g.length);var y=x.lastIndexOf(XN);r=~y?x.length-y:r+x.length}function a(){var x={line:n,column:r};return function(g){return g.position=new o(x),d(),g}}function o(x){this.start=x,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+n+":"+r+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var y=g[0];return s(y),e=e.slice(y.length),g}}function d(){c(HN)}function u(x){var g;for(x=x||[];g=h();)g!==!1&&x.push(g);return x}function h(){var x=a();if(!(Ou!=e.charAt(0)||Lu!=e.charAt(1))){for(var g=2;ur!=e.charAt(g)&&(Lu!=e.charAt(g)||Ou!=e.charAt(g+1));)++g;if(g+=2,ur===e.charAt(g-1))return l("End of comment missing");var y=e.slice(2,g-2);return r+=2,s(y),e=e.slice(g),r+=2,x({type:JN,comment:y})}}function m(){var x=a(),g=c(GN);if(g){if(h(),!c(WN))return l("property missing ':'");var y=c(YN),j=x({type:ZN,property:Fu(g[0].replace(Ru,ur)),value:y?Fu(y[0].replace(Ru,ur)):ur});return c(KN),j}}function f(){var x=[];u(x);for(var g;g=m();)g!==!1&&(x.push(g),u(x));return x}return d(),f()};function Fu(e){return e?e.replace(QN,ur):ur}var tE=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.default=rE;var nE=tE(eE);function rE(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,nE.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;s?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.camelCase=void 0;var sE=/^--[a-zA-Z0-9_-]+$/,iE=/-([a-z])/g,aE=/^[^-]+$/,oE=/^-(webkit|moz|ms|o|khtml)-/,lE=/^-(ms)-/,cE=function(e){return!e||aE.test(e)||sE.test(e)},uE=function(e,t){return t.toUpperCase()},$u=function(e,t){return"".concat(t,"-")},dE=function(e,t){return t===void 0&&(t={}),cE(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(lE,$u):e=e.replace(oE,$u),e.replace(iE,uE))};ja.camelCase=dE;var mE=ki&&ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},hE=mE(Jl),fE=ja;function qo(e,t){var n={};return!e||typeof e!="string"||(0,hE.default)(e,function(r,s){r&&s&&(n[(0,fE.camelCase)(r,t)]=s)}),n}qo.default=qo;var pE=qo;const gE=$m(pE),Pp=_p("end"),Zl=_p("start");function _p(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xE(e){const t=Zl(e),n=Pp(e);if(t&&n)return{start:t,end:n}}function Cs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?zu(e.position):"start"in e||"end"in e?zu(e):"line"in e||"column"in e?Uo(e):""}function Uo(e){return Vu(e&&e.line)+":"+Vu(e&&e.column)}function zu(e){return Uo(e&&e.start)+"-"+Uo(e&&e.end)}function Vu(e){return e&&typeof e=="number"?e:1}class pt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=Cs(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}pt.prototype.file="";pt.prototype.name="";pt.prototype.reason="";pt.prototype.message="";pt.prototype.stack="";pt.prototype.column=void 0;pt.prototype.line=void 0;pt.prototype.ancestors=void 0;pt.prototype.cause=void 0;pt.prototype.fatal=void 0;pt.prototype.place=void 0;pt.prototype.ruleId=void 0;pt.prototype.source=void 0;const ec={}.hasOwnProperty,yE=new Map,vE=/[A-Z]/g,bE=new Set(["table","tbody","thead","tfoot","tr"]),wE=new Set(["td","th"]),Mp="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function jE(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=TE(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=AE(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Xl:BN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=Dp(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function Dp(e,t,n){if(t.type==="element")return SE(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return NE(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return CE(e,t,n);if(t.type==="mdxjsEsm")return EE(e,t);if(t.type==="root")return IE(e,t,n);if(t.type==="text")return kE(e,t)}function SE(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Xl,e.schema=s),e.ancestors.push(t);const a=Op(e,t.tagName,!1),o=PE(e,t);let l=nc(e,t);return bE.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!_N(c):!0})),Rp(e,o,a,t),tc(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function NE(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}$s(e,t.position)}function EE(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);$s(e,t.position)}function CE(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Xl,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Op(e,t.name,!0),o=_E(e,t),l=nc(e,t);return Rp(e,o,a,t),tc(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function IE(e,t,n){const r={};return tc(r,nc(e,t)),e.create(t,e.Fragment,r,n)}function kE(e,t){return t.value}function Rp(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function tc(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function AE(e,t,n){return r;function r(s,a,o,l){const d=Array.isArray(o.children)?n:t;return l?d(a,o,l):d(a,o)}}function TE(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=Zl(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function PE(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&ec.call(t.properties,s)){const a=ME(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&wE.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function _E(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else $s(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else $s(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function nc(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:yE;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=s.get(c)||0;o=c+"-"+d,s.set(c,d+1)}}const l=Dp(e,a,o);l!==void 0&&n.push(l)}return n}function ME(e,t,n){const r=$N(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?IN(n):qN(n)),r.property==="style"){let s=typeof n=="object"?n:DE(e,String(n));return e.stylePropertyNameCase==="css"&&(s=RE(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?ON[r.property]||r.property:r.attribute,n]}}function DE(e,t){try{return gE(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new pt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Mp+"#cannot-parse-style-attribute",s}}function Op(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=Pu(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=Pu(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return ec.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);$s(e)}function $s(e,t){const n=new pt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Mp+"#cannot-handle-mdx-estrees-without-createevaluater",n}function RE(e){const t={};let n;for(n in e)ec.call(e,n)&&(t[OE(n)]=e[n]);return t}function OE(e){let t=e.replace(vE,LE);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function LE(e){return"-"+e.toLowerCase()}const ro={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FE={};function $E(e,t){const n=FE,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Lp(e,r,s)}function Lp(e,t,n){if(zE(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Bu(e.children,t,n)}return Array.isArray(e)?Bu(e,t,n):""}function Bu(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Lp(e[s],t,n);return r.join("")}function zE(e){return!!(e&&typeof e=="object")}const qu=document.createElement("i");function rc(e){const t="&"+e+";";qu.innerHTML=t;const n=qu.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function yn(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Ut(e,t){return e.length>0?(yn(e,e.length,0,t),e):t}const Uu={}.hasOwnProperty;function VE(e){const t={};let n=-1;for(;++n<e.length;)BE(t,e[n]);return t}function BE(e,t){let n;for(n in t){const s=(Uu.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Uu.call(s,o)||(s[o]=[]);const l=a[o];qE(s[o],Array.isArray(l)?l:l?[l]:[])}}}function qE(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);yn(e,0,0,r)}function Fp(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function qr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const dn=sr(/[A-Za-z]/),Ft=sr(/[\dA-Za-z]/),UE=sr(/[#-'*+\--9=?A-Z^-~]/);function Ho(e){return e!==null&&(e<32||e===127)}const Go=sr(/\d/),HE=sr(/[\dA-Fa-f]/),GE=sr(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function At(e){return e!==null&&(e<0||e===32)}function Ie(e){return e===-2||e===-1||e===32}const WE=sr(new RegExp("\\p{P}|\\p{S}","u")),YE=sr(/\s/);function sr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ls(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Ft(e.charCodeAt(n+1))&&Ft(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function $e(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return Ie(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ie(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const KE={tokenize:QE};function QE(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),$e(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const XE={tokenize:JE},Hu={tokenize:ZE};function JE(e){const t=this,n=[];let r=0,s,a,o;return l;function l(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,c,d)(b)}return d(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const w=t.events.length;let T=w,E;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){E=t.events[T][1].end;break}j(r);let P=w;for(;P<t.events.length;)t.events[P][1].end={...E},P++;return yn(t.events,T+1,0,t.events.slice(w)),t.events.length=P,d(b)}return l(b)}function d(b){if(r===n.length){if(!s)return m(b);if(s.currentConstruct&&s.currentConstruct.concrete)return x(b);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hu,u,h)(b)}function u(b){return s&&v(),j(r),m(b)}function h(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(b)}function m(b){return t.containerState={},e.attempt(Hu,f,x)(b)}function f(b){return r++,n.push([t.currentConstruct,t.containerState]),m(b)}function x(b){if(b===null){s&&v(),j(0),e.consume(b);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),g(b)}function g(b){if(b===null){y(e.exit("chunkFlow"),!0),j(0),e.consume(b);return}return de(b)?(e.consume(b),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(b),g)}function y(b,w){const T=t.sliceStream(b);if(w&&T.push(null),b.previous=a,a&&(a.next=b),a=b,s.defineSkip(b.start),s.write(T),t.parser.lazy[b.start.line]){let E=s.events.length;for(;E--;)if(s.events[E][1].start.offset<o&&(!s.events[E][1].end||s.events[E][1].end.offset>o))return;const P=t.events.length;let M=P,A,R;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){if(A){R=t.events[M][1].end;break}A=!0}for(j(r),E=P;E<t.events.length;)t.events[E][1].end={...R},E++;yn(t.events,M+1,0,t.events.slice(P)),t.events.length=E}}function j(b){let w=n.length;for(;w-- >b;){const T=n[w];t.containerState=T[1],T[0].exit.call(t,e)}n.length=b}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function ZE(e,t,n){return $e(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gu(e){if(e===null||At(e)||YE(e))return 1;if(WE(e))return 2}function sc(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Wo={name:"attention",resolveAll:eC,tokenize:tC};function eC(e,t){let n=-1,r,s,a,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};Wu(h,-c),Wu(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=Ut(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=Ut(d,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=Ut(d,sc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=Ut(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=Ut(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,yn(e,r-1,n-r+3,d),n=r+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function tC(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Gu(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const d=e.exit("attentionSequence"),u=Gu(c),h=!u||u===2&&s||n.includes(c),m=!s||s===2&&u||n.includes(r);return d._open=!!(a===42?h:h&&(s||!m)),d._close=!!(a===42?m:m&&(u||!h)),t(c)}}function Wu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nC={name:"autolink",tokenize:rC};function rC(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return dn(f)?(e.consume(f),o):f===64?n(f):d(f)}function o(f){return f===43||f===45||f===46||Ft(f)?(r=1,l(f)):d(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||Ft(f))&&r++<32?(e.consume(f),l):(r=0,d(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Ho(f)?n(f):(e.consume(f),c)}function d(f){return f===64?(e.consume(f),u):UE(f)?(e.consume(f),d):n(f)}function u(f){return Ft(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,u):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||Ft(f))&&r++<63){const x=f===45?m:h;return e.consume(f),x}return n(f)}}const Sa={partial:!0,tokenize:sC};function sC(e,t,n){return r;function r(a){return Ie(a)?$e(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||de(a)?t(a):n(a)}}const $p={continuation:{tokenize:aC},exit:oC,name:"blockQuote",tokenize:iC};function iC(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Ie(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function aC(e,t,n){const r=this;return s;function s(o){return Ie(o)?$e(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt($p,t,n)(o)}}function oC(e){e.exit("blockQuote")}const zp={name:"characterEscape",tokenize:lC};function lC(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return GE(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Vp={name:"characterReference",tokenize:cC};function cC(e,t,n){const r=this;let s=0,a,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Ft,u(h))}function d(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=HE,u):(e.enter("characterReferenceValue"),a=7,o=Go,u(h))}function u(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return o===Ft&&!rc(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<a?(e.consume(h),u):n(h)}}const Yu={partial:!0,tokenize:dC},Ku={concrete:!0,name:"codeFenced",tokenize:uC};function uC(e,t,n){const r=this,s={partial:!0,tokenize:T};let a=0,o=0,l;return c;function c(E){return d(E)}function d(E){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=E,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(E)}function u(E){return E===l?(o++,e.consume(E),u):o<3?n(E):(e.exit("codeFencedFenceSequence"),Ie(E)?$e(e,h,"whitespace")(E):h(E))}function h(E){return E===null||de(E)?(e.exit("codeFencedFence"),r.interrupt?t(E):e.check(Yu,g,w)(E)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(E))}function m(E){return E===null||de(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(E)):Ie(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$e(e,f,"whitespace")(E)):E===96&&E===l?n(E):(e.consume(E),m)}function f(E){return E===null||de(E)?h(E):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(E))}function x(E){return E===null||de(E)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(E)):E===96&&E===l?n(E):(e.consume(E),x)}function g(E){return e.attempt(s,w,y)(E)}function y(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),j}function j(E){return a>0&&Ie(E)?$e(e,v,"linePrefix",a+1)(E):v(E)}function v(E){return E===null||de(E)?e.check(Yu,g,w)(E):(e.enter("codeFlowValue"),b(E))}function b(E){return E===null||de(E)?(e.exit("codeFlowValue"),v(E)):(e.consume(E),b)}function w(E){return e.exit("codeFenced"),t(E)}function T(E,P,M){let A=0;return R;function R(Q){return E.enter("lineEnding"),E.consume(Q),E.exit("lineEnding"),I}function I(Q){return E.enter("codeFencedFence"),Ie(Q)?$e(E,k,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):k(Q)}function k(Q){return Q===l?(E.enter("codeFencedFenceSequence"),$(Q)):M(Q)}function $(Q){return Q===l?(A++,E.consume(Q),$):A>=o?(E.exit("codeFencedFenceSequence"),Ie(Q)?$e(E,W,"whitespace")(Q):W(Q)):M(Q)}function W(Q){return Q===null||de(Q)?(E.exit("codeFencedFence"),P(Q)):M(Q)}}}function dC(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const so={name:"codeIndented",tokenize:hC},mC={partial:!0,tokenize:fC};function hC(e,t,n){const r=this;return s;function s(d){return e.enter("codeIndented"),$e(e,a,"linePrefix",5)(d)}function a(d){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):de(d)?e.attempt(mC,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||de(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function fC(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):$e(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):de(o)?s(o):n(o)}}const pC={name:"codeText",previous:xC,resolve:gC,tokenize:yC};function gC(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function xC(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function yC(e,t,n){let r=0,s,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(a=e.enter("codeTextSequence"),s=0,u(h)):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||de(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),d)}function u(h){return h===96?(e.consume(h),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",d(h))}}class vC{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&gs(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),gs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),gs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);gs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);gs(this.left,n.reverse())}}}function gs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Bp(e){const t={};let n=-1,r,s,a,o,l,c,d;const u=new vC(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,bC(u,n)),n=t[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},l=u.slice(s,n),l.unshift(r),u.splice(s,n-s+1,l))}}return yn(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function bC(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,m=-1,f=n,x=0,g=0;const y=[g];for(;f;){for(;e.get(++s)[1]!==f;);a.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(g=m+1,y.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),m=y.length;m--;){const j=l.slice(y[m],y[m+1]),v=a.pop();c.push([v,v+j.length-1]),e.splice(v,2,j)}for(c.reverse(),m=-1;++m<c.length;)d[x+c[m][0]]=x+c[m][1],x+=c[m][1]-c[m][0]-1;return d}const wC={resolve:SC,tokenize:NC},jC={partial:!0,tokenize:EC};function SC(e){return Bp(e),e}function NC(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):de(l)?e.check(jC,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function EC(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),$e(e,a,"linePrefix")}function a(o){if(o===null||de(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function qp(e,t,n,r,s,a,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(j){return j===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(j),e.exit(a),m):j===null||j===32||j===41||Ho(j)?n(j):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(j))}function m(j){return j===62?(e.enter(a),e.consume(j),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(j))}function f(j){return j===62?(e.exit("chunkString"),e.exit(l),m(j)):j===null||j===60||de(j)?n(j):(e.consume(j),j===92?x:f)}function x(j){return j===60||j===62||j===92?(e.consume(j),f):f(j)}function g(j){return!u&&(j===null||j===41||At(j))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(j)):u<d&&j===40?(e.consume(j),u++,g):j===41?(e.consume(j),u--,g):j===null||j===32||j===40||Ho(j)?n(j):(e.consume(j),j===92?y:g)}function y(j){return j===40||j===41||j===92?(e.consume(j),g):g(j)}}function Up(e,t,n,r,s,a){const o=this;let l=0,c;return d;function d(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(a),u}function u(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(a),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||de(f)||l++>999?(e.exit("chunkString"),u(f)):(e.consume(f),c||(c=!Ie(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function Hp(e,t,n,r,s,a){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(a),d(m))}function d(m){return m===o?(e.exit(a),c(o)):m===null?n(m):de(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),$e(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||de(m)?(e.exit("chunkString"),d(m)):(e.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(e.consume(m),u):u(m)}}function Is(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ie(s)?$e(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const CC={name:"definition",tokenize:kC},IC={partial:!0,tokenize:AC};function kC(e,t,n){const r=this;let s;return a;function a(f){return e.enter("definition"),o(f)}function o(f){return Up.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return At(f)?Is(e,d)(f):d(f)}function d(f){return qp(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return e.attempt(IC,h,h)(f)}function h(f){return Ie(f)?$e(e,m,"whitespace")(f):m(f)}function m(f){return f===null||de(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function AC(e,t,n){return r;function r(l){return At(l)?Is(e,s)(l):n(l)}function s(l){return Hp(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Ie(l)?$e(e,o,"whitespace")(l):o(l)}function o(l){return l===null||de(l)?t(l):n(l)}}const TC={name:"hardBreakEscape",tokenize:PC};function PC(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return de(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const _C={name:"headingAtx",resolve:MC,tokenize:DC};function MC(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},yn(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function DC(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||At(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||de(u)?(e.exit("atxHeading"),t(u)):Ie(u)?$e(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||At(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const RC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qu=["pre","script","style","textarea"],OC={concrete:!0,name:"htmlFlow",resolveTo:$C,tokenize:zC},LC={partial:!0,tokenize:BC},FC={partial:!0,tokenize:VC};function $C(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function zC(e,t,n){const r=this;let s,a,o,l,c;return d;function d(N){return u(N)}function u(N){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(N),h}function h(N){return N===33?(e.consume(N),m):N===47?(e.consume(N),a=!0,g):N===63?(e.consume(N),s=3,r.interrupt?t:S):dn(N)?(e.consume(N),o=String.fromCharCode(N),y):n(N)}function m(N){return N===45?(e.consume(N),s=2,f):N===91?(e.consume(N),s=5,l=0,x):dn(N)?(e.consume(N),s=4,r.interrupt?t:S):n(N)}function f(N){return N===45?(e.consume(N),r.interrupt?t:S):n(N)}function x(N){const oe="CDATA[";return N===oe.charCodeAt(l++)?(e.consume(N),l===oe.length?r.interrupt?t:k:x):n(N)}function g(N){return dn(N)?(e.consume(N),o=String.fromCharCode(N),y):n(N)}function y(N){if(N===null||N===47||N===62||At(N)){const oe=N===47,Re=o.toLowerCase();return!oe&&!a&&Qu.includes(Re)?(s=1,r.interrupt?t(N):k(N)):RC.includes(o.toLowerCase())?(s=6,oe?(e.consume(N),j):r.interrupt?t(N):k(N)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(N):a?v(N):b(N))}return N===45||Ft(N)?(e.consume(N),o+=String.fromCharCode(N),y):n(N)}function j(N){return N===62?(e.consume(N),r.interrupt?t:k):n(N)}function v(N){return Ie(N)?(e.consume(N),v):R(N)}function b(N){return N===47?(e.consume(N),R):N===58||N===95||dn(N)?(e.consume(N),w):Ie(N)?(e.consume(N),b):R(N)}function w(N){return N===45||N===46||N===58||N===95||Ft(N)?(e.consume(N),w):T(N)}function T(N){return N===61?(e.consume(N),E):Ie(N)?(e.consume(N),T):b(N)}function E(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),c=N,P):Ie(N)?(e.consume(N),E):M(N)}function P(N){return N===c?(e.consume(N),c=null,A):N===null||de(N)?n(N):(e.consume(N),P)}function M(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||At(N)?T(N):(e.consume(N),M)}function A(N){return N===47||N===62||Ie(N)?b(N):n(N)}function R(N){return N===62?(e.consume(N),I):n(N)}function I(N){return N===null||de(N)?k(N):Ie(N)?(e.consume(N),I):n(N)}function k(N){return N===45&&s===2?(e.consume(N),J):N===60&&s===1?(e.consume(N),te):N===62&&s===4?(e.consume(N),K):N===63&&s===3?(e.consume(N),S):N===93&&s===5?(e.consume(N),z):de(N)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(LC,se,$)(N)):N===null||de(N)?(e.exit("htmlFlowData"),$(N)):(e.consume(N),k)}function $(N){return e.check(FC,W,se)(N)}function W(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),Q}function Q(N){return N===null||de(N)?$(N):(e.enter("htmlFlowData"),k(N))}function J(N){return N===45?(e.consume(N),S):k(N)}function te(N){return N===47?(e.consume(N),o="",D):k(N)}function D(N){if(N===62){const oe=o.toLowerCase();return Qu.includes(oe)?(e.consume(N),K):k(N)}return dn(N)&&o.length<8?(e.consume(N),o+=String.fromCharCode(N),D):k(N)}function z(N){return N===93?(e.consume(N),S):k(N)}function S(N){return N===62?(e.consume(N),K):N===45&&s===2?(e.consume(N),S):k(N)}function K(N){return N===null||de(N)?(e.exit("htmlFlowData"),se(N)):(e.consume(N),K)}function se(N){return e.exit("htmlFlow"),t(N)}}function VC(e,t,n){const r=this;return s;function s(o){return de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function BC(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Sa,t,n)}}const qC={name:"htmlText",tokenize:UC};function UC(e,t,n){const r=this;let s,a,o;return l;function l(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),c}function c(S){return S===33?(e.consume(S),d):S===47?(e.consume(S),T):S===63?(e.consume(S),b):dn(S)?(e.consume(S),M):n(S)}function d(S){return S===45?(e.consume(S),u):S===91?(e.consume(S),a=0,x):dn(S)?(e.consume(S),v):n(S)}function u(S){return S===45?(e.consume(S),f):n(S)}function h(S){return S===null?n(S):S===45?(e.consume(S),m):de(S)?(o=h,te(S)):(e.consume(S),h)}function m(S){return S===45?(e.consume(S),f):h(S)}function f(S){return S===62?J(S):S===45?m(S):h(S)}function x(S){const K="CDATA[";return S===K.charCodeAt(a++)?(e.consume(S),a===K.length?g:x):n(S)}function g(S){return S===null?n(S):S===93?(e.consume(S),y):de(S)?(o=g,te(S)):(e.consume(S),g)}function y(S){return S===93?(e.consume(S),j):g(S)}function j(S){return S===62?J(S):S===93?(e.consume(S),j):g(S)}function v(S){return S===null||S===62?J(S):de(S)?(o=v,te(S)):(e.consume(S),v)}function b(S){return S===null?n(S):S===63?(e.consume(S),w):de(S)?(o=b,te(S)):(e.consume(S),b)}function w(S){return S===62?J(S):b(S)}function T(S){return dn(S)?(e.consume(S),E):n(S)}function E(S){return S===45||Ft(S)?(e.consume(S),E):P(S)}function P(S){return de(S)?(o=P,te(S)):Ie(S)?(e.consume(S),P):J(S)}function M(S){return S===45||Ft(S)?(e.consume(S),M):S===47||S===62||At(S)?A(S):n(S)}function A(S){return S===47?(e.consume(S),J):S===58||S===95||dn(S)?(e.consume(S),R):de(S)?(o=A,te(S)):Ie(S)?(e.consume(S),A):J(S)}function R(S){return S===45||S===46||S===58||S===95||Ft(S)?(e.consume(S),R):I(S)}function I(S){return S===61?(e.consume(S),k):de(S)?(o=I,te(S)):Ie(S)?(e.consume(S),I):A(S)}function k(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),s=S,$):de(S)?(o=k,te(S)):Ie(S)?(e.consume(S),k):(e.consume(S),W)}function $(S){return S===s?(e.consume(S),s=void 0,Q):S===null?n(S):de(S)?(o=$,te(S)):(e.consume(S),$)}function W(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||At(S)?A(S):(e.consume(S),W)}function Q(S){return S===47||S===62||At(S)?A(S):n(S)}function J(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):n(S)}function te(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),D}function D(S){return Ie(S)?$e(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):z(S)}function z(S){return e.enter("htmlTextData"),o(S)}}const ic={name:"labelEnd",resolveAll:YC,resolveTo:KC,tokenize:QC},HC={tokenize:XC},GC={tokenize:JC},WC={tokenize:ZC};function YC(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&yn(e,0,e.length,n),e}function KC(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=Ut(l,e.slice(a+1,a+r+3)),l=Ut(l,[["enter",u,t]]),l=Ut(l,sc(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=Ut(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=Ut(l,e.slice(o+1)),l=Ut(l,[["exit",c,t]]),yn(e,a,e.length,l),e}function QC(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(m){return a?a._inactive?h(m):(o=r.parser.defined.includes(qr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(HC,u,o?u:h)(m):m===91?e.attempt(GC,u,o?d:h)(m):o?u(m):h(m)}function d(m){return e.attempt(WC,u,h)(m)}function u(m){return t(m)}function h(m){return a._balanced=!0,n(m)}}function XC(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return At(h)?Is(e,a)(h):a(h)}function a(h){return h===41?u(h):qp(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return At(h)?Is(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Hp(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return At(h)?Is(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function JC(e,t,n){const r=this;return s;function s(l){return Up.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(qr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function ZC(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const eI={name:"labelStartImage",resolveAll:ic.resolveAll,tokenize:tI};function tI(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const nI={name:"labelStartLink",resolveAll:ic.resolveAll,tokenize:rI};function rI(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const io={name:"lineEnding",tokenize:sI};function sI(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),$e(e,t,"linePrefix")}}const Ni={name:"thematicBreak",tokenize:iI};function iI(e,t,n){let r=0,s;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return s=d,l(d)}function l(d){return d===s?(e.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||de(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===s?(e.consume(d),r++,c):(e.exit("thematicBreakSequence"),Ie(d)?$e(e,l,"whitespace")(d):l(d))}}const It={continuation:{tokenize:cI},exit:dI,name:"list",tokenize:lI},aI={partial:!0,tokenize:mI},oI={partial:!0,tokenize:uI};function lI(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const x=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Go(f)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Ni,n,d)(f):d(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Go(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),d(f)):n(f)}function d(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Sa,r.interrupt?n:u,e.attempt(aI,m,h))}function u(f){return r.containerState.initialBlankLine=!0,a++,m(f)}function h(f){return Ie(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function cI(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Sa,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$e(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!Ie(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(oI,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,$e(e,e.attempt(It,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function uI(e,t,n){const r=this;return $e(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function dI(e){e.exit(this.containerState.type)}function mI(e,t,n){const r=this;return $e(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!Ie(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Xu={name:"setextUnderline",resolveTo:hI,tokenize:fI};function hI(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function fI(e,t,n){const r=this;let s;return a;function a(d){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===s?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),Ie(d)?$e(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||de(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const pI={tokenize:gI};function gI(e){const t=this,n=e.attempt(Sa,r,e.attempt(this.parser.constructs.flowInitial,s,$e(e,e.attempt(this.parser.constructs.flow,s,e.attempt(wC,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const xI={resolveAll:Wp()},yI=Gp("string"),vI=Gp("text");function Gp(e){return{resolveAll:Wp(e==="text"?bI:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(u){return d(u)?a(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),a(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const h=s[u];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Wp(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function bI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const d=s[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const wI={42:It,43:It,45:It,48:It,49:It,50:It,51:It,52:It,53:It,54:It,55:It,56:It,57:It,62:$p},jI={91:CC},SI={[-2]:so,[-1]:so,32:so},NI={35:_C,42:Ni,45:[Xu,Ni],60:OC,61:Xu,95:Ni,96:Ku,126:Ku},EI={38:Vp,92:zp},CI={[-5]:io,[-4]:io,[-3]:io,33:eI,38:Vp,42:Wo,60:[nC,qC],91:nI,92:[TC,zp],93:ic,95:Wo,96:pC},II={null:[Wo,xI]},kI={null:[42,95]},AI={null:[]},TI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kI,contentInitial:jI,disable:AI,document:wI,flow:NI,flowInitial:SI,insideSpan:II,string:EI,text:CI},Symbol.toStringTag,{value:"Module"}));function PI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:P(T),check:P(E),consume:v,enter:b,exit:w,interrupt:P(E,{interrupt:!0})},d={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let u=t.tokenize.call(d,c);return t.resolveAll&&a.push(t),d;function h(I){return o=Ut(o,I),y(),o[o.length-1]!==null?[]:(M(t,0),d.events=sc(a,d.events,d),d.events)}function m(I,k){return MI(f(I),k)}function f(I){return _I(o,I)}function x(){const{_bufferIndex:I,_index:k,line:$,column:W,offset:Q}=r;return{_bufferIndex:I,_index:k,line:$,column:W,offset:Q}}function g(I){s[I.line]=I.column,R()}function y(){let I;for(;r._index<o.length;){const k=o[r._index];if(typeof k=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<k.length;)j(k.charCodeAt(r._bufferIndex));else j(k)}}function j(I){u=u(I)}function v(I){de(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,R()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=I}function b(I,k){const $=k||{};return $.type=I,$.start=x(),d.events.push(["enter",$,d]),l.push($),$}function w(I){const k=l.pop();return k.end=x(),d.events.push(["exit",k,d]),k}function T(I,k){M(I,k.from)}function E(I,k){k.restore()}function P(I,k){return $;function $(W,Q,J){let te,D,z,S;return Array.isArray(W)?se(W):"tokenize"in W?se([W]):K(W);function K(ae){return Te;function Te(Ne){const _e=Ne!==null&&ae[Ne],G=Ne!==null&&ae.null,ce=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(G)?G:G?[G]:[]];return se(ce)(Ne)}}function se(ae){return te=ae,D=0,ae.length===0?J:N(ae[D])}function N(ae){return Te;function Te(Ne){return S=A(),z=ae,ae.partial||(d.currentConstruct=ae),ae.name&&d.parser.constructs.disable.null.includes(ae.name)?Re():ae.tokenize.call(k?Object.assign(Object.create(d),k):d,c,oe,Re)(Ne)}}function oe(ae){return I(z,S),Q}function Re(ae){return S.restore(),++D<te.length?N(te[D]):J}}}function M(I,k){I.resolveAll&&!a.includes(I)&&a.push(I),I.resolve&&yn(d.events,k,d.events.length-k,I.resolve(d.events.slice(k),d)),I.resolveTo&&(d.events=I.resolveTo(d.events,d))}function A(){const I=x(),k=d.previous,$=d.currentConstruct,W=d.events.length,Q=Array.from(l);return{from:W,restore:J};function J(){r=I,d.previous=k,d.currentConstruct=$,d.events.length=W,l=Q,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function _I(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function MI(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function DI(e){const r={constructs:VE([TI,...(e||{}).extensions||[]]),content:s(KE),defined:[],document:s(XE),flow:s(pI),lazy:{},string:s(yI),text:s(vI)};return r;function s(a){return o;function o(l){return PI(r,a,l)}}}function RI(e){for(;!Bp(e););return e}const Ju=/[\0\t\n\r]/g;function OI(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let d,u,h,m,f;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(Ju.lastIndex=h,d=Ju.exec(a),m=d&&d.index!==void 0?d.index:a.length,f=a.charCodeAt(m),!d){t=a.slice(h);break}if(f===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(a.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const LI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FI(e){return e.replace(LI,$I)}function $I(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Fp(n.slice(a?2:1),a?16:10)}return rc(n)||e}const Yp={}.hasOwnProperty;function zI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),VI(n)(RI(DI(n).document().write(OI()(e,t,!0))))}function VI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(_),autolinkProtocol:A,autolinkEmail:A,atxHeading:a(en),blockQuote:a(G),characterEscape:A,characterReference:A,codeFenced:a(ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ce,o),codeText:a(ge,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Et),hardBreakEscape:a(ut),hardBreakTrailing:a(ut),htmlFlow:a(Wt,o),htmlFlowData:A,htmlText:a(Wt,o),htmlTextData:A,image:a(C),label:o,link:a(_),listItem:a(Z),listItemValue:m,listOrdered:a(L,h),listUnordered:a(L),paragraph:a(X),reference:N,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(en),strong:a(H),thematicBreak:a(fe)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:_e,autolinkProtocol:Ne,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:Re,characterReferenceMarkerNumeric:Re,characterReferenceValue:ae,characterReference:Te,codeFenced:c(y),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:x,codeFlowValue:R,codeIndented:c(j),codeText:c(Q),codeTextData:R,data:R,definition:c(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(k),hardBreakTrailing:c(k),htmlFlow:c($),htmlFlowData:R,htmlText:c(W),htmlTextData:R,image:c(te),label:z,labelText:D,lineEnding:I,link:c(J),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:oe,resourceDestinationString:S,resourceTitleString:K,resource:se,setextHeading:c(M),setextHeadingLineSequence:P,setextHeadingText:E,strong:c(),thematicBreak:c()}};Kp(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(O){let q={type:"root",children:[]};const le={stack:[q],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},he=[];let Se=-1;for(;++Se<O.length;)if(O[Se][1].type==="listOrdered"||O[Se][1].type==="listUnordered")if(O[Se][0]==="enter")he.push(Se);else{const it=he.pop();Se=s(O,it,Se)}for(Se=-1;++Se<O.length;){const it=t[O[Se][0]];Yp.call(it,O[Se][1].type)&&it[O[Se][1].type].call(Object.assign({sliceSerialize:O[Se][2].sliceSerialize},le),O[Se][1])}if(le.tokenStack.length>0){const it=le.tokenStack[le.tokenStack.length-1];(it[1]||Zu).call(le,void 0,it[0])}for(q.position={start:Rn(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Rn(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<t.transforms.length;)q=t.transforms[Se](q)||q;return q}function s(O,q,le){let he=q-1,Se=-1,it=!1,Vt,gt,wn,Bt;for(;++he<=le;){const We=O[he];switch(We[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{We[0]==="enter"?Se++:Se--,Bt=void 0;break}case"lineEndingBlank":{We[0]==="enter"&&(Vt&&!Bt&&!Se&&!wn&&(wn=he),Bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Bt=void 0}if(!Se&&We[0]==="enter"&&We[1].type==="listItemPrefix"||Se===-1&&We[0]==="exit"&&(We[1].type==="listUnordered"||We[1].type==="listOrdered")){if(Vt){let Pn=he;for(gt=void 0;Pn--;){const ue=O[Pn];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;gt&&(O[gt][1].type="lineEndingBlank",it=!0),ue[1].type="lineEnding",gt=Pn}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}wn&&(!gt||wn<gt)&&(Vt._spread=!0),Vt.end=Object.assign({},gt?O[gt][1].start:We[1].end),O.splice(gt||he,0,["exit",Vt,We[2]]),he++,le++}if(We[1].type==="listItemPrefix"){const Pn={type:"listItem",_spread:!1,start:Object.assign({},We[1].start),end:void 0};Vt=Pn,O.splice(he,0,["enter",Pn,We[2]]),he++,le++,wn=void 0,Bt=!0}}}return O[q][1]._spread=it,le}function a(O,q){return le;function le(he){l.call(this,O(he),he),q&&q.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(O,q,le){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([q,le||void 0]),O.position={start:Rn(q.start),end:void 0}}function c(O){return q;function q(le){O&&O.call(this,le),d.call(this,le)}}function d(O,q){const le=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==O.type&&(q?q.call(this,O,he[0]):(he[1]||Zu).call(this,O,he[0]));else throw new Error("Cannot close `"+O.type+"` ("+Cs({start:O.start,end:O.end})+"): it’s not open");le.position.end=Rn(O.end)}function u(){return $E(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(O){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function f(){const O=this.resume(),q=this.stack[this.stack.length-1];q.lang=O}function x(){const O=this.resume(),q=this.stack[this.stack.length-1];q.meta=O}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const O=this.resume(),q=this.stack[this.stack.length-1];q.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const O=this.resume(),q=this.stack[this.stack.length-1];q.value=O.replace(/(\r?\n|\r)$/g,"")}function v(O){const q=this.resume(),le=this.stack[this.stack.length-1];le.label=q,le.identifier=qr(this.sliceSerialize(O)).toLowerCase()}function b(){const O=this.resume(),q=this.stack[this.stack.length-1];q.title=O}function w(){const O=this.resume(),q=this.stack[this.stack.length-1];q.url=O}function T(O){const q=this.stack[this.stack.length-1];if(!q.depth){const le=this.sliceSerialize(O).length;q.depth=le}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function P(O){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function A(O){const le=this.stack[this.stack.length-1].children;let he=le[le.length-1];(!he||he.type!=="text")&&(he=ie(),he.position={start:Rn(O.start),end:void 0},le.push(he)),this.stack.push(he)}function R(O){const q=this.stack.pop();q.value+=this.sliceSerialize(O),q.position.end=Rn(O.end)}function I(O){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const le=q.children[q.children.length-1];le.position.end=Rn(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(A.call(this,O),R.call(this,O))}function k(){this.data.atHardBreak=!0}function $(){const O=this.resume(),q=this.stack[this.stack.length-1];q.value=O}function W(){const O=this.resume(),q=this.stack[this.stack.length-1];q.value=O}function Q(){const O=this.resume(),q=this.stack[this.stack.length-1];q.value=O}function J(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=q,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function te(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=q,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function D(O){const q=this.sliceSerialize(O),le=this.stack[this.stack.length-2];le.label=FI(q),le.identifier=qr(q).toLowerCase()}function z(){const O=this.stack[this.stack.length-1],q=this.resume(),le=this.stack[this.stack.length-1];if(this.data.inReference=!0,le.type==="link"){const he=O.children;le.children=he}else le.alt=q}function S(){const O=this.resume(),q=this.stack[this.stack.length-1];q.url=O}function K(){const O=this.resume(),q=this.stack[this.stack.length-1];q.title=O}function se(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function oe(O){const q=this.resume(),le=this.stack[this.stack.length-1];le.label=q,le.identifier=qr(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function Re(O){this.data.characterReferenceType=O.type}function ae(O){const q=this.sliceSerialize(O),le=this.data.characterReferenceType;let he;le?(he=Fp(q,le==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=rc(q);const Se=this.stack[this.stack.length-1];Se.value+=he}function Te(O){const q=this.stack.pop();q.position.end=Rn(O.end)}function Ne(O){R.call(this,O);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(O)}function _e(O){R.call(this,O);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(O)}function G(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function ge(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Et(){return{type:"emphasis",children:[]}}function en(){return{type:"heading",depth:0,children:[]}}function ut(){return{type:"break"}}function Wt(){return{type:"html",value:""}}function C(){return{type:"image",title:null,url:"",alt:null}}function _(){return{type:"link",title:null,url:"",children:[]}}function L(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function Z(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function X(){return{type:"paragraph",children:[]}}function H(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function fe(){return{type:"thematicBreak"}}}function Rn(e){return{line:e.line,column:e.column,offset:e.offset}}function Kp(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Kp(e,r):BI(e,r)}}function BI(e,t){let n;for(n in t)if(Yp.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Zu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Cs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Cs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Cs({start:t.start,end:t.end})+") is still open")}function qI(e){const t=this;t.parser=n;function n(r){return zI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function UI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function HI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function GI(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function WI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function YI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function KI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=ls(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function QI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Qp(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function JI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Qp(e,t);const s={src:ls(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function ZI(e,t){const n={src:ls(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ek(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function tk(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Qp(e,t);const s={href:ls(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function nk(e,t){const n={href:ls(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rk(e,t,n){const r=e.all(t),s=n?sk(n):Xp(t),a={},o=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(s||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function sk(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Xp(n[r])}return t}function Xp(e){const t=e.spread;return t??e.children.length>1}function ik(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function ak(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ok(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function lk(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ck(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Zl(t.children[1]),c=Pp(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function uk(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let x={type:"element",tagName:a,properties:m,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function dk(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const ed=9,td=32;function mk(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(nd(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(nd(t.slice(s),s>0,!1)),a.join("")}function nd(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===ed||a===td;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===ed||a===td;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function hk(e,t){const n={type:"text",value:mk(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function fk(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const pk={blockquote:UI,break:HI,code:GI,delete:WI,emphasis:YI,footnoteReference:KI,heading:QI,html:XI,imageReference:JI,image:ZI,inlineCode:ek,linkReference:tk,link:nk,listItem:rk,list:ik,paragraph:ak,root:ok,strong:lk,table:ck,tableCell:dk,tableRow:uk,text:hk,thematicBreak:fk,toml:di,yaml:di,definition:di,footnoteDefinition:di};function di(){}const Jp=-1,Na=0,ks=1,$i=2,ac=3,oc=4,lc=5,cc=6,Zp=7,eg=8,rd=typeof self=="object"?self:globalThis,gk=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case Na:case Jp:return n(o,s);case ks:{const l=n([],s);for(const c of o)l.push(r(c));return l}case $i:{const l=n({},s);for(const[c,d]of o)l[r(c)]=r(d);return l}case ac:return n(new Date(o),s);case oc:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case lc:{const l=n(new Map,s);for(const[c,d]of o)l.set(r(c),r(d));return l}case cc:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case Zp:{const{name:l,message:c}=o;return n(new rd[l](c),s)}case eg:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new rd[a](o),s)};return r},sd=e=>gk(new Map,e)(0),Dr="",{toString:xk}={},{keys:yk}=Object,xs=e=>{const t=typeof e;if(t!=="object"||!e)return[Na,t];const n=xk.call(e).slice(8,-1);switch(n){case"Array":return[ks,Dr];case"Object":return[$i,Dr];case"Date":return[ac,Dr];case"RegExp":return[oc,Dr];case"Map":return[lc,Dr];case"Set":return[cc,Dr];case"DataView":return[ks,n]}return n.includes("Array")?[ks,n]:n.includes("Error")?[Zp,n]:[$i,n]},mi=([e,t])=>e===Na&&(t==="function"||t==="symbol"),vk=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=xs(o);switch(l){case Na:{let u=o;switch(c){case"bigint":l=eg,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return s([Jp],o)}return s([l,u],o)}case ks:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const u=[],h=s([l,u],o);for(const m of o)u.push(a(m));return h}case $i:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],h=s([l,u],o);for(const m of yk(o))(e||!mi(xs(o[m])))&&u.push([a(m),a(o[m])]);return h}case ac:return s([l,o.toISOString()],o);case oc:{const{source:u,flags:h}=o;return s([l,{source:u,flags:h}],o)}case lc:{const u=[],h=s([l,u],o);for(const[m,f]of o)(e||!(mi(xs(m))||mi(xs(f))))&&u.push([a(m),a(f)]);return h}case cc:{const u=[],h=s([l,u],o);for(const m of o)(e||!mi(xs(m)))&&u.push(a(m));return h}}const{message:d}=o;return s([l,{name:c,message:d}],o)};return a},id=(e,{json:t,lossy:n}={})=>{const r=[];return vk(!(t||n),!!t,new Map,r)(e),r},zi=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?sd(id(e,t)):structuredClone(e):(e,t)=>sd(id(e,t));function bk(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function wk(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function jk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||bk,r=e.options.footnoteBackLabel||wk,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),h=String(d.identifier).toUpperCase(),m=ls(h.toLowerCase());let f=0;const x=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){x.length>0&&x.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const v=y.children[y.children.length-1];v&&v.type==="text"?v.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...x)}else u.push(...x);const j={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(d,j),l.push(j)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...zi(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const tg=function(e){if(e==null)return Ck;if(typeof e=="function")return Ea(e);if(typeof e=="object")return Array.isArray(e)?Sk(e):Nk(e);if(typeof e=="string")return Ek(e);throw new Error("Expected function, string, or object as test")};function Sk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=tg(e[n]);return Ea(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function Nk(e){const t=e;return Ea(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function Ek(e){return Ea(t);function t(n){return n&&n.type===e}}function Ea(e){return t;function t(n,r,s){return!!(Ik(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Ck(){return!0}function Ik(e){return e!==null&&typeof e=="object"&&"type"in e}const ng=[],kk=!0,ad=!1,Ak="skip";function Tk(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=tg(s),o=r?-1:1;l(e,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=ng,x,g,y;if((!t||a(c,d,u[u.length-1]||void 0))&&(f=Pk(n(c,u)),f[0]===ad))return f;if("children"in c&&c.children){const j=c;if(j.children&&f[0]!==Ak)for(g=(r?j.children.length:-1)+o,y=u.concat(j);g>-1&&g<j.children.length;){const v=j.children[g];if(x=l(v,g,y)(),x[0]===ad)return x;g=typeof x[1]=="number"?x[1]:g+o}}return f}}}function Pk(e){return Array.isArray(e)?e:typeof e=="number"?[kk,e]:e==null?ng:[e]}function rg(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),Tk(e,a,l,s);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const Yo={}.hasOwnProperty,_k={};function Mk(e,t){const n=t||_k,r=new Map,s=new Map,a=new Map,o={...pk,...n.handlers},l={all:d,applyData:Rk,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:Dk,wrap:Lk};return rg(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:s,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),l;function c(u,h){const m=u.type,f=l.handlers[m];if(Yo.call(l.handlers,m)&&f)return f(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in u){const{children:g,...y}=u,j=zi(y);return j.children=l.all(u),j}return zi(u)}return(l.options.unknownHandler||Ok)(l,u,h)}function d(u){const h=[];if("children"in u){const m=u.children;let f=-1;for(;++f<m.length;){const x=l.one(m[f],u);if(x){if(f&&m[f-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=od(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=od(g.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function Dk(e,t){e.position&&(t.position=xE(e))}function Rk(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,zi(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Ok(e,t){const n=t.data||{},r="value"in t&&!(Yo.call(n,"hProperties")||Yo.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Lk(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function od(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function ld(e,t){const n=Mk(e,t),r=n.one(e,void 0),s=jk(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function Fk(e,t){return e&&"run"in e?async function(n,r){const s=ld(n,{file:r,...t});await e.run(s,r)}:function(n,r){return ld(n,{file:r,...e||t})}}function cd(e){if(e)throw e}var Ei=Object.prototype.hasOwnProperty,sg=Object.prototype.toString,ud=Object.defineProperty,dd=Object.getOwnPropertyDescriptor,md=function(t){return typeof Array.isArray=="function"?Array.isArray(t):sg.call(t)==="[object Array]"},hd=function(t){if(!t||sg.call(t)!=="[object Object]")return!1;var n=Ei.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Ei.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Ei.call(t,s)},fd=function(t,n){ud&&n.name==="__proto__"?ud(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},pd=function(t,n){if(n==="__proto__")if(Ei.call(t,n)){if(dd)return dd(t,n).value}else return;return t[n]},$k=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)r=pd(l,n),s=pd(t,n),l!==s&&(u&&s&&(hd(s)||(a=md(s)))?(a?(a=!1,o=r&&md(r)?r:[]):o=r&&hd(r)?r:{},fd(l,{name:n,newValue:e(u,o,s)})):typeof s<"u"&&fd(l,{name:n,newValue:s}));return l};const ao=$m($k);function Ko(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zk(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...d){const u=e[++a];let h=-1;if(c){o(c);return}for(;++h<s.length;)(d[h]===null||d[h]===void 0)&&(d[h]=s[h]);s=d,u?Vk(u,l)(...d):o(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function Vk(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return s(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const sn={basename:Bk,dirname:qk,extname:Uk,join:Hk,sep:"/"};function Bk(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Xs(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function qk(e){if(Xs(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Uk(e){Xs(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function Hk(...e){let t=-1,n;for(;++t<e.length;)Xs(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Gk(n)}function Gk(e){Xs(e);const t=e.codePointAt(0)===47;let n=Wk(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Wk(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function Xs(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Yk={cwd:Kk};function Kk(){return"/"}function Qo(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Qk(e){if(typeof e=="string")e=new URL(e);else if(!Qo(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Xk(e)}function Xk(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const oo=["history","path","basename","stem","extname","dirname"];class ig{constructor(t){let n;t?Qo(t)?n={path:t}:typeof t=="string"||Jk(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Yk.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<oo.length;){const a=oo[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)oo.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?sn.basename(this.path):void 0}set basename(t){co(t,"basename"),lo(t,"basename"),this.path=sn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?sn.dirname(this.path):void 0}set dirname(t){gd(this.basename,"dirname"),this.path=sn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?sn.extname(this.path):void 0}set extname(t){if(lo(t,"extname"),gd(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Qo(t)&&(t=Qk(t)),co(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?sn.basename(this.path,this.extname):void 0}set stem(t){co(t,"stem"),lo(t,"stem"),this.path=sn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new pt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function lo(e,t){if(e&&e.includes(sn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+sn.sep+"`")}function co(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gd(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Jk(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Zk=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},eA={}.hasOwnProperty;class uc extends Zk{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zk()}copy(){const t=new uc;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ao(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(ho("data",this.frozen),this.namespace[t]=n,this):eA.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ho("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=hi(t),r=this.parser||this.Parser;return uo("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),uo("process",this.parser||this.Parser),mo("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=hi(t),c=r.parse(l);r.run(c,l,function(u,h,m){if(u||!h||!m)return d(u);const f=h,x=r.stringify(f,m);rA(x)?m.value=x:m.result=x,d(u,m)});function d(u,h){u||!h?o(u):a?a(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),uo("processSync",this.parser||this.Parser),mo("processSync",this.compiler||this.Compiler),this.process(t,s),yd("processSync","process",n),r;function s(a,o){n=!0,cd(a),r=o}}run(t,n,r){xd(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=hi(n);s.run(t,c,d);function d(u,h,m){const f=h||t;u?l(u):o?o(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),yd("runSync","run",r),s;function a(o,l){cd(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=hi(n),s=this.compiler||this.Compiler;return mo("stringify",s),xd(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(ho("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(s.settings=ao(!0,s.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===d){m=h;break}if(m===-1)r.push([d,...u]);else if(u.length>0){let[f,...x]=u;const g=r[m][1];Ko(g)&&Ko(f)&&(f=ao(!0,g,f)),r[m]=[d,f,...x]}}}}const tA=new uc().freeze();function uo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ho(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xd(e){if(!Ko(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yd(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function hi(e){return nA(e)?e:new ig(e)}function nA(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function rA(e){return typeof e=="string"||sA(e)}function sA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const iA="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",vd=[],bd={allowDangerousHtml:!0},aA=/^(https?|ircs?|mailto|xmpp)$/i,oA=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function lA(e){const t=cA(e),n=uA(e);return dA(t.runSync(t.parse(n),n),e)}function cA(e){const t=e.rehypePlugins||vd,n=e.remarkPlugins||vd,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...bd}:bd;return tA().use(qI).use(n).use(Fk,r).use(t)}function uA(e){const t=e.children||"",n=new ig;return typeof t=="string"&&(n.value=t),n}function dA(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||mA;for(const u of oA)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+iA+u.id,void 0);return rg(e,d),jE(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function d(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let f;for(f in ro)if(Object.hasOwn(ro,f)&&Object.hasOwn(u.properties,f)){const x=u.properties[f],g=ro[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=c(String(x||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(u,h,m)),f&&m&&typeof h=="number")return l&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function mA(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||aA.test(e.slice(0,t))?e:""}const As=({text:e,maxLength:t=50,className:n="",tooltipEnabled:r=!1,as:s="span"})=>{const[a,o]=p.useState(!1);if(!e||e.length<=t)return i.jsx(s,{className:n,children:e});const l=`${e.substring(0,t)}...`;return r?i.jsx(Yh,{children:i.jsxs(yj,{open:a,onOpenChange:o,children:[i.jsx(vj,{asChild:!0,children:i.jsx(s,{className:`${n} cursor-help`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),children:l})}),i.jsx(Kh,{className:"max-w-xs bg-white text-black p-2 rounded shadow-md border border-gray-200",children:i.jsx("p",{children:e})})]})}):i.jsx(s,{className:n,children:l})},Mt=He("calendarService");var zs=(e=>(e.NOT_SUPPORTED="NOT_SUPPORTED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.GENERAL_ERROR="GENERAL_ERROR",e))(zs||{});const ag=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t="share"in navigator&&"canShare"in navigator,n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=!e;return Mt.info("Vérification du support calendrier",{isMobile:e,hasWebShare:t,isIOS:n,isDesktop:r,userAgent:navigator.userAgent}),t||n||r},hA=e=>{new Date().getFullYear();let n=new Date;if(e.days.includes("samedi"))for(;n.getDay()!==6;)n.setDate(n.getDate()+1);else if(e.days.includes("dimanche"))for(;n.getDay()!==0;)n.setDate(n.getDate()+1);const r=e.time.split(" - ")[0],s=e.time.split(" - ")[1]||parseInt(r.split("h")[0])+1+"h00",a=new Date(n),[o,l]=r.split("h").map(x=>parseInt(x)||0);a.setHours(o,l,0);const c=new Date(n),[d,u]=s.split("h").map(x=>parseInt(x)||0);c.setHours(d,u,0);const h=x=>x.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=x=>x.replace(/\n/g,"\\n").replace(/,/g,"\\,");return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Collectif Feydeau//App//FR","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${e.id}@collectif-feydeau.app`,`DTSTAMP:${h(new Date)}`,`DTSTART:${h(a)}`,`DTEND:${h(c)}`,`SUMMARY:${m(e.title)}`,`DESCRIPTION:${m(e.artistName||"")}`,`LOCATION:${m("Île Feydeau, Nantes")}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`)},dc=async e=>{try{const t=hA(e),n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent),s=n||r||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);Mt.info("Détection de plateforme",{isIOS:n,isAndroid:r,isMobile:s,userAgent:navigator.userAgent});const a=new Blob([t],{type:"text/calendar;charset=utf-8"});if(n)try{const o=URL.createObjectURL(a),l=document.createElement("a");return l.href=o.replace("blob:","webcal:"),l.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>URL.revokeObjectURL(o),100),Mt.info("Événement ajouté au calendrier iOS",{eventId:e.id}),{success:!0}}catch(o){Mt.warn("Erreur lors de l'ajout au calendrier iOS",{iosError:o})}if(r)try{if(navigator.share){const o=URL.createObjectURL(a);return await navigator.share({title:`Ajouter "${e.title}" à votre calendrier`,text:`Événement: ${e.title} - ${e.days.join(" et ")} à ${e.time}
Lieu: Île Feydeau, Nantes`,url:window.location.href}),setTimeout(()=>URL.revokeObjectURL(o),100),Mt.info("Informations partagées pour ajout au calendrier Android",{eventId:e.id}),{success:!0}}}catch{}if(s&&navigator.share)try{const o=new File([a],`${e.title.replace(/\s+/g,"_")}.ics`,{type:"text/calendar"});if(navigator.canShare&&navigator.canShare({files:[o]}))return await navigator.share({files:[o],title:`Ajouter "${e.title}" à votre calendrier`,text:`Événement: ${e.title} - ${e.days.join(" et ")} à ${e.time}`}),Mt.info("Fichier partagé pour ajout au calendrier",{eventId:e.id}),{success:!0}}catch(o){Mt.warn("Erreur lors du partage de fichier",{shareError:o})}try{const o=URL.createObjectURL(a),l=document.createElement("a");if(l.href=o,l.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),l.style.display="none",document.body&&document.contains(document.body)){if(document.body.appendChild(l),l.click(),document.body.contains(l))try{document.body.removeChild(l)}catch(c){Mt.warn("Error removing calendar download element:",c),l.remove&&l.remove()}}else Mt.warn("Document body not available for calendar download");setTimeout(()=>{try{URL.revokeObjectURL(o)}catch(c){Mt.warn("Error revoking object URL:",c)}},100)}catch(o){throw Mt.error("Error in calendar download:",o),o}return Mt.info("Fichier .ics téléchargé",{eventId:e.id,platform:r?"Android":n?"iOS":"Desktop"}),{success:!0}}catch(t){return Mt.error("Erreur lors de l'ajout au calendrier",{error:t}),{success:!1,errorType:"GENERAL_ERROR",errorMessage:t instanceof Error?t.message:"Une erreur inconnue est survenue"}}},fA=Object.freeze(Object.defineProperty({__proto__:null,CalendarErrorType:zs,addToCalendar:dc,isCalendarSupported:ag},Symbol.toStringTag,{value:"Module"})),Zn="https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app",Vi="likes-data",pA=5*60*1e3,Bi=new Map;function gA(e){const t=Bi.get(e);return t?Date.now()-t.timestamp>pA?(Bi.delete(e),null):(console.log(`📦 Cache hit pour ${e}:`,t.data),t.data):null}function og(e,t){Bi.set(e,{data:t,timestamp:Date.now()}),console.log(`💾 Cache mis à jour pour ${e}:`,t)}function xA(e){Bi.delete(e),console.log(`🗑️ Cache invalidé pour ${e}`)}const yA=1e4,vA=2;async function bA(e,t={}){const n=new AbortController,r=setTimeout(()=>n.abort(),yA);try{const s=await fetch(e,{...t,signal:n.signal});return clearTimeout(r),s}catch(s){throw clearTimeout(r),s instanceof Error&&s.name==="AbortError"?new Error("Timeout: La requête a pris trop de temps"):s}}async function er(e,t={},n=vA){for(let r=0;r<n;r++)try{return await bA(e,t)}catch(s){if(r===n-1)throw s;console.warn(`Tentative ${r+1}/${n} échouée pour ${e}, retry...`),await new Promise(a=>setTimeout(a,1e3*(r+1)))}throw new Error("Toutes les tentatives ont échoué")}function Ca(){try{let e=localStorage.getItem("user-session-id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("user-session-id",e)),e}catch(e){return console.warn("Erreur localStorage, génération session temporaire:",e),`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}async function wA(e,t){var n;try{const r=t||Ca();console.log(`🔄 Toggle like pour ${e} par ${r}`);const s=await er(`${Zn}/${Vi}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[],lastLiked:null},l=((n=o.likedBy)==null?void 0:n.includes(r))||!1;let c=o.likedBy||[],d=o.likes||0;l?(c=c.filter(m=>m!==r),d=Math.max(0,d-1),console.log(`❤️ Like retiré pour ${e}`)):(c.push(r),d+=1,console.log(`💖 Like ajouté pour ${e}`));const u={likes:d,likedBy:c,lastLiked:new Date().toISOString()};if(!(await er(`${Zn}/${Vi}/${e}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Erreur lors de la mise à jour des likes");return xA(e),await NA(),{success:!0,liked:!l,total:d}}catch(r){return console.error("❌ Erreur toggle like:",r),{success:!1,liked:!1,total:0,error:r instanceof Error?r.message:"Erreur inconnue"}}}async function jA(e,t){try{const n=t||Ca(),r=gA(e);if(r)return{...r,liked:Array.isArray(r.likedBy)&&r.likedBy.includes(n)};const s=await er(`${Zn}/${Vi}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[]},l={liked:Array.isArray(o.likedBy)&&o.likedBy.includes(n),total:o.likes||0,likedBy:o.likedBy||[]};return og(e,l),l}catch(n){return console.error("❌ Erreur getLikeData:",n),{liked:!1,total:0}}}async function SA(e,t){try{const n=t||Ca();console.log(`🔄 Récupération fraîche depuis Firebase pour ${e}`);const r=await er(`${Zn}/${Vi}/${e}.json`),a=(r.ok?await r.json():null)||{likes:0,likedBy:[]},o={liked:Array.isArray(a.likedBy)&&a.likedBy.includes(n),total:a.likes||0,likedBy:a.likedBy||[]};return og(e,o),console.log(`🔄 Données fraîches récupérées pour ${e}:`,o),o}catch(n){return console.error("❌ Erreur getLikeDataFresh:",n),{liked:!1,total:0}}}async function lg(){try{const e=await er(`${Zn}/likes-stats.json`),n=(e.ok?await e.json():null)||{total:0,today:0,topEntry:null};return console.log("📈 Stats globales:",n),n}catch(e){return console.error("❌ Erreur getLikeStats:",e),{total:0,today:0}}}async function NA(){try{const e=await er(`${Zn}/likes-data.json`),t=e.ok?await e.json():{};let n=0,r="",s=0;Object.entries(t||{}).forEach(([o,l])=>{const c=(l==null?void 0:l.likes)||0;n+=c,c>s&&(s=c,r=o)});const a={total:n,today:0,topEntry:r||null,lastUpdated:new Date().toISOString()};await er(`${Zn}/likes-stats.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),console.log(`📊 Stats mises à jour: ${n} likes total, top: ${r}`)}catch(e){console.error("❌ Erreur updateGlobalStats:",e)}}async function EA(){try{const e={timestamp:new Date().toISOString(),message:"Test de connexion likes"},t=await er(`${Zn}/test-connection.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(console.log("✅ Connexion Firebase OK pour les likes"),!0):(console.error("❌ Erreur connexion Firebase:",t.status),!1)}catch(e){return console.error("❌ Erreur connexion Firebase:",e),!1}}function cg(e){const[t,n]=p.useState(!1),[r,s]=p.useState(0),[a,o]=p.useState(!0),[l,c]=p.useState(null),[d,u]=p.useState(!1),h=Ca(),m=p.useCallback(async()=>{try{o(!0),c(null);const y=await jA(e,h);n(y.liked),s(y.total),console.log(`🔄 Données likes chargées pour ${e}:`,y)}catch(y){console.error("❌ Erreur chargement likes:",y),c(y instanceof Error?y.message:"Erreur de chargement")}finally{o(!1)}},[e,h]),f=p.useCallback(async()=>{try{c(null);const y=await SA(e,h);n(y.liked),s(y.total),console.log(`🔄 Données likes fraîches pour ${e}:`,y)}catch(y){console.error("❌ Erreur chargement likes fresh:",y),c(y instanceof Error?y.message:"Erreur de chargement")}},[e,h]);p.useEffect(()=>{if(!e)return;console.log(`🎧 Chargement initial pour ${e}`),m();const y=setInterval(()=>{console.log(`⏰ Polling automatique pour ${e}`),f()},5e3);return()=>{console.log(`🔇 Arrêt polling pour ${e}`),clearInterval(y)}},[e,h,m,f]);const x=p.useCallback(async()=>{if(d){console.log(`⏳ Toggle like déjà en cours pour ${e}, ignoré`);return}try{u(!0),c(null),console.log(`🔄 Toggle like pour ${e}...`);const y=!t,j=y?r+1:Math.max(0,r-1);n(y),s(j);const v=await wA(e,h);v.success?console.log(`✅ Like toggled avec succès pour ${e}`):(n(t),s(r),c(v.error||"Erreur lors du like"),console.error("❌ Erreur toggle like:",v.error))}catch(y){n(t),s(r),c(y instanceof Error?y.message:"Erreur inconnue"),console.error("❌ Erreur toggle like:",y)}finally{setTimeout(()=>{u(!1)},500)}},[e,h,t,r,d]),g=p.useCallback(async()=>{await m()},[m]);return{liked:t,total:r,loading:a,error:l,isToggling:d,toggleLike:x,refresh:g}}const fo=({value:e,loading:t})=>{const[n,r]=p.useState(e),[s,a]=p.useState(!1);return p.useEffect(()=>{e!==n&&!t&&(a(!0),setTimeout(()=>{r(e),setTimeout(()=>a(!1),150)},150))},[e,n,t]),t?i.jsx("span",{children:"..."}):i.jsx(je.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:re("font-medium transition-colors",s&&"text-green-400"),children:n},n)},CA=({isToggling:e,error:t,liked:n})=>e?i.jsx(je.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full"}):t?i.jsx(je.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}):null,tr=({entryId:e,className:t,variant:n="compact",showCount:r=!0})=>{const{liked:s,total:a,loading:o,error:l,isToggling:c,toggleLike:d}=cg(e),[u,h]=p.useState(!1),m=f=>{f.stopPropagation(),f.preventDefault(),!o&&!c&&(d(),h(!0),setTimeout(()=>h(!1),1e3))};return n==="compact"?i.jsxs(je.button,{onClick:m,disabled:o||c,className:re("absolute bottom-2 right-2 flex items-center gap-1 px-2 py-1 rounded-full","bg-black/60 backdrop-blur-sm text-white text-xs z-10","hover:bg-black/80 transition-colors","disabled:opacity-50 cursor-pointer",c&&"animate-pulse",u&&"bg-green-500/80",l&&"bg-red-500/80",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},children:[i.jsx(un,{mode:"wait",children:c?i.jsx(CA,{isToggling:!0,error:null,liked:s},"loading"):i.jsx(je.div,{animate:s?{scale:[1,1.3,1],rotate:[0,-10,10,0]}:{scale:1},transition:{duration:.4,ease:"easeOut"},children:i.jsx(In,{size:12,className:re("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-white")})},"heart")}),r&&i.jsx(fo,{value:a,loading:o}),i.jsx(un,{children:u&&i.jsx(je.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):n==="icon"?i.jsxs(je.button,{onClick:m,disabled:o||c,className:re("flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500","bg-white hover:shadow-sm transition-all duration-200","disabled:opacity-50 cursor-pointer relative",c&&"animate-pulse",u&&"border-green-400 text-green-500",l&&"border-red-400 text-red-500",s&&"border-red-400 text-red-500",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},title:`${s?"Retirer le":"Ajouter un"} like${r&&a>0?` (${a})`:""}`,children:[i.jsx(un,{mode:"wait",children:c?i.jsx(je.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(je.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"})},"loading"):i.jsx(je.div,{initial:{scale:0},animate:s?{scale:[1,1.2,1],rotate:[0,-10,10,0]}:{scale:1},exit:{scale:0},transition:{duration:.4,ease:"easeOut"},children:i.jsx(In,{size:18,className:re("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-gray-500")})},"heart")}),r&&a>0&&i.jsx(je.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:i.jsx(fo,{value:a,loading:o})}),i.jsx(un,{children:u&&i.jsx(je.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):i.jsxs(je.button,{onClick:m,disabled:o||c,className:re("flex items-center gap-3 px-4 py-3 rounded-lg relative overflow-hidden","bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700","transition-all duration-300 disabled:opacity-50",c&&"animate-pulse",u&&"bg-green-100 dark:bg-green-900/30",l&&"bg-red-100 dark:bg-red-900/30",t),whileTap:c?{}:{scale:.98},whileHover:c?{}:{scale:1.02},animate:u?{scale:[1,1.02,1]}:{},children:[i.jsx(un,{mode:"wait",children:c?i.jsx(je.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(je.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full"})},"loading"):i.jsx(je.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:i.jsx(je.div,{animate:s?{scale:[1,1.4,1],rotate:[0,-15,15,0]}:{scale:1},transition:{duration:.5,ease:"easeOut"},children:i.jsx(In,{size:20,className:re("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-lg":"text-slate-600 dark:text-slate-400")})})},"heart")}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx(je.span,{className:"text-sm font-medium",animate:u?{color:"#10b981"}:{},children:c?"En cours...":s?"Liké !":"Liker"}),r&&i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(fo,{value:a,loading:o}),i.jsxs("span",{children:["like",a!==1?"s":""]})]})]}),i.jsx(un,{children:u&&i.jsx(je.div,{initial:{scale:0,opacity:.8},animate:{scale:4,opacity:0},exit:{opacity:0},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0 bg-green-400/20 rounded-lg"})})]})},IA=({text:e})=>{const[t,n]=p.useState(!1),s=(l=>{if(l.length<=120)return l;const d=l.substring(0,120),u=d.lastIndexOf(" ");return d.substring(0,u)+"..."})(e),a=e.length>s.length,o=()=>{n(!t)};return i.jsx("div",{className:"text-sm text-[#4a5d94]",children:i.jsxs("div",{onClick:a?o:void 0,onKeyDown:l=>{a&&(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},tabIndex:a?0:void 0,role:a?"button":void 0,"aria-expanded":t,className:a?"cursor-pointer":"",children:[i.jsx(lA,{components:{p:({node:l,...c})=>i.jsx("p",{className:"mb-3",...c}),h2:({node:l,...c})=>i.jsx("h2",{className:"text-lg font-bold mb-2",...c}),h3:({node:l,...c})=>i.jsx("h3",{className:"text-md font-semibold mb-2",...c}),hr:({node:l,...c})=>i.jsx("hr",{className:"my-4 border-t border-[#d8e3ff]",...c})},children:t?e:s}),a&&i.jsx("div",{className:"flex items-center text-xs text-[#8c9db5] mt-1",children:t?i.jsxs(i.Fragment,{children:[i.jsx(Nm,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"Réduire"})]}):i.jsxs(i.Fragment,{children:[i.jsx(dl,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"(pour voir +)"})]})})]})})},mc=({event:e,isOpen:t,onClose:n,source:r})=>{const s=St(),{toast:a}=Cl(),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,h]=p.useState([]);p.useEffect(()=>{t&&e&&B.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:e.id,event_title:e.title,source:r})},[t,e,r]),p.useEffect(()=>{if(e){const b=ct();if(l(b),d(ag()),e.locationId){const w=uS(e.locationId).filter(T=>T.id!==e.id);h(w)}}},[e]);const m=e?o.some(b=>b.id===e.id):!1,f=()=>{e&&(console.log(`[EventDetails] Navigation vers la carte pour l'événement ${e.id} au lieu ${e.locationId}`),console.log(`[EventDetails] Source de navigation: ${r}`),To(ee.CLICK,"view_on_map_button",{from:"event_details",event_id:e.id,location_id:e.locationId,source:r}),n(),setTimeout(()=>{console.log(`[EventDetails] Redirection vers /map avec highlightLocationId=${e.locationId}`),s("/map",{state:{highlightLocationId:e.locationId,fromEvent:!0,timestamp:new Date().getTime()}})},100))},x=b=>{b.preventDefault(),b.stopPropagation(),e&&(SN(e),s("/community?tab=contribute"),n(),B.trackCommunityInteraction(ee.CONTRIBUTION,{from:"event_details",event_id:e.id,event_title:e.title}))},g=b=>{if(b.preventDefault(),b.stopPropagation(),!e)return;o.some(T=>T.id===e.id)?(xa(e.id),l(ct()),B.trackContentInteraction(ee.UNSAVE,"event",e.id,{event_title:e.title,source:r})):(Rl(e),l(ct()),B.trackContentInteraction(ee.SAVE,"event",e.id,{event_title:e.title,source:r}))},y=async b=>{if(b.preventDefault(),b.stopPropagation(),!!e)try{B.trackProgramCTA("add_to_calendar",e.id);const w=await dc(e);w.success?a({title:"Événement ajouté au calendrier",description:`${e.title} a été ajouté à votre calendrier.`}):w.errorType===zs.NOT_SUPPORTED?a({title:"Fonctionnalité non supportée",description:"Votre appareil ne supporte pas l'ajout au calendrier.",variant:"destructive"}):(a({title:"Erreur",description:w.errorMessage||"Une erreur est survenue lors de l'ajout au calendrier.",variant:"destructive"}),B.trackError(ee.API_ERROR,"add_to_calendar",{event_id:e.id,error_message:w.errorMessage}))}catch(w){console.error("Erreur lors de l'ajout au calendrier:",w),a({title:"Erreur",description:"Une erreur inattendue est survenue.",variant:"destructive"}),B.trackError(ee.API_ERROR,"add_to_calendar_exception",{event_id:e==null?void 0:e.id,error_message:w==null?void 0:w.message})}};if(!e||!t)return null;const j=m,v=rf.find(b=>b.id===e.artistId);return i.jsx(yp,{open:t,onOpenChange:b=>!b&&n(),children:i.jsxs(Gl,{className:"w-[95vw] sm:w-[90vw] md:w-[80vw] lg:max-w-md max-h-[85vh] overflow-y-auto pt-14","aria-describedby":"event-details-description",children:[i.jsx("div",{id:"event-details-description",className:"sr-only",children:"Détails de l'événement sélectionné"}),i.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-end items-center p-3 bg-white z-10",children:i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(tr,{entryId:`event-${e.id}`,variant:"icon",showCount:!0}),i.jsx("button",{className:`flex items-center justify-center h-10 w-10 rounded-full border ${j?"border-[#ff7a45] text-[#ff7a45]":"border-gray-300 text-gray-500"} transition-all duration-200 hover:shadow-sm`,onClick:g,title:j?"Retirer des favoris":"Ajouter aux favoris",type:"button",children:j?i.jsx(ul,{className:"h-5 w-5"}):i.jsx(sa,{className:"h-5 w-5"})}),i.jsx(ba,{title:`${e.title} - Île Feydeau`,text:`Découvrez ${e.title} par ${e.artistName} sur l'Île Feydeau à Nantes!`,url:window.location.href}),i.jsx("button",{className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500 transition-all duration-200 hover:shadow-sm",onClick:n,title:"Fermer",type:"button",children:i.jsx(br,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Wl,{className:"sr-only",children:i.jsx(Yl,{children:e.title})}),i.jsxs("div",{className:"py-2 px-1 overflow-x-hidden",children:[e.type==="exposition"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#e0ebff] p-3 rounded-lg mb-2",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-2",children:i.jsx(As,{text:e.artistName,maxLength:40,className:"text-sm text-[#4a5d94]"})})]}):i.jsx("div",{className:"bg-[#f9f2ee] p-3 rounded-lg mb-3",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(kn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(As,{text:`${Dl(e.locationId)} • ${e.time}`,maxLength:40,className:"text-xs text-[#8c9db5]"})})]}),i.jsxs("div",{className:"bg-[#f0f5ff] p-3 rounded-lg mb-4",children:[(v==null?void 0:v.presentation)&&i.jsx(IA,{text:v.presentation}),e.type==="concert"&&v&&i.jsxs("div",{className:"space-y-4 mt-4",children:[v.email&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Contact email:"}),i.jsx("a",{href:`mailto:${v.email}`,className:"text-sm text-blue-600 hover:underline",children:v.email})]}),v.website&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Site web:"}),i.jsx("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.website.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.phone&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Téléphone:"}),i.jsx("a",{href:`tel:${v.phone}`,className:"text-sm text-blue-600 hover:underline",children:v.phone})]}),v.facebook&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Facebook:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.facebook})]}),v.youtube&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"YouTube:"}),i.jsx("a",{href:v.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.youtube.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.tiktok&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"TikTok:"}),i.jsx("a",{href:v.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.tiktok.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.director&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Direction:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.director})]}),v.members&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Membres:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.members})]})]}),e.type==="concert"&&(v==null?void 0:v.photos)&&v.photos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Photos"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:v.photos.map((b,w)=>i.jsx("div",{className:"relative pb-[75%] overflow-hidden rounded-lg",children:i.jsx("img",{src:bt(b),alt:`${e.artistName} - photo ${w+1}`,className:"absolute top-0 left-0 object-cover w-full h-full",loading:"lazy",onError:T=>{console.error(`Erreur de chargement de l'image: ${b}`),T.currentTarget.style.display="none"}})},w))})]}),e.type==="concert"&&(v==null?void 0:v.videos)&&v.videos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Vidéos"]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 w-full",children:v.videos.map((b,w)=>{let T=b;if(b.includes("youtube.com")||b.includes("youtu.be")){let E="";if(b.includes("youtube.com/watch?v=")){E=b.split("v=")[1];const P=E.indexOf("&");P!==-1&&(E=E.substring(0,P))}else b.includes("youtu.be/")&&(E=b.split("youtu.be/")[1]);E&&(T=`https://www.youtube.com/embed/${E}`)}return i.jsx("div",{className:"relative w-full pb-[56.25%] overflow-hidden rounded-lg",children:i.jsx("iframe",{src:T,title:`${e.artistName} - vidéo ${w+1}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full",loading:"lazy"})},w)})})]}),v&&v.instagram&&v.instagram.includes("instagram")&&(()=>{const w=(T=>{try{return new URL(T).pathname.replace(/\/$/,"").split("/").filter(Boolean).pop()||""}catch{return T.split("?")[0].replace(/\/$/,"").split("/").filter(Boolean).pop()||""}})(v.instagram);return w?i.jsx("div",{className:"border-t border-[#d8e3ff] pt-4 mt-4",children:i.jsx("div",{className:"instagram-embed-container w-full overflow-hidden rounded-lg relative",style:{paddingBottom:"100%",height:0},children:i.jsx("iframe",{title:`Instagram feed de ${e.artistName}`,src:`https://www.instagram.com/${w}/embed?hidecaption=1&header=0`,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowtransparency:"true",loading:"lazy",style:{position:"absolute",top:"-43px",left:0,width:"100%",height:"calc(100% + 43px)"}})})}):null})(),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-2 mt-6 border-t border-[#d8e3ff] pt-4",children:[r==="program"?i.jsxs(U,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:f,children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]}):i.jsxs(U,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:()=>s("/program"),children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),"Voir le programme"]}),i.jsxs(U,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm",onClick:()=>{e&&(To(ee.CLICK,"history_button",{from:"event_details",event_id:e.id,location_id:e.locationId}),B.trackBuildingHistoryView(e.locationId,"from_event_details")),s("/location-history",{state:{selectedLocationId:e.locationId,fromEvent:!0}}),n()},children:[i.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Histoire du lieu"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3",children:[i.jsx(U,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm min-w-0",onClick:y,disabled:!c,children:c?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Ajouter au calendrier"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Sm,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager l'événement"})]})}),i.jsxs(U,{variant:"outline",className:"border-[#ff7a45] text-[#ff7a45] flex-1 text-xs sm:text-sm min-w-0",onClick:x,children:[i.jsx(is,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager un souvenir"})]})]}),i.jsx(U,{className:"w-full mt-3 border-[#8c9db5] text-[#8c9db5] text-xs sm:text-sm",variant:"outline",onClick:n,children:"Retour"})]})]})]})})},qi=He("ValidationService"),Ui=e=>{const t=[];if(e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.title||e.title.trim()==="")&&t.push({field:"title",message:"Le titre est obligatoire"}),(!e.artistName||e.artistName.trim()==="")&&t.push({field:"artistName",message:"Le nom de l'artiste est obligatoire"}),e.type?e.type!=="exposition"&&e.type!=="concert"&&t.push({field:"type",message:`Le type d'événement doit être "exposition" ou "concert"`}):t.push({field:"type",message:"Le type d'événement est obligatoire"}),(!e.artistBio||e.artistBio.trim()==="")&&t.push({field:"artistBio",message:"La biographie de l'artiste est obligatoire"}),(!e.time||e.time.trim()==="")&&t.push({field:"time",message:"L'heure est obligatoire"}),!e.days||e.days.length===0)t.push({field:"days",message:"Au moins un jour doit être sélectionné"});else for(const n of e.days)if(n!=="samedi"&&n!=="dimanche"){t.push({field:"days",message:'Les jours doivent être "samedi" ou "dimanche"'});break}return(!e.locationName||e.locationName.trim()==="")&&t.push({field:"locationName",message:"Le nom du lieu est obligatoire"}),t.length>0?qi.warn(`Validation de l'événement ${e.id} échouée`,{errors:t}):qi.info(`Validation de l'événement ${e.id} réussie`),{isValid:t.length===0,errors:t}},Xo=e=>{const t=[];return e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.name||e.name.trim()==="")&&t.push({field:"name",message:"Le nom est obligatoire"}),(!e.description||e.description.trim()==="")&&t.push({field:"description",message:"La description est obligatoire"}),typeof e.x!="number"&&t.push({field:"x",message:"La coordonnée X doit être un nombre"}),typeof e.y!="number"&&t.push({field:"y",message:"La coordonnée Y doit être un nombre"}),t.length>0?qi.warn(`Validation du lieu ${e.id} échouée`,{errors:t}):qi.info(`Validation du lieu ${e.id} réussie`),{isValid:t.length===0,errors:t}},fi=e=>e.map(t=>`${t.field}: ${t.message}`).join(`
`),we=He("DataService"),wd={events:zt,locations:ht,isLoading:!1,error:null},dr=class dr{constructor(){at(this,"state");at(this,"listeners",[]);we.info("Initialisation du service de données"),this.state=this.loadFromLocalStorage()||wd}static getInstance(){return dr.instance||(dr.instance=new dr),dr.instance}getState(){return{...this.state}}getEvents(){return[...this.state.events]}getLocations(){return[...this.state.locations]}getEventById(t){return this.state.events.find(n=>n.id===t)}getLocationById(t){return this.state.locations.find(n=>n.id===t)}getEventsByLocationId(t){return this.state.events.filter(n=>n.locationId===t)}updateEvent(t){we.info(`Mise à jour de l'événement ${t.id}`);const n=Ui(t);if(!n.isValid){const r=fi(n.errors);return we.error(`Validation échouée pour l'événement ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:this.state.events.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}updateLocation(t){we.info(`Mise à jour du lieu ${t.id}`);const n=Xo(t);if(!n.isValid){const r=fi(n.errors);return we.error(`Validation échouée pour le lieu ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:this.state.locations.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}addEvent(t){if(we.info(`Ajout d'un nouvel événement: ${t.title}`),this.state.events.some(r=>r.id===t.id)){const r=`Un événement avec l'ID ${t.id} existe déjà`;return we.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Ui(t);if(!n.isValid){const r=fi(n.errors);return we.error("Validation échouée pour le nouvel événement",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:[...this.state.events,t],error:null}),{success:!0}}addLocation(t){if(we.info(`Ajout d'un nouveau lieu: ${t.name}`),this.state.locations.some(r=>r.id===t.id)){const r=`Un lieu avec l'ID ${t.id} existe déjà`;return we.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Xo(t);if(!n.isValid){const r=fi(n.errors);return we.error("Validation échouée pour le nouveau lieu",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:[...this.state.locations,t],error:null}),{success:!0}}removeEvent(t){we.info(`Suppression de l'événement ${t}`),this.setState({...this.state,events:this.state.events.filter(n=>n.id!==t)})}removeLocation(t){we.info(`Suppression du lieu ${t}`),this.setState({...this.state,locations:this.state.locations.filter(n=>n.id!==t)})}saveToLocalStorage(){we.info("Sauvegarde des données dans le localStorage");try{if(typeof Storage>"u"||!window.localStorage){we.warn("localStorage non disponible, sauvegarde ignorée");return}we.debug("Détails des données à sauvegarder",{eventsCount:this.state.events.length,locationsCount:this.state.locations.length,firstLocation:this.state.locations[0]?{id:this.state.locations[0].id,name:this.state.locations[0].name,x:this.state.locations[0].x,y:this.state.locations[0].y}:"Aucun lieu"});try{localStorage.setItem("events",JSON.stringify(this.state.events)),localStorage.setItem("locations",JSON.stringify(this.state.locations))}catch(t){if(t instanceof DOMException&&t.code===22){we.error("Quota localStorage dépassé, tentative de nettoyage");try{localStorage.removeItem("draft_contribution"),localStorage.removeItem("old_data"),localStorage.setItem("events",JSON.stringify(this.state.events)),localStorage.setItem("locations",JSON.stringify(this.state.locations))}catch{throw new Error("Impossible de sauvegarder: espace de stockage insuffisant")}}else throw t}try{const t=localStorage.getItem("locations");if(t){const n=JSON.parse(t);we.debug("Vérification de la sauvegarde",{savedLocationsCount:n.length,firstSavedLocation:n[0]?{id:n[0].id,name:n[0].name,x:n[0].x,y:n[0].y}:"Aucun lieu"})}}catch(t){we.warn("Erreur lors de la vérification de sauvegarde:",t)}we.info("Données sauvegardées avec succès dans le localStorage")}catch(t){we.error("Erreur lors de la sauvegarde des données",t),this.setState({...this.state,error:"Erreur lors de la sauvegarde des données"})}}loadFromLocalStorage(){we.info("Chargement des données depuis le localStorage");try{if(typeof Storage>"u"||!window.localStorage)return we.warn("localStorage non disponible, utilisation des données par défaut"),null;let t=null,n=null;try{t=localStorage.getItem("events"),n=localStorage.getItem("locations")}catch(a){return we.warn("Erreur accès localStorage:",a),null}if(we.debug("Données récupérées du localStorage",{eventsDataExists:!!t,locationsDataExists:!!n,eventsDataLength:t?t.length:0,locationsDataLength:n?n.length:0}),!t||!n)return we.info("Aucune donnée trouvée dans le localStorage"),null;let r,s;try{r=JSON.parse(t),s=JSON.parse(n)}catch(a){we.error("Erreur parsing données localStorage:",a);try{localStorage.removeItem("events"),localStorage.removeItem("locations")}catch(o){we.warn("Erreur nettoyage localStorage:",o)}return null}return we.debug("Données parsées du localStorage",{eventsCount:r.length,locationsCount:s.length,firstLocation:s[0]?{id:s[0].id,name:s[0].name,x:s[0].x,y:s[0].y}:"Aucun lieu"}),we.info("Données chargées avec succès depuis le localStorage"),{events:r,locations:s,isLoading:!1,error:null}}catch(t){return we.error("Erreur lors du chargement des données",t),{...wd,error:"Erreur lors du chargement des données"}}}exportData(){we.info("Export des données au format JSON");try{const t={events:this.state.events,locations:this.state.locations,exportDate:new Date().toISOString()};return JSON.stringify(t,null,2)}catch(t){return we.error("Erreur lors de l'export des données",t),this.setState({...this.state,error:"Erreur lors de l'export des données"}),""}}importData(t){we.info("Import des données depuis JSON");try{const n=JSON.parse(t);return!n.events||!n.locations?(we.error("Format de données invalide"),this.setState({...this.state,error:"Format de données invalide"}),!1):(this.setState({...this.state,events:n.events,locations:n.locations,error:null}),this.saveToLocalStorage(),!0)}catch(n){return we.error("Erreur lors de l'import des données",n),this.setState({...this.state,error:"Erreur lors de l'import des données"}),!1}}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}setState(t){this.state=t,this.listeners.forEach(n=>n(this.state)),this.saveToLocalStorage()}};at(dr,"instance");let Jo=dr;const nt=Jo.getInstance(),rn=He("useData"),Js=()=>{const[e,t]=p.useState(nt.getState());p.useEffect(()=>{rn.info("Initialisation du hook useData");const g=nt.subscribe(y=>{t(y)});return()=>{rn.info("Nettoyage du hook useData"),g()}},[]);const n=()=>e.events,r=()=>e.locations,s=g=>e.events.find(y=>y.id===g),a=g=>e.locations.find(y=>y.id===g),o=g=>g?e.events.filter(y=>y.locationId===g):[],l=g=>(rn.info(`Mise à jour de l'événement ${g.id}`),nt.updateEvent(g)),c=g=>(rn.info(`Mise à jour du lieu ${g.id}`),nt.updateLocation(g)),d=g=>(rn.info(`Ajout d'un nouvel événement: ${g.title}`),nt.addEvent(g)),u=g=>(rn.info(`Ajout d'un nouveau lieu: ${g.name}`),nt.addLocation(g)),h=g=>{rn.info(`Suppression de l'événement ${g}`),nt.removeEvent(g)},m=g=>{rn.info(`Suppression du lieu ${g}`),nt.removeLocation(g)},f=()=>(rn.info("Export des données"),nt.exportData()),x=g=>(rn.info("Import des données"),nt.importData(g));return{events:e.events,locations:e.locations,isLoading:e.isLoading,error:e.error,getEvents:n,getLocations:r,getEventById:s,getLocationById:a,getEventsByLocationId:o,updateEvent:l,updateLocation:c,addEvent:d,addLocation:u,removeEvent:h,removeLocation:m,exportData:f,importData:x}},hc=()=>{const{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}=Js();return{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}},fc=()=>{const{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}=Js();return{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}},Pt=He("AudioGuideService");class kA{constructor(){at(this,"audio",null);at(this,"listeners",new Set);at(this,"state",{isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.8,isLoading:!1,error:null});const t=localStorage.getItem("audioGuide_volume");t&&(this.state.volume=parseFloat(t))}addListener(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notifyListeners(){this.listeners.forEach(t=>{try{t({...this.state})}catch(n){Pt.error("Erreur lors de la notification d'un listener",{error:n})}})}updateState(t){this.state={...this.state,...t},this.notifyListeners()}getState(){return{...this.state}}async play(t,n){try{if(Pt.info("Tentative de lecture audio",{audioUrl:t,trackName:n}),this.audio&&this.state.currentTrack===t&&!this.state.isPlaying){this.audio.play(),this.updateState({isPlaying:!0,error:null});return}this.stop(),this.updateState({isLoading:!0,error:null,currentTrack:t}),this.audio=new Audio(t),this.audio.volume=this.state.volume,this.setupAudioEventListeners(),await this.audio.play(),this.updateState({isPlaying:!0,isLoading:!1,currentTrack:t}),Pt.info("Lecture audio démarrée avec succès",{audioUrl:t})}catch(r){throw Pt.error("Erreur lors de la lecture audio",{error:r,audioUrl:t}),this.updateState({isPlaying:!1,isLoading:!1,error:"Erreur lors de la lecture du fichier audio"}),r}}pause(){this.audio&&this.state.isPlaying&&(this.audio.pause(),this.updateState({isPlaying:!1}),Pt.info("Lecture audio mise en pause"))}resume(){this.audio&&!this.state.isPlaying&&(this.audio.play(),this.updateState({isPlaying:!0}),Pt.info("Lecture audio reprise"))}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.cleanupAudio(),this.updateState({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,error:null}),Pt.info("Lecture audio arrêtée"))}setVolume(t){const n=Math.max(0,Math.min(1,t));this.updateState({volume:n}),this.audio&&(this.audio.volume=n),localStorage.setItem("audioGuide_volume",n.toString()),Pt.debug("Volume modifié",{volume:n})}seekTo(t){if(this.audio&&this.state.duration>0){const n=Math.max(0,Math.min(this.state.duration,t));this.audio.currentTime=n,this.updateState({currentTime:n}),Pt.debug("Position audio modifiée",{time:n})}}setupAudioEventListeners(){this.audio&&(this.audio.addEventListener("loadedmetadata",()=>{this.audio&&this.updateState({duration:this.audio.duration,isLoading:!1})}),this.audio.addEventListener("timeupdate",()=>{this.audio&&this.updateState({currentTime:this.audio.currentTime})}),this.audio.addEventListener("ended",()=>{this.updateState({isPlaying:!1,currentTime:0}),Pt.info("Lecture audio terminée")}),this.audio.addEventListener("error",t=>{Pt.error("Erreur audio",{error:t}),this.updateState({isPlaying:!1,isLoading:!1,error:"Erreur lors de la lecture du fichier audio"})}),this.audio.addEventListener("pause",()=>{this.updateState({isPlaying:!1})}),this.audio.addEventListener("play",()=>{this.updateState({isPlaying:!0,error:null})}))}cleanupAudio(){if(this.audio){const t=this.audio;this.audio=null;try{t.pause(),t.src="",t.load()}catch(n){Pt.warn("Erreur lors du nettoyage audio",{error:n})}}}cleanup(){this.stop(),this.listeners.clear(),Pt.info("Service audio guide nettoyé")}}const Ct=new kA;function ug(){const[e,t]=p.useState(Ct.getState());return p.useEffect(()=>Ct.addListener(t),[]),{...e,play:Ct.play.bind(Ct),pause:Ct.pause.bind(Ct),resume:Ct.resume.bind(Ct),stop:Ct.stop.bind(Ct),setVolume:Ct.setVolume.bind(Ct),seekTo:Ct.seekTo.bind(Ct)}}const ys=He("AudioGuideButton"),AA=({audioUrl:e,locationName:t="ce lieu",variant:n="default",className:r="",disabled:s=!1})=>{const{isPlaying:a,currentTrack:o,isLoading:l,error:c,play:d,pause:u,stop:h}=ug(),m=o===e,f=m&&a,x=async()=>{if(!e){ys.warn("Aucune URL audio fournie");return}try{f?(u(),ys.info("Audio guide mis en pause",{audioUrl:e,locationName:t})):m&&!a?(await d(e,t),ys.info("Audio guide repris",{audioUrl:e,locationName:t})):(await d(e,t),ys.info("Audio guide démarré",{audioUrl:e,locationName:t}))}catch(w){ys.error("Erreur lors du contrôle de l'audio guide",{error:w,audioUrl:e})}};if(!e)return null;const g=()=>l&&m?i.jsx(Qn,{className:"h-4 w-4 animate-spin"}):f?i.jsx(ml,{className:"h-4 w-4"}):c&&m?i.jsx(ol,{className:"h-4 w-4"}):i.jsx(ra,{className:"h-4 w-4"}),y=()=>l&&m?"Chargement...":f?"Pause audio":c&&m?"Erreur audio":"Écouter l'histoire",j=()=>f?`Mettre en pause l'audio guide de ${t}`:m&&!a?`Reprendre l'audio guide de ${t}`:`Écouter l'histoire de ${t}`,b=(()=>{switch(n){case"icon":return{variant:"ghost",size:"sm",className:`p-2 h-auto ${f?"text-[#ff7a45] bg-[#ff7a45]/10":"text-[#4a5d94]"} ${r}`,children:g()};case"compact":return{variant:"outline",size:"sm",className:`text-xs ${f?"border-[#ff7a45] text-[#ff7a45] bg-[#ff7a45]/5":"border-[#4a5d94] text-[#4a5d94]"} ${r}`,children:i.jsxs(i.Fragment,{children:[g(),i.jsx("span",{className:"ml-1 hidden sm:inline",children:y()})]})};default:return{variant:"outline",size:"sm",className:`text-xs ${f?"border-[#ff7a45] text-[#ff7a45] bg-[#ff7a45]/5":"border-[#4a5d94] text-[#4a5d94]"} ${r}`,children:i.jsxs(i.Fragment,{children:[g(),i.jsx("span",{className:"ml-2",children:y()})]})}}})();return i.jsx(U,{...b,onClick:x,disabled:s||l&&m,title:j()})},pe=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));pe.displayName="Card";const rt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:re("flex flex-col space-y-1.5 p-6",e),...t}));rt.displayName="CardHeader";const st=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:re("text-2xl font-semibold leading-none tracking-tight",e),...t}));st.displayName="CardTitle";const pc=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:re("text-sm text-muted-foreground",e),...t}));pc.displayName="CardDescription";const Ae=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:re("p-6 pt-0",e),...t}));Ae.displayName="CardContent";const dg=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:re("flex items-center p-6 pt-0",e),...t}));dg.displayName="CardFooter";var mg=["PageUp","PageDown"],hg=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fg={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cs="Slider",[Zo,TA,PA]=gm(cs),[pg,yM]=ss(cs,[PA]),[_A,Ia]=pg(cs),gg=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:x,...g}=e,y=p.useRef(new Set),j=p.useRef(0),b=o==="horizontal"?MA:DA,[w=[],T]=ta({prop:u,defaultProp:d,onChange:I=>{var $;($=[...y.current][j.current])==null||$.focus(),h(I)}}),E=p.useRef(w);function P(I){const k=$A(w,I);R(I,k)}function M(I){R(I,j.current)}function A(){const I=E.current[j.current];w[j.current]!==I&&m(w)}function R(I,k,{commit:$}={commit:!1}){const W=qA(a),Q=UA(Math.round((I-r)/a)*a+r,W),J=hl(Q,[r,s]);T((te=[])=>{const D=LA(te,J,k);if(BA(D,c*a)){j.current=D.indexOf(J);const z=String(D)!==String(te);return z&&$&&m(D),z?D:te}else return te})}return i.jsx(_A,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:j,thumbs:y.current,values:w,orientation:o,form:x,children:i.jsx(Zo.Provider,{scope:e.__scopeSlider,children:i.jsx(Zo.Slot,{scope:e.__scopeSlider,children:i.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:me(g.onPointerDown,()=>{l||(E.current=w)}),min:r,max:s,inverted:f,onSlideStart:l?void 0:P,onSlideMove:l?void 0:M,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&R(r,0,{commit:!0}),onEndKeyDown:()=>!l&&R(s,w.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:k})=>{if(!l){const Q=mg.includes(I.key)||I.shiftKey&&hg.includes(I.key)?10:1,J=j.current,te=w[J],D=a*Q*k;R(te+D,J,{commit:!0})}}})})})})});gg.displayName=cs;var[xg,yg]=pg(cs,{startEdge:"left",endEdge:"right",size:"width",direction:1}),MA=p.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,m]=p.useState(null),f=tt(t,b=>m(b)),x=p.useRef(),g=cl(s),y=g==="ltr",j=y&&!a||!y&&a;function v(b){const w=x.current||h.getBoundingClientRect(),T=[0,w.width],P=gc(T,j?[n,r]:[r,n]);return x.current=w,P(b-w.left)}return i.jsx(xg,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:i.jsx(vg,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const w=v(b.clientX);o==null||o(w)},onSlideMove:b=>{const w=v(b.clientX);l==null||l(w)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:b=>{const T=fg[j?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:T?-1:1})}})})}),DA=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=p.useRef(null),h=tt(t,u),m=p.useRef(),f=!s;function x(g){const y=m.current||u.current.getBoundingClientRect(),j=[0,y.height],b=gc(j,f?[r,n]:[n,r]);return m.current=y,b(g-y.top)}return i.jsx(xg,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:i.jsx(vg,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=x(g.clientY);a==null||a(y)},onSlideMove:g=>{const y=x(g.clientY);o==null||o(y)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const j=fg[f?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:j?-1:1})}})})}),vg=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Ia(cs,n);return i.jsx(Je.span,{...d,ref:t,onKeyDown:me(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):mg.concat(hg).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:me(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():r(h)}),onPointerMove:me(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:me(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),bg="SliderTrack",wg=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Ia(bg,n);return i.jsx(Je.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});wg.displayName=bg;var el="SliderRange",jg=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Ia(el,n),a=yg(el,n),o=p.useRef(null),l=tt(t,o),c=s.values.length,d=s.values.map(m=>Ng(m,s.min,s.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return i.jsx(Je.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:h+"%"}})});jg.displayName=el;var tl="SliderThumb",Sg=p.forwardRef((e,t)=>{const n=TA(e.__scopeSlider),[r,s]=p.useState(null),a=tt(t,l=>s(l)),o=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(RA,{...e,ref:a,index:o})}),RA=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,o=Ia(tl,n),l=yg(tl,n),[c,d]=p.useState(null),u=tt(t,v=>d(v)),h=c?o.form||!!c.closest("form"):!0,m=Em(c),f=o.values[r],x=f===void 0?0:Ng(f,o.min,o.max),g=FA(r,o.values.length),y=m==null?void 0:m[l.size],j=y?zA(y,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${j}px)`},children:[i.jsx(Zo.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(Je.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:me(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&i.jsx(OA,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},r)]})});Sg.displayName=tl;var OA=e=>{const{value:t,...n}=e,r=p.useRef(null),s=Cm(t);return p.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[s,t]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function LA(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function Ng(e,t,n){const a=100/(n-t)*(e-t);return hl(a,[0,100])}function FA(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function $A(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function zA(e,t,n){const r=e/2,a=gc([0,50],[0,r]);return(r-a(t)*n)*n}function VA(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function BA(e,t){if(t>0){const n=VA(e);return Math.min(...n)>=t}return!0}function gc(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function qA(e){return(String(e).split(".")[1]||"").length}function UA(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Eg=gg,HA=wg,GA=jg,WA=Sg;const Hi=p.forwardRef(({className:e,...t},n)=>i.jsxs(Eg,{ref:n,className:re("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(HA,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(GA,{className:"absolute h-full bg-primary"})}),i.jsx(WA,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Hi.displayName=Eg.displayName;const YA=({className:e=""})=>{const{isPlaying:t,currentTrack:n,currentTime:r,duration:s,volume:a,isLoading:o,error:l,play:c,pause:d,resume:u,stop:h,setVolume:m,seekTo:f}=ug();if(!n)return null;const x=b=>{if(isNaN(b)||b<0)return"0:00";const w=Math.floor(b/60),T=Math.floor(b%60);return`${w}:${T.toString().padStart(2,"0")}`},g=s>0?r/s*100:0,y=()=>{t?d():u()},j=b=>{if(s>0){const w=b[0]/100*s;f(w)}},v=b=>{m(b[0]/100)};return i.jsx(pe,{className:`fixed bottom-20 left-4 right-4 z-40 bg-white/95 backdrop-blur-sm border-[#d8e3ff] shadow-lg ${e}`,children:i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-[#4a5d94] truncate",children:"Audio Guide"}),l&&i.jsx("p",{className:"text-xs text-red-500 truncate",children:l})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[i.jsx(U,{variant:"ghost",size:"sm",onClick:y,disabled:o||!!l,className:"p-1 h-8 w-8",children:o?i.jsx(Qn,{className:"h-4 w-4 animate-spin"}):t?i.jsx(ml,{className:"h-4 w-4"}):i.jsx(fl,{className:"h-4 w-4"})}),i.jsx(U,{variant:"ghost",size:"sm",onClick:h,className:"p-1 h-8 w-8 text-[#8c9db5] hover:text-[#4a5d94]",children:i.jsx(qx,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx(Hi,{value:[g],onValueChange:j,max:100,step:.1,className:"w-full",disabled:s===0||o}),i.jsxs("div",{className:"flex justify-between text-xs text-[#8c9db5] mt-1",children:[i.jsx("span",{children:x(r)}),i.jsx("span",{children:x(s)})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(U,{variant:"ghost",size:"sm",onClick:()=>m(a>0?0:.8),className:"p-1 h-6 w-6 text-[#8c9db5] hover:text-[#4a5d94]",children:a===0?i.jsx(ol,{className:"h-3 w-3"}):i.jsx(ra,{className:"h-3 w-3"})}),i.jsx("div",{className:"flex-1 max-w-20",children:i.jsx(Hi,{value:[a*100],onValueChange:v,max:100,step:1,className:"w-full"})}),i.jsxs("span",{className:"text-xs text-[#8c9db5] w-8 text-right",children:[Math.round(a*100),"%"]})]})]})})},Le=He("Map"),KA=({fullScreen:e=!1})=>{var Re,ae,Te,Ne,_e;const t=St(),n=Tn(),{locations:r}=fc(),{getEventById:s,getEventsByLocationId:a}=hc(),[o,l]=p.useState(r),[c,d]=p.useState([]),[u,h]=p.useState(null),[m,f]=p.useState(null),[x,g]=p.useState(null),[y,j]=p.useState(null),[v,b]=p.useState(null),[w,T]=p.useState(1),[E,P]=p.useState(null),[M,A]=p.useState(!1),[R,I]=p.useState(!1),[k,$]=p.useState(!1),W=p.useMemo(()=>!1,[]);p.useEffect(()=>{B.trackInteraction(ee.ZOOM,"map",{scale:w})},[w]),p.useEffect(()=>{B.trackPageView("/map","Carte"),B.trackMapInteraction(ee.MAP_LOAD,{total_locations:r.length});const G=localStorage.getItem("mapLocations");if(G)try{const ce=JSON.parse(G),ge=r.map(ze=>{const Et=ce.find(en=>en.id===ze.id);return Et?{...ze,visited:Et.visited}:ze});l(ge)}catch(ce){Le.error("Erreur lors du chargement des lieux visités",{error:ce})}},[r]),p.useEffect(()=>{const ce=ct().map(ge=>ge.id);d(ce)},[W]),p.useEffect(()=>{if(!u){const ce=ct().map(ge=>ge.id);d(ce)}},[u]),p.useEffect(()=>{Le.info("Mise à jour des emplacements sur la carte depuis le service de données"),l(r)},[r]);const Q=(G,ce)=>{ce.stopPropagation(),Le.info(`Tentative de sauvegarde de l'événement: ${G.id} depuis la carte`),c.includes(G.id)?(xa(G.id),d(c.filter(ze=>ze!==G.id)),B.trackContentInteraction(ee.UNSAVE,"event",G.id,{source:"map"}),Le.info(`Événement ${G.id} retiré avec succès depuis la carte`)):(Rl(G),d([...c,G.id]),B.trackContentInteraction(ee.SAVE,"event",G.id,{source:"map"}),Le.info(`Événement ${G.id} sauvegardé avec succès depuis la carte`))};p.useEffect(()=>{var L,Z,X;const G=(L=n.state)==null?void 0:L.highlightLocationId,ce=((Z=n.state)==null?void 0:Z.fromEvent)===!0,ge=((X=n.state)==null?void 0:X.fromHistory)===!0,ze=new URLSearchParams(window.location.search),Et=ze.get("highlight"),en=ze.get("location"),ut=ze.get("event"),Wt=Et||en||G||ut;if(!Wt)return;Le.info(`Mise en évidence du lieu avec ID: ${Wt}`);let C=Wt;if(ut&&Wt===ut){const H=zt.find(ie=>ie.id===ut);H&&(C=H.locationId,Le.debug(`Conversion de l'ID d'événement ${ut} en ID de lieu ${C}`),setTimeout(()=>{h(H),Le.info(`Ouverture automatique des détails de l'événement ${H.id}`)},500))}let _=o.find(H=>H.id===C);!_&&C&&(_=o.find(H=>H.id.startsWith(C)),_&&(Le.info(`Lieu avec ID exact ${C} non trouvé, mais un lieu correspondant a été trouvé: ${_.id}`),C=_.id)),_?(Le.debug("Lieu trouvé pour mise en évidence",{id:_.id,name:_.name,x:_.x,y:_.y}),g(C),!ge&&!ce&&f(C),Le.debug(`Mise en évidence permanente du lieu ${C} jusqu'à la prochaine action utilisateur`)):Le.warn(`Lieu avec ID ${Wt} non trouvé dans mapLocations`)},[n,o,zt]);const J=G=>{Le.info(`Clic sur l'emplacement ${G}`),g(G),f(G);const ce=a(G);Le.debug(`Récupération des événements pour le lieu ${G} via getEventsByLocationId`,ce),Le.debug(`Événements trouvés pour ${G}`,ce);const ge=o.find(ze=>ze.id===G);ge&&B.trackBuildingView(ge.id,ge.name),B.trackMapInteraction(ee.LOCATION_VIEW,{building_id:G,from:"map"}),h(null)},te=(G,ce)=>{const ge=o.map(ze=>ze.id===G?{...ze,visited:ce}:ze);l(ge),localStorage.setItem("mapLocations",JSON.stringify(ge)),B.trackFeatureUse("location_mark_visited",{location_id:G,visited:ce}),g(G),ce&&(Le.info(`Lieu ${G} marqué comme visité, vérification des achievements`),ge.every(Et=>Et.visited)&&(Le.info("Tous les lieux ont été visités, déblocage de l'achievement ALL_LOCATIONS_VISITED"),Di(lt.ALL_LOCATIONS_VISITED)))},D=G=>{const ce=a(G);return Le.debug(`Événements trouvés pour ${G} via getEventsByLocationId`,ce),ce},z=o.filter(G=>G.visited).length,S=o.length,K=()=>{localStorage.setItem("locationConsent","granted"),I(!0),$(!1),A(!1)};p.useEffect(()=>{if(W){$(!0),A(!1),I(!0),localStorage.setItem("locationConsent","granted"),Le.info("Environnement de développement détecté, localisation activée automatiquement");return}localStorage.removeItem("locationConsent"),$(!1),A(!1),I(!1)},[]);const se=(G,ce,ge)=>{j({x:G,y:ce}),ge&&b(ge)},[N,oe]=p.useState(null);return p.useEffect(()=>{const G=ge=>{ge.message&&(ge.message.includes("insertBefore")||ge.message.includes("removeChild"))&&(console.warn("[Map] DOM manipulation error caught:",ge.message),oe("Erreur de rendu détectée, rechargement..."),setTimeout(()=>{oe(null),f(null),h(null),g(null),l([...o])},2e3))},ce=ge=>{ge.reason&&typeof ge.reason=="string"&&(ge.reason.includes("removeChild")||ge.reason.includes("insertBefore"))&&(console.warn("[Map] Unhandled DOM error caught:",ge.reason),ge.preventDefault(),oe("Erreur de rendu détectée, rechargement..."),setTimeout(()=>{oe(null),f(null),h(null),g(null)},2e3))};return window.addEventListener("error",G),window.addEventListener("unhandledrejection",ce),()=>{window.removeEventListener("error",G),window.removeEventListener("unhandledrejection",ce)}},[o]),N?i.jsx("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-4",children:[i.jsx("p",{className:"text-red-500 mb-2",children:N}),i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})]})}):i.jsxs("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsx("div",{className:"w-1/4"}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94] text-center",children:"Carte"}),i.jsx("div",{className:"flex items-center space-x-2 w-1/4 justify-end",children:i.jsx(ba,{title:"Parcours Île Feydeau",text:"Découvrez mon parcours sur l'Île Feydeau à Nantes!"})})]}),i.jsx("div",{className:"flex items-center justify-center mb-4 text-sm text-[#4a5d94] fade-in",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4CAF50] rounded-full mr-1 text-white text-xs font-medium",children:z}),i.jsx("span",{className:"text-xs",children:z>1?"Visités":"Visité"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4a5d94] rounded-full mr-1 text-white text-xs font-medium",children:S-z}),i.jsx("span",{className:"text-xs",children:"À découvrir"})]})]})}),i.jsxs("div",{className:"flex justify-center gap-2 my-2",children:[i.jsx(jS,{onLocationEnabled:()=>{A(!1),I(!0),$(!0),Le.info("Localisation activée manuellement par l'utilisateur"),B.trackMapInteraction(ee.USER_LOCATION,{granted:!0})},onLocationDenied:()=>{A(!0),I(!1),Le.warn("Localisation refusée par l'utilisateur"),B.trackMapInteraction(ee.USER_LOCATION,{granted:!1})},onLocationDisabled:()=>{I(!1),P(null),Le.info("Localisation désactivée manuellement par l'utilisateur"),B.trackMapInteraction(ee.USER_LOCATION,{granted:!1,disabled:!0})}}),i.jsx(SS,{onAudioEnabled:()=>{Le.info("Son activé manuellement par l'utilisateur"),B.trackFeatureUse("map_sound_toggle",{enabled:!0})},onAudioDisabled:()=>{Le.info("Son désactivé par l'utilisateur"),B.trackFeatureUse("map_sound_toggle",{enabled:!1})}})]}),i.jsx("div",{className:"relative",children:i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsxs("div",{className:"relative h-full",children:[i.jsx(df,{locations:o,activeLocation:m,highlightedLocation:x,onClick:G=>{const ce=G.currentTarget.dataset.locationId||G.currentTarget.id.replace("location-","");ce?J(ce):B.trackInteraction(ee.CLICK,"map_background")},readOnly:!1,onScaleChange:T,onPanStart:({x:G,y:ce})=>{B.trackMapInteraction(ee.DRAG,{phase:"start",x:Math.round(G),y:Math.round(ce)})},onPanEnd:({totalDx:G,totalDy:ce,distance:ge,durationMs:ze})=>{B.trackMapInteraction(ee.DRAG,{total_dx:Math.round(G),total_dy:Math.round(ce),distance:Math.round(ge),duration_ms:Math.round(ze)})},userLocationProps:R?{onLocationUpdate:se,showNavigation:!1,onPermissionChange:G=>A(G)}:void 0,navigationProps:E&&y&&v?{userPosition:v,targetLocation:o.find(G=>G.id===E)||null,onClose:()=>P(null)}:void 0}),M&&!W&&i.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-red-500 text-white p-2 text-center",children:[i.jsx("div",{className:"mb-2",children:"Accès refusé - Vous avez refusé l'accès à votre position."}),i.jsx(U,{size:"sm",onClick:K,className:"bg-white text-red-500 hover:bg-gray-100 text-xs",children:"Activer la localisation"})]})]})})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:()=>f(null),children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:G=>G.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-[#4a5d94]",children:(Re=o.find(G=>G.id===m))==null?void 0:Re.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(AA,{audioUrl:(ae=o.find(G=>G.id===m))==null?void 0:ae.audio,locationName:(Te=o.find(G=>G.id===m))==null?void 0:Te.name,variant:"icon"}),i.jsx(tr,{entryId:`building-${m}`,variant:"icon",showCount:!0}),i.jsx(U,{variant:"ghost",size:"sm",className:"-mt-2 -mr-2",onClick:()=>{m&&B.trackInteraction(ee.BACK,"location_details_close",{building_id:m}),f(null)},children:i.jsx(br,{className:"h-4 w-4"})})]})]}),i.jsx("p",{className:"text-sm text-[#8c9db5] mb-3",children:"Île Feydeau, Nantes"}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-4",children:(Ne=o.find(G=>G.id===m))==null?void 0:Ne.description}),i.jsxs(U,{size:"sm",variant:"outline",className:"text-xs border-[#4a5d94] text-[#4a5d94]",onClick:()=>{if(m){Le.info(`Navigation vers l'histoire du lieu: ${m}`);const G=o.find(ce=>ce.id===m);G&&B.trackBuildingHistoryView(G.id,"from_map"),B.trackInteraction(ee.CLICK,"history_button",{from:"map",building_id:m}),t("/location-history",{state:{selectedLocationId:m}})}else Le.warn("Tentative de navigation vers l'histoire d'un lieu non sélectionné")},children:[i.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Histoire du lieu"]}),i.jsx("div",{className:"mb-6"}),D(m).length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"font-medium text-[#1a2138] mb-2",children:"Événements à cet endroit:"}),i.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 -mr-2",children:D(m).map(G=>i.jsx("div",{className:`bg-[#f0f5ff] p-3 rounded-lg cursor-pointer hover:bg-[#e0ebff] transition-colors ${c.includes(G.id)?"border-l-4 border-l-[#ff7a45]":""}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",onClick:()=>{B.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:G.id,source:"map"}),h(G)},children:[i.jsx("p",{className:"font-medium text-[#1a2138]",children:G.title}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx(pn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsxs("p",{className:"text-xs text-[#8c9db5]",children:[G.days.map(ce=>ce==="samedi"?"Sa":"Di").join("/"),", ",G.time]})]}),i.jsx("p",{className:"text-xs text-[#4a5d94] mt-1",children:G.artistName})]}),i.jsx(U,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:ce=>Q(G,ce),children:c.includes(G.id)?i.jsx(ul,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(sa,{className:"h-5 w-5 text-[#8c9db5]"})})]})},G.id))})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-between mb-4",children:[i.jsx(U,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] text-xs sm:text-sm px-1 sm:px-2 min-h-[44px]",onClick:()=>{var G;return m&&te(m,!((G=o.find(ce=>ce.id===m))!=null&&G.visited))},children:(_e=o.find(G=>G.id===m))!=null&&_e.visited?"Non visité":"Marquer visité"}),i.jsx(U,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] text-sm min-h-[44px]",onClick:()=>{m&&B.trackInteraction(ee.BACK,"location_details_back",{building_id:m}),f(null)},children:"Retour à la carte"})]}),R&&i.jsx("div",{className:"mb-16",children:i.jsxs(U,{variant:"secondary",className:"w-full text-sm bg-[#f0f5ff] text-[#4a5d94] hover:bg-[#d8e3ff] min-h-[44px]",onClick:()=>{m&&(P(m),f(null),B.trackMapInteraction(ee.ROUTE_CALCULATE,{building_id:m,has_user_position:!!y}))},children:[i.jsx(ll,{className:"h-4 w-4 mr-2"}),"Me guider vers ce lieu"]})})]})}),i.jsx(mc,{event:u,isOpen:!!u,onClose:()=>{h(null),g(null)},source:"map"}),i.jsx(YA,{}),i.jsx(rr,{})]})},us=Ux,Pr=p.forwardRef(({className:e,...t},n)=>i.jsx(Im,{ref:n,className:re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Pr.displayName=Im.displayName;const Me=p.forwardRef(({className:e,...t},n)=>i.jsx(km,{ref:n,className:re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Me.displayName=km.displayName;const De=p.forwardRef(({className:e,...t},n)=>i.jsx(Am,{ref:n,className:re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));De.displayName=Am.displayName;function QA({onFilterChange:e,currentFilter:t}){return i.jsxs("div",{className:"flex space-x-2 mb-4",children:[i.jsx(U,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>e("all"),className:t==="all"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:"Tous"}),i.jsxs(U,{variant:t==="exposition"?"default":"outline",size:"sm",onClick:()=>e("exposition"),className:t==="exposition"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Hx,{className:"h-4 w-4 mr-2"}),"Expositions"]}),i.jsxs(U,{variant:t==="concert"?"default":"outline",size:"sm",onClick:()=>e("concert"),className:t==="concert"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Gx,{className:"h-4 w-4 mr-2"}),"Concerts"]})]})}const jd=({event:e,isSaved:t,onEventClick:n,onSaveClick:r})=>i.jsxs(pe,{className:"shadow-md border-0 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1",onClick:n,children:[i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#1a2138]",children:i.jsx(As,{text:e.title,maxLength:25,className:"font-medium text-[#1a2138]"})}),e.type==="exposition"&&i.jsx("p",{className:"text-sm text-[#4a5d94]",children:i.jsx(As,{text:e.artistName,maxLength:20,className:"text-sm text-[#4a5d94]"})}),i.jsxs("div",{className:"flex flex-col space-y-1 mt-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ii,{className:"h-3 w-3 mr-1 text-[#ff7a45]"}),i.jsx("p",{className:"text-xs font-medium text-[#ff7a45]",children:e.time})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(kn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(As,{text:e.locationName,maxLength:30,className:"text-xs text-[#8c9db5]"})})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(tr,{entryId:`event-${e.id}`,variant:"compact",showCount:!0,className:"scale-75 -mr-1"}),i.jsx(U,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:r,children:t?i.jsx(ul,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(sa,{className:"h-5 w-5 text-[#8c9db5]"})})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.type==="exposition"?"bg-[#e0ebff] text-[#4a5d94]":"bg-[#fff2ee] text-[#ff7a45]"}`,children:e.type==="exposition"?"Exposition":"Concert"})]})]})})]}),XA=()=>{const e=St(),[t,n]=p.useState(null),[r,s]=p.useState("all"),[a,o]=p.useState([]);p.useEffect(()=>{B.trackPageView("/program","Programme")},[]),p.useEffect(()=>{const f=ct().map(x=>x.id);o(f)},[]);const l=(m,f)=>{f.stopPropagation(),console.log(`[Program] Tentative de sauvegarde de l'événement: ${m.id}`),a.includes(m.id)?(xa(m.id),o(a.filter(g=>g!==m.id)),console.log(`[Program] Événement ${m.id} retiré avec succès`),B.trackContentInteraction(ee.UNSAVE,"event",m.id,{event_title:m.title,source:"program"})):(Rl(m),o([...a,m.id]),console.log(`[Program] Événement ${m.id} sauvegardé avec succès`),B.trackContentInteraction(ee.SAVE,"event",m.id,{event_title:m.title,source:"program"}))},c=m=>{s(m),B.trackProgramInteraction(ee.FILTER,{filter:m})},d=(m,f)=>f==="all"?m:m.filter(x=>x.type===f),u=m=>{const f=m.match(/(\d{1,2})h(\d{2})/);if(!f)return Number.MAX_SAFE_INTEGER;const x=parseInt(f[1],10),g=parseInt(f[2],10);return x*60+g},h=m=>[...m].sort((f,x)=>u(f.time)-u(x.time));return i.jsxs("div",{className:"min-h-screen app-gradient pb-20",children:[i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:[i.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Programme"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(U,{variant:"ghost",size:"icon","aria-label":"Ajouter au calendrier",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",onClick:async()=>{try{B.trackProgramCTA("add_to_calendar");const{addToCalendar:m}=await Gs(async()=>{const{addToCalendar:y}=await Promise.resolve().then(()=>fA);return{addToCalendar:y}},void 0),f=zt;let x=0,g=0;for(const y of f)(await m(y)).success?x++:g++;x>0&&ft({title:"Événements ajoutés au calendrier",description:`${x} événement(s) ajouté(s) avec succès.`}),g>0&&(ft({title:"Erreur lors de l'ajout au calendrier",description:`${g} événement(s) n'ont pas pu être ajoutés.`,variant:"destructive"}),B.trackError(ee.API_ERROR,"program_add_all_to_calendar_errors",{error_count:g}))}catch(m){ft({title:"Erreur inattendue",description:m instanceof Error?m.message:"Impossible d'ajouter au calendrier.",variant:"destructive"}),B.trackError(ee.API_ERROR,"program_add_all_to_calendar_exception",{message:m==null?void 0:m.message})}},children:i.jsx(pn,{className:"h-5 w-5"})})})]}),i.jsx("div",{className:"mb-4 fade-in",children:i.jsx(QA,{onFilterChange:c,currentFilter:r})}),i.jsx("div",{className:"text-center mb-4 text-sm text-[#ff7a45] slide-in-bottom"}),i.jsxs(us,{defaultValue:"samedi",className:"w-full",children:[i.jsxs(Pr,{className:"grid grid-cols-2 mb-4 bg-[#e0ebff]",children:[i.jsxs(Me,{value:"samedi",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),"Samedi"]}),i.jsxs(Me,{value:"dimanche",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(pn,{className:"h-4 w-4 mr-2"}),"Dimanche"]})]}),i.jsxs(De,{value:"samedi",className:"space-y-4",children:[h(d(ai("samedi"),r)).map((m,f)=>{const x=`samedi-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(jd,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),B.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(ai("samedi"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun événement ne correspond à ce filtre pour ce jour."})})]}),i.jsxs(De,{value:"dimanche",className:"space-y-4",children:[h(d(ai("dimanche"),r)).map((m,f)=>{const x=`dimanche-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(jd,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),B.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(ai("dimanche"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun événement ne correspond à ce filtre pour ce jour."})})]})]}),i.jsx(mc,{event:t,isOpen:!!t,onClose:()=>n(null),source:"program"})]}),i.jsx(rr,{})]})},pi={history:"Notre association est née de la volonté commune des habitants de ce quartier historique de Nantes, situé sur ce qui était autrefois une île. Fondée en 2017, elle regroupe 20 passionnés déterminés à préserver et partager le patrimoine unique de ce lieu.",mission:"Nous œuvrons pour la préservation de notre patrimoine architectural et culturel, tout en favorisant l'accès à l'art et à la culture pour tous. Chaque année, le troisième week-end de septembre, nous ouvrons nos portes au public pour partager ce lieu exceptionnel à travers des expositions et concerts.",neighborhood:"Situé au cœur de Nantes, notre quartier était autrefois une île entourée par les bras de la Loire. Au fil des siècles, l'urbanisation a transformé le paysage, mais nous conservons précieusement l'héritage architectural et l'esprit communautaire qui caractérisent ce lieu si particulier.",event:"Notre événement annuel transforme le quartier en une galerie d'art vivante où les visiteurs peuvent découvrir des expositions dans les halls historiques et profiter de concerts dans notre cour intérieure. C'est l'occasion de rencontrer des artistes locaux et de vivre une expérience culturelle unique dans un cadre exceptionnel."},ar={name:"Collectif Ile Feydeau",shortName:"FEYDEAU",description:"Association culturelle mettant en valeur le patrimoine historique d'un ancien quartier insulaire de Nantes.",yearFounded:2017,memberCount:20,eventWeekend:"Troisième week-end de septembre",contactEmail:"collectif.ile.feydeau@gmail.com",instagram:"https://www.instagram.com/collectif_ile_feydeau"},JA=[{id:"member1",name:"Julien Fritsch",role:"Président",description:"Organisateur du projet."},{id:"member2",name:"Philippe Châtel",role:"Trésorier",description:"Coordonne les communications et partenariats artistiques."},{id:"member3",name:"Edwige Filleux",role:"Secrétaire",description:"Fondation de l'association."}],ZA=()=>{const e=St();return i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>e("/map"),children:[i.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"À propos"}),i.jsx(ba,{title:"À propos du Collectif Île Feydeau",text:"Découvrez l'histoire et la mission du Collectif Île Feydeau à Nantes!"})]}),i.jsxs(us,{defaultValue:"association",className:"w-full mb-6",children:[i.jsxs(Pr,{className:"grid grid-cols-4 mb-4",children:[i.jsx(Me,{value:"association",children:"Association"}),i.jsx(Me,{value:"history",children:"Histoire"}),i.jsx(Me,{value:"team",children:"Équipes"}),i.jsx(Me,{value:"support",children:"Nous aider"})]}),i.jsx(De,{value:"history",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Histoire de l'Île Feydeau"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"L'Île Feydeau est un quartier historique de Nantes, construit au XVIIIe siècle sur une île de la Loire. Ce lotissement, conçu par l'architecte Jean-Baptiste Ceineray, est un exemple remarquable d'architecture néoclassique et témoigne de la prospérité des armateurs et négociants nantais de l'époque."}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsx(U,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white",onClick:()=>e("/location-history"),children:"Voir l'histoire détaillée des lieux"})}),i.jsx("div",{className:"mt-8"}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Architecture unique"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Les immeubles de l'Île Feydeau se caractérisent par leurs façades ornées de mascarons, leurs balcons en fer forgé et leur soubassement en granit. L'affaissement des bâtiments, dû à la nature marécageuse du sol, confère à l'ensemble une silhouette légèrement penchée, caractéristique de ce quartier."}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Patrimoine préservé"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Aujourd'hui, l'Île Feydeau n'est plus une île suite aux travaux de comblement de la Loire, mais son patrimoine architectural est préservé et valorisé. De nombreux immeubles sont classés ou inscrits aux Monuments Historiques, témoignant de l'importance de ce quartier dans l'histoire de Nantes."})]})}),i.jsxs(De,{value:"association",className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:space-x-4 space-y-3 md:space-y-0 mt-4 mb-2 p-4 bg-white rounded-lg shadow-md",children:[i.jsxs("a",{href:"https://www.instagram.com/ilefeydeau/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#E1306C] transition-colors w-full md:w-auto justify-center",children:[i.jsx(Wx,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@ilefeydeau"})]}),i.jsxs("a",{href:"https://x.com/Ilefeydeau",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#1DA1F2] transition-colors w-full md:w-auto justify-center",children:[i.jsx(Yx,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@Ilefeydeau"})]}),i.jsxs("a",{href:`mailto:${ar.contactEmail}`,className:"flex items-center text-gray-700 hover:text-[#4285F4] transition-colors w-full md:w-auto justify-center break-all",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 flex-shrink-0",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),i.jsx("span",{className:"truncate",children:ar.contactEmail})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Découvrez notre collectif en vidéo"}),i.jsx("div",{className:"aspect-video w-full mb-4 bg-gray-100 rounded overflow-hidden",children:i.jsx("video",{className:"w-full h-full object-contain",controls:!0,playsInline:!0,poster:bt("intro-video-image.png"),src:bt("/video/intro-video.mp4"),"aria-label":"Vidéo de présentation du Collectif Île Feydeau"})}),i.jsx("p",{className:"text-gray-700 text-sm italic text-center",children:"Vidéo d'introduction du Collectif Île Feydeau (45 secondes)"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre histoire"}),i.jsx("p",{className:"text-gray-700 mb-4",children:pi.history}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre mission"}),i.jsx("p",{className:"text-gray-700 mb-4",children:pi.mission}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre quartier"}),i.jsx("p",{className:"text-gray-700 mb-4",children:pi.neighborhood}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Événement annuel"}),i.jsx("p",{className:"text-gray-700 mb-4",children:pi.event})]})]}),i.jsxs(De,{value:"team",className:"space-y-4",children:[i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:i.jsxs("p",{className:"text-gray-700",children:["Notre association compte ",ar.memberCount," membres actifs, tous habitants du quartier et passionnés par sa valorisation. Voici quelques-uns des membres du bureau qui coordonnent nos actions."]})}),i.jsx("div",{className:"space-y-4",children:JA.map(t=>i.jsx(pe,{children:i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"min-w-[48px] w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center overflow-hidden",children:i.jsx("span",{className:"text-purple-600 font-semibold text-center",children:t.name.split(" ").map(n=>n[0]).join("")})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium truncate",children:t.name}),i.jsx("p",{className:"text-sm text-purple-600",children:t.role}),i.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description})]})]})})},t.id))})]}),i.jsx(De,{value:"support",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Comment nous aider ?"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Plusieurs façons s'offrent à vous pour soutenir notre association et contribuer à la préservation et l'animation de ce lieu historique de Nantes."}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsxs("div",{className:"border-l-4 border-red-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(In,{className:"h-5 w-5 mr-2 text-red-500"}),"Faire un don"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Soutenez financièrement nos actions de préservation et de valorisation du patrimoine."}),i.jsxs(U,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>e("/donate"),children:[i.jsx(In,{className:"h-4 w-4 mr-2 text-red-500"}),"Accéder à la page de don"]})]}),i.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(Tm,{className:"h-5 w-5 mr-2 text-blue-500"}),"Devenir membre"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Rejoignez notre équipe de bénévoles et participez activement à nos projets. Contactez-nous à ",i.jsx("a",{href:`mailto:${ar.contactEmail}`,className:"text-blue-600 hover:underline",children:ar.contactEmail}),"."]})]}),i.jsxs("div",{className:"border-l-4 border-green-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 text-green-500",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Proposer une idée"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Vous avez des idées pour améliorer notre événement annuel ou pour d'autres projets ? Contactez-nous à ",i.jsx("a",{href:`mailto:${ar.contactEmail}`,className:"text-blue-600 hover:underline",children:ar.contactEmail})]})]})]})]})})]})]}),i.jsx(rr,{})]})},eT=()=>{const e=St();return p.useEffect(()=>{B.trackPageView("/donate","Faire un don"),B.trackDonationPageOpen("app")},[]),i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>{B.trackDonationInteraction(ee.DONATION_CANCEL,{method:"helloasso",reason:"back_click"}),e("/map")},children:[i.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Faire un don"}),i.jsx(ba,{title:"Faire un don au Collectif Île Feydeau",text:"Soutenez les actions du Collectif Île Feydeau pour la préservation du patrimoine nantais!"})]}),i.jsx(pe,{className:"mb-6",children:i.jsx(Ae,{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:i.jsx("iframe",{id:"haWidget",title:"Formulaire de don HelloAsso",scrolling:"auto",src:"https://www.helloasso.com/associations/collectif-feydeau/formulaires/1/widget",style:{width:"100%",height:"750px",border:"none"},onLoad:()=>B.trackDonationInteraction(ee.DONATION_START,{method:"helloasso",widget_loaded:!0})})})})}),i.jsxs("div",{className:"text-center text-sm text-gray-600",children:[i.jsx("p",{children:"Pour toute question concernant les dons, contactez-nous à :"}),i.jsx("p",{className:"font-medium",children:i.jsx("a",{href:"mailto:collectif.ile.feydeau@gmail.com",className:"text-blue-600 hover:underline",children:"collectif.ile.feydeau@gmail.com"})})]})]}),i.jsx(rr,{})]})},tT=()=>{const e=Tn();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},nT=({onComplete:e,isFirstVisit:t})=>{const[n,r]=p.useState(!1);St(),p.useEffect(()=>{const o=setTimeout(()=>{r(!0),setTimeout(()=>{e()},300)},2e3);return()=>clearTimeout(o)},[e]);const s={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.8,ease:"easeOut"}},exit:{opacity:0,scale:1.1,transition:{duration:.3,ease:"easeIn"}}};return i.jsx(je.div,{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-blue-50 to-blue-100 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:i.jsxs(je.div,{className:"flex flex-col items-center",variants:s,initial:"hidden",animate:"visible",exit:"exit",children:[i.jsx(je.h1,{className:"text-2xl font-bold text-[#4a5d94] mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:"1 Hall 1 Artiste 2025"}),i.jsx(je.img,{src:bt("/Logo.png"),alt:"Collectif Feydeau Logo",className:"w-48 h-48 object-contain mb-6"}),i.jsx(je.h2,{className:"text-xl font-semibold text-[#4a5d94] mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:"Collectif Feydeau"}),i.jsx(je.p,{className:"text-sm text-gray-600 text-center max-w-xs px-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:t?"Bienvenue dans l'application du Collectif Île Feydeau":"Découvrez le patrimoine historique de l'Île Feydeau"})]})})},Jt=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Jt.displayName="Input";var rT="Label",Cg=p.forwardRef((e,t)=>i.jsx(Je.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Cg.displayName=rT;var Ig=Cg;const sT=Ws("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ge=p.forwardRef(({className:e,...t},n)=>i.jsx(Ig,{ref:n,className:re(sT(),e),...t}));Ge.displayName=Ig.displayName;const wt=He("ImportExportService"),kg="1.0.0",iT=()=>{wt.info("Exportation de toutes les données");try{const{events:e,locations:t}=nt.getState(),n={events:e,locations:t,exportDate:new Date().toISOString(),version:kg},r=JSON.stringify(n,null,2);return wt.info(`Exportation réussie: ${e.length} événements et ${t.length} lieux`),r}catch(e){throw wt.error("Erreur lors de l'exportation des données",e),new Error("Erreur lors de l'exportation des données")}},aT=()=>{wt.info("Exportation des événements");try{const{events:e}=nt.getState(),t={events:e,exportDate:new Date().toISOString(),version:kg},n=JSON.stringify(t,null,2);return wt.info(`Exportation réussie: ${e.length} événements`),n}catch(e){throw wt.error("Erreur lors de l'exportation des événements",e),new Error("Erreur lors de l'exportation des événements")}},oT=()=>{wt.info("Exportation des événements au format CSV");try{const{events:e}=nt.getState(),t=["id","title","artistName","type","artistBio","time","days","locationName"],n=e.map(s=>[s.id,`"${s.title.replace(/"/g,'""')}"`,`"${s.artistName.replace(/"/g,'""')}"`,s.type,`"${s.artistBio.replace(/"/g,'""')}"`,`"${s.time.replace(/"/g,'""')}"`,`"${s.days.join(",")}"`,`"${s.locationName.replace(/"/g,'""')}"`].join(",")),r=[t.join(","),...n].join(`
`);return wt.info(`Exportation CSV réussie: ${e.length} événements`),r}catch(e){throw wt.error("Erreur lors de l'exportation des événements au format CSV",e),new Error("Erreur lors de l'exportation des événements au format CSV")}},lT=e=>{wt.info("Importation de données depuis JSON");try{const t=JSON.parse(e),n=[];let r=0,s=0;if(!t)return{success:!1,message:"Données d'importation invalides",errors:["Format JSON invalide"]};if(t.locations&&Array.isArray(t.locations)){wt.info(`Tentative d'importation de ${t.locations.length} lieux`);for(const o of t.locations){const l=Xo(o);if(l.isValid){const c=nt.addLocation(o);c.success?s++:c.error&&n.push(`Erreur lors de l'importation du lieu ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation échouée pour le lieu ${o.id||"sans ID"}: ${c}`)}}}if(t.events&&Array.isArray(t.events)){wt.info(`Tentative d'importation de ${t.events.length} événements`);for(const o of t.events){const l=Ui(o);if(l.isValid){const c=nt.addEvent(o);c.success?r++:c.error&&n.push(`Erreur lors de l'importation de l'événement ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation échouée pour l'événement ${o.id||"sans ID"}: ${c}`)}}}let a="";return s>0&&(a+=`${s} lieu(x) importé(s). `),r>0&&(a+=`${r} événement(s) importé(s).`),s===0&&r===0&&(a="Aucune donnée importée."),nt.saveToLocalStorage(),{success:r>0||s>0,message:a,importedEvents:r,importedLocations:s,errors:n.length>0?n:void 0}}catch(t){return wt.error("Erreur lors de l'importation des données",t),{success:!1,message:"Erreur lors de l'importation des données",errors:[t.message]}}},cT=e=>{wt.info("Importation d'événements depuis CSV");try{const t=e.split(`
`).filter(d=>d.trim()!=="");if(t.length<2)return{success:!1,message:"Le fichier CSV ne contient pas suffisamment de données",errors:["Format CSV invalide"]};const n=t[0].split(","),s=["id","title","artistName","type","locationName"].filter(d=>!n.includes(d));if(s.length>0)return{success:!1,message:`En-têtes manquants dans le fichier CSV: ${s.join(", ")}`,errors:[`En-têtes manquants: ${s.join(", ")}`]};const a=d=>{const u=[];let h="",m=!1;for(let f=0;f<d.length;f++){const x=d[f];x==='"'?m&&f+1<d.length&&d[f+1]==='"'?(h+='"',f++):m=!m:x===","&&!m?(u.push(h),h=""):h+=x}return u.push(h),u},o=[],l=[];for(let d=1;d<t.length;d++)try{const u=a(t[d]),h={};for(let f=0;f<n.length;f++)if(f<u.length){const x=n[f];let g=u[f];x==="x"||x==="y"?h[x]=parseFloat(g):x==="days"?h[x]=g.split(",").map(y=>y.trim()):h[x]=g}const m=Ui(h);if(m.isValid)o.push(h);else{const f=m.errors.map(x=>`${x.field}: ${x.message}`).join(", ");l.push(`Ligne ${d+1}: Validation échouée - ${f}`)}}catch(u){l.push(`Erreur lors du traitement de la ligne ${d+1}: ${u.message}`)}let c=0;for(const d of o){const u=nt.addEvent(d);u.success?c++:u.error&&l.push(`Erreur lors de l'importation de l'événement ${d.id}: ${u.error}`)}return nt.saveToLocalStorage(),{success:c>0,message:`${c} événement(s) importé(s) sur ${o.length} événements valides.`,importedEvents:c,errors:l.length>0?l:void 0}}catch(t){return wt.error("Erreur lors de l'importation des événements depuis CSV",t),{success:!1,message:"Erreur lors de l'importation des événements depuis CSV",errors:[t.message]}}},uT=()=>{const e=F.useRef(null),t=F.useRef(null),n=()=>{try{const c=iT();l(c,`feydeau-export-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation",c)}},r=()=>{try{const c=aT();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation des événements",c)}},s=()=>{try{const c=oT();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.csv`,"text/csv;charset=utf-8")}catch(c){console.error("Erreur d'exportation des événements au format CSV",c)}},a=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=lT(x);g.success?console.log("Importation réussie:",g.message):(console.error("Erreurs lors de l'importation:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation:",g.errors))}catch(x){console.error("Erreur d'importation des données",x)}e.current&&(e.current.value="")},u.readAsText(d)},o=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=cT(x);g.success?console.log("Importation CSV réussie:",g.message):(console.error("Erreurs lors de l'importation CSV:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation CSV:",g.errors))}catch(x){console.error("Erreur d'importation CSV",x)}t.current&&(t.current.value="")},u.readAsText(d)},l=(c,d,u)=>{try{const h=new Blob([c],{type:u}),m=URL.createObjectURL(h),f=document.createElement("a");if(f.href=m,f.download=d,f.style.display="none",document.body&&document.contains(document.body)){if(document.body.appendChild(f),f.click(),document.body.contains(f))try{document.body.removeChild(f)}catch(x){console.warn("[ImportExportPanel] Error removing download element:",x),f.remove&&f.remove()}}else console.warn("[ImportExportPanel] Document body not available for download");URL.revokeObjectURL(m)}catch(h){console.error("[ImportExportPanel] Error in downloadFile:",h);try{const m=`data:${u};charset=utf-8,${encodeURIComponent(c)}`;window.open(m,"_blank")}catch(m){console.error("[ImportExportPanel] Fallback download failed:",m),alert("Impossible de télécharger le fichier. Veuillez réessayer.")}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Import/Export de données"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Exportation"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(U,{onClick:n,children:"Exporter toutes les données"}),i.jsx(U,{onClick:r,children:"Exporter les événements"}),i.jsx(U,{onClick:s,children:"Exporter les événements (CSV)"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Importation"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{children:[i.jsx(U,{onClick:()=>{var c;return(c=e.current)==null?void 0:c.click()},children:"Importer depuis JSON"}),i.jsx("input",{type:"file",ref:e,onChange:a,accept:".json",className:"hidden"})]}),i.jsxs("div",{children:[i.jsx(U,{onClick:()=>{var c;return(c=t.current)==null?void 0:c.click()},children:"Importer événements depuis CSV"}),i.jsx("input",{type:"file",ref:t,onChange:o,accept:".csv",className:"hidden"})]})]})]})]})},Sd=He("AdminLogin"),dT="5321",mT=({onLogin:e})=>{const[t,n]=p.useState(""),[r,s]=p.useState(!1),[a,o]=p.useState(0),l=c=>{c.preventDefault(),t===dT?(Sd.info("Connexion administrateur réussie"),sessionStorage.setItem("adminAuthenticated","true"),e()):(Sd.warn("Tentative de connexion administrateur échouée"),s(!0),o(a+1),n(""))};return i.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:i.jsxs(pe,{className:"w-full max-w-md",children:[i.jsxs(rt,{className:"space-y-1",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"bg-[#4a5d94] p-3 rounded-full",children:i.jsx(Kx,{className:"h-6 w-6 text-white"})})}),i.jsx(st,{className:"text-2xl text-center text-[#4a5d94]",children:"Accès Administrateur"}),i.jsx(pc,{className:"text-center",children:"Veuillez entrer le mot de passe pour accéder à l'interface d'administration"})]}),i.jsx(Ae,{children:i.jsx("form",{onSubmit:l,children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"password",children:"Code PIN"}),i.jsx(Jt,{id:"password",type:"number",inputMode:"numeric",pattern:"[0-9]*",maxLength:4,value:t,onChange:c=>{c.target.value.length<=4&&(n(c.target.value),r&&s(!1))},className:`text-center text-2xl tracking-widest ${r?"border-red-500":""}`,placeholder:"____"}),r&&i.jsxs("p",{className:"text-sm text-red-500 text-center",children:["Code PIN incorrect. ",a>1?`${a} tentatives échouées.`:""]})]}),i.jsx(U,{type:"submit",className:"w-full bg-[#4a5d94]",children:"Se connecter"})]})})})]})})};function Zt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Er(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Ag=6048e5,hT=864e5;let fT={};function ka(){return fT}function Vs(e,t){var l,c,d,u;const n=ka(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Zt(e),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Gi(e){return Vs(e,{weekStartsOn:1})}function Tg(e){const t=Zt(e),n=t.getFullYear(),r=Er(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Gi(r),a=Er(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Gi(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Nd(e){const t=Zt(e);return t.setHours(0,0,0,0),t}function Ed(e){const t=Zt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pT(e,t){const n=Nd(e),r=Nd(t),s=+n-Ed(n),a=+r-Ed(r);return Math.round((s-a)/hT)}function gT(e){const t=Tg(e),n=Er(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Gi(n)}function xT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function yT(e){if(!xT(e)&&typeof e!="number")return!1;const t=Zt(e);return!isNaN(Number(t))}function vT(e){const t=Zt(e),n=Er(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const bT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wT=(e,t,n)=>{let r;const s=bT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ur(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const jT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ST={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ET={date:Ur({formats:jT,defaultWidth:"full"}),time:Ur({formats:ST,defaultWidth:"full"}),dateTime:Ur({formats:NT,defaultWidth:"full"})},CT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IT=(e,t,n,r)=>CT[e];function mn(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const kT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_T={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},MT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},DT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},RT={ordinalNumber:DT,era:mn({values:kT,defaultWidth:"wide"}),quarter:mn({values:AT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mn({values:TT,defaultWidth:"wide"}),day:mn({values:PT,defaultWidth:"wide"}),dayPeriod:mn({values:_T,defaultWidth:"wide",formattingValues:MT,defaultFormattingWidth:"wide"})};function hn(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?LT(l,h=>h.test(o)):OT(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function OT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function LT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Pg(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const FT=/^(\d+)(th|st|nd|rd)?/i,$T=/\d+/i,zT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VT={any:[/^b/i,/^(a|c)/i]},BT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qT={any:[/1/i,/2/i,/3/i,/4/i]},UT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},GT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},YT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},QT={ordinalNumber:Pg({matchPattern:FT,parsePattern:$T,valueCallback:e=>parseInt(e,10)}),era:hn({matchPatterns:zT,defaultMatchWidth:"wide",parsePatterns:VT,defaultParseWidth:"any"}),quarter:hn({matchPatterns:BT,defaultMatchWidth:"wide",parsePatterns:qT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:hn({matchPatterns:UT,defaultMatchWidth:"wide",parsePatterns:HT,defaultParseWidth:"any"}),day:hn({matchPatterns:GT,defaultMatchWidth:"wide",parsePatterns:WT,defaultParseWidth:"any"}),dayPeriod:hn({matchPatterns:YT,defaultMatchWidth:"any",parsePatterns:KT,defaultParseWidth:"any"})},XT={code:"en-US",formatDistance:wT,formatLong:ET,formatRelative:IT,localize:RT,match:QT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function JT(e){const t=Zt(e);return pT(t,vT(t))+1}function ZT(e){const t=Zt(e),n=+Gi(t)-+gT(t);return Math.round(n/Ag)+1}function _g(e,t){var u,h,m,f;const n=Zt(e),r=n.getFullYear(),s=ka(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Er(e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Vs(o,t),c=Er(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Vs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function eP(e,t){var l,c,d,u;const n=ka(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=_g(e,t),a=Er(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Vs(a,t)}function tP(e,t){const n=Zt(e),r=+Vs(n,t)-+eP(n,t);return Math.round(r/Ag)+1}function Pe(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const On={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Pe(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Pe(n+1,2)},d(e,t){return Pe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Pe(e.getHours()%12||12,t.length)},H(e,t){return Pe(e.getHours(),t.length)},m(e,t){return Pe(e.getMinutes(),t.length)},s(e,t){return Pe(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Pe(s,t.length)}},Rr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cd={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return On.y(e,t)},Y:function(e,t,n,r){const s=_g(e,r),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return Pe(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Pe(a,t.length)},R:function(e,t){const n=Tg(e);return Pe(n,t.length)},u:function(e,t){const n=e.getFullYear();return Pe(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Pe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Pe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return On.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Pe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=tP(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Pe(s,t.length)},I:function(e,t,n){const r=ZT(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Pe(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):On.d(e,t)},D:function(e,t,n){const r=JT(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pe(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Pe(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Pe(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Pe(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Rr.noon:r===0?s=Rr.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Rr.evening:r>=12?s=Rr.afternoon:r>=4?s=Rr.morning:s=Rr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return On.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):On.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):On.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):On.s(e,t)},S:function(e,t){return On.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return kd(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return kd(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Id(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Id(r,":");case"zzzz":default:return"GMT"+cr(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Pe(r,t.length)},T:function(e,t,n){const r=e.getTime();return Pe(r,t.length)}};function Id(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+Pe(a,2)}function kd(e,t){return e%60===0?(e>0?"-":"+")+Pe(Math.abs(e)/60,2):cr(e,t)}function cr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Pe(Math.trunc(r/60),2),a=Pe(r%60,2);return n+s+t+a}const Ad=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Mg=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Ad(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Ad(r,t)).replace("{{time}}",Mg(s,t))},rP={p:Mg,P:nP},sP=/^D+$/,iP=/^Y+$/,aP=["D","DD","YY","YYYY"];function oP(e){return sP.test(e)}function lP(e){return iP.test(e)}function cP(e,t,n){const r=uP(e,t,n);if(console.warn(r),aP.includes(e))throw new RangeError(r)}function uP(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hP=/^'([^]*?)'?$/,fP=/''/g,pP=/[a-zA-Z]/;function Aa(e,t,n){var u,h,m,f,x,g,y,j;const r=ka(),s=(n==null?void 0:n.locale)??r.locale??XT,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((j=(y=r.locale)==null?void 0:y.options)==null?void 0:j.weekStartsOn)??0,l=Zt(e);if(!yT(l))throw new RangeError("Invalid time value");let c=t.match(mP).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=rP[b];return w(v,s.formatLong)}return v}).join("").match(dP).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:gP(v)};if(Cd[b])return{isToken:!0,value:v};if(b.match(pP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lP(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&oP(b))&&cP(b,t,String(e));const w=Cd[b[0]];return w(l,b,s.localize,d)}).join("")}function gP(e){const t=e.match(hP);return t?t[1].replace(fP,"'"):e}const xP={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},yP=(e,t,n)=>{let r;const s=xP[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},vP={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},bP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},wP={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jP={date:Ur({formats:vP,defaultWidth:"full"}),time:Ur({formats:bP,defaultWidth:"full"}),dateTime:Ur({formats:wP,defaultWidth:"full"})},SP={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},NP=(e,t,n,r)=>SP[e],EP={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},CP={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},IP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},kP={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},AP={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},TP=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},PP=["MMM","MMMM"],_P={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&PP.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:TP,era:mn({values:EP,defaultWidth:"wide"}),quarter:mn({values:CP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mn({values:IP,defaultWidth:"wide"}),day:mn({values:kP,defaultWidth:"wide"}),dayPeriod:mn({values:AP,defaultWidth:"wide"})},MP=/^(\d+)(ième|ère|ème|er|e)?/i,DP=/\d+/i,RP={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},OP={any:[/^av/i,/^ap/i]},LP={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},FP={any:[/1/i,/2/i,/3/i,/4/i]},$P={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},zP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},VP={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},BP={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},qP={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},UP={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},HP={ordinalNumber:Pg({matchPattern:MP,parsePattern:DP,valueCallback:e=>parseInt(e)}),era:hn({matchPatterns:RP,defaultMatchWidth:"wide",parsePatterns:OP,defaultParseWidth:"any"}),quarter:hn({matchPatterns:LP,defaultMatchWidth:"wide",parsePatterns:FP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:hn({matchPatterns:$P,defaultMatchWidth:"wide",parsePatterns:zP,defaultParseWidth:"any"}),day:hn({matchPatterns:VP,defaultMatchWidth:"wide",parsePatterns:BP,defaultParseWidth:"any"}),dayPeriod:hn({matchPatterns:qP,defaultMatchWidth:"any",parsePatterns:UP,defaultParseWidth:"any"})},Ta={code:"fr",formatDistance:yP,formatLong:jP,formatRelative:NP,localize:_P,match:HP,options:{weekStartsOn:1,firstWeekContainsDate:4}},GP=({entryId:e,className:t})=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const l=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${e}.json`);if(l.ok){const c=await l.json();r((c==null?void 0:c.likes)||0)}else r(0)}catch(l){console.warn(`Erreur lors de la récupération des likes pour ${e}:`,l),r(0)}finally{a(!1)}})()},[e]),s?i.jsxs("div",{className:`flex items-center gap-1 text-gray-400 ${t}`,children:[i.jsx(In,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"..."})]}):i.jsxs("div",{className:`flex items-center gap-1 ${n&&n>0?"text-red-500":"text-gray-400"} ${t}`,children:[i.jsx(In,{className:`h-4 w-4 ${n&&n>0?"fill-current":""}`}),i.jsx("span",{className:"text-sm font-medium",children:n||0})]})},gi=He("CommunityManagement");function WP(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[s,a]=p.useState(null);p.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const u=await Fs();gi.info(`${u.length} contributions chargées`),t(u)}catch(u){gi.error("Erreur lors du chargement des contributions",u),ft({title:"Erreur",description:"Impossible de charger les contributions",variant:"destructive"})}finally{r(!1)}},l=async u=>{try{a(u),gi.info(`Suppression de la contribution ${u}`),await wN(u),t(h=>h.filter(m=>m.id!==u)),ft({title:"Succès",description:"Contribution supprimée avec succès",variant:"default"})}catch(h){gi.error(`Erreur lors de la suppression de la contribution ${u}`,h),ft({title:"Erreur",description:"Impossible de supprimer la contribution",variant:"destructive"})}finally{a(null)}},c=u=>{try{if(!u)return"Date inconnue";const h=new Date(u);return isNaN(h.getTime())?"Date invalide":Aa(h,"dd/MM/yyyy HH:mm",{locale:Ta})}catch{return"Date invalide"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Gestion des contributions communautaires"}),i.jsxs(U,{onClick:o,variant:"outline",size:"sm",disabled:n,children:[n?i.jsx(Ra,{className:"h-4 w-4 animate-spin mr-2"}):null,"Actualiser"]})]}),i.jsxs(us,{defaultValue:"all",children:[i.jsxs(Pr,{className:"mb-4 flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(Me,{value:"all",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Toutes"}),i.jsx(Me,{value:"photos",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Photos"}),i.jsx(Me,{value:"testimonials",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Témoignages"}),i.jsx(Me,{value:"pending",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"En attente"}),i.jsx(Me,{value:"archived",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Archivées"})]}),i.jsx(De,{value:"all",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(De,{value:"photos",children:d(e.filter(u=>{var h;return u.type==="photo"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(De,{value:"testimonials",children:d(e.filter(u=>{var h;return u.type==="testimonial"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(De,{value:"pending",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)==="pending"}),s,l)}),i.jsx(De,{value:"archived",children:i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Fonction de restauration supprimée avec le nouveau système Firebase"})})]})]});function d(u,h,m){return n?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(Ra,{className:"h-8 w-8 animate-spin text-gray-500"})}):u.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucune contribution trouvée"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(f=>{var x,g;return i.jsx(pe,{className:"overflow-hidden",children:i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:f.displayName||"Anonyme"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[f.type==="photo"?"Photo":"Témoignage"," • ",c(f.timestamp||f.createdAt)]}),i.jsx(GP,{entryId:f.id,className:"mt-1"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[((x=f.moderation)==null?void 0:x.status)==="approved"?i.jsx(Qx,{className:"h-5 w-5 text-green-500"}):((g=f.moderation)==null?void 0:g.status)==="rejected"?i.jsx(Xx,{className:"h-5 w-5 text-red-500"}):i.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"En attente"}),i.jsx(U,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>m(f.id),disabled:h===f.id,children:h===f.id?i.jsx(Ra,{className:"h-4 w-4 animate-spin"}):i.jsx(Jx,{className:"h-4 w-4"})})]})]}),f.type==="photo"&&f.imageUrl&&i.jsx("div",{className:"mt-3 relative pt-[56.25%]",children:i.jsx("img",{src:f.imageUrl,alt:`Contribution de ${f.displayName}`,className:"absolute top-0 left-0 w-full h-full object-cover rounded-md",onError:y=>{const j=typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"";y.currentTarget.src=`${j}/images/placeholder-image.jpg`}})}),f.type==="testimonial"&&i.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:f.content&&f.content.trim()?i.jsx("p",{className:"text-gray-700",children:f.content.trim()}):f.description&&f.description.trim()?i.jsx("p",{className:"text-gray-700",children:f.description.trim()}):i.jsx("p",{className:"text-gray-500 italic",children:"Contenu non disponible"})}),i.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[i.jsxs("p",{children:["ID: ",f.id]}),f.eventId&&i.jsxs("p",{children:["Événement: ",f.eventId]}),f.locationId&&i.jsxs("p",{children:["Lieu: ",f.locationId]})]})]})},f.id)})})}}const YP=()=>{const[e,t]=p.useState("test-entry-1"),[n,r]=p.useState(null),[s,a]=p.useState(null),[o,l]=p.useState("user-1"),{liked:c,total:d,loading:u,error:h,toggleLike:m,refresh:f}=cg(e),x=async()=>{console.log("🔄 Test de connexion Firebase...");const v=await EA();r(v)},g=async()=>{console.log("🔄 Récupération des stats...");const v=await lg();a(v)},y=()=>{const v=`test-entry-${Date.now()}`;t(v),console.log(`🔄 Changement d'entrée test vers: ${v}`)},j=()=>{const v=["user-1","user-2","user-3","user-4"],b=v.indexOf(o),w=v[(b+1)%v.length];l(w);const T=`session_${Date.now()}_${w}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("user-session-id",T),console.log(`👤 Changement d'utilisateur vers: ${w} (${T})`),setTimeout(()=>f(),100)};return i.jsxs("div",{style:{padding:"20px",border:"2px solid #007bff",borderRadius:"8px",margin:"20px",backgroundColor:"#f8f9fa"},children:[i.jsx("h2",{children:"🧪 Test Système de Likes - Étape 1"}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"1. Test de connexion Firebase"}),i.jsx("button",{onClick:x,style:{marginRight:"10px"},children:"Tester la connexion"}),i.jsxs("span",{children:["Status: ",n===null?"❓ Non testé":n?"✅ Connecté":"❌ Erreur"]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"2. Test du hook useLikes"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Utilisateur actuel:"})," ",i.jsx("span",{style:{color:"#007bff",fontWeight:"bold"},children:o})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entry ID:"})," ",e]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Loading:"})," ",u?"⏳ Chargement...":"✅ Chargé"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Liked:"})," ",c?"❤️ Liké":"🤍 Pas liké"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Total:"})," ",d," likes"]}),h&&i.jsxs("p",{style:{color:"red"},children:[i.jsx("strong",{children:"Erreur:"})," ",h]}),i.jsxs("div",{style:{marginTop:"10px"},children:[i.jsx("button",{onClick:m,disabled:u,style:{marginRight:"10px"},children:c?"💔 Retirer like":"❤️ Ajouter like"}),i.jsx("button",{onClick:f,disabled:u,style:{marginRight:"10px"},children:"🔄 Rafraîchir"}),i.jsx("button",{onClick:y,style:{marginRight:"10px"},children:"🆕 Nouvelle entrée test"}),i.jsx("button",{onClick:j,style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px"},children:"👤 Changer d'utilisateur"})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"3. Test des statistiques globales"}),i.jsx("button",{onClick:g,style:{marginRight:"10px"},children:"Récupérer les stats"}),s&&i.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Total likes:"})," ",s.total]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Likes aujourd'hui:"})," ",s.today]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entrée la plus populaire:"})," ",s.topEntry||"Aucune"]})]})]}),i.jsxs("div",{style:{backgroundColor:"#fff3cd",padding:"15px",borderRadius:"4px",border:"1px solid #ffeaa7"},children:[i.jsx("h4",{children:"📋 Checklist de validation Étape 1:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"✅ Types TypeScript créés"}),i.jsx("li",{children:"✅ Service likesService.ts créé"}),i.jsx("li",{children:"✅ Hook useLikes créé"}),i.jsx("li",{children:"🔄 Test de connexion Firebase"}),i.jsx("li",{children:"🔄 Test toggle like"}),i.jsx("li",{children:"🔄 Test temps réel (ouvrir 2 onglets)"}),i.jsx("li",{children:"🔄 Test persistance (rafraîchir la page)"})]}),i.jsx("p",{children:i.jsx("strong",{children:"Instructions:"})}),i.jsxs("ol",{children:[i.jsx("li",{children:'Cliquer sur "Tester la connexion" → doit afficher ✅'}),i.jsx("li",{children:'Cliquer sur "❤️ Ajouter like" → compteur doit augmenter'}),i.jsxs("li",{children:[i.jsx("strong",{children:"🆕 Test multi-utilisateur :"}),` Cliquer sur "👤 Changer d'utilisateur" → maintenant vous pouvez liker à nouveau !`]}),i.jsx("li",{children:"Ouvrir un 2ème onglet → les likes doivent se synchroniser"}),i.jsx("li",{children:"Rafraîchir la page → les likes doivent persister"})]})]})]})},KP=()=>{const[e,t]=p.useState(null),[n,r]=p.useState(!0),[s,a]=p.useState(null),[o,l]=p.useState(null),c=async()=>{try{r(!0),a(null);const d=await lg(),u=await Fs(),h=[];let m=0;for(const g of u)try{const y=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${g.id}.json`);if(y.ok){const j=await y.json(),v=(j==null?void 0:j.likes)||0;h.push({...g,likesCount:v}),m+=v}else h.push({...g,likesCount:0})}catch(y){console.warn(`Erreur lors de la récupération des likes pour ${g.id}:`,y),h.push({...g,likesCount:0})}const f=h.sort((g,y)=>y.likesCount-g.likesCount).slice(0,5),x=u.length>0?m/u.length:0;t({totalLikes:m,totalContributions:u.length,averageLikes:Math.round(x*10)/10,topContributions:f}),l(new Date)}catch(d){console.error("Erreur lors du chargement des statistiques:",d),a("Impossible de charger les statistiques")}finally{r(!1)}};return p.useEffect(()=>{c();const d=setInterval(()=>{console.log("🔄 Mise à jour automatique des statistiques likes"),c()},1e4);return()=>{console.log("🔇 Arrêt polling statistiques likes"),clearInterval(d)}},[]),n?i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center gap-2",children:[i.jsx(js,{className:"h-5 w-5"}),"Statistiques des Likes"]})}),i.jsx(Ae,{children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Chargement des statistiques..."})]})})]}):s?i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center gap-2 text-red-600",children:[i.jsx(js,{className:"h-5 w-5"}),"Erreur"]})}),i.jsxs(Ae,{children:[i.jsx("p",{className:"text-red-600 mb-4",children:s}),i.jsx(U,{onClick:c,variant:"outline",children:"Réessayer"})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2",children:[i.jsx(js,{className:"h-5 w-5 sm:h-6 sm:w-6"}),"Statistiques des Likes"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[o&&i.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Mis à jour : ",o.toLocaleTimeString()]}),i.jsx(U,{onClick:c,variant:"outline",size:"sm",children:"🔄 Actualiser"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(pe,{children:i.jsx(Ae,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total des Likes"}),i.jsx("p",{className:"text-3xl font-bold text-red-500",children:(e==null?void 0:e.totalLikes)||0})]}),i.jsx(In,{className:"h-8 w-8 text-red-500"})]})})}),i.jsx(pe,{children:i.jsx(Ae,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contributions"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(e==null?void 0:e.totalContributions)||0})]}),i.jsx(Tm,{className:"h-8 w-8 text-blue-600"})]})})}),i.jsx(pe,{children:i.jsx(Ae,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moyenne par contribution"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:(e==null?void 0:e.averageLikes)||0})]}),i.jsx(Ac,{className:"h-8 w-8 text-green-600"})]})})})]}),i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center gap-2",children:[i.jsx(Ac,{className:"h-5 w-5"}),"Top 5 des Contributions les Plus Likées"]})}),i.jsx(Ae,{children:e!=null&&e.topContributions&&e.topContributions.length>0?i.jsx("div",{className:"space-y-4",children:e.topContributions.map((d,u)=>i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-lg gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[i.jsx("div",{className:"flex items-center justify-center w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-blue-100 text-blue-600 font-bold text-sm",children:u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:d.displayName}),i.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:d.description||d.content||"Sans description"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.type==="photo"?"📷 Photo":"💬 Témoignage"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold self-end sm:self-center",children:[i.jsx(In,{className:"h-4 w-4 fill-current"}),i.jsx("span",{className:"text-lg",children:d.likesCount})]})]},d.id))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucune contribution avec des likes pour le moment"})})]}),i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsx(st,{className:"text-sm",children:"Informations Techniques"})}),i.jsx(Ae,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs sm:text-sm",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Base de données :"})," Firebase Realtime Database"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Synchronisation :"})," Temps réel (likes: 5s, stats: 10s)"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Prévention spam :"})," 1 like par session utilisateur"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Persistance :"})," Données sauvegardées automatiquement"]})]})]})})]})]})},Td="G-D6K43TLW5Y";function QP(e,t={}){try{window.gtag||Dg(),window.gtag?(window.gtag("event",e,{...t,custom_parameter_timestamp:new Date().toISOString(),debug_mode:!1}),console.log("📊 [DirectAnalytics] Gtag événement envoyé:",e,t)):console.warn("📊 [DirectAnalytics] Gtag non disponible")}catch(n){console.error("📊 [DirectAnalytics] Erreur gtag:",n)}}function Dg(){try{if(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("config",Td,{debug_mode:!1,send_page_view:!0}),!document.querySelector('script[src*="gtag/js"]')){const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${Td}`,document.head.appendChild(e)}console.log("📊 [DirectAnalytics] Gtag initialisé")}catch(e){console.error("📊 [DirectAnalytics] Erreur initialisation gtag:",e)}}class XP{constructor(){at(this,"isInitialized",!1);this.initialize()}initialize(){if(!this.isInitialized)try{Dg(),this.isInitialized=!0,console.log("📊 [DirectAnalytics] Service initialisé"),this.trackEvent("service_initialized",{timestamp:new Date().toISOString(),user_agent:navigator.userAgent.substring(0,50)})}catch(t){console.error("📊 [DirectAnalytics] Erreur initialisation:",t)}}async trackEvent(t,n={}){try{QP(t,n)}catch(r){console.error("📊 [DirectAnalytics] Erreur trackEvent:",r)}}trackPageView(t,n){this.trackEvent("page_view",{page_location:window.location.href,page_path:t,page_title:n})}trackInteraction(t,n,r={}){this.trackEvent("user_interaction",{interaction_type:t,element_name:n,...r})}async testRealTime(){const t=Math.random().toString(36).substring(7);return await this.trackEvent("realtime_test",{test_id:t,timestamp:new Date().toISOString(),test_type:"connectivity"}),console.log(`📊 [DirectAnalytics] Test temps réel envoyé (ID: ${t})`),t}}const JP=new XP;function ZP(){const[e,t]=p.useState(null),[n,r]=p.useState(!0),[s,a]=p.useState(null),o=p.useCallback(()=>({activeUsers:Math.floor(Math.random()*50)+1,pageViews:Math.floor(Math.random()*200)+50,events:Math.floor(Math.random()*100)+20,topPages:[{page:"/map",views:Math.floor(Math.random()*50)+20},{page:"/community",views:Math.floor(Math.random()*30)+10},{page:"/program",views:Math.floor(Math.random()*25)+5},{page:"/galleries",views:Math.floor(Math.random()*20)+3}].sort((u,h)=>h.views-u.views),lastUpdate:new Date().toISOString()}),[]),l=p.useCallback(async()=>{try{r(!0),a(null),await new Promise(h=>setTimeout(h,500));const u=o();t(u),console.log("📊 [useRealTimeStats] Stats mises à jour:",u)}catch(u){console.error("📊 [useRealTimeStats] Erreur chargement stats:",u),a(u instanceof Error?u.message:"Erreur de chargement")}finally{r(!1)}},[o]),c=p.useCallback(async()=>{try{const u=await JP.testRealTime(),h=setTimeout(()=>{t(m=>m?{...m,events:m.events+1,pageViews:m.pageViews+Math.floor(Math.random()*3),lastUpdate:new Date().toISOString()}:null)},1e3);return u}catch(u){throw console.error("📊 [useRealTimeStats] Erreur envoi test:",u),u}},[]),d=p.useCallback(async()=>{await l()},[l]);return p.useEffect(()=>{l();const u=setInterval(()=>{console.log("📊 [useRealTimeStats] Mise à jour automatique des stats"),l()},1e4);return()=>{console.log("📊 [useRealTimeStats] Arrêt polling stats"),clearInterval(u)}},[l]),{stats:e,loading:n,error:s,sendTestEvent:c,refresh:d}}const e_=()=>{const{stats:e,loading:t,error:n,sendTestEvent:r,refresh:s}=ZP(),a=async()=>{try{const o=await r();console.log(`📊 Événement de test envoyé (ID: ${o})`)}catch(o){console.error("📊 Erreur test événement:",o)}};return t&&!e?i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Statistiques Temps Réel"]})}),i.jsx(Ae,{children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Chargement des statistiques..."})]})})]}):n?i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"flex items-center gap-2 text-red-600",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Erreur"]})}),i.jsxs(Ae,{children:[i.jsx("p",{className:"text-red-600 mb-4",children:n}),i.jsx(U,{onClick:s,variant:"outline",children:"Réessayer"})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5 sm:h-6 sm:w-6"}),"Statistiques Temps Réel"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(U,{onClick:a,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[i.jsx(fl,{className:"h-4 w-4"}),"Test Événement"]}),i.jsxs(U,{onClick:s,variant:"outline",size:"sm",disabled:t,className:"flex items-center gap-2",children:[i.jsx(Pm,{className:`h-4 w-4 ${t?"animate-spin":""}`}),"Actualiser"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(pe,{children:i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Utilisateurs actifs"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:(e==null?void 0:e.activeUsers)||0})]}),i.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:i.jsx(Lr,{className:"h-6 w-6 text-green-600"})})]})})}),i.jsx(pe,{children:i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Pages vues"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(e==null?void 0:e.pageViews)||0})]}),i.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:i.jsx(Zx,{className:"h-6 w-6 text-blue-600"})})]})})}),i.jsx(pe,{children:i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Événements"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:(e==null?void 0:e.events)||0})]}),i.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:i.jsx(ey,{className:"h-6 w-6 text-purple-600"})})]})})})]}),i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsx(st,{className:"text-base",children:"Pages les plus visitées"})}),i.jsx(Ae,{children:i.jsx("div",{className:"space-y-3",children:e==null?void 0:e.topPages.map((o,l)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-sm font-medium",children:l+1}),i.jsx("span",{className:"font-medium",children:o.page})]}),i.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:[o.views," vues"]})]},o.page))})})]}),i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsxs(st,{className:"text-sm flex items-center gap-2",children:[i.jsx(Ii,{className:"h-4 w-4"}),"Informations Techniques"]})}),i.jsx(Ae,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs sm:text-sm",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Service :"})," Direct Analytics (sans SDK)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Mise à jour :"})," Temps réel (10s)"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Dernière MAJ :"})," ",e!=null&&e.lastUpdate?new Date(e.lastUpdate).toLocaleTimeString():"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Mode :"})," ","Production"]})]})]})})]})]})},t_="1.3.7",n_="Collectif Île Feydeau",r_=()=>{const e=t_,n=(l=>{const[c,d,u]=l.split(".").map(Number);return u>0?{type:"patch",color:"bg-blue-500 text-white",icon:"🐛"}:d>0?{type:"minor",color:"bg-green-500 text-white",icon:"✨"}:c>0?{type:"major",color:"bg-red-500 text-white",icon:"🚀"}:{type:"initial",color:"bg-gray-500 text-white",icon:"🎉"}})(e),r=new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),s=()=>{window.open("https://github.com/CollectifIleFeydeau/1Hall1Artiste/blob/main/CHANGELOG.md","_blank")},a=()=>{window.open("https://github.com/CollectifIleFeydeau/1Hall1Artiste","_blank")},o=window.location.hostname!=="localhost";return i.jsxs(pe,{className:"w-full max-w-md",children:[i.jsx(rt,{className:"pb-3",children:i.jsxs(st,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Cr,{className:"h-5 w-5"}),"Informations Version"]})}),i.jsxs(Ae,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Version actuelle"}),i.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${n.color}`,children:[n.icon," v",e]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type"}),i.jsx("span",{className:"text-sm capitalize",children:n.type})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Dernière mise à jour"}),i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx(pn,{className:"h-3 w-3"}),r]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Environnement"}),i.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${o?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o?"🌐 Production":"🔧 Développement"})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(U,{variant:"outline",size:"sm",onClick:s,className:"flex-1",children:"📝 Changelog"}),i.jsx(U,{variant:"outline",size:"sm",onClick:a,className:"flex-1",children:"🔗 Repository"})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("details",{className:"text-xs text-gray-500",children:[i.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Informations techniques"}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{children:["Nom: ",n_]}),i.jsx("div",{children:"Framework: React + Vite + TypeScript"}),i.jsx("div",{children:"UI: Tailwind CSS + Shadcn/ui"}),i.jsx("div",{children:"Déploiement: GitHub Pages"}),i.jsxs("div",{children:["Hostname: ",window.location.hostname]})]})]})})]})]})},s_=Ws("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i_({className:e,variant:t,...n}){return i.jsx("div",{className:re(s_({variant:t}),e),...n})}const Wi=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Wi.displayName="Textarea";const Bs=ay,qs=oy,ts=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(_m,{ref:r,className:re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(ty,{asChild:!0,children:i.jsx(dl,{className:"h-4 w-4 opacity-50"})})]}));ts.displayName=_m.displayName;const Rg=p.forwardRef(({className:e,...t},n)=>i.jsx(Mm,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Nm,{className:"h-4 w-4"})}));Rg.displayName=Mm.displayName;const Og=p.forwardRef(({className:e,...t},n)=>i.jsx(Dm,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(dl,{className:"h-4 w-4"})}));Og.displayName=Dm.displayName;const ns=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(ny,{children:i.jsxs(Rm,{ref:s,className:re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(Rg,{}),i.jsx(ry,{className:re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(Og,{})]})}));ns.displayName=Rm.displayName;const a_=p.forwardRef(({className:e,...t},n)=>i.jsx(Om,{ref:n,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));a_.displayName=Om.displayName;const vr=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Lm,{ref:r,className:re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(sy,{children:i.jsx(na,{className:"h-4 w-4"})})}),i.jsx(iy,{children:t})]}));vr.displayName=Lm.displayName;const o_=p.forwardRef(({className:e,...t},n)=>i.jsx(Fm,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));o_.displayName=Fm.displayName;var xc="Checkbox",[l_,vM]=ss(xc),[c_,u_]=l_(xc),Lg=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,f]=p.useState(null),x=tt(t,w=>f(w)),g=p.useRef(!1),y=m?u||!!m.closest("form"):!0,[j=!1,v]=ta({prop:s,defaultProp:a,onChange:d}),b=p.useRef(j);return p.useEffect(()=>{const w=m==null?void 0:m.form;if(w){const T=()=>v(b.current);return w.addEventListener("reset",T),()=>w.removeEventListener("reset",T)}},[m,v]),i.jsxs(c_,{scope:n,state:j,disabled:l,children:[i.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Kn(j)?"mixed":j,"aria-required":o,"data-state":zg(j),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:me(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:me(e.onClick,w=>{v(T=>Kn(T)?!0:!T),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&i.jsx(d_,{control:m,bubbles:!g.current,name:r,value:c,checked:j,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Kn(a)?!1:a})]})});Lg.displayName=xc;var Fg="CheckboxIndicator",$g=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=u_(Fg,n);return i.jsx(vn,{present:r||Kn(a.state)||a.state===!0,children:i.jsx(Je.span,{"data-state":zg(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});$g.displayName=Fg;var d_=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...a}=e,o=p.useRef(null),l=Cm(n),c=Em(t);p.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const x=new Event("click",{bubbles:r});u.indeterminate=Kn(n),f.call(u,Kn(n)?!1:n),u.dispatchEvent(x)}},[l,n,r]);const d=p.useRef(Kn(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Kn(e){return e==="indeterminate"}function zg(e){return Kn(e)?"indeterminate":e?"checked":"unchecked"}var Vg=Lg,m_=$g;const nl=p.forwardRef(({className:e,...t},n)=>i.jsx(Vg,{ref:n,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(m_,{className:re("flex items-center justify-center text-current"),children:i.jsx(na,{className:"h-4 w-4"})})}));nl.displayName=Vg.displayName;const ot=[];for(let e=0;e<256;++e)ot.push((e+256).toString(16).slice(1));function h_(e,t=0){return(ot[e[t+0]]+ot[e[t+1]]+ot[e[t+2]]+ot[e[t+3]]+"-"+ot[e[t+4]]+ot[e[t+5]]+"-"+ot[e[t+6]]+ot[e[t+7]]+"-"+ot[e[t+8]]+ot[e[t+9]]+"-"+ot[e[t+10]]+ot[e[t+11]]+ot[e[t+12]]+ot[e[t+13]]+ot[e[t+14]]+ot[e[t+15]]).toLowerCase()}let po;const f_=new Uint8Array(16);function p_(){if(!po){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");po=crypto.getRandomValues.bind(crypto)}return po(f_)}const g_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pd={randomUUID:g_};function _d(e,t,n){var s;if(Pd.randomUUID&&!t&&!e)return Pd.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??p_();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,h_(r)}const go=He("EventForm");function x_({onSuccess:e,editingEvent:t}){var v,b;const{locations:n}=fc(),{addEvent:r,updateEvent:s}=Js(),[a,o]=p.useState(t||{id:_d(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),[l,c]=p.useState({}),[d,u]=p.useState(!1),[h,m]=p.useState({text:"",type:""}),f=w=>{const{name:T,value:E}=w.target;o(P=>({...P,[T]:E})),l[T]&&c(P=>{const M={...P};return delete M[T],M})},x=(w,T)=>{if(o(E=>({...E,[w]:T})),w==="locationId"){const E=n.find(P=>P.id===T);E&&o(P=>({...P,locationName:E.name}))}l[w]&&c(E=>{const P={...E};return delete P[w],P})},g=(w,T)=>{o(E=>{const P=E.days||[];let M;return T?M=[...P,w]:M=P.filter(A=>A!==w),{...E,days:M}}),l.days&&c(E=>{const P={...E};return delete P.days,P})},y=()=>{var T,E,P;const w={};return(T=a.title)!=null&&T.trim()||(w.title="Le titre est obligatoire"),(E=a.artistName)!=null&&E.trim()||(w.artistName="Le nom de l'artiste est obligatoire"),(P=a.description)!=null&&P.trim()||(w.description="La description est obligatoire"),a.locationId||(w.locationId="Veuillez sélectionner un lieu"),(!a.days||a.days.length===0)&&(w.days="Veuillez sélectionner au moins un jour"),c(w),Object.keys(w).length===0},j=async w=>{if(w.preventDefault(),!y()){m({text:"Veuillez corriger les erreurs dans le formulaire",type:"error"});return}u(!0),m({text:"",type:""});try{go.info(`${t?"Mise à jour":"Création"} d'un événement`),go.debug("Données de l'événement",a);const T=a;let E;t?E=s(T):E=r(T),E.success?(m({text:`Événement ${t?"mis à jour":"créé"} avec succès`,type:"success"}),t||o({id:_d(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),e&&e()):m({text:`Erreur: ${E.error}`,type:"error"})}catch(T){go.error("Erreur lors de la soumission du formulaire",T),m({text:`Une erreur est survenue: ${T}`,type:"error"})}finally{u(!1)}};return i.jsxs(pe,{className:"w-full max-w-3xl mx-auto",children:[i.jsx(rt,{children:i.jsx(st,{className:"text-[#4a5d94]",children:t?"Modifier un événement":"Ajouter un nouvel événement"})}),i.jsx(Ae,{children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"title",children:"Titre de l'événement *"}),i.jsx(Jt,{id:"title",name:"title",value:a.title||"",onChange:f,placeholder:"Titre de l'événement",className:l.title?"border-red-500":""}),l.title&&i.jsx("p",{className:"text-red-500 text-sm",children:l.title})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"artistName",children:"Nom de l'artiste *"}),i.jsx(Jt,{id:"artistName",name:"artistName",value:a.artistName||"",onChange:f,placeholder:"Nom de l'artiste",className:l.artistName?"border-red-500":""}),l.artistName&&i.jsx("p",{className:"text-red-500 text-sm",children:l.artistName})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"type",children:"Type d'événement *"}),i.jsxs(Bs,{value:a.type,onValueChange:w=>x("type",w),children:[i.jsx(ts,{className:l.type?"border-red-500":"",children:i.jsx(qs,{placeholder:"Sélectionner un type"})}),i.jsxs(ns,{children:[i.jsx(vr,{value:"exposition",children:"Exposition"}),i.jsx(vr,{value:"concert",children:"Concert"})]})]}),l.type&&i.jsx("p",{className:"text-red-500 text-sm",children:l.type})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"description",children:"Description *"}),i.jsx(Wi,{id:"description",name:"description",value:a.description||"",onChange:f,placeholder:"Description de l'événement",className:`min-h-24 ${l.description?"border-red-500":""}`}),l.description&&i.jsx("p",{className:"text-red-500 text-sm",children:l.description})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"artistBio",children:"Biographie de l'artiste"}),i.jsx(Wi,{id:"artistBio",name:"artistBio",value:a.artistBio||"",onChange:f,placeholder:"Biographie de l'artiste",className:"min-h-24"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"time",children:"Horaires"}),i.jsx(Jt,{id:"time",name:"time",value:a.time||"",onChange:f,placeholder:"Ex: 10h00 - 18h00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{children:"Jours *"}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nl,{id:"samedi",checked:((v=a.days)==null?void 0:v.includes("samedi"))||!1,onCheckedChange:w=>g("samedi",w)}),i.jsx(Ge,{htmlFor:"samedi",className:"cursor-pointer",children:"Samedi"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nl,{id:"dimanche",checked:((b=a.days)==null?void 0:b.includes("dimanche"))||!1,onCheckedChange:w=>g("dimanche",w)}),i.jsx(Ge,{htmlFor:"dimanche",className:"cursor-pointer",children:"Dimanche"})]})]}),l.days&&i.jsx("p",{className:"text-red-500 text-sm",children:l.days})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"locationId",children:"Lieu *"}),i.jsxs(Bs,{value:a.locationId,onValueChange:w=>x("locationId",w),children:[i.jsx(ts,{className:l.locationId?"border-red-500":"",children:i.jsx(qs,{placeholder:"Sélectionner un lieu"})}),i.jsx(ns,{children:n.map(w=>i.jsx(vr,{value:w.id,children:w.name},w.id))})]}),l.locationId&&i.jsx("p",{className:"text-red-500 text-sm",children:l.locationId})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"image",children:"URL de l'image (optionnel)"}),i.jsx(Jt,{id:"image",name:"image",value:a.image||"",onChange:f,placeholder:"URL de l'image"})]}),i.jsxs(dg,{className:"flex justify-between px-0",children:[i.jsx(U,{type:"submit",disabled:d,className:"bg-[#4a5d94] hover:bg-[#3a4d84]",children:d?"En cours...":t?"Mettre à jour":"Ajouter l'événement"}),h.text&&i.jsx("p",{className:`text-sm ${h.type==="error"?"text-red-500":"text-green-500"}`,children:h.text})]})]})})]})}const y_=He("EventManagement");function v_(){const{events:e}=hc();Js();const[t,n]=p.useState(null),[r,s]=p.useState(!1),[a,o]=p.useState("all"),[l,c]=p.useState("all"),d=e.filter(g=>{const y=a==="all"||g.type===a,j=l==="all"||g.days.includes(l);return y&&j}),u=g=>{y_.info(`Modification de l'événement ${g.id}: ${g.title}`),n(g),s(!1)},h=g=>{ft({title:"Fonctionnalité à venir",description:"La suppression d'événements sera bientôt disponible.",variant:"default"})},m=()=>{n(null),s(!1),ft({title:"Succès",description:t?"Événement modifié avec succès":"Événement ajouté avec succès"})},f=()=>{n(null),s(!1)},x=g=>g==="concert"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800";return t||r?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#4a5d94]",children:t?"Modifier l'événement":"Ajouter un événement"}),i.jsx(U,{variant:"outline",onClick:f,className:"text-gray-600",children:"Annuler"})]}),i.jsx(x_,{editingEvent:t||void 0,onSuccess:m})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#4a5d94]",children:"Gestion des événements"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d.length," événement",d.length>1?"s":"",a!=="all"&&` (${a})`,l!=="all"&&` - ${l}`]})]}),i.jsx(U,{onClick:()=>s(!0),className:"bg-[#4a5d94] hover:bg-[#3a4d84]",children:"➕ Ajouter un événement"})]}),i.jsx(pe,{children:i.jsx(Ae,{className:"pt-6",children:i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Type:"}),i.jsx(U,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>o("all"),className:a==="all"?"bg-[#4a5d94]":"",children:"Tous"}),i.jsx(U,{variant:a==="exposition"?"default":"outline",size:"sm",onClick:()=>o("exposition"),className:a==="exposition"?"bg-[#4a5d94]":"",children:"Expositions"}),i.jsx(U,{variant:a==="concert"?"default":"outline",size:"sm",onClick:()=>o("concert"),className:a==="concert"?"bg-[#4a5d94]":"",children:"Concerts"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Jour:"}),i.jsx(U,{variant:l==="all"?"default":"outline",size:"sm",onClick:()=>c("all"),className:l==="all"?"bg-[#4a5d94]":"",children:"Tous"}),i.jsx(U,{variant:l==="samedi"?"default":"outline",size:"sm",onClick:()=>c("samedi"),className:l==="samedi"?"bg-[#4a5d94]":"",children:"Samedi"}),i.jsx(U,{variant:l==="dimanche"?"default":"outline",size:"sm",onClick:()=>c("dimanche"),className:l==="dimanche"?"bg-[#4a5d94]":"",children:"Dimanche"})]})]})})}),i.jsx("div",{className:"grid gap-4",children:d.length===0?i.jsx(pe,{children:i.jsxs(Ae,{className:"pt-6 text-center text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-4",children:"📅"}),i.jsx("p",{children:"Aucun événement trouvé avec ces filtres"})]})}):d.map(g=>i.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[i.jsx(rt,{className:"pb-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[i.jsx(st,{className:"text-lg text-[#4a5d94]",children:g.title}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x(g.type)}`,children:g.type}),i.jsx("div",{className:"flex gap-1",children:g.days.map(y=>i.jsx(i_,{variant:"outline",className:"text-xs",children:y==="samedi"?"Sam":"Dim"},y))})]}),i.jsx("p",{className:"text-gray-600 font-medium",children:g.artistName})]}),i.jsxs("div",{className:"flex gap-2 flex-col sm:flex-row",children:[i.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(g),className:"text-blue-600 hover:text-blue-700",children:"✏️ Modifier"}),i.jsx(U,{variant:"outline",size:"sm",onClick:()=>h(),className:"text-red-600 hover:text-red-700",children:"🗑️ Supprimer"})]})]})}),i.jsxs(Ae,{className:"pt-0",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx("span",{children:"🕐"}),i.jsx("span",{children:g.time||"Horaires non définis"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx("span",{children:"📍"}),i.jsx("span",{className:"truncate",children:g.locationName})]}),i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[i.jsx("span",{children:"🆔"}),i.jsxs("span",{children:["ID: ",g.id]})]})]}),g.artistName&&i.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("strong",{children:"Artiste:"})," ",g.artistName]})})]})]},g.id))})]})}const Ee=He("Admin");function b_(){Ee.info("Initialisation du composant Admin");const e=St(),{events:t}=hc(),{locations:n}=fc(),{updateEvent:r,updateLocation:s}=Js(),[a,o]=p.useState([]),[l,c]=p.useState(null),[d,u]=p.useState({x:0,y:0}),[h,m]=p.useState(!1),[f,x]=p.useState(!1);p.useEffect(()=>{sessionStorage.getItem("adminAuthenticated")==="true"&&x(!0)},[]),p.useEffect(()=>{Ee.info("Chargement initial des lieux"),Ee.debug("Données de lieux chargées",n),o(n)},[n]);const g=P=>{Ee.info(`Sélection du lieu ${P}`),c(P);const M=a.find(A=>A.id===P);M&&u({x:M.x,y:M.y})},y=P=>{Ee.info("Clic sur la carte");try{const M=Math.round(P.nativeEvent.offsetX),A=Math.round(P.nativeEvent.offsetY);Ee.info(`Coordonnées du clic: x=${M}, y=${A}`),u({x:M,y:A}),m(!0),v()}catch(M){Ee.error("Erreur lors du clic sur la carte",M)}},j=()=>{var P;Ee.info("Demande de mise à jour des coordonnées"),Ee.debug("État actuel",{activeLocation:l,coordinates:d,mapClicked:h});try{if(!l){Ee.warn("Tentative de mise à jour sans lieu sélectionné"),alert("Veuillez d'abord sélectionner un lieu");return}if(!h&&(!d.x||!d.y)){Ee.warn("Tentative de mise à jour avec des coordonnées invalides"),alert("Veuillez cliquer sur la carte pour définir les nouvelles coordonnées");return}const M=a.map(I=>I.id===l?(Ee.debug("Mise à jour des coordonnées pour",{id:I.id,name:I.name,oldX:I.x,oldY:I.y,newX:d.x,newY:d.y}),{...I,x:d.x,y:d.y}):I);o(M),m(!1),Ee.info("Mise à jour des coordonnées via le service de données"),Ee.debug("Nouvelles coordonnées",M);const A=n.find(I=>I.id===l);if(A){Ee.info(`Mise à jour des coordonnées dans le service de données pour ${A.name}`);const I={...A,x:d.x,y:d.y},k=s(I);if(k.success){Ee.debug("Coordonnées mises à jour dans le service de données",{id:I.id,name:I.name,oldX:A.x,oldY:A.y,newX:d.x,newY:d.y});const $=t.filter(W=>W.locationName===I.name);Ee.info(`Mise à jour de ${$.length} événements associés au lieu ${I.name}`),Ee.info(`${$.length} événements associés au lieu ${I.name} hériteront automatiquement des nouvelles coordonnées`),Ee.info(`Coordonnées mises à jour pour ${I.name} et ${$.length} événements associés`)}else Ee.error(`Erreur lors de la mise à jour du lieu ${A.id}`,k.error)}else Ee.warn(`Lieu avec ID ${l} non trouvé dans la liste globale des lieux`);const R=(P=a.find(I=>I.id===l))==null?void 0:P.name;Ee.info(`Confirmation de mise à jour pour ${R}`),alert(`Coordonnées mises à jour pour ${R}
X: ${d.x}, Y: ${d.y}

Les modifications ont été enregistrées avec succès.`)}catch(M){Ee.error("Erreur lors de la mise à jour des coordonnées",M),alert(`Erreur lors de la mise à jour des coordonnées: ${M}`)}},v=()=>{if(Ee.info("Test des coordonnées sur la carte"),!l){Ee.warn("Tentative de test sans lieu sélectionné"),alert("Veuillez d'abord sélectionner un lieu");return}const P=a.map(M=>{if(M.id===l){const A={...M,x:d.x,y:d.y};return Ee.debug("Mise à jour temporaire des coordonnées pour le test",{id:M.id,name:M.name,oldX:M.x,oldY:M.y,newX:d.x,newY:d.y}),A}return M});o(P),Ee.info("Coordonnées de test appliquées temporairement",d)},b=()=>{Ee.info("Exportation des coordonnées");try{const P=JSON.stringify(a,null,2),M=new Blob([P],{type:"application/json"}),A=URL.createObjectURL(M),R=document.createElement("a");R.href=A,R.download="locations.json",document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(A),Ee.info("Exportation des coordonnées réussie")}catch(P){Ee.error("Erreur lors de l'exportation des coordonnées",P),alert(`Erreur lors de l'exportation des coordonnées: ${P}`)}},w=()=>{x(!0),sessionStorage.setItem("adminAuthenticated","true")},T=()=>{localStorage.clear(),ft({title:"LocalStorage vidé",description:"Toutes les données locales ont été effacées.",variant:"destructive"}),Ee.info("LocalStorage vidé par l'administrateur"),setTimeout(()=>window.location.reload(),1500)},E=()=>{localStorage.removeItem("hasSeenOnboarding"),ft({title:"Onboarding réinitialisé",description:"L'onboarding s'affichera au prochain chargement de l'application."}),Ee.info("Onboarding réinitialisé par l'administrateur")};return f?i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(U,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Xn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs(us,{defaultValue:"coordinates",className:"w-full",children:[i.jsxs(Pr,{className:"w-full flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(Me,{value:"events",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Événements"}),i.jsx(Me,{value:"locations",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Lieux"}),i.jsx(Me,{value:"community",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Contributions"}),i.jsx(Me,{value:"likes-stats",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"👍 Likes"}),i.jsx(Me,{value:"analytics-stats",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"📊 Analytics"}),i.jsx(Me,{value:"likes-test",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"🧪 Test"}),i.jsx(Me,{value:"version",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"📦 Version"}),i.jsx(Me,{value:"import-export",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Import/Export"}),i.jsx(Me,{value:"reset",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Reset"})]}),i.jsx(De,{value:"locations",children:i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsx(st,{className:"text-[#4a5d94]",children:"Gestion des coordonnées"})}),i.jsx(Ae,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Lieux"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Sélectionnez un lieu pour modifier ses coordonnées"}),i.jsx("div",{className:"space-y-2",children:a.map(P=>i.jsx(U,{variant:l===P.id?"default":"outline",className:`w-full justify-start ${l===P.id?"bg-[#4a5d94]":""}`,onClick:()=>g(P.id),children:P.name},P.id))})]}),l&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Coordonnées"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Modifiez les coordonnées du lieu sélectionné"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[i.jsxs("div",{children:[i.jsx(Ge,{htmlFor:"new-x",children:"X"}),i.jsx(Jt,{id:"new-x",type:"number",value:d.x,onChange:P=>u({...d,x:P.target.value?parseInt(P.target.value):0})})]}),i.jsxs("div",{children:[i.jsx(Ge,{htmlFor:"new-y",children:"Y"}),i.jsx(Jt,{id:"new-y",type:"number",value:d.y,onChange:P=>u({...d,y:P.target.value?parseInt(P.target.value):0})})]})]}),i.jsx(U,{className:"w-full bg-[#4a5d94] mb-2",onClick:j,children:"Mettre à jour les coordonnées"}),i.jsx(U,{className:"w-full bg-[#ff7a45] mb-2",onClick:v,children:"Tester sur la carte"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Carte"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cliquez sur la carte pour définir la position du lieu sélectionné"}),i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsx("div",{className:"flex justify-center",children:i.jsx(df,{locations:a,activeLocation:l,onClick:y})})})]})]})})]})}),i.jsx(De,{value:"events",children:i.jsx(v_,{})}),i.jsx(De,{value:"community",className:"space-y-4",children:i.jsx(WP,{})}),i.jsx(De,{value:"likes-stats",className:"space-y-4",children:i.jsx(KP,{})}),i.jsx(De,{value:"analytics-stats",className:"space-y-4",children:i.jsx(e_,{})}),i.jsx(De,{value:"likes-test",className:"space-y-4",children:i.jsx(YP,{})}),i.jsx(De,{value:"version",className:"space-y-4",children:i.jsx("div",{className:"flex justify-center",children:i.jsx(r_,{})})}),i.jsx(De,{value:"import-export",children:i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsx(st,{className:"text-[#4a5d94]",children:"Import / Export des données"})}),i.jsxs(Ae,{children:[i.jsx(uT,{}),i.jsx("div",{className:"mt-4",children:i.jsx(U,{className:"w-full bg-[#4a5d94]",onClick:b,children:"Exporter les coordonnées"})})]})]})}),i.jsx(De,{value:"reset",className:"space-y-4",children:i.jsxs(pe,{children:[i.jsx(rt,{children:i.jsx(st,{className:"text-[#4a5d94]",children:"Réinitialisation des données"})}),i.jsx(Ae,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Réinitialisation du localStorage"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Attention : cette action effacera toutes les données locales de l'application, y compris les événements sauvegardés, les lieux visités et les préférences utilisateur."}),i.jsx(U,{onClick:T,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Vider le localStorage"})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Réinitialisation de l'onboarding"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Cette action réinitialisera uniquement l'onboarding. L'écran d'accueil s'affichera au prochain chargement de l'application."}),i.jsx(U,{onClick:E,className:"w-full bg-gray-800 hover:bg-gray-900 text-white",children:"Réinitialiser l'onboarding"})]})]})})]})})]})})]}):i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(U,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Xn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx(mT,{onLogin:w})]})}const xi=He("SavedEvents");function w_(){const e=St(),[t,n]=p.useState([]),[r,s]=p.useState(""),[a,o]=p.useState(""),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[g,y]=p.useState(!1),[j,v]=p.useState(!1),[b,w]=p.useState(!0);p.useEffect(()=>{n(ct()),w(!0),B.trackPageView("/saved","Événements enregistrés");const A=localStorage.getItem("celebrationsShown"),R=A?JSON.parse(A):{};ji(lt.FIRST_EVENT_SAVED)&&!R[lt.FIRST_EVENT_SAVED]&&(x(!0),R[lt.FIRST_EVENT_SAVED]=!0),ji(lt.MULTIPLE_EVENTS_SAVED)&&!R[lt.MULTIPLE_EVENTS_SAVED]&&(y(!0),R[lt.MULTIPLE_EVENTS_SAVED]=!0),ji(lt.NOTIFICATION_SET)&&!R[lt.NOTIFICATION_SET]&&(v(!0),R[lt.NOTIFICATION_SET]=!0),localStorage.setItem("celebrationsShown",JSON.stringify(R))},[]);const T=A=>{const R=xa(A);n(R),B.trackContentInteraction(ee.UNSAVE,"event",A,{source:"saved"})},E=A=>{if(!r||!a)return;const R=new Date(`${r}T${a}`),I=mS(A,R.toISOString());n(I),c(null),s(""),o(""),B.trackProgramInteraction(ee.EVENT_REMINDER,{event_id:A,reminder_at:R.toISOString(),source:"saved"})},P=async A=>{try{xi.info("Tentative d'ajout au calendrier",{eventId:A.id});const R=await dc(A);if(R.success)ft({title:"Ajout au calendrier",description:"L'événement a été ajouté à votre calendrier",variant:"default"}),xi.info("Ajout au calendrier réussi",{eventId:A.id}),B.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!0,source:"saved"});else{let I="Une erreur est survenue lors de l'ajout au calendrier";R.errorType===zs.NOT_SUPPORTED?I="L'ajout au calendrier n'est pas supporté sur cet appareil":R.errorType===zs.PERMISSION_DENIED&&(I="Permission refusée pour accéder au calendrier"),ft({title:"Erreur",description:I,variant:"destructive"}),xi.error("Erreur lors de l'ajout au calendrier",{eventId:A.id,errorType:R.errorType,errorMessage:R.errorMessage}),B.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!1,error_type:R.errorType,source:"saved"})}}catch(R){ft({title:"Erreur",description:"Une erreur inattendue est survenue",variant:"destructive"}),xi.error("Exception lors de l'ajout au calendrier",{error:R}),B.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:A.id,success:!1,exception:!0,source:"saved"})}},M=A=>{try{if(!A)return"Date inconnue";const R=new Date(A);return isNaN(R.getTime())?"Date invalide":Aa(R,"EEEE d MMMM yyyy",{locale:Ta})}catch(R){return console.warn("[SavedEvents] Invalid date string:",A,R),"Date invalide"}};return i.jsxs("div",{className:"min-h-screen bg-white pb-20",children:[i.jsx(wi,{trigger:f,message:Si(lt.FIRST_EVENT_SAVED),onComplete:()=>x(!1)}),i.jsx(wi,{trigger:g,message:Si(lt.MULTIPLE_EVENTS_SAVED),onComplete:()=>y(!1)}),i.jsx(wi,{trigger:j,message:Si(lt.NOTIFICATION_SET),onComplete:()=>v(!1)}),i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[i.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>{B.trackInteraction(ee.BACK,"button",{from:"saved_events"}),e("/")},children:[i.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"Événements enregistrés"}),i.jsx("div",{className:"w-20"})]}),t.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore sauvegardé d'événements."}),i.jsx(U,{className:"mt-4 bg-[#4a5d94]",onClick:()=>e("/program"),children:"Voir le programme"})]}):i.jsx("div",{className:"space-y-2",children:t.map(A=>i.jsxs(pe,{className:"border-[#e0ebff]",children:[i.jsx(rt,{className:"py-1 px-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(st,{className:"text-base font-medium",children:A.title}),i.jsxs("div",{className:"flex items-center",children:[!A.notificationTime&&i.jsx(U,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>c(A.id),children:i.jsx(Tc,{className:"h-3 w-3"})}),b&&i.jsx(U,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>P(A),title:"Ajouter au calendrier",children:i.jsx(pn,{className:"h-3 w-3"})}),i.jsx(U,{variant:"ghost",size:"sm",className:"text-red-500 h-7 w-7 p-0",onClick:()=>T(A.id),children:i.jsx(ly,{className:"h-3 w-3"})})]})]})}),i.jsx(Ae,{className:"py-1 px-3 pt-0",children:i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(pn,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:[A.days.map(R=>R==="samedi"?"Sa":"Di").join("/"),", ",A.time]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(kn,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:A.locationName})]}),i.jsxs(U,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[#4a5d94] hover:bg-[#e0ebff] text-xs flex items-center justify-center transition-all duration-200",onClick:()=>{m(!0),u(A),B.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:A.id,source:"saved"})},children:[i.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Détails"]})]}),A.notificationTime&&i.jsxs("div",{className:"flex items-center text-[#4a5d94]",children:[i.jsx(Tc,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:["Rappel: ",M(A.notificationTime)]})]}),l===A.id?i.jsxs("div",{className:"mt-2 p-2 bg-[#f0f5ff] rounded-md",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(Ge,{className:"text-xs mb-1 block",children:"Choisir un rappel"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(U,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const R=A.days[0],I=new Date,k=R==="samedi"?6:0;for(;I.getDay()!==k;)I.setDate(I.getDate()+1);const $=new Date(I);$.setDate($.getDate()-1),s($.toISOString().split("T")[0]),o("10:00"),E(A.id)},children:"1 jour avant"}),i.jsx(U,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const R=A.days[0],I=new Date,k=R==="samedi"?6:0;for(;I.getDay()!==k;)I.setDate(I.getDate()+1);const $=A.time.split("h");I.setHours(parseInt($[0]),parseInt($[1]||"0"),0);const W=new Date(I);W.setHours(W.getHours()-3),s(W.toISOString().split("T")[0]),o(`${W.getHours().toString().padStart(2,"0")}:${W.getMinutes().toString().padStart(2,"0")}`),E(A.id)},children:"3 heures avant"}),i.jsx(U,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const R=A.days[0],I=new Date,k=R==="samedi"?6:0;for(;I.getDay()!==k;)I.setDate(I.getDate()+1);s(I.toISOString().split("T")[0]),o("08:00"),E(A.id)},children:"Le matin même"}),i.jsx(U,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const R=A.days[0],I=new Date,k=R==="samedi"?6:0;for(;I.getDay()!==k;)I.setDate(I.getDate()+1);s(I.toISOString().split("T")[0]),o("10:00")},children:"Choix précis"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[i.jsxs("div",{children:[i.jsx(Ge,{htmlFor:`date-${A.id}`,className:"text-xs mb-1",children:"Date"}),i.jsx(Jt,{id:`date-${A.id}`,type:"date",className:"h-8 text-sm",value:r,onChange:R=>s(R.target.value)})]}),i.jsxs("div",{children:[i.jsx(Ge,{htmlFor:`time-${A.id}`,className:"text-xs mb-1",children:"Heure"}),i.jsx(Jt,{id:`time-${A.id}`,type:"time",className:"h-8 text-sm",value:a,onChange:R=>o(R.target.value)})]})]}),i.jsxs("div",{className:"flex space-x-2 mt-1",children:[i.jsx(U,{className:"flex-1 bg-[#4a5d94] h-8 text-xs",onClick:()=>E(A.id),children:"Définir"}),i.jsx(U,{variant:"outline",className:"flex-1 h-8 text-xs",onClick:()=>c(null),children:"Annuler"})]})]}):null]})})]},A.id))}),i.jsx(rr,{}),i.jsx(mc,{event:d,isOpen:h,onClose:()=>{m(!1),u(null)},source:"saved"})]})]})}const j_=p.createContext({userInteracted:!1,setUserInteracted:()=>{}}),S_=()=>p.useContext(j_);function Bg(){const e=Tn(),t=p.useRef(null);return p.useEffect(()=>{const n=e.pathname,r=document.title;Cw(n,r),t.current&&t.current!==n&&B.trackRouteChange(t.current,n),t.current=n},[e.pathname]),{trackEvent:(n,r,s)=>Iw(n,r,s),trackInteraction:(n,r,s)=>To(n,r,s),trackSwipe:(n,r,s,a)=>kw(n,r,s,a),trackFeatureUse:(n,r)=>Aw(n,r),trackContentInteraction:(n,r,s,a)=>B.trackContentInteraction(n,r,s,a),trackMediaInteraction:(n,r,s,a)=>B.trackMediaInteraction(n,r,s,a),trackMapInteraction:(n,r)=>B.trackMapInteraction(n,r),trackProgramInteraction:(n,r)=>B.trackProgramInteraction(n,r),trackCommunityInteraction:(n,r)=>B.trackCommunityInteraction(n,r),trackDonationInteraction:(n,r)=>B.trackDonationInteraction(n,r),trackOnboarding:(n,r)=>B.trackOnboarding(n,r),trackError:(n,r,s)=>B.trackError(n,r,s)}}function N_(){const e=St(),[t,n]=p.useState(0),[r,s]=p.useState(!1),{setUserInteracted:a}=S_(),o=Bg();p.useEffect(()=>{o.trackOnboarding(ee.ONBOARDING_START,{timestamp:new Date().toISOString()})},[]),p.useEffect(()=>{const g=l[t];o.trackOnboarding(ee.ONBOARDING_SLIDE_VIEW,{slide_index:t,slide_title:g.title,has_video:!!g.video})},[t]),p.useEffect(()=>{console.log("[Onboarding] Préparation de l'interaction utilisateur"),localStorage.setItem("userHasInteracted","true"),a(!0)},[a]);const l=[{title:"Bienvenue sur l'application Collectif Île Feydeau",description:["Découvrez le <strong>patrimoine unique</strong> de l'Île Feydeau à travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organisés par les artistes du collectif."],image:"intro-video-image.png",video:"/video/intro-video.mp4"},{title:"Bienvenue sur l'application Collectif Île Feydeau",description:["Découvrez le <strong>patrimoine unique</strong> de l'Île Feydeau à travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organisés par les artistes du collectif."],image:"/onboarding-image.webp"},{title:"Programme et horaires",description:["Consultez le <strong>programme complet</strong> des événements par jour.","Les <strong>horaires</strong> sont clairement indiqués pour chaque événement.","<strong>Filtrez</strong> par type d'événement : expositions ou concerts."],image:"/onboarding-image.webp"},{title:"Carte interactive",description:["<strong>Localisez</strong> tous les événements sur la <strong>carte</strong> de l'Île Feydeau.","<strong>Naviguez</strong> facilement entre les différents lieux.","<strong>Marquez</strong> les lieux que vous avez visités."],image:"/onboarding-image.webp"},{title:"Fonctionnalités pratiques",description:["<strong>Enregistrez</strong> vos événements favoris pour y accéder rapidement.","Configurez des <strong>rappels</strong> pour ne manquer aucun événement.","L'application fonctionne <strong>hors-ligne</strong> pour consulter le programme sans connexion."],image:"/onboarding-image.webp"}],c=()=>{console.log("[Onboarding] Interaction utilisateur via nextSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("left","button",!0,{current_slide:t,total_slides:l.length}),t<l.length-1&&n(t+1)},d=()=>{console.log("[Onboarding] Interaction utilisateur via prevSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("right","button",!0,{current_slide:t,total_slides:l.length}),t>0&&n(t-1)},u=()=>{if(r){console.log("[Onboarding] Navigation déjà en cours, ignoré");return}try{s(!0),console.log("[Onboarding] ===== Début de handleFinish ====="),console.log("[Onboarding] Avant localStorage.setItem - hasSeenOnboarding actuel:",localStorage.getItem("hasSeenOnboarding")),localStorage.setItem("hasSeenOnboarding","true"),console.log("[Onboarding] Après localStorage.setItem - hasSeenOnboarding:",localStorage.getItem("hasSeenOnboarding")),o.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:t+1,completion_time:new Date().toISOString()}),console.log("[Onboarding] URL actuelle avant navigation:",window.location.href),console.log("[Onboarding] Navigation vers la carte..."),e("/map",{replace:!0}),console.log("[Onboarding] navigate() appelé vers /map"),setTimeout(()=>{console.log("[Onboarding] URL après navigation (500ms):",window.location.href)},500)}catch(g){console.error("[Onboarding] Erreur lors de la finalisation de l'onboarding:",g),e("/map",{replace:!0})}finally{setTimeout(()=>s(!1),1e3)}},h=(g,y)=>{y.offset.x<-50&&t<l.length-1?(o.trackSwipe("left","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t+1)):y.offset.x>50&&t>0?(o.trackSwipe("right","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t-1)):o.trackSwipe(y.offset.x<0?"left":"right","gesture",!1,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)})},m=()=>{console.log("[Onboarding] Vidéo démarrée"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackMediaInteraction(ee.PLAY,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},f=()=>{console.log("[Onboarding] Vidéo mise en pause"),o.trackMediaInteraction(ee.PAUSE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},x=()=>{console.log("[Onboarding] Vidéo terminée"),o.trackMediaInteraction(ee.COMPLETE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})};return i.jsxs("div",{className:"flex flex-col h-screen bg-white relative overflow-hidden",children:[i.jsx("div",{className:"p-4 flex justify-end"}),i.jsx("div",{className:"absolute top-4 left-0 right-0 flex justify-center z-50",children:i.jsx("div",{className:"flex space-x-2",children:l.map((g,y)=>i.jsx("div",{className:`h-2 w-2 rounded-full ${y===t?"bg-[#ff7a45]":"bg-gray-300"}`},y))})}),i.jsx(je.div,{className:"absolute inset-0 z-10 pointer-events-auto touch-pan-x",drag:"x",dragConstraints:{left:0,right:0},onDragEnd:h,style:{touchAction:"pan-x"}}),i.jsx("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold text-center my-4 relative",children:l[t].title}),t===0?i.jsx("div",{className:"relative overflow-hidden bg-gray-200 mb-[80px] h-[50vh] md:h-[60vh] z-20",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:bt(l[t].video||""),"aria-label":`Vidéo: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative h-[30vh] md:h-[40vh] overflow-hidden bg-gray-200",children:l[t].video?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:bt(l[t].video||""),"aria-label":`Vidéo: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})}):i.jsx("div",{className:"absolute inset-0 bg-center bg-no-repeat bg-contain",style:{backgroundImage:`url(${bt(l[t].image)})`},"aria-label":l[t].title})}),i.jsx("div",{className:"flex-1 p-4 overflow-y-auto pb-[80px]",children:Array.isArray(l[t].description)?i.jsx("div",{className:"space-y-3",children:l[t].description.map((g,y)=>i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:g}},y))}):i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:l[t].description}})})]})]})}),i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 flex space-x-4 border-t border-gray-100 bg-white z-50",children:[t>0&&i.jsx(U,{onClick:d,className:"flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Précédent"}),i.jsx(U,{onClick:t===l.length-1?u:c,className:"flex-1 bg-[#4a5d94] text-white",children:t===l.length-1?"Commencer":"Suivant"})]})]})}function E_(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var yc="ScrollArea",[qg,bM]=ss(yc),[C_,Gt]=qg(yc),Ug=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState(null),[g,y]=p.useState(null),[j,v]=p.useState(0),[b,w]=p.useState(0),[T,E]=p.useState(!1),[P,M]=p.useState(!1),A=tt(t,I=>c(I)),R=cl(s);return i.jsx(C_,{scope:n,type:r,dir:R,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:T,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:M,onCornerWidthChange:v,onCornerHeightChange:w,children:i.jsx(Je.div,{dir:R,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});Ug.displayName=yc;var Hg="ScrollAreaViewport",Gg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:a,...o}=e,l=Gt(Hg,n),c=p.useRef(null),d=tt(t,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:O_({asChild:s,children:r},u=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});Gg.displayName=Hg;var bn="ScrollAreaScrollbar",vc=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Gt(bn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(I_,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(k_,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(Wg,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(bc,{...r,ref:t}):null});vc.displayName=bn;var I_=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Gt(bn,e.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(vn,{present:n||a,children:i.jsx(Wg,{"data-state":a?"visible":"hidden",...r,ref:t})})}),k_=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Gt(bn,e.__scopeScrollArea),a=e.orientation==="horizontal",o=_a(()=>c("SCROLL_END"),100),[l,c]=E_("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const d=s.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const f=d[u];h!==f&&(c("SCROLL"),o()),h=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(vn,{present:n||l!=="hidden",children:i.jsx(bc,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:me(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Wg=p.forwardRef((e,t)=>{const n=Gt(bn,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=p.useState(!1),l=e.orientation==="horizontal",c=_a(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return rs(n.viewport,c),rs(n.content,c),i.jsx(vn,{present:r||a,children:i.jsx(bc,{"data-state":a?"visible":"hidden",...s,ref:t})})}),bc=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Gt(bn,e.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Jg(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return D_(m,o.current,l,f)}return n==="horizontal"?i.jsx(A_,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,f=Md(m,l,s.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(T_,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,f=Md(m,l);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),A_=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Gt(bn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=tt(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Kg,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pa(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),ex(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ki(o.paddingLeft),paddingEnd:Ki(o.paddingRight)}})}})}),T_=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Gt(bn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=tt(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Kg,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pa(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),ex(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ki(o.paddingTop),paddingEnd:Ki(o.paddingBottom)}})}})}),[P_,Yg]=qg(bn),Kg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,f=Gt(bn,n),[x,g]=p.useState(null),y=tt(t,A=>g(A)),j=p.useRef(null),v=p.useRef(""),b=f.viewport,w=r.content-r.viewport,T=En(u),E=En(c),P=_a(h,10);function M(A){if(j.current){const R=A.clientX-j.current.left,I=A.clientY-j.current.top;d({x:R,y:I})}}return p.useEffect(()=>{const A=R=>{const I=R.target;(x==null?void 0:x.contains(I))&&T(R,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,x,w,T]),p.useEffect(E,[r,E]),rs(x,P),rs(f.content,P),i.jsx(P_,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:En(a),onThumbPointerUp:En(o),onThumbPositionChange:E,onThumbPointerDown:En(l),children:i.jsx(Je.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:me(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),j.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),M(A))}),onPointerMove:me(e.onPointerMove,M),onPointerUp:me(e.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),j.current=null})})})}),Yi="ScrollAreaThumb",Qg=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Yg(Yi,e.__scopeScrollArea);return i.jsx(vn,{present:n||s.hasThumb,children:i.jsx(__,{ref:t,...r})})}),__=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Gt(Yi,n),o=Yg(Yi,n),{onThumbPositionChange:l}=o,c=tt(t,h=>o.onThumbChange(h)),d=p.useRef(),u=_a(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(u(),!d.current){const f=R_(h,l);d.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,u,l]),i.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),x=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:me(e.onPointerUp,o.onThumbPointerUp)})});Qg.displayName=Yi;var wc="ScrollAreaCorner",Xg=p.forwardRef((e,t)=>{const n=Gt(wc,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(M_,{...e,ref:t}):null});Xg.displayName=wc;var M_=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Gt(wc,n),[a,o]=p.useState(0),[l,c]=p.useState(0),d=!!(a&&l);return rs(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),rs(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),d?i.jsx(Je.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ki(e){return e?parseInt(e,10):0}function Jg(e,t){const n=e/t;return isNaN(n)?0:n}function Pa(e){const t=Jg(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function D_(e,t,n,r="ltr"){const s=Pa(n),a=s/2,o=t||a,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return Zg([c,d],h)(e)}function Md(e,t,n="ltr"){const r=Pa(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],d=hl(e,c);return Zg([0,o],[0,l])(d)}function Zg(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ex(e,t){return e>0&&e<t}var R_=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function _a(e,t){const n=En(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function rs(e,t){const n=En(t);cy(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}function O_(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const s=p.Children.only(r);return p.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var tx=Ug,L_=Gg,F_=Xg;const nx=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(tx,{ref:r,className:re("relative overflow-hidden",e),...n,children:[i.jsx(L_,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(rx,{}),i.jsx(F_,{})]}));nx.displayName=tx.displayName;const rx=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(vc,{ref:r,orientation:t,className:re("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(Qg,{className:"relative flex-1 rounded-full bg-border"})}));rx.displayName=vc.displayName;const xo=He("LocationHistory");function $_(){var R;const e=St(),t=Tn(),[n,r]=p.useState({}),s=p.useRef(null),[a,o]=p.useState(!1),[l,c]=p.useState(0),[d,u]=p.useState(0),[h,m]=p.useState(!1),f=(R=t.state)==null?void 0:R.selectedLocationId,x=f?ht.find(I=>I.id===f):null;let g=[];const y=new Set,j=[...ht].sort((I,k)=>I.history&&!k.history?-1:!I.history&&k.history?1:0);for(const I of j)(I.history||I.historyRef)&&(y.has(I.name)||(g.push(I),y.add(I.name)));(x!=null&&x.history||x!=null&&x.historyRef)&&!g.some(I=>I.id===f)&&g.push(x);const[v,b]=p.useState(()=>{var I,k,$;return f&&ht.find(W=>W.id===f)&&((I=ht.find(W=>W.id===f))!=null&&I.history||(k=ht.find(W=>W.id===f))!=null&&k.historyRef)?f:(($=g[0])==null?void 0:$.id)||null}),w=g.find(I=>I.id===v),T=()=>{s.current&&(a?(s.current.pause(),w!=null&&w.id&&B.trackAudio("pause",w.id)):(s.current.play(),w!=null&&w.id&&B.trackAudio("play",w.id)),o(!a))},E=()=>{s.current&&u(s.current.currentTime)},P=()=>{s.current&&(c(s.current.duration),m(!1))},M=I=>{s.current&&(s.current.currentTime=I[0],u(I[0]),w!=null&&w.id&&B.trackAudio("seek",w.id,I[0]))},A=I=>{const k=Math.floor(I/60),$=Math.floor(I%60);return`${k}:${$<10?"0":""}${$}`};return p.useEffect(()=>{B.trackPageView("/history","Histoire des lieux")},[]),p.useEffect(()=>{if(w!=null&&w.image){const I=bt(w.image);cf(I)||(r(k=>({...k,[I]:!0})),yS(I).then(k=>{xo.info(`Préchargement de l'image ${k?"réussi":"échoué"}:`,{imagePath:I}),r($=>({...$,[I]:!1}))}).catch(k=>{xo.error("Erreur lors du préchargement de l'image:",{imagePath:I,error:k}),r($=>({...$,[I]:!1}))}))}w&&(B.trackBuildingView(w.id,w.name),B.trackBuildingHistoryView(w.id,"Histoire complète"))},[w]),p.useEffect(()=>{s.current&&a&&(s.current.pause(),o(!1)),u(0),c(0),w!=null&&w.audio&&m(!0)},[v]),i.jsxs("div",{className:"container max-w-md mx-auto px-4 pb-20 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(U,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:i.jsx(Xn,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Histoire des lieux"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2 text-[#4a5d94]",children:"Sélectionnez un lieu"}),i.jsxs(Bs,{value:v,onValueChange:I=>b(I),children:[i.jsx(ts,{className:"w-full border-[#4a5d94] text-[#4a5d94]",children:i.jsx(qs,{placeholder:"Choisir un lieu"})}),i.jsx(ns,{children:g.map(I=>i.jsx(vr,{value:I.id,children:I.name},I.id))})]})]}),w?i.jsxs(pe,{className:"shadow-md border-[#d8e3ff] mb-6",children:[i.jsx(rt,{className:"pb-6",children:i.jsxs("div",{className:"flex flex-col mb-2",children:[i.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[i.jsx(st,{className:"text-xl font-bold text-[#4a5d94] mr-2",children:w.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tr,{entryId:`location-${w.id}`,variant:"icon",showCount:!0}),i.jsxs(U,{variant:"outline",size:"sm",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white whitespace-nowrap px-2 py-1 text-xs flex-shrink-0",onClick:()=>{e("/map",{state:{highlightLocationId:w.id,fromHistory:!0}}),B.trackMapInteraction(ee.LOCATION_VIEW,{building_id:w.id,from:"history_page"})},children:[i.jsx(kn,{className:"h-3 w-3 mr-1"}),"Voir sur la carte"]})]})]}),i.jsx(pc,{className:"text-sm text-slate-600 mt-2 mb-2",children:w.description})]})}),i.jsxs(Ae,{children:[w.image&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"w-full h-64 rounded-md shadow-md border border-[#d8e3ff] relative",style:{backgroundImage:`url(${bt(w.image)})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[n[bt(w.image)]&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:i.jsx(Qn,{className:"h-8 w-8 animate-spin text-[#4a5d94]"})}),i.jsx("img",{src:bt(w.image),alt:`Photo historique de ${w.name}`,className:"hidden",onError:I=>{xo.error("Erreur de chargement de l'image:",{image:w.image,online:Rs()}),B.trackError(ee.RESOURCE_ERROR,"history_image_load_failed",{image:w.image,building_id:w.id,online:Rs()})}})]}),i.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["Photo de ",w.name]})]}),w.audio&&i.jsxs("div",{className:"mb-4 p-3 bg-[#f5f8ff] rounded-md border border-[#d8e3ff]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ra,{className:"h-4 w-4 text-[#4a5d94] mr-2"}),i.jsx("span",{className:"text-sm font-medium text-[#4a5d94]",children:"Écouter l'histoire"})]}),i.jsx(U,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:T,disabled:h,children:h?i.jsx(Qn,{className:"h-4 w-4 animate-spin text-[#4a5d94]"}):a?i.jsx(ml,{className:"h-4 w-4 text-[#4a5d94]"}):i.jsx(fl,{className:"h-4 w-4 text-[#4a5d94]"})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Hi,{value:[d],max:l||100,step:.1,onValueChange:M,disabled:h,className:"cursor-pointer"}),i.jsxs("div",{className:"flex justify-between text-xs text-[#4a5d94]",children:[i.jsx("span",{children:A(d)}),i.jsx("span",{children:A(l)})]})]}),i.jsx("audio",{ref:s,src:w.audio?window.location.hostname.includes("github.io")?`/1Hall1Artiste${w.audio}`:w.audio:"",onTimeUpdate:E,onLoadedMetadata:P,onEnded:()=>{o(!1),w!=null&&w.id&&B.trackAudio("pause",w.id)},onCanPlay:()=>m(!1),onError:I=>{console.error("Erreur de chargement audio:",I,w.audio),m(!1)},preload:"metadata",className:"hidden"})]}),i.jsx("h3",{className:"text-base font-bold text-[#4a5d94] mb-3 pb-1 border-b border-[#d8e3ff]",children:"Histoire complète"}),i.jsx(nx,{className:"h-[60vh] pr-4",children:i.jsx("div",{className:"space-y-4",children:(()=>{let I="";if(w.history)I=w.history;else if(w.historyRef){const k=ht.find($=>$.id===w.historyRef);k!=null&&k.history&&(I=k.history)}return I.split(`

`).map((k,$)=>k.trim()&&i.jsx("div",{className:"mb-4",children:k.startsWith("#")?i.jsx("h4",{className:"text-lg font-bold text-[#4a5d94] mb-2",children:k.replace("#","").trim()}):i.jsx("p",{className:"text-[#4a5d94] leading-relaxed text-sm",children:k})},$))})()})})]})]}):i.jsxs("div",{className:"text-center py-10 border rounded-lg border-dashed border-gray-300 bg-gray-50",children:[i.jsx(Cr,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 mb-1",children:"Sélectionnez un lieu"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Pour afficher son histoire complète"})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 mx-auto max-w-md px-4 z-10 space-y-2",children:[w&&i.jsxs(U,{className:"w-full border-[#ff7a45] text-[#ff7a45] hover:bg-[#fff5f0] text-sm min-h-[44px]",variant:"outline",onClick:()=>{w&&(NN(w),e("/community?tab=contribute"),B.trackCommunityInteraction(ee.CONTRIBUTION,{source:"history_page",building_id:w.id}))},children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),"Partager un souvenir de ce lieu"]}),i.jsxs(U,{className:"w-full bg-[#ff7a45] hover:bg-[#ff9d6e] text-white text-sm min-h-[44px]",onClick:()=>{e("/map",{state:{highlightLocationId:v,fromHistory:!0,timestamp:new Date().getTime()}})},children:[i.jsx(kn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]})]}),i.jsx(rr,{})]})}function z_(){const e=Bg(),[t,n]=p.useState("overview"),[r,s]=p.useState(!1),[a,o]=p.useState(null);p.useEffect(()=>{e.trackFeatureUse("analytics_dashboard",{tab:t})},[t,e]),p.useEffect(()=>{(async()=>{s(!0);try{await new Promise(d=>setTimeout(d,1e3)),o({overview:{totalUsers:1245,activeUsers:328,sessionsToday:156,averageSessionDuration:"3m 42s",bounceRate:"24%"},events:[{name:"onboarding_onboarding_start",count:523,users:523},{name:"onboarding_onboarding_complete",count:412,users:412},{name:"onboarding_onboarding_skip",count:111,users:111},{name:"interaction_swipe",count:2456,users:387},{name:"navigation_page_view",count:5678,users:523},{name:"media_play",count:345,users:289},{name:"media_complete",count:198,users:198},{name:"feature_feature_use",count:1234,users:456}],topPages:[{path:"/map",views:1245,users:423},{path:"/program",views:987,users:356},{path:"/community",views:756,users:289},{path:"/about",views:543,users:234},{path:"/saved",views:432,users:198}],userRetention:{day1:"76%",day7:"45%",day30:"28%"}})}catch(d){console.error("Erreur lors du chargement des données analytics:",d)}finally{s(!1)}})()},[]);const l=()=>{if(!a)return;e.trackFeatureUse("analytics_export",{format:"json"});const c=JSON.stringify(a,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`analytics-export-${new Date().toISOString().split("T")[0]}.json`,h=document.createElement("a");h.setAttribute("href",d),h.setAttribute("download",u),h.click()};return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Statistiques d'utilisation"}),i.jsxs(U,{variant:"outline",onClick:l,disabled:r||!a,children:[i.jsx(uy,{className:"mr-2 h-4 w-4"}),"Exporter"]})]}),i.jsxs(us,{value:t,onValueChange:n,className:"w-full",children:[i.jsxs(Pr,{className:"grid grid-cols-4 mb-6",children:[i.jsx(Me,{value:"overview",children:"Vue d'ensemble"}),i.jsx(Me,{value:"events",children:"Événements"}),i.jsx(Me,{value:"pages",children:"Pages"}),i.jsx(Me,{value:"users",children:"Utilisateurs"})]}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx(Qn,{className:"h-8 w-8 animate-spin text-gray-500"})}):a?i.jsxs(i.Fragment,{children:[i.jsxs(De,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs totaux"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.totalUsers})]}),i.jsx(js,{className:"h-8 w-8 text-blue-500"})]})}),i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs actifs"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.activeUsers})]}),i.jsx(Lr,{className:"h-8 w-8 text-green-500"})]})}),i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Sessions aujourd'hui"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.sessionsToday})]}),i.jsx(dy,{className:"h-8 w-8 text-purple-500"})]})}),i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Durée moyenne de session"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.averageSessionDuration})]}),i.jsx(my,{className:"h-8 w-8 text-orange-500"})]})}),i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Taux de rebond"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.bounceRate})]}),i.jsx(Lr,{className:"h-8 w-8 text-red-500"})]})}),i.jsx(pe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Rétention J+30"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.userRetention.day30})]}),i.jsx(js,{className:"h-8 w-8 text-indigo-500"})]})})]}),i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Rétention des utilisateurs"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 1"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day1})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 7"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day7})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 30"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day30})]})]})]})]}),i.jsx(De,{value:"events",className:"space-y-4",children:i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Événements les plus fréquents"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"Événement"}),i.jsx("th",{className:"text-right py-2",children:"Nombre"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.events.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.name}),i.jsx("td",{className:"text-right py-2",children:c.count}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsx(De,{value:"pages",className:"space-y-4",children:i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Pages les plus visitées"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"Page"}),i.jsx("th",{className:"text-right py-2",children:"Vues"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.topPages.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.path}),i.jsx("td",{className:"text-right py-2",children:c.views}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsxs(De,{value:"users",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Nouveaux vs. Récurrents"}),i.jsx("div",{className:"flex justify-center items-center h-48",children:i.jsxs("div",{className:"flex items-center space-x-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"68%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Nouveaux"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"32%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Récurrents"})]})]})})]}),i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Engagement"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Onboarding complété"}),i.jsx("span",{className:"text-sm font-medium",children:"78%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"78%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Vidéos visionnées"}),i.jsx("span",{className:"text-sm font-medium",children:"57%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"57%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Interactions carte"}),i.jsx("span",{className:"text-sm font-medium",children:"42%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"42%"}})})]})]})]})]}),i.jsxs(pe,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Parcours utilisateur"}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 md:gap-4",children:[i.jsx("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:"Onboarding"}),i.jsx("div",{className:"text-gray-400",children:"→"}),i.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"Carte"}),i.jsx("div",{className:"text-gray-400",children:"→"}),i.jsx("div",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:"Programme"}),i.jsx("div",{className:"text-gray-400",children:"→"}),i.jsx("div",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm",children:"Détails événement"})]})]})]})]}):i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"Impossible de charger les données d'analytics"})})]}),i.jsxs("div",{className:"mt-8 text-sm text-gray-500",children:[i.jsx("p",{children:"Note: Ces données sont simulées à des fins de démonstration. Dans une implémentation réelle, vous utiliseriez l'API Firebase Analytics pour récupérer les données réelles."}),i.jsxs("p",{className:"mt-1",children:["Pour accéder aux données réelles, consultez la ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"console Firebase"}),"."]})]})]})}const V_=({children:e,className:t=""})=>i.jsx("div",{className:`container mx-auto px-4 py-6 max-w-screen-lg ${t}`,children:e}),B_=({title:e,subtitle:t,children:n})=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),t&&i.jsx("p",{className:"text-gray-600",children:t}),n]});var Zs=e=>e.type==="checkbox",fr=e=>e instanceof Date,yt=e=>e==null;const sx=e=>typeof e=="object";var Xe=e=>!yt(e)&&!Array.isArray(e)&&sx(e)&&!fr(e),q_=e=>Xe(e)&&e.target?Zs(e.target)?e.target.checked:e.target.value:e,U_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,H_=(e,t)=>e.has(U_(t)),G_=e=>{const t=e.constructor&&e.constructor.prototype;return Xe(t)&&t.hasOwnProperty("isPrototypeOf")},jc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Rt(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(jc&&(e instanceof Blob||e instanceof FileList))&&(n||Xe(e)))if(t=n?[]:{},!n&&!G_(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Rt(e[r]));else return e;return t}var Ma=e=>Array.isArray(e)?e.filter(Boolean):[],Qe=e=>e===void 0,ne=(e,t,n)=>{if(!t||!Xe(e))return n;const r=Ma(t.split(/[,[\].]+?/)).reduce((s,a)=>yt(s)?s:s[a],e);return Qe(r)||r===e?Qe(e[t])?n:e[t]:r},an=e=>typeof e=="boolean",Sc=e=>/^\w*$/.test(e),ix=e=>Ma(e.replace(/["|']|\]/g,"").split(/\.|\[/)),qe=(e,t,n)=>{let r=-1;const s=Sc(t)?[t]:ix(t),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const d=e[l];c=Xe(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__")return;e[l]=c,e=e[l]}return e};const Dd={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},W_=F.createContext(null),Y_=()=>F.useContext(W_);var K_=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Xt.all&&(t._proxyFormState[o]=!r||Xt.all),e[o]}});return s},kt=e=>Xe(e)&&!Object.keys(e).length,Q_=(e,t,n,r)=>{n(e);const{name:s,...a}=e;return kt(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===Xt.all)},Ts=e=>Array.isArray(e)?e:[e],X_=(e,t,n)=>!e||!t||e===t||Ts(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function ax(e){const t=F.useRef(e);t.current=e,F.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var fn=e=>typeof e=="string",ox=(e,t,n,r,s)=>fn(e)?(r&&t.watch.add(e),ne(n,e,s)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),ne(n,a))):(r&&(t.watchAll=!0),n);function J_(e){const t=Y_(),{control:n=t.control,name:r,defaultValue:s,disabled:a,exact:o}=e||{},l=F.useRef(r);l.current=r,ax({disabled:a,subject:n._subjects.values,next:u=>{X_(l.current,u.name,o)&&d(Rt(ox(l.current,n._names,u.values||n._formValues,!1,s)))}});const[c,d]=F.useState(n._getWatch(r,s));return F.useEffect(()=>n._removeUnmounted()),c}var Z_=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Rd=e=>({isOnSubmit:!e||e===Xt.onSubmit,isOnBlur:e===Xt.onBlur,isOnChange:e===Xt.onChange,isOnAll:e===Xt.all,isOnTouch:e===Xt.onTouched}),Od=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ps=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const a=ne(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Ps(l,t))break}else if(Xe(l)&&Ps(l,t))break}}};var e2=(e,t,n)=>{const r=Ts(ne(e,n));return qe(r,"root",t[n]),qe(e,n,r),e},Nc=e=>e.type==="file",Cn=e=>typeof e=="function",Qi=e=>{if(!jc)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ci=e=>fn(e),Ec=e=>e.type==="radio",Xi=e=>e instanceof RegExp;const Ld={value:!1,isValid:!1},Fd={value:!0,isValid:!0};var lx=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Qe(e[0].attributes.value)?Qe(e[0].value)||e[0].value===""?Fd:{value:e[0].value,isValid:!0}:Fd:Ld}return Ld};const $d={isValid:!1,value:null};var cx=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,$d):$d;function zd(e,t,n="validate"){if(Ci(e)||Array.isArray(e)&&e.every(Ci)||an(e)&&!e)return{type:n,message:Ci(e)?e:"",ref:t}}var Or=e=>Xe(e)&&!Xi(e)?e:{value:e,message:""},Vd=async(e,t,n,r,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:m,validate:f,name:x,valueAsNumber:g,mount:y,disabled:j}=e._f,v=ne(t,x);if(!y||j)return{};const b=o?o[0]:a,w=k=>{r&&b.reportValidity&&(b.setCustomValidity(an(k)?"":k||""),b.reportValidity())},T={},E=Ec(a),P=Zs(a),M=E||P,A=(g||Nc(a))&&Qe(a.value)&&Qe(v)||Qi(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,R=Z_.bind(null,x,n,T),I=(k,$,W,Q=Sn.maxLength,J=Sn.minLength)=>{const te=k?$:W;T[x]={type:k?Q:J,message:te,ref:a,...R(k?Q:J,te)}};if(s?!Array.isArray(v)||!v.length:l&&(!M&&(A||yt(v))||an(v)&&!v||P&&!lx(o).isValid||E&&!cx(o).isValid)){const{value:k,message:$}=Ci(l)?{value:!!l,message:l}:Or(l);if(k&&(T[x]={type:Sn.required,message:$,ref:b,...R(Sn.required,$)},!n))return w($),T}if(!A&&(!yt(u)||!yt(h))){let k,$;const W=Or(h),Q=Or(u);if(!yt(v)&&!isNaN(v)){const J=a.valueAsNumber||v&&+v;yt(W.value)||(k=J>W.value),yt(Q.value)||($=J<Q.value)}else{const J=a.valueAsDate||new Date(v),te=S=>new Date(new Date().toDateString()+" "+S),D=a.type=="time",z=a.type=="week";fn(W.value)&&v&&(k=D?te(v)>te(W.value):z?v>W.value:J>new Date(W.value)),fn(Q.value)&&v&&($=D?te(v)<te(Q.value):z?v<Q.value:J<new Date(Q.value))}if((k||$)&&(I(!!k,W.message,Q.message,Sn.max,Sn.min),!n))return w(T[x].message),T}if((c||d)&&!A&&(fn(v)||s&&Array.isArray(v))){const k=Or(c),$=Or(d),W=!yt(k.value)&&v.length>+k.value,Q=!yt($.value)&&v.length<+$.value;if((W||Q)&&(I(W,k.message,$.message),!n))return w(T[x].message),T}if(m&&!A&&fn(v)){const{value:k,message:$}=Or(m);if(Xi(k)&&!v.match(k)&&(T[x]={type:Sn.pattern,message:$,ref:a,...R(Sn.pattern,$)},!n))return w($),T}if(f){if(Cn(f)){const k=await f(v,t),$=zd(k,b);if($&&(T[x]={...$,...R(Sn.validate,$.message)},!n))return w($.message),T}else if(Xe(f)){let k={};for(const $ in f){if(!kt(k)&&!n)break;const W=zd(await f[$](v,t),b,$);W&&(k={...W,...R($,W.message)},w(W.message),n&&(T[x]=k))}if(!kt(k)&&(T[x]={ref:b,...k},!n))return T}}return w(!0),T};function t2(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Qe(e)?r++:e[t[r++]];return e}function n2(e){for(const t in e)if(e.hasOwnProperty(t)&&!Qe(e[t]))return!1;return!0}function et(e,t){const n=Array.isArray(t)?t:Sc(t)?[t]:ix(t),r=n.length===1?e:t2(e,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Xe(r)&&kt(r)||Array.isArray(r)&&n2(r))&&et(e,n.slice(0,-1)),e}var yo=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}},rl=e=>yt(e)||!sx(e);function zn(e,t){if(rl(e)||rl(t))return e===t;if(fr(e)&&fr(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n){const a=e[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=t[s];if(fr(a)&&fr(o)||Xe(a)&&Xe(o)||Array.isArray(a)&&Array.isArray(o)?!zn(a,o):a!==o)return!1}}return!0}var ux=e=>e.type==="select-multiple",r2=e=>Ec(e)||Zs(e),vo=e=>Qi(e)&&e.isConnected,dx=e=>{for(const t in e)if(Cn(e[t]))return!0;return!1};function Ji(e,t={}){const n=Array.isArray(e);if(Xe(e)||n)for(const r in e)Array.isArray(e[r])||Xe(e[r])&&!dx(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ji(e[r],t[r])):yt(e[r])||(t[r]=!0);return t}function mx(e,t,n){const r=Array.isArray(e);if(Xe(e)||r)for(const s in e)Array.isArray(e[s])||Xe(e[s])&&!dx(e[s])?Qe(t)||rl(n[s])?n[s]=Array.isArray(e[s])?Ji(e[s],[]):{...Ji(e[s])}:mx(e[s],yt(t)?{}:t[s],n[s]):n[s]=!zn(e[s],t[s]);return n}var vs=(e,t)=>mx(e,t,Ji(t)),hx=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Qe(e)?e:t?e===""?NaN:e&&+e:n&&fn(e)?new Date(e):r?r(e):e;function bo(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return Nc(t)?t.files:Ec(t)?cx(e.refs).value:ux(t)?[...t.selectedOptions].map(({value:n})=>n):Zs(t)?lx(e.refs).value:hx(Qe(t.value)?e.ref.value:t.value,e)}var s2=(e,t,n,r)=>{const s={};for(const a of e){const o=ne(t,a);o&&qe(s,a,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},bs=e=>Qe(e)?e:Xi(e)?e.source:Xe(e)?Xi(e.value)?e.value.source:e.value:e;const Bd="AsyncFunction";var i2=e=>(!e||!e.validate)&&!!(Cn(e.validate)&&e.validate.constructor.name===Bd||Xe(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Bd)),a2=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function qd(e,t,n){const r=ne(e,n);if(r||Sc(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=ne(t,a),l=ne(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var o2=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,l2=(e,t)=>!Ma(ne(e,t)).length&&et(e,t);const c2={mode:Xt.onSubmit,reValidateMode:Xt.onChange,shouldFocusError:!0};function u2(e={}){let t={...c2,...e},n={submitCount:0,isDirty:!1,isLoading:Cn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Xe(t.defaultValues)||Xe(t.values)?Rt(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Rt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:yo(),array:yo(),state:yo()},m=Rd(t.mode),f=Rd(t.reValidateMode),x=t.criteriaMode===Xt.all,g=C=>_=>{clearTimeout(d),d=setTimeout(C,_)},y=async C=>{if(!e.disabled&&(u.isValid||C)){const _=t.resolver?kt((await M()).errors):await R(r,!0);_!==n.isValid&&h.state.next({isValid:_})}},j=(C,_)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((C||Array.from(l.mount)).forEach(L=>{L&&(_?qe(n.validatingFields,L,_):et(n.validatingFields,L))}),h.state.next({validatingFields:n.validatingFields,isValidating:!kt(n.validatingFields)}))},v=(C,_=[],L,Z,X=!0,H=!0)=>{if(Z&&L&&!e.disabled){if(o.action=!0,H&&Array.isArray(ne(r,C))){const ie=L(ne(r,C),Z.argA,Z.argB);X&&qe(r,C,ie)}if(H&&Array.isArray(ne(n.errors,C))){const ie=L(ne(n.errors,C),Z.argA,Z.argB);X&&qe(n.errors,C,ie),l2(n.errors,C)}if(u.touchedFields&&H&&Array.isArray(ne(n.touchedFields,C))){const ie=L(ne(n.touchedFields,C),Z.argA,Z.argB);X&&qe(n.touchedFields,C,ie)}u.dirtyFields&&(n.dirtyFields=vs(s,a)),h.state.next({name:C,isDirty:k(C,_),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else qe(a,C,_)},b=(C,_)=>{qe(n.errors,C,_),h.state.next({errors:n.errors})},w=C=>{n.errors=C,h.state.next({errors:n.errors,isValid:!1})},T=(C,_,L,Z)=>{const X=ne(r,C);if(X){const H=ne(a,C,Qe(L)?ne(s,C):L);Qe(H)||Z&&Z.defaultChecked||_?qe(a,C,_?H:bo(X._f)):Q(C,H),o.mount&&y()}},E=(C,_,L,Z,X)=>{let H=!1,ie=!1;const fe={name:C};if(!e.disabled){const O=!!(ne(r,C)&&ne(r,C)._f&&ne(r,C)._f.disabled);if(!L||Z){u.isDirty&&(ie=n.isDirty,n.isDirty=fe.isDirty=k(),H=ie!==fe.isDirty);const q=O||zn(ne(s,C),_);ie=!!(!O&&ne(n.dirtyFields,C)),q||O?et(n.dirtyFields,C):qe(n.dirtyFields,C,!0),fe.dirtyFields=n.dirtyFields,H=H||u.dirtyFields&&ie!==!q}if(L){const q=ne(n.touchedFields,C);q||(qe(n.touchedFields,C,L),fe.touchedFields=n.touchedFields,H=H||u.touchedFields&&q!==L)}H&&X&&h.state.next(fe)}return H?fe:{}},P=(C,_,L,Z)=>{const X=ne(n.errors,C),H=u.isValid&&an(_)&&n.isValid!==_;if(e.delayError&&L?(c=g(()=>b(C,L)),c(e.delayError)):(clearTimeout(d),c=null,L?qe(n.errors,C,L):et(n.errors,C)),(L?!zn(X,L):X)||!kt(Z)||H){const ie={...Z,...H&&an(_)?{isValid:_}:{},errors:n.errors,name:C};n={...n,...ie},h.state.next(ie)}},M=async C=>{j(C,!0);const _=await t.resolver(a,t.context,s2(C||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return j(C),_},A=async C=>{const{errors:_}=await M(C);if(C)for(const L of C){const Z=ne(_,L);Z?qe(n.errors,L,Z):et(n.errors,L)}else n.errors=_;return _},R=async(C,_,L={valid:!0})=>{for(const Z in C){const X=C[Z];if(X){const{_f:H,...ie}=X;if(H){const fe=l.array.has(H.name),O=X._f&&i2(X._f);O&&u.validatingFields&&j([Z],!0);const q=await Vd(X,a,x,t.shouldUseNativeValidation&&!_,fe);if(O&&u.validatingFields&&j([Z]),q[H.name]&&(L.valid=!1,_))break;!_&&(ne(q,H.name)?fe?e2(n.errors,q,H.name):qe(n.errors,H.name,q[H.name]):et(n.errors,H.name))}!kt(ie)&&await R(ie,_,L)}}return L.valid},I=()=>{for(const C of l.unMount){const _=ne(r,C);_&&(_._f.refs?_._f.refs.every(L=>!vo(L)):!vo(_._f.ref))&&ae(C)}l.unMount=new Set},k=(C,_)=>!e.disabled&&(C&&_&&qe(a,C,_),!zn(K(),s)),$=(C,_,L)=>ox(C,l,{...o.mount?a:Qe(_)?s:fn(C)?{[C]:_}:_},L,_),W=C=>Ma(ne(o.mount?a:s,C,e.shouldUnregister?ne(s,C,[]):[])),Q=(C,_,L={})=>{const Z=ne(r,C);let X=_;if(Z){const H=Z._f;H&&(!H.disabled&&qe(a,C,hx(_,H)),X=Qi(H.ref)&&yt(_)?"":_,ux(H.ref)?[...H.ref.options].forEach(ie=>ie.selected=X.includes(ie.value)):H.refs?Zs(H.ref)?H.refs.length>1?H.refs.forEach(ie=>(!ie.defaultChecked||!ie.disabled)&&(ie.checked=Array.isArray(X)?!!X.find(fe=>fe===ie.value):X===ie.value)):H.refs[0]&&(H.refs[0].checked=!!X):H.refs.forEach(ie=>ie.checked=ie.value===X):Nc(H.ref)?H.ref.value="":(H.ref.value=X,H.ref.type||h.values.next({name:C,values:{...a}})))}(L.shouldDirty||L.shouldTouch)&&E(C,X,L.shouldTouch,L.shouldDirty,!0),L.shouldValidate&&S(C)},J=(C,_,L)=>{for(const Z in _){const X=_[Z],H=`${C}.${Z}`,ie=ne(r,H);(l.array.has(C)||Xe(X)||ie&&!ie._f)&&!fr(X)?J(H,X,L):Q(H,X,L)}},te=(C,_,L={})=>{const Z=ne(r,C),X=l.array.has(C),H=Rt(_);qe(a,C,H),X?(h.array.next({name:C,values:{...a}}),(u.isDirty||u.dirtyFields)&&L.shouldDirty&&h.state.next({name:C,dirtyFields:vs(s,a),isDirty:k(C,H)})):Z&&!Z._f&&!yt(H)?J(C,H,L):Q(C,H,L),Od(C,l)&&h.state.next({...n}),h.values.next({name:o.mount?C:void 0,values:{...a}})},D=async C=>{o.mount=!0;const _=C.target;let L=_.name,Z=!0;const X=ne(r,L),H=()=>_.type?bo(X._f):q_(C),ie=fe=>{Z=Number.isNaN(fe)||fr(fe)&&isNaN(fe.getTime())||zn(fe,ne(a,L,fe))};if(X){let fe,O;const q=H(),le=C.type===Dd.BLUR||C.type===Dd.FOCUS_OUT,he=!a2(X._f)&&!t.resolver&&!ne(n.errors,L)&&!X._f.deps||o2(le,ne(n.touchedFields,L),n.isSubmitted,f,m),Se=Od(L,l,le);qe(a,L,q),le?(X._f.onBlur&&X._f.onBlur(C),c&&c(0)):X._f.onChange&&X._f.onChange(C);const it=E(L,q,le,!1),Vt=!kt(it)||Se;if(!le&&h.values.next({name:L,type:C.type,values:{...a}}),he)return u.isValid&&(e.mode==="onBlur"?le&&y():y()),Vt&&h.state.next({name:L,...Se?{}:it});if(!le&&Se&&h.state.next({...n}),t.resolver){const{errors:gt}=await M([L]);if(ie(q),Z){const wn=qd(n.errors,r,L),Bt=qd(gt,r,wn.name||L);fe=Bt.error,L=Bt.name,O=kt(gt)}}else j([L],!0),fe=(await Vd(X,a,x,t.shouldUseNativeValidation))[L],j([L]),ie(q),Z&&(fe?O=!1:u.isValid&&(O=await R(r,!0)));Z&&(X._f.deps&&S(X._f.deps),P(L,O,fe,it))}},z=(C,_)=>{if(ne(n.errors,_)&&C.focus)return C.focus(),1},S=async(C,_={})=>{let L,Z;const X=Ts(C);if(t.resolver){const H=await A(Qe(C)?C:X);L=kt(H),Z=C?!X.some(ie=>ne(H,ie)):L}else C?(Z=(await Promise.all(X.map(async H=>{const ie=ne(r,H);return await R(ie&&ie._f?{[H]:ie}:ie)}))).every(Boolean),!(!Z&&!n.isValid)&&y()):Z=L=await R(r);return h.state.next({...!fn(C)||u.isValid&&L!==n.isValid?{}:{name:C},...t.resolver||!C?{isValid:L}:{},errors:n.errors}),_.shouldFocus&&!Z&&Ps(r,z,C?X:l.mount),Z},K=C=>{const _={...o.mount?a:s};return Qe(C)?_:fn(C)?ne(_,C):C.map(L=>ne(_,L))},se=(C,_)=>({invalid:!!ne((_||n).errors,C),isDirty:!!ne((_||n).dirtyFields,C),error:ne((_||n).errors,C),isValidating:!!ne(n.validatingFields,C),isTouched:!!ne((_||n).touchedFields,C)}),N=C=>{C&&Ts(C).forEach(_=>et(n.errors,_)),h.state.next({errors:C?n.errors:{}})},oe=(C,_,L)=>{const Z=(ne(r,C,{_f:{}})._f||{}).ref,X=ne(n.errors,C)||{},{ref:H,message:ie,type:fe,...O}=X;qe(n.errors,C,{...O,..._,ref:Z}),h.state.next({name:C,errors:n.errors,isValid:!1}),L&&L.shouldFocus&&Z&&Z.focus&&Z.focus()},Re=(C,_)=>Cn(C)?h.values.subscribe({next:L=>C($(void 0,_),L)}):$(C,_,!0),ae=(C,_={})=>{for(const L of C?Ts(C):l.mount)l.mount.delete(L),l.array.delete(L),_.keepValue||(et(r,L),et(a,L)),!_.keepError&&et(n.errors,L),!_.keepDirty&&et(n.dirtyFields,L),!_.keepTouched&&et(n.touchedFields,L),!_.keepIsValidating&&et(n.validatingFields,L),!t.shouldUnregister&&!_.keepDefaultValue&&et(s,L);h.values.next({values:{...a}}),h.state.next({...n,..._.keepDirty?{isDirty:k()}:{}}),!_.keepIsValid&&y()},Te=({disabled:C,name:_,field:L,fields:Z,value:X})=>{if(an(C)&&o.mount||C){const H=C?void 0:Qe(X)?bo(L?L._f:ne(Z,_)._f):X;qe(a,_,H),E(_,H,!1,!1,!0)}},Ne=(C,_={})=>{let L=ne(r,C);const Z=an(_.disabled)||an(e.disabled);return qe(r,C,{...L||{},_f:{...L&&L._f?L._f:{ref:{name:C}},name:C,mount:!0,..._}}),l.mount.add(C),L?Te({field:L,disabled:an(_.disabled)?_.disabled:e.disabled,name:C,value:_.value}):T(C,!0,_.value),{...Z?{disabled:_.disabled||e.disabled}:{},...t.progressive?{required:!!_.required,min:bs(_.min),max:bs(_.max),minLength:bs(_.minLength),maxLength:bs(_.maxLength),pattern:bs(_.pattern)}:{},name:C,onChange:D,onBlur:D,ref:X=>{if(X){Ne(C,_),L=ne(r,C);const H=Qe(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,ie=r2(H),fe=L._f.refs||[];if(ie?fe.find(O=>O===H):H===L._f.ref)return;qe(r,C,{_f:{...L._f,...ie?{refs:[...fe.filter(vo),H,...Array.isArray(ne(s,C))?[{}]:[]],ref:{type:H.type,name:C}}:{ref:H}}}),T(C,!1,void 0,H)}else L=ne(r,C,{}),L._f&&(L._f.mount=!1),(t.shouldUnregister||_.shouldUnregister)&&!(H_(l.array,C)&&o.action)&&l.unMount.add(C)}}},_e=()=>t.shouldFocusError&&Ps(r,z,l.mount),G=C=>{an(C)&&(h.state.next({disabled:C}),Ps(r,(_,L)=>{const Z=ne(r,L);Z&&(_.disabled=Z._f.disabled||C,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(X=>{X.disabled=Z._f.disabled||C}))},0,!1))},ce=(C,_)=>async L=>{let Z;L&&(L.preventDefault&&L.preventDefault(),L.persist&&L.persist());let X=Rt(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:H,values:ie}=await M();n.errors=H,X=ie}else await R(r);if(et(n.errors,"root"),kt(n.errors)){h.state.next({errors:{}});try{await C(X,L)}catch(H){Z=H}}else _&&await _({...n.errors},L),_e(),setTimeout(_e);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:kt(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},ge=(C,_={})=>{ne(r,C)&&(Qe(_.defaultValue)?te(C,Rt(ne(s,C))):(te(C,_.defaultValue),qe(s,C,Rt(_.defaultValue))),_.keepTouched||et(n.touchedFields,C),_.keepDirty||(et(n.dirtyFields,C),n.isDirty=_.defaultValue?k(C,Rt(ne(s,C))):k()),_.keepError||(et(n.errors,C),u.isValid&&y()),h.state.next({...n}))},ze=(C,_={})=>{const L=C?Rt(C):s,Z=Rt(L),X=kt(C),H=X?s:Z;if(_.keepDefaultValues||(s=L),!_.keepValues){if(_.keepDirtyValues){const ie=new Set([...l.mount,...Object.keys(vs(s,a))]);for(const fe of Array.from(ie))ne(n.dirtyFields,fe)?qe(H,fe,ne(a,fe)):te(fe,ne(H,fe))}else{if(jc&&Qe(C))for(const ie of l.mount){const fe=ne(r,ie);if(fe&&fe._f){const O=Array.isArray(fe._f.refs)?fe._f.refs[0]:fe._f.ref;if(Qi(O)){const q=O.closest("form");if(q){q.reset();break}}}}r={}}a=e.shouldUnregister?_.keepDefaultValues?Rt(s):{}:Rt(H),h.array.next({values:{...H}}),h.values.next({values:{...H}})}l={mount:_.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!_.keepIsValid||!!_.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:_.keepSubmitCount?n.submitCount:0,isDirty:X?!1:_.keepDirty?n.isDirty:!!(_.keepDefaultValues&&!zn(C,s)),isSubmitted:_.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:_.keepDirtyValues?_.keepDefaultValues&&a?vs(s,a):n.dirtyFields:_.keepDefaultValues&&C?vs(s,C):_.keepDirty?n.dirtyFields:{},touchedFields:_.keepTouched?n.touchedFields:{},errors:_.keepErrors?n.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Et=(C,_)=>ze(Cn(C)?C(a):C,_);return{control:{register:Ne,unregister:ae,getFieldState:se,handleSubmit:ce,setError:oe,_executeSchema:M,_getWatch:$,_getDirty:k,_updateValid:y,_removeUnmounted:I,_updateFieldArray:v,_updateDisabledField:Te,_getFieldArray:W,_reset:ze,_resetDefaultValues:()=>Cn(t.defaultValues)&&t.defaultValues().then(C=>{Et(C,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:C=>{n={...n,...C}},_disableForm:G,_subjects:h,_proxyFormState:u,_setErrors:w,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(C){o=C},get _defaultValues(){return s},get _names(){return l},set _names(C){l=C},get _formState(){return n},set _formState(C){n=C},get _options(){return t},set _options(C){t={...t,...C}}},trigger:S,register:Ne,handleSubmit:ce,watch:Re,setValue:te,getValues:K,reset:Et,resetField:ge,clearErrors:N,unregister:ae,setError:oe,setFocus:(C,_={})=>{const L=ne(r,C),Z=L&&L._f;if(Z){const X=Z.refs?Z.refs[0]:Z.ref;X.focus&&(X.focus(),_.shouldSelect&&X.select())}},getFieldState:se}}function d2(e={}){const t=F.useRef(),n=F.useRef(),[r,s]=F.useState({isDirty:!1,isValidating:!1,isLoading:Cn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Cn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...u2(e),formState:r});const a=t.current.control;return a._options=e,ax({subject:a._subjects.state,next:o=>{Q_(o,a._proxyFormState,a._updateFormState)&&s({...a._formState})}}),F.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),F.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),F.useEffect(()=>{e.values&&!zn(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,s(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),F.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),F.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),F.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),F.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[r]),t.current.formState=K_(r,a),t.current}const m2=Ws("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sl=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:re(m2({variant:t}),e),...n}));sl.displayName="Alert";const h2=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:re("mb-1 font-medium leading-none tracking-tight",e),...t}));h2.displayName="AlertTitle";const il=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:re("text-sm [&_p]:leading-relaxed",e),...t}));il.displayName="AlertDescription";function f2(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:f,...x}=h,g=(m==null?void 0:m[e][c])||l,y=p.useMemo(()=>x,Object.values(x));return i.jsx(g.Provider,{value:y,children:f})}function u(h,m){const f=(m==null?void 0:m[e][c])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const s=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,p2(s,...t)]}function p2(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var Cc="Progress",Ic=100,[g2,wM]=f2(Cc),[x2,y2]=g2(Cc),fx=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=v2,...o}=e;(s||s===0)&&!Ud(s)&&console.error(b2(`${s}`,"Progress"));const l=Ud(s)?s:Ic;r!==null&&!Hd(r,l)&&console.error(w2(`${r}`,"Progress"));const c=Hd(r,l)?r:null,d=Zi(c)?a(c,l):void 0;return i.jsx(x2,{scope:n,value:c,max:l,children:i.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Zi(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":xx(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});fx.displayName=Cc;var px="ProgressIndicator",gx=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=y2(px,n);return i.jsx(Je.div,{"data-state":xx(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});gx.displayName=px;function v2(e,t){return`${Math.round(e/t*100)}%`}function xx(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Zi(e){return typeof e=="number"}function Ud(e){return Zi(e)&&!isNaN(e)&&e>0}function Hd(e,t){return Zi(e)&&!isNaN(e)&&e<=t&&e>=0}function b2(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ic}\`.`}function w2(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ic} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var yx=fx,j2=gx;const vx=p.forwardRef(({className:e,value:t,...n},r)=>i.jsx(yx,{ref:r,className:re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(j2,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));vx.displayName=yx.displayName;const S2=async(e,t={})=>{const{maxWidth:n=1920,maxHeight:r=1080,quality:s=.8,format:a="jpeg",maxSizeKB:o=2048}=t;return new Promise((l,c)=>{const d=new Image,u=document.createElement("canvas"),h=u.getContext("2d");if(!h){c(new Error("Impossible de créer le contexte Canvas"));return}d.onload=()=>{const{width:m,height:f}=N2(d.width,d.height,n,r);u.width=m,u.height=f,h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(d,0,0,m,f);const x=`image/${a}`;u.toBlob(async g=>{if(!g){c(new Error("Échec de la compression"));return}let y=g;g.size>o*1024&&a!=="png"&&(y=await E2(u,x,o*1024,s));const v={file:new File([y],`compressed_${e.name.replace(/\.[^/.]+$/,"")}.${a}`,{type:x}),originalSize:e.size,compressedSize:y.size,compressionRatio:Math.round((1-y.size/e.size)*100),width:m,height:f};l(v)},x,s)},d.onerror=()=>{c(new Error("Impossible de charger l'image"))},d.src=URL.createObjectURL(e)})},N2=(e,t,n,r)=>{let{width:s,height:a}={width:e,height:t};if(s<=n&&a<=r)return{width:s,height:a};const o=n/s,l=r/a,c=Math.min(o,l);return{width:Math.round(s*c),height:Math.round(a*c)}},E2=async(e,t,n,r)=>{let s=r,a=null;for(;s>.1&&(a=await new Promise(o=>{e.toBlob(o,t,s)}),!(a&&a.size<=n));)s-=.1;return a||new Blob},C2=e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>50*1024*1024?{valid:!1,error:"Fichier trop volumineux. Maximum 50MB."}:{valid:!0}:{valid:!1,error:"Format non supporté. Utilisez JPG, PNG ou WebP."},wo=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,r)).toFixed(1))} ${n[r]}`};function I2(e,t){let n;const r=(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)};return r.cancel=()=>{clearTimeout(n)},r}const k2=({key:e,data:t,delay:n=1e3,enabled:r=!0})=>{const s=p.useRef(null),a=c=>{try{const d=JSON.stringify({data:c,timestamp:Date.now(),version:"1.0"});localStorage.setItem(`draft_${e}`,d),console.log(`[AutoSave] Brouillon sauvegardé: ${e}`)}catch(d){console.error(`[AutoSave] Erreur sauvegarde ${e}:`,d)}},o=()=>{try{const c=localStorage.getItem(`draft_${e}`);if(!c)return null;const d=JSON.parse(c),u=24*60*60*1e3;return Date.now()-d.timestamp>u?(localStorage.removeItem(`draft_${e}`),null):(console.log(`[AutoSave] Brouillon récupéré: ${e}`),d.data)}catch(c){return console.error(`[AutoSave] Erreur récupération ${e}:`,c),null}},l=()=>{try{localStorage.removeItem(`draft_${e}`),console.log(`[AutoSave] Brouillon supprimé: ${e}`)}catch(c){console.error(`[AutoSave] Erreur suppression ${e}:`,c)}};return p.useEffect(()=>(s.current=I2(a,n),()=>{s.current&&s.current.cancel()}),[n]),p.useEffect(()=>{var d;!r||!t||typeof t=="object"&&Object.keys(t).length===0||(d=s.current)==null||d.call(s,t)},[t,r]),{loadDraft:o,clearDraft:l,hasDraft:()=>{try{return localStorage.getItem(`draft_${e}`)!==null}catch{return!1}}}},A2=({onSubmit:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState(!1),[a,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(""),[h,m]=p.useState(""),[f,x]=p.useState(!1),[g,y]=p.useState(0),[j,v]=p.useState(null),[b,w]=p.useState(!1),T=p.useRef(null),{register:E,handleSubmit:P,reset:M,setValue:A,formState:{errors:R},control:I}=d2(),k=J_({control:I}),{loadDraft:$,clearDraft:W,hasDraft:Q}=k2({key:"contribution_form",data:{...k,selectedEventId:d,selectedLocationId:h,imagePreview:a?"has_image":null},delay:2e3,enabled:!r});p.useEffect(()=>{$()&&Q()&&w(!0)},[$,Q]),p.useEffect(()=>{const D=Sp();D&&(c(D),console.log("[ContributionForm] Contexte reçu:",D),D.type==="event"?(A("eventId",D.id),u(D.id),console.log("[ContributionForm] Contexte événement défini:",D.id),console.log("[ContributionForm] Liste des événements disponibles:",zt.map(z=>z.id)),console.log("[ContributionForm] L'ID de l'événement est-il dans la liste ?",zt.some(z=>z.id===D.id)),D.locationId&&(A("locationId",D.locationId),m(D.locationId),console.log("[ContributionForm] Lieu associé à l'événement pré-rempli:",D.locationId),console.log("[ContributionForm] Le lieu associé est-il dans la liste ?",ht.some(z=>z.id===D.locationId)))):D.type==="location"&&(A("locationId",D.id),m(D.id),console.log("[ContributionForm] Contexte lieu défini:",D.id),console.log("[ContributionForm] Liste des lieux disponibles:",ht.map(S=>S.id)),console.log("[ContributionForm] L'ID du lieu est-il dans la liste ?",ht.some(S=>S.id===D.id)),ht.some(S=>S.id===D.id)||console.warn("[ContributionForm] ATTENTION: L'ID du lieu dans le contexte ne correspond à aucun lieu disponible dans la liste déroulante"))),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"open_form"})},[A]);const J=async D=>{var z,S;console.log("🔥 [handleImageChange] FONCTION APPELÉE !",(z=D.target.files)==null?void 0:z.length,"fichier(s)");try{const K=(S=D.target.files)==null?void 0:S[0];if(!K)return;const se=C2(K);if(!se.valid){alert(se.error);return}console.log("[ContributionForm] Début compression:",K.name,wo(K.size)),x(!0),y(0);const N=setInterval(()=>{y(oe=>Math.min(oe+10,90))},100);try{const oe=await S2(K,{maxWidth:1920,maxHeight:1080,quality:.8,format:"jpeg",maxSizeKB:1024});clearInterval(N),y(100),v(oe),console.log("[ContributionForm] Compression terminée:",{original:wo(oe.originalSize),compressed:wo(oe.compressedSize),ratio:oe.compressionRatio+"%",dimensions:`${oe.width}x${oe.height}`});const Re=new FileReader;Re.onload=Ne=>{Ne.target&&Ne.target.result&&o(Ne.target.result)},Re.readAsDataURL(oe.file);const ae=new FormData;ae.append("file",oe.file),ae.append("upload_preset","collectif_photos"),ae.append("cloud_name","dpatqkgsc"),console.log("[ContributionForm] Requête Cloudinary avec image compressée:",{url:"https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",preset:"collectif_photos",fileSize:oe.compressedSize,fileType:oe.file.type});const Te=await fetch("https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",{method:"POST",body:ae});if(console.log("[ContributionForm] Cloudinary response status:",Te.status,Te.statusText),Te.ok){const Ne=await Te.json();console.log("[ContributionForm] Cloudinary response data:",Ne),A("imageUrl",Ne.secure_url),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"image_uploaded",compression_ratio:oe.compressionRatio,original_size:oe.originalSize,compressed_size:oe.compressedSize})}else{const Ne=await Te.text();throw console.error("[ContributionForm] Erreur Cloudinary:",Ne),new Error(`Erreur Cloudinary: ${Te.status}`)}}catch(oe){clearInterval(N),console.error("[ContributionForm] Erreur de compression:",oe),alert("Erreur lors de la compression de l'image. Veuillez réessayer.")}}catch(K){console.error("[ContributionForm] Erreur générale:",K),alert("Erreur lors du traitement de l'image. Veuillez réessayer.")}finally{x(!1),y(0)}},te=async D=>{var z,S;console.log("[ContributionForm] === DÉBUT DE SOUMISSION ==="),console.log("[ContributionForm] Données reçues du formulaire:",D);try{n(!0),console.log("[ContributionForm] État de soumission activé"),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"submit_start"});const K=D.imageUrl||((S=(z=T.current)==null?void 0:z.files)==null?void 0:S[0]),se=K?"photo":"testimonial";console.log("[ContributionForm] Type déterminé automatiquement:",se,K?"(avec image)":"(sans image)"),D.type=se,D.imageUrl?console.log("[ContributionForm] URL Cloudinary disponible:",D.imageUrl):console.log("[ContributionForm] Aucune URL Cloudinary disponible"),console.log("[ContributionForm] Contexte avant enrichissement:",l),D=CN(D),console.log("[ContributionForm] Données après enrichissement avec contexte:",D),console.log("[ContributionForm] Appel du service de soumission...");const N=await bN(D);console.log("[ContributionForm] Contribution soumise avec succès:",N),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"success",entry_id:N.id,type:N.type}),ft({title:"Contribution ajoutée",description:"Votre contribution est maintenant visible."}),s(!0),setTimeout(()=>{console.log("[ContributionForm] Réinitialisation du formulaire..."),M(),o(null),EN(),c(null),u(""),m(""),s(!1),console.log("[ContributionForm] Formulaire réinitialisé")},5e3),console.log("[ContributionForm] Notification du composant parent..."),e(N),console.log("[ContributionForm] === SOUMISSION TERMINÉE AVEC SUCCÈS ===")}catch(K){console.error("[ContributionForm] === ERREUR LORS DE LA SOUMISSION ==="),console.error("[ContributionForm] Erreur détaillée:",K),console.error("[ContributionForm] Stack trace:",K instanceof Error?K.stack:"N/A"),alert("Une erreur est survenue lors de l'envoi de votre contribution. Veuillez réessayer."),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"failure"})}finally{n(!1),console.log("[ContributionForm] État de soumission désactivé")}};return i.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6 pb-20",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Partagez votre expérience"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Contribuez à la mémoire collective de l'île Feydeau en partageant vos photos et témoignages."}),r&&i.jsxs(sl,{className:"mt-4 bg-blue-50 border-blue-300 border-2",children:[i.jsx(Ii,{className:"h-5 w-5 text-blue-600"}),i.jsxs(il,{className:"space-y-3",children:[i.jsx("div",{className:"font-bold text-blue-900 text-lg",children:"📤 Contribution envoyée !"}),i.jsxs("div",{className:"bg-blue-100 p-3 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[i.jsx(Ii,{className:"h-4 w-4"}),i.jsx("span",{children:"⏱️ Votre photo sera visible dans 1-2 minutes"})]}),i.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Le temps que notre système traite automatiquement votre contribution"})]}),i.jsx("div",{className:"text-sm text-blue-600",children:"✨ Merci de contribuer à la mémoire collective de l'île Feydeau !"})]})]}),l&&!r&&i.jsxs(sl,{className:"mt-4 bg-blue-50 border-blue-200",children:[i.jsx(Cr,{className:"h-4 w-4 text-blue-500"}),i.jsxs(il,{children:["Votre contribution sera associée à ",l.type==="event"?"l'événement":"l'emplacement"," ",i.jsx("strong",{children:l.name})]})]})]}),!r&&i.jsxs("form",{onSubmit:P(te),className:"space-y-6",autoComplete:"off","data-form-type":"contribution",noValidate:!0,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"image",children:"Photo"}),a?i.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:a,alt:"Aperçu",className:"max-h-64 mx-auto rounded"}),i.jsx(U,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>{o(null),T.current&&(T.current.value="")},children:"Changer l'image"})]})}):i.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:i.jsxs("div",{className:"py-4 flex flex-col items-center gap-4",children:[i.jsx(Pc,{className:"h-8 w-8 text-slate-400"}),i.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Choisissez comment ajouter votre photo"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[i.jsxs(U,{type:"button",variant:"outline",className:"flex-1 flex items-center gap-2",onClick:()=>{const D=document.createElement("input");D.type="file",D.accept="image/*",D.capture="environment",D.onchange=z=>{J(z)},D.click()},children:[i.jsx(is,{className:"h-4 w-4"}),"Appareil photo"]}),i.jsxs(U,{type:"button",variant:"outline",className:"flex-1 flex items-center gap-2",onClick:()=>{var D;return(D=T.current)==null?void 0:D.click()},children:[i.jsx(Pc,{className:"h-4 w-4"}),"Galerie"]})]}),f&&i.jsx("div",{className:"w-full max-w-sm mt-2",children:i.jsx(vx,{value:g,max:100})})]})}),i.jsx("input",{type:"file",ref:T,accept:"image/*",className:"hidden",onChange:J,"data-form-type":"contribution-image",autoComplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"description",children:"Description ou témoignage"}),i.jsx(Wi,{id:"description",placeholder:"Décrivez votre photo ou partagez votre témoignage...",autoComplete:"off","data-form-type":"contribution-description",...E("description")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"displayName",children:"Nom d'affichage (optionnel)"}),i.jsx(Jt,{id:"displayName",placeholder:"Votre nom ou pseudonyme",defaultValue:"Anonyme",autoComplete:"off","data-form-type":"contribution-displayname",...E("displayName")}),i.jsx("p",{className:"text-xs text-slate-500",children:"Laissez vide pour contribuer anonymement"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"eventId",children:"Événement associé (optionnel)"}),i.jsxs(Bs,{value:d,onValueChange:D=>{u(D),A("eventId",D)},children:[i.jsx(ts,{children:i.jsx(qs,{placeholder:"Sélectionnez un événement"})}),i.jsx(ns,{children:zt.map(D=>i.jsx(vr,{value:D.id,children:D.title},D.id))})]}),i.jsx("input",{type:"hidden",...E("eventId"),value:d,"data-form-type":"contribution-event",autoComplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ge,{htmlFor:"locationId",children:"Lieu associé (optionnel)"}),i.jsxs(Bs,{value:h,onValueChange:D=>{m(D),A("locationId",D)},children:[i.jsx(ts,{children:i.jsx(qs,{placeholder:"Sélectionnez un lieu"})}),i.jsx(ns,{children:ht.map(D=>i.jsx(vr,{value:D.id,children:D.name},D.id))})]}),i.jsx("input",{type:"hidden",...E("locationId"),value:h,"data-form-type":"contribution-location",autoComplete:"off"})]}),i.jsx(U,{type:"submit",className:"w-full",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Partager"})]})]})},T2=({src:e,alt:t,className:n,placeholderSrc:r,blurDataURL:s,onLoad:a,onError:o,priority:l=!1})=>{const[c,d]=p.useState(!1),[u,h]=p.useState(l),[m,f]=p.useState(!e),x=p.useRef(null),g=p.useRef(null);(!e||e==="undefined")&&console.warn(`[LazyImage] URL d'image invalide: ${e}`),p.useEffect(()=>{if(l)return;const b=new IntersectionObserver(w=>{w.forEach(T=>{T.isIntersecting&&(h(!0),b.unobserve(T.target))})},{rootMargin:"50px",threshold:.1});return g.current=b,x.current&&(console.log(`[LazyImage] Observing element: ${e}`),b.observe(x.current)),()=>{g.current&&g.current.disconnect()}},[l,e]);const y=()=>{d(!0),a==null||a()},j=b=>{console.error(`[LazyImage] Image error: ${e}`,b),f(!0),o==null||o(b.nativeEvent)};return i.jsxs("div",{ref:x,className:re("relative overflow-hidden",n),children:[!c&&i.jsx("div",{className:"absolute inset-0 bg-slate-200 animate-pulse",style:{backgroundImage:`url(${s||"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q=="})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(10px)",transform:"scale(1.1)"}}),u&&e&&e!=="undefined"&&i.jsx("img",{src:e,alt:t,className:re("w-full h-full object-cover transition-opacity duration-300",c?"opacity-100":"opacity-0"),onLoad:y,onError:j,loading:l?"eager":"lazy"}),u&&!c&&!m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"})}),m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100",children:i.jsxs("div",{className:"text-center text-slate-500",children:[i.jsx("div",{className:"text-2xl mb-2",children:"📷"}),i.jsx("div",{className:"text-sm",children:"Image indisponible"})]})})]})},P2=({entries:e,onEntryClick:t})=>{const n={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.5}})};return i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pb-20",children:e.map((r,s)=>i.jsxs(je.div,{custom:s,variants:n,initial:"hidden",animate:"visible",className:"relative rounded-lg overflow-hidden",onClick:()=>t(r),children:[r.type==="photo"&&(r.thumbnailUrl||r.imageUrl)?i.jsxs("div",{className:"aspect-square relative",children:[i.jsx(T2,{src:r.thumbnailUrl||r.imageUrl,alt:r.description||"Photo communautaire",className:"w-full h-full object-cover",priority:s<6}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-100 md:opacity-0 md:hover:opacity-100 transition-opacity flex flex-col justify-end p-2 pb-8",children:i.jsx("p",{className:"text-white text-sm line-clamp-2",children:r.description||r.content})})]}):r.type==="photo"?i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:"📷"}),i.jsx("p",{className:"text-sm text-center text-slate-500",children:"Image non disponible"}),i.jsx("p",{className:"text-xs text-center text-slate-400 mt-1 line-clamp-2",children:r.content})]}):i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col justify-center",children:[i.jsxs("div",{className:"text-center mb-2",children:[i.jsx("div",{className:"text-2xl mb-1",children:"💬"}),i.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Témoignage"})]}),i.jsx("p",{className:"text-sm line-clamp-4 text-center flex-grow",children:r.content&&r.content.trim()||r.description&&r.description.trim()||"Contenu disponible"})]}),i.jsx(tr,{entryId:r.id,variant:"compact"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-xs",children:i.jsxs("div",{className:"truncate",children:[i.jsx("span",{children:r.displayName}),i.jsx("span",{className:"text-xs text-slate-300 ml-1",children:(()=>{try{if(!r.timestamp)return"";const a=new Date(r.timestamp);return isNaN(a.getTime())?"":Aa(a,"d MMM",{locale:Ta})}catch(a){return console.warn("[GalleryGrid] Invalid timestamp:",r.timestamp,a),""}})()})]})})]},r.id))})},_2="Left",M2="Right",D2="Up",R2="Down",$r={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},al={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Gd="mousemove",Wd="mouseup",O2="touchend",L2="touchmove",F2="touchstart";function $2(e,t,n,r){return e>t?n>0?M2:_2:r>0?R2:D2}function Yd(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),s=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,s]}function z2(e,t){const n=u=>{const h="touches"in u;h&&u.touches.length>1||e((m,f)=>{f.trackMouse&&!h&&(document.addEventListener(Gd,r),document.addEventListener(Wd,o));const{clientX:x,clientY:g}=h?u.touches[0]:u,y=Yd([x,g],f.rotationAngle);return f.onTouchStartOrOnMouseDown&&f.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},m),al),{initial:y.slice(),xy:y,start:u.timeStamp||0})})},r=u=>{e((h,m)=>{const f="touches"in u;if(f&&u.touches.length>1)return h;if(u.timeStamp-h.start>m.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:x,clientY:g}=f?u.touches[0]:u,[y,j]=Yd([x,g],m.rotationAngle),v=y-h.xy[0],b=j-h.xy[1],w=Math.abs(v),T=Math.abs(b),E=(u.timeStamp||0)-h.start,P=Math.sqrt(w*w+T*T)/(E||1),M=[v/(E||1),b/(E||1)],A=$2(w,T,v,b),R=typeof m.delta=="number"?m.delta:m.delta[A.toLowerCase()]||$r.delta;if(w<R&&T<R&&!h.swiping)return h;const I={absX:w,absY:T,deltaX:v,deltaY:b,dir:A,event:u,first:h.first,initial:h.initial,velocity:P,vxvy:M};I.first&&m.onSwipeStart&&m.onSwipeStart(I),m.onSwiping&&m.onSwiping(I);let k=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${A}`])&&(k=!0),k&&m.preventScrollOnSwipe&&m.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:I,swiping:!0})})},s=u=>{e((h,m)=>{let f;if(h.swiping&&h.eventData){if(u.timeStamp-h.start<m.swipeDuration){f=Object.assign(Object.assign({},h.eventData),{event:u}),m.onSwiped&&m.onSwiped(f);const x=m[`onSwiped${f.dir}`];x&&x(f)}}else m.onTap&&m.onTap({event:u});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},h),al),{eventData:f})})},a=()=>{document.removeEventListener(Gd,r),document.removeEventListener(Wd,o)},o=u=>{a(),s(u)},l=(u,h)=>{let m=()=>{};if(u&&u.addEventListener){const f=Object.assign(Object.assign({},$r.touchEventOptions),h.touchEventOptions),x=[[F2,n,f],[L2,r,Object.assign(Object.assign({},f),h.preventScrollOnSwipe?{passive:!1}:{})],[O2,s,f]];x.forEach(([g,y,j])=>u.addEventListener(g,y,j)),m=()=>x.forEach(([g,y])=>u.removeEventListener(g,y))}return m},d={ref:u=>{u!==null&&e((h,m)=>{if(h.el===u)return h;const f={};return h.el&&h.el!==u&&h.cleanUpTouch&&(h.cleanUpTouch(),f.cleanUpTouch=void 0),m.trackTouch&&u&&(f.cleanUpTouch=l(u,m)),Object.assign(Object.assign(Object.assign({},h),{el:u}),f)})}};return t.trackMouse&&(d.onMouseDown=n),[d,l]}function V2(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function bx(e){const{trackMouse:t}=e,n=p.useRef(Object.assign({},al)),r=p.useRef(Object.assign({},$r)),s=p.useRef(Object.assign({},r.current));s.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},$r),e);let a;for(a in $r)r.current[a]===void 0&&(r.current[a]=$r[a]);const[o,l]=p.useMemo(()=>z2(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=V2(n.current,r.current,s.current,l),o}const B2=()=>typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"",q2=({src:e,alt:t,className:n="",fallbackSrc:r=`${B2()}/images/placeholder-image.jpg`})=>{const[s,a]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState(!1),[u,h]=p.useState(0);if(p.useEffect(()=>{(()=>{l(!0),d(!1);try{if(!e){console.error("LocalImage: src prop is undefined or empty"),d(!0),l(!1);return}if(e&&typeof e=="string"&&e.startsWith("local:")){const x=e.substring(6),g=localStorage.getItem(`community_image_${x}`);g?a(g):(console.error(`Image non trouvée dans localStorage: ${x}`),caches&&"match"in caches&&u===0?caches.open("image-cache").then(y=>{y.match(`community-images/${x}`).then(j=>{j?j.blob().then(v=>{const b=URL.createObjectURL(v);a(b),h(w=>w+1)}):d(!0)})}).catch(()=>{d(!0)}):d(!0))}else a(e)}catch(x){console.error("Erreur lors du chargement de l'image:",x),d(!0)}finally{l(!1)}})()},[e,u]),o)return i.jsx("div",{className:`bg-gray-200 animate-pulse ${n}`,children:i.jsx("span",{className:"sr-only",children:"Chargement..."})});if(c){const f=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:f,alt:t,className:n,onError:x=>{try{x.currentTarget.style.display="none";const g=x.currentTarget.parentElement;if(g&&!g.querySelector(".image-placeholder")){g.classList.add("bg-gray-200","flex","items-center","justify-center");const y=document.createElement("span");y.className="text-sm text-gray-500 image-placeholder",y.textContent="Image non disponible",g.appendChild(y)}}catch(g){console.warn("[LocalImage] Error in fallback image error handler:",g)}}})}const m=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:s,alt:t,className:n,onError:f=>{try{if(console.log("Erreur de chargement de l'image, utilisation de l'image de secours"),f.currentTarget.src!==m)f.currentTarget.src=m;else{f.currentTarget.style.display="none";const x=f.currentTarget.parentElement;if(x&&!x.querySelector(".image-placeholder")){x.classList.add("bg-gray-200","flex","items-center","justify-center");const g=document.createElement("span");g.className="text-sm text-gray-500 image-placeholder",g.textContent="Image non disponible",x.appendChild(g)}}}catch(x){console.warn("[LocalImage] Error in main image error handler:",x)}}})},U2=({entry:e,entries:t,currentIndex:n,onClose:r,onNavigate:s})=>{F.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const a=n>0,o=n<t.length-1,l=()=>{a&&s(n-1)},c=()=>{o&&s(n+1)},d=bx({onSwipedLeft:()=>{o&&c()},onSwipedRight:()=>{a&&l()},trackMouse:!0,preventScrollOnSwipe:!0,delta:50});F.useEffect(()=>{const m=f=>{f.key==="ArrowLeft"&&a?l():f.key==="ArrowRight"&&o?c():f.key==="Escape"&&r()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[a,o,r]);const u={hidden:{opacity:0},visible:{opacity:1}},h={hidden:{opacity:0,y:50,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300}}};return i.jsx(un,{children:i.jsx(je.div,{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",variants:u,initial:"hidden",animate:"visible",exit:"hidden",onClick:r,children:i.jsxs(je.div,{className:"bg-white dark:bg-slate-900 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",variants:h,initial:"hidden",animate:"visible",exit:"hidden",onClick:m=>m.stopPropagation(),...d,children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:e.displayName}),i.jsx(U,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8",children:i.jsx(br,{size:16})})]}),i.jsx("div",{className:"flex-grow overflow-auto",children:e.type==="photo"?i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"relative",children:i.jsx(q2,{src:e.imageUrl,alt:e.description||"Photo communautaire",className:"w-full h-auto"})}),e.description&&i.jsx("p",{className:"p-4 text-sm",children:e.description})]}):i.jsx("div",{className:"p-6 min-h-[200px] flex items-center justify-center",children:i.jsx("div",{className:"text-center space-y-4 max-w-md",children:e.content&&e.content.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.content.trim()}):e.description&&e.description.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.description.trim()}):i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 italic",children:"Aucun contenu disponible"}),i.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:['Debug: content="',e.content,'", description="',e.description,'"']})]})})})}),i.jsxs("div",{className:"p-3 border-t flex items-center justify-between",children:[i.jsx(tr,{entryId:e.id,variant:"full"}),i.jsx("span",{className:"text-sm text-slate-500",children:(()=>{try{if(!e.timestamp)return"Date inconnue";const m=new Date(e.timestamp);return isNaN(m.getTime())?"Date invalide":Aa(m,"d MMMM yyyy",{locale:Ta})}catch(m){return console.warn("[EntryDetail] Invalid timestamp:",e.timestamp,m),"Date invalide"}})()})]})]})})})},H2=({onRefresh:e,children:t,disabled:n=!1,threshold:r=80})=>{const[s,a]=p.useState(!1),[o,l]=p.useState(0),[c,d]=p.useState(!1),[u,h]=p.useState(0),m=p.useRef(null),f=async()=>{if(!(n||s)){a(!0);try{await e()}finally{a(!1),l(0),d(!1)}}},x=E=>{if(n||s)return;const P=m.current;!P||P.scrollTop>0||(h(E.touches[0].clientY),d(!0))},g=E=>{if(!c||n||s)return;const P=m.current;if(!P||P.scrollTop>0){d(!1),l(0);return}const M=E.touches[0].clientY,A=Math.max(0,M-u),R=Math.min(A*.5,r*1.5);l(R),A>10&&E.preventDefault()},y=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))},j=E=>{if(n||s)return;const P=m.current;!P||P.scrollTop>0||(h(E.clientY),d(!0))},v=E=>{if(!c||n||s)return;const P=m.current;if(!P||P.scrollTop>0){d(!1),l(0);return}const M=Math.max(0,E.clientY-u),A=Math.min(M*.3,r*1.5);l(A)},b=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))};p.useEffect(()=>{let E=!1;if(c){const P=A=>{if(E||!c)return;const R=Math.max(0,A.clientY-u),I=Math.min(R*.3,r*1.5);l(I)},M=()=>{E||(o>=r?f():(l(0),d(!1)))};try{document.addEventListener("mousemove",P),document.addEventListener("mouseup",M)}catch(A){console.warn("[PullToRefresh] Error adding global event listeners:",A)}return()=>{E=!0;try{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",M)}catch(A){console.warn("[PullToRefresh] Error removing global event listeners:",A)}}}},[c,u,o,r]);const w=o>=r,T=Math.min(o/r,1);return i.jsxs("div",{ref:m,className:"relative h-full overflow-auto",onTouchStart:x,onTouchMove:g,onTouchEnd:y,onMouseDown:j,onMouseMove:v,onMouseUp:b,style:{transform:`translateY(${Math.min(o*.5,40)}px)`,transition:c?"none":"transform 0.3s ease-out"},children:[i.jsx(un,{children:(c||s)&&i.jsx(je.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-center py-4",style:{transform:`translateY(-${Math.max(0,60-o)}px)`},children:i.jsxs("div",{className:"flex items-center gap-2 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg",children:[i.jsx(Pm,{className:`transition-all duration-200 ${s?"animate-spin":""} ${w?"text-green-500":"text-slate-500"}`,size:16,style:{transform:`rotate(${T*180}deg)`}}),i.jsx("span",{className:`text-sm font-medium transition-colors ${w?"text-green-500":"text-slate-500"}`,children:s?"Actualisation...":w?"Relâcher pour actualiser":"Tirer pour actualiser"})]})})}),i.jsx("div",{className:"min-h-full",children:t})]})},G2=()=>{const{toast:e}=Cl(),t=Tn(),[n,r]=p.useState([]),[s,a]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState("all"),[u,h]=p.useState("gallery"),[m,f]=p.useState(0),[x,g]=p.useState(null),[y,j]=p.useState(0);p.useEffect(()=>{new URLSearchParams(t.search).get("tab")==="contribute"&&(h("contribute"),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"url_param"}))},[t]);const v=async(E=!1)=>{try{l(null);const P=await Fs();if(E&&m>0&&P.length>m){const M=P.length-m;e({title:"🎉 Nouvelles contributions !",description:`${M} nouvelle${M>1?"s":""} contribution${M>1?"s":""} ajoutée${M>1?"s":""}`,duration:5e3})}r(P),f(P.length),B.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",entries_count:P.length})}catch(P){console.error("Erreur lors du chargement des entrées:",P),l("Impossible de charger les contributions. Veuillez réessayer."),B.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",error:"load_failed"})}finally{a(!1)}};p.useEffect(()=>(v(),()=>{}),[]),p.useEffect(()=>{const E=setInterval(()=>{u==="gallery"&&(console.log("[CommunityGallery] Vérification des nouvelles contributions..."),v(!0))},12e4);return()=>clearInterval(E)},[u,m]);const b=async()=>{await v(),e({title:"✅ Galerie actualisée",description:"Les dernières contributions ont été chargées",duration:2e3}),B.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",action:"manual_refresh"})},w=E=>{r(P=>[E,...P]),h("gallery"),e({title:"🎉 Contribution envoyée !",description:"Votre contribution sera visible dans quelques minutes",duration:4e3}),B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"completed",content_type:E.type})},T=n.filter(E=>{var P;return((P=E.moderation)==null?void 0:P.status)==="rejected"?!1:c==="all"?!0:E.type===c});return i.jsxs(V_,{children:[i.jsx(B_,{title:"Galerie Communautaire",subtitle:"Partagez vos moments et découvrez ceux des autres"}),i.jsx(je.div,{initial:"hidden",animate:"visible",className:"flex flex-col h-full pb-32",children:i.jsxs(us,{value:u,onValueChange:E=>{h(E),E==="contribute"&&B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"tab_click"})},className:"w-full",children:[i.jsxs(Pr,{className:"grid w-full grid-cols-2 mb-4",children:[i.jsxs(Me,{value:"gallery",className:"flex items-center gap-2",children:[i.jsx(is,{size:16}),i.jsx("span",{children:"Galerie"})]}),i.jsxs(Me,{value:"contribute",className:"flex items-center gap-2",children:[i.jsx(hy,{size:16}),i.jsx("span",{children:"Contribuer"})]})]}),i.jsx(De,{value:"gallery",className:"h-full",children:i.jsx(H2,{onRefresh:b,disabled:s,children:s?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(Qn,{className:"w-8 h-8 animate-spin text-primary"})}):o?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-red-500 mb-4",children:o}),i.jsx(U,{onClick:()=>window.location.reload(),children:"Réessayer"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fy,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Filtrer:"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(U,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>{d("all"),B.trackCommunityInteraction(ee.FILTER,{filter:"all"})},children:"Tous"}),i.jsx(U,{variant:c==="photo"?"default":"outline",size:"sm",onClick:()=>{d("photo"),B.trackCommunityInteraction(ee.FILTER,{filter:"photo"})},children:"Photos"}),i.jsx(U,{variant:c==="testimonial"?"default":"outline",size:"sm",onClick:()=>{d("testimonial"),B.trackCommunityInteraction(ee.FILTER,{filter:"testimonial"})},children:"Témoignages"})]})]}),T.length>0?i.jsx(P2,{entries:T,onEntryClick:E=>{const P=T.findIndex(M=>M.id===E.id);j(P),g(E),B.trackCommunityInteraction(ee.VIEW,{content_type:"entry",entry_id:E.id})}}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"Aucune contribution dans cette catégorie"}),i.jsx(U,{onClick:()=>{B.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"empty_state"}),h("contribute")},children:"Soyez le premier à contribuer"})]})]})})}),i.jsx(De,{value:"contribute",className:"h-full",children:i.jsx(A2,{onSubmit:w})})]})}),x&&i.jsx(U2,{entry:x,entries:T,currentIndex:y,onClose:()=>g(null),onNavigate:E=>{j(E),g(T[E])}}),i.jsx(rr,{})]})},W2=()=>{const e=St(),[t,n]=p.useState([]),[r,s]=p.useState(!0),[a,o]=p.useState(null),[l,c]=p.useState(-1),d=p.useCallback(async()=>{try{const g=[],y=window.location.hostname.includes("github.io"),j=y?"/1Hall1Artiste/images/historical":"/images/historical";console.log(`[HistoricalGallery] Environment: ${y?"GitHub Pages":"Local"}, basePath: ${j}`);for(let v=1;v<=151;v++)g.push({id:`photos-${v}`,path:`${j}/photos-${v}.jpg`,loaded:!1});console.log(`[HistoricalGallery] ${g.length} photos chargées`),n(g),s(!1),B.trackFeatureUse("historical_gallery",{photo_count:g.length,timestamp:new Date().toISOString()})}catch(g){console.error("Erreur lors du chargement des photos:",g),s(!1)}},[]);p.useEffect(()=>{d()},[d]);const u=(g,y)=>{o(g),c(y),B.trackContentInteraction(ee.VIEW,"historical_photo",g.id,{photo_index:y,timestamp:new Date().toISOString()})},h=()=>{o(null),c(-1)},m=g=>{if(l===-1)return;let y=l;g==="prev"?y=l>0?l-1:t.length-1:y=l<t.length-1?l+1:0,c(y),o(t[y])};p.useEffect(()=>{const g=y=>{if(a)switch(y.key){case"Escape":h();break;case"ArrowLeft":m("prev");break;case"ArrowRight":m("next");break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[a,l]);const f={hidden:{opacity:0,y:20},visible:g=>({opacity:1,y:0,transition:{delay:g*.02,duration:.3}})},x=bx({onSwipedLeft:()=>{a&&m("next")},onSwipedRight:()=>{a&&m("prev")},trackMouse:!0,preventScrollOnSwipe:!0,delta:50,swipeDuration:500});return i.jsx(Ml,{children:i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[i.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-sm border-b border-slate-200",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(U,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full",children:["←",i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Galerie Historique"}),i.jsx("p",{className:"text-slate-600",children:"Photos d'époque de l'Île Feydeau"})]})]}),i.jsxs("div",{className:"text-sm text-slate-500",children:[t.length," photos"]})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-6",children:r?i.jsx("div",{className:"flex items-center justify-center min-h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map((g,y)=>i.jsxs(je.div,{custom:y,variants:f,initial:"hidden",animate:"visible",className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group",onClick:()=>u(g,y),children:[i.jsx("img",{src:g.path,alt:`Photo historique ${y+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:y<8?"eager":"lazy",onLoad:()=>{n(j=>j.map(v=>v.id===g.id?{...v,loaded:!0}:v))},onError:j=>{console.error(`❌ Erreur chargement image: ${g.path}`),console.error(`   - Index: ${y}, ID: ${g.id}`),console.error(`   - URL complète: ${window.location.origin}${g.path}`);const v=j.target;if(!v.src.includes("placeholder"))v.src="/images/placeholder-image.jpg";else{const b=v.closest(".aspect-square");b&&(b.style.display="none")}}}),i.jsx(tr,{entryId:`historical-${g.id}`,variant:"compact",className:"absolute bottom-2 right-2"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:i.jsxs("span",{className:"text-white text-xs font-medium",children:["Photo ",y+1]})})]},g.id))})}),i.jsx(un,{children:a&&i.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:h,...x,children:[i.jsxs(U,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20 rounded-full",onClick:h,children:[i.jsx("span",{className:"sr-only",children:"Fermer"}),i.jsx("span",{className:"text-2xl",children:"×"})]}),i.jsx(U,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("prev")},title:"Photo précédente (← ou swipe droite)",children:"←"}),i.jsx(U,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("next")},title:"Photo suivante (→ ou swipe gauche)",children:"→"}),i.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:[l+1," / ",t.length]}),i.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-10",children:i.jsx(tr,{entryId:`historical-${a.id}`,variant:"full",className:"bg-black/60 backdrop-blur-sm text-white hover:bg-black/80"})}),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 text-white/70 text-xs bg-black/50 px-3 py-1 rounded-full md:hidden",children:"Swipe ← → pour naviguer"}),i.jsx(je.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},src:a.path,alt:`Photo historique ${l+1}`,className:"max-h-full max-w-full object-contain",onClick:g=>g.stopPropagation()},a.id)]})})]})})},Y2=()=>{const e=St(),{hasNewPhotos:t,newPhotosCount:n,markAsViewed:r}=jp(),s=a=>{B.trackContentInteraction(ee.VIEW,"gallery",a,{gallery_type:a,timestamp:new Date().toISOString()}),a==="community"&&t&&r(),e(`/${a}`)};return i.jsx(Ml,{children:i.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white shadow-sm",children:i.jsxs("div",{className:"flex items-center h-16 px-4",children:[i.jsxs(U,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:[i.jsx(Xn,{className:"h-6 w-6"}),i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsx("h1",{className:"text-xl font-semibold",children:"Galeries"})]})}),i.jsxs("div",{className:"flex-1 p-4 pb-20",children:[" ",i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow relative",onClick:()=>s("community"),children:[i.jsxs("div",{className:"relative h-40 bg-gray-100",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(wp,{count:n,show:t,className:"absolute top-2 right-2",children:i.jsx(is,{className:"h-12 w-12 text-gray-400"})})}),t&&i.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium animate-pulse",children:[n," nouvelle",n>1?"s":""]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos de la communauté"}),t&&i.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full font-medium",children:"Nouveau !"})]}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Découvrez les photos partagées par la communauté de l'Île Feydeau"})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s("historical"),children:[i.jsx("div",{className:"relative h-40 bg-gray-100",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(py,{className:"h-12 w-12 text-gray-400"})})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos historiques"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Explorez notre collection de 165 photos historiques de l'Île Feydeau"})]})]})]})]}),i.jsx(rr,{})]})})},K2=()=>{try{const e=El();if(!e){console.warn("Firebase non initialisé, impossible d'utiliser Analytics");return}const t=ca(e);if(!t){console.warn("[FirebaseDebug] Analytics non disponible pour l'événement de test");return}Gs(async()=>{const{logEvent:n}=await Promise.resolve().then(()=>vw);return{logEvent:n}},void 0).then(({logEvent:n})=>{n(t,"test_debug_event",{timestamp:new Date().toISOString(),debug:!0}),console.log("[FirebaseDebug] Événement de test envoyé")})}catch(e){console.error("[FirebaseDebug] Erreur lors de l'envoi de l'événement de test:",e)}},Q2=()=>{try{if(!window.gtag){console.warn("[GtagDebug] gtag n'est pas initialisé");return}window.gtag("event","test_event",{event_category:"debug",event_label:"test_label",debug_mode:!0,timestamp:new Date().toISOString()}),console.log("[GtagDebug] Événement de test envoyé via gtag")}catch(e){console.error("[GtagDebug] Erreur lors de l'envoi de l'événement de test:",e)}},X2=async()=>{const e=[];try{const t=await Nh();if(e.push({success:t,message:t?"Firebase Analytics est supporté dans cet environnement":"Firebase Analytics n'est PAS supporté dans cet environnement"}),!t)return e;const n=El(),r=!!n;if(e.push({success:r,message:r?"Firebase est correctement initialisé":"Firebase n'est PAS initialisé"}),!r)return e;const s=n?n.options:{},a=!!s.measurementId;e.push({success:a,message:a?"MeasurementId est configuré":"MeasurementId est MANQUANT dans la configuration",details:{measurementId:s.measurementId||"Non défini",apiKey:s.apiKey?"Configuré":"Non configuré",projectId:s.projectId||"Non défini"}});let o=null;try{n?o=ca(n):console.warn("Firebase non initialisé, impossible d'utiliser Analytics"),e.push({success:!!o,message:o?"Analytics a été initialisé avec succès":"Échec de l'initialisation d'Analytics"})}catch(f){return e.push({success:!1,message:"Erreur lors de l'initialisation d'Analytics",details:{error:f instanceof Error?f.message:String(f)}}),e}const l=new URL(window.location.href),c=l.searchParams.has("firebase_debug"),d=l.searchParams.has("debug_mode"),u=l.searchParams.has("gtm_debug");e.push({success:c||d||u,message:c||d||u?"Paramètres de debug détectés dans l'URL":"Aucun paramètre de debug dans l'URL",details:{firebase_debug:c?"Présent":"Absent",debug_mode:d?"Présent":"Absent",gtm_debug:u?"Présent":"Absent"}});try{Eh(o,!0),e.push({success:!0,message:"La collecte de données Analytics est activée"})}catch(f){e.push({success:!1,message:"Erreur lors de l'activation de la collecte de données",details:{error:f instanceof Error?f.message:String(f)}})}const h=typeof window.gtag=="function";e.push({success:h,message:h?"La fonction gtag est disponible":"La fonction gtag n'est PAS disponible"});const m=J2();e.push({success:m.length===0,message:m.length===0?"Aucun bloqueur potentiel détecté":`${m.length} bloqueur(s) potentiel(s) détecté(s)`,details:{blockers:m}})}catch(t){e.push({success:!1,message:"Erreur lors du diagnostic",details:{error:t instanceof Error?t.message:String(t)}})}return e};function J2(){const e=[];(document.getElementById("adblock-detector")||document.getElementById("ublock-detector")||document.getElementById("adblock-notice"))&&e.push("Bloqueur de publicités détecté");try{document.cookie="testcookie=1; SameSite=Lax; Secure",document.cookie.indexOf("testcookie=")===-1&&e.push("Les cookies sont bloqués")}catch{e.push("Erreur lors du test des cookies")}try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch{e.push("localStorage n'est pas disponible")}const t=0,n=window.RequestFileSystem||window.webkitRequestFileSystem;if(n)try{n(t,100,()=>{},()=>{e.push("Navigation privée détectée")})}catch{}return e}const Z2=async()=>{console.group("🔍 Diagnostic Firebase Analytics"),console.log("Démarrage du diagnostic...");const e=await X2();let t=0,n=0;return e.forEach((r,s)=>{r.success?(t++,console.log(`✅ ${s+1}. ${r.message}`)):(n++,console.warn(`❌ ${s+1}. ${r.message}`)),r.details&&console.log("  Détails:",r.details)}),console.log(`
Résultat: ${t} succès, ${n} problèmes`),n>0&&(console.log(`
Recommandations:`),console.log("1. Vérifiez que la configuration Firebase est correcte"),console.log("2. Assurez-vous que les paramètres de debug sont présents dans l'URL"),console.log("3. Désactivez les bloqueurs de publicités"),console.log("4. Utilisez Chrome pour les tests"),console.log("5. Vérifiez que le measurementId correspond à votre projet Google Analytics")),console.groupEnd(),{results:e,summary:{total:e.length,success:t,failure:n}}};function eM(){const[e,t]=p.useState([]),[n,r]=p.useState("firebase"),[s,a]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(!1);p.useEffect(()=>{const b=new URL(window.location.href),w=[];b.searchParams.has("firebase_debug")&&w.push("firebase_debug=true"),b.searchParams.has("gtm_debug")&&w.push("gtm_debug=x"),b.searchParams.has("debug_mode")&&w.push("debug_mode=true"),a(w.join(", ")||"Aucun paramètre de debug détecté"),u("Debugger initialisé")},[]);const u=b=>{t(w=>[...w,`${new Date().toLocaleTimeString()}: ${b}`])},h=()=>{n==="firebase"?(K2(),u("Événement de test Firebase envoyé")):(Q2(),u("Événement de test Gtag envoyé"))},m=()=>{B.trackPageView("/debug-page","Page de débogage"),u("Événement page_view envoyé via Firebase Analytics"),n==="gtag"&&window.gtag&&(window.gtag("event","page_view",{page_title:"Page de débogage",page_path:"/debug-page",debug_mode:!0}),u("Événement page_view envoyé via Gtag"))},f=()=>{B.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:5,completion_time:new Date().toISOString()}),u("Événement onboarding_complete envoyé")},x=()=>{B.trackMapInteraction(ee.MAP_LOAD,{map_type:"debug",load_time:1200}),u("Événement map_load envoyé")},g=()=>{B.trackEvent(Ch.FEATURE,ee.FEATURE_USE,{feature_name:"analytics_debugger",custom_param:"test_value"}),u("Événement personnalisé feature_feature_use envoyé")},y=()=>{const b=new URL(window.location.href);b.searchParams.set("firebase_debug","true"),b.searchParams.set("debug_mode","true"),b.searchParams.set("gtm_debug","x"),window.history.replaceState({},document.title,b.toString()),a("firebase_debug=true, debug_mode=true, gtm_debug=x"),u("Paramètres de debug ajoutés à l'URL")},j=()=>{t([]),u("Logs effacés")},v=async()=>{d(!0),u("Démarrage du diagnostic...");try{const b=await Z2();l(b),u(`Diagnostic terminé: ${b.summary.success} succès, ${b.summary.failure} problèmes`)}catch(b){u(`Erreur lors du diagnostic: ${b instanceof Error?b.message:String(b)}`)}finally{d(!1)}};return i.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md max-w-3xl mx-auto my-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Analytics Debugger"}),i.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"État du débogage"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Mode:"})," ",n==="firebase"?"Firebase Analytics":"Google Tag Manager"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Paramètres URL:"})," ",s]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"Mode de débogage"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>r("firebase"),className:`px-3 py-1 rounded ${n==="firebase"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Firebase Analytics"}),i.jsx("button",{onClick:()=>r("gtag"),className:`px-3 py-1 rounded ${n==="gtag"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Google Tag (gtag)"})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:v,disabled:c,className:`w-full py-2 px-4 rounded ${c?"bg-gray-400":"bg-green-600 hover:bg-green-700"} text-white flex items-center justify-center`,children:c?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exécution du diagnostic..."]}):"Exécuter le diagnostic"})})]}),o&&i.jsxs("div",{className:"mb-4 p-3 border rounded bg-gray-50",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"Résultats du diagnostic"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{children:"Tests réussis:"}),i.jsxs("span",{className:"font-medium text-green-600",children:[o.summary.success," / ",o.summary.total]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Problèmes détectés:"}),i.jsx("span",{className:`font-medium ${o.summary.failure>0?"text-red-600":"text-green-600"}`,children:o.summary.failure})]}),o.summary.failure>0&&i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"Des problèmes ont été détectés. Consultez la console du navigateur pour plus de détails."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsx("button",{onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded",children:"Envoyer événement de test"}),i.jsx("button",{onClick:m,className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded",children:"Simuler page_view"}),i.jsx("button",{onClick:f,className:"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded",children:"Simuler onboarding_complete"}),i.jsx("button",{onClick:x,className:"bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded",children:"Simuler map_load"}),i.jsx("button",{onClick:g,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",children:"Envoyer événement personnalisé"}),i.jsx("button",{onClick:y,className:"bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded",children:"Ajouter paramètres debug à l'URL"})]}),i.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Journal des événements"}),i.jsx("button",{onClick:j,className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"Effacer"})]}),i.jsx("div",{className:"h-48 overflow-y-auto text-sm",children:e.length===0?i.jsx("p",{className:"text-gray-500 italic",children:"Aucun événement envoyé"}):i.jsx("ul",{className:"space-y-1",children:e.map((b,w)=>i.jsx("li",{className:"border-b border-gray-100 pb-1",children:b},w))})})]}),i.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:[i.jsx("h3",{className:"font-semibold",children:"Instructions:"}),i.jsxs("ol",{className:"list-decimal pl-5 space-y-1 mt-2",children:[i.jsxs("li",{children:["Assurez-vous que l'URL contient les paramètres de debug (",i.jsx("code",{children:"?firebase_debug=true"}),")"]}),i.jsx("li",{children:"Ouvrez la console Firebase > Analytics > DebugView"}),i.jsx("li",{children:"Ouvrez également Google Analytics > Rapports > Temps réel"}),i.jsx("li",{children:"Cliquez sur les boutons ci-dessus pour envoyer des événements de test"}),i.jsx("li",{children:"Vérifiez que les événements apparaissent dans DebugView ou dans les rapports temps réel"}),i.jsx("li",{children:"Si rien n'apparaît, essayez de changer de mode (Firebase/Gtag) et réessayez"})]}),i.jsxs("div",{className:"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[i.jsx("p",{className:"font-semibold",children:"Résolution de problèmes:"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"Vérifiez que vous n'avez pas de bloqueur de publicités actif"}),i.jsx("li",{children:"Utilisez Chrome plutôt qu'un autre navigateur"}),i.jsx("li",{children:"Vérifiez que la configuration Firebase est correcte"}),i.jsx("li",{children:"Consultez la console du navigateur pour voir les erreurs éventuelles"})]})]})]})]})}const tM=new Vj,nM=()=>{const e=Tn(),t=St(),n=p.useRef(e.pathname),[r,s]=p.useState(()=>localStorage.getItem("hasSeenOnboarding")==="true");p.useEffect(()=>{console.log("[App] Initialisation des écouteurs d'événements d'onboarding");const m=()=>{const g=localStorage.getItem("hasSeenOnboarding")==="true";g!==r&&(console.log("[App] Mise à jour de hasSeenOnboarding depuis localStorage:",g),s(g))};window.addEventListener("storage",m);const f=setInterval(m,500);return()=>{window.removeEventListener("storage",m),clearInterval(f)}},[r]);const[a,o]=p.useState(!0),l=()=>{o(!1),r||t("/onboarding")};p.useEffect(()=>{if(console.log("[App] useEffect navigation - État actuel:",{showSplash:a,hasSeenOnboarding:r,pathname:e.pathname}),a){console.log("[App] Écran d'accueil encore affiché, aucune action");return}!r&&e.pathname!=="/onboarding"?(console.log("[App] Redirection vers onboarding depuis:",e.pathname),t("/onboarding")):r&&e.pathname==="/onboarding"?(console.log("[App] Onboarding terminé, redirection vers /map"),t("/map")):console.log("[App] Aucune action de navigation nécessaire")},[r,e.pathname,t,a]),p.useEffect(()=>{const m=n.current,f=e.pathname;m!==f&&(B.trackRouteChange(m,f),n.current=f)},[e.pathname]);const c=[{path:"/map",component:KA,swipeable:!0},{path:"/debug-analytics",component:eM},{path:"/program",component:XA,swipeable:!0},{path:"/saved",component:w_,swipeable:!0},{path:"/community",component:G2,swipeable:!0},{path:"/galleries",component:Y2,swipeable:!1},{path:"/historical",component:W2,swipeable:!1},{path:"/about",component:ZA,swipeable:!0},{path:"/donate",component:eT,swipeable:!0}],d=[{path:"/admin",component:b_},{path:"/onboarding",component:N_},{path:"/location-history",component:$_},{path:"/analytics",component:z_}],u=tS(e.pathname),h=(m,f=!1)=>i.jsx(Ml,{enableSwipe:f,children:i.jsx(m,{})});return a?i.jsx(nT,{onComplete:l,isFirstVisit:!r}):i.jsx(un,{mode:"wait",children:i.jsxs(vy,{location:e,children:[i.jsx(ni,{path:"/",element:r?i.jsx(_c,{to:"/map",replace:!0}):i.jsx(_c,{to:"/onboarding",replace:!0})}),c.map(m=>i.jsx(ni,{path:m.path,element:h(m.component,u&&m.swipeable)},m.path)),d.map(m=>i.jsx(ni,{path:m.path,element:h(m.component)},m.path)),i.jsx(ni,{path:"*",element:h(tT)})]},e.pathname)})},rM=()=>i.jsx(nM,{}),Kd=new EventTarget,sM=()=>{const[e,t]=p.useState({show:!1,message:""});return p.useEffect(()=>{console.log("[App] Initialisation des écouteurs d'événements d'achievement");const n=s=>{const a=s;console.log("[App] Événement interne achievement reçu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] Célébration activée avec le message:",a.detail.message)},r=s=>{const a=s;console.log("[App] Événement global app-achievement reçu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] Célébration activée avec le message:",a.detail.message)};return console.log(`[App] Ajout de l'écouteur pour l'événement interne "achievement"`),Kd.addEventListener("achievement",n),console.log(`[App] Ajout de l'écouteur pour l'événement global "app-achievement"`),window.addEventListener("app-achievement",r),window.resetOnboardingTest=()=>{console.log("[App] [TEST] Réinitialisation de l'onboarding...");try{localStorage.removeItem("hasSeenOnboarding"),window.location&&window.location.reload?window.location.reload():console.warn("[App] window.location.reload not available")}catch(s){console.error("[App] Error in resetOnboardingTest:",s)}},console.log("[App] [TEST] Fonction resetOnboardingTest() disponible dans la console"),()=>{console.log("[App] Nettoyage des écouteurs d'événements");try{Kd.removeEventListener("achievement",n),window.removeEventListener("app-achievement",r)}catch(s){console.warn("[App] Error cleaning up event listeners:",s)}}},[]),p.useEffect(()=>{var n;return console.log("[App] Base URL détectée:",((n=window.APP_CONFIG)==null?void 0:n.BASE_URL)||"/"),vu(),Fc(),Iy(),Sw(),console.log("[App] Firebase Analytics initialisé"),B.startSession(),B.trackFeatureUse("app_start",{timestamp:new Date().toISOString(),referrer:document.referrer||"direct"}),setInterval(()=>{Lc()},30*60*1e3),Lc(),Fc(),vu(),lf(),()=>{B.endSession()}},[]),p.useEffect(()=>{try{const n=performance.getEntriesByType("navigation");if(n&&n.length>0){const r=n[0],s=r.loadEventEnd-r.startTime;isFinite(s)&&s>=0&&B.trackPerformance(ee.LOAD_TIME,Math.round(s))}else if(performance.timing){const r=performance.timing,s=r.loadEventEnd-r.navigationStart;isFinite(s)&&s>=0&&B.trackPerformance(ee.LOAD_TIME,Math.round(s))}if("PerformanceObserver"in window){const r=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.name;l==="first-paint"?B.trackPerformance(ee.FIRST_PAINT,Math.round(o.startTime)):l==="first-contentful-paint"&&B.trackPerformance(ee.FIRST_CONTENTFUL_PAINT,Math.round(o.startTime))}});try{r.observe({type:"paint",buffered:!0})}catch{}const s=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.processingStart-o.startTime;isFinite(l)&&l>=0&&B.trackPerformance(ee.FIRST_INPUT_DELAY,Math.round(l),{name:o.name,duration:Math.round(o.duration)})}});try{s.observe({type:"first-input",buffered:!0})}catch{}}}catch{}},[]),window.location.hostname.includes("github.io"),i.jsx(qj,{client:tM,children:i.jsx(Xj,{children:i.jsxs(Yh,{children:[i.jsx(h0,{}),i.jsx(Z0,{}),i.jsx(yy,{children:i.jsxs(Yj,{children:[i.jsx(rM,{}),i.jsx(bS,{}),e.show&&i.jsx(wi,{trigger:e.show,message:e.message,duration:5e3,onComplete:()=>t({show:!1,message:""})})]})})]})})})},iM=He("ErrorHandling");function aM(){Gj(),iM.info("Système de gestion des erreurs initialisé")}aM();zm(document.getElementById("root")).render(i.jsx(sM,{}));
//# sourceMappingURL=index-DO4oYt41.js.map
