var mx=Object.defineProperty;var xc=e=>{throw TypeError(e)};var hx=(e,t,n)=>t in e?mx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var It=(e,t,n)=>hx(e,typeof t!="symbol"?t+"":t,n),Ca=(e,t,n)=>t.has(e)||xc("Cannot "+n);var B=(e,t,n)=>(Ca(e,t,"read from private field"),n?n.call(e):t.get(e)),Ce=(e,t,n)=>t.has(e)?xc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xe=(e,t,n,r)=>(Ca(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ot=(e,t,n)=>(Ca(e,t,"access private method"),n);var Ws=(e,t,n,r)=>({set _(s){xe(e,t,s,n)},get _(){return B(e,t,r)}});import{j as i,V as Wd,R as Yd,A as Kd,C as Xd,X as gr,T as Qd,D as Jd,P as fx,c as Zr,a as qi,u as et,b as Zd,d as Ke,e as me,f as pn,g as em,h as tm,S as px,i as gx,k as nm,l as mo,m as Hi,n as rm,o as be,W as xx,L as Yr,p as Gi,q as sm,M as Cn,r as im,s as yx,N as Zo,t as am,v as om,w as vx,x as bx,F as wx,y as Sx,I as jx,z as Sn,B as lm,E as Ex,G as Nx,H as Cx,J as el,K as Ix,O as kx,Q as cm,U as um,Y as Ax,Z as dm,_ as mm,$ as Tx,a0 as Px,a1 as hm,a2 as _x,a3 as En,a4 as Wi,a5 as $s,a6 as es,a7 as Mx,a8 as on,a9 as Nn,aa as tl,ab as fm,ac as nl,ad as pm,ae as gm,af as xm,ag as Dx,ah as Rx,ai as Ox,aj as ho,ak as Yn,al as Lx,am as Fx,an as ym,ao as vm,ap as $x,aq as bm,ar as wm,as as zx,at as Sm,au as Bx,av as jm,aw as Em,ax as Vx,ay as Ux,az as Nm,aA as qx,aB as Hx,aC as Cm,aD as Im,aE as Gx,aF as Ia,aG as Wx,aH as Yx,aI as Kx,aJ as gs,aK as yc,aL as vc,aM as Xx,aN as Qx,aO as rl,aP as Jx,aQ as Zx,aR as ey,aS as bc,aT as ty,aU as ny,aV as ry,aW as sy,aX as iy,aY as ay,aZ as oy}from"./vendor-ui-CuO9rIeA.js";import{a as ly,r as p,R as F,G as cy,u as yt,c as kn,L as Ir,d as vi,g as km,H as uy,e as dy,f as Ys,N as wc}from"./vendor-react-D2LSdJQX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Am,Sc=ly;Am=Sc.createRoot,Sc.hydrateRoot;const my="modulepreload",hy=function(e){return"/1Hall1Artiste/"+e},jc={},zs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=hy(c),c in jc)return;jc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":my,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},bi="app_errors",Ec=50,fo=(e,t,n)=>{try{const r=typeof e=="string"?e:e.message,s=typeof e=="string"?void 0:e.stack,a={message:r,stack:s,url:window.location.href,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,path:window.location.pathname,componentName:t,additionalInfo:n},o=localStorage.getItem(bi);let l=[];if(o)try{l=JSON.parse(o),Array.isArray(l)||(l=[])}catch(c){console.error("Erreur lors de la lecture des erreurs stock√©es:",c),l=[]}l.push(a),l.length>Ec&&(l=l.slice(-Ec)),localStorage.setItem(bi,JSON.stringify(l)),console.error("Erreur captur√©e:",a)}catch(r){console.error("Erreur lors de la capture d'erreur:",r)}},Tm=()=>{try{const e=localStorage.getItem(bi);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Erreur lors de la r√©cup√©ration des erreurs stock√©es:",e),[]}},fy=()=>{localStorage.removeItem(bi)},py="service_3l31ox3",gy="template_q7nh8h2",xy=async()=>{try{const e=await zs(()=>import("./index-CQgKCrt3.js"),[])}catch(e){console.error("Erreur lors de l'initialisation d'EmailJS:",e)}},Nc=async()=>{const e=Tm();e.length>=1?await Pm():e.length>0&&console.log(`${e.length} erreur(s) en attente d'envoi`)},Pm=async()=>{try{const e=Tm();if(e.length===0)return!0;if(!0){console.log(`Envoi de ${e.length} erreurs par email`);const n=await zs(()=>import("./index-CQgKCrt3.js"),[]),r={errors_json:JSON.stringify(e,null,2),error_count:e.length,timestamp:new Date().toISOString(),user_agent:navigator.userAgent,app_version:"1.0.0",app_name:"Collectif Feydeau"},a=await n.send(py,gy,r,"HoNWMyqrINGzjeK6E");if(a.status===200)return console.log("Erreurs envoy√©es avec succ√®s"),fy(),!0;throw new Error(`Erreur lors de l'envoi: ${a.text}`)}}catch(e){return console.error("Erreur lors de l'envoi des erreurs:",e),!1}},Cc=()=>{window.onerror=(e,t,n,r,s)=>(fo(s||String(e),"GlobalErrorHandler",{source:t,lineno:n,colno:r}),!1),window.addEventListener("unhandledrejection",e=>{fo(e.reason||"Promesse rejet√©e non g√©r√©e","UnhandledRejection")})},yy=async()=>{console.log("üß™ Test du syst√®me de suivi d'erreurs..."),fo("Erreur de test pour v√©rifier le syst√®me de suivi","TestErrorReporting",{testMode:!0,timestamp:new Date().toISOString()});const e=await Pm();console.log(e?"‚úÖ Test r√©ussi : Erreur envoy√©e par email":"‚ùå Test √©chou√© : Erreur non envoy√©e")};typeof window<"u"&&(window.testErrorReporting=yy);const vy=()=>{};var Ic={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},by=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=e[n++],o=e[n++],l=e[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return t.join("")},Mm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const a=e[s],o=s+1<e.length,l=o?e[s+1]:0,c=s+2<e.length,d=c?e[s+2]:0,u=a>>2,h=(a&3)<<4|l>>4;let m=(l&15)<<2|d>>6,f=d&63;c||(f=64,o||(m=64)),r.push(n[u],n[h],n[m],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_m(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):by(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const a=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const d=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,a==null||l==null||d==null||h==null)throw new wy;const m=a<<2|l>>4;if(r.push(m),d!==64){const f=l<<4&240|d>>2;if(r.push(f),h!==64){const x=d<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sy=function(e){const t=_m(e);return Mm.encodeByteArray(t,!0)},Dm=function(e){return Sy(e).replace(/\./g,"")},jy=function(e){try{return Mm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=()=>Ey().__FIREBASE_DEFAULTS__,Cy=()=>{if(typeof process>"u"||typeof Ic>"u")return;const e=Ic.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Iy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&jy(e[1]);return t&&JSON.parse(t)},ky=()=>{try{return vy()||Ny()||Cy()||Iy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Rm=()=>{var e;return(e=ky())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Om(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sl(){try{return typeof indexedDB=="object"}catch{return!1}}function il(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}function Lm(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="FirebaseError";class Sr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ty,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yi.prototype.create)}}class Yi{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,a=this.errors[t],o=a?Py(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,l,r)}}function Py(e,t){return e.replace(_y,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const _y=/\{\$([^}]+)}/g;function wi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const a=e[s],o=t[s];if(kc(a)&&kc(o)){if(!wi(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=1e3,Dy=2,Ry=4*60*60*1e3,Oy=.5;function Ac(e,t=My,n=Dy){const r=t*Math.pow(n,e),s=Math.round(Oy*r*(Math.random()-.5)*2);return Math.min(Ry,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(e){return e&&e._delegate?e._delegate:e}class Kn{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ly=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ay;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($y(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(t=rr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rr){return this.instances.has(t)}getOptions(t=rr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(t),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&t(o,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=rr){return this.component?this.component.multipleInstances?t:rr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fy(e){return e===rr?void 0:e}function $y(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ly(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($e||($e={}));const By={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Vy=$e.INFO,Uy={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},qy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Uy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fm{constructor(t){this.name=t,this._logLevel=Vy,this._logHandler=qy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?By[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...t),this._logHandler(this,$e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...t),this._logHandler(this,$e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...t),this._logHandler(this,$e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...t),this._logHandler(this,$e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...t),this._logHandler(this,$e.ERROR,...t)}}const Hy=(e,t)=>t.some(n=>e instanceof n);let Tc,Pc;function Gy(){return Tc||(Tc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wy(){return Pc||(Pc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $m=new WeakMap,po=new WeakMap,zm=new WeakMap,ka=new WeakMap,ol=new WeakMap;function Yy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(qn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&$m.set(n,e)}).catch(()=>{}),ol.set(t,e),t}function Ky(e){if(po.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});po.set(e,t)}let go={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return po.get(e);if(t==="objectStoreNames")return e.objectStoreNames||zm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xy(e){go=e(go)}function Qy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Aa(this),t,...n);return zm.set(r,t.sort?t.sort():[t]),qn(r)}:Wy().includes(e)?function(...t){return e.apply(Aa(this),t),qn($m.get(this))}:function(...t){return qn(e.apply(Aa(this),t))}}function Jy(e){return typeof e=="function"?Qy(e):(e instanceof IDBTransaction&&Ky(e),Hy(e,Gy())?new Proxy(e,go):e)}function qn(e){if(e instanceof IDBRequest)return Yy(e);if(ka.has(e))return ka.get(e);const t=Jy(e);return t!==e&&(ka.set(e,t),ol.set(t,e)),t}const Aa=e=>ol.get(e);function Bm(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(e,t),l=qn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qn(o.result),c.oldVersion,c.newVersion,qn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Zy=["get","getKey","getAll","getAllKeys","count"],ev=["put","add","delete","clear"],Ta=new Map;function _c(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ta.get(t))return Ta.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=ev.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zy.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Ta.set(t,a),a}Xy(e=>({...e,get:(t,n,r)=>_c(t,n)||e.get(t,n,r),has:(t,n)=>!!_c(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const xo="@firebase/app",Mc="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Fm("@firebase/app"),rv="@firebase/app-compat",sv="@firebase/analytics-compat",iv="@firebase/analytics",av="@firebase/app-check-compat",ov="@firebase/app-check",lv="@firebase/auth",cv="@firebase/auth-compat",uv="@firebase/database",dv="@firebase/data-connect",mv="@firebase/database-compat",hv="@firebase/functions",fv="@firebase/functions-compat",pv="@firebase/installations",gv="@firebase/installations-compat",xv="@firebase/messaging",yv="@firebase/messaging-compat",vv="@firebase/performance",bv="@firebase/performance-compat",wv="@firebase/remote-config",Sv="@firebase/remote-config-compat",jv="@firebase/storage",Ev="@firebase/storage-compat",Nv="@firebase/firestore",Cv="@firebase/ai",Iv="@firebase/firestore-compat",kv="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]",Av={[xo]:"fire-core",[rv]:"fire-core-compat",[iv]:"fire-analytics",[sv]:"fire-analytics-compat",[ov]:"fire-app-check",[av]:"fire-app-check-compat",[lv]:"fire-auth",[cv]:"fire-auth-compat",[uv]:"fire-rtdb",[dv]:"fire-data-connect",[mv]:"fire-rtdb-compat",[hv]:"fire-fn",[fv]:"fire-fn-compat",[pv]:"fire-iid",[gv]:"fire-iid-compat",[xv]:"fire-fcm",[yv]:"fire-fcm-compat",[vv]:"fire-perf",[bv]:"fire-perf-compat",[wv]:"fire-rc",[Sv]:"fire-rc-compat",[jv]:"fire-gcs",[Ev]:"fire-gcs-compat",[Nv]:"fire-fst",[Iv]:"fire-fst-compat",[Cv]:"fire-vertex","fire-js":"fire-js",[kv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Map,Tv=new Map,vo=new Map;function Dc(e,t){try{e.container.addComponent(t)}catch(n){In.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function xr(e){const t=e.name;if(vo.has(t))return In.debug(`There were multiple attempts to register component ${t}.`),!1;vo.set(t,e);for(const n of Si.values())Dc(n,e);for(const n of Tv.values())Dc(n,e);return!0}function Ki(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new Yi("app","Firebase",Pv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}function Mv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:yo,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw Hn.create("bad-app-name",{appName:String(s)});if(n||(n=Rm()),!n)throw Hn.create("no-options");const a=Si.get(s);if(a){if(wi(n,a.options)&&wi(r,a.config))return a;throw Hn.create("duplicate-app",{appName:s})}const o=new zy(s);for(const c of vo.values())o.addComponent(c);const l=new _v(n,r,o);return Si.set(s,l),l}function Dv(e=yo){const t=Si.get(e);if(!t&&e===yo&&Rm())return Mv();if(!t)throw Hn.create("no-app",{appName:e});return t}function Gn(e,t,n){var r;let s=(r=Av[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${t}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),In.warn(l.join(" "));return}xr(new Kn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="firebase-heartbeat-database",Ov=1,Cs="firebase-heartbeat-store";let Pa=null;function Vm(){return Pa||(Pa=Bm(Rv,Ov,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Cs)}catch(n){console.warn(n)}}}}).catch(e=>{throw Hn.create("idb-open",{originalErrorMessage:e.message})})),Pa}async function Lv(e){try{const n=(await Vm()).transaction(Cs),r=await n.objectStore(Cs).get(Um(e));return await n.done,r}catch(t){if(t instanceof Sr)In.warn(t.message);else{const n=Hn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});In.warn(n.message)}}}async function Rc(e,t){try{const r=(await Vm()).transaction(Cs,"readwrite");await r.objectStore(Cs).put(t,Um(e)),await r.done}catch(n){if(n instanceof Sr)In.warn(n.message);else{const r=Hn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});In.warn(r.message)}}}function Um(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=1024,$v=30;class zv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Oc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>$v){const o=Uv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Oc(),{heartbeatsToSend:r,unsentEntries:s}=Bv(this._heartbeatsCache.heartbeats),a=Dm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return In.warn(n),""}}}function Oc(){return new Date().toISOString().substring(0,10)}function Bv(e,t=Fv){const n=[];let r=e.slice();for(const s of e){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Lc(n)>t){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Lc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sl()?il().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Lc(e){return Dm(JSON.stringify({version:2,heartbeats:e})).length}function Uv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(e){xr(new Kn("platform-logger",t=>new tv(t),"PRIVATE")),xr(new Kn("heartbeat",t=>new zv(t),"PRIVATE")),Gn(xo,Mc,e),Gn(xo,Mc,"esm2017"),Gn("fire-js","")}qv("");var Hv="firebase",Gv="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(Hv,Gv,"app");const qm="@firebase/installations",ll="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=1e4,Gm=`w:${ll}`,Wm="FIS_v2",Wv="https://firebaseinstallations.googleapis.com/v1",Yv=60*60*1e3,Kv="installations",Xv="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yr=new Yi(Kv,Xv,Qv);function Ym(e){return e instanceof Sr&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km({projectId:e}){return`${Wv}/projects/${e}/installations`}function Xm(e){return{token:e.token,requestStatus:2,expiresIn:Zv(e.expiresIn),creationTime:Date.now()}}async function Qm(e,t){const r=(await t.json()).error;return yr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Jm({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Jv(e,{refreshToken:t}){const n=Jm(e);return n.append("Authorization",eb(t)),n}async function Zm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Zv(e){return Number(e.replace("s","000"))}function eb(e){return`${Wm} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Km(e),s=Jm(e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:Wm,appId:e.appId,sdkVersion:Gm},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Zm(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Xm(d.authToken)}}else throw await Qm("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=/^[cdef][\w-]{21}$/,bo="";function sb(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=ib(e);return rb.test(n)?n:bo}catch{return bo}}function ib(e){return nb(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map;function nh(e,t){const n=Xi(e);rh(n,t),ab(n,t)}function rh(e,t){const n=th.get(e);if(n)for(const r of n)r(t)}function ab(e,t){const n=ob();n&&n.postMessage({key:e,fid:t}),lb()}let lr=null;function ob(){return!lr&&"BroadcastChannel"in self&&(lr=new BroadcastChannel("[Firebase] FID Change"),lr.onmessage=e=>{rh(e.data.key,e.data.fid)}),lr}function lb(){th.size===0&&lr&&(lr.close(),lr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="firebase-installations-database",ub=1,vr="firebase-installations-store";let _a=null;function cl(){return _a||(_a=Bm(cb,ub,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(vr)}}})),_a}async function ji(e,t){const n=Xi(e),s=(await cl()).transaction(vr,"readwrite"),a=s.objectStore(vr),o=await a.get(n);return await a.put(t,n),await s.done,(!o||o.fid!==t.fid)&&nh(e,t.fid),t}async function sh(e){const t=Xi(e),r=(await cl()).transaction(vr,"readwrite");await r.objectStore(vr).delete(t),await r.done}async function Qi(e,t){const n=Xi(e),s=(await cl()).transaction(vr,"readwrite"),a=s.objectStore(vr),o=await a.get(n),l=t(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&nh(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(e){let t;const n=await Qi(e.appConfig,r=>{const s=db(r),a=mb(e,s);return t=a.registrationPromise,a.installationEntry});return n.fid===bo?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function db(e){const t=e||{fid:sb(),registrationStatus:0};return ih(t)}function mb(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(yr.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=hb(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:fb(e)}:{installationEntry:t}}async function hb(e,t){try{const n=await tb(e,t);return ji(e.appConfig,n)}catch(n){throw Ym(n)&&n.customData.serverCode===409?await sh(e.appConfig):await ji(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function fb(e){let t=await Fc(e.appConfig);for(;t.registrationStatus===1;)await eh(100),t=await Fc(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ul(e);return r||n}return t}function Fc(e){return Qi(e,t=>{if(!t)throw yr.create("installation-not-found");return ih(t)})}function ih(e){return pb(e)?{fid:e.fid,registrationStatus:0}:e}function pb(e){return e.registrationStatus===1&&e.registrationTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb({appConfig:e,heartbeatServiceProvider:t},n){const r=xb(e,n),s=Jv(e,n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:Gm,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Zm(()=>fetch(r,l));if(c.ok){const d=await c.json();return Xm(d)}else throw await Qm("Generate Auth Token",c)}function xb(e,{fid:t}){return`${Km(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(e,t=!1){let n;const r=await Qi(e.appConfig,a=>{if(!ah(a))throw yr.create("not-registered");const o=a.authToken;if(!t&&bb(o))return a;if(o.requestStatus===1)return n=yb(e,t),a;{if(!navigator.onLine)throw yr.create("app-offline");const l=Sb(a);return n=vb(e,l),l}});return n?await n:r.authToken}async function yb(e,t){let n=await $c(e.appConfig);for(;n.authToken.requestStatus===1;)await eh(100),n=await $c(e.appConfig);const r=n.authToken;return r.requestStatus===0?dl(e,t):r}function $c(e){return Qi(e,t=>{if(!ah(t))throw yr.create("not-registered");const n=t.authToken;return jb(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function vb(e,t){try{const n=await gb(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ji(e.appConfig,r),n}catch(n){if(Ym(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sh(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ji(e.appConfig,r)}throw n}}function ah(e){return e!==void 0&&e.registrationStatus===2}function bb(e){return e.requestStatus===2&&!wb(e)}function wb(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Yv}function Sb(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function jb(e){return e.requestStatus===1&&e.requestTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(e){const t=e,{installationEntry:n,registrationPromise:r}=await ul(t);return r?r.catch(console.error):dl(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(e,t=!1){const n=e;return await Cb(n),(await dl(n,t)).token}async function Cb(e){const{registrationPromise:t}=await ul(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(e){if(!e||!e.options)throw Ma("App Configuration");if(!e.name)throw Ma("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ma(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Ma(e){return yr.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="installations",kb="installations-internal",Ab=e=>{const t=e.getProvider("app").getImmediate(),n=Ib(t),r=Ki(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Tb=e=>{const t=e.getProvider("app").getImmediate(),n=Ki(t,oh).getImmediate();return{getId:()=>Eb(n),getToken:s=>Nb(n,s)}};function Pb(){xr(new Kn(oh,Ab,"PUBLIC")),xr(new Kn(kb,Tb,"PRIVATE"))}Pb();Gn(qm,ll);Gn(qm,ll,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="analytics",_b="firebase_id",Mb="origin",Db=60*1e3,Rb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ml="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt=new Fm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new Yi("analytics","Analytics",Ob);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(e){if(!e.startsWith(ml)){const t=Ot.create("invalid-gtag-resource",{gtagURL:e});return xt.warn(t.message),""}return e}function lh(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Fb(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function $b(e,t){const n=Fb("firebase-js-sdk-policy",{createScriptURL:Lb}),r=document.createElement("script"),s=`${ml}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function zb(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Bb(e,t,n,r,s,a){const o=r[s];try{if(o)await t[o];else{const c=(await lh(n)).find(d=>d.measurementId===s);c&&await t[c.appId]}}catch(l){xt.error(l)}e("config",s,a)}async function Vb(e,t,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await lh(n);for(const c of o){const d=l.find(h=>h.measurementId===c),u=d&&t[d.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e("event",r,s||{})}catch(a){xt.error(a)}}function Ub(e,t,n,r){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await Vb(e,t,n,l,c)}else if(a==="config"){const[l,c]=o;await Bb(e,t,n,r,l,c)}else if(a==="consent"){const[l,c]=o;e("consent",l,c)}else if(a==="get"){const[l,c,d]=o;e("get",l,c,d)}else if(a==="set"){const[l]=o;e("set",l)}else e(a,...o)}catch(l){xt.error(l)}}return s}function qb(e,t,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=Ub(a,e,t,n),{gtagCore:a,wrappedGtag:window[s]}}function Hb(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ml)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=30,Wb=1e3;class Yb{constructor(t={},n=Wb){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const ch=new Yb;function Kb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Xb(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:Kb(r)},a=Rb.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function Qb(e,t=ch,n){const{appId:r,apiKey:s,measurementId:a}=e.options;if(!r)throw Ot.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Ot.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new ew;return setTimeout(async()=>{l.abort()},Db),uh({appId:r,apiKey:s,measurementId:a},o,l,t)}async function uh(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=ch){var a;const{appId:o,measurementId:l}=e;try{await Jb(r,t)}catch(c){if(l)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await Xb(e);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!Zb(d)){if(s.deleteThrottleMetadata(o),l)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const u=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?Ac(n,s.intervalMillis,Gb):Ac(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),xt.debug(`Calling attemptFetch again in ${u} millis`),uh(e,h,r,s)}}function Jb(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(a),r(Ot.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Zb(e){if(!(e instanceof Sr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class ew{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function tw(e,t,n,r,s){if(s&&s.global){e("event",n,r);return}else{const a=await t,o=Object.assign(Object.assign({},r),{send_to:a});e("event",n,o)}}async function nw(e,t){const n=await e;window[`ga-disable-${n}`]=!t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(){if(sl())try{await il()}catch(e){return xt.warn(Ot.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return xt.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sw(e,t,n,r,s,a,o){var l;const c=Qb(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>xt.error(f)),t.push(c);const d=rw().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,d]);Hb(a)||$b(a,u.measurementId),s("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[Mb]="firebase",m.update=!0,h!=null&&(m[_b]=h),s("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iw=class{constructor(t){this.app=t}_delete(){return delete Dr[this.app.options.appId],Promise.resolve()}},Dr={},zc=[];const Bc={};let Da="dataLayer",aw="gtag",Vc,dh,Uc=!1;function ow(){const e=[];if(Om()&&e.push("This is a browser extension environment."),Lm()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:t});xt.warn(n.message)}}function lw(e,t,n){ow();const r=e.options.appId;if(!r)throw Ot.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(Dr[r]!=null)throw Ot.create("already-exists",{id:r});if(!Uc){zb(Da);const{wrappedGtag:a,gtagCore:o}=qb(Dr,zc,Bc,Da,aw);dh=a,Vc=o,Uc=!0}return Dr[r]=sw(e,zc,Bc,t,Vc,Da,n),new iw(e)}function Ji(e=Dv()){e=al(e);const t=Ki(e,Ei);return t.isInitialized()?t.getImmediate():mh(e)}function mh(e,t={}){const n=Ki(e,Ei);if(n.isInitialized()){const s=n.getImmediate();if(wi(t,n.getOptions()))return s;throw Ot.create("already-initialized")}return n.initialize({options:t})}async function hh(){if(Om()||!Lm()||!sl())return!1;try{return await il()}catch{return!1}}function fh(e,t){e=al(e),nw(Dr[e.app.options.appId],t).catch(n=>xt.error(n))}function hl(e,t,n,r){e=al(e),tw(dh,Dr[e.app.options.appId],t,n,r).catch(s=>xt.error(s))}const qc="@firebase/analytics",Hc="0.10.16";function cw(){xr(new Kn(Ei,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return lw(r,s,n)},"PUBLIC")),xr(new Kn("analytics-internal",e,"PRIVATE")),Gn(qc,Hc),Gn(qc,Hc,"esm2017");function e(t){try{const n=t.getProvider(Ei).getImmediate();return{logEvent:(r,s,a)=>hl(n,r,s,a)}}catch(n){throw Ot.create("interop-component-reg-failed",{reason:n})}}}cw();const uw=Object.freeze(Object.defineProperty({__proto__:null,getAnalytics:Ji,initializeAnalytics:mh,isSupported:hh,logEvent:hl,setAnalyticsCollectionEnabled:fh},Symbol.toStringTag,{value:"Module"}));let Ra=null;const dw=()=>(console.warn("Firebase non initialis√©: cl√© API manquante"),null),fl=()=>(Ra||(Ra=dw()),Ra);let wo=null;const mw=()=>{if(typeof window<"u"){const e=fl();if(e)try{return wo=Ji(e),wo}catch(t){console.warn("Erreur lors de l'initialisation de Firebase Analytics:",t)}}return null},ph=()=>wo;var pl=(e=>(e.NAVIGATION="navigation",e.INTERACTION="interaction",e.CONTENT="content",e.MEDIA="media",e.PERFORMANCE="performance",e.ERROR="error",e.USER="user",e.FEATURE="feature",e.ONBOARDING="onboarding",e.COMMUNITY="community",e.PROGRAM="program",e.MAP="map",e.DONATION="donation",e))(pl||{}),ee=(e=>(e.PAGE_VIEW="page_view",e.ROUTE_CHANGE="route_change",e.EXTERNAL_LINK="external_link",e.BACK="back",e.FORWARD="forward",e.CLICK="click",e.SWIPE="swipe",e.SCROLL="scroll",e.ZOOM="zoom",e.DRAG="drag",e.HOVER="hover",e.FOCUS="focus",e.BLUR="blur",e.VIEW="view",e.SEARCH="search",e.FILTER="filter",e.SORT="sort",e.SHARE="share",e.SAVE="save",e.UNSAVE="unsave",e.LIKE="like",e.UNLIKE="unlike",e.PLAY="play",e.PAUSE="pause",e.COMPLETE="complete",e.SEEK="seek",e.VOLUME_CHANGE="volume_change",e.FULLSCREEN="fullscreen",e.LOAD_TIME="load_time",e.FIRST_PAINT="first_paint",e.FIRST_CONTENTFUL_PAINT="first_contentful_paint",e.FIRST_INPUT_DELAY="first_input_delay",e.JS_ERROR="js_error",e.API_ERROR="api_error",e.RESOURCE_ERROR="resource_error",e.LOGIN="login",e.LOGOUT="logout",e.REGISTER="register",e.PROFILE_UPDATE="profile_update",e.FEATURE_ENABLE="feature_enable",e.FEATURE_DISABLE="feature_disable",e.FEATURE_USE="feature_use",e.ONBOARDING_START="onboarding_start",e.ONBOARDING_COMPLETE="onboarding_complete",e.ONBOARDING_SKIP="onboarding_skip",e.ONBOARDING_SLIDE_VIEW="onboarding_slide_view",e.CONTRIBUTION="contribution",e.COMMENT="comment",e.UPLOAD="upload",e.EVENT_VIEW="event_view",e.EVENT_DETAILS="event_details",e.EVENT_REMINDER="event_reminder",e.MAP_LOAD="map_load",e.LOCATION_VIEW="location_view",e.ROUTE_CALCULATE="route_calculate",e.USER_LOCATION="user_location",e.DONATION_START="donation_start",e.DONATION_COMPLETE="donation_complete",e.DONATION_CANCEL="donation_cancel",e))(ee||{});class hw{trackEvent(t,n,r){try{const s=ph();if(!s)return;const a=`${t}_${n}`,o={event_category:t,event_action:n,timestamp:new Date().toISOString(),...r};try{const l=typeof window<"u"&&window.location.search.includes("firebase_debug=1"),c=typeof window<"u"&&localStorage.getItem("analytics_debug")==="1";(l||c)&&(o.debug_mode=!0)}catch{}hl(s,a,o)}catch(s){console.error("[Analytics] Erreur lors du tracking de l'√©v√©nement:",s)}}trackPageView(t,n){this.trackEvent("navigation","page_view",{page_path:t,page_title:n})}trackRouteChange(t,n){this.trackEvent("navigation","route_change",{from_route:t,to_route:n})}trackInteraction(t,n,r){this.trackEvent("interaction",t,{element:n,...r})}trackContentInteraction(t,n,r,s){this.trackEvent("content",t,{content_type:n,content_id:r,...s})}trackMediaInteraction(t,n,r,s){this.trackEvent("media",t,{media_type:n,media_id:r,...s})}trackPerformance(t,n,r){this.trackEvent("performance",t,{value:n,...r})}trackError(t,n,r){this.trackEvent("error",t,{error_message:n,...r})}trackUserAction(t,n){this.trackEvent("user",t,n)}trackFeatureUse(t,n){this.trackEvent("feature","feature_use",{feature_name:t,...n})}trackOnboarding(t,n){this.trackEvent("onboarding",t,n)}trackMapInteraction(t,n){this.trackEvent("map",t,n)}trackProgramInteraction(t,n){this.trackEvent("program",t,n)}trackCommunityInteraction(t,n){this.trackEvent("community",t,n)}trackDonationInteraction(t,n){this.trackEvent("donation",t,n)}trackSwipe(t,n,r,s){this.trackEvent("interaction","swipe",{swipe_direction:t,swipe_source:n,swipe_success:r,...s})}startSession(){this.trackEvent("user","login",{session_start:Date.now()}),sessionStorage.setItem("session_start",Date.now().toString())}endSession(){const t=sessionStorage.getItem("session_start");if(t){const n=Date.now()-parseInt(t,10);this.trackEvent("user","logout",{session_duration:n})}}trackBuildingView(t,n){this.trackEvent("content","view",{content_type:"building",building_id:t,building_name:n})}trackBuildingHistoryView(t,n){this.trackEvent("content","view",{content_type:"building_history",building_id:t,section_title:n})}trackArtistView(t,n){this.trackEvent("content","view",{content_type:"artist",artist_id:t,artist_name:n})}trackConcertView(t,n,r){this.trackEvent("program","event_view",{event_id:t,event_title:n,event_date:r})}trackProgramCTA(t,n){this.trackEvent("program","click",{cta_action:t,event_id:n})}trackDonationPageOpen(t){this.trackEvent("donation","view",{page:"donation",source:t})}trackIntroVideo(t){const r={start:"play",complete:"complete",skip:"pause"}[t]||"play";this.trackEvent("media",r,{media_type:"intro_video"})}trackAudio(t,n,r){const a={play:"play",pause:"pause",seek:"seek",volume_change:"volume_change"}[t]||"play";this.trackEvent("media",a,{media_type:"audio",media_id:n,value:r})}}const z=new hw,fw=(e,t)=>z.trackPageView(e,t),pw=(e,t,n)=>z.trackEvent(e,t,n),So=(e,t,n)=>z.trackInteraction(e,t,n),gw=(e,t,n,r)=>z.trackSwipe(e,t,n,r),xw=(e,t)=>z.trackFeatureUse(e,t),yw=2e3;let Oa=0;function vw(){return Oa=(Oa+1)%Number.MAX_SAFE_INTEGER,Oa.toString()}const La=new Map,Gc=e=>{if(La.has(e))return;const t=setTimeout(()=>{La.delete(e),xs({type:"REMOVE_TOAST",toastId:e})},yw);La.set(e,t)},bw=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[...e.toasts,t.toast]};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Gc(n):e.toasts.forEach(r=>{Gc(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},ui=[];let di={toasts:[]};function xs(e){di=bw(di,e),ui.forEach(t=>{t(di)})}function jt(e){const t=vw(),n=s=>xs({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>xs({type:"DISMISS_TOAST",toastId:t});return xs({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function gl(){const[e,t]=p.useState(di);return p.useEffect(()=>(ui.push(t),()=>{const n=ui.indexOf(t);n>-1&&ui.splice(n,1)}),[e]),{...e,toast:jt,dismiss:n=>xs({type:"DISMISS_TOAST",toastId:n})}}function gh(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=gh(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xh(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=gh(e))&&(r&&(r+=" "),r+=t);return r}const Wc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Yc=xh,Zi=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Yc(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const m=Wc(u)||Wc(h);return s[d][m]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...d,h,m]:d},[]);return Yc(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},xl="-",ww=e=>{const t=jw(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(xl);return l[0]===""&&l.length!==1&&l.shift(),yh(l,t)||Sw(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},yh=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?yh(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(xl);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},Kc=/^\[(.+)\]$/,Sw=e=>{if(Kc.test(e)){const t=Kc.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},jw=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Nw(Object.entries(e.classGroups),n).forEach(([a,o])=>{jo(o,r,a,t)}),r},jo=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:Xc(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(Ew(s)){jo(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{jo(o,Xc(t,a),n,r)})})},Xc=(e,t)=>{let n=e;return t.split(xl).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Ew=e=>e.isThemeGetter,Nw=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,s]}):e,Cw=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},vh="!",Iw=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let y=0;y<l.length;y++){let S=l[y];if(d===0){if(S===s&&(r||l.slice(y,y+a)===t)){c.push(l.slice(u,y)),u=y+a;continue}if(S==="/"){h=y;continue}}S==="["?d++:S==="]"&&d--}const m=c.length===0?l:l.substring(u),f=m.startsWith(vh),x=f?m.substring(1):m,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},kw=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Aw=e=>({cache:Cw(e.cacheSize),parseClassName:Iw(e),...ww(e)}),Tw=/\s+/,Pw=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(Tw);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(d);let x=!!f,g=r(x?m.substring(0,f):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const y=kw(u).join(":"),S=h?y+vh:y,v=S+g;if(a.includes(v))continue;a.push(v);const b=s(g,x);for(let w=0;w<b.length;++w){const A=b[w];a.push(S+A)}l=d+(l.length>0?" "+l:l)}return l};function _w(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=bh(t))&&(r&&(r+=" "),r+=n);return r}const bh=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=bh(e[r]))&&(n&&(n+=" "),n+=t);return n};function Mw(e,...t){let n,r,s,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=Aw(d),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=Pw(c,n);return s(c,u),u}return function(){return a(_w.apply(null,arguments))}}const Le=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},wh=/^\[(?:([a-z-]+):)?(.+)\]$/i,Dw=/^\d+\/\d+$/,Rw=new Set(["px","full","screen"]),Ow=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$w=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yn=e=>Rr(e)||Rw.has(e)||Dw.test(e),Tn=e=>ts(e,"length",Yw),Rr=e=>!!e&&!Number.isNaN(Number(e)),Fa=e=>ts(e,"number",Rr),as=e=>!!e&&Number.isInteger(Number(e)),Bw=e=>e.endsWith("%")&&Rr(e.slice(0,-1)),pe=e=>wh.test(e),Pn=e=>Ow.test(e),Vw=new Set(["length","size","percentage"]),Uw=e=>ts(e,Vw,Sh),qw=e=>ts(e,"position",Sh),Hw=new Set(["image","url"]),Gw=e=>ts(e,Hw,Xw),Ww=e=>ts(e,"",Kw),os=()=>!0,ts=(e,t,n)=>{const r=wh.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Yw=e=>Lw.test(e)&&!Fw.test(e),Sh=()=>!1,Kw=e=>$w.test(e),Xw=e=>zw.test(e),Qw=()=>{const e=Le("colors"),t=Le("spacing"),n=Le("blur"),r=Le("brightness"),s=Le("borderColor"),a=Le("borderRadius"),o=Le("borderSpacing"),l=Le("borderWidth"),c=Le("contrast"),d=Le("grayscale"),u=Le("hueRotate"),h=Le("invert"),m=Le("gap"),f=Le("gradientColorStops"),x=Le("gradientColorStopPositions"),g=Le("inset"),y=Le("margin"),S=Le("opacity"),v=Le("padding"),b=Le("saturate"),w=Le("scale"),A=Le("sepia"),C=Le("skew"),M=Le("space"),_=Le("translate"),k=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",pe,t],T=()=>[pe,t],$=()=>["",yn,Tn],H=()=>["auto",Rr,pe],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",pe],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Rr,pe];return{cacheSize:500,separator:":",theme:{colors:[os],spacing:[yn,Tn],blur:["none","",Pn,pe],brightness:Q(),borderColor:[e],borderRadius:["none","","full",Pn,pe],borderSpacing:T(),borderWidth:$(),contrast:Q(),grayscale:q(),hueRotate:Q(),invert:q(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[Bw,Tn],inset:N(),margin:N(),opacity:Q(),padding:T(),saturate:Q(),scale:Q(),sepia:q(),skew:Q(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[Pn]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),pe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",as,pe]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",as,pe]}],"grid-cols":[{"grid-cols":[os]}],"col-start-end":[{col:["auto",{span:["full",as,pe]},pe]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[os]}],"row-start-end":[{row:["auto",{span:[as,pe]},pe]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,t]}],"min-w":[{"min-w":[pe,t,"min","max","fit"]}],"max-w":[{"max-w":[pe,t,"none","full","min","max","fit","prose",{screen:[Pn]},Pn]}],h:[{h:[pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Pn,Tn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fa]}],"font-family":[{font:[os]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",Rr,Fa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yn,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yn,Tn]}],"underline-offset":[{"underline-offset":["auto",yn,pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),qw]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Uw]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Gw]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[yn,pe]}],"outline-w":[{outline:[yn,Tn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[yn,Tn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pn,Ww]}],"shadow-color":[{shadow:[os]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pn,pe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[as,pe]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[yn,Tn,Fa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Jw=Mw(Qw);function se(...e){return Jw(xh(e))}const Zw=fx,jh=p.forwardRef(({className:e,...t},n)=>i.jsx(Wd,{ref:n,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));jh.displayName=Wd.displayName;const e0=Zi("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Eh=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(Yd,{ref:r,className:se(e0({variant:t}),e),...n}));Eh.displayName=Yd.displayName;const Nh=p.forwardRef(({className:e,...t},n)=>i.jsx(Kd,{ref:n,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Nh.displayName=Kd.displayName;const Ch=p.forwardRef(({className:e,...t},n)=>i.jsx(Xd,{ref:n,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(gr,{className:"h-4 w-4"})}));Ch.displayName=Xd.displayName;const Ih=p.forwardRef(({className:e,...t},n)=>i.jsx(Qd,{ref:n,className:se("text-sm font-semibold",e),...t}));Ih.displayName=Qd.displayName;const kh=p.forwardRef(({className:e,...t},n)=>i.jsx(Jd,{ref:n,className:se("text-sm opacity-90",e),...t}));kh.displayName=Jd.displayName;function t0(){const{toasts:e}=gl();return i.jsxs(Zw,{"data-swipe-direction":"right",swipeThreshold:10,children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return i.jsxs(Eh,{...a,"data-swipe-direction":"right",children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Ih,{children:n}),r&&i.jsx(kh,{children:r})]}),s,i.jsx(Ch,{})]},t)}),i.jsx(jh,{})]})}var mi={linear:function(e,t,n,r){var s=n-t;return s*e/r+t},easeInQuad:function(e,t,n,r){var s=n-t;return s*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){var s=n-t;return-s*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){var s=n-t;return-s*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){var s=n-t;return s*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){var s=n-t;return s*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var s=n-t;return-s*Math.cos(e/r*(Math.PI/2))+s+t},easeOutSine:function(e,t,n,r){var s=n-t;return s*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){var s=n-t;return-s/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){var s=n-t;return e==0?t:s*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var s=n-t;return e==r?t+s:s*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){var s=n-t;return e===0?t:e===r?t+s:(e/=r/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,r){var s=n-t;return-s*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){var s=n-t;return s*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var s=n-t;return(e/=r/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t)},easeOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r)===1?t+s:(o||(o=r*.3),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),a*Math.pow(2,-10*e)*Math.sin((e*r-l)*(2*Math.PI)/o)+s+t)},easeInOutElastic:function(e,t,n,r){var s=n-t,a,o,l;return l=1.70158,o=0,a=s,e===0?t:(e/=r/2)===2?t+s:(o||(o=r*(.3*1.5)),a<Math.abs(s)?(a=s,l=o/4):l=o/(2*Math.PI)*Math.asin(s/a),e<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-l)*(2*Math.PI)/o)*.5+s+t)},easeInBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*(e/=r)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),a*((e=e/r-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,n,r,s){var a=n-t;return s===void 0&&(s=1.70158),(e/=r/2)<1?a/2*(e*e*(((s*=1.525)+1)*e-s))+t:a/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},easeInBounce:function(e,t,n,r){var s=n-t,a;return a=mi.easeOutBounce(r-e,0,s,r),s-a+t},easeOutBounce:function(e,t,n,r){var s=n-t;return(e/=r)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){var s=n-t,a;return e<r/2?(a=mi.easeInBounce(e*2,0,s,r),a*.5+t):(a=mi.easeOutBounce(e*2-r,0,s,r),a*.5+s*.5+t)}},n0=mi;function r0(e){return e*Math.PI/180}function At(e,t){return e+Math.random()*(t-e)}function s0(e,t){return Math.floor(e+Math.random()*(t-e+1))}var ys;(function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"})(ys||(ys={}));var On;(function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"})(On||(On={}));const i0=1e3/60;class a0{constructor(t,n,r,s){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=t,this.x=r,this.y=s,this.w=At(5,20),this.h=At(5,20),this.radius=At(5,10),this.vx=typeof o=="number"?At(-o,o):At(o.min,o.max),this.vy=typeof l=="number"?At(-l,0):At(l.min,l.max),this.shape=s0(0,2),this.angle=r0(At(0,360)),this.angularSpin=At(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=At(0,1),this.rotationDirection=At(0,1)?On.Positive:On.Negative}update(t){const{gravity:n,wind:r,friction:s,opacity:a,drawShape:o}=this.getOptions(),l=t/i0;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===On.Positive?this.rotationDirection=On.Negative:this.rotateY<=-1&&this.rotationDirection===On.Negative&&(this.rotationDirection=On.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case ys.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ys.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ys.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class o0{constructor(t,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=At(this.x,this.w+this.x),a=At(this.y,this.h+this.y);return new a0(this.context,this.getOptions,s,a)},this.animate=s=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:d,recycle:u,numberOfPieces:h,debug:m,tweenFunction:f,tweenDuration:x}=this.getOptions();if(!d)return!1;const g=this.particles.length,y=u?g:l;if(y<h){c!==h&&(this.tweenProgress=0,this.tweenFrom=y,this.lastNumberOfPieces=h),this.tweenProgress=Math.min(x,Math.max(0,this.tweenProgress+s));const S=f(this.tweenProgress,this.tweenFrom,h,x),v=Math.round(S-y);for(let b=0;b<v;b++)this.particles.push(this.getParticle());this.particlesGenerated+=v}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${g}`,a.width-10,a.height-20));for(let S=this.particles.length-1;S>=0;S--){const v=this.particles[S];v.update(s),(v.y>a.height||v.y<-100||v.x>a.width+100||v.x<-100)&&(u&&y<=h?this.particles[S]=this.getParticle():this.removeParticleAt(S))}return g>0||y<h},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const yl={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:n0.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class l0{constructor(t,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...yl,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:c,context:d}=this,u=Math.min(s-this.lastFrameTime,50);if(l&&u<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?u%l:0),a&&(d.fillStyle="white",d.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new o0(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(t){var s,a;const n=(s=this._options)==null?void 0:s.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&n===!1&&this.update()}}const c0=F.createRef();class vl extends F.Component{constructor(t){super(t),this.canvas=F.createRef(),this.canvas=t.canvasRef||c0}componentDidMount(){if(this.canvas.current){const t=$a(this.props)[0];this.confetti=new l0(this.canvas.current,t)}}componentDidUpdate(){const t=$a(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,n]=$a(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return i.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...n,style:r})}}vl.defaultProps={...yl};vl.displayName="ReactConfetti";function $a(e){const t={},n={},r={},s=[...Object.keys(yl),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in e){const l=e[o];s.includes(o)?t[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[t,r,n]}const u0=F.forwardRef((e,t)=>i.jsx(vl,{canvasRef:t,...e})),d0=()=>{const[e,t]=p.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return p.useEffect(()=>{const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),e},hi=({trigger:e,duration:t=3e3,message:n,onComplete:r})=>{const[s,a]=p.useState(!1),{width:o,height:l}=d0(),c=o||window.innerWidth||document.documentElement.clientWidth||375,d=l||window.innerHeight||document.documentElement.clientHeight||667;return p.useEffect(()=>{if(e){console.log("Celebration triggered with message:",n),a(!0);const u=setTimeout(()=>{a(!1),r&&r()},t);return()=>clearTimeout(u)}},[e,t,n,r]),s?i.jsxs("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[i.jsx(u0,{width:c,height:d,recycle:!1,numberOfPieces:200,gravity:.2,tweenDuration:5e3}),n&&i.jsx("div",{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white bg-opacity-80 px-6 py-3 rounded-lg shadow-lg text-center",children:i.jsx("p",{className:"text-lg font-bold text-[#4a5d94]",children:n})})]}):null};var st=(e=>(e.FIRST_EVENT_SAVED="first_event_saved",e.ALL_LOCATIONS_VISITED="all_locations_visited",e.MULTIPLE_EVENTS_SAVED="multiple_events_saved",e.NOTIFICATION_SET="notification_set",e.FIRST_LOCATION_VISITED="first_location_visited",e.THREE_LOCATIONS_VISITED="three_locations_visited",e.FIVE_LOCATIONS_VISITED="five_locations_visited",e))(st||{});const m0=[{id:"first_event_saved",title:"Premier √©v√©nement sauvegard√©",description:"Vous avez sauvegard√© votre premier √©v√©nement",celebrationMessage:"F√©licitations ! Vous avez sauvegard√© votre premier √©v√©nement !"},{id:"all_locations_visited",title:"Explorateur de l'√éle",description:"Vous avez visit√© tous les lieux de l'√éle Feydeau",celebrationMessage:"Bravo ! Vous avez visit√© tous les lieux de l'√éle Feydeau !"},{id:"multiple_events_saved",title:"Collectionneur d'√©v√©nements",description:"Vous avez sauvegard√© 5 √©v√©nements ou plus",celebrationMessage:"Impressionnant ! Vous √™tes un vrai collectionneur d'√©v√©nements !"},{id:"notification_set",title:"Toujours √† l'heure",description:"Vous avez configur√© votre premi√®re notification",celebrationMessage:"Super ! Vous ne manquerez plus aucun √©v√©nement !"},{id:"first_location_visited",title:"Premier pas sur l'√éle",description:"Vous avez visit√© votre premier lieu sur l'√éle Feydeau",celebrationMessage:"F√©licitations ! Vous avez fait votre premier pas sur l'√éle Feydeau !"},{id:"three_locations_visited",title:"Explorateur en herbe",description:"Vous avez visit√© 3 lieux sur l'√éle Feydeau",celebrationMessage:"Vous commencez √† bien conna√Ætre l'√éle Feydeau !"},{id:"five_locations_visited",title:"Guide de l'√éle",description:"Vous avez visit√© 5 lieux sur l'√éle Feydeau",celebrationMessage:"Impressionnant ! Vous pourriez maintenant guider les visiteurs sur l'√éle Feydeau !"}],fi=e=>{try{const t=localStorage.getItem("unlockedAchievements");return t?!!JSON.parse(t)[e]:!1}catch(t){return console.error("Erreur dans isAchievementUnlocked:",t),!1}},Ni=e=>{try{console.log(`[achievements] Tentative de d√©blocage de l'achievement: ${e}`);const t=fi(e);if(console.log(`[achievements] Achievement d√©j√† d√©bloqu√©: ${t}`),t)return console.log("[achievements] Achievement d√©j√† d√©bloqu√©, aucune action n√©cessaire"),!1;const n=localStorage.getItem("unlockedAchievements");console.log(`[achievements] R√©cup√©ration des achievements d√©bloqu√©s depuis localStorage: ${n||"aucun"}`);let r={};if(n)try{r=JSON.parse(n),console.log("[achievements] Achievements d√©bloqu√©s pars√©s:",r)}catch(a){console.error("[achievements] Erreur lors de la lecture des r√©alisations d√©bloqu√©es:",a),r={}}const s=new Date().toISOString();r[e]=s,localStorage.setItem("unlockedAchievements",JSON.stringify(r)),console.log(`[achievements] Achievement ${e} d√©bloqu√© √† ${s}`);try{console.log("[achievements] Planification du d√©clenchement de l'√©v√©nement d'achievement dans 100ms"),setTimeout(()=>{const a=pi(e);if(console.log(`[achievements] Message de c√©l√©bration: ${a}`),a){console.log(`[achievements] D√©clenchement de l'√©v√©nement global app-achievement pour: ${e}`);const o=new CustomEvent("app-achievement",{detail:{type:e,message:a}});window.dispatchEvent(o),console.log("[achievements] √âv√©nement global dispatch√© avec succ√®s")}else console.error(`[achievements] Impossible de trouver un message pour l'achievement ${e}`)},100)}catch(a){console.error("[achievements] Erreur lors du d√©clenchement de l'achievement:",a)}return!0}catch(t){return console.error("[achievements] Erreur globale dans unlockAchievement:",t),!1}},pi=e=>{const t=m0.find(n=>n.id===e);return t?t.celebrationMessage:null};var Qc=["light","dark"],h0="(prefers-color-scheme: dark)",f0=p.createContext(void 0),p0={setTheme:e=>{},themes:[]},g0=()=>{var e;return(e=p.useContext(f0))!=null?e:p0};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let d=a==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Qc.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,y=!0)=>{let S=o?o[x]:x,v=g?x+"|| ''":`'${S}'`,b="";return s&&y&&!g&&Qc.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),n==="class"?g||S?b+=`c.add(${v})`:b+="null":S&&(b+=`d[s](n,${v})`),b},f=e?`!function(){${u}${m(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${h0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var x0=e=>{switch(e){case"success":return b0;case"info":return S0;case"warning":return w0;case"error":return j0;default:return null}},y0=Array(12).fill(0),v0=({visible:e})=>F.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},F.createElement("div",{className:"sonner-spinner"},y0.map((t,n)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),b0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),w0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),S0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),j0=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),E0=()=>{let[e,t]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Eo=1,N0=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Eo++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0;return r.then(async a=>{if(I0(a)&&!a.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:n,type:"error",message:o,description:l})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"success",message:o,description:l})}}).catch(async a=>{if(t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:n,type:"error",message:o,description:l})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=t.finally)==null||a.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Eo++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},_t=new N0,C0=(e,t)=>{let n=(t==null?void 0:t.id)||Eo++;return _t.addToast({title:e,...t,id:n}),n},I0=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",k0=C0,A0=()=>_t.toasts;Object.assign(k0,{success:_t.success,info:_t.info,warning:_t.warning,error:_t.error,custom:_t.custom,message:_t.message,promise:_t.promise,dismiss:_t.dismiss,loading:_t.loading},{getHistory:A0});function T0(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}T0(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ks(e){return e.label!==void 0}var P0=3,_0="32px",M0=4e3,D0=356,R0=14,O0=20,L0=200;function F0(...e){return e.filter(Boolean).join(" ")}var $0=e=>{var t,n,r,s,a,o,l,c,d,u;let{invert:h,toast:m,unstyled:f,interacting:x,setHeights:g,visibleToasts:y,heights:S,index:v,toasts:b,expanded:w,removeToast:A,defaultRichColors:C,closeButton:M,style:_,cancelButtonStyle:k,actionButtonStyle:P,className:N="",descriptionClassName:T="",duration:$,position:H,gap:Y,loadingIcon:Z,expandByDefault:te,classNames:L,icons:q,closeButtonAriaLabel:j="Close toast",pauseWhenPageIsHidden:Q,cn:ie}=e,[E,ce]=F.useState(!1),[Pe,ae]=F.useState(!1),[Ie,V]=F.useState(!1),[ne,ye]=F.useState(!1),[Te,bt]=F.useState(0),[Qt,Ct]=F.useState(0),Ft=F.useRef(null),Ge=F.useRef(null),at=v===0,I=v+1<=y,D=m.type,O=m.dismissible!==!1,K=m.className||"",X=m.descriptionClassName||"",G=F.useMemo(()=>S.findIndex(ue=>ue.toastId===m.id)||0,[S,m.id]),oe=F.useMemo(()=>{var ue;return(ue=m.closeButton)!=null?ue:M},[m.closeButton,M]),fe=F.useMemo(()=>m.duration||$||M0,[m.duration,$]),R=F.useRef(0),U=F.useRef(0),le=F.useRef(0),he=F.useRef(null),[we,nt]=H.split("-"),$t=F.useMemo(()=>S.reduce((ue,Oe,_e)=>_e>=G?ue:ue+Oe.height,0),[S,G]),dt=E0(),xn=m.invert||h,zt=D==="loading";U.current=F.useMemo(()=>G*Y+$t,[G,$t]),F.useEffect(()=>{ce(!0)},[]),F.useLayoutEffect(()=>{if(!E)return;let ue=Ge.current,Oe=ue.style.height;ue.style.height="auto";let _e=ue.getBoundingClientRect().height;ue.style.height=Oe,Ct(_e),g(Jt=>Jt.find(Zt=>Zt.toastId===m.id)?Jt.map(Zt=>Zt.toastId===m.id?{...Zt,height:_e}:Zt):[{toastId:m.id,height:_e,position:m.position},...Jt])},[E,m.title,m.description,g,m.id]);let Ue=F.useCallback(()=>{ae(!0),bt(U.current),g(ue=>ue.filter(Oe=>Oe.toastId!==m.id)),setTimeout(()=>{A(m)},L0)},[m,A,g,U]);F.useEffect(()=>{if(m.promise&&D==="loading"||m.duration===1/0||m.type==="loading")return;let ue,Oe=fe;return w||x||Q&&dt?(()=>{if(le.current<R.current){let _e=new Date().getTime()-R.current;Oe=Oe-_e}le.current=new Date().getTime()})():Oe!==1/0&&(R.current=new Date().getTime(),ue=setTimeout(()=>{var _e;(_e=m.onAutoClose)==null||_e.call(m,m),Ue()},Oe)),()=>clearTimeout(ue)},[w,x,te,m,fe,Ue,m.promise,D,Q,dt]),F.useEffect(()=>{let ue=Ge.current;if(ue){let Oe=ue.getBoundingClientRect().height;return Ct(Oe),g(_e=>[{toastId:m.id,height:Oe,position:m.position},..._e]),()=>g(_e=>_e.filter(Jt=>Jt.toastId!==m.id))}},[g,m.id]),F.useEffect(()=>{m.delete&&Ue()},[Ue,m.delete]);function An(){return q!=null&&q.loading?F.createElement("div",{className:"sonner-loader","data-visible":D==="loading"},q.loading):Z?F.createElement("div",{className:"sonner-loader","data-visible":D==="loading"},Z):F.createElement(v0,{visible:D==="loading"})}return F.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ge,className:ie(N,K,L==null?void 0:L.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[D],(n=m==null?void 0:m.classNames)==null?void 0:n[D]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:C,"data-styled":!(m.jsx||m.unstyled||f),"data-mounted":E,"data-promise":!!m.promise,"data-removed":Pe,"data-visible":I,"data-y-position":we,"data-x-position":nt,"data-index":v,"data-front":at,"data-swiping":Ie,"data-dismissible":O,"data-type":D,"data-invert":xn,"data-swipe-out":ne,"data-expanded":!!(w||te&&E),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${Pe?Te:U.current}px`,"--initial-height":te?"auto":`${Qt}px`,..._,...m.style},onPointerDown:ue=>{zt||!O||(Ft.current=new Date,bt(U.current),ue.target.setPointerCapture(ue.pointerId),ue.target.tagName!=="BUTTON"&&(V(!0),he.current={x:ue.clientX,y:ue.clientY}))},onPointerUp:()=>{var ue,Oe,_e,Jt;if(ne||!O)return;he.current=null;let Zt=Number(((ue=Ge.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Gs=new Date().getTime()-((Oe=Ft.current)==null?void 0:Oe.getTime()),dx=Math.abs(Zt)/Gs;if(Math.abs(Zt)>=O0||dx>.11){bt(U.current),(_e=m.onDismiss)==null||_e.call(m,m),Ue(),ye(!0);return}(Jt=Ge.current)==null||Jt.style.setProperty("--swipe-amount","0px"),V(!1)},onPointerMove:ue=>{var Oe;if(!he.current||!O)return;let _e=ue.clientY-he.current.y,Jt=ue.clientX-he.current.x,Zt=(we==="top"?Math.min:Math.max)(0,_e),Gs=ue.pointerType==="touch"?10:2;Math.abs(Zt)>Gs?(Oe=Ge.current)==null||Oe.style.setProperty("--swipe-amount",`${_e}px`):Math.abs(Jt)>Gs&&(he.current=null)}},oe&&!m.jsx?F.createElement("button",{"aria-label":j,"data-disabled":zt,"data-close-button":!0,onClick:zt||!O?()=>{}:()=>{var ue;Ue(),(ue=m.onDismiss)==null||ue.call(m,m)},className:ie(L==null?void 0:L.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||F.isValidElement(m.title)?m.jsx||m.title:F.createElement(F.Fragment,null,D||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:ie(L==null?void 0:L.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||An():null,m.type!=="loading"?m.icon||(q==null?void 0:q[D])||x0(D):null):null,F.createElement("div",{"data-content":"",className:ie(L==null?void 0:L.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},F.createElement("div",{"data-title":"",className:ie(L==null?void 0:L.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?F.createElement("div",{"data-description":"",className:ie(T,X,L==null?void 0:L.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),F.isValidElement(m.cancel)?m.cancel:m.cancel&&Ks(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||k,onClick:ue=>{var Oe,_e;Ks(m.cancel)&&O&&((_e=(Oe=m.cancel).onClick)==null||_e.call(Oe,ue),Ue())},className:ie(L==null?void 0:L.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,F.isValidElement(m.action)?m.action:m.action&&Ks(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:ue=>{var Oe,_e;Ks(m.action)&&(ue.defaultPrevented||((_e=(Oe=m.action).onClick)==null||_e.call(Oe,ue),Ue()))},className:ie(L==null?void 0:L.actionButton,(u=m==null?void 0:m.classNames)==null?void 0:u.actionButton)},m.action.label):null))};function Jc(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var z0=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:m=P0,toastOptions:f,dir:x=Jc(),gap:g=R0,loadingIcon:y,icons:S,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:b,cn:w=F0}=e,[A,C]=F.useState([]),M=F.useMemo(()=>Array.from(new Set([n].concat(A.filter(Q=>Q.position).map(Q=>Q.position)))),[A,n]),[_,k]=F.useState([]),[P,N]=F.useState(!1),[T,$]=F.useState(!1),[H,Y]=F.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=F.useRef(null),te=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=F.useRef(null),q=F.useRef(!1),j=F.useCallback(Q=>{var ie;(ie=A.find(E=>E.id===Q.id))!=null&&ie.delete||_t.dismiss(Q.id),C(E=>E.filter(({id:ce})=>ce!==Q.id))},[A]);return F.useEffect(()=>_t.subscribe(Q=>{if(Q.dismiss){C(ie=>ie.map(E=>E.id===Q.id?{...E,delete:!0}:E));return}setTimeout(()=>{cy.flushSync(()=>{C(ie=>{let E=ie.findIndex(ce=>ce.id===Q.id);return E!==-1?[...ie.slice(0,E),{...ie[E],...Q},...ie.slice(E+1)]:[Q,...ie]})})})}),[]),F.useEffect(()=>{if(c!=="system"){Y(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Q})=>{Y(Q?"dark":"light")})},[c]),F.useEffect(()=>{A.length<=1&&N(!1)},[A]),F.useEffect(()=>{let Q=ie=>{var E,ce;r.every(Pe=>ie[Pe]||ie.code===Pe)&&(N(!0),(E=Z.current)==null||E.focus()),ie.code==="Escape"&&(document.activeElement===Z.current||(ce=Z.current)!=null&&ce.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[r]),F.useEffect(()=>{if(Z.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,q.current=!1)}},[Z.current]),A.length?F.createElement("section",{"aria-label":`${v} ${te}`,tabIndex:-1},M.map((Q,ie)=>{var E;let[ce,Pe]=Q.split("-");return F.createElement("ol",{key:Q,dir:x==="auto"?Jc():x,tabIndex:-1,ref:Z,className:o,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":ce,"data-x-position":Pe,style:{"--front-toast-height":`${((E=_[0])==null?void 0:E.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||_0,"--width":`${D0}px`,"--gap":`${g}px`,...h},onBlur:ae=>{q.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(q.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||q.current||(q.current=!0,L.current=ae.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{T||N(!1)},onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},A.filter(ae=>!ae.position&&ie===0||ae.position===Q).map((ae,Ie)=>{var V,ne;return F.createElement($0,{key:ae.id,icons:S,index:Ie,toast:ae,defaultRichColors:d,duration:(V=f==null?void 0:f.duration)!=null?V:u,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:t,visibleToasts:m,closeButton:(ne=f==null?void 0:f.closeButton)!=null?ne:a,interacting:T,position:Q,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:j,toasts:A.filter(ye=>ye.position==ae.position),heights:_.filter(ye=>ye.position==ae.position),setHeights:k,expandByDefault:s,gap:g,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:b,cn:w})}))})):null};const B0=({...e})=>{const{theme:t="system"}=g0();return i.jsx(z0,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[ea,L2]=Zr("Tooltip",[qi]),ta=qi(),Ah="TooltipProvider",V0=700,No="tooltip.open",[U0,bl]=ea(Ah),Th=e=>{const{__scopeTooltip:t,delayDuration:n=V0,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,[o,l]=p.useState(!0),c=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),i.jsx(U0,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(u=>{c.current=u},[]),disableHoverableContent:s,children:a})};Th.displayName=Ah;var na="Tooltip",[q0,ra]=ea(na),Ph=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=bl(na,e.__scopeTooltip),d=ta(t),[u,h]=p.useState(null),m=mo(),f=p.useRef(0),x=o??c.disableHoverableContent,g=l??c.delayDuration,y=p.useRef(!1),[S=!1,v]=Hi({prop:r,defaultProp:s,onChange:M=>{M?(c.onOpen(),document.dispatchEvent(new CustomEvent(No))):c.onClose(),a==null||a(M)}}),b=p.useMemo(()=>S?y.current?"delayed-open":"instant-open":"closed",[S]),w=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y.current=!1,v(!0)},[v]),A=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),C=p.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,v(!0),f.current=0},g)},[g,v]);return p.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),i.jsx(rm,{...d,children:i.jsx(q0,{scope:t,contentId:m,open:S,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?C():w()},[c.isOpenDelayed,C,w]),onTriggerLeave:p.useCallback(()=>{x?A():(window.clearTimeout(f.current),f.current=0)},[A,x]),onOpen:w,onClose:A,disableHoverableContent:x,children:n})})};Ph.displayName=na;var Co="TooltipTrigger",_h=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ra(Co,n),a=bl(Co,n),o=ta(n),l=p.useRef(null),c=et(t,l,s.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),h=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Zd,{asChild:!0,...o,children:i.jsx(Ke.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:me(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:me(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:me(e.onBlur,s.onClose),onClick:me(e.onClick,s.onClose)})})});_h.displayName=Co;var H0="TooltipPortal",[F2,G0]=ea(H0,{forceMount:void 0}),Kr="TooltipContent",Mh=p.forwardRef((e,t)=>{const n=G0(Kr,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=ra(Kr,e.__scopeTooltip);return i.jsx(pn,{present:r||o.open,children:o.disableHoverableContent?i.jsx(Dh,{side:s,...a,ref:t}):i.jsx(W0,{side:s,...a,ref:t})})}),W0=p.forwardRef((e,t)=>{const n=ra(Kr,e.__scopeTooltip),r=bl(Kr,e.__scopeTooltip),s=p.useRef(null),a=et(t,s),[o,l]=p.useState(null),{trigger:c,onClose:d}=n,u=s.current,{onPointerInTransitChange:h}=r,m=p.useCallback(()=>{l(null),h(!1)},[h]),f=p.useCallback((x,g)=>{const y=x.currentTarget,S={x:x.clientX,y:x.clientY},v=Q0(S,y.getBoundingClientRect()),b=J0(S,v),w=Z0(g.getBoundingClientRect()),A=t1([...b,...w]);l(A),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&u){const x=y=>f(y,u),g=y=>f(y,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,f,m]),p.useEffect(()=>{if(o){const x=g=>{const y=g.target,S={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),b=!e1(S,o);v?m():b&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),i.jsx(Dh,{...e,ref:a})}),[Y0,K0]=ea(na,{isInside:!1}),Dh=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=ra(Kr,n),d=ta(n),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(No,u),()=>document.removeEventListener(No,u)),[u]),p.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),i.jsx(em,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:i.jsxs(tm,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(px,{children:r}),i.jsx(Y0,{scope:n,isInside:!0,children:i.jsx(gx,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Mh.displayName=Kr;var Rh="TooltipArrow",X0=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ta(n);return K0(Rh,n).isInside?null:i.jsx(nm,{...s,...r,ref:t})});X0.displayName=Rh;function Q0(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function J0(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Z0(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function e1(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function t1(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),n1(t)}function n1(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var r1=Th,s1=Ph,i1=_h,Oh=Mh;const Lh=r1,a1=s1,o1=i1,Fh=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Oh,{ref:r,sideOffset:t,className:se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Fh.displayName=Oh.displayName;var sa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ia=typeof window>"u"||"Deno"in globalThis;function Gt(){}function l1(e,t){return typeof e=="function"?e(t):e}function c1(e){return typeof e=="number"&&e>=0&&e!==1/0}function u1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Zc(e,t){return typeof e=="function"?e(t):e}function d1(e,t){return typeof e=="function"?e(t):e}function eu(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==wl(o,t.options))return!1}else if(!ks(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function tu(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Is(t.options.mutationKey)!==Is(a))return!1}else if(!ks(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function wl(e,t){return((t==null?void 0:t.queryKeyHashFn)||Is)(e)}function Is(e){return JSON.stringify(e,(t,n)=>Io(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ks(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!ks(e[n],t[n])):!1}function $h(e,t){if(e===t)return e;const n=nu(e)&&nu(t);if(n||Io(e)&&Io(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=$h(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function nu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Io(e){if(!ru(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!ru(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ru(e){return Object.prototype.toString.call(e)==="[object Object]"}function m1(e){return new Promise(t=>{setTimeout(t,e)})}function h1(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?$h(e,t):t}function f1(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function p1(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Sl=Symbol();function zh(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Sl?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var dr,$n,$r,$d,g1=($d=class extends sa{constructor(){super();Ce(this,dr);Ce(this,$n);Ce(this,$r);xe(this,$r,t=>{if(!ia&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,$n)||this.setEventListener(B(this,$r))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,$n))==null||t.call(this),xe(this,$n,void 0))}setEventListener(t){var n;xe(this,$r,t),(n=B(this,$n))==null||n.call(this),xe(this,$n,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,dr)!==t&&(xe(this,dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,dr)=="boolean"?B(this,dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dr=new WeakMap,$n=new WeakMap,$r=new WeakMap,$d),Bh=new g1,zr,zn,Br,zd,x1=(zd=class extends sa{constructor(){super();Ce(this,zr,!0);Ce(this,zn);Ce(this,Br);xe(this,Br,t=>{if(!ia&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,zn)||this.setEventListener(B(this,Br))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,zn))==null||t.call(this),xe(this,zn,void 0))}setEventListener(t){var n;xe(this,Br,t),(n=B(this,zn))==null||n.call(this),xe(this,zn,t(this.setOnline.bind(this)))}setOnline(t){B(this,zr)!==t&&(xe(this,zr,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,zr)}},zr=new WeakMap,zn=new WeakMap,Br=new WeakMap,zd),Ci=new x1;function y1(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function v1(e){return Math.min(1e3*2**e,3e4)}function Vh(e){return(e??"online")==="online"?Ci.isOnline():!0}var Uh=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function za(e){return e instanceof Uh}function qh(e){let t=!1,n=0,r=!1,s;const a=y1(),o=g=>{var y;r||(m(new Uh(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Bh.isFocused()&&(e.networkMode==="always"||Ci.isOnline())&&e.canRun(),u=()=>Vh(e.networkMode)&&e.canRun(),h=g=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,g),s==null||s(),a.resolve(g))},m=g=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,g),s==null||s(),a.reject(g))},f=()=>new Promise(g=>{var y;s=S=>{(r||d())&&g(S)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(r)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(S){g=Promise.reject(S)}Promise.resolve(g).then(h).catch(S=>{var C;if(r)return;const v=e.retry??(ia?0:3),b=e.retryDelay??v1,w=typeof b=="function"?b(n,S):b,A=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,S);if(t||!A){m(S);return}n++,(C=e.onFail)==null||C.call(e,n,S),m1(w).then(()=>d()?void 0:f()).then(()=>{t?m(S):x()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():f().then(x),a)}}function b1(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var ft=b1(),mr,Bd,Hh=(Bd=class{constructor(){Ce(this,mr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c1(this.gcTime)&&xe(this,mr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ia?1/0:5*60*1e3))}clearGcTimeout(){B(this,mr)&&(clearTimeout(B(this,mr)),xe(this,mr,void 0))}},mr=new WeakMap,Bd),Vr,Ur,Bt,lt,Ls,hr,Wt,bn,Vd,w1=(Vd=class extends Hh{constructor(t){super();Ce(this,Wt);Ce(this,Vr);Ce(this,Ur);Ce(this,Bt);Ce(this,lt);Ce(this,Ls);Ce(this,hr);xe(this,hr,!1),xe(this,Ls,t.defaultOptions),this.setOptions(t.options),this.observers=[],xe(this,Bt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,xe(this,Vr,j1(this.options)),this.state=t.state??B(this,Vr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,lt))==null?void 0:t.promise}setOptions(t){this.options={...B(this,Ls),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Bt).remove(this)}setData(t,n){const r=h1(this.state.data,t,this.options);return ot(this,Wt,bn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ot(this,Wt,bn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=B(this,lt))==null?void 0:r.promise;return(s=B(this,lt))==null||s.cancel(t),n?n.then(Gt).catch(Gt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Vr))}isActive(){return this.observers.some(t=>d1(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!u1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,lt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,lt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,Bt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,lt)&&(B(this,hr)?B(this,lt).cancel({revert:!0}):B(this,lt).cancelRetry()),this.scheduleGc()),B(this,Bt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ot(this,Wt,bn).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,lt))return B(this,lt).continueRetry(),B(this,lt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(xe(this,hr,!0),r.signal)})},a=()=>{const h=zh(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return s(m),xe(this,hr,!1),this.options.persister?this.options.persister(h,m,this):h(m)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),xe(this,Ur,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ot(this,Wt,bn).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var m,f,x,g;za(h)&&h.silent||ot(this,Wt,bn).call(this,{type:"error",error:h}),za(h)||((f=(m=B(this,Bt).config).onError)==null||f.call(m,h,this),(g=(x=B(this,Bt).config).onSettled)==null||g.call(x,this.state.data,h,this)),this.scheduleGc()};return xe(this,lt,qh({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,f,x,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){l(y);return}(f=(m=B(this,Bt).config).onSuccess)==null||f.call(m,h,this),(g=(x=B(this,Bt).config).onSettled)==null||g.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{ot(this,Wt,bn).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{ot(this,Wt,bn).call(this,{type:"pause"})},onContinue:()=>{ot(this,Wt,bn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),B(this,lt).start()}},Vr=new WeakMap,Ur=new WeakMap,Bt=new WeakMap,lt=new WeakMap,Ls=new WeakMap,hr=new WeakMap,Wt=new WeakSet,bn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...S1(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return za(s)&&s.revert&&B(this,Ur)?{...B(this,Ur),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ft.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,Bt).notify({query:this,type:"updated",action:t})})},Vd);function S1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vh(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function j1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rn,Ud,E1=(Ud=class extends sa{constructor(t={}){super();Ce(this,rn);this.config=t,xe(this,rn,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??wl(s,n);let o=this.get(a);return o||(o=new w1({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){B(this,rn).has(t.queryHash)||(B(this,rn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,rn).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,rn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ft.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,rn).get(t)}getAll(){return[...B(this,rn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>eu(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>eu(t,r)):n}notify(t){ft.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ft.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ft.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},rn=new WeakMap,Ud),sn,mt,fr,an,Rn,qd,N1=(qd=class extends Hh{constructor(t){super();Ce(this,an);Ce(this,sn);Ce(this,mt);Ce(this,fr);this.mutationId=t.mutationId,xe(this,mt,t.mutationCache),xe(this,sn,[]),this.state=t.state||C1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,sn).includes(t)||(B(this,sn).push(t),this.clearGcTimeout(),B(this,mt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){xe(this,sn,B(this,sn).filter(n=>n!==t)),this.scheduleGc(),B(this,mt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,sn).length||(this.state.status==="pending"?this.scheduleGc():B(this,mt).remove(this))}continue(){var t;return((t=B(this,fr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,l,c,d,u,h,m,f,x,g,y,S,v,b,w,A,C,M;xe(this,fr,qh({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(_,k)=>{ot(this,an,Rn).call(this,{type:"failed",failureCount:_,error:k})},onPause:()=>{ot(this,an,Rn).call(this,{type:"pause"})},onContinue:()=>{ot(this,an,Rn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,mt).canRun(this)}));const n=this.state.status==="pending",r=!B(this,fr).canStart();try{if(!n){ot(this,an,Rn).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(s=B(this,mt).config).onMutate)==null?void 0:a.call(s,t,this));const k=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));k!==this.state.context&&ot(this,an,Rn).call(this,{type:"pending",context:k,variables:t,isPaused:r})}const _=await B(this,fr).start();return await((d=(c=B(this,mt).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,_,t,this.state.context)),await((f=(m=B(this,mt).config).onSettled)==null?void 0:f.call(m,_,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,_,null,t,this.state.context)),ot(this,an,Rn).call(this,{type:"success",data:_}),_}catch(_){try{throw await((S=(y=B(this,mt).config).onError)==null?void 0:S.call(y,_,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,_,t,this.state.context)),await((A=(w=B(this,mt).config).onSettled)==null?void 0:A.call(w,void 0,_,this.state.variables,this.state.context,this)),await((M=(C=this.options).onSettled)==null?void 0:M.call(C,void 0,_,t,this.state.context)),_}finally{ot(this,an,Rn).call(this,{type:"error",error:_})}}finally{B(this,mt).runNext(this)}}},sn=new WeakMap,mt=new WeakMap,fr=new WeakMap,an=new WeakSet,Rn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ft.batch(()=>{B(this,sn).forEach(r=>{r.onMutationUpdate(t)}),B(this,mt).notify({mutation:this,type:"updated",action:t})})},qd);function C1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pt,Fs,Hd,I1=(Hd=class extends sa{constructor(t={}){super();Ce(this,Pt);Ce(this,Fs);this.config=t,xe(this,Pt,new Map),xe(this,Fs,Date.now())}build(t,n,r){const s=new N1({mutationCache:this,mutationId:++Ws(this,Fs)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Xs(t),r=B(this,Pt).get(n)??[];r.push(t),B(this,Pt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Xs(t);if(B(this,Pt).has(n)){const s=(r=B(this,Pt).get(n))==null?void 0:r.filter(a=>a!==t);s&&(s.length===0?B(this,Pt).delete(n):B(this,Pt).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=B(this,Pt).get(Xs(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=B(this,Pt).get(Xs(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ft.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Pt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tu(n,r))}findAll(t={}){return this.getAll().filter(n=>tu(t,n))}notify(t){ft.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ft.batch(()=>Promise.all(t.map(n=>n.continue().catch(Gt))))}},Pt=new WeakMap,Fs=new WeakMap,Hd);function Xs(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function su(e){return{onFetch:(t,n)=>{var u,h,m,f,x;const r=t.options,s=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},S=zh(t.options,t.fetchOptions),v=async(b,w,A)=>{if(g)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const C={queryKey:t.queryKey,pageParam:w,direction:A?"backward":"forward",meta:t.options.meta};y(C);const M=await S(C),{maxPages:_}=t.options,k=A?p1:f1;return{pages:k(b.pages,M,_),pageParams:k(b.pageParams,w,_)}};if(s&&a.length){const b=s==="backward",w=b?k1:iu,A={pages:a,pageParams:o},C=w(r,A);l=await v(A,C,b)}else{const b=e??a.length;do{const w=c===0?o[0]??r.initialPageParam:iu(r,l);if(c>0&&w==null)break;l=await v(l,w),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function iu(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function k1(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var He,Bn,Vn,qr,Hr,Un,Gr,Wr,Gd,A1=(Gd=class{constructor(e={}){Ce(this,He);Ce(this,Bn);Ce(this,Vn);Ce(this,qr);Ce(this,Hr);Ce(this,Un);Ce(this,Gr);Ce(this,Wr);xe(this,He,e.queryCache||new E1),xe(this,Bn,e.mutationCache||new I1),xe(this,Vn,e.defaultOptions||{}),xe(this,qr,new Map),xe(this,Hr,new Map),xe(this,Un,0)}mount(){Ws(this,Un)._++,B(this,Un)===1&&(xe(this,Gr,Bh.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,He).onFocus())})),xe(this,Wr,Ci.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,He).onOnline())})))}unmount(){var e,t;Ws(this,Un)._--,B(this,Un)===0&&((e=B(this,Gr))==null||e.call(this),xe(this,Gr,void 0),(t=B(this,Wr))==null||t.call(this),xe(this,Wr,void 0))}isFetching(e){return B(this,He).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,Bn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,He).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=B(this,He).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Zc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,He).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=B(this,He).get(r.queryHash),a=s==null?void 0:s.state.data,o=l1(t,a);if(o!==void 0)return B(this,He).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ft.batch(()=>B(this,He).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,He).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,He);ft.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,He),r={type:"active",...e};return ft.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=ft.batch(()=>B(this,He).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Gt).catch(Gt)}invalidateQueries(e={},t={}){return ft.batch(()=>{if(B(this,He).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=ft.batch(()=>B(this,He).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Gt)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Gt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,He).build(this,t);return n.isStaleByTime(Zc(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Gt).catch(Gt)}fetchInfiniteQuery(e){return e.behavior=su(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Gt).catch(Gt)}ensureInfiniteQueryData(e){return e.behavior=su(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ci.isOnline()?B(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,He)}getMutationCache(){return B(this,Bn)}getDefaultOptions(){return B(this,Vn)}setDefaultOptions(e){xe(this,Vn,e)}setQueryDefaults(e,t){B(this,qr).set(Is(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,qr).values()];let n={};return t.forEach(r=>{ks(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){B(this,Hr).set(Is(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Hr).values()];let n={};return t.forEach(r=>{ks(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Vn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=wl(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Sl&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Vn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,He).clear(),B(this,Bn).clear()}},He=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,qr=new WeakMap,Hr=new WeakMap,Un=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,Gd),T1=p.createContext(void 0),P1=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(T1.Provider,{value:e,children:t}));const _1={info:"#4a5d94",warn:"#ff7a45",error:"#e53935",debug:"#2e7d32"},Ba=[],M1=100;function cr(e,t,n="info",r){if(n==="info"&&["Rendu du marqueur utilisateur","Position utilisateur mise √† jour","Position utilisateur mise √† jour sur la carte","redimensionn√©","Marqueur utilisateur","Rendu du marqueur","Position utilisateur"].some(u=>t.includes(u)||r&&JSON.stringify(r).includes(u))&&!t.includes("Toast d'√©loignement"))return;const s=new Date,o=`[${s.toISOString().split("T")[1].split(".")[0]}][${e}]`,l=`color: ${_1[n]}; font-weight: bold`;switch(Ba.push({timestamp:s.toISOString(),module:e,message:t,level:n,data:r}),Ba.length>M1&&Ba.shift(),n){case"info":console.log(`%c${o} ${t}`,l,r||"");break;case"warn":console.warn(`%c${o} ${t}`,l,r||"");break;case"error":console.error(`%c${o} ${t}`,l,r||"");break;case"debug":console.debug(`%c${o} ${t}`,l,r||"");break}}function Xe(e){return{info:(t,n)=>cr(e,t,"info",n),warn:(t,n)=>cr(e,t,"warn",n),error:(t,n)=>cr(e,t,"error",n),debug:(t,n)=>cr(e,t,"debug",n)}}function D1(){window.onerror=(e,t,n,r,s)=>(cr("GlobalErrorHandler",`Erreur non g√©r√©e: ${e}`,"error",{source:t,lineno:n,colno:r,error:s}),!1),window.onunhandledrejection=e=>{cr("GlobalErrorHandler","Promesse rejet√©e non g√©r√©e","error",{reason:e.reason})},cr("Logger","Gestionnaires d'erreurs globaux initialis√©s","info")}const tr=Xe("NavigationContext"),R1=p.createContext(void 0),au=20,O1=({children:e})=>{const t=yt(),n=kn(),[r,s]=p.useState([]),[a,o]=p.useState(-1),l=a>0,c=a<r.length-1;p.useEffect(()=>{const x={path:n.pathname,state:n.state,timestamp:Date.now()};s([x]),o(0),tr.info("Historique de navigation initialis√©",{path:n.pathname})},[]),p.useEffect(()=>{if(r.length===0)return;if(!r.some(g=>g.path===n.pathname&&JSON.stringify(g.state)===JSON.stringify(n.state))){const g={path:n.pathname,state:n.state,timestamp:Date.now()},y=[...r.slice(0,a+1),g],S=y.length>au?y.slice(y.length-au):y;s(S),o(S.length-1),tr.info("Nouvelle entr√©e ajout√©e √† l'historique",{path:n.pathname,historyLength:S.length})}},[n,r,a]);const f={history:r,currentIndex:a,goBack:()=>{if(l){const x=r[a-1];t(x.path,{state:x.state}),o(a-1),tr.info("Navigation arri√®re",{to:x.path})}else tr.warn("Tentative de navigation arri√®re impossible")},goForward:()=>{if(c){const x=r[a+1];t(x.path,{state:x.state}),o(a+1),tr.info("Navigation avant",{to:x.path})}else tr.warn("Tentative de navigation avant impossible")},navigateTo:(x,g,y)=>{t(x,{state:g}),tr.info("Navigation vers",{path:x,hasState:!!g})},canGoBack:l,canGoForward:c,getPreviousPath:()=>a>0?r[a-1].path:null};return i.jsx(R1.Provider,{value:f,children:e})},L1=({size:e="medium",color:t="#4a5d94",fullScreen:n=!1,text:r="Chargement..."})=>{const a={small:"w-6 h-6",medium:"w-10 h-10",large:"w-16 h-16"}[e],o=n?({children:l})=>i.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50",children:l}):({children:l})=>i.jsx("div",{className:"flex flex-col items-center justify-center py-4",children:l});return i.jsx(o,{children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`${a} animate-spin`,children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:t,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&i.jsx("p",{className:"mt-2 text-sm font-medium",style:{color:t},children:r})]})})},F1=p.createContext({isLoading:!1,startLoading:()=>{},stopLoading:()=>{}}),$1=({children:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState("Chargement..."),a=p.useCallback(l=>{l&&s(l),n(!0)},[]),o=p.useCallback(()=>{n(!1),setTimeout(()=>{s("Chargement...")},300)},[]);return i.jsxs(F1.Provider,{value:{isLoading:t,startLoading:a,stopLoading:o},children:[e,t&&i.jsx(L1,{fullScreen:!0,text:r})]})},Qs=["/map","/program","/saved","/about","/donate"],z1={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},slide:{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{type:"spring",stiffness:300,damping:30}},scale:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:30}},flip:{initial:{rotateY:90,opacity:0},animate:{rotateY:0,opacity:1},exit:{rotateY:-90,opacity:0},transition:{duration:.4}}},B1={"/map":"scale","/program":"slide","/saved-events":"slide","/donate":"fade","/about":"fade","/admin":"fade","/location-history":"flip"},V1=["/","/map","/program","/saved","/about","/donate"];function jl({children:e,transitionType:t,enableSwipe:n=!1}){const r=yt(),s=kn(),[a,o]=p.useState(null),[l,c]=p.useState(0),[d,u]=p.useState(null);p.useEffect(()=>{const v=s.pathname==="/"?"/map":s.pathname,b=Qs.indexOf(v);b!==-1&&c(b)},[s.pathname]);const m=t||B1[s.pathname]||"fade",f=z1[m],x=v=>{n&&o(v.touches[0].clientX)},g=v=>{if(!n||a===null)return;const w=v.changedTouches[0].clientX-a,A=window.innerWidth*.2;Math.abs(w)>A&&(w>0&&l>0?(u("right"),r(Qs[l-1])):w<0&&l<Qs.length-1&&(u("left"),r(Qs[l+1]))),o(null)},S=n?{initial:v=>({x:v==="right"?"-100%":v==="left"?"100%":0,opacity:0}),animate:{x:0,opacity:1,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}},exit:v=>({x:v==="left"?"-100%":v==="right"?"100%":0,opacity:0,transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}}})}:{initial:f.initial,animate:f.animate,exit:f.exit,transition:f.transition};return i.jsx(be.div,{className:"animated-page-transition",onTouchStart:x,onTouchEnd:g,initial:"initial",animate:"animate",exit:"exit",variants:S,custom:d,style:{width:"100%",height:"100%",overflowX:"hidden",position:"relative",touchAction:"pan-y"},children:e},s.pathname)}function U1(e){return V1.includes(e)}const q1=Xe("ServiceWorker"),ou=()=>{q1.info("Service worker registration is temporarily disabled")},As=()=>typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,H1=e=>{if(typeof window>"u")return;const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),e(As()),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}},G1=(e,t)=>{},W1=()=>{};class Y1{constructor(){It(this,"cache",new Map);It(this,"defaultExpiry",30*60*1e3)}set(t,n,r=this.defaultExpiry){this.cache.set(t,{data:n,timestamp:Date.now(),expiry:r})}get(t){const n=this.cache.get(t);return n?n.expiry!==null&&Date.now()-n.timestamp>n.expiry?(this.cache.delete(t),null):n.data:null}async getOrSet(t,n,r=this.defaultExpiry){const s=this.get(t);if(s!==null)return s;const a=await n();return this.set(t,a,r),a}remove(t){this.cache.delete(t)}has(t){return this.get(t)!==null}clear(){this.cache.clear()}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries())r.expiry!==null&&t-r.timestamp>r.expiry&&this.cache.delete(n)}}const mn=new Y1,Gh=[{id:"bruno-barbier",name:"Bruno Barbier",type:"exposition",title:"Peintures et dessins",presentation:"Artiste peintre et dessinateur install√© √† Nantes, explorant les th√®mes du souvenir et de la nostalgie, Bruno Barbier √©voque des fragments de m√©moire, entre √©motions pass√©es et traces du temps.",instagram:"https://www.instagram.com/brunobarbierpainter"},{id:"alain-gremillet",name:"Alain Gremillet",type:"exposition",title:"Peinture abstraite",presentation:"Artiste peintre abstrait, associant couleurs, mouvements et lumi√®re pour susciter l'√©motion. L'artiste peintre abstrait Alain Gremillet explore librement la mati√®re avec acrylique, spatules et objets du quotidien, donnant naissance √† des ≈ìuvres uniques et lumineuses.",instagram:"https://www.instagram.com/alaingremillet"},{id:"jerome-gourdon",name:"J√©r√¥me Gourdon",type:"exposition",title:"Photo-√©mographie",presentation:"Photo-√©mographe, m√™lant photographie, intervention in-situ et peinture acrylique. J√©r√¥me Gourdon se d√©finit comme un photo-√©mographe. Son travail explore les fronti√®res entre image capt√©e et image transform√©e, pour cr√©er des ≈ìuvres √† la crois√©e des m√©diums.",instagram:"https://www.instagram.com/jerome_gourdon"},{id:"nadege-hameau",name:"Nad√®ge Hameau",type:"exposition",title:"Marqueur acrylique",presentation:"Artiste autodidacte. Des mondes imaginaires prennent forme au marqueur acrylique, dans un style m√™lant pointillisme, pr√©cision et r√™verie. Autodidacte, Nadhame.artiste, alias Nad√®ge Hameau, cultive une d√©marche empreinte de patience et de po√©sie visuelle.",instagram:"https://www.instagram.com/nadhame.artiste"},{id:"pauline-crusson",name:"Pauline Crusson",type:"exposition",title:"PaoaNaoned",presentation:"Illustratrice nantaise. Revisitant les cartes postales du vieux Nantes avec un style unique et d√©taill√©, Pauline Crusson sous le nom de PaoaNaoned, redonne vie √† ces images anciennes. Elle capture ainsi l'essence de la ville √† travers ses dessins.",instagram:"https://www.instagram.com/paoanaoned"},{id:"marie-husson",name:"Marie Husson",type:"exposition",title:"Dessins et peintures",presentation:"Artiste peintre et dessinatrice. Explorant des instants d'intimit√© √† la lisi√®re du visible, Marie Husson archive ses d√©couvertes sous forme de dessins et peintures m√™lant aquarelle, encre, broderie ou huile. Sa pratique, exp√©rimentale et sensible, donne naissance √† des images profondes, fragiles et puissamment po√©tiques.",instagram:"https://www.instagram.com/marie.husson.art"},{id:"clotilde-debar-zablocki",name:"Clotilde Debar Zablocki",type:"exposition",title:"apolline.design",presentation:"Artiste et d√©coratrice. Inspir√©e par l'histoire et le patrimoine local, notamment celui d'Anne de Bretagne, Clotilde Debar-Zablocki cr√©e un univers po√©tique et sensible. Avec David, elle forme le duo apolline.design, sp√©cialis√© en fresques d√©coratives et patines.",instagram:"https://www.instagram.com/apolline.design"},{id:"gael-caudoux",name:"Ga√´l Caudoux",type:"exposition",title:"Cartographies imaginaires",presentation:"Artiste cartographe. Vastes cartographies de territoires imaginaires, riches en d√©tails et en narration, Ga√´l Caudoux les r√©alise √† la main depuis l'enfance. Ses grands formats, en constante √©volution, invitent √† la d√©couverte d'un univers unique et fascinant.",instagram:"https://www.instagram.com/gaelcaudoux.imaginarium"},{id:"atelier-norg",name:"Atelier Norg",type:"exposition",title:"Peinture, sculpture et dessin",presentation:"Plasticien nantais. Norg est un plasticien bas√© √† Nantes dont le travail navigue entre peinture, sculpture et dessin, avec une √©nergie brute et expressive. Son univers visuel est direct et instinctif.",instagram:"https://www.instagram.com/ateliernorg"},{id:"jerome-luneau",name:"J√©r√¥me Luneau",type:"exposition",title:"Chun Yong Ho",presentation:"Chun Yong Ho, artiste peintre originaire de Cor√©e du Sud, explore l'abstraction √† travers des jeux de couleurs et de lignes √©voquant des paysages mentaux. Son travail invite √† un voyage int√©rieur, entre sensations et √©motions.",instagram:"https://www.instagram.com/yonghochun"},{id:"andry-shango-rajoelina",name:"Andry Shango Rajoelina",type:"exposition",title:"Illustration pop culture",presentation:`A travers ses "Super Families", Andry "Shango" Rajoelina, character designer dans l'animation, rend hommage aux personnages de ses films, jeux vid√©os, comics, s√©ries TV et dessins anim√©s pr√©f√©r√©s, des ann√©es 80 √† aujourd'hui. De "Retour Vers le Futur" aux "Avengers" en passant par "Les Indestructibles", il s'amuse √† redessiner √† sa mani√®re les grandes familles de la pop culture. Une s√©rie d'illustration pour les petits et les grands enfants.`,instagram:"https://www.instagram.com/andryshango",email:"rajoelina.a@gmail.com"},{id:"expo9",name:"Jocelyn Prouff (Joss Proof)",type:"exposition",title:"Carnets Nantais",presentation:'Croquant in situ des lieux urbains o√π la nature reprend ses droits, avec une attention particuli√®re √† la lumi√®re et aux d√©tails, Joss Proof invite √† un autre regard sur la ville √† travers ses carnets sensibles. Il partage cet univers dans son livre "Carnets Nantais".',instagram:"https://www.instagram.com/joss_proof"},{id:"emmanuelle-boisson",name:"Emmanuelle Boisson (Manoukidessine)",type:"exposition",title:"Illustrations et Carnets",presentation:"Port√©e par le d√©sir de raconter des histoires en images, Manoukidessine explore avec tendresse les √©motions, le quotidien et l'imaginaire. Elle partage son univers √† travers dessins, carnets et albums jeunesse.",instagram:"https://www.instagram.com/manoukidessine"},{id:"catherine-clement",name:"Catherine Cl√©ment (Kat Klementi)",type:"exposition",title:"Les Petits Formats",presentation:"Depuis 2018, je d√©veloppe une s√©rie de petits formats r√©alis√©s √† partir de cadres anciens chin√©s. Ces ≈ìuvres sont √† la crois√©e d'une recherche esth√©tique et d'une narration silencieuse. Le cadre, loin d'√™tre un simple ornement : ¬´ Le choix des cadres est essentiel. Ils doivent dialoguer avec l'≈ìuvre, la compl√©ter, la renforcer. Ce ne sont pas de simples √©l√©ments d√©coratifs : ils soulignent le sujet et rendent chaque tableau unique. ¬ª Les petits formats repr√©sentent des personnages, des objets isol√©s, des int√©rieurs... toujours cadr√©s au plus proche. Le regard oscille entre micro-natures mortes, mini-portraits et sc√®nes intimistes. ¬´ Jouer avec les √©chelles oblige le spectateur √† regarder de plus pr√®s, √† observer avec attention. ¬ª Isoler un objet de son contexte lui donne une nouvelle pr√©sence, une intensit√© singuli√®re ¬´ Ce n'est plus un simple objet du quotidien, mais un √©l√©ment qui appelle √† l'introspection. J'insiste sur l'individualit√© dans chacune de mes compositions. ¬ª Les rayures sont un motif r√©current dans mes peintures, les rayures instaurent un rythme visuel qui attire l'≈ìil et structure l'espace. ¬´ Les rayures apportent une harmonie, un √©quilibre. Elles unifient l'ensemble des peintures et permettent aux sujets de s'inscrire dans un d√©cor coh√©rent. ¬ª",instagram:"https://www.instagram.com/katklementi"},{id:"mostapha-rouine",name:"Mostapha Rouine",type:"exposition",title:"Entre Bretagne et Maroc",presentation:"Puisant son inspiration entre la Bretagne et le Maroc, entre p√™che √† pied et sc√®nes de vie quotidienne, Mostapha Rouine cr√©e avec aquarelles, brou de noix et huiles. L'artiste peintre autodidacte fait vibrer la lumi√®re, l'ambiance et les couleurs de ces deux mondes.",instagram:"https://www.instagram.com/mostapharouine"},{id:"elizaveta-vodyanova",name:"Elizaveta Vodyanova",type:"exposition",title:"Peinture",presentation:"Artiste peintre contemporaine bas√©e √† Nantes, Elizaveta Vodyanova explore la peinture figurative √† l'acrylique. Ses ≈ìuvres, intimes et po√©tiques, capturent des instants de vie ‚Äî int√©rieurs, visages, paysages marins ‚Äî avec une palette subtile et vibrante.",email:"vojnovich@yandex.com",instagram:"https://www.instagram.com/elvodyanova"},{id:"fabienne-choyau",name:"Fabienne Choyau",type:"exposition",title:"Peinture contemporaine",presentation:"Guid√©e par sa passion pour la couleur, Fabienne Choyau puise son inspiration dans la nature et les instants du quotidien. Son regard se laisse porter par ce qui l'entoure, transformant √©motions et impressions en toiles vibrantes",email:"fabienne.choyau@laposte.net",instagram:"https://www.instagram.com/fabiennechoyau/"},{id:"violoncelles",name:"Ensemble de violoncelles du conservatoire",type:"concert",title:"Ensemble de violoncelles du conservatoire",presentation:""},{id:"clarine",name:"Clarine Julienne",type:"concert",title:"Concert de Clarine Julienne",presentation:"Apr√®s avoir sillonn√© l'Am√©rique Latine avec sa guitare, Clarine revient avec de nombreuses chansons de l'Argentine au Mexique, en passant par les Andes p√©ruviennes. Elle propose un set doux, rythm√© et color√©, m√™lant musiques traditionnelles et compositions personnelles.",email:"clarine.julienne@gmail.com",instagram:"https://www.instagram.com/clarinemusic",youtube:"https://www.youtube.com/clarinemusic",tiktok:"https://www.tiktok.com/@clarine.musica",photos:["/concerts/Clarine/Clarine.JPG"],videos:["https://www.youtube.com/watch?v=-RMQS5dNWfE&authuser=0","https://www.youtube.com/watch?v=5mpeAOWKl-M&authuser=0"]},{id:"nota-bene",name:"Nota Bene",type:"concert",title:"Choeur de femmes Nota Bene",presentation:"Notre ch≈ìur est dirig√© par Nelly ABRAN-FEVAI depuis 2013. Le r√©pertoire est vari√© (classique, extraits d‚Äôop√©ra, chanson fran√ßaise/√©trang√®re...). Nous r√©p√©tons tous les lundis de 20h √† 22h au Restaurant Inter g√©n√©rationnel du Breil, rue de Malville √† Nantes, ainsi que 5 dimanches par saison. Nous serons heureuses de vous accueillir !",email:"contact@notabene.fr",instagram:""},{id:"philippe-peaud",name:"Philippe Peaud",type:"concert",title:"Philippe P√©aud - Conteur",presentation:"",email:"philippe.peaud@club-internet.fr",instagram:""},{id:"scarabees",name:"Les Scarab√©es R√¥dent",type:"concert",title:"Les Scarab√©es R√¥dent",presentation:"",email:"contact@scarabees.fr",instagram:""},{id:"aperto",name:"Aperto !",type:"concert",title:"Aperto !",presentation:`Allegro aperto est le titre du premier mouvement d'un concerto pour fl√ªte de Mozart.

Le mot Aperto signifie ¬´ ouvert ¬ª en italien.

L'ensemble est ouvert √† tou.te.s les fl√ªtistes : √©l√®ves du conservatoire, anciens √©l√®ves, amateurs et musiciens professionnels.

Il est √©galement ouvert √† toutes les musiques :

- musique classique : de Bach √† Bartok
- musiques du monde : Irlande (reels et jigs), Europe centrale (klezmer), Espagne (sardanes), Br√©sil (choros), Gr√®ce (kalamatianos), etc.
- chansons populaires : Beatles, Simon & Garfunkel, com√©dies musicales, films Disney, etc.`,email:"contact@aperto.fr",instagram:"",link:"https://youtu.be/aKxyrWCofOI",photos:["/concerts/Aperto/Aperto1.jpg","/concerts/Aperto/Aperto2.jpg"]},{id:"quatuor-liger",name:"Quatuor Liger",type:"concert",title:"Quatuor Liger",presentation:`Le Quatuor Liger est un quatuor √† cordes form√© en 1995 √† Nantes, et qui a √©volu√© ces derni√®res ann√©es avec de nouveaux membres.Compos√© de quatre musiciens passionn√©s (Patrick F√©vai, Solenne Guilbert, Gwenola Morin, C√©dric Forr√©), le quatuor propose un r√©pertoire vari√© allant de la musique classique aux arrangements contemporains. Leur interpr√©tation sensible et dynamique offre une exp√©rience musicale unique.

---

## PROGRAMME

### Wolfgang Mozart (1756-1791)
**Quatuor n¬∞17 "La chasse" - 25 min**

Le quatuor n¬∞17 en si b√©mol majeur, surnomm√© "La Chasse", fait partie des six quatuors d√©di√©s √† Haydn par Mozart. Compos√© en 1784, il doit son surnom √† son premier mouvement, dont le caract√®re rythm√© et l√©ger rappelle une sc√®ne de chasse. L'≈ìuvre est pleine de vitalit√© et de charme, t√©moignant de l'amiti√© et de l'admiration de Mozart pour Haydn.

### Franz Schubert (1797-1828)
**Quatuor n¬∞10 - 25 min**

Le quatuor √† cordes n¬∞10 en mi b√©mol majeur de Schubert, √©galement appel√© "Quatuor jeunesse", a √©t√© √©crit en 1813 alors que le compositeur n'avait que 16 ans. Malgr√© son jeune √¢ge, cette ≈ìuvre r√©v√®le d√©j√† une grande ma√Ætrise de la forme et une sensibilit√© profonde. Moins dramatique que ses ≈ìuvres ult√©rieures, le quatuor se distingue par sa fra√Æcheur m√©lodique et son atmosph√®re paisible.

---

Mozart et Schubert ont √©t√© au c≈ìur de l'√©volution du quatuor √† cordes, garants d'une transmission et cr√©ateurs de g√©nie. Ces deux quatuors, de p√©riodes et de styles diff√©rents, sont des t√©moignages brillants du g√©nie de leurs compositeurs respectifs, et contiennent √† la fois ce classicisme et cette r√©volution qui s'est op√©r√©e en 30 ans.

Le Quatuor Liger interpr√®te ces compositeurs viennois du tournant des XVIIIe et XIXe si√®cle sur des instruments historiques (cordes en boyaux, archets classiques).`,members:"Patrick F√©vai, Solenne Guilbert, Gwenola Morin, C√©dric Forr√©",instagram:"",email:"solenne.guilbert@quatuorliger.fr",link:"",photos:["/concerts/QuatuorLiger/quatuor-liger-1.jpg","/concerts/QuatuorLiger/quatuor-liger-2.jpg"]},{id:"eva",name:"L'Ensemble Vocal EVA",type:"concert",title:"L'Ensemble Vocal EVA",presentation:"L'Ensemble Vocal EVA, dirig√© depuis 2023 par Pascale GARCIA, fait le choix d'un r√©pertoire ouvert sur diff√©rentes √©poques, incluant des ≈ìuvres profanes ou sacr√©es, peu connues ou in√©dites. L'Ensemble Vocal EVA propose des cr√©ations de compositeurs embl√©matiques des XXe et XXIe si√®cles, qui savent magnifier des textes po√©tiques ou bibliques, chant√©s √† 3, 4, 5 ou m√™me 6 voix, a cappella ou accompagn√©s d'instruments.",website:"https://www.choeureva.fr",facebook:"EVA-choeur de femmes",phone:"06 87 08 63 84",director:"Pascale Garcia",email:"contact@choeureva.fr",instagram:""},{id:"swing-it",name:"Swing it !",type:"concert",title:"Swing it !",presentation:"",email:"contact@swingit.fr",instagram:""},{id:"variabilis",name:"Variabilis",type:"concert",title:"Variabilis",presentation:`VARIABILIS, C'EST 70 MUSICIENS AMATEURS.

L'ambition de cet ensemble :

Vivre la musique dans un esprit d'ouverture et de partage.

Explorer la diversit√© du r√©pertoire classique.

Pr√©senter des concerts dans des formats et des lieux vari√©s.

Aller au devant de publics parfois √©loign√©s des sc√®nes musicales classiques.`,email:"contact@variabilis.fr",instagram:"https://www.instagram.com/variabilis_ensemble/?igshid=MzRlODBiNWFlZA%3D%3D",photos:["/concerts/Variabilis/Variabilis.jpg"],facebook:"https://www.facebook.com/EnsembleVariabilis",website:"https://www.variabilis.fr"},{id:"Semaphore Omega",name:"Semaphore Omega",type:"concert",title:"Semaphore Omega",presentation:"Les lectures po√©tiques d'Olivier Bardoul r√©sonnent aux vibrations profondes du didgeridoo de Jean-Yves Redor.",email:"bardoul.olivier@netcourrier.com",instagram:""}];function K1(e){return Gh.find(t=>t.id===e)}function El(e){const t=ct.find(n=>n.id===e);return t?t.name:""}function Wh(e){const t=ct.find(n=>n.id===e);return t&&t.gps?t.gps:null}function aa(){return ct}const ct=[{id:"maison-jules-verne",name:"Maison natale de Jules Verne",x:170,y:50,description:"Maison natale de Jules Verne (1828). Situ√©e au 4 Cours Olivier de Clisson (ancien 2 quai Jean-Bart), c'est ici que naquit le c√©l√®bre √©crivain le 8 f√©vrier 1828. Il y passa les quatorze premi√®res ann√©es de sa vie, dans un immeuble qui dominait le confluent de la Loire et de l'Erdre.",image:"/images/locations/jules-enfant-cibot.jpg",audio:"/audio/4-cours-Olivier-de-Clisson.mp3",hasProgram:!1,history:`La maison natale de Jules Verne se trouve au c≈ìur de Nantes, sur l'√Æle Feydeau, au 2 quai Jean-Bart, aujourd'hui connu sous le nom de 4 Cours Olivier de Clisson. Il y naquit le 8 f√©vrier 1828 et y passa les quatorze premi√®res ann√©es de sa vie. L'immeuble dominait le confluent de la Loire et de l'Erdre.

Alors que Jules √©tait √¢g√© d'une dizaine d'ann√©es, la famille fit l'acquisition d'une maison de campagne dans le village de Chantenay (aujourd'hui un quartier de Nantes). Depuis celle-ci, on voyait l'activit√© du port se d√©ployer jusqu'au c≈ìur de la ville, marquant profond√©ment le jeune gar√ßon.

S'il n'a vu la mer pour la premi√®re fois qu'√† l'√¢ge de douze ans, les √Æles, les ports et les bateaux √©taient depuis longtemps d√©j√† dans sa vie et dans ses r√™ves.

¬´ Il y a cette circonstance que je suis n√© √† Nantes, o√π mon enfance s'est tout enti√®re √©coul√©e. ¬ª Jules Verne, Souvenirs d'enfance et de jeunesse, 1891.
Dans la famille Verne, on pratiquait volontiers la po√©sie de circonstance : naissances et mariages √©taient l'occasion de c√©l√©brer en vers les joies de l'amour et de la famille.

√Ä l'adolescence, il commen√ßa √† remplir les deux cahiers de po√©sies qui l'ont accompagn√© toute sa vie. Rest√©s in√©dits √† sa mort, ils ne furent publi√©s qu'en 1989. Po√©sie lyrique ou satirique, √©mois amoureux ou rimes de chansonnier, les genres les plus divers s'y c√¥toient. Plus tard, il fut aussi parolier, fournissant √† son ami le compositeur Aristide Hignard des po√®mes √† mettre en musique. Ces chansons, r√©unies en recueil, parurent en 1857, sous le titre de Rimes et m√©lodies.

¬´ D√®s l'√¢ge de douze ou quatorze ans, j'avais toujours un crayon sur moi et du temps o√π j'allais √† l'√©cole, je n'arr√™tais pas d'√©crire, travaillant surtout la po√©sie. ¬ª Jules Verne.

Au d√©but des ann√©es 1850, Jules Verne monta √† Paris pour y terminer ses √©tudes de droit.`,visited:!1,gps:{latitude:47.213307,longitude:-1.554879}},{id:"quai-turenne-8",name:"8 quai Turenne",x:300,y:108,description:"B√¢timent historique du XVIIIe si√®cle situ√© au 8 all√©e Turenne/9 rue Kerv√©gan. Construit en 1753 pour Jacques Berouette, n√©gociant et actionnaire d'origine du lotissement de l'√éle Feydeau. L'immeuble pr√©sente des fa√ßades richement d√©cor√©es avec des mascarons √† th√®mes marins. Les fa√ßades et la cage d'escalier sont inscrites aux monuments historiques depuis 1984.",image:"/8 quai Turenne.jpg",audio:"/audio/8-quai-turenne.mp3",history:`Habit√© par un des actionnaires d'origine

Jacques Berouette, n√©gociant et avocat du roi est l'un des actionnaires d'origine de la compagnie cr√©√©e pour construire le lotissement. En 1753, il habite sa nouvelle maison de l'√éle Feydeau.

Le b√¢ti

Les deux fa√ßades de l'immeuble ont beaucoup de points communs avec le 15, all√©e Duguay-Trouin/28, rue Kerv√©gan. Celle c√¥t√© quai est plus richement d√©cor√©e. Les mascarons traitent de th√®mes marins. Contrairement √† beaucoup d'immeubles pour lesquels l'escalier est situ√© dans une tourelle, il a √©t√© choisi ici de l'int√©grer au b√¢ti. 
Il donne sur chacun des couloirs d'entr√©e. Le mur-noyau en est ajour√© pour donner plus de clart√©. Le balcon du 1er √©tage est mont√© sur des consoles, celui du 2√®me en encorbellement sur une Trompe.

Les mat√©riaux

La partie basse du rez-de-chauss√©e est construite en granite alors que la partie haute et notamment les mascarons sont en calcaire de Saint-Savinien (Charente maritime), une pierre semi-dure. Les √©tages sont construits en tuffeau de la r√©gion de Saumur.

Un immeuble inscrit

En 1933, les deux immeubles ont √©t√© s√©par√©s. La restauration de chacun a √©t√© effectu√©e √† quelques ann√©es d'intervalle. Les fa√ßades sur rue et sur cour ainsi que la cage d'escalier ont √©t√© inscrits √† l'inventaire suppl√©mentaire des monuments historiques le 5 d√©cembre 1984.`,visited:!1,gps:{latitude:47.212746973313344,longitude:-1.5547571895170953}},{id:"quai-turenne-9",name:"09 quai Turenne / 11 rue Kerv√©gan",x:260,y:150,description:"Immeuble dit √† la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire √† pans coup√©s. D√©cors caract√©ristiques: mascarons et ferronneries. Double acc√®s c√¥t√© quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",history:`Immeuble dit √† la "Cour Ovale"
En 1756, Joseph Raimbaud (marchand de bois) acquiert sur l'√Æle Feydeau, deux terrains contigus et y fait √©difier deux immeubles avec une cour commune, vaste cour rectangulaire √† pans coup√©s, la "Cour ovale". Les deux immeubles aux d√©cors caract√©ristiques du milieu du si√®cle (mascarons et ferronneries) ont un double acc√®s, c√¥t√© quai et c√¥t√© rue. Les deux fa√ßades sur quai sont trait√©es de mani√®re identique et en sym√©trie, les 12 trav√©es √©tant group√©es deux par deux. Les fa√ßades sur rue sont moins ostentatoires, les quatre doubles trav√©es de gauche n'ont re√ßu qu'un seul √©tage, le programme architectural n'ayant pas √©t√© achev√©. Immeuble class√© au titre des Monuments Historiques depuis 1984.`,visited:!1,gps:{latitude:47.212306,longitude:-1.556986}},{id:"quai-turenne-9-concert",name:"09 quai Turenne / 11 rue Kerv√©gan",x:260,y:180,description:"Immeuble dit √† la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire √† pans coup√©s. D√©cors caract√©ristiques: mascarons et ferronneries. Double acc√®s c√¥t√© quai et rue. Monument Historique depuis 1984.",image:"/9 quai Turenne.jpg",audio:"/audio/9-quai-Turenne.mp3",historyRef:"quai-turenne-9",visited:!1,gps:{latitude:47.21273557840543,longitude:-1.5552255095605205}},{id:"quai-turenne-10",name:"10 quai Turenne / 13 rue Kerv√©gan",x:260,y:224,description:"Immeuble de n√©gociant (1755-56). Construit par Joseph Raimbaud, marchand de bois. Innovation architecturale: premier immeuble de Feydeau avec des appartements √† couloir plut√¥t qu'en enfilade. 3 √©tages et combles sans entresol. Inscrit aux Monuments Historiques depuis 1984.",image:"/10 quai Turenne.jpg",audio:"/audio/10-quai-Turenne.mp3",history:`Un immeuble de n√©gociant

Jacques Goubert, ing√©nieur, est un des actionnaires d'origine du lotissement. Il est l'auteur des plans du parcellaire. Il propose √©galement dans son projet un mod√®le d'√©l√©vation qui ne sera pas suivi par les constructeurs.
Il revend sa parcelle √† Joseph Raimbaud, marchand de bois en lien avec le milieu de la construction navale. Celui-ci fait construire l'immeuble en 1755-56.

3 √©tages et combles sans entresol

Les immeubles du lotissement Feydeau sont tant√¥t entresol√©, tant√¥t non. La pr√©sence de l'entresol r√©v√®le l'importance accord√©e √† l'activit√© commerciale : celui-ci permet d'installer des r√©serves et des bureaux. Dans le cas pr√©sent, les constructeurs ont souhait√© privil√©gier le logement. Aussi le rez-de-chauss√©e est-il occup√© par des appartements.

Une innovation : des appartements avec un couloir

Jusqu'au d√©but du XVIIIe si√®cle, on ne conna√Æt qu'une seule mani√®re d'agencer les pi√®ces d'un appartement : l'enfilade. Les diff√©rentes salles se commandent les unes les autres. Au fil du si√®cle, le d√©sir d'intimit√© grandissant, on voit appara√Ætre le couloir, jug√© plus pratique. Cet immeuble est le seul dans Feydeau √† pr√©senter cette particularit√©.

Une d√©coration soign√©e

Contrairement √† d'autres immeubles du lotissement, les fa√ßades sur rue et quai sont identiques. Toutes les ouvertures comportent un mascaron, avec des visages africains. Les balcons sont construits sur des consoles au 1er √©tage et sur trompe au 2√®me. Les angles de la cour ainsi que les demi-tourelles de latrines sont √† pans coup√©s. L'immeuble est Inscrit sur l'inventaire suppl√©mentaire des monuments historiques depuis 1984.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"rue-kervegan-17",name:"17 rue Kerv√©gan / 11 quai Turenne",x:220,y:407,description:"Immeuble de la 'galaxie Pierre Rousseau' (apr√®s 1775). Construit pour Pierre Lassalle, gendre de Pierre Rousseau. Particularit√©: corps de b√¢timents ind√©pendants sur quai et rue, avec cour commune. Fa√ßade sobre typique de la fin du 18√®me si√®cle, mais int√©rieurs richement d√©cor√©s.",image:"/17 rue Kerv√©gan.jpg",audio:"/audio/17-rue-Kervegan.mp3",history:`Un immeuble de la "galaxie Pierre Rousseau"

Cet immeuble a √©t√© construit apr√®s 1775 pour Pierre Lassalle, gendre de Pierre Rousseau. Ce dernier reprend une partie des dispositions adopt√©es au 12, all√©e Turenne, qu'il a construit comme immeuble de rapport en 1753.

Une parcelle pour deux immeubles ind√©pendants

Contrairement √† d'autres immeubles de Feydeau. Le corps de b√¢timent sur le quai Turenne et celui sur la rue Kerv√©gan sont ind√©pendants. Si la cour est commune, Ils poss√®dent chacun leur propre escalier et deux latrines par √©tage. 

Chacun des immeubles comprenait √† l'origine un appartement par √©tage, constitu√© de 4 pi√®ces en fa√ßade et deux pi√®ces de part et d'autre de l'escalier. Par la suite, certains logements ont √©t√© divis√©s.

D√©coration

Au fil du 18√®me si√®cle, on s'achemine vers un type de fa√ßade de plus en plus sobre : les mascarons, les balcons sur trompe ou sur consoles sculpt√©es disparaissent, La place Royale en est un bon exemple. Si les fa√ßades de cet immeuble ne comportent ni balcons, ni d√©coration, les int√©rieurs n'ont rien √† envier √† ceux de la g√©n√©ration pr√©c√©dente.

Petits ou grand vitrages

Jusqu'aux ann√©es 1750, les vantaux des fen√™tres sont √† petits bois. Dans les ann√©es 1760 appara√Æt le grand carreau, qui est, dans un premier temps, r√©serv√© aux grandes demeures. On peut donc affirmer avec certitude que tous les immeubles de l'√éle Feydeau avaient √† l'origine des fen√™tres √† petits bois.`,visited:!1,gps:{latitude:47.21247281536768,longitude:-1.5562154487439073}},{id:"allee-duguay-trouin-11",name:"11 all√©e Duguay Trouin / 20 rue Kerv√©gan",x:150,y:186,description:"Immeuble de rapport (1752) construit par Bertrand Doudet, n√©gociant. Particularit√©: syst√®me de galeries tr√®s d√©velopp√© avec escalier unique ouvrant sur trois faces. Deux appartements spacieux par √©tage (200 m¬≤). Fa√ßade c√¥t√© Duguay-Trouin reconstruite √† l'identique apr√®s les bombardements de 1945.",image:"/20 rue Kerv√©gan.jpg",audio:"/audio/11-allee-duguay-trouin.mp3",history:`Un immeuble de rapport

Bertrand Doudet, n√©gociant, acquiert en 1747 une des parcelles du lotissement aupr√®s de la veuve Beaulieu-Belloteau, dont le mari √©tait un des actionnaires d'origine. En 1752, la 'maison' est termin√©e : il en habite un des appartements. Les autres sont probablement lou√©s. 

Des appartements donnant sur des galeries

De tous les immeubles de l'√Æle Feydeau, c'est dans celui-ci que ce syst√®me constructif est le plus d√©velopp√© : l'unique escalier ouvre sur trois faces de galeries. Chaque √©tage comprend √† l'origine deux appartements : l'un c√¥t√© Kerv√©gan, l'autre c√¥t√© Duguay-Trouin, soit un peu plus de 200 m2 par appartement. On trouve donc deux portes d'entr√©e sur chaque palier de l'escalier, qui donnent sur la coursi√®re de chaque appartement. Sur celle-ci ouvrent les porte-fen√™tres de chaque pi√®ce. On trouve √©galement, juste apr√®s la porte d'entr√©e, des toilettes. On habite en fonction de sa condition‚Ä¶ 

On peut supposer que Bertrand Doudet s'√©tait r√©serv√© un des deux appartements du 1er √©tage. Il faut imaginer qu'√† l'√©poque, habiter haut, c'est multiplier les contraintes : monter les seaux d'eau, le bois‚Ä¶ Par ailleurs, le 1er √©tage est toujours celui qui offre la plus grande hauteur sous plafond, les plus belles chemin√©es, et les √©l√©ments de d√©coration les plus remarquables (boiseries, parquets √† la fran√ßaise, fontaines √† eau dans des niches...). Certains de ces √©l√©ments sont encore pr√©sents dans l'immeuble.

Ni class√©, ni inscrit

M√™me s'il s'agit d'un immeuble remarquable, cette maison ne comporte pas d'√©l√©ments de d√©coration qui justifient une demande de protection. La fa√ßade ne pr√©sente ni mascarons, ni balcons sur trompe ou sur consoles. Ce type d'immeuble se retrouve fr√©quemment dans le centre ancien. Ce qui fait la typicit√© de celui-ci, comme de tous les immeubles de Feydeau, est la largeur des fa√ßades, qui a permis de cr√©er dans chacun des appartements une enfilade de trois grandes pi√®ces.

Les modes passent

A la fin du XVIII√®me si√®cle, Feydeau n'est plus √† la mode. Les Nantais pr√©f√®rent habiter les nouveaux quartiers plus en hauteur : les cours pr√®s de la Cath√©drale et surtout le quartier Graslin. Les propri√©taires changent et certains des appartements sont divis√©s. Les habitants des immeubles sont souvent de condition plus modeste.

Les vicissitudes de la seconde guerre mondiale

L'immeuble a souffert durant les bombardements. En 1945, sa fa√ßade c√¥t√© Duguay-Trouin est pour partie d√©truite. La SNCF, locataire de l'immeuble pour y loger son personnel, fait d√©molir et reconstruire cette fa√ßade √† l'identique. Seules les baies du rez-de-chauss√©e sont agrandies, pour faciliter l'activit√© commerciale. Pour ce chantier, on r√©utilise les parpaings de granite du rez-de-chauss√©e, et on remplace le tuffeau des √©tages par une pierre plus dure. L'immeuble a fait l'objet d'une restauration g√©n√©rale durant les ann√©es 1990. La fa√ßade c√¥t√© Duguay-Trouin en cours de reconstruction au printemps 1948.`,visited:!1,gps:{latitude:47.213066264735716,longitude:-1.5555775290702223}},{id:"allee-duguay-trouin-15",name:"15 all√©e Duguay Trouin",x:105,y:407,description:"Deux immeubles de rapport (1753) construits par les n√©gociants Razeau et Geslin. Fa√ßade remarquable avec six trav√©es et d√©cor soign√©: balcons sur consoles sculpt√©es, chapiteaux ioniques, fronton et ferronneries. Habit√© par des n√©gociants occupant un √©tage entier. Restaur√© en 1995. Monument Historique depuis 1984.",image:"/15 all√©e Duguay-Trouin.jpg",audio:"/audio/15-allee-duguay-trouin.mp3",history:`15 all√©e Duguay Trouin
Deux immeubles de rapport

De m√™me que pour d'autres parcelles du lotissement, le propri√©taire initial du terrain, Adrien van Voorn, n'en est pas le b√¢tisseur. Il revend sa parcelle √† Paul-Louis-Julien Razeau et Ren√© Geslin, tous deux n√©gociants. Ceux-ci font construire par les architectes Nicolas Rainard et Pierre Despr√©es deux immeubles de rapport achev√©s en 1753.
Une architecture soign√©e

La fa√ßade poss√®de six trav√©es √† arcs surbaiss√©s au rez-de-chauss√©e. Les deux trav√©es centrales sont richement trait√©es : balcons sur consoles sculpt√©es au 1er √©tage et sur trompe au 2√®me, chapiteaux ioniques et fronton. Les ferronneries sont remarquables. La cour comporte deux tourelles pour les toilettes.
Les habitants

En 1776, les deux immeubles sont essentiellement habit√©s par des n√©gociants, qui disposent chacun d'un √©tage entier (appartements de 6 ou 7 pi√®ces).
Une restauration exemplaire c√¥t√© Duguay-Trouin

L'immeuble a √©t√© enti√®rement restaur√© √† partir de 1995. Le relev√© de l'existant a √©t√© effectu√© avec beaucoup de soin. Des menuiseries √† petits bois ont √©t√© r√©introduites, qui redonnent √† la fa√ßade son aspect du XVIIIe si√®cle. Les fa√ßades et toitures sur l'all√©e Duguay-Trouin, la rue Kerv√©gan et la cour sont inscrites √† l'inventaire suppl√©mentaire des Monuments historiques depuis le 5 d√©cembre 1984.`,visited:!1,gps:{latitude:47.21274016472948,longitude:-1.5567136782622693}},{id:"allee-duguay-trouin-16",name:"16 all√©e Duguay Trouin",x:105,y:450,description:"Immeuble du XVIIIe si√®cle situ√© dans la partie sud de l'√éle Feydeau. Cet immeuble pr√©sente une architecture typique du lotissement avec une cour int√©rieure et des espaces d'exposition. Il accueille aujourd'hui des artistes contemporains dans ses espaces r√©nov√©s.",image:"/16 all√©e Duguay-Trouin.jpg",audio:"/audio/16-allee-duguay-trouin.mp3",history:`Un espace artistique contemporain

Cet immeuble du XVIIIe si√®cle, situ√© dans la partie sud de l'√éle Feydeau, t√©moigne de l'architecture typique du lotissement. Construit √† l'origine pour des n√©gociants nantais, il a connu diverses transformations au fil des si√®cles. Aujourd'hui, ses espaces r√©nov√©s accueillent des artistes contemporains qui y trouvent un cadre historique inspirant pour leurs cr√©ations.

Une architecture pr√©serv√©e

L'immeuble conserve les caract√©ristiques architecturales de l'√©poque: une cour int√©rieure, des espaces g√©n√©reux et une fa√ßade sobre typique de la fin du XVIIIe si√®cle. La r√©novation a permis de pr√©server l'esprit du lieu tout en l'adaptant aux besoins des artistes qui y exposent r√©guli√®rement.

Un lieu de cr√©ation et d'exposition

Le b√¢timent est devenu un lieu important pour la sc√®ne artistique nantaise, accueillant des expositions temporaires et des ateliers d'artistes. Sa configuration avec une cour et un hall offre des espaces d'exposition vari√©s, permettant de mettre en valeur diff√©rentes formes d'expression artistique.`,visited:!1,gps:{latitude:47.21265104842529,longitude:-1.5568766504416809}},{id:"rue-kervegan-32",name:"32 rue Kerv√©gan",x:185,y:507,description:"Immeuble construit entre 1747 et 1752 par Guillaume Grou, n√©gociant-armateur. Fa√ßade modifi√©e au 19e si√®cle avec ajout d'un troisi√®me √©tage. Organisation typique: appartement de l'armateur au premier, bureaux au rez-de-chauss√©e entresol√©, appartements locatifs aux √©tages sup√©rieurs. Monument Historique: fa√ßade et ferronneries (1932), cage d'escalier (1986).",image:"/32 rue Kervegan.jpg",audio:"/audio/32-rue-kervegan.mp3",history:"Entre 1747 et 1752, Guillaume Grou, n√©gociant-armateur, fait construire cet immeuble sur l'√Æle Feydeau. La composition d'origine de la fa√ßade a √©t√© modifi√©e au d√©but du 19e si√®cle par l'ajout d'un troisi√®me √©tage. L'immeuble abritait au premier √©tage l'appartement de l'armateur dont l'acc√®s se faisait par la porte de la fa√ßade principale. Le rez-de-chauss√©e entresol√© √©tait occup√© par des bureaux et magasins. Les appartements locatifs des √©tages sup√©rieurs √©taient desservis par une porte lat√©rale donnant rue Kerv√©gan. La fa√ßade y compris les ferronneries et la toiture sont inscrites au titre des Monuments Historiques depuis 1932, la cage d'escalier int√©rieur est, quant √† elle, inscrite en 1986.",visited:!1,gps:{latitude:47.2123232,longitude:-1.5570202}},{id:"rue-duguesclin",name:"Rue Duguesclin",x:130,y:310,description:"Mur Le Chat Noir jusqu'√† rue Kerv√©gan. Situ√©e sur l'√éle Feydeau, cette rue pi√©tonne relie la rue Kerv√©gan √† l'all√©e Duguay Trouin. Elle est caract√©ris√©e par son architecture du XVIIIe si√®cle et abrite aujourd'hui des espaces d'exposition temporaires.",audio:"/audio/rue-duguayclin.mp3",history:"Cette rue pi√©tonne de l'√éle Feydeau porte le nom de Bertrand du Guesclin, conn√©table de France au XIVe si√®cle. Elle fait partie du lotissement original de l'√éle, con√ßu au XVIIIe si√®cle. Aujourd'hui, elle accueille des expositions temporaires qui animent ce passage historique entre la rue Kerv√©gan et l'all√©e Duguay Trouin.",hasProgram:!1,visited:!1,gps:{latitude:47.21299917260203,longitude:-1.556253314217484}}],X1=Object.freeze(Object.defineProperty({__proto__:null,getLocationGPSById:Wh,getLocationNameById:El,getLocations:aa,locations:ct},Symbol.toStringTag,{value:"Module"})),Q1=[{id:"clarine",artistId:"clarine",title:"Clarine Julienne",time:"14h00 - 14h30",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-nota-bene",artistId:"nota-bene",title:"Choeur de femmes Nota Bene",time:"14h45 - 15h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures po√©tiques en musique)",time:"15h30 - 16h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-samedi",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-conteurs-dimanche",artistId:"philippe-peaud",title:"Conteurs",time:"16h00 - 16h45",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-violoncelles",artistId:"violoncelles",title:"Ensemble de violoncelles du conservatoire",time:"17h45 - 18h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"scarabees",artistId:"scarabees",title:"Les Scarab√©es R√¥dent",time:"17h45 - 18h15",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"aperto",artistId:"aperto",title:"Aperto !",time:"18h30 - 19h00",days:["samedi"],locationId:"quai-turenne-9-concert"},{id:"concert-quatuor-liger",artistId:"quatuor-liger",title:"Quatuor Liger",time:"14h00 - 14h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-eva",artistId:"eva",title:"L'Ensemble Vocal EVA",time:"14h45 - 15h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"Omega",artistId:"Semaphore Omega",title:"Semaphore Omega (lectures po√©tiques en musique)",time:"15h30 - 16h00",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-swing-it",artistId:"swing-it",title:"Swing it !",time:"17h00 - 17h30",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"concert-variabilis",artistId:"variabilis",title:"Variabilis",time:"17h45 - 18h15",days:["dimanche"],locationId:"quai-turenne-9-concert"},{id:"expo-emmanuelle-boisson",artistId:"emmanuelle-boisson",title:"Illustrations et Carnets",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-catherine-clement",artistId:"catherine-clement",title:"Peintures en Miniature",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-mostapha-rouine",artistId:"mostapha-rouine",title:"Entre Bretagne et Maroc",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-8"},{id:"expo-bruno-barbier",artistId:"bruno-barbier",title:"Peintures et dessins",time:"12h00 - 19h00",days:["samedi","dimanche"],locationId:"quai-turenne-9"},{id:"expo-alain-gremillet",artistId:"alain-gremillet",title:"Peinture abstraite",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-jerome-gourdon",artistId:"jerome-gourdon",title:"Photo-√©mographie",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-nadege-hameau",artistId:"nadege-hameau",title:"Marqueur acrylique",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-pauline-crusson-2",artistId:"pauline-crusson",title:"PaoaNaoned",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-marie-husson",artistId:"marie-husson",title:"Dessins et peintures",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"rue-kervegan-17"},{id:"expo-clotilde-debar-zablocki",artistId:"clotilde-debar-zablocki",title:"apolline.design",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"},{id:"expo-gael-caudoux",artistId:"gael-caudoux",title:"Cartographies imaginaires",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-11"},{id:"expo-andry-shango-rajoelina",artistId:"andry-shango-rajoelina",title:"Illustration pop culture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jerome-luneau",artistId:"jerome-luneau",title:"Chun Yong Ho",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-jocelyn-prouff",artistId:"expo9",title:"Carnets Nantais",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-16"},{id:"expo-elizaveta-vodyanova",artistId:"elizaveta-vodyanova",title:"Peinture",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"quai-turenne-10"},{id:"expo-fabienne-choyau",artistId:"fabienne-choyau",title:"Peinture contemporaine",time:"12h00 - 19h00, samedi et dimanche",days:["samedi","dimanche"],locationId:"allee-duguay-trouin-15"}],Lt=Q1.map(e=>{const t=K1(e.artistId);return t?{id:e.id,artistId:e.artistId,title:e.title,time:e.time,days:e.days,locationId:e.locationId,locationName:El(e.locationId),artistName:t.name,type:t.type,image:t.image}:(console.error(`Artist not found for ID: ${e.artistId} (Event ID: ${e.id}). Check data consistency.`),null)}).filter(e=>e!==null);function Js(e){return Lt.filter(t=>t.days.includes(e))}function J1(e){const n=Z1().find(r=>r.name===e);return n?Lt.filter(r=>r.locationId===n.id):[]}function Z1(){const e=new Map;try{zs(()=>Promise.resolve().then(()=>X1),void 0).then(n=>{const r=n.locations,s=new Map;Lt.forEach(a=>{var o;s.has(a.locationId)?(o=s.get(a.locationId))==null||o.push(a.id):s.set(a.locationId,[a.id])}),r.forEach(a=>{const o=s.get(a.id)||[];e.set(a.name,{id:a.id,name:a.name,description:a.description,x:a.x,y:a.y,events:o,visited:a.visited||!1})})}).catch(n=>{console.warn("Could not load locations data:",n),t()})}catch(n){console.warn("Dynamic import not available, using fallback for locations:",n),t()}function t(){const n=new Map;Lt.forEach(r=>{var s;n.has(r.locationId)?(s=n.get(r.locationId))==null||s.push(r.id):n.set(r.locationId,[r.id])}),Lt.forEach(r=>{e.has(r.locationName)||e.set(r.locationName,{id:r.locationId,name:r.locationName,description:"",x:0,y:0,events:n.get(r.locationId)||[],visited:!1})})}return e.size===0&&t(),Array.from(e.values())}const it=()=>{try{const e=localStorage.getItem("savedEvents");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>{if(!n)return null;const r=Lt.find(s=>s&&s.id===n);return r?{...r,savedAt:new Date().toISOString()}:null}).filter(Boolean):[]}catch(e){return console.error("Erreur dans getSavedEvents:",e),[]}},Nl=e=>{try{if(!e||!e.id)return console.error("Tentative de sauvegarde d'un √©v√©nement invalide:",e),it();const t=localStorage.getItem("savedEvents");let n=[];try{n=t?JSON.parse(t):[],Array.isArray(n)||(n=[])}catch(s){console.error("Erreur lors de la lecture des √©v√©nements sauvegard√©s:",s),n=[]}console.log(`[savedEvents] √âv√©nements d√©j√† sauvegard√©s: ${n.length}`,n);const r=n.includes(e.id);if(console.log(`[savedEvents] √âv√©nement d√©j√† sauvegard√©: ${r}`),r)console.log("[savedEvents] √âv√©nement d√©j√† sauvegard√©, aucune action n√©cessaire");else{const s=[...n,e.id];localStorage.setItem("savedEvents",JSON.stringify(s)),console.log(`[savedEvents] √âv√©nement sauvegard√©, nouveau total: ${s.length}`),console.log("[savedEvents] Planification du d√©clenchement des achievements dans 500ms"),setTimeout(()=>{s.length===1&&(console.log("[savedEvents] D√©clenchement de l'achievement FIRST_EVENT_SAVED (premier √©v√©nement)"),Ni(st.FIRST_EVENT_SAVED)),s.length>=5&&(console.log(`[savedEvents] D√©clenchement de l'achievement MULTIPLE_EVENTS_SAVED (${s.length} √©v√©nements)`),Ni(st.MULTIPLE_EVENTS_SAVED))},500)}return it()}catch(t){return console.error("Erreur dans saveEvent:",t),it()}},oa=e=>{try{if(!e)return console.error("Tentative de suppression d'un √©v√©nement avec un ID invalide"),it();const t=localStorage.getItem("savedEvents");if(!t)return[];let n=[];try{n=JSON.parse(t),Array.isArray(n)||(n=[])}catch(s){return console.error("Erreur lors de la lecture des √©v√©nements sauvegard√©s:",s),[]}const r=n.filter(s=>s!==e);return localStorage.setItem("savedEvents",JSON.stringify(r)),it()}catch(t){return console.error("Erreur dans removeSavedEvent:",t),[]}},eS=(e,t)=>{try{if(!e)return console.error("Tentative de d√©finir une notification pour un √©v√©nement avec un ID invalide"),it();const n=localStorage.getItem("eventNotifications");let r={};try{r=n?JSON.parse(n):{},typeof r!="object"&&(r={})}catch(o){console.error("Erreur lors de la lecture des notifications:",o),r={}}const s=Object.keys(r).length===0;return r[e]=t,localStorage.setItem("eventNotifications",JSON.stringify(r)),s&&Ni(st.NOTIFICATION_SET),it().map(o=>o&&o.id===e?{...o,notificationTime:t}:o)}catch(n){return console.error("Erreur dans setEventNotification:",n),it()}},tS=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL:"/",Cl=e=>{const t=tS();if(e.startsWith(t))return e;const n=e.startsWith("/")?e.substring(1):e;return`${t}${n}`},hn={SAVED_EVENTS:"offline_saved_events",LOCATIONS:"offline_locations",MAP_IMAGE:"offline_map_image",LOCATION_IMAGES:"offline_location_images",HISTORY_IMAGES:"offline_history_images"},Jn=7*24*60*60*1e3,Yh=async()=>{try{console.log("[OfflineService] Pr√©chargement des √©v√©nements sauvegard√©s");const e=it();return e.length===0?(console.log("[OfflineService] Aucun √©v√©nement sauvegard√© √† pr√©charger"),[]):(mn.set(hn.SAVED_EVENTS,e,Jn),console.log(`[OfflineService] ${e.length} √©v√©nements sauvegard√©s mis en cache`),e)}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des √©v√©nements:",e),[]}},nS=async()=>mn.getOrSet(hn.SAVED_EVENTS,async()=>Yh(),Jn),Kh=async()=>{try{console.log("[OfflineService] Pr√©chargement des lieux");const e=await nS();if(e.length===0)return console.log("[OfflineService] Aucun lieu √† pr√©charger (pas d'√©v√©nements sauvegard√©s)"),[];const t=aa(),n=e.map(a=>a.locationId),r=[...new Set(n)],s=t.filter(a=>r.includes(a.id));return mn.set(hn.LOCATIONS,s,Jn),console.log(`[OfflineService] ${s.length} lieux mis en cache`),s}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des lieux:",e),[]}},rS=async()=>mn.getOrSet(hn.LOCATIONS,async()=>Kh(),Jn),sS=async()=>{try{console.log("[OfflineService] Pr√©chargement des images des lieux");const e=await rS();if(e.length===0)return console.log("[OfflineService] Aucune image de lieu √† pr√©charger"),[];const t=e.filter(a=>a.image).map(a=>{const o=a.image;return o.startsWith("http://")||o.startsWith("https://")?o:Cl(o)}),n=t.map(async a=>{try{const o=await fetch(a,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!o.ok&&o.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${o.status}`);const l=await o.blob();return mn.set(`${hn.LOCATION_IMAGES}_${a}`,{url:a,size:l.size,type:l.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image pr√©charg√©e: ${a} (${l.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_LOCATION_IMAGE",url:a}),a}catch(o){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image ${a}:`,o),null}}),s=(await Promise.all(n)).filter(a=>a!==null);return console.log(`[OfflineService] ${s.length}/${t.length} images pr√©charg√©es`),s}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des images:",e),[]}},iS=async()=>{try{console.log("[OfflineService] Pr√©chargement des images des historiques");const t=aa().filter(o=>o.history&&o.image);if(t.length===0)return console.log("[OfflineService] Aucune image d'historique √† pr√©charger"),[];const n=t.map(o=>{const l=o.image;return l.startsWith("http://")||l.startsWith("https://")?l:Cl(l)}),r=n.map(async o=>{try{if(mn.has(`${hn.HISTORY_IMAGES}_${o}`))return console.log(`[OfflineService] Image d'historique d√©j√† en cache: ${o}`),o;const l=await fetch(o,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!l.ok&&l.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image d'historique: ${l.status}`);const c=await l.blob();return mn.set(`${hn.HISTORY_IMAGES}_${o}`,{url:o,size:c.size,type:c.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image d'historique pr√©charg√©e: ${o} (${c.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:o}),o}catch(l){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image d'historique ${o}:`,l),null}}),a=(await Promise.all(r)).filter(o=>o!==null);return console.log(`[OfflineService] ${a.length}/${n.length} images d'historique pr√©charg√©es`),a}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement des images d'historique:",e),[]}},ko=async()=>{try{console.log("[OfflineService] Pr√©chargement de l'image de la carte");const e=Cl("map-feydeau.png"),t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000",Pragma:"no-cache"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image de la carte: ${t.status}`);const n=await t.blob();return mn.set(hn.MAP_IMAGE,{url:e,size:n.size,type:n.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image de la carte pr√©charg√©e (${n.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_MAP_IMAGE",url:e}),!0}catch(e){return console.error("[OfflineService] Erreur lors du pr√©chargement de l'image de la carte:",e),!1}},Xh=async()=>{try{console.log("[OfflineService] D√©marrage du pr√©chargement des donn√©es hors-ligne");const e=await ko();console.log(`[OfflineService] Pr√©chargement de la carte: ${e?"r√©ussi":"√©chou√©"}`),await Yh(),await Kh(),await sS(),await iS(),e||(console.log("[OfflineService] Nouvelle tentative de pr√©chargement de la carte"),await ko()),console.log("[OfflineService] Pr√©chargement des donn√©es hors-ligne termin√©")}catch(e){console.error("[OfflineService] Erreur lors du pr√©chargement des donn√©es hors-ligne:",e)}},Qh=e=>mn.has(`${hn.HISTORY_IMAGES}_${e}`),aS=async e=>{try{if(Qh(e))return console.log(`[OfflineService] Image d√©j√† en cache: ${e}`),!0;console.log(`[OfflineService] Pr√©chargement de l'image: ${e}`);const t=await fetch(e,{cache:"force-cache",headers:{"Cache-Control":"max-age=31536000"},mode:"no-cors"});if(!t.ok&&t.type!=="opaque")throw new Error(`Erreur lors du chargement de l'image: ${t.status}`);const n=await t.blob();return mn.set(`${hn.HISTORY_IMAGES}_${e}`,{url:e,size:n.size,type:n.type,timestamp:Date.now()},Jn),console.log(`[OfflineService] Image pr√©charg√©e: ${e} (${n.size} octets)`),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_HISTORY_IMAGE",url:e}),!0}catch(t){return console.error(`[OfflineService] Erreur lors du pr√©chargement de l'image ${e}:`,t),!1}},oS=()=>{const[e,t]=p.useState(As()),[n,r]=p.useState(!1),[s,a]=p.useState(!1),o=p.useCallback(async()=>{if(!s)try{a(!0),console.log("[useOfflineMode] D√©marrage du pr√©chargement des donn√©es"),await Xh();const l=it(),c=aa().filter(d=>l.some(u=>u.locationId===d.id));l.length>0&&G1(l,c),await ko(),W1(),r(!0),console.log("[useOfflineMode] Pr√©chargement des donn√©es termin√©")}catch(l){console.error("[useOfflineMode] Erreur lors du pr√©chargement des donn√©es:",l)}finally{a(!1)}},[s]);return p.useEffect(()=>{const l=H1(c=>{t(c),c&&!n&&!s&&o()});return()=>{l&&l()}},[n,s,o]),p.useEffect(()=>{e&&!n&&!s&&o()},[e,n,s,o]),{online:e,offlineReady:n,preloadingData:s,preloadData:o}},lS=()=>{const{online:e,offlineReady:t,preloadingData:n,preloadData:r}=oS();return e&&t?null:i.jsx("div",{className:"fixed bottom-16 left-0 right-0 z-50 flex justify-center pointer-events-none",children:i.jsxs("div",{className:`px-4 py-2 rounded-full shadow-md flex items-center gap-2 pointer-events-auto ${e?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:[!e&&i.jsx(xx,{className:"h-4 w-4"}),!e&&i.jsxs("span",{className:"text-sm font-medium",children:["Mode hors ligne",t&&" (donn√©es disponibles)"]}),e&&!t&&i.jsx(i.Fragment,{children:n?i.jsxs(i.Fragment,{children:[i.jsx(Yr,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{className:"text-sm font-medium",children:"Pr√©paration du mode hors-ligne..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm font-medium",children:"Pr√©parer le mode hors-ligne"}),i.jsx("button",{onClick:()=>r(),className:"ml-2 bg-blue-200 hover:bg-blue-300 text-blue-800 px-2 py-1 rounded text-xs",children:"Activer"})]})}),e&&t&&i.jsxs(i.Fragment,{children:[i.jsx(Gi,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Mode hors-ligne pr√™t"})]})]})})},cS=Zi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?sm:"button";return i.jsx(o,{className:se(cS({variant:t,size:n,className:e})),ref:a,...s})});J.displayName="Button";const Zs=Xe("LocationActivator"),uS=({onLocationEnabled:e,onLocationDenied:t,onLocationDisabled:n})=>{const[r,s]=p.useState(!1);p.useEffect(()=>{const o=localStorage.getItem("locationConsent");s(o==="granted")},[]);const a=()=>{if(r){localStorage.removeItem("locationConsent"),s(!1),n&&n();return}navigator.geolocation?(Zs.info("Demande d'autorisation de g√©olocalisation explicite"),navigator.geolocation.getCurrentPosition(o=>{Zs.info("Autorisation de g√©olocalisation accord√©e",{coords:{latitude:o.coords.latitude,longitude:o.coords.longitude,accuracy:o.coords.accuracy}}),localStorage.setItem("locationConsent","granted"),s(!0),e&&e()},o=>{Zs.warn("Autorisation de g√©olocalisation refus√©e",{code:o.code,message:o.message}),t&&t()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):Zs.warn("G√©olocalisation non support√©e par le navigateur")};return i.jsxs(J,{variant:r?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:a,children:[i.jsx(Cn,{className:"h-4 w-4"}),r?"D√©sactiver localisation":"Activer localisation"]})};let Ht=null,lu=!1;const dS=({onAudioEnabled:e,onAudioDisabled:t})=>{const[n,r]=p.useState(()=>localStorage.getItem("audioEnabled")==="true");p.useEffect(()=>{if(!lu){if(!Ht){Ht=new Audio,Ht.loop=!0,Ht.volume=.5;const a=window.location.hostname.includes("github.io")?"/1Hall1Artiste/audio/Port-marchand.mp3":"/audio/Port-marchand.mp3";Ht.src=a}lu=!0,n&&Ht&&Ht.play().catch(a=>{console.warn("Impossible de lire l'audio automatiquement",a)})}},[n]);const s=()=>{const a=!n;r(a),localStorage.setItem("audioEnabled",a.toString()),a?(Ht&&Ht.play().catch(o=>{console.warn("Impossible de lire l'audio",o),r(!1),localStorage.setItem("audioEnabled","false")}),e&&e()):(Ht&&Ht.pause(),t&&t())};return i.jsx(J,{variant:n?"destructive":"default",size:"sm",className:"flex items-center gap-1 font-medium",onClick:s,children:n?i.jsxs(i.Fragment,{children:[i.jsx(im,{className:"h-4 w-4"}),"D√©sactiver son"]}):i.jsxs(i.Fragment,{children:[i.jsx(yx,{className:"h-4 w-4"}),"Activer son"]})})},mS=()=>typeof window<"u"&&window.APP_CONFIG&&window.APP_CONFIG.BASE_URL?window.APP_CONFIG.BASE_URL.endsWith("/")?window.APP_CONFIG.BASE_URL.slice(0,-1):window.APP_CONFIG.BASE_URL:"/1Hall1Artiste";function pt(e){const n=(e.startsWith("/")?e:`/${e}`).split("/").map(r=>r?encodeURIComponent(r):"").join("/");return`${mS()}${n}`}const Ee={topLeft:{latitude:47.21349,longitude:-1.555052},topRight:{latitude:47.21285,longitude:-1.554495},bottomLeft:{latitude:47.212509,longitude:-1.557447},bottomRight:{latitude:47.21186198914097,longitude:-1.5569021991319243}},Ln={latitude:(Ee.topLeft.latitude+Ee.topRight.latitude+Ee.bottomLeft.latitude+Ee.bottomRight.latitude)/4,longitude:(Ee.topLeft.longitude+Ee.topRight.longitude+Ee.bottomLeft.longitude+Ee.bottomRight.longitude)/4},hS=6371e3,Jh=(e,t,n,r)=>{const s=e*Math.PI/180,a=n*Math.PI/180,o=(n-e)*Math.PI/180,l=(r-t)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(s)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return hS*d},fS=Jh(Ee.topLeft.latitude,Ee.topLeft.longitude,Ee.topRight.latitude,Ee.topRight.longitude),pS=Jh(Ee.topLeft.latitude,Ee.topLeft.longitude,Ee.bottomLeft.latitude,Ee.bottomLeft.longitude),cu={width:fS,height:pS},_n={topLeft:{x:100,y:50},topRight:{x:300,y:50},bottomLeft:{x:100,y:550},bottomRight:{x:300,y:550}};function gS(e,t){const n=[{x:Ee.topLeft.longitude,y:Ee.topLeft.latitude},{x:Ee.topRight.longitude,y:Ee.topRight.latitude},{x:Ee.bottomLeft.longitude,y:Ee.bottomLeft.latitude},{x:Ee.bottomRight.longitude,y:Ee.bottomRight.latitude}],r=[{x:_n.topLeft.x,y:_n.topLeft.y},{x:_n.topRight.x,y:_n.topRight.y},{x:_n.bottomLeft.x,y:_n.bottomLeft.y},{x:_n.bottomRight.x,y:_n.bottomRight.y}],s=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],a=[r[0].x,r[1].x,r[2].x],o=[[n[0].x,n[0].y,1],[n[1].x,n[1].y,1],[n[2].x,n[2].y,1]],l=[r[0].y,r[1].y,r[2].y],c=uu(s,a),d=uu(o,l);if(!c||!d){const m=Math.min(...n.map(_=>_.x)),f=Math.max(...n.map(_=>_.x)),x=Math.min(...n.map(_=>_.y)),g=Math.max(...n.map(_=>_.y)),y=Math.min(...r.map(_=>_.x)),S=Math.max(...r.map(_=>_.x)),v=Math.min(...r.map(_=>_.y)),b=Math.max(...r.map(_=>_.y)),w=(t-m)/(f-m),A=1-(e-x)/(g-x),C=y+w*(S-y),M=v+A*(b-v);return{x:Math.round(C),y:Math.round(M)}}const u=c[0]*t+c[1]*e+c[2],h=d[0]*t+d[1]*e+d[2];return{x:Math.round(u),y:Math.round(h)}}function uu(e,t){const n=ei(e);if(Math.abs(n)<1e-10)return null;const r=[[t[0],e[0][1],e[0][2]],[t[1],e[1][1],e[1][2]],[t[2],e[2][1],e[2][2]]],s=[[e[0][0],t[0],e[0][2]],[e[1][0],t[1],e[1][2]],[e[2][0],t[2],e[2][2]]],a=[[e[0][0],e[0][1],t[0]],[e[1][0],e[1][1],t[1]],[e[2][0],e[2][1],t[2]]],o=ei(r),l=ei(s),c=ei(a);return[o/n,l/n,c/n]}function ei(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])}function xS(e){const{latitude:t,longitude:n}=e,r=.001,s=.0014,a=Math.min(Ee.bottomLeft.latitude,Ee.bottomRight.latitude)-r,o=Math.max(Ee.topLeft.latitude,Ee.topRight.latitude)+r,l=Math.min(Ee.topLeft.longitude,Ee.bottomLeft.longitude)-s,c=Math.max(Ee.topRight.longitude,Ee.bottomRight.longitude)+s,d=t>=a&&t<=o,u=n>=l&&n<=c;return Il(t,n)<150?!0:d&&u}function Il(e,t){const r=e*Math.PI/180,s=Ln.latitude*Math.PI/180,a=(Ln.latitude-e)*Math.PI/180,o=(Ln.longitude-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(s)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function yS(e){const{latitude:t,longitude:n}=e,r=Math.sin(Ln.longitude-n)*Math.cos(Ln.latitude),s=Math.cos(t)*Math.sin(Ln.latitude)-Math.sin(t)*Math.cos(Ln.latitude)*Math.cos(Ln.longitude-n);let a=Math.atan2(r,s)*180/Math.PI;return a=(a+360)%360,a>=337.5||a<22.5?"nord":a>=22.5&&a<67.5?"nord-est":a>=67.5&&a<112.5?"est":a>=112.5&&a<157.5?"sud-est":a>=157.5&&a<202.5?"sud":a>=202.5&&a<247.5?"sud-ouest":a>=247.5&&a<292.5?"ouest":"nord-ouest"}const vS=Xe("ToastService");class bS{show(t){const{title:n,description:r,variant:s="default",duration:a,action:o,source:l,context:c}=t,d=s==="destructive"?"error":"info";jt({title:n,description:r,variant:s,duration:a,action:o}),this.logToast(n,d,r,l,c)}success(t){this.show({...t,variant:"default"})}error(t){this.show({...t,variant:"destructive"})}location(t){this.show({...t,source:"LocationService"})}logToast(t,n,r,s,a){if(n==="error"){const o=`Toast [${n}]: ${t}${r?` - ${r}`:""}`,l={source:s||"Unknown",...a};vS.warn(o,l)}}}const vs=new bS,ls=Xe("locationService"),cs={info:(e,t)=>e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise √† jour")?e.includes("Toast d'√©loignement")?ls.info(e,t):void 0:ls.info(e,t),warn:ls.warn,error:ls.error,debug:(e,t)=>{if(!(e.includes("Position utilisateur")||e.includes("Rendu du marqueur")||e.includes("mise √† jour")))return ls.debug(e,t)}},wS=5e3,SS=1e4,jS=3e4,Va="locationConsent",Ua="locationActivationTimestamp",ES=5e3,du={enableHighAccuracy:!0,timeout:SS,maximumAge:jS};class NS{constructor(){It(this,"watchId",null);It(this,"lastPosition",null);It(this,"onLocationUpdateCallback",null);It(this,"onPermissionChangeCallback",null);It(this,"permissionDenied",!1);It(this,"isLocalDevelopment",!1);It(this,"simulationInterval",null);this.isLocalDevelopment=!1,!navigator.geolocation&&!this.isLocalDevelopment&&cs.warn("La g√©olocalisation n'est pas prise en charge par ce navigateur"),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}handleVisibilityChange(){if(document.visibilityState==="visible"&&this.watchId!==null&&this.isLocationActivated()){cs.info("Application revenue au premier plan, r√©initialisation du suivi de localisation");const t=this.onLocationUpdateCallback,n=this.onPermissionChangeCallback;this.stopTracking(),t&&setTimeout(()=>{this.startTracking(t,n||void 0)},500)}}startTracking(t,n){if(this.onLocationUpdateCallback=t,this.onPermissionChangeCallback=n||null,this.permissionDenied=!1,this.notifyPermissionChange(!1),!this.isLocationActivated()){cs.info("La localisation n'est pas activ√©e, le suivi ne d√©marre pas");return}if(this.isLocalDevelopment){this.startPositionSimulation();return}if(!navigator.geolocation){cs.warn("La g√©olocalisation n'est pas prise en charge par ce navigateur"),vs.error({title:"Localisation non disponible",description:"Votre navigateur ne prend pas en charge la g√©olocalisation.",source:"LocationService.startTracking",context:{browserSupport:!1}});return}navigator.geolocation.getCurrentPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),du);const r=navigator.geolocation.watchPosition(this.handlePositionSuccess.bind(this),this.handlePositionError.bind(this),du);this.watchId=r}stopTracking(){this.simulationInterval!==null&&(window.clearInterval(this.simulationInterval),this.simulationInterval=null),this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.onLocationUpdateCallback=null,this.onPermissionChangeCallback=null}isLocationActivated(){return localStorage.getItem(Va)==="granted"}activateLocation(){localStorage.setItem(Va,"granted"),localStorage.setItem(Ua,Date.now().toString()),vs.success({title:"Localisation activ√©e",description:"Vous pouvez maintenant voir votre position sur la carte.",duration:3e3,source:"LocationService.activateLocation",context:{timestamp:Date.now()}})}deactivateLocation(){localStorage.removeItem(Va),localStorage.removeItem(Ua),vs.show({title:"Localisation d√©sactiv√©e",description:"Votre position ne sera plus suivie.",duration:3e3,source:"LocationService.deactivateLocation",context:{timestamp:Date.now()}}),this.stopTracking()}isRecentlyActivated(){const t=localStorage.getItem(Ua);if(!t)return!1;const n=parseInt(t,10);return Date.now()-n<ES}notifyPermissionChange(t){this.permissionDenied!==t&&(this.permissionDenied=t,this.onPermissionChangeCallback&&this.onPermissionChangeCallback(t))}handlePositionSuccess(t){const n={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy};this.lastPosition=n,Il(n.latitude,n.longitude),this.lastPosition,this.isRecentlyActivated(),this.onLocationUpdateCallback&&this.onLocationUpdateCallback(0,0,n)}handlePositionError(t){switch(t.code!==t.TIMEOUT&&cs.error("Erreur de g√©olocalisation",{code:t.code,message:t.message}),t.code){case t.PERMISSION_DENIED:this.notifyPermissionChange(!0);break;case t.POSITION_UNAVAILABLE:break;case t.TIMEOUT:break}}startPositionSimulation(){const t={latitude:47.2126,longitude:-1.5559,accuracy:10};this.handlePositionSuccess({coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()}),this.simulationInterval=window.setInterval(()=>{const n=(Math.random()-.5)*2e-4,r=(Math.random()-.5)*2e-4,s={latitude:47.2126+n,longitude:-1.5559+r,accuracy:5+Math.random()*10};this.handlePositionSuccess({coords:{latitude:s.latitude,longitude:s.longitude,accuracy:s.accuracy,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:Date.now()})},wS)}}const mu=new NS,kr=Xe("UserLocation"),qa=400,CS=600,hu="locationActivationTimestamp",IS=5e3,fu="locationNotificationTimestamp",pu="lastLocationNotificationKey",kS=30*60*1e3,AS=({onLocationUpdate:e,showNavigation:t=!1,onPermissionChange:n,scale:r=1})=>{const[s,a]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(!1),u=p.useRef(!0),h=p.useRef(null),m=()=>{const y=localStorage.getItem(hu);if(!y)return!1;const S=parseInt(y,10);return Date.now()-S<IS},f=y=>{const S=Date.now(),v=localStorage.getItem(fu),b=localStorage.getItem(pu);if(v){const w=parseInt(v,10);if(S-w<kS||b===y)return!1}return localStorage.setItem(fu,S.toString()),localStorage.setItem(pu,y),h.current=y,!0},x=F.useCallback((y,S,v)=>{if(!v)return;console.log(`[UserLocation] Nouvelle position GPS re√ßue: lat=${v.latitude}, lng=${v.longitude}, accuracy=${v.accuracy}`),a(v);const b=gS(v.latitude,v.longitude);l(b);const w=xS(v),A=Il(v.latitude,v.longitude),C=A>300,M=b.x>=0&&b.x<=qa&&b.y>=0&&b.y<=CS;if(!w&&!u.current&&!m()&&C&&!M){const _=yS(v),k=`distance-${Math.round(A/100)}00-${_}`;f(k)&&(console.log("Toast d'√©loignement de l'√éle Feydeau",{direction:_,distance:Math.round(A),isWithin:w,isFarFromCenter:C,notificationKey:k,isVisibleOnMap:M,position:{latitude:v.latitude,longitude:v.longitude,mapX:b.x,mapY:b.y,accuracy:v.accuracy}}),kr.info("Toast d'√©loignement de l'√éle Feydeau",{direction:_,distance:Math.round(A),isWithin:w,isFarFromCenter:C,notificationKey:k,isVisibleOnMap:M}),vs.show({title:"Vous √™tes √©loign√© de l'√éle Feydeau",description:`L'√éle Feydeau se trouve au ${_} de votre position actuelle.`,duration:5e3,action:i.jsx(Nh,{altText:"Me guider",children:"Me guider"}),source:"UserLocation.handleLocationUpdate",context:{direction:_,distance:Math.round(A),isWithin:w,isFarFromCenter:C,notificationKey:k}}))}u.current&&(u.current=!1),e&&e(b.x,b.y,v)},[e,u,m,f]),g=F.useCallback(y=>{d(y),n&&n(y),y&&vs.error({title:"Localisation refus√©e",description:"Vous avez refus√© l'acc√®s √† votre position. Certaines fonctionnalit√©s ne seront pas disponibles.",duration:5e3,source:"UserLocation.handlePermissionChange",context:{permissionDenied:!0}})},[n]);return p.useEffect(()=>{localStorage.setItem(hu,Date.now().toString());const y=(v,b,w)=>{w&&x(0,0,w)},S=v=>{g(v)};return mu.startTracking(y,S),()=>{mu.stopTracking()}},[]),F.useEffect(()=>{const y=kr.info,S=kr.debug;return kr.info=(v,b)=>{if(v.includes("Toast d'√©loignement"))return console.log("LOG INFO (TOAST):",v,b),y(v,b);if(!(v.includes("Rendu du marqueur")||v.includes("Position utilisateur")||v.includes("mise √† jour")))return y(v,b)},()=>{kr.info=y,kr.debug=S}},[]),!o||c?i.jsx("div",{className:"absolute left-1/2 top-8 z-40 w-full flex justify-center pointer-events-none",children:i.jsx("div",{className:"bg-white/90 text-[#ff7a45] border border-[#ff7a45] rounded px-3 py-2 text-center shadow-md text-sm max-w-xs",children:c?"Localisation d√©sactiv√©e ou refus√©e. Activez la g√©olocalisation pour voir votre position.":"Position utilisateur indisponible. En attente de signal GPS ou autorisation."})}):i.jsx(i.Fragment,{children:i.jsx("div",{className:"absolute z-30 pointer-events-none",style:{left:`${o.x*r}px`,top:`${o.y*r}px`,transform:"translate(-50%, -50%)"},children:i.jsxs("div",{className:"relative",children:[s&&i.jsx("div",{className:"absolute rounded-full bg-blue-500/20 border border-blue-500/50",style:{width:`${s.accuracy/cu.width*qa*1*r}px`,height:`${s.accuracy/cu.width*qa*1*r}px`,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}}),i.jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:t?i.jsx(Zo,{className:"h-8 w-8 text-blue-600 drop-shadow-md"}):i.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full border-4 border-white shadow-lg pulse-animation z-50"})})]})})})},Ha=Xe("NavigationGuideSimple"),TS=20;function PS(e,t,n,r){const a=m=>m*Math.PI/180,o=a(e),l=a(n),c=a(n-e),d=a(r-t),u=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function _S(e){return Math.round(e)}function MS(e,t,n,r){const s=Math.sin(r-t)*Math.cos(n),a=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(r-t);let o=Math.atan2(s,a)*180/Math.PI;return o=(o+360)%360,o>=337.5||o<22.5?"nord":o>=22.5&&o<67.5?"nord-est":o>=67.5&&o<112.5?"est":o>=112.5&&o<157.5?"sud-est":o>=157.5&&o<202.5?"sud":o>=202.5&&o<247.5?"sud-ouest":o>=247.5&&o<292.5?"ouest":"nord-ouest"}function DS(e){const{userPosition:t,targetLocation:n,onClose:r,mapCoords:s,targetMapCoords:a,scale:o=1}=e,[l,c]=p.useState({distance:0,direction:"",isNearby:!1});return p.useEffect(()=>{if(t&&n)try{const d=Wh(n.id);if(!d){Ha.warn("[NavigationGuideSimple] Coordonn√©es GPS non trouv√©es pour",n.id);return}const u=PS(t.latitude,t.longitude,d.latitude,d.longitude),h=MS(t.latitude,t.longitude,d.latitude,d.longitude),m=u<TS,f=_S(u);c({distance:f,direction:h,isNearby:m}),Ha.info("[NavigationGuideSimple] Navigation calcul√©e",{userPosition:t,targetLocation:n.id,distance:f,direction:h,isNearby:m})}catch(d){Ha.error("[NavigationGuideSimple] Erreur lors du calcul de la navigation",d)}},[t,n]),!t||!n?null:i.jsxs(i.Fragment,{children:[s&&a&&i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full z-40",children:[i.jsxs("svg",{width:"100%",height:"100%",className:"absolute top-0 left-0 pointer-events-none",children:[i.jsx("line",{x1:s.x*o,y1:s.y*o,x2:a.x*o,y2:a.y*o,stroke:"#3b82f6",strokeWidth:"4",strokeDasharray:"8,4"}),i.jsx("circle",{cx:s.x*o,cy:s.y*o,r:"6",fill:"#3b82f6"}),i.jsx("circle",{cx:a.x*o,cy:a.y*o,r:"6",fill:"#ef4444"})]}),i.jsxs("div",{className:"absolute bg-white/90 px-3 py-1.5 rounded text-sm font-medium text-blue-700 shadow-md flex items-center gap-2 cursor-pointer hover:bg-white/100 transition-colors",style:{left:`${(s.x+a.x)/2*o}px`,top:`${(s.y+a.y)/2*o}px`,transform:"translate(-50%, -50%)"},onClick:r,children:[i.jsxs("span",{children:[l.distance," m"]}),i.jsx(gr,{className:"w-3 h-3 text-gray-500"})]})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 z-50 p-4 bg-white/90 shadow-lg rounded-t-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cn,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-lg",children:n.name})]}),i.jsxs(J,{variant:"destructive",size:"sm",onClick:r,className:"flex items-center gap-1",children:[i.jsx(gr,{className:"w-4 h-4"}),"Arr√™ter"]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Zo,{className:"w-5 h-5 mr-2 text-blue-600"}),i.jsx("div",{children:i.jsx("p",{className:"font-medium",children:l.isNearby?"Vous √™tes arriv√©!":`${l.distance} m√®tres`})})]})})]})]})}const ti=Xe("MapComponent"),gu={info:(e,t)=>{if(!e.includes("redimensionn√©"))return ti.info(e,t)},warn:ti.warn,error:ti.error,debug:ti.debug},ni=400,xu=600,Zh=({locations:e,visitedLocations:t=[],onLocationClick:n,highlightedLocation:r=null,testPoint:s,testPointAffine:a,activeLocation:o=null,onClick:l,readOnly:c=!1,onScaleChange:d,userLocationProps:u,navigationProps:h,onPanStart:m,onPan:f,onPanEnd:x})=>{const g=p.useRef(null),[y,S]=p.useState(1),[v,b]=p.useState(!1);p.useState({x:0,y:0}),p.useState({x:0,y:0});const[w,A]=p.useState(null);p.useRef(null);const C=p.useRef(null),M=p.useRef(null),_=p.useRef({dx:0,dy:0}),k=p.useRef(0);return p.useRef(!1),p.useEffect(()=>{const P=()=>{var $;try{if(!g.current||!g.current.parentElement)return;const H=(($=g.current.parentElement)==null?void 0:$.clientWidth)||window.innerWidth,Z=Math.min(H,ni)/ni;S(Z),d&&d(Z),g.current&&g.current.parentElement&&(g.current.style.width=`${ni*Z}px`,g.current.style.height=`${xu*Z}px`)}catch(H){console.warn("[MapComponent] Error in calculateScale:",H)}};P();const N=T(P,100);window.addEventListener("resize",N);function T($,H){let Y=null;return function(){Y&&window.clearTimeout(Y),Y=window.setTimeout(()=>{$(),Y=null},H)}}return()=>{window.removeEventListener("resize",N)}},[d]),p.useEffect(()=>{if(c)return;let P=!1;const N=Z=>{if(P||!v||!C.current)return;const te={x:Z.clientX,y:Z.clientY};if(!M.current){M.current=te;return}const L=te.x-M.current.x,q=te.y-M.current.y;_.current.dx+=L,_.current.dy+=q,M.current=te,f&&f({dx:L,dy:q,x:te.x,y:te.y})},T=()=>{if(P||!v)return;b(!1);const Z=Date.now()-k.current,{dx:te,dy:L}=_.current,q=Math.hypot(te,L);C.current=null,M.current=null,_.current={dx:0,dy:0},x&&x({totalDx:te,totalDy:L,distance:q,durationMs:Z}),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",T)},$=(Z,te)=>{b(!0),C.current={x:Z,y:te},M.current={x:Z,y:te},_.current={dx:0,dy:0},k.current=Date.now(),m&&m({x:Z,y:te}),window.addEventListener("mousemove",N),window.addEventListener("mouseup",T)},H=g.current;if(!H||P)return;const Y=Z=>{Z.button===0&&$(Z.clientX,Z.clientY)};return H.addEventListener("mousedown",Y),()=>{P=!0;try{H&&H.removeEventListener&&H.removeEventListener("mousedown",Y),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",T)}catch(Z){console.warn("[MapComponent] Error cleaning up event listeners:",Z)}}},[v,c,m,f,x]),p.useEffect(()=>{e&&e.length>0&&gu.info("Coordonn√©es des points sur la carte",{activeLocationId:o||"aucun",points:e.map(P=>({id:P.id,name:P.name,x:P.x,y:P.y}))})},[e,o]),i.jsxs("div",{ref:g,className:"relative border border-[#d8e3ff] rounded-lg bg-[#f0f5ff] mb-4 overflow-hidden mx-auto",style:{width:`${ni*y}px`,height:`${xu*y}px`},children:[i.jsx("div",{className:"absolute inset-0 bg-white flex items-center justify-center",onClick:c?void 0:l,style:{cursor:c?"default":"pointer"},children:i.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url(${pt("/map-feydeau.png")})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:.9,pointerEvents:"none"},children:i.jsx("img",{src:pt("/map-feydeau.png"),alt:"Plan de l'√éle Feydeau",className:"hidden",onError:P=>{gu.error("Erreur de chargement de l'image de la carte",{online:As()})}})})}),i.jsxs("div",{className:"absolute inset-0",children:[s&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${s.x*y}px`,top:`${s.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#ff0000]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),a&&i.jsx("div",{className:"absolute",style:{position:"absolute",left:`${a.x*y}px`,top:`${a.y*y}px`,zIndex:30,transform:"translate(-50%, -50%)"},children:i.jsx("div",{className:"rounded-full shadow-lg border-2 border-white bg-[#0000ff]/90",style:{width:`${24*y}px`,height:`${24*y}px`}})}),e.map(P=>i.jsx("div",{id:`location-${P.id}`,"data-location-id":P.id,className:"absolute",style:{position:"absolute",left:`${P.x*y}px`,top:`${P.y*y}px`,zIndex:20,width:`${60*y}px`,height:`${60*y}px`,transform:"translate(-50%, -50%)",pointerEvents:c?"none":"auto",cursor:c?"default":"pointer"},onClick:c?void 0:N=>{N.stopPropagation(),l&&l(N)},children:i.jsx("div",{className:`absolute top-1/2 left-1/2 w-8 h-8 rounded-full shadow-lg border-2 border-white
                ${o===P.id?"bg-[#ff7a45]/90 ring-2 ring-[#ff7a45] ring-opacity-70 scale-110":r===P.id?P.visited?"bg-[#4CAF50]/90 ring-4 ring-green-400 ring-opacity-80":"bg-[#ff7a45]/90 ring-4 ring-yellow-400 ring-opacity-80":P.hasProgram===!1?"bg-[#757575]/90":P.visited?"bg-[#4CAF50]/90":"bg-[#4a5d94]/90"}`,style:{transform:"translate(-50%, -50%)",width:`${32*y}px`,height:`${32*y}px`}})},P.id))]}),u&&i.jsx(AS,{...u,scale:y,onLocationUpdate:(P,N,T)=>{A({x:P,y:N}),u.onLocationUpdate&&u.onLocationUpdate(P,N,T)}}),h&&u&&i.jsx(DS,{...h,mapCoords:w,targetMapCoords:h.targetLocation?{x:h.targetLocation.x,y:h.targetLocation.y}:null,scale:y})]})};var Ao=["Enter"," "],RS=["ArrowDown","PageUp","Home"],ef=["ArrowUp","PageDown","End"],OS=[...RS,...ef],LS={ltr:[...Ao,"ArrowRight"],rtl:[...Ao,"ArrowLeft"]},FS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bs="Menu",[Ts,$S,zS]=am(Bs),[jr,tf]=Zr(Bs,[zS,qi,om]),la=qi(),nf=om(),[BS,Er]=jr(Bs),[VS,Vs]=jr(Bs),rf=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=e,l=la(t),[c,d]=p.useState(null),u=p.useRef(!1),h=Sn(a),m=el(s);return p.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(rm,{...l,children:i.jsx(BS,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:i.jsx(VS,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:r})})})};rf.displayName=Bs;var US="MenuAnchor",kl=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=la(n);return i.jsx(Zd,{...s,...r,ref:t})});kl.displayName=US;var Al="MenuPortal",[qS,sf]=jr(Al,{forceMount:void 0}),af=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=Er(Al,t);return i.jsx(qS,{scope:t,forceMount:n,children:i.jsx(pn,{present:n||a.open,children:i.jsx(Cx,{asChild:!0,container:s,children:r})})})};af.displayName=Al;var Ut="MenuContent",[HS,Tl]=jr(Ut),of=p.forwardRef((e,t)=>{const n=sf(Ut,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Er(Ut,e.__scopeMenu),o=Vs(Ut,e.__scopeMenu);return i.jsx(Ts.Provider,{scope:e.__scopeMenu,children:i.jsx(pn,{present:r||a.open,children:i.jsx(Ts.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(GS,{...s,ref:t}):i.jsx(WS,{...s,ref:t})})})})}),GS=p.forwardRef((e,t)=>{const n=Er(Ut,e.__scopeMenu),r=p.useRef(null),s=et(t,r);return p.useEffect(()=>{const a=r.current;if(a)return vx(a)},[]),i.jsx(Pl,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),WS=p.forwardRef((e,t)=>{const n=Er(Ut,e.__scopeMenu);return i.jsx(Pl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Pl=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:x,...g}=e,y=Er(Ut,n),S=Vs(Ut,n),v=la(n),b=nf(n),w=$S(n),[A,C]=p.useState(null),M=p.useRef(null),_=et(t,M,y.onContentChange),k=p.useRef(0),P=p.useRef(""),N=p.useRef(0),T=p.useRef(null),$=p.useRef("right"),H=p.useRef(0),Y=x?Ex:p.Fragment,Z=x?{as:sm,allowPinchZoom:!0}:void 0,te=q=>{var Ie,V;const j=P.current+q,Q=w().filter(ne=>!ne.disabled),ie=document.activeElement,E=(Ie=Q.find(ne=>ne.ref.current===ie))==null?void 0:Ie.textValue,ce=Q.map(ne=>ne.textValue),Pe=ij(ce,j,E),ae=(V=Q.find(ne=>ne.textValue===Pe))==null?void 0:V.ref.current;(function ne(ye){P.current=ye,window.clearTimeout(k.current),ye!==""&&(k.current=window.setTimeout(()=>ne(""),1e3))})(j),ae&&setTimeout(()=>ae.focus())};p.useEffect(()=>()=>window.clearTimeout(k.current),[]),bx();const L=p.useCallback(q=>{var Q,ie;return $.current===((Q=T.current)==null?void 0:Q.side)&&oj(q,(ie=T.current)==null?void 0:ie.area)},[]);return i.jsx(HS,{scope:n,searchRef:P,onItemEnter:p.useCallback(q=>{L(q)&&q.preventDefault()},[L]),onItemLeave:p.useCallback(q=>{var j;L(q)||((j=M.current)==null||j.focus(),C(null))},[L]),onTriggerLeave:p.useCallback(q=>{L(q)&&q.preventDefault()},[L]),pointerGraceTimerRef:N,onPointerGraceIntentChange:p.useCallback(q=>{T.current=q},[]),children:i.jsx(Y,{...Z,children:i.jsx(wx,{asChild:!0,trapped:s,onMountAutoFocus:me(a,q=>{var j;q.preventDefault(),(j=M.current)==null||j.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(em,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:i.jsx(Sx,{asChild:!0,...b,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:C,onEntryFocus:me(c,q=>{S.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(tm,{role:"menu","aria-orientation":"vertical","data-state":jf(y.open),"data-radix-menu-content":"",dir:S.dir,...v,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:me(g.onKeyDown,q=>{const Q=q.target.closest("[data-radix-menu-content]")===q.currentTarget,ie=q.ctrlKey||q.altKey||q.metaKey,E=q.key.length===1;Q&&(q.key==="Tab"&&q.preventDefault(),!ie&&E&&te(q.key));const ce=M.current;if(q.target!==ce||!OS.includes(q.key))return;q.preventDefault();const ae=w().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);ef.includes(q.key)&&ae.reverse(),rj(ae)}),onBlur:me(e.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(k.current),P.current="")}),onPointerMove:me(e.onPointerMove,Ps(q=>{const j=q.target,Q=H.current!==q.clientX;if(q.currentTarget.contains(j)&&Q){const ie=q.clientX>H.current?"right":"left";$.current=ie,H.current=q.clientX}}))})})})})})})});of.displayName=Ut;var YS="MenuGroup",_l=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ke.div,{role:"group",...r,ref:t})});_l.displayName=YS;var KS="MenuLabel",lf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ke.div,{...r,ref:t})});lf.displayName=KS;var Ii="MenuItem",yu="menu.itemSelect",ca=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=p.useRef(null),o=Vs(Ii,e.__scopeMenu),l=Tl(Ii,e.__scopeMenu),c=et(t,a),d=p.useRef(!1),u=()=>{const h=a.current;if(!n&&h){const m=new CustomEvent(yu,{bubbles:!0,cancelable:!0});h.addEventListener(yu,f=>r==null?void 0:r(f),{once:!0}),Nx(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(cf,{...s,ref:c,disabled:n,onClick:me(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:me(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:me(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Ao.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ca.displayName=Ii;var cf=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,o=Tl(Ii,n),l=nf(n),c=p.useRef(null),d=et(t,c),[u,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&f((x.textContent??"").trim())},[a.children]),i.jsx(Ts.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(jx,{asChild:!0,...l,focusable:!r,children:i.jsx(Ke.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:me(e.onPointerMove,Ps(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(e.onPointerLeave,Ps(x=>o.onItemLeave(x))),onFocus:me(e.onFocus,()=>h(!0)),onBlur:me(e.onBlur,()=>h(!1))})})})}),XS="MenuCheckboxItem",uf=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return i.jsx(pf,{scope:e.__scopeMenu,checked:n,children:i.jsx(ca,{role:"menuitemcheckbox","aria-checked":ki(n)?"mixed":n,...s,ref:t,"data-state":Dl(n),onSelect:me(s.onSelect,()=>r==null?void 0:r(ki(n)?!0:!n),{checkForDefaultPrevented:!1})})})});uf.displayName=XS;var df="MenuRadioGroup",[QS,JS]=jr(df,{value:void 0,onValueChange:()=>{}}),mf=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=Sn(r);return i.jsx(QS,{scope:e.__scopeMenu,value:n,onValueChange:a,children:i.jsx(_l,{...s,ref:t})})});mf.displayName=df;var hf="MenuRadioItem",ff=p.forwardRef((e,t)=>{const{value:n,...r}=e,s=JS(hf,e.__scopeMenu),a=n===s.value;return i.jsx(pf,{scope:e.__scopeMenu,checked:a,children:i.jsx(ca,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Dl(a),onSelect:me(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});ff.displayName=hf;var Ml="MenuItemIndicator",[pf,ZS]=jr(Ml,{checked:!1}),gf=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=ZS(Ml,n);return i.jsx(pn,{present:r||ki(a.checked)||a.checked===!0,children:i.jsx(Ke.span,{...s,ref:t,"data-state":Dl(a.checked)})})});gf.displayName=Ml;var ej="MenuSeparator",xf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ke.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});xf.displayName=ej;var tj="MenuArrow",yf=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=la(n);return i.jsx(nm,{...s,...r,ref:t})});yf.displayName=tj;var nj="MenuSub",[$2,vf]=jr(nj),fs="MenuSubTrigger",bf=p.forwardRef((e,t)=>{const n=Er(fs,e.__scopeMenu),r=Vs(fs,e.__scopeMenu),s=vf(fs,e.__scopeMenu),a=Tl(fs,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(kl,{asChild:!0,...d,children:i.jsx(cf,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":jf(n.open),...e,ref:lm(t,s.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(e.onPointerMove,Ps(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:me(e.onPointerLeave,Ps(h=>{var f,x;u();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const g=(x=n.content)==null?void 0:x.dataset.side,y=g==="right",S=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+S,y:h.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:me(e.onKeyDown,h=>{var f;const m=a.searchRef.current!=="";e.disabled||m&&h.key===" "||LS[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});bf.displayName=fs;var wf="MenuSubContent",Sf=p.forwardRef((e,t)=>{const n=sf(Ut,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Er(Ut,e.__scopeMenu),o=Vs(Ut,e.__scopeMenu),l=vf(wf,e.__scopeMenu),c=p.useRef(null),d=et(t,c);return i.jsx(Ts.Provider,{scope:e.__scopeMenu,children:i.jsx(pn,{present:r||a.open,children:i.jsx(Ts.Slot,{scope:e.__scopeMenu,children:i.jsx(Pl,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:me(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:me(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:me(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),m=FS[o.dir].includes(u.key);h&&m&&(a.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});Sf.displayName=wf;function jf(e){return e?"open":"closed"}function ki(e){return e==="indeterminate"}function Dl(e){return ki(e)?"indeterminate":e?"checked":"unchecked"}function rj(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function sj(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function ij(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=sj(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function aj(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(s=!s)}return s}function oj(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return aj(n,t)}function Ps(e){return t=>t.pointerType==="mouse"?e(t):void 0}var lj=rf,cj=kl,uj=af,dj=of,mj=_l,hj=lf,fj=ca,pj=uf,gj=mf,xj=ff,yj=gf,vj=xf,bj=yf,wj=bf,Sj=Sf,Rl="DropdownMenu",[jj,z2]=Zr(Rl,[tf]),vt=tf(),[Ej,Ef]=jj(Rl),Nf=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=vt(t),d=p.useRef(null),[u=!1,h]=Hi({prop:s,defaultProp:a,onChange:o});return i.jsx(Ej,{scope:t,triggerId:mo(),triggerRef:d,contentId:mo(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(lj,{...c,open:u,onOpenChange:h,dir:r,modal:l,children:n})})};Nf.displayName=Rl;var Cf="DropdownMenuTrigger",If=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=Ef(Cf,n),o=vt(n);return i.jsx(cj,{asChild:!0,...o,children:i.jsx(Ke.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:lm(t,a.triggerRef),onPointerDown:me(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:me(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});If.displayName=Cf;var Nj="DropdownMenuPortal",kf=e=>{const{__scopeDropdownMenu:t,...n}=e,r=vt(t);return i.jsx(uj,{...r,...n})};kf.displayName=Nj;var Af="DropdownMenuContent",Tf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ef(Af,n),a=vt(n),o=p.useRef(!1);return i.jsx(dj,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:me(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:me(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Tf.displayName=Af;var Cj="DropdownMenuGroup",Ij=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(mj,{...s,...r,ref:t})});Ij.displayName=Cj;var kj="DropdownMenuLabel",Pf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(hj,{...s,...r,ref:t})});Pf.displayName=kj;var Aj="DropdownMenuItem",_f=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(fj,{...s,...r,ref:t})});_f.displayName=Aj;var Tj="DropdownMenuCheckboxItem",Mf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(pj,{...s,...r,ref:t})});Mf.displayName=Tj;var Pj="DropdownMenuRadioGroup",_j=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(gj,{...s,...r,ref:t})});_j.displayName=Pj;var Mj="DropdownMenuRadioItem",Df=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(xj,{...s,...r,ref:t})});Df.displayName=Mj;var Dj="DropdownMenuItemIndicator",Rf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(yj,{...s,...r,ref:t})});Rf.displayName=Dj;var Rj="DropdownMenuSeparator",Of=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(vj,{...s,...r,ref:t})});Of.displayName=Rj;var Oj="DropdownMenuArrow",Lj=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(bj,{...s,...r,ref:t})});Lj.displayName=Oj;var Fj="DropdownMenuSubTrigger",Lf=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(wj,{...s,...r,ref:t})});Lf.displayName=Fj;var $j="DropdownMenuSubContent",Ff=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vt(n);return i.jsx(Sj,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ff.displayName=$j;var zj=Nf,Bj=If,Vj=kf,$f=Tf,zf=Pf,Bf=_f,Vf=Mf,Uf=Df,qf=Rf,Hf=Of,Gf=Lf,Wf=Ff;const Uj=zj,qj=Bj,Hj=p.forwardRef(({className:e,inset:t,children:n,...r},s)=>i.jsxs(Gf,{ref:s,className:se("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Ix,{className:"ml-auto h-4 w-4"})]}));Hj.displayName=Gf.displayName;const Gj=p.forwardRef(({className:e,...t},n)=>i.jsx(Wf,{ref:n,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Gj.displayName=Wf.displayName;const Yf=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Vj,{children:i.jsx($f,{ref:r,sideOffset:t,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Yf.displayName=$f.displayName;const sr=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Bf,{ref:r,className:se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));sr.displayName=Bf.displayName;const Wj=p.forwardRef(({className:e,children:t,checked:n,...r},s)=>i.jsxs(Vf,{ref:s,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(qf,{children:i.jsx(Gi,{className:"h-4 w-4"})})}),t]}));Wj.displayName=Vf.displayName;const Yj=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Uf,{ref:r,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(qf,{children:i.jsx(kx,{className:"h-2 w-2 fill-current"})})}),t]}));Yj.displayName=Uf.displayName;const Kj=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(zf,{ref:r,className:se("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Kj.displayName=zf.displayName;const Xj=p.forwardRef(({className:e,...t},n)=>i.jsx(Hf,{ref:n,className:se("-mx-1 my-1 h-px bg-muted",e),...t}));Xj.displayName=Hf.displayName;var Qj=Object.defineProperty,Ai=Object.getOwnPropertySymbols,Kf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,vu=(e,t,n)=>t in e?Qj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,To=(e,t)=>{for(var n in t||(t={}))Kf.call(t,n)&&vu(e,n,t[n]);if(Ai)for(var n of Ai(t))Xf.call(t,n)&&vu(e,n,t[n]);return e},Po=(e,t)=>{var n={};for(var r in e)Kf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ai)for(var r of Ai(e))t.indexOf(r)<0&&Xf.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var br;(e=>{const t=class ve{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<ve.MIN_VERSION||c>ve.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),h==-1){let x=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const y=this.getPenaltyScore();y<x&&(h=g,x=y),this.applyMask(g)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=e.QrSegment.makeSegments(c);return ve.encodeSegments(u,d)}static encodeBinary(c,d){const u=e.QrSegment.makeBytes(c);return ve.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,m=-1,f=!0){if(!(ve.MIN_VERSION<=u&&u<=h&&h<=ve.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,g;for(x=u;;x++){const b=ve.getNumDataCodewords(x,d)*8,w=o.getTotalBits(c,x);if(w<=b){g=w;break}if(x>=h)throw new RangeError("Data too long")}for(const b of[ve.Ecc.MEDIUM,ve.Ecc.QUARTILE,ve.Ecc.HIGH])f&&g<=ve.getNumDataCodewords(x,b)*8&&(d=b);let y=[];for(const b of c){n(b.mode.modeBits,4,y),n(b.numChars,b.mode.numCharCountBits(x),y);for(const w of b.getData())y.push(w)}s(y.length==g);const S=ve.getNumDataCodewords(x,d)*8;s(y.length<=S),n(0,Math.min(4,S-y.length),y),n(0,(8-y.length%8)%8,y),s(y.length%8==0);for(let b=236;y.length<S;b^=253)n(b,8,y);let v=[];for(;v.length*8<y.length;)v.push(0);return y.forEach((b,w)=>v[w>>>3]|=b<<7-(w&7)),new ve(x,d,v,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,r(h,m));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,r(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,r(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,r(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;s(d>>>18==0);for(let u=0;u<18;u++){const h=r(d,u),m=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(m,f,h),this.setFunctionModule(f,m,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(u)),f=c+h,x=d+u;0<=f&&f<this.size&&0<=x&&x<this.size&&this.setFunctionModule(f,x,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=ve.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=ve.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],m=ve.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(ve.getNumRawDataModules(d)/8),x=h-f%h,g=Math.floor(f/h);let y=[];const S=ve.reedSolomonComputeDivisor(m);for(let b=0,w=0;b<h;b++){let A=c.slice(w,w+g-m+(b<x?0:1));w+=A.length;const C=ve.reedSolomonComputeRemainder(A,S);b<x&&A.push(0),y.push(A.concat(C))}let v=[];for(let b=0;b<y[0].length;b++)y.forEach((w,A)=>{(b!=g-m||A>=x)&&v.push(w[b])});return s(v.length==f),v}drawCodewords(c){if(c.length!=Math.floor(ve.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const f=u-m,g=(u+1&2)==0?this.size-1-h:h;!this.isFunction[g][f]&&d<c.length*8&&(this.modules[g][f]=r(c[d>>>3],7-(d&7)),d++)}}s(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[m][y]==f?(x++,x==5?c+=ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*ve.PENALTY_N3),f=this.modules[m][y],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*ve.PENALTY_N3}for(let m=0;m<this.size;m++){let f=!1,x=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][m]==f?(x++,x==5?c+=ve.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,g),f||(c+=this.finderPenaltyCountPatterns(g)*ve.PENALTY_N3),f=this.modules[y][m],x=1);c+=this.finderPenaltyTerminateAndCount(f,x,g)*ve.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let f=0;f<this.size-1;f++){const x=this.modules[m][f];x==this.modules[m][f+1]&&x==this.modules[m+1][f]&&x==this.modules[m+1][f+1]&&(c+=ve.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((f,x)=>f+(x?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return s(0<=h&&h<=9),c+=h*ve.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<ve.MIN_VERSION||c>ve.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(ve.getNumRawDataModules(c)/8)-ve.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*ve.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let m=0;m<d.length;m++)d[m]=ve.reedSolomonMultiply(d[m],u),m+1<d.length&&(d[m]^=d[m+1]);u=ve.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const m=h^u.shift();u.push(0),d.forEach((f,x)=>u[x]^=ve.reedSolomonMultiply(f,m))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return s(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];s(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function r(l,c){return(l>>>c&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const a=class qe{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)n(u,8,d);return new qe(qe.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!qe.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);n(parseInt(c.substring(u,u+h),10),h*3+1,d),u+=h}return new qe(qe.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!qe.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=qe.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=qe.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),n(h,11,d)}return u<c.length&&n(qe.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new qe(qe.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:qe.isNumeric(c)?[qe.makeNumeric(c)]:qe.isAlphanumeric(c)?[qe.makeAlphanumeric(c)]:[qe.makeBytes(qe.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new qe(qe.Mode.ECI,0,d)}static isNumeric(c){return qe.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return qe.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const m=h.mode.numCharCountBits(d);if(h.numChars>=1<<m)return 1/0;u+=4+m+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=a;e.QrSegment=a})(br||(br={}));(e=>{(t=>{const n=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(br||(br={}));(e=>{(t=>{const n=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(br||(br={}));var _r=br;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Jj={L:_r.QrCode.Ecc.LOW,M:_r.QrCode.Ecc.MEDIUM,Q:_r.QrCode.Ecc.QUARTILE,H:_r.QrCode.Ecc.HIGH},Qf=128,Jf="L",Zf="#FFFFFF",ep="#000000",tp=!1,np=1,Zj=4,eE=0,tE=.1;function rp(e,t=0){const n=[];return e.forEach(function(r,s){let a=null;r.forEach(function(o,l){if(!o&&a!==null){n.push(`M${a+t} ${s+t}h${l-a}v1H${a+t}z`),a=null;return}if(l===r.length-1){if(!o)return;a===null?n.push(`M${l+t},${s+t} h1v1H${l+t}z`):n.push(`M${a+t},${s+t} h${l+1-a}v1H${a+t}z`);return}o&&a===null&&(a=l)})}),n.join("")}function sp(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((s,a)=>a<t.x||a>=t.x+t.w?s:!1))}function nE(e,t,n,r){if(r==null)return null;const s=e.length+n*2,a=Math.floor(t*tE),o=s/t,l=(r.width||a)*o,c=(r.height||a)*o,d=r.x==null?e.length/2-l/2:r.x*o,u=r.y==null?e.length/2-c/2:r.y*o,h=r.opacity==null?1:r.opacity;let m=null;if(r.excavate){let x=Math.floor(d),g=Math.floor(u),y=Math.ceil(l+d-x),S=Math.ceil(c+u-g);m={x,y:g,w:y,h:S}}const f=r.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:m,opacity:h,crossOrigin:f}}function rE(e,t){return t!=null?Math.max(Math.floor(t),0):e?Zj:eE}function ip({value:e,level:t,minVersion:n,includeMargin:r,marginSize:s,imageSettings:a,size:o,boostLevel:l}){let c=F.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((g,y)=>(g.push(..._r.QrSegment.makeSegments(y)),g),[]);return _r.QrCode.encodeSegments(x,Jj[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=F.useMemo(()=>{let f=c.getModules();const x=rE(r,s),g=f.length+x*2,y=nE(f,o,x,a);return{cells:f,margin:x,numCells:g,calculatedImageSettings:y}},[c,o,a,r,s]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var sE=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),iE=F.forwardRef(function(t,n){const r=t,{value:s,size:a=Qf,level:o=Jf,bgColor:l=Zf,fgColor:c=ep,includeMargin:d=tp,minVersion:u=np,boostLevel:h,marginSize:m,imageSettings:f}=r,g=Po(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=g,S=Po(g,["style"]),v=f==null?void 0:f.src,b=F.useRef(null),w=F.useRef(null),A=F.useCallback(H=>{b.current=H,typeof n=="function"?n(H):n&&(n.current=H)},[n]),[C,M]=F.useState(!1),{margin:_,cells:k,numCells:P,calculatedImageSettings:N}=ip({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:m,imageSettings:f,size:a});F.useEffect(()=>{if(b.current!=null){const H=b.current,Y=H.getContext("2d");if(!Y)return;let Z=k;const te=w.current,L=N!=null&&te!==null&&te.complete&&te.naturalHeight!==0&&te.naturalWidth!==0;L&&N.excavation!=null&&(Z=sp(k,N.excavation));const q=window.devicePixelRatio||1;H.height=H.width=a*q;const j=a/P*q;Y.scale(j,j),Y.fillStyle=l,Y.fillRect(0,0,P,P),Y.fillStyle=c,sE?Y.fill(new Path2D(rp(Z,_))):k.forEach(function(Q,ie){Q.forEach(function(E,ce){E&&Y.fillRect(ce+_,ie+_,1,1)})}),N&&(Y.globalAlpha=N.opacity),L&&Y.drawImage(te,N.x+_,N.y+_,N.w,N.h)}}),F.useEffect(()=>{M(!1)},[v]);const T=To({height:a,width:a},y);let $=null;return v!=null&&($=F.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{M(!0)},ref:w,crossOrigin:N==null?void 0:N.crossOrigin})),F.createElement(F.Fragment,null,F.createElement("canvas",To({style:T,height:a,width:a,ref:A,role:"img"},S)),$)});iE.displayName="QRCodeCanvas";var ap=F.forwardRef(function(t,n){const r=t,{value:s,size:a=Qf,level:o=Jf,bgColor:l=Zf,fgColor:c=ep,includeMargin:d=tp,minVersion:u=np,boostLevel:h,title:m,marginSize:f,imageSettings:x}=r,g=Po(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:S,numCells:v,calculatedImageSettings:b}=ip({value:s,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:x,size:a});let w=S,A=null;x!=null&&b!=null&&(b.excavation!=null&&(w=sp(S,b.excavation)),A=F.createElement("image",{href:x.src,height:b.h,width:b.w,x:b.x+y,y:b.y+y,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const C=rp(w,y);return F.createElement("svg",To({height:a,width:a,viewBox:`0 0 ${v} ${v}`,ref:n,role:"img"},g),!!m&&F.createElement("title",null,m),F.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),F.createElement("path",{fill:c,d:C,shapeRendering:"crispEdges"}),A)});ap.displayName="QRCodeSVG";const op=Px,aE=Tx,lp=F.forwardRef(({className:e,...t},n)=>i.jsx(cm,{ref:n,className:se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lp.displayName=cm.displayName;const Ol=F.forwardRef(({className:e,children:t,...n},r)=>{const s=F.useId();return i.jsxs(aE,{children:[i.jsx(lp,{}),i.jsxs(um,{ref:r,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-2 border border-slate-200 bg-white p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:p-6 sm:gap-4 max-h-[90vh] overflow-y-auto",e),"aria-describedby":s,...n,children:[i.jsx("div",{id:s,className:"sr-only",children:"Contenu de la bo√Æte de dialogue"}),t,i.jsxs(Ax,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500","aria-label":"Close dialog",children:[i.jsx(gr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Ol.displayName=um.displayName;const Ll=({className:e,...t})=>i.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ll.displayName="DialogHeader";const cp=({className:e,...t})=>i.jsx("div",{className:se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});cp.displayName="DialogFooter";const Fl=F.forwardRef(({className:e,...t},n)=>i.jsx(dm,{ref:n,className:se("text-lg font-semibold leading-none tracking-tight",e),...t}));Fl.displayName=dm.displayName;const oE=F.forwardRef(({className:e,...t},n)=>i.jsx(mm,{ref:n,className:se("text-sm text-muted-foreground",e),...t}));oE.displayName=mm.displayName;function ua({title:e,text:t,url:n}){const r=n||(typeof window<"u"?window.location.href:""),[s,a]=F.useState(!1),o=async d=>{try{z.trackFeatureUse("share",{platform:d,title:e});const u=r.startsWith("http")?r:typeof window<"u"?window.location.origin+r:r;switch(d){case"native":if(navigator.share)try{await navigator.share({title:e,text:t,url:u})}catch(h){console.error("Error sharing:",h),l(u)}else l(u);break;case"facebook":try{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Facebook share:",h),l(u)}break;case"x":try{window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(u)}`,"_blank")}catch(h){console.error("Error opening Twitter share:",h),l(u)}break;case"instagram":try{const h=/iPad|iPhone|iPod/.test(navigator.userAgent),m=/Android/.test(navigator.userAgent);h||m?(window.location.href="instagram://",setTimeout(()=>{window.location.href="https://www.instagram.com/"},2e3)):window.open("https://www.instagram.com/","_blank")}catch(h){console.error("Error opening Instagram:",h),l(u)}break;case"copy":l(u);break}}catch(u){console.error("Error in handleShare:",u);try{l(r)}catch(h){console.error("Error in fallback copy:",h),alert("Impossible de partager. Veuillez copier manuellement : "+r)}}},l=d=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(d).then(()=>{alert("Lien copi√© dans le presse-papier")}).catch(u=>{console.error("Erreur lors de la copie :",u),c(d)}):c(d)},c=d=>{let u=null;try{u=document.createElement("textarea"),u.value=d,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();const h=document.execCommand("copy");alert(h?"Lien copi√© dans le presse-papier":"Impossible de copier le lien. Veuillez le copier manuellement : "+d)}catch(h){console.error("Erreur lors de la copie fallback :",h),alert("Impossible de copier le lien. Veuillez le copier manuellement : "+d)}finally{if(u&&document.body.contains(u))try{document.body.removeChild(u)}catch(h){console.warn("[ShareButton] Error cleaning up textarea:",h)}}};return i.jsxs(i.Fragment,{children:[i.jsxs(Uj,{children:[i.jsx(qj,{asChild:!0,children:i.jsx(J,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",children:i.jsx(hm,{className:"h-5 w-5"})})}),i.jsxs(Yf,{align:"end",className:"min-w-[150px]",children:[typeof navigator<"u"&&navigator.share&&i.jsx(sr,{onClick:()=>o("native"),className:"cursor-pointer",children:"Partager"}),i.jsx(sr,{onClick:()=>o("facebook"),className:"cursor-pointer",children:"Facebook"}),i.jsx(sr,{onClick:()=>o("x"),className:"cursor-pointer",children:"X"}),i.jsx(sr,{onClick:()=>o("instagram"),className:"cursor-pointer",children:"Instagram"}),i.jsx(sr,{onClick:()=>o("copy"),className:"cursor-pointer",children:"Copier le lien"}),i.jsxs(sr,{onClick:()=>a(!0),className:"cursor-pointer",children:[i.jsx(_x,{className:"h-4 w-4 mr-2"}),"Afficher QR code"]})]})]}),i.jsx(op,{open:s,onOpenChange:a,children:i.jsxs(Ol,{className:"sm:max-w-[425px]","aria-describedby":"qr-code-description",children:[i.jsx(Ll,{children:i.jsx(Fl,{children:"Scannez ce QR code"})}),i.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[i.jsx(ap,{value:r,size:200,bgColor:"#ffffff",fgColor:"#4a5d94",level:"H"}),i.jsx("p",{id:"qr-code-description",className:"text-sm text-gray-600 mt-4 text-center",children:"Scannez ce code avec votre t√©l√©phone pour acc√©der directement √† cette page"})]}),i.jsx(cp,{children:i.jsx(J,{onClick:()=>a(!1),children:"Fermer"})})]})})]})}const lE=({count:e=0,show:t=!1,className:n,children:r})=>{const s=t&&e>0;return i.jsxs("div",{className:"relative inline-block",children:[r,s&&i.jsx("div",{className:se("absolute -top-2 -right-2 min-w-[18px] h-[18px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white","animate-pulse",n),children:e>99?"99+":e})]})},$l={databaseURL:"https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app"};async function da(){try{!localStorage.getItem("cloudinary_revolution_started")&&(localStorage.removeItem("community_entries"),localStorage.setItem("cloudinary_revolution_started","true"),console.log("[CloudinaryService] Syst√®me initialis√©"));const t=await fetch(`${$l.databaseURL}/community-photos.json`);if(!t.ok)return console.error("[CloudinaryService] Erreur API:",t.status),[];const n=await t.json(),r=n?Object.values(n):[];return console.log(`[CloudinaryService] ${r.length} photos charg√©es`),r.sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(e){return console.error("[CloudinaryService] Erreur:",e),[]}}async function cE(e){var a,o,l,c;const t=e.cloudinaryUrl||e.imageUrl,r={id:t?((a=t.match(/\/v\d+\/([^\.]+)/))==null?void 0:a[1])||`photo_${Date.now()}`:`text_${Date.now()}`,type:t?"photo":"testimonial",displayName:((o=e.displayName)==null?void 0:o.trim())||"Anonyme",content:((l=e.content)==null?void 0:l.trim())||"",imageUrl:t||"",thumbnailUrl:t||"",description:((c=e.description)==null?void 0:c.trim())||"",createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),moderation:{status:"approved",moderatedAt:new Date().toISOString()}};if(!(await fetch(`${$l.databaseURL}/community-photos/${r.id}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Impossible de sauvegarder la photo. V√©rifiez votre connexion.");return console.log("[CloudinaryService] Photo sauvegard√©e"),r}async function uE(e){if(!(await fetch(`${$l.databaseURL}/community-photos/${e}.json`,{method:"DELETE"})).ok)throw new Error("Impossible de supprimer la photo");console.log("[CloudinaryService] ‚úÖ Photo supprim√©e")}const bu="lastKnownPhotosCount",dE=2*60*1e3;function up(){const[e,t]=p.useState(!1),[n,r]=p.useState(0),[s,a]=p.useState(0),o=p.useCallback(()=>{try{const h=localStorage.getItem(bu);return h?parseInt(h,10):0}catch(h){return console.warn("[NewPhotosNotification] Error reading localStorage:",h),0}},[]),l=p.useCallback(h=>{try{localStorage.setItem(bu,h.toString())}catch(m){console.warn("[NewPhotosNotification] Error writing to localStorage:",m)}},[]),c=p.useCallback(async()=>{try{const m=(await da()).length,f=o();if(a(m),f>0&&m>f){const x=m-f;r(x),t(!0),console.log(`[NewPhotosNotification] ${x} nouvelles photos d√©tect√©es`)}else m===f||f===0&&l(m)}catch(h){console.error("[NewPhotosNotification] Error checking for new photos:",h)}},[o,l]),d=p.useCallback(()=>{t(!1),r(0),l(s),console.log("[NewPhotosNotification] Photos marqu√©es comme vues")},[s,l]),u=p.useCallback(async()=>{console.log("[NewPhotosNotification] V√©rification forc√©e des nouvelles photos"),await c()},[c]);return p.useEffect(()=>{c();const h=setInterval(c,dE);return()=>{clearInterval(h)}},[c]),{hasNewPhotos:e,newPhotosCount:n,totalPhotos:s,markAsViewed:d,forceCheck:u}}function Zn(){const t=kn().pathname,{hasNewPhotos:n,newPhotosCount:r,markAsViewed:s}=up(),a=o=>t===o;return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-center h-16 z-[9999] shadow-lg",children:i.jsxs("div",{className:"w-full max-w-screen-lg grid grid-cols-6 gap-0 px-1 mx-auto",children:[i.jsxs(Ir,{to:"/map",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/")||a("/map")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Cn,{className:`${a("/")||a("/map")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${a("/")||a("/map")?"text-[11px]":"text-[10px]"}`,children:"Carte"})]}),i.jsxs(Ir,{to:"/program",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/program")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(En,{className:`${a("/program")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${a("/program")?"text-[11px]":"text-[10px]"}`,children:"Programme"})]}),i.jsxs(Ir,{to:"/saved",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/saved")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Wi,{className:`${a("/saved")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${a("/saved")?"text-[11px]":"text-[10px]"}`,children:"Enregistr√©s"})]}),i.jsxs(Ir,{to:"/galleries",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/galleries")||a("/community")||a("/historical")?"text-[#ff7a45] font-medium":"text-gray-500"}`,onClick:()=>{n&&s()},children:[i.jsx(lE,{count:r,show:n,children:i.jsx($s,{className:`${a("/galleries")||a("/community")||a("/historical")?"h-7 w-7":"h-6 w-6"}`})}),i.jsx("span",{className:`mt-1 leading-tight ${a("/galleries")||a("/community")||a("/historical")?"text-[11px]":"text-[10px]"}`,children:"Galeries"})]}),i.jsxs(Ir,{to:"/about",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/about")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(es,{className:`${a("/about")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${a("/about")?"text-[11px]":"text-[10px]"}`,children:"√Ä propos"})]}),i.jsxs(Ir,{to:"/donate",className:`flex flex-col items-center justify-center w-full h-full nav-item-hover ${a("/donate")?"text-[#ff7a45] font-medium":"text-gray-500"}`,children:[i.jsx(Mx,{className:`${a("/donate")?"h-7 w-7":"h-6 w-6"}`}),i.jsx("span",{className:`mt-1 leading-tight ${a("/donate")?"text-[11px]":"text-[10px]"}`,children:"Dons"})]})]})})}const ma="contribution_context";function mE(e){const t={type:"event",id:e.id,name:e.title,imageUrl:e.image?pt(e.image):void 0,locationId:e.locationId};try{localStorage.setItem(ma,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function hE(e){const t={type:"location",id:e.id,name:e.name,imageUrl:e.image?pt(e.image):void 0};try{localStorage.setItem(ma,JSON.stringify(t))}catch(n){console.error("Erreur lors de l'enregistrement du contexte de contribution:",n)}}function dp(){try{const e=localStorage.getItem(ma);return e?JSON.parse(e):null}catch(e){return console.error("Erreur lors de la r√©cup√©ration du contexte de contribution:",e),null}}function fE(){try{localStorage.removeItem(ma)}catch(e){console.error("Erreur lors de la suppression du contexte de contribution:",e)}}function pE(e){const t=dp();return t?{...e,contextType:t.type,contextId:t.id}:e}function gE(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const xE=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vE={};function wu(e,t){return(vE.jsx?yE:xE).test(e)}const bE=/[ \t\n\f\r]/g;function wE(e){return typeof e=="object"?e.type==="text"?Su(e.value):!1:Su(e)}function Su(e){return e.replace(bE,"")===""}class Us{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Us.prototype.normal={};Us.prototype.property={};Us.prototype.space=void 0;function mp(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Us(n,r,t)}function _o(e){return e.toLowerCase()}class Nt{constructor(t,n){this.attribute=n,this.property=t}}Nt.prototype.attribute="";Nt.prototype.booleanish=!1;Nt.prototype.boolean=!1;Nt.prototype.commaOrSpaceSeparated=!1;Nt.prototype.commaSeparated=!1;Nt.prototype.defined=!1;Nt.prototype.mustUseProperty=!1;Nt.prototype.number=!1;Nt.prototype.overloadedBoolean=!1;Nt.prototype.property="";Nt.prototype.spaceSeparated=!1;Nt.prototype.space=void 0;let SE=0;const ge=Nr(),Qe=Nr(),Mo=Nr(),W=Nr(),De=Nr(),Or=Nr(),kt=Nr();function Nr(){return 2**++SE}const Do=Object.freeze(Object.defineProperty({__proto__:null,boolean:ge,booleanish:Qe,commaOrSpaceSeparated:kt,commaSeparated:Or,number:W,overloadedBoolean:Mo,spaceSeparated:De},Symbol.toStringTag,{value:"Module"})),Ga=Object.keys(Do);class zl extends Nt{constructor(t,n,r,s){let a=-1;if(super(t,n),ju(this,"space",s),typeof r=="number")for(;++a<Ga.length;){const o=Ga[a];ju(this,Ga[a],(r&Do[o])===Do[o])}}}zl.prototype.defined=!0;function ju(e,t,n){n&&(e[t]=n)}function ns(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new zl(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[_o(r)]=r,n[_o(a.attribute)]=r}return new Us(t,n,e.space)}const hp=ns({properties:{ariaActiveDescendant:null,ariaAtomic:Qe,ariaAutoComplete:null,ariaBusy:Qe,ariaChecked:Qe,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:De,ariaCurrent:null,ariaDescribedBy:De,ariaDetails:null,ariaDisabled:Qe,ariaDropEffect:De,ariaErrorMessage:null,ariaExpanded:Qe,ariaFlowTo:De,ariaGrabbed:Qe,ariaHasPopup:null,ariaHidden:Qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:De,ariaLevel:W,ariaLive:null,ariaModal:Qe,ariaMultiLine:Qe,ariaMultiSelectable:Qe,ariaOrientation:null,ariaOwns:De,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:Qe,ariaReadOnly:Qe,ariaRelevant:null,ariaRequired:Qe,ariaRoleDescription:De,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:Qe,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function fp(e,t){return t in e?e[t]:t}function pp(e,t){return fp(e,t.toLowerCase())}const jE=ns({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Or,acceptCharset:De,accessKey:De,action:null,allow:null,allowFullScreen:ge,allowPaymentRequest:ge,allowUserMedia:ge,alt:null,as:null,async:ge,autoCapitalize:null,autoComplete:De,autoFocus:ge,autoPlay:ge,blocking:De,capture:null,charSet:null,checked:ge,cite:null,className:De,cols:W,colSpan:null,content:null,contentEditable:Qe,controls:ge,controlsList:De,coords:W|Or,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ge,defer:ge,dir:null,dirName:null,disabled:ge,download:Mo,draggable:Qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ge,formTarget:null,headers:De,height:W,hidden:Mo,high:W,href:null,hrefLang:null,htmlFor:De,httpEquiv:De,id:null,imageSizes:null,imageSrcSet:null,inert:ge,inputMode:null,integrity:null,is:null,isMap:ge,itemId:null,itemProp:De,itemRef:De,itemScope:ge,itemType:De,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ge,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:ge,muted:ge,name:null,nonce:null,noModule:ge,noValidate:ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ge,optimum:W,pattern:null,ping:De,placeholder:null,playsInline:ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ge,referrerPolicy:null,rel:De,required:ge,reversed:ge,rows:W,rowSpan:W,sandbox:De,scope:null,scoped:ge,seamless:ge,selected:ge,shadowRootClonable:ge,shadowRootDelegatesFocus:ge,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:Qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:ge,useMap:null,value:Qe,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:De,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ge,declare:ge,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:ge,noHref:ge,noShade:ge,noWrap:ge,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:Qe,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ge,disableRemotePlayback:ge,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:pp}),EE=ns({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:kt,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:De,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Or,g2:Or,glyphName:Or,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:kt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:De,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kt,rev:kt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kt,requiredFeatures:kt,requiredFonts:kt,requiredFormats:kt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:kt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kt,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fp}),gp=ns({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),xp=ns({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:pp}),yp=ns({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),NE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},CE=/[A-Z]/g,Eu=/-[a-z]/g,IE=/^data[-\w.:]+$/i;function kE(e,t){const n=_o(t);let r=t,s=Nt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&IE.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Eu,TE);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Eu.test(a)){let o=a.replace(CE,AE);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=zl}return new s(r,t)}function AE(e){return"-"+e.toLowerCase()}function TE(e){return e.charAt(1).toUpperCase()}const PE=mp([hp,jE,gp,xp,yp],"html"),Bl=mp([hp,EE,gp,xp,yp],"svg");function _E(e){return e.join(" ").trim()}var Vl={},Nu=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ME=/\n/g,DE=/^\s*/,RE=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,OE=/^:\s*/,LE=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,FE=/^[;\s]*/,$E=/^\s+|\s+$/g,zE=`
`,Cu="/",Iu="*",ar="",BE="comment",VE="declaration",UE=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(x){var g=x.match(ME);g&&(n+=g.length);var y=x.lastIndexOf(zE);r=~y?x.length-y:r+x.length}function a(){var x={line:n,column:r};return function(g){return g.position=new o(x),d(),g}}function o(x){this.start=x,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+n+":"+r+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var y=g[0];return s(y),e=e.slice(y.length),g}}function d(){c(DE)}function u(x){var g;for(x=x||[];g=h();)g!==!1&&x.push(g);return x}function h(){var x=a();if(!(Cu!=e.charAt(0)||Iu!=e.charAt(1))){for(var g=2;ar!=e.charAt(g)&&(Iu!=e.charAt(g)||Cu!=e.charAt(g+1));)++g;if(g+=2,ar===e.charAt(g-1))return l("End of comment missing");var y=e.slice(2,g-2);return r+=2,s(y),e=e.slice(g),r+=2,x({type:BE,comment:y})}}function m(){var x=a(),g=c(RE);if(g){if(h(),!c(OE))return l("property missing ':'");var y=c(LE),S=x({type:VE,property:ku(g[0].replace(Nu,ar)),value:y?ku(y[0].replace(Nu,ar)):ar});return c(FE),S}}function f(){var x=[];u(x);for(var g;g=m();)g!==!1&&(x.push(g),u(x));return x}return d(),f()};function ku(e){return e?e.replace($E,ar):ar}var qE=vi&&vi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.default=GE;var HE=qE(UE);function GE(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,HE.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;s?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.camelCase=void 0;var WE=/^--[a-zA-Z0-9_-]+$/,YE=/-([a-z])/g,KE=/^[^-]+$/,XE=/^-(webkit|moz|ms|o|khtml)-/,QE=/^-(ms)-/,JE=function(e){return!e||KE.test(e)||WE.test(e)},ZE=function(e,t){return t.toUpperCase()},Au=function(e,t){return"".concat(t,"-")},eN=function(e,t){return t===void 0&&(t={}),JE(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(QE,Au):e=e.replace(XE,Au),e.replace(YE,ZE))};ha.camelCase=eN;var tN=vi&&vi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},nN=tN(Vl),rN=ha;function Ro(e,t){var n={};return!e||typeof e!="string"||(0,nN.default)(e,function(r,s){r&&s&&(n[(0,rN.camelCase)(r,t)]=s)}),n}Ro.default=Ro;var sN=Ro;const iN=km(sN),vp=bp("end"),Ul=bp("start");function bp(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function aN(e){const t=Ul(e),n=vp(e);if(t&&n)return{start:t,end:n}}function bs(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Tu(e.position):"start"in e||"end"in e?Tu(e):"line"in e||"column"in e?Oo(e):""}function Oo(e){return Pu(e&&e.line)+":"+Pu(e&&e.column)}function Tu(e){return Oo(e&&e.start)+"-"+Oo(e&&e.end)}function Pu(e){return e&&typeof e=="number"?e:1}class ut extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=bs(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}ut.prototype.file="";ut.prototype.name="";ut.prototype.reason="";ut.prototype.message="";ut.prototype.stack="";ut.prototype.column=void 0;ut.prototype.line=void 0;ut.prototype.ancestors=void 0;ut.prototype.cause=void 0;ut.prototype.fatal=void 0;ut.prototype.place=void 0;ut.prototype.ruleId=void 0;ut.prototype.source=void 0;const ql={}.hasOwnProperty,oN=new Map,lN=/[A-Z]/g,cN=new Set(["table","tbody","thead","tfoot","tr"]),uN=new Set(["td","th"]),wp="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function dN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=vN(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=yN(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Bl:PE,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=Sp(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function Sp(e,t,n){if(t.type==="element")return mN(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return hN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return pN(e,t,n);if(t.type==="mdxjsEsm")return fN(e,t);if(t.type==="root")return gN(e,t,n);if(t.type==="text")return xN(e,t)}function mN(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Bl,e.schema=s),e.ancestors.push(t);const a=Ep(e,t.tagName,!1),o=bN(e,t);let l=Gl(e,t);return cN.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!wE(c):!0})),jp(e,o,a,t),Hl(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function hN(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}_s(e,t.position)}function fN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);_s(e,t.position)}function pN(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Bl,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Ep(e,t.name,!0),o=wN(e,t),l=Gl(e,t);return jp(e,o,a,t),Hl(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function gN(e,t,n){const r={};return Hl(r,Gl(e,t)),e.create(t,e.Fragment,r,n)}function xN(e,t){return t.value}function jp(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Hl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function yN(e,t,n){return r;function r(s,a,o,l){const d=Array.isArray(o.children)?n:t;return l?d(a,o,l):d(a,o)}}function vN(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=Ul(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function bN(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&ql.call(t.properties,s)){const a=SN(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&uN.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function wN(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else _s(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else _s(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Gl(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:oN;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=s.get(c)||0;o=c+"-"+d,s.set(c,d+1)}}const l=Sp(e,a,o);l!==void 0&&n.push(l)}return n}function SN(e,t,n){const r=kE(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?gE(n):_E(n)),r.property==="style"){let s=typeof n=="object"?n:jN(e,String(n));return e.stylePropertyNameCase==="css"&&(s=EN(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?NE[r.property]||r.property:r.attribute,n]}}function jN(e,t){try{return iN(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new ut("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=wp+"#cannot-parse-style-attribute",s}}function Ep(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=wu(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=wu(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return ql.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);_s(e)}function _s(e,t){const n=new ut("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=wp+"#cannot-handle-mdx-estrees-without-createevaluater",n}function EN(e){const t={};let n;for(n in e)ql.call(e,n)&&(t[NN(n)]=e[n]);return t}function NN(e){let t=e.replace(lN,CN);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function CN(e){return"-"+e.toLowerCase()}const Wa={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},IN={};function kN(e,t){const n=IN,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Np(e,r,s)}function Np(e,t,n){if(AN(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _u(e.children,t,n)}return Array.isArray(e)?_u(e,t,n):""}function _u(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Np(e[s],t,n);return r.join("")}function AN(e){return!!(e&&typeof e=="object")}const Mu=document.createElement("i");function Wl(e){const t="&"+e+";";Mu.innerHTML=t;const n=Mu.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function fn(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Vt(e,t){return e.length>0?(fn(e,e.length,0,t),e):t}const Du={}.hasOwnProperty;function TN(e){const t={};let n=-1;for(;++n<e.length;)PN(t,e[n]);return t}function PN(e,t){let n;for(n in t){const s=(Du.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Du.call(s,o)||(s[o]=[]);const l=a[o];_N(s[o],Array.isArray(l)?l:l?[l]:[])}}}function _N(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);fn(e,0,0,r)}function Cp(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ÔøΩ":String.fromCodePoint(n)}function Lr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ln=er(/[A-Za-z]/),Mt=er(/[\dA-Za-z]/),MN=er(/[#-'*+\--9=?A-Z^-~]/);function Lo(e){return e!==null&&(e<32||e===127)}const Fo=er(/\d/),DN=er(/[\dA-Fa-f]/),RN=er(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function Et(e){return e!==null&&(e<0||e===32)}function Ne(e){return e===-2||e===-1||e===32}const ON=er(new RegExp("\\p{P}|\\p{S}","u")),LN=er(/\s/);function er(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function rs(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Mt(e.charCodeAt(n+1))&&Mt(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o="ÔøΩ"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Re(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return Ne(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ne(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const FN={tokenize:$N};function $N(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Re(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const zN={tokenize:BN},Ru={tokenize:VN};function BN(e){const t=this,n=[];let r=0,s,a,o;return l;function l(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,c,d)(b)}return d(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const w=t.events.length;let A=w,C;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){C=t.events[A][1].end;break}S(r);let M=w;for(;M<t.events.length;)t.events[M][1].end={...C},M++;return fn(t.events,A+1,0,t.events.slice(w)),t.events.length=M,d(b)}return l(b)}function d(b){if(r===n.length){if(!s)return m(b);if(s.currentConstruct&&s.currentConstruct.concrete)return x(b);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ru,u,h)(b)}function u(b){return s&&v(),S(r),m(b)}function h(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(b)}function m(b){return t.containerState={},e.attempt(Ru,f,x)(b)}function f(b){return r++,n.push([t.currentConstruct,t.containerState]),m(b)}function x(b){if(b===null){s&&v(),S(0),e.consume(b);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),g(b)}function g(b){if(b===null){y(e.exit("chunkFlow"),!0),S(0),e.consume(b);return}return de(b)?(e.consume(b),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(b),g)}function y(b,w){const A=t.sliceStream(b);if(w&&A.push(null),b.previous=a,a&&(a.next=b),a=b,s.defineSkip(b.start),s.write(A),t.parser.lazy[b.start.line]){let C=s.events.length;for(;C--;)if(s.events[C][1].start.offset<o&&(!s.events[C][1].end||s.events[C][1].end.offset>o))return;const M=t.events.length;let _=M,k,P;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){if(k){P=t.events[_][1].end;break}k=!0}for(S(r),C=M;C<t.events.length;)t.events[C][1].end={...P},C++;fn(t.events,_+1,0,t.events.slice(M)),t.events.length=C}}function S(b){let w=n.length;for(;w-- >b;){const A=n[w];t.containerState=A[1],A[0].exit.call(t,e)}n.length=b}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function VN(e,t,n){return Re(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ou(e){if(e===null||Et(e)||LN(e))return 1;if(ON(e))return 2}function Yl(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const $o={name:"attention",resolveAll:UN,tokenize:qN};function UN(e,t){let n=-1,r,s,a,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},m={...e[n][1].start};Lu(h,-c),Lu(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=Vt(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=Vt(d,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=Vt(d,Yl(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=Vt(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=Vt(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,fn(e,r-1,n-r+3,d),n=r+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function qN(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ou(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const d=e.exit("attentionSequence"),u=Ou(c),h=!u||u===2&&s||n.includes(c),m=!s||s===2&&u||n.includes(r);return d._open=!!(a===42?h:h&&(s||!m)),d._close=!!(a===42?m:m&&(u||!h)),t(c)}}function Lu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const HN={name:"autolink",tokenize:GN};function GN(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return ln(f)?(e.consume(f),o):f===64?n(f):d(f)}function o(f){return f===43||f===45||f===46||Mt(f)?(r=1,l(f)):d(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||Mt(f))&&r++<32?(e.consume(f),l):(r=0,d(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Lo(f)?n(f):(e.consume(f),c)}function d(f){return f===64?(e.consume(f),u):MN(f)?(e.consume(f),d):n(f)}function u(f){return Mt(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,u):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||Mt(f))&&r++<63){const x=f===45?m:h;return e.consume(f),x}return n(f)}}const fa={partial:!0,tokenize:WN};function WN(e,t,n){return r;function r(a){return Ne(a)?Re(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||de(a)?t(a):n(a)}}const Ip={continuation:{tokenize:KN},exit:XN,name:"blockQuote",tokenize:YN};function YN(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Ne(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function KN(e,t,n){const r=this;return s;function s(o){return Ne(o)?Re(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(Ip,t,n)(o)}}function XN(e){e.exit("blockQuote")}const kp={name:"characterEscape",tokenize:QN};function QN(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return RN(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Ap={name:"characterReference",tokenize:JN};function JN(e,t,n){const r=this;let s=0,a,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Mt,u(h))}function d(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=DN,u):(e.enter("characterReferenceValue"),a=7,o=Fo,u(h))}function u(h){if(h===59&&s){const m=e.exit("characterReferenceValue");return o===Mt&&!Wl(r.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<a?(e.consume(h),u):n(h)}}const Fu={partial:!0,tokenize:eC},$u={concrete:!0,name:"codeFenced",tokenize:ZN};function ZN(e,t,n){const r=this,s={partial:!0,tokenize:A};let a=0,o=0,l;return c;function c(C){return d(C)}function d(C){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,l=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,e.consume(C),u):o<3?n(C):(e.exit("codeFencedFenceSequence"),Ne(C)?Re(e,h,"whitespace")(C):h(C))}function h(C){return C===null||de(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(Fu,g,w)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||de(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(C)):Ne(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Re(e,f,"whitespace")(C)):C===96&&C===l?n(C):(e.consume(C),m)}function f(C){return C===null||de(C)?h(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===null||de(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(C)):C===96&&C===l?n(C):(e.consume(C),x)}function g(C){return e.attempt(s,w,y)(C)}function y(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),S}function S(C){return a>0&&Ne(C)?Re(e,v,"linePrefix",a+1)(C):v(C)}function v(C){return C===null||de(C)?e.check(Fu,g,w)(C):(e.enter("codeFlowValue"),b(C))}function b(C){return C===null||de(C)?(e.exit("codeFlowValue"),v(C)):(e.consume(C),b)}function w(C){return e.exit("codeFenced"),t(C)}function A(C,M,_){let k=0;return P;function P(Y){return C.enter("lineEnding"),C.consume(Y),C.exit("lineEnding"),N}function N(Y){return C.enter("codeFencedFence"),Ne(Y)?Re(C,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):T(Y)}function T(Y){return Y===l?(C.enter("codeFencedFenceSequence"),$(Y)):_(Y)}function $(Y){return Y===l?(k++,C.consume(Y),$):k>=o?(C.exit("codeFencedFenceSequence"),Ne(Y)?Re(C,H,"whitespace")(Y):H(Y)):_(Y)}function H(Y){return Y===null||de(Y)?(C.exit("codeFencedFence"),M(Y)):_(Y)}}}function eC(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Ya={name:"codeIndented",tokenize:nC},tC={partial:!0,tokenize:rC};function nC(e,t,n){const r=this;return s;function s(d){return e.enter("codeIndented"),Re(e,a,"linePrefix",5)(d)}function a(d){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):de(d)?e.attempt(tC,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||de(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function rC(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Re(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):de(o)?s(o):n(o)}}const sC={name:"codeText",previous:aC,resolve:iC,tokenize:oC};function iC(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function aC(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oC(e,t,n){let r=0,s,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(a=e.enter("codeTextSequence"),s=0,u(h)):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||de(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),d)}function u(h){return h===96?(e.consume(h),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",d(h))}}class lC{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&us(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),us(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),us(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);us(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);us(this.left,n.reverse())}}}function us(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Tp(e){const t={};let n=-1,r,s,a,o,l,c,d;const u=new lC(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,cC(u,n)),n=t[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},l=u.slice(s,n),l.unshift(r),u.splice(s,n-s+1,l))}}return fn(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function cC(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,h,m=-1,f=n,x=0,g=0;const y=[g];for(;f;){for(;e.get(++s)[1]!==f;);a.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(g=m+1,y.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),m=y.length;m--;){const S=l.slice(y[m],y[m+1]),v=a.pop();c.push([v,v+S.length-1]),e.splice(v,2,S)}for(c.reverse(),m=-1;++m<c.length;)d[x+c[m][0]]=x+c[m][1],x+=c[m][1]-c[m][0]-1;return d}const uC={resolve:mC,tokenize:hC},dC={partial:!0,tokenize:fC};function mC(e){return Tp(e),e}function hC(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):de(l)?e.check(dC,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function fC(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Re(e,a,"linePrefix")}function a(o){if(o===null||de(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Pp(e,t,n,r,s,a,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(S){return S===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(S),e.exit(a),m):S===null||S===32||S===41||Lo(S)?n(S):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(S))}function m(S){return S===62?(e.enter(a),e.consume(S),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===62?(e.exit("chunkString"),e.exit(l),m(S)):S===null||S===60||de(S)?n(S):(e.consume(S),S===92?x:f)}function x(S){return S===60||S===62||S===92?(e.consume(S),f):f(S)}function g(S){return!u&&(S===null||S===41||Et(S))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(S)):u<d&&S===40?(e.consume(S),u++,g):S===41?(e.consume(S),u--,g):S===null||S===32||S===40||Lo(S)?n(S):(e.consume(S),S===92?y:g)}function y(S){return S===40||S===41||S===92?(e.consume(S),g):g(S)}}function _p(e,t,n,r,s,a){const o=this;let l=0,c;return d;function d(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(a),u}function u(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(a),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||de(f)||l++>999?(e.exit("chunkString"),u(f)):(e.consume(f),c||(c=!Ne(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function Mp(e,t,n,r,s,a){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(a),d(m))}function d(m){return m===o?(e.exit(a),c(o)):m===null?n(m):de(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Re(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||de(m)?(e.exit("chunkString"),d(m)):(e.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(e.consume(m),u):u(m)}}function ws(e,t){let n;return r;function r(s){return de(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Ne(s)?Re(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const pC={name:"definition",tokenize:xC},gC={partial:!0,tokenize:yC};function xC(e,t,n){const r=this;let s;return a;function a(f){return e.enter("definition"),o(f)}function o(f){return _p.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return Et(f)?ws(e,d)(f):d(f)}function d(f){return Pp(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return e.attempt(gC,h,h)(f)}function h(f){return Ne(f)?Re(e,m,"whitespace")(f):m(f)}function m(f){return f===null||de(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function yC(e,t,n){return r;function r(l){return Et(l)?ws(e,s)(l):n(l)}function s(l){return Mp(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Ne(l)?Re(e,o,"whitespace")(l):o(l)}function o(l){return l===null||de(l)?t(l):n(l)}}const vC={name:"hardBreakEscape",tokenize:bC};function bC(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return de(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const wC={name:"headingAtx",resolve:SC,tokenize:jC};function SC(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},fn(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function jC(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||Et(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||de(u)?(e.exit("atxHeading"),t(u)):Ne(u)?Re(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||Et(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const EC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zu=["pre","script","style","textarea"],NC={concrete:!0,name:"htmlFlow",resolveTo:kC,tokenize:AC},CC={partial:!0,tokenize:PC},IC={partial:!0,tokenize:TC};function kC(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function AC(e,t,n){const r=this;let s,a,o,l,c;return d;function d(E){return u(E)}function u(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),h}function h(E){return E===33?(e.consume(E),m):E===47?(e.consume(E),a=!0,g):E===63?(e.consume(E),s=3,r.interrupt?t:j):ln(E)?(e.consume(E),o=String.fromCharCode(E),y):n(E)}function m(E){return E===45?(e.consume(E),s=2,f):E===91?(e.consume(E),s=5,l=0,x):ln(E)?(e.consume(E),s=4,r.interrupt?t:j):n(E)}function f(E){return E===45?(e.consume(E),r.interrupt?t:j):n(E)}function x(E){const ce="CDATA[";return E===ce.charCodeAt(l++)?(e.consume(E),l===ce.length?r.interrupt?t:T:x):n(E)}function g(E){return ln(E)?(e.consume(E),o=String.fromCharCode(E),y):n(E)}function y(E){if(E===null||E===47||E===62||Et(E)){const ce=E===47,Pe=o.toLowerCase();return!ce&&!a&&zu.includes(Pe)?(s=1,r.interrupt?t(E):T(E)):EC.includes(o.toLowerCase())?(s=6,ce?(e.consume(E),S):r.interrupt?t(E):T(E)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(E):a?v(E):b(E))}return E===45||Mt(E)?(e.consume(E),o+=String.fromCharCode(E),y):n(E)}function S(E){return E===62?(e.consume(E),r.interrupt?t:T):n(E)}function v(E){return Ne(E)?(e.consume(E),v):P(E)}function b(E){return E===47?(e.consume(E),P):E===58||E===95||ln(E)?(e.consume(E),w):Ne(E)?(e.consume(E),b):P(E)}function w(E){return E===45||E===46||E===58||E===95||Mt(E)?(e.consume(E),w):A(E)}function A(E){return E===61?(e.consume(E),C):Ne(E)?(e.consume(E),A):b(E)}function C(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),c=E,M):Ne(E)?(e.consume(E),C):_(E)}function M(E){return E===c?(e.consume(E),c=null,k):E===null||de(E)?n(E):(e.consume(E),M)}function _(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||Et(E)?A(E):(e.consume(E),_)}function k(E){return E===47||E===62||Ne(E)?b(E):n(E)}function P(E){return E===62?(e.consume(E),N):n(E)}function N(E){return E===null||de(E)?T(E):Ne(E)?(e.consume(E),N):n(E)}function T(E){return E===45&&s===2?(e.consume(E),Z):E===60&&s===1?(e.consume(E),te):E===62&&s===4?(e.consume(E),Q):E===63&&s===3?(e.consume(E),j):E===93&&s===5?(e.consume(E),q):de(E)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(CC,ie,$)(E)):E===null||de(E)?(e.exit("htmlFlowData"),$(E)):(e.consume(E),T)}function $(E){return e.check(IC,H,ie)(E)}function H(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),Y}function Y(E){return E===null||de(E)?$(E):(e.enter("htmlFlowData"),T(E))}function Z(E){return E===45?(e.consume(E),j):T(E)}function te(E){return E===47?(e.consume(E),o="",L):T(E)}function L(E){if(E===62){const ce=o.toLowerCase();return zu.includes(ce)?(e.consume(E),Q):T(E)}return ln(E)&&o.length<8?(e.consume(E),o+=String.fromCharCode(E),L):T(E)}function q(E){return E===93?(e.consume(E),j):T(E)}function j(E){return E===62?(e.consume(E),Q):E===45&&s===2?(e.consume(E),j):T(E)}function Q(E){return E===null||de(E)?(e.exit("htmlFlowData"),ie(E)):(e.consume(E),Q)}function ie(E){return e.exit("htmlFlow"),t(E)}}function TC(e,t,n){const r=this;return s;function s(o){return de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function PC(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(fa,t,n)}}const _C={name:"htmlText",tokenize:MC};function MC(e,t,n){const r=this;let s,a,o;return l;function l(j){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(j),c}function c(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),A):j===63?(e.consume(j),b):ln(j)?(e.consume(j),_):n(j)}function d(j){return j===45?(e.consume(j),u):j===91?(e.consume(j),a=0,x):ln(j)?(e.consume(j),v):n(j)}function u(j){return j===45?(e.consume(j),f):n(j)}function h(j){return j===null?n(j):j===45?(e.consume(j),m):de(j)?(o=h,te(j)):(e.consume(j),h)}function m(j){return j===45?(e.consume(j),f):h(j)}function f(j){return j===62?Z(j):j===45?m(j):h(j)}function x(j){const Q="CDATA[";return j===Q.charCodeAt(a++)?(e.consume(j),a===Q.length?g:x):n(j)}function g(j){return j===null?n(j):j===93?(e.consume(j),y):de(j)?(o=g,te(j)):(e.consume(j),g)}function y(j){return j===93?(e.consume(j),S):g(j)}function S(j){return j===62?Z(j):j===93?(e.consume(j),S):g(j)}function v(j){return j===null||j===62?Z(j):de(j)?(o=v,te(j)):(e.consume(j),v)}function b(j){return j===null?n(j):j===63?(e.consume(j),w):de(j)?(o=b,te(j)):(e.consume(j),b)}function w(j){return j===62?Z(j):b(j)}function A(j){return ln(j)?(e.consume(j),C):n(j)}function C(j){return j===45||Mt(j)?(e.consume(j),C):M(j)}function M(j){return de(j)?(o=M,te(j)):Ne(j)?(e.consume(j),M):Z(j)}function _(j){return j===45||Mt(j)?(e.consume(j),_):j===47||j===62||Et(j)?k(j):n(j)}function k(j){return j===47?(e.consume(j),Z):j===58||j===95||ln(j)?(e.consume(j),P):de(j)?(o=k,te(j)):Ne(j)?(e.consume(j),k):Z(j)}function P(j){return j===45||j===46||j===58||j===95||Mt(j)?(e.consume(j),P):N(j)}function N(j){return j===61?(e.consume(j),T):de(j)?(o=N,te(j)):Ne(j)?(e.consume(j),N):k(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),s=j,$):de(j)?(o=T,te(j)):Ne(j)?(e.consume(j),T):(e.consume(j),H)}function $(j){return j===s?(e.consume(j),s=void 0,Y):j===null?n(j):de(j)?(o=$,te(j)):(e.consume(j),$)}function H(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||Et(j)?k(j):(e.consume(j),H)}function Y(j){return j===47||j===62||Et(j)?k(j):n(j)}function Z(j){return j===62?(e.consume(j),e.exit("htmlTextData"),e.exit("htmlText"),t):n(j)}function te(j){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),L}function L(j){return Ne(j)?Re(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):q(j)}function q(j){return e.enter("htmlTextData"),o(j)}}const Kl={name:"labelEnd",resolveAll:LC,resolveTo:FC,tokenize:$C},DC={tokenize:zC},RC={tokenize:BC},OC={tokenize:VC};function LC(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&fn(e,0,e.length,n),e}function FC(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=Vt(l,e.slice(a+1,a+r+3)),l=Vt(l,[["enter",u,t]]),l=Vt(l,Yl(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=Vt(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=Vt(l,e.slice(o+1)),l=Vt(l,[["exit",c,t]]),fn(e,a,e.length,l),e}function $C(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(m){return a?a._inactive?h(m):(o=r.parser.defined.includes(Lr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(DC,u,o?u:h)(m):m===91?e.attempt(RC,u,o?d:h)(m):o?u(m):h(m)}function d(m){return e.attempt(OC,u,h)(m)}function u(m){return t(m)}function h(m){return a._balanced=!0,n(m)}}function zC(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Et(h)?ws(e,a)(h):a(h)}function a(h){return h===41?u(h):Pp(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Et(h)?ws(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?Mp(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function d(h){return Et(h)?ws(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function BC(e,t,n){const r=this;return s;function s(l){return _p.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function VC(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const UC={name:"labelStartImage",resolveAll:Kl.resolveAll,tokenize:qC};function qC(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const HC={name:"labelStartLink",resolveAll:Kl.resolveAll,tokenize:GC};function GC(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Ka={name:"lineEnding",tokenize:WC};function WC(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Re(e,t,"linePrefix")}}const gi={name:"thematicBreak",tokenize:YC};function YC(e,t,n){let r=0,s;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return s=d,l(d)}function l(d){return d===s?(e.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||de(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===s?(e.consume(d),r++,c):(e.exit("thematicBreakSequence"),Ne(d)?Re(e,l,"whitespace")(d):l(d))}}const wt={continuation:{tokenize:JC},exit:eI,name:"list",tokenize:QC},KC={partial:!0,tokenize:tI},XC={partial:!0,tokenize:ZC};function QC(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const x=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Fo(f)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(gi,n,d)(f):d(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Fo(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),d(f)):n(f)}function d(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(fa,r.interrupt?n:u,e.attempt(KC,m,h))}function u(f){return r.containerState.initialBlankLine=!0,a++,m(f)}function h(f){return Ne(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function JC(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(fa,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Re(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!Ne(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(XC,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Re(e,e.attempt(wt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function ZC(e,t,n){const r=this;return Re(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function eI(e){e.exit(this.containerState.type)}function tI(e,t,n){const r=this;return Re(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!Ne(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Bu={name:"setextUnderline",resolveTo:nI,tokenize:rI};function nI(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function rI(e,t,n){const r=this;let s;return a;function a(d){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===s?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),Ne(d)?Re(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||de(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const sI={tokenize:iI};function iI(e){const t=this,n=e.attempt(fa,r,e.attempt(this.parser.constructs.flowInitial,s,Re(e,e.attempt(this.parser.constructs.flow,s,e.attempt(uC,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const aI={resolveAll:Rp()},oI=Dp("string"),lI=Dp("text");function Dp(e){return{resolveAll:Rp(e==="text"?cI:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(u){return d(u)?a(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),a(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const h=s[u];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Rp(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function cI(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const d=s[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const uI={42:wt,43:wt,45:wt,48:wt,49:wt,50:wt,51:wt,52:wt,53:wt,54:wt,55:wt,56:wt,57:wt,62:Ip},dI={91:pC},mI={[-2]:Ya,[-1]:Ya,32:Ya},hI={35:wC,42:gi,45:[Bu,gi],60:NC,61:Bu,95:gi,96:$u,126:$u},fI={38:Ap,92:kp},pI={[-5]:Ka,[-4]:Ka,[-3]:Ka,33:UC,38:Ap,42:$o,60:[HN,_C],91:HC,92:[vC,kp],93:Kl,95:$o,96:sC},gI={null:[$o,aI]},xI={null:[42,95]},yI={null:[]},vI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xI,contentInitial:dI,disable:yI,document:uI,flow:hI,flowInitial:mI,insideSpan:gI,string:fI,text:pI},Symbol.toStringTag,{value:"Module"}));function bI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:M(A),check:M(C),consume:v,enter:b,exit:w,interrupt:M(C,{interrupt:!0})},d={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let u=t.tokenize.call(d,c);return t.resolveAll&&a.push(t),d;function h(N){return o=Vt(o,N),y(),o[o.length-1]!==null?[]:(_(t,0),d.events=Yl(a,d.events,d),d.events)}function m(N,T){return SI(f(N),T)}function f(N){return wI(o,N)}function x(){const{_bufferIndex:N,_index:T,line:$,column:H,offset:Y}=r;return{_bufferIndex:N,_index:T,line:$,column:H,offset:Y}}function g(N){s[N.line]=N.column,P()}function y(){let N;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<T.length;)S(T.charCodeAt(r._bufferIndex));else S(T)}}function S(N){u=u(N)}function v(N){de(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,P()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=N}function b(N,T){const $=T||{};return $.type=N,$.start=x(),d.events.push(["enter",$,d]),l.push($),$}function w(N){const T=l.pop();return T.end=x(),d.events.push(["exit",T,d]),T}function A(N,T){_(N,T.from)}function C(N,T){T.restore()}function M(N,T){return $;function $(H,Y,Z){let te,L,q,j;return Array.isArray(H)?ie(H):"tokenize"in H?ie([H]):Q(H);function Q(ae){return Ie;function Ie(V){const ne=V!==null&&ae[V],ye=V!==null&&ae.null,Te=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return ie(Te)(V)}}function ie(ae){return te=ae,L=0,ae.length===0?Z:E(ae[L])}function E(ae){return Ie;function Ie(V){return j=k(),q=ae,ae.partial||(d.currentConstruct=ae),ae.name&&d.parser.constructs.disable.null.includes(ae.name)?Pe():ae.tokenize.call(T?Object.assign(Object.create(d),T):d,c,ce,Pe)(V)}}function ce(ae){return N(q,j),Y}function Pe(ae){return j.restore(),++L<te.length?E(te[L]):Z}}}function _(N,T){N.resolveAll&&!a.includes(N)&&a.push(N),N.resolve&&fn(d.events,T,d.events.length-T,N.resolve(d.events.slice(T),d)),N.resolveTo&&(d.events=N.resolveTo(d.events,d))}function k(){const N=x(),T=d.previous,$=d.currentConstruct,H=d.events.length,Y=Array.from(l);return{from:H,restore:Z};function Z(){r=N,d.previous=T,d.currentConstruct=$,d.events.length=H,l=Y,P()}}function P(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function wI(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function SI(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function jI(e){const r={constructs:TN([vI,...(e||{}).extensions||[]]),content:s(FN),defined:[],document:s(zN),flow:s(sI),lazy:{},string:s(oI),text:s(lI)};return r;function s(a){return o;function o(l){return bI(r,a,l)}}}function EI(e){for(;!Tp(e););return e}const Vu=/[\0\t\n\r]/g;function NI(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let d,u,h,m,f;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(Vu.lastIndex=h,d=Vu.exec(a),m=d&&d.index!==void 0?d.index:a.length,f=a.charCodeAt(m),!d){t=a.slice(h);break}if(f===10&&h===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<m&&(c.push(a.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const CI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function II(e){return e.replace(CI,kI)}function kI(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Cp(n.slice(a?2:1),a?16:10)}return Wl(n)||e}const Op={}.hasOwnProperty;function AI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),TI(n)(EI(jI(n).document().write(NI()(e,t,!0))))}function TI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(D),autolinkProtocol:k,autolinkEmail:k,atxHeading:a(Ft),blockQuote:a(ye),characterEscape:k,characterReference:k,codeFenced:a(Te),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Te,o),codeText:a(bt,o),codeTextData:k,data:k,codeFlowValue:k,definition:a(Qt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Ct),hardBreakEscape:a(Ge),hardBreakTrailing:a(Ge),htmlFlow:a(at,o),htmlFlowData:k,htmlText:a(at,o),htmlTextData:k,image:a(I),label:o,link:a(D),listItem:a(K),listItemValue:m,listOrdered:a(O,h),listUnordered:a(O),paragraph:a(X),reference:E,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Ft),strong:a(G),thematicBreak:a(fe)},exit:{atxHeading:c(),atxHeadingSequence:A,autolink:c(),autolinkEmail:ne,autolinkProtocol:V,blockQuote:c(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:Pe,characterReferenceMarkerNumeric:Pe,characterReferenceValue:ae,characterReference:Ie,codeFenced:c(y),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:x,codeFlowValue:P,codeIndented:c(S),codeText:c(Y),codeTextData:P,data:P,definition:c(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(T),hardBreakTrailing:c(T),htmlFlow:c($),htmlFlowData:P,htmlText:c(H),htmlTextData:P,image:c(te),label:q,labelText:L,lineEnding:N,link:c(Z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ce,resourceDestinationString:j,resourceTitleString:Q,resource:ie,setextHeading:c(_),setextHeadingLineSequence:M,setextHeadingText:C,strong:c(),thematicBreak:c()}};Lp(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(R){let U={type:"root",children:[]};const le={stack:[U],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},he=[];let we=-1;for(;++we<R.length;)if(R[we][1].type==="listOrdered"||R[we][1].type==="listUnordered")if(R[we][0]==="enter")he.push(we);else{const nt=he.pop();we=s(R,nt,we)}for(we=-1;++we<R.length;){const nt=t[R[we][0]];Op.call(nt,R[we][1].type)&&nt[R[we][1].type].call(Object.assign({sliceSerialize:R[we][2].sliceSerialize},le),R[we][1])}if(le.tokenStack.length>0){const nt=le.tokenStack[le.tokenStack.length-1];(nt[1]||Uu).call(le,void 0,nt[0])}for(U.position={start:Mn(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:Mn(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},we=-1;++we<t.transforms.length;)U=t.transforms[we](U)||U;return U}function s(R,U,le){let he=U-1,we=-1,nt=!1,$t,dt,xn,zt;for(;++he<=le;){const Ue=R[he];switch(Ue[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ue[0]==="enter"?we++:we--,zt=void 0;break}case"lineEndingBlank":{Ue[0]==="enter"&&($t&&!zt&&!we&&!xn&&(xn=he),zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:zt=void 0}if(!we&&Ue[0]==="enter"&&Ue[1].type==="listItemPrefix"||we===-1&&Ue[0]==="exit"&&(Ue[1].type==="listUnordered"||Ue[1].type==="listOrdered")){if($t){let An=he;for(dt=void 0;An--;){const ue=R[An];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;dt&&(R[dt][1].type="lineEndingBlank",nt=!0),ue[1].type="lineEnding",dt=An}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}xn&&(!dt||xn<dt)&&($t._spread=!0),$t.end=Object.assign({},dt?R[dt][1].start:Ue[1].end),R.splice(dt||he,0,["exit",$t,Ue[2]]),he++,le++}if(Ue[1].type==="listItemPrefix"){const An={type:"listItem",_spread:!1,start:Object.assign({},Ue[1].start),end:void 0};$t=An,R.splice(he,0,["enter",An,Ue[2]]),he++,le++,xn=void 0,zt=!0}}}return R[U][1]._spread=nt,le}function a(R,U){return le;function le(he){l.call(this,R(he),he),U&&U.call(this,he)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(R,U,le){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([U,le||void 0]),R.position={start:Mn(U.start),end:void 0}}function c(R){return U;function U(le){R&&R.call(this,le),d.call(this,le)}}function d(R,U){const le=this.stack.pop(),he=this.tokenStack.pop();if(he)he[0].type!==R.type&&(U?U.call(this,R,he[0]):(he[1]||Uu).call(this,R,he[0]));else throw new Error("Cannot close `"+R.type+"` ("+bs({start:R.start,end:R.end})+"): it‚Äôs not open");le.position.end=Mn(R.end)}function u(){return kN(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(R){if(this.data.expectingFirstListItemValue){const U=this.stack[this.stack.length-2];U.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function f(){const R=this.resume(),U=this.stack[this.stack.length-1];U.lang=R}function x(){const R=this.resume(),U=this.stack[this.stack.length-1];U.meta=R}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R.replace(/(\r?\n|\r)$/g,"")}function v(R){const U=this.resume(),le=this.stack[this.stack.length-1];le.label=U,le.identifier=Lr(this.sliceSerialize(R)).toLowerCase()}function b(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function w(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function A(R){const U=this.stack[this.stack.length-1];if(!U.depth){const le=this.sliceSerialize(R).length;U.depth=le}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function M(R){const U=this.stack[this.stack.length-1];U.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function k(R){const le=this.stack[this.stack.length-1].children;let he=le[le.length-1];(!he||he.type!=="text")&&(he=oe(),he.position={start:Mn(R.start),end:void 0},le.push(he)),this.stack.push(he)}function P(R){const U=this.stack.pop();U.value+=this.sliceSerialize(R),U.position.end=Mn(R.end)}function N(R){const U=this.stack[this.stack.length-1];if(this.data.atHardBreak){const le=U.children[U.children.length-1];le.position.end=Mn(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(U.type)&&(k.call(this,R),P.call(this,R))}function T(){this.data.atHardBreak=!0}function $(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function H(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function Y(){const R=this.resume(),U=this.stack[this.stack.length-1];U.value=R}function Z(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function te(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=U,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function L(R){const U=this.sliceSerialize(R),le=this.stack[this.stack.length-2];le.label=II(U),le.identifier=Lr(U).toLowerCase()}function q(){const R=this.stack[this.stack.length-1],U=this.resume(),le=this.stack[this.stack.length-1];if(this.data.inReference=!0,le.type==="link"){const he=R.children;le.children=he}else le.alt=U}function j(){const R=this.resume(),U=this.stack[this.stack.length-1];U.url=R}function Q(){const R=this.resume(),U=this.stack[this.stack.length-1];U.title=R}function ie(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function ce(R){const U=this.resume(),le=this.stack[this.stack.length-1];le.label=U,le.identifier=Lr(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function Pe(R){this.data.characterReferenceType=R.type}function ae(R){const U=this.sliceSerialize(R),le=this.data.characterReferenceType;let he;le?(he=Cp(U,le==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):he=Wl(U);const we=this.stack[this.stack.length-1];we.value+=he}function Ie(R){const U=this.stack.pop();U.position.end=Mn(R.end)}function V(R){P.call(this,R);const U=this.stack[this.stack.length-1];U.url=this.sliceSerialize(R)}function ne(R){P.call(this,R);const U=this.stack[this.stack.length-1];U.url="mailto:"+this.sliceSerialize(R)}function ye(){return{type:"blockquote",children:[]}}function Te(){return{type:"code",lang:null,meta:null,value:""}}function bt(){return{type:"inlineCode",value:""}}function Qt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ct(){return{type:"emphasis",children:[]}}function Ft(){return{type:"heading",depth:0,children:[]}}function Ge(){return{type:"break"}}function at(){return{type:"html",value:""}}function I(){return{type:"image",title:null,url:"",alt:null}}function D(){return{type:"link",title:null,url:"",children:[]}}function O(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function K(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function X(){return{type:"paragraph",children:[]}}function G(){return{type:"strong",children:[]}}function oe(){return{type:"text",value:""}}function fe(){return{type:"thematicBreak"}}}function Mn(e){return{line:e.line,column:e.column,offset:e.offset}}function Lp(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Lp(e,r):PI(e,r)}}function PI(e,t){let n;for(n in t)if(Op.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Uu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+bs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+bs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+bs({start:t.start,end:t.end})+") is still open")}function _I(e){const t=this;t.parser=n;function n(r){return AI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function MI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function DI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function RI(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function OI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=rs(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function $I(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Fp(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function BI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Fp(e,t);const s={src:rs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function VI(e,t){const n={src:rs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function UI(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function qI(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Fp(e,t);const s={href:rs(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function HI(e,t){const n={href:rs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function GI(e,t,n){const r=e.all(t),s=n?WI(n):$p(t),a={},o=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(s||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function WI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=$p(n[r])}return t}function $p(e){const t=e.spread;return t??e.children.length>1}function YI(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function KI(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XI(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function QI(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JI(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Ul(t.children[1]),c=vp(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function ZI(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let x={type:"element",tagName:a,properties:m,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function ek(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const qu=9,Hu=32;function tk(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Gu(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Gu(t.slice(s),s>0,!1)),a.join("")}function Gu(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===qu||a===Hu;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===qu||a===Hu;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function nk(e,t){const n={type:"text",value:tk(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function rk(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const sk={blockquote:MI,break:DI,code:RI,delete:OI,emphasis:LI,footnoteReference:FI,heading:$I,html:zI,imageReference:BI,image:VI,inlineCode:UI,linkReference:qI,link:HI,listItem:GI,list:YI,paragraph:KI,root:XI,strong:QI,table:JI,tableCell:ek,tableRow:ZI,text:nk,thematicBreak:rk,toml:ri,yaml:ri,definition:ri,footnoteDefinition:ri};function ri(){}const zp=-1,pa=0,Ss=1,Ti=2,Xl=3,Ql=4,Jl=5,Zl=6,Bp=7,Vp=8,Wu=typeof self=="object"?self:globalThis,ik=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case pa:case zp:return n(o,s);case Ss:{const l=n([],s);for(const c of o)l.push(r(c));return l}case Ti:{const l=n({},s);for(const[c,d]of o)l[r(c)]=r(d);return l}case Xl:return n(new Date(o),s);case Ql:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Jl:{const l=n(new Map,s);for(const[c,d]of o)l.set(r(c),r(d));return l}case Zl:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case Bp:{const{name:l,message:c}=o;return n(new Wu[l](c),s)}case Vp:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new Wu[a](o),s)};return r},Yu=e=>ik(new Map,e)(0),Ar="",{toString:ak}={},{keys:ok}=Object,ds=e=>{const t=typeof e;if(t!=="object"||!e)return[pa,t];const n=ak.call(e).slice(8,-1);switch(n){case"Array":return[Ss,Ar];case"Object":return[Ti,Ar];case"Date":return[Xl,Ar];case"RegExp":return[Ql,Ar];case"Map":return[Jl,Ar];case"Set":return[Zl,Ar];case"DataView":return[Ss,n]}return n.includes("Array")?[Ss,n]:n.includes("Error")?[Bp,n]:[Ti,n]},si=([e,t])=>e===pa&&(t==="function"||t==="symbol"),lk=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=ds(o);switch(l){case pa:{let u=o;switch(c){case"bigint":l=Vp,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return s([zp],o)}return s([l,u],o)}case Ss:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const u=[],h=s([l,u],o);for(const m of o)u.push(a(m));return h}case Ti:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],h=s([l,u],o);for(const m of ok(o))(e||!si(ds(o[m])))&&u.push([a(m),a(o[m])]);return h}case Xl:return s([l,o.toISOString()],o);case Ql:{const{source:u,flags:h}=o;return s([l,{source:u,flags:h}],o)}case Jl:{const u=[],h=s([l,u],o);for(const[m,f]of o)(e||!(si(ds(m))||si(ds(f))))&&u.push([a(m),a(f)]);return h}case Zl:{const u=[],h=s([l,u],o);for(const m of o)(e||!si(ds(m)))&&u.push(a(m));return h}}const{message:d}=o;return s([l,{name:c,message:d}],o)};return a},Ku=(e,{json:t,lossy:n}={})=>{const r=[];return lk(!(t||n),!!t,new Map,r)(e),r},Pi=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Yu(Ku(e,t)):structuredClone(e):(e,t)=>Yu(Ku(e,t));function ck(e,t){const n=[{type:"text",value:"‚Ü©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function uk(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function dk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ck,r=e.options.footnoteBackLabel||uk,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),h=String(d.identifier).toUpperCase(),m=rs(h.toLowerCase());let f=0;const x=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){x.length>0&&x.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const v=y.children[y.children.length-1];v&&v.type==="text"?v.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...x)}else u.push(...x);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(d,S),l.push(S)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Pi(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Up=function(e){if(e==null)return pk;if(typeof e=="function")return ga(e);if(typeof e=="object")return Array.isArray(e)?mk(e):hk(e);if(typeof e=="string")return fk(e);throw new Error("Expected function, string, or object as test")};function mk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Up(e[n]);return ga(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function hk(e){const t=e;return ga(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function fk(e){return ga(t);function t(n){return n&&n.type===e}}function ga(e){return t;function t(n,r,s){return!!(gk(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function pk(){return!0}function gk(e){return e!==null&&typeof e=="object"&&"type"in e}const qp=[],xk=!0,Xu=!1,yk="skip";function vk(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=Up(s),o=r?-1:1;l(e,void 0,[])();function l(c,d,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=qp,x,g,y;if((!t||a(c,d,u[u.length-1]||void 0))&&(f=bk(n(c,u)),f[0]===Xu))return f;if("children"in c&&c.children){const S=c;if(S.children&&f[0]!==yk)for(g=(r?S.children.length:-1)+o,y=u.concat(S);g>-1&&g<S.children.length;){const v=S.children[g];if(x=l(v,g,y)(),x[0]===Xu)return x;g=typeof x[1]=="number"?x[1]:g+o}}return f}}}function bk(e){return Array.isArray(e)?e:typeof e=="number"?[xk,e]:e==null?qp:[e]}function Hp(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),vk(e,a,l,s);function l(c,d){const u=d[d.length-1],h=u?u.children.indexOf(c):void 0;return o(c,h,u)}}const zo={}.hasOwnProperty,wk={};function Sk(e,t){const n=t||wk,r=new Map,s=new Map,a=new Map,o={...sk,...n.handlers},l={all:d,applyData:Ek,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:jk,wrap:Ck};return Hp(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:s,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),l;function c(u,h){const m=u.type,f=l.handlers[m];if(zo.call(l.handlers,m)&&f)return f(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in u){const{children:g,...y}=u,S=Pi(y);return S.children=l.all(u),S}return Pi(u)}return(l.options.unknownHandler||Nk)(l,u,h)}function d(u){const h=[];if("children"in u){const m=u.children;let f=-1;for(;++f<m.length;){const x=l.one(m[f],u);if(x){if(f&&m[f-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Qu(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=Qu(g.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function jk(e,t){e.position&&(t.position=aN(e))}function Ek(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Pi(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Nk(e,t){const n=t.data||{},r="value"in t&&!(zo.call(n,"hProperties")||zo.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ck(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Qu(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ju(e,t){const n=Sk(e,t),r=n.one(e,void 0),s=dk(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function Ik(e,t){return e&&"run"in e?async function(n,r){const s=Ju(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Ju(n,{file:r,...e||t})}}function Zu(e){if(e)throw e}var xi=Object.prototype.hasOwnProperty,Gp=Object.prototype.toString,ed=Object.defineProperty,td=Object.getOwnPropertyDescriptor,nd=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Gp.call(t)==="[object Array]"},rd=function(t){if(!t||Gp.call(t)!=="[object Object]")return!1;var n=xi.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&xi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||xi.call(t,s)},sd=function(t,n){ed&&n.name==="__proto__"?ed(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},id=function(t,n){if(n==="__proto__")if(xi.call(t,n)){if(td)return td(t,n).value}else return;return t[n]},kk=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)r=id(l,n),s=id(t,n),l!==s&&(u&&s&&(rd(s)||(a=nd(s)))?(a?(a=!1,o=r&&nd(r)?r:[]):o=r&&rd(r)?r:{},sd(l,{name:n,newValue:e(u,o,s)})):typeof s<"u"&&sd(l,{name:n,newValue:s}));return l};const Xa=km(kk);function Bo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ak(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...d){const u=e[++a];let h=-1;if(c){o(c);return}for(;++h<s.length;)(d[h]===null||d[h]===void 0)&&(d[h]=s[h]);s=d,u?Tk(u,l)(...d):o(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function Tk(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return s(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const tn={basename:Pk,dirname:_k,extname:Mk,join:Dk,sep:"/"};function Pk(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qs(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function _k(e){if(qs(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Mk(e){qs(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function Dk(...e){let t=-1,n;for(;++t<e.length;)qs(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Rk(n)}function Rk(e){qs(e);const t=e.codePointAt(0)===47;let n=Ok(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Ok(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function qs(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Lk={cwd:Fk};function Fk(){return"/"}function Vo(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function $k(e){if(typeof e=="string")e=new URL(e);else if(!Vo(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return zk(e)}function zk(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Qa=["history","path","basename","stem","extname","dirname"];class Wp{constructor(t){let n;t?Vo(t)?n={path:t}:typeof t=="string"||Bk(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Lk.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Qa.length;){const a=Qa[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Qa.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?tn.basename(this.path):void 0}set basename(t){Za(t,"basename"),Ja(t,"basename"),this.path=tn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?tn.dirname(this.path):void 0}set dirname(t){ad(this.basename,"dirname"),this.path=tn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?tn.extname(this.path):void 0}set extname(t){if(Ja(t,"extname"),ad(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Vo(t)&&(t=$k(t)),Za(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?tn.basename(this.path,this.extname):void 0}set stem(t){Za(t,"stem"),Ja(t,"stem"),this.path=tn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new ut(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ja(e,t){if(e&&e.includes(tn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+tn.sep+"`")}function Za(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ad(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Bk(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Vk=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},Uk={}.hasOwnProperty;class ec extends Vk{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ak()}copy(){const t=new ec;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Xa(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(no("data",this.frozen),this.namespace[t]=n,this):Uk.call(this.namespace,t)&&this.namespace[t]||void 0:t?(no("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ii(t),r=this.parser||this.Parser;return eo("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),eo("process",this.parser||this.Parser),to("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=ii(t),c=r.parse(l);r.run(c,l,function(u,h,m){if(u||!h||!m)return d(u);const f=h,x=r.stringify(f,m);Gk(x)?m.value=x:m.result=x,d(u,m)});function d(u,h){u||!h?o(u):a?a(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),eo("processSync",this.parser||this.Parser),to("processSync",this.compiler||this.Compiler),this.process(t,s),ld("processSync","process",n),r;function s(a,o){n=!0,Zu(a),r=o}}run(t,n,r){od(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=ii(n);s.run(t,c,d);function d(u,h,m){const f=h||t;u?l(u):o?o(f):r(void 0,f,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),ld("runSync","run",r),s;function a(o,l){Zu(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=ii(n),s=this.compiler||this.Compiler;return to("stringify",s),od(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(no("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...h]=d;c(u,h)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(s.settings=Xa(!0,s.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const h=d[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===d){m=h;break}if(m===-1)r.push([d,...u]);else if(u.length>0){let[f,...x]=u;const g=r[m][1];Bo(g)&&Bo(f)&&(f=Xa(!0,g,f)),r[m]=[d,f,...x]}}}}const qk=new ec().freeze();function eo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function to(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function no(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function od(e){if(!Bo(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ld(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ii(e){return Hk(e)?e:new Wp(e)}function Hk(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Gk(e){return typeof e=="string"||Wk(e)}function Wk(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Yk="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",cd=[],ud={allowDangerousHtml:!0},Kk=/^(https?|ircs?|mailto|xmpp)$/i,Xk=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Qk(e){const t=Jk(e),n=Zk(e);return eA(t.runSync(t.parse(n),n),e)}function Jk(e){const t=e.rehypePlugins||cd,n=e.remarkPlugins||cd,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...ud}:ud;return qk().use(_I).use(n).use(Ik,r).use(t)}function Zk(e){const t=e.children||"",n=new Wp;return typeof t=="string"&&(n.value=t),n}function eA(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||tA;for(const u of Xk)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Yk+u.id,void 0);return Hp(e,d),dN(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function d(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let f;for(f in Wa)if(Object.hasOwn(Wa,f)&&Object.hasOwn(u.properties,f)){const x=u.properties[f],g=Wa[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=c(String(x||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(u,h,m)),f&&m&&typeof h=="number")return l&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function tA(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||Kk.test(e.slice(0,t))?e:""}const js=({text:e,maxLength:t=50,className:n="",tooltipEnabled:r=!1,as:s="span"})=>{const[a,o]=p.useState(!1);if(!e||e.length<=t)return i.jsx(s,{className:n,children:e});const l=`${e.substring(0,t)}...`;return r?i.jsx(Lh,{children:i.jsxs(a1,{open:a,onOpenChange:o,children:[i.jsx(o1,{asChild:!0,children:i.jsx(s,{className:`${n} cursor-help`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTouchStart:()=>o(!0),onTouchEnd:()=>o(!1),children:l})}),i.jsx(Fh,{className:"max-w-xs bg-white text-black p-2 rounded shadow-md border border-gray-200",children:i.jsx("p",{children:e})})]})}):i.jsx(s,{className:n,children:l})},wn=Xe("calendarService");var Ms=(e=>(e.NOT_SUPPORTED="NOT_SUPPORTED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.GENERAL_ERROR="GENERAL_ERROR",e))(Ms||{});const Yp=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t="share"in navigator&&"canShare"in navigator,n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=!e;return wn.info("V√©rification du support calendrier",{isMobile:e,hasWebShare:t,isIOS:n,isDesktop:r,userAgent:navigator.userAgent}),t||n||r},nA=e=>{new Date().getFullYear();let n=new Date;if(e.days.includes("samedi"))for(;n.getDay()!==6;)n.setDate(n.getDate()+1);else if(e.days.includes("dimanche"))for(;n.getDay()!==0;)n.setDate(n.getDate()+1);const r=e.time.split(" - ")[0],s=e.time.split(" - ")[1]||parseInt(r.split("h")[0])+1+"h00",a=new Date(n),[o,l]=r.split("h").map(x=>parseInt(x)||0);a.setHours(o,l,0);const c=new Date(n),[d,u]=s.split("h").map(x=>parseInt(x)||0);c.setHours(d,u,0);const h=x=>x.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=x=>x.replace(/\n/g,"\\n").replace(/,/g,"\\,");return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Collectif Feydeau//App//FR","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${e.id}@collectif-feydeau.app`,`DTSTAMP:${h(new Date)}`,`DTSTART:${h(a)}`,`DTEND:${h(c)}`,`SUMMARY:${m(e.title)}`,`DESCRIPTION:${m(e.artistBio||"")}`,`LOCATION:${m("√éle Feydeau, Nantes")}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`)},tc=async e=>{try{const t=nA(e),n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent),s=n||r||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);wn.info("D√©tection de plateforme",{isIOS:n,isAndroid:r,isMobile:s,userAgent:navigator.userAgent});const a=new Blob([t],{type:"text/calendar;charset=utf-8"});if(n)try{const c=URL.createObjectURL(a),d=document.createElement("a");return d.href=c.replace("blob:","webcal:"),d.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(c),100),wn.info("√âv√©nement ajout√© au calendrier iOS",{eventId:e.id}),{success:!0}}catch(c){wn.warn("Erreur lors de l'ajout au calendrier iOS",{iosError:c})}if(r)try{if(navigator.share){const c=URL.createObjectURL(a);return await navigator.share({title:`Ajouter "${e.title}" √† votre calendrier`,text:`√âv√©nement: ${e.title} - ${e.days.join(" et ")} √† ${e.time}
Lieu: √éle Feydeau, Nantes`,url:window.location.href}),setTimeout(()=>URL.revokeObjectURL(c),100),wn.info("Informations partag√©es pour ajout au calendrier Android",{eventId:e.id}),{success:!0}}}catch{}if(s&&navigator.share)try{const c=new File([a],`${e.title.replace(/\s+/g,"_")}.ics`,{type:"text/calendar"});if(navigator.canShare&&navigator.canShare({files:[c]}))return await navigator.share({files:[c],title:`Ajouter "${e.title}" √† votre calendrier`,text:`√âv√©nement: ${e.title} - ${e.days.join(" et ")} √† ${e.time}`}),wn.info("Fichier partag√© pour ajout au calendrier",{eventId:e.id}),{success:!0}}catch(c){wn.warn("Erreur lors du partage de fichier",{shareError:c})}const o=URL.createObjectURL(a),l=document.createElement("a");return l.href=o,l.setAttribute("download",`${e.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>URL.revokeObjectURL(o),100),wn.info("Fichier .ics t√©l√©charg√©",{eventId:e.id,platform:r?"Android":n?"iOS":"Desktop"}),{success:!0}}catch(t){return wn.error("Erreur lors de l'ajout au calendrier",{error:t}),{success:!1,errorType:"GENERAL_ERROR",errorMessage:t instanceof Error?t.message:"Une erreur inconnue est survenue"}}},rA=Object.freeze(Object.defineProperty({__proto__:null,CalendarErrorType:Ms,addToCalendar:tc,isCalendarSupported:Yp},Symbol.toStringTag,{value:"Module"})),Xn="https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app",_i="likes-data",sA=5*60*1e3,Mi=new Map;function iA(e){const t=Mi.get(e);return t?Date.now()-t.timestamp>sA?(Mi.delete(e),null):(console.log(`üì¶ Cache hit pour ${e}:`,t.data),t.data):null}function Kp(e,t){Mi.set(e,{data:t,timestamp:Date.now()}),console.log(`üíæ Cache mis √† jour pour ${e}:`,t)}function aA(e){Mi.delete(e),console.log(`üóëÔ∏è Cache invalid√© pour ${e}`)}function xa(){let e=localStorage.getItem("user-session-id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("user-session-id",e)),e}async function oA(e,t){var n;try{const r=t||xa();console.log(`üîÑ Toggle like pour ${e} par ${r}`);const s=await fetch(`${Xn}/${_i}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[],lastLiked:null},l=((n=o.likedBy)==null?void 0:n.includes(r))||!1;let c=o.likedBy||[],d=o.likes||0;l?(c=c.filter(m=>m!==r),d=Math.max(0,d-1),console.log(`‚ù§Ô∏è Like retir√© pour ${e}`)):(c.push(r),d+=1,console.log(`üíñ Like ajout√© pour ${e}`));const u={likes:d,likedBy:c,lastLiked:new Date().toISOString()};if(!(await fetch(`${Xn}/${_i}/${e}.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Erreur lors de la mise √† jour des likes");return aA(e),await uA(),{success:!0,liked:!l,total:d}}catch(r){return console.error("‚ùå Erreur toggle like:",r),{success:!1,liked:!1,total:0,error:r instanceof Error?r.message:"Erreur inconnue"}}}async function lA(e,t){try{const n=t||xa(),r=iA(e);if(r)return{...r,liked:Array.isArray(r.likedBy)&&r.likedBy.includes(n)};const s=await fetch(`${Xn}/${_i}/${e}.json`),o=(s.ok?await s.json():null)||{likes:0,likedBy:[]},l={liked:Array.isArray(o.likedBy)&&o.likedBy.includes(n),total:o.likes||0,likedBy:o.likedBy||[]};return Kp(e,l),l}catch(n){return console.error("‚ùå Erreur getLikeData:",n),{liked:!1,total:0}}}async function cA(e,t){try{const n=t||xa();console.log(`üîÑ R√©cup√©ration fra√Æche depuis Firebase pour ${e}`);const r=await fetch(`${Xn}/${_i}/${e}.json`),a=(r.ok?await r.json():null)||{likes:0,likedBy:[]},o={liked:Array.isArray(a.likedBy)&&a.likedBy.includes(n),total:a.likes||0,likedBy:a.likedBy||[]};return Kp(e,o),console.log(`üîÑ Donn√©es fra√Æches r√©cup√©r√©es pour ${e}:`,o),o}catch(n){return console.error("‚ùå Erreur getLikeDataFresh:",n),{liked:!1,total:0}}}async function Xp(){try{const e=await fetch(`${Xn}/likes-stats.json`),n=(e.ok?await e.json():null)||{total:0,today:0,topEntry:null};return console.log("üìà Stats globales:",n),n}catch(e){return console.error("‚ùå Erreur getLikeStats:",e),{total:0,today:0}}}async function uA(){try{const e=await fetch(`${Xn}/likes-data.json`),t=e.ok?await e.json():{};let n=0,r="",s=0;Object.entries(t||{}).forEach(([o,l])=>{const c=(l==null?void 0:l.likes)||0;n+=c,c>s&&(s=c,r=o)});const a={total:n,today:0,topEntry:r||null,lastUpdated:new Date().toISOString()};await fetch(`${Xn}/likes-stats.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),console.log(`üìä Stats mises √† jour: ${n} likes total, top: ${r}`)}catch(e){console.error("‚ùå Erreur updateGlobalStats:",e)}}async function dA(){try{const e={timestamp:new Date().toISOString(),message:"Test de connexion likes"},t=await fetch(`${Xn}/test-connection.json`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(console.log("‚úÖ Connexion Firebase OK pour les likes"),!0):(console.error("‚ùå Erreur connexion Firebase:",t.status),!1)}catch(e){return console.error("‚ùå Erreur connexion Firebase:",e),!1}}function Qp(e){const[t,n]=p.useState(!1),[r,s]=p.useState(0),[a,o]=p.useState(!0),[l,c]=p.useState(null),[d,u]=p.useState(!1),h=xa(),m=p.useCallback(async()=>{try{o(!0),c(null);const y=await lA(e,h);n(y.liked),s(y.total),console.log(`üîÑ Donn√©es likes charg√©es pour ${e}:`,y)}catch(y){console.error("‚ùå Erreur chargement likes:",y),c(y instanceof Error?y.message:"Erreur de chargement")}finally{o(!1)}},[e,h]),f=p.useCallback(async()=>{try{c(null);const y=await cA(e,h);n(y.liked),s(y.total),console.log(`üîÑ Donn√©es likes fra√Æches pour ${e}:`,y)}catch(y){console.error("‚ùå Erreur chargement likes fresh:",y),c(y instanceof Error?y.message:"Erreur de chargement")}},[e,h]);p.useEffect(()=>{if(!e)return;console.log(`üéß Chargement initial pour ${e}`),m();const y=setInterval(()=>{console.log(`‚è∞ Polling automatique pour ${e}`),f()},5e3);return()=>{console.log(`üîá Arr√™t polling pour ${e}`),clearInterval(y)}},[e,h,m,f]);const x=p.useCallback(async()=>{if(d){console.log(`‚è≥ Toggle like d√©j√† en cours pour ${e}, ignor√©`);return}try{u(!0),c(null),console.log(`üîÑ Toggle like pour ${e}...`);const y=!t,S=y?r+1:Math.max(0,r-1);n(y),s(S);const v=await oA(e,h);v.success?console.log(`‚úÖ Like toggled avec succ√®s pour ${e}`):(n(t),s(r),c(v.error||"Erreur lors du like"),console.error("‚ùå Erreur toggle like:",v.error))}catch(y){n(t),s(r),c(y instanceof Error?y.message:"Erreur inconnue"),console.error("‚ùå Erreur toggle like:",y)}finally{setTimeout(()=>{u(!1)},500)}},[e,h,t,r,d]),g=p.useCallback(async()=>{await m()},[m]);return{liked:t,total:r,loading:a,error:l,isToggling:d,toggleLike:x,refresh:g}}const ro=({value:e,loading:t})=>{const[n,r]=p.useState(e),[s,a]=p.useState(!1);return p.useEffect(()=>{e!==n&&!t&&(a(!0),setTimeout(()=>{r(e),setTimeout(()=>a(!1),150)},150))},[e,n,t]),t?i.jsx("span",{children:"..."}):i.jsx(be.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:se("font-medium transition-colors",s&&"text-green-400"),children:n},n)},mA=({isToggling:e,error:t,liked:n})=>e?i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full"}):t?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}):null,Qn=({entryId:e,className:t,variant:n="compact",showCount:r=!0})=>{const{liked:s,total:a,loading:o,error:l,isToggling:c,toggleLike:d}=Qp(e),[u,h]=p.useState(!1),m=f=>{f.stopPropagation(),f.preventDefault(),!o&&!c&&(d(),h(!0),setTimeout(()=>h(!1),1e3))};return n==="compact"?i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("absolute bottom-2 right-2 flex items-center gap-1 px-2 py-1 rounded-full","bg-black/60 backdrop-blur-sm text-white text-xs z-10","hover:bg-black/80 transition-colors","disabled:opacity-50 cursor-pointer",c&&"animate-pulse",u&&"bg-green-500/80",l&&"bg-red-500/80",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},children:[i.jsx(on,{mode:"wait",children:c?i.jsx(mA,{isToggling:!0,error:null,liked:s},"loading"):i.jsx(be.div,{animate:s?{scale:[1,1.3,1],rotate:[0,-10,10,0]}:{scale:1},transition:{duration:.4,ease:"easeOut"},children:i.jsx(Nn,{size:12,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-white")})},"heart")}),r&&i.jsx(ro,{value:a,loading:o}),i.jsx(on,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):n==="icon"?i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500","bg-white hover:shadow-sm transition-all duration-200","disabled:opacity-50 cursor-pointer relative",c&&"animate-pulse",u&&"border-green-400 text-green-500",l&&"border-red-400 text-red-500",s&&"border-red-400 text-red-500",t),whileTap:c?{}:{scale:.95},whileHover:c?{}:{scale:1.05},animate:u?{scale:[1,1.1,1]}:{},title:`${s?"Retirer le":"Ajouter un"} like${r&&a>0?` (${a})`:""}`,children:[i.jsx(on,{mode:"wait",children:c?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"})},"loading"):i.jsx(be.div,{initial:{scale:0},animate:s?{scale:[1,1.2,1],rotate:[0,-10,10,0]}:{scale:1},exit:{scale:0},transition:{duration:.4,ease:"easeOut"},children:i.jsx(Nn,{size:18,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-sm":"text-gray-500")})},"heart")}),r&&a>0&&i.jsx(be.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:i.jsx(ro,{value:a,loading:o})}),i.jsx(on,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{opacity:0},transition:{duration:.6},className:"absolute inset-0 rounded-full border-2 border-green-400"})})]}):i.jsxs(be.button,{onClick:m,disabled:o||c,className:se("flex items-center gap-3 px-4 py-3 rounded-lg relative overflow-hidden","bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700","transition-all duration-300 disabled:opacity-50",c&&"animate-pulse",u&&"bg-green-100 dark:bg-green-900/30",l&&"bg-red-100 dark:bg-red-900/30",t),whileTap:c?{}:{scale:.98},whileHover:c?{}:{scale:1.02},animate:u?{scale:[1,1.02,1]}:{},children:[i.jsx(on,{mode:"wait",children:c?i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"relative",children:i.jsx(be.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full"})},"loading"):i.jsx(be.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:i.jsx(be.div,{animate:s?{scale:[1,1.4,1],rotate:[0,-15,15,0]}:{scale:1},transition:{duration:.5,ease:"easeOut"},children:i.jsx(Nn,{size:20,className:se("transition-all duration-300",s?"fill-red-500 text-red-500 drop-shadow-lg":"text-slate-600 dark:text-slate-400")})})},"heart")}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx(be.span,{className:"text-sm font-medium",animate:u?{color:"#10b981"}:{},children:c?"En cours...":s?"Lik√© !":"Liker"}),r&&i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(ro,{value:a,loading:o}),i.jsxs("span",{children:["like",a!==1?"s":""]})]})]}),i.jsx(on,{children:u&&i.jsx(be.div,{initial:{scale:0,opacity:.8},animate:{scale:4,opacity:0},exit:{opacity:0},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0 bg-green-400/20 rounded-lg"})})]})},hA=({text:e})=>{const[t,n]=p.useState(!1),s=(l=>{if(l.length<=120)return l;const d=l.substring(0,120),u=d.lastIndexOf(" ");return d.substring(0,u)+"..."})(e),a=e.length>s.length,o=()=>{n(!t)};return i.jsx("div",{className:"text-sm text-[#4a5d94]",children:i.jsxs("div",{onClick:a?o:void 0,onKeyDown:l=>{a&&(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),o())},tabIndex:a?0:void 0,role:a?"button":void 0,"aria-expanded":t,className:a?"cursor-pointer":"",children:[i.jsx(Qk,{components:{p:({node:l,...c})=>i.jsx("p",{className:"mb-3",...c}),h2:({node:l,...c})=>i.jsx("h2",{className:"text-lg font-bold mb-2",...c}),h3:({node:l,...c})=>i.jsx("h3",{className:"text-md font-semibold mb-2",...c}),hr:({node:l,...c})=>i.jsx("hr",{className:"my-4 border-t border-[#d8e3ff]",...c})},children:t?e:s}),a&&i.jsx("div",{className:"flex items-center text-xs text-[#8c9db5] mt-1",children:t?i.jsxs(i.Fragment,{children:[i.jsx(fm,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"R√©duire"})]}):i.jsxs(i.Fragment,{children:[i.jsx(nl,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"(pour voir +)"})]})})]})})},nc=({event:e,isOpen:t,onClose:n,source:r})=>{const s=yt(),{toast:a}=gl(),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,h]=p.useState([]);p.useEffect(()=>{t&&e&&z.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:e.id,event_title:e.title,source:r})},[t,e,r]),p.useEffect(()=>{if(e){const b=it();if(l(b),d(Yp()),e.locationId){const w=J1(e.locationId).filter(A=>A.id!==e.id);h(w)}}},[e]);const m=e?o.some(b=>b.id===e.id):!1,f=()=>{e&&(console.log(`[EventDetails] Navigation vers la carte pour l'√©v√©nement ${e.id} au lieu ${e.locationId}`),console.log(`[EventDetails] Source de navigation: ${r}`),So(ee.CLICK,"view_on_map_button",{from:"event_details",event_id:e.id,location_id:e.locationId,source:r}),n(),setTimeout(()=>{console.log(`[EventDetails] Redirection vers /map avec highlightLocationId=${e.locationId}`),s("/map",{state:{highlightLocationId:e.locationId,fromEvent:!0,timestamp:new Date().getTime()}})},100))},x=b=>{b.preventDefault(),b.stopPropagation(),e&&(mE(e),s("/community?tab=contribute"),n(),z.trackCommunityInteraction(ee.CONTRIBUTION,{from:"event_details",event_id:e.id,event_title:e.title}))},g=b=>{if(b.preventDefault(),b.stopPropagation(),!e)return;o.some(A=>A.id===e.id)?(oa(e.id),l(it()),z.trackContentInteraction(ee.UNSAVE,"event",e.id,{event_title:e.title,source:r})):(Nl(e),l(it()),z.trackContentInteraction(ee.SAVE,"event",e.id,{event_title:e.title,source:r}))},y=async b=>{if(b.preventDefault(),b.stopPropagation(),!!e)try{z.trackProgramCTA("add_to_calendar",e.id);const w=await tc(e);w.success?a({title:"√âv√©nement ajout√© au calendrier",description:`${e.title} a √©t√© ajout√© √† votre calendrier.`}):w.errorType===Ms.NOT_SUPPORTED?a({title:"Fonctionnalit√© non support√©e",description:"Votre appareil ne supporte pas l'ajout au calendrier.",variant:"destructive"}):(a({title:"Erreur",description:w.errorMessage||"Une erreur est survenue lors de l'ajout au calendrier.",variant:"destructive"}),z.trackError(ee.API_ERROR,"add_to_calendar",{event_id:e.id,error_message:w.errorMessage}))}catch(w){console.error("Erreur lors de l'ajout au calendrier:",w),a({title:"Erreur",description:"Une erreur inattendue est survenue.",variant:"destructive"}),z.trackError(ee.API_ERROR,"add_to_calendar_exception",{event_id:e==null?void 0:e.id,error_message:w==null?void 0:w.message})}};if(!e||!t)return null;const S=m,v=Gh.find(b=>b.id===e.artistId);return i.jsx(op,{open:t,onOpenChange:b=>!b&&n(),children:i.jsxs(Ol,{className:"w-[95vw] sm:w-[90vw] md:w-[80vw] lg:max-w-md max-h-[85vh] overflow-y-auto pt-14","aria-describedby":"event-details-description",children:[i.jsx("div",{id:"event-details-description",className:"sr-only",children:"D√©tails de l'√©v√©nement s√©lectionn√©"}),i.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-end items-center p-3 bg-white z-10",children:i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(Qn,{entryId:`event-${e.id}`,variant:"icon",showCount:!0}),i.jsx("button",{className:`flex items-center justify-center h-10 w-10 rounded-full border ${S?"border-[#ff7a45] text-[#ff7a45]":"border-gray-300 text-gray-500"} transition-all duration-200 hover:shadow-sm`,onClick:g,title:S?"Retirer des favoris":"Ajouter aux favoris",type:"button",children:S?i.jsx(tl,{className:"h-5 w-5"}):i.jsx(Wi,{className:"h-5 w-5"})}),i.jsx(ua,{title:`${e.title} - √éle Feydeau`,text:`D√©couvrez ${e.title} par ${e.artistName} sur l'√éle Feydeau √† Nantes!`,url:window.location.href}),i.jsx("button",{className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500 transition-all duration-200 hover:shadow-sm",onClick:n,title:"Fermer",type:"button",children:i.jsx(gr,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Ll,{className:"sr-only",children:i.jsx(Fl,{children:e.title})}),i.jsxs("div",{className:"py-2 px-1 overflow-x-hidden",children:[e.type==="exposition"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#e0ebff] p-3 rounded-lg mb-2",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-2",children:i.jsx(js,{text:e.artistName,maxLength:40,className:"text-sm text-[#4a5d94]"})})]}):i.jsx("div",{className:"bg-[#f9f2ee] p-3 rounded-lg mb-3",children:i.jsx("h3",{className:"text-lg font-medium text-[#1a2138] break-words",children:e.title})}),i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Cn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(js,{text:`${El(e.locationId)} ‚Ä¢ ${e.time}`,maxLength:40,className:"text-xs text-[#8c9db5]"})})]}),i.jsxs("div",{className:"bg-[#f0f5ff] p-3 rounded-lg mb-4",children:[(v==null?void 0:v.presentation)&&i.jsx(hA,{text:v.presentation}),e.type==="concert"&&v&&i.jsxs("div",{className:"space-y-4 mt-4",children:[v.email&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Contact email:"}),i.jsx("a",{href:`mailto:${v.email}`,className:"text-sm text-blue-600 hover:underline",children:v.email})]}),v.website&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Site web:"}),i.jsx("a",{href:v.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.website.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.phone&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"T√©l√©phone:"}),i.jsx("a",{href:`tel:${v.phone}`,className:"text-sm text-blue-600 hover:underline",children:v.phone})]}),v.facebook&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"Facebook:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.facebook})]}),v.youtube&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"YouTube:"}),i.jsx("a",{href:v.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.youtube.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.tiktok&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-medium mb-1 text-[#4a5d94]",children:"TikTok:"}),i.jsx("a",{href:v.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:v.tiktok.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),v.director&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Direction:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.director})]}),v.members&&i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2",children:"Membres:"}),i.jsx("span",{className:"text-sm text-gray-700",children:v.members})]})]}),e.type==="concert"&&(v==null?void 0:v.photos)&&v.photos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Photos"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:v.photos.map((b,w)=>i.jsx("div",{className:"relative pb-[75%] overflow-hidden rounded-lg",children:i.jsx("img",{src:pt(b),alt:`${e.artistName} - photo ${w+1}`,className:"absolute top-0 left-0 object-cover w-full h-full",loading:"lazy",onError:A=>{console.error(`Erreur de chargement de l'image: ${b}`),A.currentTarget.style.display="none"}})},w))})]}),e.type==="concert"&&(v==null?void 0:v.videos)&&v.videos.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-sm font-medium mb-3 text-[#4a5d94] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#4a5d94] mr-2"}),"Vid√©os"]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 w-full",children:v.videos.map((b,w)=>{let A=b;if(b.includes("youtube.com")||b.includes("youtu.be")){let C="";if(b.includes("youtube.com/watch?v=")){C=b.split("v=")[1];const M=C.indexOf("&");M!==-1&&(C=C.substring(0,M))}else b.includes("youtu.be/")&&(C=b.split("youtu.be/")[1]);C&&(A=`https://www.youtube.com/embed/${C}`)}return i.jsx("div",{className:"relative w-full pb-[56.25%] overflow-hidden rounded-lg",children:i.jsx("iframe",{src:A,title:`${e.artistName} - vid√©o ${w+1}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full",loading:"lazy"})},w)})})]}),v&&v.instagram&&v.instagram.includes("instagram")&&(()=>{const w=(A=>{try{return new URL(A).pathname.replace(/\/$/,"").split("/").filter(Boolean).pop()||""}catch{return A.split("?")[0].replace(/\/$/,"").split("/").filter(Boolean).pop()||""}})(v.instagram);return w?i.jsx("div",{className:"border-t border-[#d8e3ff] pt-4 mt-4",children:i.jsx("div",{className:"instagram-embed-container w-full overflow-hidden rounded-lg relative",style:{paddingBottom:"100%",height:0},children:i.jsx("iframe",{title:`Instagram feed de ${e.artistName}`,src:`https://www.instagram.com/${w}/embed?hidecaption=1&header=0`,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowtransparency:"true",loading:"lazy",style:{position:"absolute",top:"-43px",left:0,width:"100%",height:"calc(100% + 43px)"}})})}):null})(),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-2 mt-6 border-t border-[#d8e3ff] pt-4",children:[r==="program"?i.jsxs(J,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:f,children:[i.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]}):i.jsxs(J,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm",onClick:()=>s("/program"),children:[i.jsx(En,{className:"h-4 w-4 mr-2"}),"Voir le programme"]}),i.jsxs(J,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm",onClick:()=>{e&&(So(ee.CLICK,"history_button",{from:"event_details",event_id:e.id,location_id:e.locationId}),z.trackBuildingHistoryView(e.locationId,"from_event_details")),s("/location-history",{state:{selectedLocationId:e.locationId,fromEvent:!0}}),n()},children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),"Histoire du lieu"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3",children:[i.jsx(J,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm min-w-0",onClick:y,disabled:!c,children:c?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Ajouter au calendrier"})]}):i.jsxs(i.Fragment,{children:[i.jsx(hm,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager l'√©v√©nement"})]})}),i.jsxs(J,{variant:"outline",className:"border-[#ff7a45] text-[#ff7a45] flex-1 text-xs sm:text-sm min-w-0",onClick:x,children:[i.jsx($s,{className:"h-4 w-4 mr-2 shrink-0"}),i.jsx("span",{className:"truncate",children:"Partager un souvenir"})]})]}),i.jsx(J,{className:"w-full mt-3 border-[#8c9db5] text-[#8c9db5] text-xs sm:text-sm",variant:"outline",onClick:n,children:"Retour"})]})]})]})})},Di=Xe("ValidationService"),Ri=e=>{const t=[];if(e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.title||e.title.trim()==="")&&t.push({field:"title",message:"Le titre est obligatoire"}),(!e.artistName||e.artistName.trim()==="")&&t.push({field:"artistName",message:"Le nom de l'artiste est obligatoire"}),e.type?e.type!=="exposition"&&e.type!=="concert"&&t.push({field:"type",message:`Le type d'√©v√©nement doit √™tre "exposition" ou "concert"`}):t.push({field:"type",message:"Le type d'√©v√©nement est obligatoire"}),(!e.artistBio||e.artistBio.trim()==="")&&t.push({field:"artistBio",message:"La biographie de l'artiste est obligatoire"}),(!e.time||e.time.trim()==="")&&t.push({field:"time",message:"L'heure est obligatoire"}),!e.days||e.days.length===0)t.push({field:"days",message:"Au moins un jour doit √™tre s√©lectionn√©"});else for(const n of e.days)if(n!=="samedi"&&n!=="dimanche"){t.push({field:"days",message:'Les jours doivent √™tre "samedi" ou "dimanche"'});break}return(!e.locationName||e.locationName.trim()==="")&&t.push({field:"locationName",message:"Le nom du lieu est obligatoire"}),t.length>0?Di.warn(`Validation de l'√©v√©nement ${e.id} √©chou√©e`,{errors:t}):Di.info(`Validation de l'√©v√©nement ${e.id} r√©ussie`),{isValid:t.length===0,errors:t}},Uo=e=>{const t=[];return e.id?/^[a-z0-9-]+$/.test(e.id)||t.push({field:"id",message:"L'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets"}):t.push({field:"id",message:"L'identifiant est obligatoire"}),(!e.name||e.name.trim()==="")&&t.push({field:"name",message:"Le nom est obligatoire"}),(!e.description||e.description.trim()==="")&&t.push({field:"description",message:"La description est obligatoire"}),typeof e.x!="number"&&t.push({field:"x",message:"La coordonn√©e X doit √™tre un nombre"}),typeof e.y!="number"&&t.push({field:"y",message:"La coordonn√©e Y doit √™tre un nombre"}),t.length>0?Di.warn(`Validation du lieu ${e.id} √©chou√©e`,{errors:t}):Di.info(`Validation du lieu ${e.id} r√©ussie`),{isValid:t.length===0,errors:t}},ai=e=>e.map(t=>`${t.field}: ${t.message}`).join(`
`),ke=Xe("DataService"),dd={events:Lt,locations:ct,isLoading:!1,error:null},or=class or{constructor(){It(this,"state");It(this,"listeners",[]);ke.info("Initialisation du service de donn√©es"),this.state=this.loadFromLocalStorage()||dd}static getInstance(){return or.instance||(or.instance=new or),or.instance}getState(){return{...this.state}}getEvents(){return[...this.state.events]}getLocations(){return[...this.state.locations]}getEventById(t){return this.state.events.find(n=>n.id===t)}getLocationById(t){return this.state.locations.find(n=>n.id===t)}getEventsByLocationId(t){return this.state.events.filter(n=>n.locationId===t)}updateEvent(t){ke.info(`Mise √† jour de l'√©v√©nement ${t.id}`);const n=Ri(t);if(!n.isValid){const r=ai(n.errors);return ke.error(`Validation √©chou√©e pour l'√©v√©nement ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:this.state.events.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}updateLocation(t){ke.info(`Mise √† jour du lieu ${t.id}`);const n=Uo(t);if(!n.isValid){const r=ai(n.errors);return ke.error(`Validation √©chou√©e pour le lieu ${t.id}`,r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:this.state.locations.map(r=>r.id===t.id?t:r),error:null}),{success:!0}}addEvent(t){if(ke.info(`Ajout d'un nouvel √©v√©nement: ${t.title}`),this.state.events.some(r=>r.id===t.id)){const r=`Un √©v√©nement avec l'ID ${t.id} existe d√©j√†`;return ke.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Ri(t);if(!n.isValid){const r=ai(n.errors);return ke.error("Validation √©chou√©e pour le nouvel √©v√©nement",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,events:[...this.state.events,t],error:null}),{success:!0}}addLocation(t){if(ke.info(`Ajout d'un nouveau lieu: ${t.name}`),this.state.locations.some(r=>r.id===t.id)){const r=`Un lieu avec l'ID ${t.id} existe d√©j√†`;return ke.error(r),this.setState({...this.state,error:r}),{success:!1,error:r}}const n=Uo(t);if(!n.isValid){const r=ai(n.errors);return ke.error("Validation √©chou√©e pour le nouveau lieu",r),this.setState({...this.state,error:`Erreur de validation: ${r}`}),{success:!1,error:r}}return this.setState({...this.state,locations:[...this.state.locations,t],error:null}),{success:!0}}removeEvent(t){ke.info(`Suppression de l'√©v√©nement ${t}`),this.setState({...this.state,events:this.state.events.filter(n=>n.id!==t)})}removeLocation(t){ke.info(`Suppression du lieu ${t}`),this.setState({...this.state,locations:this.state.locations.filter(n=>n.id!==t)})}saveToLocalStorage(){ke.info("Sauvegarde des donn√©es dans le localStorage");try{ke.debug("D√©tails des donn√©es √† sauvegarder",{eventsCount:this.state.events.length,locationsCount:this.state.locations.length,firstLocation:this.state.locations[0]?{id:this.state.locations[0].id,name:this.state.locations[0].name,x:this.state.locations[0].x,y:this.state.locations[0].y}:"Aucun lieu"}),localStorage.setItem("events",JSON.stringify(this.state.events)),localStorage.setItem("locations",JSON.stringify(this.state.locations));const t=localStorage.getItem("locations");if(t){const n=JSON.parse(t);ke.debug("V√©rification de la sauvegarde",{savedLocationsCount:n.length,firstSavedLocation:n[0]?{id:n[0].id,name:n[0].name,x:n[0].x,y:n[0].y}:"Aucun lieu"})}ke.info("Donn√©es sauvegard√©es avec succ√®s dans le localStorage")}catch(t){ke.error("Erreur lors de la sauvegarde des donn√©es",t),this.setState({...this.state,error:"Erreur lors de la sauvegarde des donn√©es"})}}loadFromLocalStorage(){ke.info("Chargement des donn√©es depuis le localStorage");try{const t=localStorage.getItem("events"),n=localStorage.getItem("locations");if(ke.debug("Donn√©es r√©cup√©r√©es du localStorage",{eventsDataExists:!!t,locationsDataExists:!!n,eventsDataLength:t?t.length:0,locationsDataLength:n?n.length:0}),!t||!n)return ke.info("Aucune donn√©e trouv√©e dans le localStorage"),null;const r=JSON.parse(t),s=JSON.parse(n);return ke.debug("Donn√©es pars√©es du localStorage",{eventsCount:r.length,locationsCount:s.length,firstLocation:s[0]?{id:s[0].id,name:s[0].name,x:s[0].x,y:s[0].y}:"Aucun lieu"}),ke.info("Donn√©es charg√©es avec succ√®s depuis le localStorage"),{events:r,locations:s,isLoading:!1,error:null}}catch(t){return ke.error("Erreur lors du chargement des donn√©es",t),{...dd,error:"Erreur lors du chargement des donn√©es"}}}exportData(){ke.info("Export des donn√©es au format JSON");try{const t={events:this.state.events,locations:this.state.locations,exportDate:new Date().toISOString()};return JSON.stringify(t,null,2)}catch(t){return ke.error("Erreur lors de l'export des donn√©es",t),this.setState({...this.state,error:"Erreur lors de l'export des donn√©es"}),""}}importData(t){ke.info("Import des donn√©es depuis JSON");try{const n=JSON.parse(t);return!n.events||!n.locations?(ke.error("Format de donn√©es invalide"),this.setState({...this.state,error:"Format de donn√©es invalide"}),!1):(this.setState({...this.state,events:n.events,locations:n.locations,error:null}),this.saveToLocalStorage(),!0)}catch(n){return ke.error("Erreur lors de l'import des donn√©es",n),this.setState({...this.state,error:"Erreur lors de l'import des donn√©es"}),!1}}subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}setState(t){this.state=t,this.listeners.forEach(n=>n(this.state)),this.saveToLocalStorage()}};It(or,"instance");let qo=or;const tt=qo.getInstance(),en=Xe("useData"),ya=()=>{const[e,t]=p.useState(tt.getState());p.useEffect(()=>{en.info("Initialisation du hook useData");const g=tt.subscribe(y=>{t(y)});return()=>{en.info("Nettoyage du hook useData"),g()}},[]);const n=()=>e.events,r=()=>e.locations,s=g=>e.events.find(y=>y.id===g),a=g=>e.locations.find(y=>y.id===g),o=g=>g?e.events.filter(y=>y.locationId===g):[],l=g=>(en.info(`Mise √† jour de l'√©v√©nement ${g.id}`),tt.updateEvent(g)),c=g=>(en.info(`Mise √† jour du lieu ${g.id}`),tt.updateLocation(g)),d=g=>(en.info(`Ajout d'un nouvel √©v√©nement: ${g.title}`),tt.addEvent(g)),u=g=>(en.info(`Ajout d'un nouveau lieu: ${g.name}`),tt.addLocation(g)),h=g=>{en.info(`Suppression de l'√©v√©nement ${g}`),tt.removeEvent(g)},m=g=>{en.info(`Suppression du lieu ${g}`),tt.removeLocation(g)},f=()=>(en.info("Export des donn√©es"),tt.exportData()),x=g=>(en.info("Import des donn√©es"),tt.importData(g));return{events:e.events,locations:e.locations,isLoading:e.isLoading,error:e.error,getEvents:n,getLocations:r,getEventById:s,getLocationById:a,getEventsByLocationId:o,updateEvent:l,updateLocation:c,addEvent:d,addLocation:u,removeEvent:h,removeLocation:m,exportData:f,importData:x}},Jp=()=>{const{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}=ya();return{events:e,isLoading:t,error:n,getEventById:r,getEventsByLocationId:s,addEvent:a,updateEvent:o,removeEvent:l}},rc=()=>{const{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}=ya();return{locations:e,isLoading:t,error:n,getLocationById:r,getEventsByLocationId:s,addLocation:a,updateLocation:o,removeLocation:l}},Me=Xe("Map"),fA=({fullScreen:e=!1})=>{var Pe,ae,Ie;const t=yt(),n=kn(),{locations:r}=rc(),{getEventById:s,getEventsByLocationId:a}=Jp(),[o,l]=p.useState(r),[c,d]=p.useState([]),[u,h]=p.useState(null),[m,f]=p.useState(null),[x,g]=p.useState(null),[y,S]=p.useState(null),[v,b]=p.useState(null),[w,A]=p.useState(1),[C,M]=p.useState(null),[_,k]=p.useState(!1),[P,N]=p.useState(!1),[T,$]=p.useState(!1),H=p.useMemo(()=>!1,[]);p.useEffect(()=>{z.trackInteraction(ee.ZOOM,"map",{scale:w})},[w]),p.useEffect(()=>{z.trackPageView("/map","Carte"),z.trackMapInteraction(ee.MAP_LOAD,{total_locations:r.length});const V=localStorage.getItem("mapLocations");if(V)try{const ne=JSON.parse(V),ye=r.map(Te=>{const bt=ne.find(Qt=>Qt.id===Te.id);return bt?{...Te,visited:bt.visited}:Te});l(ye)}catch(ne){Me.error("Erreur lors du chargement des lieux visit√©s",{error:ne})}},[r]),p.useEffect(()=>{const ne=it().map(ye=>ye.id);d(ne)},[H]),p.useEffect(()=>{if(!u){const ne=it().map(ye=>ye.id);d(ne)}},[u]),p.useEffect(()=>{Me.info("Mise √† jour des emplacements sur la carte depuis le service de donn√©es"),l(r)},[r]);const Y=(V,ne)=>{ne.stopPropagation(),Me.info(`Tentative de sauvegarde de l'√©v√©nement: ${V.id} depuis la carte`),c.includes(V.id)?(oa(V.id),d(c.filter(Te=>Te!==V.id)),z.trackContentInteraction(ee.UNSAVE,"event",V.id,{source:"map"}),Me.info(`√âv√©nement ${V.id} retir√© avec succ√®s depuis la carte`)):(Nl(V),d([...c,V.id]),z.trackContentInteraction(ee.SAVE,"event",V.id,{source:"map"}),Me.info(`√âv√©nement ${V.id} sauvegard√© avec succ√®s depuis la carte`))};p.useEffect(()=>{var I,D,O;const V=(I=n.state)==null?void 0:I.highlightLocationId,ne=((D=n.state)==null?void 0:D.fromEvent)===!0,ye=((O=n.state)==null?void 0:O.fromHistory)===!0,Te=new URLSearchParams(window.location.search),bt=Te.get("highlight"),Qt=Te.get("location"),Ct=Te.get("event"),Ft=bt||Qt||V||Ct;if(!Ft)return;Me.info(`Mise en √©vidence du lieu avec ID: ${Ft}`);let Ge=Ft;if(Ct&&Ft===Ct){const K=Lt.find(X=>X.id===Ct);K&&(Ge=K.locationId,Me.debug(`Conversion de l'ID d'√©v√©nement ${Ct} en ID de lieu ${Ge}`),setTimeout(()=>{h(K),Me.info(`Ouverture automatique des d√©tails de l'√©v√©nement ${K.id}`)},500))}let at=o.find(K=>K.id===Ge);!at&&Ge&&(at=o.find(K=>K.id.startsWith(Ge)),at&&(Me.info(`Lieu avec ID exact ${Ge} non trouv√©, mais un lieu correspondant a √©t√© trouv√©: ${at.id}`),Ge=at.id)),at?(Me.debug("Lieu trouv√© pour mise en √©vidence",{id:at.id,name:at.name,x:at.x,y:at.y}),g(Ge),!ye&&!ne&&f(Ge),Me.debug(`Mise en √©vidence permanente du lieu ${Ge} jusqu'√† la prochaine action utilisateur`)):Me.warn(`Lieu avec ID ${Ft} non trouv√© dans mapLocations`)},[n,o,Lt]);const Z=V=>{Me.info(`Clic sur l'emplacement ${V}`),g(V),f(V);const ne=a(V);Me.debug(`R√©cup√©ration des √©v√©nements pour le lieu ${V} via getEventsByLocationId`,ne),Me.debug(`√âv√©nements trouv√©s pour ${V}`,ne);const ye=o.find(Te=>Te.id===V);ye&&z.trackBuildingView(ye.id,ye.name),z.trackMapInteraction(ee.LOCATION_VIEW,{building_id:V,from:"map"}),h(null)},te=(V,ne)=>{const ye=o.map(Te=>Te.id===V?{...Te,visited:ne}:Te);l(ye),localStorage.setItem("mapLocations",JSON.stringify(ye)),z.trackFeatureUse("location_mark_visited",{location_id:V,visited:ne}),g(V),ne&&(Me.info(`Lieu ${V} marqu√© comme visit√©, v√©rification des achievements`),ye.every(bt=>bt.visited)&&(Me.info("Tous les lieux ont √©t√© visit√©s, d√©blocage de l'achievement ALL_LOCATIONS_VISITED"),Ni(st.ALL_LOCATIONS_VISITED)))},L=V=>{const ne=a(V);return Me.debug(`√âv√©nements trouv√©s pour ${V} via getEventsByLocationId`,ne),ne},q=o.filter(V=>V.visited).length,j=o.length,Q=()=>{localStorage.setItem("locationConsent","granted"),N(!0),$(!1),k(!1)};p.useEffect(()=>{if(H){$(!0),k(!1),N(!0),localStorage.setItem("locationConsent","granted"),Me.info("Environnement de d√©veloppement d√©tect√©, localisation activ√©e automatiquement");return}localStorage.removeItem("locationConsent"),$(!1),k(!1),N(!1)},[]);const ie=(V,ne,ye)=>{S({x:V,y:ne}),ye&&b(ye)},[E,ce]=p.useState(null);return p.useEffect(()=>{const V=ne=>{ne.message&&ne.message.includes("insertBefore")&&(console.warn("[Map] DOM insertBefore error caught:",ne),ce("Erreur de rendu d√©tect√©e, rechargement..."),setTimeout(()=>{ce(null),f(null),h(null)},2e3))};return window.addEventListener("error",V),()=>window.removeEventListener("error",V)},[]),E?i.jsx("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-4",children:[i.jsx("p",{className:"text-red-500 mb-2",children:E}),i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})]})}):i.jsxs("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsx("div",{className:"w-1/4"}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94] text-center",children:"Carte"}),i.jsx("div",{className:"flex items-center space-x-2 w-1/4 justify-end",children:i.jsx(ua,{title:"Parcours √éle Feydeau",text:"D√©couvrez mon parcours sur l'√éle Feydeau √† Nantes!"})})]}),i.jsx("div",{className:"flex items-center justify-center mb-4 text-sm text-[#4a5d94] fade-in",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4CAF50] rounded-full mr-1 text-white text-xs font-medium",children:q}),i.jsx("span",{className:"text-xs",children:q>1?"Visit√©s":"Visit√©"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-[#4a5d94] rounded-full mr-1 text-white text-xs font-medium",children:j-q}),i.jsx("span",{className:"text-xs",children:"√Ä d√©couvrir"})]})]})}),i.jsxs("div",{className:"flex justify-center gap-2 my-2",children:[i.jsx(uS,{onLocationEnabled:()=>{k(!1),N(!0),$(!0),Me.info("Localisation activ√©e manuellement par l'utilisateur"),z.trackMapInteraction(ee.USER_LOCATION,{granted:!0})},onLocationDenied:()=>{k(!0),N(!1),Me.warn("Localisation refus√©e par l'utilisateur"),z.trackMapInteraction(ee.USER_LOCATION,{granted:!1})},onLocationDisabled:()=>{N(!1),M(null),Me.info("Localisation d√©sactiv√©e manuellement par l'utilisateur"),z.trackMapInteraction(ee.USER_LOCATION,{granted:!1,disabled:!0})}}),i.jsx(dS,{onAudioEnabled:()=>{Me.info("Son activ√© manuellement par l'utilisateur"),z.trackFeatureUse("map_sound_toggle",{enabled:!0})},onAudioDisabled:()=>{Me.info("Son d√©sactiv√© par l'utilisateur"),z.trackFeatureUse("map_sound_toggle",{enabled:!1})}})]}),i.jsx("div",{className:"relative",children:i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsxs("div",{className:"relative h-full",children:[i.jsx(Zh,{locations:o,activeLocation:m,highlightedLocation:x,onClick:V=>{const ne=V.currentTarget.dataset.locationId||V.currentTarget.id.replace("location-","");ne?Z(ne):z.trackInteraction(ee.CLICK,"map_background")},readOnly:!1,onScaleChange:A,onPanStart:({x:V,y:ne})=>{z.trackMapInteraction(ee.DRAG,{phase:"start",x:Math.round(V),y:Math.round(ne)})},onPanEnd:({totalDx:V,totalDy:ne,distance:ye,durationMs:Te})=>{z.trackMapInteraction(ee.DRAG,{total_dx:Math.round(V),total_dy:Math.round(ne),distance:Math.round(ye),duration_ms:Math.round(Te)})},userLocationProps:P?{onLocationUpdate:ie,showNavigation:!1,onPermissionChange:V=>k(V)}:void 0,navigationProps:C&&y&&v?{userPosition:v,targetLocation:o.find(V=>V.id===C)||null,onClose:()=>M(null)}:void 0}),_&&!H&&i.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-red-500 text-white p-2 text-center",children:[i.jsx("div",{className:"mb-2",children:"Acc√®s refus√© - Vous avez refus√© l'acc√®s √† votre position."}),i.jsx(J,{size:"sm",onClick:Q,className:"bg-white text-red-500 hover:bg-gray-100 text-xs",children:"Activer la localisation"})]})]})})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:()=>f(null),children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:V=>V.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-[#4a5d94]",children:(Pe=o.find(V=>V.id===m))==null?void 0:Pe.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qn,{entryId:`building-${m}`,variant:"icon",showCount:!0}),i.jsx(J,{variant:"ghost",size:"sm",className:"-mt-2 -mr-2",onClick:()=>{m&&z.trackInteraction(ee.BACK,"location_details_close",{building_id:m}),f(null)},children:i.jsx(gr,{className:"h-4 w-4"})})]})]}),i.jsx("p",{className:"text-sm text-[#8c9db5] mb-3",children:"√éle Feydeau, Nantes"}),i.jsx("p",{className:"text-sm text-[#4a5d94] mb-4",children:(ae=o.find(V=>V.id===m))==null?void 0:ae.description}),i.jsxs(J,{size:"sm",variant:"outline",className:"text-xs border-[#4a5d94] text-[#4a5d94]",onClick:()=>{if(m){Me.info(`Navigation vers l'histoire du lieu: ${m}`);const V=o.find(ne=>ne.id===m);V&&z.trackBuildingHistoryView(V.id,"from_map"),z.trackInteraction(ee.CLICK,"history_button",{from:"map",building_id:m}),t("/location-history",{state:{selectedLocationId:m}})}else Me.warn("Tentative de navigation vers l'histoire d'un lieu non s√©lectionn√©")},children:[i.jsx(es,{className:"h-3 w-3 mr-1"}),"Histoire du lieu"]}),i.jsx("div",{className:"mb-6"}),L(m).length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"font-medium text-[#1a2138] mb-2",children:"√âv√©nements √† cet endroit:"}),i.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 -mr-2",children:L(m).map(V=>i.jsx("div",{className:`bg-[#f0f5ff] p-3 rounded-lg cursor-pointer hover:bg-[#e0ebff] transition-colors ${c.includes(V.id)?"border-l-4 border-l-[#ff7a45]":""}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",onClick:()=>{z.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:V.id,source:"map"}),h(V)},children:[i.jsx("p",{className:"font-medium text-[#1a2138]",children:V.title}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx(En,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsxs("p",{className:"text-xs text-[#8c9db5]",children:[V.days.map(ne=>ne==="samedi"?"Sa":"Di").join("/"),", ",V.time]})]}),i.jsx("p",{className:"text-xs text-[#4a5d94] mt-1",children:V.artistName})]}),i.jsx(J,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:ne=>Y(V,ne),children:c.includes(V.id)?i.jsx(tl,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(Wi,{className:"h-5 w-5 text-[#8c9db5]"})})]})},V.id))})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-between mb-4",children:[i.jsx(J,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] text-xs sm:text-sm px-1 sm:px-2 min-h-[44px]",onClick:()=>{var V;return m&&te(m,!((V=o.find(ne=>ne.id===m))!=null&&V.visited))},children:(Ie=o.find(V=>V.id===m))!=null&&Ie.visited?"Non visit√©":"Marquer visit√©"}),i.jsx(J,{className:"bg-[#ff7a45] hover:bg-[#ff9d6e] text-sm min-h-[44px]",onClick:()=>{m&&z.trackInteraction(ee.BACK,"location_details_back",{building_id:m}),f(null)},children:"Retour √† la carte"})]}),P&&i.jsx("div",{className:"mb-16",children:i.jsxs(J,{variant:"secondary",className:"w-full text-sm bg-[#f0f5ff] text-[#4a5d94] hover:bg-[#d8e3ff] min-h-[44px]",onClick:()=>{m&&(M(m),f(null),z.trackMapInteraction(ee.ROUTE_CALCULATE,{building_id:m,has_user_position:!!y}))},children:[i.jsx(Zo,{className:"h-4 w-4 mr-2"}),"Me guider vers ce lieu"]})})]})}),i.jsx(nc,{event:u,isOpen:!!u,onClose:()=>{h(null),g(null)},source:"map"}),i.jsx(Zn,{})]})},ss=Dx,Cr=p.forwardRef(({className:e,...t},n)=>i.jsx(pm,{ref:n,className:se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Cr.displayName=pm.displayName;const ze=p.forwardRef(({className:e,...t},n)=>i.jsx(gm,{ref:n,className:se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ze.displayName=gm.displayName;const Be=p.forwardRef(({className:e,...t},n)=>i.jsx(xm,{ref:n,className:se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Be.displayName=xm.displayName;function pA({onFilterChange:e,currentFilter:t}){return i.jsxs("div",{className:"flex space-x-2 mb-4",children:[i.jsx(J,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>e("all"),className:t==="all"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:"Tous"}),i.jsxs(J,{variant:t==="exposition"?"default":"outline",size:"sm",onClick:()=>e("exposition"),className:t==="exposition"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Rx,{className:"h-4 w-4 mr-2"}),"Expositions"]}),i.jsxs(J,{variant:t==="concert"?"default":"outline",size:"sm",onClick:()=>e("concert"),className:t==="concert"?"bg-[#ff7a45] hover:bg-[#ff9d6e]":"",children:[i.jsx(Ox,{className:"h-4 w-4 mr-2"}),"Concerts"]})]})}const je=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const Dt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex flex-col space-y-1.5 p-6",e),...t}));Dt.displayName="CardHeader";const Rt=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:se("text-2xl font-semibold leading-none tracking-tight",e),...t}));Rt.displayName="CardTitle";const sc=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:se("text-sm text-muted-foreground",e),...t}));sc.displayName="CardDescription";const Je=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("p-6 pt-0",e),...t}));Je.displayName="CardContent";const Zp=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex items-center p-6 pt-0",e),...t}));Zp.displayName="CardFooter";const md=({event:e,isSaved:t,onEventClick:n,onSaveClick:r})=>i.jsxs(je,{className:"shadow-md border-0 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1",onClick:n,children:[i.jsx("div",{className:`h-1 ${e.type==="exposition"?"bg-[#4a5d94]":"bg-[#ff7a45]"}`}),i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#1a2138]",children:i.jsx(js,{text:e.title,maxLength:25,className:"font-medium text-[#1a2138]"})}),e.type==="exposition"&&i.jsx("p",{className:"text-sm text-[#4a5d94]",children:i.jsx(js,{text:e.artistName,maxLength:20,className:"text-sm text-[#4a5d94]"})}),i.jsxs("div",{className:"flex flex-col space-y-1 mt-1",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ho,{className:"h-3 w-3 mr-1 text-[#ff7a45]"}),i.jsx("p",{className:"text-xs font-medium text-[#ff7a45]",children:e.time})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cn,{className:"h-3 w-3 mr-1 text-[#8c9db5]"}),i.jsx("p",{className:"text-xs text-[#8c9db5]",children:i.jsx(js,{text:e.locationName,maxLength:30,className:"text-xs text-[#8c9db5]"})})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Qn,{entryId:`event-${e.id}`,variant:"compact",showCount:!0,className:"scale-75 -mr-1"}),i.jsx(J,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:r,children:t?i.jsx(tl,{className:"h-5 w-5 text-[#ff7a45]"}):i.jsx(Wi,{className:"h-5 w-5 text-[#8c9db5]"})})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.type==="exposition"?"bg-[#e0ebff] text-[#4a5d94]":"bg-[#fff2ee] text-[#ff7a45]"}`,children:e.type==="exposition"?"Exposition":"Concert"})]})]})})]}),gA=()=>{const e=yt(),[t,n]=p.useState(null),[r,s]=p.useState("all"),[a,o]=p.useState([]);p.useEffect(()=>{z.trackPageView("/program","Programme")},[]),p.useEffect(()=>{const f=it().map(x=>x.id);o(f)},[]);const l=(m,f)=>{f.stopPropagation(),console.log(`[Program] Tentative de sauvegarde de l'√©v√©nement: ${m.id}`),a.includes(m.id)?(oa(m.id),o(a.filter(g=>g!==m.id)),console.log(`[Program] √âv√©nement ${m.id} retir√© avec succ√®s`),z.trackContentInteraction(ee.UNSAVE,"event",m.id,{event_title:m.title,source:"program"})):(Nl(m),o([...a,m.id]),console.log(`[Program] √âv√©nement ${m.id} sauvegard√© avec succ√®s`),z.trackContentInteraction(ee.SAVE,"event",m.id,{event_title:m.title,source:"program"}))},c=m=>{s(m),z.trackProgramInteraction(ee.FILTER,{filter:m})},d=(m,f)=>f==="all"?m:m.filter(x=>x.type===f),u=m=>{const f=m.match(/(\d{1,2})h(\d{2})/);if(!f)return Number.MAX_SAFE_INTEGER;const x=parseInt(f[1],10),g=parseInt(f[2],10);return x*60+g},h=m=>[...m].sort((f,x)=>u(f.time)-u(x.time));return i.jsxs("div",{className:"min-h-screen app-gradient pb-20",children:[i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Programme"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(J,{variant:"ghost",size:"icon","aria-label":"Ajouter au calendrier",className:"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm",onClick:async()=>{try{z.trackProgramCTA("add_to_calendar");const{addToCalendar:m}=await zs(async()=>{const{addToCalendar:y}=await Promise.resolve().then(()=>rA);return{addToCalendar:y}},void 0),f=Lt;let x=0,g=0;for(const y of f)(await m(y)).success?x++:g++;x>0&&jt({title:"√âv√©nements ajout√©s au calendrier",description:`${x} √©v√©nement(s) ajout√©(s) avec succ√®s.`}),g>0&&(jt({title:"Erreur lors de l'ajout au calendrier",description:`${g} √©v√©nement(s) n'ont pas pu √™tre ajout√©s.`,variant:"destructive"}),z.trackError(ee.API_ERROR,"program_add_all_to_calendar_errors",{error_count:g}))}catch(m){jt({title:"Erreur inattendue",description:m instanceof Error?m.message:"Impossible d'ajouter au calendrier.",variant:"destructive"}),z.trackError(ee.API_ERROR,"program_add_all_to_calendar_exception",{message:m==null?void 0:m.message})}},children:i.jsx(En,{className:"h-5 w-5"})})})]}),i.jsx("div",{className:"mb-4 fade-in",children:i.jsx(pA,{onFilterChange:c,currentFilter:r})}),i.jsx("div",{className:"text-center mb-4 text-sm text-[#ff7a45] slide-in-bottom"}),i.jsxs(ss,{defaultValue:"samedi",className:"w-full",children:[i.jsxs(Cr,{className:"grid grid-cols-2 mb-4 bg-[#e0ebff]",children:[i.jsxs(ze,{value:"samedi",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(En,{className:"h-4 w-4 mr-2"}),"Samedi"]}),i.jsxs(ze,{value:"dimanche",className:"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white",children:[i.jsx(En,{className:"h-4 w-4 mr-2"}),"Dimanche"]})]}),i.jsxs(Be,{value:"samedi",className:"space-y-4",children:[h(d(Js("samedi"),r)).map((m,f)=>{const x=`samedi-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(md,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),z.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(Js("samedi"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun √©v√©nement ne correspond √† ce filtre pour ce jour."})})]}),i.jsxs(Be,{value:"dimanche",className:"space-y-4",children:[h(d(Js("dimanche"),r)).map((m,f)=>{const x=`dimanche-${m.id}-${f}`;return i.jsx("div",{children:i.jsx(md,{event:m,isSaved:a.includes(m.id),onEventClick:()=>{n(m),z.trackConcertView(m.id,m.title)},onSaveClick:g=>l(m,g)})},x)}),d(Js("dimanche"),r).length===0&&i.jsx("div",{className:"text-center py-8 text-[#8c9db5]",children:i.jsx("p",{children:"Aucun √©v√©nement ne correspond √† ce filtre pour ce jour."})})]})]}),i.jsx(nc,{event:t,isOpen:!!t,onClose:()=>n(null),source:"program"})]}),i.jsx(Zn,{})]})},oi={history:"Notre association est n√©e de la volont√© commune des habitants de ce quartier historique de Nantes, situ√© sur ce qui √©tait autrefois une √Æle. Fond√©e en 2017, elle regroupe 20 passionn√©s d√©termin√©s √† pr√©server et partager le patrimoine unique de ce lieu.",mission:"Nous ≈ìuvrons pour la pr√©servation de notre patrimoine architectural et culturel, tout en favorisant l'acc√®s √† l'art et √† la culture pour tous. Chaque ann√©e, le troisi√®me week-end de septembre, nous ouvrons nos portes au public pour partager ce lieu exceptionnel √† travers des expositions et concerts.",neighborhood:"Situ√© au c≈ìur de Nantes, notre quartier √©tait autrefois une √Æle entour√©e par les bras de la Loire. Au fil des si√®cles, l'urbanisation a transform√© le paysage, mais nous conservons pr√©cieusement l'h√©ritage architectural et l'esprit communautaire qui caract√©risent ce lieu si particulier.",event:"Notre √©v√©nement annuel transforme le quartier en une galerie d'art vivante o√π les visiteurs peuvent d√©couvrir des expositions dans les halls historiques et profiter de concerts dans notre cour int√©rieure. C'est l'occasion de rencontrer des artistes locaux et de vivre une exp√©rience culturelle unique dans un cadre exceptionnel."},nr={name:"Collectif Ile Feydeau",shortName:"FEYDEAU",description:"Association culturelle mettant en valeur le patrimoine historique d'un ancien quartier insulaire de Nantes.",yearFounded:2017,memberCount:20,eventWeekend:"Troisi√®me week-end de septembre",contactEmail:"collectif.ile.feydeau@gmail.com",instagram:"https://www.instagram.com/collectif_ile_feydeau"},xA=[{id:"member1",name:"Julien Fritsch",role:"Pr√©sident",description:"Organisateur du projet."},{id:"member2",name:"Philippe Ch√¢tel",role:"Tr√©sorier",description:"Coordonne les communications et partenariats artistiques."},{id:"member3",name:"Edwige Filleux",role:"Secr√©taire",description:"Fondation de l'association."}],yA=()=>{const e=yt();return i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>e("/map"),children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"√Ä propos"}),i.jsx(ua,{title:"√Ä propos du Collectif √éle Feydeau",text:"D√©couvrez l'histoire et la mission du Collectif √éle Feydeau √† Nantes!"})]}),i.jsxs(ss,{defaultValue:"association",className:"w-full mb-6",children:[i.jsxs(Cr,{className:"grid grid-cols-4 mb-4",children:[i.jsx(ze,{value:"association",children:"Association"}),i.jsx(ze,{value:"history",children:"Histoire"}),i.jsx(ze,{value:"team",children:"√âquipes"}),i.jsx(ze,{value:"support",children:"Nous aider"})]}),i.jsx(Be,{value:"history",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Histoire de l'√éle Feydeau"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"L'√éle Feydeau est un quartier historique de Nantes, construit au XVIIIe si√®cle sur une √Æle de la Loire. Ce lotissement, con√ßu par l'architecte Jean-Baptiste Ceineray, est un exemple remarquable d'architecture n√©oclassique et t√©moigne de la prosp√©rit√© des armateurs et n√©gociants nantais de l'√©poque."}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsx(J,{variant:"outline",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white",onClick:()=>e("/location-history"),children:"Voir l'histoire d√©taill√©e des lieux"})}),i.jsx("div",{className:"mt-8"}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Architecture unique"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Les immeubles de l'√éle Feydeau se caract√©risent par leurs fa√ßades orn√©es de mascarons, leurs balcons en fer forg√© et leur soubassement en granit. L'affaissement des b√¢timents, d√ª √† la nature mar√©cageuse du sol, conf√®re √† l'ensemble une silhouette l√©g√®rement pench√©e, caract√©ristique de ce quartier."}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Patrimoine pr√©serv√©"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Aujourd'hui, l'√éle Feydeau n'est plus une √Æle suite aux travaux de comblement de la Loire, mais son patrimoine architectural est pr√©serv√© et valoris√©. De nombreux immeubles sont class√©s ou inscrits aux Monuments Historiques, t√©moignant de l'importance de ce quartier dans l'histoire de Nantes."})]})}),i.jsxs(Be,{value:"association",className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:space-x-4 space-y-3 md:space-y-0 mt-4 mb-2 p-4 bg-white rounded-lg shadow-md",children:[i.jsxs("a",{href:"https://www.instagram.com/ilefeydeau/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#E1306C] transition-colors w-full md:w-auto justify-center",children:[i.jsx(Lx,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@ilefeydeau"})]}),i.jsxs("a",{href:"https://x.com/Ilefeydeau",target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-gray-700 hover:text-[#1DA1F2] transition-colors w-full md:w-auto justify-center",children:[i.jsx(Fx,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"@Ilefeydeau"})]}),i.jsxs("a",{href:`mailto:${nr.contactEmail}`,className:"flex items-center text-gray-700 hover:text-[#4285F4] transition-colors w-full md:w-auto justify-center break-all",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 flex-shrink-0",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),i.jsx("span",{className:"truncate",children:nr.contactEmail})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"D√©couvrez notre collectif en vid√©o"}),i.jsx("div",{className:"aspect-video w-full mb-4 bg-gray-100 rounded overflow-hidden",children:i.jsx("video",{className:"w-full h-full object-contain",controls:!0,playsInline:!0,poster:pt("intro-video-image.png"),src:pt("/video/intro-video.mp4"),"aria-label":"Vid√©o de pr√©sentation du Collectif √éle Feydeau"})}),i.jsx("p",{className:"text-gray-700 text-sm italic text-center",children:"Vid√©o d'introduction du Collectif √éle Feydeau (45 secondes)"})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre histoire"}),i.jsx("p",{className:"text-gray-700 mb-4",children:oi.history}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre mission"}),i.jsx("p",{className:"text-gray-700 mb-4",children:oi.mission}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notre quartier"}),i.jsx("p",{className:"text-gray-700 mb-4",children:oi.neighborhood}),i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"√âv√©nement annuel"}),i.jsx("p",{className:"text-gray-700 mb-4",children:oi.event})]})]}),i.jsxs(Be,{value:"team",className:"space-y-4",children:[i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:i.jsxs("p",{className:"text-gray-700",children:["Notre association compte ",nr.memberCount," membres actifs, tous habitants du quartier et passionn√©s par sa valorisation. Voici quelques-uns des membres du bureau qui coordonnent nos actions."]})}),i.jsx("div",{className:"space-y-4",children:xA.map(t=>i.jsx(je,{children:i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"min-w-[48px] w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center overflow-hidden",children:i.jsx("span",{className:"text-purple-600 font-semibold text-center",children:t.name.split(" ").map(n=>n[0]).join("")})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium truncate",children:t.name}),i.jsx("p",{className:"text-sm text-purple-600",children:t.role}),i.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description})]})]})})},t.id))})]}),i.jsx(Be,{value:"support",className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Comment nous aider ?"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Plusieurs fa√ßons s'offrent √† vous pour soutenir notre association et contribuer √† la pr√©servation et l'animation de ce lieu historique de Nantes."}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsxs("div",{className:"border-l-4 border-red-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(Nn,{className:"h-5 w-5 mr-2 text-red-500"}),"Faire un don"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Soutenez financi√®rement nos actions de pr√©servation et de valorisation du patrimoine."}),i.jsxs(J,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>e("/donate"),children:[i.jsx(Nn,{className:"h-4 w-4 mr-2 text-red-500"}),"Acc√©der √† la page de don"]})]}),i.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsx(ym,{className:"h-5 w-5 mr-2 text-blue-500"}),"Devenir membre"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Rejoignez notre √©quipe de b√©n√©voles et participez activement √† nos projets. Contactez-nous √† ",i.jsx("a",{href:`mailto:${nr.contactEmail}`,className:"text-blue-600 hover:underline",children:nr.contactEmail}),"."]})]}),i.jsxs("div",{className:"border-l-4 border-green-500 pl-4 py-2",children:[i.jsxs("h3",{className:"font-medium flex items-center",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-2 text-green-500",children:[i.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),i.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Proposer une id√©e"]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Vous avez des id√©es pour am√©liorer notre √©v√©nement annuel ou pour d'autres projets ? Contactez-nous √† ",i.jsx("a",{href:`mailto:${nr.contactEmail}`,className:"text-blue-600 hover:underline",children:nr.contactEmail})]})]})]})]})})]})]}),i.jsx(Zn,{})]})},vA=()=>{const e=yt();return p.useEffect(()=>{z.trackPageView("/donate","Faire un don"),z.trackDonationPageOpen("app")},[]),i.jsxs("div",{className:"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden",children:[i.jsxs("div",{className:"max-w-screen-lg mx-auto",children:[i.jsxs("header",{className:"mb-2 flex items-center justify-between",children:[i.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>{z.trackDonationInteraction(ee.DONATION_CANCEL,{method:"helloasso",reason:"back_click"}),e("/map")},children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#ff7a45]",children:"Faire un don"}),i.jsx(ua,{title:"Faire un don au Collectif √éle Feydeau",text:"Soutenez les actions du Collectif √éle Feydeau pour la pr√©servation du patrimoine nantais!"})]}),i.jsx(je,{className:"mb-6",children:i.jsx(Je,{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:i.jsx("iframe",{id:"haWidget",title:"Formulaire de don HelloAsso",scrolling:"auto",src:"https://www.helloasso.com/associations/collectif-feydeau/formulaires/1/widget",style:{width:"100%",height:"750px",border:"none"},onLoad:()=>z.trackDonationInteraction(ee.DONATION_START,{method:"helloasso",widget_loaded:!0})})})})}),i.jsxs("div",{className:"text-center text-sm text-gray-600",children:[i.jsx("p",{children:"Pour toute question concernant les dons, contactez-nous √† :"}),i.jsx("p",{className:"font-medium",children:i.jsx("a",{href:"mailto:collectif.ile.feydeau@gmail.com",className:"text-blue-600 hover:underline",children:"collectif.ile.feydeau@gmail.com"})})]})]}),i.jsx(Zn,{})]})},bA=()=>{const e=kn();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},wA=({onComplete:e,isFirstVisit:t})=>{const[n,r]=p.useState(!1);yt(),p.useEffect(()=>{const o=setTimeout(()=>{r(!0),setTimeout(()=>{e()},300)},2e3);return()=>clearTimeout(o)},[e]);const s={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.8,ease:"easeOut"}},exit:{opacity:0,scale:1.1,transition:{duration:.3,ease:"easeIn"}}};return i.jsx(be.div,{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-blue-50 to-blue-100 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:i.jsxs(be.div,{className:"flex flex-col items-center",variants:s,initial:"hidden",animate:"visible",exit:"exit",children:[i.jsx(be.h1,{className:"text-2xl font-bold text-[#4a5d94] mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:"1 Hall 1 Artiste 2025"}),i.jsx(be.img,{src:pt("/Logo.png"),alt:"Collectif Feydeau Logo",className:"w-48 h-48 object-contain mb-6"}),i.jsx(be.h2,{className:"text-xl font-semibold text-[#4a5d94] mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:"Collectif Feydeau"}),i.jsx(be.p,{className:"text-sm text-gray-600 text-center max-w-xs px-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:t?"Bienvenue dans l'application du Collectif √éle Feydeau":"D√©couvrez le patrimoine historique de l'√éle Feydeau"})]})})},Kt=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Kt.displayName="Input";var SA="Label",eg=p.forwardRef((e,t)=>i.jsx(Ke.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eg.displayName=SA;var tg=eg;const jA=Zi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ve=p.forwardRef(({className:e,...t},n)=>i.jsx(tg,{ref:n,className:se(jA(),e),...t}));Ve.displayName=tg.displayName;const gt=Xe("ImportExportService"),ng="1.0.0",EA=()=>{gt.info("Exportation de toutes les donn√©es");try{const{events:e,locations:t}=tt.getState(),n={events:e,locations:t,exportDate:new Date().toISOString(),version:ng},r=JSON.stringify(n,null,2);return gt.info(`Exportation r√©ussie: ${e.length} √©v√©nements et ${t.length} lieux`),r}catch(e){throw gt.error("Erreur lors de l'exportation des donn√©es",e),new Error("Erreur lors de l'exportation des donn√©es")}},NA=()=>{gt.info("Exportation des √©v√©nements");try{const{events:e}=tt.getState(),t={events:e,exportDate:new Date().toISOString(),version:ng},n=JSON.stringify(t,null,2);return gt.info(`Exportation r√©ussie: ${e.length} √©v√©nements`),n}catch(e){throw gt.error("Erreur lors de l'exportation des √©v√©nements",e),new Error("Erreur lors de l'exportation des √©v√©nements")}},CA=()=>{gt.info("Exportation des √©v√©nements au format CSV");try{const{events:e}=tt.getState(),t=["id","title","artistName","type","artistBio","time","days","locationName"],n=e.map(s=>[s.id,`"${s.title.replace(/"/g,'""')}"`,`"${s.artistName.replace(/"/g,'""')}"`,s.type,`"${s.artistBio.replace(/"/g,'""')}"`,`"${s.time.replace(/"/g,'""')}"`,`"${s.days.join(",")}"`,`"${s.locationName.replace(/"/g,'""')}"`].join(",")),r=[t.join(","),...n].join(`
`);return gt.info(`Exportation CSV r√©ussie: ${e.length} √©v√©nements`),r}catch(e){throw gt.error("Erreur lors de l'exportation des √©v√©nements au format CSV",e),new Error("Erreur lors de l'exportation des √©v√©nements au format CSV")}},IA=e=>{gt.info("Importation de donn√©es depuis JSON");try{const t=JSON.parse(e),n=[];let r=0,s=0;if(!t)return{success:!1,message:"Donn√©es d'importation invalides",errors:["Format JSON invalide"]};if(t.locations&&Array.isArray(t.locations)){gt.info(`Tentative d'importation de ${t.locations.length} lieux`);for(const o of t.locations){const l=Uo(o);if(l.isValid){const c=tt.addLocation(o);c.success?s++:c.error&&n.push(`Erreur lors de l'importation du lieu ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation √©chou√©e pour le lieu ${o.id||"sans ID"}: ${c}`)}}}if(t.events&&Array.isArray(t.events)){gt.info(`Tentative d'importation de ${t.events.length} √©v√©nements`);for(const o of t.events){const l=Ri(o);if(l.isValid){const c=tt.addEvent(o);c.success?r++:c.error&&n.push(`Erreur lors de l'importation de l'√©v√©nement ${o.id||"sans ID"}: ${c.error}`)}else{const c=l.errors.map(d=>`${d.field}: ${d.message}`).join(", ");n.push(`Validation √©chou√©e pour l'√©v√©nement ${o.id||"sans ID"}: ${c}`)}}}let a="";return s>0&&(a+=`${s} lieu(x) import√©(s). `),r>0&&(a+=`${r} √©v√©nement(s) import√©(s).`),s===0&&r===0&&(a="Aucune donn√©e import√©e."),tt.saveToLocalStorage(),{success:r>0||s>0,message:a,importedEvents:r,importedLocations:s,errors:n.length>0?n:void 0}}catch(t){return gt.error("Erreur lors de l'importation des donn√©es",t),{success:!1,message:"Erreur lors de l'importation des donn√©es",errors:[t.message]}}},kA=e=>{gt.info("Importation d'√©v√©nements depuis CSV");try{const t=e.split(`
`).filter(d=>d.trim()!=="");if(t.length<2)return{success:!1,message:"Le fichier CSV ne contient pas suffisamment de donn√©es",errors:["Format CSV invalide"]};const n=t[0].split(","),s=["id","title","artistName","type","locationName"].filter(d=>!n.includes(d));if(s.length>0)return{success:!1,message:`En-t√™tes manquants dans le fichier CSV: ${s.join(", ")}`,errors:[`En-t√™tes manquants: ${s.join(", ")}`]};const a=d=>{const u=[];let h="",m=!1;for(let f=0;f<d.length;f++){const x=d[f];x==='"'?m&&f+1<d.length&&d[f+1]==='"'?(h+='"',f++):m=!m:x===","&&!m?(u.push(h),h=""):h+=x}return u.push(h),u},o=[],l=[];for(let d=1;d<t.length;d++)try{const u=a(t[d]),h={};for(let f=0;f<n.length;f++)if(f<u.length){const x=n[f];let g=u[f];x==="x"||x==="y"?h[x]=parseFloat(g):x==="days"?h[x]=g.split(",").map(y=>y.trim()):h[x]=g}const m=Ri(h);if(m.isValid)o.push(h);else{const f=m.errors.map(x=>`${x.field}: ${x.message}`).join(", ");l.push(`Ligne ${d+1}: Validation √©chou√©e - ${f}`)}}catch(u){l.push(`Erreur lors du traitement de la ligne ${d+1}: ${u.message}`)}let c=0;for(const d of o){const u=tt.addEvent(d);u.success?c++:u.error&&l.push(`Erreur lors de l'importation de l'√©v√©nement ${d.id}: ${u.error}`)}return tt.saveToLocalStorage(),{success:c>0,message:`${c} √©v√©nement(s) import√©(s) sur ${o.length} √©v√©nements valides.`,importedEvents:c,errors:l.length>0?l:void 0}}catch(t){return gt.error("Erreur lors de l'importation des √©v√©nements depuis CSV",t),{success:!1,message:"Erreur lors de l'importation des √©v√©nements depuis CSV",errors:[t.message]}}},AA=()=>{const e=F.useRef(null),t=F.useRef(null),n=()=>{try{const c=EA();l(c,`feydeau-export-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation",c)}},r=()=>{try{const c=NA();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.json`,"application/json")}catch(c){console.error("Erreur d'exportation des √©v√©nements",c)}},s=()=>{try{const c=CA();l(c,`feydeau-events-${new Date().toISOString().split("T")[0]}.csv`,"text/csv;charset=utf-8")}catch(c){console.error("Erreur d'exportation des √©v√©nements au format CSV",c)}},a=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=IA(x);g.success?console.log("Importation r√©ussie:",g.message):(console.error("Erreurs lors de l'importation:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation:",g.errors))}catch(x){console.error("Erreur d'importation des donn√©es",x)}e.current&&(e.current.value="")},u.readAsText(d)},o=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(!d)return;const u=new FileReader;u.onload=m=>{var f;try{const x=(f=m.target)==null?void 0:f.result,g=kA(x);g.success?console.log("Importation CSV r√©ussie:",g.message):(console.error("Erreurs lors de l'importation CSV:",g.message),g.errors&&g.errors.length>0&&console.error("Erreurs d'importation CSV:",g.errors))}catch(x){console.error("Erreur d'importation CSV",x)}t.current&&(t.current.value="")},u.readAsText(d)},l=(c,d,u)=>{const h=new Blob([c],{type:u}),m=URL.createObjectURL(h),f=document.createElement("a");f.href=m,f.download=d,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m)};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Import/Export de donn√©es"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Exportation"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(J,{onClick:n,children:"Exporter toutes les donn√©es"}),i.jsx(J,{onClick:r,children:"Exporter les √©v√©nements"}),i.jsx(J,{onClick:s,children:"Exporter les √©v√©nements (CSV)"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-md font-medium",children:"Importation"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{children:[i.jsx(J,{onClick:()=>{var c;return(c=e.current)==null?void 0:c.click()},children:"Importer depuis JSON"}),i.jsx("input",{type:"file",ref:e,onChange:a,accept:".json",className:"hidden"})]}),i.jsxs("div",{children:[i.jsx(J,{onClick:()=>{var c;return(c=t.current)==null?void 0:c.click()},children:"Importer √©v√©nements depuis CSV"}),i.jsx("input",{type:"file",ref:t,onChange:o,accept:".csv",className:"hidden"})]})]})]})]})},Oi=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Oi.displayName="Textarea";const Ds=qx,Rs=Hx,Xr=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(vm,{ref:r,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx($x,{asChild:!0,children:i.jsx(nl,{className:"h-4 w-4 opacity-50"})})]}));Xr.displayName=vm.displayName;const rg=p.forwardRef(({className:e,...t},n)=>i.jsx(bm,{ref:n,className:se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(fm,{className:"h-4 w-4"})}));rg.displayName=bm.displayName;const sg=p.forwardRef(({className:e,...t},n)=>i.jsx(wm,{ref:n,className:se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(nl,{className:"h-4 w-4"})}));sg.displayName=wm.displayName;const Qr=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(zx,{children:i.jsxs(Sm,{ref:s,className:se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(rg,{}),i.jsx(Bx,{className:se("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(sg,{})]})}));Qr.displayName=Sm.displayName;const TA=p.forwardRef(({className:e,...t},n)=>i.jsx(jm,{ref:n,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));TA.displayName=jm.displayName;const pr=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Em,{ref:r,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Vx,{children:i.jsx(Gi,{className:"h-4 w-4"})})}),i.jsx(Ux,{children:t})]}));pr.displayName=Em.displayName;const PA=p.forwardRef(({className:e,...t},n)=>i.jsx(Nm,{ref:n,className:se("-mx-1 my-1 h-px bg-muted",e),...t}));PA.displayName=Nm.displayName;var ic="Checkbox",[_A,U2]=Zr(ic),[MA,DA]=_A(ic),ig=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,f]=p.useState(null),x=et(t,w=>f(w)),g=p.useRef(!1),y=m?u||!!m.closest("form"):!0,[S=!1,v]=Hi({prop:s,defaultProp:a,onChange:d}),b=p.useRef(S);return p.useEffect(()=>{const w=m==null?void 0:m.form;if(w){const A=()=>v(b.current);return w.addEventListener("reset",A),()=>w.removeEventListener("reset",A)}},[m,v]),i.jsxs(MA,{scope:n,state:S,disabled:l,children:[i.jsx(Ke.button,{type:"button",role:"checkbox","aria-checked":Wn(S)?"mixed":S,"aria-required":o,"data-state":lg(S),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:me(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:me(e.onClick,w=>{v(A=>Wn(A)?!0:!A),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&i.jsx(RA,{control:m,bubbles:!g.current,name:r,value:c,checked:S,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Wn(a)?!1:a})]})});ig.displayName=ic;var ag="CheckboxIndicator",og=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=DA(ag,n);return i.jsx(pn,{present:r||Wn(a.state)||a.state===!0,children:i.jsx(Ke.span,{"data-state":lg(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});og.displayName=ag;var RA=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...a}=e,o=p.useRef(null),l=Cm(n),c=Im(t);p.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&f){const x=new Event("click",{bubbles:r});u.indeterminate=Wn(n),f.call(u,Wn(n)?!1:n),u.dispatchEvent(x)}},[l,n,r]);const d=p.useRef(Wn(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wn(e){return e==="indeterminate"}function lg(e){return Wn(e)?"indeterminate":e?"checked":"unchecked"}var cg=ig,OA=og;const Ho=p.forwardRef(({className:e,...t},n)=>i.jsx(cg,{ref:n,className:se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(OA,{className:se("flex items-center justify-center text-current"),children:i.jsx(Gi,{className:"h-4 w-4"})})}));Ho.displayName=cg.displayName;const rt=[];for(let e=0;e<256;++e)rt.push((e+256).toString(16).slice(1));function LA(e,t=0){return(rt[e[t+0]]+rt[e[t+1]]+rt[e[t+2]]+rt[e[t+3]]+"-"+rt[e[t+4]]+rt[e[t+5]]+"-"+rt[e[t+6]]+rt[e[t+7]]+"-"+rt[e[t+8]]+rt[e[t+9]]+"-"+rt[e[t+10]]+rt[e[t+11]]+rt[e[t+12]]+rt[e[t+13]]+rt[e[t+14]]+rt[e[t+15]]).toLowerCase()}let so;const FA=new Uint8Array(16);function $A(){if(!so){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");so=crypto.getRandomValues.bind(crypto)}return so(FA)}const zA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hd={randomUUID:zA};function fd(e,t,n){var s;if(hd.randomUUID&&!t&&!e)return hd.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??$A();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,LA(r)}const io=Xe("EventForm");function BA({onSuccess:e,editingEvent:t}){var v,b;const{locations:n}=rc(),{addEvent:r,updateEvent:s}=ya(),[a,o]=p.useState(t||{id:fd(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),[l,c]=p.useState({}),[d,u]=p.useState(!1),[h,m]=p.useState({text:"",type:""}),f=w=>{const{name:A,value:C}=w.target;o(M=>({...M,[A]:C})),l[A]&&c(M=>{const _={...M};return delete _[A],_})},x=(w,A)=>{if(o(C=>({...C,[w]:A})),w==="locationId"){const C=n.find(M=>M.id===A);C&&o(M=>({...M,locationName:C.name}))}l[w]&&c(C=>{const M={...C};return delete M[w],M})},g=(w,A)=>{o(C=>{const M=C.days||[];let _;return A?_=[...M,w]:_=M.filter(k=>k!==w),{...C,days:_}}),l.days&&c(C=>{const M={...C};return delete M.days,M})},y=()=>{var A,C,M;const w={};return(A=a.title)!=null&&A.trim()||(w.title="Le titre est obligatoire"),(C=a.artistName)!=null&&C.trim()||(w.artistName="Le nom de l'artiste est obligatoire"),(M=a.description)!=null&&M.trim()||(w.description="La description est obligatoire"),a.locationId||(w.locationId="Veuillez s√©lectionner un lieu"),(!a.days||a.days.length===0)&&(w.days="Veuillez s√©lectionner au moins un jour"),c(w),Object.keys(w).length===0},S=async w=>{if(w.preventDefault(),!y()){m({text:"Veuillez corriger les erreurs dans le formulaire",type:"error"});return}u(!0),m({text:"",type:""});try{io.info(`${t?"Mise √† jour":"Cr√©ation"} d'un √©v√©nement`),io.debug("Donn√©es de l'√©v√©nement",a);const A=a;let C;t?C=s(A):C=r(A),C.success?(m({text:`√âv√©nement ${t?"mis √† jour":"cr√©√©"} avec succ√®s`,type:"success"}),t||o({id:fd(),title:"",artistName:"",type:"exposition",description:"",artistBio:"",time:"",days:[],locationId:"",locationName:""}),e&&e()):m({text:`Erreur: ${C.error}`,type:"error"})}catch(A){io.error("Erreur lors de la soumission du formulaire",A),m({text:`Une erreur est survenue: ${A}`,type:"error"})}finally{u(!1)}};return i.jsxs(je,{className:"w-full max-w-3xl mx-auto",children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:t?"Modifier un √©v√©nement":"Ajouter un nouvel √©v√©nement"})}),i.jsx(Je,{children:i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"title",children:"Titre de l'√©v√©nement *"}),i.jsx(Kt,{id:"title",name:"title",value:a.title||"",onChange:f,placeholder:"Titre de l'√©v√©nement",className:l.title?"border-red-500":""}),l.title&&i.jsx("p",{className:"text-red-500 text-sm",children:l.title})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"artistName",children:"Nom de l'artiste *"}),i.jsx(Kt,{id:"artistName",name:"artistName",value:a.artistName||"",onChange:f,placeholder:"Nom de l'artiste",className:l.artistName?"border-red-500":""}),l.artistName&&i.jsx("p",{className:"text-red-500 text-sm",children:l.artistName})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"type",children:"Type d'√©v√©nement *"}),i.jsxs(Ds,{value:a.type,onValueChange:w=>x("type",w),children:[i.jsx(Xr,{className:l.type?"border-red-500":"",children:i.jsx(Rs,{placeholder:"S√©lectionner un type"})}),i.jsxs(Qr,{children:[i.jsx(pr,{value:"exposition",children:"Exposition"}),i.jsx(pr,{value:"concert",children:"Concert"})]})]}),l.type&&i.jsx("p",{className:"text-red-500 text-sm",children:l.type})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"description",children:"Description *"}),i.jsx(Oi,{id:"description",name:"description",value:a.description||"",onChange:f,placeholder:"Description de l'√©v√©nement",className:`min-h-24 ${l.description?"border-red-500":""}`}),l.description&&i.jsx("p",{className:"text-red-500 text-sm",children:l.description})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"artistBio",children:"Biographie de l'artiste"}),i.jsx(Oi,{id:"artistBio",name:"artistBio",value:a.artistBio||"",onChange:f,placeholder:"Biographie de l'artiste",className:"min-h-24"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"time",children:"Horaires"}),i.jsx(Kt,{id:"time",name:"time",value:a.time||"",onChange:f,placeholder:"Ex: 10h00 - 18h00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{children:"Jours *"}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ho,{id:"samedi",checked:((v=a.days)==null?void 0:v.includes("samedi"))||!1,onCheckedChange:w=>g("samedi",w)}),i.jsx(Ve,{htmlFor:"samedi",className:"cursor-pointer",children:"Samedi"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ho,{id:"dimanche",checked:((b=a.days)==null?void 0:b.includes("dimanche"))||!1,onCheckedChange:w=>g("dimanche",w)}),i.jsx(Ve,{htmlFor:"dimanche",className:"cursor-pointer",children:"Dimanche"})]})]}),l.days&&i.jsx("p",{className:"text-red-500 text-sm",children:l.days})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"locationId",children:"Lieu *"}),i.jsxs(Ds,{value:a.locationId,onValueChange:w=>x("locationId",w),children:[i.jsx(Xr,{className:l.locationId?"border-red-500":"",children:i.jsx(Rs,{placeholder:"S√©lectionner un lieu"})}),i.jsx(Qr,{children:n.map(w=>i.jsx(pr,{value:w.id,children:w.name},w.id))})]}),l.locationId&&i.jsx("p",{className:"text-red-500 text-sm",children:l.locationId})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"image",children:"URL de l'image (optionnel)"}),i.jsx(Kt,{id:"image",name:"image",value:a.image||"",onChange:f,placeholder:"URL de l'image"})]}),i.jsxs(Zp,{className:"flex justify-between px-0",children:[i.jsx(J,{type:"submit",disabled:d,className:"bg-[#4a5d94] hover:bg-[#3a4d84]",children:d?"En cours...":t?"Mettre √† jour":"Ajouter l'√©v√©nement"}),h.text&&i.jsx("p",{className:`text-sm ${h.type==="error"?"text-red-500":"text-green-500"}`,children:h.text})]})]})})]})}const pd=Xe("AdminLogin"),VA="5321",UA=({onLogin:e})=>{const[t,n]=p.useState(""),[r,s]=p.useState(!1),[a,o]=p.useState(0),l=c=>{c.preventDefault(),t===VA?(pd.info("Connexion administrateur r√©ussie"),sessionStorage.setItem("adminAuthenticated","true"),e()):(pd.warn("Tentative de connexion administrateur √©chou√©e"),s(!0),o(a+1),n(""))};return i.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:i.jsxs(je,{className:"w-full max-w-md",children:[i.jsxs(Dt,{className:"space-y-1",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"bg-[#4a5d94] p-3 rounded-full",children:i.jsx(Gx,{className:"h-6 w-6 text-white"})})}),i.jsx(Rt,{className:"text-2xl text-center text-[#4a5d94]",children:"Acc√®s Administrateur"}),i.jsx(sc,{className:"text-center",children:"Veuillez entrer le mot de passe pour acc√©der √† l'interface d'administration"})]}),i.jsx(Je,{children:i.jsx("form",{onSubmit:l,children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"password",children:"Code PIN"}),i.jsx(Kt,{id:"password",type:"number",inputMode:"numeric",pattern:"[0-9]*",maxLength:4,value:t,onChange:c=>{c.target.value.length<=4&&(n(c.target.value),r&&s(!1))},className:`text-center text-2xl tracking-widest ${r?"border-red-500":""}`,placeholder:"____"}),r&&i.jsxs("p",{className:"text-sm text-red-500 text-center",children:["Code PIN incorrect. ",a>1?`${a} tentatives √©chou√©es.`:""]})]}),i.jsx(J,{type:"submit",className:"w-full bg-[#4a5d94]",children:"Se connecter"})]})})})]})})};function Xt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function wr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ug=6048e5,qA=864e5;let HA={};function va(){return HA}function Os(e,t){var l,c,d,u;const n=va(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Xt(e),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Li(e){return Os(e,{weekStartsOn:1})}function dg(e){const t=Xt(e),n=t.getFullYear(),r=wr(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Li(r),a=wr(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Li(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function gd(e){const t=Xt(e);return t.setHours(0,0,0,0),t}function xd(e){const t=Xt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function GA(e,t){const n=gd(e),r=gd(t),s=+n-xd(n),a=+r-xd(r);return Math.round((s-a)/qA)}function WA(e){const t=dg(e),n=wr(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Li(n)}function YA(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function KA(e){if(!YA(e)&&typeof e!="number")return!1;const t=Xt(e);return!isNaN(Number(t))}function XA(e){const t=Xt(e),n=wr(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const QA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JA=(e,t,n)=>{let r;const s=QA[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Fr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ZA={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nT={date:Fr({formats:ZA,defaultWidth:"full"}),time:Fr({formats:eT,defaultWidth:"full"}),dateTime:Fr({formats:tT,defaultWidth:"full"})},rT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sT=(e,t,n,r)=>rT[e];function cn(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const iT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},oT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dT=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},mT={ordinalNumber:dT,era:cn({values:iT,defaultWidth:"wide"}),quarter:cn({values:aT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cn({values:oT,defaultWidth:"wide"}),day:cn({values:lT,defaultWidth:"wide"}),dayPeriod:cn({values:cT,defaultWidth:"wide",formattingValues:uT,defaultFormattingWidth:"wide"})};function un(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?fT(l,h=>h.test(o)):hT(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function hT(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function fT(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function mg(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const pT=/^(\d+)(th|st|nd|rd)?/i,gT=/\d+/i,xT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yT={any:[/^b/i,/^(a|c)/i]},vT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bT={any:[/1/i,/2/i,/3/i,/4/i]},wT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ST={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ET={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},IT={ordinalNumber:mg({matchPattern:pT,parsePattern:gT,valueCallback:e=>parseInt(e,10)}),era:un({matchPatterns:xT,defaultMatchWidth:"wide",parsePatterns:yT,defaultParseWidth:"any"}),quarter:un({matchPatterns:vT,defaultMatchWidth:"wide",parsePatterns:bT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:un({matchPatterns:wT,defaultMatchWidth:"wide",parsePatterns:ST,defaultParseWidth:"any"}),day:un({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:ET,defaultParseWidth:"any"}),dayPeriod:un({matchPatterns:NT,defaultMatchWidth:"any",parsePatterns:CT,defaultParseWidth:"any"})},kT={code:"en-US",formatDistance:JA,formatLong:nT,formatRelative:sT,localize:mT,match:IT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AT(e){const t=Xt(e);return GA(t,XA(t))+1}function TT(e){const t=Xt(e),n=+Li(t)-+WA(t);return Math.round(n/ug)+1}function hg(e,t){var u,h,m,f;const n=Xt(e),r=n.getFullYear(),s=va(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=wr(e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Os(o,t),c=wr(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Os(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function PT(e,t){var l,c,d,u;const n=va(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=hg(e,t),a=wr(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Os(a,t)}function _T(e,t){const n=Xt(e),r=+Os(n,t)-+PT(n,t);return Math.round(r/ug)+1}function Ae(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Dn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ae(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ae(n+1,2)},d(e,t){return Ae(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ae(e.getHours()%12||12,t.length)},H(e,t){return Ae(e.getHours(),t.length)},m(e,t){return Ae(e.getMinutes(),t.length)},s(e,t){return Ae(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ae(s,t.length)}},Tr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yd={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Dn.y(e,t)},Y:function(e,t,n,r){const s=hg(e,r),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return Ae(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ae(a,t.length)},R:function(e,t){const n=dg(e);return Ae(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ae(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ae(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ae(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Dn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ae(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=_T(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ae(s,t.length)},I:function(e,t,n){const r=TT(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ae(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Dn.d(e,t)},D:function(e,t,n){const r=AT(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ae(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ae(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ae(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ae(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Tr.noon:r===0?s=Tr.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Tr.evening:r>=12?s=Tr.afternoon:r>=4?s=Tr.morning:s=Tr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Dn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ae(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ae(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Dn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Dn.s(e,t)},S:function(e,t){return Dn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return bd(r);case"XXXX":case"XX":return ir(r);case"XXXXX":case"XXX":default:return ir(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return bd(r);case"xxxx":case"xx":return ir(r);case"xxxxx":case"xxx":default:return ir(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vd(r,":");case"OOOO":default:return"GMT"+ir(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vd(r,":");case"zzzz":default:return"GMT"+ir(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Ae(r,t.length)},T:function(e,t,n){const r=e.getTime();return Ae(r,t.length)}};function vd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+Ae(a,2)}function bd(e,t){return e%60===0?(e>0?"-":"+")+Ae(Math.abs(e)/60,2):ir(e,t)}function ir(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ae(Math.trunc(r/60),2),a=Ae(r%60,2);return n+s+t+a}const wd=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},fg=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},MT=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return wd(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",wd(r,t)).replace("{{time}}",fg(s,t))},DT={p:fg,P:MT},RT=/^D+$/,OT=/^Y+$/,LT=["D","DD","YY","YYYY"];function FT(e){return RT.test(e)}function $T(e){return OT.test(e)}function zT(e,t,n){const r=BT(e,t,n);if(console.warn(r),LT.includes(e))throw new RangeError(r)}function BT(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qT=/^'([^]*?)'?$/,HT=/''/g,GT=/[a-zA-Z]/;function ba(e,t,n){var u,h,m,f,x,g,y,S;const r=va(),s=(n==null?void 0:n.locale)??r.locale??kT,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((S=(y=r.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??0,l=Xt(e);if(!KA(l))throw new RangeError("Invalid time value");let c=t.match(UT).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=DT[b];return w(v,s.formatLong)}return v}).join("").match(VT).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:WT(v)};if(yd[b])return{isToken:!0,value:v};if(b.match(GT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&$T(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&FT(b))&&zT(b,t,String(e));const w=yd[b[0]];return w(l,b,s.localize,d)}).join("")}function WT(e){const t=e.match(qT);return t?t[1].replace(HT,"'"):e}const YT={lessThanXSeconds:{one:"moins d‚Äôune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d‚Äôune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d‚Äôun an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu‚Äôun an",other:"presque {{count}} ans"}},KT=(e,t,n)=>{let r;const s=YT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},XT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},QT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},JT={full:"{{date}} '√†' {{time}}",long:"{{date}} '√†' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZT={date:Fr({formats:XT,defaultWidth:"full"}),time:Fr({formats:QT,defaultWidth:"full"}),dateTime:Fr({formats:JT,defaultWidth:"full"})},eP={lastWeek:"eeee 'dernier √†' p",yesterday:"'hier √†' p",today:"'aujourd‚Äôhui √†' p",tomorrow:"'demain √†' p'",nextWeek:"eeee 'prochain √†' p",other:"P"},tP=(e,t,n,r)=>eP[e],nP={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J√©sus-Christ","apr√®s J√©sus-Christ"]},rP={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2√®me trim.","3√®me trim.","4√®me trim."],wide:["1er trimestre","2√®me trimestre","3√®me trimestre","4√®me trimestre"]},sP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f√©vr.","mars","avr.","mai","juin","juil.","ao√ªt","sept.","oct.","nov.","d√©c."],wide:["janvier","f√©vrier","mars","avril","mai","juin","juillet","ao√ªt","septembre","octobre","novembre","d√©cembre"]},iP={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},aP={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr√®s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l‚Äôapr√®s-midi",evening:"du soir",night:"du matin"}},oP=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"√®re":"er":a="√®me",n+a},lP=["MMM","MMMM"],cP={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&lP.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:oP,era:cn({values:nP,defaultWidth:"wide"}),quarter:cn({values:rP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cn({values:sP,defaultWidth:"wide"}),day:cn({values:iP,defaultWidth:"wide"}),dayPeriod:cn({values:aP,defaultWidth:"wide"})},uP=/^(\d+)(i√®me|√®re|√®me|er|e)?/i,dP=/\d+/i,mP={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J√©sus-Christ|apr√®s J√©sus-Christ)/i},hP={any:[/^av/i,/^ap/i]},fP={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|√®me|e)? trim\.?/i,wide:/^[1234](er|√®me|e)? trimestre/i},pP={any:[/1/i,/2/i,/3/i,/4/i]},gP={narrow:/^[jfmasond]/i,abbreviated:/^(janv|f√©vr|mars|avr|mai|juin|juill|juil|ao√ªt|sept|oct|nov|d√©c)\.?/i,wide:/^(janvier|f√©vrier|mars|avril|mai|juin|juillet|ao√ªt|septembre|octobre|novembre|d√©cembre)/i},xP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},yP={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},vP={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},bP={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr√®s[-\s]midi|du soir|de la nuit)/i},wP={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},SP={ordinalNumber:mg({matchPattern:uP,parsePattern:dP,valueCallback:e=>parseInt(e)}),era:un({matchPatterns:mP,defaultMatchWidth:"wide",parsePatterns:hP,defaultParseWidth:"any"}),quarter:un({matchPatterns:fP,defaultMatchWidth:"wide",parsePatterns:pP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:un({matchPatterns:gP,defaultMatchWidth:"wide",parsePatterns:xP,defaultParseWidth:"any"}),day:un({matchPatterns:yP,defaultMatchWidth:"wide",parsePatterns:vP,defaultParseWidth:"any"}),dayPeriod:un({matchPatterns:bP,defaultMatchWidth:"any",parsePatterns:wP,defaultParseWidth:"any"})},wa={code:"fr",formatDistance:KT,formatLong:ZT,formatRelative:tP,localize:cP,match:SP,options:{weekStartsOn:1,firstWeekContainsDate:4}},jP=({entryId:e,className:t})=>{const[n,r]=p.useState(null),[s,a]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const l=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${e}.json`);if(l.ok){const c=await l.json();r((c==null?void 0:c.likes)||0)}else r(0)}catch(l){console.warn(`Erreur lors de la r√©cup√©ration des likes pour ${e}:`,l),r(0)}finally{a(!1)}})()},[e]),s?i.jsxs("div",{className:`flex items-center gap-1 text-gray-400 ${t}`,children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"..."})]}):i.jsxs("div",{className:`flex items-center gap-1 ${n&&n>0?"text-red-500":"text-gray-400"} ${t}`,children:[i.jsx(Nn,{className:`h-4 w-4 ${n&&n>0?"fill-current":""}`}),i.jsx("span",{className:"text-sm font-medium",children:n||0})]})},li=Xe("CommunityManagement");function EP(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[s,a]=p.useState(null);p.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const u=await da();li.info(`${u.length} contributions charg√©es`),t(u)}catch(u){li.error("Erreur lors du chargement des contributions",u),jt({title:"Erreur",description:"Impossible de charger les contributions",variant:"destructive"})}finally{r(!1)}},l=async u=>{try{a(u),li.info(`Suppression de la contribution ${u}`),await uE(u),t(h=>h.filter(m=>m.id!==u)),jt({title:"Succ√®s",description:"Contribution supprim√©e avec succ√®s",variant:"default"})}catch(h){li.error(`Erreur lors de la suppression de la contribution ${u}`,h),jt({title:"Erreur",description:"Impossible de supprimer la contribution",variant:"destructive"})}finally{a(null)}},c=u=>{try{if(!u)return"Date inconnue";const h=new Date(u);return isNaN(h.getTime())?"Date invalide":ba(h,"dd/MM/yyyy HH:mm",{locale:wa})}catch{return"Date invalide"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Gestion des contributions communautaires"}),i.jsxs(J,{onClick:o,variant:"outline",size:"sm",disabled:n,children:[n?i.jsx(Ia,{className:"h-4 w-4 animate-spin mr-2"}):null,"Actualiser"]})]}),i.jsxs(ss,{defaultValue:"all",children:[i.jsxs(Cr,{className:"mb-4 flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(ze,{value:"all",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Toutes"}),i.jsx(ze,{value:"photos",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Photos"}),i.jsx(ze,{value:"testimonials",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"T√©moignages"}),i.jsx(ze,{value:"pending",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"En attente"}),i.jsx(ze,{value:"archived",className:"text-xs sm:text-sm px-2 py-1 flex-shrink-0",children:"Archiv√©es"})]}),i.jsx(Be,{value:"all",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(Be,{value:"photos",children:d(e.filter(u=>{var h;return u.type==="photo"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(Be,{value:"testimonials",children:d(e.filter(u=>{var h;return u.type==="testimonial"&&((h=u.moderation)==null?void 0:h.status)!=="rejected"}),s,l)}),i.jsx(Be,{value:"pending",children:d(e.filter(u=>{var h;return((h=u.moderation)==null?void 0:h.status)==="pending"}),s,l)}),i.jsx(Be,{value:"archived",children:i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Fonction de restauration supprim√©e avec le nouveau syst√®me Firebase"})})]})]});function d(u,h,m){return n?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(Ia,{className:"h-8 w-8 animate-spin text-gray-500"})}):u.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Aucune contribution trouv√©e"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(f=>{var x,g;return i.jsx(je,{className:"overflow-hidden",children:i.jsxs(Je,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:f.displayName||"Anonyme"}),i.jsxs("p",{className:"text-sm text-gray-500",children:[f.type==="photo"?"Photo":"T√©moignage"," ‚Ä¢ ",c(f.timestamp||f.createdAt)]}),i.jsx(jP,{entryId:f.id,className:"mt-1"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[((x=f.moderation)==null?void 0:x.status)==="approved"?i.jsx(Wx,{className:"h-5 w-5 text-green-500"}):((g=f.moderation)==null?void 0:g.status)==="rejected"?i.jsx(Yx,{className:"h-5 w-5 text-red-500"}):i.jsx("div",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"En attente"}),i.jsx(J,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>m(f.id),disabled:h===f.id,children:h===f.id?i.jsx(Ia,{className:"h-4 w-4 animate-spin"}):i.jsx(Kx,{className:"h-4 w-4"})})]})]}),f.type==="photo"&&f.imageUrl&&i.jsx("div",{className:"mt-3 relative pt-[56.25%]",children:i.jsx("img",{src:f.imageUrl,alt:`Contribution de ${f.displayName}`,className:"absolute top-0 left-0 w-full h-full object-cover rounded-md",onError:y=>{const S=typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"";y.currentTarget.src=`${S}/images/placeholder-image.jpg`}})}),f.type==="testimonial"&&i.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:f.content&&f.content.trim()?i.jsx("p",{className:"text-gray-700",children:f.content.trim()}):f.description&&f.description.trim()?i.jsx("p",{className:"text-gray-700",children:f.description.trim()}):i.jsx("p",{className:"text-gray-500 italic",children:"Contenu non disponible"})}),i.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[i.jsxs("p",{children:["ID: ",f.id]}),f.eventId&&i.jsxs("p",{children:["√âv√©nement: ",f.eventId]}),f.locationId&&i.jsxs("p",{children:["Lieu: ",f.locationId]})]})]})},f.id)})})}}const NP=()=>{const[e,t]=p.useState("test-entry-1"),[n,r]=p.useState(null),[s,a]=p.useState(null),[o,l]=p.useState("user-1"),{liked:c,total:d,loading:u,error:h,toggleLike:m,refresh:f}=Qp(e),x=async()=>{console.log("üîÑ Test de connexion Firebase...");const v=await dA();r(v)},g=async()=>{console.log("üîÑ R√©cup√©ration des stats...");const v=await Xp();a(v)},y=()=>{const v=`test-entry-${Date.now()}`;t(v),console.log(`üîÑ Changement d'entr√©e test vers: ${v}`)},S=()=>{const v=["user-1","user-2","user-3","user-4"],b=v.indexOf(o),w=v[(b+1)%v.length];l(w);const A=`session_${Date.now()}_${w}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("user-session-id",A),console.log(`üë§ Changement d'utilisateur vers: ${w} (${A})`),setTimeout(()=>f(),100)};return i.jsxs("div",{style:{padding:"20px",border:"2px solid #007bff",borderRadius:"8px",margin:"20px",backgroundColor:"#f8f9fa"},children:[i.jsx("h2",{children:"üß™ Test Syst√®me de Likes - √âtape 1"}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"1. Test de connexion Firebase"}),i.jsx("button",{onClick:x,style:{marginRight:"10px"},children:"Tester la connexion"}),i.jsxs("span",{children:["Status: ",n===null?"‚ùì Non test√©":n?"‚úÖ Connect√©":"‚ùå Erreur"]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"2. Test du hook useLikes"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Utilisateur actuel:"})," ",i.jsx("span",{style:{color:"#007bff",fontWeight:"bold"},children:o})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entry ID:"})," ",e]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Loading:"})," ",u?"‚è≥ Chargement...":"‚úÖ Charg√©"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Liked:"})," ",c?"‚ù§Ô∏è Lik√©":"ü§ç Pas lik√©"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Total:"})," ",d," likes"]}),h&&i.jsxs("p",{style:{color:"red"},children:[i.jsx("strong",{children:"Erreur:"})," ",h]}),i.jsxs("div",{style:{marginTop:"10px"},children:[i.jsx("button",{onClick:m,disabled:u,style:{marginRight:"10px"},children:c?"üíî Retirer like":"‚ù§Ô∏è Ajouter like"}),i.jsx("button",{onClick:f,disabled:u,style:{marginRight:"10px"},children:"üîÑ Rafra√Æchir"}),i.jsx("button",{onClick:y,style:{marginRight:"10px"},children:"üÜï Nouvelle entr√©e test"}),i.jsx("button",{onClick:S,style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px"},children:"üë§ Changer d'utilisateur"})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h3",{children:"3. Test des statistiques globales"}),i.jsx("button",{onClick:g,style:{marginRight:"10px"},children:"R√©cup√©rer les stats"}),s&&i.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Total likes:"})," ",s.total]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Likes aujourd'hui:"})," ",s.today]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Entr√©e la plus populaire:"})," ",s.topEntry||"Aucune"]})]})]}),i.jsxs("div",{style:{backgroundColor:"#fff3cd",padding:"15px",borderRadius:"4px",border:"1px solid #ffeaa7"},children:[i.jsx("h4",{children:"üìã Checklist de validation √âtape 1:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"‚úÖ Types TypeScript cr√©√©s"}),i.jsx("li",{children:"‚úÖ Service likesService.ts cr√©√©"}),i.jsx("li",{children:"‚úÖ Hook useLikes cr√©√©"}),i.jsx("li",{children:"üîÑ Test de connexion Firebase"}),i.jsx("li",{children:"üîÑ Test toggle like"}),i.jsx("li",{children:"üîÑ Test temps r√©el (ouvrir 2 onglets)"}),i.jsx("li",{children:"üîÑ Test persistance (rafra√Æchir la page)"})]}),i.jsx("p",{children:i.jsx("strong",{children:"Instructions:"})}),i.jsxs("ol",{children:[i.jsx("li",{children:'Cliquer sur "Tester la connexion" ‚Üí doit afficher ‚úÖ'}),i.jsx("li",{children:'Cliquer sur "‚ù§Ô∏è Ajouter like" ‚Üí compteur doit augmenter'}),i.jsxs("li",{children:[i.jsx("strong",{children:"üÜï Test multi-utilisateur :"}),` Cliquer sur "üë§ Changer d'utilisateur" ‚Üí maintenant vous pouvez liker √† nouveau !`]}),i.jsx("li",{children:"Ouvrir un 2√®me onglet ‚Üí les likes doivent se synchroniser"}),i.jsx("li",{children:"Rafra√Æchir la page ‚Üí les likes doivent persister"})]})]})]})},CP=()=>{const[e,t]=p.useState(null),[n,r]=p.useState(!0),[s,a]=p.useState(null),[o,l]=p.useState(null),c=async()=>{try{r(!0),a(null);const d=await Xp(),u=await da(),h=[];let m=0;for(const g of u)try{const y=await fetch(`https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app/likes-data/${g.id}.json`);if(y.ok){const S=await y.json(),v=(S==null?void 0:S.likes)||0;h.push({...g,likesCount:v}),m+=v}else h.push({...g,likesCount:0})}catch(y){console.warn(`Erreur lors de la r√©cup√©ration des likes pour ${g.id}:`,y),h.push({...g,likesCount:0})}const f=h.sort((g,y)=>y.likesCount-g.likesCount).slice(0,5),x=u.length>0?m/u.length:0;t({totalLikes:m,totalContributions:u.length,averageLikes:Math.round(x*10)/10,topContributions:f}),l(new Date)}catch(d){console.error("Erreur lors du chargement des statistiques:",d),a("Impossible de charger les statistiques")}finally{r(!1)}};return p.useEffect(()=>{c();const d=setInterval(()=>{console.log("üîÑ Mise √† jour automatique des statistiques likes"),c()},1e4);return()=>{console.log("üîá Arr√™t polling statistiques likes"),clearInterval(d)}},[]),n?i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2",children:[i.jsx(gs,{className:"h-5 w-5"}),"Statistiques des Likes"]})}),i.jsx(Je,{children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"ml-2",children:"Chargement des statistiques..."})]})})]}):s?i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2 text-red-600",children:[i.jsx(gs,{className:"h-5 w-5"}),"Erreur"]})}),i.jsxs(Je,{children:[i.jsx("p",{className:"text-red-600 mb-4",children:s}),i.jsx(J,{onClick:c,variant:"outline",children:"R√©essayer"})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2",children:[i.jsx(gs,{className:"h-5 w-5 sm:h-6 sm:w-6"}),"Statistiques des Likes"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[o&&i.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Mis √† jour : ",o.toLocaleTimeString()]}),i.jsx(J,{onClick:c,variant:"outline",size:"sm",children:"üîÑ Actualiser"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(je,{children:i.jsx(Je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total des Likes"}),i.jsx("p",{className:"text-3xl font-bold text-red-500",children:(e==null?void 0:e.totalLikes)||0})]}),i.jsx(Nn,{className:"h-8 w-8 text-red-500"})]})})}),i.jsx(je,{children:i.jsx(Je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contributions"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(e==null?void 0:e.totalContributions)||0})]}),i.jsx(ym,{className:"h-8 w-8 text-blue-600"})]})})}),i.jsx(je,{children:i.jsx(Je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Moyenne par contribution"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:(e==null?void 0:e.averageLikes)||0})]}),i.jsx(yc,{className:"h-8 w-8 text-green-600"})]})})})]}),i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsxs(Rt,{className:"flex items-center gap-2",children:[i.jsx(yc,{className:"h-5 w-5"}),"Top 5 des Contributions les Plus Lik√©es"]})}),i.jsx(Je,{children:e!=null&&e.topContributions&&e.topContributions.length>0?i.jsx("div",{className:"space-y-4",children:e.topContributions.map((d,u)=>i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-lg gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[i.jsx("div",{className:"flex items-center justify-center w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-blue-100 text-blue-600 font-bold text-sm",children:u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:d.displayName}),i.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:d.description||d.content||"Sans description"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.type==="photo"?"üì∑ Photo":"üí¨ T√©moignage"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-red-500 font-bold self-end sm:self-center",children:[i.jsx(Nn,{className:"h-4 w-4 fill-current"}),i.jsx("span",{className:"text-lg",children:d.likesCount})]})]},d.id))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucune contribution avec des likes pour le moment"})})]}),i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-sm",children:"Informations Techniques"})}),i.jsx(Je,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs sm:text-sm",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Base de donn√©es :"})," Firebase Realtime Database"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Synchronisation :"})," Temps r√©el (likes: 5s, stats: 10s)"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Pr√©vention spam :"})," 1 like par session utilisateur"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Persistance :"})," Donn√©es sauvegard√©es automatiquement"]})]})]})})]})]})},Se=Xe("Admin");function IP(){Se.info("Initialisation du composant Admin");const e=yt(),{events:t}=Jp(),{locations:n}=rc(),{updateEvent:r,updateLocation:s}=ya(),[a,o]=p.useState([]),[l,c]=p.useState(null),[d,u]=p.useState({x:0,y:0}),[h,m]=p.useState(!1),[f,x]=p.useState(!1);p.useEffect(()=>{sessionStorage.getItem("adminAuthenticated")==="true"&&x(!0)},[]),p.useEffect(()=>{Se.info("Chargement initial des lieux"),Se.debug("Donn√©es de lieux charg√©es",n),o(n)},[n]);const g=M=>{Se.info(`S√©lection du lieu ${M}`),c(M);const _=a.find(k=>k.id===M);_&&u({x:_.x,y:_.y})},y=M=>{Se.info("Clic sur la carte");try{const _=Math.round(M.nativeEvent.offsetX),k=Math.round(M.nativeEvent.offsetY);Se.info(`Coordonn√©es du clic: x=${_}, y=${k}`),u({x:_,y:k}),m(!0),v()}catch(_){Se.error("Erreur lors du clic sur la carte",_)}},S=()=>{var M;Se.info("Demande de mise √† jour des coordonn√©es"),Se.debug("√âtat actuel",{activeLocation:l,coordinates:d,mapClicked:h});try{if(!l){Se.warn("Tentative de mise √† jour sans lieu s√©lectionn√©"),alert("Veuillez d'abord s√©lectionner un lieu");return}if(!h&&(!d.x||!d.y)){Se.warn("Tentative de mise √† jour avec des coordonn√©es invalides"),alert("Veuillez cliquer sur la carte pour d√©finir les nouvelles coordonn√©es");return}const _=a.map(N=>N.id===l?(Se.debug("Mise √† jour des coordonn√©es pour",{id:N.id,name:N.name,oldX:N.x,oldY:N.y,newX:d.x,newY:d.y}),{...N,x:d.x,y:d.y}):N);o(_),m(!1),Se.info("Mise √† jour des coordonn√©es via le service de donn√©es"),Se.debug("Nouvelles coordonn√©es",_);const k=n.find(N=>N.id===l);if(k){Se.info(`Mise √† jour des coordonn√©es dans le service de donn√©es pour ${k.name}`);const N={...k,x:d.x,y:d.y},T=s(N);if(T.success){Se.debug("Coordonn√©es mises √† jour dans le service de donn√©es",{id:N.id,name:N.name,oldX:k.x,oldY:k.y,newX:d.x,newY:d.y});const $=t.filter(H=>H.locationName===N.name);Se.info(`Mise √† jour de ${$.length} √©v√©nements associ√©s au lieu ${N.name}`),Se.info(`${$.length} √©v√©nements associ√©s au lieu ${N.name} h√©riteront automatiquement des nouvelles coordonn√©es`),Se.info(`Coordonn√©es mises √† jour pour ${N.name} et ${$.length} √©v√©nements associ√©s`)}else Se.error(`Erreur lors de la mise √† jour du lieu ${k.id}`,T.error)}else Se.warn(`Lieu avec ID ${l} non trouv√© dans la liste globale des lieux`);const P=(M=a.find(N=>N.id===l))==null?void 0:M.name;Se.info(`Confirmation de mise √† jour pour ${P}`),alert(`Coordonn√©es mises √† jour pour ${P}
X: ${d.x}, Y: ${d.y}

Les modifications ont √©t√© enregistr√©es avec succ√®s.`)}catch(_){Se.error("Erreur lors de la mise √† jour des coordonn√©es",_),alert(`Erreur lors de la mise √† jour des coordonn√©es: ${_}`)}},v=()=>{if(Se.info("Test des coordonn√©es sur la carte"),!l){Se.warn("Tentative de test sans lieu s√©lectionn√©"),alert("Veuillez d'abord s√©lectionner un lieu");return}const M=a.map(_=>{if(_.id===l){const k={..._,x:d.x,y:d.y};return Se.debug("Mise √† jour temporaire des coordonn√©es pour le test",{id:_.id,name:_.name,oldX:_.x,oldY:_.y,newX:d.x,newY:d.y}),k}return _});o(M),Se.info("Coordonn√©es de test appliqu√©es temporairement",d)},b=()=>{Se.info("Exportation des coordonn√©es");try{const M=JSON.stringify(a,null,2),_=new Blob([M],{type:"application/json"}),k=URL.createObjectURL(_),P=document.createElement("a");P.href=k,P.download="locations.json",document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(k),Se.info("Exportation des coordonn√©es r√©ussie")}catch(M){Se.error("Erreur lors de l'exportation des coordonn√©es",M),alert(`Erreur lors de l'exportation des coordonn√©es: ${M}`)}},w=()=>{x(!0),sessionStorage.setItem("adminAuthenticated","true")},A=()=>{localStorage.clear(),jt({title:"LocalStorage vid√©",description:"Toutes les donn√©es locales ont √©t√© effac√©es.",variant:"destructive"}),Se.info("LocalStorage vid√© par l'administrateur"),setTimeout(()=>window.location.reload(),1500)},C=()=>{localStorage.removeItem("hasSeenOnboarding"),jt({title:"Onboarding r√©initialis√©",description:"L'onboarding s'affichera au prochain chargement de l'application."}),Se.info("Onboarding r√©initialis√© par l'administrateur")};return f?i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(J,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs(ss,{defaultValue:"coordinates",className:"w-full",children:[i.jsxs(Cr,{className:"w-full flex flex-wrap justify-center gap-1 h-auto p-1",children:[i.jsx(ze,{value:"events",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"√âv√©nements"}),i.jsx(ze,{value:"locations",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Lieux"}),i.jsx(ze,{value:"community",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Contributions"}),i.jsx(ze,{value:"likes-stats",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"üìä Stats"}),i.jsx(ze,{value:"likes-test",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"üß™ Test"}),i.jsx(ze,{value:"import-export",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Import/Export"}),i.jsx(ze,{value:"reset",className:"text-xs md:text-sm px-2 py-1 flex-shrink-0",children:"Reset"})]}),i.jsx(Be,{value:"locations",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Gestion des coordonn√©es"})}),i.jsx(Je,{children:i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Lieux"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"S√©lectionnez un lieu pour modifier ses coordonn√©es"}),i.jsx("div",{className:"space-y-2",children:a.map(M=>i.jsx(J,{variant:l===M.id?"default":"outline",className:`w-full justify-start ${l===M.id?"bg-[#4a5d94]":""}`,onClick:()=>g(M.id),children:M.name},M.id))})]}),l&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Coordonn√©es"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Modifiez les coordonn√©es du lieu s√©lectionn√©"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[i.jsxs("div",{children:[i.jsx(Ve,{htmlFor:"new-x",children:"X"}),i.jsx(Kt,{id:"new-x",type:"number",value:d.x,onChange:M=>u({...d,x:M.target.value?parseInt(M.target.value):0})})]}),i.jsxs("div",{children:[i.jsx(Ve,{htmlFor:"new-y",children:"Y"}),i.jsx(Kt,{id:"new-y",type:"number",value:d.y,onChange:M=>u({...d,y:M.target.value?parseInt(M.target.value):0})})]})]}),i.jsx(J,{className:"w-full bg-[#4a5d94] mb-2",onClick:S,children:"Mettre √† jour les coordonn√©es"}),i.jsx(J,{className:"w-full bg-[#ff7a45] mb-2",onClick:v,children:"Tester sur la carte"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Carte"}),i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cliquez sur la carte pour d√©finir la position du lieu s√©lectionn√©"}),i.jsx("div",{className:"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full",children:i.jsx("div",{className:"flex justify-center",children:i.jsx(Zh,{locations:a,activeLocation:l,onClick:y})})})]})]})})]})}),i.jsx(Be,{value:"events",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Gestion des √©v√©nements"})}),i.jsx(Je,{children:i.jsx(BA,{onSuccess:()=>{Se.info("√âv√©nement ajout√© avec succ√®s")}})})]})}),i.jsx(Be,{value:"community",className:"space-y-4",children:i.jsx(EP,{})}),i.jsx(Be,{value:"likes-stats",className:"space-y-4",children:i.jsx(CP,{})}),i.jsx(Be,{value:"likes-test",className:"space-y-4",children:i.jsx(NP,{})}),i.jsx(Be,{value:"import-export",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"Import / Export des donn√©es"})}),i.jsxs(Je,{children:[i.jsx(AA,{}),i.jsx("div",{className:"mt-4",children:i.jsx(J,{className:"w-full bg-[#4a5d94]",onClick:b,children:"Exporter les coordonn√©es"})})]})]})}),i.jsx(Be,{value:"reset",className:"space-y-4",children:i.jsxs(je,{children:[i.jsx(Dt,{children:i.jsx(Rt,{className:"text-[#4a5d94]",children:"R√©initialisation des donn√©es"})}),i.jsx(Je,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"R√©initialisation du localStorage"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Attention : cette action effacera toutes les donn√©es locales de l'application, y compris les √©v√©nements sauvegard√©s, les lieux visit√©s et les pr√©f√©rences utilisateur."}),i.jsx(J,{onClick:A,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Vider le localStorage"})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"R√©initialisation de l'onboarding"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Cette action r√©initialisera uniquement l'onboarding. L'√©cran d'accueil s'affichera au prochain chargement de l'application."}),i.jsx(J,{onClick:C,className:"w-full bg-gray-800 hover:bg-gray-900 text-white",children:"R√©initialiser l'onboarding"})]})]})})]})})]})})]}):i.jsxs("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center",children:[i.jsx(J,{variant:"ghost",className:"mr-2 p-0 h-auto",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#4a5d94]",children:"Administration"})]}),i.jsx(UA,{onLogin:w})]})}const ci=Xe("SavedEvents");function kP(){const e=yt(),[t,n]=p.useState([]),[r,s]=p.useState(""),[a,o]=p.useState(""),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[g,y]=p.useState(!1),[S,v]=p.useState(!1),[b,w]=p.useState(!0);p.useEffect(()=>{n(it()),w(!0),z.trackPageView("/saved","√âv√©nements enregistr√©s");const k=localStorage.getItem("celebrationsShown"),P=k?JSON.parse(k):{};fi(st.FIRST_EVENT_SAVED)&&!P[st.FIRST_EVENT_SAVED]&&(x(!0),P[st.FIRST_EVENT_SAVED]=!0),fi(st.MULTIPLE_EVENTS_SAVED)&&!P[st.MULTIPLE_EVENTS_SAVED]&&(y(!0),P[st.MULTIPLE_EVENTS_SAVED]=!0),fi(st.NOTIFICATION_SET)&&!P[st.NOTIFICATION_SET]&&(v(!0),P[st.NOTIFICATION_SET]=!0),localStorage.setItem("celebrationsShown",JSON.stringify(P))},[]);const A=k=>{const P=oa(k);n(P),z.trackContentInteraction(ee.UNSAVE,"event",k,{source:"saved"})},C=k=>{if(!r||!a)return;const P=new Date(`${r}T${a}`),N=eS(k,P.toISOString());n(N),c(null),s(""),o(""),z.trackProgramInteraction(ee.EVENT_REMINDER,{event_id:k,reminder_at:P.toISOString(),source:"saved"})},M=async k=>{try{ci.info("Tentative d'ajout au calendrier",{eventId:k.id});const P=await tc(k);if(P.success)jt({title:"Ajout au calendrier",description:"L'√©v√©nement a √©t√© ajout√© √† votre calendrier",variant:"default"}),ci.info("Ajout au calendrier r√©ussi",{eventId:k.id}),z.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:k.id,success:!0,source:"saved"});else{let N="Une erreur est survenue lors de l'ajout au calendrier";P.errorType===Ms.NOT_SUPPORTED?N="L'ajout au calendrier n'est pas support√© sur cet appareil":P.errorType===Ms.PERMISSION_DENIED&&(N="Permission refus√©e pour acc√©der au calendrier"),jt({title:"Erreur",description:N,variant:"destructive"}),ci.error("Erreur lors de l'ajout au calendrier",{eventId:k.id,errorType:P.errorType,errorMessage:P.errorMessage}),z.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:k.id,success:!1,error_type:P.errorType,source:"saved"})}}catch(P){jt({title:"Erreur",description:"Une erreur inattendue est survenue",variant:"destructive"}),ci.error("Exception lors de l'ajout au calendrier",{error:P}),z.trackProgramInteraction(ee.CLICK,{cta_action:"add_to_calendar",event_id:k.id,success:!1,exception:!0,source:"saved"})}},_=k=>{try{if(!k)return"Date inconnue";const P=new Date(k);return isNaN(P.getTime())?"Date invalide":ba(P,"EEEE d MMMM yyyy",{locale:wa})}catch(P){return console.warn("[SavedEvents] Invalid date string:",k,P),"Date invalide"}};return i.jsxs("div",{className:"min-h-screen bg-white pb-20",children:[i.jsx(hi,{trigger:f,message:pi(st.FIRST_EVENT_SAVED),onComplete:()=>x(!1)}),i.jsx(hi,{trigger:g,message:pi(st.MULTIPLE_EVENTS_SAVED),onComplete:()=>y(!1)}),i.jsx(hi,{trigger:S,message:pi(st.NOTIFICATION_SET),onComplete:()=>v(!1)}),i.jsxs("div",{className:"max-w-md mx-auto px-4 pt-4",children:[i.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[i.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>{z.trackInteraction(ee.BACK,"button",{from:"saved_events"}),e("/")},children:[i.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Retour"]}),i.jsx("h1",{className:"text-xl font-bold text-[#4a5d94]",children:"√âv√©nements enregistr√©s"}),i.jsx("div",{className:"w-20"})]}),t.length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore sauvegard√© d'√©v√©nements."}),i.jsx(J,{className:"mt-4 bg-[#4a5d94]",onClick:()=>e("/program"),children:"Voir le programme"})]}):i.jsx("div",{className:"space-y-2",children:t.map(k=>i.jsxs(je,{className:"border-[#e0ebff]",children:[i.jsx(Dt,{className:"py-1 px-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(Rt,{className:"text-base font-medium",children:k.title}),i.jsxs("div",{className:"flex items-center",children:[!k.notificationTime&&i.jsx(J,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>c(k.id),children:i.jsx(vc,{className:"h-3 w-3"})}),b&&i.jsx(J,{variant:"ghost",size:"sm",className:"text-[#4a5d94] h-7 w-7 p-0 mr-1",onClick:()=>M(k),title:"Ajouter au calendrier",children:i.jsx(En,{className:"h-3 w-3"})}),i.jsx(J,{variant:"ghost",size:"sm",className:"text-red-500 h-7 w-7 p-0",onClick:()=>A(k.id),children:i.jsx(Xx,{className:"h-3 w-3"})})]})]})}),i.jsx(Je,{className:"py-1 px-3 pt-0",children:i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(En,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:[k.days.map(P=>P==="samedi"?"Sa":"Di").join("/"),", ",k.time]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(Cn,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:k.locationName})]}),i.jsxs(J,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[#4a5d94] hover:bg-[#e0ebff] text-xs flex items-center justify-center transition-all duration-200",onClick:()=>{m(!0),u(k),z.trackProgramInteraction(ee.EVENT_DETAILS,{event_id:k.id,source:"saved"})},children:[i.jsx(es,{className:"h-3 w-3 mr-1"}),"D√©tails"]})]}),k.notificationTime&&i.jsxs("div",{className:"flex items-center text-[#4a5d94]",children:[i.jsx(vc,{className:"h-3 w-3 mr-1"}),i.jsxs("span",{children:["Rappel: ",_(k.notificationTime)]})]}),l===k.id?i.jsxs("div",{className:"mt-2 p-2 bg-[#f0f5ff] rounded-md",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(Ve,{className:"text-xs mb-1 block",children:"Choisir un rappel"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(J,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const P=k.days[0],N=new Date,T=P==="samedi"?6:0;for(;N.getDay()!==T;)N.setDate(N.getDate()+1);const $=new Date(N);$.setDate($.getDate()-1),s($.toISOString().split("T")[0]),o("10:00"),C(k.id)},children:"1 jour avant"}),i.jsx(J,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const P=k.days[0],N=new Date,T=P==="samedi"?6:0;for(;N.getDay()!==T;)N.setDate(N.getDate()+1);const $=k.time.split("h");N.setHours(parseInt($[0]),parseInt($[1]||"0"),0);const H=new Date(N);H.setHours(H.getHours()-3),s(H.toISOString().split("T")[0]),o(`${H.getHours().toString().padStart(2,"0")}:${H.getMinutes().toString().padStart(2,"0")}`),C(k.id)},children:"3 heures avant"}),i.jsx(J,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const P=k.days[0],N=new Date,T=P==="samedi"?6:0;for(;N.getDay()!==T;)N.setDate(N.getDate()+1);s(N.toISOString().split("T")[0]),o("08:00"),C(k.id)},children:"Le matin m√™me"}),i.jsx(J,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",onClick:()=>{const P=k.days[0],N=new Date,T=P==="samedi"?6:0;for(;N.getDay()!==T;)N.setDate(N.getDate()+1);s(N.toISOString().split("T")[0]),o("10:00")},children:"Choix pr√©cis"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[i.jsxs("div",{children:[i.jsx(Ve,{htmlFor:`date-${k.id}`,className:"text-xs mb-1",children:"Date"}),i.jsx(Kt,{id:`date-${k.id}`,type:"date",className:"h-8 text-sm",value:r,onChange:P=>s(P.target.value)})]}),i.jsxs("div",{children:[i.jsx(Ve,{htmlFor:`time-${k.id}`,className:"text-xs mb-1",children:"Heure"}),i.jsx(Kt,{id:`time-${k.id}`,type:"time",className:"h-8 text-sm",value:a,onChange:P=>o(P.target.value)})]})]}),i.jsxs("div",{className:"flex space-x-2 mt-1",children:[i.jsx(J,{className:"flex-1 bg-[#4a5d94] h-8 text-xs",onClick:()=>C(k.id),children:"D√©finir"}),i.jsx(J,{variant:"outline",className:"flex-1 h-8 text-xs",onClick:()=>c(null),children:"Annuler"})]})]}):null]})})]},k.id))}),i.jsx(Zn,{}),i.jsx(nc,{event:d,isOpen:h,onClose:()=>{m(!1),u(null)},source:"saved"})]})]})}const AP=p.createContext({userInteracted:!1,setUserInteracted:()=>{}}),TP=()=>p.useContext(AP);function pg(){const e=kn(),t=p.useRef(null);return p.useEffect(()=>{const n=e.pathname,r=document.title;fw(n,r),t.current&&t.current!==n&&z.trackRouteChange(t.current,n),t.current=n},[e.pathname]),{trackEvent:(n,r,s)=>pw(n,r,s),trackInteraction:(n,r,s)=>So(n,r,s),trackSwipe:(n,r,s,a)=>gw(n,r,s,a),trackFeatureUse:(n,r)=>xw(n,r),trackContentInteraction:(n,r,s,a)=>z.trackContentInteraction(n,r,s,a),trackMediaInteraction:(n,r,s,a)=>z.trackMediaInteraction(n,r,s,a),trackMapInteraction:(n,r)=>z.trackMapInteraction(n,r),trackProgramInteraction:(n,r)=>z.trackProgramInteraction(n,r),trackCommunityInteraction:(n,r)=>z.trackCommunityInteraction(n,r),trackDonationInteraction:(n,r)=>z.trackDonationInteraction(n,r),trackOnboarding:(n,r)=>z.trackOnboarding(n,r),trackError:(n,r,s)=>z.trackError(n,r,s)}}function PP(){const e=yt(),[t,n]=p.useState(0),[r,s]=p.useState(!1),{setUserInteracted:a}=TP(),o=pg();p.useEffect(()=>{o.trackOnboarding(ee.ONBOARDING_START,{timestamp:new Date().toISOString()})},[]),p.useEffect(()=>{const g=l[t];o.trackOnboarding(ee.ONBOARDING_SLIDE_VIEW,{slide_index:t,slide_title:g.title,has_video:!!g.video})},[t]),p.useEffect(()=>{console.log("[Onboarding] Pr√©paration de l'interaction utilisateur"),localStorage.setItem("userHasInteracted","true"),a(!0)},[a]);const l=[{title:"Bienvenue sur l'application Collectif √éle Feydeau",description:["D√©couvrez le <strong>patrimoine unique</strong> de l'√éle Feydeau √† travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organis√©s par les artistes du collectif."],image:"intro-video-image.png",video:"/video/intro-video.mp4"},{title:"Bienvenue sur l'application Collectif √éle Feydeau",description:["D√©couvrez le <strong>patrimoine unique</strong> de l'√éle Feydeau √† travers notre <strong>parcours interactif</strong>.","Explorez les <strong>expositions</strong> et <strong>concerts</strong> organis√©s par les artistes du collectif."],image:"/onboarding-image.webp"},{title:"Programme et horaires",description:["Consultez le <strong>programme complet</strong> des √©v√©nements par jour.","Les <strong>horaires</strong> sont clairement indiqu√©s pour chaque √©v√©nement.","<strong>Filtrez</strong> par type d'√©v√©nement : expositions ou concerts."],image:"/onboarding-image.webp"},{title:"Carte interactive",description:["<strong>Localisez</strong> tous les √©v√©nements sur la <strong>carte</strong> de l'√éle Feydeau.","<strong>Naviguez</strong> facilement entre les diff√©rents lieux.","<strong>Marquez</strong> les lieux que vous avez visit√©s."],image:"/onboarding-image.webp"},{title:"Fonctionnalit√©s pratiques",description:["<strong>Enregistrez</strong> vos √©v√©nements favoris pour y acc√©der rapidement.","Configurez des <strong>rappels</strong> pour ne manquer aucun √©v√©nement.","L'application fonctionne <strong>hors-ligne</strong> pour consulter le programme sans connexion."],image:"/onboarding-image.webp"}],c=()=>{console.log("[Onboarding] Interaction utilisateur via nextSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("left","button",!0,{current_slide:t,total_slides:l.length}),t<l.length-1&&n(t+1)},d=()=>{console.log("[Onboarding] Interaction utilisateur via prevSlide"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackSwipe("right","button",!0,{current_slide:t,total_slides:l.length}),t>0&&n(t-1)},u=()=>{if(r){console.log("[Onboarding] Navigation d√©j√† en cours, ignor√©");return}try{s(!0),console.log("[Onboarding] ===== D√©but de handleFinish ====="),console.log("[Onboarding] Avant localStorage.setItem - hasSeenOnboarding actuel:",localStorage.getItem("hasSeenOnboarding")),localStorage.setItem("hasSeenOnboarding","true"),console.log("[Onboarding] Apr√®s localStorage.setItem - hasSeenOnboarding:",localStorage.getItem("hasSeenOnboarding")),o.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:t+1,completion_time:new Date().toISOString()}),console.log("[Onboarding] URL actuelle avant navigation:",window.location.href),console.log("[Onboarding] Navigation vers la carte..."),e("/map",{replace:!0}),console.log("[Onboarding] navigate() appel√© vers /map"),setTimeout(()=>{console.log("[Onboarding] URL apr√®s navigation (500ms):",window.location.href)},500)}catch(g){console.error("[Onboarding] Erreur lors de la finalisation de l'onboarding:",g),e("/map",{replace:!0})}finally{setTimeout(()=>s(!1),1e3)}},h=(g,y)=>{y.offset.x<-50&&t<l.length-1?(o.trackSwipe("left","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t+1)):y.offset.x>50&&t>0?(o.trackSwipe("right","gesture",!0,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)}),n(t-1)):o.trackSwipe(y.offset.x<0?"left":"right","gesture",!1,{current_slide:t,total_slides:l.length,swipe_distance:Math.abs(y.offset.x)})},m=()=>{console.log("[Onboarding] Vid√©o d√©marr√©e"),a(!0),localStorage.setItem("userHasInteracted","true"),o.trackMediaInteraction(ee.PLAY,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},f=()=>{console.log("[Onboarding] Vid√©o mise en pause"),o.trackMediaInteraction(ee.PAUSE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})},x=()=>{console.log("[Onboarding] Vid√©o termin√©e"),o.trackMediaInteraction(ee.COMPLETE,"video",`onboarding-slide-${t}`,{slide_index:t,slide_title:l[t].title})};return i.jsxs("div",{className:"flex flex-col h-screen bg-white relative overflow-hidden",children:[i.jsx("div",{className:"p-4 flex justify-end"}),i.jsx("div",{className:"absolute top-4 left-0 right-0 flex justify-center z-50",children:i.jsx("div",{className:"flex space-x-2",children:l.map((g,y)=>i.jsx("div",{className:`h-2 w-2 rounded-full ${y===t?"bg-[#ff7a45]":"bg-gray-300"}`},y))})}),i.jsx(be.div,{className:"absolute inset-0 z-10 pointer-events-auto touch-pan-x",drag:"x",dragConstraints:{left:0,right:0},onDragEnd:h,style:{touchAction:"pan-x"}}),i.jsx("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold text-center my-4 relative",children:l[t].title}),t===0?i.jsx("div",{className:"relative overflow-hidden bg-gray-200 mb-[80px] h-[50vh] md:h-[60vh] z-20",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:pt(l[t].video||""),"aria-label":`Vid√©o: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative h-[30vh] md:h-[40vh] overflow-hidden bg-gray-200",children:l[t].video?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",children:i.jsx("video",{className:"max-w-full max-h-full",controls:!0,playsInline:!0,src:pt(l[t].video||""),"aria-label":`Vid√©o: ${l[t].title}`,onPlay:m,onPause:f,onEnded:x,onClick:g=>g.stopPropagation()})}):i.jsx("div",{className:"absolute inset-0 bg-center bg-no-repeat bg-contain",style:{backgroundImage:`url(${pt(l[t].image)})`},"aria-label":l[t].title})}),i.jsx("div",{className:"flex-1 p-4 overflow-y-auto pb-[80px]",children:Array.isArray(l[t].description)?i.jsx("div",{className:"space-y-3",children:l[t].description.map((g,y)=>i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:g}},y))}):i.jsx("p",{className:"text-center text-gray-600 text-sm md:text-base",dangerouslySetInnerHTML:{__html:l[t].description}})})]})]})}),i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 flex space-x-4 border-t border-gray-100 bg-white z-50",children:[t>0&&i.jsx(J,{onClick:d,className:"flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Pr√©c√©dent"}),i.jsx(J,{onClick:t===l.length-1?u:c,className:"flex-1 bg-[#4a5d94] text-white",children:t===l.length-1?"Commencer":"Suivant"})]})]})}function _P(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var ac="ScrollArea",[gg,q2]=Zr(ac),[MP,qt]=gg(ac),xg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState(null),[g,y]=p.useState(null),[S,v]=p.useState(0),[b,w]=p.useState(0),[A,C]=p.useState(!1),[M,_]=p.useState(!1),k=et(t,N=>c(N)),P=el(s);return i.jsx(MP,{scope:n,type:r,dir:P,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:A,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:M,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:w,children:i.jsx(Ke.div,{dir:P,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});xg.displayName=ac;var yg="ScrollAreaViewport",vg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:a,...o}=e,l=qt(yg,n),c=p.useRef(null),d=et(t,c,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),i.jsx(Ke.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:UP({asChild:s,children:r},u=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});vg.displayName=yg;var gn="ScrollAreaScrollbar",oc=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(gn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(DP,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(RP,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(bg,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(lc,{...r,ref:t}):null});oc.displayName=gn;var DP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(gn,e.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(pn,{present:n||a,children:i.jsx(bg,{"data-state":a?"visible":"hidden",...r,ref:t})})}),RP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qt(gn,e.__scopeScrollArea),a=e.orientation==="horizontal",o=ja(()=>c("SCROLL_END"),100),[l,c]=_P("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const d=s.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const f=d[u];h!==f&&(c("SCROLL"),o()),h=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,a,c,o]),i.jsx(pn,{present:n||l!=="hidden",children:i.jsx(lc,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:me(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),bg=p.forwardRef((e,t)=>{const n=qt(gn,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=p.useState(!1),l=e.orientation==="horizontal",c=ja(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Jr(n.viewport,c),Jr(n.content,c),i.jsx(pn,{present:r||a,children:i.jsx(lc,{"data-state":a?"visible":"hidden",...s,ref:t})})}),lc=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=qt(gn,e.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Ng(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return BP(m,o.current,l,f)}return n==="horizontal"?i.jsx(OP,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,f=Sd(m,l,s.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(LP,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,f=Sd(m,l);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),OP=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qt(gn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=et(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Sg,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sa(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),Ig(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:$i(o.paddingLeft),paddingEnd:$i(o.paddingRight)}})}})}),LP=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qt(gn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=et(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Sg,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sa(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),Ig(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:$i(o.paddingTop),paddingEnd:$i(o.paddingBottom)}})}})}),[FP,wg]=gg(gn),Sg=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,f=qt(gn,n),[x,g]=p.useState(null),y=et(t,k=>g(k)),S=p.useRef(null),v=p.useRef(""),b=f.viewport,w=r.content-r.viewport,A=Sn(u),C=Sn(c),M=ja(h,10);function _(k){if(S.current){const P=k.clientX-S.current.left,N=k.clientY-S.current.top;d({x:P,y:N})}}return p.useEffect(()=>{const k=P=>{const N=P.target;(x==null?void 0:x.contains(N))&&A(P,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[b,x,w,A]),p.useEffect(C,[r,C]),Jr(x,M),Jr(f.content,M),i.jsx(FP,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:Sn(a),onThumbPointerUp:Sn(o),onThumbPositionChange:C,onThumbPointerDown:Sn(l),children:i.jsx(Ke.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:me(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),S.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),_(k))}),onPointerMove:me(e.onPointerMove,_),onPointerUp:me(e.onPointerUp,k=>{const P=k.target;P.hasPointerCapture(k.pointerId)&&P.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),S.current=null})})})}),Fi="ScrollAreaThumb",jg=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=wg(Fi,e.__scopeScrollArea);return i.jsx(pn,{present:n||s.hasThumb,children:i.jsx($P,{ref:t,...r})})}),$P=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=qt(Fi,n),o=wg(Fi,n),{onThumbPositionChange:l}=o,c=et(t,h=>o.onThumbChange(h)),d=p.useRef(),u=ja(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(u(),!d.current){const f=VP(h,l);d.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,u,l]),i.jsx(Ke.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),x=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:me(e.onPointerUp,o.onThumbPointerUp)})});jg.displayName=Fi;var cc="ScrollAreaCorner",Eg=p.forwardRef((e,t)=>{const n=qt(cc,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(zP,{...e,ref:t}):null});Eg.displayName=cc;var zP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=qt(cc,n),[a,o]=p.useState(0),[l,c]=p.useState(0),d=!!(a&&l);return Jr(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),Jr(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),d?i.jsx(Ke.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function $i(e){return e?parseInt(e,10):0}function Ng(e,t){const n=e/t;return isNaN(n)?0:n}function Sa(e){const t=Ng(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function BP(e,t,n,r="ltr"){const s=Sa(n),a=s/2,o=t||a,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return Cg([c,d],h)(e)}function Sd(e,t,n="ltr"){const r=Sa(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],d=rl(e,c);return Cg([0,o],[0,l])(d)}function Cg(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Ig(e,t){return e>0&&e<t}var VP=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function ja(e,t){const n=Sn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Jr(e,t){const n=Sn(t);Qx(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}function UP(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const s=p.Children.only(r);return p.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var kg=xg,qP=vg,HP=Eg;const Ag=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(kg,{ref:r,className:se("relative overflow-hidden",e),...n,children:[i.jsx(qP,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Tg,{}),i.jsx(HP,{})]}));Ag.displayName=kg.displayName;const Tg=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(oc,{ref:r,orientation:t,className:se("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(jg,{className:"relative flex-1 rounded-full bg-border"})}));Tg.displayName=oc.displayName;var Pg=["PageUp","PageDown"],_g=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Mg={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},is="Slider",[Go,GP,WP]=am(is),[Dg,H2]=Zr(is,[WP]),[YP,Ea]=Dg(is),Rg=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:x,...g}=e,y=p.useRef(new Set),S=p.useRef(0),b=o==="horizontal"?KP:XP,[w=[],A]=Hi({prop:u,defaultProp:d,onChange:N=>{var $;($=[...y.current][S.current])==null||$.focus(),h(N)}}),C=p.useRef(w);function M(N){const T=t_(w,N);P(N,T)}function _(N){P(N,S.current)}function k(){const N=C.current[S.current];w[S.current]!==N&&m(w)}function P(N,T,{commit:$}={commit:!1}){const H=i_(a),Y=a_(Math.round((N-r)/a)*a+r,H),Z=rl(Y,[r,s]);A((te=[])=>{const L=ZP(te,Z,T);if(s_(L,c*a)){S.current=L.indexOf(Z);const q=String(L)!==String(te);return q&&$&&m(L),q?L:te}else return te})}return i.jsx(YP,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:S,thumbs:y.current,values:w,orientation:o,form:x,children:i.jsx(Go.Provider,{scope:e.__scopeSlider,children:i.jsx(Go.Slot,{scope:e.__scopeSlider,children:i.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:me(g.onPointerDown,()=>{l||(C.current=w)}),min:r,max:s,inverted:f,onSlideStart:l?void 0:M,onSlideMove:l?void 0:_,onSlideEnd:l?void 0:k,onHomeKeyDown:()=>!l&&P(r,0,{commit:!0}),onEndKeyDown:()=>!l&&P(s,w.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:T})=>{if(!l){const Y=Pg.includes(N.key)||N.shiftKey&&_g.includes(N.key)?10:1,Z=S.current,te=w[Z],L=a*Y*T;P(te+L,Z,{commit:!0})}}})})})})});Rg.displayName=is;var[Og,Lg]=Dg(is,{startEdge:"left",endEdge:"right",size:"width",direction:1}),KP=p.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,m]=p.useState(null),f=et(t,b=>m(b)),x=p.useRef(),g=el(s),y=g==="ltr",S=y&&!a||!y&&a;function v(b){const w=x.current||h.getBoundingClientRect(),A=[0,w.width],M=uc(A,S?[n,r]:[r,n]);return x.current=w,M(b-w.left)}return i.jsx(Og,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:i.jsx(Fg,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const w=v(b.clientX);o==null||o(w)},onSlideMove:b=>{const w=v(b.clientX);l==null||l(w)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:b=>{const A=Mg[S?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:A?-1:1})}})})}),XP=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=p.useRef(null),h=et(t,u),m=p.useRef(),f=!s;function x(g){const y=m.current||u.current.getBoundingClientRect(),S=[0,y.height],b=uc(S,f?[r,n]:[n,r]);return m.current=y,b(g-y.top)}return i.jsx(Og,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:i.jsx(Fg,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=x(g.clientY);a==null||a(y)},onSlideMove:g=>{const y=x(g.clientY);o==null||o(y)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const S=Mg[f?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:S?-1:1})}})})}),Fg=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Ea(is,n);return i.jsx(Ke.span,{...d,ref:t,onKeyDown:me(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Pg.concat(_g).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:me(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():r(h)}),onPointerMove:me(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:me(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),$g="SliderTrack",zg=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Ea($g,n);return i.jsx(Ke.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});zg.displayName=$g;var Wo="SliderRange",Bg=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Ea(Wo,n),a=Lg(Wo,n),o=p.useRef(null),l=et(t,o),c=s.values.length,d=s.values.map(m=>Ug(m,s.min,s.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return i.jsx(Ke.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:h+"%"}})});Bg.displayName=Wo;var Yo="SliderThumb",Vg=p.forwardRef((e,t)=>{const n=GP(e.__scopeSlider),[r,s]=p.useState(null),a=et(t,l=>s(l)),o=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(QP,{...e,ref:a,index:o})}),QP=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,o=Ea(Yo,n),l=Lg(Yo,n),[c,d]=p.useState(null),u=et(t,v=>d(v)),h=c?o.form||!!c.closest("form"):!0,m=Im(c),f=o.values[r],x=f===void 0?0:Ug(f,o.min,o.max),g=e_(r,o.values.length),y=m==null?void 0:m[l.size],S=y?n_(y,x,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${S}px)`},children:[i.jsx(Go.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(Ke.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:me(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&i.jsx(JP,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},r)]})});Vg.displayName=Yo;var JP=e=>{const{value:t,...n}=e,r=p.useRef(null),s=Cm(t);return p.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[s,t]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function ZP(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function Ug(e,t,n){const a=100/(n-t)*(e-t);return rl(a,[0,100])}function e_(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function t_(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function n_(e,t,n){const r=e/2,a=uc([0,50],[0,r]);return(r-a(t)*n)*n}function r_(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function s_(e,t){if(t>0){const n=r_(e);return Math.min(...n)>=t}return!0}function uc(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function i_(e){return(String(e).split(".")[1]||"").length}function a_(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var qg=Rg,o_=zg,l_=Bg,c_=Vg;const Hg=p.forwardRef(({className:e,...t},n)=>i.jsxs(qg,{ref:n,className:se("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(o_,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(l_,{className:"absolute h-full bg-primary"})}),i.jsx(c_,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Hg.displayName=qg.displayName;const ao=Xe("LocationHistory");function u_(){var P;const e=yt(),t=kn(),[n,r]=p.useState({}),s=p.useRef(null),[a,o]=p.useState(!1),[l,c]=p.useState(0),[d,u]=p.useState(0),[h,m]=p.useState(!1),f=(P=t.state)==null?void 0:P.selectedLocationId,x=f?ct.find(N=>N.id===f):null;let g=[];const y=new Set,S=[...ct].sort((N,T)=>N.history&&!T.history?-1:!N.history&&T.history?1:0);for(const N of S)(N.history||N.historyRef)&&(y.has(N.name)||(g.push(N),y.add(N.name)));(x!=null&&x.history||x!=null&&x.historyRef)&&!g.some(N=>N.id===f)&&g.push(x);const[v,b]=p.useState(()=>{var N,T,$;return f&&ct.find(H=>H.id===f)&&((N=ct.find(H=>H.id===f))!=null&&N.history||(T=ct.find(H=>H.id===f))!=null&&T.historyRef)?f:(($=g[0])==null?void 0:$.id)||null}),w=g.find(N=>N.id===v),A=()=>{s.current&&(a?(s.current.pause(),w!=null&&w.id&&z.trackAudio("pause",w.id)):(s.current.play(),w!=null&&w.id&&z.trackAudio("play",w.id)),o(!a))},C=()=>{s.current&&u(s.current.currentTime)},M=()=>{s.current&&(c(s.current.duration),m(!1))},_=N=>{s.current&&(s.current.currentTime=N[0],u(N[0]),w!=null&&w.id&&z.trackAudio("seek",w.id,N[0]))},k=N=>{const T=Math.floor(N/60),$=Math.floor(N%60);return`${T}:${$<10?"0":""}${$}`};return p.useEffect(()=>{z.trackPageView("/history","Histoire des lieux")},[]),p.useEffect(()=>{if(w!=null&&w.image){const N=pt(w.image);Qh(N)||(r(T=>({...T,[N]:!0})),aS(N).then(T=>{ao.info(`Pr√©chargement de l'image ${T?"r√©ussi":"√©chou√©"}:`,{imagePath:N}),r($=>({...$,[N]:!1}))}).catch(T=>{ao.error("Erreur lors du pr√©chargement de l'image:",{imagePath:N,error:T}),r($=>({...$,[N]:!1}))}))}w&&(z.trackBuildingView(w.id,w.name),z.trackBuildingHistoryView(w.id,"Histoire compl√®te"))},[w]),p.useEffect(()=>{s.current&&a&&(s.current.pause(),o(!1)),u(0),c(0),w!=null&&w.audio&&m(!0)},[v]),i.jsxs("div",{className:"container max-w-md mx-auto px-4 pb-20 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(J,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:i.jsx(Yn,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Histoire des lieux"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2 text-[#4a5d94]",children:"S√©lectionnez un lieu"}),i.jsxs(Ds,{value:v,onValueChange:N=>b(N),children:[i.jsx(Xr,{className:"w-full border-[#4a5d94] text-[#4a5d94]",children:i.jsx(Rs,{placeholder:"Choisir un lieu"})}),i.jsx(Qr,{children:g.map(N=>i.jsx(pr,{value:N.id,children:N.name},N.id))})]})]}),w?i.jsxs(je,{className:"shadow-md border-[#d8e3ff] mb-6",children:[i.jsx(Dt,{className:"pb-6",children:i.jsxs("div",{className:"flex flex-col mb-2",children:[i.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[i.jsx(Rt,{className:"text-xl font-bold text-[#4a5d94] mr-2",children:w.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qn,{entryId:`location-${w.id}`,variant:"icon",showCount:!0}),i.jsxs(J,{variant:"outline",size:"sm",className:"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white whitespace-nowrap px-2 py-1 text-xs flex-shrink-0",onClick:()=>{e("/map",{state:{highlightLocationId:w.id,fromHistory:!0}}),z.trackMapInteraction(ee.LOCATION_VIEW,{building_id:w.id,from:"history_page"})},children:[i.jsx(Cn,{className:"h-3 w-3 mr-1"}),"Voir sur la carte"]})]})]}),i.jsx(sc,{className:"text-sm text-slate-600 mt-2 mb-2",children:w.description})]})}),i.jsxs(Je,{children:[w.image&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"w-full h-64 rounded-md shadow-md border border-[#d8e3ff] relative",style:{backgroundImage:`url(${pt(w.image)})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[n[pt(w.image)]&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70",children:i.jsx(Yr,{className:"h-8 w-8 animate-spin text-[#4a5d94]"})}),i.jsx("img",{src:pt(w.image),alt:`Photo historique de ${w.name}`,className:"hidden",onError:N=>{ao.error("Erreur de chargement de l'image:",{image:w.image,online:As()}),z.trackError(ee.RESOURCE_ERROR,"history_image_load_failed",{image:w.image,building_id:w.id,online:As()})}})]}),i.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["Photo de ",w.name]})]}),w.audio&&i.jsxs("div",{className:"mb-4 p-3 bg-[#f5f8ff] rounded-md border border-[#d8e3ff]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(im,{className:"h-4 w-4 text-[#4a5d94] mr-2"}),i.jsx("span",{className:"text-sm font-medium text-[#4a5d94]",children:"√âcouter l'histoire"})]}),i.jsx(J,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:A,disabled:h,children:h?i.jsx(Yr,{className:"h-4 w-4 animate-spin text-[#4a5d94]"}):a?i.jsx(Jx,{className:"h-4 w-4 text-[#4a5d94]"}):i.jsx(Zx,{className:"h-4 w-4 text-[#4a5d94]"})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Hg,{value:[d],max:l||100,step:.1,onValueChange:_,disabled:h,className:"cursor-pointer"}),i.jsxs("div",{className:"flex justify-between text-xs text-[#4a5d94]",children:[i.jsx("span",{children:k(d)}),i.jsx("span",{children:k(l)})]})]}),i.jsx("audio",{ref:s,src:w.audio?window.location.hostname.includes("github.io")?`/1Hall1Artiste${w.audio}`:w.audio:"",onTimeUpdate:C,onLoadedMetadata:M,onEnded:()=>{o(!1),w!=null&&w.id&&z.trackAudio("pause",w.id)},onCanPlay:()=>m(!1),onError:N=>{console.error("Erreur de chargement audio:",N,w.audio),m(!1)},preload:"metadata",className:"hidden"})]}),i.jsx("h3",{className:"text-base font-bold text-[#4a5d94] mb-3 pb-1 border-b border-[#d8e3ff]",children:"Histoire compl√®te"}),i.jsx(Ag,{className:"h-[60vh] pr-4",children:i.jsx("div",{className:"space-y-4",children:(()=>{let N="";if(w.history)N=w.history;else if(w.historyRef){const T=ct.find($=>$.id===w.historyRef);T!=null&&T.history&&(N=T.history)}return N.split(`

`).map((T,$)=>T.trim()&&i.jsx("div",{className:"mb-4",children:T.startsWith("#")?i.jsx("h4",{className:"text-lg font-bold text-[#4a5d94] mb-2",children:T.replace("#","").trim()}):i.jsx("p",{className:"text-[#4a5d94] leading-relaxed text-sm",children:T})},$))})()})})]})]}):i.jsxs("div",{className:"text-center py-10 border rounded-lg border-dashed border-gray-300 bg-gray-50",children:[i.jsx(es,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 mb-1",children:"S√©lectionnez un lieu"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Pour afficher son histoire compl√®te"})]}),i.jsxs("div",{className:"fixed bottom-20 left-0 right-0 mx-auto max-w-md px-4 z-10 space-y-2",children:[w&&i.jsxs(J,{className:"w-full border-[#ff7a45] text-[#ff7a45] hover:bg-[#fff5f0] text-sm min-h-[44px]",variant:"outline",onClick:()=>{w&&(hE(w),e("/community?tab=contribute"),z.trackCommunityInteraction(ee.CONTRIBUTION,{source:"history_page",building_id:w.id}))},children:[i.jsx($s,{className:"h-4 w-4 mr-2"}),"Partager un souvenir de ce lieu"]}),i.jsxs(J,{className:"w-full bg-[#ff7a45] hover:bg-[#ff9d6e] text-white text-sm min-h-[44px]",onClick:()=>{e("/map",{state:{highlightLocationId:v,fromHistory:!0,timestamp:new Date().getTime()}})},children:[i.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Voir sur la carte"]})]}),i.jsx(Zn,{})]})}function d_(){const e=pg(),[t,n]=p.useState("overview"),[r,s]=p.useState(!1),[a,o]=p.useState(null);p.useEffect(()=>{e.trackFeatureUse("analytics_dashboard",{tab:t})},[t,e]),p.useEffect(()=>{(async()=>{s(!0);try{await new Promise(d=>setTimeout(d,1e3)),o({overview:{totalUsers:1245,activeUsers:328,sessionsToday:156,averageSessionDuration:"3m 42s",bounceRate:"24%"},events:[{name:"onboarding_onboarding_start",count:523,users:523},{name:"onboarding_onboarding_complete",count:412,users:412},{name:"onboarding_onboarding_skip",count:111,users:111},{name:"interaction_swipe",count:2456,users:387},{name:"navigation_page_view",count:5678,users:523},{name:"media_play",count:345,users:289},{name:"media_complete",count:198,users:198},{name:"feature_feature_use",count:1234,users:456}],topPages:[{path:"/map",views:1245,users:423},{path:"/program",views:987,users:356},{path:"/community",views:756,users:289},{path:"/about",views:543,users:234},{path:"/saved",views:432,users:198}],userRetention:{day1:"76%",day7:"45%",day30:"28%"}})}catch(d){console.error("Erreur lors du chargement des donn√©es analytics:",d)}finally{s(!1)}})()},[]);const l=()=>{if(!a)return;e.trackFeatureUse("analytics_export",{format:"json"});const c=JSON.stringify(a,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(c),u=`analytics-export-${new Date().toISOString().split("T")[0]}.json`,h=document.createElement("a");h.setAttribute("href",d),h.setAttribute("download",u),h.click()};return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Statistiques d'utilisation"}),i.jsxs(J,{variant:"outline",onClick:l,disabled:r||!a,children:[i.jsx(ey,{className:"mr-2 h-4 w-4"}),"Exporter"]})]}),i.jsxs(ss,{value:t,onValueChange:n,className:"w-full",children:[i.jsxs(Cr,{className:"grid grid-cols-4 mb-6",children:[i.jsx(ze,{value:"overview",children:"Vue d'ensemble"}),i.jsx(ze,{value:"events",children:"√âv√©nements"}),i.jsx(ze,{value:"pages",children:"Pages"}),i.jsx(ze,{value:"users",children:"Utilisateurs"})]}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx(Yr,{className:"h-8 w-8 animate-spin text-gray-500"})}):a?i.jsxs(i.Fragment,{children:[i.jsxs(Be,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs totaux"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.totalUsers})]}),i.jsx(gs,{className:"h-8 w-8 text-blue-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Utilisateurs actifs"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.activeUsers})]}),i.jsx(bc,{className:"h-8 w-8 text-green-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Sessions aujourd'hui"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.sessionsToday})]}),i.jsx(ty,{className:"h-8 w-8 text-purple-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Dur√©e moyenne de session"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.averageSessionDuration})]}),i.jsx(ny,{className:"h-8 w-8 text-orange-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Taux de rebond"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.overview.bounceRate})]}),i.jsx(bc,{className:"h-8 w-8 text-red-500"})]})}),i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"R√©tention J+30"}),i.jsx("h3",{className:"text-2xl font-bold",children:a.userRetention.day30})]}),i.jsx(gs,{className:"h-8 w-8 text-indigo-500"})]})})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"R√©tention des utilisateurs"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 1"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day1})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 7"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day7})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Jour 30"}),i.jsx("p",{className:"text-xl font-bold",children:a.userRetention.day30})]})]})]})]}),i.jsx(Be,{value:"events",className:"space-y-4",children:i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"√âv√©nements les plus fr√©quents"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"√âv√©nement"}),i.jsx("th",{className:"text-right py-2",children:"Nombre"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.events.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.name}),i.jsx("td",{className:"text-right py-2",children:c.count}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsx(Be,{value:"pages",className:"space-y-4",children:i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Pages les plus visit√©es"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2",children:"Page"}),i.jsx("th",{className:"text-right py-2",children:"Vues"}),i.jsx("th",{className:"text-right py-2",children:"Utilisateurs"})]})}),i.jsx("tbody",{children:a.topPages.map((c,d)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"py-2",children:c.path}),i.jsx("td",{className:"text-right py-2",children:c.views}),i.jsx("td",{className:"text-right py-2",children:c.users})]},d))})]})})]})}),i.jsxs(Be,{value:"users",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Nouveaux vs. R√©currents"}),i.jsx("div",{className:"flex justify-center items-center h-48",children:i.jsxs("div",{className:"flex items-center space-x-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"68%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Nouveaux"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:"32%"}),i.jsx("div",{className:"text-sm text-gray-500",children:"R√©currents"})]})]})})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Engagement"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Onboarding compl√©t√©"}),i.jsx("span",{className:"text-sm font-medium",children:"78%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"78%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Vid√©os visionn√©es"}),i.jsx("span",{className:"text-sm font-medium",children:"57%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"57%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-sm",children:"Interactions carte"}),i.jsx("span",{className:"text-sm font-medium",children:"42%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"42%"}})})]})]})]})]}),i.jsxs(je,{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Parcours utilisateur"}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 md:gap-4",children:[i.jsx("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:"Onboarding"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"Carte"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:"Programme"}),i.jsx("div",{className:"text-gray-400",children:"‚Üí"}),i.jsx("div",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm",children:"D√©tails √©v√©nement"})]})]})]})]}):i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"Impossible de charger les donn√©es d'analytics"})})]}),i.jsxs("div",{className:"mt-8 text-sm text-gray-500",children:[i.jsx("p",{children:"Note: Ces donn√©es sont simul√©es √† des fins de d√©monstration. Dans une impl√©mentation r√©elle, vous utiliseriez l'API Firebase Analytics pour r√©cup√©rer les donn√©es r√©elles."}),i.jsxs("p",{className:"mt-1",children:["Pour acc√©der aux donn√©es r√©elles, consultez la ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"console Firebase"}),"."]})]})]})}const m_=({children:e,className:t=""})=>i.jsx("div",{className:`container mx-auto px-4 py-6 max-w-screen-lg ${t}`,children:e}),h_=({title:e,subtitle:t,children:n})=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),t&&i.jsx("p",{className:"text-gray-600",children:t}),n]});var Hs=e=>e.type==="checkbox",ur=e=>e instanceof Date,ht=e=>e==null;const Gg=e=>typeof e=="object";var Ye=e=>!ht(e)&&!Array.isArray(e)&&Gg(e)&&!ur(e),f_=e=>Ye(e)&&e.target?Hs(e.target)?e.target.checked:e.target.value:e,p_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,g_=(e,t)=>e.has(p_(t)),x_=e=>{const t=e.constructor&&e.constructor.prototype;return Ye(t)&&t.hasOwnProperty("isPrototypeOf")},dc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tt(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(dc&&(e instanceof Blob||e instanceof FileList))&&(n||Ye(e)))if(t=n?[]:{},!n&&!x_(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Tt(e[r]));else return e;return t}var Na=e=>Array.isArray(e)?e.filter(Boolean):[],We=e=>e===void 0,re=(e,t,n)=>{if(!t||!Ye(e))return n;const r=Na(t.split(/[,[\].]+?/)).reduce((s,a)=>ht(s)?s:s[a],e);return We(r)||r===e?We(e[t])?n:e[t]:r},nn=e=>typeof e=="boolean",mc=e=>/^\w*$/.test(e),Wg=e=>Na(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Fe=(e,t,n)=>{let r=-1;const s=mc(t)?[t]:Wg(t),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const d=e[l];c=Ye(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__")return;e[l]=c,e=e[l]}return e};const jd={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Yt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},y_=F.createContext(null),v_=()=>F.useContext(y_);var b_=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Yt.all&&(t._proxyFormState[o]=!r||Yt.all),e[o]}});return s},St=e=>Ye(e)&&!Object.keys(e).length,w_=(e,t,n,r)=>{n(e);const{name:s,...a}=e;return St(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===Yt.all)},Es=e=>Array.isArray(e)?e:[e],S_=(e,t,n)=>!e||!t||e===t||Es(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function Yg(e){const t=F.useRef(e);t.current=e,F.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var dn=e=>typeof e=="string",Kg=(e,t,n,r,s)=>dn(e)?(r&&t.watch.add(e),re(n,e,s)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),re(n,a))):(r&&(t.watchAll=!0),n);function j_(e){const t=v_(),{control:n=t.control,name:r,defaultValue:s,disabled:a,exact:o}=e||{},l=F.useRef(r);l.current=r,Yg({disabled:a,subject:n._subjects.values,next:u=>{S_(l.current,u.name,o)&&d(Tt(Kg(l.current,n._names,u.values||n._formValues,!1,s)))}});const[c,d]=F.useState(n._getWatch(r,s));return F.useEffect(()=>n._removeUnmounted()),c}var E_=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Ed=e=>({isOnSubmit:!e||e===Yt.onSubmit,isOnBlur:e===Yt.onBlur,isOnChange:e===Yt.onChange,isOnAll:e===Yt.all,isOnTouch:e===Yt.onTouched}),Nd=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ns=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const a=re(e,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Ns(l,t))break}else if(Ye(l)&&Ns(l,t))break}}};var N_=(e,t,n)=>{const r=Es(re(e,n));return Fe(r,"root",t[n]),Fe(e,n,r),e},hc=e=>e.type==="file",jn=e=>typeof e=="function",zi=e=>{if(!dc)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yi=e=>dn(e),fc=e=>e.type==="radio",Bi=e=>e instanceof RegExp;const Cd={value:!1,isValid:!1},Id={value:!0,isValid:!0};var Xg=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!We(e[0].attributes.value)?We(e[0].value)||e[0].value===""?Id:{value:e[0].value,isValid:!0}:Id:Cd}return Cd};const kd={isValid:!1,value:null};var Qg=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,kd):kd;function Ad(e,t,n="validate"){if(yi(e)||Array.isArray(e)&&e.every(yi)||nn(e)&&!e)return{type:n,message:yi(e)?e:"",ref:t}}var Pr=e=>Ye(e)&&!Bi(e)?e:{value:e,message:""},Td=async(e,t,n,r,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:m,validate:f,name:x,valueAsNumber:g,mount:y,disabled:S}=e._f,v=re(t,x);if(!y||S)return{};const b=o?o[0]:a,w=T=>{r&&b.reportValidity&&(b.setCustomValidity(nn(T)?"":T||""),b.reportValidity())},A={},C=fc(a),M=Hs(a),_=C||M,k=(g||hc(a))&&We(a.value)&&We(v)||zi(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,P=E_.bind(null,x,n,A),N=(T,$,H,Y=vn.maxLength,Z=vn.minLength)=>{const te=T?$:H;A[x]={type:T?Y:Z,message:te,ref:a,...P(T?Y:Z,te)}};if(s?!Array.isArray(v)||!v.length:l&&(!_&&(k||ht(v))||nn(v)&&!v||M&&!Xg(o).isValid||C&&!Qg(o).isValid)){const{value:T,message:$}=yi(l)?{value:!!l,message:l}:Pr(l);if(T&&(A[x]={type:vn.required,message:$,ref:b,...P(vn.required,$)},!n))return w($),A}if(!k&&(!ht(u)||!ht(h))){let T,$;const H=Pr(h),Y=Pr(u);if(!ht(v)&&!isNaN(v)){const Z=a.valueAsNumber||v&&+v;ht(H.value)||(T=Z>H.value),ht(Y.value)||($=Z<Y.value)}else{const Z=a.valueAsDate||new Date(v),te=j=>new Date(new Date().toDateString()+" "+j),L=a.type=="time",q=a.type=="week";dn(H.value)&&v&&(T=L?te(v)>te(H.value):q?v>H.value:Z>new Date(H.value)),dn(Y.value)&&v&&($=L?te(v)<te(Y.value):q?v<Y.value:Z<new Date(Y.value))}if((T||$)&&(N(!!T,H.message,Y.message,vn.max,vn.min),!n))return w(A[x].message),A}if((c||d)&&!k&&(dn(v)||s&&Array.isArray(v))){const T=Pr(c),$=Pr(d),H=!ht(T.value)&&v.length>+T.value,Y=!ht($.value)&&v.length<+$.value;if((H||Y)&&(N(H,T.message,$.message),!n))return w(A[x].message),A}if(m&&!k&&dn(v)){const{value:T,message:$}=Pr(m);if(Bi(T)&&!v.match(T)&&(A[x]={type:vn.pattern,message:$,ref:a,...P(vn.pattern,$)},!n))return w($),A}if(f){if(jn(f)){const T=await f(v,t),$=Ad(T,b);if($&&(A[x]={...$,...P(vn.validate,$.message)},!n))return w($.message),A}else if(Ye(f)){let T={};for(const $ in f){if(!St(T)&&!n)break;const H=Ad(await f[$](v,t),b,$);H&&(T={...H,...P($,H.message)},w(H.message),n&&(A[x]=T))}if(!St(T)&&(A[x]={ref:b,...T},!n))return A}}return w(!0),A};function C_(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=We(e)?r++:e[t[r++]];return e}function I_(e){for(const t in e)if(e.hasOwnProperty(t)&&!We(e[t]))return!1;return!0}function Ze(e,t){const n=Array.isArray(t)?t:mc(t)?[t]:Wg(t),r=n.length===1?e:C_(e,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(Ye(r)&&St(r)||Array.isArray(r)&&I_(r))&&Ze(e,n.slice(0,-1)),e}var oo=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}},Ko=e=>ht(e)||!Gg(e);function Fn(e,t){if(Ko(e)||Ko(t))return e===t;if(ur(e)&&ur(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n){const a=e[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=t[s];if(ur(a)&&ur(o)||Ye(a)&&Ye(o)||Array.isArray(a)&&Array.isArray(o)?!Fn(a,o):a!==o)return!1}}return!0}var Jg=e=>e.type==="select-multiple",k_=e=>fc(e)||Hs(e),lo=e=>zi(e)&&e.isConnected,Zg=e=>{for(const t in e)if(jn(e[t]))return!0;return!1};function Vi(e,t={}){const n=Array.isArray(e);if(Ye(e)||n)for(const r in e)Array.isArray(e[r])||Ye(e[r])&&!Zg(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Vi(e[r],t[r])):ht(e[r])||(t[r]=!0);return t}function ex(e,t,n){const r=Array.isArray(e);if(Ye(e)||r)for(const s in e)Array.isArray(e[s])||Ye(e[s])&&!Zg(e[s])?We(t)||Ko(n[s])?n[s]=Array.isArray(e[s])?Vi(e[s],[]):{...Vi(e[s])}:ex(e[s],ht(t)?{}:t[s],n[s]):n[s]=!Fn(e[s],t[s]);return n}var ms=(e,t)=>ex(e,t,Vi(t)),tx=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>We(e)?e:t?e===""?NaN:e&&+e:n&&dn(e)?new Date(e):r?r(e):e;function co(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return hc(t)?t.files:fc(t)?Qg(e.refs).value:Jg(t)?[...t.selectedOptions].map(({value:n})=>n):Hs(t)?Xg(e.refs).value:tx(We(t.value)?e.ref.value:t.value,e)}var A_=(e,t,n,r)=>{const s={};for(const a of e){const o=re(t,a);o&&Fe(s,a,o._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},hs=e=>We(e)?e:Bi(e)?e.source:Ye(e)?Bi(e.value)?e.value.source:e.value:e;const Pd="AsyncFunction";var T_=e=>(!e||!e.validate)&&!!(jn(e.validate)&&e.validate.constructor.name===Pd||Ye(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Pd)),P_=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function _d(e,t,n){const r=re(e,n);if(r||mc(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=re(t,a),l=re(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var __=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,M_=(e,t)=>!Na(re(e,t)).length&&Ze(e,t);const D_={mode:Yt.onSubmit,reValidateMode:Yt.onChange,shouldFocusError:!0};function R_(e={}){let t={...D_,...e},n={submitCount:0,isDirty:!1,isLoading:jn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=Ye(t.defaultValues)||Ye(t.values)?Tt(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Tt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:oo(),array:oo(),state:oo()},m=Ed(t.mode),f=Ed(t.reValidateMode),x=t.criteriaMode===Yt.all,g=I=>D=>{clearTimeout(d),d=setTimeout(I,D)},y=async I=>{if(!e.disabled&&(u.isValid||I)){const D=t.resolver?St((await _()).errors):await P(r,!0);D!==n.isValid&&h.state.next({isValid:D})}},S=(I,D)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((I||Array.from(l.mount)).forEach(O=>{O&&(D?Fe(n.validatingFields,O,D):Ze(n.validatingFields,O))}),h.state.next({validatingFields:n.validatingFields,isValidating:!St(n.validatingFields)}))},v=(I,D=[],O,K,X=!0,G=!0)=>{if(K&&O&&!e.disabled){if(o.action=!0,G&&Array.isArray(re(r,I))){const oe=O(re(r,I),K.argA,K.argB);X&&Fe(r,I,oe)}if(G&&Array.isArray(re(n.errors,I))){const oe=O(re(n.errors,I),K.argA,K.argB);X&&Fe(n.errors,I,oe),M_(n.errors,I)}if(u.touchedFields&&G&&Array.isArray(re(n.touchedFields,I))){const oe=O(re(n.touchedFields,I),K.argA,K.argB);X&&Fe(n.touchedFields,I,oe)}u.dirtyFields&&(n.dirtyFields=ms(s,a)),h.state.next({name:I,isDirty:T(I,D),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Fe(a,I,D)},b=(I,D)=>{Fe(n.errors,I,D),h.state.next({errors:n.errors})},w=I=>{n.errors=I,h.state.next({errors:n.errors,isValid:!1})},A=(I,D,O,K)=>{const X=re(r,I);if(X){const G=re(a,I,We(O)?re(s,I):O);We(G)||K&&K.defaultChecked||D?Fe(a,I,D?G:co(X._f)):Y(I,G),o.mount&&y()}},C=(I,D,O,K,X)=>{let G=!1,oe=!1;const fe={name:I};if(!e.disabled){const R=!!(re(r,I)&&re(r,I)._f&&re(r,I)._f.disabled);if(!O||K){u.isDirty&&(oe=n.isDirty,n.isDirty=fe.isDirty=T(),G=oe!==fe.isDirty);const U=R||Fn(re(s,I),D);oe=!!(!R&&re(n.dirtyFields,I)),U||R?Ze(n.dirtyFields,I):Fe(n.dirtyFields,I,!0),fe.dirtyFields=n.dirtyFields,G=G||u.dirtyFields&&oe!==!U}if(O){const U=re(n.touchedFields,I);U||(Fe(n.touchedFields,I,O),fe.touchedFields=n.touchedFields,G=G||u.touchedFields&&U!==O)}G&&X&&h.state.next(fe)}return G?fe:{}},M=(I,D,O,K)=>{const X=re(n.errors,I),G=u.isValid&&nn(D)&&n.isValid!==D;if(e.delayError&&O?(c=g(()=>b(I,O)),c(e.delayError)):(clearTimeout(d),c=null,O?Fe(n.errors,I,O):Ze(n.errors,I)),(O?!Fn(X,O):X)||!St(K)||G){const oe={...K,...G&&nn(D)?{isValid:D}:{},errors:n.errors,name:I};n={...n,...oe},h.state.next(oe)}},_=async I=>{S(I,!0);const D=await t.resolver(a,t.context,A_(I||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return S(I),D},k=async I=>{const{errors:D}=await _(I);if(I)for(const O of I){const K=re(D,O);K?Fe(n.errors,O,K):Ze(n.errors,O)}else n.errors=D;return D},P=async(I,D,O={valid:!0})=>{for(const K in I){const X=I[K];if(X){const{_f:G,...oe}=X;if(G){const fe=l.array.has(G.name),R=X._f&&T_(X._f);R&&u.validatingFields&&S([K],!0);const U=await Td(X,a,x,t.shouldUseNativeValidation&&!D,fe);if(R&&u.validatingFields&&S([K]),U[G.name]&&(O.valid=!1,D))break;!D&&(re(U,G.name)?fe?N_(n.errors,U,G.name):Fe(n.errors,G.name,U[G.name]):Ze(n.errors,G.name))}!St(oe)&&await P(oe,D,O)}}return O.valid},N=()=>{for(const I of l.unMount){const D=re(r,I);D&&(D._f.refs?D._f.refs.every(O=>!lo(O)):!lo(D._f.ref))&&ae(I)}l.unMount=new Set},T=(I,D)=>!e.disabled&&(I&&D&&Fe(a,I,D),!Fn(Q(),s)),$=(I,D,O)=>Kg(I,l,{...o.mount?a:We(D)?s:dn(I)?{[I]:D}:D},O,D),H=I=>Na(re(o.mount?a:s,I,e.shouldUnregister?re(s,I,[]):[])),Y=(I,D,O={})=>{const K=re(r,I);let X=D;if(K){const G=K._f;G&&(!G.disabled&&Fe(a,I,tx(D,G)),X=zi(G.ref)&&ht(D)?"":D,Jg(G.ref)?[...G.ref.options].forEach(oe=>oe.selected=X.includes(oe.value)):G.refs?Hs(G.ref)?G.refs.length>1?G.refs.forEach(oe=>(!oe.defaultChecked||!oe.disabled)&&(oe.checked=Array.isArray(X)?!!X.find(fe=>fe===oe.value):X===oe.value)):G.refs[0]&&(G.refs[0].checked=!!X):G.refs.forEach(oe=>oe.checked=oe.value===X):hc(G.ref)?G.ref.value="":(G.ref.value=X,G.ref.type||h.values.next({name:I,values:{...a}})))}(O.shouldDirty||O.shouldTouch)&&C(I,X,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&j(I)},Z=(I,D,O)=>{for(const K in D){const X=D[K],G=`${I}.${K}`,oe=re(r,G);(l.array.has(I)||Ye(X)||oe&&!oe._f)&&!ur(X)?Z(G,X,O):Y(G,X,O)}},te=(I,D,O={})=>{const K=re(r,I),X=l.array.has(I),G=Tt(D);Fe(a,I,G),X?(h.array.next({name:I,values:{...a}}),(u.isDirty||u.dirtyFields)&&O.shouldDirty&&h.state.next({name:I,dirtyFields:ms(s,a),isDirty:T(I,G)})):K&&!K._f&&!ht(G)?Z(I,G,O):Y(I,G,O),Nd(I,l)&&h.state.next({...n}),h.values.next({name:o.mount?I:void 0,values:{...a}})},L=async I=>{o.mount=!0;const D=I.target;let O=D.name,K=!0;const X=re(r,O),G=()=>D.type?co(X._f):f_(I),oe=fe=>{K=Number.isNaN(fe)||ur(fe)&&isNaN(fe.getTime())||Fn(fe,re(a,O,fe))};if(X){let fe,R;const U=G(),le=I.type===jd.BLUR||I.type===jd.FOCUS_OUT,he=!P_(X._f)&&!t.resolver&&!re(n.errors,O)&&!X._f.deps||__(le,re(n.touchedFields,O),n.isSubmitted,f,m),we=Nd(O,l,le);Fe(a,O,U),le?(X._f.onBlur&&X._f.onBlur(I),c&&c(0)):X._f.onChange&&X._f.onChange(I);const nt=C(O,U,le,!1),$t=!St(nt)||we;if(!le&&h.values.next({name:O,type:I.type,values:{...a}}),he)return u.isValid&&(e.mode==="onBlur"?le&&y():y()),$t&&h.state.next({name:O,...we?{}:nt});if(!le&&we&&h.state.next({...n}),t.resolver){const{errors:dt}=await _([O]);if(oe(U),K){const xn=_d(n.errors,r,O),zt=_d(dt,r,xn.name||O);fe=zt.error,O=zt.name,R=St(dt)}}else S([O],!0),fe=(await Td(X,a,x,t.shouldUseNativeValidation))[O],S([O]),oe(U),K&&(fe?R=!1:u.isValid&&(R=await P(r,!0)));K&&(X._f.deps&&j(X._f.deps),M(O,R,fe,nt))}},q=(I,D)=>{if(re(n.errors,D)&&I.focus)return I.focus(),1},j=async(I,D={})=>{let O,K;const X=Es(I);if(t.resolver){const G=await k(We(I)?I:X);O=St(G),K=I?!X.some(oe=>re(G,oe)):O}else I?(K=(await Promise.all(X.map(async G=>{const oe=re(r,G);return await P(oe&&oe._f?{[G]:oe}:oe)}))).every(Boolean),!(!K&&!n.isValid)&&y()):K=O=await P(r);return h.state.next({...!dn(I)||u.isValid&&O!==n.isValid?{}:{name:I},...t.resolver||!I?{isValid:O}:{},errors:n.errors}),D.shouldFocus&&!K&&Ns(r,q,I?X:l.mount),K},Q=I=>{const D={...o.mount?a:s};return We(I)?D:dn(I)?re(D,I):I.map(O=>re(D,O))},ie=(I,D)=>({invalid:!!re((D||n).errors,I),isDirty:!!re((D||n).dirtyFields,I),error:re((D||n).errors,I),isValidating:!!re(n.validatingFields,I),isTouched:!!re((D||n).touchedFields,I)}),E=I=>{I&&Es(I).forEach(D=>Ze(n.errors,D)),h.state.next({errors:I?n.errors:{}})},ce=(I,D,O)=>{const K=(re(r,I,{_f:{}})._f||{}).ref,X=re(n.errors,I)||{},{ref:G,message:oe,type:fe,...R}=X;Fe(n.errors,I,{...R,...D,ref:K}),h.state.next({name:I,errors:n.errors,isValid:!1}),O&&O.shouldFocus&&K&&K.focus&&K.focus()},Pe=(I,D)=>jn(I)?h.values.subscribe({next:O=>I($(void 0,D),O)}):$(I,D,!0),ae=(I,D={})=>{for(const O of I?Es(I):l.mount)l.mount.delete(O),l.array.delete(O),D.keepValue||(Ze(r,O),Ze(a,O)),!D.keepError&&Ze(n.errors,O),!D.keepDirty&&Ze(n.dirtyFields,O),!D.keepTouched&&Ze(n.touchedFields,O),!D.keepIsValidating&&Ze(n.validatingFields,O),!t.shouldUnregister&&!D.keepDefaultValue&&Ze(s,O);h.values.next({values:{...a}}),h.state.next({...n,...D.keepDirty?{isDirty:T()}:{}}),!D.keepIsValid&&y()},Ie=({disabled:I,name:D,field:O,fields:K,value:X})=>{if(nn(I)&&o.mount||I){const G=I?void 0:We(X)?co(O?O._f:re(K,D)._f):X;Fe(a,D,G),C(D,G,!1,!1,!0)}},V=(I,D={})=>{let O=re(r,I);const K=nn(D.disabled)||nn(e.disabled);return Fe(r,I,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:I}},name:I,mount:!0,...D}}),l.mount.add(I),O?Ie({field:O,disabled:nn(D.disabled)?D.disabled:e.disabled,name:I,value:D.value}):A(I,!0,D.value),{...K?{disabled:D.disabled||e.disabled}:{},...t.progressive?{required:!!D.required,min:hs(D.min),max:hs(D.max),minLength:hs(D.minLength),maxLength:hs(D.maxLength),pattern:hs(D.pattern)}:{},name:I,onChange:L,onBlur:L,ref:X=>{if(X){V(I,D),O=re(r,I);const G=We(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,oe=k_(G),fe=O._f.refs||[];if(oe?fe.find(R=>R===G):G===O._f.ref)return;Fe(r,I,{_f:{...O._f,...oe?{refs:[...fe.filter(lo),G,...Array.isArray(re(s,I))?[{}]:[]],ref:{type:G.type,name:I}}:{ref:G}}}),A(I,!1,void 0,G)}else O=re(r,I,{}),O._f&&(O._f.mount=!1),(t.shouldUnregister||D.shouldUnregister)&&!(g_(l.array,I)&&o.action)&&l.unMount.add(I)}}},ne=()=>t.shouldFocusError&&Ns(r,q,l.mount),ye=I=>{nn(I)&&(h.state.next({disabled:I}),Ns(r,(D,O)=>{const K=re(r,O);K&&(D.disabled=K._f.disabled||I,Array.isArray(K._f.refs)&&K._f.refs.forEach(X=>{X.disabled=K._f.disabled||I}))},0,!1))},Te=(I,D)=>async O=>{let K;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let X=Tt(a);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:G,values:oe}=await _();n.errors=G,X=oe}else await P(r);if(Ze(n.errors,"root"),St(n.errors)){h.state.next({errors:{}});try{await I(X,O)}catch(G){K=G}}else D&&await D({...n.errors},O),ne(),setTimeout(ne);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:St(n.errors)&&!K,submitCount:n.submitCount+1,errors:n.errors}),K)throw K},bt=(I,D={})=>{re(r,I)&&(We(D.defaultValue)?te(I,Tt(re(s,I))):(te(I,D.defaultValue),Fe(s,I,Tt(D.defaultValue))),D.keepTouched||Ze(n.touchedFields,I),D.keepDirty||(Ze(n.dirtyFields,I),n.isDirty=D.defaultValue?T(I,Tt(re(s,I))):T()),D.keepError||(Ze(n.errors,I),u.isValid&&y()),h.state.next({...n}))},Qt=(I,D={})=>{const O=I?Tt(I):s,K=Tt(O),X=St(I),G=X?s:K;if(D.keepDefaultValues||(s=O),!D.keepValues){if(D.keepDirtyValues){const oe=new Set([...l.mount,...Object.keys(ms(s,a))]);for(const fe of Array.from(oe))re(n.dirtyFields,fe)?Fe(G,fe,re(a,fe)):te(fe,re(G,fe))}else{if(dc&&We(I))for(const oe of l.mount){const fe=re(r,oe);if(fe&&fe._f){const R=Array.isArray(fe._f.refs)?fe._f.refs[0]:fe._f.ref;if(zi(R)){const U=R.closest("form");if(U){U.reset();break}}}}r={}}a=e.shouldUnregister?D.keepDefaultValues?Tt(s):{}:Tt(G),h.array.next({values:{...G}}),h.values.next({values:{...G}})}l={mount:D.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!D.keepIsValid||!!D.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:D.keepSubmitCount?n.submitCount:0,isDirty:X?!1:D.keepDirty?n.isDirty:!!(D.keepDefaultValues&&!Fn(I,s)),isSubmitted:D.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:D.keepDirtyValues?D.keepDefaultValues&&a?ms(s,a):n.dirtyFields:D.keepDefaultValues&&I?ms(s,I):D.keepDirty?n.dirtyFields:{},touchedFields:D.keepTouched?n.touchedFields:{},errors:D.keepErrors?n.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ct=(I,D)=>Qt(jn(I)?I(a):I,D);return{control:{register:V,unregister:ae,getFieldState:ie,handleSubmit:Te,setError:ce,_executeSchema:_,_getWatch:$,_getDirty:T,_updateValid:y,_removeUnmounted:N,_updateFieldArray:v,_updateDisabledField:Ie,_getFieldArray:H,_reset:Qt,_resetDefaultValues:()=>jn(t.defaultValues)&&t.defaultValues().then(I=>{Ct(I,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:I=>{n={...n,...I}},_disableForm:ye,_subjects:h,_proxyFormState:u,_setErrors:w,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(I){o=I},get _defaultValues(){return s},get _names(){return l},set _names(I){l=I},get _formState(){return n},set _formState(I){n=I},get _options(){return t},set _options(I){t={...t,...I}}},trigger:j,register:V,handleSubmit:Te,watch:Pe,setValue:te,getValues:Q,reset:Ct,resetField:bt,clearErrors:E,unregister:ae,setError:ce,setFocus:(I,D={})=>{const O=re(r,I),K=O&&O._f;if(K){const X=K.refs?K.refs[0]:K.ref;X.focus&&(X.focus(),D.shouldSelect&&X.select())}},getFieldState:ie}}function O_(e={}){const t=F.useRef(),n=F.useRef(),[r,s]=F.useState({isDirty:!1,isValidating:!1,isLoading:jn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:jn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...R_(e),formState:r});const a=t.current.control;return a._options=e,Yg({subject:a._subjects.state,next:o=>{w_(o,a._proxyFormState,a._updateFormState)&&s({...a._formState})}}),F.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),F.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),F.useEffect(()=>{e.values&&!Fn(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,s(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),F.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),F.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),F.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),F.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[r]),t.current.formState=b_(r,a),t.current}const L_=Zi("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xo=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:se(L_({variant:t}),e),...n}));Xo.displayName="Alert";const F_=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:se("mb-1 font-medium leading-none tracking-tight",e),...t}));F_.displayName="AlertTitle";const Qo=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("text-sm [&_p]:leading-relaxed",e),...t}));Qo.displayName="AlertDescription";function $_(e,t=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:m,children:f,...x}=h,g=(m==null?void 0:m[e][c])||l,y=p.useMemo(()=>x,Object.values(x));return i.jsx(g.Provider,{value:y,children:f})}function u(h,m){const f=(m==null?void 0:m[e][c])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const s=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,z_(s,...t)]}function z_(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var pc="Progress",gc=100,[B_,G2]=$_(pc),[V_,U_]=B_(pc),nx=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=q_,...o}=e;(s||s===0)&&!Md(s)&&console.error(H_(`${s}`,"Progress"));const l=Md(s)?s:gc;r!==null&&!Dd(r,l)&&console.error(G_(`${r}`,"Progress"));const c=Dd(r,l)?r:null,d=Ui(c)?a(c,l):void 0;return i.jsx(V_,{scope:n,value:c,max:l,children:i.jsx(Ke.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ui(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":ix(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});nx.displayName=pc;var rx="ProgressIndicator",sx=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=U_(rx,n);return i.jsx(Ke.div,{"data-state":ix(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});sx.displayName=rx;function q_(e,t){return`${Math.round(e/t*100)}%`}function ix(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ui(e){return typeof e=="number"}function Md(e){return Ui(e)&&!isNaN(e)&&e>0}function Dd(e,t){return Ui(e)&&!isNaN(e)&&e<=t&&e>=0}function H_(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gc}\`.`}function G_(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gc} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ax=nx,W_=sx;const ox=p.forwardRef(({className:e,value:t,...n},r)=>i.jsx(ax,{ref:r,className:se("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(W_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ox.displayName=ax.displayName;const Y_=async(e,t={})=>{const{maxWidth:n=1920,maxHeight:r=1080,quality:s=.8,format:a="jpeg",maxSizeKB:o=2048}=t;return new Promise((l,c)=>{const d=new Image,u=document.createElement("canvas"),h=u.getContext("2d");if(!h){c(new Error("Impossible de cr√©er le contexte Canvas"));return}d.onload=()=>{const{width:m,height:f}=K_(d.width,d.height,n,r);u.width=m,u.height=f,h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(d,0,0,m,f);const x=`image/${a}`;u.toBlob(async g=>{if(!g){c(new Error("√âchec de la compression"));return}let y=g;g.size>o*1024&&a!=="png"&&(y=await X_(u,x,o*1024,s));const v={file:new File([y],`compressed_${e.name.replace(/\.[^/.]+$/,"")}.${a}`,{type:x}),originalSize:e.size,compressedSize:y.size,compressionRatio:Math.round((1-y.size/e.size)*100),width:m,height:f};l(v)},x,s)},d.onerror=()=>{c(new Error("Impossible de charger l'image"))},d.src=URL.createObjectURL(e)})},K_=(e,t,n,r)=>{let{width:s,height:a}={width:e,height:t};if(s<=n&&a<=r)return{width:s,height:a};const o=n/s,l=r/a,c=Math.min(o,l);return{width:Math.round(s*c),height:Math.round(a*c)}},X_=async(e,t,n,r)=>{let s=r,a=null;for(;s>.1&&(a=await new Promise(o=>{e.toBlob(o,t,s)}),!(a&&a.size<=n));)s-=.1;return a||new Blob},Q_=e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>50*1024*1024?{valid:!1,error:"Fichier trop volumineux. Maximum 50MB."}:{valid:!0}:{valid:!1,error:"Format non support√©. Utilisez JPG, PNG ou WebP."},uo=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${parseFloat((e/Math.pow(t,r)).toFixed(1))} ${n[r]}`};function J_(e,t){let n;const r=(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)};return r.cancel=()=>{clearTimeout(n)},r}const Z_=({key:e,data:t,delay:n=1e3,enabled:r=!0})=>{const s=p.useRef(null),a=c=>{try{const d=JSON.stringify({data:c,timestamp:Date.now(),version:"1.0"});localStorage.setItem(`draft_${e}`,d),console.log(`[AutoSave] Brouillon sauvegard√©: ${e}`)}catch(d){console.error(`[AutoSave] Erreur sauvegarde ${e}:`,d)}},o=()=>{try{const c=localStorage.getItem(`draft_${e}`);if(!c)return null;const d=JSON.parse(c),u=24*60*60*1e3;return Date.now()-d.timestamp>u?(localStorage.removeItem(`draft_${e}`),null):(console.log(`[AutoSave] Brouillon r√©cup√©r√©: ${e}`),d.data)}catch(c){return console.error(`[AutoSave] Erreur r√©cup√©ration ${e}:`,c),null}},l=()=>{try{localStorage.removeItem(`draft_${e}`),console.log(`[AutoSave] Brouillon supprim√©: ${e}`)}catch(c){console.error(`[AutoSave] Erreur suppression ${e}:`,c)}};return p.useEffect(()=>(s.current=J_(a,n),()=>{s.current&&s.current.cancel()}),[n]),p.useEffect(()=>{var d;!r||!t||typeof t=="object"&&Object.keys(t).length===0||(d=s.current)==null||d.call(s,t)},[t,r]),{loadDraft:o,clearDraft:l,hasDraft:()=>{try{return localStorage.getItem(`draft_${e}`)!==null}catch{return!1}}}},e2=({onSubmit:e})=>{const[t,n]=p.useState(!1),[r,s]=p.useState(!1),[a,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(""),[h,m]=p.useState(""),[f,x]=p.useState(!1),[g,y]=p.useState(0),[S,v]=p.useState(null),[b,w]=p.useState(!1),A=p.useRef(null),{register:C,handleSubmit:M,reset:_,setValue:k,formState:{errors:P},control:N}=O_(),T=j_({control:N}),{loadDraft:$,clearDraft:H,hasDraft:Y}=Z_({key:"contribution_form",data:{...T,selectedEventId:d,selectedLocationId:h,imagePreview:a?"has_image":null},delay:2e3,enabled:!r});p.useEffect(()=>{$()&&Y()&&w(!0)},[$,Y]),p.useEffect(()=>{const L=dp();L&&(c(L),console.log("[ContributionForm] Contexte re√ßu:",L),L.type==="event"?(k("eventId",L.id),u(L.id),console.log("[ContributionForm] Contexte √©v√©nement d√©fini:",L.id),console.log("[ContributionForm] Liste des √©v√©nements disponibles:",Lt.map(q=>q.id)),console.log("[ContributionForm] L'ID de l'√©v√©nement est-il dans la liste ?",Lt.some(q=>q.id===L.id)),L.locationId&&(k("locationId",L.locationId),m(L.locationId),console.log("[ContributionForm] Lieu associ√© √† l'√©v√©nement pr√©-rempli:",L.locationId),console.log("[ContributionForm] Le lieu associ√© est-il dans la liste ?",ct.some(q=>q.id===L.locationId)))):L.type==="location"&&(k("locationId",L.id),m(L.id),console.log("[ContributionForm] Contexte lieu d√©fini:",L.id),console.log("[ContributionForm] Liste des lieux disponibles:",ct.map(j=>j.id)),console.log("[ContributionForm] L'ID du lieu est-il dans la liste ?",ct.some(j=>j.id===L.id)),ct.some(j=>j.id===L.id)||console.warn("[ContributionForm] ATTENTION: L'ID du lieu dans le contexte ne correspond √† aucun lieu disponible dans la liste d√©roulante"))),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"open_form"})},[k]);const Z=async L=>{var q,j;console.log("üî• [handleImageChange] FONCTION APPEL√âE !",(q=L.target.files)==null?void 0:q.length,"fichier(s)");try{const Q=(j=L.target.files)==null?void 0:j[0];if(!Q)return;const ie=Q_(Q);if(!ie.valid){alert(ie.error);return}console.log("[ContributionForm] D√©but compression:",Q.name,uo(Q.size)),x(!0),y(0);const E=setInterval(()=>{y(ce=>Math.min(ce+10,90))},100);try{const ce=await Y_(Q,{maxWidth:1920,maxHeight:1080,quality:.8,format:"jpeg",maxSizeKB:1024});clearInterval(E),y(100),v(ce),console.log("[ContributionForm] Compression termin√©e:",{original:uo(ce.originalSize),compressed:uo(ce.compressedSize),ratio:ce.compressionRatio+"%",dimensions:`${ce.width}x${ce.height}`});const Pe=new FileReader;Pe.onload=V=>{V.target&&V.target.result&&o(V.target.result)},Pe.readAsDataURL(ce.file);const ae=new FormData;ae.append("file",ce.file),ae.append("upload_preset","collectif_photos"),ae.append("cloud_name","dpatqkgsc"),console.log("[ContributionForm] Requ√™te Cloudinary avec image compress√©e:",{url:"https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",preset:"collectif_photos",fileSize:ce.compressedSize,fileType:ce.file.type});const Ie=await fetch("https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload",{method:"POST",body:ae});if(console.log("[ContributionForm] Cloudinary response status:",Ie.status,Ie.statusText),Ie.ok){const V=await Ie.json();console.log("[ContributionForm] Cloudinary response data:",V),k("imageUrl",V.secure_url),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"image_uploaded",compression_ratio:ce.compressionRatio,original_size:ce.originalSize,compressed_size:ce.compressedSize})}else{const V=await Ie.text();throw console.error("[ContributionForm] Erreur Cloudinary:",V),new Error(`Erreur Cloudinary: ${Ie.status}`)}}catch(ce){clearInterval(E),console.error("[ContributionForm] Erreur de compression:",ce),alert("Erreur lors de la compression de l'image. Veuillez r√©essayer.")}}catch(Q){console.error("[ContributionForm] Erreur g√©n√©rale:",Q),alert("Erreur lors du traitement de l'image. Veuillez r√©essayer.")}finally{x(!1),y(0)}},te=async L=>{var q,j;console.log("[ContributionForm] === D√âBUT DE SOUMISSION ==="),console.log("[ContributionForm] Donn√©es re√ßues du formulaire:",L);try{n(!0),console.log("[ContributionForm] √âtat de soumission activ√©"),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"submit_start"});const Q=L.imageUrl||((j=(q=A.current)==null?void 0:q.files)==null?void 0:j[0]),ie=Q?"photo":"testimonial";console.log("[ContributionForm] Type d√©termin√© automatiquement:",ie,Q?"(avec image)":"(sans image)"),L.type=ie,L.imageUrl?console.log("[ContributionForm] URL Cloudinary disponible:",L.imageUrl):console.log("[ContributionForm] Aucune URL Cloudinary disponible"),console.log("[ContributionForm] Contexte avant enrichissement:",l),L=pE(L),console.log("[ContributionForm] Donn√©es apr√®s enrichissement avec contexte:",L),console.log("[ContributionForm] Appel du service de soumission...");const E=await cE(L);console.log("[ContributionForm] Contribution soumise avec succ√®s:",E),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"success",entry_id:E.id,type:E.type}),jt({title:"Contribution ajout√©e",description:"Votre contribution est maintenant visible."}),s(!0),setTimeout(()=>{console.log("[ContributionForm] R√©initialisation du formulaire..."),_(),o(null),fE(),c(null),u(""),m(""),s(!1),console.log("[ContributionForm] Formulaire r√©initialis√©")},5e3),console.log("[ContributionForm] Notification du composant parent..."),e(E),console.log("[ContributionForm] === SOUMISSION TERMIN√âE AVEC SUCC√àS ===")}catch(Q){console.error("[ContributionForm] === ERREUR LORS DE LA SOUMISSION ==="),console.error("[ContributionForm] Erreur d√©taill√©e:",Q),console.error("[ContributionForm] Stack trace:",Q instanceof Error?Q.stack:"N/A"),alert("Une erreur est survenue lors de l'envoi de votre contribution. Veuillez r√©essayer."),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"failure"})}finally{n(!1),console.log("[ContributionForm] √âtat de soumission d√©sactiv√©")}};return i.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6 pb-20",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Partagez votre exp√©rience"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Contribuez √† la m√©moire collective de l'√Æle Feydeau en partageant vos photos et t√©moignages."}),r&&i.jsxs(Xo,{className:"mt-4 bg-blue-50 border-blue-300 border-2",children:[i.jsx(ho,{className:"h-5 w-5 text-blue-600"}),i.jsxs(Qo,{className:"space-y-3",children:[i.jsx("div",{className:"font-bold text-blue-900 text-lg",children:"üì§ Contribution envoy√©e !"}),i.jsxs("div",{className:"bg-blue-100 p-3 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium",children:[i.jsx(ho,{className:"h-4 w-4"}),i.jsx("span",{children:"‚è±Ô∏è Votre photo sera visible dans 1-2 minutes"})]}),i.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Le temps que notre syst√®me traite automatiquement votre contribution"})]}),i.jsx("div",{className:"text-sm text-blue-600",children:"‚ú® Merci de contribuer √† la m√©moire collective de l'√Æle Feydeau !"})]})]}),l&&!r&&i.jsxs(Xo,{className:"mt-4 bg-blue-50 border-blue-200",children:[i.jsx(es,{className:"h-4 w-4 text-blue-500"}),i.jsxs(Qo,{children:["Votre contribution sera associ√©e √† ",l.type==="event"?"l'√©v√©nement":"l'emplacement"," ",i.jsx("strong",{children:l.name})]})]})]}),!r&&i.jsxs("form",{onSubmit:M(te),className:"space-y-6",autoComplete:"off","data-form-type":"contribution",noValidate:!0,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"image",children:"Photo"}),i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>{var L;return(L=A.current)==null?void 0:L.click()},children:[a?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:a,alt:"Aper√ßu",className:"max-h-64 mx-auto rounded"}),i.jsx(J,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:L=>{L.stopPropagation(),o(null),A.current&&(A.current.value="")},children:"Changer l'image"})]}):i.jsxs("div",{className:"py-8 flex flex-col items-center gap-2",children:[i.jsx(ry,{className:"h-8 w-8 text-slate-400"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Cliquez pour s√©lectionner une image ou glissez-d√©posez"}),f&&i.jsx(ox,{value:g,max:100})]}),i.jsx("input",{type:"file",ref:A,accept:"image/*",capture:"environment",className:"hidden",onChange:Z,"data-form-type":"contribution-image",autoComplete:"off"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"description",children:"Description ou t√©moignage"}),i.jsx(Oi,{id:"description",placeholder:"D√©crivez votre photo ou partagez votre t√©moignage...",autoComplete:"off","data-form-type":"contribution-description",...C("description")})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"displayName",children:"Nom d'affichage (optionnel)"}),i.jsx(Kt,{id:"displayName",placeholder:"Votre nom ou pseudonyme",defaultValue:"Anonyme",autoComplete:"off","data-form-type":"contribution-displayname",...C("displayName")}),i.jsx("p",{className:"text-xs text-slate-500",children:"Laissez vide pour contribuer anonymement"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"eventId",children:"√âv√©nement associ√© (optionnel)"}),i.jsxs(Ds,{value:d,onValueChange:L=>{u(L),k("eventId",L)},children:[i.jsx(Xr,{children:i.jsx(Rs,{placeholder:"S√©lectionnez un √©v√©nement"})}),i.jsx(Qr,{children:Lt.map(L=>i.jsx(pr,{value:L.id,children:L.title},L.id))})]}),i.jsx("input",{type:"hidden",...C("eventId"),value:d,"data-form-type":"contribution-event",autoComplete:"off"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ve,{htmlFor:"locationId",children:"Lieu associ√© (optionnel)"}),i.jsxs(Ds,{value:h,onValueChange:L=>{m(L),k("locationId",L)},children:[i.jsx(Xr,{children:i.jsx(Rs,{placeholder:"S√©lectionnez un lieu"})}),i.jsx(Qr,{children:ct.map(L=>i.jsx(pr,{value:L.id,children:L.name},L.id))})]}),i.jsx("input",{type:"hidden",...C("locationId"),value:h,"data-form-type":"contribution-location",autoComplete:"off"})]}),i.jsx(J,{type:"submit",className:"w-full",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Yr,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Partager"})]})]})},t2=({src:e,alt:t,className:n,placeholderSrc:r,blurDataURL:s,onLoad:a,onError:o,priority:l=!1})=>{const[c,d]=p.useState(!1),[u,h]=p.useState(l),[m,f]=p.useState(!e),x=p.useRef(null),g=p.useRef(null);console.log(`[LazyImage] Initialisation: ${e}, priority: ${l}, isInView: ${u}`),(!e||e==="undefined")&&console.warn(`[LazyImage] URL d'image invalide: ${e}`),p.useEffect(()=>{if(l){console.log(`[LazyImage] Priority image, skip observer: ${e}`);return}console.log(`[LazyImage] Setting up observer for: ${e}`);const b=new IntersectionObserver(w=>{w.forEach(A=>{console.log(`[LazyImage] Observer callback: ${e}, isIntersecting: ${A.isIntersecting}`),A.isIntersecting&&(h(!0),b.unobserve(A.target))})},{rootMargin:"50px",threshold:.1});return g.current=b,x.current&&(console.log(`[LazyImage] Observing element: ${e}`),b.observe(x.current)),()=>{g.current&&g.current.disconnect()}},[l,e]);const y=()=>{console.log(`[LazyImage] Image loaded: ${e}`),d(!0),a==null||a()},S=b=>{console.error(`[LazyImage] Image error: ${e}`,b),f(!0),o==null||o(b.nativeEvent)},v="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==";return console.log(`[LazyImage] Render state: isInView=${u}, isLoaded=${c}, hasError=${m}`),i.jsxs("div",{ref:x,className:se("relative overflow-hidden",n),children:[!c&&i.jsx("div",{className:"absolute inset-0 bg-slate-200 animate-pulse",style:{backgroundImage:`url(${s||v})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(10px)",transform:"scale(1.1)"}}),u&&e&&e!=="undefined"&&i.jsx("img",{src:e,alt:t,className:se("w-full h-full object-cover transition-opacity duration-300",c?"opacity-100":"opacity-0"),onLoad:y,onError:S,loading:l?"eager":"lazy"}),u&&!c&&!m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"})}),m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-100",children:i.jsxs("div",{className:"text-center text-slate-500",children:[i.jsx("div",{className:"text-2xl mb-2",children:"üì∑"}),i.jsx("div",{className:"text-sm",children:"Image indisponible"})]})})]})},n2=({entries:e,onEntryClick:t})=>{const n={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.5}})};return i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pb-20",children:e.map((r,s)=>i.jsxs(be.div,{custom:s,variants:n,initial:"hidden",animate:"visible",className:"relative rounded-lg overflow-hidden",onClick:()=>t(r),children:[r.type==="photo"&&(r.thumbnailUrl||r.imageUrl)?i.jsxs("div",{className:"aspect-square relative",children:[i.jsx(t2,{src:r.thumbnailUrl||r.imageUrl,alt:r.description||"Photo communautaire",className:"w-full h-full object-cover",priority:s<6}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-100 md:opacity-0 md:hover:opacity-100 transition-opacity flex flex-col justify-end p-2 pb-8",children:i.jsx("p",{className:"text-white text-sm line-clamp-2",children:r.description||r.content})})]}):r.type==="photo"?i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:"üì∑"}),i.jsx("p",{className:"text-sm text-center text-slate-500",children:"Image non disponible"}),i.jsx("p",{className:"text-xs text-center text-slate-400 mt-1 line-clamp-2",children:r.content})]}):i.jsxs("div",{className:"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col justify-center",children:[i.jsxs("div",{className:"text-center mb-2",children:[i.jsx("div",{className:"text-2xl mb-1",children:"üí¨"}),i.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"T√©moignage"})]}),i.jsx("p",{className:"text-sm line-clamp-4 text-center flex-grow",children:r.content&&r.content.trim()||r.description&&r.description.trim()||"Contenu disponible"})]}),i.jsx(Qn,{entryId:r.id,variant:"compact"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-xs",children:i.jsxs("div",{className:"truncate",children:[i.jsx("span",{children:r.displayName}),i.jsx("span",{className:"text-xs text-slate-300 ml-1",children:(()=>{try{if(!r.timestamp)return"";const a=new Date(r.timestamp);return isNaN(a.getTime())?"":ba(a,"d MMM",{locale:wa})}catch(a){return console.warn("[GalleryGrid] Invalid timestamp:",r.timestamp,a),""}})()})]})})]},r.id))})},r2="Left",s2="Right",i2="Up",a2="Down",Mr={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Jo={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Rd="mousemove",Od="mouseup",o2="touchend",l2="touchmove",c2="touchstart";function u2(e,t,n,r){return e>t?n>0?s2:r2:r>0?a2:i2}function Ld(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),s=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,s]}function d2(e,t){const n=u=>{const h="touches"in u;h&&u.touches.length>1||e((m,f)=>{f.trackMouse&&!h&&(document.addEventListener(Rd,r),document.addEventListener(Od,o));const{clientX:x,clientY:g}=h?u.touches[0]:u,y=Ld([x,g],f.rotationAngle);return f.onTouchStartOrOnMouseDown&&f.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},m),Jo),{initial:y.slice(),xy:y,start:u.timeStamp||0})})},r=u=>{e((h,m)=>{const f="touches"in u;if(f&&u.touches.length>1)return h;if(u.timeStamp-h.start>m.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:x,clientY:g}=f?u.touches[0]:u,[y,S]=Ld([x,g],m.rotationAngle),v=y-h.xy[0],b=S-h.xy[1],w=Math.abs(v),A=Math.abs(b),C=(u.timeStamp||0)-h.start,M=Math.sqrt(w*w+A*A)/(C||1),_=[v/(C||1),b/(C||1)],k=u2(w,A,v,b),P=typeof m.delta=="number"?m.delta:m.delta[k.toLowerCase()]||Mr.delta;if(w<P&&A<P&&!h.swiping)return h;const N={absX:w,absY:A,deltaX:v,deltaY:b,dir:k,event:u,first:h.first,initial:h.initial,velocity:M,vxvy:_};N.first&&m.onSwipeStart&&m.onSwipeStart(N),m.onSwiping&&m.onSwiping(N);let T=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${k}`])&&(T=!0),T&&m.preventScrollOnSwipe&&m.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:N,swiping:!0})})},s=u=>{e((h,m)=>{let f;if(h.swiping&&h.eventData){if(u.timeStamp-h.start<m.swipeDuration){f=Object.assign(Object.assign({},h.eventData),{event:u}),m.onSwiped&&m.onSwiped(f);const x=m[`onSwiped${f.dir}`];x&&x(f)}}else m.onTap&&m.onTap({event:u});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},h),Jo),{eventData:f})})},a=()=>{document.removeEventListener(Rd,r),document.removeEventListener(Od,o)},o=u=>{a(),s(u)},l=(u,h)=>{let m=()=>{};if(u&&u.addEventListener){const f=Object.assign(Object.assign({},Mr.touchEventOptions),h.touchEventOptions),x=[[c2,n,f],[l2,r,Object.assign(Object.assign({},f),h.preventScrollOnSwipe?{passive:!1}:{})],[o2,s,f]];x.forEach(([g,y,S])=>u.addEventListener(g,y,S)),m=()=>x.forEach(([g,y])=>u.removeEventListener(g,y))}return m},d={ref:u=>{u!==null&&e((h,m)=>{if(h.el===u)return h;const f={};return h.el&&h.el!==u&&h.cleanUpTouch&&(h.cleanUpTouch(),f.cleanUpTouch=void 0),m.trackTouch&&u&&(f.cleanUpTouch=l(u,m)),Object.assign(Object.assign(Object.assign({},h),{el:u}),f)})}};return t.trackMouse&&(d.onMouseDown=n),[d,l]}function m2(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function lx(e){const{trackMouse:t}=e,n=p.useRef(Object.assign({},Jo)),r=p.useRef(Object.assign({},Mr)),s=p.useRef(Object.assign({},r.current));s.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Mr),e);let a;for(a in Mr)r.current[a]===void 0&&(r.current[a]=Mr[a]);const[o,l]=p.useMemo(()=>d2(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=m2(n.current,r.current,s.current,l),o}const h2=()=>typeof window<"u"&&window.location.hostname.includes("github.io")?"/1Hall1Artiste":"",f2=({src:e,alt:t,className:n="",fallbackSrc:r=`${h2()}/images/placeholder-image.jpg`})=>{const[s,a]=p.useState(""),[o,l]=p.useState(!0),[c,d]=p.useState(!1),[u,h]=p.useState(0);if(p.useEffect(()=>{(()=>{l(!0),d(!1);try{if(!e){console.error("LocalImage: src prop is undefined or empty"),d(!0),l(!1);return}if(e&&typeof e=="string"&&e.startsWith("local:")){const x=e.substring(6),g=localStorage.getItem(`community_image_${x}`);g?a(g):(console.error(`Image non trouv√©e dans localStorage: ${x}`),caches&&"match"in caches&&u===0?caches.open("image-cache").then(y=>{y.match(`community-images/${x}`).then(S=>{S?S.blob().then(v=>{const b=URL.createObjectURL(v);a(b),h(w=>w+1)}):d(!0)})}).catch(()=>{d(!0)}):d(!0))}else a(e)}catch(x){console.error("Erreur lors du chargement de l'image:",x),d(!0)}finally{l(!1)}})()},[e,u]),o)return i.jsx("div",{className:`bg-gray-200 animate-pulse ${n}`,children:i.jsx("span",{className:"sr-only",children:"Chargement..."})});if(c){const f=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:f,alt:t,className:n,onError:x=>{try{x.currentTarget.style.display="none";const g=x.currentTarget.parentElement;if(g&&!g.querySelector(".image-placeholder")){g.classList.add("bg-gray-200","flex","items-center","justify-center");const y=document.createElement("span");y.className="text-sm text-gray-500 image-placeholder",y.textContent="Image non disponible",g.appendChild(y)}}catch(g){console.warn("[LocalImage] Error in fallback image error handler:",g)}}})}const m=r.startsWith("/")?window.location.origin+r:r;return i.jsx("img",{src:s,alt:t,className:n,onError:f=>{try{if(console.log("Erreur de chargement de l'image, utilisation de l'image de secours"),f.currentTarget.src!==m)f.currentTarget.src=m;else{f.currentTarget.style.display="none";const x=f.currentTarget.parentElement;if(x&&!x.querySelector(".image-placeholder")){x.classList.add("bg-gray-200","flex","items-center","justify-center");const g=document.createElement("span");g.className="text-sm text-gray-500 image-placeholder",g.textContent="Image non disponible",x.appendChild(g)}}}catch(x){console.warn("[LocalImage] Error in main image error handler:",x)}}})},p2=({entry:e,entries:t,currentIndex:n,onClose:r,onNavigate:s})=>{F.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const a=n>0,o=n<t.length-1,l=()=>{a&&s(n-1)},c=()=>{o&&s(n+1)},d=lx({onSwipedLeft:()=>{o&&c()},onSwipedRight:()=>{a&&l()},trackMouse:!0,preventScrollOnSwipe:!0,delta:50});F.useEffect(()=>{const m=f=>{f.key==="ArrowLeft"&&a?l():f.key==="ArrowRight"&&o?c():f.key==="Escape"&&r()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[a,o,r]);const u={hidden:{opacity:0},visible:{opacity:1}},h={hidden:{opacity:0,y:50,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300}}};return i.jsx(on,{children:i.jsx(be.div,{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",variants:u,initial:"hidden",animate:"visible",exit:"hidden",onClick:r,children:i.jsxs(be.div,{className:"bg-white dark:bg-slate-900 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",variants:h,initial:"hidden",animate:"visible",exit:"hidden",onClick:m=>m.stopPropagation(),...d,children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:e.displayName}),i.jsx(J,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8",children:i.jsx(gr,{size:16})})]}),i.jsx("div",{className:"flex-grow overflow-auto",children:e.type==="photo"?i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"relative",children:i.jsx(f2,{src:e.imageUrl,alt:e.description||"Photo communautaire",className:"w-full h-auto"})}),e.description&&i.jsx("p",{className:"p-4 text-sm",children:e.description})]}):i.jsx("div",{className:"p-6 min-h-[200px] flex items-center justify-center",children:i.jsx("div",{className:"text-center space-y-4 max-w-md",children:e.content&&e.content.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.content.trim()}):e.description&&e.description.trim()?i.jsx("p",{className:"text-lg leading-relaxed text-left",children:e.description.trim()}):i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 italic",children:"Aucun contenu disponible"}),i.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:['Debug: content="',e.content,'", description="',e.description,'"']})]})})})}),i.jsxs("div",{className:"p-3 border-t flex items-center justify-between",children:[i.jsx(Qn,{entryId:e.id,variant:"full"}),i.jsx("span",{className:"text-sm text-slate-500",children:(()=>{try{if(!e.timestamp)return"Date inconnue";const m=new Date(e.timestamp);return isNaN(m.getTime())?"Date invalide":ba(m,"d MMMM yyyy",{locale:wa})}catch(m){return console.warn("[EntryDetail] Invalid timestamp:",e.timestamp,m),"Date invalide"}})()})]})]})})})},g2=({onRefresh:e,children:t,disabled:n=!1,threshold:r=80})=>{const[s,a]=p.useState(!1),[o,l]=p.useState(0),[c,d]=p.useState(!1),[u,h]=p.useState(0),m=p.useRef(null),f=async()=>{if(!(n||s)){a(!0);try{await e()}finally{a(!1),l(0),d(!1)}}},x=C=>{if(n||s)return;const M=m.current;!M||M.scrollTop>0||(h(C.touches[0].clientY),d(!0))},g=C=>{if(!c||n||s)return;const M=m.current;if(!M||M.scrollTop>0){d(!1),l(0);return}const _=C.touches[0].clientY,k=Math.max(0,_-u),P=Math.min(k*.5,r*1.5);l(P),k>10&&C.preventDefault()},y=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))},S=C=>{if(n||s)return;const M=m.current;!M||M.scrollTop>0||(h(C.clientY),d(!0))},v=C=>{if(!c||n||s)return;const M=m.current;if(!M||M.scrollTop>0){d(!1),l(0);return}const _=Math.max(0,C.clientY-u),k=Math.min(_*.3,r*1.5);l(k)},b=()=>{!c||n||s||(o>=r?f():(l(0),d(!1)))};p.useEffect(()=>{if(c){const C=_=>{if(!c)return;const k=Math.max(0,_.clientY-u),P=Math.min(k*.3,r*1.5);l(P)},M=()=>{o>=r?f():(l(0),d(!1))};return document.addEventListener("mousemove",C),document.addEventListener("mouseup",M),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M)}}},[c,u,o,r]);const w=o>=r,A=Math.min(o/r,1);return i.jsxs("div",{ref:m,className:"relative h-full overflow-auto",onTouchStart:x,onTouchMove:g,onTouchEnd:y,onMouseDown:S,onMouseMove:v,onMouseUp:b,style:{transform:`translateY(${Math.min(o*.5,40)}px)`,transition:c?"none":"transform 0.3s ease-out"},children:[i.jsx(on,{children:(c||s)&&i.jsx(be.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-center py-4",style:{transform:`translateY(-${Math.max(0,60-o)}px)`},children:i.jsxs("div",{className:"flex items-center gap-2 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg",children:[i.jsx(sy,{className:`transition-all duration-200 ${s?"animate-spin":""} ${w?"text-green-500":"text-slate-500"}`,size:16,style:{transform:`rotate(${A*180}deg)`}}),i.jsx("span",{className:`text-sm font-medium transition-colors ${w?"text-green-500":"text-slate-500"}`,children:s?"Actualisation...":w?"Rel√¢cher pour actualiser":"Tirer pour actualiser"})]})})}),i.jsx("div",{className:"min-h-full",children:t})]})},x2=()=>{const{toast:e}=gl(),t=kn(),{markAsViewed:n,forceCheck:r}=up(),[s,a]=p.useState([]),[o,l]=p.useState(!0),[c,d]=p.useState(null),[u,h]=p.useState("all"),[m,f]=p.useState("gallery"),[x,g]=p.useState(0),[y,S]=p.useState(null),[v,b]=p.useState(0);p.useEffect(()=>{new URLSearchParams(t.search).get("tab")==="contribute"&&(f("contribute"),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"url_param"}))},[t]);const w=async(_=!1)=>{try{d(null);const k=await da();if(_&&x>0&&k.length>x){const P=k.length-x;e({title:"üéâ Nouvelles contributions !",description:`${P} nouvelle${P>1?"s":""} contribution${P>1?"s":""} ajout√©e${P>1?"s":""}`,duration:5e3})}a(k),g(k.length),await r(),z.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",entries_count:k.length})}catch(k){console.error("Erreur lors du chargement des entr√©es:",k),d("Impossible de charger les contributions. Veuillez r√©essayer."),z.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",error:"load_failed"})}finally{l(!1)}};p.useEffect(()=>{w();const _=setTimeout(()=>{n()},2e3);return()=>clearTimeout(_)},[n]),p.useEffect(()=>{const _=setInterval(()=>{m==="gallery"&&(console.log("[CommunityGallery] V√©rification des nouvelles contributions..."),w(!0))},12e4);return()=>clearInterval(_)},[m,x]);const A=async()=>{await w(),e({title:"‚úÖ Galerie actualis√©e",description:"Les derni√®res contributions ont √©t√© charg√©es",duration:2e3}),z.trackCommunityInteraction(ee.VIEW,{content_type:"gallery",action:"manual_refresh"})},C=_=>{a(k=>[_,...k]),f("gallery"),e({title:"üéâ Contribution envoy√©e !",description:"Votre contribution sera visible dans quelques minutes",duration:4e3}),z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"completed",content_type:_.type})},M=s.filter(_=>{var k;return((k=_.moderation)==null?void 0:k.status)==="rejected"?!1:u==="all"?!0:_.type===u});return i.jsxs(m_,{children:[i.jsx(h_,{title:"Galerie Communautaire",subtitle:"Partagez vos moments et d√©couvrez ceux des autres"}),i.jsx(be.div,{initial:"hidden",animate:"visible",className:"flex flex-col h-full pb-32",children:i.jsxs(ss,{value:m,onValueChange:_=>{f(_),_==="contribute"&&z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"tab_click"})},className:"w-full",children:[i.jsxs(Cr,{className:"grid w-full grid-cols-2 mb-4",children:[i.jsxs(ze,{value:"gallery",className:"flex items-center gap-2",children:[i.jsx($s,{size:16}),i.jsx("span",{children:"Galerie"})]}),i.jsxs(ze,{value:"contribute",className:"flex items-center gap-2",children:[i.jsx(iy,{size:16}),i.jsx("span",{children:"Contribuer"})]})]}),i.jsx(Be,{value:"gallery",className:"h-full",children:i.jsx(g2,{onRefresh:A,disabled:o,children:o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(Yr,{className:"w-8 h-8 animate-spin text-primary"})}):c?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-red-500 mb-4",children:c}),i.jsx(J,{onClick:()=>window.location.reload(),children:"R√©essayer"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ay,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Filtrer:"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(J,{variant:u==="all"?"default":"outline",size:"sm",onClick:()=>{h("all"),z.trackCommunityInteraction(ee.FILTER,{filter:"all"})},children:"Tous"}),i.jsx(J,{variant:u==="photo"?"default":"outline",size:"sm",onClick:()=>{h("photo"),z.trackCommunityInteraction(ee.FILTER,{filter:"photo"})},children:"Photos"}),i.jsx(J,{variant:u==="testimonial"?"default":"outline",size:"sm",onClick:()=>{h("testimonial"),z.trackCommunityInteraction(ee.FILTER,{filter:"testimonial"})},children:"T√©moignages"})]})]}),M.length>0?i.jsx(n2,{entries:M,onEntryClick:_=>{const k=M.findIndex(P=>P.id===_.id);b(k),S(_),z.trackCommunityInteraction(ee.VIEW,{content_type:"entry",entry_id:_.id})}}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"Aucune contribution dans cette cat√©gorie"}),i.jsx(J,{onClick:()=>{z.trackCommunityInteraction(ee.CONTRIBUTION,{stage:"start",source:"empty_state"}),f("contribute")},children:"Soyez le premier √† contribuer"})]})]})})}),i.jsx(Be,{value:"contribute",className:"h-full",children:i.jsx(e2,{onSubmit:C})})]})}),y&&i.jsx(p2,{entry:y,entries:M,currentIndex:v,onClose:()=>S(null),onNavigate:_=>{b(_),S(M[_])}}),i.jsx(Zn,{})]})},y2=()=>{const e=yt(),[t,n]=p.useState([]),[r,s]=p.useState(!0),[a,o]=p.useState(null),[l,c]=p.useState(-1),d=p.useCallback(async()=>{try{const g=[],y=window.location.hostname.includes("github.io"),S=y?"/1Hall1Artiste/images/historical":"/images/historical";console.log(`[HistoricalGallery] Environment: ${y?"GitHub Pages":"Local"}, basePath: ${S}`);for(let v=1;v<=151;v++)g.push({id:`photos-${v}`,path:`${S}/photos-${v}.jpg`,loaded:!1});console.log(`[HistoricalGallery] ${g.length} photos charg√©es`),n(g),s(!1),z.trackFeatureUse("historical_gallery",{photo_count:g.length,timestamp:new Date().toISOString()})}catch(g){console.error("Erreur lors du chargement des photos:",g),s(!1)}},[]);p.useEffect(()=>{d()},[d]);const u=(g,y)=>{o(g),c(y),z.trackContentInteraction(ee.VIEW,"historical_photo",g.id,{photo_index:y,timestamp:new Date().toISOString()})},h=()=>{o(null),c(-1)},m=g=>{if(l===-1)return;let y=l;g==="prev"?y=l>0?l-1:t.length-1:y=l<t.length-1?l+1:0,c(y),o(t[y])};p.useEffect(()=>{const g=y=>{if(a)switch(y.key){case"Escape":h();break;case"ArrowLeft":m("prev");break;case"ArrowRight":m("next");break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[a,l]);const f={hidden:{opacity:0,y:20},visible:g=>({opacity:1,y:0,transition:{delay:g*.02,duration:.3}})},x=lx({onSwipedLeft:()=>{a&&m("next")},onSwipedRight:()=>{a&&m("prev")},trackMouse:!0,preventScrollOnSwipe:!0,delta:50,swipeDuration:500});return i.jsx(jl,{children:i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[i.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-sm border-b border-slate-200",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(J,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full",children:["‚Üê",i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Galerie Historique"}),i.jsx("p",{className:"text-slate-600",children:"Photos d'√©poque de l'√éle Feydeau"})]})]}),i.jsxs("div",{className:"text-sm text-slate-500",children:[t.length," photos"]})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-6",children:r?i.jsx("div",{className:"flex items-center justify-center min-h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map((g,y)=>i.jsxs(be.div,{custom:y,variants:f,initial:"hidden",animate:"visible",className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group",onClick:()=>u(g,y),children:[i.jsx("img",{src:g.path,alt:`Photo historique ${y+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:y<8?"eager":"lazy",onLoad:()=>{n(S=>S.map(v=>v.id===g.id?{...v,loaded:!0}:v))},onError:S=>{console.error(`‚ùå Erreur chargement image: ${g.path}`),console.error(`   - Index: ${y}, ID: ${g.id}`),console.error(`   - URL compl√®te: ${window.location.origin}${g.path}`);const v=S.target;if(!v.src.includes("placeholder"))v.src="/images/placeholder-image.jpg";else{const b=v.closest(".aspect-square");b&&(b.style.display="none")}}}),i.jsx(Qn,{entryId:`historical-${g.id}`,variant:"compact",className:"absolute bottom-2 right-2"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:i.jsxs("span",{className:"text-white text-xs font-medium",children:["Photo ",y+1]})})]},g.id))})}),i.jsx(on,{children:a&&i.jsxs(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:h,...x,children:[i.jsxs(J,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20 rounded-full",onClick:h,children:[i.jsx("span",{className:"sr-only",children:"Fermer"}),i.jsx("span",{className:"text-2xl",children:"√ó"})]}),i.jsx(J,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("prev")},title:"Photo pr√©c√©dente (‚Üê ou swipe droite)",children:"‚Üê"}),i.jsx(J,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full",onClick:g=>{g.stopPropagation(),m("next")},title:"Photo suivante (‚Üí ou swipe gauche)",children:"‚Üí"}),i.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:[l+1," / ",t.length]}),i.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-10",children:i.jsx(Qn,{entryId:`historical-${a.id}`,variant:"full",className:"bg-black/60 backdrop-blur-sm text-white hover:bg-black/80"})}),i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 text-white/70 text-xs bg-black/50 px-3 py-1 rounded-full md:hidden",children:"Swipe ‚Üê ‚Üí pour naviguer"}),i.jsx(be.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},src:a.path,alt:`Photo historique ${l+1}`,className:"max-h-full max-w-full object-contain",onClick:g=>g.stopPropagation()},a.id)]})})]})})},v2=()=>{const e=yt(),t=n=>{z.trackContentInteraction(ee.VIEW,"gallery",n,{gallery_type:n,timestamp:new Date().toISOString()}),e(`/${n}`)};return i.jsx(jl,{children:i.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white shadow-sm",children:i.jsxs("div",{className:"flex items-center h-16 px-4",children:[i.jsxs(J,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>e(-1),children:[i.jsx(Yn,{className:"h-6 w-6"}),i.jsx("span",{className:"sr-only",children:"Retour"})]}),i.jsx("h1",{className:"text-xl font-semibold",children:"Galeries"})]})}),i.jsxs("div",{className:"flex-1 p-4 pb-20",children:[" ",i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("community"),children:[i.jsx("div",{className:"relative h-40 bg-gray-100",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx($s,{className:"h-12 w-12 text-gray-400"})})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos de la communaut√©"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"D√©couvrez les photos partag√©es par la communaut√© de l'√éle Feydeau"})]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t("historical"),children:[i.jsx("div",{className:"relative h-40 bg-gray-100",children:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(oy,{className:"h-12 w-12 text-gray-400"})})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-medium",children:"Photos historiques"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Explorez notre collection de 165 photos historiques de l'√éle Feydeau"})]})]})]})]}),i.jsx(Zn,{})]})})},b2=()=>{try{const e=fl();if(!e){console.warn("Firebase non initialis√©, impossible d'utiliser Analytics");return}const t=Ji(e);if(!t){console.warn("[FirebaseDebug] Analytics non disponible pour l'√©v√©nement de test");return}zs(async()=>{const{logEvent:n}=await Promise.resolve().then(()=>uw);return{logEvent:n}},void 0).then(({logEvent:n})=>{n(t,"test_debug_event",{timestamp:new Date().toISOString(),debug:!0}),console.log("[FirebaseDebug] √âv√©nement de test envoy√©")})}catch(e){console.error("[FirebaseDebug] Erreur lors de l'envoi de l'√©v√©nement de test:",e)}},w2=()=>{try{if(!window.gtag){console.warn("[GtagDebug] gtag n'est pas initialis√©");return}window.gtag("event","test_event",{event_category:"debug",event_label:"test_label",debug_mode:!0,timestamp:new Date().toISOString()}),console.log("[GtagDebug] √âv√©nement de test envoy√© via gtag")}catch(e){console.error("[GtagDebug] Erreur lors de l'envoi de l'√©v√©nement de test:",e)}},S2=async()=>{const e=[];try{const t=await hh();if(e.push({success:t,message:t?"Firebase Analytics est support√© dans cet environnement":"Firebase Analytics n'est PAS support√© dans cet environnement"}),!t)return e;const n=fl(),r=!!n;if(e.push({success:r,message:r?"Firebase est correctement initialis√©":"Firebase n'est PAS initialis√©"}),!r)return e;const s=n?n.options:{},a=!!s.measurementId;e.push({success:a,message:a?"MeasurementId est configur√©":"MeasurementId est MANQUANT dans la configuration",details:{measurementId:s.measurementId||"Non d√©fini",apiKey:s.apiKey?"Configur√©":"Non configur√©",projectId:s.projectId||"Non d√©fini"}});let o=null;try{n?o=Ji(n):console.warn("Firebase non initialis√©, impossible d'utiliser Analytics"),e.push({success:!!o,message:o?"Analytics a √©t√© initialis√© avec succ√®s":"√âchec de l'initialisation d'Analytics"})}catch(f){return e.push({success:!1,message:"Erreur lors de l'initialisation d'Analytics",details:{error:f instanceof Error?f.message:String(f)}}),e}const l=new URL(window.location.href),c=l.searchParams.has("firebase_debug"),d=l.searchParams.has("debug_mode"),u=l.searchParams.has("gtm_debug");e.push({success:c||d||u,message:c||d||u?"Param√®tres de debug d√©tect√©s dans l'URL":"Aucun param√®tre de debug dans l'URL",details:{firebase_debug:c?"Pr√©sent":"Absent",debug_mode:d?"Pr√©sent":"Absent",gtm_debug:u?"Pr√©sent":"Absent"}});try{fh(o,!0),e.push({success:!0,message:"La collecte de donn√©es Analytics est activ√©e"})}catch(f){e.push({success:!1,message:"Erreur lors de l'activation de la collecte de donn√©es",details:{error:f instanceof Error?f.message:String(f)}})}const h=typeof window.gtag=="function";e.push({success:h,message:h?"La fonction gtag est disponible":"La fonction gtag n'est PAS disponible"});const m=j2();e.push({success:m.length===0,message:m.length===0?"Aucun bloqueur potentiel d√©tect√©":`${m.length} bloqueur(s) potentiel(s) d√©tect√©(s)`,details:{blockers:m}})}catch(t){e.push({success:!1,message:"Erreur lors du diagnostic",details:{error:t instanceof Error?t.message:String(t)}})}return e};function j2(){const e=[];(document.getElementById("adblock-detector")||document.getElementById("ublock-detector")||document.getElementById("adblock-notice"))&&e.push("Bloqueur de publicit√©s d√©tect√©");try{document.cookie="testcookie=1; SameSite=Lax; Secure",document.cookie.indexOf("testcookie=")===-1&&e.push("Les cookies sont bloqu√©s")}catch{e.push("Erreur lors du test des cookies")}try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch{e.push("localStorage n'est pas disponible")}const t=0,n=window.RequestFileSystem||window.webkitRequestFileSystem;if(n)try{n(t,100,()=>{},()=>{e.push("Navigation priv√©e d√©tect√©e")})}catch{}return e}const cx=async()=>{console.group("üîç Diagnostic Firebase Analytics"),console.log("D√©marrage du diagnostic...");const e=await S2();let t=0,n=0;return e.forEach((r,s)=>{r.success?(t++,console.log(`‚úÖ ${s+1}. ${r.message}`)):(n++,console.warn(`‚ùå ${s+1}. ${r.message}`)),r.details&&console.log("  D√©tails:",r.details)}),console.log(`
R√©sultat: ${t} succ√®s, ${n} probl√®mes`),n>0&&(console.log(`
Recommandations:`),console.log("1. V√©rifiez que la configuration Firebase est correcte"),console.log("2. Assurez-vous que les param√®tres de debug sont pr√©sents dans l'URL"),console.log("3. D√©sactivez les bloqueurs de publicit√©s"),console.log("4. Utilisez Chrome pour les tests"),console.log("5. V√©rifiez que le measurementId correspond √† votre projet Google Analytics")),console.groupEnd(),{results:e,summary:{total:e.length,success:t,failure:n}}};function E2(){const[e,t]=p.useState([]),[n,r]=p.useState("firebase"),[s,a]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(!1);p.useEffect(()=>{const b=new URL(window.location.href),w=[];b.searchParams.has("firebase_debug")&&w.push("firebase_debug=true"),b.searchParams.has("gtm_debug")&&w.push("gtm_debug=x"),b.searchParams.has("debug_mode")&&w.push("debug_mode=true"),a(w.join(", ")||"Aucun param√®tre de debug d√©tect√©"),u("Debugger initialis√©")},[]);const u=b=>{t(w=>[...w,`${new Date().toLocaleTimeString()}: ${b}`])},h=()=>{n==="firebase"?(b2(),u("√âv√©nement de test Firebase envoy√©")):(w2(),u("√âv√©nement de test Gtag envoy√©"))},m=()=>{z.trackPageView("/debug-page","Page de d√©bogage"),u("√âv√©nement page_view envoy√© via Firebase Analytics"),n==="gtag"&&window.gtag&&(window.gtag("event","page_view",{page_title:"Page de d√©bogage",page_path:"/debug-page",debug_mode:!0}),u("√âv√©nement page_view envoy√© via Gtag"))},f=()=>{z.trackOnboarding(ee.ONBOARDING_COMPLETE,{total_slides_viewed:5,completion_time:new Date().toISOString()}),u("√âv√©nement onboarding_complete envoy√©")},x=()=>{z.trackMapInteraction(ee.MAP_LOAD,{map_type:"debug",load_time:1200}),u("√âv√©nement map_load envoy√©")},g=()=>{z.trackEvent(pl.FEATURE,ee.FEATURE_USE,{feature_name:"analytics_debugger",custom_param:"test_value"}),u("√âv√©nement personnalis√© feature_feature_use envoy√©")},y=()=>{const b=new URL(window.location.href);b.searchParams.set("firebase_debug","true"),b.searchParams.set("debug_mode","true"),b.searchParams.set("gtm_debug","x"),window.history.replaceState({},document.title,b.toString()),a("firebase_debug=true, debug_mode=true, gtm_debug=x"),u("Param√®tres de debug ajout√©s √† l'URL")},S=()=>{t([]),u("Logs effac√©s")},v=async()=>{d(!0),u("D√©marrage du diagnostic...");try{const b=await cx();l(b),u(`Diagnostic termin√©: ${b.summary.success} succ√®s, ${b.summary.failure} probl√®mes`)}catch(b){u(`Erreur lors du diagnostic: ${b instanceof Error?b.message:String(b)}`)}finally{d(!1)}};return i.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md max-w-3xl mx-auto my-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Analytics Debugger"}),i.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"√âtat du d√©bogage"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Mode:"})," ",n==="firebase"?"Firebase Analytics":"Google Tag Manager"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Param√®tres URL:"})," ",s]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"Mode de d√©bogage"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>r("firebase"),className:`px-3 py-1 rounded ${n==="firebase"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Firebase Analytics"}),i.jsx("button",{onClick:()=>r("gtag"),className:`px-3 py-1 rounded ${n==="gtag"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Google Tag (gtag)"})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:v,disabled:c,className:`w-full py-2 px-4 rounded ${c?"bg-gray-400":"bg-green-600 hover:bg-green-700"} text-white flex items-center justify-center`,children:c?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Ex√©cution du diagnostic..."]}):"Ex√©cuter le diagnostic"})})]}),o&&i.jsxs("div",{className:"mb-4 p-3 border rounded bg-gray-50",children:[i.jsx("h2",{className:"font-semibold mb-2",children:"R√©sultats du diagnostic"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{children:"Tests r√©ussis:"}),i.jsxs("span",{className:"font-medium text-green-600",children:[o.summary.success," / ",o.summary.total]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Probl√®mes d√©tect√©s:"}),i.jsx("span",{className:`font-medium ${o.summary.failure>0?"text-red-600":"text-green-600"}`,children:o.summary.failure})]}),o.summary.failure>0&&i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"Des probl√®mes ont √©t√© d√©tect√©s. Consultez la console du navigateur pour plus de d√©tails."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsx("button",{onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded",children:"Envoyer √©v√©nement de test"}),i.jsx("button",{onClick:m,className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded",children:"Simuler page_view"}),i.jsx("button",{onClick:f,className:"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded",children:"Simuler onboarding_complete"}),i.jsx("button",{onClick:x,className:"bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded",children:"Simuler map_load"}),i.jsx("button",{onClick:g,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",children:"Envoyer √©v√©nement personnalis√©"}),i.jsx("button",{onClick:y,className:"bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded",children:"Ajouter param√®tres debug √† l'URL"})]}),i.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Journal des √©v√©nements"}),i.jsx("button",{onClick:S,className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"Effacer"})]}),i.jsx("div",{className:"h-48 overflow-y-auto text-sm",children:e.length===0?i.jsx("p",{className:"text-gray-500 italic",children:"Aucun √©v√©nement envoy√©"}):i.jsx("ul",{className:"space-y-1",children:e.map((b,w)=>i.jsx("li",{className:"border-b border-gray-100 pb-1",children:b},w))})})]}),i.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:[i.jsx("h3",{className:"font-semibold",children:"Instructions:"}),i.jsxs("ol",{className:"list-decimal pl-5 space-y-1 mt-2",children:[i.jsxs("li",{children:["Assurez-vous que l'URL contient les param√®tres de debug (",i.jsx("code",{children:"?firebase_debug=true"}),")"]}),i.jsx("li",{children:"Ouvrez la console Firebase > Analytics > DebugView"}),i.jsx("li",{children:"Ouvrez √©galement Google Analytics > Rapports > Temps r√©el"}),i.jsx("li",{children:"Cliquez sur les boutons ci-dessus pour envoyer des √©v√©nements de test"}),i.jsx("li",{children:"V√©rifiez que les √©v√©nements apparaissent dans DebugView ou dans les rapports temps r√©el"}),i.jsx("li",{children:"Si rien n'appara√Æt, essayez de changer de mode (Firebase/Gtag) et r√©essayez"})]}),i.jsxs("div",{className:"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[i.jsx("p",{className:"font-semibold",children:"R√©solution de probl√®mes:"}),i.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[i.jsx("li",{children:"V√©rifiez que vous n'avez pas de bloqueur de publicit√©s actif"}),i.jsx("li",{children:"Utilisez Chrome plut√¥t qu'un autre navigateur"}),i.jsx("li",{children:"V√©rifiez que la configuration Firebase est correcte"}),i.jsx("li",{children:"Consultez la console du navigateur pour voir les erreurs √©ventuelles"})]})]})]})]})}const N2=new A1,C2=()=>{const e=kn(),t=yt(),n=p.useRef(e.pathname),[r,s]=p.useState(()=>localStorage.getItem("hasSeenOnboarding")==="true");p.useEffect(()=>{console.log("[App] Initialisation des √©couteurs d'√©v√©nements d'onboarding");const m=()=>{const g=localStorage.getItem("hasSeenOnboarding")==="true";g!==r&&(console.log("[App] Mise √† jour de hasSeenOnboarding depuis localStorage:",g),s(g))};window.addEventListener("storage",m);const f=setInterval(m,500);return()=>{window.removeEventListener("storage",m),clearInterval(f)}},[r]);const[a,o]=p.useState(!0),l=()=>{o(!1),r||t("/onboarding")};p.useEffect(()=>{if(console.log("[App] useEffect navigation - √âtat actuel:",{showSplash:a,hasSeenOnboarding:r,pathname:e.pathname}),a){console.log("[App] √âcran d'accueil encore affich√©, aucune action");return}!r&&e.pathname!=="/onboarding"?(console.log("[App] Redirection vers onboarding depuis:",e.pathname),t("/onboarding")):r&&e.pathname==="/onboarding"?(console.log("[App] Onboarding termin√©, redirection vers /map"),t("/map")):console.log("[App] Aucune action de navigation n√©cessaire")},[r,e.pathname,t,a]),p.useEffect(()=>{const m=n.current,f=e.pathname;m!==f&&(z.trackRouteChange(m,f),n.current=f)},[e.pathname]);const c=[{path:"/map",component:fA,swipeable:!0},{path:"/debug-analytics",component:E2},{path:"/program",component:gA,swipeable:!0},{path:"/saved",component:kP,swipeable:!0},{path:"/community",component:x2,swipeable:!0},{path:"/galleries",component:v2,swipeable:!1},{path:"/historical",component:y2,swipeable:!1},{path:"/about",component:yA,swipeable:!0},{path:"/donate",component:vA,swipeable:!0}],d=[{path:"/admin",component:IP},{path:"/onboarding",component:PP},{path:"/location-history",component:u_},{path:"/analytics",component:d_}],u=U1(e.pathname),h=(m,f=!1)=>i.jsx(jl,{enableSwipe:f,children:i.jsx(m,{})});return a?i.jsx(wA,{onComplete:l,isFirstVisit:!r}):i.jsx(on,{mode:"wait",children:i.jsxs(dy,{location:e,children:[i.jsx(Ys,{path:"/",element:r?i.jsx(wc,{to:"/map",replace:!0}):i.jsx(wc,{to:"/onboarding",replace:!0})}),c.map(m=>i.jsx(Ys,{path:m.path,element:h(m.component,u&&m.swipeable)},m.path)),d.map(m=>i.jsx(Ys,{path:m.path,element:h(m.component)},m.path)),i.jsx(Ys,{path:"*",element:h(bA)})]},e.pathname)})},I2=()=>i.jsx(C2,{}),Fd=new EventTarget,k2=()=>{const[e,t]=p.useState({show:!1,message:""});return p.useEffect(()=>{console.log("[App] Initialisation des √©couteurs d'√©v√©nements d'achievement");const n=s=>{const a=s;console.log("[App] √âv√©nement interne achievement re√ßu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] C√©l√©bration activ√©e avec le message:",a.detail.message)},r=s=>{const a=s;console.log("[App] √âv√©nement global app-achievement re√ßu:",a.detail),t({show:!0,message:a.detail.message}),console.log("[App] C√©l√©bration activ√©e avec le message:",a.detail.message)};return console.log(`[App] Ajout de l'√©couteur pour l'√©v√©nement interne "achievement"`),Fd.addEventListener("achievement",n),console.log(`[App] Ajout de l'√©couteur pour l'√©v√©nement global "app-achievement"`),window.addEventListener("app-achievement",r),window.resetOnboardingTest=()=>{console.log("[App] [TEST] R√©initialisation de l'onboarding..."),localStorage.removeItem("hasSeenOnboarding"),window.location.reload()},console.log("[App] [TEST] Fonction resetOnboardingTest() disponible dans la console"),()=>{console.log("[App] Nettoyage des √©couteurs d'√©v√©nements"),Fd.removeEventListener("achievement",n),window.removeEventListener("app-achievement",r)}},[]),p.useEffect(()=>{var n;return console.log("[App] Base URL d√©tect√©e:",((n=window.APP_CONFIG)==null?void 0:n.BASE_URL)||"/"),ou(),Cc(),xy(),mw(),console.log("[App] Firebase Analytics initialis√©"),z.startSession(),z.trackFeatureUse("app_start",{timestamp:new Date().toISOString(),referrer:document.referrer||"direct"}),setInterval(()=>{Nc()},30*60*1e3),Nc(),Cc(),ou(),Xh(),()=>{z.endSession()}},[]),p.useEffect(()=>{try{const n=performance.getEntriesByType("navigation");if(n&&n.length>0){const r=n[0],s=r.loadEventEnd-r.startTime;isFinite(s)&&s>=0&&z.trackPerformance(ee.LOAD_TIME,Math.round(s))}else if(performance.timing){const r=performance.timing,s=r.loadEventEnd-r.navigationStart;isFinite(s)&&s>=0&&z.trackPerformance(ee.LOAD_TIME,Math.round(s))}if("PerformanceObserver"in window){const r=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.name;l==="first-paint"?z.trackPerformance(ee.FIRST_PAINT,Math.round(o.startTime)):l==="first-contentful-paint"&&z.trackPerformance(ee.FIRST_CONTENTFUL_PAINT,Math.round(o.startTime))}});try{r.observe({type:"paint",buffered:!0})}catch{}const s=new PerformanceObserver(a=>{for(const o of a.getEntries()){const l=o.processingStart-o.startTime;isFinite(l)&&l>=0&&z.trackPerformance(ee.FIRST_INPUT_DELAY,Math.round(l),{name:o.name,duration:Math.round(o.duration)})}});try{s.observe({type:"first-input",buffered:!0})}catch{}}}catch{}},[]),window.location.hostname.includes("github.io"),i.jsx(P1,{client:N2,children:i.jsx($1,{children:i.jsxs(Lh,{children:[i.jsx(t0,{}),i.jsx(B0,{}),i.jsx(uy,{children:i.jsxs(O1,{children:[i.jsx(I2,{}),i.jsx(lS,{}),e.show&&i.jsx(hi,{trigger:e.show,message:e.message,duration:5e3,onComplete:()=>t({show:!1,message:""})})]})})]})})})},A2=Xe("ErrorHandling");function T2(){D1(),A2.info("Syst√®me de gestion des erreurs initialis√©")}const ux=async()=>{console.group("üîç Diagnostic Google Analytics");const e=ph();console.log("üî• Instance Firebase Analytics:",e?"‚úÖ Initialis√©e":"‚ùå Non initialis√©e"),console.log("üîë Variables d'environnement:"),console.log("  - VITE_FIREBASE_API_KEY:","‚ùå Manquante"),console.log("  - Mode DEV:","‚ùå D√©sactiv√©");const t=new URLSearchParams(window.location.search),n=t.has("firebase_debug")||t.has("gtm_debug");console.log("üêõ Mode debug:",n?"‚úÖ Activ√©":"‚ùå D√©sactiv√©"),console.log("üîç Ex√©cution du diagnostic complet...");const r=await cx();return console.groupEnd(),{analyticsInstance:!!e,hasApiKey:!1,debugMode:n,diagnostics:r}},ps=async()=>{if(console.group("üî¥ Test Google Analytics Temps R√©el"),!(await ux()).analyticsInstance)return console.error("‚ùå Analytics non initialis√©, impossible de continuer"),console.groupEnd(),null;const t=new Date().toISOString(),n=Math.random().toString(36).substring(7);console.log(`üöÄ Envoi d'√©v√©nements de test (ID: ${n})`),console.log(`‚è∞ Timestamp: ${t}`);try{z.trackPageView("/test-realtime",`Test Temps R√©el ${n}`),console.log("‚úÖ 1. Page view envoy√©")}catch(r){console.error("‚ùå 1. Erreur page view:",r)}try{z.trackInteraction(ee.CLICK,"test-realtime-button",{test_id:n,timestamp:t,realtime_test:!0}),console.log("‚úÖ 2. Interaction envoy√©e")}catch(r){console.error("‚ùå 2. Erreur interaction:",r)}try{z.trackEvent(pl.FEATURE,ee.FEATURE_USE,{feature_name:"realtime_analytics_test",test_id:n,timestamp:t,user_agent:navigator.userAgent.substring(0,50)}),console.log("‚úÖ 3. √âv√©nement personnalis√© envoy√©")}catch(r){console.error("‚ùå 3. Erreur √©v√©nement personnalis√©:",r)}try{z.trackCommunityInteraction(ee.VIEW,{content_type:"realtime_test",test_id:n,timestamp:t}),console.log("‚úÖ 4. √âv√©nement communautaire envoy√©")}catch(r){console.error("‚ùå 4. Erreur √©v√©nement communautaire:",r)}return console.log(""),console.log("üìä Pour v√©rifier en temps r√©el:"),console.log("1. Ouvrez Google Analytics 4: https://analytics.google.com/"),console.log("2. S√©lectionnez la propri√©t√© Collectif Feydeau"),console.log("3. Allez dans Rapports > Temps r√©el > Vue d'ensemble"),console.log(`4. Cherchez les √©v√©nements avec test_id: ${n}`),console.log("5. Les √©v√©nements devraient appara√Ætre dans les 10-60 secondes"),console.log("6. Si rien n'appara√Æt, v√©rifiez la configuration avec checkAnalyticsStatus()"),console.groupEnd(),n},P2=async()=>{console.log("üîÑ D√©marrage de la s√©quence de tests temps r√©el...");const e=await ps();return setTimeout(async()=>{console.log("‚è∞ Test apr√®s 10 secondes..."),await ps()},1e4),setTimeout(async()=>{console.log("‚è∞ Test apr√®s 30 secondes..."),await ps()},3e4),setTimeout(async()=>{console.log("‚è∞ Test apr√®s 1 minute..."),await ps()},6e4),e};typeof window<"u"&&(window.checkAnalyticsStatus=ux,window.testAnalyticsRealTime=ps,window.testAnalyticsRealTimeSequence=P2,console.log("üîß Fonctions de test Analytics disponibles:"),console.log("- checkAnalyticsStatus() : V√©rifier l'installation"),console.log("- testAnalyticsRealTime() : Test unique"),console.log("- testAnalyticsRealTimeSequence() : S√©quence de tests"));T2();Am(document.getElementById("root")).render(i.jsx(k2,{}));
//# sourceMappingURL=index-B6S8cJ78.js.map
