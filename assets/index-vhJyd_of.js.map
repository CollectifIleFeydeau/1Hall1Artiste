{"version":3,"mappings":"08EAEIA,GAAIC,GAENC,GAAqBF,GAAE,WACDA,GAAE,2gCCcpBG,GAAoB,aACpBC,GAAoB,GAKbC,GAAe,CAC1BC,EACAC,EACAC,IACS,CACL,IACF,MAAMC,EAAU,OAAOH,GAAU,SAAWA,EAAQA,EAAM,QACpDI,EAAQ,OAAOJ,GAAU,SAAW,OAAYA,EAAM,MAEtDK,EAAuB,CAC3B,QAAAF,EACA,MAAAC,EACA,IAAK,OAAO,SAAS,KACrB,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,UAAW,UAAU,UACrB,KAAM,OAAO,SAAS,SACtB,cAAAH,EACA,eAAAC,CAAA,EAIII,EAAkB,aAAa,QAAQT,EAAiB,EAC9D,IAAIU,EAA4B,GAEhC,GAAID,EACE,IACaC,EAAA,KAAK,MAAMD,CAAe,EACpC,MAAM,QAAQC,CAAY,MAAkB,UAC1CC,EAAG,CACF,cAAM,kDAAmDA,CAAC,EAClED,EAAe,EACjB,CAIFA,EAAa,KAAKF,CAAS,EAGvBE,EAAa,OAAST,KACTS,IAAa,MAAM,CAACT,EAAiB,GAItD,aAAa,QAAQD,GAAmB,KAAK,UAAUU,CAAY,CAAC,EAG5D,cAAM,mBAAoBF,CAAS,QACpCG,EAAG,CACF,cAAM,sCAAwCA,CAAC,CACzD,CACF,EAKaC,GAAkB,IAAmB,CAC5C,IACI,MAAAH,EAAkB,aAAa,QAAQT,EAAiB,EAC1D,IAACS,EAAiB,MAAO,GAEvB,MAAAC,EAAe,KAAK,MAAMD,CAAe,EAC/C,OAAO,MAAM,QAAQC,CAAY,EAAIA,EAAe,SAC7C,EAAG,CACF,qBAAM,uDAAwD,CAAC,EAChE,EACT,CACF,EAKaG,GAAoB,IAAY,CAC3C,aAAa,WAAWb,EAAiB,CAC3C,EAGMc,GAAmB,kBACnBC,GAAoB,mBAMbC,GAAc,SAA2B,CAChD,IACI,MAAAC,EAAU,aAAM,OAAO,qBAAkB,YAGxCd,EAAO,CACN,cAAM,6CAAgDA,CAAK,CACrE,CACF,EAMae,GAAqB,SAA2B,CAC3D,MAAMC,EAASP,KAGXO,EAAO,QAAU,EACnB,MAAMC,GAA4B,EACzBD,EAAO,OAAS,GACzB,QAAQ,IAAI,GAAGA,EAAO,MAAM,+BAA+B,CAE/D,EAKaC,GAA8B,SAA8B,CACnE,IACF,MAAMD,EAASP,KACX,GAAAO,EAAO,SAAW,EAAU,SAKhC,GAFe,GAEH,CACV,QAAQ,IAAI,YAAYA,EAAO,MAAM,oBAAoB,EAGnD,MAAAF,EAAU,MAAMI,GAAA,WAAO,qBAAkB,MAGzCC,EAAiB,CACrB,YAAa,KAAK,UAAUH,EAAQ,KAAM,CAAC,EAC3C,YAAaA,EAAO,OACpB,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,WAAY,UAAU,UACtB,YAAa,QACb,SAAU,qBAMNI,EAAW,MAAMN,EAAQ,KAC7BH,GACAC,GACAO,EAJiB,mBAKjB,EAGE,GAAAC,EAAS,SAAW,IACtB,eAAQ,IAAI,8BAA8B,EACxBV,KACX,GAEP,MAAM,IAAI,MAAM,2BAA2BU,EAAS,IAAI,EAAE,CAQ9D,QACO,EAAG,CACF,qBAAM,sCAAwC,CAAC,EAChD,EACT,CACF,EAKaC,GAA0B,IAAY,CACjD,OAAO,QAAU,CAAClB,EAASmB,EAAQC,EAAQC,EAAOxB,KAChDD,GACEC,GAAS,OAAOG,CAAO,EACvB,qBACA,CAAE,OAAAmB,EAAQ,OAAAC,EAAQ,MAAAC,CAAM,GAEnB,IAGF,wBAAiB,qBAAuBC,GAAU,CACvD1B,GACE0B,EAAM,QAAU,6BAChB,qBACF,CACD,CACH,ECjNMC,GAA6B,IAAO,aCsE1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAsB,SAAUC,EAAK,CAEvC,MAAMC,EAAM,GACZ,IAAIC,EAAI,EACR,QAASC,EAAI,EAAGA,EAAIH,EAAI,OAAQG,IAAK,CAC7B,IAAAC,EAAIJ,EAAI,WAAWG,CAAC,EACpBC,EAAI,IACJH,EAAIC,GAAG,EAAIE,EAENA,EAAI,MACLH,EAAAC,GAAG,EAAKE,GAAK,EAAK,IAClBH,EAAAC,GAAG,EAAKE,EAAI,GAAM,MAEhBA,EAAI,SAAY,OACtBD,EAAI,EAAIH,EAAI,SACXA,EAAI,WAAWG,EAAI,CAAC,EAAI,SAAY,OAEjCC,EAAA,QAAYA,EAAI,OAAW,KAAOJ,EAAI,WAAW,EAAEG,CAAC,EAAI,MACxDF,EAAAC,GAAG,EAAKE,GAAK,GAAM,IACvBH,EAAIC,GAAG,EAAME,GAAK,GAAM,GAAM,IAC9BH,EAAIC,GAAG,EAAME,GAAK,EAAK,GAAM,IACzBH,EAAAC,GAAG,EAAKE,EAAI,GAAM,MAGlBH,EAAAC,GAAG,EAAKE,GAAK,GAAM,IACvBH,EAAIC,GAAG,EAAME,GAAK,EAAK,GAAM,IACzBH,EAAAC,GAAG,EAAKE,EAAI,GAAM,IAE9B,CACO,OAAAH,CACX,EAOMI,GAAoB,SAAUC,EAAO,CAEvC,MAAML,EAAM,GACR,IAAAM,EAAM,EAAGH,EAAI,EACV,KAAAG,EAAMD,EAAM,QAAQ,CACjB,MAAAE,EAAKF,EAAMC,GAAK,EACtB,GAAIC,EAAK,IACLP,EAAIG,GAAG,EAAI,OAAO,aAAaI,CAAE,UAE5BA,EAAK,KAAOA,EAAK,IAAK,CACrB,MAAAC,EAAKH,EAAMC,GAAK,EAClBN,EAAAG,GAAG,EAAI,OAAO,cAAeI,EAAK,KAAO,EAAMC,EAAK,EAAG,CAEtD,SAAAD,EAAK,KAAOA,EAAK,IAAK,CAErB,MAAAC,EAAKH,EAAMC,GAAK,EAChBG,EAAKJ,EAAMC,GAAK,EAChBI,EAAKL,EAAMC,GAAK,EAChBK,IAAOJ,EAAK,IAAM,IAAQC,EAAK,KAAO,IAAQC,EAAK,KAAO,EAAMC,EAAK,IACvE,MACJV,EAAIG,GAAG,EAAI,OAAO,aAAa,OAAUQ,GAAK,GAAG,EACjDX,EAAIG,GAAG,EAAI,OAAO,aAAa,OAAUQ,EAAI,KAAK,MAEjD,CACK,MAAAH,EAAKH,EAAMC,GAAK,EAChBG,EAAKJ,EAAMC,GAAK,EAClBN,EAAAG,GAAG,EAAI,OAAO,cAAeI,EAAK,KAAO,IAAQC,EAAK,KAAO,EAAMC,EAAK,EAAG,CACnF,CACJ,CACO,OAAAT,EAAI,KAAK,EAAE,CACtB,EAKMY,GAAS,CAIX,eAAgB,KAIhB,eAAgB,KAKhB,sBAAuB,KAKvB,sBAAuB,KAKvB,kBAAmB,iEAInB,IAAI,cAAe,CACf,OAAO,KAAK,kBAAoB,KACpC,EAIA,IAAI,sBAAuB,CACvB,OAAO,KAAK,kBAAoB,KACpC,EAQA,mBAAoB,OAAO,MAAS,WAUpC,gBAAgBC,EAAOC,EAAS,CAC5B,GAAI,CAAC,MAAM,QAAQD,CAAK,EACpB,MAAM,MAAM,+CAA+C,EAE/D,KAAK,MAAM,EACX,MAAME,EAAgBD,EAChB,KAAK,sBACL,KAAK,eACLE,EAAS,GACf,QAASd,EAAI,EAAGA,EAAIW,EAAM,OAAQX,GAAK,EAAG,CAChC,MAAAe,EAAQJ,EAAMX,CAAC,EACfgB,EAAYhB,EAAI,EAAIW,EAAM,OAC1BM,EAAQD,EAAYL,EAAMX,EAAI,CAAC,EAAI,EACnCkB,EAAYlB,EAAI,EAAIW,EAAM,OAC1BQ,EAAQD,EAAYP,EAAMX,EAAI,CAAC,EAAI,EACnCoB,EAAWL,GAAS,EACpBM,GAAaN,EAAQ,IAAS,EAAME,GAAS,EACnD,IAAIK,GAAaL,EAAQ,KAAS,EAAME,GAAS,EAC7CI,EAAWJ,EAAQ,GAClBD,IACUK,EAAA,GACNP,IACUM,EAAA,KAGnBR,EAAO,KAAKD,EAAcO,CAAQ,EAAGP,EAAcQ,CAAQ,EAAGR,EAAcS,CAAQ,EAAGT,EAAcU,CAAQ,CAAC,CAClH,CACO,OAAAT,EAAO,KAAK,EAAE,CACzB,EASA,aAAaH,EAAOC,EAAS,CAGrB,YAAK,oBAAsB,CAACA,EACrB,KAAKD,CAAK,EAEd,KAAK,gBAAgBf,GAAoBe,CAAK,EAAGC,CAAO,CACnE,EASA,aAAaD,EAAOC,EAAS,CAGrB,YAAK,oBAAsB,CAACA,EACrB,KAAKD,CAAK,EAEdT,GAAkB,KAAK,wBAAwBS,EAAOC,CAAO,CAAC,CACzE,EAgBA,wBAAwBD,EAAOC,EAAS,CACpC,KAAK,MAAM,EACX,MAAMY,EAAgBZ,EAChB,KAAK,sBACL,KAAK,eACLE,EAAS,GACf,QAASd,EAAI,EAAGA,EAAIW,EAAM,QAAS,CAC/B,MAAMI,EAAQS,EAAcb,EAAM,OAAOX,GAAG,CAAC,EAEvCiB,EADYjB,EAAIW,EAAM,OACFa,EAAcb,EAAM,OAAOX,CAAC,CAAC,EAAI,EACzD,EAAAA,EAEF,MAAMmB,EADYnB,EAAIW,EAAM,OACFa,EAAcb,EAAM,OAAOX,CAAC,CAAC,EAAI,GACzD,EAAAA,EAEF,MAAMyB,EADYzB,EAAIW,EAAM,OACFa,EAAcb,EAAM,OAAOX,CAAC,CAAC,EAAI,GAE3D,GADE,EAAAA,EACEe,GAAS,MAAQE,GAAS,MAAQE,GAAS,MAAQM,GAAS,KAC5D,MAAM,IAAIC,GAER,MAAAN,EAAYL,GAAS,EAAME,GAAS,EAE1C,GADAH,EAAO,KAAKM,CAAQ,EAChBD,IAAU,GAAI,CACd,MAAME,EAAaJ,GAAS,EAAK,IAASE,GAAS,EAEnD,GADAL,EAAO,KAAKO,CAAQ,EAChBI,IAAU,GAAI,CACR,MAAAH,EAAaH,GAAS,EAAK,IAAQM,EACzCX,EAAO,KAAKQ,CAAQ,CACxB,CACJ,CACJ,CACO,OAAAR,CACX,EAMA,OAAQ,CACA,IAAC,KAAK,eAAgB,CACtB,KAAK,eAAiB,GACtB,KAAK,eAAiB,GACtB,KAAK,sBAAwB,GAC7B,KAAK,sBAAwB,GAE7B,QAASd,EAAI,EAAGA,EAAI,KAAK,aAAa,OAAQA,IAC1C,KAAK,eAAeA,CAAC,EAAI,KAAK,aAAa,OAAOA,CAAC,EACnD,KAAK,eAAe,KAAK,eAAeA,CAAC,CAAC,EAAIA,EAC9C,KAAK,sBAAsBA,CAAC,EAAI,KAAK,qBAAqB,OAAOA,CAAC,EAClE,KAAK,sBAAsB,KAAK,sBAAsBA,CAAC,CAAC,EAAIA,EAExDA,GAAK,KAAK,kBAAkB,SAC5B,KAAK,eAAe,KAAK,qBAAqB,OAAOA,CAAC,CAAC,EAAIA,EAC3D,KAAK,sBAAsB,KAAK,aAAa,OAAOA,CAAC,CAAC,EAAIA,EAGtE,CACJ,CACJ,EAIA,MAAM0B,WAAgC,KAAM,CACxC,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,KAAO,yBAChB,CACJ,CAIA,MAAMC,GAAe,SAAU9B,EAAK,CAC1B,MAAA+B,EAAYhC,GAAoBC,CAAG,EAClC,OAAAa,GAAO,gBAAgBkB,EAAW,EAAI,CACjD,EAKMC,GAAgC,SAAUhC,EAAK,CAEjD,OAAO8B,GAAa9B,CAAG,EAAE,QAAQ,MAAO,EAAE,CAC9C,EAUMiC,GAAe,SAAUjC,EAAK,CAC5B,IACO,OAAAa,GAAO,aAAab,EAAK,EAAI,QAEjCpB,EAAG,CACE,cAAM,wBAAyBA,CAAC,CAC5C,CACO,WACX,EA0EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAqBA,SAASsD,IAAY,CACb,UAAO,KAAS,IACT,YAEP,UAAO,OAAW,IACX,cAEP,UAAO,OAAW,IACX,cAEL,UAAI,MAAM,iCAAiC,CACrD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAwB,IAAMD,GAAY,wBAS1CE,GAA6B,IAAM,CACrC,GAAI,OAAO,QAAY,KAAe,OAAOC,GAAgB,IACzD,OAEJ,MAAMC,EAAqBD,GAAY,sBACvC,GAAIC,EACO,YAAK,MAAMA,CAAkB,CAE5C,EACMC,GAAwB,IAAM,CAC5B,UAAO,SAAa,IACpB,OAEA,IAAAC,EACA,IACQA,EAAA,SAAS,OAAO,MAAM,+BAA+B,OAEvD,CAGN,MACJ,CACA,MAAMC,EAAUD,GAASP,GAAaO,EAAM,CAAC,CAAC,EACvC,OAAAC,GAAW,KAAK,MAAMA,CAAO,CACxC,EAQMC,GAAc,IAAM,CAClB,IACA,OAAQ5C,GACJ,GAAAqC,GAAA,GACAC,MACAG,GAAsB,QAEvB,EAAG,CAOE,aAAK,+CAA+C,CAAC,EAAE,EAC/D,MACJ,CACJ,EAqCMI,GAAsB,IAAM,CAAM,IAAAC,EAAI,OAAQA,EAAKF,GAAY,KAAO,MAAQE,IAAO,OAAS,OAASA,EAAG,MAAQ,EAQxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,EAAS,CACX,aAAc,CACV,KAAK,OAAS,IAAM,GACpB,KAAK,QAAU,IAAM,GACrB,KAAK,QAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC5C,KAAK,QAAUD,EACf,KAAK,OAASC,CAAA,CACjB,CACL,CAMA,aAAaC,EAAU,CACZ,OAAC5E,EAAO6E,IAAU,CACjB7E,EACA,KAAK,OAAOA,CAAK,EAGjB,KAAK,QAAQ6E,CAAK,EAElB,OAAOD,GAAa,aAGf,aAAQ,MAAM,IAAM,EAAG,EAGxBA,EAAS,SAAW,EACpBA,EAAS5E,CAAK,EAGd4E,EAAS5E,EAAO6E,CAAK,EAE7B,CAER,CACJ,CA8TA,SAASC,IAAqB,CACpB,MAAAC,EAAU,OAAO,QAAW,SAC5B,OAAO,QACP,OAAO,SAAY,SACf,QAAQ,QACR,OACV,OAAO,OAAOA,GAAY,UAAYA,EAAQ,KAAO,MACzD,CAiDA,SAASC,IAAuB,CACxB,IACA,OAAO,OAAO,WAAc,cAEtB,CACC,QACX,CACJ,CAQA,SAASC,IAA4B,CACjC,OAAO,IAAI,QAAQ,CAACP,EAASC,IAAW,CAChC,IACA,IAAIO,EAAW,GACf,MAAMC,EAAgB,0DAChBC,EAAU,KAAK,UAAU,KAAKD,CAAa,EACjDC,EAAQ,UAAY,IAAM,CACtBA,EAAQ,OAAO,QAEVF,GACI,eAAU,eAAeC,CAAa,EAE/CT,EAAQ,EAAI,GAEhBU,EAAQ,gBAAkB,IAAM,CACjBF,EAAA,IAEfE,EAAQ,QAAU,IAAM,CAChB,IAAAZ,EACKG,IAAAH,EAAKY,EAAQ,SAAW,MAAQZ,IAAO,OAAS,OAASA,EAAG,UAAY,EAAE,SAGpFxE,EAAO,CACV2E,EAAO3E,CAAK,CAChB,EACH,CACL,CAMA,SAASqF,IAAoB,CACzB,MAAI,SAAO,UAAc,KAAe,CAAC,UAAU,cAIvD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAwDA,MAAMC,GAAa,gBAGnB,MAAMC,WAAsB,KAAM,CAC9B,YAEAC,EAAMrF,EAENsF,EAAY,CACR,MAAMtF,CAAO,EACb,KAAK,KAAOqF,EACZ,KAAK,WAAaC,EAElB,KAAK,KAAOH,GAKL,sBAAe,KAAMC,GAAc,SAAS,EAG/C,MAAM,mBACN,MAAM,kBAAkB,KAAMG,GAAa,UAAU,MAAM,CAEnE,CACJ,CACA,MAAMA,EAAa,CACf,YAAYC,EAASC,EAAa5E,EAAQ,CACtC,KAAK,QAAU2E,EACf,KAAK,YAAcC,EACnB,KAAK,OAAS5E,CAClB,CACA,OAAOwE,KAASK,EAAM,CAClB,MAAMJ,EAAaI,EAAK,CAAC,GAAK,GACxBC,EAAW,GAAG,KAAK,OAAO,IAAIN,CAAI,GAClCO,EAAW,KAAK,OAAOP,CAAI,EAC3BrF,EAAU4F,EAAWC,GAAgBD,EAAUN,CAAU,EAAI,QAE7DQ,EAAc,GAAG,KAAK,WAAW,KAAK9F,CAAO,KAAK2F,CAAQ,KAEzD,OADO,IAAIP,GAAcO,EAAUG,EAAaR,CAAU,CAErE,CACJ,CACA,SAASO,GAAgBD,EAAUF,EAAM,CACrC,OAAOE,EAAS,QAAQG,GAAS,CAACC,EAAGC,IAAQ,CACnC,MAAAvB,EAAQgB,EAAKO,CAAG,EACtB,OAAOvB,GAAS,KAAO,OAAOA,CAAK,EAAI,IAAIuB,CAAG,KACjD,CACL,CACA,MAAMF,GAAU,gBAkMhB,SAASG,GAAUC,EAAGC,EAAG,CACrB,GAAID,IAAMC,EACC,SAEL,MAAAC,EAAQ,OAAO,KAAKF,CAAC,EACrBG,EAAQ,OAAO,KAAKF,CAAC,EAC3B,UAAWG,KAAKF,EAAO,CACnB,GAAI,CAACC,EAAM,SAASC,CAAC,EACV,SAEL,MAAAC,EAAQL,EAAEI,CAAC,EACXE,EAAQL,EAAEG,CAAC,EACjB,GAAIG,GAASF,CAAK,GAAKE,GAASD,CAAK,GACjC,GAAI,CAACP,GAAUM,EAAOC,CAAK,EAChB,iBAGND,IAAUC,EACR,QAEf,CACA,UAAWF,KAAKD,EACZ,GAAI,CAACD,EAAM,SAASE,CAAC,EACV,SAGR,QACX,CACA,SAASG,GAASC,EAAO,CACd,OAAAA,IAAU,MAAQ,OAAOA,GAAU,QAC9C,CAkuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,MAAMC,GAA0B,IAK1BC,GAAyB,EAMzBC,GAAmB,EAAI,GAAK,GAAK,IASjCC,GAAgB,GAMtB,SAASC,GAAuBC,EAAcC,EAAiBN,GAAyBO,EAAgBN,GAAwB,CAI5H,MAAMO,EAAgBF,EAAiB,KAAK,IAAIC,EAAeF,CAAY,EAGrEI,EAAa,KAAK,MAGxBN,GACIK,GAGC,KAAK,OAAO,EAAI,IACjB,GAEJ,OAAO,KAAK,IAAIN,GAAkBM,EAAgBC,CAAU,CAChE,CA8CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,SAASC,GAAmB9B,EAAS,CAC7B,OAAAA,GAAWA,EAAQ,UACZA,EAAQ,UAGRA,CAEf,CCjvEA,MAAM+B,EAAU,CAOZ,YAAYC,EAAMC,EAAiBC,EAAM,CACrC,KAAK,KAAOF,EACZ,KAAK,gBAAkBC,EACvB,KAAK,KAAOC,EACZ,KAAK,kBAAoB,GAIzB,KAAK,aAAe,GACpB,KAAK,kBAAoB,OACzB,KAAK,kBAAoB,IAC5B,CACD,qBAAqBC,EAAM,CACvB,YAAK,kBAAoBA,EAClB,IACV,CACD,qBAAqBC,EAAmB,CACpC,YAAK,kBAAoBA,EAClB,IACV,CACD,gBAAgBC,EAAO,CACnB,YAAK,aAAeA,EACb,IACV,CACD,2BAA2BpD,EAAU,CACjC,YAAK,kBAAoBA,EAClB,IACV,CACL,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMqD,GAAqB,YAE3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAoBA,IAAAC,GAAA,KAAe,CACX,YAAYP,EAAMQ,EAAW,CACzB,KAAK,KAAOR,EACZ,KAAK,UAAYQ,EACjB,KAAK,UAAY,KACjB,KAAK,UAAY,IAAI,IACrB,KAAK,kBAAoB,IAAI,IAC7B,KAAK,iBAAmB,IAAI,IAC5B,KAAK,gBAAkB,IAAI,GAC9B,CAKD,IAAIC,EAAY,CAEZ,MAAMC,EAAuB,KAAK,4BAA4BD,CAAU,EACxE,GAAI,CAAC,KAAK,kBAAkB,IAAIC,CAAoB,EAAG,CACnD,MAAMC,EAAW,IAAI7D,GAErB,GADA,KAAK,kBAAkB,IAAI4D,EAAsBC,CAAQ,EACrD,KAAK,cAAcD,CAAoB,GACvC,KAAK,qBAAoB,EAEzB,GAAI,CACA,MAAME,EAAW,KAAK,uBAAuB,CACzC,mBAAoBF,CAC5C,CAAqB,EACGE,GACAD,EAAS,QAAQC,CAAQ,CAEhC,MACS,CAGT,CAER,CACD,OAAO,KAAK,kBAAkB,IAAIF,CAAoB,EAAE,OAC3D,CACD,aAAaG,EAAS,CAClB,IAAIhE,EAEJ,MAAM6D,EAAuB,KAAK,4BAA4BG,GAAY,KAA6B,OAASA,EAAQ,UAAU,EAC5HC,GAAYjE,EAAKgE,GAAY,KAA6B,OAASA,EAAQ,YAAc,MAAQhE,IAAO,OAASA,EAAK,GAC5H,GAAI,KAAK,cAAc6D,CAAoB,GACvC,KAAK,qBAAoB,EACzB,GAAI,CACA,OAAO,KAAK,uBAAuB,CAC/B,mBAAoBA,CACxC,CAAiB,CACJ,OACM7H,EAAG,CACN,GAAIiI,EACA,OAAO,KAGP,MAAMjI,CAEb,KAEA,CAED,GAAIiI,EACA,OAAO,KAGP,MAAM,MAAM,WAAW,KAAK,IAAI,mBAAmB,CAE1D,CACJ,CACD,cAAe,CACX,OAAO,KAAK,SACf,CACD,aAAaC,EAAW,CACpB,GAAIA,EAAU,OAAS,KAAK,KACxB,MAAM,MAAM,yBAAyBA,EAAU,IAAI,iBAAiB,KAAK,IAAI,GAAG,EAEpF,GAAI,KAAK,UACL,MAAM,MAAM,iBAAiB,KAAK,IAAI,4BAA4B,EAItE,GAFA,KAAK,UAAYA,EAEb,EAAC,KAAK,uBAIV,IAAIC,GAAiBD,CAAS,EAC1B,GAAI,CACA,KAAK,uBAAuB,CAAE,mBAAoBT,EAAoB,EACzE,MACS,CAKT,CAKL,SAAW,CAACW,EAAoBC,CAAgB,IAAK,KAAK,kBAAkB,UAAW,CACnF,MAAMR,EAAuB,KAAK,4BAA4BO,CAAkB,EAChF,GAAI,CAEA,MAAML,EAAW,KAAK,uBAAuB,CACzC,mBAAoBF,CACxC,CAAiB,EACDQ,EAAiB,QAAQN,CAAQ,CACpC,MACS,CAGT,CACJ,EACJ,CACD,cAAcH,EAAaH,GAAoB,CAC3C,KAAK,kBAAkB,OAAOG,CAAU,EACxC,KAAK,iBAAiB,OAAOA,CAAU,EACvC,KAAK,UAAU,OAAOA,CAAU,CACnC,CAGD,MAAM,QAAS,CACX,MAAMU,EAAW,MAAM,KAAK,KAAK,UAAU,OAAM,CAAE,EACnD,MAAM,QAAQ,IAAI,CACd,GAAGA,EACE,OAAOnD,GAAW,aAAcA,CAAO,EAEvC,IAAIA,GAAWA,EAAQ,SAAS,OAAM,CAAE,EAC7C,GAAGmD,EACE,OAAOnD,GAAW,YAAaA,CAAO,EAEtC,IAAIA,GAAWA,EAAQ,SAAS,CACjD,CAAS,CACJ,CACD,gBAAiB,CACb,OAAO,KAAK,WAAa,IAC5B,CACD,cAAcyC,EAAaH,GAAoB,CAC3C,OAAO,KAAK,UAAU,IAAIG,CAAU,CACvC,CACD,WAAWA,EAAaH,GAAoB,CACxC,OAAO,KAAK,iBAAiB,IAAIG,CAAU,GAAK,EACnD,CACD,WAAWW,EAAO,GAAI,CAClB,KAAM,CAAE,QAAAP,EAAU,EAAI,EAAGO,EACnBV,EAAuB,KAAK,4BAA4BU,EAAK,kBAAkB,EACrF,GAAI,KAAK,cAAcV,CAAoB,EACvC,MAAM,MAAM,GAAG,KAAK,IAAI,IAAIA,CAAoB,gCAAgC,EAEpF,GAAI,CAAC,KAAK,iBACN,MAAM,MAAM,aAAa,KAAK,IAAI,8BAA8B,EAEpE,MAAME,EAAW,KAAK,uBAAuB,CACzC,mBAAoBF,EACpB,QAAAG,CACZ,CAAS,EAED,SAAW,CAACI,EAAoBC,CAAgB,IAAK,KAAK,kBAAkB,UAAW,CACnF,MAAMG,EAA+B,KAAK,4BAA4BJ,CAAkB,EACpFP,IAAyBW,GACzBH,EAAiB,QAAQN,CAAQ,CAExC,CACD,OAAOA,CACV,CASD,OAAO3D,EAAUwD,EAAY,CACzB,IAAI5D,EACJ,MAAM6D,EAAuB,KAAK,4BAA4BD,CAAU,EAClEa,GAAqBzE,EAAK,KAAK,gBAAgB,IAAI6D,CAAoB,KAAO,MAAQ7D,IAAO,OAASA,EAAK,IAAI,IACrHyE,EAAkB,IAAIrE,CAAQ,EAC9B,KAAK,gBAAgB,IAAIyD,EAAsBY,CAAiB,EAChE,MAAMC,EAAmB,KAAK,UAAU,IAAIb,CAAoB,EAChE,OAAIa,GACAtE,EAASsE,EAAkBb,CAAoB,EAE5C,IAAM,CACTY,EAAkB,OAAOrE,CAAQ,CAC7C,CACK,CAKD,sBAAsB2D,EAAUH,EAAY,CACxC,MAAMe,EAAY,KAAK,gBAAgB,IAAIf,CAAU,EACrD,GAAKe,EAGL,UAAWvE,KAAYuE,EACnB,GAAI,CACAvE,EAAS2D,EAAUH,CAAU,CAChC,MACU,CAEV,CAER,CACD,uBAAuB,CAAE,mBAAAQ,EAAoB,QAAAJ,EAAU,CAAE,GAAI,CACzD,IAAID,EAAW,KAAK,UAAU,IAAIK,CAAkB,EACpD,GAAI,CAACL,GAAY,KAAK,YAClBA,EAAW,KAAK,UAAU,gBAAgB,KAAK,UAAW,CACtD,mBAAoBa,GAA8BR,CAAkB,EACpE,QAAAJ,CAChB,CAAa,EACD,KAAK,UAAU,IAAII,EAAoBL,CAAQ,EAC/C,KAAK,iBAAiB,IAAIK,EAAoBJ,CAAO,EAMrD,KAAK,sBAAsBD,EAAUK,CAAkB,EAMnD,KAAK,UAAU,mBACf,GAAI,CACA,KAAK,UAAU,kBAAkB,KAAK,UAAWA,EAAoBL,CAAQ,CAChF,MACU,CAEV,CAGT,OAAOA,GAAY,IACtB,CACD,4BAA4BH,EAAaH,GAAoB,CACzD,OAAI,KAAK,UACE,KAAK,UAAU,kBAAoBG,EAAaH,GAGhDG,CAEd,CACD,sBAAuB,CACnB,MAAQ,CAAC,CAAC,KAAK,WACX,KAAK,UAAU,oBAAsB,UAC5C,CACL,EAEA,SAASgB,GAA8BhB,EAAY,CAC/C,OAAOA,IAAeH,GAAqB,OAAYG,CAC3D,CACA,SAASO,GAAiBD,EAAW,CACjC,OAAOA,EAAU,oBAAsB,OAC3C,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,MAAMW,EAAmB,CACrB,YAAY1B,EAAM,CACd,KAAK,KAAOA,EACZ,KAAK,UAAY,IAAI,GACxB,CAUD,aAAae,EAAW,CACpB,MAAMY,EAAW,KAAK,YAAYZ,EAAU,IAAI,EAChD,GAAIY,EAAS,iBACT,MAAM,IAAI,MAAM,aAAaZ,EAAU,IAAI,qCAAqC,KAAK,IAAI,EAAE,EAE/FY,EAAS,aAAaZ,CAAS,CAClC,CACD,wBAAwBA,EAAW,CACd,KAAK,YAAYA,EAAU,IAAI,EACnC,kBAET,KAAK,UAAU,OAAOA,EAAU,IAAI,EAExC,KAAK,aAAaA,CAAS,CAC9B,CAQD,YAAYf,EAAM,CACd,GAAI,KAAK,UAAU,IAAIA,CAAI,EACvB,OAAO,KAAK,UAAU,IAAIA,CAAI,EAGlC,MAAM2B,EAAW,IAAIC,GAAS5B,EAAM,IAAI,EACxC,YAAK,UAAU,IAAIA,EAAM2B,CAAQ,EAC1BA,CACV,CACD,cAAe,CACX,OAAO,MAAM,KAAK,KAAK,UAAU,OAAQ,EAC5C,CACL,CCrZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA+BA,IAAIE,IACH,SAAUA,EAAU,CACjBA,EAASA,EAAS,MAAW,CAAC,EAAI,QAClCA,EAASA,EAAS,QAAa,CAAC,EAAI,UACpCA,EAASA,EAAS,KAAU,CAAC,EAAI,OACjCA,EAASA,EAAS,KAAU,CAAC,EAAI,OACjCA,EAASA,EAAS,MAAW,CAAC,EAAI,QAClCA,EAASA,EAAS,OAAY,CAAC,EAAI,QACvC,GAAGA,KAAaA,GAAW,CAAE,EAAC,EAC9B,MAAMC,GAAoB,CACtB,MAASD,GAAS,MAClB,QAAWA,GAAS,QACpB,KAAQA,GAAS,KACjB,KAAQA,GAAS,KACjB,MAASA,GAAS,MAClB,OAAUA,GAAS,MACvB,EAIME,GAAkBF,GAAS,KAO3BG,GAAgB,CAClB,CAACH,GAAS,KAAK,EAAG,MAClB,CAACA,GAAS,OAAO,EAAG,MACpB,CAACA,GAAS,IAAI,EAAG,OACjB,CAACA,GAAS,IAAI,EAAG,OACjB,CAACA,GAAS,KAAK,EAAG,OACtB,EAMMI,GAAoB,CAACrB,EAAUsB,KAAYC,IAAS,CACtD,GAAID,EAAUtB,EAAS,SACnB,OAEJ,MAAMwB,EAAM,IAAI,KAAM,EAAC,YAAW,EAC5BC,EAASL,GAAcE,CAAO,EACpC,GAAIG,EACA,QAAQA,CAAM,EAAE,IAAID,CAAG,MAAMxB,EAAS,IAAI,IAAK,GAAGuB,CAAI,MAGtD,OAAM,IAAI,MAAM,8DAA8DD,CAAO,GAAG,CAEhG,EACA,MAAMI,EAAO,CAOT,YAAYtC,EAAM,CACd,KAAK,KAAOA,EAIZ,KAAK,UAAY+B,GAKjB,KAAK,YAAcE,GAInB,KAAK,gBAAkB,IAK1B,CACD,IAAI,UAAW,CACX,OAAO,KAAK,SACf,CACD,IAAI,SAASM,EAAK,CACd,GAAI,EAAEA,KAAOV,IACT,MAAM,IAAI,UAAU,kBAAkBU,CAAG,4BAA4B,EAEzE,KAAK,UAAYA,CACpB,CAED,YAAYA,EAAK,CACb,KAAK,UAAY,OAAOA,GAAQ,SAAWT,GAAkBS,CAAG,EAAIA,CACvE,CACD,IAAI,YAAa,CACb,OAAO,KAAK,WACf,CACD,IAAI,WAAWA,EAAK,CAChB,GAAI,OAAOA,GAAQ,WACf,MAAM,IAAI,UAAU,mDAAmD,EAE3E,KAAK,YAAcA,CACtB,CACD,IAAI,gBAAiB,CACjB,OAAO,KAAK,eACf,CACD,IAAI,eAAeA,EAAK,CACpB,KAAK,gBAAkBA,CAC1B,CAID,SAASJ,EAAM,CACX,KAAK,iBAAmB,KAAK,gBAAgB,KAAMN,GAAS,MAAO,GAAGM,CAAI,EAC1E,KAAK,YAAY,KAAMN,GAAS,MAAO,GAAGM,CAAI,CACjD,CACD,OAAOA,EAAM,CACT,KAAK,iBACD,KAAK,gBAAgB,KAAMN,GAAS,QAAS,GAAGM,CAAI,EACxD,KAAK,YAAY,KAAMN,GAAS,QAAS,GAAGM,CAAI,CACnD,CACD,QAAQA,EAAM,CACV,KAAK,iBAAmB,KAAK,gBAAgB,KAAMN,GAAS,KAAM,GAAGM,CAAI,EACzE,KAAK,YAAY,KAAMN,GAAS,KAAM,GAAGM,CAAI,CAChD,CACD,QAAQA,EAAM,CACV,KAAK,iBAAmB,KAAK,gBAAgB,KAAMN,GAAS,KAAM,GAAGM,CAAI,EACzE,KAAK,YAAY,KAAMN,GAAS,KAAM,GAAGM,CAAI,CAChD,CACD,SAASA,EAAM,CACX,KAAK,iBAAmB,KAAK,gBAAgB,KAAMN,GAAS,MAAO,GAAGM,CAAI,EAC1E,KAAK,YAAY,KAAMN,GAAS,MAAO,GAAGM,CAAI,CACjD,CACL,CClKA,MAAMK,GAAgB,CAACC,EAAQC,IAAiBA,EAAa,KAAMrI,GAAMoI,aAAkBpI,CAAC,EAE5F,IAAIsI,GACAC,GAEJ,SAASC,IAAuB,CAC5B,OAAQF,KACHA,GAAoB,CACjB,YACA,eACA,SACA,UACA,cACZ,EACA,CAEA,SAASG,IAA0B,CAC/B,OAAQF,KACHA,GAAuB,CACpB,UAAU,UAAU,QACpB,UAAU,UAAU,SACpB,UAAU,UAAU,kBAChC,EACA,CACA,MAAMG,GAAmB,IAAI,QACvBC,GAAqB,IAAI,QACzBC,GAA2B,IAAI,QAC/BC,GAAiB,IAAI,QACrBC,GAAwB,IAAI,QAClC,SAASC,GAAiB3F,EAAS,CAC/B,MAAM4F,EAAU,IAAI,QAAQ,CAACtG,EAASC,IAAW,CAC7C,MAAMsG,EAAW,IAAM,CACnB7F,EAAQ,oBAAoB,UAAW8F,CAAO,EAC9C9F,EAAQ,oBAAoB,QAASpF,CAAK,CACtD,EACckL,EAAU,IAAM,CAClBxG,EAAQyG,GAAK/F,EAAQ,MAAM,CAAC,EAC5B6F,GACZ,EACcjL,EAAQ,IAAM,CAChB2E,EAAOS,EAAQ,KAAK,EACpB6F,GACZ,EACQ7F,EAAQ,iBAAiB,UAAW8F,CAAO,EAC3C9F,EAAQ,iBAAiB,QAASpF,CAAK,CAC/C,CAAK,EACD,OAAAgL,EACK,KAAMnG,GAAU,CAGbA,aAAiB,WACjB6F,GAAiB,IAAI7F,EAAOO,CAAO,CAG/C,CAAK,EACI,MAAM,IAAM,EAAG,EAGpB0F,GAAsB,IAAIE,EAAS5F,CAAO,EACnC4F,CACX,CACA,SAASI,GAA+BC,EAAI,CAExC,GAAIV,GAAmB,IAAIU,CAAE,EACzB,OACJ,MAAMC,EAAO,IAAI,QAAQ,CAAC5G,EAASC,IAAW,CAC1C,MAAMsG,EAAW,IAAM,CACnBI,EAAG,oBAAoB,WAAYE,CAAQ,EAC3CF,EAAG,oBAAoB,QAASrL,CAAK,EACrCqL,EAAG,oBAAoB,QAASrL,CAAK,CACjD,EACcuL,EAAW,IAAM,CACnB7G,IACAuG,GACZ,EACcjL,EAAQ,IAAM,CAChB2E,EAAO0G,EAAG,OAAS,IAAI,aAAa,aAAc,YAAY,CAAC,EAC/DJ,GACZ,EACQI,EAAG,iBAAiB,WAAYE,CAAQ,EACxCF,EAAG,iBAAiB,QAASrL,CAAK,EAClCqL,EAAG,iBAAiB,QAASrL,CAAK,CAC1C,CAAK,EAED2K,GAAmB,IAAIU,EAAIC,CAAI,CACnC,CACA,IAAIE,GAAgB,CAChB,IAAIC,EAAQC,EAAMC,EAAU,CACxB,GAAIF,aAAkB,eAAgB,CAElC,GAAIC,IAAS,OACT,OAAOf,GAAmB,IAAIc,CAAM,EAExC,GAAIC,IAAS,mBACT,OAAOD,EAAO,kBAAoBb,GAAyB,IAAIa,CAAM,EAGzE,GAAIC,IAAS,QACT,OAAOC,EAAS,iBAAiB,CAAC,EAC5B,OACAA,EAAS,YAAYA,EAAS,iBAAiB,CAAC,CAAC,CAE9D,CAED,OAAOR,GAAKM,EAAOC,CAAI,CAAC,CAC3B,EACD,IAAID,EAAQC,EAAM7G,EAAO,CACrB,OAAA4G,EAAOC,CAAI,EAAI7G,EACR,EACV,EACD,IAAI4G,EAAQC,EAAM,CACd,OAAID,aAAkB,iBACjBC,IAAS,QAAUA,IAAS,SACtB,GAEJA,KAAQD,CAClB,CACL,EACA,SAASG,GAAahH,EAAU,CAC5B4G,GAAgB5G,EAAS4G,EAAa,CAC1C,CACA,SAASK,GAAaC,EAAM,CAIxB,OAAIA,IAAS,YAAY,UAAU,aAC/B,EAAE,qBAAsB,eAAe,WAChC,SAAUC,KAAejC,EAAM,CAClC,MAAMuB,EAAKS,EAAK,KAAKE,GAAO,IAAI,EAAGD,EAAY,GAAGjC,CAAI,EACtD,OAAAc,GAAyB,IAAIS,EAAIU,EAAW,KAAOA,EAAW,KAAM,EAAG,CAACA,CAAU,CAAC,EAC5EZ,GAAKE,CAAE,CAC1B,EAOQZ,GAAyB,EAAC,SAASqB,CAAI,EAChC,YAAahC,EAAM,CAGtB,OAAAgC,EAAK,MAAME,GAAO,IAAI,EAAGlC,CAAI,EACtBqB,GAAKT,GAAiB,IAAI,IAAI,CAAC,CAClD,EAEW,YAAaZ,EAAM,CAGtB,OAAOqB,GAAKW,EAAK,MAAME,GAAO,IAAI,EAAGlC,CAAI,CAAC,CAClD,CACA,CACA,SAASmC,GAAuBpH,EAAO,CACnC,OAAI,OAAOA,GAAU,WACVgH,GAAahH,CAAK,GAGzBA,aAAiB,gBACjBuG,GAA+BvG,CAAK,EACpCsF,GAActF,EAAO2F,IAAsB,EACpC,IAAI,MAAM3F,EAAO2G,EAAa,EAElC3G,EACX,CACA,SAASsG,GAAKtG,EAAO,CAGjB,GAAIA,aAAiB,WACjB,OAAOkG,GAAiBlG,CAAK,EAGjC,GAAIgG,GAAe,IAAIhG,CAAK,EACxB,OAAOgG,GAAe,IAAIhG,CAAK,EACnC,MAAMqH,EAAWD,GAAuBpH,CAAK,EAG7C,OAAIqH,IAAarH,IACbgG,GAAe,IAAIhG,EAAOqH,CAAQ,EAClCpB,GAAsB,IAAIoB,EAAUrH,CAAK,GAEtCqH,CACX,CACA,MAAMF,GAAUnH,GAAUiG,GAAsB,IAAIjG,CAAK,EC5KzD,SAASsH,GAAOxE,EAAMyE,EAAS,CAAE,QAAAC,EAAS,QAAAC,EAAS,SAAAC,EAAU,WAAAC,CAAY,EAAG,GAAI,CAC5E,MAAMpH,EAAU,UAAU,KAAKuC,EAAMyE,CAAO,EACtCK,EAActB,GAAK/F,CAAO,EAChC,OAAIkH,GACAlH,EAAQ,iBAAiB,gBAAkB3D,GAAU,CACjD6K,EAAQnB,GAAK/F,EAAQ,MAAM,EAAG3D,EAAM,WAAYA,EAAM,WAAY0J,GAAK/F,EAAQ,WAAW,EAAG3D,CAAK,CAC9G,CAAS,EAED4K,GACAjH,EAAQ,iBAAiB,UAAY3D,GAAU4K,EAE/C5K,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,EAE9CgL,EACK,KAAMC,GAAO,CACVF,GACAE,EAAG,iBAAiB,QAAS,IAAMF,EAAY,GAC/CD,GACAG,EAAG,iBAAiB,gBAAkBjL,GAAU8K,EAAS9K,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,CAE/G,CAAK,EACI,MAAM,IAAM,EAAG,EACbgL,CACX,CAgBA,MAAME,GAAc,CAAC,MAAO,SAAU,SAAU,aAAc,OAAO,EAC/DC,GAAe,CAAC,MAAO,MAAO,SAAU,OAAO,EAC/CC,GAAgB,IAAI,IAC1B,SAASC,GAAUrB,EAAQC,EAAM,CAC7B,GAAI,EAAED,aAAkB,aACpB,EAAEC,KAAQD,IACV,OAAOC,GAAS,UAChB,OAEJ,GAAImB,GAAc,IAAInB,CAAI,EACtB,OAAOmB,GAAc,IAAInB,CAAI,EACjC,MAAMqB,EAAiBrB,EAAK,QAAQ,aAAc,EAAE,EAC9CsB,EAAWtB,IAASqB,EACpBE,EAAUL,GAAa,SAASG,CAAc,EACpD,GAEA,EAAEA,KAAmBC,EAAW,SAAW,gBAAgB,YACvD,EAAEC,GAAWN,GAAY,SAASI,CAAc,GAChD,OAEJ,MAAM/C,EAAS,eAAgBkD,KAAcpD,EAAM,CAE/C,MAAMuB,EAAK,KAAK,YAAY6B,EAAWD,EAAU,YAAc,UAAU,EACzE,IAAIxB,EAASJ,EAAG,MAChB,OAAI2B,IACAvB,EAASA,EAAO,MAAM3B,EAAK,MAAO,KAM9B,MAAM,QAAQ,IAAI,CACtB2B,EAAOsB,CAAc,EAAE,GAAGjD,CAAI,EAC9BmD,GAAW5B,EAAG,IAC1B,CAAS,GAAG,CAAC,CACb,EACI,OAAAwB,GAAc,IAAInB,EAAM1B,CAAM,EACvBA,CACX,CACA4B,GAAcuB,IAAc,CACxB,GAAGA,EACH,IAAK,CAAC1B,EAAQC,EAAMC,IAAamB,GAAUrB,EAAQC,CAAI,GAAKyB,EAAS,IAAI1B,EAAQC,EAAMC,CAAQ,EAC/F,IAAK,CAACF,EAAQC,IAAS,CAAC,CAACoB,GAAUrB,EAAQC,CAAI,GAAKyB,EAAS,IAAI1B,EAAQC,CAAI,CACjF,EAAE,ECtFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAM0B,EAA0B,CAC5B,YAAYjF,EAAW,CACnB,KAAK,UAAYA,CACpB,CAGD,uBAAwB,CAIpB,OAHkB,KAAK,UAAU,aAAY,EAIxC,IAAImB,GAAY,CACjB,GAAI+D,GAAyB/D,CAAQ,EAAG,CACpC,MAAM3D,EAAU2D,EAAS,eACzB,MAAO,GAAG3D,EAAQ,OAAO,IAAIA,EAAQ,OAAO,EAC/C,KAEG,QAAO,IAEvB,CAAS,EACI,OAAO2H,GAAaA,CAAS,EAC7B,KAAK,GAAG,CAChB,CACL,CASA,SAASD,GAAyB/D,EAAU,CACxC,MAAMZ,EAAYY,EAAS,eAC3B,OAAQZ,GAAc,KAA+B,OAASA,EAAU,QAAU,SACtF,CAEA,MAAM6E,GAAS,gBACTC,GAAY,SAElB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAS,IAAIxD,GAAO,eAAe,EAEnCyD,GAAS,uBAETC,GAAS,6BAETC,GAAS,sBAETC,GAAS,6BAETC,GAAS,sBAETC,GAAS,iBAETC,GAAS,wBAETC,GAAS,qBAETC,GAAS,yBAETC,GAAS,4BAETC,GAAS,sBAETC,GAAS,6BAETC,GAAS,0BAETC,GAAS,iCAETC,GAAS,sBAETC,GAAS,6BAETC,GAAS,wBAETC,GAAS,+BAETC,GAAS,0BAETC,GAAS,iCAETC,GAAS,oBAETC,GAAS,2BAETC,GAAS,sBAETC,GAAS,eAETC,GAAS,6BAETvH,GAAO,WAGb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAqBA,MAAMM,GAAqB,YACrBkH,GAAsB,CACxB,CAAC5B,EAAM,EAAG,YACV,CAACG,EAAM,EAAG,mBACV,CAACE,EAAM,EAAG,iBACV,CAACD,EAAM,EAAG,wBACV,CAACG,EAAM,EAAG,iBACV,CAACD,EAAM,EAAG,wBACV,CAACE,EAAM,EAAG,YACV,CAACC,EAAM,EAAG,mBACV,CAACC,EAAM,EAAG,YACV,CAACC,EAAM,EAAG,oBACV,CAACC,EAAM,EAAG,mBACV,CAACC,EAAM,EAAG,UACV,CAACC,EAAM,EAAG,iBACV,CAACC,EAAM,EAAG,WACV,CAACC,EAAM,EAAG,kBACV,CAACC,EAAM,EAAG,WACV,CAACC,EAAM,EAAG,kBACV,CAACC,EAAM,EAAG,YACV,CAACC,EAAM,EAAG,mBACV,CAACC,EAAM,EAAG,UACV,CAACC,EAAM,EAAG,iBACV,CAACC,EAAM,EAAG,WACV,CAACC,EAAM,EAAG,kBACV,CAACC,EAAM,EAAG,WACV,CAACE,EAAM,EAAG,kBACV,CAACD,EAAM,EAAG,cACV,UAAW,UACX,CAACtH,EAAI,EAAG,aACZ,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,MAAMyH,GAAQ,IAAI,IAIZC,GAAc,IAAI,IAOlBC,GAAc,IAAI,IAMxB,SAASC,GAAcC,EAAK9G,EAAW,CACnC,GAAI,CACA8G,EAAI,UAAU,aAAa9G,CAAS,CACvC,OACMlI,EAAG,CACNiN,GAAO,MAAM,aAAa/E,EAAU,IAAI,wCAAwC8G,EAAI,IAAI,GAAIhP,CAAC,CAChG,CACL,CAeA,SAASiP,GAAmB/G,EAAW,CACnC,MAAMzI,EAAgByI,EAAU,KAChC,GAAI4G,GAAY,IAAIrP,CAAa,EAC7BwN,UAAO,MAAM,sDAAsDxN,CAAa,GAAG,EAC5E,GAEXqP,GAAY,IAAIrP,EAAeyI,CAAS,EAExC,UAAW8G,KAAOJ,GAAM,SACpBG,GAAcC,EAAK9G,CAAS,EAEhC,UAAWgH,KAAaL,GAAY,SAChCE,GAAcG,EAAWhH,CAAS,EAEtC,MAAO,EACX,CAUA,SAASiH,GAAaH,EAAK7H,EAAM,CAC7B,MAAMiI,EAAsBJ,EAAI,UAC3B,YAAY,WAAW,EACvB,aAAa,CAAE,SAAU,EAAI,CAAE,EACpC,OAAII,GACKA,EAAoB,mBAEtBJ,EAAI,UAAU,YAAY7H,CAAI,CACzC,CA8CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMkI,GAAS,CACV,SAAiC,6EAEjC,eAA6C,iCAC7C,gBAA+C,kFAC/C,cAA2C,kDAC3C,qBAAyD,uCACzD,aAAyC,0EACzC,uBAA6D,6EAE7D,uBAA6D,wDAC7D,WAAqC,gFACrC,UAAmC,qFACnC,UAAqC,mFACrC,aAAyC,sFACzC,sCAA2F,0GAC3F,iCAAiF,2DACtF,EACMC,GAAgB,IAAIpK,GAAa,MAAO,WAAYmK,EAAM,EAEhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAME,EAAgB,CAClB,YAAYvH,EAASwH,EAAQ7H,EAAW,CACpC,KAAK,WAAa,GAClB,KAAK,SAAW,OAAO,OAAO,CAAE,EAAEK,CAAO,EACzC,KAAK,QAAU,OAAO,OAAO,CAAE,EAAEwH,CAAM,EACvC,KAAK,MAAQA,EAAO,KACpB,KAAK,gCACDA,EAAO,+BACX,KAAK,WAAa7H,EAClB,KAAK,UAAU,aAAa,IAAIT,GAAU,MAAO,IAAM,KAAM,QAAQ,CAA4B,CACpG,CACD,IAAI,gCAAiC,CACjC,YAAK,eAAc,EACZ,KAAK,+BACf,CACD,IAAI,+BAA+BwC,EAAK,CACpC,KAAK,eAAc,EACnB,KAAK,gCAAkCA,CAC1C,CACD,IAAI,MAAO,CACP,YAAK,eAAc,EACZ,KAAK,KACf,CACD,IAAI,SAAU,CACV,YAAK,eAAc,EACZ,KAAK,QACf,CACD,IAAI,QAAS,CACT,YAAK,eAAc,EACZ,KAAK,OACf,CACD,IAAI,WAAY,CACZ,OAAO,KAAK,UACf,CACD,IAAI,WAAY,CACZ,OAAO,KAAK,UACf,CACD,IAAI,UAAUA,EAAK,CACf,KAAK,WAAaA,CACrB,CAKD,gBAAiB,CACb,GAAI,KAAK,UACL,MAAM4F,GAAc,OAAO,cAA0C,CAAE,QAAS,KAAK,KAAK,CAAE,CAEnG,CACL,CAqJA,SAASG,GAAcC,EAAUC,EAAY,GAAI,CAC7C,IAAI3H,EAAU0H,EACV,OAAOC,GAAc,WAErBA,EAAY,CAAE,KADDA,IAGjB,MAAMH,EAAS,OAAO,OAAO,CAAE,KAAM/H,GAAoB,+BAAgC,IAAQkI,CAAS,EACpGxI,EAAOqI,EAAO,KACpB,GAAI,OAAOrI,GAAS,UAAY,CAACA,EAC7B,MAAMmI,GAAc,OAAO,eAA4C,CACnE,QAAS,OAAOnI,CAAI,CAChC,CAAS,EAGL,GADAa,IAAYA,EAAUjE,GAAmB,GACrC,CAACiE,EACD,MAAMsH,GAAc,OAAO,cAE/B,MAAMM,EAAchB,GAAM,IAAIzH,CAAI,EAClC,GAAIyI,EAAa,CAEb,GAAI/J,GAAUmC,EAAS4H,EAAY,OAAO,GACtC/J,GAAU2J,EAAQI,EAAY,MAAM,EACpC,OAAOA,EAGP,MAAMN,GAAc,OAAO,gBAA8C,CAAE,QAASnI,CAAI,CAAE,CAEjG,CACD,MAAMQ,EAAY,IAAIkB,GAAmB1B,CAAI,EAC7C,UAAWe,KAAa4G,GAAY,SAChCnH,EAAU,aAAaO,CAAS,EAEpC,MAAM2H,EAAS,IAAIN,GAAgBvH,EAASwH,EAAQ7H,CAAS,EAC7D,OAAAiH,GAAM,IAAIzH,EAAM0I,CAAM,EACfA,CACX,CA0EA,SAASC,GAAO3I,EAAOM,GAAoB,CACvC,MAAMuH,EAAMJ,GAAM,IAAIzH,CAAI,EAC1B,GAAI,CAAC6H,GAAO7H,IAASM,IAAsB1D,GAAmB,EAC1D,OAAO0L,GAAa,EAExB,GAAI,CAACT,EACD,MAAMM,GAAc,OAAO,SAAgC,CAAE,QAASnI,CAAI,CAAE,EAEhF,OAAO6H,CACX,CAsDA,SAASe,GAAgBC,EAAkBpE,EAASqE,EAAS,CACzD,IAAIjM,EAGJ,IAAIkM,GAAWlM,EAAK2K,GAAoBqB,CAAgB,KAAO,MAAQhM,IAAO,OAASA,EAAKgM,EACxFC,IACAC,GAAW,IAAID,CAAO,IAE1B,MAAME,EAAkBD,EAAQ,MAAM,OAAO,EACvCE,EAAkBxE,EAAQ,MAAM,OAAO,EAC7C,GAAIuE,GAAmBC,EAAiB,CACpC,MAAMC,EAAU,CACZ,+BAA+BH,CAAO,mBAAmBtE,CAAO,IAC5E,EACYuE,GACAE,EAAQ,KAAK,iBAAiBH,CAAO,mDAAmD,EAExFC,GAAmBC,GACnBC,EAAQ,KAAK,KAAK,EAElBD,GACAC,EAAQ,KAAK,iBAAiBzE,CAAO,mDAAmD,EAE5FqB,GAAO,KAAKoD,EAAQ,KAAK,GAAG,CAAC,EAC7B,MACH,CACDpB,GAAmB,IAAI/H,GAAU,GAAGgJ,CAAO,WAAY,KAAO,CAAE,QAAAA,EAAS,QAAAtE,CAAO,GAAK,SAAsC,EAC/H,CA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAM0E,GAAU,8BACVC,GAAa,EACbC,GAAa,2BACnB,IAAIC,GAAY,KAChB,SAASC,IAAe,CACpB,OAAKD,KACDA,GAAY9E,GAAO2E,GAASC,GAAY,CACpC,QAAS,CAACrE,EAAIyE,IAAe,CAMzB,OAAQA,EAAU,CACd,IAAK,GACD,GAAI,CACAzE,EAAG,kBAAkBsE,EAAU,CAClC,OACMxQ,EAAG,CAIN,QAAQ,KAAKA,CAAC,CACjB,CACR,CACJ,CACb,CAAS,EAAE,MAAM,GAAK,CACV,MAAMsP,GAAc,OAAO,WAAoC,CAC3D,qBAAsB,EAAE,OACxC,CAAa,CACb,CAAS,GAEEmB,EACX,CACA,eAAeG,GAA4B5B,EAAK,CAC5C,GAAI,CAEA,MAAMnE,GADK,MAAM6F,MACH,YAAYF,EAAU,EAC9BK,EAAS,MAAMhG,EAAG,YAAY2F,EAAU,EAAE,IAAIM,GAAW9B,CAAG,CAAC,EAGnE,aAAMnE,EAAG,KACFgG,CACV,OACM7Q,EAAG,CACN,GAAIA,aAAa+E,GACbkI,GAAO,KAAKjN,EAAE,OAAO,MAEpB,CACD,MAAM+Q,EAAczB,GAAc,OAAO,UAAkC,CACvE,qBAAsBtP,GAAM,KAAuB,OAASA,EAAE,OAC9E,CAAa,EACDiN,GAAO,KAAK8D,EAAY,OAAO,CAClC,CACJ,CACL,CACA,eAAeC,GAA2BhC,EAAKiC,EAAiB,CAC5D,GAAI,CAEA,MAAMpG,GADK,MAAM6F,MACH,YAAYF,GAAY,WAAW,EAEjD,MADoB3F,EAAG,YAAY2F,EAAU,EAC3B,IAAIS,EAAiBH,GAAW9B,CAAG,CAAC,EACtD,MAAMnE,EAAG,IACZ,OACM7K,EAAG,CACN,GAAIA,aAAa+E,GACbkI,GAAO,KAAKjN,EAAE,OAAO,MAEpB,CACD,MAAM+Q,EAAczB,GAAc,OAAO,UAAoC,CACzE,qBAAsBtP,GAAM,KAAuB,OAASA,EAAE,OAC9E,CAAa,EACDiN,GAAO,KAAK8D,EAAY,OAAO,CAClC,CACJ,CACL,CACA,SAASD,GAAW9B,EAAK,CACrB,MAAO,GAAGA,EAAI,IAAI,IAAIA,EAAI,QAAQ,KAAK,EAC3C,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMkC,GAAmB,KACnBC,GAA4B,GAClC,MAAMC,EAAqB,CACvB,YAAYzJ,EAAW,CACnB,KAAK,UAAYA,EAUjB,KAAK,iBAAmB,KACxB,MAAMqH,EAAM,KAAK,UAAU,YAAY,KAAK,EAAE,eAC9C,KAAK,SAAW,IAAIqC,GAAqBrC,CAAG,EAC5C,KAAK,wBAA0B,KAAK,SAAS,KAAM,EAAC,KAAK6B,IACrD,KAAK,iBAAmBA,EACjBA,EACV,CACJ,CAQD,MAAM,kBAAmB,CACrB,IAAI7M,EAAIsN,EACR,GAAI,CAMA,MAAMC,EALiB,KAAK,UACvB,YAAY,iBAAiB,EAC7B,eAGwB,wBACvBC,EAAOC,KAUb,KATMzN,EAAK,KAAK,oBAAsB,MAAQA,IAAO,OAAS,OAASA,EAAG,aAAe,OACrF,KAAK,iBAAmB,MAAM,KAAK,0BAE7BsN,EAAK,KAAK,oBAAsB,MAAQA,IAAO,OAAS,OAASA,EAAG,aAAe,OAMzF,KAAK,iBAAiB,wBAA0BE,GAChD,KAAK,iBAAiB,WAAW,KAAKE,GAAuBA,EAAoB,OAASF,CAAI,EAC9F,OAOA,GAHA,KAAK,iBAAiB,WAAW,KAAK,CAAE,KAAAA,EAAM,MAAAD,CAAK,CAAE,EAGjD,KAAK,iBAAiB,WAAW,OAASJ,GAA2B,CACrE,MAAMQ,EAAuBC,GAAwB,KAAK,iBAAiB,UAAU,EACrF,KAAK,iBAAiB,WAAW,OAAOD,EAAsB,CAAC,CAClE,CAEL,OAAO,KAAK,SAAS,UAAU,KAAK,gBAAgB,CACvD,OACM3R,EAAG,CACNiN,GAAO,KAAKjN,CAAC,CAChB,CACJ,CAQD,MAAM,qBAAsB,CACxB,IAAIgE,EACJ,GAAI,CAKA,GAJI,KAAK,mBAAqB,MAC1B,MAAM,KAAK,0BAGTA,EAAK,KAAK,oBAAsB,MAAQA,IAAO,OAAS,OAASA,EAAG,aAAe,MACrF,KAAK,iBAAiB,WAAW,SAAW,EAC5C,MAAO,GAEX,MAAMwN,EAAOC,KAEP,CAAE,iBAAAI,EAAkB,cAAAC,CAAe,EAAGC,GAA2B,KAAK,iBAAiB,UAAU,EACjGC,EAAe5O,GAA8B,KAAK,UAAU,CAAE,QAAS,EAAG,WAAYyO,CAAkB,EAAC,EAE/G,YAAK,iBAAiB,sBAAwBL,EAC1CM,EAAc,OAAS,GAEvB,KAAK,iBAAiB,WAAaA,EAInC,MAAM,KAAK,SAAS,UAAU,KAAK,gBAAgB,IAGnD,KAAK,iBAAiB,WAAa,GAE9B,KAAK,SAAS,UAAU,KAAK,gBAAgB,GAE/CE,CACV,OACMhS,EAAG,CACNiN,UAAO,KAAKjN,CAAC,EACN,EACV,CACJ,CACL,CACA,SAASyR,IAAmB,CAGxB,OAFc,IAAI,OAEL,YAAa,EAAC,UAAU,EAAG,EAAE,CAC9C,CACA,SAASM,GAA2BE,EAAiBC,EAAUhB,GAAkB,CAG7E,MAAMW,EAAmB,GAEzB,IAAIC,EAAgBG,EAAgB,QACpC,UAAWP,KAAuBO,EAAiB,CAE/C,MAAME,EAAiBN,EAAiB,KAAKO,GAAMA,EAAG,QAAUV,EAAoB,KAAK,EACzF,GAAKS,GAiBD,GAHAA,EAAe,MAAM,KAAKT,EAAoB,IAAI,EAG9CW,GAAWR,CAAgB,EAAIK,EAAS,CACxCC,EAAe,MAAM,MACrB,KACH,UAlBDN,EAAiB,KAAK,CAClB,MAAOH,EAAoB,MAC3B,MAAO,CAACA,EAAoB,IAAI,CAChD,CAAa,EACGW,GAAWR,CAAgB,EAAIK,EAAS,CAGxCL,EAAiB,IAAG,EACpB,KACH,CAaLC,EAAgBA,EAAc,MAAM,CAAC,CACxC,CACD,MAAO,CACH,iBAAAD,EACA,cAAAC,CACR,CACA,CACA,MAAMT,EAAqB,CACvB,YAAYrC,EAAK,CACb,KAAK,IAAMA,EACX,KAAK,wBAA0B,KAAK,8BACvC,CACD,MAAM,8BAA+B,CACjC,OAAKxK,GAAoB,EAIdC,GAA2B,EAC7B,KAAK,IAAM,EAAI,EACf,MAAM,IAAM,EAAK,EALf,EAOd,CAID,MAAM,MAAO,CAET,GADwB,MAAM,KAAK,wBAI9B,CACD,MAAM6N,EAAqB,MAAM1B,GAA4B,KAAK,GAAG,EACrE,OAAI0B,GAAuB,MAAiDA,EAAmB,WACpFA,EAGA,CAAE,WAAY,GAE5B,KAVG,OAAO,CAAE,WAAY,GAW5B,CAED,MAAM,UAAUC,EAAkB,CAC9B,IAAIvO,EAEJ,GADwB,MAAM,KAAK,wBAI9B,CACD,MAAMwO,EAA2B,MAAM,KAAK,OAC5C,OAAOxB,GAA2B,KAAK,IAAK,CACxC,uBAAwBhN,EAAKuO,EAAiB,yBAA2B,MAAQvO,IAAO,OAASA,EAAKwO,EAAyB,sBAC/H,WAAYD,EAAiB,UAC7C,CAAa,CACJ,KARG,OASP,CAED,MAAM,IAAIA,EAAkB,CACxB,IAAIvO,EAEJ,GADwB,MAAM,KAAK,wBAI9B,CACD,MAAMwO,EAA2B,MAAM,KAAK,OAC5C,OAAOxB,GAA2B,KAAK,IAAK,CACxC,uBAAwBhN,EAAKuO,EAAiB,yBAA2B,MAAQvO,IAAO,OAASA,EAAKwO,EAAyB,sBAC/H,WAAY,CACR,GAAGA,EAAyB,WAC5B,GAAGD,EAAiB,UACvB,CACjB,CAAa,CACJ,KAXG,OAYP,CACL,CAMA,SAASF,GAAWJ,EAAiB,CAEjC,OAAO7O,GAEP,KAAK,UAAU,CAAE,QAAS,EAAG,WAAY6O,CAAe,CAAE,CAAC,EAAE,MACjE,CAKA,SAASL,GAAwBa,EAAY,CACzC,GAAIA,EAAW,SAAW,EACtB,MAAO,GAEX,IAAId,EAAuB,EACvBe,EAAwBD,EAAW,CAAC,EAAE,KAC1C,QAASlR,EAAI,EAAGA,EAAIkR,EAAW,OAAQlR,IAC/BkR,EAAWlR,CAAC,EAAE,KAAOmR,IACrBA,EAAwBD,EAAWlR,CAAC,EAAE,KACtCoQ,EAAuBpQ,GAG/B,OAAOoQ,CACX,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,SAASgB,GAAuB1C,EAAS,CACrChB,GAAmB,IAAI/H,GAAU,kBAAmBS,GAAa,IAAIiF,GAA0BjF,CAAS,EAAG,SAAS,CAA6B,EACjJsH,GAAmB,IAAI/H,GAAU,YAAaS,GAAa,IAAIyJ,GAAqBzJ,CAAS,EAAG,SAAS,CAA6B,EAEtIoI,GAAgBhD,GAAQC,GAAWiD,CAAO,EAE1CF,GAAgBhD,GAAQC,GAAW,SAAS,EAE5C+C,GAAgB,UAAW,EAAE,CACjC,CAQA4C,GAAuB,EAAE,EC5qCzB,IAAIxL,GAAO,WACPyE,GAAU,SAEd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBAmE,GAAgB5I,GAAMyE,GAAS,KAAK,ECjBpC,MAAMzE,GAAO,0BACPyE,GAAU,SAEhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMgH,GAAqB,IACrBC,GAAkB,KAAKjH,EAAO,GAC9BkH,GAAwB,SACxBC,GAAwB,kDACxBC,GAA0B,GAAK,GAAK,IACpCC,GAAU,gBACVC,GAAe,gBAErB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAwB,CACzB,4BAAwE,kDACxE,iBAAkD,2CAClD,yBAAkE,mCAClE,iBAAkD,6FAClD,cAA4C,kDAC5C,8BAA4E,0EACjF,EACM7D,GAAgB,IAAIpK,GAAa+N,GAASC,GAAcC,EAAqB,EAEnF,SAASC,GAAc5T,EAAO,CAC1B,OAAQA,aAAiBuF,IACrBvF,EAAM,KAAK,SAAS,iBAC5B,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,SAAS6T,GAAyB,CAAE,UAAAC,GAAa,CAC7C,MAAO,GAAGP,EAAqB,aAAaO,CAAS,gBACzD,CACA,SAASC,GAAiC3S,EAAU,CAChD,MAAO,CACH,MAAOA,EAAS,MAChB,cAAe,EACf,UAAW4S,GAAkC5S,EAAS,SAAS,EAC/D,aAAc,KAAK,IAAK,CAChC,CACA,CACA,eAAe6S,GAAqBC,EAAa9S,EAAU,CAEvD,MAAM+S,GADe,MAAM/S,EAAS,QACL,MAC/B,OAAO0O,GAAc,OAAO,iBAAiD,CACzE,YAAAoE,EACA,WAAYC,EAAU,KACtB,cAAeA,EAAU,QACzB,aAAcA,EAAU,MAChC,CAAK,CACL,CACA,SAASC,GAAW,CAAE,OAAAC,GAAU,CAC5B,OAAO,IAAI,QAAQ,CACf,eAAgB,mBAChB,OAAQ,mBACR,iBAAkBA,CAC1B,CAAK,CACL,CACA,SAASC,GAAmBC,EAAW,CAAE,aAAAC,GAAgB,CACrD,MAAMC,EAAUL,GAAWG,CAAS,EACpC,OAAAE,EAAQ,OAAO,gBAAiBC,GAAuBF,CAAY,CAAC,EAC7DC,CACX,CAMA,eAAeE,GAAmBC,EAAI,CAClC,MAAMvD,EAAS,MAAMuD,IACrB,OAAIvD,EAAO,QAAU,KAAOA,EAAO,OAAS,IAEjCuD,EAAE,EAENvD,CACX,CACA,SAAS2C,GAAkCa,EAAmB,CAE1D,OAAO,OAAOA,EAAkB,QAAQ,IAAK,KAAK,CAAC,CACvD,CACA,SAASH,GAAuBF,EAAc,CAC1C,MAAO,GAAGlB,EAAqB,IAAIkB,CAAY,EACnD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,eAAeM,GAA0B,CAAE,UAAAP,EAAW,yBAAAQ,CAAwB,EAAI,CAAE,IAAAC,CAAG,EAAI,CACvF,MAAMC,EAAWpB,GAAyBU,CAAS,EAC7CE,EAAUL,GAAWG,CAAS,EAE9BW,EAAmBH,EAAyB,aAAa,CAC3D,SAAU,EAClB,CAAK,EACD,GAAIG,EAAkB,CAClB,MAAMC,EAAmB,MAAMD,EAAiB,sBAC5CC,GACAV,EAAQ,OAAO,oBAAqBU,CAAgB,CAE3D,CACD,MAAMC,EAAO,CACT,IAAAJ,EACA,YAAa1B,GACb,MAAOiB,EAAU,MACjB,WAAYlB,EACpB,EACUjO,EAAU,CACZ,OAAQ,OACR,QAAAqP,EACA,KAAM,KAAK,UAAUW,CAAI,CACjC,EACUhU,EAAW,MAAMuT,GAAmB,IAAM,MAAMM,EAAU7P,CAAO,CAAC,EACxE,GAAIhE,EAAS,GAAI,CACb,MAAMiU,EAAgB,MAAMjU,EAAS,OAOrC,MANoC,CAChC,IAAKiU,EAAc,KAAOL,EAC1B,mBAAoB,EACpB,aAAcK,EAAc,aAC5B,UAAWtB,GAAiCsB,EAAc,SAAS,CAC/E,CAEK,KAEG,OAAM,MAAMpB,GAAqB,sBAAuB7S,CAAQ,CAExE,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAiBA,SAASkU,GAAMC,EAAI,CACf,OAAO,IAAI,QAAQ7Q,GAAW,CAC1B,WAAWA,EAAS6Q,CAAE,CAC9B,CAAK,CACL,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,SAASC,GAAsBC,EAAO,CAElC,OADY,KAAK,OAAO,aAAa,GAAGA,CAAK,CAAC,EACnC,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,CACrD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAoB,oBACpBC,GAAc,GAKpB,SAASC,IAAc,CACnB,GAAI,CAGA,MAAMC,EAAe,IAAI,WAAW,EAAE,GACvB,KAAK,QAAU,KAAK,UAC5B,gBAAgBA,CAAY,EAEnCA,EAAa,CAAC,EAAI,IAAcA,EAAa,CAAC,EAAI,GAClD,MAAMb,EAAMc,GAAOD,CAAY,EAC/B,OAAOH,GAAkB,KAAKV,CAAG,EAAIA,EAAMW,EAC9C,MACU,CAEP,OAAOA,EACV,CACL,CAEA,SAASG,GAAOD,EAAc,CAI1B,OAHkBL,GAAsBK,CAAY,EAGnC,OAAO,EAAG,EAAE,CACjC,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAiBA,SAASE,GAAOxB,EAAW,CACvB,MAAO,GAAGA,EAAU,OAAO,IAAIA,EAAU,KAAK,EAClD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMyB,GAAqB,IAAI,IAK/B,SAASC,GAAW1B,EAAWS,EAAK,CAChC,MAAM5O,EAAM2P,GAAOxB,CAAS,EAC5B2B,GAAuB9P,EAAK4O,CAAG,EAC/BmB,GAAmB/P,EAAK4O,CAAG,CAC/B,CA0BA,SAASkB,GAAuB9P,EAAK4O,EAAK,CACtC,MAAM7L,EAAY6M,GAAmB,IAAI5P,CAAG,EAC5C,GAAK+C,EAGL,UAAWvE,KAAYuE,EACnBvE,EAASoQ,CAAG,CAEpB,CACA,SAASmB,GAAmB/P,EAAK4O,EAAK,CAClC,MAAMoB,EAAUC,KACZD,GACAA,EAAQ,YAAY,CAAE,IAAAhQ,EAAK,IAAA4O,CAAK,GAEpCsB,IACJ,CACA,IAAIC,GAAmB,KAEvB,SAASF,IAAsB,CAC3B,MAAI,CAACE,IAAoB,qBAAsB,OAC3CA,GAAmB,IAAI,iBAAiB,uBAAuB,EAC/DA,GAAiB,UAAY,GAAK,CAC9BL,GAAuB,EAAE,KAAK,IAAK,EAAE,KAAK,GAAG,CACzD,GAEWK,EACX,CACA,SAASD,IAAwB,CACzBN,GAAmB,OAAS,GAAKO,KACjCA,GAAiB,MAAK,EACtBA,GAAmB,KAE3B,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAgB,kCAChBC,GAAmB,EACnBC,GAAoB,+BAC1B,IAAIzF,GAAY,KAChB,SAASC,IAAe,CACpB,OAAKD,KACDA,GAAY9E,GAAOqK,GAAeC,GAAkB,CAChD,QAAS,CAAC/J,EAAIyE,IAAe,CAMzB,OAAQA,EAAU,CACd,IAAK,GACDzE,EAAG,kBAAkBgK,EAAiB,CAC7C,CACJ,CACb,CAAS,GAEEzF,EACX,CAEA,eAAe0F,GAAIpC,EAAW1P,EAAO,CACjC,MAAMuB,EAAM2P,GAAOxB,CAAS,EAEtBlJ,GADK,MAAM6F,MACH,YAAYwF,GAAmB,WAAW,EAClDE,EAAcvL,EAAG,YAAYqL,EAAiB,EAC9CG,EAAY,MAAMD,EAAY,IAAIxQ,CAAG,EAC3C,aAAMwQ,EAAY,IAAI/R,EAAOuB,CAAG,EAChC,MAAMiF,EAAG,MACL,CAACwL,GAAYA,EAAS,MAAQhS,EAAM,MACpCoR,GAAW1B,EAAW1P,EAAM,GAAG,EAE5BA,CACX,CAEA,eAAeiS,GAAOvC,EAAW,CAC7B,MAAMnO,EAAM2P,GAAOxB,CAAS,EAEtBlJ,GADK,MAAM6F,MACH,YAAYwF,GAAmB,WAAW,EACxD,MAAMrL,EAAG,YAAYqL,EAAiB,EAAE,OAAOtQ,CAAG,EAClD,MAAMiF,EAAG,IACb,CAOA,eAAe0L,GAAOxC,EAAWyC,EAAU,CACvC,MAAM5Q,EAAM2P,GAAOxB,CAAS,EAEtBlJ,GADK,MAAM6F,MACH,YAAYwF,GAAmB,WAAW,EAClDO,EAAQ5L,EAAG,YAAYqL,EAAiB,EACxCG,EAAY,MAAMI,EAAM,IAAI7Q,CAAG,EAC/B8F,EAAW8K,EAASH,CAAQ,EAClC,OAAI3K,IAAa,OACb,MAAM+K,EAAM,OAAO7Q,CAAG,EAGtB,MAAM6Q,EAAM,IAAI/K,EAAU9F,CAAG,EAEjC,MAAMiF,EAAG,KACLa,IAAa,CAAC2K,GAAYA,EAAS,MAAQ3K,EAAS,MACpD+J,GAAW1B,EAAWrI,EAAS,GAAG,EAE/BA,CACX,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAoBA,eAAegL,GAAqBC,EAAe,CAC/C,IAAIC,EACJ,MAAMC,EAAoB,MAAMN,GAAOI,EAAc,UAAWG,GAAY,CACxE,MAAMD,EAAoBE,GAAgCD,CAAQ,EAC5DE,EAAmBC,GAA+BN,EAAeE,CAAiB,EACxF,OAAAD,EAAsBI,EAAiB,oBAChCA,EAAiB,iBAChC,CAAK,EACD,OAAIH,EAAkB,MAAQ1B,GAEnB,CAAE,kBAAmB,MAAMyB,GAE/B,CACH,kBAAAC,EACA,oBAAAD,CACR,CACA,CAKA,SAASG,GAAgCD,EAAU,CAC/C,MAAMI,EAAQJ,GAAY,CACtB,IAAK1B,GAAa,EAClB,mBAAoB,CAC5B,EACI,OAAO+B,GAAqBD,CAAK,CACrC,CAQA,SAASD,GAA+BN,EAAeE,EAAmB,CACtE,GAAIA,EAAkB,qBAAuB,EAAmC,CAC5E,GAAI,CAAC,UAAU,OAAQ,CAEnB,MAAMO,EAA+B,QAAQ,OAAO9H,GAAc,OAAO,aAAa,CAA6B,EACnH,MAAO,CACH,kBAAAuH,EACA,oBAAqBO,CACrC,CACS,CAED,MAAMC,EAAkB,CACpB,IAAKR,EAAkB,IACvB,mBAAoB,EACpB,iBAAkB,KAAK,IAAK,CACxC,EACcD,EAAsBU,GAAqBX,EAAeU,CAAe,EAC/E,MAAO,CAAE,kBAAmBA,EAAiB,oBAAAT,EAChD,KACI,QAAIC,EAAkB,qBAAuB,EACvC,CACH,kBAAAA,EACA,oBAAqBU,GAAyBZ,CAAa,CACvE,EAGe,CAAE,kBAAAE,CAAiB,CAElC,CAEA,eAAeS,GAAqBX,EAAeE,EAAmB,CAClE,GAAI,CACA,MAAMW,EAA8B,MAAMlD,GAA0BqC,EAAeE,CAAiB,EACpG,OAAOV,GAAIQ,EAAc,UAAWa,CAA2B,CAClE,OACMxX,EAAG,CACN,MAAIoT,GAAcpT,CAAC,GAAKA,EAAE,WAAW,aAAe,IAGhD,MAAMsW,GAAOK,EAAc,SAAS,EAIpC,MAAMR,GAAIQ,EAAc,UAAW,CAC/B,IAAKE,EAAkB,IACvB,mBAAoB,CACpC,CAAa,EAEC7W,CACT,CACL,CAEA,eAAeuX,GAAyBZ,EAAe,CAInD,IAAIO,EAAQ,MAAMO,GAA0Bd,EAAc,SAAS,EACnE,KAAOO,EAAM,qBAAuB,GAEhC,MAAMpC,GAAM,GAAG,EACfoC,EAAQ,MAAMO,GAA0Bd,EAAc,SAAS,EAEnE,GAAIO,EAAM,qBAAuB,EAAmC,CAEhE,KAAM,CAAE,kBAAAL,EAAmB,oBAAAD,CAAmB,EAAK,MAAMF,GAAqBC,CAAa,EAC3F,OAAIC,GAKOC,CAEd,CACD,OAAOK,CACX,CASA,SAASO,GAA0B1D,EAAW,CAC1C,OAAOwC,GAAOxC,EAAW+C,GAAY,CACjC,GAAI,CAACA,EACD,MAAMxH,GAAc,OAAO,0BAE/B,OAAO6H,GAAqBL,CAAQ,CAC5C,CAAK,CACL,CACA,SAASK,GAAqBD,EAAO,CACjC,OAAIQ,GAA+BR,CAAK,EAC7B,CACH,IAAKA,EAAM,IACX,mBAAoB,CAChC,EAEWA,CACX,CACA,SAASQ,GAA+Bb,EAAmB,CACvD,OAAQA,EAAkB,qBAAuB,GAC7CA,EAAkB,iBAAmBjE,GAAqB,KAAK,IAAG,CAC1E,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,eAAe+E,GAAyB,CAAE,UAAA5D,EAAW,yBAAAQ,CAAwB,EAAIsC,EAAmB,CAChG,MAAMpC,EAAWmD,GAA6B7D,EAAW8C,CAAiB,EACpE5C,EAAUH,GAAmBC,EAAW8C,CAAiB,EAEzDnC,EAAmBH,EAAyB,aAAa,CAC3D,SAAU,EAClB,CAAK,EACD,GAAIG,EAAkB,CAClB,MAAMC,EAAmB,MAAMD,EAAiB,sBAC5CC,GACAV,EAAQ,OAAO,oBAAqBU,CAAgB,CAE3D,CACD,MAAMC,EAAO,CACT,aAAc,CACV,WAAY/B,GACZ,MAAOkB,EAAU,KACpB,CACT,EACUnP,EAAU,CACZ,OAAQ,OACR,QAAAqP,EACA,KAAM,KAAK,UAAUW,CAAI,CACjC,EACUhU,EAAW,MAAMuT,GAAmB,IAAM,MAAMM,EAAU7P,CAAO,CAAC,EACxE,GAAIhE,EAAS,GAAI,CACb,MAAMiU,EAAgB,MAAMjU,EAAS,OAErC,OAD2B2S,GAAiCsB,CAAa,CAE5E,KAEG,OAAM,MAAMpB,GAAqB,sBAAuB7S,CAAQ,CAExE,CACA,SAASgX,GAA6B7D,EAAW,CAAE,IAAAS,GAAO,CACtD,MAAO,GAAGnB,GAAyBU,CAAS,CAAC,IAAIS,CAAG,sBACxD,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAsBA,eAAeqD,GAAiBlB,EAAemB,EAAe,GAAO,CACjE,IAAIC,EACJ,MAAMb,EAAQ,MAAMX,GAAOI,EAAc,UAAWG,GAAY,CAC5D,GAAI,CAACkB,GAAkBlB,CAAQ,EAC3B,MAAMxH,GAAc,OAAO,kBAE/B,MAAM2I,EAAenB,EAAS,UAC9B,GAAI,CAACgB,GAAgBI,GAAiBD,CAAY,EAE9C,OAAOnB,EAEN,GAAImB,EAAa,gBAAkB,EAEpC,OAAAF,EAAeI,GAA0BxB,EAAemB,CAAY,EAC7DhB,EAEN,CAED,GAAI,CAAC,UAAU,OACX,MAAMxH,GAAc,OAAO,eAE/B,MAAM+H,EAAkBe,GAAoCtB,CAAQ,EACpE,OAAAiB,EAAeM,GAAyB1B,EAAeU,CAAe,EAC/DA,CACV,CACT,CAAK,EAID,OAHkBU,EACZ,MAAMA,EACNb,EAAM,SAEhB,CAOA,eAAeiB,GAA0BxB,EAAemB,EAAc,CAIlE,IAAIZ,EAAQ,MAAMoB,GAAuB3B,EAAc,SAAS,EAChE,KAAOO,EAAM,UAAU,gBAAkB,GAErC,MAAMpC,GAAM,GAAG,EACfoC,EAAQ,MAAMoB,GAAuB3B,EAAc,SAAS,EAEhE,MAAM4B,EAAYrB,EAAM,UACxB,OAAIqB,EAAU,gBAAkB,EAErBV,GAAiBlB,EAAemB,CAAY,EAG5CS,CAEf,CASA,SAASD,GAAuBvE,EAAW,CACvC,OAAOwC,GAAOxC,EAAW+C,GAAY,CACjC,GAAI,CAACkB,GAAkBlB,CAAQ,EAC3B,MAAMxH,GAAc,OAAO,kBAE/B,MAAM2I,EAAenB,EAAS,UAC9B,OAAI0B,GAA4BP,CAAY,EACjC,OAAO,OAAO,OAAO,OAAO,GAAInB,CAAQ,EAAG,CAAE,UAAW,CAAE,cAAe,CAAC,CAAoC,GAElHA,CACf,CAAK,CACL,CACA,eAAeuB,GAAyB1B,EAAeE,EAAmB,CACtE,GAAI,CACA,MAAM0B,EAAY,MAAMZ,GAAyBhB,EAAeE,CAAiB,EAC3E4B,EAA2B,OAAO,OAAO,OAAO,OAAO,CAAE,EAAE5B,CAAiB,EAAG,CAAE,UAAA0B,CAAS,CAAE,EAClG,aAAMpC,GAAIQ,EAAc,UAAW8B,CAAwB,EACpDF,CACV,OACMvY,EAAG,CACN,GAAIoT,GAAcpT,CAAC,IACdA,EAAE,WAAW,aAAe,KAAOA,EAAE,WAAW,aAAe,KAGhE,MAAMsW,GAAOK,EAAc,SAAS,MAEnC,CACD,MAAM8B,EAA2B,OAAO,OAAO,OAAO,OAAO,CAAE,EAAE5B,CAAiB,EAAG,CAAE,UAAW,CAAE,cAAe,CAAC,CAAoC,GACxJ,MAAMV,GAAIQ,EAAc,UAAW8B,CAAwB,CAC9D,CACD,MAAMzY,CACT,CACL,CACA,SAASgY,GAAkBnB,EAAmB,CAC1C,OAAQA,IAAsB,QAC1BA,EAAkB,qBAAuB,CACjD,CACA,SAASqB,GAAiBK,EAAW,CACjC,OAAQA,EAAU,gBAAkB,GAChC,CAACG,GAAmBH,CAAS,CACrC,CACA,SAASG,GAAmBH,EAAW,CACnC,MAAMhP,EAAM,KAAK,MACjB,OAAQA,EAAMgP,EAAU,cACpBA,EAAU,aAAeA,EAAU,UAAYhP,EAAMyJ,EAC7D,CAEA,SAASoF,GAAoCtB,EAAU,CACnD,MAAM6B,EAAsB,CACxB,cAAe,EACf,YAAa,KAAK,IAAK,CAC/B,EACI,OAAO,OAAO,OAAO,OAAO,OAAO,GAAI7B,CAAQ,EAAG,CAAE,UAAW6B,CAAmB,CAAE,CACxF,CACA,SAASH,GAA4BD,EAAW,CAC5C,OAAQA,EAAU,gBAAkB,GAChCA,EAAU,YAAc3F,GAAqB,KAAK,IAAG,CAC7D,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAuBA,eAAegG,GAAMjC,EAAe,CAChC,MAAMkC,EAAoBlC,EACpB,CAAE,kBAAAE,EAAmB,oBAAAD,CAAmB,EAAK,MAAMF,GAAqBmC,CAAiB,EAC/F,OAAIjC,EACAA,EAAoB,MAAM,QAAQ,KAAK,EAKvCiB,GAAiBgB,CAAiB,EAAE,MAAM,QAAQ,KAAK,EAEpDhC,EAAkB,GAC7B,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAwBA,eAAeiC,GAASnC,EAAemB,EAAe,GAAO,CACzD,MAAMe,EAAoBlC,EAC1B,aAAMoC,GAAiCF,CAAiB,GAGtC,MAAMhB,GAAiBgB,EAAmBf,CAAY,GACvD,KACrB,CACA,eAAeiB,GAAiCpC,EAAe,CAC3D,KAAM,CAAE,oBAAAC,CAAqB,EAAG,MAAMF,GAAqBC,CAAa,EACpEC,GAEA,MAAMA,CAEd,CA+IA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,SAASoC,GAAiBhK,EAAK,CAC3B,GAAI,CAACA,GAAO,CAACA,EAAI,QACb,MAAMiK,GAAqB,mBAAmB,EAElD,GAAI,CAACjK,EAAI,KACL,MAAMiK,GAAqB,UAAU,EAGzC,MAAMC,EAAa,CACf,YACA,SACA,OACR,EACI,UAAWC,KAAWD,EAClB,GAAI,CAAClK,EAAI,QAAQmK,CAAO,EACpB,MAAMF,GAAqBE,CAAO,EAG1C,MAAO,CACH,QAASnK,EAAI,KACb,UAAWA,EAAI,QAAQ,UACvB,OAAQA,EAAI,QAAQ,OACpB,MAAOA,EAAI,QAAQ,KAC3B,CACA,CACA,SAASiK,GAAqBG,EAAW,CACrC,OAAO9J,GAAc,OAAO,4BAAuE,CAC/F,UAAA8J,CACR,CAAK,CACL,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAMC,GAAqB,gBACrBC,GAA8B,yBAC9BC,GAAiB5R,GAAc,CACjC,MAAMqH,EAAMrH,EAAU,YAAY,KAAK,EAAE,aAAY,EAE/CoM,EAAYiF,GAAiBhK,CAAG,EAChCuF,EAA2BpF,GAAaH,EAAK,WAAW,EAO9D,MAN0B,CACtB,IAAAA,EACA,UAAA+E,EACA,yBAAAQ,EACA,QAAS,IAAM,QAAQ,QAAS,CACxC,CAEA,EACMiF,GAAmB7R,GAAc,CACnC,MAAMqH,EAAMrH,EAAU,YAAY,KAAK,EAAE,aAAY,EAE/CgP,EAAgBxH,GAAaH,EAAKqK,EAAkB,EAAE,aAAY,EAKxE,MAJ8B,CAC1B,MAAO,IAAMT,GAAMjC,CAAa,EAChC,SAAWmB,GAAiBgB,GAASnC,EAAemB,CAAY,CACxE,CAEA,EACA,SAAS2B,IAAwB,CAC7BxK,GAAmB,IAAI/H,GAAUmS,GAAoBE,GAAe,QAAoC,GACxGtK,GAAmB,IAAI/H,GAAUoS,GAA6BE,GAAiB,SAAsC,EACzH,CAQAC,KACA1J,GAAgB5I,GAAMyE,EAAO,EAE7BmE,GAAgB5I,GAAMyE,GAAS,SAAS,ECznCxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,MAAM8N,GAAiB,YAEjBC,GAAa,cACbC,GAAa,SACbC,GAAuB,GAAK,IAC5BC,GAAqB,6EACrBC,GAAW,2CAEjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAM9M,GAAS,IAAIxD,GAAO,qBAAqB,EAE/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,MAAM4F,GAAS,CACV,iBAAuD,0IAGvD,sBAAiE,mRAIjE,+BAAmF,iJAGnF,+BAAmF,wEACnF,4BAA6E,oMAG7E,wBAAqE,oMAGrE,iBAAuD,yKAEvD,sBAAiE,kEACjE,aAA+C,8HAE/C,YAA6C,4HAE7C,eAAmD,kCACnD,wBAAqE,8DAC1E,EACMC,GAAgB,IAAIpK,GAAa,YAAa,YAAamK,EAAM,EAEvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,SAAS2K,GAAgCC,EAAK,CAC1C,GAAI,CAACA,EAAI,WAAWF,EAAQ,EAAG,CAC3B,MAAMG,EAAM5K,GAAc,OAAO,wBAAoE,CACjG,QAAS2K,CACrB,CAAS,EACDhN,UAAO,KAAKiN,EAAI,OAAO,EAChB,EACV,CACD,OAAOD,CACX,CAOA,SAASE,GAAkBC,EAAU,CACjC,OAAO,QAAQ,IAAIA,EAAS,IAAI5P,GAAWA,EAAQ,MAAMxK,GAAKA,CAAC,CAAC,CAAC,CACrE,CAQA,SAASqa,GAAyBC,EAAYC,EAAe,CAGzD,IAAIC,EACJ,OAAI,OAAO,eACPA,EAAqB,OAAO,aAAa,aAAaF,EAAYC,CAAa,GAE5EC,CACX,CAKA,SAASC,GAAgBC,EAAeC,EAAe,CACnD,MAAMH,EAAqBH,GAAyB,yBAA0B,CAC1E,gBAAiBL,EACzB,CAAK,EACKY,EAAS,SAAS,cAAc,QAAQ,EAGxCC,EAAgB,GAAGd,EAAQ,MAAMW,CAAa,OAAOC,CAAa,GACxEC,EAAO,IAAMJ,EACPA,GAAuB,KAAwC,OAASA,EAAmB,gBAAgBK,CAAa,EACxHA,EACND,EAAO,MAAQ,GACf,SAAS,KAAK,YAAYA,CAAM,CACpC,CAKA,SAASE,GAAqBJ,EAAe,CAEzC,IAAIK,EAAY,GAChB,OAAI,MAAM,QAAQ,OAAOL,CAAa,CAAC,EACnCK,EAAY,OAAOL,CAAa,EAGhC,OAAOA,CAAa,EAAIK,EAErBA,CACX,CAWA,eAAeC,GAAaC,EAAUC,EAA2BC,EAA2BC,EAAsBT,EAAeU,EAAY,CAGzI,MAAMC,EAAqBF,EAAqBT,CAAa,EAC7D,GAAI,CACA,GAAIW,EACA,MAAMJ,EAA0BI,CAAkB,MAEjD,CAMD,MAAMC,GADuB,MAAMpB,GAAkBgB,CAAyB,GACrC,KAAK3L,GAAUA,EAAO,gBAAkBmL,CAAa,EAC1FY,GACA,MAAML,EAA0BK,EAAY,KAAK,CAExD,CACJ,OACMvb,EAAG,CACNiN,GAAO,MAAMjN,CAAC,CACjB,CACDib,EAAS,SAAmCN,EAAeU,CAAU,CACzE,CAUA,eAAeG,GAAYP,EAAUC,EAA2BC,EAA2BR,EAAeU,EAAY,CAClH,GAAI,CACA,IAAII,EAAkC,GAGtC,GAAIJ,GAAcA,EAAW,QAAY,CACrC,IAAIK,EAAeL,EAAW,QAEzB,MAAM,QAAQK,CAAY,IAC3BA,EAAe,CAACA,CAAY,GAIhC,MAAMC,EAAuB,MAAMxB,GAAkBgB,CAAyB,EAC9E,UAAWS,KAAYF,EAAc,CAEjC,MAAMH,EAAcI,EAAqB,KAAKnM,GAAUA,EAAO,gBAAkBoM,CAAQ,EACnFC,EAAwBN,GAAeL,EAA0BK,EAAY,KAAK,EACxF,GAAIM,EACAJ,EAAgC,KAAKI,CAAqB,MAEzD,CAIDJ,EAAkC,GAClC,KACH,CACJ,CACJ,CAIGA,EAAgC,SAAW,IAE3CA,EAAkC,OAAO,OAAOP,CAAyB,GAI7E,MAAM,QAAQ,IAAIO,CAA+B,EAEjDR,EAAS,QAAiCN,EAAeU,GAAc,CAAE,EAC5E,OACMrb,EAAG,CACNiN,GAAO,MAAMjN,CAAC,CACjB,CACL,CAUA,SAAS8b,GAASb,EAKlBC,EAKAC,EAMAC,EAAsB,CAOlB,eAAeW,EAAYC,KAAY1S,EAAM,CACzC,GAAI,CAEA,GAAI0S,IAAY,QAAiC,CAC7C,KAAM,CAACrB,EAAeU,CAAU,EAAI/R,EAEpC,MAAMkS,GAAYP,EAAUC,EAA2BC,EAA2BR,EAAeU,CAAU,CAC9G,SACQW,IAAY,SAAmC,CACpD,KAAM,CAACrB,EAAeU,CAAU,EAAI/R,EAEpC,MAAM0R,GAAaC,EAAUC,EAA2BC,EAA2BC,EAAsBT,EAAeU,CAAU,CACrI,SACQW,IAAY,UAAqC,CACtD,KAAM,CAACC,EAAeZ,CAAU,EAAI/R,EAEpC2R,EAAS,UAAqCgB,EAAeZ,CAAU,CAC1E,SACQW,IAAY,MAA6B,CAC9C,KAAM,CAACrB,EAAeuB,EAAW9X,CAAQ,EAAIkF,EAC7C2R,EAAS,MAA6BN,EAAeuB,EAAW9X,CAAQ,CAC3E,SACQ4X,IAAY,MAA6B,CAC9C,KAAM,CAACG,CAAY,EAAI7S,EAEvB2R,EAAS,MAA6BkB,CAAY,CACrD,MAEGlB,EAASe,EAAS,GAAG1S,CAAI,CAEhC,OACMtJ,EAAG,CACNiN,GAAO,MAAMjN,CAAC,CACjB,CACJ,CACD,OAAO+b,CACX,CAYA,SAASK,GAAiBlB,EAA2BC,EAA2BC,EAAsBV,EAAe2B,EAAkB,CAEnI,IAAIpB,EAAW,YAAaqB,EAAO,CAE/B,OAAO5B,CAAa,EAAE,KAAK,SAAS,CAC5C,EAEI,OAAI,OAAO2B,CAAgB,GACvB,OAAO,OAAOA,CAAgB,GAAM,aAEpCpB,EAAW,OAAOoB,CAAgB,GAEtC,OAAOA,CAAgB,EAAIP,GAASb,EAAUC,EAA2BC,EAA2BC,CAAoB,EACjH,CACH,SAAAH,EACA,YAAa,OAAOoB,CAAgB,CAC5C,CACA,CAKA,SAASE,GAAqB7B,EAAe,CACzC,MAAM8B,EAAa,OAAO,SAAS,qBAAqB,QAAQ,EAChE,UAAWC,KAAO,OAAO,OAAOD,CAAU,EACtC,GAAIC,EAAI,KACJA,EAAI,IAAI,SAAS1C,EAAQ,GACzB0C,EAAI,IAAI,SAAS/B,CAAa,EAC9B,OAAO+B,EAGf,OAAO,IACX,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAsBA,MAAMC,GAAoB,GAIpBC,GAAuB,IAI7B,MAAMC,EAAU,CACZ,YAAYC,EAAmB,GAAIhW,EAAiB8V,GAAsB,CACtE,KAAK,iBAAmBE,EACxB,KAAK,eAAiBhW,CACzB,CACD,oBAAoBiW,EAAO,CACvB,OAAO,KAAK,iBAAiBA,CAAK,CACrC,CACD,oBAAoBA,EAAOC,EAAU,CACjC,KAAK,iBAAiBD,CAAK,EAAIC,CAClC,CACD,uBAAuBD,EAAO,CAC1B,OAAO,KAAK,iBAAiBA,CAAK,CACrC,CACL,CACA,MAAME,GAAmB,IAAIJ,GAK7B,SAAShJ,GAAWC,EAAQ,CACxB,OAAO,IAAI,QAAQ,CACf,OAAQ,mBACR,iBAAkBA,CAC1B,CAAK,CACL,CAKA,eAAeoJ,GAAmBC,EAAW,CACzC,IAAIlZ,EACJ,KAAM,CAAE,MAAA8Y,EAAO,OAAAjJ,CAAQ,EAAGqJ,EACpBtY,EAAU,CACZ,OAAQ,MACR,QAASgP,GAAWC,CAAM,CAClC,EACUsJ,EAASrD,GAAmB,QAAQ,WAAYgD,CAAK,EACrDlc,EAAW,MAAM,MAAMuc,EAAQvY,CAAO,EAC5C,GAAIhE,EAAS,SAAW,KAAOA,EAAS,SAAW,IAAK,CACpD,IAAIwc,EAAe,GACnB,GAAI,CAEA,MAAMC,EAAgB,MAAMzc,EAAS,KAAM,EACtC,GAAAoD,EAAKqZ,EAAa,SAAW,MAAQrZ,IAAO,SAAkBA,EAAG,UAClEoZ,EAAeC,EAAa,MAAM,QAEzC,MACgB,CAAG,CACpB,MAAM/N,GAAc,OAAO,sBAAgE,CACvF,WAAY1O,EAAS,OACrB,gBAAiBwc,CAC7B,CAAS,CACJ,CACD,OAAOxc,EAAS,MACpB,CAKA,eAAe0c,GAA4BtO,EAE3CuO,EAAYP,GAAkBQ,EAAe,CACzC,KAAM,CAAE,MAAAV,EAAO,OAAAjJ,EAAQ,cAAA8G,CAAa,EAAK3L,EAAI,QAC7C,GAAI,CAAC8N,EACD,MAAMxN,GAAc,OAAO,aAE/B,GAAI,CAACuE,EAAQ,CACT,GAAI8G,EACA,MAAO,CACH,cAAAA,EACA,MAAAmC,CAChB,EAEQ,MAAMxN,GAAc,OAAO,aAC9B,CACD,MAAMuN,EAAmBU,EAAU,oBAAoBT,CAAK,GAAK,CAC7D,aAAc,EACd,sBAAuB,KAAK,IAAK,CACzC,EACUW,EAAS,IAAIC,GACnB,kBAAW,SAAY,CAEnBD,EAAO,MAAK,CACf,EAAgD5D,EAAoB,EAC9D8D,GAAmC,CAAE,MAAAb,EAAO,OAAAjJ,EAAQ,cAAA8G,CAAa,EAAIkC,EAAkBY,EAAQF,CAAS,CACnH,CAOA,eAAeI,GAAmCT,EAAW,CAAE,sBAAAU,EAAuB,aAAAhX,CAAY,EAAI6W,EAAQF,EAAYP,GACxH,CACE,IAAIhZ,EACJ,KAAM,CAAE,MAAA8Y,EAAO,cAAAnC,CAAe,EAAGuC,EAIjC,GAAI,CACA,MAAMW,GAAoBJ,EAAQG,CAAqB,CAC1D,OACM5d,EAAG,CACN,GAAI2a,EACA1N,UAAO,KAAK,6GAC+B0N,CAAa,yEACqB3a,GAAM,KAAuB,OAASA,EAAE,OAAO,GAAG,EACxH,CAAE,MAAA8c,EAAO,cAAAnC,GAEpB,MAAM3a,CACT,CACD,GAAI,CACA,MAAMY,EAAW,MAAMqc,GAAmBC,CAAS,EAEnD,OAAAK,EAAU,uBAAuBT,CAAK,EAC/Blc,CACV,OACMZ,EAAG,CACN,MAAMR,EAAQQ,EACd,GAAI,CAAC8d,GAAiBte,CAAK,EAAG,CAE1B,GADA+d,EAAU,uBAAuBT,CAAK,EAClCnC,EACA1N,UAAO,KAAK,0GAC+B0N,CAAa,yEACqBnb,GAAU,KAA2B,OAASA,EAAM,OAAO,GAAG,EACpI,CAAE,MAAAsd,EAAO,cAAAnC,GAGhB,MAAM3a,CAEb,CACD,MAAM+d,EAAgB,QAAQ/Z,EAAKxE,GAAU,KAA2B,OAASA,EAAM,cAAgB,MAAQwE,IAAO,OAAS,OAASA,EAAG,UAAU,IAAM,IACrJ2C,GAAuBC,EAAc2W,EAAU,eAAgBb,EAAiB,EAChF/V,GAAuBC,EAAc2W,EAAU,cAAc,EAE7DV,EAAmB,CACrB,sBAAuB,KAAK,IAAG,EAAKkB,EACpC,aAAcnX,EAAe,CACzC,EAEQ,OAAA2W,EAAU,oBAAoBT,EAAOD,CAAgB,EACrD5P,GAAO,MAAM,iCAAiC8Q,CAAa,SAAS,EAC7DJ,GAAmCT,EAAWL,EAAkBY,EAAQF,CAAS,CAC3F,CACL,CAaA,SAASM,GAAoBJ,EAAQG,EAAuB,CACxD,OAAO,IAAI,QAAQ,CAAC1Z,EAASC,IAAW,CAEpC,MAAM4Z,EAAgB,KAAK,IAAIH,EAAwB,KAAK,IAAG,EAAI,CAAC,EAC9DI,EAAU,WAAW9Z,EAAS6Z,CAAa,EAEjDN,EAAO,iBAAiB,IAAM,CAC1B,aAAaO,CAAO,EAEpB7Z,EAAOmL,GAAc,OAAO,iBAAsD,CAC9E,sBAAAsO,CACH,EAAC,CACd,CAAS,CACT,CAAK,CACL,CAIA,SAASE,GAAiB,EAAG,CACzB,GAAI,EAAE,aAAa/Y,KAAkB,CAAC,EAAE,WACpC,MAAO,GAGX,MAAMkZ,EAAa,OAAO,EAAE,WAAW,UAAa,EACpD,OAAQA,IAAe,KACnBA,IAAe,KACfA,IAAe,KACfA,IAAe,GACvB,CASA,MAAMP,EAAqB,CACvB,aAAc,CACV,KAAK,UAAY,EACpB,CACD,iBAAiBQ,EAAU,CACvB,KAAK,UAAU,KAAKA,CAAQ,CAC/B,CACD,OAAQ,CACJ,KAAK,UAAU,QAAQA,GAAYA,EAAU,EAChD,CACL,CA6BA,eAAeC,GAAWC,EAAcvC,EAAuBwC,EAAWC,EAAatW,EAAS,CAC5F,GAAIA,GAAWA,EAAQ,OAAQ,CAC3BoW,EAAa,QAAiCC,EAAWC,CAAW,EACpE,MACH,KACI,CACD,MAAM3D,EAAgB,MAAMkB,EACtB0C,EAAS,OAAO,OAAO,OAAO,OAAO,GAAID,CAAW,EAAG,CAAE,QAAW3D,CAAe,GACzFyD,EAAa,QAAiCC,EAAWE,CAAM,CAClE,CACL,CAwFA,eAAeC,GAAgC3C,EAAuB4C,EAAS,CAC3E,MAAM9D,EAAgB,MAAMkB,EAC5B,OAAO,cAAclB,CAAa,EAAE,EAAI,CAAC8D,CAC7C,CAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgBA,eAAeC,IAAoB,CAC/B,GAAKla,GAAoB,EAOrB,GAAI,CACA,MAAMC,GAAyB,CAClC,OACM,EAAG,CACNwI,UAAO,KAAKqC,GAAc,OAAO,wBAAoE,CACjG,UAAW,GAAM,KAAuB,OAAS,EAAE,SAAU,CAC7E,CAAa,EAAE,OAAO,EACH,EACV,KAdDrC,WAAO,KAAKqC,GAAc,OAAO,wBAAoE,CACjG,UAAW,iDACvB,CAAS,EAAE,OAAO,EACH,GAaX,MAAO,EACX,CAcA,eAAeqP,GAAqB3P,EAAKmM,EAA2BC,EAAsBzE,EAAesE,EAAUP,EAAe1S,EAAS,CACvI,IAAIhE,EACJ,MAAM4a,EAAuBtB,GAA4BtO,CAAG,EAE5D4P,EACK,KAAKpP,GAAU,CAChB4L,EAAqB5L,EAAO,aAAa,EAAIA,EAAO,MAChDR,EAAI,QAAQ,eACZQ,EAAO,gBAAkBR,EAAI,QAAQ,eACrC/B,GAAO,KAAK,oDAAoD+B,EAAI,QAAQ,aAAa,gEACtBQ,EAAO,aAAa,0KAGJ,CAE/F,CAAK,EACI,MAAMxP,GAAKiN,GAAO,MAAMjN,CAAC,CAAC,EAE/Bmb,EAA0B,KAAKyD,CAAoB,EACnD,MAAMC,EAAaH,KAAoB,KAAKI,GAAc,CACtD,GAAIA,EACA,OAAOnI,EAAc,OAKjC,CAAK,EACK,CAACoI,EAAevK,CAAG,EAAI,MAAM,QAAQ,IAAI,CAC3CoK,EACAC,CACR,CAAK,EAGItC,GAAqB7B,CAAa,GACnCD,GAAgBC,EAAeqE,EAAc,aAAa,EAW9D9D,EAAS,KAAM,IAAI,IAAM,EAGzB,MAAM+D,GAAoBhb,EAAKgE,GAAY,KAA6B,OAASA,EAAQ,UAAY,MAAQhE,IAAO,OAASA,EAAK,GAElI,OAAAgb,EAAiBpF,EAAU,EAAI,WAC/BoF,EAAiB,OAAS,GACtBxK,GAAO,OACPwK,EAAiBrF,EAAU,EAAInF,GAMnCyG,EAAS,SAAmC8D,EAAc,cAAeC,CAAgB,EAMlFD,EAAc,aACzB,CAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmBA,IAAAE,GAAA,KAAuB,CACnB,YAAYjQ,EAAK,CACb,KAAK,IAAMA,CACd,CACD,SAAU,CACN,cAAOkM,GAA0B,KAAK,IAAI,QAAQ,KAAK,EAChD,QAAQ,SAClB,CACL,EAMIA,GAA4B,GAM5BC,GAA4B,GAOhC,MAAMC,GAAuB,GAI7B,IAAIV,GAAgB,YAIhBwE,GAAW,OAKXC,GAKAC,GAKAC,GAAiB,GA6BrB,SAASC,IAA+B,CACpC,MAAMC,EAAwB,GAO9B,GANIjb,GAAkB,GAClBib,EAAsB,KAAK,0CAA0C,EAEpE1a,GAAiB,GAClB0a,EAAsB,KAAK,4BAA4B,EAEvDA,EAAsB,OAAS,EAAG,CAClC,MAAMC,EAAUD,EACX,IAAI,CAAC5f,EAAS8f,IAAU,IAAIA,EAAQ,CAAC,KAAK9f,CAAO,EAAE,EACnD,KAAK,GAAG,EACPua,EAAM5K,GAAc,OAAO,4BAA4E,CACzG,UAAWkQ,CACvB,CAAS,EACDvS,GAAO,KAAKiN,EAAI,OAAO,CAC1B,CACL,CAKA,SAASwF,GAAQ1Q,EAAK2H,EAAe3O,EAAS,CAC1CsX,KACA,MAAMxC,EAAQ9N,EAAI,QAAQ,MAC1B,GAAI,CAAC8N,EACD,MAAMxN,GAAc,OAAO,aAE/B,GAAI,CAACN,EAAI,QAAQ,OACb,GAAIA,EAAI,QAAQ,cACZ/B,GAAO,KAAK,yKACqE+B,EAAI,QAAQ,aAAa,sEAChC,MAG1E,OAAMM,GAAc,OAAO,cAGnC,GAAI4L,GAA0B4B,CAAK,GAAK,KACpC,MAAMxN,GAAc,OAAO,iBAAsD,CAC7E,GAAIwN,CAChB,CAAS,EAEL,GAAI,CAACuC,GAAgB,CAGjBvE,GAAqBJ,EAAa,EAClC,KAAM,CAAE,YAAAiF,EAAa,SAAA1E,CAAQ,EAAKmB,GAAiBlB,GAA2BC,GAA2BC,GAAsBV,GAAewE,EAAQ,EACtJE,GAAsBO,EACtBR,GAAmBlE,EACnBoE,GAAiB,EACpB,CAGD,OAAAnE,GAA0B4B,CAAK,EAAI6B,GAAqB3P,EAAKmM,GAA2BC,GAAsBzE,EAAewI,GAAkBzE,GAAe1S,CAAO,EAC3I,IAAI4X,GAAiB5Q,CAAG,CAEtD,CAUA,SAAS6Q,GAAa7Q,EAAMc,KAAU,CAClCd,EAAM/H,GAAmB+H,CAAG,EAE5B,MAAM8Q,EAAoB3Q,GAAaH,EAAK0K,EAAc,EAC1D,OAAIoG,EAAkB,gBACXA,EAAkB,eAEtBC,GAAoB/Q,CAAG,CAClC,CAQA,SAAS+Q,GAAoB/Q,EAAKhH,EAAU,GAAI,CAE5C,MAAM8X,EAAoB3Q,GAAaH,EAAK0K,EAAc,EAC1D,GAAIoG,EAAkB,gBAAiB,CACnC,MAAMpX,EAAmBoX,EAAkB,eAC3C,GAAIja,GAAUmC,EAAS8X,EAAkB,WAAY,GACjD,OAAOpX,EAGP,MAAM4G,GAAc,OAAO,sBAElC,CAED,OAD0BwQ,EAAkB,WAAW,CAAE,QAAA9X,CAAS,EAEtE,CAYA,eAAegY,IAAc,CAOzB,GANI1b,GAAkB,GAGlB,CAACO,GAAiB,GAGlB,CAACL,GAAoB,EACrB,MAAO,GAEX,GAAI,CAEA,OADqB,MAAMC,IAE9B,MACa,CACV,MAAO,EACV,CACL,CA0DA,SAASwb,GAA8BC,EAAmBzB,EAAS,CAC/DyB,EAAoBjZ,GAAmBiZ,CAAiB,EACxD1B,GAAgCtD,GAA0BgF,EAAkB,IAAI,QAAQ,KAAK,EAAGzB,CAAO,EAAE,MAAMze,GAAKiN,GAAO,MAAMjN,CAAC,CAAC,CACvI,CA4BA,SAASmgB,GAASD,EAAmB7B,EAAWC,EAAatW,EAAS,CAClEkY,EAAoBjZ,GAAmBiZ,CAAiB,EACxD/B,GAAWiB,GAAqBlE,GAA0BgF,EAAkB,IAAI,QAAQ,KAAK,EAAG7B,EAAWC,EAAatW,CAAO,EAAE,MAAMhI,GAAKiN,GAAO,MAAMjN,CAAC,CAAC,CAC/J,CAoBA,MAAMmH,GAAO,sBACPyE,GAAU,UAQhB,SAASwU,IAAoB,CACzBnR,GAAmB,IAAI/H,GAAUwS,GAAgB,CAAC/R,EAAW,CAAE,QAAS0Y,KAAuB,CAE3F,MAAMrR,EAAMrH,EAAU,YAAY,KAAK,EAAE,aAAY,EAC/CgP,EAAgBhP,EACjB,YAAY,wBAAwB,EACpC,eACL,OAAO+X,GAAQ1Q,EAAK2H,EAAe0J,CAAgB,CAC3D,EAAO,QAAoC,GACvCpR,GAAmB,IAAI/H,GAAU,qBAAsBsS,EAAiB,SAAsC,GAC9GzJ,GAAgB5I,GAAMyE,EAAO,EAE7BmE,GAAgB5I,GAAMyE,GAAS,SAAS,EACxC,SAAS4N,EAAgB7R,EAAW,CAChC,GAAI,CACA,MAAM2Y,EAAY3Y,EAAU,YAAY+R,EAAc,EAAE,aAAY,EACpE,MAAO,CACH,SAAU,CAAC2E,EAAWC,EAAatW,IAAYmY,GAASG,EAAWjC,EAAWC,EAAatW,CAAO,CAClH,CACS,OACMhI,EAAG,CACN,MAAMsP,GAAc,OAAO,+BAAkF,CACzG,OAAQtP,CACxB,CAAa,CACJ,CACJ,CACL,CACAogB,GAAmB,yMCnuCnB,IAAIG,GAAmB,KAGvB,MAAMC,GAAqB,KAUvB,QAAQ,KAAK,4CAA4C,EAClD,MAKEC,GAAiB,KACvBF,KACHA,GAAcC,GAAmB,GAE5BD,IAIT,IAAIL,GAAyB,KAEtB,MAAMQ,GAAwB,IAAM,CACrC,UAAO,OAAW,IAAa,CACjC,MAAM1R,EAAMyR,KACZ,GAAIzR,EACE,IACF,OAAAkR,GAAoBL,GAAa7Q,CAAG,EAC7BkR,SACA1gB,EAAO,CACN,aAAK,yDAA2DA,CAAK,CAC/E,CAEJ,CACO,WACT,EAEamhB,GAAuB,IAAMT,GCxD9B,IAAAU,QACVA,EAAA,WAAa,aACbA,EAAA,YAAc,cACdA,EAAA,QAAU,UACVA,EAAA,MAAQ,QACRA,EAAA,YAAc,cACdA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UACVA,EAAA,WAAa,aACbA,EAAA,UAAY,YACZA,EAAA,QAAU,UACVA,EAAA,IAAM,MACNA,EAAA,SAAW,WAbDA,QAAA,IAgBAC,QAEVA,EAAA,UAAY,YACZA,EAAA,aAAe,eACfA,EAAA,cAAgB,gBAChBA,EAAA,KAAO,OACPA,EAAA,QAAU,UAGVA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QACRA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,KAAO,OACPA,EAAA,MAAQ,QACRA,EAAA,MAAQ,QACRA,EAAA,KAAO,OAGPA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,OAAS,SAGTA,EAAA,KAAO,OACPA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,KAAO,OACPA,EAAA,cAAgB,gBAChBA,EAAA,WAAa,aAGbA,EAAA,UAAY,YACZA,EAAA,YAAc,cACdA,EAAA,uBAAyB,yBACzBA,EAAA,kBAAoB,oBAGpBA,EAAA,SAAW,WACXA,EAAA,UAAY,YACZA,EAAA,eAAiB,iBAGjBA,EAAA,MAAQ,QACRA,EAAA,OAAS,SACTA,EAAA,SAAW,WACXA,EAAA,eAAiB,iBAGjBA,EAAA,eAAiB,iBACjBA,EAAA,gBAAkB,kBAClBA,EAAA,YAAc,cAGdA,EAAA,iBAAmB,mBACnBA,EAAA,oBAAsB,sBACtBA,EAAA,gBAAkB,kBAClBA,EAAA,sBAAwB,wBAGxBA,EAAA,aAAe,eACfA,EAAA,QAAU,UACVA,EAAA,OAAS,SAGTA,EAAA,WAAa,aACbA,EAAA,cAAgB,gBAChBA,EAAA,eAAiB,iBAGjBA,EAAA,SAAW,WACXA,EAAA,cAAgB,gBAChBA,EAAA,gBAAkB,kBAClBA,EAAA,cAAgB,gBAGhBA,EAAA,eAAiB,iBACjBA,EAAA,kBAAoB,oBACpBA,EAAA,gBAAkB,kBApFRA,QAAA,IA6FZ,MAAMjB,EAAiB,CAErB,WAAWkB,EAAyBC,EAAqBC,EAAoC,CACvF,IACF,MAAMV,EAAYK,KAClB,GAAI,CAACL,EAAW,OAGhB,MAAMjC,EAAY,GAAGyC,CAAQ,IAAIC,CAAM,GACjCzC,EAAmC,CACvC,eAAgBwC,EAChB,aAAcC,EACd,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,GAAGC,CAAA,EAID,IACI,MAAAC,EAAc,OAAO,OAAW,KAAe,OAAO,SAAS,OAAO,SAAS,kBAAkB,EACjGC,EAAU,OAAO,OAAW,KAAe,aAAa,QAAQ,iBAAiB,IAAM,KACjDD,GAAeC,KAEzD5C,EAAY,WAAa,SAEjB,CAEZ,CAGSgC,KAAWjC,EAAWC,CAAW,QAMnC9e,EAAO,CACN,cAAM,sDAAwDA,CAAK,CAC7E,CACF,CAGA,cAAc2hB,EAAkBC,EAAyB,CAClD,gBAAW,aAA0B,YAAuB,CAC/D,UAAWD,EACX,WAAYC,CAAA,CACb,CACH,CAGA,iBAAiBC,EAAcC,EAAkB,CAC1C,gBAAW,aAA0B,eAA0B,CAClE,WAAYD,EACZ,SAAUC,CAAA,CACX,CACH,CAGA,iBAAiBP,EAAqBQ,EAAiBP,EAAoC,CACpF,gBAAW,cAA2BD,EAAQ,CACjD,QAAAQ,EACA,GAAGP,CAAA,CACJ,CACH,CAGA,wBAAwBD,EAAqBS,EAAqBC,EAAmBT,EAAoC,CAClH,gBAAW,UAAuBD,EAAQ,CAC7C,aAAcS,EACd,WAAYC,EACZ,GAAGT,CAAA,CACJ,CACH,CAGA,sBAAsBD,EAAqBW,EAAmBC,EAAiBX,EAAoC,CAC5G,gBAAW,QAAqBD,EAAQ,CAC3C,WAAYW,EACZ,SAAUC,EACV,GAAGX,CAAA,CACJ,CACH,CAGA,iBAAiBD,EAAqB1c,EAAe2c,EAAoC,CAClF,gBAAW,cAA2BD,EAAQ,CACjD,MAAA1c,EACA,GAAG2c,CAAA,CACJ,CACH,CAGA,WAAWD,EAAqBphB,EAAiBqhB,EAAoC,CAC9E,gBAAW,QAAqBD,EAAQ,CAC3C,cAAephB,EACf,GAAGqhB,CAAA,CACJ,CACH,CAGA,gBAAgBD,EAAqBC,EAAoC,CAClE,gBAAW,OAAoBD,EAAQC,CAAU,CACxD,CAGA,gBAAgBY,EAAqBZ,EAAoC,CAClE,gBAAW,UAAuB,cAAyB,CAC9D,aAAcY,EACd,GAAGZ,CAAA,CACJ,CACH,CAGA,gBAAgBD,EAAqBC,EAAoC,CAClE,gBAAW,aAA0BD,EAAQC,CAAU,CAC9D,CAGA,oBAAoBD,EAAqBC,EAAoC,CACtE,gBAAW,MAAmBD,EAAQC,CAAU,CACvD,CAGA,wBAAwBD,EAAqBC,EAAoC,CAC1E,gBAAW,UAAuBD,EAAQC,CAAU,CAC3D,CAGA,0BAA0BD,EAAqBC,EAAoC,CAC5E,gBAAW,YAAyBD,EAAQC,CAAU,CAC7D,CAGA,yBAAyBD,EAAqBC,EAAoC,CAC3E,gBAAW,WAAwBD,EAAQC,CAAU,CAC5D,CAGA,WAAWa,EAA6C/gB,EAAgB4J,EAAkBsW,EAAoC,CACvH,gBAAW,cAA2B,QAAmB,CAC5D,gBAAiBa,EACjB,aAAc/gB,EACd,cAAe4J,EACf,GAAGsW,CAAA,CACJ,CACH,CAGA,cAAqB,CACd,gBAAW,OAAoB,QAAkC,CACpE,cAAe,KAAK,IAAI,EACzB,EAGD,eAAe,QAAQ,gBAAiB,KAAK,IAAI,EAAE,UAAU,CAC/D,CAEA,YAAmB,CACX,MAAAc,EAAe,eAAe,QAAQ,eAAe,EAC3D,GAAIA,EAAc,CAChB,MAAMC,EAAkB,KAAK,MAAQ,SAASD,EAAc,EAAE,EACzD,gBAAW,OAAoB,SAAmC,CACrE,iBAAkBC,CAAA,CACnB,CACH,CACF,CAIA,kBAAkBC,EAAoBC,EAA4B,CAC3D,gBAAW,UAAuB,OAAkB,CACvD,aAAc,WACd,YAAaD,EACb,cAAeC,CAAA,CAChB,CACH,CAEA,yBAAyBD,EAAoBE,EAA4B,CAClE,gBAAW,UAAuB,OAAkB,CACvD,aAAc,mBACd,YAAaF,EACb,cAAeE,CAAA,CAChB,CACH,CAGA,gBAAgBC,EAAkBC,EAA0B,CACrD,gBAAW,UAAuB,OAAkB,CACvD,aAAc,SACd,UAAWD,EACX,YAAaC,CAAA,CACd,CACH,CAGA,iBAAiBC,EAAiBC,EAAeC,EAAwB,CAClE,gBAAW,UAAuB,aAAwB,CAC7D,SAAUF,EACV,YAAaC,EACb,WAAYC,CAAA,CACb,CACH,CAEA,gBAAgBxB,EAAsFsB,EAAwB,CACvH,gBAAW,UAAuB,QAAmB,CACxD,WAAYtB,EACZ,SAAUsB,CAAA,CACX,CACH,CAGA,sBAAsBvhB,EAAsB,CACrC,gBAAW,WAAwB,OAAkB,CACxD,KAAM,WACN,OAAAA,CAAA,CACD,CACH,CAGA,gBAAgBigB,EAA6C,CAMrD,MAAAyB,EALmC,CACvC,MAAO,OACP,SAAU,WACV,KAAM,SAEazB,CAAM,GAAK,OAC3B,gBAAW,QAAqByB,EAAU,CAC7C,WAAY,cACb,CACH,CAGA,WAAWzB,EAAqD0B,EAAiBpe,EAAsB,CAO/F,MAAAqe,EANyC,CAC7C,KAAM,OACN,MAAO,QACP,KAAM,OACN,cAAe,iBAEK3B,CAAM,GAAK,OAC5B,gBAAW,QAAqB2B,EAAK,CACxC,WAAY,QACZ,SAAUD,EACV,MAAApe,CAAA,CACD,CACH,CACF,CAGa,MAAAic,EAAY,IAAIV,GAGhB+C,GAAgB,CAACxB,EAAkBC,IAC9Cd,EAAU,cAAca,EAAUC,CAAS,EAEhCwB,GAAa,CAAC9B,EAAyBC,EAAqBC,IACvEV,EAAU,WAAWQ,EAAUC,EAAQC,CAAU,EAEtC6B,GAAmB,CAAC9B,EAAqBQ,EAAiBP,IACrEV,EAAU,iBAAiBS,EAAQQ,EAASP,CAAU,EAE3C8B,GAAa,CAACjB,EAA6C/gB,EAAgB4J,EAAkBsW,IACxGV,EAAU,WAAWuB,EAAW/gB,EAAQ4J,EAASsW,CAAU,EAEhD+B,GAAkB,CAACnB,EAAqBZ,IACnDV,EAAU,gBAAgBsB,EAAaZ,CAAU,EC7W7CgC,GAAqB,IAgB3B,IAAIC,GAAQ,EAEZ,SAASC,IAAQ,CACN,OAAAD,OAAQ,GAAK,OAAO,iBACtBA,GAAM,UACf,CA0BA,MAAME,OAAoB,IAEpBC,GAAoBC,GAAoB,CACxC,GAAAF,GAAc,IAAIE,CAAO,EAC3B,OAGI,MAAArF,EAAU,WAAW,IAAM,CAC/BmF,GAAc,OAAOE,CAAO,EACnBC,GAAA,CACP,KAAM,eACN,QAAAD,CAAA,CACD,GACAL,EAAkB,EAEPG,GAAA,IAAIE,EAASrF,CAAO,CACpC,EAEauF,GAAU,CAACC,EAAczC,IAA0B,CAC9D,OAAQA,EAAO,KAAM,CACnB,IAAK,YACI,OACL,GAAGyC,EACH,OAAQ,CAAC,GAAGA,EAAM,OAAQzC,EAAO,KAAK,GAG1C,IAAK,eACI,OACL,GAAGyC,EACH,OAAQA,EAAM,OAAO,IAAKC,GACxBA,EAAE,KAAO1C,EAAO,MAAM,GAAK,CAAE,GAAG0C,EAAG,GAAG1C,EAAO,KAAU,EAAA0C,CACzD,GAGJ,IAAK,gBAAiB,CACd,MAAE,QAAAJ,CAAY,EAAAtC,EAIpB,OAAIsC,EACFD,GAAiBC,CAAO,EAElBG,EAAA,OAAO,QAASE,GAAU,CAC9BN,GAAiBM,EAAM,EAAE,EAC1B,EAGI,CACL,GAAGF,EACH,OAAQA,EAAM,OAAO,IAAKC,GACxBA,EAAE,KAAOJ,GAAWA,IAAY,OAC5B,CACE,GAAGI,EACH,KAAM,IAERA,CACN,EAEJ,CACA,IAAK,eACC,OAAA1C,EAAO,UAAY,OACd,CACL,GAAGyC,EACH,OAAQ,CAAC,GAGN,CACL,GAAGA,EACH,OAAQA,EAAM,OAAO,OAAQC,GAAMA,EAAE,KAAO1C,EAAO,OAAO,EAEhE,CACF,EAEM4C,GAAwC,GAE9C,IAAIC,GAAqB,CAAE,OAAQ,IAEnC,SAASN,GAASvC,EAAgB,CAClB6C,GAAAL,GAAQK,GAAa7C,CAAM,EAC/B4C,GAAA,QAASzF,GAAa,CAC9BA,EAAS0F,EAAW,EACrB,CACH,CAIA,SAASF,GAAMlc,EAAc,CAC3B,MAAMqc,EAAKX,KAEL3M,EAAU/O,GACd8b,GAAS,CACP,KAAM,eACN,MAAO,CAAE,GAAG9b,EAAO,GAAAqc,CAAG,EACvB,EACGC,EAAU,IAAMR,GAAS,CAAE,KAAM,gBAAiB,QAASO,EAAI,EAE5D,OAAAP,GAAA,CACP,KAAM,YACN,MAAO,CACL,GAAG9b,EACH,GAAAqc,EACA,KAAM,GACN,aAAeE,GAAS,CACjBA,GAAcD,GACrB,CACF,EACD,EAEM,CACL,GAAAD,EACA,QAAAC,EACA,OAAAvN,CAAA,CAEJ,CAEA,SAASyN,IAAW,CAClB,KAAM,CAACR,EAAOS,CAAQ,EAAIC,WAAsBN,EAAW,EAE3DO,mBAAgB,KACdR,GAAU,KAAKM,CAAQ,EAChB,IAAM,CACL,MAAAxE,EAAQkE,GAAU,QAAQM,CAAQ,EACpCxE,EAAQ,IACAkE,GAAA,OAAOlE,EAAO,CAAC,CAC3B,GAED,CAAC+D,CAAK,CAAC,EAEH,CACL,GAAGA,EACH,MAAAE,GACA,QAAUL,GAAqBC,GAAS,CAAE,KAAM,gBAAiB,QAAAD,EAAS,EAE9E,CChMA,SAASe,GAAE,EAAE,CAAC,IAAI,EAAEC,EAAEC,EAAE,GAAG,GAAa,OAAO,GAAjB,UAA8B,OAAO,GAAjB,SAAmBA,GAAG,UAAoB,OAAO,GAAjB,SAAmB,GAAG,MAAM,QAAQ,CAAC,EAAE,CAAC,IAAIC,EAAE,EAAE,OAAO,IAAI,EAAE,EAAE,EAAEA,EAAE,IAAI,EAAE,CAAC,IAAIF,EAAED,GAAE,EAAE,CAAC,CAAC,KAAKE,IAAIA,GAAG,KAAKA,GAAGD,EAAE,KAAM,KAAIA,KAAK,EAAE,EAAEA,CAAC,IAAIC,IAAIA,GAAG,KAAKA,GAAGD,GAAG,OAAOC,CAAC,CAAQ,SAASE,IAAM,CAAC,QAAQ,EAAE,EAAEH,EAAE,EAAEC,EAAE,GAAGC,EAAE,UAAU,OAAOF,EAAEE,EAAEF,KAAK,EAAE,UAAUA,CAAC,KAAK,EAAED,GAAE,CAAC,KAAKE,IAAIA,GAAG,KAAKA,GAAG,GAAG,OAAOA,CAAC,CCe/W,MAAMG,GAAiBpgB,GAAQ,OAAOA,GAAU,UAAY,GAAGA,CAAK,GAAKA,IAAU,EAAI,IAAMA,EAChFqgB,GAAKF,GACLG,GAAM,CAACC,EAAMpV,IAAUhI,GAAQ,CACpC,IAAIqd,EACJ,IAAKrV,GAAW,KAA4B,OAASA,EAAO,WAAa,KAAM,OAAOkV,GAAGE,EAAMpd,GAAU,KAA2B,OAASA,EAAM,MAAOA,GAAU,KAA2B,OAASA,EAAM,SAAS,EACvN,KAAM,CAAE,SAAAsd,EAAU,gBAAAC,CAAiB,EAAGvV,EAChCwV,EAAuB,OAAO,KAAKF,CAAQ,EAAE,IAAK7U,GAAU,CAC9D,MAAMgV,EAAczd,GAAU,KAA2B,OAASA,EAAMyI,CAAO,EACzEiV,EAAqBH,GAAoB,KAAqC,OAASA,EAAgB9U,CAAO,EACpH,GAAIgV,IAAgB,KAAM,OAAO,KACjC,MAAME,EAAaV,GAAcQ,CAAW,GAAKR,GAAcS,CAAkB,EACjF,OAAOJ,EAAS7U,CAAO,EAAEkV,CAAU,CAC/C,CAAS,EACKC,EAAwB5d,GAAS,OAAO,QAAQA,CAAK,EAAE,OAAO,CAAC6d,EAAKC,IAAQ,CAC9E,GAAI,CAAC1f,EAAKvB,CAAK,EAAIihB,EACnB,OAAIjhB,IAAU,SAGdghB,EAAIzf,CAAG,EAAIvB,GACJghB,CACV,EAAE,CAAE,GACCE,EAA+B/V,GAAW,OAAsCqV,EAA2BrV,EAAO,oBAAsB,MAAQqV,IAA6B,OAAvG,OAAyHA,EAAyB,OAAO,CAACQ,EAAKC,IAAQ,CAC/O,GAAI,CAAE,MAAOE,EAAS,UAAWC,EAAa,GAAGC,CAAwB,EAAGJ,EAC5E,OAAO,OAAO,QAAQI,CAAsB,EAAE,MAAOJ,GAAQ,CACzD,GAAI,CAAC1f,EAAKvB,CAAK,EAAIihB,EACnB,OAAO,MAAM,QAAQjhB,CAAK,EAAIA,EAAM,SAAS,CACzC,GAAG0gB,EACH,GAAGK,CACvB,EAAkBxf,CAAG,CAAC,EAAK,CACP,GAAGmf,EACH,GAAGK,CACvB,EAAmBxf,CAAG,IAAMvB,CAC5B,CAAa,EAAI,CACD,GAAGghB,EACHG,EACAC,CACH,EAAGJ,CACP,EAAE,CAAE,GACL,OAAOX,GAAGE,EAAMI,EAAsBO,EAA8B/d,GAAU,KAA2B,OAASA,EAAM,MAAOA,GAAU,KAA2B,OAASA,EAAM,SAAS,CAC/L,ECtDCme,GAAuB,IACvBC,GAAwBpW,GAAU,CACtC,MAAMqW,EAAWC,GAAetW,CAAM,EAChC,CACJ,uBAAAuW,EACA,+BAAAC,CACD,EAAGxW,EAgBJ,MAAO,CACL,gBAhBsByW,GAAa,CACnC,MAAMC,EAAaD,EAAU,MAAMN,EAAoB,EAEvD,OAAIO,EAAW,CAAC,IAAM,IAAMA,EAAW,SAAW,GAChDA,EAAW,MAAK,EAEXC,GAAkBD,EAAYL,CAAQ,GAAKO,GAA+BH,CAAS,CAC9F,EAUI,4BATkC,CAACI,EAAcC,IAAuB,CACxE,MAAMC,EAAYR,EAAuBM,CAAY,GAAK,GAC1D,OAAIC,GAAsBN,EAA+BK,CAAY,EAC5D,CAAC,GAAGE,EAAW,GAAGP,EAA+BK,CAAY,CAAC,EAEhEE,CACX,CAIA,CACA,EACMJ,GAAoB,CAACD,EAAYM,IAAoB,OACzD,GAAIN,EAAW,SAAW,EACxB,OAAOM,EAAgB,aAEzB,MAAMC,EAAmBP,EAAW,CAAC,EAC/BQ,EAAsBF,EAAgB,SAAS,IAAIC,CAAgB,EACnEE,EAA8BD,EAAsBP,GAAkBD,EAAW,MAAM,CAAC,EAAGQ,CAAmB,EAAI,OACxH,GAAIC,EACF,OAAOA,EAET,GAAIH,EAAgB,WAAW,SAAW,EACxC,OAEF,MAAMI,EAAYV,EAAW,KAAKP,EAAoB,EACtD,OAAO3hB,EAAAwiB,EAAgB,WAAW,KAAK,CAAC,CACtC,UAAAK,CACD,IAAKA,EAAUD,CAAS,CAAC,IAFnB,YAAA5iB,EAEsB,YAC/B,EACM8iB,GAAyB,aACzBV,GAAiCH,GAAa,CAClD,GAAIa,GAAuB,KAAKb,CAAS,EAAG,CAC1C,MAAMc,EAA6BD,GAAuB,KAAKb,CAAS,EAAE,CAAC,EACrEe,EAAWD,GAAA,YAAAA,EAA4B,UAAU,EAAGA,EAA2B,QAAQ,GAAG,GAChG,GAAIC,EAEF,MAAO,cAAgBA,CAE1B,CACH,EAIMlB,GAAiBtW,GAAU,CAC/B,KAAM,CACJ,MAAAyX,EACA,OAAAC,CACD,EAAG1X,EACEqW,EAAW,CACf,SAAU,IAAI,IACd,WAAY,CAAE,CAClB,EAEE,OADkCsB,GAA6B,OAAO,QAAQ3X,EAAO,WAAW,EAAG0X,CAAM,EAC/E,QAAQ,CAAC,CAACb,EAAce,CAAU,IAAM,CAChEC,GAA0BD,EAAYvB,EAAUQ,EAAcY,CAAK,CACvE,CAAG,EACMpB,CACT,EACMwB,GAA4B,CAACD,EAAYZ,EAAiBH,EAAcY,IAAU,CACtFG,EAAW,QAAQE,GAAmB,CACpC,GAAI,OAAOA,GAAoB,SAAU,CACvC,MAAMC,EAAwBD,IAAoB,GAAKd,EAAkBgB,GAAQhB,EAAiBc,CAAe,EACjHC,EAAsB,aAAelB,EACrC,MACD,CACD,GAAI,OAAOiB,GAAoB,WAAY,CACzC,GAAIG,GAAcH,CAAe,EAAG,CAClCD,GAA0BC,EAAgBL,CAAK,EAAGT,EAAiBH,EAAcY,CAAK,EACtF,MACD,CACDT,EAAgB,WAAW,KAAK,CAC9B,UAAWc,EACX,aAAAjB,CACR,CAAO,EACD,MACD,CACD,OAAO,QAAQiB,CAAe,EAAE,QAAQ,CAAC,CAAC1hB,EAAKwhB,CAAU,IAAM,CAC7DC,GAA0BD,EAAYI,GAAQhB,EAAiB5gB,CAAG,EAAGygB,EAAcY,CAAK,CAC9F,CAAK,CACL,CAAG,CACH,EACMO,GAAU,CAAChB,EAAiBkB,IAAS,CACzC,IAAIC,EAAyBnB,EAC7B,OAAAkB,EAAK,MAAM/B,EAAoB,EAAE,QAAQiC,GAAY,CAC9CD,EAAuB,SAAS,IAAIC,CAAQ,GAC/CD,EAAuB,SAAS,IAAIC,EAAU,CAC5C,SAAU,IAAI,IACd,WAAY,CAAE,CACtB,CAAO,EAEHD,EAAyBA,EAAuB,SAAS,IAAIC,CAAQ,CACzE,CAAG,EACMD,CACT,EACMF,GAAgBnc,GAAQA,EAAK,cAC7B6b,GAA+B,CAACU,EAAmBX,IAClDA,EAGEW,EAAkB,IAAI,CAAC,CAACxB,EAAce,CAAU,IAAM,CAC3D,MAAMU,EAAqBV,EAAW,IAAIE,GACpC,OAAOA,GAAoB,SACtBJ,EAASI,EAEd,OAAOA,GAAoB,SACtB,OAAO,YAAY,OAAO,QAAQA,CAAe,EAAE,IAAI,CAAC,CAAC1hB,EAAKvB,CAAK,IAAM,CAAC6iB,EAASthB,EAAKvB,CAAK,CAAC,CAAC,EAEjGijB,CACR,EACD,MAAO,CAACjB,EAAcyB,CAAkB,CAC5C,CAAG,EAbQD,EAiBLE,GAAiBC,GAAgB,CACrC,GAAIA,EAAe,EACjB,MAAO,CACL,IAAK,OACL,IAAK,IAAM,CAAE,CACnB,EAEE,IAAIC,EAAY,EACZC,EAAQ,IAAI,IACZC,EAAgB,IAAI,IACxB,MAAM5R,EAAS,CAAC3Q,EAAKvB,IAAU,CAC7B6jB,EAAM,IAAItiB,EAAKvB,CAAK,EACpB4jB,IACIA,EAAYD,IACdC,EAAY,EACZE,EAAgBD,EAChBA,EAAQ,IAAI,IAElB,EACE,MAAO,CACL,IAAItiB,EAAK,CACP,IAAIvB,EAAQ6jB,EAAM,IAAItiB,CAAG,EACzB,GAAIvB,IAAU,OACZ,OAAOA,EAET,IAAKA,EAAQ8jB,EAAc,IAAIviB,CAAG,KAAO,OACvC,OAAA2Q,EAAO3Q,EAAKvB,CAAK,EACVA,CAEV,EACD,IAAIuB,EAAKvB,EAAO,CACV6jB,EAAM,IAAItiB,CAAG,EACfsiB,EAAM,IAAItiB,EAAKvB,CAAK,EAEpBkS,EAAO3Q,EAAKvB,CAAK,CAEpB,CACL,CACA,EACM+jB,GAAqB,IACrBC,GAAuB7Y,GAAU,CACrC,KAAM,CACJ,UAAA8Y,EACA,2BAAAC,CACD,EAAG/Y,EACEgZ,EAA6BF,EAAU,SAAW,EAClDG,EAA0BH,EAAU,CAAC,EACrCI,EAAkBJ,EAAU,OAE5BK,EAAiB1C,GAAa,CAClC,MAAM2C,EAAY,GAClB,IAAIC,EAAe,EACfC,EAAgB,EAChBC,EACJ,QAAStJ,EAAQ,EAAGA,EAAQwG,EAAU,OAAQxG,IAAS,CACrD,IAAIuJ,EAAmB/C,EAAUxG,CAAK,EACtC,GAAIoJ,IAAiB,EAAG,CACtB,GAAIG,IAAqBP,IAA4BD,GAA8BvC,EAAU,MAAMxG,EAAOA,EAAQiJ,CAAe,IAAMJ,GAAY,CACjJM,EAAU,KAAK3C,EAAU,MAAM6C,EAAerJ,CAAK,CAAC,EACpDqJ,EAAgBrJ,EAAQiJ,EACxB,QACD,CACD,GAAIM,IAAqB,IAAK,CAC5BD,EAA0BtJ,EAC1B,QACD,CACF,CACGuJ,IAAqB,IACvBH,IACSG,IAAqB,KAC9BH,GAEH,CACD,MAAMI,EAAqCL,EAAU,SAAW,EAAI3C,EAAYA,EAAU,UAAU6C,CAAa,EAC3GI,EAAuBD,EAAmC,WAAWb,EAAkB,EACvFe,EAAgBD,EAAuBD,EAAmC,UAAU,CAAC,EAAIA,EACzFG,EAA+BL,GAA2BA,EAA0BD,EAAgBC,EAA0BD,EAAgB,OACpJ,MAAO,CACL,UAAAF,EACA,qBAAAM,EACA,cAAAC,EACA,6BAAAC,CACN,CACA,EACE,OAAIb,EACKtC,GAAasC,EAA2B,CAC7C,UAAAtC,EACA,eAAA0C,CACN,CAAK,EAEIA,CACT,EAMMU,GAAgBT,GAAa,CACjC,GAAIA,EAAU,QAAU,EACtB,OAAOA,EAET,MAAMU,EAAkB,GACxB,IAAIC,EAAoB,GACxB,OAAAX,EAAU,QAAQY,GAAY,CACDA,EAAS,CAAC,IAAM,KAEzCF,EAAgB,KAAK,GAAGC,EAAkB,KAAM,EAAEC,CAAQ,EAC1DD,EAAoB,IAEpBA,EAAkB,KAAKC,CAAQ,CAErC,CAAG,EACDF,EAAgB,KAAK,GAAGC,EAAkB,KAAM,GACzCD,CACT,EACMG,GAAoBja,IAAW,CACnC,MAAOuY,GAAevY,EAAO,SAAS,EACtC,eAAgB6Y,GAAqB7Y,CAAM,EAC3C,GAAGoW,GAAsBpW,CAAM,CACjC,GACMka,GAAsB,MACtBC,GAAiB,CAACC,EAAWC,IAAgB,CACjD,KAAM,CACJ,eAAAlB,EACA,gBAAAmB,EACA,4BAAAC,CACD,EAAGF,EAQEG,EAAwB,GACxBC,EAAaL,EAAU,KAAM,EAAC,MAAMF,EAAmB,EAC7D,IAAI7Y,EAAS,GACb,QAAS4O,EAAQwK,EAAW,OAAS,EAAGxK,GAAS,EAAGA,GAAS,EAAG,CAC9D,MAAMyK,EAAoBD,EAAWxK,CAAK,EACpC,CACJ,UAAAmJ,EACA,qBAAAM,EACA,cAAAC,EACA,6BAAAC,CACN,EAAQT,EAAeuB,CAAiB,EACpC,IAAI5D,EAAqB,EAAQ8C,EAC7B/C,EAAeyD,EAAgBxD,EAAqB6C,EAAc,UAAU,EAAGC,CAA4B,EAAID,CAAa,EAChI,GAAI,CAAC9C,EAAc,CACjB,GAAI,CAACC,EAAoB,CAEvBzV,EAASqZ,GAAqBrZ,EAAO,OAAS,EAAI,IAAMA,EAASA,GACjE,QACD,CAED,GADAwV,EAAeyD,EAAgBX,CAAa,EACxC,CAAC9C,EAAc,CAEjBxV,EAASqZ,GAAqBrZ,EAAO,OAAS,EAAI,IAAMA,EAASA,GACjE,QACD,CACDyV,EAAqB,EACtB,CACD,MAAM6D,EAAkBd,GAAcT,CAAS,EAAE,KAAK,GAAG,EACnDwB,EAAalB,EAAuBiB,EAAkB/B,GAAqB+B,EAC3EE,EAAUD,EAAa/D,EAC7B,GAAI2D,EAAsB,SAASK,CAAO,EAExC,SAEFL,EAAsB,KAAKK,CAAO,EAClC,MAAMC,EAAiBP,EAA4B1D,EAAcC,CAAkB,EACnF,QAAS/kB,EAAI,EAAGA,EAAI+oB,EAAe,OAAQ,EAAE/oB,EAAG,CAC9C,MAAMgpB,EAAQD,EAAe/oB,CAAC,EAC9ByoB,EAAsB,KAAKI,EAAaG,CAAK,CAC9C,CAED1Z,EAASqZ,GAAqBrZ,EAAO,OAAS,EAAI,IAAMA,EAASA,EAClE,CACD,OAAOA,CACT,EAWA,SAAS2Z,IAAS,CAChB,IAAI/K,EAAQ,EACRgL,EACAC,EACAC,EAAS,GACb,KAAOlL,EAAQ,UAAU,SACnBgL,EAAW,UAAUhL,GAAO,KAC1BiL,EAAgBE,GAAQH,CAAQ,KAClCE,IAAWA,GAAU,KACrBA,GAAUD,GAIhB,OAAOC,CACT,CACA,MAAMC,GAAUC,GAAO,CACrB,GAAI,OAAOA,GAAQ,SACjB,OAAOA,EAET,IAAIH,EACAC,EAAS,GACb,QAASzkB,EAAI,EAAGA,EAAI2kB,EAAI,OAAQ3kB,IAC1B2kB,EAAI3kB,CAAC,IACHwkB,EAAgBE,GAAQC,EAAI3kB,CAAC,CAAC,KAChCykB,IAAWA,GAAU,KACrBA,GAAUD,GAIhB,OAAOC,CACT,EACA,SAASG,GAAoBC,KAAsBC,EAAkB,CACnE,IAAInB,EACAoB,EACAC,EACAC,EAAiBC,EACrB,SAASA,EAAkBxB,EAAW,CACpC,MAAMpa,EAASwb,EAAiB,OAAO,CAACK,EAAgBC,IAAwBA,EAAoBD,CAAc,EAAGN,EAAiB,CAAE,EACxI,OAAAlB,EAAcJ,GAAkBja,CAAM,EACtCyb,EAAWpB,EAAY,MAAM,IAC7BqB,EAAWrB,EAAY,MAAM,IAC7BsB,EAAiBI,EACVA,EAAc3B,CAAS,CAC/B,CACD,SAAS2B,EAAc3B,EAAW,CAChC,MAAM4B,EAAeP,EAASrB,CAAS,EACvC,GAAI4B,EACF,OAAOA,EAET,MAAM3a,EAAS8Y,GAAeC,EAAWC,CAAW,EACpD,OAAAqB,EAAStB,EAAW/Y,CAAM,EACnBA,CACR,CACD,OAAO,UAA6B,CAClC,OAAOsa,EAAeX,GAAO,MAAM,KAAM,SAAS,CAAC,CACvD,CACA,CACA,MAAMiB,GAAY7lB,GAAO,CACvB,MAAM8lB,EAAczE,GAASA,EAAMrhB,CAAG,GAAK,GAC3C,OAAA8lB,EAAY,cAAgB,GACrBA,CACT,EACMC,GAAsB,6BACtBC,GAAgB,aAChBC,GAA6B,IAAI,IAAI,CAAC,KAAM,OAAQ,QAAQ,CAAC,EAC7DC,GAAkB,mCAClBC,GAAkB,4HAClBC,GAAqB,2CAErBC,GAAc,kEACdC,GAAa,+FACbC,GAAW9nB,GAAS+nB,GAAS/nB,CAAK,GAAKwnB,GAAc,IAAIxnB,CAAK,GAAKunB,GAAc,KAAKvnB,CAAK,EAC3FgoB,GAAoBhoB,GAASioB,GAAoBjoB,EAAO,SAAUkoB,EAAY,EAC9EH,GAAW/nB,GAAS,EAAQA,GAAU,CAAC,OAAO,MAAM,OAAOA,CAAK,CAAC,EACjEmoB,GAAoBnoB,GAASioB,GAAoBjoB,EAAO,SAAU+nB,EAAQ,EAC1EK,GAAYpoB,GAAS,EAAQA,GAAU,OAAO,UAAU,OAAOA,CAAK,CAAC,EACrEqoB,GAAYroB,GAASA,EAAM,SAAS,GAAG,GAAK+nB,GAAS/nB,EAAM,MAAM,EAAG,EAAE,CAAC,EACvEsoB,GAAmBtoB,GAASsnB,GAAoB,KAAKtnB,CAAK,EAC1DuoB,GAAevoB,GAASynB,GAAgB,KAAKznB,CAAK,EAClDwoB,GAA0B,IAAI,IAAI,CAAC,SAAU,OAAQ,YAAY,CAAC,EAClEC,GAAkBzoB,GAASioB,GAAoBjoB,EAAOwoB,GAAYE,EAAO,EACzEC,GAAsB3oB,GAASioB,GAAoBjoB,EAAO,WAAY0oB,EAAO,EAC7EE,GAA2B,IAAI,IAAI,CAAC,QAAS,KAAK,CAAC,EACnDC,GAAmB7oB,GAASioB,GAAoBjoB,EAAO4oB,GAAaE,EAAO,EAC3EC,GAAoB/oB,GAASioB,GAAoBjoB,EAAO,GAAIgpB,EAAQ,EACpEC,GAAQ,IAAM,GACdhB,GAAsB,CAACjoB,EAAOkpB,EAAOC,IAAc,CACvD,MAAM3c,EAAS8a,GAAoB,KAAKtnB,CAAK,EAC7C,OAAIwM,EACEA,EAAO,CAAC,EACH,OAAO0c,GAAU,SAAW1c,EAAO,CAAC,IAAM0c,EAAQA,EAAM,IAAI1c,EAAO,CAAC,CAAC,EAEvE2c,EAAU3c,EAAO,CAAC,CAAC,EAErB,EACT,EACM0b,GAAeloB,GAIrB0nB,GAAgB,KAAK1nB,CAAK,GAAK,CAAC2nB,GAAmB,KAAK3nB,CAAK,EACvD0oB,GAAU,IAAM,GAChBM,GAAWhpB,GAAS4nB,GAAY,KAAK5nB,CAAK,EAC1C8oB,GAAU9oB,GAAS6nB,GAAW,KAAK7nB,CAAK,EAmBxCopB,GAAmB,IAAM,CAC7B,MAAMC,EAASjC,GAAU,QAAQ,EAC3BkC,EAAUlC,GAAU,SAAS,EAC7BmC,EAAOnC,GAAU,MAAM,EACvBoC,EAAapC,GAAU,YAAY,EACnCqC,EAAcrC,GAAU,aAAa,EACrCsC,EAAetC,GAAU,cAAc,EACvCuC,EAAgBvC,GAAU,eAAe,EACzCwC,EAAcxC,GAAU,aAAa,EACrCyC,EAAWzC,GAAU,UAAU,EAC/B0C,EAAY1C,GAAU,WAAW,EACjC2C,EAAY3C,GAAU,WAAW,EACjC4C,EAAS5C,GAAU,QAAQ,EAC3B6C,EAAM7C,GAAU,KAAK,EACrB8C,EAAqB9C,GAAU,oBAAoB,EACnD+C,EAA6B/C,GAAU,4BAA4B,EACnEgD,EAAQhD,GAAU,OAAO,EACzBiD,EAASjD,GAAU,QAAQ,EAC3BkD,EAAUlD,GAAU,SAAS,EAC7BmD,EAAUnD,GAAU,SAAS,EAC7BoD,EAAWpD,GAAU,UAAU,EAC/BqD,EAAQrD,GAAU,OAAO,EACzBsD,EAAQtD,GAAU,OAAO,EACzBuD,EAAOvD,GAAU,MAAM,EACvBwD,EAAQxD,GAAU,OAAO,EACzByD,EAAYzD,GAAU,WAAW,EACjC0D,EAAgB,IAAM,CAAC,OAAQ,UAAW,MAAM,EAChDC,EAAc,IAAM,CAAC,OAAQ,SAAU,OAAQ,UAAW,QAAQ,EAClEC,EAAiC,IAAM,CAAC,OAAQ1C,GAAkBgB,CAAO,EACzE2B,EAA0B,IAAM,CAAC3C,GAAkBgB,CAAO,EAC1D4B,EAAiC,IAAM,CAAC,GAAIpD,GAAUE,EAAiB,EACvEmD,EAAgC,IAAM,CAAC,OAAQpD,GAAUO,EAAgB,EACzE8C,EAAe,IAAM,CAAC,SAAU,SAAU,OAAQ,cAAe,WAAY,QAAS,eAAgB,YAAa,KAAK,EACxHC,EAAgB,IAAM,CAAC,QAAS,SAAU,SAAU,SAAU,MAAM,EACpEC,GAAgB,IAAM,CAAC,SAAU,WAAY,SAAU,UAAW,SAAU,UAAW,cAAe,aAAc,aAAc,aAAc,aAAc,YAAa,MAAO,aAAc,QAAS,YAAY,EACrNC,EAAW,IAAM,CAAC,QAAS,MAAO,SAAU,UAAW,SAAU,SAAU,SAAS,EACpFC,EAAkB,IAAM,CAAC,GAAI,IAAKlD,EAAgB,EAClDmD,EAAY,IAAM,CAAC,OAAQ,QAAS,MAAO,aAAc,OAAQ,OAAQ,QAAS,QAAQ,EAC1FC,EAAwB,IAAM,CAAC3D,GAAUO,EAAgB,EAC/D,MAAO,CACL,UAAW,IACX,UAAW,IACX,MAAO,CACL,OAAQ,CAACW,EAAK,EACd,QAAS,CAACnB,GAAUE,EAAiB,EACrC,KAAM,CAAC,OAAQ,GAAIO,GAAcD,EAAgB,EACjD,WAAYoD,EAAuB,EACnC,YAAa,CAACrC,CAAM,EACpB,aAAc,CAAC,OAAQ,GAAI,OAAQd,GAAcD,EAAgB,EACjE,cAAe2C,EAAyB,EACxC,YAAaC,EAAgC,EAC7C,SAAUQ,EAAuB,EACjC,UAAWF,EAAiB,EAC5B,UAAWE,EAAuB,EAClC,OAAQF,EAAiB,EACzB,IAAKP,EAAyB,EAC9B,mBAAoB,CAAC5B,CAAM,EAC3B,2BAA4B,CAAChB,GAAWL,EAAiB,EACzD,MAAOgD,EAAgC,EACvC,OAAQA,EAAgC,EACxC,QAASU,EAAuB,EAChC,QAAST,EAAyB,EAClC,SAAUS,EAAuB,EACjC,MAAOA,EAAuB,EAC9B,MAAOF,EAAiB,EACxB,KAAME,EAAuB,EAC7B,MAAOT,EAAyB,EAChC,UAAWA,EAAyB,CACrC,EACD,YAAa,CAMX,OAAQ,CAAC,CACP,OAAQ,CAAC,OAAQ,SAAU,QAAS3C,EAAgB,CAC5D,CAAO,EAKD,UAAW,CAAC,WAAW,EAKvB,QAAS,CAAC,CACR,QAAS,CAACC,EAAY,CAC9B,CAAO,EAKD,cAAe,CAAC,CACd,cAAekD,EAAW,CAClC,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgBA,EAAW,CACnC,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgB,CAAC,OAAQ,QAAS,aAAc,cAAc,CACtE,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAAC,QAAS,OAAO,CAC3C,CAAO,EAKD,IAAK,CAAC,CACJ,IAAK,CAAC,SAAU,SAAS,CACjC,CAAO,EAKD,QAAS,CAAC,QAAS,eAAgB,SAAU,OAAQ,cAAe,QAAS,eAAgB,gBAAiB,aAAc,eAAgB,qBAAsB,qBAAsB,qBAAsB,kBAAmB,YAAa,YAAa,OAAQ,cAAe,WAAY,YAAa,QAAQ,EAKnT,MAAO,CAAC,CACN,MAAO,CAAC,QAAS,OAAQ,OAAQ,QAAS,KAAK,CACvD,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAAC,OAAQ,QAAS,OAAQ,OAAQ,QAAS,KAAK,CAC/D,CAAO,EAKD,UAAW,CAAC,UAAW,gBAAgB,EAKvC,aAAc,CAAC,CACb,OAAQ,CAAC,UAAW,QAAS,OAAQ,OAAQ,YAAY,CACjE,CAAO,EAKD,kBAAmB,CAAC,CAClB,OAAQ,CAAC,GAAGL,EAAc,EAAE9C,EAAgB,CACpD,CAAO,EAKD,SAAU,CAAC,CACT,SAAUyC,EAAa,CAC/B,CAAO,EAKD,aAAc,CAAC,CACb,aAAcA,EAAa,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAcA,EAAa,CACnC,CAAO,EAKD,WAAY,CAAC,CACX,WAAYD,EAAe,CACnC,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgBA,EAAe,CACvC,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgBA,EAAe,CACvC,CAAO,EAKD,SAAU,CAAC,SAAU,QAAS,WAAY,WAAY,QAAQ,EAK9D,MAAO,CAAC,CACN,MAAO,CAACV,CAAK,CACrB,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACA,CAAK,CACzB,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACA,CAAK,CACzB,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAACA,CAAK,CACrB,CAAO,EAKD,IAAK,CAAC,CACJ,IAAK,CAACA,CAAK,CACnB,CAAO,EAKD,IAAK,CAAC,CACJ,IAAK,CAACA,CAAK,CACnB,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAACA,CAAK,CACrB,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAACA,CAAK,CACtB,CAAO,EAKD,KAAM,CAAC,CACL,KAAM,CAACA,CAAK,CACpB,CAAO,EAKD,WAAY,CAAC,UAAW,YAAa,UAAU,EAK/C,EAAG,CAAC,CACF,EAAG,CAAC,OAAQhC,GAAWE,EAAgB,CAC/C,CAAO,EAMD,MAAO,CAAC,CACN,MAAO0C,EAAgC,CAC/C,CAAO,EAKD,iBAAkB,CAAC,CACjB,KAAM,CAAC,MAAO,cAAe,MAAO,aAAa,CACzD,CAAO,EAKD,YAAa,CAAC,CACZ,KAAM,CAAC,OAAQ,eAAgB,QAAQ,CAC/C,CAAO,EAKD,KAAM,CAAC,CACL,KAAM,CAAC,IAAK,OAAQ,UAAW,OAAQ1C,EAAgB,CAC/D,CAAO,EAKD,KAAM,CAAC,CACL,KAAMkD,EAAiB,CAC/B,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQA,EAAiB,CACjC,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAAC,QAAS,OAAQ,OAAQpD,GAAWE,EAAgB,CACpE,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACW,EAAK,CAC3B,CAAO,EAKD,gBAAiB,CAAC,CAChB,IAAK,CAAC,OAAQ,CACZ,KAAM,CAAC,OAAQb,GAAWE,EAAgB,CAC3C,EAAEA,EAAgB,CAC3B,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa6C,EAA+B,CACpD,CAAO,EAKD,UAAW,CAAC,CACV,UAAWA,EAA+B,CAClD,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAClC,EAAK,CAC3B,CAAO,EAKD,gBAAiB,CAAC,CAChB,IAAK,CAAC,OAAQ,CACZ,KAAM,CAACb,GAAWE,EAAgB,CACnC,EAAEA,EAAgB,CAC3B,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa6C,EAA+B,CACpD,CAAO,EAKD,UAAW,CAAC,CACV,UAAWA,EAA+B,CAClD,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAC,MAAO,MAAO,QAAS,YAAa,WAAW,CACrE,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAC,OAAQ,MAAO,MAAO,KAAM7C,EAAgB,CAClE,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAC,OAAQ,MAAO,MAAO,KAAMA,EAAgB,CAClE,CAAO,EAKD,IAAK,CAAC,CACJ,IAAK,CAAC2B,CAAG,CACjB,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAACA,CAAG,CACrB,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAACA,CAAG,CACrB,CAAO,EAKD,kBAAmB,CAAC,CAClB,QAAS,CAAC,SAAU,GAAGsB,GAAU,CACzC,CAAO,EAKD,gBAAiB,CAAC,CAChB,gBAAiB,CAAC,QAAS,MAAO,SAAU,SAAS,CAC7D,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgB,CAAC,OAAQ,QAAS,MAAO,SAAU,SAAS,CACpE,CAAO,EAKD,gBAAiB,CAAC,CAChB,QAAS,CAAC,SAAU,GAAGA,EAAQ,EAAI,UAAU,CACrD,CAAO,EAKD,cAAe,CAAC,CACd,MAAO,CAAC,QAAS,MAAO,SAAU,WAAY,SAAS,CAC/D,CAAO,EAKD,aAAc,CAAC,CACb,KAAM,CAAC,OAAQ,QAAS,MAAO,SAAU,UAAW,UAAU,CACtE,CAAO,EAKD,gBAAiB,CAAC,CAChB,gBAAiB,CAAC,GAAGA,EAAU,EAAE,UAAU,CACnD,CAAO,EAKD,cAAe,CAAC,CACd,cAAe,CAAC,QAAS,MAAO,SAAU,WAAY,SAAS,CACvE,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAAC,OAAQ,QAAS,MAAO,SAAU,SAAS,CAClE,CAAO,EAMD,EAAG,CAAC,CACF,EAAG,CAAChB,CAAO,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAO,CACpB,CAAO,EAKD,EAAG,CAAC,CACF,EAAG,CAACF,CAAM,CAClB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,GAAI,CAAC,CACH,GAAI,CAACA,CAAM,CACnB,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACO,CAAK,CACzB,CAAO,EAKD,kBAAmB,CAAC,iBAAiB,EAKrC,UAAW,CAAC,CACV,UAAW,CAACA,CAAK,CACzB,CAAO,EAKD,kBAAmB,CAAC,iBAAiB,EAMrC,EAAG,CAAC,CACF,EAAG,CAAC,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAOtC,GAAkBgB,CAAO,CACvF,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAChB,GAAkBgB,EAAS,MAAO,MAAO,KAAK,CAChE,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAChB,GAAkBgB,EAAS,OAAQ,OAAQ,MAAO,MAAO,MAAO,QAAS,CACjF,OAAQ,CAACf,EAAY,CACtB,EAAEA,EAAY,CACvB,CAAO,EAKD,EAAG,CAAC,CACF,EAAG,CAACD,GAAkBgB,EAAS,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,CACvF,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAChB,GAAkBgB,EAAS,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,CACrF,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAChB,GAAkBgB,EAAS,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,CACrF,CAAO,EAKD,KAAM,CAAC,CACL,KAAM,CAAChB,GAAkBgB,EAAS,OAAQ,MAAO,MAAO,KAAK,CACrE,CAAO,EAMD,YAAa,CAAC,CACZ,KAAM,CAAC,OAAQf,GAAcP,EAAiB,CACtD,CAAO,EAKD,iBAAkB,CAAC,cAAe,sBAAsB,EAKxD,aAAc,CAAC,SAAU,YAAY,EAKrC,cAAe,CAAC,CACd,KAAM,CAAC,OAAQ,aAAc,QAAS,SAAU,SAAU,WAAY,OAAQ,YAAa,QAASG,EAAiB,CAC7H,CAAO,EAKD,cAAe,CAAC,CACd,KAAM,CAACc,EAAK,CACpB,CAAO,EAKD,aAAc,CAAC,aAAa,EAK5B,cAAe,CAAC,SAAS,EAKzB,mBAAoB,CAAC,cAAc,EAKnC,aAAc,CAAC,cAAe,eAAe,EAK7C,cAAe,CAAC,oBAAqB,cAAc,EAKnD,eAAgB,CAAC,qBAAsB,kBAAkB,EAKzD,SAAU,CAAC,CACT,SAAU,CAAC,UAAW,QAAS,SAAU,OAAQ,QAAS,SAAUX,EAAgB,CAC5F,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAAC,OAAQP,GAAUI,EAAiB,CAC1D,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAC,OAAQ,QAAS,OAAQ,SAAU,UAAW,QAASL,GAAUQ,EAAgB,CACnG,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAAC,OAAQA,EAAgB,CAC/C,CAAO,EAKD,kBAAmB,CAAC,CAClB,KAAM,CAAC,OAAQ,OAAQ,UAAWA,EAAgB,CAC1D,CAAO,EAKD,sBAAuB,CAAC,CACtB,KAAM,CAAC,SAAU,SAAS,CAClC,CAAO,EAMD,oBAAqB,CAAC,CACpB,YAAa,CAACe,CAAM,CAC5B,CAAO,EAKD,sBAAuB,CAAC,CACtB,sBAAuB,CAACiB,CAAO,CACvC,CAAO,EAKD,iBAAkB,CAAC,CACjB,KAAM,CAAC,OAAQ,SAAU,QAAS,UAAW,QAAS,KAAK,CACnE,CAAO,EAKD,aAAc,CAAC,CACb,KAAM,CAACjB,CAAM,CACrB,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgB,CAACiB,CAAO,CAChC,CAAO,EAKD,kBAAmB,CAAC,YAAa,WAAY,eAAgB,cAAc,EAK3E,wBAAyB,CAAC,CACxB,WAAY,CAAC,GAAGe,EAAe,EAAE,MAAM,CAC/C,CAAO,EAKD,4BAA6B,CAAC,CAC5B,WAAY,CAAC,OAAQ,YAAavD,GAAUE,EAAiB,CACrE,CAAO,EAKD,mBAAoB,CAAC,CACnB,mBAAoB,CAAC,OAAQF,GAAUQ,EAAgB,CAC/D,CAAO,EAKD,wBAAyB,CAAC,CACxB,WAAY,CAACe,CAAM,CAC3B,CAAO,EAKD,iBAAkB,CAAC,YAAa,YAAa,aAAc,aAAa,EAKxE,gBAAiB,CAAC,WAAY,gBAAiB,WAAW,EAK1D,YAAa,CAAC,CACZ,KAAM,CAAC,OAAQ,SAAU,UAAW,QAAQ,CACpD,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ4B,EAAyB,CACzC,CAAO,EAKD,iBAAkB,CAAC,CACjB,MAAO,CAAC,WAAY,MAAO,SAAU,SAAU,WAAY,cAAe,MAAO,QAAS3C,EAAgB,CAClH,CAAO,EAKD,WAAY,CAAC,CACX,WAAY,CAAC,SAAU,SAAU,MAAO,WAAY,WAAY,cAAc,CACtF,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAAC,SAAU,QAAS,MAAO,MAAM,CAChD,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAC,OAAQ,SAAU,MAAM,CAC1C,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAC,OAAQA,EAAgB,CAC1C,CAAO,EAMD,gBAAiB,CAAC,CAChB,GAAI,CAAC,QAAS,QAAS,QAAQ,CACvC,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAAC,SAAU,UAAW,UAAW,MAAM,CAC1D,CAAO,EAMD,aAAc,CAAC,CACb,aAAc,CAACgC,CAAO,CAC9B,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAC,SAAU,UAAW,SAAS,CACpD,CAAO,EAKD,cAAe,CAAC,CACd,GAAI,CAAC,GAAGc,EAAc,EAAEzC,EAAmB,CACnD,CAAO,EAKD,YAAa,CAAC,CACZ,GAAI,CAAC,YAAa,CAChB,OAAQ,CAAC,GAAI,IAAK,IAAK,QAAS,OAAO,CACjD,CAAS,CACT,CAAO,EAKD,UAAW,CAAC,CACV,GAAI,CAAC,OAAQ,QAAS,UAAWF,EAAe,CACxD,CAAO,EAKD,WAAY,CAAC,CACX,GAAI,CAAC,OAAQ,CACX,cAAe,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,IAAI,CAC3D,EAAEI,EAAgB,CAC3B,CAAO,EAKD,WAAY,CAAC,CACX,GAAI,CAACQ,CAAM,CACnB,CAAO,EAKD,oBAAqB,CAAC,CACpB,KAAM,CAACc,CAA0B,CACzC,CAAO,EAKD,mBAAoB,CAAC,CACnB,IAAK,CAACA,CAA0B,CACxC,CAAO,EAKD,kBAAmB,CAAC,CAClB,GAAI,CAACA,CAA0B,CACvC,CAAO,EAKD,gBAAiB,CAAC,CAChB,KAAM,CAACD,CAAkB,CACjC,CAAO,EAKD,eAAgB,CAAC,CACf,IAAK,CAACA,CAAkB,CAChC,CAAO,EAKD,cAAe,CAAC,CACd,GAAI,CAACA,CAAkB,CAC/B,CAAO,EAMD,QAAS,CAAC,CACR,QAAS,CAACR,CAAY,CAC9B,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAACA,CAAY,CAClC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACA,CAAY,CACnC,CAAO,EAKD,WAAY,CAAC,CACX,OAAQ,CAACE,CAAW,CAC5B,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,aAAc,CAAC,CACb,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAACU,CAAO,CAClC,CAAO,EAKD,eAAgB,CAAC,CACf,OAAQ,CAAC,GAAGe,EAAe,EAAE,QAAQ,CAC7C,CAAO,EAKD,WAAY,CAAC,CACX,WAAY,CAACzB,CAAW,CAChC,CAAO,EAKD,mBAAoB,CAAC,kBAAkB,EAKvC,WAAY,CAAC,CACX,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,mBAAoB,CAAC,kBAAkB,EAKvC,iBAAkB,CAAC,CACjB,iBAAkB,CAACU,CAAO,CAClC,CAAO,EAKD,eAAgB,CAAC,CACf,OAAQe,EAAe,CAC/B,CAAO,EAKD,eAAgB,CAAC,CACf,OAAQ,CAAC5B,CAAW,CAC5B,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,iBAAkB,CAAC,CACjB,WAAY,CAACA,CAAW,CAChC,CAAO,EAKD,eAAgB,CAAC,CACf,OAAQ,CAACA,CAAW,CAC5B,CAAO,EAKD,gBAAiB,CAAC,CAChB,QAAS,CAAC,GAAI,GAAG4B,GAAe,CACxC,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAACvD,GAAUQ,EAAgB,CACrD,CAAO,EAKD,YAAa,CAAC,CACZ,QAAS,CAACR,GAAUE,EAAiB,CAC7C,CAAO,EAKD,gBAAiB,CAAC,CAChB,QAAS,CAACqB,CAAM,CACxB,CAAO,EAKD,SAAU,CAAC,CACT,KAAM6B,EAAgC,CAC9C,CAAO,EAKD,eAAgB,CAAC,YAAY,EAK7B,aAAc,CAAC,CACb,KAAM,CAAC7B,CAAM,CACrB,CAAO,EAKD,eAAgB,CAAC,CACf,eAAgB,CAACiB,CAAO,CAChC,CAAO,EAKD,gBAAiB,CAAC,CAChB,cAAe,CAACxC,GAAUE,EAAiB,CACnD,CAAO,EAKD,oBAAqB,CAAC,CACpB,cAAe,CAACqB,CAAM,CAC9B,CAAO,EAMD,OAAQ,CAAC,CACP,OAAQ,CAAC,GAAI,QAAS,OAAQd,GAAcQ,EAAiB,CACrE,CAAO,EAKD,eAAgB,CAAC,CACf,OAAQ,CAACE,EAAK,CACtB,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAACqB,CAAO,CACzB,CAAO,EAKD,YAAa,CAAC,CACZ,YAAa,CAAC,GAAGgB,KAAiB,eAAgB,aAAa,CACvE,CAAO,EAKD,WAAY,CAAC,CACX,WAAYA,GAAe,CACnC,CAAO,EAOD,OAAQ,CAAC,CACP,OAAQ,CAAC,GAAI,MAAM,CAC3B,CAAO,EAKD,KAAM,CAAC,CACL,KAAM,CAAC/B,CAAI,CACnB,CAAO,EAKD,WAAY,CAAC,CACX,WAAY,CAACC,CAAU,CAC/B,CAAO,EAKD,SAAU,CAAC,CACT,SAAU,CAACK,CAAQ,CAC3B,CAAO,EAKD,cAAe,CAAC,CACd,cAAe,CAAC,GAAI,OAAQtB,GAAcD,EAAgB,CAClE,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACwB,CAAS,CAC7B,CAAO,EAKD,aAAc,CAAC,CACb,aAAc,CAACC,CAAS,CAChC,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAACC,CAAM,CACvB,CAAO,EAKD,SAAU,CAAC,CACT,SAAU,CAACQ,CAAQ,CAC3B,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAACE,CAAK,CACrB,CAAO,EAMD,kBAAmB,CAAC,CAClB,kBAAmB,CAAC,GAAI,MAAM,CACtC,CAAO,EAKD,gBAAiB,CAAC,CAChB,gBAAiB,CAACnB,CAAI,CAC9B,CAAO,EAKD,sBAAuB,CAAC,CACtB,sBAAuB,CAACC,CAAU,CAC1C,CAAO,EAKD,oBAAqB,CAAC,CACpB,oBAAqB,CAACK,CAAQ,CACtC,CAAO,EAKD,qBAAsB,CAAC,CACrB,qBAAsB,CAACC,CAAS,CACxC,CAAO,EAKD,sBAAuB,CAAC,CACtB,sBAAuB,CAACC,CAAS,CACzC,CAAO,EAKD,kBAAmB,CAAC,CAClB,kBAAmB,CAACC,CAAM,CAClC,CAAO,EAKD,mBAAoB,CAAC,CACnB,mBAAoB,CAACM,CAAO,CACpC,CAAO,EAKD,oBAAqB,CAAC,CACpB,oBAAqB,CAACE,CAAQ,CACtC,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAACE,CAAK,CAChC,CAAO,EAMD,kBAAmB,CAAC,CAClB,OAAQ,CAAC,WAAY,UAAU,CACvC,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAACf,CAAa,CACxC,CAAO,EAKD,mBAAoB,CAAC,CACnB,mBAAoB,CAACA,CAAa,CAC1C,CAAO,EAKD,mBAAoB,CAAC,CACnB,mBAAoB,CAACA,CAAa,CAC1C,CAAO,EAKD,eAAgB,CAAC,CACf,MAAO,CAAC,OAAQ,OAAO,CAC/B,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAC,MAAO,QAAQ,CACjC,CAAO,EAMD,WAAY,CAAC,CACX,WAAY,CAAC,OAAQ,MAAO,GAAI,SAAU,UAAW,SAAU,YAAarB,EAAgB,CACpG,CAAO,EAKD,SAAU,CAAC,CACT,SAAUoD,EAAuB,CACzC,CAAO,EAKD,KAAM,CAAC,CACL,KAAM,CAAC,SAAU,KAAM,MAAO,SAAUpD,EAAgB,CAChE,CAAO,EAKD,MAAO,CAAC,CACN,MAAOoD,EAAuB,CACtC,CAAO,EAKD,QAAS,CAAC,CACR,QAAS,CAAC,OAAQ,OAAQ,OAAQ,QAAS,SAAUpD,EAAgB,CAC7E,CAAO,EAMD,UAAW,CAAC,CACV,UAAW,CAAC,GAAI,MAAO,MAAM,CACrC,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAACmC,CAAK,CACrB,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACA,CAAK,CACzB,CAAO,EAKD,UAAW,CAAC,CACV,UAAW,CAACA,CAAK,CACzB,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAACrC,GAAWE,EAAgB,CAC5C,CAAO,EAKD,cAAe,CAAC,CACd,cAAe,CAACuC,CAAS,CACjC,CAAO,EAKD,cAAe,CAAC,CACd,cAAe,CAACA,CAAS,CACjC,CAAO,EAKD,SAAU,CAAC,CACT,SAAU,CAACF,CAAI,CACvB,CAAO,EAKD,SAAU,CAAC,CACT,SAAU,CAACA,CAAI,CACvB,CAAO,EAKD,mBAAoB,CAAC,CACnB,OAAQ,CAAC,SAAU,MAAO,YAAa,QAAS,eAAgB,SAAU,cAAe,OAAQ,WAAYrC,EAAgB,CACrI,CAAO,EAMD,OAAQ,CAAC,CACP,OAAQ,CAAC,OAAQe,CAAM,CAC/B,CAAO,EAKD,WAAY,CAAC,CACX,WAAY,CAAC,OAAQ,MAAM,CACnC,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAAC,OAAQ,UAAW,UAAW,OAAQ,OAAQ,OAAQ,OAAQ,cAAe,OAAQ,eAAgB,WAAY,OAAQ,YAAa,gBAAiB,QAAS,OAAQ,UAAW,OAAQ,WAAY,aAAc,aAAc,aAAc,WAAY,WAAY,WAAY,WAAY,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,cAAe,cAAe,UAAW,WAAYf,EAAgB,CACrc,CAAO,EAKD,cAAe,CAAC,CACd,MAAO,CAACe,CAAM,CACtB,CAAO,EAKD,iBAAkB,CAAC,CACjB,iBAAkB,CAAC,OAAQ,MAAM,CACzC,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAAC,OAAQ,IAAK,IAAK,EAAE,CACrC,CAAO,EAKD,kBAAmB,CAAC,CAClB,OAAQ,CAAC,OAAQ,QAAQ,CACjC,CAAO,EAKD,WAAY,CAAC,CACX,WAAY4B,EAAyB,CAC7C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,WAAY,CAAC,CACX,WAAYA,EAAyB,CAC7C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,YAAa,CAAC,CACZ,YAAaA,EAAyB,CAC9C,CAAO,EAKD,aAAc,CAAC,CACb,KAAM,CAAC,QAAS,MAAO,SAAU,YAAY,CACrD,CAAO,EAKD,YAAa,CAAC,CACZ,KAAM,CAAC,SAAU,QAAQ,CACjC,CAAO,EAKD,YAAa,CAAC,CACZ,KAAM,CAAC,OAAQ,IAAK,IAAK,MAAM,CACvC,CAAO,EAKD,kBAAmB,CAAC,CAClB,KAAM,CAAC,YAAa,WAAW,CACvC,CAAO,EAKD,MAAO,CAAC,CACN,MAAO,CAAC,OAAQ,OAAQ,cAAc,CAC9C,CAAO,EAKD,UAAW,CAAC,CACV,YAAa,CAAC,IAAK,OAAQ,OAAO,CAC1C,CAAO,EAKD,UAAW,CAAC,CACV,YAAa,CAAC,IAAK,KAAM,MAAM,CACvC,CAAO,EAKD,WAAY,CAAC,kBAAkB,EAK/B,OAAQ,CAAC,CACP,OAAQ,CAAC,OAAQ,OAAQ,MAAO,MAAM,CAC9C,CAAO,EAKD,cAAe,CAAC,CACd,cAAe,CAAC,OAAQ,SAAU,WAAY,YAAa3C,EAAgB,CACnF,CAAO,EAMD,KAAM,CAAC,CACL,KAAM,CAACe,EAAQ,MAAM,CAC7B,CAAO,EAKD,WAAY,CAAC,CACX,OAAQ,CAACvB,GAAUE,GAAmBG,EAAiB,CAC/D,CAAO,EAKD,OAAQ,CAAC,CACP,OAAQ,CAACkB,EAAQ,MAAM,CAC/B,CAAO,EAMD,GAAI,CAAC,UAAW,aAAa,EAK7B,sBAAuB,CAAC,CACtB,sBAAuB,CAAC,OAAQ,MAAM,CAC9C,CAAO,CACF,EACD,uBAAwB,CACtB,SAAU,CAAC,aAAc,YAAY,EACrC,WAAY,CAAC,eAAgB,cAAc,EAC3C,MAAO,CAAC,UAAW,UAAW,QAAS,MAAO,MAAO,QAAS,SAAU,MAAM,EAC9E,UAAW,CAAC,QAAS,MAAM,EAC3B,UAAW,CAAC,MAAO,QAAQ,EAC3B,KAAM,CAAC,QAAS,OAAQ,QAAQ,EAChC,IAAK,CAAC,QAAS,OAAO,EACtB,EAAG,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAClD,GAAI,CAAC,KAAM,IAAI,EACf,GAAI,CAAC,KAAM,IAAI,EACf,EAAG,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAClD,GAAI,CAAC,KAAM,IAAI,EACf,GAAI,CAAC,KAAM,IAAI,EACf,KAAM,CAAC,IAAK,GAAG,EACf,YAAa,CAAC,SAAS,EACvB,aAAc,CAAC,cAAe,mBAAoB,aAAc,cAAe,cAAc,EAC7F,cAAe,CAAC,YAAY,EAC5B,mBAAoB,CAAC,YAAY,EACjC,aAAc,CAAC,YAAY,EAC3B,cAAe,CAAC,YAAY,EAC5B,eAAgB,CAAC,YAAY,EAC7B,aAAc,CAAC,UAAW,UAAU,EACpC,QAAS,CAAC,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,aAAc,aAAc,aAAc,aAAc,aAAc,aAAc,aAAc,YAAY,EACtM,YAAa,CAAC,aAAc,YAAY,EACxC,YAAa,CAAC,aAAc,YAAY,EACxC,YAAa,CAAC,aAAc,YAAY,EACxC,YAAa,CAAC,aAAc,YAAY,EACxC,YAAa,CAAC,aAAc,YAAY,EACxC,YAAa,CAAC,aAAc,YAAY,EACxC,iBAAkB,CAAC,mBAAoB,kBAAkB,EACzD,WAAY,CAAC,aAAc,aAAc,aAAc,aAAc,aAAc,YAAY,EAC/F,aAAc,CAAC,aAAc,YAAY,EACzC,aAAc,CAAC,aAAc,YAAY,EACzC,eAAgB,CAAC,iBAAkB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,gBAAgB,EAC3H,iBAAkB,CAAC,iBAAkB,gBAAgB,EACrD,iBAAkB,CAAC,iBAAkB,gBAAgB,EACrD,WAAY,CAAC,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,WAAW,EACnH,YAAa,CAAC,YAAa,WAAW,EACtC,YAAa,CAAC,YAAa,WAAW,EACtC,WAAY,CAAC,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,YAAa,WAAW,EACnH,YAAa,CAAC,YAAa,WAAW,EACtC,YAAa,CAAC,YAAa,WAAW,EACtC,MAAO,CAAC,UAAW,UAAW,UAAU,EACxC,UAAW,CAAC,OAAO,EACnB,UAAW,CAAC,OAAO,EACnB,WAAY,CAAC,OAAO,CACrB,EACD,+BAAgC,CAC9B,YAAa,CAAC,SAAS,CACxB,CACL,CACA,EAiDMsC,GAAuBlF,GAAoB2C,EAAgB,ECz/E1D,SAASwC,MAAMC,EAAsB,CACnC,OAAAF,GAAQxL,GAAK0L,CAAM,CAAC,CAC7B,CCEA,MAAMC,GAAgBC,GAEhBC,GAAgBC,EAGpB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACC,GAAA,CACC,IAAAF,EACA,UAAWN,GACT,oIACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACD6oB,GAAc,YAAcI,GAAyB,YAErD,MAAMC,GAAgB/L,GACpB,4lBACA,CACE,SAAU,CACR,QAAS,CACP,QAAS,uCACT,YACE,iFACJ,CACF,EACA,gBAAiB,CACf,QAAS,SACX,CACF,CACF,EAEMgM,GAAQL,EAAM,WAIlB,CAAC,CAAE,UAAArK,EAAW,QAAAhW,EAAS,GAAGzI,CAAM,EAAG+oB,IAEjCC,EAAA,IAACI,GAAA,CACC,IAAAL,EACA,UAAWN,GAAGS,GAAc,CAAE,QAAAzgB,CAAS,GAAGgW,CAAS,EAClD,GAAGze,CAAA,EAGT,EACDmpB,GAAM,YAAcC,GAAqB,YAEzC,MAAMC,GAAcP,EAGlB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACM,GAAA,CACC,IAAAP,EACA,UAAWN,GACT,qgBACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDqpB,GAAY,YAAcC,GAAuB,YAEjD,MAAMC,GAAaT,EAGjB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACQ,GAAA,CACC,IAAAT,EACA,UAAWN,GACT,wVACAhK,CACF,EACA,cAAY,GACX,GAAGze,EAEJ,SAAAgpB,MAACS,GAAE,WAAU,SAAU,GACzB,CACD,EACDF,GAAW,YAAcC,GAAsB,YAE/C,MAAME,GAAaZ,EAGjB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACW,GAAA,CACC,IAAAZ,EACA,UAAWN,GAAG,wBAAyBhK,CAAS,EAC/C,GAAGze,CAAA,CACN,CACD,EACD0pB,GAAW,YAAcC,GAAsB,YAE/C,MAAMC,GAAmBd,EAGvB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACa,GAAA,CACC,IAAAd,EACA,UAAWN,GAAG,qBAAsBhK,CAAS,EAC5C,GAAGze,CAAA,CACN,CACD,EACD4pB,GAAiB,YAAcC,GAA4B,YCpGpD,SAASC,IAAU,CAClB,MAAE,OAAAC,GAAWvN,KAEnB,OACGwN,OAAArB,GAAA,CAAc,uBAAqB,QAAQ,eAAgB,GACzD,UAAOoB,EAAA,IAAI,SAAU,CAAE,GAAA1N,EAAI,MAAAvB,EAAO,YAAAmP,EAAa,OAAA1Q,EAAQ,GAAGvZ,GAAS,CAClE,OACGgqB,OAAAb,GAAA,CAAgB,GAAGnpB,EAAO,uBAAqB,QAC9C,UAACgqB,OAAA,OAAI,UAAU,aACZ,UAASlP,GAAAkO,MAACU,IAAY,SAAM5O,CAAA,GAC5BmP,GACEjB,MAAAY,GAAA,CAAkB,SAAYK,CAAA,IAEnC,EACC1Q,QACAgQ,GAAW,MARFlN,CASZ,EAEH,QACAwM,GAAc,GACjB,GAEJ,CC7BA,IAAIqB,GAAiB,CACnB,OAAQ,SAASjO,EAAG1d,EAAG4rB,EAAIC,EAAG,CAC5B,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,EAAIiiB,EAAImO,EAAI7rB,CACpB,EACD,WAAY,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAChC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,GAAKiiB,GAAKmO,GAAKnO,EAAI1d,CAC3B,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,MAAO,CAACvE,GAAKiiB,GAAKmO,IAAMnO,EAAI,GAAK1d,CAClC,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,EAAIiiB,EAAIA,EAAI1d,EAEhB,CAACvE,EAAI,GAAM,EAAEiiB,GAAMA,EAAI,GAAK,GAAK1d,CAE3C,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,GAAKiiB,GAAKmO,GAAKnO,EAAIA,EAAI1d,CAC/B,EACD,aAAc,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAClC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,IAAMiiB,EAAIA,EAAImO,EAAI,GAAKnO,EAAIA,EAAI,GAAK1d,CAC5C,EACD,eAAgB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACpC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,EAAIiiB,EAAIA,EAAIA,EAAI1d,EAEpBvE,EAAI,IAAMiiB,GAAK,GAAKA,EAAIA,EAAI,GAAK1d,CAE3C,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,GAAKiiB,GAAKmO,GAAKnO,EAAIA,EAAIA,EAAI1d,CACnC,EACD,aAAc,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAClC,IAAIpwB,EAAImwB,EAAK5rB,EACb,MAAO,CAACvE,IAAMiiB,EAAIA,EAAImO,EAAI,GAAKnO,EAAIA,EAAIA,EAAI,GAAK1d,CACjD,EACD,eAAgB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACpC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,EAAIiiB,EAAIA,EAAIA,EAAIA,EAAI1d,EAExB,CAACvE,EAAI,IAAMiiB,GAAK,GAAKA,EAAIA,EAAIA,EAAI,GAAK1d,CAEhD,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,GAAKiiB,GAAKmO,GAAKnO,EAAIA,EAAIA,EAAIA,EAAI1d,CACvC,EACD,aAAc,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAClC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,IAAMiiB,EAAIA,EAAImO,EAAI,GAAKnO,EAAIA,EAAIA,EAAIA,EAAI,GAAK1d,CACpD,EACD,eAAgB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACpC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,EAAIiiB,EAAIA,EAAIA,EAAIA,EAAIA,EAAI1d,EAE5BvE,EAAI,IAAMiiB,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAK1d,CAEnD,EACD,WAAY,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAChC,IAAIpwB,EAAImwB,EAAK5rB,EACb,MAAO,CAACvE,EAAI,KAAK,IAAIiiB,EAAImO,GAAK,KAAK,GAAK,EAAE,EAAIpwB,EAAIuE,CACnD,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,EAAI,KAAK,IAAIiiB,EAAImO,GAAK,KAAK,GAAK,EAAE,EAAI7rB,CAC9C,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,MAAO,CAACvE,EAAI,GAAK,KAAK,IAAI,KAAK,GAAKiiB,EAAImO,CAAC,EAAI,GAAK7rB,CACnD,EACD,WAAY,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAChC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAQ0d,GAAG,EAAK1d,EAAIvE,EAAI,KAAK,IAAI,EAAG,IAAMiiB,EAAEmO,EAAI,EAAE,EAAI7rB,CACvD,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAQ0d,GAAGmO,EAAK7rB,EAAEvE,EAAIA,GAAK,CAAC,KAAK,IAAI,EAAG,IAAMiiB,EAAEmO,CAAC,EAAI,GAAK7rB,CAC3D,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAI0d,IAAM,EACD1d,EAEL0d,IAAMmO,EACD7rB,EAAIvE,GAERiiB,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,EAAI,KAAK,IAAI,EAAG,IAAMiiB,EAAI,EAAE,EAAI1d,EAEpCvE,EAAI,GAAK,CAAC,KAAK,IAAI,EAAG,IAAM,EAAEiiB,CAAC,EAAI,GAAK1d,CAElD,EACD,WAAY,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAChC,IAAIpwB,EAAImwB,EAAK5rB,EACb,MAAO,CAACvE,GAAK,KAAK,KAAK,GAAKiiB,GAAKmO,GAAKnO,CAAC,EAAI,GAAK1d,CACjD,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACjC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAOvE,EAAI,KAAK,KAAK,GAAKiiB,EAAIA,EAAImO,EAAI,GAAKnO,CAAC,EAAI1d,CACjD,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,EAAI,GAAK,EACV,CAACpwB,EAAI,GAAK,KAAK,KAAK,EAAIiiB,EAAIA,CAAC,EAAI,GAAK1d,EAEtCvE,EAAI,GAAK,KAAK,KAAK,GAAKiiB,GAAK,GAAKA,CAAC,EAAI,GAAK1d,CAEtD,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACTD,EAAGxE,EAAGuwB,EAIV,OAHAA,EAAI,QACJvwB,EAAI,EACJwE,EAAItE,EACAiiB,IAAM,EACD1d,GACG0d,GAAKmO,KAAO,EACf7rB,EAAIvE,GAERF,IACHA,EAAIswB,EAAI,IAEN9rB,EAAI,KAAK,IAAItE,CAAC,GAChBsE,EAAItE,EACJqwB,EAAIvwB,EAAI,GAERuwB,EAAIvwB,GAAK,EAAI,KAAK,IAAM,KAAK,KAAKE,EAAIsE,CAAC,EAElC,EAAEA,EAAI,KAAK,IAAI,EAAG,IAAM2d,GAAK,EAAE,EAAI,KAAK,KAAKA,EAAImO,EAAIC,IAAM,EAAI,KAAK,IAAMvwB,CAAC,GAAKyE,EACxF,EACD,eAAgB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACpC,IAAIpwB,EAAImwB,EAAK5rB,EACTD,EAAGxE,EAAGuwB,EAIV,OAHAA,EAAI,QACJvwB,EAAI,EACJwE,EAAItE,EACAiiB,IAAM,EACD1d,GACG0d,GAAKmO,KAAO,EACf7rB,EAAIvE,GAERF,IACHA,EAAIswB,EAAI,IAEN9rB,EAAI,KAAK,IAAItE,CAAC,GAChBsE,EAAItE,EACJqwB,EAAIvwB,EAAI,GAERuwB,EAAIvwB,GAAK,EAAI,KAAK,IAAM,KAAK,KAAKE,EAAIsE,CAAC,EAElCA,EAAI,KAAK,IAAI,EAAG,IAAM2d,CAAC,EAAI,KAAK,KAAKA,EAAImO,EAAIC,IAAM,EAAI,KAAK,IAAMvwB,CAAC,EAAIE,EAAIuE,EACnF,EACD,iBAAkB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACtC,IAAIpwB,EAAImwB,EAAK5rB,EACTD,EAAGxE,EAAGuwB,EAIV,OAHAA,EAAI,QACJvwB,EAAI,EACJwE,EAAItE,EACAiiB,IAAM,EACD1d,GACG0d,GAAKmO,EAAI,KAAO,EACnB7rB,EAAIvE,GAERF,IACHA,EAAIswB,GAAK,GAAM,MAEb9rB,EAAI,KAAK,IAAItE,CAAC,GAChBsE,EAAItE,EACJqwB,EAAIvwB,EAAI,GAERuwB,EAAIvwB,GAAK,EAAI,KAAK,IAAM,KAAK,KAAKE,EAAIsE,CAAC,EAErC2d,EAAI,EACC,KAAQ3d,EAAI,KAAK,IAAI,EAAG,IAAM2d,GAAK,EAAE,EAAI,KAAK,KAAKA,EAAImO,EAAIC,IAAM,EAAI,KAAK,IAAMvwB,CAAC,GAAKyE,EAEtFD,EAAI,KAAK,IAAI,EAAG,KAAO2d,GAAK,EAAE,EAAI,KAAK,KAAKA,EAAImO,EAAIC,IAAM,EAAI,KAAK,IAAMvwB,CAAC,EAAI,GAAME,EAAIuE,EAElG,EACD,WAAY,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAI,IAAM,SACR,EAAI,SAECvE,GAAKiiB,GAAKmO,GAAKnO,IAAM,EAAI,GAAKA,EAAI,GAAK1d,CAC/C,EACD,YAAa,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,EAAG,CACpC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAI,IAAM,SACR,EAAI,SAECvE,IAAMiiB,EAAIA,EAAImO,EAAI,GAAKnO,IAAM,EAAI,GAAKA,EAAI,GAAK,GAAK1d,CAC5D,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,EAAG,CACtC,IAAIpwB,EAAImwB,EAAK5rB,EAIb,OAHI,IAAM,SACR,EAAI,UAED0d,GAAKmO,EAAI,GAAK,EACVpwB,EAAI,GAAKiiB,EAAIA,KAAO,GAAK,OAAS,GAAKA,EAAI,IAAM1d,EAEjDvE,EAAI,IAAMiiB,GAAK,GAAKA,KAAO,GAAK,OAAS,GAAKA,EAAI,GAAK,GAAK1d,CAEtE,EACD,aAAc,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CAClC,IAAIpwB,EAAImwB,EAAK5rB,EACT+rB,EACJ,OAAAA,EAAIJ,GAAe,cAAcE,EAAInO,EAAG,EAAGjiB,EAAGowB,CAAC,EACxCpwB,EAAIswB,EAAI/rB,CAChB,EACD,cAAe,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACnC,IAAIpwB,EAAImwB,EAAK5rB,EACb,OAAK0d,GAAKmO,GAAK,EAAI,KACVpwB,GAAK,OAASiiB,EAAIA,GAAK1d,EACrB0d,EAAI,EAAI,KACVjiB,GAAK,QAAUiiB,GAAK,IAAM,MAAQA,EAAI,KAAQ1d,EAC5C0d,EAAI,IAAM,KACZjiB,GAAK,QAAUiiB,GAAK,KAAO,MAAQA,EAAI,OAAU1d,EAEjDvE,GAAK,QAAUiiB,GAAK,MAAQ,MAAQA,EAAI,SAAY1d,CAE9D,EACD,gBAAiB,SAAS0d,EAAG1d,EAAG4rB,EAAIC,EAAG,CACrC,IAAIpwB,EAAImwB,EAAK5rB,EACT+rB,EACJ,OAAIrO,EAAImO,EAAI,GACVE,EAAIJ,GAAe,aAAajO,EAAI,EAAG,EAAGjiB,EAAGowB,CAAC,EACvCE,EAAI,GAAM/rB,IAEjB+rB,EAAIJ,GAAe,cAAcjO,EAAI,EAAImO,EAAG,EAAGpwB,EAAGowB,CAAC,EAC5CE,EAAI,GAAMtwB,EAAI,GAAMuE,EAE9B,CACH,EAEAgsB,GAAiBL,GCpPjB,SAASM,GAAcC,EAAS,CAC5B,OAAQA,EAAU,KAAK,GAAM,GACjC,CACA,SAASC,GAAYC,EAAKC,EAAK,CAC3B,OAAOD,EAAM,KAAK,OAAQ,GAAIC,EAAMD,EACxC,CACA,SAASE,GAAUF,EAAKC,EAAK,CACzB,OAAO,KAAK,MAAMD,EAAM,KAAK,OAAQ,GAAIC,EAAMD,EAAM,EAAE,CAC3D,CAEA,IAAIG,IACH,SAAUA,EAAe,CACtBA,EAAcA,EAAc,OAAY,CAAC,EAAI,SAC7CA,EAAcA,EAAc,OAAY,CAAC,EAAI,SAC7CA,EAAcA,EAAc,MAAW,CAAC,EAAI,OAChD,GAAGA,KAAkBA,GAAgB,CAAE,EAAC,EACxC,IAAIC,IACH,SAAUA,EAAmB,CAC1BA,EAAkBA,EAAkB,SAAc,CAAC,EAAI,WACvDA,EAAkBA,EAAkB,SAAc,EAAE,EAAI,UAC5D,GAAGA,KAAsBA,GAAoB,CAAE,EAAC,EAChD,MAAMC,GAAqB,IAAO,GAClC,MAAMC,EAAS,CACX,YAAYC,EAASC,EAAYC,EAAGC,EAAG,CACnC,KAAK,WAAaF,EAClB,KAAM,CAAE,OAAAjF,EAAQ,iBAAAoF,EAAkB,iBAAAC,CAAgB,EAAK,KAAK,aAC5D,KAAK,QAAUL,EACf,KAAK,EAAIE,EACT,KAAK,EAAIC,EACT,KAAK,EAAIX,GAAY,EAAG,EAAE,EAC1B,KAAK,EAAIA,GAAY,EAAG,EAAE,EAC1B,KAAK,OAASA,GAAY,EAAG,EAAE,EAC/B,KAAK,GACD,OAAOY,GAAqB,SACtBZ,GAAY,CAACY,EAAkBA,CAAgB,EAC/CZ,GAAYY,EAAiB,IAAKA,EAAiB,GAAG,EAChE,KAAK,GACD,OAAOC,GAAqB,SACtBb,GAAY,CAACa,EAAkB,CAAC,EAChCb,GAAYa,EAAiB,IAAKA,EAAiB,GAAG,EAChE,KAAK,MAAQV,GAAU,EAAG,CAAC,EAC3B,KAAK,MAAQL,GAAcE,GAAY,EAAG,GAAG,CAAC,EAC9C,KAAK,YAAcA,GAAY,IAAM,EAAG,EACxC,KAAK,MAAQxE,EAAO,KAAK,MAAM,KAAK,SAAWA,EAAO,MAAM,CAAC,EAC7D,KAAK,QAAUwE,GAAY,EAAG,CAAC,EAC/B,KAAK,kBAAoBA,GAAY,EAAG,CAAC,EACnCK,GAAkB,SAClBA,GAAkB,QAC3B,CACD,OAAOS,EAAS,CACZ,KAAM,CAAE,QAAAC,EAAS,KAAAC,EAAM,SAAAC,EAAU,QAAAxE,EAAS,UAAAyE,CAAW,EAAG,KAAK,aACvDC,EAAsBL,EAAUR,GACtC,KAAK,GAAK,KAAK,GAAKa,EACpB,KAAK,GAAK,KAAK,GAAKA,EACpB,KAAK,IAAMJ,EAAUI,EACrB,KAAK,IAAMH,EAAOG,EAClB,KAAK,IAAMF,GAAYE,EACvB,KAAK,IAAMF,GAAYE,EACnB,KAAK,SAAW,GAChB,KAAK,oBAAsBd,GAAkB,SAC7C,KAAK,kBAAoBA,GAAkB,SAEtC,KAAK,SAAW,IACrB,KAAK,oBAAsBA,GAAkB,WAC7C,KAAK,kBAAoBA,GAAkB,UAE/C,MAAMe,EAAc,GAAM,KAAK,kBAAoBD,EAcnD,GAbA,KAAK,SAAWC,EAChB,KAAK,OAAS,KAAK,YACnB,KAAK,QAAQ,OACb,KAAK,QAAQ,UAAU,KAAK,EAAG,KAAK,CAAC,EACrC,KAAK,QAAQ,OAAO,KAAK,KAAK,EAC9B,KAAK,QAAQ,MAAM,EAAG,KAAK,OAAO,EAClC,KAAK,QAAQ,OAAO,KAAK,KAAK,EAC9B,KAAK,QAAQ,YACb,KAAK,QAAQ,UAAY,KAAK,MAC9B,KAAK,QAAQ,YAAc,KAAK,MAChC,KAAK,QAAQ,YAAc3E,EAC3B,KAAK,QAAQ,QAAU,QACvB,KAAK,QAAQ,UAAY,EACrByE,GAAa,OAAOA,GAAc,WAClCA,EAAU,KAAK,KAAM,KAAK,OAAO,MAGjC,QAAQ,KAAK,MAAK,CACd,KAAKd,GAAc,OAAQ,CACvB,KAAK,QAAQ,YACb,KAAK,QAAQ,IAAI,EAAG,EAAG,KAAK,OAAQ,EAAG,EAAI,KAAK,EAAE,EAClD,KAAK,QAAQ,OACb,KACH,CACD,KAAKA,GAAc,OAAQ,CACvB,KAAK,QAAQ,SAAS,CAAC,KAAK,EAAI,EAAG,CAAC,KAAK,EAAI,EAAG,KAAK,EAAG,KAAK,CAAC,EAC9D,KACH,CACD,KAAKA,GAAc,MAAO,CACtB,KAAK,QAAQ,SAAS,CAAC,KAAK,EAAI,EAAG,CAAC,KAAK,EAAI,EAAG,KAAK,EAAI,EAAG,KAAK,CAAC,EAClE,KACH,CACJ,CAEL,KAAK,QAAQ,YACb,KAAK,QAAQ,SAChB,CACL,CAEA,MAAMiB,EAAkB,CACpB,YAAYC,EAAQb,EAAY,CAC5B,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,mBAAqB,EAC1B,KAAK,cAAgB,EACrB,KAAK,UAAY,EACjB,KAAK,UAAY,GACjB,KAAK,mBAAqB,EAC1B,KAAK,iBAAoBpxB,GAAM,CAC3B,KAAK,UAAU,OAAOA,EAAG,CAAC,CACtC,EACQ,KAAK,YAAc,IAAM,CACrB,MAAMkyB,EAAevB,GAAY,KAAK,EAAG,KAAK,EAAI,KAAK,CAAC,EAClDwB,EAAexB,GAAY,KAAK,EAAG,KAAK,EAAI,KAAK,CAAC,EACxD,OAAO,IAAIO,GAAS,KAAK,QAAS,KAAK,WAAYgB,EAAcC,CAAY,CACzF,EACQ,KAAK,QAAWV,GAAY,CACxB,KAAM,CAAE,OAAAQ,EAAQ,QAAAd,EAAS,mBAAAiB,EAAoB,mBAAAC,CAAkB,EAAK,KAC9D,CAAE,IAAAC,EAAK,QAAAC,EAAS,eAAAC,EAAgB,MAAAC,EAAO,cAAAC,EAAe,cAAAC,CAAgB,EAAG,KAAK,aACpF,GAAI,CAACL,EACD,MAAO,GAEX,MAAMM,EAAK,KAAK,UAAU,OACpBC,EAAcN,EAAUK,EAAKR,EAEnC,GAAIS,EAAcL,EAAgB,CAE1BH,IAAuBG,IACvB,KAAK,cAAgB,EACrB,KAAK,UAAYK,EACjB,KAAK,mBAAqBL,GAG9B,KAAK,cAAgB,KAAK,IAAIG,EAAe,KAAK,IAAI,EAAG,KAAK,cAAgBlB,CAAO,CAAC,EACtF,MAAMqB,EAAaJ,EAAc,KAAK,cAAe,KAAK,UAAWF,EAAgBG,CAAa,EAC5FI,EAAW,KAAK,MAAMD,EAAaD,CAAW,EACpD,QAAS7yB,EAAI,EAAGA,EAAI+yB,EAAU/yB,IAC1B,KAAK,UAAU,KAAK,KAAK,YAAa,GAE1C,KAAK,oBAAsB+yB,CAC9B,CACGN,IAEAtB,EAAQ,KAAO,kBACfA,EAAQ,UAAY,OACpBA,EAAQ,UAAY,QACpBA,EAAQ,SAAS,cAAcyB,CAAE,GAAIX,EAAO,MAAQ,GAAIA,EAAO,OAAS,EAAE,GAG9E,QAASjyB,EAAI,KAAK,UAAU,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACjD,MAAMD,EAAI,KAAK,UAAUC,CAAC,EAE1BD,EAAE,OAAO0xB,CAAO,GAEZ1xB,EAAE,EAAIkyB,EAAO,QACblyB,EAAE,EAAI,MACNA,EAAE,EAAIkyB,EAAO,MAAQ,KACrBlyB,EAAE,EAAI,QACFwyB,GAAWM,GAAeL,EAE1B,KAAK,UAAUxyB,CAAC,EAAI,KAAK,YAAW,EAGpC,KAAK,iBAAiBA,CAAC,EAGlC,CACD,OAAO4yB,EAAK,GAAKC,EAAcL,CAC3C,EACQ,KAAK,OAASP,EACd,MAAMe,EAAM,KAAK,OAAO,WAAW,IAAI,EACvC,GAAI,CAACA,EACD,MAAM,IAAI,MAAM,8BAA8B,EAElD,KAAK,QAAUA,EACf,KAAK,WAAa5B,CACrB,CACL,CAEA,MAAM6B,GAAmB,CACrB,MAAO,OAAO,OAAW,IAAc,OAAO,WAAa,IAC3D,OAAQ,OAAO,OAAW,IAAc,OAAO,YAAc,IAC7D,eAAgB,IAChB,SAAU,IACV,KAAM,EACN,QAAS,GACT,iBAAkB,EAClB,iBAAkB,GAClB,OAAQ,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACH,EACD,QAAS,EACT,MAAO,GACP,cAAeC,GAAoB,cACnC,cAAe,IACf,QAAS,GACT,IAAK,EACT,EACA,MAAMC,EAAS,CACX,YAAYlB,EAAQjrB,EAAM,CACtB,KAAK,cAAgB,EACrB,KAAK,uBAA0BA,GAAS,CACpC,MAAMosB,EAA2B,CAC7B,eAAgB,CACZ,EAAG,EACH,EAAG,EACH,EAAG,KAAK,OAAO,MACf,EAAG,CACN,CACjB,EACY,KAAK,SAAW,CACZ,GAAGA,EACH,GAAGH,GACH,GAAGjsB,CACnB,EACY,OAAO,OAAO,KAAMA,EAAK,cAAc,CACnD,EACQ,KAAK,OAAS,CAACqsB,EAAY,IAAM,CAC7B,KAAM,CAAE,QAAS,CAAE,IAAAf,EAAK,mBAAAgB,EAAoB,UAAAC,CAAS,EAAI,OAAAtB,EAAQ,QAAAd,CAAU,EAAG,KAExEM,EAAU,KAAK,IAAI4B,EAAY,KAAK,cAAe,EAAE,EAE3D,GAAIE,GAAa9B,EAAU,IAAO8B,EAAW,CACzC,KAAK,MAAQ,sBAAsB,KAAK,MAAM,EAC9C,MACH,CACD,KAAK,cAAgBF,GAAaE,EAAY9B,EAAU8B,EAAY,GAChEjB,IACAnB,EAAQ,UAAY,QACpBA,EAAQ,UAAU,EAAG,EAAGc,EAAO,MAAOA,EAAO,MAAM,GAEnD,KAAK,UAAU,QAAQR,CAAO,EAC9B,KAAK,MAAQ,sBAAsB,KAAK,MAAM,GAG1C6B,GACA,OAAOA,GAAuB,YAC9B,KAAK,UAAU,mBAAqB,GACpCA,EAAmB,KAAK,KAAM,IAAI,EAEtC,KAAK,SAAS,IAAM,GAEpC,EACQ,KAAK,MAAQ,IAAM,CACX,KAAK,WAAa,KAAK,UAAU,mBAAqB,IACtD,KAAK,UAAU,mBAAqB,EACpC,KAAK,UAAU,UAAY,GAC3B,KAAK,UAAU,mBAAqB,EAEpD,EACQ,KAAK,KAAO,IAAM,CACd,KAAK,QAAU,CAAE,IAAK,EAAK,EACvB,KAAK,QACL,qBAAqB,KAAK,KAAK,EAC/B,KAAK,MAAQ,OAE7B,EACQ,KAAK,OAASrB,EACd,MAAMe,EAAM,KAAK,OAAO,WAAW,IAAI,EACvC,GAAI,CAACA,EACD,MAAM,IAAI,MAAM,8BAA8B,EAElD,KAAK,QAAUA,EACf,KAAK,UAAY,IAAIhB,GAAkB,KAAK,OAAQ,IAAM,KAAK,OAAO,EACtE,KAAK,QAAUhrB,EACf,KAAK,OAAM,CACd,CACD,IAAI,SAAU,CACV,OAAO,KAAK,QACf,CACD,IAAI,QAAQA,EAAM,SACd,MAAMwsB,GAAe/wB,EAAA,KAAK,WAAL,YAAAA,EAAe,IAC9BgxB,GAAmB1jB,EAAA,KAAK,WAAL,YAAAA,EAAe,QACxC,KAAK,uBAAuB/I,CAAI,EAC5B,KAAK,YACL,OAAO,OAAO,KAAK,UAAW,KAAK,QAAQ,cAAc,EACrD,OAAOA,EAAK,SAAY,WACxBA,EAAK,SACLysB,IAAqB,KACrB,KAAK,UAAU,mBAAqB,KAAK,UAAU,UAAU,SAGjE,OAAOzsB,EAAK,KAAQ,WAAaA,EAAK,KAAOwsB,IAAiB,IAC9D,KAAK,OAAM,CAElB,CACL,CAEA,MAAMxE,GAAM0E,EAAM,YAClB,MAAMC,WAA8BD,EAAM,SAAU,CAChD,YAAYztB,EAAO,CACf,MAAMA,CAAK,EACX,KAAK,OAASytB,EAAM,YACpB,KAAK,OAASztB,EAAM,WAAa+oB,EACpC,CACD,mBAAoB,CAChB,GAAI,KAAK,OAAO,QAAS,CACrB,MAAMhoB,EAAO4sB,GAAmB,KAAK,KAAK,EAAE,CAAC,EAC7C,KAAK,SAAW,IAAIT,GAAS,KAAK,OAAO,QAASnsB,CAAI,CACzD,CACJ,CACD,oBAAqB,CACjB,MAAM6sB,EAAkBD,GAAmB,KAAK,KAAK,EAAE,CAAC,EACpD,KAAK,WACL,KAAK,SAAS,QAAUC,EAE/B,CACD,sBAAuB,CACf,KAAK,UACL,KAAK,SAAS,OAElB,KAAK,SAAW,MACnB,CACD,QAAS,CACL,KAAM,CAACA,EAAiBC,CAAW,EAAIF,GAAmB,KAAK,KAAK,EAC9DG,EAAe,CACjB,OAAQ,EACR,SAAU,WACV,cAAe,OACf,IAAK,EACL,KAAM,EACN,OAAQ,EACR,MAAO,EACP,GAAGD,EAAY,KAC3B,EACQ,OAAQ7E,MAAI,SAAU,CAAE,MAAO4E,EAAgB,MAAO,OAAQA,EAAgB,OAAQ,IAAK,KAAK,OAAQ,GAAGC,EAAa,MAAOC,CAAY,CAAE,CAChJ,CACL,CACAJ,GAAsB,aAAe,CACjC,GAAGV,EACP,EACAU,GAAsB,YAAc,gBACpC,SAASC,GAAmB3tB,EAAO,CAC/B,MAAM4tB,EAAkB,GAClBG,EAAO,GACPC,EAAO,GACPC,EAAqB,CACvB,GAAG,OAAO,KAAKjB,EAAgB,EAC/B,iBACA,YACA,qBACA,WACR,EACUkB,EAAW,CAAC,WAAW,EAC7B,UAAWxqB,KAAQ1D,EAAO,CACtB,MAAMkC,EAAMlC,EAAM0D,CAAI,EAClBuqB,EAAmB,SAASvqB,CAAI,EAChCkqB,EAAgBlqB,CAAI,EAAIxB,EAEnBgsB,EAAS,SAASxqB,CAAI,EAC3BwqB,EAASxqB,CAAI,EAAIxB,EAGjB8rB,EAAKtqB,CAAI,EAAIxB,CAEpB,CACD,MAAO,CAAC0rB,EAAiBI,EAAMD,CAAI,CACvC,CACA,MAAMI,GAAgBV,EAAM,WAAW,CAACztB,EAAO+oB,IAAQC,MAAI0E,GAAuB,CAAE,UAAW3E,EAAK,GAAG/oB,CAAO,EAAC,ECxXlGouB,GAAgB,IAAkB,CAC7C,KAAM,CAACC,EAAYC,CAAa,EAAIC,WAAqB,CACvD,MAAO,OAAO,OAAW,IAAc,OAAO,WAAa,EAC3D,OAAQ,OAAO,OAAW,IAAc,OAAO,YAAc,EAC9D,EAEDC,mBAAU,IAAM,CAEd,MAAMC,EAAe,IAAM,CACXH,EAAA,CACZ,MAAO,OAAO,WACd,OAAQ,OAAO,YAChB,GAII,+BAAiB,SAAUG,CAAY,EAGjCA,IAGN,IAAM,OAAO,oBAAoB,SAAUA,CAAY,CAChE,EAAG,CAAE,GAEEJ,CACT,ECnBaK,GAA0C,CAAC,CACtD,QAAAC,EACA,SAAAC,EAAW,IACX,QAAAz2B,EACA,WAAA02B,CACF,IAAM,CACJ,KAAM,CAACC,EAAUC,CAAW,EAAIR,WAAS,EAAK,EACxC,CAAE,MAAAS,EAAO,OAAAC,CAAO,EAAIb,GAAc,EAGlCc,EAAgBF,GAAS,OAAO,YAAc,SAAS,gBAAgB,aAAe,IACtFG,EAAiBF,GAAU,OAAO,aAAe,SAAS,gBAAgB,cAAgB,IAiB5F,OAfJT,YAAU,IAAM,CACd,GAAIG,EAAS,CACH,YAAI,sCAAuCx2B,CAAO,EAC1D42B,EAAY,EAAI,EAGV,MAAAK,EAAQ,WAAW,IAAM,CAC7BL,EAAY,EAAK,EACbF,GAAuBA,KAC1BD,CAAQ,EAEJ,UAAM,aAAaQ,CAAK,CACjC,GACC,CAACT,EAASC,EAAUz2B,EAAS02B,CAAU,CAAC,EAEtCC,EAGH9E,EAAA,KAAC,MAAI,WAAU,6CACb,UAAAhB,EAAA,IAACkE,GAAA,CACC,MAAOgC,EACP,OAAQC,EACR,QAAS,GACT,eAAgB,IAChB,QAAS,GACT,cAAe,IACjB,EAECh3B,GACE6wB,EAAA,WAAI,UAAU,0IACb,eAAC,IAAE,WAAU,mCAAoC,SAAA7wB,CAAA,CAAQ,CAC3D,EAEJ,IAlBoB,IAoBxB,EC3DY,IAAAk3B,QACVA,EAAA,kBAAoB,oBACpBA,EAAA,sBAAwB,wBACxBA,EAAA,sBAAwB,wBACxBA,EAAA,iBAAmB,mBACnBA,EAAA,uBAAyB,yBACzBA,EAAA,wBAA0B,0BAC1BA,EAAA,uBAAyB,yBAPfA,QAAA,IAoBZ,MAAMC,GAAkC,CACtC,CACE,GAAI,oBACJ,MAAO,+BACP,YAAa,+CACb,mBAAoB,gEACtB,EACA,CACE,GAAI,wBACJ,MAAO,uBACP,YAAa,mDACb,mBAAoB,4DACtB,EACA,CACE,GAAI,wBACJ,MAAO,8BACP,YAAa,4CACb,mBAAoB,kEACtB,EACA,CACE,GAAI,mBACJ,MAAO,qBACP,YAAa,kDACb,mBAAoB,kDACtB,EACA,CACE,GAAI,yBACJ,MAAO,wBACP,YAAa,wDACb,mBAAoB,sEACtB,EACA,CACE,GAAI,0BACJ,MAAO,uBACP,YAAa,6CACb,mBAAoB,iDACtB,EACA,CACE,GAAI,yBACJ,MAAO,iBACP,YAAa,6CACb,mBAAoB,oFACtB,CACF,EAiCaC,GAAyBC,GAA4C,CAC5E,IACI,MAAAC,EAA0B,aAAa,QAAQ,sBAAsB,EACvE,OAACA,EAGE,CAAC,CADqB,KAAK,MAAMA,CAAuB,EACjCD,CAAa,EAHN,SAI9Bx3B,EAAO,CACN,qBAAM,qCAAsCA,CAAK,EAClD,EACT,CACF,EAMa03B,GAAqBF,GAA4C,CACxE,IACM,YAAI,2DAA2DA,CAAa,EAAE,EAGhF,MAAAG,EAAoBJ,GAAsBC,CAAa,EAG7D,GAFQ,YAAI,6CAA6CG,CAAiB,EAAE,EAExEA,EACF,eAAQ,IAAI,oEAAoE,EACzE,GAIH,MAAAF,EAA0B,aAAa,QAAQ,sBAAsB,EAC3E,QAAQ,IAAI,+EAA+EA,GAA2B,OAAO,EAAE,EAE/H,IAAIG,EAAuB,GAE3B,GAAIH,EACE,IACqBG,EAAA,KAAK,MAAMH,CAAuB,EACjD,YAAI,gDAAiDG,CAAoB,QAC1E53B,EAAO,CACN,cAAM,wEAAyEA,CAAK,EAC5F43B,EAAuB,EACzB,CAIF,MAAMC,EAAa,IAAI,KAAK,EAAE,YAAY,EAC1CD,EAAqBJ,CAAa,EAAIK,EACtC,aAAa,QAAQ,uBAAwB,KAAK,UAAUD,CAAoB,CAAC,EACjF,QAAQ,IAAI,8BAA8BJ,CAAa,eAAeK,CAAU,EAAE,EAG9E,IAEF,QAAQ,IAAI,uFAAuF,EACnG,WAAW,IAAM,CAET,MAAA13B,EAAU23B,GAAiCN,CAAa,EAG9D,GAFQ,YAAI,0CAA0Cr3B,CAAO,EAAE,EAE3DA,EAAS,CACH,YAAI,4EAA4Eq3B,CAAa,EAAE,EAEjG,MAAA/1B,EAAQ,IAAI,YAAY,kBAAmB,CAC/C,OAAQ,CAAE,KAAM+1B,EAAe,QAAAr3B,CAAQ,EACxC,EACD,OAAO,cAAcsB,CAAK,EAC1B,QAAQ,IAAI,uDAAuD,OAE3D,cAAM,sEAAsE+1B,CAAa,EAAE,GAEpG,GAAG,QACCx3B,EAAO,CACN,cAAM,gEAAkEA,CAAK,CACvF,CAEO,eACAA,EAAO,CACN,qBAAM,wDAAyDA,CAAK,EACrE,EACT,CACF,EAKa83B,GAAoCN,GAAkD,CACjG,MAAMO,EAAcT,GAAiB,KAAUhxB,KAAE,KAAOkxB,CAAa,EAC9D,OAAAO,EAAcA,EAAY,mBAAqB,IACxD,ECjMwC,IAACC,GAAE,CAAC,QAAQ,MAAM,EAAEC,GAAE,+BAA4DC,GAAEC,EAAe,cAAC,MAAM,EAAEC,GAAE,CAAC,SAAS,GAAG,GAAG,OAAO,CAAE,GAAEC,GAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAEC,aAAaJ,EAAC,IAAI,KAAK,EAAEE,EAAC,EAAiiDG,OAAO,CAAC,CAAC,YAAY,EAAE,WAAWjyB,EAAE,UAAU,EAAE,aAAakyB,EAAE,kBAAkB94B,EAAE,aAAasC,EAAE,MAAM,EAAE,MAAMqxB,EAAE,MAAMoF,CAAC,IAAI,CAAC,IAAI/xB,EAAE1E,IAAI,SAAS02B,EAAE,IAAI,QAAQ,gDAAgD,YAAYrF,EAAE,IAAI7wB,GAAG,IAAIA,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,GAAG,IAAI,qCAAqC,CAAC,sBAAsBT,EAAErC,EAAGs4B,GAAE,SAASh2B,CAAC,GAAEA,EAAQ,0DAA0DA,CAAC,IAAI,mDAAmD,GAAGowB,EAAE,CAACuG,EAAEn2B,EAAE,GAAGo2B,EAAE,KAAK,CAAC,IAAI/T,EAAE,EAAE,EAAE8T,CAAC,EAAEA,EAAE72B,EAAEU,EAAEm2B,EAAE,QAAQ,IAAI9T,CAAC,IAAIgU,EAAE,GAAG,OAAOn5B,GAAGk5B,GAAG,CAACp2B,GAAGw1B,GAAE,SAASW,CAAC,IAAIE,GAAG,0BAA0BF,CAAC,MAAM,IAAI,QAAQn2B,GAAGqiB,EAAEgU,GAAG,SAAS/2B,CAAC,IAAI+2B,GAAG,OAAOhU,IAAIgU,GAAG,UAAU/2B,CAAC,KAAK+2B,CAAC,EAAEC,EAAE,EAAE,eAAeJ,CAAC,GAAGtG,EAAE,CAAC,CAAC,MAAMoG,EAAE,mBAAmBE,CAAC,+BAA+BpyB,CAAC,4BAA4BI,CAAC,aAAauxB,EAAC,uDAAuD7F,EAAE,MAAM,CAAC,SAASA,EAAE,OAAO,CAAC,gBAAgB,EAAE,SAAS,KAAK,UAAU,CAAC,CAAC,IAAI,EAAE,GAAGA,EAAE,EAAE,OAAO,IAAI,EAAE,CAAC,IAAI1rB,EAAE,GAAG,QAAQ0rB,EAAEpwB,EAAE,GAAG,EAAE,EAAE,GAAG,GAAGD,CAAC,iBAAiB,mBAAmB22B,CAAC,+BAA+BpyB,CAAC,YAAY,EAAE,SAAS,KAAK,UAAU,CAAC,CAAC,IAAI,EAAE,GAAG8rB,EAAE,EAAE,OAAO,IAAI,EAAE,CAAC,SAASA,EAAEpwB,EAAE,GAAG,EAAE,CAAC,KAAKD,CAAC,kBAAkB,OAAOg3B,gBAAgB,SAAS,CAAC,MAAMN,EAAE,wBAAwB,CAAC,OAAOK,CAAC,CAAC,CAAC,CAAC,CAAC,ECAn4F,IAAIE,GAAG3G,GAAG,CAAC,OAAOA,EAAG,KAAI,UAAU,OAAO4G,GAAG,IAAI,OAAO,OAAOC,GAAG,IAAI,UAAU,OAAOC,GAAG,IAAI,QAAQ,OAAOC,GAAG,QAAQ,OAAO,IAAI,CAAC,EAAEC,GAAG,MAAM,EAAE,EAAE,KAAK,CAAC,EAAEC,GAAG,CAAC,CAAC,QAAQjH,CAAC,IAAI4F,EAAE,cAAc,MAAM,CAAC,UAAU,yBAAyB,eAAe5F,CAAC,EAAE4F,EAAE,cAAc,MAAM,CAAC,UAAU,gBAAgB,EAAEoB,GAAG,IAAI,CAACtU,EAAEd,IAAIgU,EAAE,cAAc,MAAM,CAAC,UAAU,qBAAqB,IAAI,eAAehU,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEgV,GAAGhB,EAAE,cAAc,MAAM,CAAC,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAAe,OAAO,KAAK,MAAM,IAAI,EAAEA,EAAE,cAAc,OAAO,CAAC,SAAS,UAAU,EAAE,yJAAyJ,SAAS,SAAS,CAAC,CAAC,EAAEkB,GAAGlB,EAAE,cAAc,MAAM,CAAC,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAAe,OAAO,KAAK,MAAM,IAAI,EAAEA,EAAE,cAAc,OAAO,CAAC,SAAS,UAAU,EAAE,4OAA4O,SAAS,SAAS,CAAC,CAAC,EAAEiB,GAAGjB,EAAE,cAAc,MAAM,CAAC,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAAe,OAAO,KAAK,MAAM,IAAI,EAAEA,EAAE,cAAc,OAAO,CAAC,SAAS,UAAU,EAAE,0OAA0O,SAAS,SAAS,CAAC,CAAC,EAAEmB,GAAGnB,EAAE,cAAc,MAAM,CAAC,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAAe,OAAO,KAAK,MAAM,IAAI,EAAEA,EAAE,cAAc,OAAO,CAAC,SAAS,UAAU,EAAE,sIAAsI,SAAS,SAAS,CAAC,CAAC,EAA4BsB,GAAG,IAAI,CAAC,GAAG,CAAClH,EAAEtN,CAAC,EAAEyU,EAAG,SAAS,SAAS,MAAM,EAAE,OAAOA,EAAG,UAAU,IAAI,CAAC,IAAIvV,EAAE,IAAI,CAACc,EAAE,SAAS,MAAM,CAAC,EAAE,OAAO,SAAS,iBAAiB,mBAAmBd,CAAC,EAAE,IAAI,OAAO,oBAAoB,mBAAmBA,CAAC,CAAC,EAAE,EAAE,EAAEoO,CAAC,EAAMoH,GAAG,EAAEC,GAAG,KAAK,CAAC,aAAa,CAAC,KAAK,UAAU3U,IAAI,KAAK,YAAY,KAAKA,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,YAAY,QAAQA,CAAC,EAAE,KAAK,YAAY,OAAO,EAAE,CAAC,CAAC,GAAG,KAAK,QAAQA,GAAG,CAAC,KAAK,YAAY,QAAQ,GAAG,EAAEA,CAAC,CAAC,CAAC,EAAE,KAAK,SAASA,GAAG,CAAC,KAAK,QAAQA,CAAC,EAAE,KAAK,OAAO,CAAC,GAAG,KAAK,OAAOA,CAAC,CAAC,EAAE,KAAK,OAAOA,GAAG,CAAC,IAAIxe,EAAE,GAAG,CAAC,QAAQ0d,EAAE,GAAGa,CAAC,EAAEC,EAAE0T,EAAE,OAAO1T,GAAG,KAAK,OAAOA,EAAE,KAAK,YAAYxe,EAAEwe,EAAE,KAAK,KAAK,OAAOxe,EAAE,QAAQ,EAAEwe,EAAE,GAAG0U,KAAKj3B,EAAE,KAAK,OAAO,KAAK4vB,GAAGA,EAAE,KAAKqG,CAAC,EAAED,EAAEzT,EAAE,cAAc,OAAO,GAAGA,EAAE,YAAY,OAAOviB,EAAE,KAAK,OAAO,KAAK,OAAO,IAAI4vB,GAAGA,EAAE,KAAKqG,GAAG,KAAK,QAAQ,CAAC,GAAGrG,EAAE,GAAGrN,EAAE,GAAG0T,EAAE,MAAMxU,CAAC,CAAC,EAAE,CAAC,GAAGmO,EAAE,GAAGrN,EAAE,GAAG0T,EAAE,YAAYD,EAAE,MAAMvU,CAAC,GAAGmO,CAAC,EAAE,KAAK,SAAS,CAAC,MAAMnO,EAAE,GAAGa,EAAE,YAAY0T,EAAE,GAAGC,CAAC,CAAC,EAAEA,CAAC,EAAE,KAAK,QAAQ1T,IAAIA,GAAG,KAAK,OAAO,QAAQ,GAAG,CAAC,KAAK,YAAY,QAAQ,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,YAAY,QAAQ,GAAG,EAAE,CAAC,GAAGA,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAEA,GAAG,KAAK,QAAQ,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,QAAQA,CAAC,CAAC,EAAE,KAAK,MAAM,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,QAAQA,EAAE,KAAK,OAAO,CAAC,EAAE,KAAK,QAAQ,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,UAAU,QAAQA,CAAC,CAAC,EAAE,KAAK,KAAK,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,OAAO,QAAQA,CAAC,CAAC,EAAE,KAAK,QAAQ,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,UAAU,QAAQA,CAAC,CAAC,EAAE,KAAK,QAAQ,CAACA,EAAE,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,UAAU,QAAQA,CAAC,CAAC,EAAE,KAAK,QAAQ,CAACA,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,OAAO,IAAI,EAAE,EAAE,UAAU,SAAS,EAAE,KAAK,OAAO,CAAC,GAAG,EAAE,QAAQA,EAAE,KAAK,UAAU,QAAQ,EAAE,QAAQ,YAAY,OAAO,EAAE,aAAa,WAAW,EAAE,YAAY,MAAM,CAAC,GAAG,IAAI0T,EAAE1T,aAAa,QAAQA,EAAEA,EAAC,EAAGviB,EAAE,IAAI,OAAO,OAAOi2B,EAAE,KAAK,MAAMD,GAAG,CAAC,GAAGmB,GAAGnB,CAAC,GAAG,CAACA,EAAE,GAAG,CAACh2B,EAAE,GAAG,IAAI+D,EAAE,OAAO,EAAE,OAAO,WAAW,MAAM,EAAE,MAAM,uBAAuBiyB,EAAE,MAAM,EAAE,EAAE,EAAE,MAAMpG,EAAE,OAAO,EAAE,aAAa,WAAW,MAAM,EAAE,YAAY,uBAAuBoG,EAAE,MAAM,EAAE,EAAE,EAAE,YAAY,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,QAAQ,QAAQjyB,EAAE,YAAY6rB,CAAC,CAAC,CAAC,SAAS,EAAE,UAAU,OAAO,CAAC5vB,EAAE,GAAG,IAAI+D,EAAE,OAAO,EAAE,SAAS,WAAW,MAAM,EAAE,QAAQiyB,CAAC,EAAE,EAAE,QAAQpG,EAAE,OAAO,EAAE,aAAa,WAAW,MAAM,EAAE,YAAYoG,CAAC,EAAE,EAAE,YAAY,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,UAAU,QAAQjyB,EAAE,YAAY6rB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,MAAMoG,GAAG,CAAC,GAAG,EAAE,QAAQ,OAAO,CAACh2B,EAAE,GAAG,IAAI+D,EAAE,OAAO,EAAE,OAAO,WAAW,MAAM,EAAE,MAAMiyB,CAAC,EAAE,EAAE,MAAMpG,EAAE,OAAO,EAAE,aAAa,WAAW,MAAM,EAAE,YAAYoG,CAAC,EAAE,EAAE,YAAY,KAAK,OAAO,CAAC,GAAG,EAAE,KAAK,QAAQ,QAAQjyB,EAAE,YAAY6rB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,IAAI,CAAC,IAAIoG,EAAEh2B,IAAI,KAAK,QAAQ,CAAC,EAAE,EAAE,SAASg2B,EAAE,EAAE,UAAU,MAAMA,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,OAAO,CAACzT,EAAE,IAAI,CAAC,IAAI,GAAG,GAAG,KAAK,OAAO,EAAE,KAAK0U,KAAK,OAAO,KAAK,OAAO,CAAC,IAAI1U,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,YAAY,GAAG,KAAK,OAAO,CAAE,EAAC,EAAEuN,GAAE,IAAIoH,GAAGE,GAAG,CAACvH,EAAEtN,IAAI,CAAC,IAAId,GAAGc,GAAG,KAAK,OAAOA,EAAE,KAAK0U,KAAK,OAAOnH,GAAE,SAAS,CAAC,MAAMD,EAAE,GAAGtN,EAAE,GAAGd,CAAC,CAAC,EAAEA,CAAC,EAAE0V,GAAGtH,GAAGA,GAAG,OAAOA,GAAG,UAAU,OAAOA,GAAG,OAAOA,EAAE,IAAI,WAAW,WAAWA,GAAG,OAAOA,EAAE,QAAQ,SAASwH,GAAGD,GAAGE,GAAG,IAAIxH,GAAE,OAAU,OAAO,OAAOuH,GAAG,CAAC,QAAQvH,GAAE,QAAQ,KAAKA,GAAE,KAAK,QAAQA,GAAE,QAAQ,MAAMA,GAAE,MAAM,OAAOA,GAAE,OAAO,QAAQA,GAAE,QAAQ,QAAQA,GAAE,QAAQ,QAAQA,GAAE,QAAQ,QAAQA,GAAE,OAAO,EAAE,CAAC,WAAWwH,EAAE,CAAC,EAAE,SAASC,GAAG1H,EAAE,CAAC,SAAStN,CAAC,EAAE,CAAE,EAAC,CAAC,GAAO,OAAO,SAAU,IAAY,OAAO,IAAId,EAAE,SAAS,MAAM,SAAS,qBAAqB,MAAM,EAAE,CAAC,EAAEa,EAAE,SAAS,cAAc,OAAO,EAAEA,EAAE,KAAK,WAAWC,IAAI,OAAOd,EAAE,WAAWA,EAAE,aAAaa,EAAEb,EAAE,UAAU,EAAEA,EAAE,YAAYa,CAAC,EAAEA,EAAE,WAAWA,EAAE,WAAW,QAAQuN,EAAEvN,EAAE,YAAY,SAAS,eAAeuN,CAAC,CAAC,CAAC,CAAC0H,GAAG;AAAA,CACxwK,EAAE,SAASC,GAAE3H,EAAE,CAAC,OAAOA,EAAE,QAAQ,MAAM,CAAC,IAAI4H,GAAG,EAAEC,GAAG,OAAOC,GAAG,IAAIC,GAAG,IAAIC,GAAG,GAAGC,GAAG,GAAGC,GAAG,IAAI,SAASC,MAAMnI,EAAE,CAAC,OAAOA,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAAC,CAAC,IAAIoI,GAAGpI,GAAG,CAAC,IAAIqI,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAG,GAAG,CAAC,OAAOpW,EAAE,MAAMd,EAAE,SAASa,EAAE,YAAY2T,EAAE,WAAWj2B,EAAE,cAAcg2B,EAAE,QAAQjyB,EAAE,MAAM6rB,EAAE,OAAOgJ,EAAE,SAASvC,EAAE,YAAYwC,EAAE,kBAAkBC,EAAE,YAAYv5B,EAAE,MAAMw5B,EAAE,kBAAkBC,EAAE,kBAAkBC,EAAE,UAAUC,EAAG,GAAG,qBAAqBC,EAAG,GAAG,SAASlK,EAAE,SAASmK,EAAG,IAAIlD,EAAE,YAAYL,EAAE,gBAAgBwD,GAAE,WAAWjX,EAAE,MAAMkX,EAAE,qBAAqBC,EAAG,cAAc,sBAAsBr1B,EAAE,GAAGs1B,EAAC,EAAE3J,EAAE,CAAC4J,EAAEC,EAAE,EAAE17B,EAAE,SAAS,EAAE,EAAE,CAAC43B,GAAE+D,CAAC,EAAE37B,EAAE,SAAS,EAAE,EAAE,CAAC47B,GAAGC,EAAC,EAAE77B,EAAE,SAAS,EAAE,EAAE,CAAC87B,GAAEC,EAAE,EAAE/7B,EAAE,SAAS,EAAE,EAAE,CAACwB,GAAEtC,EAAC,EAAEc,EAAE,SAAS,CAAC,EAAE,CAAC6yB,GAAEyF,EAAC,EAAEt4B,EAAE,SAAS,CAAC,EAAEg8B,GAAEh8B,EAAE,OAAO,IAAI,EAAEm4B,GAAEn4B,EAAE,OAAO,IAAI,EAAE2F,GAAEisB,IAAI,EAAEqK,EAAErK,EAAE,GAAGoG,EAAEpF,EAAEnP,EAAE,KAAK+T,EAAE/T,EAAE,cAAc,GAAGyY,EAAGzY,EAAE,WAAW,GAAG0Y,EAAG1Y,EAAE,sBAAsB,GAAG,EAAEzjB,EAAE,QAAQ,IAAI+F,EAAE,UAAUD,IAAGA,GAAE,UAAU2d,EAAE,EAAE,GAAG,EAAE,CAAC1d,EAAE0d,EAAE,EAAE,CAAC,EAAE2Y,GAAGp8B,EAAE,QAAQ,IAAI,CAAC,IAAI8F,GAAE,OAAOA,GAAE2d,EAAE,cAAc,KAAK3d,GAAEvE,CAAC,EAAE,CAACkiB,EAAE,YAAYliB,CAAC,CAAC,EAAE86B,GAAGr8B,EAAE,QAAQ,IAAIyjB,EAAE,UAAUwN,GAAG0I,GAAG,CAAClW,EAAE,SAASwN,CAAC,CAAC,EAAEqL,EAAGt8B,EAAE,OAAO,CAAC,EAAEu8B,EAAEv8B,EAAE,OAAO,CAAC,EAAEw8B,GAAGx8B,EAAE,OAAO,CAAC,EAAEy8B,GAAEz8B,EAAE,OAAO,IAAI,EAAE,CAAC08B,GAAGC,EAAE,EAAEvB,EAAG,MAAM,GAAG,EAAEwB,GAAG58B,EAAE,QAAQ,IAAI+F,EAAE,OAAO,CAACD,GAAEue,GAAE/iB,KAAIA,IAAG,EAAEwE,GAAEA,GAAEue,GAAE,OAAO,CAAC,EAAE,CAACte,EAAE,CAAC,CAAC,EAAE82B,GAAG9D,GAAI,EAAC+D,GAAGrZ,EAAE,QAAQc,EAAEwY,GAAGnK,IAAI,UAAU2J,EAAE,QAAQv8B,EAAE,QAAQ,IAAI,EAAEk4B,EAAE0E,GAAG,CAAC,EAAEA,EAAE,CAAC,EAAE58B,EAAE,UAAU,IAAI,CAAC07B,GAAG,EAAE,CAAC,EAAE,CAAE,GAAE17B,EAAE,gBAAgB,IAAI,CAAC,GAAG,CAACy7B,EAAE,OAAO,IAAI31B,GAAEqyB,GAAE,QAAQ9T,GAAEve,GAAE,MAAM,OAAOA,GAAE,MAAM,OAAO,OAAO,IAAIxE,GAAEwE,GAAE,sBAAqB,EAAG,OAAOA,GAAE,MAAM,OAAOue,GAAEiU,GAAEh3B,EAAC,EAAEU,EAAEg7B,IAAGA,GAAE,KAAK5E,IAAGA,GAAE,UAAU3U,EAAE,EAAE,EAAEuZ,GAAE,IAAI5E,IAAGA,GAAE,UAAU3U,EAAE,GAAG,CAAC,GAAG2U,GAAE,OAAO92B,EAAC,EAAE82B,EAAC,EAAE,CAAC,CAAC,QAAQ3U,EAAE,GAAG,OAAOniB,GAAE,SAASmiB,EAAE,QAAQ,EAAE,GAAGuZ,EAAC,CAAC,CAAC,EAAE,CAACvB,EAAEhY,EAAE,MAAMA,EAAE,YAAYzhB,EAAEyhB,EAAE,EAAE,CAAC,EAAE,IAAIiU,GAAE13B,EAAE,YAAY,IAAI,CAAC27B,EAAE,EAAE,EAAEz8B,GAAEq9B,EAAE,OAAO,EAAEv6B,EAAE8D,IAAGA,GAAE,OAAOue,IAAGA,GAAE,UAAUZ,EAAE,EAAE,CAAC,EAAE,WAAW,IAAI,CAACoX,EAAEpX,CAAC,CAAC,EAAEsW,EAAE,CAAC,EAAE,CAACtW,EAAEoX,EAAE74B,EAAEu6B,CAAC,CAAC,EAAEv8B,EAAE,UAAU,IAAI,CAAC,GAAGyjB,EAAE,SAASmP,IAAI,WAAWnP,EAAE,WAAW,KAAKA,EAAE,OAAO,UAAU,OAAO,IAAI3d,GAAEue,GAAEgY,GAAG,OAAOhE,GAAGJ,GAAG/xB,GAAG22B,IAAI,IAAI,CAAC,GAAGL,GAAG,QAAQF,EAAG,QAAQ,CAAC,IAAIW,GAAE,IAAI,KAAM,EAAC,QAAO,EAAGX,EAAG,QAAQjY,GAAEA,GAAE4Y,EAAC,CAACT,GAAG,QAAQ,IAAI,KAAI,EAAG,QAAS,IAAI,EAAOnY,KAAI,MAAMiY,EAAG,QAAQ,IAAI,KAAM,EAAC,QAAO,EAAGx2B,GAAE,WAAW,IAAI,CAAC,IAAIm3B,IAAGA,GAAExZ,EAAE,cAAc,MAAMwZ,GAAE,KAAKxZ,EAAEA,CAAC,EAAEiU,GAAC,CAAE,EAAErT,EAAC,GAAO,IAAI,aAAave,EAAC,CAAC,EAAE,CAACuyB,EAAEJ,EAAEoD,GAAE5X,EAAE4Y,GAAG3E,GAAEjU,EAAE,QAAQmP,EAAE1sB,EAAE22B,EAAE,CAAC,EAAE78B,EAAE,UAAU,IAAI,CAAC,IAAI8F,GAAEqyB,GAAE,QAAQ,GAAGryB,GAAE,CAAC,IAAIue,GAAEve,GAAE,sBAAuB,EAAC,OAAO,OAAOwyB,GAAEjU,EAAC,EAAEriB,EAAEV,IAAG,CAAC,CAAC,QAAQmiB,EAAE,GAAG,OAAOY,GAAE,SAASZ,EAAE,QAAQ,EAAE,GAAGniB,EAAC,CAAC,EAAE,IAAIU,EAAEV,IAAGA,GAAE,OAAO07B,IAAGA,GAAE,UAAUvZ,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAACzhB,EAAEyhB,EAAE,EAAE,CAAC,EAAEzjB,EAAE,UAAU,IAAI,CAACyjB,EAAE,QAAQiU,GAAG,GAAE,CAACA,GAAEjU,EAAE,MAAM,CAAC,EAAE,SAASyZ,IAAI,CAAC,OAAO5B,GAAG,MAAMA,EAAE,QAAQt7B,EAAE,cAAc,MAAM,CAAC,UAAU,gBAAgB,eAAe4yB,IAAI,SAAS,EAAE0I,EAAE,OAAO,EAAEzD,EAAE73B,EAAE,cAAc,MAAM,CAAC,UAAU,gBAAgB,eAAe4yB,IAAI,SAAS,EAAEiF,CAAC,EAAE73B,EAAE,cAAc84B,GAAG,CAAC,QAAQlG,IAAI,SAAS,CAAC,CAAC,CAAC,OAAO5yB,EAAE,cAAc,KAAK,CAAC,YAAYyjB,EAAE,UAAU,YAAY,SAAS,cAAc,OAAO,KAAK,SAAS,SAAS,EAAE,IAAI0U,GAAE,UAAUqD,GAAEN,EAAGgB,EAAG9X,GAAG,KAAK,OAAOA,EAAE,OAAO8V,EAAGzW,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAOyW,EAAG,MAAM9V,GAAG,KAAK,OAAOA,EAAE,QAAQA,GAAG,KAAK,OAAOA,EAAEwO,CAAC,GAAGuH,EAAG1W,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAO0W,EAAGvH,CAAC,CAAC,EAAE,oBAAoB,GAAG,oBAAoBwH,EAAG3W,EAAE,aAAa,KAAK2W,EAAGU,EAAE,cAAc,EAAErX,EAAE,KAAKA,EAAE,UAAUa,GAAG,eAAemX,EAAE,eAAe,CAAC,CAAChY,EAAE,QAAQ,eAAemU,GAAE,eAAeqE,EAAE,kBAAkBS,GAAG,kBAAkBC,GAAG,aAAa/K,EAAE,aAAajsB,GAAE,eAAei2B,GAAG,mBAAmBpE,EAAE,YAAY5E,EAAE,cAAckK,GAAG,iBAAiBhB,GAAE,gBAAgB,CAAC,EAAEzD,GAAGgD,IAAGI,GAAG,MAAM,CAAC,UAAU7J,EAAE,kBAAkBA,EAAE,YAAYgJ,EAAE,OAAOhJ,EAAE,WAAW,GAAGgG,GAAEp2B,GAAE+6B,EAAE,OAAO,KAAK,mBAAmBlB,GAAE,OAAO,GAAGxI,EAAC,KAAK,GAAGkI,EAAE,GAAGtX,EAAE,KAAK,EAAE,cAAc3d,IAAG,CAACi3B,IAAI,CAACvF,IAAIwE,GAAE,QAAQ,IAAI,KAAK98B,GAAEq9B,EAAE,OAAO,EAAEz2B,GAAE,OAAO,kBAAkBA,GAAE,SAAS,EAAEA,GAAE,OAAO,UAAU,WAAW+1B,GAAE,EAAE,EAAEY,GAAE,QAAQ,CAAC,EAAE32B,GAAE,QAAQ,EAAEA,GAAE,OAAO,GAAG,EAAE,YAAY,IAAI,CAAC,IAAIk3B,GAAEC,GAAE7E,GAAE+E,GAAG,GAAGrB,IAAG,CAACtE,EAAE,OAAOiF,GAAE,QAAQ,KAAK,IAAI32B,GAAE,SAASk3B,GAAE7E,GAAE,UAAU,KAAK,OAAO6E,GAAE,MAAM,iBAAiB,gBAAgB,EAAE,QAAQ,KAAK,EAAE,IAAI,CAAC,EAAE3Y,GAAE,IAAI,KAAI,EAAG,QAAS,IAAG4Y,GAAEjB,GAAE,UAAU,KAAK,OAAOiB,GAAE,QAAO,GAAI37B,GAAE,KAAK,IAAIwE,EAAC,EAAEue,GAAE,GAAG,KAAK,IAAIve,EAAC,GAAGg0B,IAAIx4B,GAAE,IAAI,CAACpC,GAAEq9B,EAAE,OAAO,GAAGnE,GAAE3U,EAAE,YAAY,MAAM2U,GAAE,KAAK3U,EAAEA,CAAC,EAAEiU,GAAC,EAAGqE,GAAG,EAAE,EAAE,MAAM,EAAEoB,GAAGhF,GAAE,UAAU,MAAMgF,GAAG,MAAM,YAAY,iBAAiB,KAAK,EAAEtB,GAAE,EAAE,CAAC,EAAE,cAAc/1B,IAAG,CAAC,IAAIs3B,GAAG,GAAG,CAACX,GAAE,SAAS,CAACjF,EAAE,OAAO,IAAInT,GAAEve,GAAE,QAAQ22B,GAAE,QAAQ,EAAEn7B,GAAEwE,GAAE,QAAQ22B,GAAE,QAAQ,EAAEQ,IAAGP,KAAK,MAAM,KAAK,IAAI,KAAK,KAAK,EAAErY,EAAC,EAAE+T,GAAEtyB,GAAE,cAAc,QAAQ,GAAG,EAAE,KAAK,IAAIm3B,EAAC,EAAE7E,IAAGgF,GAAGjF,GAAE,UAAU,MAAMiF,GAAG,MAAM,YAAY,iBAAiB,GAAG/Y,EAAC,IAAI,EAAE,KAAK,IAAI/iB,EAAC,EAAE82B,KAAIqE,GAAE,QAAQ,KAAK,CAAC,EAAEL,IAAI,CAAC3Y,EAAE,IAAIzjB,EAAE,cAAc,SAAS,CAAC,aAAau7B,EAAG,gBAAgBwB,GAAG,oBAAoB,GAAG,QAAQA,IAAI,CAACvF,EAAE,IAAI,GAAG,IAAI,CAAC,IAAI1xB,GAAE4xB,GAAG,GAAE5xB,GAAE2d,EAAE,YAAY,MAAM3d,GAAE,KAAK2d,EAAEA,CAAC,CAAC,EAAE,UAAU+X,GAAEpX,GAAG,KAAK,OAAOA,EAAE,aAAaiW,EAAG5W,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAO4W,EAAG,WAAW,CAAC,EAAEr6B,EAAE,cAAc,MAAM,CAAC,MAAM,6BAA6B,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,MAAM,cAAc,QAAQ,eAAe,OAAO,EAAEA,EAAE,cAAc,OAAO,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAEA,EAAE,cAAc,OAAO,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,EAAE,KAAKyjB,EAAE,KAAKzjB,EAAE,eAAeyjB,EAAE,KAAK,EAAEA,EAAE,KAAKA,EAAE,MAAMzjB,EAAE,cAAcA,EAAE,SAAS,KAAK4yB,GAAGnP,EAAE,MAAMA,EAAE,QAAQzjB,EAAE,cAAc,MAAM,CAAC,YAAY,GAAG,UAAUw7B,GAAEpX,GAAG,KAAK,OAAOA,EAAE,MAAMkW,EAAG7W,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAO6W,EAAG,IAAI,CAAC,EAAE7W,EAAE,SAASA,EAAE,OAAO,WAAW,CAACA,EAAE,KAAKA,EAAE,MAAMyZ,GAAI,EAAC,KAAKzZ,EAAE,OAAO,UAAUA,EAAE,OAAO6X,GAAG,KAAK,OAAOA,EAAE1I,CAAC,IAAI4F,GAAG5F,CAAC,EAAE,IAAI,EAAE,KAAK5yB,EAAE,cAAc,MAAM,CAAC,eAAe,GAAG,UAAUw7B,GAAEpX,GAAG,KAAK,OAAOA,EAAE,SAASmW,EAAG9W,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAO8W,EAAG,OAAO,CAAC,EAAEv6B,EAAE,cAAc,MAAM,CAAC,aAAa,GAAG,UAAUw7B,GAAEpX,GAAG,KAAK,OAAOA,EAAE,OAAOoW,EAAG/W,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAO+W,EAAG,KAAK,CAAC,EAAE/W,EAAE,KAAK,EAAEA,EAAE,YAAYzjB,EAAE,cAAc,MAAM,CAAC,mBAAmB,GAAG,UAAUw7B,GAAEL,EAAGgB,EAAG/X,GAAG,KAAK,OAAOA,EAAE,aAAaqW,EAAGhX,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAOgX,EAAG,WAAW,CAAC,EAAEhX,EAAE,WAAW,EAAE,IAAI,EAAEzjB,EAAE,eAAeyjB,EAAE,MAAM,EAAEA,EAAE,OAAOA,EAAE,QAAQ+V,GAAE/V,EAAE,MAAM,EAAEzjB,EAAE,cAAc,SAAS,CAAC,cAAc,GAAG,cAAc,GAAG,MAAMyjB,EAAE,mBAAmBuX,EAAE,QAAQl1B,IAAG,CAAC,IAAIue,GAAE/iB,GAAEk4B,GAAE/V,EAAE,MAAM,GAAG+T,KAAKl2B,IAAG+iB,GAAEZ,EAAE,QAAQ,UAAU,MAAMniB,GAAE,KAAK+iB,GAAEve,EAAC,EAAE4xB,GAAC,EAAG,EAAE,UAAU8D,GAAEpX,GAAG,KAAK,OAAOA,EAAE,cAAcsW,EAAGjX,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAOiX,EAAG,YAAY,CAAC,EAAEjX,EAAE,OAAO,KAAK,EAAE,KAAKzjB,EAAE,eAAeyjB,EAAE,MAAM,EAAEA,EAAE,OAAOA,EAAE,QAAQ+V,GAAE/V,EAAE,MAAM,EAAEzjB,EAAE,cAAc,SAAS,CAAC,cAAc,GAAG,cAAc,GAAG,MAAMyjB,EAAE,mBAAmBwX,EAAE,QAAQn1B,IAAG,CAAC,IAAIue,GAAE/iB,GAAEk4B,GAAE/V,EAAE,MAAM,IAAI3d,GAAE,oBAAoBxE,IAAG+iB,GAAEZ,EAAE,QAAQ,UAAU,MAAMniB,GAAE,KAAK+iB,GAAEve,EAAC,EAAE4xB,GAAC,GAAI,EAAE,UAAU8D,GAAEpX,GAAG,KAAK,OAAOA,EAAE,cAAcuW,EAAGlX,GAAG,KAAK,OAAOA,EAAE,aAAa,KAAK,OAAOkX,EAAG,YAAY,CAAC,EAAElX,EAAE,OAAO,KAAK,EAAE,IAAI,CAAC,CAAC,EAAE,SAAS4Z,IAAI,CAAC,GAAG,OAAO,OAAQ,KAAa,OAAO,SAAU,IAAY,MAAM,MAAM,IAAIxL,EAAE,SAAS,gBAAgB,aAAa,KAAK,EAAE,OAAOA,IAAI,QAAQ,CAACA,EAAE,OAAO,iBAAiB,SAAS,eAAe,EAAE,UAAUA,CAAC,CAA8Q,IAAIyL,GAAGzL,GAAG,CAAC,GAAG,CAAC,OAAOtN,EAAE,SAASd,EAAE,eAAe,OAAOa,EAAE,CAAC,SAAS,MAAM,EAAE,OAAO2T,EAAE,YAAYj2B,EAAE,UAAUg2B,EAAE,OAAOjyB,EAAE,MAAM6rB,EAAE,QAAQ,WAAWgJ,EAAE,SAASvC,EAAE,MAAMwC,EAAE,cAAcC,EAAErB,GAAG,aAAal4B,EAAE,IAAIw5B,EAAEsC,GAAI,EAAC,IAAIrC,EAAEnB,GAAG,YAAYoB,EAAE,MAAMC,EAAG,mBAAmBC,EAAG,gBAAgB,sBAAsBlK,EAAE,GAAGmK,EAAGpB,EAAE,EAAEnI,EAAE,CAACqG,EAAE,CAAC,EAAEl4B,EAAE,SAAS,CAAE,GAAEq7B,EAAEr7B,EAAE,QAAQ,IAAI,MAAM,KAAK,IAAI,IAAI,CAACyjB,CAAC,EAAE,OAAOyU,EAAE,OAAO12B,GAAGA,EAAE,QAAQ,EAAE,IAAIA,GAAGA,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC02B,EAAEzU,CAAC,CAAC,EAAE,CAACW,EAAEkX,CAAC,EAAEt7B,EAAE,SAAS,CAAE,GAAE,CAACu7B,EAAGr1B,CAAC,EAAElG,EAAE,SAAS,EAAE,EAAE,CAAC,EAAE,CAAC,EAAEA,EAAE,SAAS,EAAE,EAAE,CAAC07B,EAAG9D,CAAC,EAAE53B,EAAE,SAAS4xB,IAAI,SAASA,EAAE,OAAO,OAAQ,KAAa,OAAO,YAAY,OAAO,WAAW,8BAA8B,EAAE,QAAQ,OAAO,OAAO,EAAE+J,EAAE37B,EAAE,OAAO,IAAI,EAAE47B,GAAGtX,EAAE,KAAK,GAAG,EAAE,QAAQ,OAAO,EAAE,EAAE,QAAQ,SAAS,EAAE,EAAEuX,EAAE77B,EAAE,OAAO,IAAI,EAAE87B,EAAE97B,EAAE,OAAO,EAAE,EAAE+7B,EAAG/7B,EAAE,YAAYwB,GAAG,CAAC,IAAItC,IAAGA,GAAEg5B,EAAE,KAAKrF,GAAGA,EAAE,KAAKrxB,EAAE,EAAE,IAAI,MAAMtC,GAAE,QAAQ4yB,GAAE,QAAQtwB,EAAE,EAAE,EAAE,EAAEqxB,GAAGA,EAAE,OAAO,CAAC,CAAC,GAAGyF,EAAC,IAAIA,KAAI92B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC02B,CAAC,CAAC,EAAE,OAAOl4B,EAAE,UAAU,IAAI8xB,GAAE,UAAUtwB,GAAG,CAAC,GAAGA,EAAE,QAAQ,CAAC,EAAEtC,IAAGA,GAAE,IAAI2zB,GAAGA,EAAE,KAAKrxB,EAAE,GAAG,CAAC,GAAGqxB,EAAE,OAAO,EAAE,EAAEA,CAAC,CAAC,EAAE,MAAM,CAAC,WAAW,IAAI,CAAC0K,GAAG,UAAU,IAAI,CAAC,EAAEr+B,IAAG,CAAC,IAAI2zB,EAAE3zB,GAAE,UAAUo5B,IAAGA,GAAE,KAAK92B,EAAE,EAAE,EAAE,OAAOqxB,IAAI,GAAG,CAAC,GAAG3zB,GAAE,MAAM,EAAE2zB,CAAC,EAAE,CAAC,GAAG3zB,GAAE2zB,CAAC,EAAE,GAAGrxB,CAAC,EAAE,GAAGtC,GAAE,MAAM2zB,EAAE,CAAC,CAAC,EAAE,CAACrxB,EAAE,GAAGtC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAE,GAAEc,EAAE,UAAU,IAAI,CAAC,GAAG4xB,IAAI,SAAS,CAACgG,EAAEhG,CAAC,EAAE,MAAM,CAACA,IAAI,WAAW,OAAO,YAAY,OAAO,WAAW,8BAA8B,EAAE,QAAQgG,EAAE,MAAM,EAAEA,EAAE,OAAO,GAAG,OAAO,OAAQ,KAAa,OAAO,WAAW,8BAA8B,EAAE,iBAAiB,SAAS,CAAC,CAAC,QAAQp2B,CAAC,IAAI,CAACo2B,EAAEp2B,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,EAAE,CAACowB,CAAC,CAAC,EAAE5xB,EAAE,UAAU,IAAI,CAACk4B,EAAE,QAAQ,GAAGhyB,EAAE,EAAE,CAAC,EAAE,CAACgyB,CAAC,CAAC,EAAEl4B,EAAE,UAAU,IAAI,CAAC,IAAIwB,EAAEtC,IAAG,CAAC,IAAIo5B,EAAE0D,GAAE1X,EAAE,MAAM6T,IAAGj5B,GAAEi5B,EAAC,GAAGj5B,GAAE,OAAOi5B,EAAC,IAAIjyB,EAAE,EAAE,GAAGoyB,EAAEqD,EAAE,UAAU,MAAMrD,EAAE,MAAK,GAAIp5B,GAAE,OAAO,WAAW,SAAS,gBAAgBy8B,EAAE,UAAUK,GAAEL,EAAE,UAAU,MAAMK,GAAE,SAAS,SAAS,aAAa,IAAI91B,EAAE,EAAE,CAAC,EAAE,OAAO,SAAS,iBAAiB,UAAU1E,CAAC,EAAE,IAAI,SAAS,oBAAoB,UAAUA,CAAC,CAAC,EAAE,CAAC8iB,CAAC,CAAC,EAAEtkB,EAAE,UAAU,IAAI,CAAC,GAAG27B,EAAE,QAAQ,MAAM,IAAI,CAACE,EAAE,UAAUA,EAAE,QAAQ,MAAM,CAAC,cAAc,EAAE,CAAC,EAAEA,EAAE,QAAQ,KAAKC,EAAE,QAAQ,GAAG,CAAC,EAAE,CAACH,EAAE,OAAO,CAAC,EAAEzD,EAAE,OAAOl4B,EAAE,cAAc,UAAU,CAAC,aAAa,GAAGm7B,CAAE,IAAIS,EAAE,GAAG,SAAS,EAAE,EAAEP,EAAE,IAAI,CAAC75B,EAAEtC,KAAI,CAAC,IAAI88B,EAAE,GAAG,CAACnJ,GAAEyF,EAAC,EAAE92B,EAAE,MAAM,GAAG,EAAE,OAAOxB,EAAE,cAAc,KAAK,CAAC,IAAIwB,EAAE,IAAIu5B,IAAI,OAAOsC,GAAE,EAAGtC,EAAE,SAAS,GAAG,IAAIY,EAAE,UAAU3D,EAAE,sBAAsB,GAAG,aAAa0D,EAAG,kBAAkB7I,GAAE,kBAAkByF,GAAE,MAAM,CAAC,uBAAuB,KAAK0D,EAAE5X,EAAE,CAAC,IAAI,KAAK,OAAO4X,EAAE,SAAS,CAAC,KAAK,WAAW,OAAOj2B,GAAG,SAAS,GAAGA,CAAC,KAAKA,GAAG2zB,GAAG,UAAU,GAAGE,EAAE,KAAK,QAAQ,GAAGoB,CAAC,KAAK,GAAGH,CAAC,EAAE,OAAO1C,GAAG,CAAC2D,EAAE,SAAS,CAAC3D,EAAE,cAAc,SAASA,EAAE,aAAa,IAAI2D,EAAE,QAAQ,GAAGD,EAAE,UAAUA,EAAE,QAAQ,MAAM,CAAC,cAAc,EAAE,CAAC,EAAEA,EAAE,QAAQ,MAAM,EAAE,QAAQ1D,GAAG,CAACA,EAAE,kBAAkB,aAAaA,EAAE,OAAO,QAAQ,cAAc,SAAS2D,EAAE,UAAUA,EAAE,QAAQ,GAAGD,EAAE,QAAQ1D,EAAE,cAAc,EAAE,aAAa,IAAIjyB,EAAE,EAAE,EAAE,YAAY,IAAIA,EAAE,EAAE,EAAE,aAAa,IAAI,CAAC,GAAGA,EAAE,EAAE,CAAC,EAAE,cAAciyB,GAAG,CAACA,EAAE,kBAAkB,aAAaA,EAAE,OAAO,QAAQ,cAAc,SAAS,EAAE,EAAE,CAAC,EAAE,YAAY,IAAI,EAAE,EAAE,CAAC,EAAED,EAAE,OAAOC,GAAG,CAACA,EAAE,UAAUj5B,KAAI,GAAGi5B,EAAE,WAAW32B,CAAC,EAAE,IAAI,CAAC22B,EAAExyB,KAAI,CAAC,IAAIs2B,GAAErJ,GAAE,OAAO5yB,EAAE,cAAci6B,GAAG,CAAC,IAAI9B,EAAE,GAAG,MAAM+C,EAAG,MAAMv1B,GAAE,MAAMwyB,EAAE,kBAAkByC,EAAE,UAAUqB,GAAE16B,GAAG,KAAK,OAAOA,EAAE,WAAW,KAAK06B,GAAE5D,EAAE,UAAU92B,GAAG,KAAK,OAAOA,EAAE,UAAU,qBAAqBA,GAAG,KAAK,OAAOA,EAAE,qBAAqB,OAAOgjB,EAAE,cAAcuW,EAAE,aAAalI,GAAErxB,GAAG,KAAK,OAAOA,EAAE,cAAc,KAAKqxB,GAAE5wB,EAAE,YAAY,EAAE,SAASR,EAAE,MAAMD,GAAG,KAAK,OAAOA,EAAE,MAAM,SAASA,GAAG,KAAK,OAAOA,EAAE,SAAS,WAAWA,GAAG,KAAK,OAAOA,EAAE,WAAW,kBAAkBA,GAAG,KAAK,OAAOA,EAAE,kBAAkB,kBAAkBA,GAAG,KAAK,OAAOA,EAAE,kBAAkB,YAAYw6B,EAAG,OAAO7D,EAAE,OAAOV,IAAGA,GAAE,UAAUW,EAAE,QAAQ,EAAE,QAAQ/T,EAAE,OAAOoT,IAAGA,GAAE,UAAUW,EAAE,QAAQ,EAAE,WAAWmD,EAAE,gBAAgBrD,EAAE,IAAI+C,EAAE,YAAYC,EAAE,SAASM,EAAG,sBAAsBtK,EAAE,GAAGmK,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,ECIr9U,MAAM9J,GAAU,CAAC,CAAE,GAAG9pB,KAA0B,CAC9C,KAAM,CAAE,MAAAyf,EAAQ,QAAS,EAAIuW,GAAS,EAGpC,OAAAhN,EAAA,IAACiN,GAAA,CACC,MAAAxW,EACA,UAAU,gBACV,aAAc,CACZ,WAAY,CACV,MACE,wIACF,YAAa,uCACb,aACE,mEACF,aACE,8DACJ,CACF,EACC,GAAGzf,CAAA,EAGV,ECRA,GAAI,CAACk2B,GAAsBC,EAAkB,EAAIC,GAAmB,UAAW,CAC7EC,EACF,CAAC,EACGC,GAAiBD,GAAiB,EAClCE,GAAgB,kBAChBC,GAAyB,IACzBC,GAAe,eACf,CAACC,GAAgCC,EAAyB,EAAIT,GAAqBK,EAAa,EAChGK,GAAmB52B,GAAU,CAC/B,KAAM,CACJ,eAAA62B,EACA,cAAAC,EAAgBN,GAChB,kBAAAO,EAAoB,IACpB,wBAAAC,EAA0B,GAC1B,SAAAC,CACD,EAAGj3B,EACE,CAACk3B,EAAeC,CAAgB,EAAIza,EAAc,SAAC,EAAI,EACvD0a,EAAwBC,SAAa,EAAK,EAC1CC,EAAoBD,SAAa,CAAC,EACxC1a,mBAAgB,IAAM,CACpB,MAAM4a,EAAiBD,EAAkB,QACzC,MAAO,IAAM,OAAO,aAAaC,CAAc,CAChD,EAAE,CAAE,GACkBvO,EAAG,IACxB0N,GACA,CACE,MAAOG,EACP,cAAAK,EACA,cAAAJ,EACA,OAAQU,EAAiB,YAAC,IAAM,CAC9B,OAAO,aAAaF,EAAkB,OAAO,EAC7CH,EAAiB,EAAK,CACvB,EAAE,EAAE,EACL,QAASK,EAAiB,YAAC,IAAM,CAC/B,OAAO,aAAaF,EAAkB,OAAO,EAC7CA,EAAkB,QAAU,OAAO,WACjC,IAAMH,EAAiB,EAAI,EAC3BJ,CACV,CACA,EAAS,CAACA,CAAiB,CAAC,EACtB,sBAAAK,EACA,yBAA0BI,cAAmBC,GAAc,CACzDL,EAAsB,QAAUK,CACjC,EAAE,EAAE,EACL,wBAAAT,EACA,SAAAC,CACD,CACL,CACA,EACAL,GAAgB,YAAcL,GAC9B,IAAImB,GAAe,UACf,CAACC,GAAwBC,EAAiB,EAAI1B,GAAqBwB,EAAY,EAC/EG,GAAW73B,GAAU,CACvB,KAAM,CACJ,eAAA62B,EACA,SAAAI,EACA,KAAMa,EACN,YAAAC,EAAc,GACd,aAAAC,EACA,wBAAyBC,EACzB,cAAeC,CAChB,EAAGl4B,EACEm4B,EAAkBxB,GAA0Be,GAAc13B,EAAM,cAAc,EAC9Eo4B,EAAc9B,GAAeO,CAAc,EAC3C,CAAClI,EAAS0J,CAAU,EAAI3b,EAAc,SAAC,IAAI,EAC3CzC,EAAYqe,KACZC,EAAelB,SAAa,CAAC,EAC7BL,EAA0BiB,GAA+BE,EAAgB,wBACzErB,EAAgBoB,GAAqBC,EAAgB,cACrDK,EAAoBnB,SAAa,EAAK,EACtC,CAAC9a,EAAO,GAAOkc,CAAO,EAAIC,GAAqB,CACnD,KAAMZ,EACN,YAAaC,EACb,SAAWY,GAAU,CACfA,GACFR,EAAgB,OAAM,EACtB,SAAS,cAAc,IAAI,YAAY1B,EAAY,CAAC,GAEpD0B,EAAgB,QAAO,EAEzBH,GAAA,MAAAA,EAAeW,EAChB,CACL,CAAG,EACKC,EAAiBC,UAAc,IAC5Btc,EAAOic,EAAkB,QAAU,eAAiB,eAAiB,SAC3E,CAACjc,CAAI,CAAC,EACHuc,EAAatB,cAAkB,IAAM,CACzC,OAAO,aAAae,EAAa,OAAO,EACxCA,EAAa,QAAU,EACvBC,EAAkB,QAAU,GAC5BC,EAAQ,EAAI,CAChB,EAAK,CAACA,CAAO,CAAC,EACNM,EAAcvB,cAAkB,IAAM,CAC1C,OAAO,aAAae,EAAa,OAAO,EACxCA,EAAa,QAAU,EACvBE,EAAQ,EAAK,CACjB,EAAK,CAACA,CAAO,CAAC,EACNO,EAAoBxB,cAAkB,IAAM,CAChD,OAAO,aAAae,EAAa,OAAO,EACxCA,EAAa,QAAU,OAAO,WAAW,IAAM,CAC7CC,EAAkB,QAAU,GAC5BC,EAAQ,EAAI,EACZF,EAAa,QAAU,CACxB,EAAEzB,CAAa,CACpB,EAAK,CAACA,EAAe2B,CAAO,CAAC,EAC3B9b,mBAAgB,IACP,IAAM,CACP4b,EAAa,UACf,OAAO,aAAaA,EAAa,OAAO,EACxCA,EAAa,QAAU,EAE/B,EACK,CAAE,GACkBvP,EAAG,IAACiQ,GAAsB,CAAE,GAAGb,EAAa,SAA0BpP,EAAG,IAC9F2O,GACA,CACE,MAAOd,EACP,UAAA5c,EACA,KAAAsC,EACA,eAAAqc,EACA,QAAAjK,EACA,gBAAiB0J,EACjB,eAAgBb,EAAiB,YAAC,IAAM,CAClCW,EAAgB,cAAea,IAC9BF,GACN,EAAE,CAACX,EAAgB,cAAea,EAAmBF,CAAU,CAAC,EACjE,eAAgBtB,EAAiB,YAAC,IAAM,CAClCR,EACF+B,KAEA,OAAO,aAAaR,EAAa,OAAO,EACxCA,EAAa,QAAU,EAEjC,EAAS,CAACQ,EAAa/B,CAAuB,CAAC,EACzC,OAAQ8B,EACR,QAASC,EACT,wBAAA/B,EACA,SAAAC,CACD,CACF,EAAE,CACL,EACAY,GAAQ,YAAcH,GACtB,IAAIwB,GAAe,iBACfC,GAAiBrQ,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,eAAAvC,EAAgB,GAAGwC,CAAY,EAAKr5B,EACtCkrB,EAAU0M,GAAkBsB,GAAcrC,CAAc,EACxDsB,EAAkBxB,GAA0BuC,GAAcrC,CAAc,EACxEuB,EAAc9B,GAAeO,CAAc,EAC3C9N,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,EAAKmC,EAAQ,eAAe,EACzEsO,EAAmBnC,SAAa,EAAK,EACrCoC,EAA0BpC,SAAa,EAAK,EAC5CqC,EAAkBlC,cAAkB,IAAMgC,EAAiB,QAAU,GAAO,EAAE,EACpF7c,mBAAgB,IACP,IAAM,SAAS,oBAAoB,YAAa+c,CAAe,EACrE,CAACA,CAAe,CAAC,EACG1Q,MAAI2Q,GAAwB,CAAE,QAAS,GAAM,GAAGvB,EAAa,SAA0BpP,EAAG,IAC/G4Q,GAAU,OACV,CACE,mBAAoB1O,EAAQ,KAAOA,EAAQ,UAAY,OACvD,aAAcA,EAAQ,eACtB,GAAGmO,EACH,IAAKC,EACL,cAAeO,GAAqB75B,EAAM,cAAgBvG,GAAU,CAC9DA,EAAM,cAAgB,SACtB,CAACggC,EAAwB,SAAW,CAACtB,EAAgB,sBAAsB,UAC7EjN,EAAQ,eAAc,EACtBuO,EAAwB,QAAU,GAE9C,CAAS,EACD,eAAgBI,GAAqB75B,EAAM,eAAgB,IAAM,CAC/DkrB,EAAQ,eAAc,EACtBuO,EAAwB,QAAU,EAC5C,CAAS,EACD,cAAeI,GAAqB75B,EAAM,cAAe,IAAM,CAC7Dw5B,EAAiB,QAAU,GAC3B,SAAS,iBAAiB,YAAaE,EAAiB,CAAE,KAAM,EAAI,CAAE,CAChF,CAAS,EACD,QAASG,GAAqB75B,EAAM,QAAS,IAAM,CAC5Cw5B,EAAiB,SAAStO,EAAQ,OAAM,CACvD,CAAS,EACD,OAAQ2O,GAAqB75B,EAAM,OAAQkrB,EAAQ,OAAO,EAC1D,QAAS2O,GAAqB75B,EAAM,QAASkrB,EAAQ,OAAO,CAC7D,CACF,EAAE,CACJ,CACH,EACAiO,GAAe,YAAcD,GAC7B,IAAIY,GAAc,gBACd,CAACC,GAAgBC,EAAgB,EAAI9D,GAAqB4D,GAAa,CACzE,WAAY,MACd,CAAC,EAOGG,GAAe,iBACfC,GAAiBpR,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMe,EAAgBH,GAAiBC,GAAcj6B,EAAM,cAAc,EACnE,CAAE,WAAAo6B,EAAaD,EAAc,WAAY,KAAAE,EAAO,MAAO,GAAGC,CAAc,EAAGt6B,EAC3EkrB,EAAU0M,GAAkBqC,GAAcj6B,EAAM,cAAc,EACpE,OAAuBgpB,EAAG,IAACuR,GAAU,CAAE,QAASH,GAAclP,EAAQ,KAAM,SAAUA,EAAQ,wBAA0ClC,EAAG,IAACwR,GAAoB,CAAE,KAAAH,EAAM,GAAGC,EAAc,IAAKlB,EAAc,EAAoBpQ,EAAG,IAACyR,GAAyB,CAAE,KAAAJ,EAAM,GAAGC,EAAc,IAAKlB,CAAc,EAAG,EAC7S,CACH,EACIqB,GAA0B3R,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACtE,MAAMlO,EAAU0M,GAAkBqC,GAAcj6B,EAAM,cAAc,EAC9Dm4B,EAAkBxB,GAA0BsD,GAAcj6B,EAAM,cAAc,EAC9E+oB,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,CAAG,EAChD,CAAC2R,EAAkBC,CAAmB,EAAIje,EAAc,SAAC,IAAI,EAC7D,CAAE,QAAAiS,EAAS,QAAAiM,CAAS,EAAG1P,EACvB2P,EAAU9R,EAAI,QACd,CAAE,yBAAA+R,CAA0B,EAAG3C,EAC/B4C,EAAwBvD,cAAkB,IAAM,CACpDmD,EAAoB,IAAI,EACxBG,EAAyB,EAAK,CAClC,EAAK,CAACA,CAAwB,CAAC,EACvBE,EAAwBxD,EAAiB,YAC7C,CAAC/9B,EAAOwhC,IAAgB,CACtB,MAAMC,EAAgBzhC,EAAM,cACtB0hC,EAAY,CAAE,EAAG1hC,EAAM,QAAS,EAAGA,EAAM,SACzC2hC,EAAWC,GAAoBF,EAAWD,EAAc,sBAAuB,GAC/EI,EAAmBC,GAAoBJ,EAAWC,CAAQ,EAC1DI,EAAoBC,GAAkBR,EAAY,sBAAuB,GACzES,EAAYC,GAAQ,CAAC,GAAGL,EAAkB,GAAGE,CAAiB,CAAC,EACrEb,EAAoBe,CAAS,EAC7BZ,EAAyB,EAAI,CAC9B,EACD,CAACA,CAAwB,CAC7B,EACEne,mBAAgB,IACP,IAAMoe,EAAqB,EACjC,CAACA,CAAqB,CAAC,EAC1Bpe,YAAgB,IAAM,CACpB,GAAIgS,GAAWkM,EAAS,CACtB,MAAMe,EAAsBniC,GAAUuhC,EAAsBvhC,EAAOohC,CAAO,EACpEgB,EAAsBpiC,GAAUuhC,EAAsBvhC,EAAOk1B,CAAO,EAC1E,OAAAA,EAAQ,iBAAiB,eAAgBiN,CAAkB,EAC3Df,EAAQ,iBAAiB,eAAgBgB,CAAkB,EACpD,IAAM,CACXlN,EAAQ,oBAAoB,eAAgBiN,CAAkB,EAC9Df,EAAQ,oBAAoB,eAAgBgB,CAAkB,CACtE,CACK,CACF,EAAE,CAAClN,EAASkM,EAASG,EAAuBD,CAAqB,CAAC,EACnEpe,YAAgB,IAAM,CACpB,GAAI+d,EAAkB,CACpB,MAAMoB,EAA2BriC,GAAU,CACzC,MAAMgK,EAAShK,EAAM,OACfsiC,EAAkB,CAAE,EAAGtiC,EAAM,QAAS,EAAGA,EAAM,SAC/CuiC,GAAmBrN,GAAA,YAAAA,EAAS,SAASlrB,MAAWo3B,GAAA,YAAAA,EAAS,SAASp3B,IAClEw4B,EAA4B,CAACC,GAAiBH,EAAiBrB,CAAgB,EACjFsB,EACFjB,IACSkB,IACTlB,IACAH,IAEV,EACM,gBAAS,iBAAiB,cAAekB,CAAuB,EACzD,IAAM,SAAS,oBAAoB,cAAeA,CAAuB,CACjF,CACL,EAAK,CAACnN,EAASkM,EAASH,EAAkBE,EAASG,CAAqB,CAAC,EAChD/R,MAAIwR,GAAoB,CAAE,GAAGx6B,EAAO,IAAKs5B,CAAY,CAAE,CAChF,CAAC,EACG,CAAC6C,GAAsCC,EAA+B,EAAIlG,GAAqBwB,GAAc,CAAE,SAAU,EAAK,CAAE,EAChI8C,GAAqB1R,EAAgB,WACvC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,eAAAvC,EACA,SAAAI,EACA,aAAcoF,EACd,gBAAAC,EACA,qBAAAC,EACA,GAAGjC,CACJ,EAAGt6B,EACEkrB,EAAU0M,GAAkBqC,GAAcpD,CAAc,EACxDuB,EAAc9B,GAAeO,CAAc,EAC3C,CAAE,QAAA+D,CAAS,EAAG1P,EACpBvO,mBAAgB,KACd,SAAS,iBAAiB8Z,GAAcmE,CAAO,EACxC,IAAM,SAAS,oBAAoBnE,GAAcmE,CAAO,GAC9D,CAACA,CAAO,CAAC,EACZje,YAAgB,IAAM,CACpB,GAAIuO,EAAQ,QAAS,CACnB,MAAMsR,EAAgB/iC,GAAU,CAC9B,MAAMgK,EAAShK,EAAM,OACjBgK,GAAA,MAAAA,EAAQ,SAASynB,EAAQ,UAAU0P,EAAO,CACxD,EACQ,cAAO,iBAAiB,SAAU4B,EAAc,CAAE,QAAS,EAAI,CAAE,EAC1D,IAAM,OAAO,oBAAoB,SAAUA,EAAc,CAAE,QAAS,EAAI,CAAE,CAClF,CACF,EAAE,CAACtR,EAAQ,QAAS0P,CAAO,CAAC,EACN5R,EAAG,IACxByT,GACA,CACE,QAAS,GACT,4BAA6B,GAC7B,gBAAAH,EACA,qBAAAC,EACA,eAAiB9iC,GAAUA,EAAM,eAAgB,EACjD,UAAWmhC,EACX,SAA0B5Q,EAAI,KAC5B0S,GACA,CACE,aAAcxR,EAAQ,eACtB,GAAGkN,EACH,GAAGkC,EACH,IAAKlB,EACL,MAAO,CACL,GAAGkB,EAAa,MAGd,2CAA4C,uCAC5C,0CAA2C,sCAC3C,2CAA4C,uCAC5C,gCAAiC,mCACjC,iCAAkC,mCAErC,EACD,SAAU,CACQtR,MAAI2T,GAAW,CAAE,SAAA1F,EAAU,EAC3BjO,MAAImT,GAAsC,CAAE,MAAOtF,EAAgB,SAAU,GAAM,SAA0B7N,MAAI4T,GAA8B,CAAE,GAAI1R,EAAQ,UAAW,KAAM,UAAW,SAAUmR,GAAapF,CAAU,GAAG,CAC9O,CACF,CACF,CACF,CACP,CACG,CACH,EACAiD,GAAe,YAAcD,GAC7B,IAAI4C,GAAa,eACbC,GAAehU,EAAgB,WACjC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,eAAAvC,EAAgB,GAAGkG,CAAU,EAAK/8B,EACpCo4B,EAAc9B,GAAeO,CAAc,EAKjD,OAJqCuF,GACnCS,GACAhG,CACN,EACwC,SAAW,KAAuB7N,EAAG,IAACgU,GAAuB,CAAE,GAAG5E,EAAa,GAAG2E,EAAY,IAAK3D,CAAc,EACtJ,CACH,EACA0D,GAAa,YAAcD,GAC3B,SAASxB,GAAoB4B,EAAOC,EAAM,CACxC,MAAMC,EAAM,KAAK,IAAID,EAAK,IAAMD,EAAM,CAAC,EACjCG,EAAS,KAAK,IAAIF,EAAK,OAASD,EAAM,CAAC,EACvCI,EAAQ,KAAK,IAAIH,EAAK,MAAQD,EAAM,CAAC,EACrCK,EAAO,KAAK,IAAIJ,EAAK,KAAOD,EAAM,CAAC,EACzC,OAAQ,KAAK,IAAIE,EAAKC,EAAQC,EAAOC,CAAI,EAAC,CACxC,KAAKA,EACH,MAAO,OACT,KAAKD,EACH,MAAO,QACT,KAAKF,EACH,MAAO,MACT,KAAKC,EACH,MAAO,SACT,QACE,MAAM,IAAI,MAAM,aAAa,CAChC,CACH,CACA,SAAS7B,GAAoBJ,EAAWC,EAAUhU,EAAU,EAAG,CAC7D,MAAMkU,EAAmB,GACzB,OAAQF,EAAQ,CACd,IAAK,MACHE,EAAiB,KACf,CAAE,EAAGH,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,EACtD,CAAE,EAAG+T,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,CAC9D,EACM,MACF,IAAK,SACHkU,EAAiB,KACf,CAAE,EAAGH,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,EACtD,CAAE,EAAG+T,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,CAC9D,EACM,MACF,IAAK,OACHkU,EAAiB,KACf,CAAE,EAAGH,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,EACtD,CAAE,EAAG+T,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,CAC9D,EACM,MACF,IAAK,QACHkU,EAAiB,KACf,CAAE,EAAGH,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,EACtD,CAAE,EAAG+T,EAAU,EAAI/T,EAAS,EAAG+T,EAAU,EAAI/T,CAAS,CAC9D,EACM,KACH,CACD,OAAOkU,CACT,CACA,SAASG,GAAkByB,EAAM,CAC/B,KAAM,CAAE,IAAAC,EAAK,MAAAE,EAAO,OAAAD,EAAQ,KAAAE,CAAI,EAAKJ,EACrC,MAAO,CACL,CAAE,EAAGI,EAAM,EAAGH,CAAK,EACnB,CAAE,EAAGE,EAAO,EAAGF,CAAK,EACpB,CAAE,EAAGE,EAAO,EAAGD,CAAQ,EACvB,CAAE,EAAGE,EAAM,EAAGF,CAAQ,CAC1B,CACA,CACA,SAASlB,GAAiBe,EAAOM,EAAS,CACxC,KAAM,CAAE,EAAAnS,EAAG,EAAAC,CAAG,EAAG4R,EACjB,IAAIO,EAAS,GACb,QAAS,EAAI,EAAGnN,EAAIkN,EAAQ,OAAS,EAAG,EAAIA,EAAQ,OAAQlN,EAAI,IAAK,CACnE,MAAMoN,EAAKF,EAAQ,CAAC,EAAE,EAChBG,EAAKH,EAAQ,CAAC,EAAE,EAChBI,EAAKJ,EAAQlN,CAAC,EAAE,EAChBuN,EAAKL,EAAQlN,CAAC,EAAE,EACJqN,EAAKrS,GAAMuS,EAAKvS,GAAKD,GAAKuS,EAAKF,IAAOpS,EAAIqS,IAAOE,EAAKF,GAAMD,IAC/DD,EAAS,CAACA,EAC1B,CACD,OAAOA,CACT,CACA,SAAS7B,GAAQkC,EAAQ,CACvB,MAAMC,EAAYD,EAAO,QACzB,OAAAC,EAAU,KAAK,CAACx/B,EAAGC,IACbD,EAAE,EAAIC,EAAE,EAAU,GACbD,EAAE,EAAIC,EAAE,EAAU,EAClBD,EAAE,EAAIC,EAAE,EAAU,GAClBD,EAAE,EAAIC,EAAE,EAAU,EACf,CACb,EACMw/B,GAAiBD,CAAS,CACnC,CACA,SAASC,GAAiBF,EAAQ,CAChC,GAAIA,EAAO,QAAU,EAAG,OAAOA,EAAO,MAAK,EAC3C,MAAMG,EAAY,GAClB,QAASjkC,EAAI,EAAGA,EAAI8jC,EAAO,OAAQ9jC,IAAK,CACtC,MAAMD,EAAI+jC,EAAO9jC,CAAC,EAClB,KAAOikC,EAAU,QAAU,GAAG,CAC5B,MAAM5K,EAAI4K,EAAUA,EAAU,OAAS,CAAC,EAClCphB,EAAIohB,EAAUA,EAAU,OAAS,CAAC,EACxC,IAAK5K,EAAE,EAAIxW,EAAE,IAAM9iB,EAAE,EAAI8iB,EAAE,KAAOwW,EAAE,EAAIxW,EAAE,IAAM9iB,EAAE,EAAI8iB,EAAE,GAAIohB,EAAU,UACjE,MACN,CACDA,EAAU,KAAKlkC,CAAC,CACjB,CACDkkC,EAAU,IAAG,EACb,MAAMC,EAAY,GAClB,QAASlkC,EAAI8jC,EAAO,OAAS,EAAG9jC,GAAK,EAAGA,IAAK,CAC3C,MAAMD,EAAI+jC,EAAO9jC,CAAC,EAClB,KAAOkkC,EAAU,QAAU,GAAG,CAC5B,MAAM7K,EAAI6K,EAAUA,EAAU,OAAS,CAAC,EAClCrhB,EAAIqhB,EAAUA,EAAU,OAAS,CAAC,EACxC,IAAK7K,EAAE,EAAIxW,EAAE,IAAM9iB,EAAE,EAAI8iB,EAAE,KAAOwW,EAAE,EAAIxW,EAAE,IAAM9iB,EAAE,EAAI8iB,EAAE,GAAIqhB,EAAU,UACjE,MACN,CACDA,EAAU,KAAKnkC,CAAC,CACjB,CAED,OADAmkC,EAAU,IAAG,EACTD,EAAU,SAAW,GAAKC,EAAU,SAAW,GAAKD,EAAU,CAAC,EAAE,IAAMC,EAAU,CAAC,EAAE,GAAKD,EAAU,CAAC,EAAE,IAAMC,EAAU,CAAC,EAAE,EACpHD,EAEAA,EAAU,OAAOC,CAAS,CAErC,CACA,IAAI18B,GAAWq1B,GACXsH,GAAQrG,GACRsG,GAAUhF,GAEViF,GAAWlE,GC9df,MAAMtD,GAAkByH,GAElBxG,GAAUyG,GAEVnF,GAAiBoF,GAEjBrE,GAAiBpR,aAGrB,CAAC,CAAE,UAAArK,EAAW,WAAA+f,EAAa,EAAG,GAAGx+B,GAAS+oB,IAC1CC,EAAA,IAACyV,GAAA,CACC,IAAA1V,EACA,WAAAyV,EACA,UAAW/V,GACT,qYACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDk6B,GAAe,YAAcuE,GAAyB,YCxBtD,IAAIC,GAAe,KAAM,CACvB,aAAc,CACZ,KAAK,UAA4B,IAAI,IACrC,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,CAC1C,CACD,UAAUhoB,EAAU,CAClB,YAAK,UAAU,IAAIA,CAAQ,EAC3B,KAAK,YAAW,EACT,IAAM,CACX,KAAK,UAAU,OAAOA,CAAQ,EAC9B,KAAK,cAAa,CACxB,CACG,CACD,cAAe,CACb,OAAO,KAAK,UAAU,KAAO,CAC9B,CACD,aAAc,CACb,CACD,eAAgB,CACf,CACH,ECpBIioB,GAAW,OAAO,OAAW,KAAe,SAAU,WAC1D,SAASC,IAAO,CAEhB,CACA,SAASC,GAAiBC,EAASpkC,EAAO,CACxC,OAAO,OAAOokC,GAAY,WAAaA,EAAQpkC,CAAK,EAAIokC,CAC1D,CACA,SAASC,GAAeliC,EAAO,CAC7B,OAAO,OAAOA,GAAU,UAAYA,GAAS,GAAKA,IAAU,GAC9D,CACA,SAASmiC,GAAeC,EAAWC,EAAW,CACrC,YAAK,IAAID,GAAaC,GAAa,GAAK,KAAK,MAAO,CAAC,CAC9D,CACA,SAASC,GAAiBD,EAAWE,EAAO,CAC1C,OAAO,OAAOF,GAAc,WAAaA,EAAUE,CAAK,EAAIF,CAC9D,CACA,SAASG,GAAepoB,EAASmoB,EAAO,CACtC,OAAO,OAAOnoB,GAAY,WAAaA,EAAQmoB,CAAK,EAAInoB,CAC1D,CACA,SAASqoB,GAAWC,EAASH,EAAO,CAC5B,MACJ,KAAAv/B,EAAO,MACP,MAAA2/B,EACA,YAAAC,EACA,UAAAC,EACA,SAAAC,EACA,MAAAC,CACE,EAAAL,EACJ,GAAII,GACF,GAAIH,GACF,GAAIJ,EAAM,YAAcS,GAAsBF,EAAUP,EAAM,OAAO,EAC5D,iBAEA,CAACU,GAAgBV,EAAM,SAAUO,CAAQ,EAC3C,SAGX,GAAI9/B,IAAS,MAAO,CACZ,MAAAivB,EAAWsQ,EAAM,WAInB,GAHAv/B,IAAS,UAAY,CAACivB,GAGtBjvB,IAAS,YAAcivB,EAClB,QAEX,CAOA,MANI,SAAO8Q,GAAU,WAAaR,EAAM,YAAcQ,GAGlDH,GAAeA,IAAgBL,EAAM,MAAM,aAG3CM,GAAa,CAACA,EAAUN,CAAK,EAInC,CACA,SAASW,GAAcR,EAASS,EAAU,CACxC,KAAM,CAAE,MAAAR,EAAO,OAAAS,EAAQ,UAAAP,EAAW,YAAAQ,GAAgBX,EAClD,GAAIW,EAAa,CACX,IAACF,EAAS,QAAQ,YACb,SAET,GAAIR,GACF,GAAIW,GAAQH,EAAS,QAAQ,WAAW,IAAMG,GAAQD,CAAW,EACxD,iBAEA,CAACJ,GAAgBE,EAAS,QAAQ,YAAaE,CAAW,EAC5D,QAEX,CAIA,MAHI,EAAAD,GAAUD,EAAS,MAAM,SAAWC,GAGpCP,GAAa,CAACA,EAAUM,CAAQ,EAItC,CACA,SAASH,GAAsBF,EAAUn/B,EAAS,CAEhD,QADeA,GAAA,YAAAA,EAAS,iBAAkB2/B,IAC5BR,CAAQ,CACxB,CACA,SAASQ,GAAQR,EAAU,CACzB,OAAO,KAAK,UACVA,EACA,CAACxhC,EAAG+D,IAAQk+B,GAAcl+B,CAAG,EAAI,OAAO,KAAKA,CAAG,EAAE,KAAK,EAAE,OAAO,CAACmH,EAAQjL,KAChEiL,EAAAjL,CAAG,EAAI8D,EAAI9D,CAAG,EACdiL,GACN,EAAE,EAAInH,CAAA,CAEb,CACA,SAAS49B,GAAgBxhC,EAAGC,EAAG,CAC7B,OAAID,IAAMC,EACD,GAEL,OAAOD,GAAM,OAAOC,EACf,GAELD,GAAKC,GAAK,OAAOD,GAAM,UAAY,OAAOC,GAAM,SAC3C,CAAC,OAAO,KAAKA,CAAC,EAAE,KAAMH,GAAQ,CAAC0hC,GAAgBxhC,EAAEF,CAAG,EAAGG,EAAEH,CAAG,CAAC,CAAC,EAEhE,EACT,CACA,SAASiiC,GAAiB/hC,EAAGC,EAAG,CAC9B,GAAID,IAAMC,EACD,OAAAD,EAET,MAAMmP,EAAQ6yB,GAAahiC,CAAC,GAAKgiC,GAAa/hC,CAAC,EAC/C,GAAIkP,GAAS2yB,GAAc9hC,CAAC,GAAK8hC,GAAc7hC,CAAC,EAAG,CACjD,MAAMgiC,EAAS9yB,EAAQnP,EAAI,OAAO,KAAKA,CAAC,EAClCkiC,EAAQD,EAAO,OACfE,EAAShzB,EAAQlP,EAAI,OAAO,KAAKA,CAAC,EAClCmiC,EAAQD,EAAO,OACfE,EAAOlzB,EAAQ,CAAC,EAAI,GAC1B,IAAImzB,EAAa,EACjB,QAAS7mC,EAAI,EAAGA,EAAI2mC,EAAO3mC,IAAK,CAC9B,MAAMqE,EAAMqP,EAAQ1T,EAAI0mC,EAAO1mC,CAAC,GAC3B,CAAC0T,GAAS8yB,EAAO,SAASniC,CAAG,GAAKqP,IAAUnP,EAAEF,CAAG,IAAM,QAAUG,EAAEH,CAAG,IAAM,QAC/EuiC,EAAKviC,CAAG,EAAI,OACZwiC,MAEKD,EAAAviC,CAAG,EAAIiiC,GAAiB/hC,EAAEF,CAAG,EAAGG,EAAEH,CAAG,CAAC,EACvCuiC,EAAKviC,CAAG,IAAME,EAAEF,CAAG,GAAKE,EAAEF,CAAG,IAAM,QACrCwiC,IAGN,CACA,OAAOJ,IAAUE,GAASE,IAAeJ,EAAQliC,EAAIqiC,CACvD,CACO,OAAApiC,CACT,CAYA,SAAS+hC,GAAazjC,EAAO,CACpB,aAAM,QAAQA,CAAK,GAAKA,EAAM,SAAW,OAAO,KAAKA,CAAK,EAAE,MACrE,CACA,SAASujC,GAAcrjB,EAAG,CACpB,IAAC8jB,GAAmB9jB,CAAC,EAChB,SAET,MAAM+jB,EAAO/jB,EAAE,YACf,GAAI+jB,IAAS,OACJ,SAET,MAAMC,EAAOD,EAAK,UAOlB,MANI,GAACD,GAAmBE,CAAI,GAGxB,CAACA,EAAK,eAAe,eAAe,GAGpC,OAAO,eAAehkB,CAAC,IAAM,OAAO,UAI1C,CACA,SAAS8jB,GAAmB9jB,EAAG,CAC7B,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAC,IAAM,iBAC/C,CACA,SAASzP,GAAMkJ,EAAS,CACf,WAAI,QAAS9Z,GAAY,CAC9B,WAAWA,EAAS8Z,CAAO,EAC5B,CACH,CACA,SAASwqB,GAAYC,EAAUpjC,EAAM2C,EAAS,CACxC,cAAOA,EAAQ,mBAAsB,WAChCA,EAAQ,kBAAkBygC,EAAUpjC,CAAI,EACtC2C,EAAQ,oBAAsB,GAUhC6/B,GAAiBY,EAAUpjC,CAAI,EAEjCA,CACT,CAIA,SAASqjC,GAASC,EAAOC,EAAMxW,EAAM,EAAG,CACtC,MAAMyW,EAAW,CAAC,GAAGF,EAAOC,CAAI,EAChC,OAAOxW,GAAOyW,EAAS,OAASzW,EAAMyW,EAAS,MAAM,CAAC,EAAIA,CAC5D,CACA,SAASC,GAAWH,EAAOC,EAAMxW,EAAM,EAAG,CACxC,MAAMyW,EAAW,CAACD,EAAM,GAAGD,CAAK,EACzB,OAAAvW,GAAOyW,EAAS,OAASzW,EAAMyW,EAAS,MAAM,EAAG,EAAE,EAAIA,CAChE,CACA,IAAIE,GAAY,OAAO,EACvB,SAASC,GAAchhC,EAASihC,EAAc,CAQ5C,MAAI,CAACjhC,EAAQ,UAAWihC,GAAA,MAAAA,EAAc,gBAC7B,IAAMA,EAAa,eAExB,CAACjhC,EAAQ,SAAWA,EAAQ,UAAY+gC,GACnC,IAAM,QAAQ,OAAO,IAAI,MAAM,qBAAqB/gC,EAAQ,SAAS,GAAG,CAAC,EAE3EA,EAAQ,OACjB,iBCxNIkhC,IAAellC,GAAA,cAAckiC,EAAa,CAI5C,aAAc,CACZ,QAJFiD,GAAA,KAAAC,IACAD,GAAA,KAAAE,IACAF,GAAA,KAAAG,IAGEC,GAAA,KAAKD,GAAUE,GAAY,CACzB,GAAI,CAACrD,IAAY,OAAO,iBAAkB,CACxC,MAAMjoB,EAAW,IAAMsrB,IACvB,cAAO,iBAAiB,mBAAoBtrB,EAAU,EAAK,EACpD,IAAM,CACX,OAAO,oBAAoB,mBAAoBA,CAAQ,CACjE,CACO,CAEP,EACG,CACD,aAAc,CACPurB,EAAA,KAAKJ,KACR,KAAK,iBAAiBI,EAAA,KAAKH,GAAM,CAEpC,CACD,eAAgB,OACT,KAAK,kBACRtlC,EAAAylC,EAAA,KAAKJ,MAAL,MAAArlC,EAAA,WACAulC,GAAA,KAAKF,GAAW,QAEnB,CACD,iBAAiBK,EAAO,OACtBH,GAAA,KAAKD,GAASI,IACd1lC,EAAAylC,EAAA,KAAKJ,MAAL,MAAArlC,EAAA,WACAulC,GAAA,KAAKF,GAAWK,EAAOC,GAAY,CAC7B,OAAOA,GAAY,UACrB,KAAK,WAAWA,CAAO,EAEvB,KAAK,QAAO,CAEpB,CAAK,EACF,CACD,WAAWA,EAAS,CACFF,EAAA,KAAKL,MAAaO,IAEhCJ,GAAA,KAAKH,GAAWO,GAChB,KAAK,QAAO,EAEf,CACD,SAAU,CACR,MAAMC,EAAY,KAAK,YACvB,KAAK,UAAU,QAAS1rB,GAAa,CACnCA,EAAS0rB,CAAS,CACxB,CAAK,CACF,CACD,WAAY,OACV,OAAI,OAAOH,EAAA,KAAKL,KAAa,UACpBK,EAAA,KAAKL,MAEPplC,EAAA,WAAW,WAAX,YAAAA,EAAqB,mBAAoB,QACjD,CACH,EAzDEolC,GAAA,YACAC,GAAA,YACAC,GAAA,YAHiBtlC,IA2Df6lC,GAAe,IAAIX,eC3DnBY,IAAgB9lC,GAAA,cAAckiC,EAAa,CAI7C,aAAc,CACZ,QAJFiD,GAAA,KAAAY,GAAU,IACVZ,GAAA,KAAAE,IACAF,GAAA,KAAAG,IAGEC,GAAA,KAAKD,GAAUU,GAAa,CAC1B,GAAI,CAAC7D,IAAY,OAAO,iBAAkB,CACxC,MAAM8D,EAAiB,IAAMD,EAAS,EAAI,EACpCE,EAAkB,IAAMF,EAAS,EAAK,EAC5C,cAAO,iBAAiB,SAAUC,EAAgB,EAAK,EACvD,OAAO,iBAAiB,UAAWC,EAAiB,EAAK,EAClD,IAAM,CACX,OAAO,oBAAoB,SAAUD,CAAc,EACnD,OAAO,oBAAoB,UAAWC,CAAe,CAC/D,CACO,CAEP,EACG,CACD,aAAc,CACPT,EAAA,KAAKJ,KACR,KAAK,iBAAiBI,EAAA,KAAKH,GAAM,CAEpC,CACD,eAAgB,OACT,KAAK,kBACRtlC,EAAAylC,EAAA,KAAKJ,MAAL,MAAArlC,EAAA,WACAulC,GAAA,KAAKF,GAAW,QAEnB,CACD,iBAAiBK,EAAO,OACtBH,GAAA,KAAKD,GAASI,IACd1lC,EAAAylC,EAAA,KAAKJ,MAAL,MAAArlC,EAAA,WACAulC,GAAA,KAAKF,GAAWK,EAAM,KAAK,UAAU,KAAK,IAAI,CAAC,EAChD,CACD,UAAUS,EAAQ,CACAV,EAAA,KAAKM,MAAYI,IAE/BZ,GAAA,KAAKQ,GAAUI,GACf,KAAK,UAAU,QAASjsB,GAAa,CACnCA,EAASisB,CAAM,CACvB,CAAO,EAEJ,CACD,UAAW,CACT,OAAOV,EAAA,KAAKM,GACb,CACH,EA/CEA,GAAA,YACAV,GAAA,YACAC,GAAA,YAHkBtlC,IAiDhBomC,GAAgB,IAAIN,GCnDxB,SAASO,IAAkB,CACzB,IAAInmC,EACAC,EACJ,MAAMmmC,EAAW,IAAI,QAAQ,CAACC,EAAUC,IAAY,CAClDtmC,EAAUqmC,EACVpmC,EAASqmC,CACb,CAAG,EACDF,EAAS,OAAS,UAClBA,EAAS,MAAM,IAAM,CACvB,CAAG,EACD,SAASG,EAASplC,EAAM,CACtB,OAAO,OAAOilC,EAAUjlC,CAAI,EAC5B,OAAOilC,EAAS,QAChB,OAAOA,EAAS,MACjB,CACD,OAAAA,EAAS,QAAWjmC,GAAU,CAC5BomC,EAAS,CACP,OAAQ,YACR,MAAApmC,CACN,CAAK,EACDH,EAAQG,CAAK,CACjB,EACEimC,EAAS,OAAUI,GAAW,CAC5BD,EAAS,CACP,OAAQ,WACR,OAAAC,CACN,CAAK,EACDvmC,EAAOumC,CAAM,CACjB,EACSJ,CACT,CC1BA,SAASK,GAAkBC,EAAc,CACvC,OAAO,KAAK,IAAI,IAAM,GAAKA,EAAc,GAAG,CAC9C,CACA,SAASC,GAASC,EAAa,CAC7B,OAAQA,GAAe,YAAc,SAAWV,GAAc,SAAU,EAAG,EAC7E,CACA,IAAIW,GAAiB,cAAc,KAAM,CACvC,YAAY/iC,EAAS,CACnB,MAAM,gBAAgB,EACtB,KAAK,OAASA,GAAA,YAAAA,EAAS,OACvB,KAAK,OAASA,GAAA,YAAAA,EAAS,MACxB,CACH,EACA,SAASgjC,GAAiB3mC,EAAO,CAC/B,OAAOA,aAAiB0mC,EAC1B,CACA,SAASE,GAAcz7B,EAAQ,CAC7B,IAAI07B,EAAmB,GACnBN,EAAe,EACfO,EAAa,GACbC,EACJ,MAAMd,EAAWD,KACXgB,EAAUC,GAAkB,OAC3BH,IACHhnC,EAAO,IAAI4mC,GAAeO,CAAa,CAAC,GACxCtnC,EAAAwL,EAAO,QAAP,MAAAxL,EAAA,KAAAwL,GAEN,EACQ+7B,EAAc,IAAM,CACxBL,EAAmB,EACvB,EACQM,EAAgB,IAAM,CAC1BN,EAAmB,EACvB,EACQO,EAAc,IAAM5B,GAAa,UAAS,IAAOr6B,EAAO,cAAgB,UAAY46B,GAAc,SAAQ,IAAO56B,EAAO,OAAM,EAC9Hk8B,EAAW,IAAMb,GAASr7B,EAAO,WAAW,GAAKA,EAAO,SACxDtL,EAAWG,GAAU,OACpB8mC,IACHA,EAAa,IACbnnC,EAAAwL,EAAO,YAAP,MAAAxL,EAAA,KAAAwL,EAAmBnL,GACnB+mC,GAAA,MAAAA,IACAd,EAAS,QAAQjmC,CAAK,EAE5B,EACQF,EAAUE,GAAU,OACnB8mC,IACHA,EAAa,IACbnnC,EAAAwL,EAAO,UAAP,MAAAxL,EAAA,KAAAwL,EAAiBnL,GACjB+mC,GAAA,MAAAA,IACAd,EAAS,OAAOjmC,CAAK,EAE3B,EACQsnC,EAAQ,IACL,IAAI,QAASC,GAAoB,OACtCR,EAAc/mC,GAAU,EAClB8mC,GAAcM,MAChBG,EAAgBvnC,CAAK,CAE/B,GACML,EAAAwL,EAAO,UAAP,MAAAxL,EAAA,KAAAwL,EACN,CAAK,EAAE,KAAK,IAAM,OACZ47B,EAAa,OACRD,IACHnnC,EAAAwL,EAAO,aAAP,MAAAxL,EAAA,KAAAwL,EAER,CAAK,EAEGqkB,EAAM,IAAM,CAChB,GAAIsX,EACF,OAEF,IAAIU,EACJ,MAAMC,EAAiBlB,IAAiB,EAAIp7B,EAAO,eAAiB,OACpE,GAAI,CACFq8B,EAAiBC,GAAkBt8B,EAAO,IAC3C,OAAQhQ,EAAO,CACdqsC,EAAiB,QAAQ,OAAOrsC,CAAK,CACtC,CACD,QAAQ,QAAQqsC,CAAc,EAAE,KAAK3nC,CAAO,EAAE,MAAO1E,GAAU,OAC7D,GAAI2rC,EACF,OAEF,MAAMY,EAAQv8B,EAAO,QAAU22B,GAAW,EAAI,GACxC6F,EAAax8B,EAAO,YAAcm7B,GAClCsB,EAAQ,OAAOD,GAAe,WAAaA,EAAWpB,EAAcprC,CAAK,EAAIwsC,EAC7EE,EAAcH,IAAU,IAAQ,OAAOA,GAAU,UAAYnB,EAAemB,GAAS,OAAOA,GAAU,YAAcA,EAAMnB,EAAcprC,CAAK,EACnJ,GAAI0rC,GAAoB,CAACgB,EAAa,CACpC/nC,EAAO3E,CAAK,EACZ,MACD,CACDorC,KACA5mC,EAAAwL,EAAO,SAAP,MAAAxL,EAAA,KAAAwL,EAAgBo7B,EAAcprC,GAC9BsV,GAAMm3B,CAAK,EAAE,KAAK,IACTR,EAAa,EAAG,OAASE,EAAK,CACtC,EAAE,KAAK,IAAM,CACRT,EACF/mC,EAAO3E,CAAK,EAEZq0B,GAEV,CAAO,CACP,CAAK,CACL,EACE,MAAO,CACL,QAASyW,EACT,OAAAe,EACA,SAAU,KACRD,GAAA,MAAAA,IACOd,GAET,YAAAiB,EACA,cAAAC,EACA,SAAAE,EACA,MAAO,KACDA,EAAQ,EACV7X,IAEA8X,EAAO,EAAC,KAAK9X,CAAG,EAEXyW,EAEb,CACA,CC9HA,SAAS6B,IAAsB,CAC7B,IAAIC,EAAQ,GACRC,EAAe,EACfC,EAAYloC,GAAa,CAC3BA,GACJ,EACMmoC,EAAiBnoC,GAAa,CAChCA,GACJ,EACMooC,EAAcC,GAAO,WAAWA,EAAI,CAAC,EACzC,MAAMC,EAAYtoC,GAAa,CACzBioC,EACFD,EAAM,KAAKhoC,CAAQ,EAEnBooC,EAAW,IAAM,CACfF,EAASloC,CAAQ,CACzB,CAAO,CAEP,EACQuoC,EAAQ,IAAM,CAClB,MAAMC,EAAgBR,EACtBA,EAAQ,GACJQ,EAAc,QAChBJ,EAAW,IAAM,CACfD,EAAc,IAAM,CAClBK,EAAc,QAASxoC,GAAa,CAClCkoC,EAASloC,CAAQ,CAC7B,CAAW,CACX,CAAS,CACT,CAAO,CAEP,EACE,MAAO,CACL,MAAQA,GAAa,CACnB,IAAIyM,EACJw7B,IACA,GAAI,CACFx7B,EAASzM,EAAQ,CACzB,QAAgB,CACRioC,IACKA,GACHM,GAEH,CACD,OAAO97B,CACR,EAID,WAAazM,GACJ,IAAIkF,IAAS,CAClBojC,EAAS,IAAM,CACbtoC,EAAS,GAAGkF,CAAI,CAC1B,CAAS,CACT,EAEI,SAAAojC,EAKA,kBAAoBt4B,GAAO,CACzBk4B,EAAWl4B,CACZ,EAKD,uBAAyBA,GAAO,CAC9Bm4B,EAAgBn4B,CACjB,EACD,aAAeA,GAAO,CACpBo4B,EAAap4B,CACd,CACL,CACA,CACA,IAAIy4B,GAAgBV,GAAqB,QC3ErCW,IAAY9oC,GAAA,KAAM,CAAN,cACdmlC,GAAA,KAAA4D,IACA,SAAU,CACR,KAAK,eAAc,CACpB,CACD,YAAa,CACX,KAAK,eAAc,EACfxG,GAAe,KAAK,MAAM,GAC5BgD,GAAA,KAAKwD,GAAa,WAAW,IAAM,CACjC,KAAK,eAAc,CAC3B,EAAS,KAAK,MAAM,EAEjB,CACD,aAAaC,EAAW,CACtB,KAAK,OAAS,KAAK,IACjB,KAAK,QAAU,EACfA,IAAc7G,GAAW,IAAW,EAAI,GAAK,IACnD,CACG,CACD,gBAAiB,CACXsD,EAAA,KAAKsD,MACP,aAAatD,EAAA,KAAKsD,GAAU,EAC5BxD,GAAA,KAAKwD,GAAa,QAErB,CACH,EAxBEA,GAAA,YADc/oC,+BCUZipC,IAAQjpC,GAAA,cAAc8oC,EAAU,CAOlC,YAAYt9B,EAAQ,CACZ,QARE25B,GAAA,KAAA+D,IACV/D,GAAA,KAAAgE,IACAhE,GAAA,KAAAiE,IACAjE,GAAA,KAAAkE,IACAlE,GAAA,KAAAmE,IACAnE,GAAA,KAAAoE,IACApE,GAAA,KAAAqE,IAGEjE,GAAA,KAAKiE,GAAuB,IAC5BjE,GAAA,KAAKgE,GAAkB/9B,EAAO,gBACzB,gBAAWA,EAAO,OAAO,EAC9B,KAAK,UAAY,GACjB+5B,GAAA,KAAK8D,GAAS79B,EAAO,OACrB,KAAK,SAAWA,EAAO,SACvB,KAAK,UAAYA,EAAO,UACnB+5B,GAAA,KAAA4D,GAAgBM,GAAgB,KAAK,OAAO,GAC5C,WAAQj+B,EAAO,OAASi6B,EAAA,KAAK0D,IAClC,KAAK,WAAW,CAClB,CACA,IAAI,MAAO,CACT,OAAO,KAAK,QAAQ,IACtB,CACA,IAAI,SAAU,OACZ,OAAOnpC,EAAAylC,EAAA,KAAK6D,MAAL,YAAAtpC,EAAe,OACxB,CACA,WAAWgE,EAAS,CAClB,KAAK,QAAU,CAAE,GAAGyhC,EAAA,KAAK8D,IAAiB,GAAGvlC,GACxC,kBAAa,KAAK,QAAQ,MAAM,CACvC,CACA,gBAAiB,CACX,CAAC,KAAK,UAAU,QAAU,KAAK,MAAM,cAAgB,QAClDyhC,EAAA,KAAA4D,IAAO,OAAO,IAAI,CAE3B,CACA,QAAQK,EAAS1lC,EAAS,CACxB,MAAM3C,EAAOmjC,GAAY,KAAK,MAAM,KAAMkF,EAAS,KAAK,OAAO,EAC/D,OAAAC,GAAA,KAAKT,GAAAU,IAAL,UAAe,CACb,KAAAvoC,EACA,KAAM,UACN,cAAe2C,GAAA,YAAAA,EAAS,UACxB,OAAQA,GAAA,YAAAA,EAAS,SAEZ3C,CACT,CACA,SAASme,EAAOqqB,EAAiB,CAC/BF,GAAA,KAAKT,GAAAU,IAAL,UAAe,CAAE,KAAM,WAAY,MAAApqB,EAAO,gBAAAqqB,GAC5C,CACA,OAAO7lC,EAAS,SACR,MAAAwC,GAAUxG,EAAAylC,EAAA,KAAK6D,MAAL,YAAAtpC,EAAe,QAC1B,OAAAsN,EAAAm4B,EAAA,KAAA6D,MAAA,MAAAh8B,EAAU,OAAOtJ,GACfwC,EAAUA,EAAQ,KAAK47B,EAAI,EAAE,MAAMA,EAAI,EAAI,QAAQ,SAC5D,CACA,SAAU,CACR,MAAM,QAAQ,EACd,KAAK,OAAO,CAAE,OAAQ,EAAM,EAC9B,CACA,OAAQ,CACN,KAAK,QAAQ,EACR,cAASqD,EAAA,KAAK0D,GAAa,CAClC,CACA,UAAW,CACT,OAAO,KAAK,UAAU,KACnBW,GAAajH,GAAeiH,EAAS,QAAQ,QAAS,IAAI,IAAM,GAErE,CACA,YAAa,CACP,YAAK,kBAAkB,EAAI,EACtB,CAAC,KAAK,WAER,KAAK,QAAQ,UAAY/E,IAAa,KAAK,MAAM,gBAAkB,KAAK,MAAM,mBAAqB,CAC5G,CACA,SAAU,CACJ,YAAK,MAAM,cACN,GAEL,KAAK,kBAAkB,EAAI,EACtB,KAAK,UAAU,KACnB+E,GAAaA,EAAS,mBAAmB,SAGvC,KAAK,MAAM,OAAS,MAC7B,CACA,cAAcpH,EAAY,EAAG,CAC3B,OAAO,KAAK,MAAM,eAAiB,KAAK,MAAM,OAAS,QAAU,CAACF,GAAe,KAAK,MAAM,cAAeE,CAAS,CACtH,CACA,SAAU,OACF,MAAAoH,EAAW,KAAK,UAAU,KAAMlb,GAAMA,EAAE,0BAA0B,EACxEkb,GAAA,MAAAA,EAAU,QAAQ,CAAE,cAAe,EAAO,IAC1C9pC,EAAAylC,EAAA,KAAK6D,MAAL,MAAAtpC,EAAe,UACjB,CACA,UAAW,OACH,MAAA8pC,EAAW,KAAK,UAAU,KAAMlb,GAAMA,EAAE,wBAAwB,EACtEkb,GAAA,MAAAA,EAAU,QAAQ,CAAE,cAAe,EAAO,IAC1C9pC,EAAAylC,EAAA,KAAK6D,MAAL,MAAAtpC,EAAe,UACjB,CACA,YAAY8pC,EAAU,CACf,KAAK,UAAU,SAASA,CAAQ,IAC9B,eAAU,KAAKA,CAAQ,EAC5B,KAAK,eAAe,EACfrE,EAAA,KAAA4D,IAAO,OAAO,CAAE,KAAM,gBAAiB,MAAO,KAAM,SAAAS,EAAU,EAEvE,CACA,eAAeA,EAAU,CACnB,KAAK,UAAU,SAASA,CAAQ,IAClC,KAAK,UAAY,KAAK,UAAU,OAAQlb,GAAMA,IAAMkb,CAAQ,EACvD,KAAK,UAAU,SACdrE,EAAA,KAAK6D,MACH7D,EAAA,KAAK+D,IACP/D,EAAA,KAAK6D,IAAS,OAAO,CAAE,OAAQ,EAAM,GAErC7D,EAAA,KAAK6D,IAAS,eAGlB,KAAK,WAAW,GAEb7D,EAAA,KAAA4D,IAAO,OAAO,CAAE,KAAM,kBAAmB,MAAO,KAAM,SAAAS,EAAU,EAEzE,CACA,mBAAoB,CAClB,OAAO,KAAK,UAAU,MACxB,CACA,YAAa,CACN,KAAK,MAAM,eACdH,GAAA,KAAKT,GAAAU,IAAL,UAAe,CAAE,KAAM,YAAc,EAEzC,CACA,MAAM5lC,EAASihC,EAAc,WACvB,QAAK,MAAM,cAAgB,QAC7B,GAAI,KAAK,MAAM,OAAS,SAAUA,GAAA,MAAAA,EAAc,eAC9C,KAAK,OAAO,CAAE,OAAQ,EAAM,WACnBQ,EAAA,KAAK6D,IACd,OAAA7D,EAAA,KAAK6D,IAAS,gBACP7D,EAAA,KAAK6D,IAAS,QAMrB,GAHAtlC,GACF,KAAK,WAAWA,CAAO,EAErB,CAAC,KAAK,QAAQ,QAAS,CACnB,MAAA8lC,EAAW,KAAK,UAAU,KAAMlb,GAAMA,EAAE,QAAQ,OAAO,EACzDkb,GACG,gBAAWA,EAAS,OAAO,CAEpC,CAQM,MAAAC,EAAkB,IAAI,gBACtBC,EAAqBpkC,GAAW,CAC7B,sBAAeA,EAAQ,SAAU,CACtC,WAAY,GACZ,IAAK,KACH2/B,GAAA,KAAKiE,GAAuB,IACrBO,EAAgB,OACzB,CACD,GAEGE,EAAU,IAAM,CACpB,MAAMC,EAAUlF,GAAc,KAAK,QAASC,CAAY,EAClDkF,EAAiB,CACrB,SAAU,KAAK,SACf,KAAM,KAAK,MAIT,OAFJH,EAAkBG,CAAc,EAChC5E,GAAA,KAAKiE,GAAuB,IACxB,KAAK,QAAQ,UACR,KAAK,QAAQ,UAClBU,EACAC,EACA,MAGGD,EAAQC,CAAc,GAEzBzb,EAAU,CACd,aAAAuW,EACA,QAAS,KAAK,QACd,SAAU,KAAK,SACf,MAAO,KAAK,MACZ,QAAAgF,CAAA,EAEFD,EAAkBtb,CAAO,GACzB1uB,EAAA,KAAK,QAAQ,WAAb,MAAAA,EAAuB,QACrB0uB,EACA,MAEF6W,GAAA,KAAK6D,GAAe,KAAK,QACrB,KAAK,MAAM,cAAgB,QAAU,KAAK,MAAM,cAAc97B,EAAAohB,EAAQ,eAAR,YAAAphB,EAAsB,QACjFq8B,GAAA,KAAAT,GAAAU,IAAA,UAAU,CAAE,KAAM,QAAS,MAAMjc,EAAAe,EAAQ,eAAR,YAAAf,EAAsB,OAExD,MAAAyc,EAAW5uC,GAAU,aACnBwrC,GAAiBxrC,CAAK,GAAKA,EAAM,QACrCmuC,GAAA,KAAKT,GAAAU,IAAL,UAAe,CACb,KAAM,QACN,MAAApuC,CAAA,GAGCwrC,GAAiBxrC,CAAK,KACzB8R,GAAAtN,EAAAylC,EAAA,KAAK4D,IAAO,QAAO,UAAnB,MAAA/7B,EAAA,KAAAtN,EACExE,EACA,OAEF6uC,GAAA1c,EAAA8X,EAAA,KAAK4D,IAAO,QAAO,YAAnB,MAAAgB,EAAA,KAAA1c,EACE,KAAK,MAAM,KACXnyB,EACA,OAGJ,KAAK,WAAW,GAElB,OAAA+pC,GAAA,KAAK+D,GAAWrC,GAAc,CAC5B,eAAgBhC,GAAA,YAAAA,EAAc,eAC9B,GAAIvW,EAAQ,QACZ,MAAOqb,EAAgB,MAAM,KAAKA,CAAe,EACjD,UAAY1oC,GAAS,aACnB,GAAIA,IAAS,OAAQ,CAMnB+oC,EAAQ,IAAI,MAAM,GAAG,KAAK,SAAS,oBAAoB,CAAC,EACxD,MACF,CACI,IACF,KAAK,QAAQ/oC,CAAI,QACV7F,EAAO,CACd4uC,EAAQ5uC,CAAK,EACb,MACF,EACA8R,GAAAtN,EAAAylC,EAAA,KAAK4D,IAAO,QAAO,YAAnB,MAAA/7B,EAAA,KAAAtN,EAA+BqB,EAAM,OACrCgpC,GAAA1c,EAAA8X,EAAA,KAAK4D,IAAO,QAAO,YAAnB,MAAAgB,EAAA,KAAA1c,EACEtsB,EACA,KAAK,MAAM,MACX,MAEF,KAAK,WAAW,CAClB,EACA,QAAA+oC,EACA,OAAQ,CAACxD,EAAcprC,IAAU,CAC/BmuC,GAAA,KAAKT,GAAAU,IAAL,UAAe,CAAE,KAAM,SAAU,aAAAhD,EAAc,MAAAprC,GACjD,EACA,QAAS,IAAM,CACbmuC,GAAA,KAAKT,GAAAU,IAAL,UAAe,CAAE,KAAM,OAAS,EAClC,EACA,WAAY,IAAM,CAChBD,GAAA,KAAKT,GAAAU,IAAL,UAAe,CAAE,KAAM,UAAY,EACrC,EACA,MAAOlb,EAAQ,QAAQ,MACvB,WAAYA,EAAQ,QAAQ,WAC5B,YAAaA,EAAQ,QAAQ,YAC7B,OAAQ,IAAM,GACf,GACM+W,EAAA,KAAK6D,IAAS,OACvB,CA4EF,EA9UEH,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YANUN,GAAA,YAoQVU,YAAU7sB,EAAQ,CACV,MAAAwC,EAAWC,GAAU,CACzB,OAAQzC,EAAO,KAAM,CACnB,IAAK,SACI,OACL,GAAGyC,EACH,kBAAmBzC,EAAO,aAC1B,mBAAoBA,EAAO,OAE/B,IAAK,QACI,OACL,GAAGyC,EACH,YAAa,UAEjB,IAAK,WACI,OACL,GAAGA,EACH,YAAa,YAEjB,IAAK,QACI,OACL,GAAGA,EACH,GAAG8qB,GAAW9qB,EAAM,KAAM,KAAK,OAAO,EACtC,UAAWzC,EAAO,MAAQ,MAE9B,IAAK,UACI,OACL,GAAGyC,EACH,KAAMzC,EAAO,KACb,gBAAiByC,EAAM,gBAAkB,EACzC,cAAezC,EAAO,eAAiB,KAAK,IAAI,EAChD,MAAO,KACP,cAAe,GACf,OAAQ,UACR,GAAG,CAACA,EAAO,QAAU,CACnB,YAAa,OACb,kBAAmB,EACnB,mBAAoB,IACtB,GAEJ,IAAK,QACH,MAAMvhB,EAAQuhB,EAAO,MACrB,OAAIiqB,GAAiBxrC,CAAK,GAAKA,EAAM,QAAUiqC,EAAA,KAAK2D,IAC3C,CAAE,GAAG3D,EAAA,KAAK2D,IAAc,YAAa,MAAO,EAE9C,CACL,GAAG5pB,EACH,MAAAhkB,EACA,iBAAkBgkB,EAAM,iBAAmB,EAC3C,eAAgB,KAAK,IAAI,EACzB,kBAAmBA,EAAM,kBAAoB,EAC7C,mBAAoBhkB,EACpB,YAAa,OACb,OAAQ,SAEZ,IAAK,aACI,OACL,GAAGgkB,EACH,cAAe,IAEnB,IAAK,WACI,OACL,GAAGA,EACH,GAAGzC,EAAO,MAEhB,GAEG,WAAQwC,EAAQ,KAAK,KAAK,EAC/BspB,GAAc,MAAM,IAAM,CACnB,eAAU,QAASiB,GAAa,CACnCA,EAAS,cAAc,EACxB,EACIrE,EAAA,KAAA4D,IAAO,OAAO,CAAE,MAAO,KAAM,KAAM,UAAW,OAAAtsB,EAAQ,EAC5D,CACH,EA9UU/c,IAgVZ,SAASsqC,GAAWjpC,EAAM2C,EAAS,CAC1B,OACL,kBAAmB,EACnB,mBAAoB,KACpB,YAAa6iC,GAAS7iC,EAAQ,WAAW,EAAI,WAAa,SAC1D,GAAG3C,IAAS,QAAU,CACpB,MAAO,KACP,OAAQ,SACV,EAEJ,CACA,SAASooC,GAAgBzlC,EAAS,CAC1B,MAAA3C,EAAO,OAAO2C,EAAQ,aAAgB,WAAaA,EAAQ,cAAgBA,EAAQ,YACnFumC,EAAUlpC,IAAS,OACnBmpC,EAAuBD,EAAU,OAAOvmC,EAAQ,sBAAyB,WAAaA,EAAQ,qBAAyB,EAAAA,EAAQ,qBAAuB,EACrJ,OACL,KAAA3C,EACA,gBAAiB,EACjB,cAAekpC,EAAUC,GAAwB,KAAK,IAAQ,IAC9D,MAAO,KACP,iBAAkB,EAClB,eAAgB,EAChB,kBAAmB,EACnB,mBAAoB,KACpB,UAAW,KACX,cAAe,GACf,OAAQD,EAAU,UAAY,UAC9B,YAAa,OAEjB,WCpXIE,IAAazqC,GAAA,cAAckiC,EAAa,CAC1C,YAAY12B,EAAS,GAAI,CACvB,QAIF25B,GAAA,KAAAuF,IAHE,KAAK,OAASl/B,EACd+5B,GAAA,KAAKmF,GAA2B,IAAI,IACrC,CAED,MAAMC,EAAQ3mC,EAASwb,EAAO,CAC5B,MAAM2jB,EAAWn/B,EAAQ,SACnB4mC,EAAY5mC,EAAQ,WAAaq/B,GAAsBF,EAAUn/B,CAAO,EAC9E,IAAI4+B,EAAQ,KAAK,IAAIgI,CAAS,EAC9B,OAAKhI,IACHA,EAAQ,IAAIqG,GAAM,CAChB,MAAO,KACP,SAAA9F,EACA,UAAAyH,EACA,QAASD,EAAO,oBAAoB3mC,CAAO,EAC3C,MAAAwb,EACA,eAAgBmrB,EAAO,iBAAiBxH,CAAQ,CACxD,CAAO,EACD,KAAK,IAAIP,CAAK,GAETA,CACR,CACD,IAAIA,EAAO,CACJ6C,EAAA,KAAKiF,IAAS,IAAI9H,EAAM,SAAS,IACpC6C,EAAA,KAAKiF,IAAS,IAAI9H,EAAM,UAAWA,CAAK,EACxC,KAAK,OAAO,CACV,KAAM,QACN,MAAAA,CACR,CAAO,EAEJ,CACD,OAAOA,EAAO,CACZ,MAAMiI,EAAapF,EAAA,KAAKiF,IAAS,IAAI9H,EAAM,SAAS,EAChDiI,IACFjI,EAAM,QAAO,EACTiI,IAAejI,GACjB6C,EAAA,KAAKiF,IAAS,OAAO9H,EAAM,SAAS,EAEtC,KAAK,OAAO,CAAE,KAAM,UAAW,MAAAA,CAAO,GAEzC,CACD,OAAQ,CACNiG,GAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASjG,GAAU,CAC/B,KAAK,OAAOA,CAAK,CACzB,CAAO,CACP,CAAK,CACF,CACD,IAAIgI,EAAW,CACb,OAAOnF,EAAA,KAAKiF,IAAS,IAAIE,CAAS,CACnC,CACD,QAAS,CACP,MAAO,CAAC,GAAGnF,EAAA,KAAKiF,IAAS,OAAQ,EAClC,CACD,KAAK3H,EAAS,CACZ,MAAM+H,EAAmB,CAAE,MAAO,GAAM,GAAG/H,CAAO,EAClD,OAAO,KAAK,OAAM,EAAG,KAClBH,GAAUE,GAAWgI,EAAkBlI,CAAK,CACnD,CACG,CACD,QAAQG,EAAU,GAAI,CACpB,MAAMgI,EAAU,KAAK,SACrB,OAAO,OAAO,KAAKhI,CAAO,EAAE,OAAS,EAAIgI,EAAQ,OAAQnI,GAAUE,GAAWC,EAASH,CAAK,CAAC,EAAImI,CAClG,CACD,OAAO9tC,EAAO,CACZ4rC,GAAc,MAAM,IAAM,CACxB,KAAK,UAAU,QAAS3uB,GAAa,CACnCA,EAASjd,CAAK,CACtB,CAAO,CACP,CAAK,CACF,CACD,SAAU,CACR4rC,GAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASjG,GAAU,CAC/BA,EAAM,QAAO,CACrB,CAAO,CACP,CAAK,CACF,CACD,UAAW,CACTiG,GAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASjG,GAAU,CAC/BA,EAAM,SAAQ,CACtB,CAAO,CACP,CAAK,CACF,CACH,EAjFE8H,GAAA,YANe1qC,sBCDbgrC,IAAWhrC,GAAA,cAAc8oC,EAAU,CAIrC,YAAYt9B,EAAQ,CAClB,QALW25B,GAAA,KAAA8F,IACb9F,GAAA,KAAA+F,IACA/F,GAAA,KAAAgG,IACAhG,GAAA,KAAAmE,IAGE,KAAK,WAAa99B,EAAO,WACzB+5B,GAAA,KAAK4F,GAAiB3/B,EAAO,eAC7B+5B,GAAA,KAAK2F,GAAa,IAClB,KAAK,MAAQ1/B,EAAO,OAASi+B,GAAe,EAC5C,KAAK,WAAWj+B,EAAO,OAAO,EAC9B,KAAK,WAAU,CAChB,CACD,WAAWxH,EAAS,CAClB,KAAK,QAAUA,EACf,KAAK,aAAa,KAAK,QAAQ,MAAM,CACtC,CACD,IAAI,MAAO,CACT,OAAO,KAAK,QAAQ,IACrB,CACD,YAAY8lC,EAAU,CACfrE,EAAA,KAAKyF,IAAW,SAASpB,CAAQ,IACpCrE,EAAA,KAAKyF,IAAW,KAAKpB,CAAQ,EAC7B,KAAK,eAAc,EACnBrE,EAAA,KAAK0F,IAAe,OAAO,CACzB,KAAM,gBACN,SAAU,KACV,SAAArB,CACR,CAAO,EAEJ,CACD,eAAeA,EAAU,CACvBvE,GAAA,KAAK2F,GAAazF,EAAA,KAAKyF,IAAW,OAAQtc,GAAMA,IAAMkb,CAAQ,GAC9D,KAAK,WAAU,EACfrE,EAAA,KAAK0F,IAAe,OAAO,CACzB,KAAM,kBACN,SAAU,KACV,SAAArB,CACN,CAAK,CACF,CACD,gBAAiB,CACVrE,EAAA,KAAKyF,IAAW,SACf,KAAK,MAAM,SAAW,UACxB,KAAK,WAAU,EAEfzF,EAAA,KAAK0F,IAAe,OAAO,IAAI,EAGpC,CACD,UAAW,OACT,QAAOnrC,EAAAylC,EAAA,KAAK6D,MAAL,YAAAtpC,EAAe,aACtB,KAAK,QAAQ,KAAK,MAAM,SAAS,CAClC,CACD,MAAM,QAAQorC,EAAW,6CACvB7F,GAAA,KAAK+D,GAAWrC,GAAc,CAC5B,GAAI,IACG,KAAK,QAAQ,WAGX,KAAK,QAAQ,WAAWmE,CAAS,EAF/B,QAAQ,OAAO,IAAI,MAAM,qBAAqB,CAAC,EAI1D,OAAQ,CAACxE,EAAcprC,IAAU,CAC/BmuC,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,SAAU,aAAAhD,EAAc,MAAAprC,CAAK,EACrD,EACD,QAAS,IAAM,CACbmuC,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,OAAS,EACjC,EACD,WAAY,IAAM,CAChBD,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,UAAY,EACpC,EACD,MAAO,KAAK,QAAQ,OAAS,EAC7B,WAAY,KAAK,QAAQ,WACzB,YAAa,KAAK,QAAQ,YAC1B,OAAQ,IAAMnE,EAAA,KAAK0F,IAAe,OAAO,IAAI,CACnD,CAAK,GACD,MAAME,EAAW,KAAK,MAAM,SAAW,UACjCC,EAAW,CAAC7F,EAAA,KAAK6D,IAAS,SAAQ,EACxC,GAAI,CACF,GAAI,CAAC+B,EAAU,CACb1B,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,UAAW,UAAAwB,EAAW,SAAAE,CAAQ,GACrD,OAAMh+B,GAAAtN,EAAAylC,EAAA,KAAK0F,IAAe,QAAO,WAA3B,YAAA79B,EAAA,KAAAtN,EACJorC,EACA,OAEF,MAAM1c,EAAU,OAAM2b,GAAA1c,EAAA,KAAK,SAAQ,WAAb,YAAA0c,EAAA,KAAA1c,EAAwByd,IAC1C1c,IAAY,KAAK,MAAM,SACzBib,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CACb,KAAM,UACN,QAAAlb,EACA,UAAA0c,EACA,SAAAE,CACZ,EAEO,CACD,MAAMjqC,EAAO,MAAMokC,EAAA,KAAK6D,IAAS,MAAK,EACtC,cAAMiC,GAAAC,EAAA/F,EAAA,KAAK0F,IAAe,QAAO,YAA3B,YAAAI,EAAA,KAAAC,EACJnqC,EACA+pC,EACA,KAAK,MAAM,QACX,OAEF,OAAMK,GAAAC,EAAA,KAAK,SAAQ,YAAb,YAAAD,EAAA,KAAAC,EAAyBrqC,EAAM+pC,EAAW,KAAK,MAAM,UAC3D,OAAMO,GAAAC,EAAAnG,EAAA,KAAK0F,IAAe,QAAO,YAA3B,YAAAQ,EAAA,KAAAC,EACJvqC,EACA,KACA,KAAK,MAAM,UACX,KAAK,MAAM,QACX,OAEF,OAAMwqC,GAAAC,EAAA,KAAK,SAAQ,YAAb,YAAAD,EAAA,KAAAC,EAAyBzqC,EAAM,KAAM+pC,EAAW,KAAK,MAAM,UACjEzB,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,UAAW,KAAAvoC,CAAM,GACjCA,CACR,OAAQ7F,EAAO,CACd,GAAI,CACF,aAAMuwC,GAAAC,EAAAvG,EAAA,KAAK0F,IAAe,QAAO,UAA3B,YAAAY,EAAA,KAAAC,EACJxwC,EACA4vC,EACA,KAAK,MAAM,QACX,OAEF,OAAMa,GAAAC,EAAA,KAAK,SAAQ,UAAb,YAAAD,EAAA,KAAAC,EACJ1wC,EACA4vC,EACA,KAAK,MAAM,UAEb,OAAMe,GAAAC,EAAA3G,EAAA,KAAK0F,IAAe,QAAO,YAA3B,YAAAgB,EAAA,KAAAC,EACJ,OACA5wC,EACA,KAAK,MAAM,UACX,KAAK,MAAM,QACX,OAEF,OAAMk5B,GAAA2X,EAAA,KAAK,SAAQ,YAAb,YAAA3X,EAAA,KAAA2X,EACJ,OACA7wC,EACA4vC,EACA,KAAK,MAAM,UAEP5vC,CACd,QAAgB,CACRmuC,GAAA,KAAKsB,GAAArB,IAAL,UAAe,CAAE,KAAM,QAAS,MAAApuC,CAAO,EACxC,CACP,QAAc,CACRiqC,EAAA,KAAK0F,IAAe,QAAQ,IAAI,CACjC,CACF,CAmEH,EAnNED,GAAA,YACAC,GAAA,YACA7B,GAAA,YAHa2B,GAAA,YAkJbrB,GAAS,SAAC7sB,EAAQ,CAChB,MAAMwC,EAAWC,GAAU,CACzB,OAAQzC,EAAO,KAAI,CACjB,IAAK,SACH,MAAO,CACL,GAAGyC,EACH,aAAczC,EAAO,aACrB,cAAeA,EAAO,KAClC,EACQ,IAAK,QACH,MAAO,CACL,GAAGyC,EACH,SAAU,EACtB,EACQ,IAAK,WACH,MAAO,CACL,GAAGA,EACH,SAAU,EACtB,EACQ,IAAK,UACH,MAAO,CACL,GAAGA,EACH,QAASzC,EAAO,QAChB,KAAM,OACN,aAAc,EACd,cAAe,KACf,MAAO,KACP,SAAUA,EAAO,SACjB,OAAQ,UACR,UAAWA,EAAO,UAClB,YAAa,KAAK,IAAK,CACnC,EACQ,IAAK,UACH,MAAO,CACL,GAAGyC,EACH,KAAMzC,EAAO,KACb,aAAc,EACd,cAAe,KACf,MAAO,KACP,OAAQ,UACR,SAAU,EACtB,EACQ,IAAK,QACH,MAAO,CACL,GAAGyC,EACH,KAAM,OACN,MAAOzC,EAAO,MACd,aAAcyC,EAAM,aAAe,EACnC,cAAezC,EAAO,MACtB,SAAU,GACV,OAAQ,OACpB,CACO,CACP,EACI,KAAK,MAAQwC,EAAQ,KAAK,KAAK,EAC/BspB,GAAc,MAAM,IAAM,CACxBpD,EAAA,KAAKyF,IAAW,QAASpB,GAAa,CACpCA,EAAS,iBAAiB/sB,CAAM,CACxC,CAAO,EACD0oB,EAAA,KAAK0F,IAAe,OAAO,CACzB,SAAU,KACV,KAAM,UACN,OAAApuB,CACR,CAAO,CACP,CAAK,CACF,EAnNY/c,IAqNf,SAASypC,IAAkB,CACzB,MAAO,CACL,QAAS,OACT,KAAM,OACN,MAAO,KACP,aAAc,EACd,cAAe,KACf,SAAU,GACV,OAAQ,OACR,UAAW,OACX,YAAa,CACjB,CACA,cChOI6C,IAAgBtsC,GAAA,cAAckiC,EAAa,CAC7C,YAAY12B,EAAS,GAAI,CACvB,QAKF25B,GAAA,KAAAoH,IACApH,GAAA,KAAAqH,IALE,KAAK,OAAShhC,EACd+5B,GAAA,KAAKgH,GAA6B,IAAI,KACtChH,GAAA,KAAKiH,GAAc,KAAK,MACzB,CAGD,MAAM7B,EAAQ3mC,EAASwb,EAAO,CAC5B,MAAMgkB,EAAW,IAAIwH,GAAS,CAC5B,cAAe,KACf,WAAmB,EAALyB,GAAA,KAAKD,IAAL,EACd,QAAS7B,EAAO,uBAAuB3mC,CAAO,EAC9C,MAAAwb,CACN,CAAK,EACD,YAAK,IAAIgkB,CAAQ,EACVA,CACR,CACD,IAAIA,EAAU,CACZ,MAAMkJ,EAAQC,GAASnJ,CAAQ,EACzBoJ,EAAYnH,EAAA,KAAK8G,IAAW,IAAIG,CAAK,GAAK,GAChDE,EAAU,KAAKpJ,CAAQ,EACvBiC,EAAA,KAAK8G,IAAW,IAAIG,EAAOE,CAAS,EACpC,KAAK,OAAO,CAAE,KAAM,QAAS,SAAApJ,CAAU,EACxC,CACD,OAAOA,EAAU,OACf,MAAMkJ,EAAQC,GAASnJ,CAAQ,EAC/B,GAAIiC,EAAA,KAAK8G,IAAW,IAAIG,CAAK,EAAG,CAC9B,MAAME,GAAY5sC,EAAAylC,EAAA,KAAK8G,IAAW,IAAIG,CAAK,IAAzB,YAAA1sC,EAA4B,OAAQ4uB,GAAMA,IAAM4U,GAC9DoJ,IACEA,EAAU,SAAW,EACvBnH,EAAA,KAAK8G,IAAW,OAAOG,CAAK,EAE5BjH,EAAA,KAAK8G,IAAW,IAAIG,EAAOE,CAAS,EAGzC,CACD,KAAK,OAAO,CAAE,KAAM,UAAW,SAAApJ,CAAU,EAC1C,CACD,OAAOA,EAAU,OACf,MAAMqJ,GAAuB7sC,EAAAylC,EAAA,KAAK8G,IAAW,IAAII,GAASnJ,CAAQ,CAAC,IAAtC,YAAAxjC,EAAyC,KAAM9E,GAAMA,EAAE,MAAM,SAAW,WACrG,MAAO,CAAC2xC,GAAwBA,IAAyBrJ,CAC1D,CACD,QAAQA,EAAU,OAChB,MAAMsJ,GAAgB9sC,EAAAylC,EAAA,KAAK8G,IAAW,IAAII,GAASnJ,CAAQ,CAAC,IAAtC,YAAAxjC,EAAyC,KAAM9E,GAAMA,IAAMsoC,GAAYtoC,EAAE,MAAM,UACrG,OAAO4xC,GAAA,YAAAA,EAAe,aAAc,QAAQ,QAAO,CACpD,CACD,OAAQ,CACNjE,GAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASrF,GAAa,CAClC,KAAK,OAAOA,CAAQ,CAC5B,CAAO,CACP,CAAK,CACF,CACD,QAAS,CACP,MAAO,CAAC,GAAGiC,EAAA,KAAK8G,IAAW,OAAQ,GAAE,MACtC,CACD,KAAKxJ,EAAS,CACZ,MAAM+H,EAAmB,CAAE,MAAO,GAAM,GAAG/H,CAAO,EAClD,OAAO,KAAK,OAAM,EAAG,KAClBS,GAAaD,GAAcuH,EAAkBtH,CAAQ,CAC5D,CACG,CACD,QAAQT,EAAU,GAAI,CACpB,OAAO,KAAK,OAAQ,EAAC,OAAQS,GAAaD,GAAcR,EAASS,CAAQ,CAAC,CAC3E,CACD,OAAOvmC,EAAO,CACZ4rC,GAAc,MAAM,IAAM,CACxB,KAAK,UAAU,QAAS3uB,GAAa,CACnCA,EAASjd,CAAK,CACtB,CAAO,CACP,CAAK,CACF,CACD,uBAAwB,CACtB,MAAM8vC,EAAkB,KAAK,SAAS,OAAQne,GAAMA,EAAE,MAAM,QAAQ,EACpE,OAAOia,GAAc,MACnB,IAAM,QAAQ,IACZkE,EAAgB,IAAKvJ,GAAaA,EAAS,WAAW,MAAMpB,EAAI,CAAC,CAClE,CACP,CACG,CACH,EA3EEmK,GAAA,YACAC,GAAA,YARkBxsC,IAmFpB,SAAS2sC,GAASnJ,EAAU,OAC1B,QAAOxjC,EAAAwjC,EAAS,QAAQ,QAAjB,YAAAxjC,EAAwB,KAAM,OAAOwjC,EAAS,UAAU,CACjE,CCxFA,SAASwJ,GAAsBC,EAAO,CACpC,MAAO,CACL,QAAS,CAACve,EAASkU,IAAU,eAC3B,MAAM5+B,EAAU0qB,EAAQ,QAClB7Q,GAAY8P,GAAArgB,GAAAtN,EAAA0uB,EAAQ,eAAR,YAAA1uB,EAAsB,OAAtB,YAAAsN,EAA4B,YAA5B,YAAAqgB,EAAuC,UACnDuf,IAAW7C,EAAA3b,EAAQ,MAAM,OAAd,YAAA2b,EAAoB,QAAS,GACxC8C,IAAgB3B,EAAA9c,EAAQ,MAAM,OAAd,YAAA8c,EAAoB,aAAc,GACxD,IAAI3+B,EAAS,CAAE,MAAO,CAAE,EAAE,WAAY,CAAE,GACpCugC,EAAc,EAClB,MAAMnD,EAAU,SAAY,CAC1B,IAAIoD,EAAY,GAChB,MAAMrD,EAAqBpkC,GAAW,CACpC,OAAO,eAAeA,EAAQ,SAAU,CACtC,WAAY,GACZ,IAAK,KACC8oB,EAAQ,OAAO,QACjB2e,EAAY,GAEZ3e,EAAQ,OAAO,iBAAiB,QAAS,IAAM,CAC7C2e,EAAY,EAC9B,CAAiB,EAEI3e,EAAQ,OAE7B,CAAW,CACX,EACcwb,EAAUlF,GAActW,EAAQ,QAASA,EAAQ,YAAY,EAC7D4e,EAAY,MAAOjsC,EAAMigB,EAAOisB,IAAa,CACjD,GAAIF,EACF,OAAO,QAAQ,SAEjB,GAAI/rB,GAAS,MAAQjgB,EAAK,MAAM,OAC9B,OAAO,QAAQ,QAAQA,CAAI,EAE7B,MAAM8oC,EAAiB,CACrB,SAAUzb,EAAQ,SAClB,UAAWpN,EACX,UAAWisB,EAAW,WAAa,UACnC,KAAM7e,EAAQ,QAAQ,IAClC,EACUsb,EAAkBG,CAAc,EAChC,MAAMqD,EAAO,MAAMtD,EACjBC,CACZ,EACgB,CAAE,SAAAsD,CAAQ,EAAK/e,EAAQ,QACvBgf,EAAQH,EAAWzI,GAAaJ,GACtC,MAAO,CACL,MAAOgJ,EAAMrsC,EAAK,MAAOmsC,EAAMC,CAAQ,EACvC,WAAYC,EAAMrsC,EAAK,WAAYigB,EAAOmsB,CAAQ,CAC9D,CACA,EACQ,GAAI5vB,GAAaqvB,EAAS,OAAQ,CAChC,MAAMK,EAAW1vB,IAAc,WACzB8vB,EAAcJ,EAAWK,GAAuBC,GAChDC,EAAU,CACd,MAAOZ,EACP,WAAYC,CACxB,EACgB7rB,EAAQqsB,EAAY3pC,EAAS8pC,CAAO,EAC1CjhC,EAAS,MAAMygC,EAAUQ,EAASxsB,EAAOisB,CAAQ,CAC3D,KAAe,CACL,MAAMQ,EAAiBd,GAASC,EAAS,OACzC,EAAG,CACD,MAAM5rB,EAAQ8rB,IAAgB,EAAID,EAAc,CAAC,GAAKnpC,EAAQ,iBAAmB6pC,GAAiB7pC,EAAS6I,CAAM,EACjH,GAAIugC,EAAc,GAAK9rB,GAAS,KAC9B,MAEFzU,EAAS,MAAMygC,EAAUzgC,EAAQyU,CAAK,EACtC8rB,GACZ,OAAmBA,EAAcW,EACxB,CACD,OAAOlhC,CACf,EACU6hB,EAAQ,QAAQ,UAClBA,EAAQ,QAAU,IAAM,SACtB,OAAOphB,GAAAtN,EAAA0uB,EAAQ,SAAQ,YAAhB,YAAAphB,EAAA,KAAAtN,EACLiqC,EACA,CACE,SAAUvb,EAAQ,SAClB,KAAMA,EAAQ,QAAQ,KACtB,OAAQA,EAAQ,MACjB,EACDkU,EAEZ,EAEQlU,EAAQ,QAAUub,CAErB,CACL,CACA,CACA,SAAS4D,GAAiB7pC,EAAS,CAAE,MAAAipC,EAAO,WAAAe,CAAU,EAAI,CACxD,MAAMC,EAAYhB,EAAM,OAAS,EACjC,OAAOA,EAAM,OAAS,EAAIjpC,EAAQ,iBAChCipC,EAAMgB,CAAS,EACfhB,EACAe,EAAWC,CAAS,EACpBD,CACD,EAAG,MACN,CACA,SAASJ,GAAqB5pC,EAAS,CAAE,MAAAipC,EAAO,WAAAe,CAAU,EAAI,OAC5D,OAAOf,EAAM,OAAS,GAAIjtC,EAAAgE,EAAQ,uBAAR,YAAAhE,EAAA,KAAAgE,EAA+BipC,EAAM,CAAC,EAAGA,EAAOe,EAAW,CAAC,EAAGA,GAAc,MACzG,gCCxFIE,IAAcluC,GAAA,KAAM,CAStB,YAAYwL,EAAS,GAAI,CARzB25B,GAAA,KAAAgJ,IACAhJ,GAAA,KAAAgG,IACAhG,GAAA,KAAAoE,IACApE,GAAA,KAAAiJ,IACAjJ,GAAA,KAAAkJ,IACAlJ,GAAA,KAAAmJ,IACAnJ,GAAA,KAAAoJ,IACApJ,GAAA,KAAAqJ,IAEEjJ,GAAA,KAAK4I,GAAc3iC,EAAO,YAAc,IAAIi/B,IAC5ClF,GAAA,KAAK4F,GAAiB3/B,EAAO,eAAiB,IAAI8gC,IAClD/G,GAAA,KAAKgE,GAAkB/9B,EAAO,gBAAkB,IAChD+5B,GAAA,KAAK6I,GAAiC,IAAI,KAC1C7I,GAAA,KAAK8I,GAAoC,IAAI,KAC7C9I,GAAA,KAAK+I,GAAc,EACpB,CACD,OAAQ,CACN7B,GAAA,KAAK6B,IAAL,IACI7I,EAAA,KAAK6I,MAAgB,IAEzB/I,GAAA,KAAKgJ,GAAoB1I,GAAa,UAAU,MAAOF,GAAY,CAC7DA,IACF,MAAM,KAAK,wBACXF,EAAA,KAAK0I,IAAY,UAEzB,CAAK,GACD5I,GAAA,KAAKiJ,GAAqBpI,GAAc,UAAU,MAAOD,GAAW,CAC9DA,IACF,MAAM,KAAK,wBACXV,EAAA,KAAK0I,IAAY,WAEzB,CAAK,GACF,CACD,SAAU,SACR1B,GAAA,KAAK6B,IAAL,IACI7I,EAAA,KAAK6I,MAAgB,KAEzBtuC,EAAAylC,EAAA,KAAK8I,MAAL,MAAAvuC,EAAA,WACAulC,GAAA,KAAKgJ,GAAoB,SACzBjhC,EAAAm4B,EAAA,KAAK+I,MAAL,MAAAlhC,EAAA,WACAi4B,GAAA,KAAKiJ,GAAqB,QAC3B,CACD,WAAWzL,EAAS,CAClB,OAAO0C,EAAA,KAAK0I,IAAY,QAAQ,CAAE,GAAGpL,EAAS,YAAa,WAAY,EAAE,MAC1E,CACD,WAAWA,EAAS,CAClB,OAAO0C,EAAA,KAAK0F,IAAe,QAAQ,CAAE,GAAGpI,EAAS,OAAQ,UAAW,EAAE,MACvE,CACD,aAAaI,EAAU,OACrB,MAAMn/B,EAAU,KAAK,oBAAoB,CAAE,SAAAm/B,CAAU,GACrD,OAAOnjC,EAAAylC,EAAA,KAAK0I,IAAY,IAAInqC,EAAQ,SAAS,IAAtC,YAAAhE,EAAyC,MAAM,IACvD,CACD,gBAAgBgE,EAAS,CACvB,MAAMyqC,EAAa,KAAK,aAAazqC,EAAQ,QAAQ,EACrD,GAAIyqC,IAAe,OACjB,OAAO,KAAK,WAAWzqC,CAAO,EAC3B,CACH,MAAM0qC,EAAmB,KAAK,oBAAoB1qC,CAAO,EACnD4+B,EAAQ6C,EAAA,KAAK0I,IAAY,MAAM,KAAMO,CAAgB,EAC3D,OAAI1qC,EAAQ,mBAAqB4+B,EAAM,cAAcD,GAAiB+L,EAAiB,UAAW9L,CAAK,CAAC,GACjG,KAAK,cAAc8L,CAAgB,EAEnC,QAAQ,QAAQD,CAAU,CAClC,CACF,CACD,eAAe1L,EAAS,CACtB,OAAO0C,EAAA,KAAK0I,IAAY,QAAQpL,CAAO,EAAE,IAAI,CAAC,CAAE,SAAAI,EAAU,MAAA3jB,KAAY,CACpE,MAAMne,EAAOme,EAAM,KACnB,MAAO,CAAC2jB,EAAU9hC,CAAI,CAC5B,CAAK,CACF,CACD,aAAa8hC,EAAUb,EAASt+B,EAAS,CACvC,MAAM0qC,EAAmB,KAAK,oBAAoB,CAAE,SAAAvL,CAAU,GACxDP,EAAQ6C,EAAA,KAAK0I,IAAY,IAC7BO,EAAiB,SACvB,EACUjK,EAAW7B,GAAA,YAAAA,EAAO,MAAM,KACxBvhC,EAAOghC,GAAiBC,EAASmC,CAAQ,EAC/C,GAAIpjC,IAAS,OAGb,OAAOokC,EAAA,KAAK0I,IAAY,MAAM,KAAMO,CAAgB,EAAE,QAAQrtC,EAAM,CAAE,GAAG2C,EAAS,OAAQ,EAAM,EACjG,CACD,eAAe++B,EAAST,EAASt+B,EAAS,CACxC,OAAO6kC,GAAc,MACnB,IAAMpD,EAAA,KAAK0I,IAAY,QAAQpL,CAAO,EAAE,IAAI,CAAC,CAAE,SAAAI,KAAe,CAC5DA,EACA,KAAK,aAAaA,EAAUb,EAASt+B,CAAO,CACpD,CAAO,CACP,CACG,CACD,cAAcm/B,EAAU,OACtB,MAAMn/B,EAAU,KAAK,oBAAoB,CAAE,SAAAm/B,CAAU,GACrD,OAAOnjC,EAAAylC,EAAA,KAAK0I,IAAY,IAAInqC,EAAQ,SAAS,IAAtC,YAAAhE,EAAyC,KACjD,CACD,cAAc+iC,EAAS,CACrB,MAAM4L,EAAalJ,EAAA,KAAK0I,IACxBtF,GAAc,MAAM,IAAM,CACxB8F,EAAW,QAAQ5L,CAAO,EAAE,QAASH,GAAU,CAC7C+L,EAAW,OAAO/L,CAAK,CAC/B,CAAO,CACP,CAAK,CACF,CACD,aAAaG,EAAS/+B,EAAS,CAC7B,MAAM2qC,EAAalJ,EAAA,KAAK0I,IAClBS,EAAiB,CACrB,KAAM,SACN,GAAG7L,CACT,EACI,OAAO8F,GAAc,MAAM,KACzB8F,EAAW,QAAQ5L,CAAO,EAAE,QAASH,GAAU,CAC7CA,EAAM,MAAK,CACnB,CAAO,EACM,KAAK,eAAegM,EAAgB5qC,CAAO,EACnD,CACF,CACD,cAAc++B,EAAU,GAAIuE,EAAgB,GAAI,CAC9C,MAAMuH,EAAyB,CAAE,OAAQ,GAAM,GAAGvH,CAAa,EACzDlxB,EAAWyyB,GAAc,MAC7B,IAAMpD,EAAA,KAAK0I,IAAY,QAAQpL,CAAO,EAAE,IAAKH,GAAUA,EAAM,OAAOiM,CAAsB,CAAC,CACjG,EACI,OAAO,QAAQ,IAAIz4B,CAAQ,EAAE,KAAKgsB,EAAI,EAAE,MAAMA,EAAI,CACnD,CACD,kBAAkBW,EAAU,GAAI/+B,EAAU,GAAI,CAC5C,OAAO6kC,GAAc,MAAM,IAAM,CAI/B,GAHApD,EAAA,KAAK0I,IAAY,QAAQpL,CAAO,EAAE,QAASH,GAAU,CACnDA,EAAM,WAAU,CACxB,CAAO,EACGG,EAAQ,cAAgB,OAC1B,OAAO,QAAQ,UAEjB,MAAM6L,EAAiB,CACrB,GAAG7L,EACH,KAAMA,EAAQ,aAAeA,EAAQ,MAAQ,QACrD,EACM,OAAO,KAAK,eAAe6L,EAAgB5qC,CAAO,CACxD,CAAK,CACF,CACD,eAAe++B,EAAU,CAAE,EAAE/+B,EAAS,CACpC,MAAMihC,EAAe,CACnB,GAAGjhC,EACH,eAAeA,GAAA,YAAAA,EAAS,gBAAiB,EAC/C,EACUoS,EAAWyyB,GAAc,MAC7B,IAAMpD,EAAA,KAAK0I,IAAY,QAAQpL,CAAO,EAAE,OAAQH,GAAU,CAACA,EAAM,WAAU,CAAE,EAAE,IAAKA,GAAU,CAC5F,IAAIp8B,EAAUo8B,EAAM,MAAM,OAAQqC,CAAY,EAC9C,OAAKA,EAAa,eAChBz+B,EAAUA,EAAQ,MAAM47B,EAAI,GAEvBQ,EAAM,MAAM,cAAgB,SAAW,QAAQ,QAAS,EAAGp8B,CAC1E,CAAO,CACP,EACI,OAAO,QAAQ,IAAI4P,CAAQ,EAAE,KAAKgsB,EAAI,CACvC,CACD,WAAWp+B,EAAS,CAClB,MAAM0qC,EAAmB,KAAK,oBAAoB1qC,CAAO,EACrD0qC,EAAiB,QAAU,SAC7BA,EAAiB,MAAQ,IAE3B,MAAM9L,EAAQ6C,EAAA,KAAK0I,IAAY,MAAM,KAAMO,CAAgB,EAC3D,OAAO9L,EAAM,cACXD,GAAiB+L,EAAiB,UAAW9L,CAAK,CACxD,EAAQA,EAAM,MAAM8L,CAAgB,EAAI,QAAQ,QAAQ9L,EAAM,MAAM,IAAI,CACrE,CACD,cAAc5+B,EAAS,CACrB,OAAO,KAAK,WAAWA,CAAO,EAAE,KAAKo+B,EAAI,EAAE,MAAMA,EAAI,CACtD,CACD,mBAAmBp+B,EAAS,CAC1B,OAAAA,EAAQ,SAAWgpC,GAAsBhpC,EAAQ,KAAK,EAC/C,KAAK,WAAWA,CAAO,CAC/B,CACD,sBAAsBA,EAAS,CAC7B,OAAO,KAAK,mBAAmBA,CAAO,EAAE,KAAKo+B,EAAI,EAAE,MAAMA,EAAI,CAC9D,CACD,wBAAwBp+B,EAAS,CAC/B,OAAAA,EAAQ,SAAWgpC,GAAsBhpC,EAAQ,KAAK,EAC/C,KAAK,gBAAgBA,CAAO,CACpC,CACD,uBAAwB,CACtB,OAAIoiC,GAAc,WACTX,EAAA,KAAK0F,IAAe,wBAEtB,QAAQ,SAChB,CACD,eAAgB,CACd,OAAO1F,EAAA,KAAK0I,GACb,CACD,kBAAmB,CACjB,OAAO1I,EAAA,KAAK0F,GACb,CACD,mBAAoB,CAClB,OAAO1F,EAAA,KAAK8D,GACb,CACD,kBAAkBvlC,EAAS,CACzBuhC,GAAA,KAAKgE,GAAkBvlC,EACxB,CACD,iBAAiBm/B,EAAUn/B,EAAS,CAClCyhC,EAAA,KAAK2I,IAAe,IAAIzK,GAAQR,CAAQ,EAAG,CACzC,SAAAA,EACA,eAAgBn/B,CACtB,CAAK,CACF,CACD,iBAAiBm/B,EAAU,CACzB,MAAM2L,EAAW,CAAC,GAAGrJ,EAAA,KAAK2I,IAAe,OAAQ,GACjD,IAAIvhC,EAAS,GACb,OAAAiiC,EAAS,QAASC,GAAiB,CAC7BzL,GAAgBH,EAAU4L,EAAa,QAAQ,IACjDliC,EAAS,CAAE,GAAGA,EAAQ,GAAGkiC,EAAa,cAAc,EAE5D,CAAK,EACMliC,CACR,CACD,oBAAoB62B,EAAa1/B,EAAS,CACxCyhC,EAAA,KAAK4I,IAAkB,IAAI1K,GAAQD,CAAW,EAAG,CAC/C,YAAAA,EACA,eAAgB1/B,CACtB,CAAK,CACF,CACD,oBAAoB0/B,EAAa,CAC/B,MAAMoL,EAAW,CAAC,GAAGrJ,EAAA,KAAK4I,IAAkB,OAAQ,GACpD,IAAIxhC,EAAS,GACb,OAAAiiC,EAAS,QAASC,GAAiB,CAC7BzL,GAAgBI,EAAaqL,EAAa,WAAW,IACvDliC,EAAS,CAAE,GAAGA,EAAQ,GAAGkiC,EAAa,cAAc,EAE5D,CAAK,EACMliC,CACR,CACD,oBAAoB7I,EAAS,CAC3B,GAAIA,EAAQ,WACV,OAAOA,EAET,MAAM0qC,EAAmB,CACvB,GAAGjJ,EAAA,KAAK8D,IAAgB,QACxB,GAAG,KAAK,iBAAiBvlC,EAAQ,QAAQ,EACzC,GAAGA,EACH,WAAY,EAClB,EACI,OAAK0qC,EAAiB,YACpBA,EAAiB,UAAYrL,GAC3BqL,EAAiB,SACjBA,CACR,GAEQA,EAAiB,qBAAuB,SAC1CA,EAAiB,mBAAqBA,EAAiB,cAAgB,UAErEA,EAAiB,eAAiB,SACpCA,EAAiB,aAAe,CAAC,CAACA,EAAiB,UAEjD,CAACA,EAAiB,aAAeA,EAAiB,YACpDA,EAAiB,YAAc,gBAE7BA,EAAiB,UAAY,IAAQA,EAAiB,UAAY3J,KACpE2J,EAAiB,QAAU,IAEtBA,CACR,CACD,uBAAuB1qC,EAAS,CAC9B,OAAIA,GAAA,MAAAA,EAAS,WACJA,EAEF,CACL,GAAGyhC,EAAA,KAAK8D,IAAgB,UACxB,IAAGvlC,GAAA,YAAAA,EAAS,cAAe,KAAK,oBAAoBA,EAAQ,WAAW,EACvE,GAAGA,EACH,WAAY,EAClB,CACG,CACD,OAAQ,CACNyhC,EAAA,KAAK0I,IAAY,QACjB1I,EAAA,KAAK0F,IAAe,OACrB,CACH,EAjREgD,GAAA,YACAhD,GAAA,YACA5B,GAAA,YACA6E,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YARgBxuC,ICXdgvC,GAAqBC,EAAmB,cAC1C,MACF,EAWIC,GAAsB,CAAC,CACzB,OAAAvE,EACA,SAAAlQ,CACF,KACEta,YAAgB,KACdwqB,EAAO,MAAK,EACL,IAAM,CACXA,EAAO,QAAO,CACpB,GACK,CAACA,CAAM,CAAC,EACYne,MAAIwiB,GAAmB,SAAU,CAAE,MAAOrE,EAAQ,SAAAlQ,CAAQ,CAAE,GClBrF,MAAM0U,GAAa,CACjB,KAAM,UACN,KAAM,UACN,MAAO,UACP,MAAO,SACT,EAYMC,GAAyB,GACzBC,GAAkB,IASjB,SAASC,GACdC,EACA5zC,EACA6zC,EAAkB,OAClBnuC,EACA,CAEA,GAAImuC,IAAU,QAEgB,CAC1B,gCACA,mCACA,gDACA,gBACA,uBACA,oBACA,wBAIuC,KAAKC,GAC5C9zC,EAAQ,SAAS8zC,CAAO,GACvBpuC,GAAQ,KAAK,UAAUA,CAAI,EAAE,SAASouC,CAAO,IAI5B,CAAC9zC,EAAQ,SAAS,qBAAsB,EAE1D,OAIE,MAAA4J,MAAU,KAEV2d,EAAS,IADG3d,EAAI,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CAClC,KAAKgqC,CAAM,IAEjCG,EAAQ,UAAUP,GAAWK,CAAK,CAAC,sBAiBzC,OAdAJ,GAAW,KAAK,CACd,UAAW7pC,EAAI,YAAY,EAC3B,OAAAgqC,EACA,QAAA5zC,EACA,MAAA6zC,EACA,KAAAnuC,CAAA,CACD,EAGG+tC,GAAW,OAASC,IACtBD,GAAW,MAAM,EAIXI,EAAO,CACb,IAAK,OACK,YAAI,KAAKtsB,CAAM,IAAIvnB,CAAO,GAAI+zC,EAAOruC,GAAc,EAAE,EAC7D,MACF,IAAK,OACK,aAAK,KAAK6hB,CAAM,IAAIvnB,CAAO,GAAI+zC,EAAOruC,GAAc,EAAE,EAC9D,MACF,IAAK,QACK,cAAM,KAAK6hB,CAAM,IAAIvnB,CAAO,GAAI+zC,EAAOruC,GAAc,EAAE,EAC/D,MACF,IAAK,QACK,cAAM,KAAK6hB,CAAM,IAAIvnB,CAAO,GAAI+zC,EAAOruC,GAAc,EAAE,EAC/D,KACJ,CACF,CAMO,SAASsuC,GAAaC,EAAoB,CACxC,OACL,KAAM,CAACj0C,EAAiB0F,IAAeiuC,GAAIM,EAAYj0C,EAAS,OAAQ0F,CAAI,EAC5E,KAAM,CAAC1F,EAAiB0F,IAAeiuC,GAAIM,EAAYj0C,EAAS,OAAQ0F,CAAI,EAC5E,MAAO,CAAC1F,EAAiB0F,IAAeiuC,GAAIM,EAAYj0C,EAAS,QAAS0F,CAAI,EAC9E,MAAO,CAAC1F,EAAiB0F,IAAeiuC,GAAIM,EAAYj0C,EAAS,QAAS0F,CAAI,EAElF,CAoBO,SAASwuC,IAAoB,CAElC,OAAO,QAAU,CAACl0C,EAASmB,EAAQC,EAAQC,EAAOxB,KAC5C8zC,GAAA,qBAAsB,qBAAqB3zC,CAAO,GAAI,QAAS,CAAE,OAAAmB,EAAQ,OAAAC,EAAQ,MAAAC,EAAO,MAAAxB,CAAO,GAC5F,IAIF,4BAAwByB,GAAU,CACvCqyC,GAAI,qBAAsB,6BAA8B,QAAS,CAAE,OAAQryC,EAAM,OAAQ,GAGvFqyC,GAAA,SAAU,8CAAgD,MAAM,CACtE,CClJA,MAAMrmC,GAAS0mC,GAAa,mBAAmB,EAuBzCG,GAAoBC,gBAAiD,MAAS,EAG9EC,GAAqB,GAEdC,GAA8D,CAAC,CAAE,SAAAxV,KAAe,CAC3F,MAAMyV,EAAWC,KACXC,EAAWC,KAGX,CAACC,EAASC,CAAU,EAAIxe,EAAA,SAAyB,CAAE,GACnD,CAACye,EAAcC,CAAe,EAAI1e,WAAiB,EAAE,EAGrD2e,EAAYF,EAAe,EAC3BG,EAAeH,EAAeF,EAAQ,OAAS,EAGrDte,YAAU,IAAM,CACd,MAAM4e,EAA6B,CACjC,KAAMR,EAAS,SACf,MAAOA,EAAS,MAChB,UAAW,KAAK,IAAI,GAGXG,EAAA,CAACK,CAAY,CAAC,EACzBH,EAAgB,CAAC,EAEjBxnC,GAAO,KAAK,sCAAuC,CAAE,KAAMmnC,EAAS,SAAU,CAChF,EAAG,CAAE,GAGLpe,YAAU,IAAM,CAEV,GAAAse,EAAQ,SAAW,EAAG,OAQ1B,GAAI,CALwBA,EAAQ,KAClCp9B,KAAM,OAASk9B,EAAS,UACxB,KAAK,UAAUl9B,EAAM,KAAK,IAAM,KAAK,UAAUk9B,EAAS,KAAK,GAGrC,CAExB,MAAMS,EAAyB,CAC7B,KAAMT,EAAS,SACf,MAAOA,EAAS,MAChB,UAAW,KAAK,IAAI,GAIhBU,EAAa,CAAC,GAAGR,EAAQ,MAAM,EAAGE,EAAe,CAAC,EAAGK,CAAQ,EAG7DE,EAAiBD,EAAW,OAASd,GACvCc,EAAW,MAAMA,EAAW,OAASd,EAAkB,EACvDc,EAEJP,EAAWQ,CAAc,EACTN,EAAAM,EAAe,OAAS,CAAC,EAEzC9nC,GAAO,KAAK,yCAA2C,CACrD,KAAMmnC,EAAS,SACf,cAAeW,EAAe,OAC/B,CACH,CACC,GAACX,EAAUE,EAASE,CAAY,CAAC,EA6CpC,MAAMQ,EAAsC,CAC1C,QAAAV,EACA,aAAAE,EACA,OA7Ca,IAAM,CACnB,GAAIE,EAAW,CACP,MAAAO,EAAYX,EAAQE,EAAe,CAAC,EAC1CN,EAASe,EAAU,KAAM,CAAE,MAAOA,EAAU,MAAO,EACnDR,EAAgBD,EAAe,CAAC,EAEhCvnC,GAAO,KAAK,qBAAsB,CAAE,GAAIgoC,EAAU,KAAM,OAExDhoC,GAAO,KAAK,4CAA4C,CAC1D,EAqCA,UAjCgB,IAAM,CACtB,GAAI0nC,EAAc,CACV,MAAAO,EAAYZ,EAAQE,EAAe,CAAC,EAC1CN,EAASgB,EAAU,KAAM,CAAE,MAAOA,EAAU,MAAO,EACnDT,EAAgBD,EAAe,CAAC,EAEhCvnC,GAAO,KAAK,mBAAoB,CAAE,GAAIioC,EAAU,KAAM,OAEtDjoC,GAAO,KAAK,0CAA0C,CACxD,EAyBA,WArBiB,CAACya,EAAclE,EAAalB,IAAmB,CACvD4xB,EAAAxsB,EAAM,CAAE,MAAAlE,CAAA,CAAO,EAGjBvW,GAAA,KAAK,kBAAmB,CAAE,KAAAya,EAAM,SAAU,CAAC,CAAClE,EAAO,GAkB1D,UAAAkxB,EACA,aAAAC,EACA,gBAhBsB,IAClBH,EAAe,EACVF,EAAQE,EAAe,CAAC,EAAE,KAE5B,IAYP,EAGF,aACGV,GAAkB,SAAlB,CAA2B,MAAOkB,EAChC,SAAAvW,CACH,EAEJ,ECjJa0W,GAAoD,CAAC,CAChE,KAAAC,EAAO,SACP,MAAAC,EAAQ,UACR,WAAAC,EAAa,GACb,KAAAC,EAAO,eACT,IAAM,CAQE,MAAAC,EANU,CACd,MAAO,UACP,OAAQ,YACR,MAAO,aAGmBJ,CAAI,EAG1BK,EAAYH,EACd,CAAC,CAAE,SAAA7W,KACDjO,MAAC,OAAI,UAAU,6EACZ,SAAAiO,CACH,GAEF,CAAC,CAAE,SAAAA,CAAS,UACT,MAAI,WAAU,iDACZ,SAAAA,CACH,GAGN,OACGjO,EAAA,IAAAilB,EAAA,CACC,SAACjkB,OAAA,OAAI,UAAU,6BACb,UAAAhB,MAAC,MAAI,WAAW,GAAGglB,CAAW,gBAC5B,SAAAhkB,EAAA,KAAC,OACC,UAAU,gBACV,QAAQ,YACR,KAAK,OACL,MAAM,6BAEN,UAAAhB,EAAA,IAAC,UACC,UAAU,aACV,GAAG,KACH,GAAG,KACH,EAAE,KACF,OAAQ6kB,EACR,YAAY,IACd,EACA7kB,EAAA,IAAC,QACC,UAAU,aACV,KAAM6kB,EACN,EAAE,kHACJ,KAEJ,EACCE,SAAS,IAAE,WAAU,2BAA2B,MAAO,CAAE,MAAAF,CAAM,EAAI,SAAKE,CAAA,GAC3E,EACF,EAEJ,ECzDMG,GAAiB3B,gBAAkC,CACvD,UAAW,GACX,aAAc,IAAM,CAAC,EACrB,YAAa,IAAM,CAAC,CACtB,CAAC,EAIY4B,GAA2D,CAAC,CAAE,SAAAlX,KAAe,CACxF,KAAM,CAACmX,EAAWC,CAAY,EAAI9f,WAAS,EAAK,EAC1C,CAAC+f,EAAaC,CAAc,EAAIhgB,WAAS,eAAe,EAGxDigB,EAAeC,cAAaV,GAAkB,CAC9CA,KAAqBA,CAAI,EAC7BM,EAAa,EAAI,CACnB,EAAG,CAAE,GAGCK,EAAcD,cAAY,IAAM,CACpCJ,EAAa,EAAK,EAElB,WAAW,IAAM,CACfE,EAAe,eAAe,GAC7B,GAAG,CACR,EAAG,CAAE,GAGH,OAAAvkB,EAAA,KAACkkB,GAAe,SAAf,CAAwB,MAAO,CAAE,UAAAE,EAAW,aAAAI,EAAc,YAAAE,CACxD,YAAAzX,EACAmX,GAAcplB,EAAA,IAAA2kB,GAAA,CAAiB,WAAU,GAAC,KAAMW,EAAa,CAChE,GAEJ,ECrCMK,GAAa,CACjB,OACA,WACA,SACA,SACA,SACF,EAGMC,GAAqB,CACzB,KAAM,CACJ,QAAS,CAAE,QAAS,CAAE,EACtB,QAAS,CAAE,QAAS,CAAE,EACtB,KAAM,CAAE,QAAS,CAAE,EACnB,WAAY,CAAE,SAAU,EAAI,CAC9B,EACA,MAAO,CACL,QAAS,CAAE,EAAG,OAAQ,QAAS,CAAE,EACjC,QAAS,CAAE,EAAG,EAAG,QAAS,CAAE,EAC5B,KAAM,CAAE,EAAG,QAAS,QAAS,CAAE,EAC/B,WAAY,CAAE,KAAM,SAAU,UAAW,IAAK,QAAS,EAAG,CAC5D,EACA,MAAO,CACL,QAAS,CAAE,MAAO,GAAK,QAAS,CAAE,EAClC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAE,EAChC,KAAM,CAAE,MAAO,GAAK,QAAS,CAAE,EAC/B,WAAY,CAAE,KAAM,SAAU,UAAW,IAAK,QAAS,EAAG,CAC5D,EACA,KAAM,CACJ,QAAS,CAAE,QAAS,GAAI,QAAS,CAAE,EACnC,QAAS,CAAE,QAAS,EAAG,QAAS,CAAE,EAClC,KAAM,CAAE,QAAS,IAAK,QAAS,CAAE,EACjC,WAAY,CAAE,SAAU,EAAI,CAC9B,CACF,EAGMC,GAA0E,CAC9E,OAAQ,QACR,WAAY,QACZ,gBAAiB,QACjB,UAAW,OACX,SAAU,OACV,SAAU,OACV,oBAAqB,MACvB,EAGMC,GAAkB,CACtB,IACA,OACA,WACA,SACA,SACA,SACF,EAQO,SAASC,GAAuB,CACrC,SAAA9X,EACA,eAAA+X,EACA,YAAAC,EAAc,EAChB,EAAgC,CAC9B,MAAMvC,EAAWC,KACXC,EAAWC,KACX,CAACqC,EAAQC,CAAS,EAAI5gB,WAAwB,IAAI,EAClD,CAAC6gB,EAAmBC,CAAoB,EAAI9gB,WAAiB,CAAC,EAC9D,CAAC+gB,EAAgBC,CAAiB,EAAIhhB,WAAkC,IAAI,EAGlFC,YAAU,IAAM,CAEd,MAAMtO,EAAO0sB,EAAS,WAAa,IAAM,OAASA,EAAS,SACrD30B,EAAQ02B,GAAW,QAAQzuB,CAAI,EACjCjI,IAAU,IACZo3B,EAAqBp3B,CAAK,CAC5B,EACC,CAAC20B,EAAS,QAAQ,CAAC,EAQtB,MAAM4C,EAJAR,GACGH,GAAmBjC,EAAS,QAAQ,GAAK,OAI5CnkC,EAAUmmC,GAAmBY,CAAiB,EAG9CC,EAAoBj3C,GAAwB,CAC3Cy2C,GACLE,EAAU32C,EAAE,QAAQ,CAAC,EAAE,OAAO,GAG1Bk3C,EAAkBl3C,GAAwB,CAC1C,IAACy2C,GAAeC,IAAW,KAAM,OAGrC,MAAMS,EADOn3C,EAAE,eAAe,CAAC,EAAE,QACZ02C,EACfU,EAAY,OAAO,WAAa,GAGlC,KAAK,IAAID,CAAK,EAAIC,IAChBD,EAAQ,GAAKP,EAAoB,GAEnCG,EAAkB,OAAO,EAChB7C,EAAAiC,GAAWS,EAAoB,CAAC,CAAC,GACjCO,EAAQ,GAAKP,EAAoBT,GAAW,OAAS,IAE9DY,EAAkB,MAAM,EACf7C,EAAAiC,GAAWS,EAAoB,CAAC,CAAC,IAI9CD,EAAU,IAAI,GA4BVU,EAAiBZ,EAxBD,CACpB,QAAU50B,IAAwC,CAChD,EAAGA,IAAc,QAAU,QAAUA,IAAc,OAAS,OAAS,EACrE,QAAS,IAEX,QAAS,CACP,EAAG,EACH,QAAS,EACT,WAAY,CACV,EAAG,CAAE,KAAM,SAAU,UAAW,IAAK,QAAS,EAAG,EACjD,QAAS,CAAE,SAAU,EAAI,CAC3B,CACF,EACA,KAAOA,IAAwC,CAC7C,EAAGA,IAAc,OAAS,QAAUA,IAAc,QAAU,OAAS,EACrE,QAAS,EACT,WAAY,CACV,EAAG,CAAE,KAAM,SAAU,UAAW,IAAK,QAAS,EAAG,EACjD,QAAS,CAAE,SAAU,EAAI,CAC3B,GACF,EAImD,CACnD,QAAS5R,EAAQ,QACjB,QAASA,EAAQ,QACjB,KAAMA,EAAQ,KACd,WAAYA,EAAQ,YAIpB,OAAAugB,EAAA,IAAC8mB,GAAO,IAAP,CACC,UAAU,2BACV,aAAcL,EACd,WAAYC,EACZ,QAAQ,UACR,QAAQ,UACR,KAAK,OACL,SAAUG,EACV,OAAQP,EAER,MAAO,CACL,MAAO,OACP,OAAQ,OACR,UAAW,SACX,SAAU,WACV,YAAa,OACf,EAEC,SAAArY,CAAA,EATI2V,EAAS,SAYpB,CAGO,SAASmD,GAAiBC,EAA2B,CACnD,OAAAlB,GAAgB,SAASkB,CAAQ,CAC1C,CCjLA,MAAMvqC,GAAS0mC,GAAa,eAAe,EAO9B8D,GAAwB,IAAM,CAEzCxqC,GAAO,KAAK,qDAAqD,CAEnE,EAeayqC,GAAW,IACf,OAAO,UAAc,KAAe,OAAO,UAAU,QAAW,UACnE,UAAU,OACV,GAOOC,GAA2BvzC,GAAkE,CACpG,UAAO,OAAW,IAAoB,OAEpC,MAAAwzC,EAAe,IAAMxzC,EAAS,EAAI,EAClCyzC,EAAgB,IAAMzzC,EAAS,EAAK,EAEnC,+BAAiB,SAAUwzC,CAAY,EACvC,wBAAiB,UAAWC,CAAa,EAGhDzzC,EAASszC,IAAU,EAEZ,IAAM,CACJ,2BAAoB,SAAUE,CAAY,EAC1C,2BAAoB,UAAWC,CAAa,EAEvD,EAOaC,GAA6B,CAACC,EAAeC,IAA2B,CAGrF,EAKaC,GAA+B,IAAY,CAGxD,ECpEA,MAAMC,EAAa,CAAnB,cACUC,GAAA,iBAAyC,KACzCA,GAAA,qBAAwB,GAAK,GAAK,KAQ1C,IAAOvyC,EAAaP,EAAS+yC,EAAwB,KAAK,cAAqB,CACxE,WAAM,IAAIxyC,EAAK,CAClB,KAAAP,EACA,UAAW,KAAK,IAAI,EACpB,OAAA+yC,CAAA,CACD,CACH,CAOA,IAAOxyC,EAAuB,CAC5B,MAAMgjC,EAAO,KAAK,MAAM,IAAIhjC,CAAG,EAE3B,OAACgjC,EAGDA,EAAK,SAAW,MACN,KAAK,MACPA,EAAK,UAAYA,EAAK,QACzB,WAAM,OAAOhjC,CAAG,EACd,MAIJgjC,EAAK,KAXM,IAYpB,CASA,MAAM,SACJhjC,EACAyyC,EACAD,EAAwB,KAAK,cACjB,CACN,MAAA3F,EAAa,KAAK,IAAO7sC,CAAG,EAElC,GAAI6sC,IAAe,KACV,OAAAA,EAGH,MAAA6F,EAAY,MAAMD,IACnB,gBAAIzyC,EAAK0yC,EAAWF,CAAM,EACxBE,CACT,CAMA,OAAO1yC,EAAmB,CACnB,WAAM,OAAOA,CAAG,CACvB,CAOA,IAAIA,EAAsB,CACjB,YAAK,IAAIA,CAAG,IAAM,IAC3B,CAKA,OAAc,CACZ,KAAK,MAAM,OACb,CAKA,SAAgB,CACR,MAAA2D,EAAM,KAAK,MAEjB,SAAW,CAAC3D,EAAKgjC,CAAI,IAAK,KAAK,MAAM,UAC/BA,EAAK,SAAW,MAAQr/B,EAAMq/B,EAAK,UAAYA,EAAK,QACjD,WAAM,OAAOhjC,CAAG,CAG3B,CACF,CAGa,MAAA2yC,GAAe,IAAIL,GC1FnBM,GAAoB,CAE/B,CACE,GAAI,gBACJ,KAAM,gBACN,KAAM,aACN,MAAO,uBACP,aAAc,mMACd,UAAW,+CACb,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,KAAM,aACN,MAAO,qBACP,aAAc,8QACd,UAAW,0CACb,EACA,CACE,GAAI,iBACJ,KAAM,iBACN,KAAM,aACN,MAAO,mBACP,aAAc,oQACd,UAAW,0CACb,EACA,CACE,GAAI,gBACJ,KAAM,gBACN,KAAM,aACN,MAAO,qBACP,aAAc,kQACd,UAAW,2CACb,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,KAAM,aACN,MAAO,aACP,aAAc,0PACd,UAAW,sCACb,EACA,CACE,GAAI,eACJ,KAAM,eACN,KAAM,aACN,MAAO,uBACP,aAAc,qUACd,UAAW,4CACb,EACA,CACE,GAAI,0BACJ,KAAM,0BACN,KAAM,aACN,MAAO,kBACP,aAAc,0QACd,UAAW,2CACb,EACA,CACE,GAAI,aACJ,KAAM,aACN,KAAM,aACN,MAAO,iCACP,aAAc,kPACd,UAAW,qDACb,EACA,CACE,GAAI,eACJ,KAAM,eACN,KAAM,aACN,MAAO,4BACP,aAAc,uQACd,UAAW,mDACb,EACA,CACE,GAAI,eACJ,KAAM,eACN,KAAM,aACN,MAAO,gCACP,aAAc,2MACd,UAAW,uCACb,EACA,CACE,GAAI,gBACJ,KAAM,gBACN,KAAM,aACN,MAAO,eACP,aAAc,qOACd,UAAW,sCACb,EACA,CACE,GAAI,yBACJ,KAAM,yBACN,KAAM,aACN,MAAO,yBACP,aAAc,6RACd,UAAW,wCACX,MAAO,uBACT,EACA,CACE,GAAI,QACJ,KAAM,8BACN,KAAM,aACN,MAAO,kBACP,aAAc,8QACd,UAAW,sCACb,EACA,CACE,GAAI,qBACJ,KAAM,sCACN,KAAM,aACN,MAAO,2BACP,aAAc,qNACd,UAAW,0CACb,EACA,CACE,GAAI,oBACJ,KAAM,mCACN,KAAM,aACN,MAAO,qBACP,aAAc,owCACd,UAAW,uCACb,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,KAAM,aACN,MAAO,0BACP,aAAc,6QACd,UAAW,0CACb,EACA,CACE,GAAI,sBACJ,KAAM,sBACN,KAAM,aACN,MAAO,WACP,aAAc,iQACd,MAAO,uBACP,UAAW,uCAEb,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,KAAM,aACN,MAAO,yBACP,aAAc,uOACd,MAAO,8BACP,UAAW,2CACb,EAKA,CACE,GAAI,eACJ,KAAM,4CACN,KAAM,UACN,MAAO,4CACP,aAAc,EAChB,EACA,CACE,GAAI,UACJ,KAAM,mBACN,KAAM,UACN,MAAO,8BACP,aAAc,iRACd,MAAO,6BACP,UAAW,yCACX,QAAS,uCACT,OAAQ,yCACR,OAAQ,CAAC,+BAA+B,EACxC,OAAQ,CACN,yDACA,wDAAwD,CAC5D,EACA,CACE,GAAI,YACJ,KAAM,YACN,KAAM,UACN,MAAO,6BACP,aAAc,GACd,MAAO,sBACP,UAAW,EACb,EACA,CACE,GAAI,iBACJ,KAAM,iBACN,KAAM,UACN,MAAO,2BACP,aAAc,GACd,MAAO,kCACP,UAAW,EACb,EACA,CACE,GAAI,YACJ,KAAM,uBACN,KAAM,UACN,MAAO,uBACP,aAAc,GACd,MAAO,uBACP,UAAW,EACb,EACA,CACE,GAAI,SACJ,KAAM,WACN,KAAM,UACN,MAAO,WACP,aAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4FACd,MAAO,oBACP,UAAW,GACX,KAAM,+BACN,OAAQ,CACN,+BACA,8BACF,CACF,EACA,CACE,GAAI,gBACJ,KAAM,gBACN,KAAM,UACN,MAAO,gBACP,aAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qKAYd,QAAS,+DACT,UAAW,GACX,MAAO,mCACP,KAAM,GACN,OAAQ,CACN,6CACA,4CACF,CACF,EACA,CACE,GAAI,MACJ,KAAM,uBACN,KAAM,UACN,MAAO,uBACP,aAAc,oaACd,QAAS,2BACT,SAAU,uBACV,MAAO,iBACP,SAAU,iBACV,MAAO,uBACP,UAAW,EAEb,EACA,CACE,GAAI,WACJ,KAAM,aACN,KAAM,UACN,MAAO,aACP,aAAc,GACd,MAAO,qBACP,UAAW,EACb,EACA,CACE,GAAI,aACJ,KAAM,aACN,KAAM,UACN,MAAO,aACP,aAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8EAKd,MAAO,wBACP,UAAW,6EACX,OAAQ,CAAC,qCAAqC,EAC9C,SAAU,8CACV,QAAS,2BACX,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,KAAM,UACN,MAAO,kBACP,aAAc,gHACd,MAAO,kCACP,UAAW,EACb,CAEF,EAGO,SAASC,GAAc50B,EAAgC,CAC5D,OAAO20B,GAAQ,KAAeE,KAAO,KAAO70B,CAAE,CAChD,CC5SO,SAAS80B,GAAoBC,EAA4B,CAC9D,MAAMxE,EAAW4D,GAAU,KAAYa,KAAI,KAAOD,CAAU,EACrD,OAAAxE,EAAWA,EAAS,KAAO,EACpC,CAGO,SAAS0E,GAAmBF,EAAoE,CACrG,MAAMxE,EAAW4D,GAAU,KAAYa,KAAI,KAAOD,CAAU,EAC5D,OAAOxE,GAAYA,EAAS,IAAMA,EAAS,IAAM,IACnD,CAGO,SAAS2E,IAA2B,CAClC,OAAAf,EACT,CAGO,MAAMA,GAAwB,CACnC,CACE,GAAI,qBACJ,KAAM,+BACN,EAAG,IACH,EAAG,GACH,YAAa,6RACb,MAAO,2CACP,MAAO,wCACP,WAAY,GACZ,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0FACT,QAAS,GACT,IAAK,CACH,SAAU,UACV,UAAW,SACb,CACF,EACA,CACE,GAAI,iBACJ,KAAM,iBACN,EAAG,IACH,EAAG,IACH,YAAa,6WACb,MAAO,sBACP,MAAO,4BACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kRACT,QAAS,GACT,IAAK,CACH,SAAU,mBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,iBACJ,KAAM,oCACN,EAAG,IACH,EAAG,IACH,YAAa,iQACb,MAAO,sBACP,MAAO,4BACP,QAAS;AAAA,yrBACT,QAAS,GACT,IAAK,CACH,SAAU,UACV,UAAW,SACb,CACF,EACA,CACE,GAAI,yBACJ,KAAM,oCACN,EAAG,IACH,EAAG,IACH,YAAa,iQACb,MAAO,sBACP,MAAO,4BAEP,WAAY,iBACZ,QAAS,GACT,IAAK,CACH,SAAU,kBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,kBACJ,KAAM,oCACN,EAAG,IACH,EAAG,IACH,YAAa,oRACb,MAAO,uBACP,MAAO,6BACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6aACT,QAAS,GACT,IAAK,CACH,SAAU,mBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,kBACJ,KAAM,oCACN,EAAG,IACH,EAAG,IACH,YAAa,0RACb,MAAO,uBACP,MAAO,6BACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gTACT,QAAS,GACT,IAAK,CACH,SAAU,kBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,yBACJ,KAAM,2CACN,EAAG,IACH,EAAG,IACH,YAAa,4SACb,MAAO,uBACP,MAAO,oCACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,smBACT,QAAS,GACT,IAAK,CACH,SAAU,mBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,yBACJ,KAAM,yBACN,EAAG,IACH,EAAG,IACH,YAAa,6TACb,MAAO,8BACP,MAAO,oCACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mZACT,QAAS,GACT,IAAK,CACH,SAAU,kBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,yBACJ,KAAM,yBACN,EAAG,IACH,EAAG,IACH,YAAa,yQACb,MAAO,8BACP,MAAO,oCACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6SACT,QAAS,GACT,IAAK,CACH,SAAU,kBACV,UAAW,mBACb,CACF,EACA,CACE,GAAI,kBACJ,KAAM,kBACN,EAAG,IACH,EAAG,IACH,YAAa,0WACb,MAAO,uBACP,MAAO,6BACP,QAAS,isBACT,QAAS,GACT,IAAK,CACH,SAAU,WACV,UAAW,UACb,CACF,EACA,CACE,GAAI,iBACJ,KAAM,iBACN,EAAG,IACH,EAAG,IACH,YAAa,6PACb,MAAO,4BACP,QAAS,sUACT,WAAY,GACZ,QAAS,GACT,IAAK,CACH,SAAU,kBACV,UAAW,kBACb,CACF,CACF,0KC3KMgB,GAAoC,CAExC,CACE,GAAI,UACJ,SAAU,UACV,MAAO,mBAEP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,oBACJ,SAAU,YACV,MAAO,6BAEP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,QACJ,SAAU,kBACV,MAAO,kDACP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,0BACJ,SAAU,iBACV,MAAO,WAEP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,4BACJ,SAAU,iBACV,MAAO,WAEP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EACA,CACE,GAAI,uBACJ,SAAU,eACV,MAAO,4CACP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,YACJ,SAAU,YACV,MAAO,uBACP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,SACJ,SAAU,SACV,MAAO,WACP,KAAM,gBACN,KAAM,CAAC,QAAQ,EACf,WAAY,wBACd,EACA,CACE,GAAI,wBACJ,SAAU,gBACV,MAAO,gBACP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EACA,CACE,GAAI,cACJ,SAAU,MACV,MAAO,uBACP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EACA,CACE,GAAI,QACJ,SAAU,kBACV,MAAO,kDACP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EACA,CACE,GAAI,mBACJ,SAAU,WACV,MAAO,aACP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EACA,CACE,GAAI,qBACJ,SAAU,aACV,MAAO,aACP,KAAM,gBACN,KAAM,CAAC,UAAU,EACjB,WAAY,wBACd,EAIA,CACE,GAAI,0BACJ,SAAU,qBACV,MAAO,2BACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,gBAEd,EACA,CACE,GAAI,yBACJ,SAAU,oBACV,MAAO,yBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,gBAEd,EACA,CACE,GAAI,uBACJ,SAAU,kBACV,MAAO,0BACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,gBAEd,EAEA,CACE,GAAI,qBACJ,SAAU,gBACV,MAAO,uBACP,KAAM,gBACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,gBAEd,EAUA,CACE,GAAI,uBACJ,SAAU,kBACV,MAAO,qBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,sBACJ,SAAU,iBACV,MAAO,mBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,qBACJ,SAAU,gBACV,MAAO,qBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,yBACJ,SAAU,kBACV,MAAO,aACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,oBACJ,SAAU,eACV,MAAO,uBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,+BACJ,SAAU,0BACV,MAAO,kBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,kBACJ,SAAU,aACV,MAAO,iCACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,oBACJ,SAAU,eACV,MAAO,4BACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,8BACJ,SAAU,yBACV,MAAO,yBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,qBACJ,SAAU,gBACV,MAAO,eACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,sBACJ,SAAU,QACV,MAAO,kBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,EACA,CACE,GAAI,2BACJ,SAAU,sBACV,MAAO,WACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,iBAEd,EACA,CACE,GAAI,uBACJ,SAAU,kBACV,MAAO,yBACP,KAAM,oCACN,KAAM,CAAC,SAAU,UAAU,EAC3B,WAAY,wBAEd,CACF,EAGajB,GAAkBiB,GAAkB,IAAmBC,GAAA,CAC5D,MAAAP,EAASD,GAAcQ,EAAY,QAAQ,EAEjD,OAAKP,EASE,CAEL,GAAIO,EAAY,GAChB,SAAUA,EAAY,SACtB,MAAOA,EAAY,MAEnB,KAAMA,EAAY,KAClB,KAAMA,EAAY,KAClB,WAAYA,EAAY,WACxB,aAAcN,GAAoBM,EAAY,UAAU,EAGxD,WAAYP,EAAO,KACnB,KAAMA,EAAO,KACb,MAAOA,EAAO,QApBd,QAAQ,MAAM,4BAA4BO,EAAY,QAAQ,eAAeA,EAAY,EAAE,4BAA4B,EAGhH,KAmBX,CAAC,EAAE,OAAgBh4C,OAAU,IAAI,EAG1B,SAASi4C,GAAeC,EAA4B,CACzD,OAAOpB,GAAO,OAAO92C,GAASA,EAAM,KAAK,SAASk4C,CAAG,CAAC,CACxD,CAMO,SAASC,GAAoBC,EAAsB,CAGxD,MAAMjF,EADY2E,KACS,KAAYF,KAAI,OAASQ,CAAY,EAEhE,OAAIjF,EAEK2D,GAAO,OAAO92C,GAASA,EAAM,aAAemzC,EAAS,EAAE,EAIzD,EACT,CAGO,SAAS2E,IAAe,CACvB,MAAAO,MAAsB,IAGxB,IACK54C,GAAA,YAAqB,mBAAA64C,EAAA,eAAwBC,GAAA,CAClD,MAAMC,EAAgBD,EAAgB,UAGhCE,MAAuB,IAC7B3B,GAAO,QAAiB92C,GAAA,OACjBy4C,EAAiB,IAAIz4C,EAAM,UAAU,GAGxC+C,EAAA01C,EAAiB,IAAIz4C,EAAM,UAAU,IAArC,MAAA+C,EAAwC,KAAK/C,EAAM,IAFnDy4C,EAAiB,IAAIz4C,EAAM,WAAY,CAACA,EAAM,EAAE,CAAC,CAGnD,CACD,EAGDw4C,EAAc,QAAoBrF,GAAA,CAChC,MAAMuF,EAAWD,EAAiB,IAAItF,EAAS,EAAE,GAAK,GACtCkF,EAAA,IAAIlF,EAAS,KAAM,CACjC,GAAIA,EAAS,GACb,KAAMA,EAAS,KACf,YAAaA,EAAS,YACtB,EAAGA,EAAS,EACZ,EAAGA,EAAS,EACZ,OAAQuF,EACR,QAASvF,EAAS,SAAW,GAC9B,EACF,EACF,EAAE,MAAe50C,GAAA,CACR,aAAK,iCAAkCA,CAAK,EAE9Bo6C,GAAA,CACvB,QACMp6C,EAAO,CACN,aAAK,8DAA+DA,CAAK,EAC3Do6C,GACxB,CAGA,SAASA,GAAwB,CAEzB,MAAAF,MAAuB,IAC7B3B,GAAO,QAAiB92C,GAAA,OACjBy4C,EAAiB,IAAIz4C,EAAM,UAAU,GAGxC+C,EAAA01C,EAAiB,IAAIz4C,EAAM,UAAU,IAArC,MAAA+C,EAAwC,KAAK/C,EAAM,IAFnDy4C,EAAiB,IAAIz4C,EAAM,WAAY,CAACA,EAAM,EAAE,CAAC,CAGnD,CACD,EAKD82C,GAAO,QAAiB92C,GAAA,CACjBq4C,EAAgB,IAAIr4C,EAAM,YAAY,GACzBq4C,EAAA,IAAIr4C,EAAM,aAAc,CACtC,GAAIA,EAAM,WACV,KAAMA,EAAM,aACZ,YAAa,GACb,EAAG,EACH,EAAG,EACH,OAAQy4C,EAAiB,IAAIz4C,EAAM,UAAU,GAAK,CAAC,EACnD,QAAS,GACV,CACH,CACD,CACH,CAGI,OAAAq4C,EAAgB,OAAS,GACHM,IAGnB,MAAM,KAAKN,EAAgB,OAAQ,EAC5C,CClbO,MAAMO,GAAiB,IAAoB,CAC5C,IACI,MAAAC,EAAgB,aAAa,QAAQ,aAAa,EACpD,IAACA,EAAe,MAAO,GAGrB,MAAAC,EAAM,KAAK,MAAMD,CAAa,EACpC,OAAK,MAAM,QAAQC,CAAG,EAKfA,EAAI,IAAUl2B,GAAA,CACf,IAACA,EAAW,YACV,MAAA5iB,EAAQ+4C,GAAU,KAAMh6C,GAAaA,GAAKA,EAAE,KAAO6jB,CAAE,EACvD,OAAC5iB,EAEE,CACL,GAAGA,EACH,QAAS,IAAI,KAAK,EAAE,YAAY,GAJf,IAKnB,CACD,EAAE,OAAO,OAAO,EAde,SAezBzB,EAAO,CACN,qBAAM,8BAA+BA,CAAK,EAC3C,EACT,CACF,EAGay6C,GAAah5C,GAA+B,CACnD,IACF,GAAI,CAACA,GAAS,CAACA,EAAM,GACX,qBAAM,mDAAqDA,CAAK,EACjE44C,GAAe,EAGlB,MAAAK,EAAmB,aAAa,QAAQ,aAAa,EAC3D,IAAIJ,EAAgB,GAEhB,IACFA,EAAgBI,EAAmB,KAAK,MAAMA,CAAgB,EAAgB,GACzE,MAAM,QAAQJ,CAAa,MAAmB,UAC5Ct6C,EAAO,CACN,cAAM,wDAAyDA,CAAK,EAC5Es6C,EAAgB,EAClB,CAEA,QAAQ,IAAI,8CAA8CA,EAAc,MAAM,GAAIA,CAAa,EAG/F,MAAMK,EAAcL,EAAc,SAAS74C,EAAM,EAAE,EAGnD,GAFQ,YAAI,4CAA4Ck5C,CAAW,EAAE,EAEhEA,EAqBH,QAAQ,IAAI,mEAAmE,MArB/D,CAChB,MAAMC,EAAa,CAAC,GAAGN,EAAe74C,EAAM,EAAE,EAC9C,aAAa,QAAQ,cAAe,KAAK,UAAUm5C,CAAU,CAAC,EAC9D,QAAQ,IAAI,sDAAsDA,EAAW,MAAM,EAAE,EAGrF,QAAQ,IAAI,0EAA0E,EACtF,WAAW,IAAM,CAEXA,EAAW,SAAW,IACxB,QAAQ,IAAI,oFAAoF,EAChGljB,GAAkBL,GAAgB,iBAAiB,GAIjDujB,EAAW,QAAU,IACvB,QAAQ,IAAI,uEAAuEA,EAAW,MAAM,cAAc,EAClHljB,GAAkBL,GAAgB,qBAAqB,IAExD,GAAG,EAKR,OAAOgjB,GAAe,QACfr6C,EAAO,CACN,qBAAM,yBAA0BA,CAAK,EACtCq6C,GAAe,CACxB,CACF,EAGaQ,GAAoBh4B,GAAkC,CAC7D,IACF,GAAI,CAACA,EACH,eAAQ,MAAM,6DAA8D,EACrEw3B,GAAe,EAGlB,MAAAK,EAAmB,aAAa,QAAQ,aAAa,EACvD,IAACA,EAAkB,MAAO,GAE9B,IAAIJ,EAAgB,GAChB,IACcA,EAAA,KAAK,MAAMI,CAAgB,EACtC,MAAM,QAAQJ,CAAa,MAAmB,UAC5Ct6C,EAAO,CACN,qBAAM,wDAAyDA,CAAK,EACrE,EACT,CAEA,MAAM46C,EAAaN,EAAc,OAAOj2B,GAAMA,IAAOxB,CAAO,EAC5D,oBAAa,QAAQ,cAAe,KAAK,UAAU+3B,CAAU,CAAC,EAEvDP,GAAe,QACfr6C,EAAO,CACN,qBAAM,gCAAiCA,CAAK,EAC7C,EACT,CACF,EAGa86C,GAAuB,CAACj4B,EAAiBk4B,IAA2C,CAC3F,IACF,GAAI,CAACl4B,EACH,eAAQ,MAAM,6EAA6E,EACpFw3B,GAAe,EAIlB,MAAAW,EAAmB,aAAa,QAAQ,oBAAoB,EAClE,IAAIC,EAAgB,GAEhB,IACFA,EAAgBD,EAAmB,KAAK,MAAMA,CAAgB,EAAI,GAC9D,OAAOC,GAAkB,WAAUA,EAAgB,UAChDj7C,EAAO,CACN,cAAM,+CAAgDA,CAAK,EACnEi7C,EAAgB,EAClB,CAGA,MAAMC,EAAsB,OAAO,KAAKD,CAAa,EAAE,SAAW,EAGlE,OAAAA,EAAcp4B,CAAO,EAAIk4B,EACzB,aAAa,QAAQ,qBAAsB,KAAK,UAAUE,CAAa,CAAC,EAGpEC,GACFxjB,GAAkBL,GAAgB,gBAAgB,EAIrCgjB,KACD,IAAa54C,GACrBA,GAASA,EAAM,KAAOohB,EACjB,CAAE,GAAGphB,EAAO,iBAAAs5C,GAEdt5C,CACR,QACMzB,EAAO,CACN,qBAAM,oCAAqCA,CAAK,EACjDq6C,GAAe,CACxB,CACF,ECjKMc,GAAa,IACb,OAAO,OAAW,KAAe,OAAO,YAAc,OAAO,WAAW,SACnE,OAAO,WAAW,SAEpB,IAIHC,GAAelzB,GAAyB,CAC5C,MAAMmzB,EAAUF,KAEZ,GAAAjzB,EAAK,WAAWmzB,CAAO,EAClB,OAAAnzB,EAGH,MAAAozB,EAAYpzB,EAAK,WAAW,GAAG,EAAIA,EAAK,UAAU,CAAC,EAAIA,EACtD,SAAGmzB,CAAO,GAAGC,CAAS,EAC/B,EAGMC,GAAa,CACjB,aAAc,uBACd,UAAW,oBACX,UAAW,oBACX,gBAAiB,0BACjB,eAAgB,wBAClB,EAGMC,GAAe,EAAI,GAAK,GAAK,GAAK,IAM3BC,GAAqB,SAA8B,CAC1D,IACF,QAAQ,IAAI,2DAA2D,EAGvE,MAAMC,EAAcrB,KAEhB,OAAAqB,EAAY,SAAW,GACzB,QAAQ,IAAI,0DAA0D,EAC/D,KAIT3C,GAAa,IAAIwC,GAAW,aAAcG,EAAaF,EAAY,EACnE,QAAQ,IAAI,oBAAoBE,EAAY,MAAM,sCAAsC,EAEjFA,SACA17C,EAAO,CACN,qBAAM,gEAAiEA,CAAK,EAC7E,EACT,CACF,EAMa27C,GAAwB,SAC5B5C,GAAa,SAClBwC,GAAW,aACX,SAAYE,GAAmB,EAC/BD,EAAA,EAQSI,GAAmB,SAAiC,CAC3D,IACF,QAAQ,IAAI,0CAA0C,EAGhD,MAAAF,EAAc,MAAMC,KAEtB,GAAAD,EAAY,SAAW,EACzB,eAAQ,IAAI,yEAA0E,EAC/E,GAIT,MAAMG,EAAetC,KAGfuC,EAAcJ,EAAY,IAAIj6C,GAASA,EAAM,UAAU,EACvDs6C,EAAoB,CAAC,GAAG,IAAI,IAAID,CAAW,CAAC,EAC5CE,EAAoBH,EAAa,OACrCjH,GAAAmH,EAAkB,SAASnH,EAAS,EAAE,GAIxC,OAAAmE,GAAa,IAAIwC,GAAW,UAAWS,EAAmBR,EAAY,EACtE,QAAQ,IAAI,oBAAoBQ,EAAkB,MAAM,qBAAqB,EAEtEA,QACAh8C,EAAO,CACN,qBAAM,2DAA4DA,CAAK,EACxE,EACT,CACF,EAMai8C,GAAsB,SAC1BlD,GAAa,SAClBwC,GAAW,UACX,SAAYK,GAAiB,EAC7BJ,EAAA,EAQSU,GAAwB,SAA+B,CAC9D,IACF,QAAQ,IAAI,qDAAqD,EAG3D,MAAA1D,EAAY,MAAMyD,KAEpB,GAAAzD,EAAU,SAAW,EACvB,eAAQ,IAAI,oDAAoD,EACzD,GAIH,MAAA2D,EAAY3D,EACf,OAAO5D,GAAYA,EAAS,KAAK,EACjC,IAAgBA,GAAA,CACf,MAAMwH,EAAYxH,EAAS,MAE3B,OAAIwH,EAAU,WAAW,SAAS,GAAKA,EAAU,WAAW,UAAU,EAC7DA,EAGFhB,GAAYgB,CAAS,EAC7B,EAGGC,EAAkBF,EAAU,IAAI,MAAO1hC,GAAQ,CAC/C,IAEI,MAAArZ,EAAW,MAAM,MAAMqZ,EAAK,CAChC,MAAO,cACP,QAAS,CACP,gBAAiB,kBACnB,EACA,KAAM,UACP,EAED,GAAI,CAACrZ,EAAS,IAAMA,EAAS,OAAS,SACpC,MAAM,IAAI,MAAM,yCAAyCA,EAAS,MAAM,EAAE,EAItE,MAAAk7C,EAAO,MAAMl7C,EAAS,OAG5B,OAAA23C,GAAa,IAAI,GAAGwC,GAAW,eAAe,IAAI9gC,CAAG,GAAI,CACvD,IAAAA,EACA,KAAM6hC,EAAK,KACX,KAAMA,EAAK,KACX,UAAW,KAAK,IAAI,GACnBd,EAAY,EAEf,QAAQ,IAAI,sCAAsC/gC,CAAG,KAAK6hC,EAAK,IAAI,UAAU,EAGzE,kBAAmB,WAAa,UAAU,cAAc,YAChD,wBAAc,WAAW,YAAY,CAC7C,KAAM,uBACN,IAAA7hC,CAAA,CACD,EAGIA,QACAza,EAAO,CACd,eAAQ,MAAM,4DAA4Dya,CAAG,IAAKza,CAAK,EAChF,IACT,EACD,EAGKu8C,GADU,MAAM,QAAQ,IAAIF,CAAe,GAClB,OAAO5hC,GAAOA,IAAQ,IAAI,EAEzD,eAAQ,IAAI,oBAAoB8hC,EAAe,MAAM,IAAIJ,EAAU,MAAM,qBAAqB,EAEvFI,QACAv8C,EAAO,CACN,qBAAM,4DAA6DA,CAAK,EACzE,EACT,CACF,EAMaw8C,GAAuB,SAA+B,CAC7D,IACF,QAAQ,IAAI,2DAA2D,EAMvE,MAAMC,EAHelD,KAGqB,OAAO3E,GAC/CA,EAAS,SAAWA,EAAS,OAG3B,GAAA6H,EAAqB,SAAW,EAClC,eAAQ,IAAI,yDAA0D,EAC/D,GAIH,MAAAN,EAAYM,EAAqB,IAAgB7H,GAAA,CACrD,MAAMwH,EAAYxH,EAAS,MAE3B,OAAIwH,EAAU,WAAW,SAAS,GAAKA,EAAU,WAAW,UAAU,EAC7DA,EAGFhB,GAAYgB,CAAS,EAC7B,EAGKC,EAAkBF,EAAU,IAAI,MAAO1hC,GAAQ,CAC/C,IAEE,GAAAs+B,GAAa,IAAI,GAAGwC,GAAW,cAAc,IAAI9gC,CAAG,EAAE,EAChD,mBAAI,sDAAsDA,CAAG,EAAE,EAChEA,EAIH,MAAArZ,EAAW,MAAM,MAAMqZ,EAAK,CAChC,MAAO,cACP,QAAS,CACP,gBAAiB,kBACnB,EACA,KAAM,UACP,EAED,GAAI,CAACrZ,EAAS,IAAMA,EAAS,OAAS,SACpC,MAAM,IAAI,MAAM,sDAAsDA,EAAS,MAAM,EAAE,EAInF,MAAAk7C,EAAO,MAAMl7C,EAAS,OAG5B,OAAA23C,GAAa,IAAI,GAAGwC,GAAW,cAAc,IAAI9gC,CAAG,GAAI,CACtD,IAAAA,EACA,KAAM6hC,EAAK,KACX,KAAMA,EAAK,KACX,UAAW,KAAK,IAAI,GACnBd,EAAY,EAEf,QAAQ,IAAI,mDAAmD/gC,CAAG,KAAK6hC,EAAK,IAAI,UAAU,EAGtF,kBAAmB,WAAa,UAAU,cAAc,YAChD,wBAAc,WAAW,YAAY,CAC7C,KAAM,sBACN,IAAA7hC,CAAA,CACD,EAGIA,QACAza,EAAO,CACd,eAAQ,MAAM,yEAAyEya,CAAG,IAAKza,CAAK,EAC7F,IACT,EACD,EAGKu8C,GADU,MAAM,QAAQ,IAAIF,CAAe,GAClB,OAAO5hC,GAAOA,IAAQ,IAAI,EAEzD,eAAQ,IAAI,oBAAoB8hC,EAAe,MAAM,IAAIJ,EAAU,MAAM,kCAAkC,EAEpGI,QACAv8C,EAAO,CACN,qBAAM,yEAA2EA,CAAK,EACvF,EACT,CACF,EAMa08C,GAAkB,SAA8B,CACvD,IACF,QAAQ,IAAI,uDAAwD,EAE9D,MAAAC,EAAcvB,GAAY,iBAAiB,EAG3Ch6C,EAAW,MAAM,MAAMu7C,EAAa,CACxC,MAAO,cAEP,QAAS,CACP,gBAAiB,mBACjB,OAAU,UACZ,EACA,KAAM,UACP,EAED,GAAI,CAACv7C,EAAS,IAAMA,EAAS,OAAS,SACpC,MAAM,IAAI,MAAM,qDAAqDA,EAAS,MAAM,EAAE,EAIlF,MAAAk7C,EAAO,MAAMl7C,EAAS,OAGf,OAAA23C,GAAA,IAAIwC,GAAW,UAAW,CACrC,IAAKoB,EACL,KAAML,EAAK,KACX,KAAMA,EAAK,KACX,UAAW,KAAK,IAAI,GACnBd,EAAY,EAEf,QAAQ,IAAI,kDAAkDc,EAAK,IAAI,UAAU,EAG7E,kBAAmB,WAAa,UAAU,cAAc,YAChD,wBAAc,WAAW,YAAY,CAC7C,KAAM,kBACN,IAAKK,CAAA,CACN,EAGI,SACA38C,EAAO,CACN,qBAAM,wEAA0EA,CAAK,EACtF,EACT,CACF,EAMa48C,GAAwB,SAA2B,CAC1D,IACF,QAAQ,IAAI,oEAAoE,EAG1E,MAAAC,EAAe,MAAMH,KAC3B,QAAQ,IAAI,+CAA+CG,EAAe,SAAW,QAAQ,EAAE,EAG/F,MAAMpB,GAAmB,EAGzB,MAAMG,GAAiB,EAGvB,MAAMM,GAAsB,EAG5B,MAAMM,GAAqB,EAGtBK,IACH,QAAQ,IAAI,kEAAkE,EAC9E,MAAMH,GAAgB,GAGxB,QAAQ,IAAI,+DAA+D,QACpE18C,EAAO,CACN,cAAM,wEAAyEA,CAAK,CAC9F,CACF,EA0Ba88C,GAAwBriC,GAC5Bs+B,GAAa,IAAI,GAAGwC,GAAW,cAAc,IAAI9gC,CAAG,EAAE,EAQlDsiC,GAA4B,MAAOtiC,GAAkC,CAC5E,IAEE,GAAAqiC,GAAqBriC,CAAG,EAClB,mBAAI,yCAAyCA,CAAG,EAAE,EACnD,GAGD,YAAI,8CAA8CA,CAAG,EAAE,EAGzD,MAAArZ,EAAW,MAAM,MAAMqZ,EAAK,CAChC,MAAO,cACP,QAAS,CACP,gBAAiB,kBACnB,EACA,KAAM,UACP,EAED,GAAI,CAACrZ,EAAS,IAAMA,EAAS,OAAS,SACpC,MAAM,IAAI,MAAM,yCAAyCA,EAAS,MAAM,EAAE,EAItE,MAAAk7C,EAAO,MAAMl7C,EAAS,OAG5B,OAAA23C,GAAa,IAAI,GAAGwC,GAAW,cAAc,IAAI9gC,CAAG,GAAI,CACtD,IAAAA,EACA,KAAM6hC,EAAK,KACX,KAAMA,EAAK,KACX,UAAW,KAAK,IAAI,GACnBd,EAAY,EAEf,QAAQ,IAAI,sCAAsC/gC,CAAG,KAAK6hC,EAAK,IAAI,UAAU,EAGzE,kBAAmB,WAAa,UAAU,cAAc,YAChD,wBAAc,WAAW,YAAY,CAC7C,KAAM,sBACN,IAAA7hC,CAAA,CACD,EAGI,SACAza,EAAO,CACd,eAAQ,MAAM,4DAA4Dya,CAAG,IAAKza,CAAK,EAChF,EACT,CACF,ECndag9C,GAAiB,IAAM,CAClC,KAAM,CAACrS,EAAQsS,CAAS,EAAI1mB,WAAkB2hB,GAAU,GAClD,CAACgF,EAAcC,CAAe,EAAI5mB,WAAkB,EAAK,EACzD,CAAC6mB,EAAgBC,CAAiB,EAAI9mB,WAAkB,EAAK,EAG7D+mB,EAAc7G,cAAY,SAAY,CAC1C,GAAI,CAAA2G,EAEA,IACFC,EAAkB,EAAI,EACtB,QAAQ,IAAI,yDAAyD,EAGrE,MAAMT,GAAsB,EAG5B,MAAMlB,EAAcrB,KACd7B,EAAYe,KAAe,UAC/BmC,EAAY,QAAcj6C,EAAM,aAAemzC,EAAS,EAAE,GAIxD8G,EAAY,OAAS,GACvBpD,GAA2BoD,EAAalD,CAAS,EAInD,MAAMkE,GAAgB,EACOjE,KAE7B0E,EAAgB,EAAI,EACpB,QAAQ,IAAI,oDAAoD,QACzDn9C,EAAO,CACN,cAAM,6DAA8DA,CAAK,SACjF,CACAq9C,EAAkB,EAAK,CACzB,GACC,CAACD,CAAc,CAAC,EAGnB5mB,mBAAU,IAAM,CACR,MAAA+mB,EAAUpF,GAAyBD,GAAa,CACpD+E,EAAU/E,CAAQ,EAGdA,GAAY,CAACgF,GAAgB,CAACE,GACpBE,GACd,CACD,EAED,MAAO,IAAM,CACPC,GAAiBA,GAAA,CAEtB,GAACL,EAAcE,EAAgBE,CAAW,CAAC,EAG9C9mB,YAAU,IAAM,CACVmU,GAAU,CAACuS,GAAgB,CAACE,GAClBE,KAEb,CAAC3S,EAAQuS,EAAcE,EAAgBE,CAAW,CAAC,EAE/C,CACL,OAAA3S,EACA,aAAAuS,EACA,eAAAE,EACA,YAAAE,CAAA,CAEJ,ECpEaE,GAA6B,IAAM,CAC9C,KAAM,CAAE,OAAA7S,EAAQ,aAAAuS,EAAc,eAAAE,EAAgB,YAAAE,CAAA,EAAgBN,KAG9D,OAAIrS,GAAUuS,EACL,KAIPlsB,MAAC,MAAI,WAAU,8EACb,SAAAgB,EAAA,KAAC,OACC,UAAW,gFAAiF2Y,EAAyC,4BAAhC,6BAA2D,GAE/J,WAACA,GAAU3Z,MAACysB,GAAQ,WAAU,SAAU,GAExC,CAAC9S,GACC3Y,OAAA,QAAK,UAAU,sBAAsB,4BAEnCkrB,GAAgB,0BACnB,EAGDvS,GAAU,CAACuS,GACVlsB,EAAA,IAAA0sB,WAAA,CACG,WAEG1rB,EAAA,KAAA0rB,WAAA,WAAC1sB,MAAA2sB,GAAA,CAAQ,UAAU,sBAAuB,GACzC3sB,EAAA,YAAK,UAAU,sBAAsB,SAAiC,uCACzE,EAGEgB,OAAA0rB,EAAA,oBAAC1sB,EAAA,YAAK,UAAU,sBAAsB,SAA2B,gCACjEA,EAAA,IAAC,UACC,QAAS,IAAMssB,EAAY,EAC3B,UAAU,6EACX,mBAED,GACF,CAEJ,GAGD3S,GAAUuS,GAEPlrB,OAAA0rB,EAAA,oBAAC1sB,MAAA4sB,GAAA,CAAM,UAAU,SAAU,GAC1B5sB,EAAA,YAAK,UAAU,sBAAsB,SAAoB,0BAC5D,GAGN,GAEJ,ECxDM6sB,GAAiB14B,GACrB,2VACA,CACE,SAAU,CACR,QAAS,CACP,QAAS,yDACT,YACE,qEACF,QACE,iFACF,UACE,+DACF,MAAO,+CACP,KAAM,iDACR,EACA,KAAM,CACJ,QAAS,iBACT,GAAI,sBACJ,GAAI,uBACJ,KAAM,WACR,CACF,EACA,gBAAiB,CACf,QAAS,UACT,KAAM,SACR,CACF,CACF,EAQM24B,EAAShtB,EAAM,WACnB,CAAC,CAAE,UAAArK,EAAW,QAAAhW,EAAS,KAAAmlC,EAAM,QAAAmI,EAAU,GAAO,GAAG/1C,CAAM,EAAG+oB,IAAQ,CAC1D,MAAAitB,EAAOD,EAAUE,GAAO,SAE5B,OAAAjtB,EAAA,IAACgtB,EAAA,CACC,UAAWvtB,GAAGotB,GAAe,CAAE,QAAAptC,EAAS,KAAAmlC,EAAM,UAAAnvB,CAAA,CAAW,CAAC,EAC1D,IAAAsK,EACC,GAAG/oB,CAAA,EAGV,CACF,EACA81C,EAAO,YAAc,SChDrB,MAAMrwC,GAAS0mC,GAAa,mBAAmB,EAWzC+J,GAAsD,CAAC,CAC3D,kBAAAC,EACA,iBAAAC,EACA,mBAAAC,CACF,IAAM,CAEJ,KAAM,CAACvnB,EAAUC,CAAW,EAAIR,WAAkB,EAAK,EAGvDC,YAAU,IAAM,CACR,MAAA8nB,EAAkB,aAAa,QAAQ,iBAAiB,EAG5DvnB,EADEunB,IAAoB,SACN,CAKpB,EAAG,CAAE,GAEL,MAAMC,EAAiB,IAAM,CAC3B,GAAIznB,EAAU,CAEZ,aAAa,WAAW,iBAAiB,EACzCC,EAAY,EAAK,EAIbsnB,GACiBA,IAGrB,MACF,CAGI,UAAU,aACZ5wC,GAAO,KAAK,qDAAsD,EAElE,UAAU,YAAY,mBACnB+wC,GAAa,CAEZ/wC,GAAO,KAAK,2CAA4C,CACtD,OAAQ,CACN,SAAU+wC,EAAS,OAAO,SAC1B,UAAWA,EAAS,OAAO,UAC3B,SAAUA,EAAS,OAAO,QAC5B,EACD,EAGY,qBAAQ,kBAAmB,SAAS,EAGjDznB,EAAY,EAAI,EAIZonB,GACgBA,GAEtB,EACCn+C,GAAU,CAETyN,GAAO,KAAK,0CAA2C,CACrD,KAAMzN,EAAM,KACZ,QAASA,EAAM,QAChB,EAIGo+C,GACeA,GAErB,EACA,CACE,mBAAoB,GACpB,QAAS,IACT,WAAY,CACd,IAIF3wC,GAAO,KAAK,iDAAiD,CAC/D,EAIA,OAAAukB,EAAA,KAAC8rB,EAAA,CACC,QAAShnB,EAAW,cAAgB,UACpC,KAAK,KACL,UAAU,sCACV,QAASynB,EAET,UAACvtB,MAAAytB,GAAA,CAAO,UAAU,SAAU,GAC3B3nB,EAAW,0BAA4B,yBAG9C,EC5GA,IAAI4nB,GAA8C,KAC9CC,GAA2B,GAW/B,MAAMC,GAAgD,CAAC,CACrD,eAAAC,EACA,gBAAAC,CACF,IAAM,CAEJ,KAAM,CAAChoB,EAAUC,CAAW,EAAIR,WAAkB,IACxB,aAAa,QAAQ,cAAc,IAChC,MAC5B,EAGDC,YAAU,IAAM,CACd,GAAI,CAACmoB,GAA0B,CAE7B,GAAI,CAACD,GAAoB,CACvBA,GAAqB,IAAI,MACzBA,GAAmB,KAAO,GAC1BA,GAAmB,OAAS,GAG5B,MAAMK,EAAY,OAAO,SAAS,SAAS,SAAS,WAAW,EAC3D,yCACA,2BAEJL,GAAmB,IAAMK,CAC3B,CAE2BJ,GAAA,GAGvB7nB,GAAY4nB,IACKA,GAAA,OAAO,MAAe1+C,GAAA,CAC/B,aAAK,6CAA+CA,CAAK,EAClE,CAEL,GACC,CAAC82B,CAAQ,CAAC,EAGb,MAAMkoB,EAAoB,IAAM,CAC9B,MAAMC,EAAW,CAACnoB,EAClBC,EAAYkoB,CAAQ,EAGpB,aAAa,QAAQ,eAAgBA,EAAS,SAAU,GAEpDA,GAEEP,IACiBA,GAAA,OAAO,MAAe1+C,GAAA,CAC/B,aAAK,6BAA+BA,CAAK,EACjD+2B,EAAY,EAAK,EACJ,qBAAQ,eAAgB,OAAO,EAC7C,EAKC8nB,GACaA,MAIbH,IACFA,GAAmB,MAAM,EAKvBI,GACcA,IAEpB,EAIA,OAAA9tB,EAAA,IAAC8sB,EAAA,CACC,QAAShnB,EAAW,cAAgB,UACpC,KAAK,KACL,UAAU,sCACV,QAASkoB,EAER,WAEGhtB,OAAA0rB,EAAA,oBAAC1sB,MAAAkuB,GAAA,CAAQ,UAAU,SAAU,GAAE,kBAEjC,EAGEltB,OAAA0rB,EAAA,oBAAC1sB,MAAAmuB,GAAA,CAAQ,UAAU,SAAU,GAAE,eAEjC,GAIR,EC3GaC,GAAc,IAErB,OAAO,OAAW,KAAe,OAAO,YAAc,OAAO,WAAW,SAE1D,OAAO,WAAW,SAAS,SAAS,GAAG,EACnD,OAAO,WAAW,SAAS,MAAM,EAAG,EAAE,EACtC,OAAO,WAAW,SAKM,iBAQzB,SAASC,GAAan3B,EAAsB,CAMjD,MAAMo3B,GAJiBp3B,EAAK,WAAW,GAAG,EAAIA,EAAO,IAAIA,CAAI,IAI1B,MAAM,GAAG,EAAE,IAC5Cq3B,KAAU,mBAAmBA,CAAO,EAAI,IACxC,KAAK,GAAG,EAGV,MAAO,GAAGH,GAAA,CAAa,GAAGE,CAAW,EACvC,CCHO,MAAME,GAAkB,CAC7B,QAAS,CACP,SAAU,SACV,UAAW,SACb,EACA,SAAU,CACR,SAAU,SACV,UAAW,SACb,EACA,WAAY,CACV,SAAU,UACV,UAAW,SACb,EACA,YAAa,CACX,SAAU,kBACV,UAAW,mBACb,CACF,EAGaC,GAAiB,CAC5B,UAAWD,GAAgB,QAAQ,SAAWA,GAAgB,SAAS,SAC5DA,GAAgB,WAAW,SAAWA,GAAgB,YAAY,UAAY,EACzF,WAAYA,GAAgB,QAAQ,UAAYA,GAAgB,SAAS,UAC7DA,GAAgB,WAAW,UAAYA,GAAgB,YAAY,WAAa,CAC9F,EAGME,GAAe,OAGfC,GAAoB,CAACC,EAAcC,EAAcC,EAAcC,IAAyB,CACtF,MAAAC,EAAKJ,EAAO,KAAK,GAAK,IACtBK,EAAKH,EAAO,KAAK,GAAK,IACtBI,GAAMJ,EAAOF,GAAQ,KAAK,GAAK,IAC/BO,GAAMJ,EAAOF,GAAQ,KAAK,GAAK,IAE/Bv5C,EAAI,KAAK,IAAI45C,EAAK,CAAC,EAAI,KAAK,IAAIA,EAAK,CAAC,EAClC,KAAK,IAAIF,CAAE,EAAI,KAAK,IAAIC,CAAE,EAC1B,KAAK,IAAIE,EAAK,CAAC,EAAI,KAAK,IAAIA,EAAK,CAAC,EACtCn+C,EAAI,EAAI,KAAK,MAAM,KAAK,KAAKsE,CAAC,EAAG,KAAK,KAAK,EAAIA,CAAC,CAAC,EAEvD,OAAOo5C,GAAe19C,CACxB,EAGMg1B,GAAQ2oB,GACZH,GAAgB,QAAQ,SACxBA,GAAgB,QAAQ,UACxBA,GAAgB,SAAS,SACzBA,GAAgB,SAAS,SAC3B,EAEMvoB,GAAS0oB,GACbH,GAAgB,QAAQ,SACxBA,GAAgB,QAAQ,UACxBA,GAAgB,WAAW,SAC3BA,GAAgB,WAAW,SAC7B,EAEaY,GAAqB,CAChC,MAAAppB,GACA,OAAAC,EACF,ECzFMopB,GAAc,CAClB,QAAS,CAAE,EAAG,IAAK,EAAG,EAAG,EACzB,SAAU,CAAE,EAAG,IAAK,EAAG,EAAG,EAC1B,WAAY,CAAE,EAAG,IAAK,EAAG,GAAI,EAC7B,YAAa,CAAE,EAAG,IAAK,EAAG,GAAI,CAChC,EAyEgB,SAAAC,GAA0BC,EAAkBC,EAA6C,CAGvG,MAAMC,EAAY,CAChB,CAAE,EAAGjB,GAAgB,QAAQ,UAAW,EAAGA,GAAgB,QAAQ,QAAS,EAC5E,CAAE,EAAGA,GAAgB,SAAS,UAAW,EAAGA,GAAgB,SAAS,QAAS,EAC9E,CAAE,EAAGA,GAAgB,WAAW,UAAW,EAAGA,GAAgB,WAAW,QAAS,EAClF,CAAE,EAAGA,GAAgB,YAAY,UAAW,EAAGA,GAAgB,YAAY,QAAS,GAIhFkB,EAAY,CAChB,CAAE,EAAGL,GAAY,QAAQ,EAAG,EAAGA,GAAY,QAAQ,CAAE,EACrD,CAAE,EAAGA,GAAY,SAAS,EAAG,EAAGA,GAAY,SAAS,CAAE,EACvD,CAAE,EAAGA,GAAY,WAAW,EAAG,EAAGA,GAAY,WAAW,CAAE,EAC3D,CAAE,EAAGA,GAAY,YAAY,EAAG,EAAGA,GAAY,YAAY,CAAE,GAczDM,EAAU,CACd,CAACF,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,EAClC,CAACA,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,EAClC,CAACA,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,GAG9BG,EAAU,CACdF,EAAU,CAAC,EAAE,EACbA,EAAU,CAAC,EAAE,EACbA,EAAU,CAAC,EAAE,GAITG,EAAU,CACd,CAACJ,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,EAClC,CAACA,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,EAClC,CAACA,EAAU,CAAC,EAAE,EAAGA,EAAU,CAAC,EAAE,EAAG,CAAC,GAG9BK,EAAU,CACdJ,EAAU,CAAC,EAAE,EACbA,EAAU,CAAC,EAAE,EACbA,EAAU,CAAC,EAAE,GAITK,EAASC,GAAkBL,EAASC,CAAO,EAC3CK,EAASD,GAAkBH,EAASC,CAAO,EAG7C,IAACC,GAAU,CAACE,EAAQ,CAEhB,MAAAC,EAAS,KAAK,IAAI,GAAGT,EAAU,IAAI3+C,GAAKA,EAAE,CAAC,CAAC,EAC5Cq/C,EAAS,KAAK,IAAI,GAAGV,EAAU,IAAI3+C,GAAKA,EAAE,CAAC,CAAC,EAC5Cs/C,EAAS,KAAK,IAAI,GAAGX,EAAU,IAAI3+C,GAAKA,EAAE,CAAC,CAAC,EAC5Cu/C,EAAS,KAAK,IAAI,GAAGZ,EAAU,IAAI3+C,GAAKA,EAAE,CAAC,CAAC,EAE5Cw/C,EAAO,KAAK,IAAI,GAAGZ,EAAU,IAAI5+C,GAAKA,EAAE,CAAC,CAAC,EAC1Cy/C,EAAO,KAAK,IAAI,GAAGb,EAAU,IAAI5+C,GAAKA,EAAE,CAAC,CAAC,EAC1C0/C,EAAO,KAAK,IAAI,GAAGd,EAAU,IAAI5+C,GAAKA,EAAE,CAAC,CAAC,EAC1C2/C,EAAO,KAAK,IAAI,GAAGf,EAAU,IAAI5+C,GAAKA,EAAE,CAAC,CAAC,EAE1C4/C,GAAQlB,EAAYU,IAAWC,EAASD,GACxCS,EAAO,GAAMpB,EAAWa,IAAWC,EAASD,GAE5ChuB,EAAIkuB,EAAOI,GAAQH,EAAOD,GAC1BjuB,EAAImuB,EAAOG,GAAQF,EAAOD,GAEzB,OAAE,EAAG,KAAK,MAAMpuB,CAAC,EAAG,EAAG,KAAK,MAAMC,CAAC,EAC5C,CAGM,MAAAD,EAAI2tB,EAAO,CAAC,EAAIP,EAAYO,EAAO,CAAC,EAAIR,EAAWQ,EAAO,CAAC,EAC3D1tB,EAAI4tB,EAAO,CAAC,EAAIT,EAAYS,EAAO,CAAC,EAAIV,EAAWU,EAAO,CAAC,EAE1D,OAAE,EAAG,KAAK,MAAM7tB,CAAC,EAAG,EAAG,KAAK,MAAMC,CAAC,EAC5C,CAQA,SAAS2tB,GAAkBY,EAAoBC,EAAmC,CAE1E,MAAAC,EAAMC,GAAeH,CAAM,EAGjC,GAAI,KAAK,IAAIE,CAAG,EAAI,MACX,YAIT,MAAME,EAAU,CACd,CAACH,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACtC,CAACC,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACtC,CAACC,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,GAGlCK,EAAU,CACd,CAACL,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,CAAC,EACtC,CAACA,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,CAAC,EACtC,CAACA,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,EAAGD,EAAO,CAAC,EAAE,CAAC,CAAC,GAGlCM,EAAU,CACd,CAACN,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,CAAC,EACtC,CAACD,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,CAAC,EACtC,CAACD,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,EAAGC,EAAO,CAAC,CAAC,GAIlCM,EAAOJ,GAAeC,CAAO,EAC7BI,EAAOL,GAAeE,CAAO,EAC7BI,EAAON,GAAeG,CAAO,EAGnC,MAAO,CAACC,EAAOL,EAAKM,EAAON,EAAKO,EAAOP,CAAG,CAC5C,CAKA,SAASC,GAAeH,EAA4B,CAClD,OACEA,EAAO,CAAC,EAAE,CAAC,GAAKA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,GACxEA,EAAO,CAAC,EAAE,CAAC,GAAKA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,GACxEA,EAAO,CAAC,EAAE,CAAC,GAAKA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAIA,EAAO,CAAC,EAAE,CAAC,EAE5E,CC5MO,SAASU,GAAwB9D,EAAgC,CAChE,MAAE,SAAA+B,EAAU,UAAAC,CAAc,EAAAhC,EAG1B+D,EAAoB,KACpBC,EAAqB,MAGrBC,EAAS,KAAK,IAAIjD,GAAgB,WAAW,SAAUA,GAAgB,YAAY,QAAQ,EAAI+C,EAC/FG,EAAS,KAAK,IAAIlD,GAAgB,QAAQ,SAAUA,GAAgB,SAAS,QAAQ,EAAI+C,EACzFI,EAAS,KAAK,IAAInD,GAAgB,QAAQ,UAAWA,GAAgB,WAAW,SAAS,EAAIgD,EAC7FI,EAAS,KAAK,IAAIpD,GAAgB,SAAS,UAAWA,GAAgB,YAAY,SAAS,EAAIgD,EAG/FK,EAAmBtC,GAAYkC,GAAUlC,GAAYmC,EACrDI,EAAoBtC,GAAamC,GAAUnC,GAAaoC,EAI9D,OADyBG,GAA0BxC,EAAUC,CAAS,EAC/C,IACd,GAGFqC,GAAoBC,CAC7B,CAQgB,SAAAC,GAA0BxC,EAAkBC,EAA2B,CAE/E,MAAAZ,EAAOW,EAAW,KAAK,GAAK,IAC5BT,EAAOL,GAAe,SAAW,KAAK,GAAK,IAC3CuD,GAAYvD,GAAe,SAAWc,GAAY,KAAK,GAAK,IAC5D0C,GAAYxD,GAAe,UAAYe,GAAa,KAAK,GAAK,IAE9Dl6C,EAAI,KAAK,IAAI08C,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAC1C,KAAK,IAAIpD,CAAI,EAAI,KAAK,IAAIE,CAAI,EAC9B,KAAK,IAAImD,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAGpD,MAAO,SAFG,EAAI,KAAK,MAAM,KAAK,KAAK38C,CAAC,EAAG,KAAK,KAAK,EAAEA,CAAC,CAAC,EAGvD,CAOO,SAAS48C,GAAsB1E,EAA+B,CAC7D,MAAE,SAAA+B,EAAU,UAAAC,CAAc,EAAAhC,EAG1BnrB,EAAI,KAAK,IAAIosB,GAAe,UAAYe,CAAS,EAAI,KAAK,IAAIf,GAAe,QAAQ,EACrFrsB,EAAI,KAAK,IAAImtB,CAAQ,EAAI,KAAK,IAAId,GAAe,QAAQ,EACrD,KAAK,IAAIc,CAAQ,EAAI,KAAK,IAAId,GAAe,QAAQ,EACrD,KAAK,IAAIA,GAAe,UAAYe,CAAS,EACvD,IAAI2C,EAAQ,KAAK,MAAM9vB,EAAGD,CAAC,EAAI,IAAM,KAAK,GAM1C,OAHA+vB,GAASA,EAAQ,KAAO,IAGpBA,GAAS,OAASA,EAAQ,KAAa,OACvCA,GAAS,MAAQA,EAAQ,KAAa,WACtCA,GAAS,MAAQA,EAAQ,MAAc,MACvCA,GAAS,OAASA,EAAQ,MAAc,UACxCA,GAAS,OAASA,EAAQ,MAAc,MACxCA,GAAS,OAASA,EAAQ,MAAc,YACxCA,GAAS,OAASA,EAAQ,MAAc,QACrC,YACT,CC1FA,MAAM11C,GAAS0mC,GAAa,cAAc,EAkB1C,MAAMiP,EAAa,CAIjB,KAAK56C,EAA6B,CAC1B,MAAE,MAAAsa,EAAO,YAAAmP,EAAa,QAAAxhB,EAAU,UAAW,SAAAmmB,EAAU,OAAArV,EAAQ,OAAAjgB,EAAQ,QAAA4xB,CAAY,EAAA1qB,EAGjF66C,EAAuB5yC,IAAY,cAAgB,QAAU,OAGzD6yC,GAAA,CACR,MAAAxgC,EACA,YAAAmP,EACA,QAAAxhB,EACA,SAAAmmB,EACA,OAAArV,CAAA,CACD,EAGD,KAAK,SAASuB,EAAOugC,EAAWpxB,EAAa3wB,EAAQ4xB,CAAO,CAC9D,CAKA,QAAQ1qB,EAA8C,CACpD,KAAK,KAAK,CACR,GAAGA,EACH,QAAS,UACV,CACH,CAKA,MAAMA,EAA8C,CAClD,KAAK,KAAK,CACR,GAAGA,EACH,QAAS,cACV,CACH,CAKA,SAASA,EAA6C,CACpD,KAAK,KAAK,CACR,GAAGA,EACH,OAAQ,kBACT,CACH,CAOQ,SACNrI,EACA0H,EACAoqB,EACA3wB,EACA4xB,EACM,CAEN,GAAIrrB,IAAS,QAAS,CACd,MAAA07C,EAAa,UAAU17C,CAAI,MAAM1H,CAAO,GAAG8xB,EAAc,MAAMA,CAAW,GAAK,EAAE,GACjFuxB,EAAa,CACjB,OAAQliD,GAAU,UAClB,GAAG4xB,CAAA,EAEEzlB,GAAA,KAAK81C,EAAYC,CAAU,CACpC,CAEF,CACF,CAGa,MAAAC,GAAe,IAAIL,GChG1BM,GAAiBvP,GAAa,iBAAiB,EAG/C1mC,GAAS,CACb,KAAM,CAACtN,EAAiB0F,IAElB1F,EAAQ,SAAS,sBAAsB,GACvCA,EAAQ,SAAS,mBAAmB,GACpCA,EAAQ,SAAS,aAAa,EAE5BA,EAAQ,SAAS,qBAAsB,EAClCujD,GAAe,KAAKvjD,EAAS0F,CAAI,EAG1C,OAEK69C,GAAe,KAAKvjD,EAAS0F,CAAI,EAE1C,KAAM69C,GAAe,KACrB,MAAOA,GAAe,MACtB,MAAO,CAACvjD,EAAiB0F,IAAe,CAElC,KAAA1F,EAAQ,SAAS,sBAAsB,GACvCA,EAAQ,SAAS,mBAAmB,GACpCA,EAAQ,SAAS,aAAa,GAG3B,OAAAujD,GAAe,MAAMvjD,EAAS0F,CAAI,CAC3C,CACF,EAGM89C,GAA2B,IAC3BC,GAAmB,IACnBC,GAAmB,IACnBC,GAAuB,kBACvBC,GAAoC,8BACpCC,GAA8B,IAG9BC,GAA8B,CAClC,mBAAoB,GACpB,QAASL,GACT,WAAYC,EACd,EAsBA,MAAMK,EAAoD,CASxD,aAAc,CARNvL,GAAA,eAAyB,MACzBA,GAAA,oBAAmC,MACnCA,GAAA,gCAAgE,MAChEA,GAAA,kCAA8D,MAC9DA,GAAA,wBAA4B,IAC5BA,GAAA,0BAA8B,IAC9BA,GAAA,0BAAoC,MAK1C,KAAK,mBAAqB,GAGtB,CAAC,UAAU,aAAe,CAAC,KAAK,oBAClClrC,GAAO,KAAK,gEAAiE,EAI/E,SAAS,iBAAiB,mBAAoB,KAAK,uBAAuB,KAAK,IAAI,CAAC,CACtF,CAMQ,wBAA+B,CAEjC,YAAS,kBAAoB,WAAa,KAAK,UAAY,MAAQ,KAAK,sBAAuB,CACjGA,GAAO,KAAK,gFAAgF,EAG5F,MAAM02C,EAAiB,KAAK,yBACtBC,EAAqB,KAAK,2BAGhC,KAAK,aAAa,EAGdD,GACF,WAAW,IAAM,CACV,mBAAcA,EAAgBC,GAAsB,MAAS,GACjE,GAAG,CAEV,CACF,CAOO,cACLC,EACAC,EACM,CAWF,GAVJ,KAAK,yBAA2BD,EAChC,KAAK,2BAA6BC,GAAsB,KAGxD,KAAK,iBAAmB,GAGxB,KAAK,uBAAuB,EAAK,EAG7B,CAAC,KAAK,sBAAuB,CAC/B72C,GAAO,KAAK,4DAA6D,EACzE,MACF,CAGA,GAAI,KAAK,mBAAoB,CAC3B,KAAK,wBAAwB,EAC7B,MACF,CAGI,IAAC,UAAU,YAAa,CAC1BA,GAAO,KAAK,gEAAiE,EAC7Eg2C,GAAa,MAAM,CACjB,MAAO,8BACP,YAAa,8DACb,OAAQ,gCACR,QAAS,CACP,eAAgB,EAClB,EACD,EACD,MACF,CAGA,UAAU,YAAY,mBACpB,KAAK,sBAAsB,KAAK,IAAI,EACpC,KAAK,oBAAoB,KAAK,IAAI,EAClCQ,EAAA,EAII,MAAA5/B,EAAK,UAAU,YAAY,cAC/B,KAAK,sBAAsB,KAAK,IAAI,EACpC,KAAK,oBAAoB,KAAK,IAAI,EAClC4/B,EAAA,EAGF,KAAK,QAAU5/B,CAEjB,CAKO,cAAqB,CAEtB,KAAK,qBAAuB,OACvB,qBAAc,KAAK,kBAAkB,EAC5C,KAAK,mBAAqB,MAKxB,KAAK,UAAY,OACT,sBAAY,WAAW,KAAK,OAAO,EAC7C,KAAK,QAAU,MAKjB,KAAK,yBAA2B,KAChC,KAAK,2BAA6B,IACpC,CAMO,qBAA+B,CAC7B,oBAAa,QAAQy/B,EAAoB,IAAM,SACxD,CAKO,kBAAyB,CACjB,qBAAQA,GAAsB,SAAS,EACpD,aAAa,QAAQC,GAAmC,KAAK,IAAI,EAAE,UAAU,EAG7EN,GAAa,QAAQ,CACnB,MAAO,uBACP,YAAa,2DACb,SAAU,IACV,OAAQ,mCACR,QAAS,CACP,UAAW,KAAK,IAAI,CACtB,EACD,CACH,CAKO,oBAA2B,CAChC,aAAa,WAAWK,EAAoB,EAC5C,aAAa,WAAWC,EAAiC,EAGzDN,GAAa,KAAK,CAChB,MAAO,0BACP,YAAa,sCACb,SAAU,IACV,OAAQ,qCACR,QAAS,CACP,UAAW,KAAK,IAAI,CACtB,EACD,EAGD,KAAK,aAAa,CACpB,CAMQ,qBAA+B,CAC/B,MAAAc,EAAsB,aAAa,QAAQR,EAAiC,EAC9E,IAACQ,EAA4B,SAE3B,MAAAnvB,EAAY,SAASmvB,EAAqB,EAAE,EAElD,OADY,KAAK,MACJnvB,EAAY4uB,EAC3B,CAMQ,uBAAuBQ,EAAuB,CAChD,KAAK,mBAAqBA,IAC5B,KAAK,iBAAmBA,EAEpB,KAAK,4BACP,KAAK,2BAA2BA,CAAM,EAG5C,CAMQ,sBAAsBriD,EAAgC,CAE5D,MAAMq8C,EAAwB,CAC5B,SAAUr8C,EAAI,OAAO,SACrB,UAAWA,EAAI,OAAO,UACtB,SAAUA,EAAI,OAAO,UAIvB,KAAK,aAAeq8C,EAYKuE,GAA0BvE,EAAS,SAAUA,EAAS,SAAS,EAIhE,KAAK,aACD,KAAK,oBAAoB,EAQjD,KAAK,0BAEF,8BAAyB,EAAG,EAAGA,CAAQ,CAEhD,CAMQ,oBAAoB9jC,EAAqC,CAU/D,OARIA,EAAI,OAASA,EAAI,SACnBjN,GAAO,MAAM,4BAA6B,CACxC,KAAMiN,EAAI,KACV,QAASA,EAAI,QACd,EAIKA,EAAI,KAAM,CAChB,KAAKA,EAAI,kBACP,KAAK,uBAAuB,EAAI,EAChC,MAEF,KAAKA,EAAI,qBAEP,MAEF,KAAKA,EAAI,QAEP,KACJ,CACF,CAKQ,yBAAgC,CAItC,MAAM+pC,EAA+B,CACnC,SAAU,QACV,UAAW,QACX,SAAU,IAIZ,KAAK,sBAAsB,CACzB,OAAQ,CACN,SAAUA,EAAgB,SAC1B,UAAWA,EAAgB,UAC3B,SAAUA,EAAgB,SAC1B,SAAU,KACV,iBAAkB,KAClB,QAAS,KACT,MAAO,IACT,EACA,UAAW,KAAK,IAAI,EACE,EAGnB,wBAAqB,OAAO,YAAY,IAAM,CAEjD,MAAMC,GAAa,KAAK,OAAO,EAAI,IAAO,KACpCC,GAAa,KAAK,OAAO,EAAI,IAAO,KAEpCC,EAAiC,CACrC,SAAU,QAAYF,EACtB,UAAW,QAAYC,EACvB,SAAU,EAAI,KAAK,OAAW,MAIhC,KAAK,sBAAsB,CACzB,OAAQ,CACN,SAAUC,EAAkB,SAC5B,UAAWA,EAAkB,UAC7B,SAAUA,EAAkB,SAC5B,SAAU,KACV,iBAAkB,KAClB,QAAS,KACT,MAAO,IACT,EACA,UAAW,KAAK,IAAI,EACE,GACvBjB,EAAwB,CAC7B,CACF,CAGa,MAAAkB,GAAkB,IAAIX,GC/Y7Bz2C,GAAS0mC,GAAa,cAAc,EAG7B2Q,GAAY,IACZC,GAAa,IAapBhB,GAAoC,8BACpCC,GAA8B,IAC9BgB,GAAsC,gCACtCC,GAA4B,8BAC5BC,GAAiC,GAAK,GAAK,IAM3CC,GAA4C,CAAC,CACjD,iBAAAd,EACA,eAAAe,EAAiB,GACjB,mBAAAd,EACA,MAAAh1B,EAAQ,CACV,IAAM,CACJ,KAAM,CAACkvB,EAAU6G,CAAW,EAAI9uB,WAA6B,IAAI,EAC3D,CAAC+uB,EAAWC,CAAY,EAAIhvB,WAA0C,IAAI,EAC1E,CAACivB,EAAkBC,CAAmB,EAAIlvB,WAAS,EAAK,EACxDmvB,EAAmBC,SAAO,EAAI,EAC9BC,EAAsBD,SAAsB,IAAI,EAGhDE,EAAsB,IAAe,CACnC,MAAAtB,EAAsB,aAAa,QAAQR,EAAiC,EAC9E,IAACQ,EAA4B,SAE3B,MAAAnvB,EAAY,SAASmvB,EAAqB,EAAE,EAElD,OADY,KAAK,MACJnvB,EAAY4uB,EAAA,EAIrB8B,EAAuBC,GAAqC,CAC1D,MAAAh8C,EAAM,KAAK,MACXi8C,EAA4B,aAAa,QAAQhB,EAAmC,EACpFiB,EAAsB,aAAa,QAAQhB,EAAyB,EAE1E,GAAIe,EAA2B,CACvB,MAAAE,EAAW,SAASF,EAA2B,EAAE,EAQvD,GALIj8C,EAAMm8C,EAAWhB,IAKjBe,IAAwBF,EACnB,QAEX,CAGA,oBAAa,QAAQf,GAAqCj7C,EAAI,SAAU,GAC3D,qBAAQk7C,GAA2Bc,CAAe,EAC/DH,EAAoB,QAAUG,EACvB,IAIHI,EAAuB1wB,EAAM,YAAY,CAACrC,EAAWC,EAAW+yB,IAAoC,CACxG,GAAI,CAACA,EAAa,OAGV,YAAI,mDAAmDA,EAAY,QAAQ,SAASA,EAAY,SAAS,cAAcA,EAAY,QAAQ,EAAE,EAErJf,EAAYe,CAAW,EAGvB,MAAMC,EAAcC,GAAoBF,EAAY,SAAUA,EAAY,SAAS,EACnFb,EAAac,CAAW,EAelB,MAAAE,EAAWjE,GAAwB8D,CAAW,EAG9CI,EAAmBzD,GAA0BqD,EAAY,SAAUA,EAAY,SAAS,EACxFK,EAAkBD,EAAmB,IAGrCE,EAAiBL,EAAY,GAAK,GAAKA,EAAY,GAAKvB,IACvCuB,EAAY,GAAK,GAAKA,EAAY,GAAKtB,GAG1D,IAACwB,GAAY,CAACb,EAAiB,SAAW,CAACG,EAAoB,GAAKY,GAAmB,CAACC,EAAgB,CACpG,MAAArkC,EAAY6gC,GAAsBkD,CAAW,EAC7CL,EAAkB,YAAY,KAAK,MAAMS,EAAiB,GAAG,CAAC,MAAMnkC,CAAS,GAG/EyjC,EAAoBC,CAAe,IAErC,QAAQ,IAAI,uCAAoD,CAC9D,UAAA1jC,EACA,SAAU,KAAK,MAAMmkC,CAAgB,EACrC,SAAAD,EACA,gBAAAE,EACA,gBAAAV,EACA,eAAAW,EACA,SAAU,CACR,SAAUN,EAAY,SACtB,UAAWA,EAAY,UACvB,KAAMC,EAAY,EAClB,KAAMA,EAAY,EAClB,SAAUD,EAAY,QACxB,EACD,EAED34C,GAAO,KAAK,uCAAoD,CAC9D,UAAA4U,EACA,SAAU,KAAK,MAAMmkC,CAAgB,EACrC,SAAAD,EACA,gBAAAE,EACA,gBAAAV,EACA,eAAAW,CAAA,CACD,EAEDjD,GAAa,KAAK,CAChB,MAAO,qCACP,YAAa,8BAA8BphC,CAAS,+BACpD,SAAU,IACV,OAAQ2O,EAAA,IAACK,GAAY,SAAQ,YAAY,SAAS,cAClD,OAAQ,oCACR,QAAS,CACP,UAAAhP,EACA,SAAU,KAAK,MAAMmkC,CAAgB,EACrC,SAAAD,EACA,gBAAAE,EACA,gBAAAV,CACF,EACD,EAEL,CAGIL,EAAiB,UACnBA,EAAiB,QAAU,IAIzBrB,GACFA,EAAiBgC,EAAY,EAAGA,EAAY,EAAGD,CAAW,GAE3D,CAAC/B,EAAkBqB,EAAkBG,EAAqBC,CAAmB,CAAC,EAG3Ea,EAAyBlxB,EAAM,YAAa+uB,GAA0B,CAC1EiB,EAAoBjB,CAAM,EAEtBF,GACFA,EAAmBE,CAAM,EAGvBA,GACFf,GAAa,MAAM,CACjB,MAAO,uBACP,YAAa,kGACb,SAAU,IACV,OAAQ,sCACR,QAAS,CACP,iBAAkB,EACpB,EACD,CACH,EACC,CAACa,CAAkB,CAAC,EA2DnB,OAxDJ9tB,YAAU,IAAM,CAEd,aAAa,QAAQutB,GAAmC,KAAK,IAAI,EAAE,UAAU,EAG7E,MAAM6C,EAAwB,CAACzgD,EAAW0gD,EAAYT,IAA8B,CAC7EA,GACgBD,EAAA,EAAG,EAAGC,CAAW,GAIlCU,EAA2BtC,GAAoB,CACnDmC,EAAuBnC,CAAM,GAIf,OAAAK,GAAA,cAAc+B,EAAuBE,CAAuB,EAGrE,IAAM,CACXjC,GAAgB,aAAa,EAEjC,EAAG,CAAE,GAGLpvB,EAAM,UAAU,IAAM,CAEpB,MAAMsxB,EAAet5C,GAAO,KACtBu5C,EAAgBv5C,GAAO,MAGtBA,UAAA,KAAO,CAACtN,EAAS0F,IAAS,CAE3B,GAAA1F,EAAQ,SAAS,qBAAsB,EACjC,mBAAI,oBAAqBA,EAAS0F,CAAI,EACvCkhD,EAAa5mD,EAAS0F,CAAI,EAI/B,KAAA1F,EAAQ,SAAS,mBAAmB,GACpCA,EAAQ,SAAS,sBAAsB,GACvCA,EAAQ,SAAS,aAAa,GAI3B,OAAA4mD,EAAa5mD,EAAS0F,CAAI,GAI5B,IAAM,CACX4H,GAAO,KAAOs5C,EACdt5C,GAAO,MAAQu5C,CAAA,CAEnB,EAAG,CAAE,GAGD,CAAC1B,GAAaE,EAEdx0B,MAAC,MAAI,WAAU,8EACb,SAAAA,MAAC,MAAI,WAAU,8GACZ,SAAAw0B,EACG,2FACA,+EACN,CACF,GAOAx0B,MAAA0sB,WAAA,UAAA1sB,EAAA,IAAC,OACC,UAAU,oCACV,MAAO,CACL,KAAM,GAAGs0B,EAAU,EAAIh2B,CAAK,KAC5B,IAAK,GAAGg2B,EAAU,EAAIh2B,CAAK,KAC3B,UAAW,uBACb,EAEA,SAAA0C,EAAA,KAAC,MAAI,WAAU,WAEZ,UACCwsB,GAAAxtB,EAAA,IAAC,OACC,UAAU,iEACV,MAAO,CACL,MAAO,GAAIwtB,EAAS,SAAW4B,GAAmB,MAAS0E,GAAY,EAAIx1B,CAAK,KAChF,OAAQ,GAAIkvB,EAAS,SAAW4B,GAAmB,MAAS0E,GAAY,EAAIx1B,CAAK,KACjF,UAAW,wBACX,KAAM,MACN,IAAK,KACP,EACF,EAID0B,EAAA,WAAI,UAAU,wEACZ,WACEA,MAAAi2B,GAAA,CAAW,UAAU,uCAAuC,EAE7Dj2B,MAAC,MAAI,WAAU,uFAAwF,GAE3G,GACF,EAEJ,GAEJ,EC/SMvjB,GAAS0mC,GAAa,uBAAuB,EAG7C+S,GAAoB,GAK1B,SAASvH,GAAkBC,EAAcC,EAAcC,EAAcC,EAAsB,CAKzF,MAAMoH,EAAShE,GAAmBA,EAAQ,KAAK,GAAM,IAC/CiE,EAAUD,EAAMvH,CAAI,EACpByH,EAAUF,EAAMrH,CAAI,EACpBwH,EAAOH,EAAMrH,EAAOF,CAAI,EACxB2H,EAAOJ,EAAMpH,EAAOF,CAAI,EAGxBv5C,EAAI,KAAK,IAAIghD,EAAO,CAAC,EAAI,KAAK,IAAIA,EAAO,CAAC,EACtC,KAAK,IAAIF,CAAO,EAAI,KAAK,IAAIC,CAAO,EACpC,KAAK,IAAIE,EAAO,CAAC,EAAI,KAAK,IAAIA,EAAO,CAAC,EAIhD,MAAO,SAHG,EAAI,KAAK,MAAM,KAAK,KAAKjhD,CAAC,EAAG,KAAK,KAAK,EAAIA,CAAC,CAAC,EAIzD,CAQA,SAASkhD,GAAwBC,EAAoC,CAE5D,YAAK,MAAMA,CAAkB,CACtC,CAKA,SAASC,GAAa9H,EAAcC,EAAcC,EAAcC,EAAsB,CAE9E,MAAA1sB,EAAI,KAAK,IAAI0sB,EAAOF,CAAI,EAAI,KAAK,IAAIC,CAAI,EACzC1sB,EAAI,KAAK,IAAIwsB,CAAI,EAAI,KAAK,IAAIE,CAAI,EAAI,KAAK,IAAIF,CAAI,EAAI,KAAK,IAAIE,CAAI,EAAI,KAAK,IAAIC,EAAOF,CAAI,EAClG,IAAIsD,EAAQ,KAAK,MAAM9vB,EAAGD,CAAC,EAAI,IAAM,KAAK,GAM1C,OAHA+vB,GAASA,EAAQ,KAAO,IAGpBA,GAAS,OAASA,EAAQ,KAAa,OACvCA,GAAS,MAAQA,EAAQ,KAAa,WACtCA,GAAS,MAAQA,EAAQ,MAAc,MACvCA,GAAS,OAASA,EAAQ,MAAc,UACxCA,GAAS,OAASA,EAAQ,MAAc,MACxCA,GAAS,OAASA,EAAQ,MAAc,YACxCA,GAAS,OAASA,EAAQ,MAAc,QACrC,YACT,CAcA,SAASwE,GAAsB3/C,EAAmC,CAC1D,MAAE,aAAA4/C,EAAc,eAAAC,EAAgB,QAAAjlB,EAAS,UAAA0iB,EAAW,gBAAAwC,EAAiB,MAAAx4B,EAAQ,CAAM,EAAAtnB,EAEnF,CAAC+/C,EAAgBC,CAAiB,EAAIzxB,WAAS,CACnD,SAAU,EACV,UAAW,GACX,SAAU,GACX,EAqDG,OAnDJC,YAAU,IAAM,CACd,GAAIoxB,GAAgBC,EACd,IAEI,MAAAI,EAAoB3O,GAAmBuO,EAAe,EAAE,EAE9D,GAAI,CAACI,EAAmB,CACfx6C,GAAA,KAAK,4DAA6Do6C,EAAe,EAAE,EAC1F,MACF,CAGA,MAAMJ,EAAqB9H,GACzBiI,EAAa,SAAUA,EAAa,UACpCK,EAAkB,SAAUA,EAAkB,WAI1C5lC,EAAYqlC,GAChBE,EAAa,SAAUA,EAAa,UACpCK,EAAkB,SAAUA,EAAkB,WAI1CC,EAAWT,EAAqBP,GAGhCiB,EAAkBX,GAAwBC,CAAkB,EAGhDO,EAAA,CAChB,SAAUG,EACV,UAAA9lC,EACA,SAAA6lC,CAAA,CACD,EAGDz6C,GAAO,KAAK,8CAA+C,CACzD,aAAAm6C,EACA,eAAgBC,EAAe,GAC/B,SAAUM,EACV,UAAA9lC,EACA,SAAA6lC,CAAA,CACD,QACMloD,EAAY,CACZyN,GAAA,MAAM,iEAAkEzN,CAAK,CACtF,CACF,EACC,CAAC4nD,EAAcC,CAAc,CAAC,EAG7B,CAACD,GAAgB,CAACC,EACb,KAMJ71B,EAAA,KAAA0rB,WAAA,WAAA4H,GAAawC,GACZ91B,OAAC,MAAI,WAAU,2CAEb,UAAAA,OAAC,OAAI,MAAM,OAAO,OAAO,OAAO,UAAU,4CACxC,UAAAhB,EAAA,IAAC,QACC,GAAIs0B,EAAU,EAAIh2B,EAClB,GAAIg2B,EAAU,EAAIh2B,EAClB,GAAIw4B,EAAgB,EAAIx4B,EACxB,GAAIw4B,EAAgB,EAAIx4B,EACxB,OAAO,UACP,YAAY,IACZ,gBAAgB,MAClB,EAGC0B,EAAA,cAAO,GAAIs0B,EAAU,EAAIh2B,EAAO,GAAIg2B,EAAU,EAAIh2B,EAAO,EAAE,IAAI,KAAK,UAAU,EAC9E0B,EAAA,cAAO,GAAI82B,EAAgB,EAAIx4B,EAAO,GAAIw4B,EAAgB,EAAIx4B,EAAO,EAAE,IAAI,KAAK,UAAU,GAC7F,EAGA0C,EAAA,KAAC,OACC,UAAU,mKACV,MAAO,CACL,KAAM,IAAKszB,EAAU,EAAIwC,EAAgB,GAAK,EAAKx4B,CAAK,KACxD,IAAK,IAAKg2B,EAAU,EAAIwC,EAAgB,GAAK,EAAKx4B,CAAK,KACvD,UAAW,uBACb,EACA,QAASsT,EAET,UAAA5Q,OAAC,OAAM,WAAe+1B,EAAA,SAAS,MAAE,EACjC/2B,MAACS,GAAE,WAAU,uBAAwB,IACvC,GACF,EAIFO,OAAC,MAAI,WAAU,6EACb,UAACA,OAAA,OAAI,UAAU,yCACb,UAACA,OAAA,OAAI,UAAU,oBACb,UAAChB,MAAAytB,GAAA,CAAO,UAAU,4BAA6B,GAC9CztB,EAAA,UAAG,UAAU,wBAAyB,WAAe,KAAK,GAC7D,EACAgB,OAAC8rB,GAAO,QAAQ,cAAc,KAAK,KAAK,QAASlb,EAAS,UAAU,0BAClE,UAAC5R,MAAAS,GAAA,CAAE,UAAU,SAAU,GAAE,WAE3B,GACF,QAEC,MAAI,WAAU,oCACb,SAACO,EAAA,YAAI,UAAU,oBACb,UAAChB,MAAAi2B,GAAA,CAAW,UAAU,4BAA6B,GAClDj2B,EAAA,WACC,SAACA,EAAA,SAAE,UAAU,cACV,SAAe+2B,EAAA,SAAW,oBAAsB,GAAGA,EAAe,QAAQ,SAC7E,GACF,GACF,CACF,IACF,CACF,GAEJ,CC5MA,MAAMrE,GAAiBvP,GAAa,cAAc,EAE5C1mC,GAAS,CACb,KAAM,CAACtN,EAAiB0F,IAAe,CAEjC,IAAA1F,EAAQ,SAAS,eAAe,EAG7B,OAAAujD,GAAe,KAAKvjD,EAAS0F,CAAI,CAC1C,EACA,KAAM69C,GAAe,KACrB,MAAOA,GAAe,MACtB,MAAOA,GAAe,KACxB,EAGaoB,GAAY,IACZC,GAAa,IAqCbqD,GAA4C,CAAC,CACxD,UAAA5P,EACA,iBAAA6P,EAAmB,CAAC,EACpB,gBAAAC,EACA,oBAAAC,EAAsB,KACtB,UAAAC,EACA,gBAAAC,EACA,eAAAC,EAAiB,KACjB,QAAAC,EACA,SAAAC,EAAW,GACX,cAAAC,EACA,kBAAAC,EACA,gBAAAC,EACA,WAAAC,EACA,MAAAC,EACA,SAAAC,CACF,IAAM,CACE,MAAAC,EAAexD,SAAuB,IAAI,EAC1C,CAACr2B,EAAO85B,CAAQ,EAAI7yB,WAAS,CAAC,EAC9B,CAAC8yB,EAAYC,CAAa,EAAI/yB,WAAS,EAAK,EACVA,WAAS,CAAE,EAAG,EAAG,EAAG,EAAG,EACzBA,WAAS,CAAE,EAAG,EAAG,EAAG,EAAG,EAC7D,KAAM,CAACgzB,EAAeC,CAAgB,EAAIjzB,WAA0C,IAAI,EACzEovB,SAAuB,IAAI,EAEpC,MAAA8D,EAAkB9D,SAAwC,IAAI,EAC9D+D,EAAa/D,SAAwC,IAAI,EACzDgE,EAAahE,SAAmC,CAAE,GAAI,EAAG,GAAI,EAAG,EAChEiE,EAAgBjE,SAAe,CAAC,EAGHA,gBAAO,EAAK,EAG/CnvB,YAAU,IAAM,CACd,MAAMqzB,EAAiB,IAAM,OAC3B,GAAIV,EAAa,QAAS,CAExB,MAAMW,IAActlD,EAAA2kD,EAAa,QAAQ,gBAArB,YAAA3kD,EAAoC,cAAe,OAAO,WAGxEulD,EADW,KAAK,IAAID,EAAahF,EAAS,EACpBA,GAG5BsE,EAASW,CAAQ,EAGblB,GACFA,EAAckB,CAAQ,EAIxBZ,EAAa,QAAQ,MAAM,MAAQ,GAAGrE,GAAYiF,CAAQ,KAC1DZ,EAAa,QAAQ,MAAM,OAAS,GAAGpE,GAAagF,CAAQ,IAgB9D,GAIaF,IAGT,MAAAG,EAAkBC,EAASJ,EAAgB,GAAG,EAC7C,wBAAiB,SAAUG,CAAe,EAGxC,SAAAC,EAASr1C,EAAc63B,EAAe,CAC7C,IAAIrV,EAAuB,KAC3B,OAAO,UAAW,CACZA,GAAc,oBAAaA,CAAK,EAC5BA,EAAA,OAAO,WAAW,IAAM,CAC3BxiB,IACKwiB,EAAA,MACPqV,CAAK,EAEZ,CAEA,MAAO,IAAM,CACJ,2BAAoB,SAAUud,CAAe,EACtD,EACC,CAACnB,CAAa,CAAC,EAGlBryB,YAAU,IAAM,CACd,GAAIoyB,EAAU,OACR,MAAAsB,EAAmB1pD,GAAkB,CACzC,GAAI,CAAC6oD,GAAc,CAACI,EAAgB,QAAS,OAC7C,MAAMU,EAAU,CAAE,EAAG3pD,EAAE,QAAS,EAAGA,EAAE,SACjC,IAACkpD,EAAW,QAAS,CACvBA,EAAW,QAAUS,EACrB,MACF,CACA,MAAMC,GAAKD,EAAQ,EAAIT,EAAW,QAAQ,EACpCW,EAAKF,EAAQ,EAAIT,EAAW,QAAQ,EAC1CC,EAAW,QAAQ,IAAMS,GACzBT,EAAW,QAAQ,IAAMU,EACzBX,EAAW,QAAUS,EACjBlB,GACIA,EAAA,CAAE,GAAAmB,GAAI,GAAAC,EAAI,EAAGF,EAAQ,EAAG,EAAGA,EAAQ,EAAG,CAC9C,EAEIG,EAAgB,IAAM,CAC1B,GAAI,CAACjB,EAAY,OACjBC,EAAc,EAAK,EACnB,MAAMiB,EAAa,KAAK,IAAI,EAAIX,EAAc,QACxC,CAAE,GAAAQ,EAAI,GAAAC,IAAOV,EAAW,QACxBa,EAAW,KAAK,MAAMJ,EAAIC,EAAE,EAElCZ,EAAgB,QAAU,KAC1BC,EAAW,QAAU,KACrBC,EAAW,QAAU,CAAE,GAAI,EAAG,GAAI,GAC9BT,GACFA,EAAS,CAAE,QAASkB,EAAI,QAASC,GAAI,SAAAG,EAAU,WAAAD,EAAY,EAEtD,2BAAoB,YAAaL,CAAe,EAChD,2BAAoB,UAAWI,CAAa,GAE/CG,EAAY,CAACC,EAAiBC,IAAoB,CACtDrB,EAAc,EAAI,EAClBG,EAAgB,QAAU,CAAE,EAAGiB,EAAS,EAAGC,GAC3CjB,EAAW,QAAU,CAAE,EAAGgB,EAAS,EAAGC,GACtChB,EAAW,QAAU,CAAE,GAAI,EAAG,GAAI,GACpBC,EAAA,QAAU,KAAK,MACzBZ,GAAuBA,EAAA,CAAE,EAAG0B,EAAS,EAAGC,EAAS,EAC9C,wBAAiB,YAAaT,CAAe,EAC7C,wBAAiB,UAAWI,CAAa,GAE5CM,EAAKzB,EAAa,QACxB,GAAI,CAACyB,EAAI,OACH,MAAAC,EAAerqD,GAAkB,CAEjCA,EAAE,SAAW,GACPiqD,EAAAjqD,EAAE,QAASA,EAAE,OAAO,GAE7B,OAAAoqD,EAAA,iBAAiB,YAAaC,CAAW,EACrC,IAAM,CACRD,EAAA,oBAAoB,YAAaC,CAAW,EACxC,2BAAoB,YAAaX,CAAe,EAChD,2BAAoB,UAAWI,CAAa,EACrD,EACC,CAACjB,EAAYT,EAAUI,EAAYC,EAAOC,CAAQ,CAAC,EAGtD1yB,YAAU,IAAM,CACVgiB,GAAaA,EAAU,OAAS,GAClC/qC,GAAO,KAAK,sCAAuC,CACjD,iBAAkBi7C,GAAkB,QACpC,OAAQlQ,EAAU,IAAYa,IAAA,CAC5B,GAAIA,EAAI,GACR,KAAMA,EAAI,KACV,EAAGA,EAAI,EACP,EAAGA,EAAI,GACP,EACH,CACH,EACC,CAACb,EAAWkQ,CAAc,CAAC,EAG5B12B,EAAA,KAAC,OACC,IAAKm3B,EACL,UAAU,wFACV,MAAO,CACL,MAAO,GAAGrE,GAAYx1B,CAAK,KAC3B,OAAQ,GAAGy1B,GAAaz1B,CAAK,IAC/B,EAGA,UAAA0B,EAAA,IAAC,OACC,UAAU,6DACV,QAAU43B,EAAqB,OAAVD,EACrB,MAAO,CACL,OAASC,EAAuB,UAAZ,SACtB,EAGA,SAAA53B,EAAA,IAAC,OACC,UAAU,gBACV,MAAO,CACL,gBAAiB,OAAOquB,GAAa,kBAAkB,CAAC,IACxD,mBAAoB,SACpB,iBAAkB,YAClB,eAAgB,UAChB,QAAS,GACT,cAAe,MACjB,EAGA,SAAAruB,EAAA,IAAC,OACC,IAAKquB,GAAa,kBAAkB,EACpC,IAAI,wBACJ,UAAU,SACV,QAAU7+C,GAAM,CACdiN,GAAO,MAAM,8CAAgD,CAAE,OAAQyqC,KAAY,CAErF,EACF,EACF,EACF,EAGAlmB,OAAC,MAAI,WAAU,mBAEZ,UACCw2B,GAAAx3B,EAAA,IAAC,OACC,UAAU,WACV,MAAO,CACL,SAAU,WACV,KAAM,GAAGw3B,EAAU,EAAIl5B,CAAK,KAC5B,IAAK,GAAGk5B,EAAU,EAAIl5B,CAAK,KAC3B,OAAQ,GACR,UAAW,uBACb,EAEA,SAAA0B,EAAA,IAAC,OACC,UAAU,+DACV,MAAO,CACL,MAAO,GAAG,GAAK1B,CAAK,KACpB,OAAQ,GAAG,GAAKA,CAAK,IACvB,EACF,EACF,EAIDm5B,GACCz3B,EAAA,IAAC,OACC,UAAU,WACV,MAAO,CACL,SAAU,WACV,KAAM,GAAGy3B,EAAgB,EAAIn5B,CAAK,KAClC,IAAK,GAAGm5B,EAAgB,EAAIn5B,CAAK,KACjC,OAAQ,GACR,UAAW,uBACb,EAEA,SAAA0B,EAAA,IAAC,OACC,UAAU,+DACV,MAAO,CACL,MAAO,GAAG,GAAK1B,CAAK,KACpB,OAAQ,GAAG,GAAKA,CAAK,IACvB,EACF,EACF,EAGDkpB,EAAU,IAAK5D,GACd5jB,EAAA,IAAC,OAEC,GAAI,YAAY4jB,EAAS,EAAE,GAC3B,mBAAkBA,EAAS,GAC3B,UAAU,WACV,MAAO,CACL,SAAU,WACV,KAAM,GAAGA,EAAS,EAAItlB,CAAK,KAC3B,IAAK,GAAGslB,EAAS,EAAItlB,CAAK,KAC1B,OAAQ,GACR,MAAO,GAAG,GAAKA,CAAK,KACpB,OAAQ,GAAG,GAAKA,CAAK,KACrB,UAAW,wBACX,cAAgBs5B,EAAoB,OAAT,OAC3B,OAASA,EAAuB,UAAZ,SACtB,EACA,QAAUA,EAGN,OAHkBpoD,GAAM,CAC1BA,EAAE,gBAAgB,EACdmoD,KAAiBnoD,CAAC,CACpB,EAGJ,SAAAwwB,EAAA,IAAC,OACC,UAAW;AAAA,kBACP03B,IAAmB9T,EAAS,GAC1B,kEACA2T,IAAwB3T,EAAS,GAC/BA,EAAS,QACP,wDACA,yDACFA,EAAS,aAAe,GACtB,kBACAA,EAAS,QACP,kBACA,iBACV,GACF,MAAO,CACL,UAAW,wBACX,MAAO,GAAG,GAAKtlB,CAAK,KACpB,OAAQ,GAAG,GAAKA,CAAK,IACvB,EACF,GAxCKslB,EAAS,GA0CjB,GACH,EAGCkU,GACC93B,EAAA,IAACm0B,GAAA,CACE,GAAG2D,EACJ,MAAAx5B,EACA,iBAAkB,CAAC8D,EAAGC,EAAG+yB,IAAgB,CACtBoD,EAAA,CAAC,EAAAp2B,EAAG,EAAAC,CAAA,CAAE,EACnBy1B,EAAkB,kBACFA,EAAA,iBAAiB11B,EAAGC,EAAG+yB,CAAW,CAExD,EACF,EAID2C,GAAmBD,GAClB93B,EAAA,IAAC22B,GAAA,CACE,GAAGoB,EACJ,UAAWQ,EACX,gBAAiBR,EAAgB,eAAiB,CAChD,EAAGA,EAAgB,eAAe,EAClC,EAAGA,EAAgB,eAAe,GAChC,KACJ,MAAAz5B,CAAA,CACF,IAIR,ECpXA,IAAIw7B,GAAiB,CAAC,QAAS,GAAG,EAC9BC,GAAa,CAAC,YAAa,SAAU,MAAM,EAC3CC,GAAY,CAAC,UAAW,WAAY,KAAK,EACzCC,GAAkB,CAAC,GAAGF,GAAY,GAAGC,EAAS,EAC9CE,GAAgB,CAClB,IAAK,CAAC,GAAGJ,GAAgB,YAAY,EACrC,IAAK,CAAC,GAAGA,GAAgB,WAAW,CACtC,EACIK,GAAiB,CACnB,IAAK,CAAC,WAAW,EACjB,IAAK,CAAC,YAAY,CACpB,EACIC,GAAY,OACZ,CAACC,GAAYC,GAAeC,EAAqB,EAAIC,GAAiBJ,EAAS,EAC/E,CAACK,GAAmBC,EAAe,EAAIttB,GAAmBgtB,GAAW,CACvEG,GACAltB,GACAstB,EACF,CAAC,EACGrtB,GAAiBD,GAAiB,EAClCutB,GAA2BD,GAA2B,EACtD,CAACE,GAAcC,EAAc,EAAIL,GAAkBL,EAAS,EAC5D,CAACW,GAAkBC,EAAkB,EAAIP,GAAkBL,EAAS,EACpEa,GAAQjkD,GAAU,CACpB,KAAM,CAAE,YAAAkkD,EAAa,KAAA3nC,EAAO,GAAO,SAAA0a,EAAU,IAAAktB,EAAK,aAAAnsB,EAAc,MAAAosB,EAAQ,EAAM,EAAGpkD,EAC3Eo4B,EAAc9B,GAAe4tB,CAAW,EACxC,CAACrpB,EAASwpB,CAAU,EAAI3nC,EAAc,SAAC,IAAI,EAC3C4nC,EAAqBjtB,SAAa,EAAK,EACvCktB,EAAmBC,GAAexsB,CAAY,EAC9C3d,EAAYoqC,GAAaN,CAAG,EAClCxnC,mBAAgB,IAAM,CACpB,MAAM+nC,EAAgB,IAAM,CAC1BJ,EAAmB,QAAU,GAC7B,SAAS,iBAAiB,cAAeK,EAAe,CAAE,QAAS,GAAM,KAAM,EAAI,CAAE,EACrF,SAAS,iBAAiB,cAAeA,EAAe,CAAE,QAAS,GAAM,KAAM,EAAI,CAAE,CAC3F,EACUA,EAAgB,IAAML,EAAmB,QAAU,GACzD,gBAAS,iBAAiB,UAAWI,EAAe,CAAE,QAAS,EAAI,CAAE,EAC9D,IAAM,CACX,SAAS,oBAAoB,UAAWA,EAAe,CAAE,QAAS,EAAI,CAAE,EACxE,SAAS,oBAAoB,cAAeC,EAAe,CAAE,QAAS,EAAI,CAAE,EAC5E,SAAS,oBAAoB,cAAeA,EAAe,CAAE,QAAS,EAAI,CAAE,CAClF,CACG,EAAE,CAAE,GACkB37B,EAAG,IAACiQ,GAAsB,CAAE,GAAGb,EAAa,SAA0BpP,EAAG,IAC9F66B,GACA,CACE,MAAOK,EACP,KAAA3nC,EACA,aAAcgoC,EACd,QAAA1pB,EACA,gBAAiBwpB,EACjB,SAA0Br7B,EAAG,IAC3B+6B,GACA,CACE,MAAOG,EACP,QAAS1sB,EAAiB,YAAC,IAAM+sB,EAAiB,EAAK,EAAG,CAACA,CAAgB,CAAC,EAC5E,mBAAAD,EACA,IAAKjqC,EACL,MAAA+pC,EACA,SAAAntB,CACD,CACF,CACF,CACF,EAAE,CACL,EACAgtB,GAAK,YAAcb,GACnB,IAAIwB,GAAc,aACdC,GAAa/7B,EAAgB,WAC/B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,GAAGY,CAAW,EAAK9kD,EAClCo4B,EAAc9B,GAAe4tB,CAAW,EAC9C,OAAuBl7B,EAAG,IAAC2Q,GAAwB,CAAE,GAAGvB,EAAa,GAAG0sB,EAAa,IAAK1rB,CAAY,CAAE,CACzG,CACH,EACAyrB,GAAW,YAAcD,GACzB,IAAI9qB,GAAc,aACd,CAACC,GAAgBC,EAAgB,EAAIypB,GAAkB3pB,GAAa,CACtE,WAAY,MACd,CAAC,EACGirB,GAAc/kD,GAAU,CAC1B,KAAM,CAAE,YAAAkkD,EAAa,WAAA9pB,EAAY,SAAAnD,EAAU,UAAA92B,CAAS,EAAKH,EACnDkrB,EAAU44B,GAAehqB,GAAaoqB,CAAW,EACvD,OAAuBl7B,MAAI+Q,GAAgB,CAAE,MAAOmqB,EAAa,WAAA9pB,EAAY,SAA0BpR,EAAG,IAACuR,GAAU,CAAE,QAASH,GAAclP,EAAQ,KAAM,SAA0BlC,MAAIg8B,GAAiB,CAAE,QAAS,GAAM,UAAA7kD,EAAW,SAAA82B,CAAQ,CAAE,CAAG,EAAG,EACzP,EACA8tB,GAAW,YAAcjrB,GACzB,IAAIG,GAAe,cACf,CAACgrB,GAAqBC,EAAqB,EAAIzB,GAAkBxpB,EAAY,EAC7EkrB,GAAcr8B,EAAgB,WAChC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMe,EAAgBH,GAAiBC,GAAcj6B,EAAM,WAAW,EAChE,CAAE,WAAAo6B,EAAaD,EAAc,WAAY,GAAGG,CAAc,EAAGt6B,EAC7DkrB,EAAU44B,GAAe7pB,GAAcj6B,EAAM,WAAW,EACxDolD,EAAcpB,GAAmB/pB,GAAcj6B,EAAM,WAAW,EACtE,OAAuBgpB,EAAG,IAACq6B,GAAW,SAAU,CAAE,MAAOrjD,EAAM,YAAa,SAA0BgpB,MAAIuR,GAAU,CAAE,QAASH,GAAclP,EAAQ,KAAM,SAA0BlC,MAAIq6B,GAAW,KAAM,CAAE,MAAOrjD,EAAM,YAAa,SAAUolD,EAAY,MAAwBp8B,EAAG,IAACq8B,GAAsB,CAAE,GAAG/qB,EAAc,IAAKlB,CAAc,GAAoBpQ,MAAIs8B,GAAyB,CAAE,GAAGhrB,EAAc,IAAKlB,CAAY,CAAE,CAAG,GAAG,CAAC,CAAE,CACrb,CACH,EACIisB,GAAuBv8B,EAAgB,WACzC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMlO,EAAU44B,GAAe7pB,GAAcj6B,EAAM,WAAW,EACxD+oB,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,CAAG,EACtDpM,mBAAgB,IAAM,CACpB,MAAMke,EAAU9R,EAAI,QACpB,GAAI8R,EAAS,OAAO0qB,GAAW1qB,CAAO,CACvC,EAAE,CAAE,GACkB7R,EAAG,IACxBw8B,GACA,CACE,GAAGxlD,EACH,IAAKs5B,EACL,UAAWpO,EAAQ,KACnB,4BAA6BA,EAAQ,KACrC,qBAAsB,GACtB,eAAgB2O,GACd75B,EAAM,eACLvG,GAAUA,EAAM,eAAgB,EACjC,CAAE,yBAA0B,EAAO,CACpC,EACD,UAAW,IAAMyxB,EAAQ,aAAa,EAAK,CAC5C,CACP,CACG,CACH,EACIo6B,GAA0Bx8B,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACtE,MAAMlO,EAAU44B,GAAe7pB,GAAcj6B,EAAM,WAAW,EAC9D,OAAuBgpB,EAAG,IACxBw8B,GACA,CACE,GAAGxlD,EACH,IAAKo5B,EACL,UAAW,GACX,4BAA6B,GAC7B,qBAAsB,GACtB,UAAW,IAAMlO,EAAQ,aAAa,EAAK,CAC5C,CACL,CACA,CAAC,EACGs6B,GAAkB18B,EAAgB,WACpC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,YAAA8qB,EACA,KAAAuB,EAAO,GACP,UAAAC,EACA,gBAAAC,EACA,iBAAAC,EACA,4BAAAC,EACA,aAAAC,EACA,gBAAAxpB,EACA,qBAAAC,EACA,eAAAwpB,EACA,kBAAAC,EACA,UAAAC,EACA,qBAAAC,EACA,GAAG5rB,CACJ,EAAGt6B,EACEkrB,EAAU44B,GAAe7pB,GAAciqB,CAAW,EAClDkB,EAAcpB,GAAmB/pB,GAAciqB,CAAW,EAC1D9rB,EAAc9B,GAAe4tB,CAAW,EACxCiC,EAAwBvC,GAAyBM,CAAW,EAC5DkC,EAAW9C,GAAcY,CAAW,EACpC,CAACmC,EAAeC,CAAgB,EAAI5pC,EAAc,SAAC,IAAI,EACvD6pC,EAAalvB,SAAa,IAAI,EAC9BiC,EAAeC,GAAgBH,EAAcmtB,EAAYr7B,EAAQ,eAAe,EAChFs7B,EAAWnvB,SAAa,CAAC,EACzBovB,EAAYpvB,SAAa,EAAE,EAC3BqvB,EAAuBrvB,SAAa,CAAC,EACrCsvB,EAAwBtvB,SAAa,IAAI,EACzCuvB,EAAgBvvB,SAAa,OAAO,EACpCwvB,EAAkBxvB,SAAa,CAAC,EAChCyvB,EAAoBZ,EAAuBa,GAAeC,WAC1DC,EAAyBf,EAAuB,CAAE,GAAIjQ,GAAM,eAAgB,IAAS,OACrFiR,GAAyB9oD,GAAQ,WACrC,MAAM+oD,EAASV,EAAU,QAAUroD,EAC7B+iC,EAAQilB,EAAQ,EAAG,OAAQhlB,IAAS,CAACA,GAAK,QAAQ,EAClDgmB,GAAc,SAAS,cACvBC,GAAe7qD,GAAA2kC,EAAM,KAAMC,IAASA,GAAK,IAAI,UAAYgmB,EAAW,IAArD,YAAA5qD,GAAwD,UACvE8qD,GAASnmB,EAAM,IAAKC,IAASA,GAAK,SAAS,EAC3CmmB,GAAYC,GAAaF,GAAQH,EAAQE,CAAY,EACrDI,GAAU39C,GAAAq3B,EAAM,KAAMC,IAASA,GAAK,YAAcmmB,EAAS,IAAjD,YAAAz9C,GAAoD,IAAI,SACvE,SAAS49C,GAAa7qD,GAAO,CAC5B4pD,EAAU,QAAU5pD,GACpB,OAAO,aAAa2pD,EAAS,OAAO,EAChC3pD,KAAU,KAAI2pD,EAAS,QAAU,OAAO,WAAW,IAAMkB,GAAa,EAAE,EAAG,GAAG,EACnF,GAAEP,CAAM,EACLM,GACF,WAAW,IAAMA,EAAQ,MAAK,CAAE,CAExC,EACI9qC,YAAgB,IACP,IAAM,OAAO,aAAa6pC,EAAS,OAAO,EAChD,CAAE,GACLmB,KACA,MAAMC,EAA2BpwB,cAAmB/9B,GAAU,UAE5D,OADwBmtD,EAAc,YAAYpqD,EAAAmqD,EAAsB,UAAtB,YAAAnqD,EAA+B,OACvDqrD,GAAqBpuD,GAAOqQ,GAAA68C,EAAsB,UAAtB,YAAA78C,GAA+B,IAAI,CAC1F,EAAE,CAAE,GACL,OAAuBkf,EAAG,IACxBi8B,GACA,CACE,MAAOf,EACP,UAAAuC,EACA,YAAajvB,EAAiB,YAC3B/9B,GAAU,CACLmuD,EAAyBnuD,CAAK,GAAGA,EAAM,eAAc,CAC1D,EACD,CAACmuD,CAAwB,CAC1B,EACD,YAAapwB,EAAiB,YAC3B/9B,GAAU,OACLmuD,EAAyBnuD,CAAK,KAClC+C,EAAA+pD,EAAW,UAAX,MAAA/pD,EAAoB,QACpB8pD,EAAiB,IAAI,EACtB,EACD,CAACsB,CAAwB,CAC1B,EACD,eAAgBpwB,EAAiB,YAC9B/9B,GAAU,CACLmuD,EAAyBnuD,CAAK,GAAGA,EAAM,eAAc,CAC1D,EACD,CAACmuD,CAAwB,CAC1B,EACD,qBAAAlB,EACA,2BAA4BlvB,cAAmBswB,GAAW,CACxDnB,EAAsB,QAAUmB,CACjC,EAAE,EAAE,EACL,SAA0B9+B,EAAG,IAAC89B,EAAmB,CAAE,GAAGG,EAAwB,SAA0Bj+B,EAAG,IACzG++B,GACA,CACE,QAAS,GACT,QAASrC,EACT,iBAAkB7rB,GAAqB8rB,EAAkBlsD,GAAU,OACjEA,EAAM,eAAc,GACpB+C,EAAA+pD,EAAW,UAAX,MAAA/pD,EAAoB,MAAM,CAAE,cAAe,EAAM,EAC/D,CAAa,EACD,mBAAoBopD,EACpB,SAA0B58B,EAAG,IAC3ByT,GACA,CACE,QAAS,GACT,4BAAAopB,EACA,gBAAAvpB,EACA,qBAAAC,EACA,eAAAwpB,EACA,kBAAAC,EACA,UAAAC,EACA,SAA0Bj9B,EAAG,IAC3Bg/B,GACA,CACE,QAAS,GACT,GAAG7B,EACH,IAAKf,EAAY,IACjB,YAAa,WACb,KAAAK,EACA,iBAAkBY,EAClB,yBAA0BC,EAC1B,aAAczsB,GAAqBisB,EAAersD,GAAU,CACrD2rD,EAAY,mBAAmB,SAAS3rD,EAAM,eAAc,CACvF,CAAqB,EACD,0BAA2B,GAC3B,SAA0BuvB,EAAG,IAC3B0T,GACA,CACE,KAAM,OACN,mBAAoB,WACpB,aAAcurB,GAAa/8B,EAAQ,IAAI,EACvC,0BAA2B,GAC3B,IAAKk6B,EAAY,IACjB,GAAGhtB,EACH,GAAGkC,EACH,IAAKhB,EACL,MAAO,CAAE,QAAS,OAAQ,GAAGgB,EAAa,KAAO,EACjD,UAAWT,GAAqBS,EAAa,UAAY7gC,GAAU,CAEjE,MAAMyuD,EADSzuD,EAAM,OACU,QAAQ,2BAA2B,IAAMA,EAAM,cACxE0uD,GAAgB1uD,EAAM,SAAWA,EAAM,QAAUA,EAAM,QACvD2uD,EAAiB3uD,EAAM,IAAI,SAAW,EACxCyuD,IACEzuD,EAAM,MAAQ,OAAOA,EAAM,eAAc,EACzC,CAAC0uD,IAAiBC,GAAgBlB,GAAsBztD,EAAM,GAAG,GAEvE,MAAMohC,GAAU0rB,EAAW,QAE3B,GADI9sD,EAAM,SAAWohC,IACjB,CAACooB,GAAgB,SAASxpD,EAAM,GAAG,EAAG,OAC1CA,EAAM,eAAc,EAEpB,MAAM4uD,EADQjC,EAAQ,EAAG,OAAQhlB,IAAS,CAACA,GAAK,QAAQ,EAC3B,IAAKA,IAASA,GAAK,IAAI,OAAO,EACvD4hB,GAAU,SAASvpD,EAAM,GAAG,GAAG4uD,EAAe,UAClDC,GAAWD,CAAc,CACnD,CAAyB,EACD,OAAQxuB,GAAqB75B,EAAM,OAASvG,GAAU,CAC/CA,EAAM,cAAc,SAASA,EAAM,MAAM,IAC5C,OAAO,aAAa+sD,EAAS,OAAO,EACpCC,EAAU,QAAU,GAEhD,CAAyB,EACD,cAAe5sB,GACb75B,EAAM,cACNuoD,GAAW9uD,GAAU,CACnB,MAAMgK,EAAShK,EAAM,OACf+uD,EAAqB3B,EAAgB,UAAYptD,EAAM,QAC7D,GAAIA,EAAM,cAAc,SAASgK,CAAM,GAAK+kD,EAAoB,CAC9D,MAAMC,GAAShvD,EAAM,QAAUotD,EAAgB,QAAU,QAAU,OACnED,EAAc,QAAU6B,GACxB5B,EAAgB,QAAUptD,EAAM,OACjC,CAC7B,CAA2B,CACF,CACF,CACF,CACF,CACF,CACF,CACF,CACF,CACX,EAAW,CACJ,CACP,CACG,CACH,EACA0rD,GAAY,YAAclrB,GAC1B,IAAIyuB,GAAa,YACbC,GAAY7/B,EAAgB,WAC9B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,GAAG0E,CAAU,EAAK5oD,EACvC,OAAuBgpB,MAAI4Q,GAAU,IAAK,CAAE,KAAM,QAAS,GAAGgvB,EAAY,IAAKxvB,CAAY,CAAE,CAC9F,CACH,EACAuvB,GAAU,YAAcD,GACxB,IAAIG,GAAa,YACbC,GAAYhgC,EAAgB,WAC9B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,GAAG6E,CAAU,EAAK/oD,EACvC,OAAuBgpB,EAAG,IAAC4Q,GAAU,IAAK,CAAE,GAAGmvB,EAAY,IAAK3vB,CAAY,CAAE,CAC/E,CACH,EACA0vB,GAAU,YAAcD,GACxB,IAAIG,GAAY,WACZC,GAAc,kBACdC,GAAWpgC,EAAgB,WAC7B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,SAAA+vB,EAAW,GAAO,SAAAC,EAAU,GAAGC,CAAW,EAAGrpD,EAC/C+oB,EAAMsO,SAAa,IAAI,EACvB+tB,EAAcpB,GAAmBgF,GAAWhpD,EAAM,WAAW,EAC7DspD,EAAiBpE,GAAsB8D,GAAWhpD,EAAM,WAAW,EACnEs5B,EAAeC,GAAgBH,EAAcrQ,CAAG,EAChDyQ,EAAmBnC,SAAa,EAAK,EACrCkyB,EAAe,IAAM,CACzB,MAAMC,EAAWzgC,EAAI,QACrB,GAAI,CAACogC,GAAYK,EAAU,CACzB,MAAMC,EAAkB,IAAI,YAAYR,GAAa,CAAE,QAAS,GAAM,WAAY,EAAI,CAAE,EACxFO,EAAS,iBAAiBP,GAAcxvD,GAAU2vD,GAAA,YAAAA,EAAW3vD,GAAQ,CAAE,KAAM,EAAI,CAAE,EACnFiwD,GAA4BF,EAAUC,CAAe,EACjDA,EAAgB,iBAClBjwB,EAAiB,QAAU,GAE3B4rB,EAAY,QAAO,CAEtB,CACP,EACI,OAAuBp8B,EAAG,IACxB2gC,GACA,CACE,GAAGN,EACH,IAAK/vB,EACL,SAAA6vB,EACA,QAAStvB,GAAqB75B,EAAM,QAASupD,CAAY,EACzD,cAAgB9vD,GAAU,QACxB+C,EAAAwD,EAAM,gBAAN,MAAAxD,EAAA,KAAAwD,EAAsBvG,GACtB+/B,EAAiB,QAAU,EAC5B,EACD,YAAaK,GAAqB75B,EAAM,YAAcvG,GAAU,OACzD+/B,EAAiB,UAASh9B,EAAA/C,EAAM,gBAAN,MAAA+C,EAAqB,OAC9D,CAAS,EACD,UAAWq9B,GAAqB75B,EAAM,UAAYvG,GAAU,CAC1D,MAAMmwD,EAAgBN,EAAe,UAAU,UAAY,GACvDH,GAAYS,GAAiBnwD,EAAM,MAAQ,KAC3CqpD,GAAe,SAASrpD,EAAM,GAAG,IACnCA,EAAM,cAAc,QACpBA,EAAM,eAAc,EAEhC,CAAS,CACF,CACP,CACG,CACH,EACAyvD,GAAS,YAAcF,GACvB,IAAIW,GAAe7gC,EAAgB,WACjC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,SAAAiF,EAAW,GAAO,UAAAU,EAAW,GAAGR,CAAW,EAAGrpD,EAC7DspD,EAAiBpE,GAAsB8D,GAAW9E,CAAW,EAC7DiC,EAAwBvC,GAAyBM,CAAW,EAC5Dn7B,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,CAAG,EAChD,CAACqZ,EAAW0nB,CAAY,EAAIptC,EAAc,SAAC,EAAK,EAChD,CAACqtC,EAAaC,CAAc,EAAIttC,EAAc,SAAC,EAAE,EACvDC,mBAAgB,IAAM,CACpB,MAAM6sC,EAAWzgC,EAAI,QACjBygC,GACFQ,GAAgBR,EAAS,aAAe,IAAI,KAAM,EAE1D,EAAO,CAACH,EAAU,QAAQ,CAAC,EACArgC,EAAG,IACxBq6B,GAAW,SACX,CACE,MAAOa,EACP,SAAAiF,EACA,UAAWU,GAAaE,EACxB,SAA0B/gC,EAAG,IAACihC,GAAuB,CAAE,QAAS,GAAM,GAAG9D,EAAuB,UAAW,CAACgD,EAAU,SAA0BngC,EAAG,IACjJ4Q,GAAU,IACV,CACE,KAAM,WACN,mBAAoBwI,EAAY,GAAK,OACrC,gBAAiB+mB,GAAY,OAC7B,gBAAiBA,EAAW,GAAK,OACjC,GAAGE,EACH,IAAK/vB,EACL,cAAeO,GACb75B,EAAM,cACNuoD,GAAW9uD,GAAU,CACf0vD,EACFG,EAAe,YAAY7vD,CAAK,GAEhC6vD,EAAe,YAAY7vD,CAAK,EAC3BA,EAAM,kBACIA,EAAM,cACd,MAAM,CAAE,cAAe,EAAM,GAGtD,CAAe,CACF,EACD,eAAgBogC,GACd75B,EAAM,eACNuoD,GAAW9uD,GAAU6vD,EAAe,YAAY7vD,CAAK,CAAC,CACvD,EACD,QAASogC,GAAqB75B,EAAM,QAAS,IAAM8pD,EAAa,EAAI,CAAC,EACrE,OAAQjwB,GAAqB75B,EAAM,OAAQ,IAAM8pD,EAAa,EAAK,CAAC,CACrE,CACX,EAAW,CACJ,CACP,CACG,CACH,EACII,GAAqB,mBACrBC,GAAmBrhC,EAAgB,WACrC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,QAAAgxB,EAAU,GAAO,gBAAAC,EAAiB,GAAGC,CAAmB,EAAGtqD,EACnE,OAAuBgpB,EAAG,IAACuhC,GAAuB,CAAE,MAAOvqD,EAAM,YAAa,QAAAoqD,EAAS,SAA0BphC,EAAG,IAClHkgC,GACA,CACE,KAAM,mBACN,eAAgBsB,GAAgBJ,CAAO,EAAI,QAAUA,EACrD,GAAGE,EACH,IAAKlxB,EACL,aAAcqxB,GAAgBL,CAAO,EACrC,SAAUvwB,GACRywB,EAAkB,SAClB,IAAMD,GAAA,YAAAA,EAAkBG,GAAgBJ,CAAO,EAAI,GAAO,CAACA,GAC3D,CAAE,yBAA0B,EAAO,CACpC,CACF,CACF,EAAE,CACJ,CACH,EACAD,GAAiB,YAAcD,GAC/B,IAAIQ,GAAmB,iBACnB,CAACC,GAAoBC,EAAoB,EAAInH,GAC/CiH,GACA,CAAE,MAAO,OAAQ,cAAe,IAAM,CACxC,CAAK,CACL,EACIG,GAAiB/hC,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,MAAAv8B,EAAO,cAAAiuD,EAAe,GAAGlC,CAAU,EAAK5oD,EAC1C+qD,EAAoBvG,GAAesG,CAAa,EACtD,OAAuB9hC,MAAI2hC,GAAoB,CAAE,MAAO3qD,EAAM,YAAa,MAAAnD,EAAO,cAAekuD,EAAmB,SAA0B/hC,EAAG,IAAC2/B,GAAW,CAAE,GAAGC,EAAY,IAAKxvB,CAAY,CAAE,CAAC,CAAE,CACrM,CACH,EACAyxB,GAAe,YAAcH,GAC7B,IAAIM,GAAkB,gBAClBC,GAAgBniC,EAAgB,WAClC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,MAAAv8B,EAAO,GAAGquD,CAAc,EAAKlrD,EAC/BkrB,EAAU0/B,GAAqBI,GAAiBhrD,EAAM,WAAW,EACjEoqD,EAAUvtD,IAAUquB,EAAQ,MAClC,OAAuBlC,EAAG,IAACuhC,GAAuB,CAAE,MAAOvqD,EAAM,YAAa,QAAAoqD,EAAS,SAA0BphC,EAAG,IAClHkgC,GACA,CACE,KAAM,gBACN,eAAgBkB,EAChB,GAAGc,EACH,IAAK9xB,EACL,aAAcqxB,GAAgBL,CAAO,EACrC,SAAUvwB,GACRqxB,EAAe,SACf,WAAM,OAAA1uD,EAAA0uB,EAAQ,gBAAR,YAAA1uB,EAAA,KAAA0uB,EAAwBruB,IAC9B,CAAE,yBAA0B,EAAO,CACpC,CACF,CACF,EAAE,CACJ,CACH,EACAouD,GAAc,YAAcD,GAC5B,IAAIG,GAAsB,oBACtB,CAACZ,GAAuBa,EAAuB,EAAI3H,GACrD0H,GACA,CAAE,QAAS,EAAO,CACpB,EACIE,GAAoBviC,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,WAAA9pB,EAAY,GAAGkxB,CAAkB,EAAKtrD,EACrDurD,EAAmBH,GAAwBD,GAAqBjH,CAAW,EACjF,OAAuBl7B,EAAG,IACxBuR,GACA,CACE,QAASH,GAAcowB,GAAgBe,EAAiB,OAAO,GAAKA,EAAiB,UAAY,GACjG,SAA0BviC,EAAG,IAC3B4Q,GAAU,KACV,CACE,GAAG0xB,EACH,IAAKlyB,EACL,aAAcqxB,GAAgBc,EAAiB,OAAO,CACvD,CACF,CACF,CACP,CACG,CACH,EACAF,GAAkB,YAAcF,GAChC,IAAIK,GAAiB,gBACjBC,GAAgB3iC,EAAgB,WAClC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,GAAGwH,CAAc,EAAK1rD,EAC3C,OAAuBgpB,EAAG,IACxB4Q,GAAU,IACV,CACE,KAAM,YACN,mBAAoB,aACpB,GAAG8xB,EACH,IAAKtyB,CACN,CACP,CACG,CACH,EACAqyB,GAAc,YAAcD,GAC5B,IAAI3uB,GAAa,YACb8uB,GAAY7iC,EAAgB,WAC9B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,YAAA8qB,EAAa,GAAGnnB,CAAU,EAAK/8B,EACjCo4B,EAAc9B,GAAe4tB,CAAW,EAC9C,OAAuBl7B,EAAG,IAACgU,GAAuB,CAAE,GAAG5E,EAAa,GAAG2E,EAAY,IAAK3D,CAAY,CAAE,CACvG,CACH,EACAuyB,GAAU,YAAc9uB,GACxB,IAAI+uB,GAAW,UACX,CAACC,GAAiBC,EAAiB,EAAIrI,GAAkBmI,EAAQ,EAmCjEG,GAAmB,iBACnBC,GAAiBljC,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMlO,EAAU44B,GAAeiI,GAAkB/rD,EAAM,WAAW,EAC5DolD,EAAcpB,GAAmB+H,GAAkB/rD,EAAM,WAAW,EACpEisD,EAAaH,GAAkBC,GAAkB/rD,EAAM,WAAW,EAClEspD,EAAiBpE,GAAsB6G,GAAkB/rD,EAAM,WAAW,EAC1Eu4B,EAAelB,SAAa,IAAI,EAChC,CAAE,qBAAAqvB,EAAsB,2BAAAwF,CAA4B,EAAG5C,EACvDpgB,EAAQ,CAAE,YAAalpC,EAAM,WAAW,EACxCmsD,EAAiB30B,cAAkB,IAAM,CACzCe,EAAa,SAAS,OAAO,aAAaA,EAAa,OAAO,EAClEA,EAAa,QAAU,IACxB,EAAE,CAAE,GACL5b,mBAAgB,IAAMwvC,EAAgB,CAACA,CAAc,CAAC,EACtDxvC,YAAgB,IAAM,CACpB,MAAMyvC,EAAoB1F,EAAqB,QAC/C,MAAO,IAAM,CACX,OAAO,aAAa0F,CAAiB,EACrCF,EAA2B,IAAI,CACvC,CACA,EAAO,CAACxF,EAAsBwF,CAA0B,CAAC,EAC9BljC,MAAI67B,GAAY,CAAE,QAAS,GAAM,GAAG3b,EAAO,SAA0BlgB,EAAG,IAC7F2gC,GACA,CACE,GAAIsC,EAAW,UACf,gBAAiB,OACjB,gBAAiB/gC,EAAQ,KACzB,gBAAiB+gC,EAAW,UAC5B,aAAchE,GAAa/8B,EAAQ,IAAI,EACvC,GAAGlrB,EACH,IAAKqsD,GAAYjzB,EAAc6yB,EAAW,eAAe,EACzD,QAAUxyD,GAAU,QAClB+C,EAAAwD,EAAM,UAAN,MAAAxD,EAAA,KAAAwD,EAAgBvG,GACZ,EAAAuG,EAAM,UAAYvG,EAAM,oBAC5BA,EAAM,cAAc,QACfyxB,EAAQ,MAAMA,EAAQ,aAAa,EAAI,EAC7C,EACD,cAAe2O,GACb75B,EAAM,cACNuoD,GAAW9uD,GAAU,CACnB6vD,EAAe,YAAY7vD,CAAK,EAC5B,CAAAA,EAAM,kBACN,CAACuG,EAAM,UAAY,CAACkrB,EAAQ,MAAQ,CAACqN,EAAa,UACpD+wB,EAAe,2BAA2B,IAAI,EAC9C/wB,EAAa,QAAU,OAAO,WAAW,IAAM,CAC7CrN,EAAQ,aAAa,EAAI,EACzBihC,GACD,EAAE,GAAG,EAEpB,CAAW,CACF,EACD,eAAgBtyB,GACd75B,EAAM,eACNuoD,GAAW9uD,GAAU,SACnB0yD,IACA,MAAMG,GAAc9vD,EAAA0uB,EAAQ,UAAR,YAAA1uB,EAAiB,wBACrC,GAAI8vD,EAAa,CACf,MAAMjyB,GAAOvwB,EAAAohB,EAAQ,UAAR,YAAAphB,EAAiB,QAAQ,KAChCyiD,EAAYlyB,IAAS,QACrBmyB,EAAQD,EAAY,GAAK,EACzBE,EAAkBH,EAAYC,EAAY,OAAS,OAAO,EAC1DG,EAAiBJ,EAAYC,EAAY,QAAU,MAAM,EAC/DjD,EAAe,2BAA2B,CACxC,KAAM,CAGJ,CAAE,EAAG7vD,EAAM,QAAU+yD,EAAO,EAAG/yD,EAAM,OAAS,EAC9C,CAAE,EAAGgzD,EAAiB,EAAGH,EAAY,GAAK,EAC1C,CAAE,EAAGI,EAAgB,EAAGJ,EAAY,GAAK,EACzC,CAAE,EAAGI,EAAgB,EAAGJ,EAAY,MAAQ,EAC5C,CAAE,EAAGG,EAAiB,EAAGH,EAAY,MAAQ,CAC9C,EACD,KAAAjyB,CAChB,CAAe,EACD,OAAO,aAAaqsB,EAAqB,OAAO,EAChDA,EAAqB,QAAU,OAAO,WACpC,IAAM4C,EAAe,2BAA2B,IAAI,EACpD,GAChB,CACA,KAAmB,CAEL,GADAA,EAAe,eAAe7vD,CAAK,EAC/BA,EAAM,iBAAkB,OAC5B6vD,EAAe,2BAA2B,IAAI,CAC/C,CACb,CAAW,CACF,EACD,UAAWzvB,GAAqB75B,EAAM,UAAYvG,GAAU,OAC1D,MAAMmwD,EAAgBN,EAAe,UAAU,UAAY,GACvDtpD,EAAM,UAAY4pD,GAAiBnwD,EAAM,MAAQ,KACjDypD,GAAckC,EAAY,GAAG,EAAE,SAAS3rD,EAAM,GAAG,IACnDyxB,EAAQ,aAAa,EAAI,GACzB1uB,EAAA0uB,EAAQ,UAAR,MAAA1uB,EAAiB,QACjB/C,EAAM,eAAc,EAEhC,CAAS,CACF,CACF,EAAE,CACJ,CACH,EACAuyD,GAAe,YAAcD,GAC7B,IAAIY,GAAmB,iBACnBC,GAAiB9jC,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMe,EAAgBH,GAAiBC,GAAcj6B,EAAM,WAAW,EAChE,CAAE,WAAAo6B,EAAaD,EAAc,WAAY,GAAG0yB,CAAiB,EAAG7sD,EAChEkrB,EAAU44B,GAAe7pB,GAAcj6B,EAAM,WAAW,EACxDolD,EAAcpB,GAAmB/pB,GAAcj6B,EAAM,WAAW,EAChEisD,EAAaH,GAAkBa,GAAkB3sD,EAAM,WAAW,EAClE+oB,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,CAAG,EACtD,OAAuBC,MAAIq6B,GAAW,SAAU,CAAE,MAAOrjD,EAAM,YAAa,SAA0BgpB,MAAIuR,GAAU,CAAE,QAASH,GAAclP,EAAQ,KAAM,SAA0BlC,MAAIq6B,GAAW,KAAM,CAAE,MAAOrjD,EAAM,YAAa,SAA0BgpB,EAAG,IACjQw8B,GACA,CACE,GAAIyG,EAAW,UACf,kBAAmBA,EAAW,UAC9B,GAAGY,EACH,IAAKvzB,EACL,MAAO,QACP,KAAM8rB,EAAY,MAAQ,MAAQ,OAAS,QAC3C,4BAA6B,GAC7B,qBAAsB,GACtB,UAAW,GACX,gBAAkB3rD,GAAU,OACtB2rD,EAAY,mBAAmB,WAAS5oD,EAAAusB,EAAI,UAAJ,MAAAvsB,EAAa,SACzD/C,EAAM,eAAc,CACrB,EACD,iBAAmBA,GAAUA,EAAM,eAAgB,EACnD,eAAgBogC,GAAqB75B,EAAM,eAAiBvG,GAAU,CAChEA,EAAM,SAAWwyD,EAAW,SAAS/gC,EAAQ,aAAa,EAAK,CAC7E,CAAS,EACD,gBAAiB2O,GAAqB75B,EAAM,gBAAkBvG,GAAU,CACtE2rD,EAAY,QAAO,EACnB3rD,EAAM,eAAc,CAC9B,CAAS,EACD,UAAWogC,GAAqB75B,EAAM,UAAYvG,GAAU,OAC1D,MAAMyuD,EAAkBzuD,EAAM,cAAc,SAASA,EAAM,MAAM,EAC3DqzD,EAAa3J,GAAeiC,EAAY,GAAG,EAAE,SAAS3rD,EAAM,GAAG,EACjEyuD,GAAmB4E,IACrB5hC,EAAQ,aAAa,EAAK,GAC1B1uB,EAAAyvD,EAAW,UAAX,MAAAzvD,EAAoB,QACpB/C,EAAM,eAAc,EAEhC,CAAS,CACF,CACP,EAAO,CAAC,CAAE,CAAC,CAAE,CACV,CACH,EACAmzD,GAAe,YAAcD,GAC7B,SAAS1E,GAAa1rC,EAAM,CAC1B,OAAOA,EAAO,OAAS,QACzB,CACA,SAASiuC,GAAgBJ,EAAS,CAChC,OAAOA,IAAY,eACrB,CACA,SAASK,GAAgBL,EAAS,CAChC,OAAOI,GAAgBJ,CAAO,EAAI,gBAAkBA,EAAU,UAAY,WAC5E,CACA,SAAS9B,GAAWyE,EAAY,CAC9B,MAAMC,EAA6B,SAAS,cAC5C,UAAWC,KAAaF,EAGtB,GAFIE,IAAcD,IAClBC,EAAU,MAAK,EACX,SAAS,gBAAkBD,GAA4B,MAE/D,CACA,SAASE,GAAUz/C,EAAO0/C,EAAY,CACpC,OAAO1/C,EAAM,IAAI,CAACtP,EAAG8Z,IAAUxK,GAAO0/C,EAAal1C,GAASxK,EAAM,MAAM,CAAC,CAC3E,CACA,SAAS+5C,GAAaF,EAAQH,EAAQE,EAAc,CAElD,MAAM+F,EADajG,EAAO,OAAS,GAAK,MAAM,KAAKA,CAAM,EAAE,MAAOkG,GAASA,IAASlG,EAAO,CAAC,CAAC,EACvDA,EAAO,CAAC,EAAIA,EAC5CmG,EAAoBjG,EAAeC,EAAO,QAAQD,CAAY,EAAI,GACxE,IAAIkG,EAAgBL,GAAU5F,EAAQ,KAAK,IAAIgG,EAAmB,CAAC,CAAC,EACxCF,EAAiB,SAAW,IAC/BG,EAAgBA,EAAc,OAAQjjC,GAAMA,IAAM+8B,CAAY,GACvF,MAAME,EAAYgG,EAAc,KAC7B1wD,GAAUA,EAAM,YAAW,EAAG,WAAWuwD,EAAiB,aAAa,CAC5E,EACE,OAAO7F,IAAcF,EAAeE,EAAY,MAClD,CACA,SAASrrB,GAAiBe,EAAOM,EAAS,CACxC,KAAM,CAAE,EAAAnS,EAAG,EAAAC,CAAG,EAAG4R,EACjB,IAAIO,EAAS,GACb,QAAS,EAAI,EAAGnN,EAAIkN,EAAQ,OAAS,EAAG,EAAIA,EAAQ,OAAQlN,EAAI,IAAK,CACnE,MAAMoN,EAAKF,EAAQ,CAAC,EAAE,EAChBG,EAAKH,EAAQ,CAAC,EAAE,EAChBI,EAAKJ,EAAQlN,CAAC,EAAE,EAChBuN,EAAKL,EAAQlN,CAAC,EAAE,EACJqN,EAAKrS,GAAMuS,EAAKvS,GAAKD,GAAKuS,EAAKF,IAAOpS,EAAIqS,IAAOE,EAAKF,GAAMD,IAC/DD,EAAS,CAACA,EAC1B,CACD,OAAOA,CACT,CACA,SAASqqB,GAAqBpuD,EAAO+zD,EAAM,CACzC,GAAI,CAACA,EAAM,MAAO,GAClB,MAAMC,EAAY,CAAE,EAAGh0D,EAAM,QAAS,EAAGA,EAAM,SAC/C,OAAOyiC,GAAiBuxB,EAAWD,CAAI,CACzC,CACA,SAASjF,GAAUmF,EAAS,CAC1B,OAAQj0D,GAAUA,EAAM,cAAgB,QAAUi0D,EAAQj0D,CAAK,EAAI,MACrE,CACA,IAAIykC,GAAQ+lB,GACR0J,GAAU9I,GACV+I,GAAS7I,GACT3mB,GAAW+mB,GACX0I,GAAQlF,GACRmF,GAAQhF,GACRiF,GAAQ7E,GACR8E,GAAe7D,GACf8D,GAAapD,GACbqD,GAAYjD,GACZkD,GAAgB9C,GAChB+C,GAAY3C,GACZ4C,GAAS1C,GAET2C,GAAatC,GACbuC,GAAa3B,GCnzBb4B,GAAqB,eACrB,CAACC,GAA2BC,EAAuB,EAAIt4B,GACzDo4B,GACA,CAAC9K,EAAe,CAClB,EACIiL,GAAejL,GAAe,EAC9B,CAACkL,GAAsBC,EAAsB,EAAIJ,GAA0BD,EAAkB,EAC7FM,GAAgB9uD,GAAU,CAC5B,KAAM,CACJ,oBAAA+uD,EACA,SAAA93B,EACA,IAAAktB,EACA,KAAMrsB,EACN,YAAAC,EACA,aAAAC,EACA,MAAAosB,EAAQ,EACT,EAAGpkD,EACEgvD,EAAYL,GAAaI,CAAmB,EAC5CE,EAAa53B,SAAa,IAAI,EAC9B,CAAC9a,EAAO,GAAOkc,CAAO,EAAIC,GAAqB,CACnD,KAAMZ,EACN,YAAaC,EACb,SAAUC,CACd,CAAG,EACD,OAAuBhP,EAAG,IACxB4lC,GACA,CACE,MAAOG,EACP,UAAWz2B,GAAO,EAClB,WAAA22B,EACA,UAAW32B,GAAO,EAClB,KAAA/b,EACA,aAAckc,EACd,aAAcjB,cAAkB,IAAMiB,EAASy2B,GAAa,CAACA,CAAQ,EAAG,CAACz2B,CAAO,CAAC,EACjF,MAAA2rB,EACA,SAA0Bp7B,EAAG,IAACmmC,GAAoB,CAAE,GAAGH,EAAW,KAAAzyC,EAAM,aAAckc,EAAS,IAAA0rB,EAAK,MAAAC,EAAO,SAAAntB,CAAQ,CAAE,CACtH,CACL,CACA,EACA63B,GAAa,YAAcN,GAC3B,IAAIt1B,GAAe,sBACfk2B,GAAsBtmC,EAAgB,WACxC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,SAAA5F,EAAW,GAAO,GAAG9vB,CAAc,EAAGr5B,EAC7DkrB,EAAU2jC,GAAuB31B,GAAc61B,CAAmB,EAClEC,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,MAAIqmC,GAAsB,CAAE,QAAS,GAAM,GAAGL,EAAW,SAA0BhmC,EAAG,IAC3G4Q,GAAU,OACV,CACE,KAAM,SACN,GAAI1O,EAAQ,UACZ,gBAAiB,OACjB,gBAAiBA,EAAQ,KACzB,gBAAiBA,EAAQ,KAAOA,EAAQ,UAAY,OACpD,aAAcA,EAAQ,KAAO,OAAS,SACtC,gBAAiBi+B,EAAW,GAAK,OACjC,SAAAA,EACA,GAAG9vB,EACH,IAAKgzB,GAAYjzB,EAAclO,EAAQ,UAAU,EACjD,cAAe2O,GAAqB75B,EAAM,cAAgBvG,GAAU,CAC9D,CAAC0vD,GAAY1vD,EAAM,SAAW,GAAKA,EAAM,UAAY,KACvDyxB,EAAQ,aAAY,EACfA,EAAQ,MAAMzxB,EAAM,eAAc,EAEnD,CAAS,EACD,UAAWogC,GAAqB75B,EAAM,UAAYvG,GAAU,CACtD0vD,IACA,CAAC,QAAS,GAAG,EAAE,SAAS1vD,EAAM,GAAG,GAAGyxB,EAAQ,eAC5CzxB,EAAM,MAAQ,aAAayxB,EAAQ,aAAa,EAAI,EACpD,CAAC,QAAS,IAAK,WAAW,EAAE,SAASzxB,EAAM,GAAG,GAAGA,EAAM,iBACrE,CAAS,CACF,CACF,EAAE,CACJ,CACH,EACA21D,GAAoB,YAAcl2B,GAClC,IAAIY,GAAc,qBACdw1B,GAAsBtvD,GAAU,CAClC,KAAM,CAAE,oBAAA+uD,EAAqB,GAAGQ,CAAW,EAAKvvD,EAC1CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,MAAIwmC,GAAsB,CAAE,GAAGR,EAAW,GAAGO,CAAW,CAAE,CACnF,EACAD,GAAmB,YAAcx1B,GACjC,IAAIG,GAAe,sBACfw1B,GAAsB3mC,EAAgB,WACxC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,GAAGz0B,CAAY,EAAKt6B,EAC3CkrB,EAAU2jC,GAAuB50B,GAAc80B,CAAmB,EAClEC,EAAYL,GAAaI,CAAmB,EAC5CW,EAA0Br4B,SAAa,EAAK,EAClD,OAAuBrO,EAAG,IACxB2mC,GACA,CACE,GAAIzkC,EAAQ,UACZ,kBAAmBA,EAAQ,UAC3B,GAAG8jC,EACH,GAAG10B,EACH,IAAKlB,EACL,iBAAkBS,GAAqB75B,EAAM,iBAAmBvG,GAAU,OACnEi2D,EAAwB,UAASlzD,EAAA0uB,EAAQ,WAAW,UAAnB,MAAA1uB,EAA4B,QAClEkzD,EAAwB,QAAU,GAClCj2D,EAAM,eAAc,CAC9B,CAAS,EACD,kBAAmBogC,GAAqB75B,EAAM,kBAAoBvG,GAAU,CAC1E,MAAMm2D,EAAgBn2D,EAAM,OAAO,cAC7Bo2D,EAAgBD,EAAc,SAAW,GAAKA,EAAc,UAAY,GACxEE,EAAeF,EAAc,SAAW,GAAKC,GAC/C,CAAC3kC,EAAQ,OAAS4kC,KAAcJ,EAAwB,QAAU,GAChF,CAAS,EACD,MAAO,CACL,GAAG1vD,EAAM,MAGP,iDAAkD,uCAClD,gDAAiD,sCACjD,iDAAkD,uCAClD,sCAAuC,mCACvC,uCAAwC,mCAE3C,CACF,CACP,CACG,CACH,EACAyvD,GAAoB,YAAcx1B,GAClC,IAAIyuB,GAAa,oBACbqH,GAAoBjnC,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,GAAGnG,CAAU,EAAK5oD,EACzCgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACgnC,GAAqB,CAAE,GAAGhB,EAAW,GAAGpG,EAAY,IAAKxvB,CAAY,CAAE,CACnG,CACH,EACA22B,GAAkB,YAAcrH,GAChC,IAAIG,GAAa,oBACboH,GAAoBnnC,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,GAAGhG,CAAU,EAAK/oD,EACzCgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACknC,GAAqB,CAAE,GAAGlB,EAAW,GAAGjG,EAAY,IAAK3vB,CAAY,CAAE,CACnG,CACH,EACA62B,GAAkB,YAAcpH,GAChC,IAAIG,GAAY,mBACZmH,GAAmBrnC,EAAgB,WACrC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,GAAG1F,CAAS,EAAKrpD,EACxCgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAAConC,GAAoB,CAAE,GAAGpB,EAAW,GAAG3F,EAAW,IAAKjwB,CAAY,CAAE,CACjG,CACH,EACA+2B,GAAiB,YAAcnH,GAC/B,IAAIkB,GAAqB,2BACrBmG,GAA2BvnC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACvE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGzE,CAAiB,EAAKtqD,EAChDgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACsnC,GAA4B,CAAE,GAAGtB,EAAW,GAAG1E,EAAmB,IAAKlxB,CAAY,CAAE,CAClH,CAAC,EACDi3B,GAAyB,YAAcnG,GACvC,IAAIQ,GAAmB,yBACnB6F,GAAyBznC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACrE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGyB,CAAe,EAAKxwD,EAC9CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACynC,GAA0B,CAAE,GAAGzB,EAAW,GAAGwB,EAAiB,IAAKp3B,CAAY,CAAE,CAC9G,CAAC,EACDm3B,GAAuB,YAAc7F,GACrC,IAAIM,GAAkB,wBAClB0F,GAAwB5nC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACpE,KAAM,CAAE,oBAAA21B,EAAqB,GAAG7D,CAAc,EAAKlrD,EAC7CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAAC2nC,GAAyB,CAAE,GAAG3B,EAAW,GAAG9D,EAAgB,IAAK9xB,CAAY,CAAE,CAC5G,CAAC,EACDs3B,GAAsB,YAAc1F,GACpC,IAAI4F,GAAiB,4BACjBC,GAA4B/nC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACxE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGzD,CAAkB,EAAKtrD,EACjDgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAAC8nC,GAA6B,CAAE,GAAG9B,EAAW,GAAG1D,EAAoB,IAAKlyB,CAAY,CAAE,CACpH,CAAC,EACDy3B,GAA0B,YAAcD,GACxC,IAAIpF,GAAiB,wBACjBuF,GAAwBjoC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACpE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGrD,CAAc,EAAK1rD,EAC7CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACgoC,GAAyB,CAAE,GAAGhC,EAAW,GAAGtD,EAAgB,IAAKtyB,CAAY,CAAE,CAC5G,CAAC,EACD23B,GAAsB,YAAcvF,GACpC,IAAI3uB,GAAa,oBACbo0B,GAAoBnoC,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,oBAAA21B,EAAqB,GAAGhyB,CAAU,EAAK/8B,EACzCgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACkoC,GAAqB,CAAE,GAAGlC,EAAW,GAAGjyB,EAAY,IAAK3D,CAAY,CAAE,CACnG,CACH,EACA63B,GAAkB,YAAcp0B,GAWhC,IAAIkvB,GAAmB,yBACnBoF,GAAyBroC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACrE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGqC,CAAe,EAAKpxD,EAC9CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IAACqoC,GAA0B,CAAE,GAAGrC,EAAW,GAAGoC,EAAiB,IAAKh4B,CAAY,CAAE,CAC9G,CAAC,EACD+3B,GAAuB,YAAcpF,GACrC,IAAIY,GAAmB,yBACnB2E,GAAyBxoC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IAAiB,CACrE,KAAM,CAAE,oBAAA21B,EAAqB,GAAGlC,CAAe,EAAK7sD,EAC9CgvD,EAAYL,GAAaI,CAAmB,EAClD,OAAuB/lC,EAAG,IACxBuoC,GACA,CACE,GAAGvC,EACH,GAAGnC,EACH,IAAKzzB,EACL,MAAO,CACL,GAAGp5B,EAAM,MAGP,iDAAkD,uCAClD,gDAAiD,sCACjD,iDAAkD,uCAClD,sCAAuC,mCACvC,uCAAwC,mCAE3C,CACF,CACL,CACA,CAAC,EACDsxD,GAAuB,YAAc3E,GACrC,IAAI6E,GAAQ1C,GACR3wB,GAAUixB,GACVqC,GAAUnC,GACVlxB,GAAWqxB,GAEXiC,GAASzB,GACTlC,GAAQoC,GACRwB,GAAgBtB,GAEhBuB,GAAalB,GACbmB,GAAiBhB,GACjBiB,GAAaf,GAGbgB,GAAcZ,GACda,GAAcV,GCpQlB,MAAMxC,GAAemD,GAEf7C,GAAsB8C,GAUtBf,GAAyBroC,aAK7B,CAAC,CAAE,UAAArK,EAAW,MAAAwI,EAAO,SAAAgQ,EAAU,GAAGj3B,GAAS+oB,IAC3CiB,EAAA,KAACmoC,GAAA,CACC,IAAAppC,EACA,UAAWN,GACT,uIACAxB,GAAS,OACTxI,CACF,EACC,GAAGze,EAEH,UAAAi3B,EACDjO,MAACopC,GAAa,WAAU,iBAAkB,IAC5C,CACD,EACDjB,GAAuB,YACrBgB,GAAiC,YAEnC,MAAMb,GAAyBxoC,EAG7B,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACqpC,GAAA,CACC,IAAAtpC,EACA,UAAWN,GACT,wbACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDsxD,GAAuB,YACrBe,GAAiC,YAEnC,MAAM5C,GAAsB3mC,aAG1B,CAAC,CAAE,UAAArK,EAAW,WAAA+f,EAAa,EAAG,GAAGx+B,GAAS+oB,IACzCC,MAAAspC,GAAA,CACC,SAAAtpC,EAAA,IAACupC,GAAA,CACC,IAAAxpC,EACA,WAAAyV,EACA,UAAW/V,GACT,wbACAhK,CACF,EACC,GAAGze,CAAA,CACN,EACF,CACD,EACDyvD,GAAoB,YAAc8C,GAA8B,YAEhE,MAAMpC,GAAmBrnC,aAKvB,CAAC,CAAE,UAAArK,EAAW,MAAAwI,EAAO,GAAGjnB,CAAM,EAAG+oB,IACjCC,EAAA,IAACwpC,GAAA,CACC,IAAAzpC,EACA,UAAWN,GACT,kOACAxB,GAAS,OACTxI,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDmwD,GAAiB,YAAcqC,GAA2B,YAE1D,MAAMnC,GAA2BvnC,aAG/B,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,QAAAmzB,EAAS,GAAGpqD,GAAS+oB,IAC7CiB,EAAA,KAACyoC,GAAA,CACC,IAAA1pC,EACA,UAAWN,GACT,uOACAhK,CACF,EACA,QAAA2rC,EACC,GAAGpqD,EAEJ,UAAAgpB,EAAA,IAAC,OAAK,WAAU,+DACd,SAAAA,MAAC0pC,GAAA,CACC,SAAA1pC,MAAC4sB,GAAM,WAAU,SAAU,EAC7B,GACF,EACC3e,CAAA,EACH,CACD,EACDo5B,GAAyB,YACvBoC,GAAmC,YAErC,MAAM/B,GAAwB5nC,aAG5B,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,GAAGj3B,CAAM,EAAG+oB,IACpCiB,EAAA,KAAC2oC,GAAA,CACC,IAAA5pC,EACA,UAAWN,GACT,uOACAhK,CACF,EACC,GAAGze,EAEJ,UAAAgpB,EAAA,IAAC,OAAK,WAAU,+DACd,SAAAA,MAAC0pC,GAAA,CACC,SAAA1pC,MAAC4pC,GAAO,WAAU,sBAAuB,EAC3C,GACF,EACC37B,CAAA,EACH,CACD,EACDy5B,GAAsB,YAAciC,GAAgC,YAEpE,MAAM1C,GAAoBnnC,aAKxB,CAAC,CAAE,UAAArK,EAAW,MAAAwI,EAAO,GAAGjnB,CAAM,EAAG+oB,IACjCC,EAAA,IAAC6pC,GAAA,CACC,IAAA9pC,EACA,UAAWN,GACT,oCACAxB,GAAS,OACTxI,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDiwD,GAAkB,YAAc4C,GAA4B,YAE5D,MAAM9B,GAAwBjoC,EAG5B,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC8pC,GAAA,CACC,IAAA/pC,EACA,UAAWN,GAAG,2BAA4BhK,CAAS,EAClD,GAAGze,CAAA,CACN,CACD,EACD+wD,GAAsB,YAAc+B,GAAgC,YCtKpE,IAAIC,GAAY,OAAO,eACnBC,GAAsB,OAAO,sBAC7BC,GAAe,OAAO,UAAU,eAChCC,GAAe,OAAO,UAAU,qBAChCC,GAAkB,CAACC,EAAKh1D,EAAKvB,IAAUuB,KAAOg1D,EAAML,GAAUK,EAAKh1D,EAAK,CAAE,WAAY,GAAM,aAAc,GAAM,SAAU,GAAM,MAAAvB,CAAO,GAAIu2D,EAAIh1D,CAAG,EAAIvB,EACtJw2D,GAAiB,CAAC/0D,EAAGC,IAAM,CAC7B,QAASmF,KAAQnF,IAAMA,EAAI,IACrB00D,GAAa,KAAK10D,EAAGmF,CAAI,GAC3ByvD,GAAgB70D,EAAGoF,EAAMnF,EAAEmF,CAAI,CAAC,EACpC,GAAIsvD,GACF,QAAStvD,KAAQsvD,GAAoBz0D,CAAC,EAChC20D,GAAa,KAAK30D,EAAGmF,CAAI,GAC3ByvD,GAAgB70D,EAAGoF,EAAMnF,EAAEmF,CAAI,CAAC,EAEtC,OAAOpF,CACT,EACIg1D,GAAY,CAACh6D,EAAQi6D,IAAY,CACnC,IAAI9vD,EAAS,GACb,QAASC,KAAQpK,EACX25D,GAAa,KAAK35D,EAAQoK,CAAI,GAAK6vD,EAAQ,QAAQ7vD,CAAI,EAAI,IAC7DD,EAAOC,CAAI,EAAIpK,EAAOoK,CAAI,GAC9B,GAAIpK,GAAU,MAAQ05D,GACpB,QAAStvD,KAAQsvD,GAAoB15D,CAAM,EACrCi6D,EAAQ,QAAQ7vD,CAAI,EAAI,GAAKwvD,GAAa,KAAK55D,EAAQoK,CAAI,IAC7DD,EAAOC,CAAI,EAAIpK,EAAOoK,CAAI,GAEhC,OAAOD,CACT,EAMA;AAAA;AAAA;AAAA;AAAA,GAKA,IAAI+vD,IACFC,GAAe,CACf,MAAMC,EAAU,MAAMA,EAAQ,CAM5B,YAAYtvD,EAASuvD,EAAsBC,EAAeC,EAAK,CAQ7D,GAPA,KAAK,QAAUzvD,EACf,KAAK,qBAAuBuvD,EAG5B,KAAK,QAAU,GAEf,KAAK,WAAa,GACdvvD,EAAUsvD,GAAQ,aAAetvD,EAAUsvD,GAAQ,YACrD,MAAM,IAAI,WAAW,4BAA4B,EACnD,GAAIG,EAAM,IAAMA,EAAM,EACpB,MAAM,IAAI,WAAW,yBAAyB,EAChD,KAAK,KAAOzvD,EAAU,EAAI,GAC1B,IAAI0vD,EAAM,GACV,QAAS/5D,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAC7B+5D,EAAI,KAAK,EAAK,EAChB,QAAS/5D,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAC7B,KAAK,QAAQ,KAAK+5D,EAAI,MAAO,GAC7B,KAAK,WAAW,KAAKA,EAAI,MAAO,GAElC,KAAK,qBAAoB,EACzB,MAAMC,EAAe,KAAK,oBAAoBH,CAAa,EAE3D,GADA,KAAK,cAAcG,CAAY,EAC3BF,GAAO,GAAI,CACb,IAAIG,EAAa,IACjB,QAASj6D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,KAAK,UAAUA,CAAC,EAChB,KAAK,eAAeA,CAAC,EACrB,MAAMk6D,EAAU,KAAK,kBACjBA,EAAUD,IACZH,EAAM95D,EACNi6D,EAAaC,GAEf,KAAK,UAAUl6D,CAAC,CACjB,CACF,CACDm6D,EAAO,GAAKL,GAAOA,GAAO,CAAC,EAC3B,KAAK,KAAOA,EACZ,KAAK,UAAUA,CAAG,EAClB,KAAK,eAAeA,CAAG,EACvB,KAAK,WAAa,EACnB,CAOD,OAAO,WAAW9lB,EAAMomB,EAAK,CAC3B,MAAMC,EAAOX,EAAW,UAAU,aAAa1lB,CAAI,EACnD,OAAO2lB,GAAQ,eAAeU,EAAMD,CAAG,CACxC,CAKD,OAAO,aAAat2D,EAAMs2D,EAAK,CAC7B,MAAME,EAAMZ,EAAW,UAAU,UAAU51D,CAAI,EAC/C,OAAO61D,GAAQ,eAAe,CAACW,CAAG,EAAGF,CAAG,CACzC,CAWD,OAAO,eAAeC,EAAMD,EAAKG,EAAa,EAAGC,EAAa,GAAIC,EAAO,GAAIC,EAAW,GAAM,CAC5F,GAAI,EAAEf,GAAQ,aAAeY,GAAcA,GAAcC,GAAcA,GAAcb,GAAQ,cAAgBc,EAAO,IAAMA,EAAO,EAC/H,MAAM,IAAI,WAAW,eAAe,EACtC,IAAIpwD,EACAswD,EACJ,IAAKtwD,EAAUkwD,GAAclwD,IAAW,CACtC,MAAMuwD,EAAoBjB,GAAQ,oBAAoBtvD,EAAS+vD,CAAG,EAAI,EAChES,EAAWC,EAAU,aAAaT,EAAMhwD,CAAO,EACrD,GAAIwwD,GAAYD,EAAmB,CACjCD,EAAeE,EACf,KACD,CACD,GAAIxwD,GAAWmwD,EACb,MAAM,IAAI,WAAW,eAAe,CACvC,CACD,UAAWO,IAAU,CAACpB,GAAQ,IAAI,OAAQA,GAAQ,IAAI,SAAUA,GAAQ,IAAI,IAAI,EAC1Ee,GAAYC,GAAgBhB,GAAQ,oBAAoBtvD,EAAS0wD,CAAM,EAAI,IAC7EX,EAAMW,GAEV,IAAIC,EAAK,GACT,UAAWV,KAAOD,EAAM,CACtBY,EAAWX,EAAI,KAAK,SAAU,EAAGU,CAAE,EACnCC,EAAWX,EAAI,SAAUA,EAAI,KAAK,iBAAiBjwD,CAAO,EAAG2wD,CAAE,EAC/D,UAAWx2D,KAAK81D,EAAI,QAAS,EAC3BU,EAAG,KAAKx2D,CAAC,CACZ,CACD21D,EAAOa,EAAG,QAAUL,CAAY,EAChC,MAAMO,EAAmBvB,GAAQ,oBAAoBtvD,EAAS+vD,CAAG,EAAI,EACrED,EAAOa,EAAG,QAAUE,CAAgB,EACpCD,EAAW,EAAG,KAAK,IAAI,EAAGC,EAAmBF,EAAG,MAAM,EAAGA,CAAE,EAC3DC,EAAW,GAAI,EAAID,EAAG,OAAS,GAAK,EAAGA,CAAE,EACzCb,EAAOa,EAAG,OAAS,GAAK,CAAC,EACzB,QAASG,EAAU,IAAKH,EAAG,OAASE,EAAkBC,GAAW,IAC/DF,EAAWE,EAAS,EAAGH,CAAE,EAC3B,IAAInB,EAAgB,GACpB,KAAOA,EAAc,OAAS,EAAImB,EAAG,QACnCnB,EAAc,KAAK,CAAC,EACtB,OAAAmB,EAAG,QAAQ,CAACx2D,EAAGxE,IAAM65D,EAAc75D,IAAM,CAAC,GAAKwE,GAAK,GAAKxE,EAAI,EAAE,EACxD,IAAI25D,GAAQtvD,EAAS+vD,EAAKP,EAAeY,CAAI,CACrD,CAKD,UAAUppC,EAAGC,EAAG,CACd,MAAO,IAAKD,GAAKA,EAAI,KAAK,MAAQ,GAAKC,GAAKA,EAAI,KAAK,MAAQ,KAAK,QAAQA,CAAC,EAAED,CAAC,CAC/E,CAED,YAAa,CACX,OAAO,KAAK,OACb,CAGD,sBAAuB,CACrB,QAASrxB,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAC7B,KAAK,kBAAkB,EAAGA,EAAGA,EAAI,GAAK,CAAC,EACvC,KAAK,kBAAkBA,EAAG,EAAGA,EAAI,GAAK,CAAC,EAEzC,KAAK,kBAAkB,EAAG,CAAC,EAC3B,KAAK,kBAAkB,KAAK,KAAO,EAAG,CAAC,EACvC,KAAK,kBAAkB,EAAG,KAAK,KAAO,CAAC,EACvC,MAAMo7D,EAAc,KAAK,+BACnBC,EAAWD,EAAY,OAC7B,QAASp7D,EAAI,EAAGA,EAAIq7D,EAAUr7D,IAC5B,QAASs2B,EAAI,EAAGA,EAAI+kC,EAAU/kC,IACtBt2B,GAAK,GAAKs2B,GAAK,GAAKt2B,GAAK,GAAKs2B,GAAK+kC,EAAW,GAAKr7D,GAAKq7D,EAAW,GAAK/kC,GAAK,GACjF,KAAK,qBAAqB8kC,EAAYp7D,CAAC,EAAGo7D,EAAY9kC,CAAC,CAAC,EAG9D,KAAK,eAAe,CAAC,EACrB,KAAK,YAAW,CACjB,CAGD,eAAemkC,EAAM,CACnB,MAAM32D,EAAO,KAAK,qBAAqB,YAAc,EAAI22D,EACzD,IAAIa,EAAMx3D,EACV,QAAS9D,EAAI,EAAGA,EAAI,GAAIA,IACtBs7D,EAAMA,GAAO,GAAKA,IAAQ,GAAK,KACjC,MAAMC,GAAQz3D,GAAQ,GAAKw3D,GAAO,MAClCnB,EAAOoB,IAAS,IAAM,CAAC,EACvB,QAASv7D,EAAI,EAAGA,GAAK,EAAGA,IACtB,KAAK,kBAAkB,EAAGA,EAAGw7D,EAAOD,EAAMv7D,CAAC,CAAC,EAC9C,KAAK,kBAAkB,EAAG,EAAGw7D,EAAOD,EAAM,CAAC,CAAC,EAC5C,KAAK,kBAAkB,EAAG,EAAGC,EAAOD,EAAM,CAAC,CAAC,EAC5C,KAAK,kBAAkB,EAAG,EAAGC,EAAOD,EAAM,CAAC,CAAC,EAC5C,QAASv7D,EAAI,EAAGA,EAAI,GAAIA,IACtB,KAAK,kBAAkB,GAAKA,EAAG,EAAGw7D,EAAOD,EAAMv7D,CAAC,CAAC,EACnD,QAASA,EAAI,EAAGA,EAAI,EAAGA,IACrB,KAAK,kBAAkB,KAAK,KAAO,EAAIA,EAAG,EAAGw7D,EAAOD,EAAMv7D,CAAC,CAAC,EAC9D,QAASA,EAAI,EAAGA,EAAI,GAAIA,IACtB,KAAK,kBAAkB,EAAG,KAAK,KAAO,GAAKA,EAAGw7D,EAAOD,EAAMv7D,CAAC,CAAC,EAC/D,KAAK,kBAAkB,EAAG,KAAK,KAAO,EAAG,EAAI,CAC9C,CAGD,aAAc,CACZ,GAAI,KAAK,QAAU,EACjB,OACF,IAAIs7D,EAAM,KAAK,QACf,QAASt7D,EAAI,EAAGA,EAAI,GAAIA,IACtBs7D,EAAMA,GAAO,GAAKA,IAAQ,IAAM,KAClC,MAAMC,EAAO,KAAK,SAAW,GAAKD,EAClCnB,EAAOoB,IAAS,IAAM,CAAC,EACvB,QAASv7D,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MAAM8zC,EAAQ0nB,EAAOD,EAAMv7D,CAAC,EACtBuE,EAAI,KAAK,KAAO,GAAKvE,EAAI,EACzBwE,EAAI,KAAK,MAAMxE,EAAI,CAAC,EAC1B,KAAK,kBAAkBuE,EAAGC,EAAGsvC,CAAK,EAClC,KAAK,kBAAkBtvC,EAAGD,EAAGuvC,CAAK,CACnC,CACF,CAGD,kBAAkBziB,EAAGC,EAAG,CACtB,QAASg3B,EAAK,GAAIA,GAAM,EAAGA,IACzB,QAASD,EAAK,GAAIA,GAAM,EAAGA,IAAM,CAC/B,MAAMoT,EAAO,KAAK,IAAI,KAAK,IAAIpT,CAAE,EAAG,KAAK,IAAIC,CAAE,CAAC,EAC1CoT,EAAKrqC,EAAIg3B,EACTsT,EAAKrqC,EAAIg3B,EACX,GAAKoT,GAAMA,EAAK,KAAK,MAAQ,GAAKC,GAAMA,EAAK,KAAK,MACpD,KAAK,kBAAkBD,EAAIC,EAAIF,GAAQ,GAAKA,GAAQ,CAAC,CACxD,CAEJ,CAGD,qBAAqBpqC,EAAGC,EAAG,CACzB,QAASg3B,EAAK,GAAIA,GAAM,EAAGA,IACzB,QAASD,EAAK,GAAIA,GAAM,EAAGA,IACzB,KAAK,kBAAkBh3B,EAAIg3B,EAAI/2B,EAAIg3B,EAAI,KAAK,IAAI,KAAK,IAAID,CAAE,EAAG,KAAK,IAAIC,CAAE,CAAC,GAAK,CAAC,CAErF,CAGD,kBAAkBj3B,EAAGC,EAAGsqC,EAAQ,CAC9B,KAAK,QAAQtqC,CAAC,EAAED,CAAC,EAAIuqC,EACrB,KAAK,WAAWtqC,CAAC,EAAED,CAAC,EAAI,EACzB,CAID,oBAAoBvtB,EAAM,CACxB,MAAM+3D,EAAM,KAAK,QACXzB,EAAM,KAAK,qBACjB,GAAIt2D,EAAK,QAAU61D,GAAQ,oBAAoBkC,EAAKzB,CAAG,EACrD,MAAM,IAAI,WAAW,kBAAkB,EACzC,MAAM0B,EAAYnC,GAAQ,4BAA4BS,EAAI,OAAO,EAAEyB,CAAG,EAChEE,EAAcpC,GAAQ,wBAAwBS,EAAI,OAAO,EAAEyB,CAAG,EAC9DG,EAAe,KAAK,MAAMrC,GAAQ,qBAAqBkC,CAAG,EAAI,CAAC,EAC/DI,EAAiBH,EAAYE,EAAeF,EAC5CI,EAAgB,KAAK,MAAMF,EAAeF,CAAS,EACzD,IAAIK,EAAS,GACb,MAAMC,EAAQzC,GAAQ,0BAA0BoC,CAAW,EAC3D,QAAS/7D,EAAI,EAAG2E,EAAI,EAAG3E,EAAI87D,EAAW97D,IAAK,CACzC,IAAIq8D,EAAMv4D,EAAK,MAAMa,EAAGA,EAAIu3D,EAAgBH,GAAe/7D,EAAIi8D,EAAiB,EAAI,EAAE,EACtFt3D,GAAK03D,EAAI,OACT,MAAMC,EAAM3C,GAAQ,4BAA4B0C,EAAKD,CAAK,EACtDp8D,EAAIi8D,GACNI,EAAI,KAAK,CAAC,EACZF,EAAO,KAAKE,EAAI,OAAOC,CAAG,CAAC,CAC5B,CACD,IAAIhtD,EAAS,GACb,QAAStP,EAAI,EAAGA,EAAIm8D,EAAO,CAAC,EAAE,OAAQn8D,IACpCm8D,EAAO,QAAQ,CAACI,EAAOjmC,IAAM,EACvBt2B,GAAKk8D,EAAgBH,GAAezlC,GAAK2lC,IAC3C3sD,EAAO,KAAKitD,EAAMv8D,CAAC,CAAC,CAChC,CAAS,EAEH,OAAAm6D,EAAO7qD,EAAO,QAAU0sD,CAAY,EAC7B1sD,CACR,CAGD,cAAcxL,EAAM,CAClB,GAAIA,EAAK,QAAU,KAAK,MAAM61D,GAAQ,qBAAqB,KAAK,OAAO,EAAI,CAAC,EAC1E,MAAM,IAAI,WAAW,kBAAkB,EACzC,IAAI35D,EAAI,EACR,QAASsjC,EAAQ,KAAK,KAAO,EAAGA,GAAS,EAAGA,GAAS,EAAG,CAClDA,GAAS,IACXA,EAAQ,GACV,QAASk5B,EAAO,EAAGA,EAAO,KAAK,KAAMA,IACnC,QAASlmC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMjF,EAAIiS,EAAQhN,EAEZhF,GADUgS,EAAQ,EAAI,IAAM,EACf,KAAK,KAAO,EAAIk5B,EAAOA,EACtC,CAAC,KAAK,WAAWlrC,CAAC,EAAED,CAAC,GAAKrxB,EAAI8D,EAAK,OAAS,IAC9C,KAAK,QAAQwtB,CAAC,EAAED,CAAC,EAAImqC,EAAO13D,EAAK9D,IAAM,CAAC,EAAG,GAAKA,EAAI,EAAE,EACtDA,IAEH,CAEJ,CACDm6D,EAAOn6D,GAAK8D,EAAK,OAAS,CAAC,CAC5B,CAMD,UAAU22D,EAAM,CACd,GAAIA,EAAO,GAAKA,EAAO,EACrB,MAAM,IAAI,WAAW,yBAAyB,EAChD,QAASnpC,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAC7B,QAASD,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAAK,CAClC,IAAIvE,EACJ,OAAQ2tC,EAAI,CACV,IAAK,GACH3tC,GAAUuE,EAAIC,GAAK,GAAK,EACxB,MACF,IAAK,GACHxE,EAASwE,EAAI,GAAK,EAClB,MACF,IAAK,GACHxE,EAASuE,EAAI,GAAK,EAClB,MACF,IAAK,GACHvE,GAAUuE,EAAIC,GAAK,GAAK,EACxB,MACF,IAAK,GACHxE,GAAU,KAAK,MAAMuE,EAAI,CAAC,EAAI,KAAK,MAAMC,EAAI,CAAC,GAAK,GAAK,EACxD,MACF,IAAK,GACHxE,EAASuE,EAAIC,EAAI,EAAID,EAAIC,EAAI,GAAK,EAClC,MACF,IAAK,GACHxE,GAAUuE,EAAIC,EAAI,EAAID,EAAIC,EAAI,GAAK,GAAK,EACxC,MACF,IAAK,GACHxE,IAAWuE,EAAIC,GAAK,EAAID,EAAIC,EAAI,GAAK,GAAK,EAC1C,MACF,QACE,MAAM,IAAI,MAAM,aAAa,CAChC,CACG,CAAC,KAAK,WAAWA,CAAC,EAAED,CAAC,GAAKvE,IAC5B,KAAK,QAAQwE,CAAC,EAAED,CAAC,EAAI,CAAC,KAAK,QAAQC,CAAC,EAAED,CAAC,EAC1C,CAEJ,CAGD,iBAAkB,CAChB,IAAI/hB,EAAS,EACb,QAASgiB,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAAK,CAClC,IAAImrC,EAAW,GACXC,EAAO,EACPC,EAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACrC,QAAStrC,EAAI,EAAGA,EAAI,KAAK,KAAMA,IACzB,KAAK,QAAQC,CAAC,EAAED,CAAC,GAAKorC,GACxBC,IACIA,GAAQ,EACVptD,GAAUqqD,GAAQ,WACX+C,EAAO,GACdptD,MAEF,KAAK,wBAAwBotD,EAAMC,CAAU,EACxCF,IACHntD,GAAU,KAAK,2BAA2BqtD,CAAU,EAAIhD,GAAQ,YAClE8C,EAAW,KAAK,QAAQnrC,CAAC,EAAED,CAAC,EAC5BqrC,EAAO,GAGXptD,GAAU,KAAK,+BAA+BmtD,EAAUC,EAAMC,CAAU,EAAIhD,GAAQ,UACrF,CACD,QAAStoC,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAAK,CAClC,IAAIorC,EAAW,GACXG,EAAO,EACPD,EAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACrC,QAAS,EAAI,EAAG,EAAI,KAAK,KAAM,IACzB,KAAK,QAAQ,CAAC,EAAEtrC,CAAC,GAAKorC,GACxBG,IACIA,GAAQ,EACVttD,GAAUqqD,GAAQ,WACXiD,EAAO,GACdttD,MAEF,KAAK,wBAAwBstD,EAAMD,CAAU,EACxCF,IACHntD,GAAU,KAAK,2BAA2BqtD,CAAU,EAAIhD,GAAQ,YAClE8C,EAAW,KAAK,QAAQ,CAAC,EAAEprC,CAAC,EAC5BurC,EAAO,GAGXttD,GAAU,KAAK,+BAA+BmtD,EAAUG,EAAMD,CAAU,EAAIhD,GAAQ,UACrF,CACD,QAASroC,EAAI,EAAGA,EAAI,KAAK,KAAO,EAAGA,IACjC,QAASD,EAAI,EAAGA,EAAI,KAAK,KAAO,EAAGA,IAAK,CACtC,MAAMyiB,EAAQ,KAAK,QAAQxiB,CAAC,EAAED,CAAC,EAC3ByiB,GAAS,KAAK,QAAQxiB,CAAC,EAAED,EAAI,CAAC,GAAKyiB,GAAS,KAAK,QAAQxiB,EAAI,CAAC,EAAED,CAAC,GAAKyiB,GAAS,KAAK,QAAQxiB,EAAI,CAAC,EAAED,EAAI,CAAC,IAC1G/hB,GAAUqqD,GAAQ,WACrB,CAEH,IAAIkD,EAAO,EACX,UAAW9C,KAAO,KAAK,QACrB8C,EAAO9C,EAAI,OAAO,CAAC+C,EAAKhpB,IAAUgpB,GAAOhpB,EAAQ,EAAI,GAAI+oB,CAAI,EAC/D,MAAME,EAAQ,KAAK,KAAO,KAAK,KACzBp4D,EAAI,KAAK,KAAK,KAAK,IAAIk4D,EAAO,GAAKE,EAAQ,EAAE,EAAIA,CAAK,EAAI,EAChE,OAAA5C,EAAO,GAAKx1D,GAAKA,GAAK,CAAC,EACvB2K,GAAU3K,EAAIg1D,GAAQ,WACtBQ,EAAO,GAAK7qD,GAAUA,GAAU,OAAO,EAChCA,CACR,CAKD,8BAA+B,CAC7B,GAAI,KAAK,SAAW,EAClB,MAAO,GACJ,CACH,MAAM+rD,EAAW,KAAK,MAAM,KAAK,QAAU,CAAC,EAAI,EAC1C2B,EAAO,KAAK,SAAW,GAAK,GAAK,KAAK,MAAM,KAAK,QAAU,EAAI,IAAM3B,EAAW,EAAI,EAAE,EAAI,EAChG,IAAI/rD,EAAS,CAAC,CAAC,EACf,QAASlP,EAAM,KAAK,KAAO,EAAGkP,EAAO,OAAS+rD,EAAUj7D,GAAO48D,EAC7D1tD,EAAO,OAAO,EAAG,EAAGlP,CAAG,EACzB,OAAOkP,CACR,CACF,CAID,OAAO,qBAAqBusD,EAAK,CAC/B,GAAIA,EAAMlC,GAAQ,aAAekC,EAAMlC,GAAQ,YAC7C,MAAM,IAAI,WAAW,6BAA6B,EACpD,IAAIrqD,GAAU,GAAKusD,EAAM,KAAOA,EAAM,GACtC,GAAIA,GAAO,EAAG,CACZ,MAAMR,EAAW,KAAK,MAAMQ,EAAM,CAAC,EAAI,EACvCvsD,IAAW,GAAK+rD,EAAW,IAAMA,EAAW,GACxCQ,GAAO,IACTvsD,GAAU,GACb,CACD,OAAA6qD,EAAO,KAAO7qD,GAAUA,GAAU,KAAK,EAChCA,CACR,CAID,OAAO,oBAAoBusD,EAAKzB,EAAK,CACnC,OAAO,KAAK,MAAMT,GAAQ,qBAAqBkC,CAAG,EAAI,CAAC,EAAIlC,GAAQ,wBAAwBS,EAAI,OAAO,EAAEyB,CAAG,EAAIlC,GAAQ,4BAA4BS,EAAI,OAAO,EAAEyB,CAAG,CACpK,CAGD,OAAO,0BAA0BoB,EAAQ,CACvC,GAAIA,EAAS,GAAKA,EAAS,IACzB,MAAM,IAAI,WAAW,qBAAqB,EAC5C,IAAI3tD,EAAS,GACb,QAAStP,EAAI,EAAGA,EAAIi9D,EAAS,EAAGj9D,IAC9BsP,EAAO,KAAK,CAAC,EACfA,EAAO,KAAK,CAAC,EACb,IAAI4tD,EAAO,EACX,QAASl9D,EAAI,EAAGA,EAAIi9D,EAAQj9D,IAAK,CAC/B,QAASs2B,EAAI,EAAGA,EAAIhnB,EAAO,OAAQgnB,IACjChnB,EAAOgnB,CAAC,EAAIqjC,GAAQ,oBAAoBrqD,EAAOgnB,CAAC,EAAG4mC,CAAI,EACnD5mC,EAAI,EAAIhnB,EAAO,SACjBA,EAAOgnB,CAAC,GAAKhnB,EAAOgnB,EAAI,CAAC,GAE7B4mC,EAAOvD,GAAQ,oBAAoBuD,EAAM,CAAC,CAC3C,CACD,OAAO5tD,CACR,CAED,OAAO,4BAA4BxL,EAAMq5D,EAAS,CAChD,IAAI7tD,EAAS6tD,EAAQ,IAAK/4D,GAAM,CAAC,EACjC,UAAWI,KAAKV,EAAM,CACpB,MAAMs5D,EAAS54D,EAAI8K,EAAO,MAAK,EAC/BA,EAAO,KAAK,CAAC,EACb6tD,EAAQ,QAAQ,CAACE,EAAMr9D,IAAMsP,EAAOtP,CAAC,GAAK25D,GAAQ,oBAAoB0D,EAAMD,CAAM,CAAC,CACpF,CACD,OAAO9tD,CACR,CAGD,OAAO,oBAAoB+hB,EAAGC,EAAG,CAC/B,GAAID,IAAM,GAAUC,IAAM,EACxB,MAAM,IAAI,WAAW,mBAAmB,EAC1C,IAAI4I,EAAI,EACR,QAASl6B,EAAI,EAAGA,GAAK,EAAGA,IACtBk6B,EAAIA,GAAK,GAAKA,IAAM,GAAK,IACzBA,IAAM5I,IAAMtxB,EAAI,GAAKqxB,EAEvB,OAAA8oC,EAAOjgC,IAAM,GAAK,CAAC,EACZA,CACR,CAGD,2BAA2ByiC,EAAY,CACrC,MAAM55C,EAAI45C,EAAW,CAAC,EACtBxC,EAAOp3C,GAAK,KAAK,KAAO,CAAC,EACzB,MAAMu6C,EAAOv6C,EAAI,GAAK45C,EAAW,CAAC,GAAK55C,GAAK45C,EAAW,CAAC,GAAK55C,EAAI,GAAK45C,EAAW,CAAC,GAAK55C,GAAK45C,EAAW,CAAC,GAAK55C,EAC7G,OAAQu6C,GAAQX,EAAW,CAAC,GAAK55C,EAAI,GAAK45C,EAAW,CAAC,GAAK55C,EAAI,EAAI,IAAMu6C,GAAQX,EAAW,CAAC,GAAK55C,EAAI,GAAK45C,EAAW,CAAC,GAAK55C,EAAI,EAAI,EACrI,CAED,+BAA+Bw6C,EAAiBC,EAAkBb,EAAY,CAC5E,OAAIY,IACF,KAAK,wBAAwBC,EAAkBb,CAAU,EACzDa,EAAmB,GAErBA,GAAoB,KAAK,KACzB,KAAK,wBAAwBA,EAAkBb,CAAU,EAClD,KAAK,2BAA2BA,CAAU,CAClD,CAED,wBAAwBa,EAAkBb,EAAY,CAChDA,EAAW,CAAC,GAAK,IACnBa,GAAoB,KAAK,MAC3Bb,EAAW,IAAG,EACdA,EAAW,QAAQa,CAAgB,CACpC,CACL,EAGE7D,EAAQ,YAAc,EAEtBA,EAAQ,YAAc,GAEtBA,EAAQ,WAAa,EACrBA,EAAQ,WAAa,EACrBA,EAAQ,WAAa,GACrBA,EAAQ,WAAa,GACrBA,EAAQ,wBAA0B,CAGhC,CAAC,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAElK,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAEnK,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAEnK,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,CAEvK,EACEA,EAAQ,4BAA8B,CAGpC,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAE5I,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAErJ,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EAExJ,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,CAE7J,EAEED,EAAW,OAASC,EACpB,SAASsB,EAAW9yD,EAAKs1D,EAAKzC,EAAI,CAChC,GAAIyC,EAAM,GAAKA,EAAM,IAAMt1D,IAAQs1D,EACjC,MAAM,IAAI,WAAW,oBAAoB,EAC3C,QAASz9D,EAAIy9D,EAAM,EAAGz9D,GAAK,EAAGA,IAC5Bg7D,EAAG,KAAK7yD,IAAQnI,EAAI,CAAC,CACxB,CACD,SAASw7D,EAAOnqC,EAAGrxB,EAAG,CACpB,OAAQqxB,IAAMrxB,EAAI,IAAM,CACzB,CACD,SAASm6D,EAAOuD,EAAM,CACpB,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,iBAAiB,CACpC,CACD,MAAMC,EAAa,MAAMA,EAAW,CAKlC,YAAY53D,EAAM63D,EAAUC,EAAS,CAInC,GAHA,KAAK,KAAO93D,EACZ,KAAK,SAAW63D,EAChB,KAAK,QAAUC,EACXD,EAAW,EACb,MAAM,IAAI,WAAW,kBAAkB,EACzC,KAAK,QAAUC,EAAQ,OACxB,CAKD,OAAO,UAAU/5D,EAAM,CACrB,IAAIk3D,EAAK,GACT,UAAWx2D,KAAKV,EACdm3D,EAAWz2D,EAAG,EAAGw2D,CAAE,EACrB,OAAO,IAAI2C,GAAWA,GAAW,KAAK,KAAM75D,EAAK,OAAQk3D,CAAE,CAC5D,CAED,OAAO,YAAY8C,EAAQ,CACzB,GAAI,CAACH,GAAW,UAAUG,CAAM,EAC9B,MAAM,IAAI,WAAW,wCAAwC,EAC/D,IAAI9C,EAAK,GACT,QAASh7D,EAAI,EAAGA,EAAI89D,EAAO,QAAU,CACnC,MAAM/6C,EAAI,KAAK,IAAI+6C,EAAO,OAAS99D,EAAG,CAAC,EACvCi7D,EAAW,SAAS6C,EAAO,UAAU99D,EAAGA,EAAI+iB,CAAC,EAAG,EAAE,EAAGA,EAAI,EAAI,EAAGi4C,CAAE,EAClEh7D,GAAK+iB,CACN,CACD,OAAO,IAAI46C,GAAWA,GAAW,KAAK,QAASG,EAAO,OAAQ9C,CAAE,CACjE,CAID,OAAO,iBAAiBhnB,EAAM,CAC5B,GAAI,CAAC2pB,GAAW,eAAe3pB,CAAI,EACjC,MAAM,IAAI,WAAW,6DAA6D,EACpF,IAAIgnB,EAAK,GACLh7D,EACJ,IAAKA,EAAI,EAAGA,EAAI,GAAKg0C,EAAK,OAAQh0C,GAAK,EAAG,CACxC,IAAI+9D,EAAOJ,GAAW,qBAAqB,QAAQ3pB,EAAK,OAAOh0C,CAAC,CAAC,EAAI,GACrE+9D,GAAQJ,GAAW,qBAAqB,QAAQ3pB,EAAK,OAAOh0C,EAAI,CAAC,CAAC,EAClEi7D,EAAW8C,EAAM,GAAI/C,CAAE,CACxB,CACD,OAAIh7D,EAAIg0C,EAAK,QACXinB,EAAW0C,GAAW,qBAAqB,QAAQ3pB,EAAK,OAAOh0C,CAAC,CAAC,EAAG,EAAGg7D,CAAE,EACpE,IAAI2C,GAAWA,GAAW,KAAK,aAAc3pB,EAAK,OAAQgnB,CAAE,CACpE,CAGD,OAAO,aAAahnB,EAAM,CACxB,OAAIA,GAAQ,GACH,GACA2pB,GAAW,UAAU3pB,CAAI,EACzB,CAAC2pB,GAAW,YAAY3pB,CAAI,CAAC,EAC7B2pB,GAAW,eAAe3pB,CAAI,EAC9B,CAAC2pB,GAAW,iBAAiB3pB,CAAI,CAAC,EAElC,CAAC2pB,GAAW,UAAUA,GAAW,gBAAgB3pB,CAAI,CAAC,CAAC,CACjE,CAGD,OAAO,QAAQgqB,EAAW,CACxB,IAAIhD,EAAK,GACT,GAAIgD,EAAY,EACd,MAAM,IAAI,WAAW,mCAAmC,EACrD,GAAIA,EAAY,IACnB/C,EAAW+C,EAAW,EAAGhD,CAAE,UACpBgD,EAAY,MACnB/C,EAAW,EAAG,EAAGD,CAAE,EACnBC,EAAW+C,EAAW,GAAIhD,CAAE,UACnBgD,EAAY,IACrB/C,EAAW,EAAG,EAAGD,CAAE,EACnBC,EAAW+C,EAAW,GAAIhD,CAAE,MAE5B,OAAM,IAAI,WAAW,mCAAmC,EAC1D,OAAO,IAAI2C,GAAWA,GAAW,KAAK,IAAK,EAAG3C,CAAE,CACjD,CAGD,OAAO,UAAUhnB,EAAM,CACrB,OAAO2pB,GAAW,cAAc,KAAK3pB,CAAI,CAC1C,CAID,OAAO,eAAeA,EAAM,CAC1B,OAAO2pB,GAAW,mBAAmB,KAAK3pB,CAAI,CAC/C,CAGD,SAAU,CACR,OAAO,KAAK,QAAQ,OACrB,CAGD,OAAO,aAAaqmB,EAAMhwD,EAAS,CACjC,IAAIiF,EAAS,EACb,UAAWgrD,KAAOD,EAAM,CACtB,MAAM4D,EAAS3D,EAAI,KAAK,iBAAiBjwD,CAAO,EAChD,GAAIiwD,EAAI,UAAY,GAAK2D,EACvB,MAAO,KACT3uD,GAAU,EAAI2uD,EAAS3D,EAAI,QAAQ,MACpC,CACD,OAAOhrD,CACR,CAED,OAAO,gBAAgBzP,EAAK,CAC1BA,EAAM,UAAUA,CAAG,EACnB,IAAIyP,EAAS,GACb,QAAStP,EAAI,EAAGA,EAAIH,EAAI,OAAQG,IAC1BH,EAAI,OAAOG,CAAC,GAAK,IACnBsP,EAAO,KAAKzP,EAAI,WAAWG,CAAC,CAAC,GAE7BsP,EAAO,KAAK,SAASzP,EAAI,UAAUG,EAAI,EAAGA,EAAI,CAAC,EAAG,EAAE,CAAC,EACrDA,GAAK,GAGT,OAAOsP,CACR,CACL,EAGEquD,EAAW,cAAgB,WAE3BA,EAAW,mBAAqB,wBAGhCA,EAAW,qBAAuB,gDAClC,IAAI7C,EAAY6C,EAChBjE,EAAW,UAAYiE,CACzB,GAAGlE,KAAcA,GAAY,CAAE,EAAC,GAC9BC,GAAe,EAEbwE,GAAY,CACZ,MAAMC,EAAO,KAAW,CAGtB,YAAYC,EAASC,EAAY,CAC/B,KAAK,QAAUD,EACf,KAAK,WAAaC,CACnB,CACP,EAEIF,EAAK,IAAM,IAAIA,EAAK,EAAG,CAAC,EAExBA,EAAK,OAAS,IAAIA,EAAK,EAAG,CAAC,EAE3BA,EAAK,SAAW,IAAIA,EAAK,EAAG,CAAC,EAE7BA,EAAK,KAAO,IAAIA,EAAK,EAAG,CAAC,EAEzBD,EAAQ,IAAMC,CAClB,GAAczE,EAAW,SAAWA,EAAW,OAAS,GAAG,CAC3D,GAAGD,KAAcA,GAAY,CAAE,EAAC,GAC9BC,GAAe,EAEb4E,GAAe,CACf,MAAMC,EAAQ,KAAY,CAExB,YAAYC,EAAUC,EAAkB,CACtC,KAAK,SAAWD,EAChB,KAAK,iBAAmBC,CACzB,CAID,iBAAiB5C,EAAK,CACpB,OAAO,KAAK,iBAAiB,KAAK,OAAOA,EAAM,GAAK,EAAE,CAAC,CACxD,CACP,EAEI0C,EAAM,QAAU,IAAIA,EAAM,EAAG,CAAC,GAAI,GAAI,EAAE,CAAC,EACzCA,EAAM,aAAe,IAAIA,EAAM,EAAG,CAAC,EAAG,GAAI,EAAE,CAAC,EAC7CA,EAAM,KAAO,IAAIA,EAAM,EAAG,CAAC,EAAG,GAAI,EAAE,CAAC,EACrCA,EAAM,MAAQ,IAAIA,EAAM,EAAG,CAAC,EAAG,GAAI,EAAE,CAAC,EACtCA,EAAM,IAAM,IAAIA,EAAM,EAAG,CAAC,EAAG,EAAG,CAAC,CAAC,EAElCD,EAAW,KAAOC,CACtB,GAAiB7E,EAAW,YAAcA,EAAW,UAAY,GAAG,CACpE,GAAGD,KAAcA,GAAY,CAAE,EAAC,EAChC,IAAIiF,GAAoBjF,GAGxB;AAAA;AAAA;AAAA;AAAA,GAKA,IAAIkF,GAAkB,CACpB,EAAGD,GAAkB,OAAO,IAAI,IAChC,EAAGA,GAAkB,OAAO,IAAI,OAChC,EAAGA,GAAkB,OAAO,IAAI,SAChC,EAAGA,GAAkB,OAAO,IAAI,IAClC,EACIE,GAAe,IACfC,GAAgB,IAChBC,GAAkB,UAClBC,GAAkB,UAClBC,GAAwB,GACxBC,GAAqB,EACrBC,GAAmB,EACnBC,GAAsB,EACtBC,GAAoB,GACxB,SAASC,GAAaC,EAASnyC,EAAS,EAAG,CACzC,MAAMoyC,EAAM,GACZ,OAAAD,EAAQ,QAAQ,SAASvF,EAAKzoC,EAAG,CAC/B,IAAIkuC,EAAQ,KACZzF,EAAI,QAAQ,SAAS0F,EAAMpuC,EAAG,CAC5B,GAAI,CAACouC,GAAQD,IAAU,KAAM,CAC3BD,EAAI,KACF,IAAIC,EAAQryC,CAAM,IAAImE,EAAInE,CAAM,IAAIkE,EAAImuC,CAAK,MAAMA,EAAQryC,CAAM,GAC3E,EACQqyC,EAAQ,KACR,MACD,CACD,GAAInuC,IAAM0oC,EAAI,OAAS,EAAG,CACxB,GAAI,CAAC0F,EACH,OAEED,IAAU,KACZD,EAAI,KAAK,IAAIluC,EAAIlE,CAAM,IAAImE,EAAInE,CAAM,SAASkE,EAAIlE,CAAM,GAAG,EAE3DoyC,EAAI,KACF,IAAIC,EAAQryC,CAAM,IAAImE,EAAInE,CAAM,KAAKkE,EAAI,EAAImuC,CAAK,MAAMA,EAAQryC,CAAM,GAClF,EAEQ,MACD,CACGsyC,GAAQD,IAAU,OACpBA,EAAQnuC,EAEhB,CAAK,CACL,CAAG,EACMkuC,EAAI,KAAK,EAAE,CACpB,CACA,SAASG,GAAgBJ,EAASK,EAAY,CAC5C,OAAOL,EAAQ,MAAO,EAAC,IAAI,CAACvF,EAAKzoC,IAC3BA,EAAIquC,EAAW,GAAKruC,GAAKquC,EAAW,EAAIA,EAAW,EAC9C5F,EAEFA,EAAI,IAAI,CAAC0F,EAAMpuC,IAChBA,EAAIsuC,EAAW,GAAKtuC,GAAKsuC,EAAW,EAAIA,EAAW,EAC9CF,EAEF,EACR,CACF,CACH,CACA,SAASG,GAAiBC,EAAOhsB,EAAM1mB,EAAQ2yC,EAAe,CAC5D,GAAIA,GAAiB,KACnB,OAAO,KAET,MAAMC,EAAWF,EAAM,OAAS1yC,EAAS,EACnC6yC,EAAc,KAAK,MAAMnsB,EAAOurB,EAAiB,EACjD7xC,EAAQwyC,EAAWlsB,EACnBld,GAAKmpC,EAAc,OAASE,GAAezyC,EAC3CmJ,GAAKopC,EAAc,QAAUE,GAAezyC,EAC5C8D,EAAIyuC,EAAc,GAAK,KAAOD,EAAM,OAAS,EAAIlpC,EAAI,EAAImpC,EAAc,EAAIvyC,EAC3E+D,EAAIwuC,EAAc,GAAK,KAAOD,EAAM,OAAS,EAAInpC,EAAI,EAAIopC,EAAc,EAAIvyC,EAC3EH,EAAU0yC,EAAc,SAAW,KAAO,EAAIA,EAAc,QAClE,IAAIH,EAAa,KACjB,GAAIG,EAAc,SAAU,CAC1B,IAAIG,EAAS,KAAK,MAAM5uC,CAAC,EACrB6uC,EAAS,KAAK,MAAM5uC,CAAC,EACrB6uC,EAAQ,KAAK,KAAKxpC,EAAItF,EAAI4uC,CAAM,EAChCG,EAAQ,KAAK,KAAK1pC,EAAIpF,EAAI4uC,CAAM,EACpCP,EAAa,CAAE,EAAGM,EAAQ,EAAGC,EAAQ,EAAGC,EAAO,EAAGC,EACnD,CACD,MAAMC,EAAcP,EAAc,YAClC,MAAO,CAAE,EAAAzuC,EAAG,EAAAC,EAAG,EAAAoF,EAAG,EAAAC,EAAG,WAAAgpC,EAAY,QAAAvyC,EAAS,YAAAizC,EAC5C,CACA,SAASC,GAAcC,EAAeC,EAAY,CAChD,OAAIA,GAAc,KACT,KAAK,IAAI,KAAK,MAAMA,CAAU,EAAG,CAAC,EAEpCD,EAAgBrB,GAAmBC,EAC5C,CACA,SAASsB,GAAU,CACjB,MAAA39D,EACA,MAAAmvC,EACA,WAAAsoB,EACA,cAAAgG,EACA,WAAAC,EACA,cAAAV,EACA,KAAAjsB,EACA,WAAA6sB,CACF,EAAG,CACD,IAAIC,EAASjtC,EAAM,QAAQ,IAAM,CAE/B,MAAMktC,GADS,MAAM,QAAQ99D,CAAK,EAAIA,EAAQ,CAACA,CAAK,GAC5B,OAAO,CAAC+9D,EAAOtwC,KACrCswC,EAAM,KAAK,GAAGnC,GAAkB,UAAU,aAAanuC,CAAC,CAAC,EAClDswC,GACN,CAAE,GACL,OAAOnC,GAAkB,OAAO,eAC9BkC,EACAjC,GAAgB1sB,CAAK,EACrBsoB,EACA,OACA,OACAmG,CACN,CACG,EAAE,CAAC59D,EAAOmvC,EAAOsoB,EAAYmG,CAAU,CAAC,EACzC,KAAM,CAAE,MAAAb,EAAO,OAAA1yC,EAAQ,SAAA4yC,EAAU,wBAAAe,GAA4BptC,EAAM,QAAQ,IAAM,CAC/E,IAAIqtC,EAASJ,EAAO,aACpB,MAAMK,EAAUV,GAAcC,EAAeC,CAAU,EACjDS,EAAYF,EAAO,OAASC,EAAU,EACtCE,EAA2BtB,GAC/BmB,EACAltB,EACAmtB,EACAlB,CACN,EACI,MAAO,CACL,MAAOiB,EACP,OAAQC,EACR,SAAUC,EACV,wBAAyBC,CAC/B,CACA,EAAK,CAACP,EAAQ9sB,EAAMisB,EAAeS,EAAeC,CAAU,CAAC,EAC3D,MAAO,CACL,OAAAG,EACA,OAAAxzC,EACA,MAAA0yC,EACA,SAAAE,EACA,wBAAAe,CACJ,CACA,CACA,IAAIK,GAAkB,UAAW,CAC/B,GAAI,CACF,IAAI,OAAM,EAAG,QAAQ,IAAI,MAAQ,CAClC,MAAW,CACV,MAAO,EACR,CACD,MAAO,EACT,IACIC,GAAe1tC,EAAM,WACvB,SAAuBztB,EAAOo5B,EAAc,CAC1C,MAAM58B,EAAKwD,EAAO,CAChB,MAAAnD,EACA,KAAA+wC,EAAO+qB,GACP,MAAA3sB,EAAQ4sB,GACR,QAAAwC,EAAUvC,GACV,QAAAwC,EAAUvC,GACV,cAAAwB,EAAgBvB,GAChB,WAAAzE,EAAa0E,GACb,WAAAyB,EACA,WAAAF,EACA,cAAAV,CACD,EAAGr9D,EAYEsN,EAZewpD,GAAU92D,EAAI,CACjC,QACA,OACA,QACA,UACA,UACA,gBACA,aACA,aACA,aACA,eACN,CAAK,EACsB,CAAE,MAAA0vC,GAAUpiC,EAAIwxD,EAAahI,GAAUxpD,EAAI,CAAC,OAAO,CAAC,EACrEyxD,EAAS1B,GAAiB,KAAO,OAASA,EAAc,IACxD2B,EAAU/tC,EAAM,OAAO,IAAI,EAC3BguC,EAAShuC,EAAM,OAAO,IAAI,EAC1BiuC,EAAejuC,EAAM,YACxBkuC,GAAS,CACRH,EAAQ,QAAUG,EACd,OAAOviC,GAAiB,WAC1BA,EAAauiC,CAAI,EACRviC,IACTA,EAAa,QAAUuiC,EAE1B,EACD,CAACviC,CAAY,CACnB,EACU,CAACwiC,EAAaC,CAAgB,EAAIpuC,EAAM,SAAS,EAAK,EACtD,CAAE,OAAAvG,EAAQ,MAAA0yC,EAAO,SAAAE,EAAU,wBAAAe,CAAuB,EAAKL,GAAU,CACrE,MAAA39D,EACA,MAAAmvC,EACA,WAAAsoB,EACA,WAAAmG,EACA,cAAAH,EACA,WAAAC,EACA,cAAAV,EACA,KAAAjsB,CACN,CAAK,EACDngB,EAAM,UAAU,IAAM,CACpB,GAAI+tC,EAAQ,SAAW,KAAM,CAC3B,MAAMxvC,EAASwvC,EAAQ,QACjBzuC,EAAMf,EAAO,WAAW,IAAI,EAClC,GAAI,CAACe,EACH,OAEF,IAAI+uC,EAAclC,EAClB,MAAMmC,GAAQN,EAAO,QACfO,EAAoBnB,GAA2B,MAAQkB,KAAU,MAAQA,GAAM,UAAYA,GAAM,gBAAkB,GAAKA,GAAM,eAAiB,EACjJC,GACEnB,EAAwB,YAAc,OACxCiB,EAAcrC,GACZG,EACAiB,EAAwB,UACtC,GAGQ,MAAMoB,EAAa,OAAO,kBAAoB,EAC9CjwC,EAAO,OAASA,EAAO,MAAQ4hB,EAAOquB,EACtC,MAAM30C,EAAQsmB,EAAOksB,EAAWmC,EAChClvC,EAAI,MAAMzF,EAAOA,CAAK,EACtByF,EAAI,UAAYquC,EAChBruC,EAAI,SAAS,EAAG,EAAG+sC,EAAUA,CAAQ,EACrC/sC,EAAI,UAAYsuC,EACZH,GACFnuC,EAAI,KAAK,IAAI,OAAOqsC,GAAa0C,EAAa50C,CAAM,CAAC,CAAC,EAEtD0yC,EAAM,QAAQ,SAAS9F,EAAKoI,GAAK,CAC/BpI,EAAI,QAAQ,SAAS0F,EAAM2C,GAAK,CAC1B3C,GACFzsC,EAAI,SAASovC,GAAMj1C,EAAQg1C,GAAMh1C,EAAQ,EAAG,CAAC,CAE7D,CAAa,CACb,CAAW,EAEC2zC,IACF9tC,EAAI,YAAc8tC,EAAwB,SAExCmB,GACFjvC,EAAI,UACFgvC,GACAlB,EAAwB,EAAI3zC,EAC5B2zC,EAAwB,EAAI3zC,EAC5B2zC,EAAwB,EACxBA,EAAwB,CACpC,CAEO,CACP,CAAK,EACDptC,EAAM,UAAU,IAAM,CACpBouC,EAAiB,EAAK,CAC5B,EAAO,CAACN,CAAM,CAAC,EACX,MAAMa,EAAc/I,GAAe,CAAE,OAAQzlB,EAAM,MAAOA,GAAQ1B,CAAK,EACvE,IAAImwB,EAAM,KACV,OAAId,GAAU,OACZc,EAAsB5uC,EAAM,cAC1B,MACA,CACE,IAAK8tC,EACL,IAAKA,EACL,MAAO,CAAE,QAAS,MAAQ,EAC1B,OAAQ,IAAM,CACZM,EAAiB,EAAI,CACtB,EACD,IAAKJ,EACL,YAAaZ,GAA2B,KAAO,OAASA,EAAwB,WACjF,CACT,GAE2BptC,EAAM,cAAcA,EAAM,SAAU,KAAsBA,EAAM,cACrF,SACA4lC,GAAe,CACb,MAAO+I,EACP,OAAQxuB,EACR,MAAOA,EACP,IAAK8tB,EACL,KAAM,KACP,EAAEJ,CAAU,CACd,EAAEe,CAAG,CACP,CACH,EACAlB,GAAa,YAAc,eAC3B,IAAImB,GAAY7uC,EAAM,WACpB,SAAoBztB,EAAOo5B,EAAc,CACvC,MAAM58B,EAAKwD,EAAO,CAChB,MAAAnD,EACA,KAAA+wC,EAAO+qB,GACP,MAAA3sB,EAAQ4sB,GACR,QAAAwC,EAAUvC,GACV,QAAAwC,EAAUvC,GACV,cAAAwB,EAAgBvB,GAChB,WAAAzE,EAAa0E,GACb,WAAAyB,EACA,MAAA3/C,EACA,WAAAy/C,EACA,cAAAV,CACD,EAAGr9D,EAAI8+D,EAAahI,GAAU92D,EAAI,CACjC,QACA,OACA,QACA,UACA,UACA,gBACA,aACA,aACA,QACA,aACA,eACN,CAAK,EACK,CAAE,OAAA0qB,EAAQ,MAAA0yC,EAAO,SAAAE,EAAU,wBAAAe,CAAuB,EAAKL,GAAU,CACrE,MAAA39D,EACA,MAAAmvC,EACA,WAAAsoB,EACA,WAAAmG,EACA,cAAAH,EACA,WAAAC,EACA,cAAAV,EACA,KAAAjsB,CACN,CAAK,EACD,IAAIkuB,EAAclC,EACdmC,EAAQ,KACRlC,GAAiB,MAAQgB,GAA2B,OAClDA,EAAwB,YAAc,OACxCiB,EAAcrC,GACZG,EACAiB,EAAwB,UAClC,GAEMkB,EAAwBtuC,EAAM,cAC5B,QACA,CACE,KAAMosC,EAAc,IACpB,OAAQgB,EAAwB,EAChC,MAAOA,EAAwB,EAC/B,EAAGA,EAAwB,EAAI3zC,EAC/B,EAAG2zC,EAAwB,EAAI3zC,EAC/B,oBAAqB,OACrB,QAAS2zC,EAAwB,QACjC,YAAaA,EAAwB,WACtC,CACT,GAEI,MAAM0B,EAASnD,GAAa0C,EAAa50C,CAAM,EAC/C,OAAuBuG,EAAM,cAC3B,MACA4lC,GAAe,CACb,OAAQzlB,EACR,MAAOA,EACP,QAAS,OAAOksB,CAAQ,IAAIA,CAAQ,GACpC,IAAK1gC,EACL,KAAM,KACP,EAAEkiC,CAAU,EACb,CAAC,CAACxgD,GAAyB2S,EAAM,cAAc,QAAS,KAAM3S,CAAK,EACnD2S,EAAM,cACpB,OACA,CACE,KAAM2tC,EACN,EAAG,SAAStB,CAAQ,IAAIA,CAAQ,MAChC,eAAgB,YACjB,CACF,EACersC,EAAM,cAAc,OAAQ,CAAE,KAAM4tC,EAAS,EAAGkB,EAAQ,eAAgB,aAAc,EACtGR,CACN,CACG,CACH,EACAO,GAAU,YAAc,YCjmCxB,MAAME,GAASC,GAITC,GAAeC,GAIfC,GAAgBnvC,EAAM,WAG1B,CAAC,CAAE,UAAAhP,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC6zC,GAAA,CACC,IAAA9zC,EACA,UAAWN,GACT,0JACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACD48D,GAAc,YAAcC,GAAwB,YAEpD,MAAMC,GAAgBrvC,EAAM,WAG1B,CAAC,CAAE,UAAAhP,EAAW,SAAAwY,EAAU,GAAGj3B,CAAM,EAAG+oB,IAAQ,CAEtC,MAAAg0C,EAAgBtvC,EAAM,QAC5B,cACCivC,GACC,WAAA1zC,EAAA,IAAC4zC,GAAc,IACf5yC,EAAA,KAACgzC,GAAA,CACC,IAAAj0C,EACA,UAAWN,GACT,ujBACAhK,CACF,EACA,mBAAkBs+C,EACjB,GAAG/8D,EAEJ,UAAAgpB,MAAC,MAAI,IAAI+zC,EAAe,UAAU,UAAU,SAE5C,oCACC9lC,EACDjN,EAAA,KAACizC,GAAA,CACC,UAAU,4QACV,aAAW,eAEX,UAACj0C,MAAAS,GAAA,CAAE,UAAU,SAAU,GACtBT,EAAA,YAAK,UAAU,UAAU,SAAK,WACjC,GACF,CACF,GACD,CAAC,EACF8zC,GAAc,YAAcE,GAAwB,YAEpD,MAAME,GAAe,CAAC,CACpB,UAAAz+C,EACA,GAAGze,CACL,IACEgpB,EAAA,IAAC,OACC,UAAWP,GACT,qDACAhK,CACF,EACC,GAAGze,CAAA,CACN,EAEFk9D,GAAa,YAAc,eAE3B,MAAMC,GAAe,CAAC,CACpB,UAAA1+C,EACA,GAAGze,CACL,IACEgpB,EAAA,IAAC,OACC,UAAWP,GACT,gEACAhK,CACF,EACC,GAAGze,CAAA,CACN,EAEFm9D,GAAa,YAAc,eAE3B,MAAMC,GAAc3vC,EAAM,WAGxB,CAAC,CAAE,UAAAhP,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACq0C,GAAA,CACC,IAAAt0C,EACA,UAAWN,GACT,oDACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDo9D,GAAY,YAAcC,GAAsB,YAEhD,MAAMC,GAAoB7vC,EAAM,WAG9B,CAAC,CAAE,UAAAhP,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACu0C,GAAA,CACC,IAAAx0C,EACA,UAAWN,GAAG,gCAAiChK,CAAS,EACvD,GAAGze,CAAA,CACN,CACD,EACDs9D,GAAkB,YAAcC,GAA4B,YC/FrD,SAASC,GAAY,CAAE,MAAA1iD,EAAO,KAAAizB,EAAM,IAAAt7B,GAAyB,CAElE,MAAMgrD,EAAWhrD,IAAQ,OAAO,OAAW,IAAc,OAAO,SAAS,KAAO,IAC1E,CAACirD,EAAYC,CAAa,EAAIlwC,EAAM,SAAS,EAAK,EAElDmwC,EAAc,MAAOC,GAAqB,CAC1C,IAEF/kD,EAAU,gBAAgB,QAAS,CAAE,SAAA+kD,EAAU,MAAA/iD,CAAO,GAGxD,MAAMgjD,EAAcL,EAAS,WAAW,MAAM,EAAIA,EAAY,OAAO,OAAW,IAAc,OAAO,SAAS,OAASA,EAAWA,EAElI,OAAQI,EAAU,CAChB,IAAK,SAEH,GAAI,UAAU,MACR,IACF,MAAM,UAAU,MAAM,CACpB,MAAA/iD,EACA,KAAAizB,EACA,IAAK+vB,CAAA,CACN,QACM9lE,EAAO,CACN,cAAM,iBAAkBA,CAAK,EAErC+lE,EAAgBD,CAAW,CAC7B,MAGAC,EAAgBD,CAAW,EAE7B,MACF,IAAK,WACC,IACF,OAAO,KAAK,gDAAgD,mBAAmBA,CAAW,CAAC,GAAI,QAAQ,QAChG9lE,EAAO,CACN,cAAM,gCAAiCA,CAAK,EACpD+lE,EAAgBD,CAAW,CAC7B,CACA,MACF,IAAK,IACC,IACK,YAAK,yCAAyC,mBAAmB/vB,CAAI,CAAC,QAAQ,mBAAmB+vB,CAAW,CAAC,GAAI,QAAQ,QACzH9lE,EAAO,CACN,cAAM,+BAAgCA,CAAK,EACnD+lE,EAAgBD,CAAW,CAC7B,CACA,MACF,IAAK,YACC,IAGF,MAAME,EAAQ,mBAAmB,KAAK,UAAU,SAAS,EACnDC,EAAY,UAAU,KAAK,UAAU,SAAS,EAEhDD,GAASC,GAEX,OAAO,SAAS,KAAO,eAGvB,WAAW,IAAM,CACf,OAAO,SAAS,KAAO,8BACtB,GAAI,GAGA,YAAK,6BAA8B,QAAQ,QAE7CjmE,EAAO,CACN,cAAM,2BAA4BA,CAAK,EAC/C+lE,EAAgBD,CAAW,CAC7B,CACA,MACF,IAAK,OACHC,EAAgBD,CAAW,EAC3B,KACJ,QACS9lE,EAAO,CACN,cAAM,wBAAyBA,CAAK,EAExC,IACF+lE,EAAgBN,CAAQ,QACjBjlE,EAAG,CACF,cAAM,0BAA2BA,CAAC,EAC1C,MAAM,0DAA4DilE,CAAQ,CAC5E,CACF,GAGIM,EAAmBhwB,GAAiB,CAEpC,UAAU,WAAa,UAAU,UAAU,UAC7C,UAAU,UAAU,UAAUA,CAAI,EAC/B,KAAK,IAAM,CACV,MAAM,kCAAkC,EACzC,EACA,MAAar7B,GAAA,CACJ,cAAM,4BAA6BA,CAAG,EAC9CwrD,EAAwBnwB,CAAI,EAC7B,EAEHmwB,EAAwBnwB,CAAI,CAC9B,EAIImwB,EAA2BnwB,GAAiB,CAC5C,IACI,MAAAowB,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,MAAQpwB,EACjBowB,EAAS,MAAM,SAAW,QAC1BA,EAAS,MAAM,KAAO,YACtBA,EAAS,MAAM,IAAM,YACZ,cAAK,YAAYA,CAAQ,EAClCA,EAAS,MAAM,EACfA,EAAS,OAAO,EACV,MAAAC,EAAa,SAAS,YAAY,MAAM,EACrC,cAAK,YAAYD,CAAQ,EAEhC,MADEC,EACI,mCAEA,mEAAqErwB,CAFnC,QAInCr7B,EAAK,CACJ,cAAM,qCAAsCA,CAAG,EACvD,MAAM,mEAAqEq7B,CAAI,CACjF,GAGF,OAEI/jB,EAAA,KAAA0rB,WAAA,WAAA1rB,OAAC8kC,GACC,WAAC9lC,MAAAomC,GAAA,CAAoB,QAAO,GAC1B,SAAApmC,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,4IAEV,SAAA9sB,MAACq1C,GAAO,WAAU,SAAU,KAEhC,EACCr0C,EAAA,KAAAylC,GAAA,CAAoB,MAAM,MAAM,UAAU,gBACxC,iBAAO,UAAc,KAAe,UAAU,OAC5CzmC,MAAAmnC,GAAA,CAAiB,QAAS,IAAMyN,EAAY,QAAQ,EAAG,UAAU,iBAAiB,SAEnF,aAEF50C,MAACmnC,IAAiB,QAAS,IAAMyN,EAAY,UAAU,EAAG,UAAU,iBAAiB,SAErF,aACA50C,MAACmnC,IAAiB,QAAS,IAAMyN,EAAY,GAAG,EAAG,UAAU,iBAAiB,SAE9E,MACA50C,MAACmnC,IAAiB,QAAS,IAAMyN,EAAY,WAAW,EAAG,UAAU,iBAAiB,SAEtF,cACA50C,MAACmnC,IAAiB,QAAS,IAAMyN,EAAY,MAAM,EAAG,UAAU,iBAAiB,SAEjF,mBACA5zC,OAACmmC,IAAiB,QAAS,IAAMwN,EAAc,EAAI,EAAG,UAAU,iBAC9D,UAAC30C,MAAAs1C,GAAA,CAAO,UAAU,cAAe,GAAE,oBAErC,GACF,GACF,EAEAt1C,MAACwzC,IAAO,KAAMkB,EAAY,aAAcC,EACtC,SAAA3zC,EAAA,KAAC8yC,GAAc,WAAU,mBACvB,UAAA9zC,MAACk0C,GACC,UAAAl0C,EAAA,IAACo0C,GAAY,8BAAkB,GACjC,EACApzC,OAAC,MAAI,WAAU,iDACb,UAAAhB,EAAA,IAACszC,GAAA,CACC,MAAOmB,EACP,KAAM,IACN,QAAS,UACT,QAAS,UACT,MAAO,IACP,cAAe,GACjB,EACCz0C,EAAA,SAAE,UAAU,yCAAyC,SAEtD,2DACF,EACAA,MAACm0C,GACC,UAAAn0C,EAAA,IAAC8sB,EAAO,SAAS,IAAM6nB,EAAc,EAAK,EAAG,kBAAM,CACrD,IACF,CACF,EACF,GAEJ,CCnMO,SAASY,IAAmB,CAEjC,MAAMC,EADW3xB,KACY,SAEvB/d,EAAY5O,GACTs+C,IAAgBt+C,EAOzB,aACG,MAAI,WAAU,8GACb,SAAC8J,EAAA,YAAI,UAAU,6DACb,UAAAA,EAAA,KAACy0C,GAAA,CACC,GAAG,OACH,UAAW,0EACT3vC,EAAS,GAAG,GAAKA,EAAS,MAAM,EAAI,6BAA+B,eACrE,GAEA,UAAC9F,MAAAytB,GAAA,CAAO,UAAW,GAAG3nB,EAAS,GAAG,GAAKA,EAAS,MAAM,EAAI,UAAY,SAAS,EAAI,GAClF9F,EAAA,YAAK,UAAW,sBAAsB8F,EAAS,GAAG,GAAKA,EAAS,MAAM,EAAI,cAAgB,aAAa,GAAI,SAAK,WAEnH,EAEA9E,EAAA,KAACy0C,GAAA,CACC,GAAG,WACH,UAAW,0EACT3vC,EAAS,UAAU,EAAI,6BAA+B,eACxD,GAEA,UAAC9F,MAAA01C,GAAA,CAAS,UAAW,GAAG5vC,EAAS,UAAU,EAAI,UAAY,SAAS,GAAI,EACxE9F,MAAC,OAAK,WAAW,sBAAsB8F,EAAS,UAAU,EAAI,cAAgB,aAAa,GAAI,SAAS,eAE1G,EAEA9E,EAAA,KAACy0C,GAAA,CACC,GAAG,SACH,UAAW,0EACT3vC,EAAS,QAAQ,EAAI,6BAA+B,eACtD,GAEA,UAAC9F,MAAA21C,GAAA,CAAS,UAAW,GAAG7vC,EAAS,QAAQ,EAAI,UAAY,SAAS,GAAI,EACtE9F,MAAC,OAAK,WAAW,sBAAsB8F,EAAS,QAAQ,EAAI,cAAgB,aAAa,GAAI,SAAW,iBAE1G,EAEA9E,EAAA,KAACy0C,GAAA,CACC,GAAG,aACH,UAAW,0EACT3vC,EAAS,YAAY,GAAKA,EAAS,YAAY,GAAKA,EAAS,aAAa,EAAI,6BAA+B,eAC/G,GAEA,UAAA9F,EAAA,IAAC41C,GAAO,WAAW,GAAG9vC,EAAS,YAAY,GAAKA,EAAS,YAAY,GAAKA,EAAS,aAAa,EAAI,UAAY,SAAS,GAAI,QAC5H,OAAK,WAAW,sBAAsBA,EAAS,YAAY,GAAKA,EAAS,YAAY,GAAKA,EAAS,aAAa,EAAI,cAAgB,aAAa,GAAI,SAAQ,cAChK,EAEA9E,EAAA,KAACy0C,GAAA,CACC,GAAG,SACH,UAAW,0EACT3vC,EAAS,QAAQ,EAAI,6BAA+B,eACtD,GAEA,UAAC9F,MAAA61C,GAAA,CAAK,UAAW,GAAG/vC,EAAS,QAAQ,EAAI,UAAY,SAAS,GAAI,EAClE9F,MAAC,OAAK,WAAW,sBAAsB8F,EAAS,QAAQ,EAAI,cAAgB,aAAa,GAAI,SAAQ,cAEvG,EAEA9E,EAAA,KAACy0C,GAAA,CACC,GAAG,UACH,UAAW,0EACT3vC,EAAS,SAAS,EAAI,6BAA+B,eACvD,GAEA,UAAC9F,MAAA81C,GAAA,CAAK,UAAW,GAAGhwC,EAAS,SAAS,EAAI,UAAY,SAAS,GAAI,EACnE9F,MAAC,OAAK,WAAW,sBAAsB8F,EAAS,SAAS,EAAI,cAAgB,aAAa,GAAI,SAAI,UAEpG,EA4BF,EACF,EAEJ,CCpHA,MAAMiwC,GAA2B,uBAK1B,SAASC,GAA4BvlE,EAAoB,CAC9D,MAAMyxB,EAA+B,CACnC,KAAM,QACN,GAAIzxB,EAAM,GACV,KAAMA,EAAM,MACZ,SAAUA,EAAM,MAAQ49C,GAAa59C,EAAM,KAAK,EAAI,OACpD,WAAYA,EAAM,YAGhB,IACF,aAAa,QAAQslE,GAA0B,KAAK,UAAU7zC,CAAO,CAAC,QAC/DlzB,EAAO,CACN,cAAM,+DAAgEA,CAAK,CACrF,CACF,CAKO,SAASinE,GAA+BryB,EAA0B,CACvE,MAAM1hB,EAA+B,CACnC,KAAM,WACN,GAAI0hB,EAAS,GACb,KAAMA,EAAS,KACf,SAAUA,EAAS,MAAQyK,GAAazK,EAAS,KAAK,EAAI,QAGxD,IACF,aAAa,QAAQmyB,GAA0B,KAAK,UAAU7zC,CAAO,CAAC,QAC/DlzB,EAAO,CACN,cAAM,+DAAgEA,CAAK,CACrF,CACF,CAKO,SAASknE,IAAqD,CAC/D,IACI,MAAAC,EAAc,aAAa,QAAQJ,EAAwB,EACjE,OAAOI,EAAc,KAAK,MAAMA,CAAW,EAAI,WACxCnnE,EAAO,CACN,qBAAM,8DAA+DA,CAAK,EAC3E,IACT,CACF,CAKO,SAASonE,IAAiC,CAC3C,IACF,aAAa,WAAWL,EAAwB,QACzC/mE,EAAO,CACN,cAAM,6DAA8DA,CAAK,CACnF,CACF,CAKO,SAASqnE,GAA4BtoD,EAA4C,CACtF,MAAMmU,EAAUg0C,KAEhB,OAAKh0C,EAIE,CACL,GAAGnU,EACH,YAAamU,EAAQ,KACrB,UAAWA,EAAQ,IANZnU,CAQX,CCjCO,SAASuoD,GAAUhY,EAAQ9mD,EAAS,CACzC,MAAM++D,EAAsB,CAAE,EAK9B,OAFcjY,EAAOA,EAAO,OAAS,CAAC,IAAM,GAAK,CAAC,GAAGA,EAAQ,EAAE,EAAIA,GAGhE,MACEiY,EAAS,SAAW,IAAM,IACzB,KACCA,EAAS,UAAY,GAAQ,GAAK,IACtC,EACA,KAAM,CACX,CC/DA,MAAMC,GAAS,0DACTC,GAAY,2DAGZC,GAAe,CAAE,EA0ChB,SAAS//D,GAAKA,EAAMa,EAAS,CAGlC,OAF4Bk/D,GACR,IAAMD,GAAYD,IAC5B,KAAK7/D,CAAI,CACrB,CCtDA,MAAMggE,GAAK,eAaJ,SAASC,GAAW9gE,EAAO,CAChC,OAAO,OAAOA,GAAU,SACpBA,EAAM,OAAS,OACb+gE,GAAM/gE,EAAM,KAAK,EACjB,GACF+gE,GAAM/gE,CAAK,CACjB,CAMA,SAAS+gE,GAAMhjE,EAAO,CACpB,OAAOA,EAAM,QAAQ8iE,GAAI,EAAE,IAAM,EACnC,CC5BO,MAAMG,EAAO,CAWlB,YAAYtgD,EAAUugD,EAAQt4C,EAAO,CACnC,KAAK,OAASs4C,EACd,KAAK,SAAWvgD,EAEZiI,IACF,KAAK,MAAQA,EAEhB,CACH,CAEAq4C,GAAO,UAAU,OAAS,CAAE,EAC5BA,GAAO,UAAU,SAAW,CAAE,EAC9BA,GAAO,UAAU,MAAQ,OCdlB,SAASE,GAAMC,EAAax4C,EAAO,CAExC,MAAMjI,EAAW,CAAE,EAEbugD,EAAS,CAAE,EAEjB,UAAWG,KAAcD,EACvB,OAAO,OAAOzgD,EAAU0gD,EAAW,QAAQ,EAC3C,OAAO,OAAOH,EAAQG,EAAW,MAAM,EAGzC,OAAO,IAAIJ,GAAOtgD,EAAUugD,EAAQt4C,CAAK,CAC3C,CCjBO,SAAS04C,GAAUtjE,EAAO,CAC/B,OAAOA,EAAM,YAAa,CAC5B,CCNO,MAAMgiE,EAAK,CAShB,YAAYr/C,EAAU4gD,EAAW,CAC/B,KAAK,UAAYA,EACjB,KAAK,SAAW5gD,CACjB,CACH,CAEAq/C,GAAK,UAAU,UAAY,GAC3BA,GAAK,UAAU,WAAa,GAC5BA,GAAK,UAAU,QAAU,GACzBA,GAAK,UAAU,sBAAwB,GACvCA,GAAK,UAAU,eAAiB,GAChCA,GAAK,UAAU,QAAU,GACzBA,GAAK,UAAU,gBAAkB,GACjCA,GAAK,UAAU,OAAS,GACxBA,GAAK,UAAU,kBAAoB,GACnCA,GAAK,UAAU,SAAW,GAC1BA,GAAK,UAAU,eAAiB,GAChCA,GAAK,UAAU,MAAQ,OC/BvB,IAAIwB,GAAS,EAEN,MAAMC,GAAUC,GAAW,EACrBC,GAAaD,GAAW,EACxBE,GAAoBF,GAAW,EAC/BG,EAASH,GAAW,EACpBI,GAAiBJ,GAAW,EAC5BK,GAAiBL,GAAW,EAC5BM,GAAwBN,GAAW,EAEhD,SAASA,IAAY,CACnB,MAAO,IAAK,EAAEF,EAChB,yNCLMS,GACJ,OAAO,KAAKC,EAAK,EAGZ,MAAMC,WAAoBnC,EAAK,CAcpC,YAAYr/C,EAAU4gD,EAAW5L,EAAM/sC,EAAO,CAC5C,IAAIxP,EAAQ,GAMZ,GAJA,MAAMuH,EAAU4gD,CAAS,EAEzBa,GAAK,KAAM,QAASx5C,CAAK,EAErB,OAAO+sC,GAAS,SAClB,KAAO,EAAEv8C,EAAQ6oD,GAAO,QAAQ,CAC9B,MAAMI,EAAQJ,GAAO7oD,CAAK,EAC1BgpD,GAAK,KAAMH,GAAO7oD,CAAK,GAAIu8C,EAAOuM,GAAMG,CAAK,KAAOH,GAAMG,CAAK,CAAC,CACjE,CAEJ,CACH,CAEAF,GAAY,UAAU,QAAU,GAchC,SAASC,GAAK3Z,EAAQlpD,EAAKvB,EAAO,CAC5BA,IACFyqD,EAAOlpD,CAAG,EAAIvB,EAElB,CCnBO,SAASskE,GAAOjB,EAAY,CAEjC,MAAM1mD,EAAa,CAAE,EAEf4nD,EAAU,CAAE,EAElB,SAAW,CAAC5hD,EAAU3iB,CAAK,IAAK,OAAO,QAAQqjE,EAAW,UAAU,EAAG,CACrE,MAAMmB,EAAO,IAAIL,GACfxhD,EACA0gD,EAAW,UAAUA,EAAW,YAAc,GAAI1gD,CAAQ,EAC1D3iB,EACAqjE,EAAW,KACZ,EAGCA,EAAW,iBACXA,EAAW,gBAAgB,SAAS1gD,CAAQ,IAE5C6hD,EAAK,gBAAkB,IAGzB7nD,EAAWgG,CAAQ,EAAI6hD,EAEvBD,EAAQjB,GAAU3gD,CAAQ,CAAC,EAAIA,EAC/B4hD,EAAQjB,GAAUkB,EAAK,SAAS,CAAC,EAAI7hD,CACtC,CAED,OAAO,IAAIsgD,GAAOtmD,EAAY4nD,EAASlB,EAAW,KAAK,CACzD,CCjEO,MAAMoB,GAAOH,GAAO,CACzB,WAAY,CACV,qBAAsB,KACtB,WAAYX,GACZ,iBAAkB,KAClB,SAAUA,GACV,YAAaA,GACb,aAAcE,EACd,aAAcA,EACd,YAAaA,EACb,aAAcC,GACd,YAAa,KACb,gBAAiBA,GACjB,YAAa,KACb,aAAcH,GACd,eAAgBG,GAChB,iBAAkB,KAClB,aAAcH,GACd,WAAYG,GACZ,YAAaH,GACb,aAAc,KACd,WAAYA,GACZ,YAAa,KACb,iBAAkB,KAClB,UAAW,KACX,eAAgBG,GAChB,UAAWD,EACX,SAAU,KACV,UAAWF,GACX,cAAeA,GACf,oBAAqBA,GACrB,gBAAiB,KACjB,SAAUG,GACV,gBAAiB,KACjB,aAAcD,EACd,YAAaF,GACb,aAAcA,GACd,aAAc,KACd,aAAcA,GACd,oBAAqBG,GACrB,aAAcD,EACd,aAAcA,EACd,YAAaA,EACb,aAAcF,GACd,YAAaE,EACb,SAAU,KACV,aAAcA,EACd,aAAcA,EACd,aAAcA,EACd,cAAe,KACf,KAAM,IACP,EACD,UAAUviE,EAAGqhB,EAAU,CACrB,OAAOA,IAAa,OAChBA,EACA,QAAUA,EAAS,MAAM,CAAC,EAAE,YAAa,CAC9C,CACH,CAAC,ECpDM,SAAS+hD,GAAuBC,EAAYpB,EAAW,CAC5D,OAAOA,KAAaoB,EAAaA,EAAWpB,CAAS,EAAIA,CAC3D,CCAO,SAASqB,GAAyBD,EAAYhiD,EAAU,CAC7D,OAAO+hD,GAAuBC,EAAYhiD,EAAS,YAAW,CAAE,CAClE,CCDO,MAAMkiD,GAAOP,GAAO,CACzB,WAAY,CACV,cAAe,iBACf,UAAW,QACX,QAAS,MACT,UAAW,YACZ,EACD,gBAAiB,CAAC,UAAW,WAAY,QAAS,UAAU,EAC5D,WAAY,CAEV,KAAM,KACN,OAAQP,GACR,cAAeD,GACf,UAAWA,GACX,OAAQ,KACR,MAAO,KACP,gBAAiBL,GACjB,oBAAqBA,GACrB,eAAgBA,GAChB,IAAK,KACL,GAAI,KACJ,MAAOA,GACP,eAAgB,KAChB,aAAcK,GACd,UAAWL,GACX,SAAUA,GACV,SAAUK,GACV,QAAS,KACT,QAAS,KACT,QAASL,GACT,KAAM,KACN,UAAWK,GACX,KAAMD,EACN,QAAS,KACT,QAAS,KACT,gBAAiBF,GACjB,SAAUF,GACV,aAAcK,GACd,OAAQD,EAASE,GACjB,YAAa,KACb,KAAM,KACN,SAAU,KACV,SAAU,KACV,QAASN,GACT,MAAOA,GACP,IAAK,KACL,QAAS,KACT,SAAUA,GACV,SAAUG,GACV,UAAWD,GACX,QAAS,KACT,aAAc,KACd,cAAe,KACf,KAAM,KACN,WAAY,KACZ,YAAa,KACb,WAAY,KACZ,eAAgBF,GAChB,WAAY,KACZ,QAASK,GACT,OAAQD,EACR,OAAQD,GACR,KAAMC,EACN,KAAM,KACN,SAAU,KACV,QAASC,GACT,UAAWA,GACX,GAAI,KACJ,WAAY,KACZ,YAAa,KACb,MAAOL,GACP,UAAW,KACX,UAAW,KACX,GAAI,KACJ,MAAOA,GACP,OAAQ,KACR,SAAUK,GACV,QAASA,GACT,UAAWL,GACX,SAAUK,GACV,KAAM,KACN,MAAO,KACP,KAAM,KACN,SAAU,KACV,KAAM,KACN,QAAS,KACT,KAAML,GACN,IAAKI,EACL,SAAU,KACV,IAAK,KACL,UAAWA,EACX,MAAO,KACP,OAAQ,KACR,IAAK,KACL,UAAWA,EACX,SAAUJ,GACV,MAAOA,GACP,KAAM,KACN,MAAO,KACP,SAAUA,GACV,WAAYA,GACZ,QAAS,KACT,aAAc,KACd,WAAY,KACZ,cAAe,KACf,cAAe,KACf,eAAgB,KAChB,eAAgB,KAChB,OAAQ,KACR,SAAU,KACV,UAAW,KACX,iBAAkB,KAClB,SAAU,KACV,QAAS,KACT,QAAS,KACT,cAAe,KACf,cAAe,KACf,kBAAmB,KACnB,OAAQ,KACR,YAAa,KACb,MAAO,KACP,WAAY,KACZ,OAAQ,KACR,UAAW,KACX,YAAa,KACb,WAAY,KACZ,YAAa,KACb,WAAY,KACZ,YAAa,KACb,OAAQ,KACR,iBAAkB,KAClB,UAAW,KACX,QAAS,KACT,QAAS,KACT,QAAS,KACT,WAAY,KACZ,aAAc,KACd,QAAS,KACT,UAAW,KACX,UAAW,KACX,WAAY,KACZ,QAAS,KACT,iBAAkB,KAClB,OAAQ,KACR,aAAc,KACd,iBAAkB,KAClB,UAAW,KACX,YAAa,KACb,UAAW,KACX,eAAgB,KAChB,YAAa,KACb,aAAc,KACd,aAAc,KACd,YAAa,KACb,WAAY,KACZ,YAAa,KACb,UAAW,KACX,UAAW,KACX,SAAU,KACV,WAAY,KACZ,WAAY,KACZ,QAAS,KACT,QAAS,KACT,OAAQ,KACR,UAAW,KACX,WAAY,KACZ,WAAY,KACZ,aAAc,KACd,mBAAoB,KACpB,QAAS,KACT,SAAU,KACV,SAAU,KACV,YAAa,KACb,0BAA2B,KAC3B,SAAU,KACV,UAAW,KACX,SAAU,KACV,aAAc,KACd,UAAW,KACX,UAAW,KACX,SAAU,KACV,UAAW,KACX,aAAc,KACd,SAAU,KACV,qBAAsB,KACtB,SAAU,KACV,eAAgB,KAChB,UAAW,KACX,QAAS,KACT,KAAMA,GACN,QAASI,EACT,QAAS,KACT,KAAMC,GACN,YAAa,KACb,YAAaL,GACb,QAAS,KACT,cAAe,KACf,oBAAqB,KACrB,OAAQ,KACR,QAAS,KACT,SAAUA,GACV,eAAgB,KAChB,IAAKK,GACL,SAAUL,GACV,SAAUA,GACV,KAAMI,EACN,QAASA,EACT,QAASC,GACT,MAAO,KACP,OAAQL,GACR,SAAUA,GACV,SAAUA,GACV,mBAAoBA,GACpB,yBAA0BA,GAC1B,eAAgB,KAChB,MAAO,KACP,KAAMI,EACN,MAAO,KACP,KAAM,KACN,KAAMA,EACN,WAAYF,GACZ,IAAK,KACL,OAAQ,KACR,QAAS,KACT,OAAQ,KACR,MAAOE,EACP,KAAM,KACN,MAAO,KACP,SAAUA,EACV,OAAQ,KACR,MAAO,KACP,UAAW,KACX,KAAM,KACN,cAAeJ,GACf,OAAQ,KACR,MAAOE,GACP,MAAOE,EACP,KAAM,KACN,mBAAoB,KAIpB,MAAO,KACP,MAAO,KACP,QAASC,GACT,KAAM,KACN,WAAY,KACZ,QAAS,KACT,OAAQD,EACR,YAAa,KACb,aAAcA,EACd,YAAa,KACb,YAAa,KACb,KAAM,KACN,QAAS,KACT,QAAS,KACT,MAAO,KACP,KAAM,KACN,SAAU,KACV,SAAU,KACV,MAAO,KACP,QAASJ,GACT,QAASA,GACT,MAAO,KACP,KAAM,KACN,MAAO,KACP,YAAa,KACb,OAAQI,EACR,WAAYA,EACZ,KAAM,KACN,SAAU,KACV,OAAQ,KACR,aAAcA,EACd,YAAaA,EACb,SAAUJ,GACV,OAAQA,GACR,QAASA,GACT,OAAQA,GACR,OAAQ,KACR,QAAS,KACT,OAAQ,KACR,IAAK,KACL,YAAaI,EACb,MAAO,KACP,OAAQ,KACR,UAAWF,GACX,QAAS,KACT,QAAS,KACT,KAAM,KACN,UAAWE,EACX,UAAW,KACX,QAAS,KACT,OAAQ,KACR,MAAO,KACP,OAAQA,EAGR,kBAAmB,KACnB,YAAa,KACb,SAAU,KACV,wBAAyBJ,GACzB,sBAAuBA,GACvB,OAAQ,KACR,SAAU,KACV,QAASI,EACT,SAAU,KACV,aAAc,IACf,EACD,MAAO,OACP,UAAWe,EACb,CAAC,ECvTYE,GAAMR,GAAO,CACxB,WAAY,CACV,aAAc,gBACd,kBAAmB,qBACnB,WAAY,cACZ,cAAe,iBACf,UAAW,aACX,UAAW,QACX,SAAU,YACV,SAAU,YACV,mBAAoB,sBACpB,0BAA2B,8BAC3B,aAAc,gBACd,eAAgB,kBAChB,YAAa,cACb,SAAU,WACV,iBAAkB,oBAClB,iBAAkB,oBAClB,YAAa,eACb,SAAU,YACV,WAAY,cACZ,aAAc,gBACd,WAAY,cACZ,SAAU,YACV,eAAgB,mBAChB,YAAa,eACb,UAAW,aACX,YAAa,eACb,WAAY,cACZ,UAAW,aACX,2BAA4B,+BAC5B,yBAA0B,6BAC1B,SAAU,WACV,UAAW,cACX,aAAc,iBACd,aAAc,iBACd,eAAgB,kBAChB,cAAe,iBACf,cAAe,iBACf,UAAW,aACX,UAAW,aACX,YAAa,eACb,QAAS,WACT,YAAa,gBACb,aAAc,iBACd,QAAS,WACT,QAAS,WACT,QAAS,WACT,SAAU,YACV,MAAO,SACP,UAAW,cACX,WAAY,eACZ,QAAS,UACT,WAAY,aACZ,aAAc,eACd,cAAe,gBACf,QAAS,UACT,SAAU,WACV,UAAW,YACX,iBAAkB,mBAClB,SAAU,WACV,QAAS,UACT,QAAS,UACT,OAAQ,SACR,YAAa,cACb,MAAO,QACP,WAAY,aACZ,OAAQ,SACR,UAAW,YACX,YAAa,cACb,WAAY,aACZ,YAAa,cACb,WAAY,aACZ,YAAa,cACb,OAAQ,SACR,iBAAkB,mBAClB,UAAW,YACX,MAAO,QACP,QAAS,UACT,QAAS,UACT,QAAS,UACT,UAAW,YACX,WAAY,aACZ,aAAc,eACd,QAAS,UACT,UAAW,YACX,UAAW,YACX,WAAY,aACZ,QAAS,UACT,OAAQ,SACR,aAAc,eACd,iBAAkB,mBAClB,YAAa,cACb,UAAW,YACX,YAAa,cACb,aAAc,eACd,aAAc,eACd,YAAa,cACb,WAAY,aACZ,YAAa,cACb,UAAW,YACX,aAAc,eACd,UAAW,YACX,SAAU,WACV,WAAY,aACZ,WAAY,aACZ,QAAS,UACT,QAAS,UACT,OAAQ,SACR,UAAW,YACX,WAAY,aACZ,WAAY,aACZ,aAAc,eACd,SAAU,WACV,QAAS,UACT,SAAU,WACV,SAAU,WACV,SAAU,WACV,UAAW,YACX,SAAU,WACV,OAAQ,SACR,UAAW,YACX,UAAW,YACX,SAAU,WACV,UAAW,YACX,aAAc,eACd,SAAU,WACV,SAAU,WACV,eAAgB,iBAChB,UAAW,YACX,OAAQ,SACR,iBAAkB,oBAClB,kBAAmB,qBACnB,WAAY,cACZ,QAAS,WACT,cAAe,iBACf,eAAgB,iBAChB,gBAAiB,mBACjB,eAAgB,kBAChB,UAAW,aACX,YAAa,eACb,sBAAuB,yBACvB,uBAAwB,0BACxB,gBAAiB,mBACjB,iBAAkB,oBAClB,cAAe,iBACf,eAAgB,kBAChB,iBAAkB,oBAClB,cAAe,iBACf,YAAa,eACb,SAAU,WACV,WAAY,cACZ,eAAgB,kBAChB,cAAe,iBACf,gBAAiB,mBACjB,OAAQ,SACR,kBAAmB,qBACnB,mBAAoB,sBACpB,YAAa,eACb,aAAc,gBACd,WAAY,eACZ,YAAa,eACb,SAAU,YACV,aAAc,gBACd,cAAe,iBACf,aAAc,gBACd,SAAU,aACV,YAAa,gBACb,YAAa,gBACb,YAAa,eACb,YAAa,eACb,QAAS,WAET,cAAe,gBACf,cAAe,eAChB,EACD,WAAY,CACV,MAAON,GACP,aAAcH,EACd,WAAY,KACZ,SAAU,KACV,kBAAmB,KACnB,WAAYA,EACZ,UAAWA,EACX,WAAY,KACZ,OAAQA,EACR,cAAe,KACf,cAAe,KACf,QAASA,EACT,UAAW,KACX,cAAe,KACf,cAAe,KACf,YAAa,KACb,KAAM,KACN,MAAO,KACP,KAAMA,EACN,GAAI,KACJ,SAAU,KACV,UAAWA,EACX,UAAWC,GACX,KAAM,KACN,SAAU,KACV,cAAe,KACf,SAAU,KACV,MAAO,KACP,mBAAoB,KACpB,0BAA2B,KAC3B,aAAc,KACd,eAAgB,KAChB,QAAS,KACT,kBAAmB,KACnB,iBAAkB,KAClB,YAAa,KACb,OAAQ,KACR,GAAI,KACJ,GAAI,KACJ,EAAG,KACH,SAAU,KACV,cAAe,KACf,QAASD,EACT,gBAAiBA,EACjB,UAAW,KACX,QAAS,KACT,IAAK,KACL,QAASA,EACT,iBAAkB,KAClB,SAAUJ,GACV,GAAI,KACJ,GAAI,KACJ,SAAU,KACV,SAAU,KACV,UAAWI,EACX,iBAAkB,KAClB,IAAK,KACL,MAAO,KACP,SAAUA,EACV,0BAA2B,KAC3B,KAAM,KACN,YAAaA,EACb,SAAU,KACV,OAAQ,KACR,UAAW,KACX,YAAa,KACb,WAAY,KACZ,aAAc,KACd,UAAW,KACX,eAAgB,KAChB,WAAY,KACZ,SAAU,KACV,eAAgB,KAChB,YAAa,KACb,UAAW,KACX,YAAa,KACb,WAAY,KACZ,OAAQ,KACR,GAAI,KACJ,KAAM,KACN,GAAI,KACJ,GAAI,KACJ,GAAIE,GACJ,GAAIA,GACJ,UAAWA,GACX,2BAA4B,KAC5B,yBAA0B,KAC1B,SAAU,KACV,kBAAmB,KACnB,cAAe,KACf,QAAS,KACT,QAASF,EACT,kBAAmB,KACnB,WAAY,KACZ,OAAQ,KACR,KAAM,KACN,SAAU,KACV,UAAWA,EACX,aAAcA,EACd,aAAcA,EACd,GAAI,KACJ,YAAaA,EACb,eAAgB,KAChB,kBAAmB,KACnB,GAAI,KACJ,IAAK,KACL,UAAWA,EACX,EAAGA,EACH,GAAIA,EACJ,GAAIA,EACJ,GAAIA,EACJ,GAAIA,EACJ,aAAcG,GACd,iBAAkB,KAClB,UAAW,KACX,WAAY,KACZ,SAAU,KACV,QAAS,KACT,KAAM,KACN,aAAc,KACd,cAAe,KACf,cAAe,KACf,kBAAmBH,EACnB,MAAO,KACP,UAAW,KACX,UAAW,KACX,YAAa,KACb,aAAc,KACd,YAAa,KACb,YAAa,KACb,KAAM,KACN,iBAAkB,KAClB,UAAW,KACX,aAAc,KACd,IAAK,KACL,MAAO,KACP,uBAAwB,KACxB,sBAAuB,KACvB,UAAWA,EACX,UAAW,KACX,OAAQ,KACR,IAAK,KACL,KAAM,KACN,KAAM,KACN,QAAS,KACT,YAAa,KACb,aAAc,KACd,QAAS,KACT,QAAS,KACT,QAAS,KACT,SAAU,KACV,MAAO,KACP,UAAW,KACX,WAAY,KACZ,WAAY,KACZ,SAAU,KACV,OAAQ,KACR,QAAS,KACT,WAAY,KACZ,aAAc,KACd,cAAe,KACf,QAAS,KACT,SAAU,KACV,UAAW,KACX,iBAAkB,KAClB,SAAU,KACV,QAAS,KACT,QAAS,KACT,OAAQ,KACR,YAAa,KACb,MAAO,KACP,WAAY,KACZ,OAAQ,KACR,UAAW,KACX,YAAa,KACb,WAAY,KACZ,YAAa,KACb,WAAY,KACZ,YAAa,KACb,OAAQ,KACR,iBAAkB,KAClB,UAAW,KACX,MAAO,KACP,QAAS,KACT,QAAS,KACT,QAAS,KACT,UAAW,KACX,WAAY,KACZ,aAAc,KACd,QAAS,KACT,UAAW,KACX,UAAW,KACX,WAAY,KACZ,QAAS,KACT,OAAQ,KACR,aAAc,KACd,iBAAkB,KAClB,YAAa,KACb,UAAW,KACX,YAAa,KACb,aAAc,KACd,aAAc,KACd,YAAa,KACb,WAAY,KACZ,YAAa,KACb,UAAW,KACX,aAAc,KACd,UAAW,KACX,SAAU,KACV,WAAY,KACZ,WAAY,KACZ,QAAS,KACT,QAAS,KACT,OAAQ,KACR,UAAW,KACX,WAAY,KACZ,WAAY,KACZ,aAAc,KACd,SAAU,KACV,QAAS,KACT,SAAU,KACV,SAAU,KACV,SAAU,KACV,UAAW,KACX,SAAU,KACV,OAAQ,KACR,UAAW,KACX,UAAW,KACX,SAAU,KACV,UAAW,KACX,aAAc,KACd,SAAU,KACV,SAAU,KACV,eAAgB,KAChB,UAAW,KACX,OAAQ,KACR,QAAS,KACT,SAAU,KACV,MAAO,KACP,OAAQ,KACR,YAAa,KACb,OAAQ,KACR,SAAU,KACV,QAAS,KACT,iBAAkBA,EAClB,kBAAmBA,EACnB,WAAY,KACZ,QAAS,KACT,KAAM,KACN,WAAYA,EACZ,oBAAqB,KACrB,iBAAkB,KAClB,aAAc,KACd,MAAO,KACP,KAAMC,GACN,MAAO,KACP,cAAe,KACf,cAAe,KACf,OAAQ,KACR,UAAWD,EACX,UAAWA,EACX,UAAWA,EACX,cAAe,KACf,oBAAqB,KACrB,eAAgB,KAChB,UAAW,KACX,SAAUG,GACV,EAAG,KACH,OAAQ,KACR,eAAgB,KAChB,KAAM,KACN,KAAM,KACN,IAAKA,GACL,IAAKA,GACL,gBAAiB,KACjB,YAAa,KACb,UAAW,KACX,mBAAoBA,GACpB,iBAAkBA,GAClB,cAAeA,GACf,gBAAiBA,GACjB,SAAU,KACV,QAAS,KACT,OAAQ,KACR,OAAQ,KACR,GAAI,KACJ,GAAI,KACJ,MAAO,KACP,KAAM,KACN,eAAgB,KAChB,KAAM,KACN,MAAO,KACP,aAAc,KACd,iBAAkBH,EAClB,iBAAkBA,EAClB,aAAc,KACd,QAAS,KACT,YAAa,KACb,aAAc,KACd,MAAO,KACP,MAAO,KACP,YAAa,KACb,UAAW,KACX,YAAa,KACb,sBAAuBA,EACvB,uBAAwBA,EACxB,OAAQ,KACR,OAAQ,KACR,gBAAiBG,GACjB,iBAAkB,KAClB,cAAe,KACf,eAAgB,KAChB,iBAAkBH,EAClB,cAAeA,EACf,YAAa,KACb,MAAO,KACP,aAAcA,EACd,aAAc,KACd,oBAAqB,KACrB,WAAY,KACZ,cAAe,KACf,qBAAsB,KACtB,eAAgBG,GAChB,SAAUH,EACV,YAAa,KACb,OAAQ,KACR,QAASA,EACT,QAASA,EACT,WAAY,KACZ,eAAgB,KAChB,cAAe,KACf,WAAY,KACZ,cAAe,KACf,MAAO,KACP,kBAAmB,KACnB,KAAM,KACN,OAAQG,GACR,GAAI,KACJ,UAAW,KACX,gBAAiB,KACjB,GAAI,KACJ,GAAI,KACJ,kBAAmBH,EACnB,mBAAoBA,EACpB,QAAS,KACT,YAAa,KACb,aAAc,KACd,WAAYA,EACZ,OAAQ,KACR,YAAaA,EACb,cAAeA,EACf,aAAc,KACd,SAAUA,EACV,aAAcA,EACd,QAAS,KACT,SAAUA,EACV,YAAaA,EACb,YAAaA,EACb,QAAS,KACT,WAAY,KACZ,WAAY,KACZ,MAAO,KACP,OAAQ,KACR,YAAa,KACb,YAAa,KACb,EAAG,KACH,GAAI,KACJ,GAAI,KACJ,iBAAkB,KAClB,QAASA,EACT,EAAG,KACH,GAAI,KACJ,GAAI,KACJ,iBAAkB,KAClB,EAAG,KACH,WAAY,IACb,EACD,MAAO,MACP,UAAWa,EACb,CAAC,ECpjBYK,GAAQT,GAAO,CAC1B,WAAY,CACV,aAAc,KACd,aAAc,KACd,UAAW,KACX,UAAW,KACX,UAAW,KACX,WAAY,KACZ,UAAW,IACZ,EACD,MAAO,QACP,UAAUhjE,EAAGqhB,EAAU,CACrB,MAAO,SAAWA,EAAS,MAAM,CAAC,EAAE,YAAa,CAClD,CACH,CAAC,ECbYqiD,GAAQV,GAAO,CAC1B,WAAY,CAAC,WAAY,aAAa,EACtC,WAAY,CAAC,WAAY,KAAM,MAAO,IAAI,EAC1C,MAAO,QACP,UAAWM,EACb,CAAC,ECNYK,GAAMX,GAAO,CACxB,WAAY,CAAC,QAAS,KAAM,QAAS,KAAM,SAAU,IAAI,EACzD,MAAO,MACP,UAAUhjE,EAAGqhB,EAAU,CACrB,MAAO,OAASA,EAAS,MAAM,CAAC,EAAE,YAAa,CAChD,CACH,CAAC,ECGYuiD,GAAc,CACzB,QAAS,UACT,SAAU,WACV,OAAQ,SACR,gBAAiB,kBACjB,iBAAkB,mBAClB,cAAe,gBACf,eAAgB,iBAChB,iBAAkB,mBAClB,OAAQ,SACR,aAAc,eACd,aAAc,eACd,UAAW,YACX,UAAW,YACX,UAAW,YACX,WAAY,aACZ,UAAW,YACX,WAAY,YACd,ECrBMC,GAAM,SACNC,GAAO,UACPC,GAAQ,kBAgCP,SAASC,GAAKC,EAAQvlE,EAAO,CAClC,MAAMkjE,EAASI,GAAUtjE,CAAK,EAC9B,IAAI2iB,EAAW3iB,EACXwlE,EAAOxD,GAEX,GAAIkB,KAAUqC,EAAO,OACnB,OAAOA,EAAO,SAASA,EAAO,OAAOrC,CAAM,CAAC,EAG9C,GAAIA,EAAO,OAAS,GAAKA,EAAO,MAAM,EAAG,CAAC,IAAM,QAAUmC,GAAM,KAAKrlE,CAAK,EAAG,CAE3E,GAAIA,EAAM,OAAO,CAAC,IAAM,IAAK,CAE3B,MAAMmxB,EAAOnxB,EAAM,MAAM,CAAC,EAAE,QAAQolE,GAAMK,EAAS,EACnD9iD,EAAW,OAASwO,EAAK,OAAO,CAAC,EAAE,cAAgBA,EAAK,MAAM,CAAC,CACrE,KAAW,CAEL,MAAMA,EAAOnxB,EAAM,MAAM,CAAC,EAE1B,GAAI,CAAColE,GAAK,KAAKj0C,CAAI,EAAG,CACpB,IAAIu0C,EAASv0C,EAAK,QAAQg0C,GAAKQ,EAAK,EAEhCD,EAAO,OAAO,CAAC,IAAM,MACvBA,EAAS,IAAMA,GAGjB1lE,EAAQ,OAAS0lE,CAClB,CACF,CAEDF,EAAOrB,EACR,CAED,OAAO,IAAIqB,EAAK7iD,EAAU3iB,CAAK,CACjC,CAQA,SAAS2lE,GAAMC,EAAI,CACjB,MAAO,IAAMA,EAAG,YAAa,CAC/B,CAQA,SAASH,GAAUG,EAAI,CACrB,OAAOA,EAAG,OAAO,CAAC,EAAE,YAAa,CACnC,CCrFO,MAAMf,GAAO1B,GAAM,CAACsB,GAAMoB,GAAUd,GAAOC,GAAOC,EAAG,EAAG,MAAM,EAKxDH,GAAM3B,GAAM,CAACsB,GAAMqB,GAASf,GAAOC,GAAOC,EAAG,EAAG,KAAK,ECK3D,SAASxC,GAAUhY,EAAQ,CAChC,OAAOA,EAAO,KAAK,GAAG,EAAE,KAAM,CAChC,WCrBIsb,GAAgB,kCAEhBC,GAAgB,MAChBC,GAAmB,OAGnBC,GAAiB,yCACjBC,GAAc,QACdC,GAAc,uDACdC,GAAkB,UAGlBC,GAAa,aAGbC,GAAU;AAAA,EACVC,GAAgB,IAChBC,GAAW,IACXC,GAAe,GAGfC,GAAe,UACfC,GAAmB,cASvBC,GAAiB,SAAUx3B,EAAO1rC,EAAS,CACzC,GAAI,OAAO0rC,GAAU,SACnB,MAAM,IAAI,UAAU,iCAAiC,EAGvD,GAAI,CAACA,EAAO,MAAO,GAEnB1rC,EAAUA,GAAW,GAKrB,IAAIjH,EAAS,EACToqE,EAAS,EAOb,SAASC,EAAehqE,EAAK,CAC3B,IAAIiqE,EAAQjqE,EAAI,MAAMipE,EAAa,EAC/BgB,IAAOtqE,GAAUsqE,EAAM,QAC3B,IAAI9pE,EAAIH,EAAI,YAAYwpE,EAAO,EAC/BO,EAAS,CAAC5pE,EAAIH,EAAI,OAASG,EAAI4pE,EAAS/pE,EAAI,MAC7C,CAOD,SAAS48C,GAAW,CAClB,IAAI+iB,EAAQ,CAAE,KAAMhgE,EAAQ,OAAQoqE,CAAM,EAC1C,OAAO,SAAUhI,EAAM,CACrB,OAAAA,EAAK,SAAW,IAAImI,EAASvK,CAAK,EAClCqG,IACOjE,CACb,CACG,CAUD,SAASmI,EAASvK,EAAO,CACvB,KAAK,MAAQA,EACb,KAAK,IAAM,CAAE,KAAMhgE,EAAQ,OAAQoqE,GACnC,KAAK,OAASnjE,EAAQ,MACvB,CAKDsjE,EAAS,UAAU,QAAU53B,EAU7B,SAASl0C,EAAM+rE,EAAK,CAClB,IAAIrxD,EAAM,IAAI,MACZlS,EAAQ,OAAS,IAAMjH,EAAS,IAAMoqE,EAAS,KAAOI,CAC5D,EAOI,GANArxD,EAAI,OAASqxD,EACbrxD,EAAI,SAAWlS,EAAQ,OACvBkS,EAAI,KAAOnZ,EACXmZ,EAAI,OAASixD,EACbjxD,EAAI,OAASw5B,EAET,CAAA1rC,EAAQ,OAGV,MAAMkS,CAET,CAQD,SAAStW,EAAMujE,EAAI,CACjB,IAAIjoE,EAAIioE,EAAG,KAAKzzB,CAAK,EACrB,GAAKx0C,EACL,KAAIkC,EAAMlC,EAAE,CAAC,EACb,OAAAksE,EAAehqE,CAAG,EAClBsyC,EAAQA,EAAM,MAAMtyC,EAAI,MAAM,EACvBlC,EACR,CAKD,SAASkoE,GAAa,CACpBxjE,EAAM0mE,EAAgB,CACvB,CAQD,SAASkB,EAASC,EAAO,CACvB,IAAIjqE,EAEJ,IADAiqE,EAAQA,GAAS,GACTjqE,EAAIkqE,KACNlqE,IAAM,IACRiqE,EAAM,KAAKjqE,CAAC,EAGhB,OAAOiqE,CACR,CAQD,SAASC,GAAU,CACjB,IAAI/pE,EAAMq8C,IACV,GAAI,EAAA6sB,IAAiBn3B,EAAM,OAAO,CAAC,GAAKo3B,IAAYp3B,EAAM,OAAO,CAAC,GAGlE,SADInyC,EAAI,EAENwpE,IAAgBr3B,EAAM,OAAOnyC,CAAC,IAC7BupE,IAAYp3B,EAAM,OAAOnyC,CAAC,GAAKspE,IAAiBn3B,EAAM,OAAOnyC,EAAI,CAAC,IAEnE,EAAEA,EAIJ,GAFAA,GAAK,EAEDwpE,KAAiBr3B,EAAM,OAAOnyC,EAAI,CAAC,EACrC,OAAO/B,EAAM,wBAAwB,EAGvC,IAAI4B,EAAMsyC,EAAM,MAAM,EAAGnyC,EAAI,CAAC,EAC9B,OAAA4pE,GAAU,EACVC,EAAehqE,CAAG,EAClBsyC,EAAQA,EAAM,MAAMnyC,CAAC,EACrB4pE,GAAU,EAEHxpE,EAAI,CACT,KAAMqpE,GACN,QAAS5pE,CACf,CAAK,EACF,CAQD,SAASuqE,GAAc,CACrB,IAAIhqE,EAAMq8C,IAGN9yC,EAAOtH,EAAM2mE,EAAc,EAC/B,GAAKr/D,EAIL,IAHAwgE,IAGI,CAAC9nE,EAAM4mE,EAAW,EAAG,OAAOhrE,EAAM,sBAAsB,EAG5D,IAAIkK,EAAM9F,EAAM6mE,EAAW,EAEvBmB,EAAMjqE,EAAI,CACZ,KAAMspE,GACN,SAAUY,GAAK3gE,EAAK,CAAC,EAAE,QAAQk/D,GAAeW,EAAY,CAAC,EAC3D,MAAOrhE,EACHmiE,GAAKniE,EAAI,CAAC,EAAE,QAAQ0gE,GAAeW,EAAY,CAAC,EAChDA,EACV,CAAK,EAGD,OAAAnnE,EAAM8mE,EAAe,EAEdkB,EACR,CAOD,SAASE,GAAe,CACtB,IAAIC,EAAQ,GAEZP,EAASO,CAAK,EAId,QADIC,EACIA,EAAOL,KACTK,IAAS,KACXD,EAAM,KAAKC,CAAI,EACfR,EAASO,CAAK,GAIlB,OAAOA,CACR,CAED,OAAA3E,IACO0E,EAAY,CACrB,EAQA,SAASD,GAAKzqE,EAAK,CACjB,OAAOA,EAAMA,EAAI,QAAQupE,GAAYI,EAAY,EAAIA,EACvD,CCnQA,IAAIkB,GAAmBC,IAAQA,GAAK,iBAAoB,SAAUC,EAAK,CACnE,OAAQA,GAAOA,EAAI,WAAcA,EAAM,CAAE,QAAWA,EACxD,EACA,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC7CA,GAAA,QAAGC,GAClB,IAAIC,GAAwBL,GAAgB9sE,EAA8B,EAe1E,SAASktE,GAAc34B,EAAO64B,EAAU,CACpC,IAAIC,EAAc,KAClB,GAAI,CAAC94B,GAAS,OAAOA,GAAU,SAC3B,OAAO84B,EAEX,IAAIV,KAAmBQ,GAAsB,SAAS54B,CAAK,EACvD+4B,EAAc,OAAOF,GAAa,WACtC,OAAAT,EAAa,QAAQ,SAAUH,EAAa,CACxC,GAAIA,EAAY,OAAS,cAGzB,KAAI3kD,EAAW2kD,EAAY,SAAUtnE,EAAQsnE,EAAY,MACrDc,EACAF,EAASvlD,EAAU3iB,EAAOsnE,CAAW,EAEhCtnE,IACLmoE,EAAcA,GAAe,GAC7BA,EAAYxlD,CAAQ,EAAI3iB,GAEpC,CAAK,EACMmoE,CACX,WCzCA,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC3CA,GAAA,UAAG,OACpB,IAAIC,GAAwB,qBACxBC,GAAe,YACfC,GAAkB,UAClBC,GAAsB,6BACtBC,GAAyB,UAIzBC,GAAgB,SAAUhmD,EAAU,CACpC,MAAO,CAACA,GACJ6lD,GAAgB,KAAK7lD,CAAQ,GAC7B2lD,GAAsB,KAAK3lD,CAAQ,CAC3C,EAIIimD,GAAa,SAAUrpE,EAAOspE,EAAW,CACzC,OAAOA,EAAU,aACrB,EAIIC,GAAa,SAAUvpE,EAAOsjB,EAAQ,CAAE,MAAO,GAAG,OAAOA,EAAQ,GAAG,GAIpEkmD,GAAY,SAAUpmD,EAAUhf,EAAS,CAEzC,OADIA,IAAY,SAAUA,EAAU,CAAE,GAClCglE,GAAchmD,CAAQ,EACfA,GAEXA,EAAWA,EAAS,cAChBhf,EAAQ,YAERgf,EAAWA,EAAS,QAAQ+lD,GAAwBI,EAAU,EAI9DnmD,EAAWA,EAAS,QAAQ8lD,GAAqBK,EAAU,EAExDnmD,EAAS,QAAQ4lD,GAAcK,EAAU,EACpD,EACiBP,GAAA,UAAGU,GC5CpB,IAAInB,GAAmBC,IAAQA,GAAK,iBAAoB,SAAUC,EAAK,CACnE,OAAQA,GAAOA,EAAI,WAAcA,EAAM,CAAE,QAAWA,EACxD,EACIkB,GAAoBpB,GAAgB9sE,EAA0B,EAC9DmuE,GAAcC,GAIlB,SAASC,GAAU95B,EAAO1rC,EAAS,CAC/B,IAAI3F,EAAS,GACb,MAAI,CAACqxC,GAAS,OAAOA,GAAU,aAG3B25B,GAAkB,SAAS35B,EAAO,SAAU1sB,EAAU3iB,EAAO,CAEzD2iB,GAAY3iB,IACZhC,KAAWirE,GAAY,WAAWtmD,EAAUhf,CAAO,CAAC,EAAI3D,EAEpE,CAAK,EACMhC,CACX,CACAmrE,GAAU,QAAUA,OACpBpB,GAAiBoB,mBCMJC,GAAWhpC,GAAM,KAAK,EAUtBipC,GAAajpC,GAAM,OAAO,EAUvC,SAASA,GAAMp9B,EAAM,CACnB,OAAOo9B,EAQP,SAASA,EAAM0+B,EAAM,CACnB,MAAM1+B,EAAS0+B,GAAQA,EAAK,UAAYA,EAAK,SAAS97D,CAAI,GAAM,CAAE,EAElE,GACE,OAAOo9B,EAAM,MAAS,UACtBA,EAAM,KAAO,GACb,OAAOA,EAAM,QAAW,UACxBA,EAAM,OAAS,EAEf,MAAO,CACL,KAAMA,EAAM,KACZ,OAAQA,EAAM,OACd,OACE,OAAOA,EAAM,QAAW,UAAYA,EAAM,OAAS,GAC/CA,EAAM,OACN,MACP,CAEJ,CACH,CAUO,SAASuZ,GAASmlB,EAAM,CAC7B,MAAMpC,EAAQ2M,GAAWvK,CAAI,EACvBwK,EAAMF,GAAStK,CAAI,EAEzB,GAAIpC,GAAS4M,EACX,MAAO,CAAC,MAAA5M,EAAO,IAAA4M,CAAG,CAEtB,CC1DO,SAASC,GAAkBvpE,EAAO,CAEvC,MAAI,CAACA,GAAS,OAAOA,GAAU,SACtB,GAIL,aAAcA,GAAS,SAAUA,EAC5B25C,GAAS35C,EAAM,QAAQ,EAI5B,UAAWA,GAAS,QAASA,EACxB25C,GAAS35C,CAAK,EAInB,SAAUA,GAAS,WAAYA,EAC1BogC,GAAMpgC,CAAK,EAIb,EACT,CAMA,SAASogC,GAAMA,EAAO,CACpB,OAAOhlB,GAAMglB,GAASA,EAAM,IAAI,EAAI,IAAMhlB,GAAMglB,GAASA,EAAM,MAAM,CACvE,CAMA,SAASuZ,GAASr8C,EAAK,CACrB,OAAO8iC,GAAM9iC,GAAOA,EAAI,KAAK,EAAI,IAAM8iC,GAAM9iC,GAAOA,EAAI,GAAG,CAC7D,CAMA,SAAS8d,GAAMpb,EAAO,CACpB,OAAOA,GAAS,OAAOA,GAAU,SAAWA,EAAQ,CACtD,CCvDO,MAAMwpE,WAAqB,KAAM,CAwDtC,YAAYC,EAAeC,EAAwBC,EAAQ,CACzD,MAAO,EAEH,OAAOD,GAA2B,WACpCC,EAASD,EACTA,EAAyB,QAI3B,IAAIrjC,EAAS,GAET1iC,EAAU,CAAE,EACZimE,EAAc,GAwClB,GAtCIF,IAGA,SAAUA,GACV,WAAYA,EAEZ/lE,EAAU,CAAC,MAAO+lE,CAAsB,EAIxC,UAAWA,GACX,QAASA,EAET/lE,EAAU,CAAC,MAAO+lE,CAAsB,EAGjC,SAAUA,EACjB/lE,EAAU,CACR,UAAW,CAAC+lE,CAAsB,EAClC,MAAOA,EAAuB,QAC/B,EAID/lE,EAAU,CAAC,GAAG+lE,CAAsB,GAIpC,OAAOD,GAAkB,SAC3BpjC,EAASojC,EAGF,CAAC9lE,EAAQ,OAAS8lE,IACzBG,EAAc,GACdvjC,EAASojC,EAAc,QACvB9lE,EAAQ,MAAQ8lE,GAGd,CAAC9lE,EAAQ,QAAU,CAACA,EAAQ,QAAU,OAAOgmE,GAAW,SAAU,CACpE,MAAMvuD,EAAQuuD,EAAO,QAAQ,GAAG,EAE5BvuD,IAAU,GACZzX,EAAQ,OAASgmE,GAEjBhmE,EAAQ,OAASgmE,EAAO,MAAM,EAAGvuD,CAAK,EACtCzX,EAAQ,OAASgmE,EAAO,MAAMvuD,EAAQ,CAAC,EAE1C,CAED,GAAI,CAACzX,EAAQ,OAASA,EAAQ,WAAaA,EAAQ,UAAW,CAC5D,MAAMkmE,EAASlmE,EAAQ,UAAUA,EAAQ,UAAU,OAAS,CAAC,EAEzDkmE,IACFlmE,EAAQ,MAAQkmE,EAAO,SAE1B,CAED,MAAMnN,EACJ/4D,EAAQ,OAAS,UAAWA,EAAQ,MAChCA,EAAQ,MAAM,MACdA,EAAQ,MAQd,KAAK,UAAYA,EAAQ,WAAa,OAOtC,KAAK,MAAQA,EAAQ,OAAS,OAO9B,KAAK,OAAS+4D,EAAQA,EAAM,OAAS,OAWrC,KAAK,MAAQ,OAOb,KAAK,KAQL,KAAK,QAAUr2B,EAOf,KAAK,KAAOq2B,EAAQA,EAAM,KAAO,OASjC,KAAK,KAAO6M,GAAkB5lE,EAAQ,KAAK,GAAK,MAOhD,KAAK,MAAQA,EAAQ,OAAS,OAO9B,KAAK,OAAS,KAAK,QAOnB,KAAK,OAASA,EAAQ,QAAU,OAOhC,KAAK,OAASA,EAAQ,QAAU,OAWhC,KAAK,MACHimE,GAAejmE,EAAQ,OAAS,OAAOA,EAAQ,MAAM,OAAU,SAC3DA,EAAQ,MAAM,MACd,GAYN,KAAK,OAOL,KAAK,SAOL,KAAK,KAUL,KAAK,GAEN,CACH,CAEA6lE,GAAa,UAAU,KAAO,GAC9BA,GAAa,UAAU,KAAO,GAC9BA,GAAa,UAAU,OAAS,GAChCA,GAAa,UAAU,QAAU,GACjCA,GAAa,UAAU,MAAQ,GAC/BA,GAAa,UAAU,OAAS,OAChCA,GAAa,UAAU,KAAO,OAC9BA,GAAa,UAAU,UAAY,OACnCA,GAAa,UAAU,MAAQ,OAC/BA,GAAa,UAAU,MAAQ,OAC/BA,GAAa,UAAU,MAAQ,OAC/BA,GAAa,UAAU,OAAS,OAChCA,GAAa,UAAU,OAAS,OCvShC,MAAMM,GAAM,CAAE,EAAC,eAGTC,GAAW,IAAI,IAEf5E,GAAM,SAaN6E,GAAgB,IAAI,IAAI,CAAC,QAAS,QAAS,QAAS,QAAS,IAAI,CAAC,EAElEC,GAAmB,IAAI,IAAI,CAAC,KAAM,IAAI,CAAC,EAEvCC,GAAO,0DAcN,SAASC,GAAaC,EAAMzmE,EAAS,CAC1C,GAAI,CAACA,GAAWA,EAAQ,WAAa,OACnC,MAAM,IAAI,UAAU,gCAAgC,EAGtD,MAAM0mE,EAAW1mE,EAAQ,UAAY,OAErC,IAAI2gE,EAEJ,GAAI3gE,EAAQ,YAAa,CACvB,GAAI,OAAOA,EAAQ,QAAW,WAC5B,MAAM,IAAI,UACR,uDACD,EAGH2gE,EAASgG,GAAkBD,EAAU1mE,EAAQ,MAAM,CACvD,KAAS,CACL,GAAI,OAAOA,EAAQ,KAAQ,WACzB,MAAM,IAAI,UAAU,sCAAsC,EAG5D,GAAI,OAAOA,EAAQ,MAAS,WAC1B,MAAM,IAAI,UAAU,uCAAuC,EAG7D2gE,EAASiG,GAAiBF,EAAU1mE,EAAQ,IAAKA,EAAQ,IAAI,CAC9D,CAGD,MAAMwb,EAAQ,CACZ,SAAUxb,EAAQ,SAClB,UAAW,CAAE,EACb,WAAYA,EAAQ,YAAc,CAAE,EACpC,OAAA2gE,EACA,yBAA0B3gE,EAAQ,0BAA4B,QAC9D,UAAWA,EAAQ,gBAAkBA,EAAQ,gBAAiB,EAAG,OACjE,SAAA0mE,EACA,mBAAoB1mE,EAAQ,oBAAsB,GAClD,SAAUA,EAAQ,WAAa,GAC/B,SAAUA,EAAQ,UAAY,GAC9B,OAAQA,EAAQ,QAAU,MAAQmhE,GAAMD,GACxC,sBAAuBlhE,EAAQ,uBAAyB,MACxD,sBAAuBA,EAAQ,wBAA0B,EAC1D,EAEK6I,EAASg+D,GAAIrrD,EAAOirD,EAAM,MAAS,EAGzC,OAAI59D,GAAU,OAAOA,GAAW,SACvBA,EAIF2S,EAAM,OACXirD,EACAjrD,EAAM,SACN,CAAC,SAAU3S,GAAU,MAAS,EAC9B,MACD,CACH,CAcA,SAASg+D,GAAIrrD,EAAO2/C,EAAMv9D,EAAK,CAC7B,GAAIu9D,EAAK,OAAS,UAChB,OAAO5hD,GAAQiC,EAAO2/C,EAAMv9D,CAAG,EAGjC,GAAIu9D,EAAK,OAAS,qBAAuBA,EAAK,OAAS,oBACrD,OAAO2L,GAActrD,EAAO2/C,CAAI,EAGlC,GAAIA,EAAK,OAAS,qBAAuBA,EAAK,OAAS,oBACrD,OAAO4L,GAAcvrD,EAAO2/C,EAAMv9D,CAAG,EAGvC,GAAIu9D,EAAK,OAAS,WAChB,OAAO6L,GAAOxrD,EAAO2/C,CAAI,EAG3B,GAAIA,EAAK,OAAS,OAChB,OAAO1E,GAAKj7C,EAAO2/C,EAAMv9D,CAAG,EAG9B,GAAIu9D,EAAK,OAAS,OAChB,OAAO5tB,GAAK/xB,EAAO2/C,CAAI,CAE3B,CAcA,SAAS5hD,GAAQiC,EAAO2/C,EAAMv9D,EAAK,CACjC,MAAMqpE,EAAezrD,EAAM,OAC3B,IAAIomD,EAASqF,EAET9L,EAAK,QAAQ,YAAW,IAAO,OAAS8L,EAAa,QAAU,SACjErF,EAAST,GACT3lD,EAAM,OAASomD,GAGjBpmD,EAAM,UAAU,KAAK2/C,CAAI,EAEzB,MAAM97D,EAAO6nE,GAAsB1rD,EAAO2/C,EAAK,QAAS,EAAK,EACvD37D,EAAQ2nE,GAAmB3rD,EAAO2/C,CAAI,EAC5C,IAAI1kC,EAAW2wC,GAAe5rD,EAAO2/C,CAAI,EAEzC,OAAIkL,GAAc,IAAIlL,EAAK,OAAO,IAChC1kC,EAAWA,EAAS,OAAO,SAAU4wC,EAAO,CAC1C,OAAO,OAAOA,GAAU,SAAW,CAACjI,GAAWiI,CAAK,EAAI,EAC9D,CAAK,GAGHC,GAAQ9rD,EAAOhc,EAAOH,EAAM87D,CAAI,EAChCoM,GAAY/nE,EAAOi3B,CAAQ,EAG3Bjb,EAAM,UAAU,IAAK,EACrBA,EAAM,OAASyrD,EAERzrD,EAAM,OAAO2/C,EAAM97D,EAAMG,EAAO5B,CAAG,CAC5C,CAYA,SAASkpE,GAActrD,EAAO2/C,EAAM,CAClC,GAAIA,EAAK,MAAQA,EAAK,KAAK,QAAU3/C,EAAM,UAAW,CAEpD,MAAMgsD,EADUrM,EAAK,KAAK,OACC,KAAK,CAAC,EACjCzH,OAAO8T,EAAW,KAIhBhsD,EAAM,UAAU,mBAAmBgsD,EAAW,UAAU,CAE3D,CAEDC,GAAYjsD,EAAO2/C,EAAK,QAAQ,CAClC,CAYA,SAAS6L,GAAOxrD,EAAO2/C,EAAM,CAC3B,GAAIA,EAAK,MAAQA,EAAK,KAAK,QAAU3/C,EAAM,UAEzC,OACEA,EAAM,UAAU,gBAAgB2/C,EAAK,KAAK,MAAM,EAIpDsM,GAAYjsD,EAAO2/C,EAAK,QAAQ,CAClC,CAcA,SAAS4L,GAAcvrD,EAAO2/C,EAAMv9D,EAAK,CACvC,MAAMqpE,EAAezrD,EAAM,OAC3B,IAAIomD,EAASqF,EAET9L,EAAK,OAAS,OAAS8L,EAAa,QAAU,SAChDrF,EAAST,GACT3lD,EAAM,OAASomD,GAGjBpmD,EAAM,UAAU,KAAK2/C,CAAI,EAEzB,MAAM97D,EACJ87D,EAAK,OAAS,KACV3/C,EAAM,SACN0rD,GAAsB1rD,EAAO2/C,EAAK,KAAM,EAAI,EAC5C37D,EAAQkoE,GAAsBlsD,EAAO2/C,CAAI,EACzC1kC,EAAW2wC,GAAe5rD,EAAO2/C,CAAI,EAE3C,OAAAmM,GAAQ9rD,EAAOhc,EAAOH,EAAM87D,CAAI,EAChCoM,GAAY/nE,EAAOi3B,CAAQ,EAG3Bjb,EAAM,UAAU,IAAK,EACrBA,EAAM,OAASyrD,EAERzrD,EAAM,OAAO2/C,EAAM97D,EAAMG,EAAO5B,CAAG,CAC5C,CAcA,SAAS64D,GAAKj7C,EAAO2/C,EAAMv9D,EAAK,CAE9B,MAAM4B,EAAQ,CAAE,EAEhB,OAAA+nE,GAAY/nE,EAAO4nE,GAAe5rD,EAAO2/C,CAAI,CAAC,EAEvC3/C,EAAM,OAAO2/C,EAAM3/C,EAAM,SAAUhc,EAAO5B,CAAG,CACtD,CAYA,SAAS2vC,GAAK5vC,EAAGw9D,EAAM,CACrB,OAAOA,EAAK,KACd,CAgBA,SAASmM,GAAQ9rD,EAAOhc,EAAOH,EAAM87D,EAAM,CAErC,OAAO97D,GAAS,UAAYA,IAASmc,EAAM,UAAYA,EAAM,WAC/Dhc,EAAM,KAAO27D,EAEjB,CAYA,SAASoM,GAAY/nE,EAAOi3B,EAAU,CACpC,GAAIA,EAAS,OAAS,EAAG,CACvB,MAAMp6B,EAAQo6B,EAAS,OAAS,EAAIA,EAAWA,EAAS,CAAC,EAErDp6B,IACFmD,EAAM,SAAWnD,EAEpB,CACH,CAYA,SAASuqE,GAAiBjpE,EAAG6qB,EAAKgB,EAAM,CACtC,OAAOm3C,EAEP,SAASA,EAAOhjE,EAAG0B,EAAMG,EAAO5B,EAAK,CAGnC,MAAMwO,EADmB,MAAM,QAAQ5M,EAAM,QAAQ,EACvBgqB,EAAOhB,EACrC,OAAO5qB,EAAMwO,EAAG/M,EAAMG,EAAO5B,CAAG,EAAIwO,EAAG/M,EAAMG,CAAK,CACnD,CACH,CAUA,SAASmnE,GAAkBD,EAAUiB,EAAQ,CAC3C,OAAOhH,EAEP,SAASA,EAAOxF,EAAM97D,EAAMG,EAAO5B,EAAK,CAEtC,MAAMgqE,EAAmB,MAAM,QAAQpoE,EAAM,QAAQ,EAC/Ci9B,EAAQipC,GAAWvK,CAAI,EAC7B,OAAOwM,EACLtoE,EACAG,EACA5B,EACAgqE,EACA,CACE,aAAcnrC,EAAQA,EAAM,OAAS,EAAI,OACzC,SAAUiqC,EACV,WAAYjqC,EAAQA,EAAM,KAAO,MAClC,EACD,MACD,CACF,CACH,CAYA,SAAS0qC,GAAmB3rD,EAAO2/C,EAAM,CAEvC,MAAM37D,EAAQ,CAAE,EAEhB,IAAIqoE,EAEA3kE,EAEJ,IAAKA,KAAQi4D,EAAK,WAChB,GAAIj4D,IAAS,YAAcijE,GAAI,KAAKhL,EAAK,WAAYj4D,CAAI,EAAG,CAC1D,MAAM2F,EAASi/D,GAAetsD,EAAOtY,EAAMi4D,EAAK,WAAWj4D,CAAI,CAAC,EAEhE,GAAI2F,EAAQ,CACV,KAAM,CAACjL,EAAKvB,CAAK,EAAIwM,EAGnB2S,EAAM,uBACN5d,IAAQ,SACR,OAAOvB,GAAU,UACjBiqE,GAAiB,IAAInL,EAAK,OAAO,EAEjC0M,EAAaxrE,EAEbmD,EAAM5B,CAAG,EAAIvB,CAEhB,CACF,CAGH,GAAIwrE,EAAY,CAEd,MAAMn8B,EAA8BlsC,EAAM,QAAUA,EAAM,MAAQ,IAClEksC,EAAMlwB,EAAM,wBAA0B,MAAQ,aAAe,WAAW,EACtEqsD,CACH,CAED,OAAOroE,CACT,CAYA,SAASkoE,GAAsBlsD,EAAO2/C,EAAM,CAE1C,MAAM37D,EAAQ,CAAE,EAEhB,UAAWogE,KAAazE,EAAK,WAC3B,GAAIyE,EAAU,OAAS,4BACrB,GAAIA,EAAU,MAAQA,EAAU,KAAK,QAAUpkD,EAAM,UAAW,CAE9D,MAAMgsD,EADU5H,EAAU,KAAK,OACJ,KAAK,CAAC,EAC1B4H,EAAW,KAClB,MAAMO,EAAmBP,EAAW,WAC7BO,EAAiB,KACxB,MAAM/oD,EAAW+oD,EAAiB,WAAW,CAAC,EACvC/oD,EAAS,KAEhB,OAAO,OACLxf,EACAgc,EAAM,UAAU,mBAAmBwD,EAAS,QAAQ,CACrD,CACT,MACQyoD,GAAYjsD,EAAO2/C,EAAK,QAAQ,MAE7B,CAEL,MAAMh8D,EAAOygE,EAAU,KAEvB,IAAIvjE,EAEJ,GAAIujE,EAAU,OAAS,OAAOA,EAAU,OAAU,SAChD,GACEA,EAAU,MAAM,MAChBA,EAAU,MAAM,KAAK,QACrBpkD,EAAM,UACN,CAEA,MAAMgsD,EADU5H,EAAU,MAAM,KAAK,OACV,KAAK,CAAC,EAC1B4H,EAAW,KAClBnrE,EAAQmf,EAAM,UAAU,mBAAmBgsD,EAAW,UAAU,CAC1E,MACUC,GAAYjsD,EAAO2/C,EAAK,QAAQ,OAGlC9+D,EAAQujE,EAAU,QAAU,KAAO,GAAOA,EAAU,MAItDpgE,EAAML,CAAI,EAAuC9C,CAClD,CAGH,OAAOmD,CACT,CAYA,SAAS4nE,GAAe5rD,EAAO2/C,EAAM,CAEnC,MAAM1kC,EAAW,CAAE,EACnB,IAAIhf,EAAQ,GAIZ,MAAMuwD,EAAexsD,EAAM,SAAW,IAAI,IAAQ4qD,GAElD,KAAO,EAAE3uD,EAAQ0jD,EAAK,SAAS,QAAQ,CACrC,MAAMkM,EAAQlM,EAAK,SAAS1jD,CAAK,EAEjC,IAAI7Z,EAEJ,GAAI4d,EAAM,SAAU,CAClB,MAAMrc,EACJkoE,EAAM,OAAS,UACXA,EAAM,QACNA,EAAM,OAAS,qBACbA,EAAM,OAAS,oBACfA,EAAM,KACN,OAER,GAAIloE,EAAM,CACR,MAAM8b,EAAQ+sD,EAAa,IAAI7oE,CAAI,GAAK,EACxCvB,EAAMuB,EAAO,IAAM8b,EACnB+sD,EAAa,IAAI7oE,EAAM8b,EAAQ,CAAC,CACjC,CACF,CAED,MAAMpS,EAASg+D,GAAIrrD,EAAO6rD,EAAOzpE,CAAG,EAChCiL,IAAW,QAAW4tB,EAAS,KAAK5tB,CAAM,CAC/C,CAED,OAAO4tB,CACT,CAcA,SAASqxC,GAAetsD,EAAOtY,EAAM7G,EAAO,CAC1C,MAAMwkE,EAAOc,GAAKnmD,EAAM,OAAQtY,CAAI,EAGpC,GACE,EAAA7G,GAAU,MAET,OAAOA,GAAU,UAAY,OAAO,MAAMA,CAAK,GAYlD,IAPI,MAAM,QAAQA,CAAK,IAGrBA,EAAQwkE,EAAK,eAAiBoH,GAAO5rE,CAAK,EAAI6rE,GAAO7rE,CAAK,GAIxDwkE,EAAK,WAAa,QAAS,CAC7B,IAAI2D,EACF,OAAOnoE,GAAU,SAAWA,EAAQ8rE,GAAW3sD,EAAO,OAAOnf,CAAK,CAAC,EAErE,OAAImf,EAAM,wBAA0B,QAClCgpD,EAAc4D,GAA2B5D,CAAW,GAG/C,CAAC,QAASA,CAAW,CAC7B,CAED,MAAO,CACLhpD,EAAM,2BAA6B,SAAWqlD,EAAK,MAC/CU,GAAYV,EAAK,QAAQ,GAAKA,EAAK,SACnCA,EAAK,UACTxkE,CACD,EACH,CAcA,SAAS8rE,GAAW3sD,EAAOnf,EAAO,CAChC,GAAI,CACF,OAAOgsE,GAAUhsE,EAAO,CAAC,YAAa,EAAI,CAAC,CAC5C,OAAQ7E,EAAO,CACd,GAAIgkB,EAAM,mBACR,MAAO,CAAE,EAGX,MAAM8sD,EAA8B9wE,EAC9BG,EAAU,IAAIkuE,GAAa,iCAAkC,CACjE,UAAWrqD,EAAM,UACjB,MAAA8sD,EACA,OAAQ,QACR,OAAQ,0BACd,CAAK,EACD,MAAA3wE,EAAQ,KAAO6jB,EAAM,UAAY,OACjC7jB,EAAQ,IAAM4uE,GAAO,gCAEf5uE,CACP,CACH,CAcA,SAASuvE,GAAsB1rD,EAAOrc,EAAMopE,EAAiB,CAE3D,IAAI1/D,EAEJ,GAAI,CAAC0/D,EACH1/D,EAAS,CAAC,KAAM,UAAW,MAAO1J,CAAI,UAC7BA,EAAK,SAAS,GAAG,EAAG,CAC7B,MAAMqpE,EAAcrpE,EAAK,MAAM,GAAG,EAClC,IAAIsY,EAAQ,GAER0jD,EAEJ,KAAO,EAAE1jD,EAAQ+wD,EAAY,QAAQ,CAEnC,MAAMtlE,EAAOulE,GAAiBD,EAAY/wD,CAAK,CAAC,EAC5C,CAAC,KAAM,aAAc,KAAM+wD,EAAY/wD,CAAK,CAAC,EAC7C,CAAC,KAAM,UAAW,MAAO+wD,EAAY/wD,CAAK,CAAC,EAC/C0jD,EAAOA,EACH,CACE,KAAM,mBACN,OAAQA,EACR,SAAUj4D,EACV,SAAU,GAAQuU,GAASvU,EAAK,OAAS,WACzC,SAAU,EACX,EACDA,CACL,CAGD2F,EAASsyD,CACb,MACItyD,EACE4/D,GAAiBtpE,CAAI,GAAK,CAAC,SAAS,KAAKA,CAAI,EACzC,CAAC,KAAM,aAAY,KAAEA,CAAI,EACzB,CAAC,KAAM,UAAW,MAAOA,CAAI,EAKrC,GAAI0J,EAAO,OAAS,UAAW,CAC7B,MAAM1J,EAAuC0J,EAAO,MACpD,OAAOs9D,GAAI,KAAK3qD,EAAM,WAAYrc,CAAI,EAAIqc,EAAM,WAAWrc,CAAI,EAAIA,CACpE,CAGD,GAAIqc,EAAM,UACR,OAAOA,EAAM,UAAU,mBAAmB3S,CAAM,EAGlD4+D,GAAYjsD,CAAK,CACnB,CAOA,SAASisD,GAAYjsD,EAAOktD,EAAO,CACjC,MAAM/wE,EAAU,IAAIkuE,GAClB,sDACA,CACE,UAAWrqD,EAAM,UACjB,MAAAktD,EACA,OAAQ,aACR,OAAQ,0BACT,CACF,EACD,MAAA/wE,EAAQ,KAAO6jB,EAAM,UAAY,OACjC7jB,EAAQ,IAAM4uE,GAAO,qDAEf5uE,CACR,CAQA,SAASywE,GAA2BO,EAAW,CAE7C,MAAMC,EAAY,CAAE,EAEpB,IAAIvvD,EAEJ,IAAKA,KAAQsvD,EACPxC,GAAI,KAAKwC,EAAWtvD,CAAI,IAC1BuvD,EAAUC,GAA0BxvD,CAAI,CAAC,EAAIsvD,EAAUtvD,CAAI,GAI/D,OAAOuvD,CACT,CAQA,SAASC,GAA0BxvD,EAAM,CACvC,IAAIC,EAAKD,EAAK,QAAQmoD,GAAKsH,EAAM,EAEjC,OAAIxvD,EAAG,MAAM,EAAG,CAAC,IAAM,QAAOA,EAAK,IAAMA,GAClCA,CACT,CAUA,SAASwvD,GAAO7G,EAAI,CAClB,MAAO,IAAMA,EAAG,YAAa,CAC/B,CC1wBO,MAAM8G,GAAgB,CAC3B,OAAQ,CAAC,MAAM,EACf,KAAM,CAAC,aAAc,MAAO,MAAO,GAAG,EACtC,KAAM,CAAC,QAAQ,EACf,WAAY,CAAC,SAAU,OAAO,EAC9B,KAAM,CAAC,IAAK,OAAQ,OAAQ,MAAM,EAClC,KAAM,CAAC,UAAU,EACjB,OAAQ,KACR,SAAU,CAAC,MAAM,EACjB,KAAM,CAAC,IAAK,MAAM,EAClB,OAAQ,CAAC,OAAO,EAChB,IAAK,CACH,QACA,QACA,SACA,MACA,QACA,SACA,SACA,QACA,OACD,CACH,EClBM7J,GAAe,CAAE,EAehB,SAAS8J,GAAS3sE,EAAO2D,EAAS,CACvC,MAAM++D,EAAsBG,GACtB+J,EACJ,OAAOlK,EAAS,iBAAoB,UAChCA,EAAS,gBACT,GACAmK,EACJ,OAAOnK,EAAS,aAAgB,UAAYA,EAAS,YAAc,GAErE,OAAO8H,GAAIxqE,EAAO4sE,EAAiBC,CAAW,CAChD,CAcA,SAASrC,GAAIxqE,EAAO4sE,EAAiBC,EAAa,CAChD,GAAI/N,GAAK9+D,CAAK,EAAG,CACf,GAAI,UAAWA,EACb,OAAOA,EAAM,OAAS,QAAU,CAAC6sE,EAAc,GAAK7sE,EAAM,MAG5D,GAAI4sE,GAAmB,QAAS5sE,GAASA,EAAM,IAC7C,OAAOA,EAAM,IAGf,GAAI,aAAcA,EAChB,OAAO8sE,GAAI9sE,EAAM,SAAU4sE,EAAiBC,CAAW,CAE1D,CAED,OAAI,MAAM,QAAQ7sE,CAAK,EACd8sE,GAAI9sE,EAAO4sE,EAAiBC,CAAW,EAGzC,EACT,CAcA,SAASC,GAAIriB,EAAQmiB,EAAiBC,EAAa,CAEjD,MAAMrgE,EAAS,CAAE,EACjB,IAAI4O,EAAQ,GAEZ,KAAO,EAAEA,EAAQqvC,EAAO,QACtBj+C,EAAO4O,CAAK,EAAIovD,GAAI/f,EAAOrvC,CAAK,EAAGwxD,EAAiBC,CAAW,EAGjE,OAAOrgE,EAAO,KAAK,EAAE,CACvB,CAUA,SAASsyD,GAAK9+D,EAAO,CACnB,MAAO,GAAQA,GAAS,OAAOA,GAAU,SAC3C,CCvGA,MAAMkd,GAAU,SAAS,cAAc,GAAG,EAMnC,SAAS6vD,GAA8B/sE,EAAO,CACnD,MAAMgtE,EAAqB,IAAMhtE,EAAQ,IACzCkd,GAAQ,UAAY8vD,EACpB,MAAMnE,EAAY3rD,GAAQ,YAQ1B,OAGE2rD,EAAU,WAAWA,EAAU,OAAS,CAAC,IAAM,IAC/C7oE,IAAU,QASL6oE,IAAcmE,EAPZ,GAOyCnE,CACpD,CCbO,SAASoE,GAAOC,EAAMxQ,EAAOzqD,EAAQqyB,EAAO,CACjD,MAAMglC,EAAM4D,EAAK,OACjB,IAAIC,EAAa,EAEbC,EAWJ,GARI1Q,EAAQ,EACVA,EAAQ,CAACA,EAAQ4M,EAAM,EAAIA,EAAM5M,EAEjCA,EAAQA,EAAQ4M,EAAMA,EAAM5M,EAE9BzqD,EAASA,EAAS,EAAIA,EAAS,EAG3BqyB,EAAM,OAAS,IACjB8oC,EAAa,MAAM,KAAK9oC,CAAK,EAC7B8oC,EAAW,QAAQ1Q,EAAOzqD,CAAM,EAEhCi7D,EAAK,OAAO,GAAGE,CAAU,MAMzB,KAHIn7D,GAAQi7D,EAAK,OAAOxQ,EAAOzqD,CAAM,EAG9Bk7D,EAAa7oC,EAAM,QACxB8oC,EAAa9oC,EAAM,MAAM6oC,EAAYA,EAAa,GAAK,EACvDC,EAAW,QAAQ1Q,EAAO,CAAC,EAE3BwQ,EAAK,OAAO,GAAGE,CAAU,EACzBD,GAAc,IACdzQ,GAAS,GAGf,CAkBO,SAAS2Q,GAAKH,EAAM5oC,EAAO,CAChC,OAAI4oC,EAAK,OAAS,GAChBD,GAAOC,EAAMA,EAAK,OAAQ,EAAG5oC,CAAK,EAC3B4oC,GAEF5oC,CACT,CCrEA,MAAMgpC,GAAiB,CAAE,EAAC,eAUnB,SAASC,GAAkBC,EAAY,CAE5C,MAAMV,EAAM,CAAE,EACd,IAAI1xD,EAAQ,GAEZ,KAAO,EAAEA,EAAQoyD,EAAW,QAC1BC,GAAgBX,EAAKU,EAAWpyD,CAAK,CAAC,EAGxC,OAAO0xD,CACT,CAYA,SAASW,GAAgBX,EAAKY,EAAW,CAEvC,IAAIC,EAEJ,IAAKA,KAAQD,EAAW,CAGtB,MAAMjtC,GAFQ6sC,GAAe,KAAKR,EAAKa,CAAI,EAAIb,EAAIa,CAAI,EAAI,UAEpCb,EAAIa,CAAI,EAAI,IAE7BntC,EAAQktC,EAAUC,CAAI,EAE5B,IAAIhtE,EAEJ,GAAI6/B,EACF,IAAK7/B,KAAQ6/B,EAAO,CACb8sC,GAAe,KAAK7sC,EAAM9/B,CAAI,IAAG8/B,EAAK9/B,CAAI,EAAI,CAAE,GACrD,MAAMX,EAAQwgC,EAAM7/B,CAAI,EACxBitE,GAEEntC,EAAK9/B,CAAI,EACT,MAAM,QAAQX,CAAK,EAAIA,EAAQA,EAAQ,CAACA,CAAK,EAAI,CAAE,CACpD,CACF,CAEJ,CACH,CAaA,SAAS4tE,GAAWC,EAAUX,EAAM,CAClC,IAAI9xD,EAAQ,GAEZ,MAAM0yD,EAAS,CAAE,EAEjB,KAAO,EAAE1yD,EAAQ8xD,EAAK,SAElBA,EAAK9xD,CAAK,EAAE,MAAQ,QAAUyyD,EAAWC,GAAQ,KAAKZ,EAAK9xD,CAAK,CAAC,EAGrE6xD,GAAOY,EAAU,EAAG,EAAGC,CAAM,CAC/B,CC9EO,SAASC,GAAgC/tE,EAAOugB,EAAM,CAC3D,MAAM5f,EAAO,OAAO,SAASX,EAAOugB,CAAI,EACxC,OAEA5f,EAAO,GAAKA,IAAS,IAAMA,EAAO,IAAMA,EAAO,IAE/CA,EAAO,KAAOA,EAAO,KAErBA,EAAO,OAAUA,EAAO,OAExBA,EAAO,OAAUA,EAAO,QACvBA,EAAO,SAAY,QAAWA,EAAO,SAAY,OAElDA,EAAO,QACE,IAEF,OAAO,cAAcA,CAAI,CAClC,CCZO,SAASqtE,GAAoBhuE,EAAO,CACzC,OAAOA,EAEN,QAAQ,cAAe,GAAG,EAE1B,QAAQ,SAAU,EAAE,EAOpB,YAAW,EAAG,aACjB,CCXO,MAAMiuE,GAAaC,GAAW,UAAU,EAclCC,GAAoBD,GAAW,YAAY,EAuB3CE,GAAaF,GAAW,qBAAqB,EAanD,SAASG,GAAa1tE,EAAM,CACjC,OAGEA,IAAS,OAASA,EAAO,IAAMA,IAAS,IAE5C,CAaO,MAAM2tE,GAAaJ,GAAW,IAAI,EAoB5BK,GAAgBL,GAAW,YAAY,EAevCM,GAAmBN,GAAW,gBAAgB,EAiBpD,SAASO,GAAmB9tE,EAAM,CACvC,OAAOA,IAAS,MAAQA,EAAO,EACjC,CAWO,SAAS+tE,GAA0B/tE,EAAM,CAC9C,OAAOA,IAAS,OAASA,EAAO,GAAKA,IAAS,GAChD,CAiBO,SAASguE,GAAchuE,EAAM,CAClC,OAAOA,IAAS,IAAMA,IAAS,IAAMA,IAAS,EAChD,CAuBO,MAAMiuE,GAAqBV,GAAW,8BAAc,GAsB9CW,GAAoBX,GAAW,IAAI,EAUhD,SAASA,GAAWY,EAAO,CACzB,OAAOzK,EAUP,SAASA,EAAM1jE,EAAM,CACnB,OAAOA,IAAS,MAAQA,EAAO,IAAMmuE,EAAM,KAAK,OAAO,aAAanuE,CAAI,CAAC,CAC1E,CACH,CC7LO,SAASouE,GAAa/uE,EAAO,CAElC,MAAMwM,EAAS,GACf,IAAI4O,EAAQ,GACRshD,EAAQ,EACRsS,EAAO,EACX,KAAO,EAAE5zD,EAAQpb,EAAM,QAAQ,CAC7B,MAAMW,EAAOX,EAAM,WAAWob,CAAK,EAEnC,IAAI6zD,EAAU,GAGd,GAAItuE,IAAS,IAAMwtE,GAAkBnuE,EAAM,WAAWob,EAAQ,CAAC,CAAC,GAAK+yD,GAAkBnuE,EAAM,WAAWob,EAAQ,CAAC,CAAC,EAChH4zD,EAAO,UAGAruE,EAAO,IACT,oBAAoB,KAAK,OAAO,aAAaA,CAAI,CAAC,IACrDsuE,EAAU,OAAO,aAAatuE,CAAI,WAI7BA,EAAO,OAAUA,EAAO,MAAQ,CACvC,MAAMuuE,EAAOlvE,EAAM,WAAWob,EAAQ,CAAC,EAGnCza,EAAO,OAAUuuE,EAAO,OAAUA,EAAO,OAC3CD,EAAU,OAAO,aAAatuE,EAAMuuE,CAAI,EACxCF,EAAO,GAIPC,EAAU,GAEb,MAGCA,EAAU,OAAO,aAAatuE,CAAI,EAEhCsuE,IACFziE,EAAO,KAAKxM,EAAM,MAAM08D,EAAOthD,CAAK,EAAG,mBAAmB6zD,CAAO,CAAC,EAClEvS,EAAQthD,EAAQ4zD,EAAO,EACvBC,EAAU,IAERD,IACF5zD,GAAS4zD,EACTA,EAAO,EAEV,CACD,OAAOxiE,EAAO,KAAK,EAAE,EAAIxM,EAAM,MAAM08D,CAAK,CAC5C,CClEO,SAASyS,GAAaC,EAASC,EAAIrsE,EAAM+qB,EAAK,CACnD,MAAMuhD,EAAQvhD,EAAMA,EAAM,EAAI,OAAO,kBACrC,IAAIgjB,EAAO,EACX,OAAO2rB,EAGP,SAASA,EAAM/7D,EAAM,CACnB,OAAIguE,GAAchuE,CAAI,GACpByuE,EAAQ,MAAMpsE,CAAI,EACX6f,EAAOliB,CAAI,GAEb0uE,EAAG1uE,CAAI,CACf,CAGD,SAASkiB,EAAOliB,EAAM,CACpB,OAAIguE,GAAchuE,CAAI,GAAKowC,IAASu+B,GAClCF,EAAQ,QAAQzuE,CAAI,EACbkiB,IAETusD,EAAQ,KAAKpsE,CAAI,EACVqsE,EAAG1uE,CAAI,EACf,CACH,CClDO,MAAMq9B,GAAU,CACrB,SAAUuxC,EACZ,EAQA,SAASA,GAAkBH,EAAS,CAClC,MAAMI,EAAeJ,EAAQ,QAAQ,KAAK,OAAO,WAAW,eAAgBK,EAA4BC,CAAgB,EAExH,IAAIxiC,EACJ,OAAOsiC,EAGP,SAASC,EAA2B9uE,EAAM,CACxC,GAAIA,IAAS,KAAM,CACjByuE,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBD,GAAaC,EAASI,EAAc,YAAY,CACxD,CAGD,SAASE,EAAiB/uE,EAAM,CAC9B,OAAAyuE,EAAQ,MAAM,WAAW,EAClBO,EAAUhvE,CAAI,CACtB,CAGD,SAASgvE,EAAUhvE,EAAM,CACvB,MAAMivE,EAAQR,EAAQ,MAAM,YAAa,CACvC,YAAa,OACb,SAAAliC,CACN,CAAK,EACD,OAAIA,IACFA,EAAS,KAAO0iC,GAElB1iC,EAAW0iC,EACJ5uE,EAAKL,CAAI,CACjB,CAGD,SAASK,EAAKL,EAAM,CAClB,GAAIA,IAAS,KAAM,CACjByuE,EAAQ,KAAK,WAAW,EACxBA,EAAQ,KAAK,WAAW,EACxBA,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAI8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,WAAW,EACjBO,IAITP,EAAQ,QAAQzuE,CAAI,EACbK,EACR,CACH,CCvDO,MAAM6uE,GAAW,CACtB,SAAUC,EACZ,EAGMC,GAAqB,CACzB,SAAUC,EACZ,EAQA,SAASF,GAAmBV,EAAS,CACnC,MAAMa,EAAO,KAEP10E,EAAQ,GACd,IAAI20E,EAAY,EAEZC,EAEAC,EAEAC,EACJ,OAAO3T,EAGP,SAASA,EAAM/7D,EAAM,CAWnB,GAAIuvE,EAAY30E,EAAM,OAAQ,CAC5B,MAAMgpC,EAAOhpC,EAAM20E,CAAS,EAC5B,OAAAD,EAAK,eAAiB1rC,EAAK,CAAC,EACrB6qC,EAAQ,QAAQ7qC,EAAK,CAAC,EAAE,aAAc+rC,EAAkBC,CAAkB,EAAE5vE,CAAI,CACxF,CAGD,OAAO4vE,EAAmB5vE,CAAI,CAC/B,CAGD,SAAS2vE,EAAiB3vE,EAAM,CAM9B,GALAuvE,IAKID,EAAK,eAAe,WAAY,CAClCA,EAAK,eAAe,WAAa,OAC7BE,GACFK,IAKF,MAAMC,EAAmBR,EAAK,OAAO,OACrC,IAAIS,EAAkBD,EAElBrwC,EAGJ,KAAOswC,KACL,GAAIT,EAAK,OAAOS,CAAe,EAAE,CAAC,IAAM,QAAUT,EAAK,OAAOS,CAAe,EAAE,CAAC,EAAE,OAAS,YAAa,CACtGtwC,EAAQ6vC,EAAK,OAAOS,CAAe,EAAE,CAAC,EAAE,IACxC,KACD,CAEHC,EAAeT,CAAS,EAGxB,IAAI90D,EAAQq1D,EACZ,KAAOr1D,EAAQ60D,EAAK,OAAO,QACzBA,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,IAAM,CAC1B,GAAGglB,CACb,EACQhlB,IAIF,OAAA6xD,GAAOgD,EAAK,OAAQS,EAAkB,EAAG,EAAGT,EAAK,OAAO,MAAMQ,CAAgB,CAAC,EAG/ER,EAAK,OAAO,OAAS70D,EACdm1D,EAAmB5vE,CAAI,CAC/B,CACD,OAAO+7D,EAAM/7D,CAAI,CAClB,CAGD,SAAS4vE,EAAmB5vE,EAAM,CAMhC,GAAIuvE,IAAc30E,EAAM,OAAQ,CAI9B,GAAI,CAAC40E,EACH,OAAOS,EAAkBjwE,CAAI,EAM/B,GAAIwvE,EAAU,kBAAoBA,EAAU,iBAAiB,SAC3D,OAAOU,EAAUlwE,CAAI,EAQvBsvE,EAAK,UAAY,GAAQE,EAAU,kBAAoB,CAACA,EAAU,8BACnE,CAGD,OAAAF,EAAK,eAAiB,GACfb,EAAQ,MAAMW,GAAoBe,EAAsBC,CAAqB,EAAEpwE,CAAI,CAC3F,CAGD,SAASmwE,EAAqBnwE,EAAM,CAClC,OAAIwvE,GAAWK,IACfG,EAAeT,CAAS,EACjBU,EAAkBjwE,CAAI,CAC9B,CAGD,SAASowE,EAAsBpwE,EAAM,CACnC,OAAAsvE,EAAK,OAAO,KAAKA,EAAK,MAAM,IAAI,EAAIC,IAAc30E,EAAM,OACxD80E,EAAkBJ,EAAK,IAAK,EAAC,OACtBY,EAAUlwE,CAAI,CACtB,CAGD,SAASiwE,EAAkBjwE,EAAM,CAE/B,OAAAsvE,EAAK,eAAiB,GACfb,EAAQ,QAAQW,GAAoBiB,EAAmBH,CAAS,EAAElwE,CAAI,CAC9E,CAGD,SAASqwE,EAAkBrwE,EAAM,CAC/B,OAAAuvE,IACA30E,EAAM,KAAK,CAAC00E,EAAK,iBAAkBA,EAAK,cAAc,CAAC,EAEhDW,EAAkBjwE,CAAI,CAC9B,CAGD,SAASkwE,EAAUlwE,EAAM,CACvB,GAAIA,IAAS,KAAM,CACbwvE,GAAWK,IACfG,EAAe,CAAC,EAChBvB,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAAwvE,EAAYA,GAAaF,EAAK,OAAO,KAAKA,EAAK,IAAG,CAAE,EACpDb,EAAQ,MAAM,YAAa,CACzB,WAAYe,EACZ,YAAa,OACb,SAAUC,CAChB,CAAK,EACMa,EAAatwE,CAAI,CACzB,CAGD,SAASswE,EAAatwE,EAAM,CAC1B,GAAIA,IAAS,KAAM,CACjBuwE,EAAa9B,EAAQ,KAAK,WAAW,EAAG,EAAI,EAC5CuB,EAAe,CAAC,EAChBvB,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAI8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,QAAQzuE,CAAI,EACpBuwE,EAAa9B,EAAQ,KAAK,WAAW,CAAC,EAEtCc,EAAY,EACZD,EAAK,UAAY,OACVvT,IAET0S,EAAQ,QAAQzuE,CAAI,EACbswE,EACR,CAUD,SAASC,EAAatB,EAAOuB,EAAW,CACtC,MAAMC,EAASnB,EAAK,YAAYL,CAAK,EAyCrC,GAxCIuB,GAAWC,EAAO,KAAK,IAAI,EAC/BxB,EAAM,SAAWQ,EACbA,IAAYA,EAAW,KAAOR,GAClCQ,EAAaR,EACbO,EAAU,WAAWP,EAAM,KAAK,EAChCO,EAAU,MAAMiB,CAAM,EAmClBnB,EAAK,OAAO,KAAKL,EAAM,MAAM,IAAI,EAAG,CACtC,IAAIx0D,EAAQ+0D,EAAU,OAAO,OAC7B,KAAO/0D,KACL,GAEA+0D,EAAU,OAAO/0D,CAAK,EAAE,CAAC,EAAE,MAAM,OAASi1D,IAE1C,CAACF,EAAU,OAAO/0D,CAAK,EAAE,CAAC,EAAE,KAE5B+0D,EAAU,OAAO/0D,CAAK,EAAE,CAAC,EAAE,IAAI,OAASi1D,GAGtC,OAMJ,MAAMI,EAAmBR,EAAK,OAAO,OACrC,IAAIS,EAAkBD,EAElBY,EAEAjxC,EAGJ,KAAOswC,KACL,GAAIT,EAAK,OAAOS,CAAe,EAAE,CAAC,IAAM,QAAUT,EAAK,OAAOS,CAAe,EAAE,CAAC,EAAE,OAAS,YAAa,CACtG,GAAIW,EAAM,CACRjxC,EAAQ6vC,EAAK,OAAOS,CAAe,EAAE,CAAC,EAAE,IACxC,KACD,CACDW,EAAO,EACR,CAMH,IAJAV,EAAeT,CAAS,EAGxB90D,EAAQq1D,EACDr1D,EAAQ60D,EAAK,OAAO,QACzBA,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,IAAM,CAC1B,GAAGglB,CACb,EACQhlB,IAIF6xD,GAAOgD,EAAK,OAAQS,EAAkB,EAAG,EAAGT,EAAK,OAAO,MAAMQ,CAAgB,CAAC,EAG/ER,EAAK,OAAO,OAAS70D,CACtB,CACF,CAQD,SAASu1D,EAAe5/B,EAAM,CAC5B,IAAI31B,EAAQ7f,EAAM,OAGlB,KAAO6f,KAAU21B,GAAM,CACrB,MAAMl+B,EAAQtX,EAAM6f,CAAK,EACzB60D,EAAK,eAAiBp9D,EAAM,CAAC,EAC7BA,EAAM,CAAC,EAAE,KAAK,KAAKo9D,EAAMb,CAAO,CACjC,CACD7zE,EAAM,OAASw1C,CAChB,CACD,SAASy/B,GAAY,CACnBL,EAAU,MAAM,CAAC,IAAI,CAAC,EACtBC,EAAa,OACbD,EAAY,OACZF,EAAK,eAAe,WAAa,MAClC,CACH,CAQA,SAASD,GAAkBZ,EAASC,EAAIiC,EAAK,CAG3C,OAAOnC,GAAaC,EAASA,EAAQ,QAAQ,KAAK,OAAO,WAAW,SAAUC,EAAIiC,CAAG,EAAG,aAAc,KAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAC,CACpL,CCtVO,SAASC,GAAkB5wE,EAAM,CACtC,GAAIA,IAAS,MAAQ+tE,GAA0B/tE,CAAI,GAAKkuE,GAAkBluE,CAAI,EAC5E,MAAO,GAET,GAAIiuE,GAAmBjuE,CAAI,EACzB,MAAO,EAEX,CCVO,SAAS6wE,GAAW5D,EAAYl6B,EAAQrlB,EAAS,CAEtD,MAAMojD,EAAS,CAAE,EACjB,IAAIr2D,EAAQ,GAEZ,KAAO,EAAEA,EAAQwyD,EAAW,QAAQ,CAClC,MAAM/tE,EAAU+tE,EAAWxyD,CAAK,EAAE,WAE9Bvb,GAAW,CAAC4xE,EAAO,SAAS5xE,CAAO,IACrC6zC,EAAS7zC,EAAQ6zC,EAAQrlB,CAAO,EAChCojD,EAAO,KAAK5xE,CAAO,EAEtB,CAED,OAAO6zC,CACT,CCbO,MAAMg+B,GAAY,CACvB,KAAM,YACN,WAAYC,GACZ,SAAUC,EACZ,EAQA,SAASD,GAAoBj+B,EAAQrlB,EAAS,CAC5C,IAAIjT,EAAQ,GAERsE,EAEAwG,EAEAgrB,EAEA2gC,EAEAC,EAEAC,EAEAC,EAEAC,EAMJ,KAAO,EAAE72D,EAAQs4B,EAAO,QAEtB,GAAIA,EAAOt4B,CAAK,EAAE,CAAC,IAAM,SAAWs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,qBAAuBs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,QAIpG,IAHAsE,EAAOtE,EAGAsE,KAEL,GAAIg0B,EAAOh0B,CAAI,EAAE,CAAC,IAAM,QAAUg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,OAAS,qBAAuBg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,OAElG2O,EAAQ,eAAeqlB,EAAOh0B,CAAI,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,IAAM2O,EAAQ,eAAeqlB,EAAOt4B,CAAK,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,EAAG,CAKhH,IAAKs4B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,QAAUg0B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,SAAWs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,IAAI,OAASs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAM,QAAU,GAAK,GAAGs4B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,IAAI,OAASg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,MAAM,OAASg0B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,IAAI,OAASs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAM,QAAU,GAC3P,SAIF22D,EAAMr+B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,IAAI,OAASg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,MAAM,OAAS,GAAKg0B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,IAAI,OAASs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAM,OAAS,EAAI,EAAI,EAC7I,MAAMshD,EAAQ,CACZ,GAAGhpB,EAAOh0B,CAAI,EAAE,CAAC,EAAE,GAC/B,EACgB4pD,EAAM,CACV,GAAG51B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,KAChC,EACU82D,GAAUxV,EAAO,CAACqV,CAAG,EACrBG,GAAU5I,EAAKyI,CAAG,EAClBF,EAAkB,CAChB,KAAME,EAAM,EAAI,iBAAmB,mBACnC,MAAArV,EACA,IAAK,CACH,GAAGhpB,EAAOh0B,CAAI,EAAE,CAAC,EAAE,GACpB,CACb,EACUoyD,EAAkB,CAChB,KAAMC,EAAM,EAAI,iBAAmB,mBACnC,MAAO,CACL,GAAGr+B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,KACrB,EACD,IAAAkuD,CACZ,EACUp4B,EAAO,CACL,KAAM6gC,EAAM,EAAI,aAAe,eAC/B,MAAO,CACL,GAAGr+B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,GACpB,EACD,IAAK,CACH,GAAGg0B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,KACrB,CACb,EACU8K,EAAQ,CACN,KAAM6rD,EAAM,EAAI,SAAW,WAC3B,MAAO,CACL,GAAGF,EAAgB,KACpB,EACD,IAAK,CACH,GAAGC,EAAgB,GACpB,CACb,EACUp+B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,IAAM,CACpB,GAAGmyD,EAAgB,KAC/B,EACUn+B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAQ,CACvB,GAAG02D,EAAgB,GAC/B,EACUE,EAAa,GAGTt+B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,IAAI,OAASg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,MAAM,SACrDsyD,EAAa3E,GAAK2E,EAAY,CAAC,CAAC,QAASt+B,EAAOh0B,CAAI,EAAE,CAAC,EAAG2O,CAAO,EAAG,CAAC,OAAQqlB,EAAOh0B,CAAI,EAAE,CAAC,EAAG2O,CAAO,CAAC,CAAC,GAIzG2jD,EAAa3E,GAAK2E,EAAY,CAAC,CAAC,QAAS9rD,EAAOmI,CAAO,EAAG,CAAC,QAASwjD,EAAiBxjD,CAAO,EAAG,CAAC,OAAQwjD,EAAiBxjD,CAAO,EAAG,CAAC,QAAS6iB,EAAM7iB,CAAO,CAAC,CAAC,EAK5J2jD,EAAa3E,GAAK2E,EAAYR,GAAWnjD,EAAQ,OAAO,WAAW,WAAW,KAAMqlB,EAAO,MAAMh0B,EAAO,EAAGtE,CAAK,EAAGiT,CAAO,CAAC,EAG3H2jD,EAAa3E,GAAK2E,EAAY,CAAC,CAAC,OAAQ9gC,EAAM7iB,CAAO,EAAG,CAAC,QAASyjD,EAAiBzjD,CAAO,EAAG,CAAC,OAAQyjD,EAAiBzjD,CAAO,EAAG,CAAC,OAAQnI,EAAOmI,CAAO,CAAC,CAAC,EAGtJqlB,EAAOt4B,CAAK,EAAE,CAAC,EAAE,IAAI,OAASs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAM,QACvD62D,EAAS,EACTD,EAAa3E,GAAK2E,EAAY,CAAC,CAAC,QAASt+B,EAAOt4B,CAAK,EAAE,CAAC,EAAGiT,CAAO,EAAG,CAAC,OAAQqlB,EAAOt4B,CAAK,EAAE,CAAC,EAAGiT,CAAO,CAAC,CAAC,GAEzG4jD,EAAS,EAEXhF,GAAOv5B,EAAQh0B,EAAO,EAAGtE,EAAQsE,EAAO,EAAGsyD,CAAU,EACrD52D,EAAQsE,EAAOsyD,EAAW,OAASC,EAAS,EAC5C,KACD,EAOP,IADA72D,EAAQ,GACD,EAAEA,EAAQs4B,EAAO,QAClBA,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,sBAC5Bs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,KAAO,QAG5B,OAAOs4B,CACT,CAOA,SAASk+B,GAAkBxC,EAASC,EAAI,CACtC,MAAM8C,EAAmB,KAAK,OAAO,WAAW,iBAAiB,KAC3DjlC,EAAW,KAAK,SAChB4gC,EAASyD,GAAkBrkC,CAAQ,EAGzC,IAAIklC,EACJ,OAAO1V,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyxE,EAASzxE,EACTyuE,EAAQ,MAAM,mBAAmB,EAC1BzuC,EAAOhgC,CAAI,CACnB,CAYD,SAASggC,EAAOhgC,EAAM,CACpB,GAAIA,IAASyxE,EACX,OAAAhD,EAAQ,QAAQzuE,CAAI,EACbggC,EAET,MAAMivC,EAAQR,EAAQ,KAAK,mBAAmB,EAGxCiD,EAAQd,GAAkB5wE,CAAI,EAI9B+e,EAAO,CAAC2yD,GAASA,IAAU,GAAKvE,GAAUqE,EAAiB,SAASxxE,CAAI,EACxE2xE,EAAQ,CAACxE,GAAUA,IAAW,GAAKuE,GAASF,EAAiB,SAASjlC,CAAQ,EACpF,OAAA0iC,EAAM,MAAQ,GAAQwC,IAAW,GAAK1yD,EAAOA,IAASouD,GAAU,CAACwE,IACjE1C,EAAM,OAAS,GAAQwC,IAAW,GAAKE,EAAQA,IAAUD,GAAS,CAAC3yD,IAC5D2vD,EAAG1uE,CAAI,CACf,CACH,CAeA,SAASuxE,GAAU9xC,EAAO6xC,EAAQ,CAChC7xC,EAAM,QAAU6xC,EAChB7xC,EAAM,QAAU6xC,EAChB7xC,EAAM,cAAgB6xC,CACxB,CCrOO,MAAMM,GAAW,CACtB,KAAM,WACN,SAAUC,EACZ,EAOA,SAASA,GAAiBpD,EAASC,EAAIiC,EAAK,CAC1C,IAAIvgC,EAAO,EACX,OAAO2rB,EAcP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EAC7BA,EAAQ,MAAM,kBAAkB,EACzB1vD,CACR,CAcD,SAASA,EAAK/e,EAAM,CAClB,OAAIstE,GAAWttE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACb8xE,GAEL9xE,IAAS,GACJ2wE,EAAI3wE,CAAI,EAEV+xE,EAAW/xE,CAAI,CACvB,CAcD,SAAS8xE,EAAmB9xE,EAAM,CAEhC,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GAErEowC,EAAO,EACA4hC,EAAyBhyE,CAAI,GAE/B+xE,EAAW/xE,CAAI,CACvB,CAcD,SAASgyE,EAAyBhyE,EAAM,CACtC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBowC,EAAO,EACA6hC,IAIJjyE,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMwtE,GAAkBxtE,CAAI,IAAMowC,IAAS,IACrFq+B,EAAQ,QAAQzuE,CAAI,EACbgyE,IAET5hC,EAAO,EACA2hC,EAAW/xE,CAAI,EACvB,CAYD,SAASiyE,EAAUjyE,EAAM,CACvB,OAAIA,IAAS,IACXyuE,EAAQ,KAAK,kBAAkB,EAC/BA,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EAC7BA,EAAQ,KAAK,UAAU,EAChBC,GAIL1uE,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM0tE,GAAa1tE,CAAI,EAC3D2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACbiyE,EACR,CAYD,SAASF,EAAW/xE,EAAM,CACxB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbkyE,GAELzE,GAAWztE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACb+xE,GAEFpB,EAAI3wE,CAAI,CAChB,CAYD,SAASkyE,EAAiBlyE,EAAM,CAC9B,OAAOwtE,GAAkBxtE,CAAI,EAAImyE,EAAWnyE,CAAI,EAAI2wE,EAAI3wE,CAAI,CAC7D,CAYD,SAASmyE,EAAWnyE,EAAM,CACxB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBowC,EAAO,EACA8hC,GAELlyE,IAAS,IAEXyuE,EAAQ,KAAK,kBAAkB,EAAE,KAAO,gBACxCA,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EAC7BA,EAAQ,KAAK,UAAU,EAChBC,GAEF0D,EAAWpyE,CAAI,CACvB,CAcD,SAASoyE,EAAWpyE,EAAM,CAExB,IAAKA,IAAS,IAAMwtE,GAAkBxtE,CAAI,IAAMowC,IAAS,GAAI,CAC3D,MAAMm+B,EAAOvuE,IAAS,GAAKoyE,EAAaD,EACxC,OAAA1D,EAAQ,QAAQzuE,CAAI,EACbuuE,CACR,CACD,OAAOoC,EAAI3wE,CAAI,CAChB,CACH,CC5NO,MAAMqyE,GAAY,CACvB,QAAS,GACT,SAAUC,EACZ,EAOA,SAASA,GAAkB7D,EAASC,EAAIiC,EAAK,CAC3C,OAAO5U,EAgBP,SAASA,EAAM/7D,EAAM,CACnB,OAAOguE,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASiD,EAAO,YAAY,EAAE1xE,CAAI,EAAI0xE,EAAM1xE,CAAI,CAC3F,CAgBD,SAAS0xE,EAAM1xE,EAAM,CACnB,OAAOA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EAAI0uE,EAAG1uE,CAAI,EAAI2wE,EAAI3wE,CAAI,CACvE,CACH,CC/CO,MAAMuyE,GAAa,CACxB,aAAc,CACZ,SAAUC,EACX,EACD,KAAAC,GACA,KAAM,aACN,SAAUC,EACZ,EAOA,SAASA,GAAwBjE,EAASC,EAAIiC,EAAK,CACjD,MAAMrB,EAAO,KACb,OAAOvT,EAYP,SAASA,EAAM/7D,EAAM,CACnB,GAAIA,IAAS,GAAI,CACf,MAAMwe,EAAQ8wD,EAAK,eACnB,OAAK9wD,EAAM,OACTiwD,EAAQ,MAAM,aAAc,CAC1B,WAAY,EACtB,CAAS,EACDjwD,EAAM,KAAO,IAEfiwD,EAAQ,MAAM,kBAAkB,EAChCA,EAAQ,MAAM,kBAAkB,EAChCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,kBAAkB,EACxBiD,CACR,CACD,OAAOf,EAAI3wE,CAAI,CAChB,CAYD,SAAS0xE,EAAM1xE,EAAM,CACnB,OAAIguE,GAAchuE,CAAI,GACpByuE,EAAQ,MAAM,4BAA4B,EAC1CA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,4BAA4B,EACzCA,EAAQ,KAAK,kBAAkB,EACxBC,IAETD,EAAQ,KAAK,kBAAkB,EACxBC,EAAG1uE,CAAI,EACf,CACH,CAeA,SAASwyE,GAA+B/D,EAASC,EAAIiC,EAAK,CACxD,MAAMrB,EAAO,KACb,OAAOqD,EAeP,SAASA,EAAU3yE,EAAM,CACvB,OAAIguE,GAAchuE,CAAI,EAGbwuE,GAAaC,EAASmE,EAAY,aAActD,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAC,EAAEtvE,CAAI,EAEpI4yE,EAAW5yE,CAAI,CACvB,CAeD,SAAS4yE,EAAW5yE,EAAM,CACxB,OAAOyuE,EAAQ,QAAQ8D,GAAY7D,EAAIiC,CAAG,EAAE3wE,CAAI,CACjD,CACH,CAGA,SAASyyE,GAAKhE,EAAS,CACrBA,EAAQ,KAAK,YAAY,CAC3B,CCnIO,MAAMoE,GAAkB,CAC7B,KAAM,kBACN,SAAUC,EACZ,EAOA,SAASA,GAAwBrE,EAASC,EAAIiC,EAAK,CACjD,OAAO5U,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,MAAM,cAAc,EAC5BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,cAAc,EACpBzuC,CACR,CAYD,SAASA,EAAOhgC,EAAM,CAEpB,OAAI6tE,GAAiB7tE,CAAI,GACvByuE,EAAQ,MAAM,sBAAsB,EACpCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,sBAAsB,EACnCA,EAAQ,KAAK,iBAAiB,EACvBC,GAEFiC,EAAI3wE,CAAI,CAChB,CACH,CClDO,MAAMqsE,GAAqB,CAChC,KAAM,qBACN,SAAU0G,EACZ,EAOA,SAASA,GAA2BtE,EAASC,EAAIiC,EAAK,CACpD,MAAMrB,EAAO,KACb,IAAIl/B,EAAO,EAEPhjB,EAEA4lD,EACJ,OAAOjX,EAgBP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,oBAAoB,EAClCA,EAAQ,MAAM,0BAA0B,EACxCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,0BAA0B,EAChC1vD,CACR,CAiBD,SAASA,EAAK/e,EAAM,CAClB,OAAIA,IAAS,IACXyuE,EAAQ,MAAM,iCAAiC,EAC/CA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,iCAAiC,EACvCwE,IAETxE,EAAQ,MAAM,yBAAyB,EACvCrhD,EAAM,GACN4lD,EAAOxF,GACAnuE,EAAMW,CAAI,EAClB,CAcD,SAASizE,EAAQjzE,EAAM,CACrB,OAAIA,IAAS,IAAMA,IAAS,KAC1ByuE,EAAQ,MAAM,qCAAqC,EACnDA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,qCAAqC,EAClDA,EAAQ,MAAM,yBAAyB,EACvCrhD,EAAM,EACN4lD,EAAOpF,GACAvuE,IAETovE,EAAQ,MAAM,yBAAyB,EACvCrhD,EAAM,EACN4lD,EAAOrF,GACAtuE,EAAMW,CAAI,EAClB,CAmBD,SAASX,EAAMW,EAAM,CACnB,GAAIA,IAAS,IAAMowC,EAAM,CACvB,MAAM6+B,EAAQR,EAAQ,KAAK,yBAAyB,EACpD,OAAIuE,IAASxF,IAAqB,CAACpB,GAA8BkD,EAAK,eAAeL,CAAK,CAAC,EAClF0B,EAAI3wE,CAAI,GAKjByuE,EAAQ,MAAM,0BAA0B,EACxCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,0BAA0B,EACvCA,EAAQ,KAAK,oBAAoB,EAC1BC,EACR,CACD,OAAIsE,EAAKhzE,CAAI,GAAKowC,IAAShjB,GACzBqhD,EAAQ,QAAQzuE,CAAI,EACbX,GAEFsxE,EAAI3wE,CAAI,CAChB,CACH,CCvIA,MAAMkzE,GAAsB,CAC1B,QAAS,GACT,SAAUC,EACZ,EAGaC,GAAa,CACxB,SAAU,GACV,KAAM,aACN,SAAUC,EACZ,EAOA,SAASA,GAAmB5E,EAASC,EAAIiC,EAAK,CAC5C,MAAMrB,EAAO,KAEPgE,EAAa,CACjB,QAAS,GACT,SAAUC,CACd,EACE,IAAIC,EAAgB,EAChBC,EAAW,EAEXhC,EACJ,OAAO1V,EAcP,SAASA,EAAM/7D,EAAM,CAEnB,OAAO0zE,EAAmB1zE,CAAI,CAC/B,CAcD,SAAS0zE,EAAmB1zE,EAAM,CAChC,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,OAAAkE,EAAgBG,GAAQA,EAAK,CAAC,EAAE,OAAS,aAAeA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,OAAS,EACvGlC,EAASzxE,EACTyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,MAAM,yBAAyB,EAChCmF,EAAa5zE,CAAI,CACzB,CAcD,SAAS4zE,EAAa5zE,EAAM,CAC1B,OAAIA,IAASyxE,GACXgC,IACAhF,EAAQ,QAAQzuE,CAAI,EACb4zE,GAELH,EAAW,EACN9C,EAAI3wE,CAAI,GAEjByuE,EAAQ,KAAK,yBAAyB,EAC/BT,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASoF,EAAY,YAAY,EAAE7zE,CAAI,EAAI6zE,EAAW7zE,CAAI,EACrG,CAcD,SAAS6zE,EAAW7zE,EAAM,CACxB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,iBAAiB,EACvBa,EAAK,UAAYZ,EAAG1uE,CAAI,EAAIyuE,EAAQ,MAAMyE,GAAqBY,EAAgBpC,CAAK,EAAE1xE,CAAI,IAEnGyuE,EAAQ,MAAM,qBAAqB,EACnCA,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACM5K,EAAK7jE,CAAI,EACjB,CAcD,SAAS6jE,EAAK7jE,EAAM,CAClB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,qBAAqB,EAC3BoF,EAAW7zE,CAAI,GAEpBguE,GAAchuE,CAAI,GACpByuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,qBAAqB,EAC3BD,GAAaC,EAASsF,EAAY,YAAY,EAAE/zE,CAAI,GAEzDA,IAAS,IAAMA,IAASyxE,EACnBd,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACb6jE,EACR,CAcD,SAASkQ,EAAW/zE,EAAM,CACxB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EACnC6zE,EAAW7zE,CAAI,GAExByuE,EAAQ,MAAM,qBAAqB,EACnCA,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACMuF,EAAKh0E,CAAI,EACjB,CAcD,SAASg0E,EAAKh0E,EAAM,CAClB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,qBAAqB,EAC3BoF,EAAW7zE,CAAI,GAEpBA,IAAS,IAAMA,IAASyxE,EACnBd,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACbg0E,EACR,CAeD,SAASF,EAAe9zE,EAAM,CAC5B,OAAOyuE,EAAQ,QAAQ6E,EAAY5B,EAAOuC,CAAa,EAAEj0E,CAAI,CAC9D,CAcD,SAASi0E,EAAcj0E,EAAM,CAC3B,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBI,CACR,CAcD,SAASA,EAAa7uE,EAAM,CAC1B,OAAOwzE,EAAgB,GAAKxF,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASyF,EAAoB,aAAcV,EAAgB,CAAC,EAAExzE,CAAI,EAAIk0E,EAAmBl0E,CAAI,CAC7J,CAcD,SAASk0E,EAAmBl0E,EAAM,CAChC,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EACnCyuE,EAAQ,MAAMyE,GAAqBY,EAAgBpC,CAAK,EAAE1xE,CAAI,GAEvEyuE,EAAQ,MAAM,eAAe,EACtB0F,EAAan0E,CAAI,EACzB,CAcD,SAASm0E,EAAan0E,EAAM,CAC1B,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,eAAe,EACrByF,EAAmBl0E,CAAI,IAEhCyuE,EAAQ,QAAQzuE,CAAI,EACbm0E,EACR,CAcD,SAASzC,EAAM1xE,EAAM,CACnB,OAAAyuE,EAAQ,KAAK,YAAY,EAClBC,EAAG1uE,CAAI,CACf,CAOD,SAASuzE,EAAmB9E,EAASC,EAAIiC,EAAK,CAC5C,IAAIvgC,EAAO,EACX,OAAOgkC,EAOP,SAASA,EAAYp0E,EAAM,CACzB,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClB1S,CACR,CAcD,SAASA,EAAM/7D,EAAM,CAInB,OAAAyuE,EAAQ,MAAM,iBAAiB,EACxBT,GAAchuE,CAAI,EAAIwuE,GAAaC,EAAS4F,EAAqB,aAAc/E,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAC,EAAEtvE,CAAI,EAAIq0E,EAAoBr0E,CAAI,CACrM,CAcD,SAASq0E,EAAoBr0E,EAAM,CACjC,OAAIA,IAASyxE,GACXhD,EAAQ,MAAM,yBAAyB,EAChC6F,EAAct0E,CAAI,GAEpB2wE,EAAI3wE,CAAI,CAChB,CAcD,SAASs0E,EAAct0E,EAAM,CAC3B,OAAIA,IAASyxE,GACXrhC,IACAq+B,EAAQ,QAAQzuE,CAAI,EACbs0E,GAELlkC,GAAQqjC,GACVhF,EAAQ,KAAK,yBAAyB,EAC/BT,GAAchuE,CAAI,EAAIwuE,GAAaC,EAAS8F,EAAoB,YAAY,EAAEv0E,CAAI,EAAIu0E,EAAmBv0E,CAAI,GAE/G2wE,EAAI3wE,CAAI,CAChB,CAcD,SAASu0E,EAAmBv0E,EAAM,CAChC,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,iBAAiB,EACvBC,EAAG1uE,CAAI,GAET2wE,EAAI3wE,CAAI,CAChB,CACF,CACH,CAOA,SAASmzE,GAA4B1E,EAASC,EAAIiC,EAAK,CACrD,MAAMrB,EAAO,KACb,OAAOvT,EAOP,SAASA,EAAM/7D,EAAM,CACnB,OAAIA,IAAS,KACJ2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBO,EACR,CAOD,SAASA,EAAUhvE,EAAM,CACvB,OAAOsvE,EAAK,OAAO,KAAKA,EAAK,IAAK,EAAC,IAAI,EAAIqB,EAAI3wE,CAAI,EAAI0uE,EAAG1uE,CAAI,CAC/D,CACH,CC/bO,MAAMw0E,GAAe,CAC1B,KAAM,eACN,SAAUC,EACZ,EAGMC,GAAe,CACnB,QAAS,GACT,SAAUC,EACZ,EAOA,SAASF,GAAqBhG,EAASC,EAAIiC,EAAK,CAC9C,MAAMrB,EAAO,KACb,OAAOvT,EAgBP,SAASA,EAAM/7D,EAAM,CAGnB,OAAAyuE,EAAQ,MAAM,cAAc,EAGrBD,GAAaC,EAASmG,EAAa,aAAc,CAAK,EAAE50E,CAAI,CACpE,CAYD,SAAS40E,EAAY50E,EAAM,CACzB,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,OAAOqE,GAAQA,EAAK,CAAC,EAAE,OAAS,cAAgBA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,QAAU,EAAIkB,EAAQ70E,CAAI,EAAI2wE,EAAI3wE,CAAI,CAC7H,CAYD,SAAS60E,EAAQ70E,EAAM,CACrB,OAAIA,IAAS,KACJ0xE,EAAM1xE,CAAI,EAEf8tE,GAAmB9tE,CAAI,EAClByuE,EAAQ,QAAQiG,GAAcG,EAASnD,CAAK,EAAE1xE,CAAI,GAE3DyuE,EAAQ,MAAM,eAAe,EACtBzuC,EAAOhgC,CAAI,EACnB,CAYD,SAASggC,EAAOhgC,EAAM,CACpB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,eAAe,EACrBoG,EAAQ70E,CAAI,IAErByuE,EAAQ,QAAQzuE,CAAI,EACbggC,EACR,CAGD,SAAS0xC,EAAM1xE,EAAM,CACnB,OAAAyuE,EAAQ,KAAK,cAAc,EAIpBC,EAAG1uE,CAAI,CACf,CACH,CAOA,SAAS20E,GAAqBlG,EAASC,EAAIiC,EAAK,CAC9C,MAAMrB,EAAO,KACb,OAAOoF,EAaP,SAASA,EAAa10E,EAAM,CAG1B,OAAIsvE,EAAK,OAAO,KAAKA,EAAK,IAAG,EAAG,IAAI,EAC3BqB,EAAI3wE,CAAI,EAEb8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBiG,GASFlG,GAAaC,EAASmG,EAAa,aAAc,CAAK,EAAE50E,CAAI,CACpE,CAYD,SAAS40E,EAAY50E,EAAM,CACzB,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,OAAOqE,GAAQA,EAAK,CAAC,EAAE,OAAS,cAAgBA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,QAAU,EAAIjF,EAAG1uE,CAAI,EAAI8tE,GAAmB9tE,CAAI,EAAI00E,EAAa10E,CAAI,EAAI2wE,EAAI3wE,CAAI,CACxK,CACH,CClKO,MAAM80E,GAAW,CACtB,KAAM,WACN,SAAAvoC,GACA,QAASwoC,GACT,SAAUC,EACZ,EAIA,SAASD,GAAgBhiC,EAAQ,CAC/B,IAAIkiC,EAAgBliC,EAAO,OAAS,EAChCmiC,EAAiB,EAEjBz6D,EAEA06D,EAGJ,IAAKpiC,EAAOmiC,CAAc,EAAE,CAAC,EAAE,OAAS,cAAgBniC,EAAOmiC,CAAc,EAAE,CAAC,EAAE,OAAS,WAAaniC,EAAOkiC,CAAa,EAAE,CAAC,EAAE,OAAS,cAAgBliC,EAAOkiC,CAAa,EAAE,CAAC,EAAE,OAAS,UAI1L,IAHAx6D,EAAQy6D,EAGD,EAAEz6D,EAAQw6D,GACf,GAAIliC,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,eAAgB,CAE5Cs4B,EAAOmiC,CAAc,EAAE,CAAC,EAAE,KAAO,kBACjCniC,EAAOkiC,CAAa,EAAE,CAAC,EAAE,KAAO,kBAChCC,GAAkB,EAClBD,GAAiB,EACjB,KACD,EAOL,IAFAx6D,EAAQy6D,EAAiB,EACzBD,IACO,EAAEx6D,GAASw6D,GACZE,IAAU,OACR16D,IAAUw6D,GAAiBliC,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,eACvD06D,EAAQ16D,IAEDA,IAAUw6D,GAAiBliC,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,gBAC9Ds4B,EAAOoiC,CAAK,EAAE,CAAC,EAAE,KAAO,eACpB16D,IAAU06D,EAAQ,IACpBpiC,EAAOoiC,CAAK,EAAE,CAAC,EAAE,IAAMpiC,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,IAC5Cs4B,EAAO,OAAOoiC,EAAQ,EAAG16D,EAAQ06D,EAAQ,CAAC,EAC1CF,GAAiBx6D,EAAQ06D,EAAQ,EACjC16D,EAAQ06D,EAAQ,GAElBA,EAAQ,QAGZ,OAAOpiC,CACT,CAOA,SAASxG,GAASvsC,EAAM,CAEtB,OAAOA,IAAS,IAAM,KAAK,OAAO,KAAK,OAAO,OAAS,CAAC,EAAE,CAAC,EAAE,OAAS,iBACxE,CAOA,SAASg1E,GAAiBvG,EAASC,EAAIiC,EAAK,CAE1C,IAAI8C,EAAW,EAEXrjC,EAEA6+B,EACJ,OAAOlT,EAcP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,kBAAkB,EACzBmF,EAAa5zE,CAAI,CACzB,CAYD,SAAS4zE,EAAa5zE,EAAM,CAC1B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpByzE,IACOG,IAETnF,EAAQ,KAAK,kBAAkB,EACxB2G,EAAQp1E,CAAI,EACpB,CAYD,SAASo1E,EAAQp1E,EAAM,CAErB,OAAIA,IAAS,KACJ2wE,EAAI3wE,CAAI,EAMbA,IAAS,IACXyuE,EAAQ,MAAM,OAAO,EACrBA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,OAAO,EACb2G,GAILp1E,IAAS,IACXivE,EAAQR,EAAQ,MAAM,kBAAkB,EACxCr+B,EAAO,EACAkkC,EAAct0E,CAAI,GAEvB8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClB2G,IAIT3G,EAAQ,MAAM,cAAc,EACrBpuE,EAAKL,CAAI,EACjB,CAYD,SAASK,EAAKL,EAAM,CAClB,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM8tE,GAAmB9tE,CAAI,GACxEyuE,EAAQ,KAAK,cAAc,EACpB2G,EAAQp1E,CAAI,IAErByuE,EAAQ,QAAQzuE,CAAI,EACbK,EACR,CAYD,SAASi0E,EAAct0E,EAAM,CAE3B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBowC,IACOkkC,GAILlkC,IAASqjC,GACXhF,EAAQ,KAAK,kBAAkB,EAC/BA,EAAQ,KAAK,UAAU,EAChBC,EAAG1uE,CAAI,IAIhBivE,EAAM,KAAO,eACN5uE,EAAKL,CAAI,EACjB,CACH,CCnMO,MAAMq1E,EAAa,CAOxB,YAAYC,EAAS,CAEnB,KAAK,KAAOA,EAAU,CAAC,GAAGA,CAAO,EAAI,GAErC,KAAK,MAAQ,EACd,CAWD,IAAI76D,EAAO,CACT,GAAIA,EAAQ,GAAKA,GAAS,KAAK,KAAK,OAAS,KAAK,MAAM,OACtD,MAAM,IAAI,WAAW,wBAA0BA,EAAQ,kCAAoC,KAAK,KAAK,OAAS,KAAK,MAAM,QAAU,GAAG,EAExI,OAAIA,EAAQ,KAAK,KAAK,OAAe,KAAK,KAAKA,CAAK,EAC7C,KAAK,MAAM,KAAK,MAAM,OAASA,EAAQ,KAAK,KAAK,OAAS,CAAC,CACnE,CAMD,IAAI,QAAS,CACX,OAAO,KAAK,KAAK,OAAS,KAAK,MAAM,MACtC,CASD,OAAQ,CACN,YAAK,UAAU,CAAC,EACT,KAAK,MAAM,KACnB,CAaD,MAAMshD,EAAO4M,EAAK,CAEhB,MAAM4M,EAAO5M,GAAoC,OAAO,kBACxD,OAAI4M,EAAO,KAAK,KAAK,OACZ,KAAK,KAAK,MAAMxZ,EAAOwZ,CAAI,EAEhCxZ,EAAQ,KAAK,KAAK,OACb,KAAK,MAAM,MAAM,KAAK,MAAM,OAASwZ,EAAO,KAAK,KAAK,OAAQ,KAAK,MAAM,OAASxZ,EAAQ,KAAK,KAAK,MAAM,EAAE,UAE9G,KAAK,KAAK,MAAMA,CAAK,EAAE,OAAO,KAAK,MAAM,MAAM,KAAK,MAAM,OAASwZ,EAAO,KAAK,KAAK,MAAM,EAAE,QAAO,CAAE,CAC7G,CAsBD,OAAOxZ,EAAOyZ,EAAa7xC,EAAO,CAEhC,MAAM1lB,EAAQu3D,GAAe,EAC7B,KAAK,UAAU,KAAK,MAAMzZ,CAAK,CAAC,EAChC,MAAM0Z,EAAU,KAAK,MAAM,OAAO,KAAK,MAAM,OAASx3D,EAAO,OAAO,iBAAiB,EACrF,OAAI0lB,GAAO+xC,GAAY,KAAK,KAAM/xC,CAAK,EAChC8xC,EAAQ,SAChB,CAUD,KAAM,CACJ,YAAK,UAAU,OAAO,iBAAiB,EAChC,KAAK,KAAK,KAClB,CAWD,KAAK7xC,EAAM,CACT,KAAK,UAAU,OAAO,iBAAiB,EACvC,KAAK,KAAK,KAAKA,CAAI,CACpB,CAWD,SAASD,EAAO,CACd,KAAK,UAAU,OAAO,iBAAiB,EACvC+xC,GAAY,KAAK,KAAM/xC,CAAK,CAC7B,CAWD,QAAQC,EAAM,CACZ,KAAK,UAAU,CAAC,EAChB,KAAK,MAAM,KAAKA,CAAI,CACrB,CAWD,YAAYD,EAAO,CACjB,KAAK,UAAU,CAAC,EAChB+xC,GAAY,KAAK,MAAO/xC,EAAM,QAAS,EACxC,CAcD,UAAUrkB,EAAG,CACX,GAAI,EAAAA,IAAM,KAAK,KAAK,QAAUA,EAAI,KAAK,KAAK,QAAU,KAAK,MAAM,SAAW,GAAKA,EAAI,GAAK,KAAK,KAAK,SAAW,GAC/G,GAAIA,EAAI,KAAK,KAAK,OAAQ,CAExB,MAAMm2D,EAAU,KAAK,KAAK,OAAOn2D,EAAG,OAAO,iBAAiB,EAC5Do2D,GAAY,KAAK,MAAOD,EAAQ,QAAS,EAC/C,KAAW,CAEL,MAAMA,EAAU,KAAK,MAAM,OAAO,KAAK,KAAK,OAAS,KAAK,MAAM,OAASn2D,EAAG,OAAO,iBAAiB,EACpGo2D,GAAY,KAAK,KAAMD,EAAQ,QAAS,EACzC,CACF,CACH,CAcA,SAASC,GAAYnJ,EAAM1sC,EAAO,CAEhC,IAAI2sC,EAAa,EACjB,GAAI3sC,EAAM,OAAS,IACjB0sC,EAAK,KAAK,GAAG1sC,CAAK,MAElB,MAAO2sC,EAAa3sC,EAAM,QACxB0sC,EAAK,KAAK,GAAG1sC,EAAM,MAAM2sC,EAAYA,EAAa,GAAK,CAAC,EACxDA,GAAc,GAGpB,CCvOO,SAASmJ,GAAYC,EAAa,CAEvC,MAAMC,EAAQ,GACd,IAAIp7D,EAAQ,GAERxe,EAEA65E,EAEAC,EAEAC,EAEAvJ,EAEAwJ,EAEAC,EACJ,MAAMnjC,EAAS,IAAIsiC,GAAaO,CAAW,EAC3C,KAAO,EAAEn7D,EAAQs4B,EAAO,QAAQ,CAC9B,KAAOt4B,KAASo7D,GACdp7D,EAAQo7D,EAAMp7D,CAAK,EAMrB,GAJAxe,EAAQ82C,EAAO,IAAIt4B,CAAK,EAIpBA,GAASxe,EAAM,CAAC,EAAE,OAAS,aAAe82C,EAAO,IAAIt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,OAAS,mBAC9Ew7D,EAAYh6E,EAAM,CAAC,EAAE,WAAW,OAChC85E,EAAa,EACTA,EAAaE,EAAU,QAAUA,EAAUF,CAAU,EAAE,CAAC,EAAE,OAAS,oBACrEA,GAAc,GAEZA,EAAaE,EAAU,QAAUA,EAAUF,CAAU,EAAE,CAAC,EAAE,OAAS,WACrE,KAAO,EAAEA,EAAaE,EAAU,QAC1BA,EAAUF,CAAU,EAAE,CAAC,EAAE,OAAS,WAGlCE,EAAUF,CAAU,EAAE,CAAC,EAAE,OAAS,cACpCE,EAAUF,CAAU,EAAE,CAAC,EAAE,4BAA8B,GACvDA,KAOR,GAAI95E,EAAM,CAAC,IAAM,QACXA,EAAM,CAAC,EAAE,cACX,OAAO,OAAO45E,EAAOM,GAAWpjC,EAAQt4B,CAAK,CAAC,EAC9CA,EAAQo7D,EAAMp7D,CAAK,EACnBy7D,EAAO,YAIFj6E,EAAM,CAAC,EAAE,WAAY,CAG5B,IAFA85E,EAAat7D,EACbq7D,EAAY,OACLC,KAEL,GADAC,EAAajjC,EAAO,IAAIgjC,CAAU,EAC9BC,EAAW,CAAC,EAAE,OAAS,cAAgBA,EAAW,CAAC,EAAE,OAAS,kBAC5DA,EAAW,CAAC,IAAM,UAChBF,IACF/iC,EAAO,IAAI+iC,CAAS,EAAE,CAAC,EAAE,KAAO,mBAElCE,EAAW,CAAC,EAAE,KAAO,aACrBF,EAAYC,WAEL,EAAAC,EAAW,CAAC,EAAE,OAAS,cAAgBA,EAAW,CAAC,EAAE,OAAS,kBAGvE,MAGAF,IAEF75E,EAAM,CAAC,EAAE,IAAM,CACb,GAAG82C,EAAO,IAAI+iC,CAAS,EAAE,CAAC,EAAE,KACtC,EAGQrJ,EAAa15B,EAAO,MAAM+iC,EAAWr7D,CAAK,EAC1CgyD,EAAW,QAAQxwE,CAAK,EACxB82C,EAAO,OAAO+iC,EAAWr7D,EAAQq7D,EAAY,EAAGrJ,CAAU,EAE7D,CACF,CAGD,OAAAH,GAAOsJ,EAAa,EAAG,OAAO,kBAAmB7iC,EAAO,MAAM,CAAC,CAAC,EACzD,CAACmjC,CACV,CAYA,SAASC,GAAWpjC,EAAQqjC,EAAY,CACtC,MAAMnH,EAAQl8B,EAAO,IAAIqjC,CAAU,EAAE,CAAC,EAChC1oD,EAAUqlB,EAAO,IAAIqjC,CAAU,EAAE,CAAC,EACxC,IAAIC,EAAgBD,EAAa,EAEjC,MAAME,EAAiB,GACvB,IAAIC,EAAYtH,EAAM,WACjBsH,IACHA,EAAY7oD,EAAQ,OAAOuhD,EAAM,WAAW,EAAEA,EAAM,KAAK,EACrDA,EAAM,2BACRsH,EAAU,yBAA2B,KAGzC,MAAMC,EAAcD,EAAU,OAExBV,EAAQ,GAERY,EAAO,GAEb,IAAIhG,EAEAlkC,EACA9xB,EAAQ,GAERkqC,EAAUsqB,EACVyH,EAAS,EACT3a,EAAQ,EACZ,MAAM4a,EAAS,CAAC5a,CAAK,EAIrB,KAAOpX,GAAS,CAEd,KAAO5R,EAAO,IAAI,EAAEsjC,CAAa,EAAE,CAAC,IAAM1xB,GAAS,CAGnD2xB,EAAe,KAAKD,CAAa,EAC5B1xB,EAAQ,aACX8rB,EAAS/iD,EAAQ,YAAYi3B,CAAO,EAC/BA,EAAQ,MACX8rB,EAAO,KAAK,IAAI,EAEdlkC,GACFgqC,EAAU,WAAW5xB,EAAQ,KAAK,EAEhCA,EAAQ,8BACV4xB,EAAU,mCAAqC,IAEjDA,EAAU,MAAM9F,CAAM,EAClB9rB,EAAQ,8BACV4xB,EAAU,mCAAqC,SAKnDhqC,EAAWoY,EACXA,EAAUA,EAAQ,IACnB,CAKD,IADAA,EAAUsqB,EACH,EAAEx0D,EAAQ+7D,EAAY,QAG3BA,EAAY/7D,CAAK,EAAE,CAAC,IAAM,QAAU+7D,EAAY/7D,EAAQ,CAAC,EAAE,CAAC,IAAM,SAAW+7D,EAAY/7D,CAAK,EAAE,CAAC,EAAE,OAAS+7D,EAAY/7D,EAAQ,CAAC,EAAE,CAAC,EAAE,MAAQ+7D,EAAY/7D,CAAK,EAAE,CAAC,EAAE,MAAM,OAAS+7D,EAAY/7D,CAAK,EAAE,CAAC,EAAE,IAAI,OAC3MshD,EAAQthD,EAAQ,EAChBk8D,EAAO,KAAK5a,CAAK,EAEjBpX,EAAQ,WAAa,OACrBA,EAAQ,SAAW,OACnBA,EAAUA,EAAQ,MAqBtB,IAhBA4xB,EAAU,OAAS,GAKf5xB,GAEFA,EAAQ,WAAa,OACrBA,EAAQ,SAAW,QAEnBgyB,EAAO,IAAG,EAKZl8D,EAAQk8D,EAAO,OACRl8D,KAAS,CACd,MAAMm8D,EAAQJ,EAAY,MAAMG,EAAOl8D,CAAK,EAAGk8D,EAAOl8D,EAAQ,CAAC,CAAC,EAC1DshD,EAAQua,EAAe,MAC7BT,EAAM,KAAK,CAAC9Z,EAAOA,EAAQ6a,EAAM,OAAS,CAAC,CAAC,EAC5C7jC,EAAO,OAAOgpB,EAAO,EAAG6a,CAAK,CAC9B,CAGD,IAFAf,EAAM,QAAO,EACbp7D,EAAQ,GACD,EAAEA,EAAQo7D,EAAM,QACrBY,EAAKC,EAASb,EAAMp7D,CAAK,EAAE,CAAC,CAAC,EAAIi8D,EAASb,EAAMp7D,CAAK,EAAE,CAAC,EACxDi8D,GAAUb,EAAMp7D,CAAK,EAAE,CAAC,EAAIo7D,EAAMp7D,CAAK,EAAE,CAAC,EAAI,EAEhD,OAAOg8D,CACT,CCjNO,MAAMp5C,GAAU,CACrB,QAASw5C,GACT,SAAUC,EACZ,EAGMC,GAAwB,CAC5B,QAAS,GACT,SAAUC,EACZ,EAQA,SAASH,GAAe9jC,EAAQ,CAC9B,OAAA4iC,GAAY5iC,CAAM,EACXA,CACT,CAOA,SAAS+jC,GAAgBrI,EAASC,EAAI,CAEpC,IAAIniC,EACJ,OAAOigC,EAYP,SAASA,EAAWxsE,EAAM,CACxB,OAAAyuE,EAAQ,MAAM,SAAS,EACvBliC,EAAWkiC,EAAQ,MAAM,eAAgB,CACvC,YAAa,SACnB,CAAK,EACMwI,EAAYj3E,CAAI,CACxB,CAYD,SAASi3E,EAAYj3E,EAAM,CACzB,OAAIA,IAAS,KACJk3E,EAAWl3E,CAAI,EAKpB8tE,GAAmB9tE,CAAI,EAClByuE,EAAQ,MAAMsI,GAAuBI,EAAiBD,CAAU,EAAEl3E,CAAI,GAI/EyuE,EAAQ,QAAQzuE,CAAI,EACbi3E,EACR,CAOD,SAASC,EAAWl3E,EAAM,CACxB,OAAAyuE,EAAQ,KAAK,cAAc,EAC3BA,EAAQ,KAAK,SAAS,EACfC,EAAG1uE,CAAI,CACf,CAOD,SAASm3E,EAAgBn3E,EAAM,CAC7B,OAAAyuE,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,cAAc,EAC3BliC,EAAS,KAAOkiC,EAAQ,MAAM,eAAgB,CAC5C,YAAa,UACb,SAAAliC,CACN,CAAK,EACDA,EAAWA,EAAS,KACb0qC,CACR,CACH,CAOA,SAASD,GAAqBvI,EAASC,EAAIiC,EAAK,CAC9C,MAAMrB,EAAO,KACb,OAAO8H,EAOP,SAASA,EAAep3E,EAAM,CAC5B,OAAAyuE,EAAQ,KAAK,cAAc,EAC3BA,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBD,GAAaC,EAAS4I,EAAU,YAAY,CACpD,CAOD,SAASA,EAASr3E,EAAM,CACtB,GAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EAC1C,OAAO2wE,EAAI3wE,CAAI,EAKjB,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,MAAI,CAACA,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,GAAKqE,GAAQA,EAAK,CAAC,EAAE,OAAS,cAAgBA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,QAAU,EACrJjF,EAAG1uE,CAAI,EAETyuE,EAAQ,UAAUa,EAAK,OAAO,WAAW,KAAMqB,EAAKjC,CAAE,EAAE1uE,CAAI,CACpE,CACH,CCxHO,SAASs3E,GAAmB7I,EAASC,EAAIiC,EAAKtuE,EAAMk1E,EAAaC,EAAmBC,EAASC,EAAYtqD,EAAK,CACnH,MAAMuhD,EAAQvhD,GAAO,OAAO,kBAC5B,IAAIuqD,EAAU,EACd,OAAO5b,EAcP,SAASA,EAAM/7D,EAAM,CACnB,OAAIA,IAAS,IACXyuE,EAAQ,MAAMpsE,CAAI,EAClBosE,EAAQ,MAAM8I,CAAW,EACzB9I,EAAQ,MAAM+I,CAAiB,EAC/B/I,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK+I,CAAiB,EACvBI,GAIL53E,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM0tE,GAAa1tE,CAAI,EAC3D2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,MAAMpsE,CAAI,EAClBosE,EAAQ,MAAMgJ,CAAO,EACrBhJ,EAAQ,MAAMiJ,CAAU,EACxBjJ,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACMoJ,EAAI73E,CAAI,EAChB,CAYD,SAAS43E,EAAe53E,EAAM,CAC5B,OAAIA,IAAS,IACXyuE,EAAQ,MAAM+I,CAAiB,EAC/B/I,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK+I,CAAiB,EAC9B/I,EAAQ,KAAK8I,CAAW,EACxB9I,EAAQ,KAAKpsE,CAAI,EACVqsE,IAETD,EAAQ,MAAMiJ,CAAU,EACxBjJ,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACMqJ,EAAS93E,CAAI,EACrB,CAYD,SAAS83E,EAAS93E,EAAM,CACtB,OAAIA,IAAS,IACXyuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAKiJ,CAAU,EAChBE,EAAe53E,CAAI,GAExBA,IAAS,MAAQA,IAAS,IAAM8tE,GAAmB9tE,CAAI,EAClD2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACbA,IAAS,GAAK+3E,EAAiBD,EACvC,CAYD,SAASC,EAAe/3E,EAAM,CAC5B,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IACzCyuE,EAAQ,QAAQzuE,CAAI,EACb83E,GAEFA,EAAS93E,CAAI,CACrB,CAYD,SAAS63E,EAAI73E,EAAM,CACjB,MAAI,CAAC23E,IAAY33E,IAAS,MAAQA,IAAS,IAAM+tE,GAA0B/tE,CAAI,IAC7EyuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAKiJ,CAAU,EACvBjJ,EAAQ,KAAKgJ,CAAO,EACpBhJ,EAAQ,KAAKpsE,CAAI,EACVqsE,EAAG1uE,CAAI,GAEZ23E,EAAUhJ,GAAS3uE,IAAS,IAC9ByuE,EAAQ,QAAQzuE,CAAI,EACpB23E,IACOE,GAEL73E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpB23E,IACOE,GAML73E,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM0tE,GAAa1tE,CAAI,EAC3D2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACbA,IAAS,GAAKg4E,EAAYH,EAClC,CAYD,SAASG,EAAUh4E,EAAM,CACvB,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IACzCyuE,EAAQ,QAAQzuE,CAAI,EACb63E,GAEFA,EAAI73E,CAAI,CAChB,CACH,CCpKO,SAASi4E,GAAaxJ,EAASC,EAAIiC,EAAKtuE,EAAM61E,EAAYR,EAAY,CAC3E,MAAMpI,EAAO,KACb,IAAIl/B,EAAO,EAEPsgC,EACJ,OAAO3U,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAMpsE,CAAI,EAClBosE,EAAQ,MAAMyJ,CAAU,EACxBzJ,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAKyJ,CAAU,EACvBzJ,EAAQ,MAAMiJ,CAAU,EACjB7C,CACR,CAYD,SAASA,EAAQ70E,EAAM,CACrB,OAAIowC,EAAO,KAAOpwC,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM,CAAC0wE,GAMlE1wE,IAAS,IAAM,CAACowC,GAAQ,2BAA4Bk/B,EAAK,OAAO,WACvDqB,EAAI3wE,CAAI,EAEbA,IAAS,IACXyuE,EAAQ,KAAKiJ,CAAU,EACvBjJ,EAAQ,MAAMyJ,CAAU,EACxBzJ,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAKyJ,CAAU,EACvBzJ,EAAQ,KAAKpsE,CAAI,EACVqsE,GAILZ,GAAmB9tE,CAAI,GACzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBoG,IAETpG,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACM0J,EAAYn4E,CAAI,EACxB,CAYD,SAASm4E,EAAYn4E,EAAM,CACzB,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM8tE,GAAmB9tE,CAAI,GAAKowC,IAAS,KACtFq+B,EAAQ,KAAK,aAAa,EACnBoG,EAAQ70E,CAAI,IAErByuE,EAAQ,QAAQzuE,CAAI,EACf0wE,IAAMA,EAAO,CAAC1C,GAAchuE,CAAI,GAC9BA,IAAS,GAAKo4E,EAAcD,EACpC,CAYD,SAASC,EAAYp4E,EAAM,CACzB,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IACzCyuE,EAAQ,QAAQzuE,CAAI,EACpBowC,IACO+nC,GAEFA,EAAYn4E,CAAI,CACxB,CACH,CCzGO,SAASq4E,GAAa5J,EAASC,EAAIiC,EAAKtuE,EAAM61E,EAAYR,EAAY,CAE3E,IAAIjG,EACJ,OAAO1V,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IACzCyuE,EAAQ,MAAMpsE,CAAI,EAClBosE,EAAQ,MAAMyJ,CAAU,EACxBzJ,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAKyJ,CAAU,EACvBzG,EAASzxE,IAAS,GAAK,GAAKA,EACrBs4E,GAEF3H,EAAI3wE,CAAI,CAChB,CAcD,SAASs4E,EAAMt4E,EAAM,CACnB,OAAIA,IAASyxE,GACXhD,EAAQ,MAAMyJ,CAAU,EACxBzJ,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAKyJ,CAAU,EACvBzJ,EAAQ,KAAKpsE,CAAI,EACVqsE,IAETD,EAAQ,MAAMiJ,CAAU,EACjB7C,EAAQ70E,CAAI,EACpB,CAYD,SAAS60E,EAAQ70E,EAAM,CACrB,OAAIA,IAASyxE,GACXhD,EAAQ,KAAKiJ,CAAU,EAChBY,EAAM7G,CAAM,GAEjBzxE,IAAS,KACJ2wE,EAAI3wE,CAAI,EAIb8tE,GAAmB9tE,CAAI,GAEzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBD,GAAaC,EAASoG,EAAS,YAAY,IAEpDpG,EAAQ,MAAM,cAAe,CAC3B,YAAa,QACnB,CAAK,EACMzuC,EAAOhgC,CAAI,EACnB,CAOD,SAASggC,EAAOhgC,EAAM,CACpB,OAAIA,IAASyxE,GAAUzxE,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC7DyuE,EAAQ,KAAK,aAAa,EACnBoG,EAAQ70E,CAAI,IAErByuE,EAAQ,QAAQzuE,CAAI,EACbA,IAAS,GAAKu4E,EAASv4C,EAC/B,CAYD,SAASu4C,EAAOv4E,EAAM,CACpB,OAAIA,IAASyxE,GAAUzxE,IAAS,IAC9ByuE,EAAQ,QAAQzuE,CAAI,EACbggC,GAEFA,EAAOhgC,CAAI,CACnB,CACH,CCrIO,SAASw4E,GAAkB/J,EAASC,EAAI,CAE7C,IAAIgC,EACJ,OAAO3U,EAGP,SAASA,EAAM/7D,EAAM,CACnB,OAAI8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EACzBiC,EAAO,GACA3U,GAELiS,GAAchuE,CAAI,EACbwuE,GAAaC,EAAS1S,EAAO2U,EAAO,aAAe,YAAY,EAAE1wE,CAAI,EAEvE0uE,EAAG1uE,CAAI,CACf,CACH,CC1BO,MAAM0iE,GAAa,CACxB,KAAM,aACN,SAAU+V,EACZ,EAGMC,GAAc,CAClB,QAAS,GACT,SAAUC,EACZ,EAOA,SAASF,GAAmBhK,EAASC,EAAIiC,EAAK,CAC5C,MAAMrB,EAAO,KAEb,IAAI1sE,EACJ,OAAOm5D,EAYP,SAASA,EAAM/7D,EAAM,CAInB,OAAAyuE,EAAQ,MAAM,YAAY,EACnBtB,EAAOntE,CAAI,CACnB,CAYD,SAASmtE,EAAOntE,EAAM,CAGpB,OAAOi4E,GAAa,KAAK3I,EAAMb,EAASmK,EAExCjI,EAAK,kBAAmB,wBAAyB,uBAAuB,EAAE3wE,CAAI,CAC/E,CAYD,SAAS44E,EAAW54E,EAAM,CAExB,OADA4C,EAAayqE,GAAoBiC,EAAK,eAAeA,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAG,EAAE,CAAC,EACrGtvE,IAAS,IACXyuE,EAAQ,MAAM,kBAAkB,EAChCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,kBAAkB,EACxBoK,GAEFlI,EAAI3wE,CAAI,CAChB,CAYD,SAAS64E,EAAY74E,EAAM,CAEzB,OAAO+tE,GAA0B/tE,CAAI,EAAIw4E,GAAkB/J,EAASqK,CAAiB,EAAE94E,CAAI,EAAI84E,EAAkB94E,CAAI,CACtH,CAYD,SAAS84E,EAAkB94E,EAAM,CAC/B,OAAOs3E,GAAmB7I,EAASsK,EAEnCpI,EAAK,wBAAyB,+BAAgC,qCAAsC,2BAA4B,6BAA6B,EAAE3wE,CAAI,CACpK,CAYD,SAAS+4E,EAAiB/4E,EAAM,CAC9B,OAAOyuE,EAAQ,QAAQiK,GAAahH,EAAOA,CAAK,EAAE1xE,CAAI,CACvD,CAcD,SAAS0xE,EAAM1xE,EAAM,CACnB,OAAOguE,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASuK,EAAiB,YAAY,EAAEh5E,CAAI,EAAIg5E,EAAgBh5E,CAAI,CAC/G,CAcD,SAASg5E,EAAgBh5E,EAAM,CAC7B,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,YAAY,EAKzBa,EAAK,OAAO,QAAQ,KAAK1sE,CAAU,EAK5B8rE,EAAG1uE,CAAI,GAET2wE,EAAI3wE,CAAI,CAChB,CACH,CAOA,SAAS24E,GAAoBlK,EAASC,EAAIiC,EAAK,CAC7C,OAAO+H,EAcP,SAASA,EAAY14E,EAAM,CACzB,OAAO+tE,GAA0B/tE,CAAI,EAAIw4E,GAAkB/J,EAASwK,CAAY,EAAEj5E,CAAI,EAAI2wE,EAAI3wE,CAAI,CACnG,CAaD,SAASi5E,EAAaj5E,EAAM,CAC1B,OAAOq4E,GAAa5J,EAASyK,EAAYvI,EAAK,kBAAmB,wBAAyB,uBAAuB,EAAE3wE,CAAI,CACxH,CAYD,SAASk5E,EAAWl5E,EAAM,CACxB,OAAOguE,GAAchuE,CAAI,EAAIwuE,GAAaC,EAAS0K,EAA8B,YAAY,EAAEn5E,CAAI,EAAIm5E,EAA6Bn5E,CAAI,CACzI,CAYD,SAASm5E,EAA6Bn5E,EAAM,CAC1C,OAAOA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EAAI0uE,EAAG1uE,CAAI,EAAI2wE,EAAI3wE,CAAI,CACvE,CACH,CClPO,MAAMo5E,GAAkB,CAC7B,KAAM,kBACN,SAAUC,EACZ,EAOA,SAASA,GAAwB5K,EAASC,EAAIiC,EAAK,CACjD,OAAO5U,EAaP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,QAAQzuE,CAAI,EACb0xE,CACR,CAaD,SAASA,EAAM1xE,EAAM,CACnB,OAAI8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,KAAK,iBAAiB,EACvBC,EAAG1uE,CAAI,GAET2wE,EAAI3wE,CAAI,CAChB,CACH,CC5CO,MAAMs5E,GAAa,CACxB,KAAM,aACN,QAASC,GACT,SAAUC,EACZ,EAGA,SAASD,GAAkBxmC,EAAQrlB,EAAS,CAC1C,IAAIwpD,EAAankC,EAAO,OAAS,EAC7B87B,EAAe,EAEfxxC,EAEAkT,EAGJ,OAAIwC,EAAO87B,CAAY,EAAE,CAAC,EAAE,OAAS,eACnCA,GAAgB,GAIdqI,EAAa,EAAIrI,GAAgB97B,EAAOmkC,CAAU,EAAE,CAAC,EAAE,OAAS,eAClEA,GAAc,GAEZnkC,EAAOmkC,CAAU,EAAE,CAAC,EAAE,OAAS,uBAAyBrI,IAAiBqI,EAAa,GAAKA,EAAa,EAAIrI,GAAgB97B,EAAOmkC,EAAa,CAAC,EAAE,CAAC,EAAE,OAAS,gBACjKA,GAAcrI,EAAe,IAAMqI,EAAa,EAAI,GAElDA,EAAarI,IACfxxC,EAAU,CACR,KAAM,iBACN,MAAO0V,EAAO87B,CAAY,EAAE,CAAC,EAAE,MAC/B,IAAK97B,EAAOmkC,CAAU,EAAE,CAAC,EAAE,GACjC,EACI3mC,EAAO,CACL,KAAM,YACN,MAAOwC,EAAO87B,CAAY,EAAE,CAAC,EAAE,MAC/B,IAAK97B,EAAOmkC,CAAU,EAAE,CAAC,EAAE,IAC3B,YAAa,MACnB,EACI5K,GAAOv5B,EAAQ87B,EAAcqI,EAAarI,EAAe,EAAG,CAAC,CAAC,QAASxxC,EAAS3P,CAAO,EAAG,CAAC,QAAS6iB,EAAM7iB,CAAO,EAAG,CAAC,OAAQ6iB,EAAM7iB,CAAO,EAAG,CAAC,OAAQ2P,EAAS3P,CAAO,CAAC,CAAC,GAEnKqlB,CACT,CAOA,SAASymC,GAAmB/K,EAASC,EAAIiC,EAAK,CAC5C,IAAIvgC,EAAO,EACX,OAAO2rB,EAYP,SAASA,EAAM/7D,EAAM,CAEnB,OAAAyuE,EAAQ,MAAM,YAAY,EACnBtB,EAAOntE,CAAI,CACnB,CAYD,SAASmtE,EAAOntE,EAAM,CACpB,OAAAyuE,EAAQ,MAAM,oBAAoB,EAC3BmF,EAAa5zE,CAAI,CACzB,CAYD,SAAS4zE,EAAa5zE,EAAM,CAC1B,OAAIA,IAAS,IAAMowC,IAAS,GAC1Bq+B,EAAQ,QAAQzuE,CAAI,EACb4zE,GAIL5zE,IAAS,MAAQ+tE,GAA0B/tE,CAAI,GACjDyuE,EAAQ,KAAK,oBAAoB,EAC1BoG,EAAQ70E,CAAI,GAEd2wE,EAAI3wE,CAAI,CAChB,CAYD,SAAS60E,EAAQ70E,EAAM,CACrB,OAAIA,IAAS,IACXyuE,EAAQ,MAAM,oBAAoB,EAC3BgL,EAAgBz5E,CAAI,GAEzBA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,YAAY,EAIlBC,EAAG1uE,CAAI,GAEZguE,GAAchuE,CAAI,EACbwuE,GAAaC,EAASoG,EAAS,YAAY,EAAE70E,CAAI,GAK1DyuE,EAAQ,MAAM,gBAAgB,EACvBpuE,EAAKL,CAAI,EACjB,CAcD,SAASy5E,EAAgBz5E,EAAM,CAC7B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACby5E,IAEThL,EAAQ,KAAK,oBAAoB,EAC1BoG,EAAQ70E,CAAI,EACpB,CAYD,SAASK,EAAKL,EAAM,CAClB,OAAIA,IAAS,MAAQA,IAAS,IAAM+tE,GAA0B/tE,CAAI,GAChEyuE,EAAQ,KAAK,gBAAgB,EACtBoG,EAAQ70E,CAAI,IAErByuE,EAAQ,QAAQzuE,CAAI,EACbK,EACR,CACH,CCnLO,MAAMq5E,GAAiB,CAC5B,UACA,UACA,QACA,OACA,WACA,aACA,OACA,UACA,SACA,MACA,WACA,KACA,UACA,SACA,MACA,MACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,QACA,WACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,KACA,OACA,SACA,SACA,KACA,OACA,OACA,OACA,WACA,MACA,WACA,KACA,WACA,SACA,IACA,QACA,SACA,UACA,UACA,QACA,QACA,KACA,QACA,KACA,QACA,QACA,KACA,QACA,IACF,EAcaC,GAAe,CAAC,MAAO,SAAU,QAAS,UAAU,EC5EpDC,GAAW,CACtB,SAAU,GACV,KAAM,WACN,UAAWC,GACX,SAAUC,EACZ,EAGMC,GAAkB,CACtB,QAAS,GACT,SAAUC,EACZ,EACMC,GAA2B,CAC/B,QAAS,GACT,SAAUC,EACZ,EAGA,SAASL,GAAkB9mC,EAAQ,CACjC,IAAIt4B,EAAQs4B,EAAO,OACnB,KAAOt4B,KACD,EAAAs4B,EAAOt4B,CAAK,EAAE,CAAC,IAAM,SAAWs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,aAA9D,CAIF,OAAIA,EAAQ,GAAKs4B,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,OAAS,eAE7Cs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,MAAQs4B,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,MAE9Cs4B,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,MAAQs4B,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,MAElDs4B,EAAO,OAAOt4B,EAAQ,EAAG,CAAC,GAErBs4B,CACT,CAOA,SAAS+mC,GAAiBrL,EAASC,EAAIiC,EAAK,CAC1C,MAAMrB,EAAO,KAEb,IAAImC,EAEA0I,EAEAC,EAEA3/D,EAEA4/D,EACJ,OAAOte,EAYP,SAASA,EAAM/7D,EAAM,CAEnB,OAAOmtE,EAAOntE,CAAI,CACnB,CAYD,SAASmtE,EAAOntE,EAAM,CACpB,OAAAyuE,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,cAAc,EAC5BA,EAAQ,QAAQzuE,CAAI,EACb+e,CACR,CAgBD,SAASA,EAAK/e,EAAM,CAClB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbs6E,GAELt6E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBm6E,EAAa,GACNI,GAELv6E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpByxE,EAAS,EAMFnC,EAAK,UAAYZ,EAAK8L,GAI3BlN,GAAWttE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACpBo6E,EAAS,OAAO,aAAap6E,CAAI,EAC1By6E,GAEF9J,EAAI3wE,CAAI,CAChB,CAgBD,SAASs6E,EAAgBt6E,EAAM,CAC7B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpByxE,EAAS,EACFiJ,GAEL16E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpByxE,EAAS,EACTh3D,EAAQ,EACDkgE,GAILrN,GAAWttE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACpByxE,EAAS,EAGFnC,EAAK,UAAYZ,EAAK8L,GAExB7J,EAAI3wE,CAAI,CAChB,CAYD,SAAS06E,EAAkB16E,EAAM,CAC/B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EAGbsvE,EAAK,UAAYZ,EAAK8L,GAExB7J,EAAI3wE,CAAI,CAChB,CAYD,SAAS26E,EAAgB36E,EAAM,CAC7B,MAAMX,GAAQ,SACd,OAAIW,IAASX,GAAM,WAAWob,GAAO,GACnCg0D,EAAQ,QAAQzuE,CAAI,EAChBya,IAAUpb,GAAM,OAGXiwE,EAAK,UAAYZ,EAAKkM,EAExBD,GAEFhK,EAAI3wE,CAAI,CAChB,CAYD,SAASu6E,EAAcv6E,EAAM,CAC3B,OAAIstE,GAAWttE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACpBo6E,EAAS,OAAO,aAAap6E,CAAI,EAC1By6E,GAEF9J,EAAI3wE,CAAI,CAChB,CAcD,SAASy6E,EAAQz6E,EAAM,CACrB,GAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAM+tE,GAA0B/tE,CAAI,EAAG,CAClF,MAAM66E,GAAQ76E,IAAS,GACjBmC,GAAOi4E,EAAO,cACpB,MAAI,CAACS,IAAS,CAACV,GAAcR,GAAa,SAASx3E,EAAI,GACrDsvE,EAAS,EAGFnC,EAAK,UAAYZ,EAAG1uE,CAAI,EAAI46E,EAAa56E,CAAI,GAElD05E,GAAe,SAASU,EAAO,YAAa,IAC9C3I,EAAS,EACLoJ,IACFpM,EAAQ,QAAQzuE,CAAI,EACb86E,GAKFxL,EAAK,UAAYZ,EAAG1uE,CAAI,EAAI46E,EAAa56E,CAAI,IAEtDyxE,EAAS,EAEFnC,EAAK,WAAa,CAACA,EAAK,OAAO,KAAKA,EAAK,MAAM,IAAI,EAAIqB,EAAI3wE,CAAI,EAAIm6E,EAAaY,EAAwB/6E,CAAI,EAAIg7E,EAA4Bh7E,CAAI,EACxJ,CAGD,OAAIA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GACvCyuE,EAAQ,QAAQzuE,CAAI,EACpBo6E,GAAU,OAAO,aAAap6E,CAAI,EAC3By6E,GAEF9J,EAAI3wE,CAAI,CAChB,CAYD,SAAS86E,EAAiB96E,EAAM,CAC9B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EAGbsvE,EAAK,UAAYZ,EAAKkM,GAExBjK,EAAI3wE,CAAI,CAChB,CAYD,SAAS+6E,EAAwB/6E,EAAM,CACrC,OAAIguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACb+6E,GAEFE,EAAYj7E,CAAI,CACxB,CAyBD,SAASg7E,EAA4Bh7E,EAAM,CACzC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbi7E,GAILj7E,IAAS,IAAMA,IAAS,IAAMstE,GAAWttE,CAAI,GAC/CyuE,EAAQ,QAAQzuE,CAAI,EACbk7E,GAELlN,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbg7E,GAEFC,EAAYj7E,CAAI,CACxB,CAgBD,SAASk7E,EAAsBl7E,EAAM,CAEnC,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GACpFyuE,EAAQ,QAAQzuE,CAAI,EACbk7E,GAEFC,EAA2Bn7E,CAAI,CACvC,CAeD,SAASm7E,EAA2Bn7E,EAAM,CACxC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbo7E,GAELpN,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbm7E,GAEFH,EAA4Bh7E,CAAI,CACxC,CAeD,SAASo7E,EAA6Bp7E,EAAM,CAC1C,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,GAClE2wE,EAAI3wE,CAAI,EAEbA,IAAS,IAAMA,IAAS,IAC1ByuE,EAAQ,QAAQzuE,CAAI,EACpBq6E,EAAUr6E,EACHq7E,GAELrN,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbo7E,GAEFE,EAA+Bt7E,CAAI,CAC3C,CAcD,SAASq7E,EAA6Br7E,EAAM,CAC1C,OAAIA,IAASq6E,GACX5L,EAAQ,QAAQzuE,CAAI,EACpBq6E,EAAU,KACHkB,GAELv7E,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EACnC2wE,EAAI3wE,CAAI,GAEjByuE,EAAQ,QAAQzuE,CAAI,EACbq7E,EACR,CAYD,SAASC,EAA+Bt7E,EAAM,CAC5C,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAM+tE,GAA0B/tE,CAAI,EACnJm7E,EAA2Bn7E,CAAI,GAExCyuE,EAAQ,QAAQzuE,CAAI,EACbs7E,EACR,CAaD,SAASC,EAAkCv7E,EAAM,CAC/C,OAAIA,IAAS,IAAMA,IAAS,IAAMguE,GAAchuE,CAAI,EAC3Cg7E,EAA4Bh7E,CAAI,EAElC2wE,EAAI3wE,CAAI,CAChB,CAYD,SAASi7E,EAAYj7E,EAAM,CACzB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbw7E,GAEF7K,EAAI3wE,CAAI,CAChB,CAYD,SAASw7E,EAAcx7E,EAAM,CAC3B,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EAGnC46E,EAAa56E,CAAI,EAEtBguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbw7E,GAEF7K,EAAI3wE,CAAI,CAChB,CAYD,SAAS46E,EAAa56E,EAAM,CAC1B,OAAIA,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACby7E,GAELz7E,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACb07E,IAEL17E,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACb27E,GAEL37E,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACbw6E,GAELx6E,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACb47E,GAEL9N,GAAmB9tE,CAAI,IAAMyxE,IAAW,GAAKA,IAAW,IAC1DhD,EAAQ,KAAK,cAAc,EACpBA,EAAQ,MAAMsL,GAAiB8B,GAAmBC,CAAiB,EAAE97E,CAAI,GAE9EA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,cAAc,EACpBqN,EAAkB97E,CAAI,IAE/ByuE,EAAQ,QAAQzuE,CAAI,EACb46E,EACR,CAaD,SAASkB,EAAkB97E,EAAM,CAC/B,OAAOyuE,EAAQ,MAAMwL,GAA0B8B,EAA0BF,EAAiB,EAAE77E,CAAI,CACjG,CAaD,SAAS+7E,EAAyB/7E,EAAM,CACtC,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBuN,CACR,CAaD,SAASA,EAAmBh8E,EAAM,CAChC,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,EACnC87E,EAAkB97E,CAAI,GAE/ByuE,EAAQ,MAAM,cAAc,EACrBmM,EAAa56E,CAAI,EACzB,CAYD,SAASy7E,EAA0Bz7E,EAAM,CACvC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbw6E,GAEFI,EAAa56E,CAAI,CACzB,CAYD,SAAS07E,GAAuB17E,EAAM,CACpC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBo6E,EAAS,GACF6B,GAEFrB,EAAa56E,CAAI,CACzB,CAYD,SAASi8E,EAAsBj8E,EAAM,CACnC,GAAIA,IAAS,GAAI,CACf,MAAMmC,GAAOi4E,EAAO,cACpB,OAAIT,GAAa,SAASx3E,EAAI,GAC5BssE,EAAQ,QAAQzuE,CAAI,EACb27E,GAEFf,EAAa56E,CAAI,CACzB,CACD,OAAIstE,GAAWttE,CAAI,GAAKo6E,EAAO,OAAS,GAEtC3L,EAAQ,QAAQzuE,CAAI,EACpBo6E,GAAU,OAAO,aAAap6E,CAAI,EAC3Bi8E,GAEFrB,EAAa56E,CAAI,CACzB,CAYD,SAAS47E,EAAwB57E,EAAM,CACrC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbw6E,GAEFI,EAAa56E,CAAI,CACzB,CAoBD,SAASw6E,EAA8Bx6E,EAAM,CAC3C,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb27E,GAIL37E,IAAS,IAAMyxE,IAAW,GAC5BhD,EAAQ,QAAQzuE,CAAI,EACbw6E,GAEFI,EAAa56E,CAAI,CACzB,CAYD,SAAS27E,EAAkB37E,EAAM,CAC/B,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,cAAc,EACpBoN,GAAkB77E,CAAI,IAE/ByuE,EAAQ,QAAQzuE,CAAI,EACb27E,EACR,CAYD,SAASE,GAAkB77E,EAAM,CAC/B,OAAAyuE,EAAQ,KAAK,UAAU,EAKhBC,EAAG1uE,CAAI,CACf,CACH,CAOA,SAASk6E,GAAiCzL,EAASC,EAAIiC,EAAK,CAC1D,MAAMrB,EAAO,KACb,OAAOvT,EAaP,SAASA,EAAM/7D,EAAM,CACnB,OAAI8tE,GAAmB9tE,CAAI,GACzByuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBiD,GAEFf,EAAI3wE,CAAI,CAChB,CAaD,SAAS0xE,EAAM1xE,EAAM,CACnB,OAAOsvE,EAAK,OAAO,KAAKA,EAAK,IAAK,EAAC,IAAI,EAAIqB,EAAI3wE,CAAI,EAAI0uE,EAAG1uE,CAAI,CAC/D,CACH,CAOA,SAASg6E,GAAwBvL,EAASC,EAAIiC,EAAK,CACjD,OAAO5U,EAaP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBA,EAAQ,QAAQ4D,GAAW3D,EAAIiC,CAAG,CAC1C,CACH,CC91BO,MAAMuL,GAAW,CACtB,KAAM,WACN,SAAUC,EACZ,EAOA,SAASA,GAAiB1N,EAASC,EAAIiC,EAAK,CAC1C,MAAMrB,EAAO,KAEb,IAAImC,EAEAh3D,EAEA2hE,EACJ,OAAOrgB,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,cAAc,EAC5BA,EAAQ,QAAQzuE,CAAI,EACb+e,CACR,CAgBD,SAASA,EAAK/e,EAAM,CAClB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbs6E,GAELt6E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbu6E,GAELv6E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbq8E,GAIL/O,GAAWttE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACbs8E,GAEF3L,EAAI3wE,CAAI,CAChB,CAgBD,SAASs6E,EAAgBt6E,EAAM,CAC7B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb06E,GAEL16E,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpBya,EAAQ,EACDkgE,GAELrN,GAAWttE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACb2mE,GAEFgK,EAAI3wE,CAAI,CAChB,CAYD,SAAS06E,EAAkB16E,EAAM,CAC/B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbu8E,GAEF5L,EAAI3wE,CAAI,CAChB,CAYD,SAAS0mE,EAAQ1mE,EAAM,CACrB,OAAIA,IAAS,KACJ2wE,EAAI3wE,CAAI,EAEbA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbw8E,GAEL1O,GAAmB9tE,CAAI,GACzBo8E,EAAc1V,EACP+V,GAAiBz8E,CAAI,IAE9ByuE,EAAQ,QAAQzuE,CAAI,EACb0mE,EACR,CAYD,SAAS8V,EAAax8E,EAAM,CAC1B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbu8E,GAEF7V,EAAQ1mE,CAAI,CACpB,CAYD,SAASu8E,EAAWv8E,EAAM,CACxB,OAAOA,IAAS,GAAK2oE,EAAI3oE,CAAI,EAAIA,IAAS,GAAKw8E,EAAax8E,CAAI,EAAI0mE,EAAQ1mE,CAAI,CACjF,CAYD,SAAS26E,EAAgB36E,EAAM,CAC7B,MAAMX,EAAQ,SACd,OAAIW,IAASX,EAAM,WAAWob,GAAO,GACnCg0D,EAAQ,QAAQzuE,CAAI,EACbya,IAAUpb,EAAM,OAASq9E,EAAQ/B,GAEnChK,EAAI3wE,CAAI,CAChB,CAYD,SAAS08E,EAAM18E,EAAM,CACnB,OAAIA,IAAS,KACJ2wE,EAAI3wE,CAAI,EAEbA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb28E,GAEL7O,GAAmB9tE,CAAI,GACzBo8E,EAAcM,EACPD,GAAiBz8E,CAAI,IAE9ByuE,EAAQ,QAAQzuE,CAAI,EACb08E,EACR,CAYD,SAASC,EAAW38E,EAAM,CACxB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb48E,GAEFF,EAAM18E,CAAI,CAClB,CAYD,SAAS48E,EAAS58E,EAAM,CACtB,OAAIA,IAAS,GACJ2oE,EAAI3oE,CAAI,EAEbA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb48E,GAEFF,EAAM18E,CAAI,CAClB,CAYD,SAAS2mE,EAAY3mE,EAAM,CACzB,OAAIA,IAAS,MAAQA,IAAS,GACrB2oE,EAAI3oE,CAAI,EAEb8tE,GAAmB9tE,CAAI,GACzBo8E,EAAczV,EACP8V,GAAiBz8E,CAAI,IAE9ByuE,EAAQ,QAAQzuE,CAAI,EACb2mE,EACR,CAYD,SAAS0V,EAAYr8E,EAAM,CACzB,OAAIA,IAAS,KACJ2wE,EAAI3wE,CAAI,EAEbA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb68E,GAEL/O,GAAmB9tE,CAAI,GACzBo8E,EAAcC,EACPI,GAAiBz8E,CAAI,IAE9ByuE,EAAQ,QAAQzuE,CAAI,EACbq8E,EACR,CAYD,SAASQ,EAAiB78E,EAAM,CAC9B,OAAOA,IAAS,GAAK2oE,EAAI3oE,CAAI,EAAIq8E,EAAYr8E,CAAI,CAClD,CAYD,SAASu6E,EAAcv6E,EAAM,CAE3B,OAAIstE,GAAWttE,CAAI,GACjByuE,EAAQ,QAAQzuE,CAAI,EACb88E,GAEFnM,EAAI3wE,CAAI,CAChB,CAYD,SAAS88E,EAAS98E,EAAM,CAEtB,OAAIA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GACvCyuE,EAAQ,QAAQzuE,CAAI,EACb88E,GAEFC,EAAgB/8E,CAAI,CAC5B,CAYD,SAAS+8E,EAAgB/8E,EAAM,CAC7B,OAAI8tE,GAAmB9tE,CAAI,GACzBo8E,EAAcW,EACPN,GAAiBz8E,CAAI,GAE1BguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACb+8E,GAEFpU,EAAI3oE,CAAI,CAChB,CAYD,SAASs8E,EAAQt8E,EAAM,CAErB,OAAIA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GACvCyuE,EAAQ,QAAQzuE,CAAI,EACbs8E,GAELt8E,IAAS,IAAMA,IAAS,IAAM+tE,GAA0B/tE,CAAI,EACvDg9E,EAAeh9E,CAAI,EAErB2wE,EAAI3wE,CAAI,CAChB,CAYD,SAASg9E,EAAeh9E,EAAM,CAC5B,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACb2oE,GAIL3oE,IAAS,IAAMA,IAAS,IAAMstE,GAAWttE,CAAI,GAC/CyuE,EAAQ,QAAQzuE,CAAI,EACbi9E,GAELnP,GAAmB9tE,CAAI,GACzBo8E,EAAcY,EACPP,GAAiBz8E,CAAI,GAE1BguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbg9E,GAEFrU,EAAI3oE,CAAI,CAChB,CAYD,SAASi9E,EAAqBj9E,EAAM,CAElC,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMwtE,GAAkBxtE,CAAI,GACpFyuE,EAAQ,QAAQzuE,CAAI,EACbi9E,GAEFC,EAA0Bl9E,CAAI,CACtC,CAaD,SAASk9E,EAA0Bl9E,EAAM,CACvC,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACbm9E,GAELrP,GAAmB9tE,CAAI,GACzBo8E,EAAcc,EACPT,GAAiBz8E,CAAI,GAE1BguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbk9E,GAEFF,EAAeh9E,CAAI,CAC3B,CAaD,SAASm9E,EAA4Bn9E,EAAM,CACzC,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,GAClE2wE,EAAI3wE,CAAI,EAEbA,IAAS,IAAMA,IAAS,IAC1ByuE,EAAQ,QAAQzuE,CAAI,EACpByxE,EAASzxE,EACFo9E,GAELtP,GAAmB9tE,CAAI,GACzBo8E,EAAce,EACPV,GAAiBz8E,CAAI,GAE1BguE,GAAchuE,CAAI,GACpByuE,EAAQ,QAAQzuE,CAAI,EACbm9E,IAET1O,EAAQ,QAAQzuE,CAAI,EACbq9E,EACR,CAYD,SAASD,EAA4Bp9E,EAAM,CACzC,OAAIA,IAASyxE,GACXhD,EAAQ,QAAQzuE,CAAI,EACpByxE,EAAS,OACF6L,GAELt9E,IAAS,KACJ2wE,EAAI3wE,CAAI,EAEb8tE,GAAmB9tE,CAAI,GACzBo8E,EAAcgB,EACPX,GAAiBz8E,CAAI,IAE9ByuE,EAAQ,QAAQzuE,CAAI,EACbo9E,EACR,CAYD,SAASC,EAA8Br9E,EAAM,CAC3C,OAAIA,IAAS,MAAQA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,IAAMA,IAAS,GACjF2wE,EAAI3wE,CAAI,EAEbA,IAAS,IAAMA,IAAS,IAAM+tE,GAA0B/tE,CAAI,EACvDg9E,EAAeh9E,CAAI,GAE5ByuE,EAAQ,QAAQzuE,CAAI,EACbq9E,EACR,CAaD,SAASC,EAAiCt9E,EAAM,CAC9C,OAAIA,IAAS,IAAMA,IAAS,IAAM+tE,GAA0B/tE,CAAI,EACvDg9E,EAAeh9E,CAAI,EAErB2wE,EAAI3wE,CAAI,CAChB,CAYD,SAAS2oE,EAAI3oE,EAAM,CACjB,OAAIA,IAAS,IACXyuE,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,cAAc,EAC3BA,EAAQ,KAAK,UAAU,EAChBC,GAEFiC,EAAI3wE,CAAI,CAChB,CAgBD,SAASy8E,GAAiBz8E,EAAM,CAC9B,OAAAyuE,EAAQ,KAAK,cAAc,EAC3BA,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClB8O,CACR,CAgBD,SAASA,EAAgBv9E,EAAM,CAG7B,OAAOguE,GAAchuE,CAAI,EAAIwuE,GAAaC,EAAS+O,EAAuB,aAAclO,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAC,EAAEtvE,CAAI,EAAIw9E,EAAsBx9E,CAAI,CACzM,CAgBD,SAASw9E,EAAsBx9E,EAAM,CACnC,OAAAyuE,EAAQ,MAAM,cAAc,EACrB2N,EAAYp8E,CAAI,CACxB,CACH,CChpBO,MAAMy9E,GAAW,CACtB,KAAM,WACN,WAAYC,GACZ,UAAWC,GACX,SAAUC,EACZ,EAGMC,GAAoB,CACxB,SAAUC,EACZ,EAEMC,GAAyB,CAC7B,SAAUC,EACZ,EAEMC,GAA8B,CAClC,SAAUC,EACZ,EAGA,SAASR,GAAmB3qC,EAAQ,CAClC,IAAIt4B,EAAQ,GAEZ,MAAM0jE,EAAY,GAClB,KAAO,EAAE1jE,EAAQs4B,EAAO,QAAQ,CAC9B,MAAMk8B,EAAQl8B,EAAOt4B,CAAK,EAAE,CAAC,EAE7B,GADA0jE,EAAU,KAAKprC,EAAOt4B,CAAK,CAAC,EACxBw0D,EAAM,OAAS,cAAgBA,EAAM,OAAS,aAAeA,EAAM,OAAS,WAAY,CAE1F,MAAMqC,EAASrC,EAAM,OAAS,aAAe,EAAI,EACjDA,EAAM,KAAO,OACbx0D,GAAS62D,CACV,CACF,CAGD,OAAIv+B,EAAO,SAAWorC,EAAU,QAC9B7R,GAAOv5B,EAAQ,EAAGA,EAAO,OAAQorC,CAAS,EAErCprC,CACT,CAGA,SAAS4qC,GAAkB5qC,EAAQrlB,EAAS,CAC1C,IAAIjT,EAAQs4B,EAAO,OACfu+B,EAAS,EAETrC,EAEAlwD,EAEA4yD,EAEAyM,EAGJ,KAAO3jE,KAEL,GADAw0D,EAAQl8B,EAAOt4B,CAAK,EAAE,CAAC,EACnBsE,EAAM,CAER,GAAIkwD,EAAM,OAAS,QAAUA,EAAM,OAAS,aAAeA,EAAM,UAC/D,MAKEl8B,EAAOt4B,CAAK,EAAE,CAAC,IAAM,SAAWw0D,EAAM,OAAS,cACjDA,EAAM,UAAY,GAErB,SAAU0C,GACT,GAAI5+B,EAAOt4B,CAAK,EAAE,CAAC,IAAM,UAAYw0D,EAAM,OAAS,cAAgBA,EAAM,OAAS,cAAgB,CAACA,EAAM,YACxGlwD,EAAOtE,EACHw0D,EAAM,OAAS,aAAa,CAC9BqC,EAAS,EACT,KACD,OAEMrC,EAAM,OAAS,aACxB0C,EAAQl3D,GAGZ,MAAM8K,EAAQ,CACZ,KAAMwtB,EAAOh0B,CAAI,EAAE,CAAC,EAAE,OAAS,YAAc,OAAS,QACtD,MAAO,CACL,GAAGg0B,EAAOh0B,CAAI,EAAE,CAAC,EAAE,KACpB,EACD,IAAK,CACH,GAAGg0B,EAAOA,EAAO,OAAS,CAAC,EAAE,CAAC,EAAE,GACjC,CACL,EACQxqB,EAAQ,CACZ,KAAM,QACN,MAAO,CACL,GAAGwqB,EAAOh0B,CAAI,EAAE,CAAC,EAAE,KACpB,EACD,IAAK,CACH,GAAGg0B,EAAO4+B,CAAK,EAAE,CAAC,EAAE,GACrB,CACL,EACQphC,EAAO,CACX,KAAM,YACN,MAAO,CACL,GAAGwC,EAAOh0B,EAAOuyD,EAAS,CAAC,EAAE,CAAC,EAAE,GACjC,EACD,IAAK,CACH,GAAGv+B,EAAO4+B,EAAQ,CAAC,EAAE,CAAC,EAAE,KACzB,CACL,EACE,OAAAyM,EAAQ,CAAC,CAAC,QAAS74D,EAAOmI,CAAO,EAAG,CAAC,QAASnF,EAAOmF,CAAO,CAAC,EAG7D0wD,EAAQ1R,GAAK0R,EAAOrrC,EAAO,MAAMh0B,EAAO,EAAGA,EAAOuyD,EAAS,CAAC,CAAC,EAG7D8M,EAAQ1R,GAAK0R,EAAO,CAAC,CAAC,QAAS7tC,EAAM7iB,CAAO,CAAC,CAAC,EAK9C0wD,EAAQ1R,GAAK0R,EAAOvN,GAAWnjD,EAAQ,OAAO,WAAW,WAAW,KAAMqlB,EAAO,MAAMh0B,EAAOuyD,EAAS,EAAGK,EAAQ,CAAC,EAAGjkD,CAAO,CAAC,EAG9H0wD,EAAQ1R,GAAK0R,EAAO,CAAC,CAAC,OAAQ7tC,EAAM7iB,CAAO,EAAGqlB,EAAO4+B,EAAQ,CAAC,EAAG5+B,EAAO4+B,EAAQ,CAAC,EAAG,CAAC,OAAQppD,EAAOmF,CAAO,CAAC,CAAC,EAG7G0wD,EAAQ1R,GAAK0R,EAAOrrC,EAAO,MAAM4+B,EAAQ,CAAC,CAAC,EAG3CyM,EAAQ1R,GAAK0R,EAAO,CAAC,CAAC,OAAQ74D,EAAOmI,CAAO,CAAC,CAAC,EAC9C4+C,GAAOv5B,EAAQh0B,EAAMg0B,EAAO,OAAQqrC,CAAK,EAClCrrC,CACT,CAOA,SAAS6qC,GAAiBnP,EAASC,EAAIiC,EAAK,CAC1C,MAAMrB,EAAO,KACb,IAAI70D,EAAQ60D,EAAK,OAAO,OAEpB+O,EAEAC,EAGJ,KAAO7jE,KACL,IAAK60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,cAAgB60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,cAAgB,CAAC60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,UAAW,CACnI4jE,EAAa/O,EAAK,OAAO70D,CAAK,EAAE,CAAC,EACjC,KACD,CAEH,OAAOshD,EAiBP,SAASA,EAAM/7D,EAAM,CAEnB,OAAKq+E,EAaDA,EAAW,UACNE,EAAYv+E,CAAI,GAEzBs+E,EAAUhP,EAAK,OAAO,QAAQ,SAASjC,GAAoBiC,EAAK,eAAe,CAC7E,MAAO+O,EAAW,IAClB,IAAK/O,EAAK,IAAK,CAChB,EAAC,CAAC,EACHb,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,aAAa,EAC3BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,UAAU,EAChBiD,GAxBEf,EAAI3wE,CAAI,CAyBlB,CAkBD,SAAS0xE,EAAM1xE,EAAM,CAKnB,OAAIA,IAAS,GACJyuE,EAAQ,QAAQoP,GAAmBW,EAAYF,EAAUE,EAAaD,CAAW,EAAEv+E,CAAI,EAI5FA,IAAS,GACJyuE,EAAQ,QAAQsP,GAAwBS,EAAYF,EAAUG,EAAmBF,CAAW,EAAEv+E,CAAI,EAIpGs+E,EAAUE,EAAWx+E,CAAI,EAAIu+E,EAAYv+E,CAAI,CACrD,CAgBD,SAASy+E,EAAiBz+E,EAAM,CAC9B,OAAOyuE,EAAQ,QAAQwP,GAA6BO,EAAYD,CAAW,EAAEv+E,CAAI,CAClF,CAkBD,SAASw+E,EAAWx+E,EAAM,CAExB,OAAO0uE,EAAG1uE,CAAI,CACf,CAkBD,SAASu+E,EAAYv+E,EAAM,CACzB,OAAAq+E,EAAW,UAAY,GAChB1N,EAAI3wE,CAAI,CAChB,CACH,CAOA,SAAS89E,GAAiBrP,EAASC,EAAIiC,EAAK,CAC1C,OAAO+N,EAYP,SAASA,EAAc1+E,EAAM,CAC3B,OAAAyuE,EAAQ,MAAM,UAAU,EACxBA,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EACtBkQ,CACR,CAYD,SAASA,EAAe3+E,EAAM,CAC5B,OAAO+tE,GAA0B/tE,CAAI,EAAIw4E,GAAkB/J,EAASmQ,CAAY,EAAE5+E,CAAI,EAAI4+E,EAAa5+E,CAAI,CAC5G,CAYD,SAAS4+E,EAAa5+E,EAAM,CAC1B,OAAIA,IAAS,GACJ6+E,EAAY7+E,CAAI,EAElBs3E,GAAmB7I,EAASqQ,EAA0BC,EAA4B,sBAAuB,6BAA8B,mCAAoC,yBAA0B,4BAA6B,EAAE,EAAE/+E,CAAI,CAClP,CAYD,SAAS8+E,EAAyB9+E,EAAM,CACtC,OAAO+tE,GAA0B/tE,CAAI,EAAIw4E,GAAkB/J,EAASuQ,CAAe,EAAEh/E,CAAI,EAAI6+E,EAAY7+E,CAAI,CAC9G,CAYD,SAAS++E,EAA2B/+E,EAAM,CACxC,OAAO2wE,EAAI3wE,CAAI,CAChB,CAYD,SAASg/E,EAAgBh/E,EAAM,CAC7B,OAAIA,IAAS,IAAMA,IAAS,IAAMA,IAAS,GAClCq4E,GAAa5J,EAASwQ,EAAoBtO,EAAK,gBAAiB,sBAAuB,qBAAqB,EAAE3wE,CAAI,EAEpH6+E,EAAY7+E,CAAI,CACxB,CAYD,SAASi/E,EAAmBj/E,EAAM,CAChC,OAAO+tE,GAA0B/tE,CAAI,EAAIw4E,GAAkB/J,EAASoQ,CAAW,EAAE7+E,CAAI,EAAI6+E,EAAY7+E,CAAI,CAC1G,CAYD,SAAS6+E,EAAY7+E,EAAM,CACzB,OAAIA,IAAS,IACXyuE,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EAC7BA,EAAQ,KAAK,UAAU,EAChBC,GAEFiC,EAAI3wE,CAAI,CAChB,CACH,CAOA,SAASg+E,GAAsBvP,EAASC,EAAIiC,EAAK,CAC/C,MAAMrB,EAAO,KACb,OAAO4P,EAYP,SAASA,EAAcl/E,EAAM,CAC3B,OAAOi4E,GAAa,KAAK3I,EAAMb,EAAS0Q,EAAoBC,EAAsB,YAAa,kBAAmB,iBAAiB,EAAEp/E,CAAI,CAC1I,CAYD,SAASm/E,EAAmBn/E,EAAM,CAChC,OAAOsvE,EAAK,OAAO,QAAQ,SAASjC,GAAoBiC,EAAK,eAAeA,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAG,EAAE,CAAC,CAAC,EAAIZ,EAAG1uE,CAAI,EAAI2wE,EAAI3wE,CAAI,CACzJ,CAYD,SAASo/E,EAAqBp/E,EAAM,CAClC,OAAO2wE,EAAI3wE,CAAI,CAChB,CACH,CAOA,SAASk+E,GAA2BzP,EAASC,EAAIiC,EAAK,CACpD,OAAO0O,EAcP,SAASA,EAAwBr/E,EAAM,CAGrC,OAAAyuE,EAAQ,MAAM,WAAW,EACzBA,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,iBAAiB,EACvB6Q,CACR,CAcD,SAASA,EAAuBt/E,EAAM,CACpC,OAAIA,IAAS,IACXyuE,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,iBAAiB,EAC9BA,EAAQ,KAAK,WAAW,EACjBC,GAEFiC,EAAI3wE,CAAI,CAChB,CACH,CCniBO,MAAMu/E,GAAkB,CAC7B,KAAM,kBACN,WAAY9B,GAAS,WACrB,SAAU+B,EACZ,EAOA,SAASA,GAAwB/Q,EAASC,EAAIiC,EAAK,CACjD,MAAMrB,EAAO,KACb,OAAOvT,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,MAAM,kBAAkB,EAChCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,kBAAkB,EACxB1vD,CACR,CAYD,SAASA,EAAK/e,EAAM,CAClB,OAAIA,IAAS,IACXyuE,EAAQ,MAAM,aAAa,EAC3BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,YAAY,EAClBiD,GAEFf,EAAI3wE,CAAI,CAChB,CA6BD,SAAS0xE,EAAM1xE,EAAM,CAMnB,OAAOA,IAAS,IAAM,2BAA4BsvE,EAAK,OAAO,WAAaqB,EAAI3wE,CAAI,EAAI0uE,EAAG1uE,CAAI,CAC/F,CACH,CCzFO,MAAMy/E,GAAiB,CAC5B,KAAM,iBACN,WAAYhC,GAAS,WACrB,SAAUiC,EACZ,EAOA,SAASA,GAAuBjR,EAASC,EAAIiC,EAAK,CAChD,MAAMrB,EAAO,KACb,OAAOvT,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,WAAW,EACzBA,EAAQ,MAAM,aAAa,EAC3BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,aAAa,EAC1BA,EAAQ,KAAK,WAAW,EACjBiD,CACR,CAGD,SAASA,EAAM1xE,EAAM,CAKnB,OAAOA,IAAS,IAAM,2BAA4BsvE,EAAK,OAAO,WAAaqB,EAAI3wE,CAAI,EAAI0uE,EAAG1uE,CAAI,CAC/F,CACH,CC1CO,MAAM2/E,GAAa,CACxB,KAAM,aACN,SAAUC,EACZ,EAOA,SAASA,GAAmBnR,EAASC,EAAI,CACvC,OAAO3S,EAGP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EAClBD,GAAaC,EAASC,EAAI,YAAY,CAC9C,CACH,CCnBO,MAAMmR,GAAgB,CAC3B,KAAM,gBACN,SAAUC,EACZ,EAOA,SAASA,GAAsBrR,EAASC,EAAIiC,EAAK,CAC/C,IAAIvgC,EAAO,EAEPqhC,EACJ,OAAO1V,EAYP,SAASA,EAAM/7D,EAAM,CACnB,OAAAyuE,EAAQ,MAAM,eAAe,EAEtBtB,EAAOntE,CAAI,CACnB,CAYD,SAASmtE,EAAOntE,EAAM,CACpB,OAAAyxE,EAASzxE,EACF60E,EAAQ70E,CAAI,CACpB,CAYD,SAAS60E,EAAQ70E,EAAM,CACrB,OAAIA,IAASyxE,GACXhD,EAAQ,MAAM,uBAAuB,EAC9BsR,EAAS//E,CAAI,GAElBowC,GAAQ,IAAMpwC,IAAS,MAAQ8tE,GAAmB9tE,CAAI,IACxDyuE,EAAQ,KAAK,eAAe,EACrBC,EAAG1uE,CAAI,GAET2wE,EAAI3wE,CAAI,CAChB,CAYD,SAAS+/E,EAAS//E,EAAM,CACtB,OAAIA,IAASyxE,GACXhD,EAAQ,QAAQzuE,CAAI,EACpBowC,IACO2vC,IAETtR,EAAQ,KAAK,uBAAuB,EAC7BT,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASoG,EAAS,YAAY,EAAE70E,CAAI,EAAI60E,EAAQ70E,CAAI,EAC/F,CACH,CCpFO,MAAMusE,GAAO,CAClB,aAAc,CACZ,SAAUyT,EACX,EACD,KAAMC,GACN,KAAM,OACN,SAAUC,EACZ,EAGMC,GAAoC,CACxC,QAAS,GACT,SAAUC,EACZ,EAGMC,GAAkB,CACtB,QAAS,GACT,SAAUC,EACZ,EAUA,SAASJ,GAAkBzR,EAASC,EAAIiC,EAAK,CAC3C,MAAMrB,EAAO,KACPqE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,IAAIiR,EAAc5M,GAAQA,EAAK,CAAC,EAAE,OAAS,aAAeA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,OAAS,EACrGvjC,EAAO,EACX,OAAO2rB,EAGP,SAASA,EAAM/7D,EAAM,CACnB,MAAMwgF,EAAOlR,EAAK,eAAe,OAAStvE,IAAS,IAAMA,IAAS,IAAMA,IAAS,GAAK,gBAAkB,eACxG,GAAIwgF,IAAS,gBAAkB,CAAClR,EAAK,eAAe,QAAUtvE,IAASsvE,EAAK,eAAe,OAAS3B,GAAW3tE,CAAI,EAAG,CAOpH,GANKsvE,EAAK,eAAe,OACvBA,EAAK,eAAe,KAAOkR,EAC3B/R,EAAQ,MAAM+R,EAAM,CAClB,WAAY,EACtB,CAAS,GAECA,IAAS,gBACX,OAAA/R,EAAQ,MAAM,gBAAgB,EACvBzuE,IAAS,IAAMA,IAAS,GAAKyuE,EAAQ,MAAMoR,GAAelP,EAAK8P,CAAQ,EAAEzgF,CAAI,EAAIygF,EAASzgF,CAAI,EAEvG,GAAI,CAACsvE,EAAK,WAAatvE,IAAS,GAC9B,OAAAyuE,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,MAAM,eAAe,EACtBzuC,EAAOhgC,CAAI,CAErB,CACD,OAAO2wE,EAAI3wE,CAAI,CAChB,CAGD,SAASggC,EAAOhgC,EAAM,CACpB,OAAI2tE,GAAW3tE,CAAI,GAAK,EAAEowC,EAAO,IAC/Bq+B,EAAQ,QAAQzuE,CAAI,EACbggC,IAEJ,CAACsvC,EAAK,WAAal/B,EAAO,KAAOk/B,EAAK,eAAe,OAAStvE,IAASsvE,EAAK,eAAe,OAAStvE,IAAS,IAAMA,IAAS,KAC/HyuE,EAAQ,KAAK,eAAe,EACrBgS,EAASzgF,CAAI,GAEf2wE,EAAI3wE,CAAI,CAChB,CAKD,SAASygF,EAASzgF,EAAM,CACtB,OAAAyuE,EAAQ,MAAM,gBAAgB,EAC9BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,gBAAgB,EAC7Ba,EAAK,eAAe,OAASA,EAAK,eAAe,QAAUtvE,EACpDyuE,EAAQ,MAAM4D,GAErB/C,EAAK,UAAYqB,EAAM+P,EAASjS,EAAQ,QAAQ0R,GAAmCQ,EAAaC,CAAW,CAAC,CAC7G,CAGD,SAASF,EAAQ1gF,EAAM,CACrB,OAAAsvE,EAAK,eAAe,iBAAmB,GACvCiR,IACOI,EAAY3gF,CAAI,CACxB,CAGD,SAAS4gF,EAAY5gF,EAAM,CACzB,OAAIguE,GAAchuE,CAAI,GACpByuE,EAAQ,MAAM,0BAA0B,EACxCA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,0BAA0B,EAChCkS,GAEFhQ,EAAI3wE,CAAI,CAChB,CAGD,SAAS2gF,EAAY3gF,EAAM,CACzB,OAAAsvE,EAAK,eAAe,KAAOiR,EAAcjR,EAAK,eAAeb,EAAQ,KAAK,gBAAgB,EAAG,EAAI,EAAE,OAC5FC,EAAG1uE,CAAI,CACf,CACH,CAOA,SAASggF,GAAyBvR,EAASC,EAAIiC,EAAK,CAClD,MAAMrB,EAAO,KACb,OAAAA,EAAK,eAAe,WAAa,OAC1Bb,EAAQ,MAAM4D,GAAWqO,EAASG,CAAQ,EAGjD,SAASH,EAAQ1gF,EAAM,CACrB,OAAAsvE,EAAK,eAAe,kBAAoBA,EAAK,eAAe,mBAAqBA,EAAK,eAAe,iBAI9Fd,GAAaC,EAASC,EAAI,iBAAkBY,EAAK,eAAe,KAAO,CAAC,EAAEtvE,CAAI,CACtF,CAGD,SAAS6gF,EAAS7gF,EAAM,CACtB,OAAIsvE,EAAK,eAAe,mBAAqB,CAACtB,GAAchuE,CAAI,GAC9DsvE,EAAK,eAAe,kBAAoB,OACxCA,EAAK,eAAe,iBAAmB,OAChCwR,EAAiB9gF,CAAI,IAE9BsvE,EAAK,eAAe,kBAAoB,OACxCA,EAAK,eAAe,iBAAmB,OAChCb,EAAQ,QAAQ4R,GAAiB3R,EAAIoS,CAAgB,EAAE9gF,CAAI,EACnE,CAGD,SAAS8gF,EAAiB9gF,EAAM,CAE9B,OAAAsvE,EAAK,eAAe,WAAa,GAEjCA,EAAK,UAAY,OAGVd,GAAaC,EAASA,EAAQ,QAAQlC,GAAMmC,EAAIiC,CAAG,EAAG,aAAcrB,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAC,EAAEtvE,CAAI,CAC9J,CACH,CAOA,SAASsgF,GAAe7R,EAASC,EAAIiC,EAAK,CACxC,MAAMrB,EAAO,KACb,OAAOd,GAAaC,EAASmG,EAAa,iBAAkBtF,EAAK,eAAe,KAAO,CAAC,EAGxF,SAASsF,EAAY50E,EAAM,CACzB,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,OAAOqE,GAAQA,EAAK,CAAC,EAAE,OAAS,kBAAoBA,EAAK,CAAC,EAAE,eAAeA,EAAK,CAAC,EAAG,EAAI,EAAE,SAAWrE,EAAK,eAAe,KAAOZ,EAAG1uE,CAAI,EAAI2wE,EAAI3wE,CAAI,CACpJ,CACH,CAOA,SAASigF,GAAgBxR,EAAS,CAChCA,EAAQ,KAAK,KAAK,eAAe,IAAI,CACvC,CAOA,SAAS2R,GAAiC3R,EAASC,EAAIiC,EAAK,CAC1D,MAAMrB,EAAO,KAIb,OAAOd,GAAaC,EAASmG,EAAa,2BAA4BtF,EAAK,OAAO,WAAW,QAAQ,KAAK,SAAS,cAAc,EAAI,OAAY,CAAK,EAGtJ,SAASsF,EAAY50E,EAAM,CACzB,MAAM2zE,EAAOrE,EAAK,OAAOA,EAAK,OAAO,OAAS,CAAC,EAC/C,MAAO,CAACtB,GAAchuE,CAAI,GAAK2zE,GAAQA,EAAK,CAAC,EAAE,OAAS,2BAA6BjF,EAAG1uE,CAAI,EAAI2wE,EAAI3wE,CAAI,CACzG,CACH,CCtMO,MAAM+gF,GAAkB,CAC7B,KAAM,kBACN,UAAWC,GACX,SAAUC,EACZ,EAGA,SAASD,GAAyBjuC,EAAQrlB,EAAS,CAEjD,IAAIjT,EAAQs4B,EAAO,OAEf1V,EAEAkT,EAEAmyB,EAIJ,KAAOjoD,KACL,GAAIs4B,EAAOt4B,CAAK,EAAE,CAAC,IAAM,QAAS,CAChC,GAAIs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,UAAW,CACvC4iB,EAAU5iB,EACV,KACD,CACGs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,cAC5B81B,EAAO91B,EAEV,MAGKs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,WAE5Bs4B,EAAO,OAAOt4B,EAAO,CAAC,EAEpB,CAACioD,GAAc3vB,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,eAC3CioD,EAAajoD,GAInB,MAAMymE,EAAU,CACd,KAAM,gBACN,MAAO,CACL,GAAGnuC,EAAO1V,CAAO,EAAE,CAAC,EAAE,KACvB,EACD,IAAK,CACH,GAAG0V,EAAOA,EAAO,OAAS,CAAC,EAAE,CAAC,EAAE,GACjC,CACL,EAGE,OAAAA,EAAOxC,CAAI,EAAE,CAAC,EAAE,KAAO,oBAInBmyB,GACF3vB,EAAO,OAAOxC,EAAM,EAAG,CAAC,QAAS2wC,EAASxzD,CAAO,CAAC,EAClDqlB,EAAO,OAAO2vB,EAAa,EAAG,EAAG,CAAC,OAAQ3vB,EAAO1V,CAAO,EAAE,CAAC,EAAG3P,CAAO,CAAC,EACtEqlB,EAAO1V,CAAO,EAAE,CAAC,EAAE,IAAM,CACvB,GAAG0V,EAAO2vB,CAAU,EAAE,CAAC,EAAE,GAC/B,GAEI3vB,EAAO1V,CAAO,EAAE,CAAC,EAAI6jD,EAIvBnuC,EAAO,KAAK,CAAC,OAAQmuC,EAASxzD,CAAO,CAAC,EAC/BqlB,CACT,CAOA,SAASkuC,GAAwBxS,EAASC,EAAIiC,EAAK,CACjD,MAAMrB,EAAO,KAEb,IAAImC,EACJ,OAAO1V,EAaP,SAASA,EAAM/7D,EAAM,CACnB,IAAIya,EAAQ60D,EAAK,OAAO,OAEpB6R,EAEJ,KAAO1mE,KAGL,GAAI60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,cAAgB60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,cAAgB60D,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,UAAW,CAC1I0mE,EAAY7R,EAAK,OAAO70D,CAAK,EAAE,CAAC,EAAE,OAAS,YAC3C,KACD,CAKH,MAAI,CAAC60D,EAAK,OAAO,KAAKA,EAAK,MAAM,IAAI,IAAMA,EAAK,WAAa6R,IAC3D1S,EAAQ,MAAM,mBAAmB,EACjCgD,EAASzxE,EACFmtE,EAAOntE,CAAI,GAEb2wE,EAAI3wE,CAAI,CAChB,CAaD,SAASmtE,EAAOntE,EAAM,CACpB,OAAAyuE,EAAQ,MAAM,2BAA2B,EAClCzuC,EAAOhgC,CAAI,CACnB,CAaD,SAASggC,EAAOhgC,EAAM,CACpB,OAAIA,IAASyxE,GACXhD,EAAQ,QAAQzuE,CAAI,EACbggC,IAETyuC,EAAQ,KAAK,2BAA2B,EACjCT,GAAchuE,CAAI,EAAIwuE,GAAaC,EAASiD,EAAO,YAAY,EAAE1xE,CAAI,EAAI0xE,EAAM1xE,CAAI,EAC3F,CAaD,SAAS0xE,EAAM1xE,EAAM,CACnB,OAAIA,IAAS,MAAQ8tE,GAAmB9tE,CAAI,GAC1CyuE,EAAQ,KAAK,mBAAmB,EACzBC,EAAG1uE,CAAI,GAET2wE,EAAI3wE,CAAI,CAChB,CACH,CC3KO,MAAMohF,GAAO,CAClB,SAAUC,EACZ,EAQA,SAASA,GAAe5S,EAAS,CAC/B,MAAMa,EAAO,KACPgG,EAAU7G,EAAQ,QAExB4D,GAAWiP,EAEX7S,EAAQ,QAAQ,KAAK,OAAO,WAAW,YAAa8S,EAAgB/S,GAAaC,EAASA,EAAQ,QAAQ,KAAK,OAAO,WAAW,KAAM8S,EAAgB9S,EAAQ,QAAQpxC,GAASkkD,CAAc,CAAC,EAAG,YAAY,CAAC,CAAC,EAChN,OAAOjM,EAGP,SAASgM,EAActhF,EAAM,CAC3B,GAAIA,IAAS,KAAM,CACjByuE,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAAyuE,EAAQ,MAAM,iBAAiB,EAC/BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,iBAAiB,EAC9Ba,EAAK,iBAAmB,OACjBgG,CACR,CAGD,SAASiM,EAAevhF,EAAM,CAC5B,GAAIA,IAAS,KAAM,CACjByuE,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAAyuE,EAAQ,MAAM,YAAY,EAC1BA,EAAQ,QAAQzuE,CAAI,EACpByuE,EAAQ,KAAK,YAAY,EACzBa,EAAK,iBAAmB,OACjBgG,CACR,CACH,CC9CO,MAAMkM,GAAW,CACtB,WAAYC,GAAgB,CAC9B,EACa97D,GAAS+7D,GAAkB,QAAQ,EACnCnxC,GAAOmxC,GAAkB,MAAM,EAQ5C,SAASA,GAAkBC,EAAO,CAChC,MAAO,CACL,WAAYF,GAAeE,IAAU,OAASC,GAAyB,MAAS,EAChF,SAAUC,CACd,EAOE,SAASA,EAAepT,EAAS,CAC/B,MAAMa,EAAO,KACPrC,EAAa,KAAK,OAAO,WAAW0U,CAAK,EACzCpxC,EAAOk+B,EAAQ,QAAQxB,EAAYlR,EAAO+lB,CAAO,EACvD,OAAO/lB,EAGP,SAASA,EAAM/7D,EAAM,CACnB,OAAO60E,EAAQ70E,CAAI,EAAIuwC,EAAKvwC,CAAI,EAAI8hF,EAAQ9hF,CAAI,CACjD,CAGD,SAAS8hF,EAAQ9hF,EAAM,CACrB,GAAIA,IAAS,KAAM,CACjByuE,EAAQ,QAAQzuE,CAAI,EACpB,MACD,CACD,OAAAyuE,EAAQ,MAAM,MAAM,EACpBA,EAAQ,QAAQzuE,CAAI,EACbK,CACR,CAGD,SAASA,EAAKL,EAAM,CAClB,OAAI60E,EAAQ70E,CAAI,GACdyuE,EAAQ,KAAK,MAAM,EACZl+B,EAAKvwC,CAAI,IAIlByuE,EAAQ,QAAQzuE,CAAI,EACbK,EACR,CAQD,SAASw0E,EAAQ70E,EAAM,CACrB,GAAIA,IAAS,KACX,MAAO,GAET,MAAMusE,EAAOU,EAAWjtE,CAAI,EAC5B,IAAIya,EAAQ,GACZ,GAAI8xD,EAGF,KAAO,EAAE9xD,EAAQ8xD,EAAK,QAAQ,CAC5B,MAAM3oC,EAAO2oC,EAAK9xD,CAAK,EACvB,GAAI,CAACmpB,EAAK,UAAYA,EAAK,SAAS,KAAK0rC,EAAMA,EAAK,QAAQ,EAC1D,MAAO,EAEV,CAEH,MAAO,EACR,CACF,CACH,CAQA,SAASmS,GAAeM,EAAe,CACrC,OAAOC,EAGP,SAASA,EAAejvC,EAAQrlB,EAAS,CACvC,IAAIjT,EAAQ,GAER06D,EAIJ,KAAO,EAAE16D,GAASs4B,EAAO,QACnBoiC,IAAU,OACRpiC,EAAOt4B,CAAK,GAAKs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,SAC7C06D,EAAQ16D,EACRA,MAEO,CAACs4B,EAAOt4B,CAAK,GAAKs4B,EAAOt4B,CAAK,EAAE,CAAC,EAAE,OAAS,UAEjDA,IAAU06D,EAAQ,IACpBpiC,EAAOoiC,CAAK,EAAE,CAAC,EAAE,IAAMpiC,EAAOt4B,EAAQ,CAAC,EAAE,CAAC,EAAE,IAC5Cs4B,EAAO,OAAOoiC,EAAQ,EAAG16D,EAAQ06D,EAAQ,CAAC,EAC1C16D,EAAQ06D,EAAQ,GAElBA,EAAQ,QAGZ,OAAO4M,EAAgBA,EAAchvC,EAAQrlB,CAAO,EAAIqlB,CACzD,CACH,CAaA,SAAS6uC,GAAuB7uC,EAAQrlB,EAAS,CAC/C,IAAI0oD,EAAa,EAEjB,KAAO,EAAEA,GAAcrjC,EAAO,QAC5B,IAAKqjC,IAAerjC,EAAO,QAAUA,EAAOqjC,CAAU,EAAE,CAAC,EAAE,OAAS,eAAiBrjC,EAAOqjC,EAAa,CAAC,EAAE,CAAC,EAAE,OAAS,OAAQ,CAC9H,MAAM/1E,EAAO0yC,EAAOqjC,EAAa,CAAC,EAAE,CAAC,EAC/B6L,EAASv0D,EAAQ,YAAYrtB,CAAI,EACvC,IAAIoa,EAAQwnE,EAAO,OACfC,EAAc,GACd9xC,EAAO,EAEP+xC,EACJ,KAAO1nE,KAAS,CACd,MAAM2nE,EAAQH,EAAOxnE,CAAK,EAC1B,GAAI,OAAO2nE,GAAU,SAAU,CAE7B,IADAF,EAAcE,EAAM,OACbA,EAAM,WAAWF,EAAc,CAAC,IAAM,IAC3C9xC,IACA8xC,IAEF,GAAIA,EAAa,MACjBA,EAAc,EACf,SAEQE,IAAU,GACjBD,EAAO,GACP/xC,YACSgyC,IAAU,GAEd,CAEL3nE,IACA,KACD,CACF,CAMD,GAHIiT,EAAQ,0BAA4B0oD,IAAerjC,EAAO,SAC5D3C,EAAO,GAELA,EAAM,CACR,MAAM6+B,EAAQ,CACZ,KAAMmH,IAAerjC,EAAO,QAAUovC,GAAQ/xC,EAAO,EAAI,aAAe,oBACxE,MAAO,CACL,aAAc31B,EAAQynE,EAAc7hF,EAAK,MAAM,aAAe6hF,EAC9D,OAAQ7hF,EAAK,MAAM,OAASoa,EAC5B,KAAMpa,EAAK,IAAI,KACf,OAAQA,EAAK,IAAI,OAAS+vC,EAC1B,OAAQ/vC,EAAK,IAAI,OAAS+vC,CAC3B,EACD,IAAK,CACH,GAAG/vC,EAAK,GACT,CACX,EACQA,EAAK,IAAM,CACT,GAAG4uE,EAAM,KACnB,EACY5uE,EAAK,MAAM,SAAWA,EAAK,IAAI,OACjC,OAAO,OAAOA,EAAM4uE,CAAK,GAEzBl8B,EAAO,OAAOqjC,EAAY,EAAG,CAAC,QAASnH,EAAOvhD,CAAO,EAAG,CAAC,OAAQuhD,EAAOvhD,CAAO,CAAC,EAChF0oD,GAAc,EAEjB,CACDA,GACD,CAEH,OAAOrjC,CACT,CC3MO,MAAMm8B,GAAW,CACrB,GAAK3C,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKA,GACL,GAAKgG,EACR,EAGa8P,GAAiB,CAC3B,GAAK3f,EACR,EAGa4f,GAAc,CACzB,CAAC,EAAE,EAAG9N,GACN,CAAC,EAAE,EAAGA,GACL,GAAKA,EACR,EAGa4M,GAAO,CACjB,GAAK9H,GACL,GAAKuG,GACL,GAAK,CAACkB,GAAiBlB,EAAa,EACpC,GAAKjG,GACL,GAAKmH,GACL,GAAKlB,GACL,GAAKzM,GACL,IAAMA,EACT,EAGaztD,GAAS,CACnB,GAAK0mD,GACL,GAAKwG,EACR,EAGatiC,GAAO,CAClB,CAAC,EAAE,EAAGovC,GACN,CAAC,EAAE,EAAGA,GACN,CAAC,EAAE,EAAGA,GACL,GAAKJ,GACL,GAAKlT,GACL,GAAK0E,GACL,GAAK,CAACa,GAAUsK,EAAQ,EACxB,GAAKuD,GACL,GAAK,CAACrG,GAAiBvG,EAAe,EACtC,GAAK4K,GACL,GAAK1M,GACL,GAAK+D,EACR,EAGayN,GAAa,CACxB,KAAM,CAACxR,GAAWyR,EAAW,CAC/B,EAGahR,GAAmB,CAC9B,KAAM,CAAC,GAAI,EAAE,CACf,EAGaiR,GAAU,CACrB,KAAM,CAAE,CACV,oNCxBO,SAASC,GAAgBC,EAAQC,EAAYvmE,EAAM,CAExD,IAAIojB,EAAQ,CACV,aAAc,GACd,OAAQ,EACR,KAAMpjB,GAAQA,EAAK,MAAQ,EAC3B,OAAQA,GAAQA,EAAK,QAAU,EAC/B,OAAQA,GAAQA,EAAK,QAAU,CACnC,EAEE,MAAMwmE,EAAc,GAEdC,EAAuB,GAE7B,IAAIb,EAAS,GAETrnF,EAAQ,GASZ,MAAM6zE,EAAU,CACd,QAASsU,EAAiBC,CAAqB,EAC/C,MAAOD,EAAiBE,CAAiB,EACzC,QAAAC,EACA,MAAA/N,EACA,KAAA1C,EACA,UAAWsQ,EAAiBE,EAAmB,CAC7C,UAAW,EACjB,CAAK,CACL,EAOQv1D,EAAU,CACd,KAAM,KACN,eAAgB,CAAE,EAClB,WAAAy1D,EACA,OAAQ,CAAE,EACV,IAAA5+E,EACA,OAAAo+E,EACA,SAAU,KACV,eAAAS,EACA,YAAAC,EACA,MAAAC,CACJ,EAOE,IAAI9kE,EAAQokE,EAAW,SAAS,KAAKl1D,EAAS+gD,CAAO,EAQrD,OAAImU,EAAW,YACbE,EAAqB,KAAKF,CAAU,EAE/Bl1D,EAGP,SAAS41D,EAAM1M,EAAO,CAKpB,OAJAqL,EAASvV,GAAKuV,EAAQrL,CAAK,EAC3B2M,IAGItB,EAAOA,EAAO,OAAS,CAAC,IAAM,KACzB,IAETuB,EAAUZ,EAAY,CAAC,EAGvBl1D,EAAQ,OAASmjD,GAAWiS,EAAsBp1D,EAAQ,OAAQA,CAAO,EAClEA,EAAQ,OAChB,CAOD,SAAS01D,EAAenU,EAAOwU,EAAY,CACzC,OAAOC,GAAgBL,EAAYpU,CAAK,EAAGwU,CAAU,CACtD,CAGD,SAASJ,EAAYpU,EAAO,CAC1B,OAAO0U,GAAY1B,EAAQhT,CAAK,CACjC,CAGD,SAAS1qE,GAAM,CAEb,KAAM,CACJ,aAAAq/E,EACA,OAAAC,EACA,KAAAC,EACA,OAAA3d,EACA,OAAAmL,CACD,EAAG7xC,EACJ,MAAO,CACL,aAAAmkD,EACA,OAAAC,EACA,KAAAC,EACA,OAAA3d,EACA,OAAAmL,CACN,CACG,CAGD,SAAS6R,EAAW9jF,EAAO,CACzBwjF,EAAYxjF,EAAM,IAAI,EAAIA,EAAM,OAChC0kF,GACD,CAiBD,SAASR,GAAO,CAEd,IAAIS,EACJ,KAAOvkD,EAAM,OAASwiD,EAAO,QAAQ,CACnC,MAAMG,EAAQH,EAAOxiD,EAAM,MAAM,EAGjC,GAAI,OAAO2iD,GAAU,SAKnB,IAJA4B,EAAavkD,EAAM,OACfA,EAAM,aAAe,IACvBA,EAAM,aAAe,GAEhBA,EAAM,SAAWukD,GAAcvkD,EAAM,aAAe2iD,EAAM,QAC/D6B,EAAG7B,EAAM,WAAW3iD,EAAM,YAAY,CAAC,OAGzCwkD,EAAG7B,CAAK,CAEX,CACF,CAUD,SAAS6B,EAAGjkF,EAAM,CAGhBwe,EAAQA,EAAMxe,CAAI,CACnB,CAGD,SAASkjF,EAAQljF,EAAM,CACjB8tE,GAAmB9tE,CAAI,GACzBy/B,EAAM,OACNA,EAAM,OAAS,EACfA,EAAM,QAAUz/B,IAAS,GAAK,EAAI,EAClC+jF,KACS/jF,IAAS,KAClBy/B,EAAM,SACNA,EAAM,UAIJA,EAAM,aAAe,EACvBA,EAAM,UAENA,EAAM,eAGFA,EAAM,eAIVwiD,EAAOxiD,EAAM,MAAM,EAAE,SACnBA,EAAM,aAAe,GACrBA,EAAM,WAKV/R,EAAQ,SAAW1tB,CAIpB,CAGD,SAASm1E,EAAM9yE,EAAM6hF,EAAQ,CAG3B,MAAMjV,EAAQiV,GAAU,GACxB,OAAAjV,EAAM,KAAO5sE,EACb4sE,EAAM,MAAQ1qE,IACdmpB,EAAQ,OAAO,KAAK,CAAC,QAASuhD,EAAOvhD,CAAO,CAAC,EAC7C9yB,EAAM,KAAKq0E,CAAK,EACTA,CACR,CAGD,SAASwD,EAAKpwE,EAAM,CAClB,MAAM4sE,EAAQr0E,EAAM,MACpB,OAAAq0E,EAAM,IAAM1qE,IACZmpB,EAAQ,OAAO,KAAK,CAAC,OAAQuhD,EAAOvhD,CAAO,CAAC,EACrCuhD,CACR,CAOD,SAAS+T,EAAsBmB,EAAWtgB,EAAM,CAC9C2f,EAAUW,EAAWtgB,EAAK,IAAI,CAC/B,CAOD,SAASof,EAAkBtiF,EAAGkjE,EAAM,CAClCA,EAAK,QAAO,CACb,CAUD,SAASkf,EAAiBqB,EAAUF,EAAQ,CAC1C,OAAOlX,EAeP,SAASA,EAAKC,EAAYmP,EAAaiI,EAAY,CAEjD,IAAIC,GAEAC,EAEAC,EAEA3gB,EACJ,OAAO,MAAM,QAAQoJ,CAAU,EAC/BwX,GAAuBxX,CAAU,EAAI,aAAcA,EAEnDwX,GAAuB,CAA0BxX,CAAU,CAAE,EAAIyX,EAAsBzX,CAAU,EAUjG,SAASyX,EAAsBC,EAAK,CAClC,OAAO5oB,GAGP,SAASA,GAAM/7D,GAAM,CACnB,MAAM8/B,GAAO9/B,KAAS,MAAQ2kF,EAAI3kF,EAAI,EAChCmsE,GAAMnsE,KAAS,MAAQ2kF,EAAI,KAC3BpY,GAAO,CAGb,GAAI,MAAM,QAAQzsC,EAAI,EAAIA,GAAOA,GAAO,CAACA,EAAI,EAAI,GAAK,GAAI,MAAM,QAAQqsC,EAAG,EAAIA,GAAMA,GAAM,CAACA,EAAG,EAAI,CAAE,CAAC,EACtG,OAAOsY,GAAuBlY,EAAI,EAAEvsE,EAAI,CACzC,CACF,CAUD,SAASykF,GAAuBlY,EAAM,CAGpC,OAFA+X,GAAmB/X,EACnBgY,EAAiB,EACbhY,EAAK,SAAW,EACX8X,EAEFO,EAAgBrY,EAAKgY,CAAc,CAAC,CAC5C,CAUD,SAASK,EAAgBT,EAAW,CAClC,OAAOpoB,GAGP,SAASA,GAAM/7D,GAAM,CAanB,OARA6jE,EAAOpyD,EAAK,EACZ+yE,EAAmBL,EACdA,EAAU,UACbz2D,EAAQ,iBAAmBy2D,GAKzBA,EAAU,MAAQz2D,EAAQ,OAAO,WAAW,QAAQ,KAAK,SAASy2D,EAAU,IAAI,EAC3ExT,GAAQ,EAEVwT,EAAU,SAAS,KAI1BD,EAAS,OAAO,OAAO,OAAO,OAAOx2D,CAAO,EAAGw2D,CAAM,EAAIx2D,EAAS+gD,EAASC,GAAIiC,EAAG,EAAE3wE,EAAI,CACzF,CACF,CAGD,SAAS0uE,GAAG1uE,EAAM,CAEhB,OAAAokF,EAASI,EAAkB3gB,CAAI,EACxBuY,CACR,CAGD,SAASzL,GAAI3wE,EAAM,CAGjB,OADA6jE,EAAK,QAAO,EACR,EAAE0gB,EAAiBD,GAAiB,OAC/BM,EAAgBN,GAAiBC,CAAc,CAAC,EAElDF,CACR,CACF,CACF,CAUD,SAASb,EAAUW,EAAW9nE,EAAM,CAC9B8nE,EAAU,YAAc,CAACrB,EAAqB,SAASqB,CAAS,GAClErB,EAAqB,KAAKqB,CAAS,EAEjCA,EAAU,SACZ7X,GAAO5+C,EAAQ,OAAQrR,EAAMqR,EAAQ,OAAO,OAASrR,EAAM8nE,EAAU,QAAQz2D,EAAQ,OAAO,MAAMrR,CAAI,EAAGqR,CAAO,CAAC,EAE/Gy2D,EAAU,YACZz2D,EAAQ,OAASy2D,EAAU,UAAUz2D,EAAQ,OAAQA,CAAO,EAE/D,CAQD,SAASjc,GAAQ,CACf,MAAMozE,EAAatgF,IACbugF,EAAgBp3D,EAAQ,SACxBq3D,EAAwBr3D,EAAQ,iBAChCs3D,EAAmBt3D,EAAQ,OAAO,OAClCu3D,EAAa,MAAM,KAAKrqF,CAAK,EACnC,MAAO,CACL,KAAMoqF,EACN,QAAAE,CACN,EAQI,SAASA,GAAU,CACjBzlD,EAAQolD,EACRn3D,EAAQ,SAAWo3D,EACnBp3D,EAAQ,iBAAmBq3D,EAC3Br3D,EAAQ,OAAO,OAASs3D,EACxBpqF,EAAQqqF,EACRlB,GACD,CACF,CASD,SAASA,GAA0B,CAC7BtkD,EAAM,QAAQojD,GAAepjD,EAAM,OAAS,IAC9CA,EAAM,OAASojD,EAAYpjD,EAAM,IAAI,EACrCA,EAAM,QAAUojD,EAAYpjD,EAAM,IAAI,EAAI,EAE7C,CACH,CAYA,SAASkkD,GAAY1B,EAAQhT,EAAO,CAClC,MAAMtf,EAAasf,EAAM,MAAM,OACzBkW,EAAmBlW,EAAM,MAAM,aAC/BmW,EAAWnW,EAAM,IAAI,OACrBoW,EAAiBpW,EAAM,IAAI,aAEjC,IAAIqW,EACJ,GAAI31B,IAAey1B,EAEjBE,EAAO,CAACrD,EAAOtyB,CAAU,EAAE,MAAMw1B,EAAkBE,CAAc,CAAC,MAC7D,CAEL,GADAC,EAAOrD,EAAO,MAAMtyB,EAAYy1B,CAAQ,EACpCD,EAAmB,GAAI,CACzB,MAAMI,EAAOD,EAAK,CAAC,EACf,OAAOC,GAAS,SAClBD,EAAK,CAAC,EAAIC,EAAK,MAAMJ,CAAgB,EAGrCG,EAAK,MAAK,CAEb,CACGD,EAAiB,GAEnBC,EAAK,KAAKrD,EAAOmD,CAAQ,EAAE,MAAM,EAAGC,CAAc,CAAC,CAEtD,CACD,OAAOC,CACT,CAYA,SAAS5B,GAAgBzB,EAAQwB,EAAY,CAC3C,IAAIhpE,EAAQ,GAEZ,MAAM5O,EAAS,GAEf,IAAI25E,EACJ,KAAO,EAAE/qE,EAAQwnE,EAAO,QAAQ,CAC9B,MAAMG,EAAQH,EAAOxnE,CAAK,EAE1B,IAAIpb,EACJ,GAAI,OAAO+iF,GAAU,SACnB/iF,EAAQ+iF,MACH,QAAQA,EAAK,CAClB,IAAK,GACH,CACE/iF,EAAQ,KACR,KACD,CACH,IAAK,GACH,CACEA,EAAQ;AAAA,EACR,KACD,CACH,IAAK,GACH,CACEA,EAAQ;AAAA,EACR,KACD,CACH,IAAK,GACH,CACEA,EAAQokF,EAAa,IAAM,IAC3B,KACD,CACH,IAAK,GACH,CACE,GAAI,CAACA,GAAc+B,EAAO,SAC1BnmF,EAAQ,IACR,KACD,CACH,QAGIA,EAAQ,OAAO,aAAa+iF,CAAK,CAEtC,CACDoD,EAAQpD,IAAU,GAClBv2E,EAAO,KAAKxM,CAAK,CAClB,CACD,OAAOwM,EAAO,KAAK,EAAE,CACvB,CC1kBO,SAAS45E,GAAMziF,EAAS,CAM7B,MAAM2/E,EAAS,CACb,WAJF/V,GAAkB,CAAC8Y,GAAmB,IAFrB1iF,GAAW,IAEuB,YAAc,EAAG,CAAC,EAKnE,QAAS2gE,EAAOtmC,EAAO,EACvB,QAAS,CAAE,EACX,SAAUsmC,EAAOuL,EAAQ,EACzB,KAAMvL,EAAOyd,EAAI,EACjB,KAAM,CAAE,EACR,OAAQzd,EAAOh+C,EAAM,EACrB,KAAMg+C,EAAOpzB,EAAI,CACrB,EACE,OAAOoyC,EAQP,SAAShf,EAAO2R,EAAS,CACvB,OAAOqQ,EAEP,SAASA,EAAQtpE,EAAM,CACrB,OAAOqmE,GAAgBC,EAAQrN,EAASj5D,CAAI,CAC7C,CACF,CACH,CC3CO,SAASupE,GAAY7yC,EAAQ,CAClC,KAAO,CAAC4iC,GAAY5iC,CAAM,GAAG,CAG7B,OAAOA,CACT,CCAA,MAAM4W,GAAS,cAMR,SAASk8B,IAAa,CAC3B,IAAI1f,EAAS,EACTiU,EAAS,GAETre,EAAQ,GAER+pB,EACJ,OAAOC,EAIP,SAASA,EAAa1mF,EAAO2mF,EAAUrd,EAAK,CAE1C,MAAMsZ,EAAS,GAEf,IAAIrjF,EAEA2vE,EAEA8H,EAEA4P,EAEAjmF,EAWJ,IAVAX,EAAQ+6E,GAAU,OAAO/6E,GAAU,SAAWA,EAAM,SAAQ,EAAK,IAAI,YAAY2mF,GAAY,MAAS,EAAE,OAAO3mF,CAAK,GACpHg3E,EAAgB,EAChB+D,EAAS,GACLre,IAEE18D,EAAM,WAAW,CAAC,IAAM,OAC1Bg3E,IAEFta,EAAQ,QAEHsa,EAAgBh3E,EAAM,QAAQ,CAKnC,GAJAsqD,GAAO,UAAY0sB,EACnBz3E,EAAQ+qD,GAAO,KAAKtqD,CAAK,EACzB4mF,EAAcrnF,GAASA,EAAM,QAAU,OAAYA,EAAM,MAAQS,EAAM,OACvEW,EAAOX,EAAM,WAAW4mF,CAAW,EAC/B,CAACrnF,EAAO,CACVw7E,EAAS/6E,EAAM,MAAMg3E,CAAa,EAClC,KACD,CACD,GAAIr2E,IAAS,IAAMq2E,IAAkB4P,GAAeH,EAClD7D,EAAO,KAAK,EAAE,EACd6D,EAAmB,WAUnB,QARIA,IACF7D,EAAO,KAAK,EAAE,EACd6D,EAAmB,QAEjBzP,EAAgB4P,IAClBhE,EAAO,KAAK5iF,EAAM,MAAMg3E,EAAe4P,CAAW,CAAC,EACnD9f,GAAU8f,EAAc5P,GAElBr2E,EAAI,CACV,IAAK,GACH,CACEiiF,EAAO,KAAK,KAAK,EACjB9b,IACA,KACD,CACH,IAAK,GACH,CAGE,IAFAoI,EAAO,KAAK,KAAKpI,EAAS,CAAC,EAAI,EAC/B8b,EAAO,KAAK,EAAE,EACP9b,IAAWoI,GAAM0T,EAAO,KAAK,EAAE,EACtC,KACD,CACH,IAAK,IACH,CACEA,EAAO,KAAK,EAAE,EACd9b,EAAS,EACT,KACD,CACH,QAEI2f,EAAmB,GACnB3f,EAAS,CAEd,CAEHkQ,EAAgB4P,EAAc,CAC/B,CACD,OAAItd,IACEmd,GAAkB7D,EAAO,KAAK,EAAE,EAChC7H,GAAQ6H,EAAO,KAAK7H,CAAM,EAC9B6H,EAAO,KAAK,IAAI,GAEXA,CACR,CACH,CChHA,MAAMiE,GAA6B,oEAc5B,SAASC,GAAa9mF,EAAO,CAClC,OAAOA,EAAM,QAAQ6mF,GAA4BE,EAAM,CACzD,CAYA,SAASA,GAAOnhB,EAAIohB,EAAIC,EAAI,CAC1B,GAAID,EAEF,OAAOA,EAKT,GADaC,EAAG,WAAW,CAAC,IACf,GAAI,CACf,MAAMf,EAAOe,EAAG,WAAW,CAAC,EACtBC,EAAMhB,IAAS,KAAOA,IAAS,GACrC,OAAOnY,GAAgCkZ,EAAG,MAAMC,EAAM,EAAI,CAAC,EAAGA,EAAM,GAAK,EAAE,CAC5E,CACD,OAAOna,GAA8Bka,CAAE,GAAKrhB,CAC9C,CCIA,MAAMkE,GAAM,CAAE,EAAC,eAyBR,SAASqd,GAAannF,EAAO2mF,EAAUhjF,EAAS,CACrD,OAAI,OAAOgjF,GAAa,WACtBhjF,EAAUgjF,EACVA,EAAW,QAENS,GAASzjF,CAAO,EAAE4iF,GAAYH,GAAMziF,CAAO,EAAE,SAAQ,EAAG,MAAM6iF,GAAY,EAACxmF,EAAO2mF,EAAU,EAAI,CAAC,CAAC,CAAC,CAC5G,CAOA,SAASS,GAASzjF,EAAS,CAEzB,MAAMwH,EAAS,CACb,WAAY,CAAE,EACd,eAAgB,CAAC,WAAY,WAAY,UAAW,YAAa,QAAQ,EACzE,MAAO,CACL,SAAUk8E,EAAOC,CAAI,EACrB,iBAAkBC,EAClB,cAAeA,EACf,WAAYF,EAAOxF,EAAO,EAC1B,WAAYwF,EAAOnU,EAAU,EAC7B,gBAAiBqU,EACjB,mBAAoBA,EACpB,WAAYF,EAAOG,EAAQ,EAC3B,oBAAqBzM,EACrB,oBAAqBA,EACrB,aAAcsM,EAAOG,GAAUzM,CAAM,EACrC,SAAUsM,EAAO5R,GAAUsF,CAAM,EACjC,aAAcwM,EACd,KAAMA,EACN,cAAeA,EACf,WAAYF,EAAOhkB,EAAU,EAC7B,4BAA6B0X,EAC7B,sBAAuBA,EACvB,sBAAuBA,EACvB,SAAUsM,EAAOI,EAAQ,EACzB,gBAAiBJ,EAAOK,EAAS,EACjC,kBAAmBL,EAAOK,EAAS,EACnC,SAAUL,EAAOxiB,GAAMkW,CAAM,EAC7B,aAAcwM,EACd,SAAUF,EAAOxiB,GAAMkW,CAAM,EAC7B,aAAcwM,EACd,MAAOF,EAAOnoB,CAAK,EACnB,MAAO6b,EACP,KAAMsM,EAAOC,CAAI,EACjB,SAAUD,EAAOM,CAAQ,EACzB,cAAeC,EACf,YAAaP,EAAOna,EAAM2a,CAAkB,EAC5C,cAAeR,EAAOna,CAAI,EAC1B,UAAWma,EAAOvF,CAAS,EAC3B,UAAWgG,EACX,gBAAiB/M,EACjB,0BAA2BA,EAC3B,oBAAqBA,EACrB,cAAesM,EAAOxF,EAAO,EAC7B,OAAQwF,EAAOU,CAAM,EACrB,cAAeV,EAAO7G,EAAa,CACpC,EACD,KAAM,CACJ,WAAYwH,EAAQ,EACpB,mBAAoBC,EACpB,SAAUD,EAAQ,EAClB,cAAeE,GACf,iBAAkBC,GAClB,WAAYH,EAAQ,EACpB,qBAAsBI,EACtB,oCAAqCC,GACrC,gCAAiCA,GACjC,wBAAyBC,EACzB,mBAAoBC,GACpB,WAAYP,EAAOQ,CAAgB,EACnC,gBAAiBC,EACjB,oBAAqBC,EACrB,oBAAqBC,EACrB,cAAeP,EACf,aAAcJ,EAAOY,CAAkB,EACvC,SAAUZ,EAAOa,CAAc,EAC/B,aAAcT,EACd,KAAMA,EACN,WAAYJ,EAAQ,EACpB,4BAA6Bc,EAC7B,sBAAuBC,EACvB,sBAAuBC,EACvB,SAAUhB,EAAQ,EAClB,gBAAiBA,EAAOiB,CAAe,EACvC,kBAAmBjB,EAAOiB,CAAe,EACzC,SAAUjB,EAAOkB,CAAc,EAC/B,aAAcd,EACd,SAAUJ,EAAOmB,CAAc,EAC/B,aAAcf,EACd,MAAOJ,EAAOoB,EAAW,EACzB,MAAOC,EACP,UAAWC,EACX,WAAYC,EACZ,KAAMvB,EAAOwB,CAAU,EACvB,SAAUxB,EAAQ,EAClB,YAAaA,EAAQ,EACrB,cAAeA,EAAQ,EACvB,UAAWA,EAAQ,EACnB,gBAAiByB,GACjB,0BAA2BC,EAC3B,oBAAqBC,EACrB,SAAUC,GACV,cAAe5B,EAAO6B,CAAmB,EACzC,0BAA2BC,EAC3B,kBAAmBC,EACnB,OAAQ/B,EAAQ,EAChB,cAAeA,EAAQ,CACxB,CACL,EACEgC,GAAU7+E,GAASxH,GAAW,IAAI,iBAAmB,EAAE,EAGvD,MAAM3C,EAAO,GACb,OAAOipF,EAUP,SAASA,EAAQv2C,EAAQ,CAEvB,IAAI02B,EAAO,CACT,KAAM,OACN,SAAU,CAAE,CAClB,EAEI,MAAM/7C,GAAU,CACd,MAAO,CAAC+7C,CAAI,EACZ,WAAY,CAAE,EACd,OAAAj/D,EACA,MAAA2qE,EACA,KAAA1C,EACA,OAAA2H,EACA,OAAAmP,EACA,KAAAlpF,CACN,EAEUmpF,GAAY,GAClB,IAAI/uE,GAAQ,GACZ,KAAO,EAAEA,GAAQs4B,EAAO,QAGtB,GAAIA,EAAOt4B,EAAK,EAAE,CAAC,EAAE,OAAS,eAAiBs4B,EAAOt4B,EAAK,EAAE,CAAC,EAAE,OAAS,gBACvE,GAAIs4B,EAAOt4B,EAAK,EAAE,CAAC,IAAM,QACvB+uE,GAAU,KAAK/uE,EAAK,MACf,CACL,MAAMk5D,GAAO6V,GAAU,MACvB/uE,GAAQgvE,EAAY12C,EAAQ4gC,GAAMl5D,EAAK,CACxC,CAIL,IADAA,GAAQ,GACD,EAAEA,GAAQs4B,EAAO,QAAQ,CAC9B,MAAMmd,GAAU1lD,EAAOuoC,EAAOt4B,EAAK,EAAE,CAAC,CAAC,EACnC0uD,GAAI,KAAKjZ,GAASnd,EAAOt4B,EAAK,EAAE,CAAC,EAAE,IAAI,GACzCy1C,GAAQnd,EAAOt4B,EAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,OAAO,OAAO,CAChD,eAAgBs4B,EAAOt4B,EAAK,EAAE,CAAC,EAAE,cAC3C,EAAWiT,EAAO,EAAGqlB,EAAOt4B,EAAK,EAAE,CAAC,CAAC,CAEhC,CAGD,GAAIiT,GAAQ,WAAW,OAAS,EAAG,CACjC,MAAMimD,GAAOjmD,GAAQ,WAAWA,GAAQ,WAAW,OAAS,CAAC,GAC7CimD,GAAK,CAAC,GAAK+V,IACnB,KAAKh8D,GAAS,OAAWimD,GAAK,CAAC,CAAC,CACzC,CAkBD,IAfAlK,EAAK,SAAW,CACd,MAAOhqC,GAAMsT,EAAO,OAAS,EAAIA,EAAO,CAAC,EAAE,CAAC,EAAE,MAAQ,CACpD,KAAM,EACN,OAAQ,EACR,OAAQ,CAChB,CAAO,EACD,IAAKtT,GAAMsT,EAAO,OAAS,EAAIA,EAAOA,EAAO,OAAS,CAAC,EAAE,CAAC,EAAE,IAAM,CAChE,KAAM,EACN,OAAQ,EACR,OAAQ,CAChB,CAAO,CACP,EAGIt4B,GAAQ,GACD,EAAEA,GAAQjQ,EAAO,WAAW,QACjCi/D,EAAOj/D,EAAO,WAAWiQ,EAAK,EAAEgvD,CAAI,GAAKA,EAE3C,OAAOA,CACR,CAQD,SAASggB,EAAY12C,EAAQgpB,EAAO4tB,GAAQ,CAC1C,IAAIlvE,GAAQshD,EAAQ,EAChB6tB,GAAmB,GACnBC,GAAa,GAEb7C,GAEAlR,GAEAgU,GAEArJ,GACJ,KAAO,EAAEhmE,IAASkvE,IAAQ,CACxB,MAAM1tF,GAAQ82C,EAAOt4B,EAAK,EAC1B,OAAQxe,GAAM,CAAC,EAAE,KAAI,CACnB,IAAK,gBACL,IAAK,cACL,IAAK,aACH,CACMA,GAAM,CAAC,IAAM,QACf2tF,KAEAA,KAEFnJ,GAAW,OACX,KACD,CACH,IAAK,kBACH,CACMxkF,GAAM,CAAC,IAAM,UACX+qF,IAAY,CAACvG,IAAY,CAACmJ,IAAoB,CAACE,KACjDA,GAAsBrvE,IAExBgmE,GAAW,QAEb,KACD,CACH,IAAK,aACL,IAAK,gBACL,IAAK,iBACL,IAAK,iBACL,IAAK,2BAID,MAEJ,QAEIA,GAAW,MAEhB,CACD,GAAI,CAACmJ,IAAoB3tF,GAAM,CAAC,IAAM,SAAWA,GAAM,CAAC,EAAE,OAAS,kBAAoB2tF,KAAqB,IAAM3tF,GAAM,CAAC,IAAM,SAAWA,GAAM,CAAC,EAAE,OAAS,iBAAmBA,GAAM,CAAC,EAAE,OAAS,eAAgB,CAC/M,GAAI+qF,GAAU,CACZ,IAAI+C,GAAYtvE,GAEhB,IADAq7D,GAAY,OACLiU,MAAa,CAClB,MAAMC,GAAYj3C,EAAOg3C,EAAS,EAClC,GAAIC,GAAU,CAAC,EAAE,OAAS,cAAgBA,GAAU,CAAC,EAAE,OAAS,kBAAmB,CACjF,GAAIA,GAAU,CAAC,IAAM,OAAQ,SACzBlU,KACF/iC,EAAO+iC,EAAS,EAAE,CAAC,EAAE,KAAO,kBAC5B+T,GAAa,IAEfG,GAAU,CAAC,EAAE,KAAO,aACpBlU,GAAYiU,EACb,SAAU,EAAAC,GAAU,CAAC,EAAE,OAAS,cAAgBA,GAAU,CAAC,EAAE,OAAS,oBAAsBA,GAAU,CAAC,EAAE,OAAS,8BAAgCA,GAAU,CAAC,EAAE,OAAS,oBAAsBA,GAAU,CAAC,EAAE,OAAS,kBAGnN,KAEH,CACGF,KAAwB,CAAChU,IAAagU,GAAsBhU,MAC9DkR,GAAS,QAAU,IAIrBA,GAAS,IAAM,OAAO,OAAO,CAAE,EAAElR,GAAY/iC,EAAO+iC,EAAS,EAAE,CAAC,EAAE,MAAQ75E,GAAM,CAAC,EAAE,GAAG,EACtF82C,EAAO,OAAO+iC,IAAar7D,GAAO,EAAG,CAAC,OAAQusE,GAAU/qF,GAAM,CAAC,CAAC,CAAC,EACjEwe,KACAkvE,IACD,CAGD,GAAI1tF,GAAM,CAAC,EAAE,OAAS,iBAAkB,CAEtC,MAAM2nC,GAAO,CACX,KAAM,WACN,QAAS,GACT,MAAO,OAAO,OAAO,GAAI3nC,GAAM,CAAC,EAAE,KAAK,EAEvC,IAAK,MACjB,EACU+qF,GAAWpjD,GACXmP,EAAO,OAAOt4B,GAAO,EAAG,CAAC,QAASmpB,GAAM3nC,GAAM,CAAC,CAAC,CAAC,EACjDwe,KACAkvE,KACAG,GAAsB,OACtBrJ,GAAW,EACZ,CACF,CACF,CACD,OAAA1tC,EAAOgpB,CAAK,EAAE,CAAC,EAAE,QAAU8tB,GACpBF,EACR,CAYD,SAASjD,EAAO/iB,EAAQsmB,EAAK,CAC3B,OAAOlrE,GAOP,SAASA,GAAKkwD,GAAO,CACnBkG,EAAM,KAAK,KAAMxR,EAAOsL,EAAK,EAAGA,EAAK,EACjCgb,GAAKA,EAAI,KAAK,KAAMhb,EAAK,CAC9B,CACF,CAKD,SAASmL,GAAS,CAChB,KAAK,MAAM,KAAK,CACd,KAAM,WACN,SAAU,CAAE,CAClB,CAAK,CACF,CAKD,SAASjF,EAAMhX,EAAM8Q,EAAOib,GAAc,CACzB,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAEvB,SACf,KAAK/rB,CAAI,EAClB,KAAK,MAAM,KAAKA,CAAI,EACpB,KAAK,WAAW,KAAK,CAAC8Q,EAAOib,IAAgB,MAAS,CAAC,EACvD/rB,EAAK,SAAW,CACd,MAAO1+B,GAAMwvC,EAAM,KAAK,EAExB,IAAK,MACX,CACG,CAUD,SAASoY,EAAO4C,EAAK,CACnB,OAAOtY,EAOP,SAASA,EAAM1C,GAAO,CAChBgb,GAAKA,EAAI,KAAK,KAAMhb,EAAK,EAC7BwD,EAAK,KAAK,KAAMxD,EAAK,CACtB,CACF,CAKD,SAASwD,EAAKxD,EAAOkb,EAAa,CAChC,MAAMhsB,GAAO,KAAK,MAAM,IAAG,EACrBp/C,GAAO,KAAK,WAAW,IAAG,EAChC,GAAKA,GAKMA,GAAK,CAAC,EAAE,OAASkwD,EAAM,OAC5Bkb,EACFA,EAAY,KAAK,KAAMlb,EAAOlwD,GAAK,CAAC,CAAC,GAErBA,GAAK,CAAC,GAAK2qE,IACnB,KAAK,KAAMza,EAAOlwD,GAAK,CAAC,CAAC,OATnC,OAAM,IAAI,MAAM,iBAAmBkwD,EAAM,KAAO,MAAQrG,GAAkB,CACxE,MAAOqG,EAAM,MACb,IAAKA,EAAM,GACnB,CAAO,EAAI,kBAAkB,EASzB9Q,GAAK,SAAS,IAAM1+B,GAAMwvC,EAAM,GAAG,CACpC,CAKD,SAASsa,GAAS,CAChB,OAAOvd,GAAS,KAAK,MAAM,IAAK,EACjC,CAUD,SAASkb,GAAqB,CAC5B,KAAK,KAAK,4BAA8B,EACzC,CAMD,SAASD,EAAqBhY,EAAO,CACnC,GAAI,KAAK,KAAK,4BAA6B,CACzC,MAAMmb,EAAW,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EACjDA,EAAS,MAAQ,OAAO,SAAS,KAAK,eAAenb,CAAK,EAAG,EAAE,EAC/D,KAAK,KAAK,4BAA8B,MACzC,CACF,CAMD,SAAS8Y,GAA4B,CACnC,MAAM1nF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,KAAO99D,CACb,CAMD,SAAS2nF,GAA4B,CACnC,MAAM3nF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,KAAO99D,CACb,CAMD,SAASynF,GAAwB,CAE3B,KAAK,KAAK,iBACd,KAAK,OAAM,EACX,KAAK,KAAK,eAAiB,GAC5B,CAMD,SAASD,GAAmB,CAC1B,MAAMxnF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,EAAK,QAAQ,2BAA4B,EAAE,EACxD,KAAK,KAAK,eAAiB,MAC5B,CAMD,SAAS4nF,GAAqB,CAC5B,MAAM5nF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,EAAK,QAAQ,eAAgB,EAAE,CAC7C,CAMD,SAAS+nF,EAA4BnZ,EAAO,CAC1C,MAAM1mD,EAAQ,KAAK,SACb41C,GAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,GAAK,MAAQ51C,EACb41C,GAAK,WAAakP,GAAoB,KAAK,eAAe4B,CAAK,CAAC,EAAE,aACnE,CAMD,SAASoZ,GAA8B,CACrC,MAAMhoF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,CACd,CAMD,SAAS8nF,GAAoC,CAC3C,MAAM9nF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,IAAM99D,CACZ,CAMD,SAASinF,EAAyBrY,EAAO,CACvC,MAAM9Q,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7C,GAAI,CAACA,EAAK,MAAO,CACf,MAAMksB,GAAQ,KAAK,eAAepb,CAAK,EAAE,OACzC9Q,EAAK,MAAQksB,EACd,CACF,CAMD,SAASjB,GAA0B,CACjC,KAAK,KAAK,6BAA+B,EAC1C,CAMD,SAASD,EAAgCla,EAAO,CAC9C,MAAM9Q,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ,KAAK,eAAe8Q,CAAK,EAAE,YAAY,CAAC,IAAM,GAAK,EAAI,CACrE,CAMD,SAASia,GAAsB,CAC7B,KAAK,KAAK,6BAA+B,MAC1C,CAOD,SAAStC,EAAY3X,EAAO,CAG1B,MAAMqb,GAFO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAEvB,SACtB,IAAI3W,GAAO2W,GAASA,GAAS,OAAS,CAAC,GACnC,CAAC3W,IAAQA,GAAK,OAAS,UAEzBA,GAAOpjC,GAAI,EACXojC,GAAK,SAAW,CACd,MAAOl0C,GAAMwvC,EAAM,KAAK,EAExB,IAAK,MACb,EACMqb,GAAS,KAAK3W,EAAI,GAEpB,KAAK,MAAM,KAAKA,EAAI,CACrB,CAOD,SAAS8T,EAAWxY,EAAO,CACzB,MAAM0E,EAAO,KAAK,MAAM,IAAG,EAC3BA,EAAK,OAAS,KAAK,eAAe1E,CAAK,EACvC0E,EAAK,SAAS,IAAMl0C,GAAMwvC,EAAM,GAAG,CACpC,CAOD,SAAS2Z,EAAiB3Z,EAAO,CAC/B,MAAMvhD,EAAU,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAEhD,GAAI,KAAK,KAAK,YAAa,CACzB,MAAMimD,GAAOjmD,EAAQ,SAASA,EAAQ,SAAS,OAAS,CAAC,EACzDimD,GAAK,SAAS,IAAMl0C,GAAMwvC,EAAM,GAAG,EACnC,KAAK,KAAK,YAAc,OACxB,MACD,CACG,CAAC,KAAK,KAAK,8BAAgCzkE,EAAO,eAAe,SAASkjB,EAAQ,IAAI,IACxFk5D,EAAY,KAAK,KAAM3X,CAAK,EAC5BwY,EAAW,KAAK,KAAMxY,CAAK,EAE9B,CAOD,SAASqZ,GAAkB,CACzB,KAAK,KAAK,YAAc,EACzB,CAOD,SAASC,GAAiB,CACxB,MAAMloF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,CACd,CAOD,SAASmoF,GAAiB,CACxB,MAAMnoF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,CACd,CAOD,SAAS6nF,GAAiB,CACxB,MAAM7nF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,CACd,CAOD,SAASwoF,GAAa,CACpB,MAAM1qB,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAK7C,GAAI,KAAK,KAAK,YAAa,CAEzB,MAAMosB,EAAgB,KAAK,KAAK,eAAiB,WACjDpsB,EAAK,MAAQ,YAEbA,EAAK,cAAgBosB,EAErB,OAAOpsB,EAAK,IACZ,OAAOA,EAAK,KAClB,MAEM,OAAOA,EAAK,WAEZ,OAAOA,EAAK,MAEd,KAAK,KAAK,cAAgB,MAC3B,CAOD,SAASsqB,IAAc,CACrB,MAAMtqB,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAK7C,GAAI,KAAK,KAAK,YAAa,CAEzB,MAAMosB,EAAgB,KAAK,KAAK,eAAiB,WACjDpsB,EAAK,MAAQ,YAEbA,EAAK,cAAgBosB,EAErB,OAAOpsB,EAAK,IACZ,OAAOA,EAAK,KAClB,MAEM,OAAOA,EAAK,WAEZ,OAAOA,EAAK,MAEd,KAAK,KAAK,cAAgB,MAC3B,CAOD,SAASwqB,EAAgB1Z,EAAO,CAC9B,MAAMtpD,EAAS,KAAK,eAAespD,CAAK,EAClCmb,GAAW,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAGjDA,GAAS,MAAQjE,GAAaxgE,CAAM,EAEpCykE,GAAS,WAAa/c,GAAoB1nD,CAAM,EAAE,YAAW,CAC9D,CAOD,SAAS+iE,GAAc,CACrB,MAAM8B,EAAW,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC3CnrF,EAAQ,KAAK,SACb8+D,GAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAG7C,GADA,KAAK,KAAK,YAAc,GACpBA,GAAK,OAAS,OAAQ,CAExB,MAAM1kC,GAAW+wD,EAAS,SAC1BrsB,GAAK,SAAW1kC,EACtB,MACM0kC,GAAK,IAAM9+D,CAEd,CAOD,SAAS0pF,GAAkC,CACzC,MAAM1oF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,IAAM99D,CACZ,CAOD,SAAS2oF,GAA4B,CACnC,MAAM3oF,EAAO,KAAK,SACZ89D,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,MAAQ99D,CACd,CAOD,SAAS4oF,IAAiB,CACxB,KAAK,KAAK,YAAc,MACzB,CAOD,SAAS9B,GAAmB,CAC1B,KAAK,KAAK,cAAgB,WAC3B,CAOD,SAAS2B,GAAsB7Z,EAAO,CACpC,MAAM1mD,EAAQ,KAAK,SACb41C,GAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAG7CA,GAAK,MAAQ51C,EAEb41C,GAAK,WAAakP,GAAoB,KAAK,eAAe4B,CAAK,CAAC,EAAE,cAClE,KAAK,KAAK,cAAgB,MAC3B,CAOD,SAASyY,GAA+BzY,EAAO,CAC7C,KAAK,KAAK,uBAAyBA,EAAM,IAC1C,CAMD,SAAS0Y,EAA8B1Y,EAAO,CAC5C,MAAM5uE,EAAO,KAAK,eAAe4uE,CAAK,EAChC5sE,GAAO,KAAK,KAAK,uBAEvB,IAAIhD,GACAgD,IACFhD,GAAQ+tE,GAAgC/sE,EAAMgC,KAAS,kCAAoC,GAAK,EAAE,EAClG,KAAK,KAAK,uBAAyB,QAGnChD,GADe+sE,GAA8B/rE,CAAI,EAGnD,MAAMszE,GAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,GAAK,OAASt0E,EACf,CAMD,SAASuoF,GAAyB3Y,EAAO,CACvC,MAAM0E,EAAO,KAAK,MAAM,IAAG,EAC3BA,EAAK,SAAS,IAAMl0C,GAAMwvC,EAAM,GAAG,CACpC,CAMD,SAASuY,GAAuBvY,EAAO,CACrCwY,EAAW,KAAK,KAAMxY,CAAK,EAC3B,MAAM9Q,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,IAAM,KAAK,eAAe8Q,CAAK,CACrC,CAMD,SAASsY,GAAoBtY,EAAO,CAClCwY,EAAW,KAAK,KAAMxY,CAAK,EAC3B,MAAM9Q,EAAO,KAAK,MAAM,KAAK,MAAM,OAAS,CAAC,EAC7CA,EAAK,IAAM,UAAY,KAAK,eAAe8Q,CAAK,CACjD,CAOD,SAASsD,IAAa,CACpB,MAAO,CACL,KAAM,aACN,SAAU,CAAE,CAClB,CACG,CAGD,SAASsU,IAAW,CAClB,MAAO,CACL,KAAM,OACN,KAAM,KACN,KAAM,KACN,MAAO,EACb,CACG,CAGD,SAAS/R,IAAW,CAClB,MAAO,CACL,KAAM,aACN,MAAO,EACb,CACG,CAGD,SAASpS,IAAa,CACpB,MAAO,CACL,KAAM,aACN,WAAY,GACZ,MAAO,KACP,MAAO,KACP,IAAK,EACX,CACG,CAGD,SAASokB,IAAW,CAClB,MAAO,CACL,KAAM,WACN,SAAU,CAAE,CAClB,CACG,CAGD,SAAS5F,IAAU,CACjB,MAAO,CACL,KAAM,UAEN,MAAO,EACP,SAAU,CAAE,CAClB,CACG,CAGD,SAAS6F,IAAY,CACnB,MAAO,CACL,KAAM,OACZ,CACG,CAGD,SAAS7iB,IAAO,CACd,MAAO,CACL,KAAM,OACN,MAAO,EACb,CACG,CAGD,SAAS3F,GAAQ,CACf,MAAO,CACL,KAAM,QACN,MAAO,KACP,IAAK,GACL,IAAK,IACX,CACG,CAGD,SAASooB,GAAO,CACd,MAAO,CACL,KAAM,OACN,MAAO,KACP,IAAK,GACL,SAAU,CAAE,CAClB,CACG,CAMD,SAASpa,EAAK0C,EAAO,CACnB,MAAO,CACL,KAAM,OACN,QAASA,EAAM,OAAS,cACxB,MAAO,KACP,OAAQA,EAAM,QACd,SAAU,CAAE,CAClB,CACG,CAMD,SAAS+X,EAAS/X,EAAO,CACvB,MAAO,CACL,KAAM,WACN,OAAQA,EAAM,QACd,QAAS,KACT,SAAU,CAAE,CAClB,CACG,CAGD,SAASkS,GAAY,CACnB,MAAO,CACL,KAAM,YACN,SAAU,CAAE,CAClB,CACG,CAGD,SAASiG,GAAS,CAChB,MAAO,CACL,KAAM,SACN,SAAU,CAAE,CAClB,CACG,CAGD,SAAS72C,IAAO,CACd,MAAO,CACL,KAAM,OACN,MAAO,EACb,CACG,CAGD,SAASsvC,IAAgB,CACvB,MAAO,CACL,KAAM,eACZ,CACG,CACH,CAUA,SAASpgD,GAAM7S,EAAG,CAChB,MAAO,CACL,KAAMA,EAAE,KACR,OAAQA,EAAE,OACV,OAAQA,EAAE,MACd,CACA,CAOA,SAASy8D,GAAUoB,EAAU5d,EAAY,CACvC,IAAIpyD,EAAQ,GACZ,KAAO,EAAEA,EAAQoyD,EAAW,QAAQ,CAClC,MAAMxtE,EAAQwtE,EAAWpyD,CAAK,EAC1B,MAAM,QAAQpb,CAAK,EACrBgqF,GAAUoB,EAAUprF,CAAK,EAEzB0tE,GAAU0d,EAAUprF,CAAK,CAE5B,CACH,CAOA,SAAS0tE,GAAU0d,EAAU1d,EAAW,CAEtC,IAAInsE,EACJ,IAAKA,KAAOmsE,EACV,GAAI5D,GAAI,KAAK4D,EAAWnsE,CAAG,EACzB,OAAQA,EAAG,CACT,IAAK,iBACH,CACE,MAAMi/B,EAAQktC,EAAUnsE,CAAG,EACvBi/B,GACF4qD,EAAS7pF,CAAG,EAAE,KAAK,GAAGi/B,CAAK,EAE7B,KACD,CACH,IAAK,aACH,CACE,MAAMA,EAAQktC,EAAUnsE,CAAG,EACvBi/B,GACF4qD,EAAS7pF,CAAG,EAAE,KAAK,GAAGi/B,CAAK,EAE7B,KACD,CACH,IAAK,QACL,IAAK,OACH,CACE,MAAMA,EAAQktC,EAAUnsE,CAAG,EACvBi/B,GACF,OAAO,OAAO4qD,EAAS7pF,CAAG,EAAGi/B,CAAK,EAEpC,KACD,CAEJ,CAGP,CAGA,SAAS6pD,GAAe5pD,EAAMD,EAAO,CACnC,MAAIC,EACI,IAAI,MAAM,iBAAmBA,EAAK,KAAO,MAAQ8oC,GAAkB,CACvE,MAAO9oC,EAAK,MACZ,IAAKA,EAAK,GACX,GAAI,0BAA4BD,EAAM,KAAO,MAAQ+oC,GAAkB,CACtE,MAAO/oC,EAAM,MACb,IAAKA,EAAM,GACjB,CAAK,EAAI,WAAW,EAEV,IAAI,MAAM,oCAAsCA,EAAM,KAAO,MAAQ+oC,GAAkB,CAC3F,MAAO/oC,EAAM,MACb,IAAKA,EAAM,GACjB,CAAK,EAAI,iBAAiB,CAE1B,CCnoCe,SAAS6qD,GAAY1nF,EAAS,CAG3C,MAAMssE,EAAO,KAEbA,EAAK,OAASqT,EAKd,SAASA,EAAOgI,EAAK,CACnB,OAAOnE,GAAamE,EAAK,CACvB,GAAGrb,EAAK,KAAK,UAAU,EACvB,GAAGtsE,EAIH,WAAYssE,EAAK,KAAK,qBAAqB,GAAK,CAAE,EAClD,gBAAiBA,EAAK,KAAK,wBAAwB,GAAK,CAAE,CAChE,CAAK,CACF,CACH,CCvBO,SAASsb,GAAWpsE,EAAO2/C,EAAM,CAEtC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,aACT,WAAY,CAAE,EACd,SAAU2S,EAAM,KAAKA,EAAM,IAAI2/C,CAAI,EAAG,EAAI,CAC3C,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCTO,SAASk7E,GAAUvoE,EAAO2/C,EAAM,CAErC,MAAMtyD,EAAS,CAAC,KAAM,UAAW,QAAS,KAAM,WAAY,GAAI,SAAU,EAAE,EAC5E,OAAA2S,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB,CAAC2S,EAAM,UAAU2/C,EAAMtyD,CAAM,EAAG,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,CACpE,CCLO,SAAS7L,GAAKwe,EAAO2/C,EAAM,CAChC,MAAM9+D,EAAQ8+D,EAAK,MAAQA,EAAK,MAAQ;AAAA,EAAO,GAEzCniD,EAAa,CAAE,EAEjBmiD,EAAK,OACPniD,EAAW,UAAY,CAAC,YAAcmiD,EAAK,IAAI,GAKjD,IAAItyD,EAAS,CACX,KAAM,UACN,QAAS,OACT,WAAAmQ,EACA,SAAU,CAAC,CAAC,KAAM,OAAQ,MAAA3c,CAAK,CAAC,CACjC,EAED,OAAI8+D,EAAK,OACPtyD,EAAO,KAAO,CAAC,KAAMsyD,EAAK,IAAI,GAGhC3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACxBA,EAAS2S,EAAM,UAAU2/C,EAAMtyD,CAAM,EAGrCA,EAAS,CAAC,KAAM,UAAW,QAAS,MAAO,WAAY,GAAI,SAAU,CAACA,CAAM,CAAC,EAC7E2S,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjBA,CACT,CC9BO,SAASg/E,GAAcrsE,EAAO2/C,EAAM,CAEzC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,MACT,WAAY,CAAE,EACd,SAAU2S,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCVO,SAASi7E,GAAStoE,EAAO2/C,EAAM,CAEpC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,KACT,WAAY,CAAE,EACd,SAAU2S,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCXO,SAASi/E,GAAkBtsE,EAAO2/C,EAAM,CAC7C,MAAM4sB,EACJ,OAAOvsE,EAAM,QAAQ,eAAkB,SACnCA,EAAM,QAAQ,cACd,gBACAK,EAAK,OAAOs/C,EAAK,UAAU,EAAE,YAAa,EAC1C6sB,EAAS5c,GAAavvD,EAAG,YAAW,CAAE,EACtCpE,EAAQ+D,EAAM,cAAc,QAAQK,CAAE,EAE5C,IAAIosE,EAEAC,EAAe1sE,EAAM,eAAe,IAAIK,CAAE,EAE1CqsE,IAAiB,QACnBA,EAAe,EACf1sE,EAAM,cAAc,KAAKK,CAAE,EAC3BosE,EAAUzsE,EAAM,cAAc,QAE9BysE,EAAUxwE,EAAQ,EAGpBywE,GAAgB,EAChB1sE,EAAM,eAAe,IAAIK,EAAIqsE,CAAY,EAGzC,MAAMvE,EAAO,CACX,KAAM,UACN,QAAS,IACT,WAAY,CACV,KAAM,IAAMoE,EAAgB,MAAQC,EACpC,GACED,EACA,SACAC,GACCE,EAAe,EAAI,IAAMA,EAAe,IAC3C,gBAAiB,GACjB,gBAAiB,CAAC,gBAAgB,CACnC,EACD,SAAU,CAAC,CAAC,KAAM,OAAQ,MAAO,OAAOD,CAAO,CAAC,CAAC,CAClD,EACDzsE,EAAM,MAAM2/C,EAAMwoB,CAAI,EAGtB,MAAMwE,EAAM,CACV,KAAM,UACN,QAAS,MACT,WAAY,CAAE,EACd,SAAU,CAACxE,CAAI,CAChB,EACD,OAAAnoE,EAAM,MAAM2/C,EAAMgtB,CAAG,EACd3sE,EAAM,UAAU2/C,EAAMgtB,CAAG,CAClC,CClDO,SAASjK,GAAQ1iE,EAAO2/C,EAAM,CAEnC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,IAAMsyD,EAAK,MACpB,WAAY,CAAE,EACd,SAAU3/C,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCRO,SAASq4D,GAAK1lD,EAAO2/C,EAAM,CAChC,GAAI3/C,EAAM,QAAQ,mBAAoB,CAEpC,MAAM3S,EAAS,CAAC,KAAM,MAAO,MAAOsyD,EAAK,KAAK,EAC9C,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACpC,CAGH,CCRO,SAASu/E,GAAO5sE,EAAO2/C,EAAM,CAClC,MAAMktB,EAAUltB,EAAK,cACrB,IAAImtB,EAAS,IAQb,GANID,IAAY,YACdC,GAAU,KACDD,IAAY,SACrBC,GAAU,KAAOntB,EAAK,OAASA,EAAK,YAAc,KAGhDA,EAAK,OAAS,iBAChB,MAAO,CAAC,CAAC,KAAM,OAAQ,MAAO,KAAOA,EAAK,IAAMmtB,CAAM,CAAC,EAGzD,MAAMC,EAAW/sE,EAAM,IAAI2/C,CAAI,EACzBonB,EAAOgG,EAAS,CAAC,EAEnBhG,GAAQA,EAAK,OAAS,OACxBA,EAAK,MAAQ,IAAMA,EAAK,MAExBgG,EAAS,QAAQ,CAAC,KAAM,OAAQ,MAAO,GAAG,CAAC,EAG7C,MAAM5X,EAAO4X,EAASA,EAAS,OAAS,CAAC,EAEzC,OAAI5X,GAAQA,EAAK,OAAS,OACxBA,EAAK,OAAS2X,EAEdC,EAAS,KAAK,CAAC,KAAM,OAAQ,MAAOD,CAAM,CAAC,EAGtCC,CACT,CCjCO,SAASC,GAAehtE,EAAO2/C,EAAM,CAC1C,MAAMt/C,EAAK,OAAOs/C,EAAK,UAAU,EAAE,YAAa,EAC1CuE,EAAalkD,EAAM,eAAe,IAAIK,CAAE,EAE9C,GAAI,CAAC6jD,EACH,OAAO0oB,GAAO5sE,EAAO2/C,CAAI,EAI3B,MAAMniD,EAAa,CAAC,IAAKoyD,GAAa1L,EAAW,KAAO,EAAE,EAAG,IAAKvE,EAAK,GAAG,EAEtEuE,EAAW,QAAU,MAAQA,EAAW,QAAU,SACpD1mD,EAAW,MAAQ0mD,EAAW,OAIhC,MAAM72D,EAAS,CAAC,KAAM,UAAW,QAAS,MAAO,WAAAmQ,EAAY,SAAU,EAAE,EACzE,OAAAwC,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCrBO,SAAS0yD,GAAM//C,EAAO2/C,EAAM,CAEjC,MAAMniD,EAAa,CAAC,IAAKoyD,GAAajQ,EAAK,GAAG,CAAC,EAE3CA,EAAK,MAAQ,MAAQA,EAAK,MAAQ,SACpCniD,EAAW,IAAMmiD,EAAK,KAGpBA,EAAK,QAAU,MAAQA,EAAK,QAAU,SACxCniD,EAAW,MAAQmiD,EAAK,OAI1B,MAAMtyD,EAAS,CAAC,KAAM,UAAW,QAAS,MAAO,WAAAmQ,EAAY,SAAU,EAAE,EACzE,OAAAwC,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCfO,SAAS4/E,GAAWjtE,EAAO2/C,EAAM,CAEtC,MAAM5tB,EAAO,CAAC,KAAM,OAAQ,MAAO4tB,EAAK,MAAM,QAAQ,YAAa,GAAG,CAAC,EACvE3/C,EAAM,MAAM2/C,EAAM5tB,CAAI,EAGtB,MAAM1kC,EAAS,CACb,KAAM,UACN,QAAS,OACT,WAAY,CAAE,EACd,SAAU,CAAC0kC,CAAI,CAChB,EACD,OAAA/xB,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCbO,SAAS6/E,GAAcltE,EAAO2/C,EAAM,CACzC,MAAMt/C,EAAK,OAAOs/C,EAAK,UAAU,EAAE,YAAa,EAC1CuE,EAAalkD,EAAM,eAAe,IAAIK,CAAE,EAE9C,GAAI,CAAC6jD,EACH,OAAO0oB,GAAO5sE,EAAO2/C,CAAI,EAI3B,MAAMniD,EAAa,CAAC,KAAMoyD,GAAa1L,EAAW,KAAO,EAAE,CAAC,EAExDA,EAAW,QAAU,MAAQA,EAAW,QAAU,SACpD1mD,EAAW,MAAQ0mD,EAAW,OAIhC,MAAM72D,EAAS,CACb,KAAM,UACN,QAAS,IACT,WAAAmQ,EACA,SAAUwC,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CC1BO,SAAS86E,GAAKnoE,EAAO2/C,EAAM,CAEhC,MAAMniD,EAAa,CAAC,KAAMoyD,GAAajQ,EAAK,GAAG,CAAC,EAE5CA,EAAK,QAAU,MAAQA,EAAK,QAAU,SACxCniD,EAAW,MAAQmiD,EAAK,OAI1B,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,IACT,WAAAmQ,EACA,SAAUwC,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCZO,SAASm7E,GAASxoE,EAAO2/C,EAAM+K,EAAQ,CAC5C,MAAMyiB,EAAUntE,EAAM,IAAI2/C,CAAI,EACxBytB,EAAQ1iB,EAAS2iB,GAAU3iB,CAAM,EAAI4iB,GAAc3tB,CAAI,EAEvDniD,EAAa,CAAE,EAEfyd,EAAW,CAAE,EAEnB,GAAI,OAAO0kC,EAAK,SAAY,UAAW,CACrC,MAAMonB,EAAOoG,EAAQ,CAAC,EAEtB,IAAIxK,EAEAoE,GAAQA,EAAK,OAAS,WAAaA,EAAK,UAAY,IACtDpE,EAAYoE,GAEZpE,EAAY,CAAC,KAAM,UAAW,QAAS,IAAK,WAAY,GAAI,SAAU,EAAE,EACxEwK,EAAQ,QAAQxK,CAAS,GAGvBA,EAAU,SAAS,OAAS,GAC9BA,EAAU,SAAS,QAAQ,CAAC,KAAM,OAAQ,MAAO,GAAG,CAAC,EAGvDA,EAAU,SAAS,QAAQ,CACzB,KAAM,UACN,QAAS,QACT,WAAY,CAAC,KAAM,WAAY,QAAShjB,EAAK,QAAS,SAAU,EAAI,EACpE,SAAU,CAAE,CAClB,CAAK,EAIDniD,EAAW,UAAY,CAAC,gBAAgB,CACzC,CAED,IAAIvB,EAAQ,GAEZ,KAAO,EAAEA,EAAQkxE,EAAQ,QAAQ,CAC/B,MAAMthB,EAAQshB,EAAQlxE,CAAK,GAIzBmxE,GACAnxE,IAAU,GACV4vD,EAAM,OAAS,WACfA,EAAM,UAAY,MAElB5wC,EAAS,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,EAGvC4wC,EAAM,OAAS,WAAaA,EAAM,UAAY,KAAO,CAACuhB,EACxDnyD,EAAS,KAAK,GAAG4wC,EAAM,QAAQ,EAE/B5wC,EAAS,KAAK4wC,CAAK,CAEtB,CAED,MAAMsJ,EAAOgY,EAAQA,EAAQ,OAAS,CAAC,EAGnChY,IAASiY,GAASjY,EAAK,OAAS,WAAaA,EAAK,UAAY,MAChEl6C,EAAS,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,EAI3C,MAAM5tB,EAAS,CAAC,KAAM,UAAW,QAAS,KAAM,WAAAmQ,EAAY,SAAAyd,CAAQ,EACpE,OAAAjb,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CAMA,SAASggF,GAAU1tB,EAAM,CACvB,IAAIytB,EAAQ,GACZ,GAAIztB,EAAK,OAAS,OAAQ,CACxBytB,EAAQztB,EAAK,QAAU,GACvB,MAAM1kC,EAAW0kC,EAAK,SACtB,IAAI1jD,EAAQ,GAEZ,KAAO,CAACmxE,GAAS,EAAEnxE,EAAQgf,EAAS,QAClCmyD,EAAQE,GAAcryD,EAAShf,CAAK,CAAC,CAExC,CAED,OAAOmxE,CACT,CAMA,SAASE,GAAc3tB,EAAM,CAC3B,MAAM4tB,EAAS5tB,EAAK,OAEpB,OAAO4tB,GACH5tB,EAAK,SAAS,OAAS,CAE7B,CCxGO,SAASoO,GAAK/tD,EAAO2/C,EAAM,CAEhC,MAAMniD,EAAa,CAAE,EACf2vE,EAAUntE,EAAM,IAAI2/C,CAAI,EAC9B,IAAI1jD,EAAQ,GAOZ,IALI,OAAO0jD,EAAK,OAAU,UAAYA,EAAK,QAAU,IACnDniD,EAAW,MAAQmiD,EAAK,OAInB,EAAE1jD,EAAQkxE,EAAQ,QAAQ,CAC/B,MAAMthB,EAAQshB,EAAQlxE,CAAK,EAE3B,GACE4vD,EAAM,OAAS,WACfA,EAAM,UAAY,MAClBA,EAAM,YACN,MAAM,QAAQA,EAAM,WAAW,SAAS,GACxCA,EAAM,WAAW,UAAU,SAAS,gBAAgB,EACpD,CACAruD,EAAW,UAAY,CAAC,oBAAoB,EAC5C,KACD,CACF,CAGD,MAAMnQ,EAAS,CACb,KAAM,UACN,QAASsyD,EAAK,QAAU,KAAO,KAC/B,WAAAniD,EACA,SAAUwC,EAAM,KAAKmtE,EAAS,EAAI,CACnC,EACD,OAAAntE,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCpCO,SAASs1E,GAAU3iE,EAAO2/C,EAAM,CAErC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,IACT,WAAY,CAAE,EACd,SAAU2S,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCTO,SAAS4tD,GAAKj7C,EAAO2/C,EAAM,CAEhC,MAAMtyD,EAAS,CAAC,KAAM,OAAQ,SAAU2S,EAAM,KAAKA,EAAM,IAAI2/C,CAAI,CAAC,CAAC,EACnE,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCNO,SAASu7E,GAAO5oE,EAAO2/C,EAAM,CAElC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,SACT,WAAY,CAAE,EACd,SAAU2S,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCXO,SAASmgF,GAAMxtE,EAAO2/C,EAAM,CACjC,MAAM8tB,EAAOztE,EAAM,IAAI2/C,CAAI,EACrB+tB,EAAWD,EAAK,MAAO,EAEvBE,EAAe,CAAE,EAEvB,GAAID,EAAU,CAEZ,MAAM3G,EAAO,CACX,KAAM,UACN,QAAS,QACT,WAAY,CAAE,EACd,SAAU/mE,EAAM,KAAK,CAAC0tE,CAAQ,EAAG,EAAI,CACtC,EACD1tE,EAAM,MAAM2/C,EAAK,SAAS,CAAC,EAAGonB,CAAI,EAClC4G,EAAa,KAAK5G,CAAI,CACvB,CAED,GAAI0G,EAAK,OAAS,EAAG,CAEnB,MAAMr8E,EAAO,CACX,KAAM,UACN,QAAS,QACT,WAAY,CAAE,EACd,SAAU4O,EAAM,KAAKytE,EAAM,EAAI,CAChC,EAEKlwB,EAAQ2M,GAAWvK,EAAK,SAAS,CAAC,CAAC,EACnCwK,EAAMF,GAAStK,EAAK,SAASA,EAAK,SAAS,OAAS,CAAC,CAAC,EACxDpC,GAAS4M,IAAK/4D,EAAK,SAAW,CAAC,MAAAmsD,EAAO,IAAA4M,CAAG,GAC7CwjB,EAAa,KAAKv8E,CAAI,CACvB,CAGD,MAAM/D,EAAS,CACb,KAAM,UACN,QAAS,QACT,WAAY,CAAE,EACd,SAAU2S,EAAM,KAAK2tE,EAAc,EAAI,CACxC,EACD,OAAA3tE,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCpCO,SAASugF,GAAS5tE,EAAO2/C,EAAM+K,EAAQ,CAC5C,MAAMohB,EAAWphB,EAASA,EAAO,SAAW,OAGtCuR,GADW6P,EAAWA,EAAS,QAAQnsB,CAAI,EAAI,KACxB,EAAI,KAAO,KAElCkuB,EAAQnjB,GAAUA,EAAO,OAAS,QAAUA,EAAO,MAAQ,OAC3DygB,EAAS0C,EAAQA,EAAM,OAASluB,EAAK,SAAS,OACpD,IAAImuB,EAAY,GAEhB,MAAMlwB,EAAQ,CAAE,EAEhB,KAAO,EAAEkwB,EAAY3C,GAAQ,CAE3B,MAAM3tB,EAAOmC,EAAK,SAASmuB,CAAS,EAE9BtwE,EAAa,CAAE,EACf6uD,EAAawhB,EAAQA,EAAMC,CAAS,EAAI,OAE1CzhB,IACF7uD,EAAW,MAAQ6uD,GAIrB,IAAIh/D,EAAS,CAAC,KAAM,UAAW,QAAA4uE,EAAS,WAAAz+D,EAAY,SAAU,EAAE,EAE5DggD,IACFnwD,EAAO,SAAW2S,EAAM,IAAIw9C,CAAI,EAChCx9C,EAAM,MAAMw9C,EAAMnwD,CAAM,EACxBA,EAAS2S,EAAM,UAAUw9C,EAAMnwD,CAAM,GAGvCuwD,EAAM,KAAKvwD,CAAM,CAClB,CAGD,MAAMA,EAAS,CACb,KAAM,UACN,QAAS,KACT,WAAY,CAAE,EACd,SAAU2S,EAAM,KAAK49C,EAAO,EAAI,CACjC,EACD,OAAA59C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCjDO,SAAS0gF,GAAU/tE,EAAO2/C,EAAM,CAIrC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,KACT,WAAY,CAAE,EACd,SAAU2S,EAAM,IAAI2/C,CAAI,CACzB,EACD,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CC/BA,MAAM2gF,GAAM,EACNviE,GAAQ,GAWP,SAASwiE,GAAUptF,EAAO,CAC/B,MAAMvD,EAAS,OAAOuD,CAAK,EACrBsqD,EAAS,YACf,IAAI/qD,EAAQ+qD,EAAO,KAAK7tD,CAAM,EAC1B4wF,EAAO,EAEX,MAAMrmB,EAAQ,CAAE,EAEhB,KAAOznE,GACLynE,EAAM,KACJsmB,GAAS7wF,EAAO,MAAM4wF,EAAM9tF,EAAM,KAAK,EAAG8tF,EAAO,EAAG,EAAI,EACxD9tF,EAAM,CAAC,CACR,EAED8tF,EAAO9tF,EAAM,MAAQA,EAAM,CAAC,EAAE,OAC9BA,EAAQ+qD,EAAO,KAAK7tD,CAAM,EAG5B,OAAAuqE,EAAM,KAAKsmB,GAAS7wF,EAAO,MAAM4wF,CAAI,EAAGA,EAAO,EAAG,EAAK,CAAC,EAEjDrmB,EAAM,KAAK,EAAE,CACtB,CAYA,SAASsmB,GAASttF,EAAO08D,EAAO4M,EAAK,CACnC,IAAIhZ,EAAa,EACby1B,EAAW/lF,EAAM,OAErB,GAAI08D,EAAO,CACT,IAAI/7D,EAAOX,EAAM,YAAYswD,CAAU,EAEvC,KAAO3vD,IAASwsF,IAAOxsF,IAASiqB,IAC9B0lC,IACA3vD,EAAOX,EAAM,YAAYswD,CAAU,CAEtC,CAED,GAAIgZ,EAAK,CACP,IAAI3oE,EAAOX,EAAM,YAAY+lF,EAAW,CAAC,EAEzC,KAAOplF,IAASwsF,IAAOxsF,IAASiqB,IAC9Bm7D,IACAplF,EAAOX,EAAM,YAAY+lF,EAAW,CAAC,CAExC,CAED,OAAOA,EAAWz1B,EAAatwD,EAAM,MAAMswD,EAAYy1B,CAAQ,EAAI,EACrE,CCjDO,SAAS70C,GAAK/xB,EAAO2/C,EAAM,CAEhC,MAAMtyD,EAAS,CAAC,KAAM,OAAQ,MAAO4gF,GAAU,OAAOtuB,EAAK,KAAK,CAAC,CAAC,EAClE,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCLO,SAASg0E,GAAcrhE,EAAO2/C,EAAM,CAEzC,MAAMtyD,EAAS,CACb,KAAM,UACN,QAAS,KACT,WAAY,CAAE,EACd,SAAU,CAAE,CACb,EACD,OAAA2S,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CCAO,MAAM+gF,GAAW,CACtB,WAAAhC,GACA,MAAO7D,GACP,KAAA/mF,GACA,OAAQ6qF,GACR,SAAA/D,GACA,kBAAAgE,GACA,QAAA5J,GACA,KAAAhd,GACA,eAAAsnB,GACA,MAAAjtB,GACA,WAAAktB,GACA,cAAAC,GACA,KAAA/E,GACA,SAAAK,GACA,KAAAza,GACA,UAAA4U,GAEA,KAAA1nB,GACA,OAAA2tB,GACA,MAAA4E,GACA,UAAAO,GACA,SAAAH,GACA,KAAA77C,GACA,cAAAsvC,GACA,KAAMgN,GACN,KAAMA,GACN,WAAYA,GACZ,mBAAoBA,EACtB,EAGA,SAASA,IAAS,CAElB,CC/DO,MAAMC,GAAa,GACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,EACbC,GAAa,ECFpBC,GAAM,OAAO,MAAS,SAAW,KAAO,WAExCC,GAAe,CAACp6D,EAAG1yB,IAAM,CAC7B,MAAM+sF,EAAK,CAACrxF,EAAKoe,KACf4Y,EAAE,IAAI5Y,EAAOpe,CAAG,EACTA,GAGHsxF,EAASlzE,GAAS,CACtB,GAAI4Y,EAAE,IAAI5Y,CAAK,EACb,OAAO4Y,EAAE,IAAI5Y,CAAK,EAEpB,KAAM,CAACpY,EAAMhD,CAAK,EAAIsB,EAAE8Z,CAAK,EAC7B,OAAQpY,EAAI,CACV,KAAK0qF,GACL,KAAKD,GACH,OAAOY,EAAGruF,EAAOob,CAAK,EACxB,KAAKuyE,GAAO,CACV,MAAMY,EAAMF,EAAG,CAAE,EAAEjzE,CAAK,EACxB,UAAWA,KAASpb,EAClBuuF,EAAI,KAAKD,EAAOlzE,CAAK,CAAC,EACxB,OAAOmzE,CACR,CACD,KAAKX,GAAQ,CACX,MAAMroF,EAAS8oF,EAAG,CAAE,EAAEjzE,CAAK,EAC3B,SAAW,CAAC7Z,EAAK6Z,CAAK,IAAKpb,EACzBuF,EAAO+oF,EAAO/sF,CAAG,CAAC,EAAI+sF,EAAOlzE,CAAK,EACpC,OAAO7V,CACR,CACD,KAAKsoF,GACH,OAAOQ,EAAG,IAAI,KAAKruF,CAAK,EAAGob,CAAK,EAClC,KAAK0yE,GAAQ,CACX,KAAM,CAAC,OAAArxF,EAAQ,MAAA+xF,CAAK,EAAIxuF,EACxB,OAAOquF,EAAG,IAAI,OAAO5xF,EAAQ+xF,CAAK,EAAGpzE,CAAK,CAC3C,CACD,KAAK2yE,GAAK,CACR,MAAMzI,EAAM+I,EAAG,IAAI,IAAKjzE,CAAK,EAC7B,SAAW,CAAC7Z,EAAK6Z,CAAK,IAAKpb,EACzBslF,EAAI,IAAIgJ,EAAO/sF,CAAG,EAAG+sF,EAAOlzE,CAAK,CAAC,EACpC,OAAOkqE,CACR,CACD,KAAK0I,GAAK,CACR,MAAMl8E,EAAMu8E,EAAG,IAAI,IAAKjzE,CAAK,EAC7B,UAAWA,KAASpb,EAClB8R,EAAI,IAAIw8E,EAAOlzE,CAAK,CAAC,EACvB,OAAOtJ,CACR,CACD,KAAKm8E,GAAO,CACV,KAAM,CAAC,KAAAnrF,EAAM,QAAAxH,CAAO,EAAI0E,EACxB,OAAOquF,EAAG,IAAIF,GAAIrrF,CAAI,EAAExH,CAAO,EAAG8f,CAAK,CACxC,CACD,KAAK8yE,GACH,OAAOG,EAAG,OAAOruF,CAAK,EAAGob,CAAK,EAChC,IAAK,SACH,OAAOizE,EAAG,OAAO,OAAOruF,CAAK,CAAC,EAAGob,CAAK,EACxC,IAAK,cACH,OAAOizE,EAAG,IAAI,WAAWruF,CAAK,EAAE,OAAQA,CAAK,EAC/C,IAAK,WAAY,CACf,KAAM,CAAE,OAAA+6E,CAAQ,EAAG,IAAI,WAAW/6E,CAAK,EACvC,OAAOquF,EAAG,IAAI,SAAStT,CAAM,EAAG/6E,CAAK,CACtC,CACF,CACD,OAAOquF,EAAG,IAAIF,GAAInrF,CAAI,EAAEhD,CAAK,EAAGob,CAAK,CACzC,EAEE,OAAOkzE,CACT,EAWaG,GAAcC,GAAcN,GAAa,IAAI,IAAKM,CAAU,EAAE,CAAC,EC7EtEC,GAAQ,GAER,CAAC,SAAAhiB,EAAQ,EAAI,GACb,CAAC,KAAAiiB,EAAI,EAAI,OAETC,GAAS7uF,GAAS,CACtB,MAAMgD,EAAO,OAAOhD,EACpB,GAAIgD,IAAS,UAAY,CAAChD,EACxB,MAAO,CAAC0tF,GAAW1qF,CAAI,EAEzB,MAAM8rF,EAAWniB,GAAS,KAAK3sE,CAAK,EAAE,MAAM,EAAG,EAAE,EACjD,OAAQ8uF,EAAQ,CACd,IAAK,QACH,MAAO,CAACnB,GAAOgB,EAAK,EACtB,IAAK,SACH,MAAO,CAACf,GAAQe,EAAK,EACvB,IAAK,OACH,MAAO,CAACd,GAAMc,EAAK,EACrB,IAAK,SACH,MAAO,CAACb,GAAQa,EAAK,EACvB,IAAK,MACH,MAAO,CAACZ,GAAKY,EAAK,EACpB,IAAK,MACH,MAAO,CAACX,GAAKW,EAAK,EACpB,IAAK,WACH,MAAO,CAAChB,GAAOmB,CAAQ,CAC1B,CAED,OAAIA,EAAS,SAAS,OAAO,EACpB,CAACnB,GAAOmB,CAAQ,EAErBA,EAAS,SAAS,OAAO,EACpB,CAACb,GAAOa,CAAQ,EAElB,CAAClB,GAAQkB,CAAQ,CAC1B,EAEMC,GAAa,CAAC,CAACC,EAAMhsF,CAAI,IAC7BgsF,IAAStB,KACR1qF,IAAS,YAAcA,IAAS,UAG7BisF,GAAa,CAACC,EAAQC,EAAMn7D,EAAG1yB,IAAM,CAEzC,MAAM+sF,EAAK,CAACrxF,EAAKgD,IAAU,CACzB,MAAMob,EAAQ9Z,EAAE,KAAKtE,CAAG,EAAI,EAC5B,OAAAg3B,EAAE,IAAIh0B,EAAOob,CAAK,EACXA,CACX,EAEQg0E,EAAOpvF,GAAS,CACpB,GAAIg0B,EAAE,IAAIh0B,CAAK,EACb,OAAOg0B,EAAE,IAAIh0B,CAAK,EAEpB,GAAI,CAACgvF,EAAMhsF,CAAI,EAAI6rF,GAAO7uF,CAAK,EAC/B,OAAQgvF,EAAI,CACV,KAAKtB,GAAW,CACd,IAAI76E,EAAQ7S,EACZ,OAAQgD,EAAI,CACV,IAAK,SACHgsF,EAAOd,GACPr7E,EAAQ7S,EAAM,WACd,MACF,IAAK,WACL,IAAK,SACH,GAAIkvF,EACF,MAAM,IAAI,UAAU,uBAAyBlsF,CAAI,EACnD6P,EAAQ,KACR,MACF,IAAK,YACH,OAAOw7E,EAAG,CAACZ,EAAI,EAAGztF,CAAK,CAC1B,CACD,OAAOquF,EAAG,CAACW,EAAMn8E,CAAK,EAAG7S,CAAK,CAC/B,CACD,KAAK2tF,GAAO,CACV,GAAI3qF,EAAM,CACR,IAAI0pF,EAAS1sF,EACb,OAAIgD,IAAS,WACX0pF,EAAS,IAAI,WAAW1sF,EAAM,MAAM,EAE7BgD,IAAS,gBAChB0pF,EAAS,IAAI,WAAW1sF,CAAK,GAExBquF,EAAG,CAACrrF,EAAM,CAAC,GAAG0pF,CAAM,CAAC,EAAG1sF,CAAK,CACrC,CAED,MAAMuuF,EAAM,GACNnzE,EAAQizE,EAAG,CAACW,EAAMT,CAAG,EAAGvuF,CAAK,EACnC,UAAW6S,KAAS7S,EAClBuuF,EAAI,KAAKa,EAAKv8E,CAAK,CAAC,EACtB,OAAOuI,CACR,CACD,KAAKwyE,GAAQ,CACX,GAAI5qF,EACF,OAAQA,EAAI,CACV,IAAK,SACH,OAAOqrF,EAAG,CAACrrF,EAAMhD,EAAM,SAAU,GAAGA,CAAK,EAC3C,IAAK,UACL,IAAK,SACL,IAAK,SACH,OAAOquF,EAAG,CAACrrF,EAAMhD,EAAM,QAAS,GAAGA,CAAK,CAC3C,CAGH,GAAImvF,GAAS,WAAYnvF,EACvB,OAAOovF,EAAKpvF,EAAM,OAAM,CAAE,EAE5B,MAAMqvF,EAAU,GACVj0E,EAAQizE,EAAG,CAACW,EAAMK,CAAO,EAAGrvF,CAAK,EACvC,UAAWuB,KAAOqtF,GAAK5uF,CAAK,GACtBkvF,GAAU,CAACH,GAAWF,GAAO7uF,EAAMuB,CAAG,CAAC,CAAC,IAC1C8tF,EAAQ,KAAK,CAACD,EAAK7tF,CAAG,EAAG6tF,EAAKpvF,EAAMuB,CAAG,CAAC,CAAC,CAAC,EAE9C,OAAO6Z,CACR,CACD,KAAKyyE,GACH,OAAOQ,EAAG,CAACW,EAAMhvF,EAAM,YAAa,GAAGA,CAAK,EAC9C,KAAK8tF,GAAQ,CACX,KAAM,CAAC,OAAArxF,EAAQ,MAAA+xF,CAAK,EAAIxuF,EACxB,OAAOquF,EAAG,CAACW,EAAM,CAAC,OAAAvyF,EAAQ,MAAA+xF,CAAK,CAAC,EAAGxuF,CAAK,CACzC,CACD,KAAK+tF,GAAK,CACR,MAAMsB,EAAU,GACVj0E,EAAQizE,EAAG,CAACW,EAAMK,CAAO,EAAGrvF,CAAK,EACvC,SAAW,CAACuB,EAAKsR,CAAK,IAAK7S,GACrBkvF,GAAU,EAAEH,GAAWF,GAAOttF,CAAG,CAAC,GAAKwtF,GAAWF,GAAOh8E,CAAK,CAAC,KACjEw8E,EAAQ,KAAK,CAACD,EAAK7tF,CAAG,EAAG6tF,EAAKv8E,CAAK,CAAC,CAAC,EAEzC,OAAOuI,CACR,CACD,KAAK4yE,GAAK,CACR,MAAMqB,EAAU,GACVj0E,EAAQizE,EAAG,CAACW,EAAMK,CAAO,EAAGrvF,CAAK,EACvC,UAAW6S,KAAS7S,GACdkvF,GAAU,CAACH,GAAWF,GAAOh8E,CAAK,CAAC,IACrCw8E,EAAQ,KAAKD,EAAKv8E,CAAK,CAAC,EAE5B,OAAOuI,CACR,CACF,CAED,KAAM,CAAC,QAAA9f,CAAO,EAAI0E,EAClB,OAAOquF,EAAG,CAACW,EAAM,CAAC,KAAMhsF,EAAM,QAAA1H,CAAO,CAAC,EAAG0E,CAAK,CAClD,EAEE,OAAOovF,CACT,EAccE,GAAY,CAACtvF,EAAO,CAAC,KAAAmvF,EAAM,MAAAI,CAAK,EAAI,KAAO,CACvD,MAAMjuF,EAAI,GACV,OAAO2tF,GAAW,EAAEE,GAAQI,GAAQ,CAAC,CAACJ,EAAM,IAAI,IAAK7tF,CAAC,EAAEtB,CAAK,EAAGsB,CAClE,EC3JekuF,GAAA,OAAO,iBAAoB,WAExC,CAACC,EAAK9rF,IACJA,IAAY,SAAUA,GAAW,UAAWA,GAC1C8qF,GAAYa,GAAUG,EAAK9rF,CAAO,CAAC,EAAI,gBAAgB8rF,CAAG,EAE9D,CAACA,EAAK9rF,IAAY8qF,GAAYa,GAAUG,EAAK9rF,CAAO,CAAC,EC2DhD,SAAS+rF,GAA2BpuF,EAAGquF,EAAkB,CAE9D,MAAMnjF,EAAS,CAAC,CAAC,KAAM,OAAQ,MAAO,GAAG,CAAC,EAE1C,OAAImjF,EAAmB,GACrBnjF,EAAO,KAAK,CACV,KAAM,UACN,QAAS,MACT,WAAY,CAAE,EACd,SAAU,CAAC,CAAC,KAAM,OAAQ,MAAO,OAAOmjF,CAAgB,CAAC,CAAC,CAChE,CAAK,EAGInjF,CACT,CAaO,SAASojF,GAAyBC,EAAgBF,EAAkB,CACzE,MACE,sBACCE,EAAiB,IACjBF,EAAmB,EAAI,IAAMA,EAAmB,GAErD,CAWO,SAASG,GAAO3wE,EAAO,CAC5B,MAAMusE,EACJ,OAAOvsE,EAAM,QAAQ,eAAkB,SACnCA,EAAM,QAAQ,cACd,gBACA4wE,EACJ5wE,EAAM,QAAQ,qBAAuBuwE,GACjCM,EACJ7wE,EAAM,QAAQ,mBAAqBywE,GAC/BK,EAAgB9wE,EAAM,QAAQ,eAAiB,YAC/C+wE,EAAuB/wE,EAAM,QAAQ,sBAAwB,KAC7DgxE,EAA0BhxE,EAAM,QAAQ,yBAA2B,CACvE,UAAW,CAAC,SAAS,CACtB,EAEKixE,EAAY,CAAE,EACpB,IAAIP,EAAiB,GAErB,KAAO,EAAEA,EAAiB1wE,EAAM,cAAc,QAAQ,CACpD,MAAMkkD,EAAalkD,EAAM,aAAa,IACpCA,EAAM,cAAc0wE,CAAc,CACnC,EAED,GAAI,CAACxsB,EACH,SAGF,MAAMrlC,EAAU7e,EAAM,IAAIkkD,CAAU,EAC9B7jD,EAAK,OAAO6jD,EAAW,UAAU,EAAE,YAAa,EAChDsoB,EAAS5c,GAAavvD,EAAG,YAAW,CAAE,EAC5C,IAAImwE,EAAmB,EAEvB,MAAMU,EAAiB,CAAE,EACnBC,EAASnxE,EAAM,eAAe,IAAIK,CAAE,EAG1C,KAAO8wE,IAAW,QAAa,EAAEX,GAAoBW,GAAQ,CACvDD,EAAe,OAAS,GAC1BA,EAAe,KAAK,CAAC,KAAM,OAAQ,MAAO,GAAG,CAAC,EAGhD,IAAIj2D,EACF,OAAO21D,GAAwB,SAC3BA,EACAA,EAAoBF,EAAgBF,CAAgB,EAEtD,OAAOv1D,GAAa,WACtBA,EAAW,CAAC,KAAM,OAAQ,MAAOA,CAAQ,GAG3Ci2D,EAAe,KAAK,CAClB,KAAM,UACN,QAAS,IACT,WAAY,CACV,KACE,IACA3E,EACA,SACAC,GACCgE,EAAmB,EAAI,IAAMA,EAAmB,IACnD,oBAAqB,GACrB,UACE,OAAOK,GAAsB,SACzBA,EACAA,EAAkBH,EAAgBF,CAAgB,EACxD,UAAW,CAAC,uBAAuB,CACpC,EACD,SAAU,MAAM,QAAQv1D,CAAQ,EAAIA,EAAW,CAACA,CAAQ,CAChE,CAAO,CACF,CAED,MAAMk6C,EAAOt2C,EAAQA,EAAQ,OAAS,CAAC,EAEvC,GAAIs2C,GAAQA,EAAK,OAAS,WAAaA,EAAK,UAAY,IAAK,CAC3D,MAAMic,EAAWjc,EAAK,SAASA,EAAK,SAAS,OAAS,CAAC,EACnDic,GAAYA,EAAS,OAAS,OAChCA,EAAS,OAAS,IAElBjc,EAAK,SAAS,KAAK,CAAC,KAAM,OAAQ,MAAO,GAAG,CAAC,EAG/CA,EAAK,SAAS,KAAK,GAAG+b,CAAc,CAC1C,MACMryD,EAAQ,KAAK,GAAGqyD,CAAc,EAIhC,MAAM1I,EAAW,CACf,KAAM,UACN,QAAS,KACT,WAAY,CAAC,GAAI+D,EAAgB,MAAQC,CAAM,EAC/C,SAAUxsE,EAAM,KAAK6e,EAAS,EAAI,CACnC,EAED7e,EAAM,MAAMkkD,EAAYskB,CAAQ,EAEhCyI,EAAU,KAAKzI,CAAQ,CACxB,CAED,GAAIyI,EAAU,SAAW,EAIzB,MAAO,CACL,KAAM,UACN,QAAS,UACT,WAAY,CAAC,cAAe,GAAM,UAAW,CAAC,WAAW,CAAC,EAC1D,SAAU,CACR,CACE,KAAM,UACN,QAASF,EACT,WAAY,CACV,GAAGM,GAAgBL,CAAuB,EAC1C,GAAI,gBACL,EACD,SAAU,CAAC,CAAC,KAAM,OAAQ,MAAOF,CAAa,CAAC,CAChD,EACD,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,EAC1B,CACE,KAAM,UACN,QAAS,KACT,WAAY,CAAE,EACd,SAAU9wE,EAAM,KAAKixE,EAAW,EAAI,CACrC,EACD,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAC3B,CACF,CACH,CChHO,MAAMK,GAgBT,SAAU9c,EAAM,CACd,GAAIA,GAAS,KACX,OAAOtE,GAGT,GAAI,OAAOsE,GAAS,WAClB,OAAO+c,GAAY/c,CAAI,EAGzB,GAAI,OAAOA,GAAS,SAClB,OAAO,MAAM,QAAQA,CAAI,EAAIgd,GAAWhd,CAAI,EAAIid,GAAajd,CAAI,EAGnE,GAAI,OAAOA,GAAS,SAClB,OAAOkd,GAAYld,CAAI,EAGzB,MAAM,IAAI,MAAM,8CAA8C,CAC/D,EAOL,SAASgd,GAAWG,EAAO,CAEzB,MAAM7sB,EAAS,CAAE,EACjB,IAAI7oD,EAAQ,GAEZ,KAAO,EAAEA,EAAQ01E,EAAM,QACrB7sB,EAAO7oD,CAAK,EAAIq1E,GAAQK,EAAM11E,CAAK,CAAC,EAGtC,OAAOs1E,GAAYjB,CAAG,EAMtB,SAASA,KAAOriB,EAAY,CAC1B,IAAIhyD,EAAQ,GAEZ,KAAO,EAAEA,EAAQ6oD,EAAO,QACtB,GAAIA,EAAO7oD,CAAK,EAAE,MAAM,KAAMgyD,CAAU,EAAG,MAAO,GAGpD,MAAO,EACR,CACH,CAQA,SAASwjB,GAAavsB,EAAO,CAC3B,MAAM0sB,EAAwD1sB,EAE9D,OAAOqsB,GAAY5jB,CAAG,EAMtB,SAASA,EAAIhO,EAAM,CACjB,MAAMkyB,EACoBlyB,EAI1B,IAAIv9D,EAEJ,IAAKA,KAAO8iE,EACV,GAAI2sB,EAAazvF,CAAG,IAAMwvF,EAAcxvF,CAAG,EAAG,MAAO,GAGvD,MAAO,EACR,CACH,CAQA,SAASsvF,GAAYxsB,EAAO,CAC1B,OAAOqsB,GAAY1tF,CAAI,EAKvB,SAASA,EAAK87D,EAAM,CAClB,OAAOA,GAAQA,EAAK,OAASuF,CAC9B,CACH,CAQA,SAASqsB,GAAYO,EAAc,CACjC,OAAO5sB,EAMP,SAASA,EAAMrkE,EAAOob,EAAOyuD,EAAQ,CACnC,MAAO,GACLqnB,GAAelxF,CAAK,GAClBixF,EAAa,KACX,KACAjxF,EACA,OAAOob,GAAU,SAAWA,EAAQ,OACpCyuD,GAAU,MACX,EAEN,CACH,CAEA,SAASwF,IAAK,CACZ,MAAO,EACT,CAMA,SAAS6hB,GAAelxF,EAAO,CAC7B,OAAOA,IAAU,MAAQ,OAAOA,GAAU,UAAY,SAAUA,CAClE,CCnEA,MAAMgjE,GAAQ,CAAE,EAKHmuB,GAAW,GAKXC,GAAO,GAKPC,GAAO,OAiDb,SAASC,GAAalnB,EAAMuJ,EAAM4d,EAASC,EAAS,CAEzD,IAAIntB,EAEA,OAAOsP,GAAS,YAAc,OAAO4d,GAAY,YACnDC,EAAUD,EAEVA,EAAU5d,GAGVtP,EAAQsP,EAGV,MAAM8d,EAAKhB,GAAQpsB,CAAK,EAClBnK,EAAOs3B,EAAU,GAAK,EAE5Bn2E,EAAQ+uD,EAAM,OAAW,EAAE,EAAG,EAO9B,SAAS/uD,EAAQyjD,EAAM1jD,EAAOs2E,EAAS,CACrC,MAAM1xF,EACJ8+D,GAAQ,OAAOA,GAAS,SAAWA,EAAO,CAAE,EAG9C,GAAI,OAAO9+D,EAAM,MAAS,SAAU,CAClC,MAAM8C,EAEJ,OAAO9C,EAAM,SAAY,SACrBA,EAAM,QAER,OAAOA,EAAM,MAAS,SACpBA,EAAM,KACN,OAEN,OAAO,eAAe2xF,EAAO,OAAQ,CACnC,MACE,UAAiB7yB,EAAK,MAAQh8D,EAAO,IAAMA,EAAO,IAAM,KAAO,GACzE,CAAO,CACF,CAED,OAAO6uF,EAEP,SAASA,GAAQ,CAEf,IAAInlF,EAASw2D,GAET4uB,EAEA3f,EAEA4f,EAEJ,IAAI,CAACle,GAAQ8d,EAAG3yB,EAAM1jD,EAAOs2E,EAAQA,EAAQ,OAAS,CAAC,GAAK,MAAS,KAEnEllF,EAASslF,GAASP,EAAQzyB,EAAM4yB,CAAO,CAAC,EAEpCllF,EAAO,CAAC,IAAM4kF,IAChB,OAAO5kF,EAIX,GAAI,aAAcsyD,GAAQA,EAAK,SAAU,CACvC,MAAMizB,EAA2CjzB,EAEjD,GAAIizB,EAAa,UAAYvlF,EAAO,CAAC,IAAM6kF,GAIzC,IAHApf,GAAUuf,EAAUO,EAAa,SAAS,OAAS,IAAM73B,EACzD23B,EAAeH,EAAQ,OAAOK,CAAY,EAEnC9f,EAAS,IAAMA,EAAS8f,EAAa,SAAS,QAAQ,CAC3D,MAAM/mB,EAAQ+mB,EAAa,SAAS9f,CAAM,EAI1C,GAFA2f,EAAYv2E,EAAQ2vD,EAAOiH,EAAQ4f,CAAY,EAAG,EAE9CD,EAAU,CAAC,IAAMR,GACnB,OAAOQ,EAGT3f,EACE,OAAO2f,EAAU,CAAC,GAAM,SAAWA,EAAU,CAAC,EAAI3f,EAAS/X,CAC9D,CAEJ,CAED,OAAO1tD,CACR,CACF,CACH,CAUA,SAASslF,GAAS9xF,EAAO,CACvB,OAAI,MAAM,QAAQA,CAAK,EACdA,EAGL,OAAOA,GAAU,SACZ,CAACmxF,GAAUnxF,CAAK,EAGlBA,GAAU,KAA8BgjE,GAAQ,CAAChjE,CAAK,CAC/D,CCvHO,SAAS2xF,GAAMvnB,EAAM4nB,EAAeC,EAAkBC,EAAc,CAEzE,IAAIV,EAEA7d,EAEA4d,EAGF,OAAOS,GAAkB,YACzB,OAAOC,GAAqB,YAE5Bte,EAAO,OACP4d,EAAUS,EACVR,EAAUS,IAGVte,EAAOqe,EAEPT,EAAUU,EACVT,EAAUU,GAGZZ,GAAalnB,EAAMuJ,EAAMwe,EAAUX,CAAO,EAM1C,SAASW,EAASrzB,EAAM4yB,EAAS,CAC/B,MAAM7nB,EAAS6nB,EAAQA,EAAQ,OAAS,CAAC,EACnCt2E,EAAQyuD,EAASA,EAAO,SAAS,QAAQ/K,CAAI,EAAI,OACvD,OAAOyyB,EAAQzyB,EAAM1jD,EAAOyuD,CAAM,CACnC,CACH,CCrIA,MAAMC,GAAM,CAAE,EAAC,eAGTjH,GAAe,CAAE,EAYhB,SAASuvB,GAAYhoB,EAAMzmE,EAAS,CACzC,MAAM++D,EAAW/+D,GAAWk/D,GAEtBwvB,EAAiB,IAAI,IAErBC,EAAe,IAAI,IAEnBC,EAAiB,IAAI,IAIrBhF,EAAW,CAAC,GAAGiF,GAAiB,GAAG9vB,EAAS,QAAQ,EAGpDvjD,EAAQ,CACZ,IAAA2tD,EACA,UAAA2lB,GACA,eAAAJ,EACA,aAAAC,EACA,eAAAC,EACA,cAAe,CAAE,EACrB,SAAIhF,EACA,IAAA/iB,EACA,QAAS9H,EACT,MAAAgwB,GACJ,KAAIpsF,EACD,EAED,OAAAqrF,GAAMvnB,EAAM,SAAUtL,EAAM,CAC1B,GAAIA,EAAK,OAAS,cAAgBA,EAAK,OAAS,qBAAsB,CACpE,MAAMwmB,EAAMxmB,EAAK,OAAS,aAAeuzB,EAAiBC,EACpD9yE,EAAK,OAAOs/C,EAAK,UAAU,EAAE,YAAa,EAI3CwmB,EAAI,IAAI9lE,CAAE,GAEb8lE,EAAI,IAAI9lE,EAAIs/C,CAAI,CAEnB,CACL,CAAG,EAEM3/C,EAYP,SAASqrD,EAAI1L,EAAM+K,EAAQ,CACzB,MAAM7mE,EAAO87D,EAAK,KACZ6zB,EAASxzE,EAAM,SAASnc,CAAI,EAElC,GAAI8mE,GAAI,KAAK3qD,EAAM,SAAUnc,CAAI,GAAK2vF,EACpC,OAAOA,EAAOxzE,EAAO2/C,EAAM+K,CAAM,EAGnC,GAAI1qD,EAAM,QAAQ,aAAeA,EAAM,QAAQ,YAAY,SAASnc,CAAI,EAAG,CACzE,GAAI,aAAc87D,EAAM,CACtB,KAAM,CAAC,SAAA1kC,EAAU,GAAGw4D,CAAO,EAAI9zB,EACzBtyD,EAASgkF,GAAgBoC,CAAO,EAEtC,OAAApmF,EAAO,SAAW2S,EAAM,IAAI2/C,CAAI,EAEzBtyD,CACR,CAGD,OAAOgkF,GAAgB1xB,CAAI,CAC5B,CAID,OAFgB3/C,EAAM,QAAQ,gBAAkB0zE,IAEjC1zE,EAAO2/C,EAAM+K,CAAM,CACnC,CAUD,SAASiD,EAAIjD,EAAQ,CAEnB,MAAMpf,EAAS,CAAE,EAEjB,GAAI,aAAcof,EAAQ,CACxB,MAAMipB,EAAQjpB,EAAO,SACrB,IAAIzuD,EAAQ,GACZ,KAAO,EAAEA,EAAQ03E,EAAM,QAAQ,CAC7B,MAAMtmF,EAAS2S,EAAM,IAAI2zE,EAAM13E,CAAK,EAAGyuD,CAAM,EAG7C,GAAIr9D,EAAQ,CACV,GAAI4O,GAAS03E,EAAM13E,EAAQ,CAAC,EAAE,OAAS,UACjC,CAAC,MAAM,QAAQ5O,CAAM,GAAKA,EAAO,OAAS,SAC5CA,EAAO,MAAQumF,GAAuBvmF,EAAO,KAAK,GAGhD,CAAC,MAAM,QAAQA,CAAM,GAAKA,EAAO,OAAS,WAAW,CACvD,MAAM05E,EAAO15E,EAAO,SAAS,CAAC,EAE1B05E,GAAQA,EAAK,OAAS,SACxBA,EAAK,MAAQ6M,GAAuB7M,EAAK,KAAK,EAEjD,CAGC,MAAM,QAAQ15E,CAAM,EACtBi+C,EAAO,KAAK,GAAGj+C,CAAM,EAErBi+C,EAAO,KAAKj+C,CAAM,CAErB,CACF,CACF,CAED,OAAOi+C,CACR,CACH,CAYA,SAASioC,GAAM11E,EAAMC,EAAI,CACnBD,EAAK,WAAUC,EAAG,SAAW08B,GAAS38B,CAAI,EAChD,CAcA,SAASy1E,GAAUz1E,EAAMC,EAAI,CAE3B,IAAIzQ,EAASyQ,EAGb,GAAID,GAAQA,EAAK,KAAM,CACrB,MAAMg2E,EAAQh2E,EAAK,KAAK,MAClBi2E,EAAYj2E,EAAK,KAAK,UACtBk2E,EAAcl2E,EAAK,KAAK,YAE9B,GAAI,OAAOg2E,GAAU,SAGnB,GAAIxmF,EAAO,OAAS,UAClBA,EAAO,QAAUwmF,MAMd,CAGH,MAAM54D,EAAW,aAAc5tB,EAASA,EAAO,SAAW,CAACA,CAAM,EACjEA,EAAS,CAAC,KAAM,UAAW,QAASwmF,EAAO,WAAY,CAAE,EAAE,SAAA54D,CAAQ,CACpE,CAGC5tB,EAAO,OAAS,WAAa0mF,GAC/B,OAAO,OAAO1mF,EAAO,WAAYgkF,GAAgB0C,CAAW,CAAC,EAI7D,aAAc1mF,GACdA,EAAO,UACPymF,IAAc,MACdA,IAAc,SAEdzmF,EAAO,SAAWymF,EAErB,CAED,OAAOzmF,CACT,CAYA,SAASqmF,GAAsB1zE,EAAO2/C,EAAM,CAC1C,MAAM99D,EAAO89D,EAAK,MAAQ,CAAE,EAEtBtyD,EACJ,UAAWsyD,GACX,EAAEgL,GAAI,KAAK9oE,EAAM,aAAa,GAAK8oE,GAAI,KAAK9oE,EAAM,WAAW,GACzD,CAAC,KAAM,OAAQ,MAAO89D,EAAK,KAAK,EAChC,CACE,KAAM,UACN,QAAS,MACT,WAAY,CAAE,EACd,SAAU3/C,EAAM,IAAI2/C,CAAI,CACzB,EAEP,OAAA3/C,EAAM,MAAM2/C,EAAMtyD,CAAM,EACjB2S,EAAM,UAAU2/C,EAAMtyD,CAAM,CACrC,CAcO,SAASlG,GAAKwsF,EAAOvG,EAAO,CAEjC,MAAM//E,EAAS,CAAE,EACjB,IAAI4O,EAAQ,GAMZ,IAJImxE,GACF//E,EAAO,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,EAGlC,EAAE4O,EAAQ03E,EAAM,QACjB13E,GAAO5O,EAAO,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,EAClDA,EAAO,KAAKsmF,EAAM13E,CAAK,CAAC,EAG1B,OAAImxE,GAASuG,EAAM,OAAS,GAC1BtmF,EAAO,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,CAAC,EAGlCA,CACT,CAUA,SAASumF,GAAuB/yF,EAAO,CACrC,IAAIob,EAAQ,EACRza,EAAOX,EAAM,WAAWob,CAAK,EAEjC,KAAOza,IAAS,GAAKA,IAAS,IAC5Bya,IACAza,EAAOX,EAAM,WAAWob,CAAK,EAG/B,OAAOpb,EAAM,MAAMob,CAAK,CAC1B,CCjYO,SAAS+3E,GAAO/oB,EAAMzmE,EAAS,CACpC,MAAMwb,EAAQizE,GAAYhoB,EAAMzmE,CAAO,EACjCm7D,EAAO3/C,EAAM,IAAIirD,EAAM,MAAS,EAChCgpB,EAAOtD,GAAO3wE,CAAK,EAEnB3S,EAAS,MAAM,QAAQsyD,CAAI,EAC7B,CAAC,KAAM,OAAQ,SAAUA,CAAI,EAC7BA,GAAQ,CAAC,KAAM,OAAQ,SAAU,EAAE,EAEvC,OAAIs0B,GAKF5mF,EAAO,SAAS,KAAK,CAAC,KAAM,OAAQ,MAAO;AAAA,CAAI,EAAG4mF,CAAI,EAGjD5mF,CACT,CC0Ce,SAAS6mF,GAAaC,EAAa3vF,EAAS,CACzD,OAAI2vF,GAAe,QAASA,EAInB,eAAgBlpB,EAAMmpB,EAAM,CAEjC,MAAMC,EACJL,GAAO/oB,EAAM,CAAC,KAAAmpB,EAAM,GAAG5vF,CAAO,CAAC,EAEjC,MAAM2vF,EAAY,IAAIE,EAAUD,CAAI,CACrC,EAMI,SAAUnpB,EAAMmpB,EAAM,CAM3B,OACEJ,GAAO/oB,EAAM,CAAC,KAAAmpB,EAAM,GAAID,GAAe3vF,CAAQ,CAAC,CAEnD,CACH,CCvKO,SAAS8vF,GAAKt4F,EAAO,CAC1B,GAAIA,EACF,MAAMA,CAEV,CCTA,IAAIu4F,GAAS,OAAO,UAAU,eAC1BC,GAAQ,OAAO,UAAU,SACzBC,GAAiB,OAAO,eACxBC,GAAO,OAAO,yBAEdC,GAAU,SAAiBvF,EAAK,CACnC,OAAI,OAAO,MAAM,SAAY,WACrB,MAAM,QAAQA,CAAG,EAGlBoF,GAAM,KAAKpF,CAAG,IAAM,gBAC5B,EAEIhrD,GAAgB,SAAuBgzB,EAAK,CAC/C,GAAI,CAACA,GAAOo9B,GAAM,KAAKp9B,CAAG,IAAM,kBAC/B,MAAO,GAGR,IAAIw9B,EAAoBL,GAAO,KAAKn9B,EAAK,aAAa,EAClDy9B,EAAmBz9B,EAAI,aAAeA,EAAI,YAAY,WAAam9B,GAAO,KAAKn9B,EAAI,YAAY,UAAW,eAAe,EAE7H,GAAIA,EAAI,aAAe,CAACw9B,GAAqB,CAACC,EAC7C,MAAO,GAKR,IAAIzyF,EACJ,IAAKA,KAAOg1D,EAAK,CAEjB,OAAO,OAAOh1D,EAAQ,KAAemyF,GAAO,KAAKn9B,EAAKh1D,CAAG,CAC1D,EAGI0yF,GAAc,SAAqBrtF,EAAQjD,EAAS,CACnDiwF,IAAkBjwF,EAAQ,OAAS,YACtCiwF,GAAehtF,EAAQjD,EAAQ,KAAM,CACpC,WAAY,GACZ,aAAc,GACd,MAAOA,EAAQ,SACf,SAAU,EACb,CAAG,EAEDiD,EAAOjD,EAAQ,IAAI,EAAIA,EAAQ,QAEjC,EAGIuwF,GAAc,SAAqB39B,EAAKzzD,EAAM,CACjD,GAAIA,IAAS,YACZ,GAAK4wF,GAAO,KAAKn9B,EAAKzzD,CAAI,GAEnB,GAAI+wF,GAGV,OAAOA,GAAKt9B,EAAKzzD,CAAI,EAAE,UAJvB,QAQF,OAAOyzD,EAAIzzD,CAAI,CAChB,EAEAqxF,GAAiB,SAASA,GAAS,CAClC,IAAIxwF,EAASb,EAAMsxF,EAAKtwD,EAAMuwD,EAAaC,EACvC1tF,EAAS,UAAU,CAAC,EACpB1J,EAAI,EACJotF,EAAS,UAAU,OACnBiK,EAAO,GAaX,IAVI,OAAO3tF,GAAW,YACrB2tF,EAAO3tF,EACPA,EAAS,UAAU,CAAC,GAAK,GAEzB1J,EAAI,IAED0J,GAAU,MAAS,OAAOA,GAAW,UAAY,OAAOA,GAAW,cACtEA,EAAS,IAGH1J,EAAIotF,EAAQ,EAAEptF,EAGpB,GAFAyG,EAAU,UAAUzG,CAAC,EAEjByG,GAAW,KAEd,IAAKb,KAAQa,EACZywF,EAAMF,GAAYttF,EAAQ9D,CAAI,EAC9BghC,EAAOowD,GAAYvwF,EAASb,CAAI,EAG5B8D,IAAWk9B,IAEVywD,GAAQzwD,IAASP,GAAcO,CAAI,IAAMuwD,EAAcP,GAAQhwD,CAAI,KAClEuwD,GACHA,EAAc,GACdC,EAAQF,GAAON,GAAQM,CAAG,EAAIA,EAAM,IAEpCE,EAAQF,GAAO7wD,GAAc6wD,CAAG,EAAIA,EAAM,GAI3CH,GAAYrtF,EAAQ,CAAE,KAAM9D,EAAM,SAAUqxF,EAAOI,EAAMD,EAAOxwD,CAAI,CAAG,IAG7D,OAAOA,EAAS,KAC1BmwD,GAAYrtF,EAAQ,CAAE,KAAM9D,EAAM,SAAUghC,CAAI,CAAE,GAQvD,OAAOl9B,CACR,kBCpHe,SAAS28B,GAAcvjC,EAAO,CAC5C,GAAI,OAAOA,GAAU,UAAYA,IAAU,KAC1C,MAAO,GAGR,MAAMw0F,EAAY,OAAO,eAAex0F,CAAK,EAC7C,OAAQw0F,IAAc,MAAQA,IAAc,OAAO,WAAa,OAAO,eAAeA,CAAS,IAAM,OAAS,EAAE,OAAO,eAAex0F,IAAU,EAAE,OAAO,YAAYA,EACtK,CC+BO,SAASy0F,IAAS,CAEvB,MAAMC,EAAM,CAAE,EAERC,EAAW,CAAC,IAAAnlE,EAAK,IAAAuiD,CAAG,EAE1B,OAAO4iB,EAGP,SAASnlE,KAAOi7B,EAAQ,CACtB,IAAImqC,EAAkB,GAEtB,MAAM70F,EAAW0qD,EAAO,IAAK,EAE7B,GAAI,OAAO1qD,GAAa,WACtB,MAAM,IAAI,UAAU,2CAA6CA,CAAQ,EAG3EmvE,EAAK,KAAM,GAAGzkB,CAAM,EAQpB,SAASykB,EAAK/zE,KAAU6C,EAAQ,CAC9B,MAAM+R,EAAK2kF,EAAI,EAAEE,CAAe,EAChC,IAAIx5E,EAAQ,GAEZ,GAAIjgB,EAAO,CACT4E,EAAS5E,CAAK,EACd,MACD,CAGD,KAAO,EAAEigB,EAAQqvC,EAAO,SAClBzsD,EAAOod,CAAK,IAAM,MAAQpd,EAAOod,CAAK,IAAM,UAC9Cpd,EAAOod,CAAK,EAAIqvC,EAAOrvC,CAAK,GAKhCqvC,EAASzsD,EAGL+R,EACFzJ,GAAKyJ,EAAIm/D,CAAI,EAAE,GAAGlxE,CAAM,EAExB+B,EAAS,KAAM,GAAG/B,CAAM,CAE3B,CACF,CAGD,SAAS+zE,EAAI8iB,EAAY,CACvB,GAAI,OAAOA,GAAe,WACxB,MAAM,IAAI,UACR,+CAAiDA,CAClD,EAGH,OAAAH,EAAI,KAAKG,CAAU,EACZF,CACR,CACH,CAkCO,SAASruF,GAAKwuF,EAAY/0F,EAAU,CAEzC,IAAI0xE,EAEJ,OAAOsjB,EAQP,SAASA,KAAW3nB,EAAY,CAC9B,MAAM4nB,EAAoBF,EAAW,OAAS1nB,EAAW,OAEzD,IAAI5gE,EAEAwoF,GACF5nB,EAAW,KAAK3mE,CAAI,EAGtB,GAAI,CACF+F,EAASsoF,EAAW,MAAM,KAAM1nB,CAAU,CAC3C,OAAQjyE,EAAO,CACd,MAAM85F,EAAkC95F,EAMxC,GAAI65F,GAAqBvjB,EACvB,MAAMwjB,EAGR,OAAOxuF,EAAKwuF,CAAS,CACtB,CAEID,IACCxoF,GAAUA,EAAO,MAAQ,OAAOA,EAAO,MAAS,WAClDA,EAAO,KAAK0oF,EAAMzuF,CAAI,EACb+F,aAAkB,MAC3B/F,EAAK+F,CAAM,EAEX0oF,EAAK1oF,CAAM,EAGhB,CAOD,SAAS/F,EAAKtL,KAAU6C,EAAQ,CACzByzE,IACHA,EAAS,GACT1xE,EAAS5E,EAAO,GAAG6C,CAAM,EAE5B,CAOD,SAASk3F,EAAKl1F,EAAO,CACnByG,EAAK,KAAMzG,CAAK,CACjB,CACH,CC1JO,MAAMm1F,GAAU,CAAC,SAAAC,GAAU,QAAAC,GAAS,QAAAC,GAAS,KAAAC,GAAM,IAAK,GAAG,EAclE,SAASH,GAAS/xE,EAAMiyE,EAAS,CAC/B,GAAIA,IAAY,QAAa,OAAOA,GAAY,SAC9C,MAAM,IAAI,UAAU,iCAAiC,EAGvDE,GAAWnyE,CAAI,EACf,IAAIq5C,EAAQ,EACR4M,EAAM,GACNluD,EAAQiI,EAAK,OAEboyE,EAEJ,GACEH,IAAY,QACZA,EAAQ,SAAW,GACnBA,EAAQ,OAASjyE,EAAK,OACtB,CACA,KAAOjI,KACL,GAAIiI,EAAK,YAAYjI,CAAK,IAAM,IAG9B,GAAIq6E,EAAc,CAChB/4B,EAAQthD,EAAQ,EAChB,KACD,OACQkuD,EAAM,IAGfmsB,EAAe,GACfnsB,EAAMluD,EAAQ,GAIlB,OAAOkuD,EAAM,EAAI,GAAKjmD,EAAK,MAAMq5C,EAAO4M,CAAG,CAC5C,CAED,GAAIgsB,IAAYjyE,EACd,MAAO,GAGT,IAAIqyE,EAAmB,GACnBC,EAAeL,EAAQ,OAAS,EAEpC,KAAOl6E,KACL,GAAIiI,EAAK,YAAYjI,CAAK,IAAM,IAG9B,GAAIq6E,EAAc,CAChB/4B,EAAQthD,EAAQ,EAChB,KACD,OAEGs6E,EAAmB,IAGrBD,EAAe,GACfC,EAAmBt6E,EAAQ,GAGzBu6E,EAAe,KAEbtyE,EAAK,YAAYjI,CAAK,IAAMk6E,EAAQ,YAAYK,GAAc,EAC5DA,EAAe,IAGjBrsB,EAAMluD,IAKRu6E,EAAe,GACfrsB,EAAMosB,IAMd,OAAIh5B,IAAU4M,EACZA,EAAMosB,EACGpsB,EAAM,IACfA,EAAMjmD,EAAK,QAGNA,EAAK,MAAMq5C,EAAO4M,CAAG,CAC9B,CAUA,SAAS+rB,GAAQhyE,EAAM,CAGrB,GAFAmyE,GAAWnyE,CAAI,EAEXA,EAAK,SAAW,EAClB,MAAO,IAGT,IAAIimD,EAAM,GACNluD,EAAQiI,EAAK,OAEbuyE,EAGJ,KAAO,EAAEx6E,GACP,GAAIiI,EAAK,YAAYjI,CAAK,IAAM,IAC9B,GAAIw6E,EAAgB,CAClBtsB,EAAMluD,EACN,KACD,OACSw6E,IAEVA,EAAiB,IAIrB,OAAOtsB,EAAM,EACTjmD,EAAK,YAAY,CAAC,IAAM,GACtB,IACA,IACFimD,IAAQ,GAAKjmD,EAAK,YAAY,CAAC,IAAM,GACnC,KACAA,EAAK,MAAM,EAAGimD,CAAG,CACzB,CAUA,SAASgsB,GAAQjyE,EAAM,CACrBmyE,GAAWnyE,CAAI,EAEf,IAAIjI,EAAQiI,EAAK,OAEbimD,EAAM,GACNusB,EAAY,EACZC,EAAW,GAGXC,EAAc,EAEdH,EAEJ,KAAOx6E,KAAS,CACd,MAAMza,EAAO0iB,EAAK,YAAYjI,CAAK,EAEnC,GAAIza,IAAS,GAAc,CAGzB,GAAIi1F,EAAgB,CAClBC,EAAYz6E,EAAQ,EACpB,KACD,CAED,QACD,CAEGkuD,EAAM,IAGRssB,EAAiB,GACjBtsB,EAAMluD,EAAQ,GAGZza,IAAS,GAEPm1F,EAAW,EACbA,EAAW16E,EACF26E,IAAgB,IACzBA,EAAc,GAEPD,EAAW,KAGpBC,EAAc,GAEjB,CAED,OACED,EAAW,GACXxsB,EAAM,GAENysB,IAAgB,GAEfA,IAAgB,GAAKD,IAAaxsB,EAAM,GAAKwsB,IAAaD,EAAY,EAEhE,GAGFxyE,EAAK,MAAMyyE,EAAUxsB,CAAG,CACjC,CAUA,SAASisB,MAAQz3B,EAAU,CACzB,IAAI1iD,EAAQ,GAER46E,EAEJ,KAAO,EAAE56E,EAAQ0iD,EAAS,QACxB03B,GAAW13B,EAAS1iD,CAAK,CAAC,EAEtB0iD,EAAS1iD,CAAK,IAChB46E,EACEA,IAAW,OAAYl4B,EAAS1iD,CAAK,EAAI46E,EAAS,IAAMl4B,EAAS1iD,CAAK,GAI5E,OAAO46E,IAAW,OAAY,IAAM1yB,GAAU0yB,CAAM,CACtD,CAYA,SAAS1yB,GAAUjgD,EAAM,CACvBmyE,GAAWnyE,CAAI,EAEf,MAAM4yE,EAAW5yE,EAAK,YAAY,CAAC,IAAM,GAGzC,IAAIrjB,EAAQk2F,GAAgB7yE,EAAM,CAAC4yE,CAAQ,EAE3C,OAAIj2F,EAAM,SAAW,GAAK,CAACi2F,IACzBj2F,EAAQ,KAGNA,EAAM,OAAS,GAAKqjB,EAAK,YAAYA,EAAK,OAAS,CAAC,IAAM,KAC5DrjB,GAAS,KAGJi2F,EAAW,IAAMj2F,EAAQA,CAClC,CAYA,SAASk2F,GAAgB7yE,EAAM8yE,EAAgB,CAC7C,IAAI3pF,EAAS,GACT4pF,EAAoB,EACpBC,EAAY,GACZC,EAAO,EACPl7E,EAAQ,GAERza,EAEA41F,EAEJ,KAAO,EAAEn7E,GAASiI,EAAK,QAAQ,CAC7B,GAAIjI,EAAQiI,EAAK,OACf1iB,EAAO0iB,EAAK,YAAYjI,CAAK,MACxB,IAAIza,IAAS,GAClB,MAEAA,EAAO,GAGT,GAAIA,IAAS,GAAc,CACzB,GAAI,EAAA01F,IAAcj7E,EAAQ,GAAKk7E,IAAS,GAEjC,GAAID,IAAcj7E,EAAQ,GAAKk7E,IAAS,EAAG,CAChD,GACE9pF,EAAO,OAAS,GAChB4pF,IAAsB,GACtB5pF,EAAO,YAAYA,EAAO,OAAS,CAAC,IAAM,IAC1CA,EAAO,YAAYA,EAAO,OAAS,CAAC,IAAM,IAE1C,GAAIA,EAAO,OAAS,GAGlB,GAFA+pF,EAAiB/pF,EAAO,YAAY,GAAG,EAEnC+pF,IAAmB/pF,EAAO,OAAS,EAAG,CACpC+pF,EAAiB,GACnB/pF,EAAS,GACT4pF,EAAoB,IAEpB5pF,EAASA,EAAO,MAAM,EAAG+pF,CAAc,EACvCH,EAAoB5pF,EAAO,OAAS,EAAIA,EAAO,YAAY,GAAG,GAGhE6pF,EAAYj7E,EACZk7E,EAAO,EACP,QACD,UACQ9pF,EAAO,OAAS,EAAG,CAC5BA,EAAS,GACT4pF,EAAoB,EACpBC,EAAYj7E,EACZk7E,EAAO,EACP,QACD,EAGCH,IACF3pF,EAASA,EAAO,OAAS,EAAIA,EAAS,MAAQ,KAC9C4pF,EAAoB,EAE9B,MACY5pF,EAAO,OAAS,EAClBA,GAAU,IAAM6W,EAAK,MAAMgzE,EAAY,EAAGj7E,CAAK,EAE/C5O,EAAS6W,EAAK,MAAMgzE,EAAY,EAAGj7E,CAAK,EAG1Cg7E,EAAoBh7E,EAAQi7E,EAAY,EAG1CA,EAAYj7E,EACZk7E,EAAO,CACR,MAAU31F,IAAS,IAAgB21F,EAAO,GACzCA,IAEAA,EAAO,EAEV,CAED,OAAO9pF,CACT,CAUA,SAASgpF,GAAWnyE,EAAM,CACxB,GAAI,OAAOA,GAAS,SAClB,MAAM,IAAI,UACR,mCAAqC,KAAK,UAAUA,CAAI,CACzD,CAEL,CCpaO,MAAMmzE,GAAU,CAAC,IAAAC,EAAG,EAE3B,SAASA,IAAM,CACb,MAAO,GACT,CCYO,SAASC,GAAMC,EAAe,CACnC,MAAO,GACLA,IAAkB,MAChB,OAAOA,GAAkB,UACzB,SAAUA,GACVA,EAAc,MACd,aAAcA,GACdA,EAAc,UAEdA,EAAc,OAAS,OAE7B,CClBO,SAASC,GAAUvzE,EAAM,CAC9B,GAAI,OAAOA,GAAS,SAClBA,EAAO,IAAI,IAAIA,CAAI,UACV,CAACqzE,GAAMrzE,CAAI,EAAG,CAEvB,MAAMloB,EAAQ,IAAI,UAChB,+EACEkoB,EACA,GACH,EACD,MAAAloB,EAAM,KAAO,uBACPA,CACP,CAED,GAAIkoB,EAAK,WAAa,QAAS,CAE7B,MAAMloB,EAAQ,IAAI,UAAU,gCAAgC,EAC5D,MAAAA,EAAM,KAAO,yBACPA,CACP,CAED,OAAO07F,GAAoBxzE,CAAI,CACjC,CAUA,SAASwzE,GAAoBjhF,EAAK,CAChC,GAAIA,EAAI,WAAa,GAAI,CAEvB,MAAMza,EAAQ,IAAI,UAChB,sDACD,EACD,MAAAA,EAAM,KAAO,4BACPA,CACP,CAED,MAAMg4C,EAAWv9B,EAAI,SACrB,IAAIwF,EAAQ,GAEZ,KAAO,EAAEA,EAAQ+3B,EAAS,QACxB,GACEA,EAAS,YAAY/3B,CAAK,IAAM,IAChC+3B,EAAS,YAAY/3B,EAAQ,CAAC,IAAM,GACpC,CACA,MAAM07E,EAAQ3jD,EAAS,YAAY/3B,EAAQ,CAAC,EAC5C,GAAI07E,IAAU,IAAgBA,IAAU,IAAe,CAErD,MAAM37F,EAAQ,IAAI,UAChB,qDACD,EACD,MAAAA,EAAM,KAAO,4BACPA,CACP,CACF,CAGH,OAAO,mBAAmBg4C,CAAQ,CACpC,CCvDA,MAAM4jD,GAA8B,CAClC,UACA,OACA,WACA,OACA,UACA,SACF,EAEO,MAAMC,EAAM,CAuBjB,YAAYh3F,EAAO,CAEjB,IAAI2D,EAEC3D,EAEM02F,GAAM12F,CAAK,EACpB2D,EAAU,CAAC,KAAM3D,CAAK,EACb,OAAOA,GAAU,UAAYi3F,GAAaj3F,CAAK,EACxD2D,EAAU,CAAC,MAAA3D,CAAK,EAEhB2D,EAAU3D,EANV2D,EAAU,CAAE,EAkBd,KAAK,IAAM,QAASA,EAAU,GAAK6yF,GAAQ,IAAK,EAUhD,KAAK,KAAO,CAAE,EASd,KAAK,QAAU,CAAE,EAOjB,KAAK,SAAW,CAAE,EAOlB,KAAK,MAYL,KAAK,IAUL,KAAK,OASL,KAAK,OAIL,IAAIp7E,EAAQ,GAEZ,KAAO,EAAEA,EAAQ27E,GAAM,QAAQ,CAC7B,MAAMzU,EAAQyU,GAAM37E,CAAK,EAKvBknE,KAAS3+E,GACTA,EAAQ2+E,CAAK,IAAM,QACnB3+E,EAAQ2+E,CAAK,IAAM,OAGnB,KAAKA,CAAK,EAAIA,IAAU,UAAY,CAAC,GAAG3+E,EAAQ2+E,CAAK,CAAC,EAAI3+E,EAAQ2+E,CAAK,EAE1E,CAGD,IAAIA,EAGJ,IAAKA,KAAS3+E,EAEPozF,GAAM,SAASzU,CAAK,IAEvB,KAAKA,CAAK,EAAI3+E,EAAQ2+E,CAAK,EAGhC,CAQD,IAAI,UAAW,CACb,OAAO,OAAO,KAAK,MAAS,SACxB6S,GAAQ,SAAS,KAAK,IAAI,EAC1B,MACL,CAcD,IAAI,SAASC,EAAU,CACrB8B,GAAe9B,EAAU,UAAU,EACnC+B,GAAW/B,EAAU,UAAU,EAC/B,KAAK,KAAOD,GAAQ,KAAK,KAAK,SAAW,GAAIC,CAAQ,CACtD,CAQD,IAAI,SAAU,CACZ,OAAO,OAAO,KAAK,MAAS,SACxBD,GAAQ,QAAQ,KAAK,IAAI,EACzB,MACL,CAYD,IAAI,QAAQE,EAAS,CACnBG,GAAW,KAAK,SAAU,SAAS,EACnC,KAAK,KAAOL,GAAQ,KAAKE,GAAW,GAAI,KAAK,QAAQ,CACtD,CAQD,IAAI,SAAU,CACZ,OAAO,OAAO,KAAK,MAAS,SACxBF,GAAQ,QAAQ,KAAK,IAAI,EACzB,MACL,CAcD,IAAI,QAAQG,EAAS,CAInB,GAHA6B,GAAW7B,EAAS,SAAS,EAC7BE,GAAW,KAAK,QAAS,SAAS,EAE9BF,EAAS,CACX,GAAIA,EAAQ,YAAY,CAAC,IAAM,GAC7B,MAAM,IAAI,MAAM,+BAA+B,EAGjD,GAAIA,EAAQ,SAAS,IAAK,CAAC,EACzB,MAAM,IAAI,MAAM,wCAAwC,CAE3D,CAED,KAAK,KAAOH,GAAQ,KAAK,KAAK,QAAS,KAAK,MAAQG,GAAW,GAAG,CACnE,CAQD,IAAI,MAAO,CACT,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAS,CAAC,CAC5C,CAcD,IAAI,KAAKjyE,EAAM,CACTqzE,GAAMrzE,CAAI,IACZA,EAAOuzE,GAAUvzE,CAAI,GAGvB6zE,GAAe7zE,EAAM,MAAM,EAEvB,KAAK,OAASA,GAChB,KAAK,QAAQ,KAAKA,CAAI,CAEzB,CAQD,IAAI,MAAO,CACT,OAAO,OAAO,KAAK,MAAS,SACxB8xE,GAAQ,SAAS,KAAK,KAAM,KAAK,OAAO,EACxC,MACL,CAcD,IAAI,KAAKiC,EAAM,CACbF,GAAeE,EAAM,MAAM,EAC3BD,GAAWC,EAAM,MAAM,EACvB,KAAK,KAAOjC,GAAQ,KAAK,KAAK,SAAW,GAAIiC,GAAQ,KAAK,SAAW,GAAG,CACzE,CA+DD,KAAK3tB,EAAeC,EAAwBC,EAAQ,CAElD,MAAMruE,EAAU,KAAK,QAAQmuE,EAAeC,EAAwBC,CAAM,EAE1E,MAAAruE,EAAQ,MAAQ,GAEVA,CACP,CA4DD,KAAKmuE,EAAeC,EAAwBC,EAAQ,CAElD,MAAMruE,EAAU,KAAK,QAAQmuE,EAAeC,EAAwBC,CAAM,EAE1E,OAAAruE,EAAQ,MAAQ,OAETA,CACR,CA4DD,QAAQmuE,EAAeC,EAAwBC,EAAQ,CACrD,MAAMruE,EAAU,IAAIkuE,GAElBC,EACAC,EACAC,CACD,EAED,OAAI,KAAK,OACPruE,EAAQ,KAAO,KAAK,KAAO,IAAMA,EAAQ,KACzCA,EAAQ,KAAO,KAAK,MAGtBA,EAAQ,MAAQ,GAEhB,KAAK,SAAS,KAAKA,CAAO,EAEnBA,CACR,CAeD,SAASqrF,EAAU,CACjB,OAAI,KAAK,QAAU,OACV,GAGL,OAAO,KAAK,OAAU,SACjB,KAAK,MAGE,IAAI,YAAYA,GAAY,MAAS,EACtC,OAAO,KAAK,KAAK,CACjC,CACH,CAYA,SAASwQ,GAAWE,EAAMv0F,EAAM,CAC9B,GAAIu0F,GAAQA,EAAK,SAASlC,GAAQ,GAAG,EACnC,MAAM,IAAI,MACR,IAAMryF,EAAO,uCAAyCqyF,GAAQ,IAAM,GACrE,CAEL,CAYA,SAAS+B,GAAeG,EAAMv0F,EAAM,CAClC,GAAI,CAACu0F,EACH,MAAM,IAAI,MAAM,IAAMv0F,EAAO,mBAAmB,CAEpD,CAYA,SAAS0yF,GAAWnyE,EAAMvgB,EAAM,CAC9B,GAAI,CAACugB,EACH,MAAM,IAAI,MAAM,YAAcvgB,EAAO,iCAAiC,CAE1E,CAUA,SAASm0F,GAAaj3F,EAAO,CAC3B,MAAO,GACLA,GACE,OAAOA,GAAU,UACjB,eAAgBA,GAChB,eAAgBA,EAEtB,CCloBO,MAAMs3F,GAYP,SAAU30E,EAAU,CAGlB,MAAM40E,EAFO,KACO,YAIX,UAEHv3F,EAAQu3F,EAAM50E,CAAQ,EAEtB60E,EAAQ,UAAY,CACxB,OAAOx3F,EAAM,MAAMw3F,EAAO,SAAS,CACpC,EAED,cAAO,eAAeA,EAAOD,CAAK,EAc3BC,CACR,ECiUD1tB,GAAM,CAAE,EAAC,eAeR,MAAM2tB,WAAkBH,EAAiB,CAI9C,aAAc,CAEZ,MAAM,MAAM,EAeZ,KAAK,SAAW,OAYhB,KAAK,OAAS,OAad,KAAK,UAAY,CAAE,EAanB,KAAK,SAAW,OAShB,KAAK,YAAc,GASnB,KAAK,OAAS,OASd,KAAK,UAAY,CAAE,EAUnB,KAAK,OAAS,OASd,KAAK,aAAe7C,GAAQ,CAC7B,CAaD,MAAO,CAEL,MAAMnB,EAEF,IAAImE,GAER,IAAIr8E,EAAQ,GAEZ,KAAO,EAAEA,EAAQ,KAAK,UAAU,QAAQ,CACtC,MAAMs8E,EAAW,KAAK,UAAUt8E,CAAK,EACrCk4E,EAAY,IAAI,GAAGoE,CAAQ,CAC5B,CAED,OAAApE,EAAY,KAAKa,GAAO,GAAM,GAAI,KAAK,SAAS,CAAC,EAE1Cb,CACR,CA6DD,KAAK/xF,EAAKvB,EAAO,CACf,OAAI,OAAOuB,GAAQ,SAEb,UAAU,SAAW,GACvBo2F,GAAe,OAAQ,KAAK,MAAM,EAClC,KAAK,UAAUp2F,CAAG,EAAIvB,EACf,MAID8pE,GAAI,KAAK,KAAK,UAAWvoE,CAAG,GAAK,KAAK,UAAUA,CAAG,GAAM,OAI/DA,GACFo2F,GAAe,OAAQ,KAAK,MAAM,EAClC,KAAK,UAAYp2F,EACV,MAIF,KAAK,SACb,CAmBD,QAAS,CACP,GAAI,KAAK,OACP,OAAO,KAMT,MAAM0uE,EAAyD,KAE/D,KAAO,EAAE,KAAK,YAAc,KAAK,UAAU,QAAQ,CACjD,KAAM,CAACynB,EAAU,GAAG/zF,CAAO,EAAI,KAAK,UAAU,KAAK,WAAW,EAE9D,GAAIA,EAAQ,CAAC,IAAM,GACjB,SAGEA,EAAQ,CAAC,IAAM,KACjBA,EAAQ,CAAC,EAAI,QAGf,MAAMi0F,EAAcF,EAAS,KAAKznB,EAAM,GAAGtsE,CAAO,EAE9C,OAAOi0F,GAAgB,YACzB,KAAK,aAAa,IAAIA,CAAW,CAEpC,CAED,YAAK,OAAS,GACd,KAAK,YAAc,OAAO,kBAEnB,IACR,CAgBD,MAAMrE,EAAM,CACV,KAAK,OAAQ,EACb,MAAMsE,EAAWC,GAAMvE,CAAI,EACrBjQ,EAAS,KAAK,QAAU,KAAK,OACnC,OAAAyU,GAAa,QAASzU,CAAM,EACrBA,EAAO,OAAOuU,CAAQ,EAAGA,CAAQ,CACzC,CA4CD,QAAQtE,EAAM9sF,EAAM,CAClB,MAAMwpE,EAAO,KAEb,YAAK,OAAQ,EACb8nB,GAAa,UAAW,KAAK,QAAU,KAAK,MAAM,EAClDC,GAAe,UAAW,KAAK,UAAY,KAAK,QAAQ,EAEjDvxF,EAAOwxF,EAAS,OAAWxxF,CAAI,EAAI,IAAI,QAAQwxF,CAAQ,EAQ9D,SAASA,EAASp4F,EAASC,EAAQ,CACjC,MAAM+3F,EAAWC,GAAMvE,CAAI,EAGrB2E,EAEsBjoB,EAAK,MAAM4nB,CAAQ,EAG/C5nB,EAAK,IAAIioB,EAAWL,EAAU,SAAU18F,EAAOivE,EAAMmpB,EAAM,CACzD,GAAIp4F,GAAS,CAACivE,GAAQ,CAACmpB,EACrB,OAAO4E,EAASh9F,CAAK,EAKvB,MAAMi9F,EAEsBhuB,EAGtBiuB,EAAgBpoB,EAAK,UAAUmoB,EAAa7E,CAAI,EAElD+E,GAAgBD,CAAa,EAC/B9E,EAAK,MAAQ8E,EAEb9E,EAAK,OAAS8E,EAGhBF,EAASh9F,EAAsDo4F,CAAM,CAC7E,CAAO,EAOD,SAAS4E,EAASh9F,EAAOo4F,EAAM,CACzBp4F,GAAS,CAACo4F,EACZzzF,EAAO3E,CAAK,EACH0E,EACTA,EAAQ0zF,CAAI,EAGZ9sF,EAAK,OAAW8sF,CAAI,CAEvB,CACF,CACF,CAiCD,YAAYA,EAAM,CAEhB,IAAI7sF,EAAW,GAEX8F,EAEJ,YAAK,OAAQ,EACburF,GAAa,cAAe,KAAK,QAAU,KAAK,MAAM,EACtDC,GAAe,cAAe,KAAK,UAAY,KAAK,QAAQ,EAE5D,KAAK,QAAQzE,EAAM4E,CAAQ,EAC3BI,GAAW,cAAe,UAAW7xF,CAAQ,EAGtC8F,EAKP,SAAS2rF,EAASh9F,EAAOo4F,EAAM,CAC7B7sF,EAAW,GACX+sF,GAAKt4F,CAAK,EACVqR,EAAS+mF,CACV,CACF,CAwCD,IAAInpB,EAAMmpB,EAAM9sF,EAAM,CACpB+xF,GAAWpuB,CAAI,EACf,KAAK,OAAQ,EAEb,MAAMquB,EAAe,KAAK,aAE1B,MAAI,CAAChyF,GAAQ,OAAO8sF,GAAS,aAC3B9sF,EAAO8sF,EACPA,EAAO,QAGF9sF,EAAOwxF,EAAS,OAAWxxF,CAAI,EAAI,IAAI,QAAQwxF,CAAQ,EAW9D,SAASA,EAASp4F,EAASC,EAAQ,CAKjC,MAAM+3F,EAAWC,GAAMvE,CAAI,EAC3BkF,EAAa,IAAIruB,EAAMytB,EAAUM,CAAQ,EAQzC,SAASA,EAASh9F,EAAOu9F,EAAYnF,EAAM,CACzC,MAAMoF,EAEFD,GAActuB,EAGdjvE,EACF2E,EAAO3E,CAAK,EACH0E,EACTA,EAAQ84F,CAAa,EAGrBlyF,EAAK,OAAWkyF,EAAepF,CAAI,CAEtC,CACF,CACF,CAmBD,QAAQnpB,EAAMmpB,EAAM,CAElB,IAAI7sF,EAAW,GAEX8F,EAEJ,YAAK,IAAI49D,EAAMmpB,EAAM4E,CAAQ,EAE7BI,GAAW,UAAW,MAAO7xF,CAAQ,EAE9B8F,EAKP,SAAS2rF,EAASh9F,EAAOivE,EAAM,CAC7BqpB,GAAKt4F,CAAK,EACVqR,EAAS49D,EACT1jE,EAAW,EACZ,CACF,CA+BD,UAAU0jE,EAAMmpB,EAAM,CACpB,KAAK,OAAQ,EACb,MAAMsE,EAAWC,GAAMvE,CAAI,EACrBnM,EAAW,KAAK,UAAY,KAAK,SACvC,OAAA4Q,GAAe,YAAa5Q,CAAQ,EACpCoR,GAAWpuB,CAAI,EAERgd,EAAShd,EAAMytB,CAAQ,CAC/B,CA2DD,IAAI73F,KAAUotE,EAAY,CACxB,MAAMwrB,EAAY,KAAK,UACjBC,EAAY,KAAK,UAIvB,GAFAlB,GAAe,MAAO,KAAK,MAAM,EAE7B33F,GAAU,KAEP,GAAI,OAAOA,GAAU,WAC1B84F,EAAU94F,EAAOotE,CAAU,UAClB,OAAOptE,GAAU,SACtB,MAAM,QAAQA,CAAK,EACrB+4F,EAAQ/4F,CAAK,EAEbg5F,EAAUh5F,CAAK,MAGjB,OAAM,IAAI,UAAU,+BAAiCA,EAAQ,GAAG,EAGlE,OAAO,KAMP,SAASi5F,EAAIj5F,EAAO,CAClB,GAAI,OAAOA,GAAU,WACnB84F,EAAU94F,EAAO,EAAE,UACV,OAAOA,GAAU,SAC1B,GAAI,MAAM,QAAQA,CAAK,EAAG,CACxB,KAAM,CAACk5F,EAAQ,GAAG9rB,CAAU,EACkBptE,EAC9C84F,EAAUI,EAAQ9rB,CAAU,CACtC,MACU4rB,EAAUh5F,CAAK,MAGjB,OAAM,IAAI,UAAU,+BAAiCA,EAAQ,GAAG,CAEnE,CAMD,SAASg5F,EAAUxsF,EAAQ,CACzB,GAAI,EAAE,YAAaA,IAAW,EAAE,aAAcA,GAC5C,MAAM,IAAI,MACR,4KACD,EAGHusF,EAAQvsF,EAAO,OAAO,EAElBA,EAAO,WACTqsF,EAAU,SAAW1E,GAAO,GAAM0E,EAAU,SAAUrsF,EAAO,QAAQ,EAExE,CAMD,SAASusF,EAAQI,EAAS,CACxB,IAAI/9E,EAAQ,GAEZ,GAAI+9E,GAAY,KAET,GAAI,MAAM,QAAQA,CAAO,EAC9B,KAAO,EAAE/9E,EAAQ+9E,EAAQ,QAAQ,CAC/B,MAAMl3F,EAAQk3F,EAAQ/9E,CAAK,EAC3B69E,EAAIh3F,CAAK,CACV,KAED,OAAM,IAAI,UAAU,oCAAsCk3F,EAAU,GAAG,CAE1E,CAOD,SAASL,EAAUI,EAAQ9rB,EAAY,CACrC,IAAIhyD,EAAQ,GACRg+E,EAAa,GAEjB,KAAO,EAAEh+E,EAAQw9E,EAAU,QACzB,GAAIA,EAAUx9E,CAAK,EAAE,CAAC,IAAM89E,EAAQ,CAClCE,EAAah+E,EACb,KACD,CAGH,GAAIg+E,IAAe,GACjBR,EAAU,KAAK,CAACM,EAAQ,GAAG9rB,CAAU,CAAC,UAI/BA,EAAW,OAAS,EAAG,CAC9B,GAAI,CAACisB,EAAS,GAAGloE,CAAI,EAAIi8C,EACzB,MAAMksB,EAAiBV,EAAUQ,CAAU,EAAE,CAAC,EAC1CG,GAAWD,CAAc,GAAKC,GAAWF,CAAO,IAClDA,EAAUlF,GAAO,GAAMmF,EAAgBD,CAAO,GAGhDT,EAAUQ,CAAU,EAAI,CAACF,EAAQG,EAAS,GAAGloE,CAAI,CAClD,CACF,CACF,CACH,CA8BO,MAAMqoE,GAAU,IAAI/B,GAAW,EAAC,OAAQ,EAS/C,SAASM,GAAaj1F,EAAM9C,EAAO,CACjC,GAAI,OAAOA,GAAU,WACnB,MAAM,IAAI,UAAU,WAAa8C,EAAO,oBAAoB,CAEhE,CASA,SAASk1F,GAAel1F,EAAM9C,EAAO,CACnC,GAAI,OAAOA,GAAU,WACnB,MAAM,IAAI,UAAU,WAAa8C,EAAO,sBAAsB,CAElE,CASA,SAAS60F,GAAe70F,EAAM22F,EAAQ,CACpC,GAAIA,EACF,MAAM,IAAI,MACR,gBACE32F,EACA,kHACH,CAEL,CAQA,SAAS01F,GAAW15B,EAAM,CAGxB,GAAI,CAACy6B,GAAWz6B,CAAI,GAAK,OAAOA,EAAK,MAAS,SAC5C,MAAM,IAAI,UAAU,uBAAyBA,EAAO,GAAG,CAG3D,CAUA,SAASy5B,GAAWz1F,EAAM42F,EAAWhzF,EAAU,CAC7C,GAAI,CAACA,EACH,MAAM,IAAI,MACR,IAAM5D,EAAO,0BAA4B42F,EAAY,WACtD,CAEL,CAMA,SAAS5B,GAAM93F,EAAO,CACpB,OAAO25F,GAAgB35F,CAAK,EAAIA,EAAQ,IAAIg3F,GAAMh3F,CAAK,CACzD,CAMA,SAAS25F,GAAgB35F,EAAO,CAC9B,MAAO,GACLA,GACE,OAAOA,GAAU,UACjB,YAAaA,GACb,aAAcA,EAEpB,CAMA,SAASs4F,GAAgBt4F,EAAO,CAC9B,OAAO,OAAOA,GAAU,UAAYi3F,GAAaj3F,CAAK,CACxD,CAUA,SAASi3F,GAAaj3F,EAAO,CAC3B,MAAO,GACLA,GACE,OAAOA,GAAU,UACjB,eAAgBA,GAChB,eAAgBA,EAEtB,CCtrCA,MAAM45F,GACJ,oEAGIC,GAAe,CAAE,EAEjBC,GAA2B,CAAC,mBAAoB,EAAI,EACpDC,GAAe,gCAIfC,GAAe,CACnB,CAAC,KAAM,aAAc,GAAI,sCAAsC,EAC/D,CAAC,KAAM,qBAAsB,GAAI,sCAAsC,EACvE,CACE,KAAM,YACN,GAAI,qDACJ,GAAI,cACL,EACD,CACE,KAAM,eACN,GAAI,qDACJ,GAAI,iBACL,EACD,CAAC,KAAM,YAAa,GAAI,kBAAkB,EAC1C,CACE,KAAM,kBACN,GAAI,qDACJ,GAAI,oBACL,EACD,CAAC,KAAM,aAAc,GAAI,sCAAsC,EAC/D,CAAC,KAAM,sBAAuB,GAAI,6BAA6B,EAC/D,CACE,KAAM,mBACN,GAAI,gDACL,EACD,CAAC,KAAM,aAAc,GAAI,mBAAmB,EAC5C,CAAC,KAAM,UAAW,GAAI,kCAAmC,GAAI,eAAe,EAC5E,CAAC,KAAM,eAAgB,GAAI,sBAAsB,EACjD,CAAC,KAAM,YAAa,GAAI,iCAAkC,GAAI,YAAY,EAC1E,CAAC,KAAM,SAAU,GAAI,4BAA6B,GAAI,UAAU,EAChE,CAAC,KAAM,YAAa,GAAI,mBAAmB,EAC3C,CAAC,KAAM,oBAAqB,GAAI,oBAAqB,GAAI,cAAc,EACvE,CAAC,KAAM,mBAAoB,GAAI,oBAAqB,GAAI,cAAc,CACxE,EAcO,SAASC,GAASt2F,EAAS,CAChC,MAAMu2F,EAAYC,GAAgBx2F,CAAO,EACnC4vF,EAAO6G,GAAWz2F,CAAO,EAC/B,OAAO02F,GAAKH,EAAU,QAAQA,EAAU,MAAM3G,CAAI,EAAGA,CAAI,EAAG5vF,CAAO,CACrE,CAmFA,SAASw2F,GAAgBx2F,EAAS,CAChC,MAAM22F,EAAgB32F,EAAQ,eAAiBk2F,GACzCU,EAAgB52F,EAAQ,eAAiBk2F,GACzCW,EAAsB72F,EAAQ,oBAChC,CAAC,GAAGA,EAAQ,oBAAqB,GAAGm2F,EAAwB,EAC5DA,GAQJ,OANkBN,GAAS,EACxB,IAAInO,EAAW,EACf,IAAIkP,CAAa,EACjB,IAAIlH,GAAcmH,CAAmB,EACrC,IAAIF,CAAa,CAGtB,CAUA,SAASF,GAAWz2F,EAAS,CAC3B,MAAMy2B,EAAWz2B,EAAQ,UAAY,GAC/B4vF,EAAO,IAAIyD,GAEjB,OAAI,OAAO58D,GAAa,WACtBm5D,EAAK,MAAQn5D,GASRm5D,CACT,CAYA,SAAS8G,GAAKjwB,EAAMzmE,EAAS,CAC3B,MAAM82F,EAAkB92F,EAAQ,gBAC1B+2F,EAAe/2F,EAAQ,aACvBg3F,EAAah3F,EAAQ,WACrBi3F,EAAqBj3F,EAAQ,mBAC7Bk3F,EAAWl3F,EAAQ,SACnBm3F,EAAmBn3F,EAAQ,iBAC3Bo3F,EAAep3F,EAAQ,cAAgBq3F,GAE7C,UAAWC,KAAejB,GACpB,OAAO,OAAOr2F,EAASs3F,EAAY,IAAI,IAEvC,GACEA,EAAY,MAEXA,EAAY,GACT,QAAUA,EAAY,GAAK,YAC3B,aAEJrB,GAEAqB,EAAY,GAVhB,QAsBJ,OAAAtJ,GAAMvnB,EAAM8wB,CAAS,EAEd/wB,GAAaC,EAAM,CAC5B,SAAIvxB,EAAQ,SACR,WAAA8hD,EACA,mBAAoB,GACxB,IAAIxuE,EAAG,IACP,KAAIgB,EAAI,KACJ,SAAU,GACV,SAAU,EACd,CAAG,EAGD,SAAS+tE,EAAUp8B,EAAM1jD,EAAOyuD,EAAQ,CACtC,GAAI/K,EAAK,OAAS,OAAS+K,GAAU,OAAOzuD,GAAU,SACpD,OAAIy/E,EACFhxB,EAAO,SAAS,OAAOzuD,EAAO,CAAC,EAE/ByuD,EAAO,SAASzuD,CAAK,EAAI,CAAC,KAAM,OAAQ,MAAO0jD,EAAK,KAAK,EAGpD1jD,EAGT,GAAI0jD,EAAK,OAAS,UAAW,CAE3B,IAAIv9D,EAEJ,IAAKA,KAAOmrE,GACV,GACE,OAAO,OAAOA,GAAenrE,CAAG,GAChC,OAAO,OAAOu9D,EAAK,WAAYv9D,CAAG,EAClC,CACA,MAAMvB,EAAQ8+D,EAAK,WAAWv9D,CAAG,EAC3BoyE,EAAOjH,GAAcnrE,CAAG,GAC1BoyE,IAAS,MAAQA,EAAK,SAAS7U,EAAK,OAAO,KAC7CA,EAAK,WAAWv9D,CAAG,EAAIw5F,EAAa,OAAO/6F,GAAS,EAAE,EAAGuB,EAAKu9D,CAAI,EAErE,CAEJ,CAED,GAAIA,EAAK,OAAS,UAAW,CAC3B,IAAI7sD,EAASwoF,EACT,CAACA,EAAgB,SAAS37B,EAAK,OAAO,EACtC87B,EACEA,EAAmB,SAAS97B,EAAK,OAAO,EACxC,GAMN,GAJI,CAAC7sD,GAAUyoF,GAAgB,OAAOt/E,GAAU,WAC9CnJ,EAAS,CAACyoF,EAAa57B,EAAM1jD,EAAOyuD,CAAM,GAGxC53D,GAAU43D,GAAU,OAAOzuD,GAAU,SACvC,OAAI0/E,GAAoBh8B,EAAK,SAC3B+K,EAAO,SAAS,OAAOzuD,EAAO,EAAG,GAAG0jD,EAAK,QAAQ,EAEjD+K,EAAO,SAAS,OAAOzuD,EAAO,CAAC,EAG1BA,CAEV,CACF,CACH,CAWO,SAAS4/E,GAAoBh7F,EAAO,CAIzC,MAAMm7F,EAAQn7F,EAAM,QAAQ,GAAG,EACzBo7F,EAAep7F,EAAM,QAAQ,GAAG,EAChCq7F,EAAar7F,EAAM,QAAQ,GAAG,EAC9Bw7E,EAAQx7E,EAAM,QAAQ,GAAG,EAE/B,OAEEm7F,IAAU,IAET3f,IAAU,IAAM2f,EAAQ3f,GACxB4f,IAAiB,IAAMD,EAAQC,GAC/BC,IAAe,IAAMF,EAAQE,GAE9BtB,GAAa,KAAK/5F,EAAM,MAAM,EAAGm7F,CAAK,CAAC,EAEhCn7F,EAGF,EACT,CC5aO,MAAMs7F,GAA8C,CAAC,CAC1D,KAAApqD,EACA,UAAAqqD,EAAY,GACZ,UAAA35E,EAAY,GACZ,eAAA45E,EAAiB,GACjB,GAAI34F,EAAY,MAClB,IAAM,CACJ,KAAM,CAAC44F,EAAeC,CAAgB,EAAIhqE,WAAS,EAAK,EAGxD,GAAI,CAACwf,GAAQA,EAAK,QAAUqqD,EACnB,OAAApvE,MAACtpB,EAAU,WAAA+e,EAAuB,SAAKsvB,CAAA,GAIhD,MAAMyqD,EAAgB,GAAGzqD,EAAK,UAAU,EAAGqqD,CAAS,CAAC,MAGrD,OAAKC,QAMFzhE,GACC,UAAA5M,OAAC6N,IAAQ,KAAMygE,EAAe,aAAcC,EAC1C,UAACvvE,MAAAmQ,GAAA,CAAe,QAAO,GACrB,SAAAnQ,EAAA,IAACtpB,EAAA,CACC,UAAW,GAAG+e,CAAS,eACvB,aAAc,IAAM85E,EAAiB,EAAI,EACzC,aAAc,IAAMA,EAAiB,EAAK,EAC1C,aAAc,IAAMA,EAAiB,EAAI,EACzC,WAAY,IAAMA,EAAiB,EAAK,EAEvC,SAAAC,CAAA,GAEL,QACCt+D,GAAe,WAAU,4EACxB,SAAClR,MAAA,KAAG,WAAK,CACX,GACF,EACF,GAtBOA,MAACtpB,EAAU,WAAA+e,EAAuB,SAAc+5E,CAAA,EAwB3D,ECtDM/yF,GAAS0mC,GAAa,iBAAiB,EAKjC,IAAAssD,QACVA,EAAA,cAAgB,gBAChBA,EAAA,kBAAoB,oBACpBA,EAAA,cAAgB,gBAHNA,QAAA,IAkBL,MAAMC,GAAsB,IAAe,CAEhD,MAAMC,EAAW,iEAAiE,KAAK,UAAU,SAAS,EAGpGC,EAAc,UAAW,WAAa,aAAc,UAGpD56B,EAAQ,mBAAmB,KAAK,UAAU,SAAS,EAGnD66B,EAAY,CAACF,EAEnBlzF,UAAO,KAAK,qCAAsC,CAChD,SAAAkzF,EACA,YAAAC,EACA,MAAA56B,EACA,UAAA66B,EACA,UAAW,UAAU,UACtB,EAMMD,GAAe56B,GAAS66B,CACjC,EAKMC,GAA0Br/F,GAAyB,KAEvC,OACQ,YAAY,EAGhC,IAAAs/F,MAAgB,KACpB,GAAIt/F,EAAM,KAAK,SAAS,QAAQ,EAEvB,KAAAs/F,EAAU,OAAO,IAAM,GAC5BA,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,UAElCt/F,EAAM,KAAK,SAAS,UAAU,EAEhC,KAAAs/F,EAAU,OAAO,IAAM,GAC5BA,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,EAK7C,MAAMC,EAAYv/F,EAAM,KAAK,MAAM,KAAK,EAAE,CAAC,EACrCw/F,EAAUx/F,EAAM,KAAK,MAAM,KAAK,EAAE,CAAC,GAAM,SAASu/F,EAAU,MAAM,GAAG,EAAE,CAAC,CAAC,EAAI,EAAK,MAGlFE,EAAY,IAAI,KAAKH,CAAS,EAC9B,CAACI,EAAWC,CAAW,EAAIJ,EAAU,MAAM,GAAG,EAAE,IAAI9E,GAAQ,SAASA,CAAI,GAAK,CAAC,EAC3EgF,EAAA,SAASC,EAAWC,EAAa,CAAC,EAEtC,MAAAC,EAAU,IAAI,KAAKN,CAAS,EAC5B,CAACO,EAASC,CAAS,EAAIN,EAAQ,MAAM,GAAG,EAAE,IAAI/E,GAAQ,SAASA,CAAI,GAAK,CAAC,EACvEmF,EAAA,SAASC,EAASC,EAAW,CAAC,EAGhC,MAAAC,EAAcxvF,GACXA,EAAK,cAAc,QAAQ,QAAS,EAAE,EAAE,MAAM,GAAG,EAAE,CAAC,EAAI,IAG3DyvF,EAAc1rD,GACXA,EAAK,QAAQ,MAAO,KAAK,EAAE,QAAQ,KAAM,KAAK,EAsBhD,MAlBW,CAChB,kBACA,cACA,uCACA,qBACA,iBACA,eACA,OAAOt0C,EAAM,EAAE,yBACf,WAAW+/F,EAAe,QAAM,CAAC,GACjC,WAAWA,EAAWN,CAAS,CAAC,GAChC,SAASM,EAAWH,CAAO,CAAC,GAC5B,WAAWI,EAAWhgG,EAAM,KAAK,CAAC,GAClC,eAAeggG,EAAWhgG,EAAM,WAAa,EAAE,CAAC,GAChD,YAAYggG,EAAW,qBAAqB,CAAC,GAC7C,aACA,iBACA,KAAK;AAAA,CAAM,CAGf,EAMaC,GAAgB,MAAOjgG,GAA0C,CACxE,IAKI,MAAAkgG,EAAYb,GAAuBr/F,CAAK,EAGxCukE,EAAQ,mBAAmB,KAAK,UAAU,SAAS,EACnDC,EAAY,WAAW,KAAK,UAAU,SAAS,EAC/C06B,EAAW36B,GAASC,GAAa,wCAAwC,KAAK,UAAU,SAAS,EAEhGx4D,GAAA,KAAK,0BAA2B,CAAE,MAAAu4D,EAAO,UAAAC,EAAW,SAAA06B,EAAU,UAAW,UAAU,UAAW,EAG/F,MAAArkD,EAAO,IAAI,KAAK,CAACqlD,CAAS,EAAG,CAAE,KAAM,8BAA+B,EAG1E,GAAI37B,EACE,IACIvrD,QAAM,IAAI,gBAAgB6hC,CAAI,EAC9B6vC,EAAO,SAAS,cAAc,GAAG,EACvCA,SAAK,KAAO1xE,EAAI,QAAQ,QAAS,SAAS,EAC1C0xE,EAAK,aAAa,WAAY,GAAG1qF,EAAM,MAAM,QAAQ,OAAQ,GAAG,CAAC,MAAM,EAC9D,cAAK,YAAY0qF,CAAI,EAC9BA,EAAK,MAAM,EACF,cAAK,YAAYA,CAAI,EAC9B,WAAW,IAAM,IAAI,gBAAgB1xE,CAAG,EAAG,GAAG,EAE9ChN,GAAO,KAAK,qCAAsC,CAAE,QAAShM,EAAM,GAAI,EAChE,CAAE,QAAS,UACXmgG,EAAU,CACjBn0F,GAAO,KAAK,2CAA4C,CAAE,SAAAm0F,CAAU,EAEtE,CAIF,GAAI37B,EACE,IAEF,GAAI,UAAU,MAAO,CAEbxrD,QAAM,IAAI,gBAAgB6hC,CAAI,EAGpC,aAAM,UAAU,MAAM,CACpB,MAAO,YAAY76C,EAAM,KAAK,uBAC9B,KAAM,cAAcA,EAAM,KAAK,MAAMA,EAAM,KAAK,KAAK,MAAM,CAAC,MAAMA,EAAM,IAAI;AAAA,2BAC5E,IAAK,OAAO,SAAS,KACtB,EAED,WAAW,IAAM,IAAI,gBAAgBgZ,CAAG,EAAG,GAAG,EAC9ChN,GAAO,KAAK,0DAA2D,CAAE,QAAShM,EAAM,GAAI,EACrF,CAAE,QAAS,GACpB,OACqB,CACvB,CAIE,GAAAk/F,GAAY,UAAU,MACpB,IAEF,MAAMvI,EAAO,IAAI,KAAK,CAAC97C,CAAI,EAAG,GAAG76C,EAAM,MAAM,QAAQ,OAAQ,GAAG,CAAC,OAAQ,CAAE,KAAM,gBAAiB,EAG9F,aAAU,UAAY,UAAU,SAAS,CAAE,MAAO,CAAC22F,CAAI,CAAE,CAAC,EAC5D,aAAM,UAAU,MAAM,CACpB,MAAO,CAACA,CAAI,EACZ,MAAO,YAAY32F,EAAM,KAAK,uBAC9B,KAAM,cAAcA,EAAM,KAAK,MAAMA,EAAM,KAAK,KAAK,MAAM,CAAC,MAAMA,EAAM,IAAI,GAC7E,EAEDgM,GAAO,KAAK,2CAA4C,CAAE,QAAShM,EAAM,GAAI,EACtE,CAAE,QAAS,UAEbogG,EAAY,CACnBp0F,GAAO,KAAK,oCAAqC,CAAE,WAAAo0F,CAAY,EAEjE,CAKI,MAAApnF,EAAM,IAAI,gBAAgB6hC,CAAI,EAC9B6vC,EAAO,SAAS,cAAc,GAAG,EACvC,OAAAA,EAAK,KAAO1xE,EACP0xE,EAAA,aAAa,WAAY,GAAG1qF,EAAM,MAAM,QAAQ,OAAQ,GAAG,CAAC,MAAM,EAC9D,cAAK,YAAY0qF,CAAI,EAC9BA,EAAK,MAAM,EACF,cAAK,YAAYA,CAAI,EAC9B,WAAW,IAAM,IAAI,gBAAgB1xE,CAAG,EAAG,GAAG,EAE9ChN,GAAO,KAAK,0BAA2B,CAAE,QAAShM,EAAM,GAAI,SAAUwkE,EAAY,UAAYD,EAAQ,MAAQ,SAAW,GAClH,CAAE,QAAS,UACXhmE,EAAO,CACdyN,UAAO,MAAM,uCAAwC,CAAE,MAAAzN,CAAO,GACvD,CACL,QAAS,GACT,UAAW,gBACX,aAAcA,aAAiB,MAAQA,EAAM,QAAU,mCAE3D,CACF,6JC5LM8hG,GAAoB,CAAC,CAAE,KAAA/rD,KAAmC,CAC9D,KAAM,CAACgsD,EAAYC,CAAa,EAAIzrE,WAAS,EAAK,EAgB5C0rE,GAbgBC,GAA6B,CAI7C,GAAAA,EAAS,QAAU,IAAkB,OAAAA,EAGzC,MAAMC,EAAYD,EAAS,UAAU,EAAG,GAAS,EAC3CE,EAAiBD,EAAU,YAAY,GAAG,EAEhD,OAAOA,EAAU,UAAU,EAAGC,CAAc,EAAI,QAGtBrsD,CAAI,EAC1BssD,EAAmBtsD,EAAK,OAASksD,EAAO,OAExCK,EAAe,IAAM,CACzBN,EAAc,CAACD,CAAU,GAIzB,OAAA/wE,MAAC,MAAI,WAAU,yBAEb,SAAAgB,EAAA,KAAC,OACC,QAASqwE,EAAmBC,EAAe,OAC3C,UAAY9hG,GAAM,CACZ6hG,IAAqB7hG,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OACtDA,EAAE,eAAe,EACJ8hG,IAEjB,EACA,SAAUD,EAAmB,EAAI,OACjC,KAAMA,EAAmB,SAAW,OACpC,gBAAeN,EACf,UAAWM,EAAmB,iBAAmB,GAEjD,UAAArxE,MAACuxE,IAAc,WAAY,CACzB,EAAG,CAAC,CAAC,KAAA5+B,EAAM,GAAG37D,CAAA,IAAWgpB,MAAC,IAAE,WAAU,OAAQ,GAAGhpB,CAAO,GACxD,GAAI,CAAC,CAAC,KAAA27D,EAAM,GAAG37D,CAAA,IAAWgpB,MAAC,KAAG,WAAU,yBAA0B,GAAGhpB,CAAO,GAC5E,GAAI,CAAC,CAAC,KAAA27D,EAAM,GAAG37D,CAAA,IAAWgpB,MAAC,KAAG,WAAU,6BAA8B,GAAGhpB,CAAO,GAChF,GAAI,CAAC,CAAC,KAAA27D,EAAM,GAAG37D,CAAA,IAAWgpB,MAAC,KAAG,WAAU,iCAAkC,GAAGhpB,CAAO,EACtF,EACG,SAAa+5F,EAAAhsD,EAAOksD,CACvB,GAGCI,GACErxE,EAAA,WAAI,UAAU,gDACZ,WAEGgB,OAAA0rB,EAAA,oBAAC1sB,MAAAwxE,GAAA,CAAU,UAAU,cAAe,GACpCxxE,MAAC,QAAK,SAAO,aACf,EAGEgB,OAAA0rB,EAAA,oBAAC1sB,MAAAyxE,GAAA,CAAY,UAAU,cAAe,GACtCzxE,MAAC,QAAK,SAAa,mBACrB,CAEJ,IAGN,GAEJ,EAEa0xE,GAAe,CAAC,CAAE,MAAAjhG,EAAO,OAAAkhG,EAAQ,QAAA//D,EAAS,OAAAthC,KAAgC,CACrF,MAAMozC,EAAWC,KACX,CAAE,MAAAzwB,GAAUM,KAGZ,CAACk3B,EAAaknD,CAAc,EAAIrsE,EAAA,SAAkB,CAAE,GACpD,CAACssE,EAAmBC,CAAoB,EAAIvsE,WAAkB,EAAK,EACnE,CAACwsE,EAAeC,CAAgB,EAAIzsE,EAAA,SAAkB,CAAE,GAG9DC,YAAU,IAAM,CACVmsE,GAAUlhG,GACFqf,EAAA,wBAAwBO,GAAY,cAAe,CAC3D,SAAU5f,EAAM,GAChB,YAAaA,EAAM,MACnB,OAAAH,CAAA,CACD,CAEF,GAACqhG,EAAQlhG,EAAOH,CAAM,CAAC,EAG1Bk1B,YAAU,IAAM,CACd,GAAI/0B,EAAO,CACT,MAAMwhG,EAAqB5oD,KAO3B,GANAuoD,EAAeK,CAAkB,EAGjCH,EAAqBpC,IAAqB,EAGtCj/F,EAAM,WAAY,CACd,MAAAyhG,EAAuBtpD,GAAoBn4C,EAAM,UAAU,EAC9D,OAAYjB,KAAE,KAAOiB,EAAM,EAAE,EAChCuhG,EAAiBE,CAAoB,CACvC,CACF,GACC,CAACzhG,CAAK,CAAC,EAGJ,MAAA0hG,EAAU1hG,EAAQi6C,EAAY,QAAc0nD,EAAM,KAAO3hG,EAAM,EAAE,EAAI,GAGrE4hG,EAAgB,IAAM,CACrB5hG,IAGL,QAAQ,IAAI,4DAA4DA,EAAM,EAAE,YAAYA,EAAM,UAAU,EAAE,EACtG,YAAI,wCAAwCH,CAAM,EAAE,EAG3C+hB,GAAAhC,GAAY,MAAO,qBAAsB,CACxD,KAAM,gBACN,SAAU5f,EAAM,GAChB,YAAaA,EAAM,WACnB,OAAAH,CAAA,CACD,EAGOshC,IAGR,WAAW,IAAM,CAEf,QAAQ,IAAI,iEAAiEnhC,EAAM,UAAU,EAAE,EAE/FizC,EAAS,OAAQ,CACf,MAAO,CACL,oBAAqBjzC,EAAM,WAC3B,UAAW,GACX,UAAW,IAAI,KAAK,EAAE,QAAQ,CAChC,EACD,GACA,GAAG,IAIF6hG,EAAoB9iG,GAAwB,CAChDA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAEbiB,IAGLulE,GAA4BvlE,CAAK,EAGjCizC,EAAS,2BAA2B,EAC5B9R,IAGE9hB,EAAA,0BAA0BO,GAAY,aAAc,CAC5D,KAAM,gBACN,SAAU5f,EAAM,GAChB,YAAaA,EAAM,MACpB,IAIG8hG,EAAmB/iG,GAAwB,CAI/C,GAHAA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAEd,CAACiB,EAAO,OAEai6C,EAAY,QAAc0nD,EAAM,KAAO3hG,EAAM,EAAE,GAItEo5C,GAAiBp5C,EAAM,EAAE,EACzBmhG,EAAevoD,IAAgB,EAI/Bv5B,EAAU,wBAAwBO,GAAY,OAAQ,QAAS5f,EAAM,GAAI,CACvE,YAAaA,EAAM,MACnB,OAAAH,CAAA,CACD,IAGDm5C,GAAUh5C,CAAK,EACfmhG,EAAevoD,IAAgB,EAI/Bv5B,EAAU,wBAAwBO,GAAY,KAAM,QAAS5f,EAAM,GAAI,CACrE,YAAaA,EAAM,MACnB,OAAAH,CAAA,CACD,EACH,EAIIkiG,EAAsB,MAAOhjG,GAAwB,CAIzD,GAHAA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAEd,EAACiB,EAED,IAEQqf,EAAA,gBAAgB,kBAAmBrf,EAAM,EAAE,EAG/C,MAAA4P,EAAS,MAAMqwF,GAAcjgG,CAAK,EAEpC4P,EAAO,QACH6S,EAAA,CACJ,MAAO,iCACP,YAAa,GAAGziB,EAAM,KAAK,oCAC5B,EAGG4P,EAAO,YAAcovF,GAAkB,cACnCv8E,EAAA,CACJ,MAAO,+BACP,YAAa,wDACb,QAAS,cACV,GAEKA,EAAA,CACJ,MAAO,SACP,YAAa7S,EAAO,cAAgB,yDACpC,QAAS,cACV,EACSyP,EAAA,WAAWO,GAAY,UAAW,kBAAmB,CAC7D,SAAU5f,EAAM,GAChB,cAAe4P,EAAO,aACvB,SAGErR,EAAO,CACN,cAAM,wCAAyCA,CAAK,EACtDkkB,EAAA,CACJ,MAAO,SACP,YAAa,sCACb,QAAS,cACV,EACSpD,EAAA,WAAWO,GAAY,UAAW,4BAA6B,CACvE,SAAU5f,GAAA,YAAAA,EAAO,GACjB,cAAgBzB,GAAA,YAAAA,EAAiB,QAClC,CACH,GAIF,GAAI,CAACyB,GAAS,CAACkhG,EAAe,YAG9B,MAAMc,EAAeN,EAGfjqD,EAASF,GAAQ,KAAKE,GAAUA,EAAO,KAAOz3C,EAAM,QAAQ,EAGhE,OAAAuvB,MAACwzC,GAAO,MAAMm+B,EAAQ,aAAep+E,GAAS,CAACA,GAAQqe,EACrD,WAAA5Q,EAAA,KAAC8yC,GAAA,CACC,UAAU,kFACV,mBAAiB,4BAEjB,UAAA9zC,MAAC,MAAI,IAAG,4BAA4B,UAAU,UAAU,SAExD,6CAEC,MAAI,WAAU,gFACb,SAACgB,EAAA,YAAI,UAAU,iBACb,UAAAhB,EAAA,IAAC,UACC,UAAW,kEAAkEyyE,EAAe,kCAAoC,+BAA+B,+CAC/J,QAASF,EACT,MAAOE,EAAe,sBAAwB,sBAC9C,KAAK,SAEJ,SAAAA,QACEC,GAAc,WAAU,UAAU,EAEnC1yE,EAAA,IAAC21C,GAAS,WAAU,SAAU,GAElC,EAEA31C,EAAA,IAACw0C,GAAA,CACC,MAAO,GAAG/jE,EAAM,KAAK,iBACrB,KAAM,aAAaA,EAAM,KAAK,QAAQA,EAAM,UAAU,+BACtD,IAAK,OAAO,SAAS,KACvB,EAEAuvB,EAAA,IAAC,UACC,UAAU,2IACV,QAAS4R,EACT,MAAM,SACN,KAAK,SAEL,SAAA5R,MAACS,GAAE,WAAU,SAAU,GACzB,GACF,CACF,GAEAT,MAAC,OAAI,UAAW,OAAOvvB,EAAM,OAAS,aAAe,eAAiB,cAAc,EAAI,GAExFuvB,MAACk0C,IAAa,UAAU,UACtB,eAACE,GAAa,UAAA3jE,EAAM,MAAM,CAC5B,GAEAuwB,OAAC,MAAI,WAAU,8BACZ,UAAMvwB,EAAA,OAAS,aAEZuwB,EAAA,KAAA0rB,EAAA,oBAAC1sB,EAAA,WAAI,UAAU,mCACb,SAAAA,MAAC,MAAG,UAAU,iDAEX,SAAMvvB,EAAA,MACT,CACF,GACAuvB,MAAC,IAAE,WAAU,8BACX,SAAAA,EAAA,IAACmvE,GAAA,CACC,KAAM1+F,EAAM,WACZ,UAAW,GACX,UAAU,2BAEd,EACF,GAECuvB,MAAA,OAAI,UAAU,mCACb,SAACA,MAAA,MAAG,UAAU,iDAEX,SAAMvvB,EAAA,KACT,GACF,EAEFuwB,OAAC,MAAI,WAAU,yBACb,UAAChB,MAAAytB,GAAA,CAAO,UAAU,6BAA8B,GAChDztB,MAAC,IAAE,WAAU,yBACX,SAAAA,EAAA,IAACmvE,GAAA,CACC,KAAM,GAAGhnD,GAAoB13C,EAAM,UAAU,CAAC,MAAMA,EAAM,IAAI,GAC9D,UAAW,GACX,UAAU,2BAEd,GACF,EAEAuwB,OAAC,MAAI,WAAU,mCAEZ,WAAAknB,GAAA,YAAAA,EAAQ,eACPloB,MAAC8wE,GAAkB,MAAM5oD,EAAO,aAAc,EAI/Cz3C,EAAM,OAAS,WAAay3C,GAC1BlnB,OAAA,OAAI,UAAU,YAEZ,UAAOknB,EAAA,cACL,MACC,WAACloB,EAAA,UAAG,UAAU,0CAA0C,SAAc,mBACtEA,EAAA,IAAC,KACC,KAAM,UAAUkoB,EAAO,KAAK,GAC5B,UAAU,wCAET,SAAOA,EAAA,MACV,GACF,EAIDA,EAAO,SACNlnB,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAS,cACjEA,EAAA,IAAC,KACC,KAAMkoB,EAAO,QACb,OAAO,SACP,IAAI,sBACJ,UAAU,wCAET,SAAAA,EAAO,QAAQ,QAAQ,eAAgB,EAAE,EAAE,QAAQ,MAAO,EAAE,EAC/D,GACF,EAIDA,EAAO,OACNlnB,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAU,eAClEA,EAAA,IAAC,KACC,KAAM,OAAOkoB,EAAO,KAAK,GACzB,UAAU,wCAET,SAAOA,EAAA,MACV,GACF,EAIDA,EAAO,UACNlnB,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAS,cAChEA,EAAA,YAAK,UAAU,wBAAyB,WAAO,SAAS,GAC3D,EAIDkoB,EAAO,SACNlnB,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAQ,aAChEA,EAAA,IAAC,KACC,KAAMkoB,EAAO,QACb,OAAO,SACP,IAAI,sBACJ,UAAU,wCAET,SAAAA,EAAO,QAAQ,QAAQ,eAAgB,EAAE,EAAE,QAAQ,MAAO,EAAE,EAC/D,GACF,EAIDA,EAAO,QACNlnB,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAO,YAC/DA,EAAA,IAAC,KACC,KAAMkoB,EAAO,OACb,OAAO,SACP,IAAI,sBACJ,UAAU,wCAET,SAAAA,EAAO,OAAO,QAAQ,eAAgB,EAAE,EAAE,QAAQ,MAAO,EAAE,EAC9D,GACF,EAIDA,EAAO,UACLlnB,OAAA,OAAI,UAAU,yBACb,UAAChB,EAAA,YAAK,UAAU,kEAAkE,SAAU,eAC3FA,EAAA,YAAK,UAAU,wBAAyB,WAAO,SAAS,GAC3D,EAIDkoB,EAAO,SACLlnB,OAAA,OAAI,UAAU,yBACb,UAAChB,EAAA,YAAK,UAAU,kEAAkE,SAAQ,aACzFA,EAAA,YAAK,UAAU,wBAAyB,WAAO,QAAQ,GAC1D,GAEJ,EAIDvvB,EAAM,OAAS,YAAay3C,GAAA,YAAAA,EAAQ,SAAUA,EAAO,OAAO,OAAS,GACpElnB,EAAA,KAAC,MAAI,WAAU,OACb,UAACA,OAAA,MAAG,UAAU,4DACZ,UAAChB,MAAA,QAAK,UAAU,wCAAyC,GAAO,UAElE,EACCA,EAAA,WAAI,UAAU,+CACZ,SAAOkoB,EAAA,OAAO,IAAI,CAACyqD,EAAO1jF,IACxB+Q,MAAA,OAAgB,UAAU,+CACzB,SAAAA,EAAA,IAAC,OACC,IAAKquB,GAAaskD,CAAK,EACvB,IAAK,GAAGliG,EAAM,UAAU,YAAYwe,EAAQ,CAAC,GAC7C,UAAU,mDACV,QAAQ,OACR,QAAUzf,GAAM,CACN,cAAM,oCAAoCmjG,CAAK,EAAE,EACvDnjG,EAAA,cAAc,MAAM,QAAU,MAClC,KATMyf,CAWV,CACD,EACH,GACF,EAIDxe,EAAM,OAAS,YAAay3C,GAAA,YAAAA,EAAQ,SAAUA,EAAO,OAAO,OAAS,GACpElnB,EAAA,KAAC,MAAI,WAAU,OACb,UAACA,OAAA,MAAG,UAAU,4DACZ,UAAChB,MAAA,QAAK,UAAU,wCAAyC,GAAO,UAElE,EACAA,MAAC,OAAI,UAAU,gCACZ,WAAO,OAAO,IAAI,CAAC4yE,EAAU3jF,IAAU,CAEtC,IAAI4jF,EAAWD,EAGf,GAAIA,EAAS,SAAS,aAAa,GAAKA,EAAS,SAAS,UAAU,EAAG,CAErE,IAAIE,EAAU,GAEV,GAAAF,EAAS,SAAS,sBAAsB,EAAG,CAC7CE,EAAUF,EAAS,MAAM,IAAI,EAAE,CAAC,EAE1B,MAAAG,EAAoBD,EAAQ,QAAQ,GAAG,EACzCC,IAAsB,KACdD,IAAQ,UAAU,EAAGC,CAAiB,EAEzC,MAAAH,EAAS,SAAS,WAAW,IACtCE,EAAUF,EAAS,MAAM,WAAW,EAAE,CAAC,GAGrCE,IACFD,EAAW,iCAAiCC,CAAO,GAEvD,CAKE,OAAA9yE,MAAC,MAAgB,WAAU,yDACzB,SAAAA,EAAA,IAAC,UACC,IAAK6yE,EACL,MAAO,GAAGpiG,EAAM,UAAU,YAAYwe,EAAQ,CAAC,GAC/C,MAAM,2FACN,gBAAe,GACf,UAAU,sCACV,QAAQ,UAPFA,CASV,CAEH,GACH,GACF,EAMDi5B,GAAUA,EAAO,WAAaA,EAAO,UAAU,SAAS,WAAW,IAAM,IAAM,CAcxE,MAAAs+C,GAZ0B/8E,GAAwB,CAClD,IAIK,OAHG,IAAI,IAAIA,CAAG,EACC,SAAS,QAAQ,MAAO,EAAE,EACtB,MAAM,GAAG,EAAE,OAAO,OAAO,EACtC,IAAS,WAChB,CAGC,OAFSA,EAAI,MAAM,GAAG,EAAE,CAAC,EAAE,QAAQ,MAAO,EAAE,EAC7B,MAAM,GAAG,EAAE,OAAO,OAAO,EAClC,IAAS,KACxB,IAEoCy+B,EAAO,SAAS,EAClD,OAACs+C,EAELxmE,MAAC,MAAI,WAAU,sCAKb,SAAAA,EAAA,IAAC,OACC,UAAU,uEACV,MAAO,CACL,cAAe,OACf,OAAQ,CACV,EAEA,SAAAA,EAAA,IAAC,UACC,MAAO,qBAAqBvvB,EAAM,UAAU,GAC5C,IAAK,6BAA6B+1F,CAAM,gCACxC,MAAM,OACN,OAAO,OACP,YAAY,IACZ,UAAU,KACV,kBAAkB,OAClB,QAAQ,OACR,MAAO,CACL,SAAU,WACV,IAAK,QACL,KAAM,EACN,MAAO,OACP,OAAQ,mBACV,EACD,EAEL,IAhCoB,IAgCpB,GAEC,EAEHxlE,OAAC,MAAI,WAAU,oHACZ,UAAA1wB,IAAW,UACV0wB,EAAA,KAAC8rB,EAAA,CACC,UAAU,4DACV,QAASulD,EAET,UAACryE,MAAAytB,GAAA,CAAO,UAAU,cAAe,GAAE,uBAIrCzsB,EAAA,KAAC8rB,EAAA,CACC,UAAU,4DACV,QAAS,IAAMpJ,EAAS,UAAU,EAElC,UAAC1jB,MAAA01C,GAAA,CAAS,UAAU,cAAe,GAAE,qBAEvC,EAGF10C,EAAA,KAAC8rB,EAAA,CACC,QAAQ,UACR,UAAU,4DACV,QAAS,IAAM,CACTr8C,IAEe4hB,GAAAhC,GAAY,MAAO,iBAAkB,CACpD,KAAM,gBACN,SAAU5f,EAAM,GAChB,YAAaA,EAAM,WACpB,EAESqf,EAAA,yBAAyBrf,EAAM,WAAY,oBAAoB,GAE3EizC,EAAS,oBAAqB,CAC5B,MAAO,CACL,mBAAoBjzC,EAAM,WAC1B,UAAW,EACb,EACD,EACOmhC,GACV,EAEA,UAAC5R,MAAA61C,GAAA,CAAK,UAAU,cAAe,GAAE,oBAEnC,GACF,EAGA70C,OAAC,MAAI,WAAU,qEACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,UAAU,oEACV,QAAS0lD,EACT,SAAU,CAACX,EAEV,WAEG7wE,OAAA0rB,EAAA,oBAAC1sB,MAAA01C,GAAA,CAAS,UAAU,uBAAwB,GAC3C11C,EAAA,YAAK,UAAU,WAAW,SAAqB,2BAClD,EAGEgB,OAAA0rB,EAAA,oBAAC1sB,MAAAq1C,GAAA,CAAO,UAAU,uBAAwB,GACzCr1C,EAAA,YAAK,UAAU,WAAW,SAAoB,0BACjD,EAEJ,EAEAgB,EAAA,KAAC8rB,EAAA,CACC,QAAQ,UACR,UAAU,oEACV,QAASwlD,EAET,UAACtyE,MAAA41C,GAAA,CAAO,UAAU,uBAAwB,GACzC51C,EAAA,YAAK,UAAU,WAAW,SAAoB,0BACjD,GACF,EAEAA,EAAA,IAAC8sB,EAAA,CACC,UAAU,iEACV,QAAQ,UACR,QAASlb,EACV,kBAED,GACF,GACF,GAEJ,GAEJ,ECxsBMn1B,GAAS0mC,GAAa,mBAAmB,EAclC6vD,GAAiBviG,GAAmC,CAC/D,MAAMT,EAA4B,GA+BlC,GA5BKS,EAAM,GAEC,eAAe,KAAKA,EAAM,EAAE,GACtCT,EAAO,KAAK,CAAE,MAAO,KAAM,QAAS,4FAA8F,EAFlIA,EAAO,KAAK,CAAE,MAAO,KAAM,QAAS,gCAAkC,GAKpE,CAACS,EAAM,OAASA,EAAM,MAAM,SAAW,KACzCT,EAAO,KAAK,CAAE,MAAO,QAAS,QAAS,2BAA4B,GAGjE,CAACS,EAAM,YAAcA,EAAM,WAAW,SAAW,KACnDT,EAAO,KAAK,CAAE,MAAO,aAAc,QAAS,sCAAwC,EAGjFS,EAAM,KAEAA,EAAM,OAAS,cAAgBA,EAAM,OAAS,WACvDT,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,0DAA4D,EAFlGA,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,sCAAwC,GAK5E,CAACS,EAAM,WAAaA,EAAM,UAAU,SAAW,KACjDT,EAAO,KAAK,CAAE,MAAO,YAAa,QAAS,6CAA+C,GAGxF,CAACS,EAAM,MAAQA,EAAM,KAAK,SAAW,KACvCT,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,0BAA4B,EAGhE,CAACS,EAAM,MAAQA,EAAM,KAAK,SAAW,EACvCT,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,yCAA0C,MAErE,WAAA24C,KAAOl4C,EAAM,KAClB,GAAAk4C,IAAQ,UAAYA,IAAQ,WAAY,CAC1C34C,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,gDAAiD,EACvF,KACF,CAIJ,OAAI,CAACS,EAAM,cAAgBA,EAAM,aAAa,SAAW,KACvDT,EAAO,KAAK,CAAE,MAAO,eAAgB,QAAS,iCAAkC,EAK9EA,EAAO,OAAS,EAClByM,GAAO,KAAK,6BAA6BhM,EAAM,EAAE,WAAY,CAAE,OAAAT,EAAQ,EAEvEyM,GAAO,KAAK,6BAA6BhM,EAAM,EAAE,UAAU,EAGtD,CACL,QAAST,EAAO,SAAW,EAC3B,OAAAA,CAAA,CAEJ,EAGaijG,GAAoBrvD,GAAyC,CACxE,MAAM5zC,EAA4B,GAG9B,OAAC4zC,EAAS,GAEF,eAAe,KAAKA,EAAS,EAAE,GACzC5zC,EAAO,KAAK,CAAE,MAAO,KAAM,QAAS,4FAA8F,EAFlIA,EAAO,KAAK,CAAE,MAAO,KAAM,QAAS,gCAAkC,GAKpE,CAAC4zC,EAAS,MAAQA,EAAS,KAAK,SAAW,KAC7C5zC,EAAO,KAAK,CAAE,MAAO,OAAQ,QAAS,yBAA0B,GAG9D,CAAC4zC,EAAS,aAAeA,EAAS,YAAY,SAAW,KAC3D5zC,EAAO,KAAK,CAAE,MAAO,cAAe,QAAS,iCAAkC,EAO7E,OAAO4zC,EAAS,GAAM,UACxB5zC,EAAO,KAAK,CAAE,MAAO,IAAK,QAAS,sCAAuC,EAGxE,OAAO4zC,EAAS,GAAM,UACxB5zC,EAAO,KAAK,CAAE,MAAO,IAAK,QAAS,sCAAuC,EAIxEA,EAAO,OAAS,EAClByM,GAAO,KAAK,sBAAsBmnC,EAAS,EAAE,WAAY,CAAE,OAAA5zC,EAAQ,EAEnEyM,GAAO,KAAK,sBAAsBmnC,EAAS,EAAE,UAAU,EAGlD,CACL,QAAS5zC,EAAO,SAAW,EAC3B,OAAAA,CAAA,CAEJ,EAGakjG,GAA0BljG,GAC9BA,EAAO,IAAahB,GAAA,GAAGA,EAAM,KAAK,KAAKA,EAAM,OAAO,EAAE,EAAE,KAAK;AAAA,CAAI,ECxHpEyN,GAAS0mC,GAAa,aAAa,EAWnCgwD,GAA0B,CAC9B,OAAQC,GACR,UAAWC,GACX,UAAW,GACX,MAAO,IACT,EAGMC,GAAN,MAAMA,EAAY,CAKR,aAAc,CAHd3rD,GAAA,cACAA,GAAA,iBAA4C,IAGlDlrC,GAAO,KAAK,sCAAsC,EAC7C,WAAQ,KAAK,wBAA0B02F,EAC9C,CAEA,OAAc,aAA2B,CACnC,OAACG,GAAY,WACHA,GAAA,SAAW,IAAIA,IAEtBA,GAAY,QACrB,CAGO,UAAsB,CACpB,OAAE,GAAG,KAAK,MACnB,CAEO,WAAqB,CAC1B,MAAO,CAAC,GAAG,KAAK,MAAM,MAAM,CAC9B,CAEO,cAA2B,CAChC,MAAO,CAAC,GAAG,KAAK,MAAM,SAAS,CACjC,CAEO,aAAajgF,EAA+B,CACjD,OAAO,KAAK,MAAM,OAAO,KAAc5iB,KAAM,KAAO4iB,CAAE,CACxD,CAEO,gBAAgBA,EAAkC,CACvD,OAAO,KAAK,MAAM,UAAU,KAAiBuwB,KAAS,KAAOvwB,CAAE,CACjE,CAEO,sBAAsB+0B,EAA6B,CACxD,OAAO,KAAK,MAAM,OAAO,OAAgB33C,KAAM,aAAe23C,CAAU,CAC1E,CAGO,YAAYmrD,EAA2D,CAC5E92F,GAAO,KAAK,8BAA8B82F,EAAa,EAAE,EAAE,EAGrD,MAAAC,EAAmBR,GAAcO,CAAY,EAE/C,IAACC,EAAiB,QAAS,CACvB,MAAA5mF,EAAesmF,GAAuBM,EAAiB,MAAM,EACnE/2F,UAAO,MAAM,uCAAuC82F,EAAa,EAAE,GAAI3mF,CAAY,EAEnF,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,yBAAyBA,CAAY,GAC7C,EAEM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAEA,YAAK,SAAS,CACZ,GAAG,KAAK,MACR,OAAQ,KAAK,MAAM,OAAO,IACxBnc,KAAM,KAAO8iG,EAAa,GAAKA,EAAe9iG,CAChD,EACA,MAAO,KACR,EAEM,CAAE,QAAS,GACpB,CAEO,eAAegjG,EAAiE,CACrFh3F,GAAO,KAAK,uBAAuBg3F,EAAgB,EAAE,EAAE,EAGjD,MAAAD,EAAmBP,GAAiBQ,CAAe,EAErD,IAACD,EAAiB,QAAS,CACvB,MAAA5mF,EAAesmF,GAAuBM,EAAiB,MAAM,EACnE/2F,UAAO,MAAM,mCAAmCg3F,EAAgB,EAAE,GAAI7mF,CAAY,EAElF,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,yBAAyBA,CAAY,GAC7C,EAEM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAEA,YAAK,SAAS,CACZ,GAAG,KAAK,MACR,UAAW,KAAK,MAAM,UAAU,IAC9Bg3B,KAAS,KAAO6vD,EAAgB,GAAKA,EAAkB7vD,CACzD,EACA,MAAO,KACR,EAEM,CAAE,QAAS,GACpB,CAEO,SAAS8vD,EAAuD,CAIjE,GAHJj3F,GAAO,KAAK,gCAAgCi3F,EAAS,KAAK,EAAE,EAGxD,KAAK,MAAM,OAAO,QAAcjjG,EAAM,KAAOijG,EAAS,EAAE,EAAG,CACvD,MAAA9mF,EAAe,0BAA0B8mF,EAAS,EAAE,eAC1Dj3F,UAAO,MAAMmQ,CAAY,EACzB,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAOA,CAAA,CACR,EACM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAGM,MAAA4mF,EAAmBR,GAAcU,CAAQ,EAE3C,IAACF,EAAiB,QAAS,CACvB,MAAA5mF,EAAesmF,GAAuBM,EAAiB,MAAM,EAC5D/2F,UAAA,MAAM,8CAA+CmQ,CAAY,EAExE,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,yBAAyBA,CAAY,GAC7C,EAEM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAEA,YAAK,SAAS,CACZ,GAAG,KAAK,MACR,OAAQ,CAAC,GAAG,KAAK,MAAM,OAAQ8mF,CAAQ,EACvC,MAAO,KACR,EAEM,CAAE,QAAS,GACpB,CAEO,YAAYC,EAA6D,CAI1E,GAHJl3F,GAAO,KAAK,4BAA4Bk3F,EAAY,IAAI,EAAE,EAGtD,KAAK,MAAM,UAAU,QAAiB/vD,EAAS,KAAO+vD,EAAY,EAAE,EAAG,CACnE,MAAA/mF,EAAe,qBAAqB+mF,EAAY,EAAE,eACxDl3F,UAAO,MAAMmQ,CAAY,EACzB,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAOA,CAAA,CACR,EACM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAGM,MAAA4mF,EAAmBP,GAAiBU,CAAW,EAEjD,IAACH,EAAiB,QAAS,CACvB,MAAA5mF,EAAesmF,GAAuBM,EAAiB,MAAM,EAC5D/2F,UAAA,MAAM,0CAA2CmQ,CAAY,EAEpE,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,yBAAyBA,CAAY,GAC7C,EAEM,CAAE,QAAS,GAAO,MAAOA,CAAa,CAC/C,CAEA,YAAK,SAAS,CACZ,GAAG,KAAK,MACR,UAAW,CAAC,GAAG,KAAK,MAAM,UAAW+mF,CAAW,EAChD,MAAO,KACR,EAEM,CAAE,QAAS,GACpB,CAEO,YAAY9hF,EAAuB,CACjCpV,GAAA,KAAK,8BAA8BoV,CAAO,EAAE,EAEnD,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,OAAQ,KAAK,MAAM,OAAO,OAAgBphB,KAAM,KAAOohB,CAAO,EAC/D,CACH,CAEO,eAAeu2B,EAA0B,CACvC3rC,GAAA,KAAK,uBAAuB2rC,CAAU,EAAE,EAE/C,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,UAAW,KAAK,MAAM,UAAU,OAAmBxE,KAAS,KAAOwE,CAAU,EAC9E,CACH,CAGO,oBAA2B,CAChC3rC,GAAO,KAAK,6CAA6C,EAErD,IAEFA,GAAO,MAAM,oCAAqC,CAChD,YAAa,KAAK,MAAM,OAAO,OAC/B,eAAgB,KAAK,MAAM,UAAU,OACrC,cAAe,KAAK,MAAM,UAAU,CAAC,EAAI,CACvC,GAAI,KAAK,MAAM,UAAU,CAAC,EAAE,GAC5B,KAAM,KAAK,MAAM,UAAU,CAAC,EAAE,KAC9B,EAAG,KAAK,MAAM,UAAU,CAAC,EAAE,EAC3B,EAAG,KAAK,MAAM,UAAU,CAAC,EAAE,GACzB,aACL,EAGD,aAAa,QAAQ,SAAU,KAAK,UAAU,KAAK,MAAM,MAAM,CAAC,EAChE,aAAa,QAAQ,YAAa,KAAK,UAAU,KAAK,MAAM,SAAS,CAAC,EAGhE,MAAAm3F,EAAiB,aAAa,QAAQ,WAAW,EACvD,GAAIA,EAAgB,CACZ,MAAAC,EAAkB,KAAK,MAAMD,CAAc,EACjDn3F,GAAO,MAAM,gCAAiC,CAC5C,oBAAqBo3F,EAAgB,OACrC,mBAAoBA,EAAgB,CAAC,EAAI,CACvC,GAAIA,EAAgB,CAAC,EAAE,GACvB,KAAMA,EAAgB,CAAC,EAAE,KACzB,EAAGA,EAAgB,CAAC,EAAE,EACtB,EAAGA,EAAgB,CAAC,EAAE,GACpB,aACL,CACH,CAEAp3F,GAAO,KAAK,uDAAuD,QAC5DzN,EAAO,CACPyN,GAAA,MAAM,2CAA4CzN,CAAK,EAC9D,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,2CACR,CACH,CACF,CAEQ,sBAAyC,CAC/CyN,GAAO,KAAK,+CAA+C,EAEvD,IAEI,MAAAq3F,EAAa,aAAa,QAAQ,QAAQ,EAC1C7qD,EAAgB,aAAa,QAAQ,WAAW,EAUlD,GAPJxsC,GAAO,MAAM,qCAAsC,CACjD,iBAAkB,CAAC,CAACq3F,EACpB,oBAAqB,CAAC,CAAC7qD,EACvB,iBAAkB6qD,EAAaA,EAAW,OAAS,EACnD,oBAAqB7qD,EAAgBA,EAAc,OAAS,EAC7D,EAEG,CAAC6qD,GAAc,CAAC7qD,EAClBxsC,UAAO,KAAK,4CAA4C,EACjD,KAIH,MAAAs3F,EAAe,KAAK,MAAMD,CAAU,EACpCD,EAAkB,KAAK,MAAM5qD,CAAa,EAGhDxsC,UAAO,MAAM,kCAAmC,CAC9C,YAAas3F,EAAa,OAC1B,eAAgBF,EAAgB,OAChC,cAAeA,EAAgB,CAAC,EAAI,CAClC,GAAIA,EAAgB,CAAC,EAAE,GACvB,KAAMA,EAAgB,CAAC,EAAE,KACzB,EAAGA,EAAgB,CAAC,EAAE,EACtB,EAAGA,EAAgB,CAAC,EAAE,GACpB,aACL,EAEDp3F,GAAO,KAAK,qDAAqD,EAE1D,CACL,OAAQs3F,EACR,UAAWF,EACX,UAAW,GACX,MAAO,YAEF7kG,EAAO,CACPyN,UAAA,MAAM,wCAAyCzN,CAAK,EACpD,CACL,GAAGmkG,GACH,MAAO,wCAEX,CACF,CAGO,YAAqB,CAC1B12F,GAAO,KAAK,mCAAmC,EAE3C,IACF,MAAMu3F,EAAa,CACjB,OAAQ,KAAK,MAAM,OACnB,UAAW,KAAK,MAAM,UACtB,WAAY,IAAI,KAAK,EAAE,YAAY,GAGrC,OAAO,KAAK,UAAUA,EAAY,KAAM,CAAC,QAClChlG,EAAO,CACPyN,UAAA,MAAM,sCAAwCzN,CAAK,EAC1D,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,sCACR,EACM,EACT,CACF,CAEO,WAAWilG,EAA2B,CAC3Cx3F,GAAO,KAAK,gCAAgC,EAExC,IACI,MAAAy3F,EAAe,KAAK,MAAMD,CAAQ,EAExC,MAAI,CAACC,EAAa,QAAU,CAACA,EAAa,WACxCz3F,GAAO,MAAM,4BAA4B,EACzC,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,6BACR,EACM,KAGT,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,OAAQy3F,EAAa,OACrB,UAAWA,EAAa,UACxB,MAAO,KACR,EAED,KAAK,mBAAmB,EACjB,UACAllG,EAAO,CACPyN,UAAA,MAAM,sCAAwCzN,CAAK,EAC1D,KAAK,SAAS,CACZ,GAAG,KAAK,MACR,MAAO,sCACR,EACM,EACT,CACF,CAGO,UAAU0e,EAAkD,CAC5D,sBAAU,KAAKA,CAAQ,EAGrB,IAAM,CACX,KAAK,UAAY,KAAK,UAAU,OAAOia,GAAKA,IAAMja,CAAQ,EAE9D,CAEQ,SAASugC,EAA2B,CAC1C,KAAK,MAAQA,EAGb,KAAK,UAAU,QAAQvgC,GAAYA,EAAS,KAAK,KAAK,CAAC,EAGvD,KAAK,mBAAmB,CAC1B,CACF,EAjXEi6B,GADI2rD,GACW,YADjB,IAAMa,GAANb,GAqXa,MAAAc,GAAcD,GAAY,YAAY,ECvY7C13F,GAAS0mC,GAAa,SAAS,EAKxBkxD,GAAU,IAAM,CAC3B,KAAM,CAACrhF,EAAOS,CAAQ,EAAI8R,EAAoB,SAAA6uE,GAAY,UAAU,EAEpE5uE,YAAU,IAAM,CACd/oB,GAAO,KAAK,gCAAgC,EAGtC,MAAA63F,EAAcF,GAAY,UAAsBnmD,GAAA,CACpDx6B,EAASw6B,CAAQ,EAClB,EAGD,MAAO,IAAM,CACXxxC,GAAO,KAAK,2BAA2B,EAC3B63F,GAAA,CAEhB,EAAG,CAAE,GAGC,MAAAC,EAAY,IAAevhF,EAAM,OACjCu1B,EAAe,IAAkBv1B,EAAM,UAEvCwhF,EAAgBnhF,GACpBL,EAAM,OAAO,KAAKviB,GAASA,EAAM,KAAO4iB,CAAE,EAEtCohF,EAAmBphF,GACvBL,EAAM,UAAU,KAAK4wB,GAAYA,EAAS,KAAOvwB,CAAE,EAE/CqhF,EAAyBtsD,GACxBA,EAGEp1B,EAAM,OAAO,OAAgBviB,KAAM,aAAe23C,CAAU,EAH3C,GAOpBusD,EAAepB,IACnB92F,GAAO,KAAK,8BAA8B82F,EAAa,EAAE,EAAE,EACpDa,GAAY,YAAYb,CAAY,GAGvCqB,EAAkBnB,IACtBh3F,GAAO,KAAK,uBAAuBg3F,EAAgB,EAAE,EAAE,EAChDW,GAAY,eAAeX,CAAe,GAG7CoB,EAAYnB,IAChBj3F,GAAO,KAAK,gCAAgCi3F,EAAS,KAAK,EAAE,EACrDU,GAAY,SAASV,CAAQ,GAGhCoB,EAAenB,IACnBl3F,GAAO,KAAK,4BAA4Bk3F,EAAY,IAAI,EAAE,EACnDS,GAAY,YAAYT,CAAW,GAGtCoB,EAAeljF,GAA0B,CACtCpV,GAAA,KAAK,8BAA8BoV,CAAO,EAAE,EACnDuiF,GAAY,YAAYviF,CAAO,GAG3BmjF,EAAkB5sD,GAA6B,CAC5C3rC,GAAA,KAAK,uBAAuB2rC,CAAU,EAAE,EAC/CgsD,GAAY,eAAehsD,CAAU,GAIjC4rD,EAAa,KACjBv3F,GAAO,KAAK,oBAAoB,EACzB23F,GAAY,cAGfa,EAAchB,IAClBx3F,GAAO,KAAK,oBAAoB,EACzB23F,GAAY,WAAWH,CAAQ,GAGjC,OAEL,OAAQjhF,EAAM,OACd,UAAWA,EAAM,UACjB,UAAWA,EAAM,UACjB,MAAOA,EAAM,MAGb,UAAAuhF,EACA,aAAAhsD,EACA,aAAAisD,EACA,gBAAAC,EACA,sBAAAC,EAGA,YAAAC,EACA,eAAAC,EACA,SAAAC,EACA,YAAAC,EACA,YAAAC,EACA,eAAAC,EAGA,WAAAhB,EACA,WAAAiB,CAAA,CAEJ,EAKaC,GAAY,IAAM,CACvB,MACJ,OAAA3tD,EACA,UAAAnC,EACA,MAAAp2C,EACA,aAAAwlG,EACA,sBAAAE,EACA,SAAAG,EACA,YAAAF,EACA,YAAAI,GACEV,GAAQ,EAEL,OACL,OAAA9sD,EACA,UAAAnC,EACA,MAAAp2C,EACA,aAAAwlG,EACA,sBAAAE,EACA,SAAAG,EACA,YAAAF,EACA,YAAAI,CAAA,CAEJ,EAKaI,GAAe,IAAM,CAC1B,MACJ,UAAA3tD,EACA,UAAApC,EACA,MAAAp2C,EACA,gBAAAylG,EACA,sBAAAC,EACA,YAAAI,EACA,eAAAF,EACA,eAAAI,GACEX,GAAQ,EAEL,OACL,UAAA7sD,EACA,UAAApC,EACA,MAAAp2C,EACA,gBAAAylG,EACA,sBAAAC,EACA,YAAAI,EACA,eAAAF,EACA,eAAAI,CAAA,CAEJ,ECzIMv4F,GAAS0mC,GAAa,KAAK,EAM3BiyD,GAAM,CAAC,CAAE,WAAAtwD,EAAa,MAAsB,aAChD,MAAMpB,EAAWC,KACXC,EAAWC,KAGX,CAAE,UAAA2D,GAAc2tD,KAChB,CAAE,aAAAX,EAAc,sBAAAE,CAAsB,EAAIQ,GAAU,EAGpD,CAACG,EAAcC,CAAe,EAAI/vE,WAASiiB,CAAS,EACpD,CAAC8B,EAAeisD,CAAgB,EAAIhwE,EAAA,SAAmB,CAAE,GACzD,CAACiwE,EAAeC,CAAgB,EAAIlwE,WAAuB,IAAI,EAC/D,CAACmyB,EAAgBg+C,CAAiB,EAAInwE,WAAwB,IAAI,EAClE,CAACgyB,EAAqBo+C,CAAsB,EAAIpwE,WAAwB,IAAI,EAG5E,CAACqxB,EAAcg/C,CAAe,EAAIrwE,WAA0C,IAAI,EAChF,CAACswE,EAAiBC,CAAkB,EAAIvwE,WAA6B,IAAI,EACzE,CAACwwE,EAAUC,CAAW,EAAIzwE,WAAiB,CAAC,EAG5C,CAAC0wE,EAAkBC,CAAmB,EAAI3wE,WAAwB,IAAI,EACtE,CAACivB,EAAkBC,CAAmB,EAAIlvB,WAAS,EAAK,EACxD,CAAC4wE,EAAsBC,CAAuB,EAAI7wE,WAAS,EAAK,EAChE,CAAC8wE,EAA6BC,CAA8B,EAAI/wE,WAAS,EAAK,EAG9EgxE,EAA2BC,UAAQ,IAEhC,GACN,CAAE,GAGLhxE,YAAU,IAAM,CACd1V,EAAU,iBAAiBO,GAAY,KAAM,MAAO,CAAE,MAAO0lF,EAAU,GACtE,CAACA,CAAQ,CAAC,EAGbvwE,YAAU,IAAM,CAEJ1V,EAAA,cAAc,OAAQ,OAAO,EAC7BA,EAAA,oBAAoBO,GAAY,SAAU,CAClD,gBAAiBm3B,EAAU,OAC5B,EAGK,MAAAosD,EAAiB,aAAa,QAAQ,cAAc,EAC1D,GAAIA,EACE,IACI,MAAAC,GAAkB,KAAK,MAAMD,CAAc,EAE3C6C,GAAkBjvD,EAAU,IAAWa,IAAA,CACrC,MAAAquD,GAAW7C,GAAgB,KAAMzB,IAAeA,GAAM,KAAO/pD,GAAI,EAAE,EACzE,OAAOquD,GAAW,CAAE,GAAGruD,GAAK,QAASquD,GAAS,OAAY,EAAAruD,EAAA,CAC3D,EACDitD,EAAgBmB,EAAe,QACxBznG,GAAO,CACdyN,GAAO,MAAM,8CAA+C,CAAE,MAAAzN,EAAO,EACvE,CACF,EACC,CAACw4C,CAAS,CAAC,EAGdhiB,YAAU,IAAM,CAEd,MAAMmxE,GADkBttD,KACS,IAAI54C,IAASA,GAAM,EAAE,EACtD8kG,EAAiBoB,EAAQ,GACxB,CAACJ,CAAwB,CAAC,EAG7B/wE,YAAU,IAAM,CACd,GAAI,CAACgwE,EAAe,CAGlB,MAAMmB,GADkBttD,KACS,IAAI54C,IAASA,GAAM,EAAE,EACtD8kG,EAAiBoB,EAAQ,CAC3B,GACC,CAACnB,CAAa,CAAC,EAGlBhwE,YAAU,IAAM,CACd/oB,GAAO,KAAK,wEAAwE,EACpF64F,EAAgB9tD,CAAS,GACxB,CAACA,CAAS,CAAC,EAGR,MAAAovD,EAAkB,CAACnmG,EAAcjB,KAAwB,CAC7DA,GAAE,gBAAgB,EAClBiN,GAAO,KAAK,2CAA2ChM,EAAM,EAAE,kBAAkB,EAE5D64C,EAAc,SAAS74C,EAAM,EAAE,GAkBlDo5C,GAAiBp5C,EAAM,EAAE,EAEzB8kG,EAAiBjsD,EAAc,OAAOj2B,IAAMA,KAAO5iB,EAAM,EAAE,CAAC,EAElDqf,EAAA,wBAAwBO,GAAY,OAAQ,QAAS5f,EAAM,GAAI,CAAE,OAAQ,MAAO,EAO1FgM,GAAO,KAAK,aAAahM,EAAM,EAAE,qCAAqC,IAzBtEg5C,GAAUh5C,CAAK,EAEf8kG,EAAiB,CAAC,GAAGjsD,EAAe74C,EAAM,EAAE,CAAC,EAEnCqf,EAAA,wBAAwBO,GAAY,KAAM,QAAS5f,EAAM,GAAI,CAAE,OAAQ,MAAO,EAOxFgM,GAAO,KAAK,aAAahM,EAAM,EAAE,yCAAyC,EAe5E,EAIF+0B,YAAU,IAAM,aAER,MAAAqxE,GAAcrjG,GAAAowC,EAAS,QAAT,YAAApwC,GAAgB,oBAC9BsjG,KAAYh2F,GAAA8iC,EAAS,QAAT,YAAA9iC,GAAgB,aAAc,GAC1Ci2F,KAAc51E,EAAAyiB,EAAS,QAAT,YAAAziB,EAAgB,eAAgB,GAG9C61E,GAAe,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACzDC,GAAiBD,GAAa,IAAI,WAAW,EAC7CE,GAAgBF,GAAa,IAAI,UAAU,EAC3CG,GAAaH,GAAa,IAAI,OAAO,EAGrCI,GAAwBH,IAAkBC,IAAiBL,GAAeM,GAGhF,GAAI,CAACC,GACH,OAGK36F,GAAA,KAAK,qCAAqC26F,EAAqB,EAAE,EAGxE,IAAIC,GAAkBD,GAGlB,GAAAD,IAAcC,KAA0BD,GAAY,CACtD,MAAM1mG,EAAQ82C,GAAO,KAAU/3C,KAAE,KAAO2nG,EAAU,EAC9C1mG,IACF4mG,GAAkB5mG,EAAM,WACxBgM,GAAO,MAAM,kCAAkC06F,EAAU,kBAAkBE,EAAe,EAAE,EAG5F,WAAW,IAAM,CACf5B,EAAiBhlG,CAAK,EACtBgM,GAAO,KAAK,oDAAoDhM,EAAM,EAAE,EAAE,GACzE,GAAG,EAEV,CAGA,IAAI6mG,GAAsBjC,EAAa,KAAYhtD,KAAI,KAAOgvD,EAAe,EAIzE,CAACC,IAAuBD,KAC1BC,GAAsBjC,EAAa,KAAKhtD,GAAOA,EAAI,GAAG,WAAWgvD,EAAe,CAAC,EAC7EC,KACF76F,GAAO,KAAK,sBAAsB46F,EAAe,yDAAyDC,GAAoB,EAAE,EAAE,EAClID,GAAkBC,GAAoB,KAItCA,IACF76F,GAAO,MAAM,oCAAqC,CAChD,GAAI66F,GAAoB,GACxB,KAAMA,GAAoB,KAC1B,EAAGA,GAAoB,EACvB,EAAGA,GAAoB,EACxB,EAID3B,EAAuB0B,EAAe,EAGlC,CAACN,IAAe,CAACD,IACnBpB,EAAkB2B,EAAe,EAG5B56F,GAAA,MAAM,uCAAuC46F,EAAe,0CAA0C,GAEtG56F,GAAA,KAAK,gBAAgB26F,EAAqB,+BAA+B,CAEjF,GAACxzD,EAAUyxD,EAAc9tD,EAAM,CAAC,EAE7B,MAAAgwD,EAAuBnvD,GAAuB,CAC3C3rC,GAAA,KAAK,0BAA0B2rC,CAAU,EAAE,EAGlDutD,EAAuBvtD,CAAU,EAGjCstD,EAAkBttD,CAAU,EAGtB,MAAA0rD,GAAaY,EAAsBtsD,CAAU,EACnD3rC,GAAO,MAAM,4CAA4C2rC,CAAU,6BAA8B0rD,EAAU,EAC3Gr3F,GAAO,MAAM,2BAA2B2rC,CAAU,GAAI0rD,EAAU,EAEhE,MAAMzrD,GAAMgtD,EAAa,KAAU1tE,OAAE,KAAOygB,CAAU,EAClDC,IACFv4B,EAAU,kBAAkBu4B,GAAI,GAAIA,GAAI,IAAI,EAEpCv4B,EAAA,oBAAoBO,GAAY,cAAe,CACvD,YAAa+3B,EACb,KAAM,MACP,EAGDqtD,EAAiB,IAAI,GAGjB+B,GAAwB,CAACpvD,EAAoBqvD,KAAqB,CACtE,MAAMC,GAAmBrC,EAAa,IAAIhtD,IACxCA,GAAI,KAAOD,EAAa,CAAE,GAAGC,GAAK,QAAAovD,IAAYpvD,EAAA,EAGhDitD,EAAgBoC,EAAgB,EAChC,aAAa,QAAQ,eAAgB,KAAK,UAAUA,EAAgB,CAAC,EAErE5nF,EAAU,gBAAgB,wBAAyB,CAAE,YAAas4B,EAAY,QAAAqvD,GAAS,EAIvF9B,EAAuBvtD,CAAU,EAQ7BqvD,KACKh7F,GAAA,KAAK,QAAQ2rC,CAAU,qDAAqD,EAGhEsvD,GAAiB,MAAMrvD,IAAOA,GAAI,OAAO,IAE1D5rC,GAAO,KAAK,kFAAmF,EAC/FiqB,GAAkBL,GAAgB,qBAAqB,GAE3D,EAKIsxE,EAAqBvvD,GAAuB,CAG1C,MAAAwvD,GAAyBlD,EAAsBtsD,CAAU,EAE/D3rC,UAAO,MAAM,2BAA2B2rC,CAAU,6BAA8BwvD,EAAsB,EAE/FA,EAAA,EAIHC,EAAexC,EAAa,OAAchtD,KAAI,OAAO,EAAE,OACvDyvD,EAAazC,EAAa,OAG1B0C,EAAqB,IAAM,CAClB,qBAAQ,kBAAmB,SAAS,EACjD3B,EAAwB,EAAI,EAC5BE,EAA+B,EAAK,EACpC7hD,EAAoB,EAAK,GAI3BjvB,YAAU,IAAM,CAEd,GAAI+wE,EAA0B,CAC5BD,EAA+B,EAAI,EACnC7hD,EAAoB,EAAK,EACzB2hD,EAAwB,EAAI,EACf,qBAAQ,kBAAmB,SAAS,EACjD35F,GAAO,KAAK,8EAA8E,EAC1F,MACF,CAGA,aAAa,WAAW,iBAAiB,EACzC65F,EAA+B,EAAK,EACpC7hD,EAAoB,EAAK,EACzB2hD,EAAwB,EAAK,CAC/B,EAAG,CAAE,GAGL,MAAMjhD,GAAuB,CAAC/yB,EAAWC,GAAW+yB,KAA8B,CAChEwgD,EAAA,CAAE,EAAAxzE,EAAG,EAAAC,EAAA,CAAG,EACpB+yB,IACF0gD,EAAmB1gD,EAAW,CAChC,EAQA,OAAAp0B,EAAA,KAAC,MAAI,WAAU,gDACb,UAACA,OAAA,OAAI,UAAU,oCACb,UAACA,OAAA,UAAO,UAAU,yCAChB,UAAChB,MAAA,OAAI,UAAU,OAAQ,GACtBA,EAAA,UAAG,UAAU,+CAA+C,SAAK,UAClEA,MAAC,MAAI,WAAU,gDACb,SAAAA,EAAA,IAACw0C,GAAA,CACC,MAAM,uBACN,KAAK,uDAET,GACF,QAGC,MAAI,WAAU,uEACb,SAACxzC,EAAA,YAAI,UAAU,8BACb,UAACA,OAAA,OAAI,UAAU,oBACb,UAAChB,EAAA,WAAI,UAAU,yGACZ,SACH63E,EAAA,QACC,OAAK,WAAU,UAAW,SAAeA,EAAA,EAAI,UAAY,SAAS,GACrE,EACA72E,OAAC,MAAI,WAAU,oBACb,UAAAhB,EAAA,IAAC,MAAI,WAAU,yGACZ,SAAA83E,EAAaD,EAChB,EACC73E,EAAA,YAAK,UAAU,UAAU,SAAW,iBACvC,GACF,CACF,GAKAgB,OAAC,MAAI,WAAU,iCACb,UAAAhB,EAAA,IAACktB,GAAA,CACC,kBAAmB,IAAM,CACvBuH,EAAoB,EAAK,EACzB2hD,EAAwB,EAAI,EAC5BE,EAA+B,EAAI,EACnC75F,GAAO,KAAK,qDAAsD,EAClEqT,EAAU,oBAAoBO,GAAY,cAAe,CAAE,QAAS,GAAM,CAC5E,EACA,iBAAkB,IAAM,CACtBokC,EAAoB,EAAI,EACxB2hD,EAAwB,EAAK,EAC7B35F,GAAO,KAAK,wCAAyC,EACrDqT,EAAU,oBAAoBO,GAAY,cAAe,CAAE,QAAS,GAAO,CAC7E,EACA,mBAAoB,IAAM,CACxB+lF,EAAwB,EAAK,EAC7BF,EAAoB,IAAI,EACxBz5F,GAAO,KAAK,wDAAyD,EAC3DqT,EAAA,oBAAoBO,GAAY,cAAe,CAAE,QAAS,GAAO,SAAU,GAAM,CAC7F,EACF,EAEA2P,EAAA,IAAC4tB,GAAA,CACC,eAAgB,IAAM,CACpBnxC,GAAO,KAAK,2CAA4C,EACxDqT,EAAU,gBAAgB,mBAAoB,CAAE,QAAS,EAAM,EACjE,EACA,gBAAiB,IAAM,CACrBrT,GAAO,KAAK,iCAAkC,EAC9CqT,EAAU,gBAAgB,mBAAoB,CAAE,QAAS,EAAO,EAClE,EACF,GACF,EAEAkQ,EAAA,IAAC,MAAI,WAAU,WAEb,SAAAA,EAAA,IAAC,MAAI,WAAU,uFACb,SAAAgB,OAAC,MAAI,WAAU,kBACb,UAAAhB,EAAA,IAACo3B,GAAA,CACC,UAAWi+C,EACX,eAAA39C,EACA,oBAAAH,EACA,QAAU/nD,GAAM,CAER,MAAA44C,GAAa54C,EAAE,cAAc,QAAQ,YAAcA,EAAE,cAAc,GAAG,QAAQ,YAAa,EAAE,EAC/F44C,GACFmvD,EAAoBnvD,EAAU,EAGpBt4B,EAAA,iBAAiBO,GAAY,MAAO,gBAAgB,CAElE,EACA,SAAU,GACV,cAAe2lF,EACf,WAAY,CAAC,CAAE,EAAA5zE,EAAG,EAAAC,MAAQ,CACdvS,EAAA,oBAAoBO,GAAY,KAAM,CAC9C,MAAO,QACP,EAAG,KAAK,MAAM+R,CAAC,EACf,EAAG,KAAK,MAAMC,EAAC,EAChB,CACH,EACA,SAAU,CAAC,CAAE,QAAA21E,EAAS,QAAAC,GAAS,SAAAz+C,GAAU,WAAAD,MAAiB,CAC9CzpC,EAAA,oBAAoBO,GAAY,KAAM,CAC9C,SAAU,KAAK,MAAM2nF,CAAO,EAC5B,SAAU,KAAK,MAAMC,EAAO,EAC5B,SAAU,KAAK,MAAMz+C,EAAQ,EAC7B,YAAa,KAAK,MAAMD,EAAU,EACnC,CACH,EACA,kBAAmB48C,EAAuB,CACxC,iBAAkBhhD,GAClB,eAAgB,GAChB,mBAAqB3B,GAAWiB,EAAoBjB,CAAM,CACxD,SACJ,gBAAiByiD,GAAoBr/C,GAAgBi/C,EAAkB,CACrE,aAAcA,EACd,eAAgBR,EAAa,QAAYhtD,EAAI,KAAO4tD,CAAgB,GAAK,KACzE,QAAS,IAAMC,EAAoB,IAAI,CACrC,SACN,EAIC1hD,GAAoB,CAAC+hD,GACnBv1E,EAAA,YAAI,UAAU,2EACb,UAAChB,EAAA,WAAI,UAAU,OAAO,SAAyD,8DAC/EA,EAAA,IAAC8sB,EAAA,CACC,KAAK,KACL,QAASirD,EACT,UAAU,kDACX,mCAED,GACF,EAEJ,EACF,GAGF,GAKF,EAKCrgD,GACE13B,MAAA,OAAI,UAAU,6EAA6E,QAAS,IAAM01E,EAAkB,IAAI,EAC/H,SAAC10E,OAAA,OAAI,UAAU,4EAA4E,QAAUxxB,GAAMA,EAAE,gBAC3G,YAACwxB,OAAA,OAAI,UAAU,wCACb,UAAChB,MAAA,MAAG,UAAU,mCACX,UAAaxsB,EAAA6hG,EAAA,QAAU1tE,EAAE,KAAO+vB,CAAc,IAAjC,YAAAlkD,EAAoC,IACpD,GACAwsB,MAAC8sB,GAAO,QAAQ,QAAQ,KAAK,KAAK,UAAU,cAAc,QAAS,IAAM,CACnE4K,GACF5nC,EAAU,iBAAiBO,GAAY,KAAM,yBAA0B,CAAE,YAAaqnC,EAAgB,EAExGg+C,EAAkB,IAAI,GAEtB,SAAA11E,MAACS,GAAE,WAAU,SAAU,GACzB,GACF,EAECT,EAAA,SAAE,UAAU,8BAC0B,SAEvC,wBAEAA,MAAC,IAAE,WAAU,8BACV,UAAAlf,GAAAu0F,EAAa,KAAK1tE,GAAKA,EAAE,KAAO+vB,CAAc,IAA9C,YAAA52C,GAAiD,WACpD,GAEAkgB,EAAA,KAAC8rB,EAAA,CACC,KAAK,KACL,QAAQ,UACR,UAAU,0CACV,QAAS,IAAM,CAEb,GAAI4K,EAAgB,CACXj7C,GAAA,KAAK,uCAAuCi7C,CAAc,EAAE,EACnE,MAAMrP,EAAMgtD,EAAa,KAAU1tE,OAAE,KAAO+vB,CAAc,EACtDrP,GACQv4B,EAAA,yBAAyBu4B,EAAI,GAAI,UAAU,EAE7Cv4B,EAAA,iBAAiBO,GAAY,MAAO,iBAAkB,CAAE,KAAM,MAAO,YAAaqnC,CAAA,CAAgB,EAC5GhU,EAAS,oBAAqB,CAC5B,MAAO,CAAE,mBAAoBgU,CAAe,EAC7C,OAEDj7C,GAAO,KAAK,mEAAqE,CAErF,EAEA,UAACujB,MAAA61C,GAAA,CAAK,UAAU,cAAe,GAAE,oBAEnC,EAEA71C,MAAC,MAAI,WAAU,MAAO,GAErB23E,EAAkBjgD,CAAc,EAAE,OAAS,GACzC12B,OAAA,OAAI,UAAU,OACb,UAAChB,EAAA,UAAG,UAAU,kCAAkC,SAAyB,8BACzEA,MAAC,OAAI,UAAU,oDACZ,WAAkB03B,CAAc,EAAE,IAAKjnD,GACtCuvB,EAAA,IAAC,OAEC,UAAW,mFAAmFspB,EAAc,SAAS74C,EAAM,EAAE,EAAI,gCAAkC,EAAE,GAErK,SAAAuwB,EAAA,KAAC,MAAI,WAAU,mCACb,UAAAA,OAAC,MAAI,WAAU,SAAS,QAAS,IAAM,CAC3BlR,EAAA,wBAAwBO,GAAY,cAAe,CAAE,SAAU5f,EAAM,GAAI,OAAQ,MAAO,EAClGglG,EAAiBhlG,CAAK,CAEtB,YAAAuvB,EAAA,IAAC,IAAE,WAAU,6BAA8B,SAAAvvB,EAAM,MAAM,EACvDuwB,OAAC,MAAI,WAAU,yBACb,UAAChB,MAAA01C,GAAA,CAAS,UAAU,6BAA8B,GAClD10C,OAAC,IAAE,WAAU,yBAA0B,UAAMvwB,EAAA,KAAK,IAAWk4C,SAAQ,SAAW,KAAO,IAAI,EAAE,KAAK,GAAG,EAAE,KAAGl4C,EAAM,MAAK,GACvH,EACCuvB,EAAA,SAAE,UAAU,8BAA+B,WAAM,WAAW,GAC/D,EACAA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,aACV,QAAUt9C,IAAMonG,EAAgBnmG,EAAOjB,EAAC,EAEvC,SAAc85C,EAAA,SAAS74C,EAAM,EAAE,EAC9BuvB,MAAC0yE,GAAc,WAAU,wBAAyB,GAEjD1yE,EAAA,IAAA21C,GAAA,CAAS,UAAU,yBAAyB,EAEjD,GACF,GA3BKllE,EAAM,EA6Bd,GACH,GACF,EAGFuwB,OAAC,MAAI,WAAU,gEACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,UAAU,+EACV,QAAS,WAAM,OAAA4K,GAAkB8/C,GAAsB9/C,EAAgB,GAAClkD,EAAA6hG,EAAa,KAAU1tE,OAAE,KAAO+vB,CAAc,IAA9C,MAAAlkD,EAAiD,QAAO,GAE/H,UAAA2tB,GAAAk0E,EAAa,KAAU1tE,KAAE,KAAO+vB,CAAc,IAA9C,MAAAv2B,GAAiD,QAAU,aAAe,iBAC7E,EAEAnB,EAAA,IAAC8sB,EAAA,CACC,UAAU,uDACV,QAAS,IAAM,CAGT4K,GACF5nC,EAAU,iBAAiBO,GAAY,KAAM,wBAAyB,CAAE,YAAaqnC,EAAgB,EAEvGg+C,EAAkB,IAAI,CACxB,EACD,6BAED,GACF,EAGCS,GACCn2E,EAAA,IAAC,MAAI,WAAU,QACb,SAAAgB,EAAA,KAAC8rB,EAAA,CACC,QAAQ,YACR,UAAU,6EACV,QAAS,IAAM,CAET4K,IACFw+C,EAAoBx+C,CAAc,EAClCg+C,EAAkB,IAAI,EACZ5lF,EAAA,oBAAoBO,GAAY,gBAAiB,CACzD,YAAaqnC,EACb,kBAAmB,CAAC,CAACd,CAAA,CACtB,EAEL,EAEA,UAAC52B,MAAAi2B,GAAA,CAAW,UAAU,cAAe,GAAE,4BAG3C,GAEJ,CACF,GAIFj2B,EAAA,IAAC0xE,GAAA,CACC,MAAO8D,EACP,OAAQ,CAAC,CAACA,EACV,QAAS,IAAM,CACbC,EAAiB,IAAI,EACrBE,EAAuB,IAAI,CAC7B,EACA,OAAO,MACT,QAKCpgC,GAAiB,GAKpB,GAEJ,ECjpBM2iC,GAAOC,GAEPC,GAAWt4E,EAGf,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACq4E,GAAA,CACC,IAAAt4E,EACA,UAAWN,GACT,6FACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDohG,GAAS,YAAcC,GAAmB,YAE1C,MAAMC,GAAcx4E,EAGlB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACu4E,GAAA,CACC,IAAAx4E,EACA,UAAWN,GACT,sYACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDshG,GAAY,YAAcC,GAAsB,YAEhD,MAAMC,GAAc14E,EAGlB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACy4E,GAAA,CACC,IAAA14E,EACA,UAAWN,GACT,kIACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDwhG,GAAY,YAAcC,GAAsB,YCxCzC,SAASC,GAAY,CAAE,eAAAC,EAAgB,cAAAC,GAAmC,CAE7E,OAAA53E,EAAA,KAAC,MAAI,WAAU,sBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAS8rD,IAAkB,MAAQ,UAAY,UAC/C,KAAK,KACL,QAAS,IAAMD,EAAe,KAAK,EACnC,UAAWC,IAAkB,MAAQ,kCAAoC,GAC1E,gBAED,EACA53E,EAAA,KAAC8rB,EAAA,CACC,QAAS8rD,IAAkB,aAAe,UAAY,UACtD,KAAK,KACL,QAAS,IAAMD,EAAe,YAAY,EAC1C,UAAWC,IAAkB,aAAe,kCAAoC,GAEhF,UAAC54E,MAAA64E,GAAA,CAAU,UAAU,cAAe,GAAE,eAExC,EACA73E,EAAA,KAAC8rB,EAAA,CACC,QAAS8rD,IAAkB,UAAY,UAAY,UACnD,KAAK,KACL,QAAS,IAAMD,EAAe,SAAS,EACvC,UAAWC,IAAkB,UAAY,kCAAoC,GAE7E,UAAC54E,MAAA84E,GAAA,CAAM,UAAU,cAAe,GAAE,YAEpC,CACF,GAEJ,CCrCA,MAAMC,GAAOj5E,EAGX,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,OACC,IAAAD,EACA,UAAWN,GACT,2DACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACD+hG,GAAK,YAAc,OAEnB,MAAMC,GAAal5E,EAGjB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,OACC,IAAAD,EACA,UAAWN,GAAG,gCAAiChK,CAAS,EACvD,GAAGze,CAAA,CACN,CACD,EACDgiG,GAAW,YAAc,aAEzB,MAAMC,GAAYn5E,EAGhB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,MACC,IAAAD,EACA,UAAWN,GACT,qDACAhK,CACF,EACC,GAAGze,CAAA,CACN,CACD,EACDiiG,GAAU,YAAc,YAExB,MAAMC,GAAkBp5E,EAGtB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,KACC,IAAAD,EACA,UAAWN,GAAG,gCAAiChK,CAAS,EACvD,GAAGze,CAAA,CACN,CACD,EACDkiG,GAAgB,YAAc,kBAE9B,MAAMC,GAAcr5E,EAGlB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAS,EAAA+oB,UACzB,MAAI,KAAAA,EAAU,UAAWN,GAAG,WAAYhK,CAAS,EAAI,GAAGze,CAAO,EACjE,EACDmiG,GAAY,YAAc,cAE1B,MAAMC,GAAat5E,EAGjB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,OACC,IAAAD,EACA,UAAWN,GAAG,6BAA8BhK,CAAS,EACpD,GAAGze,CAAA,CACN,CACD,EACDoiG,GAAW,YAAc,aC1DlB,MAAMC,GAAY,CAAC,CAAE,MAAA5oG,EAAO,QAAA0hG,EAAS,aAAAmH,EAAc,YAAAC,KAEtDv4E,EAAA,KAAC+3E,GAAA,CACC,UAAU,sGACV,QAASO,EAET,UAACt5E,MAAA,OAAI,UAAW,OAAOvvB,EAAM,OAAS,aAAe,eAAiB,cAAc,EAAI,SACvF0oG,GAAY,WAAU,MACrB,SAACn4E,EAAA,YAAI,UAAU,mCACb,UAAAA,OAAC,MACC,WAAChB,MAAA,MAAG,UAAU,6BACZ,SAAAA,EAAA,IAACmvE,GAAA,CACC,KAAM1+F,EAAM,MACZ,UAAW,GACX,UAAU,+BAEd,EAECA,EAAM,OAAS,cACbuvB,EAAA,SAAE,UAAU,yBACX,SAAAA,EAAA,IAACmvE,GAAA,CACC,KAAM1+F,EAAM,WACZ,UAAW,GACX,UAAU,2BAEd,EAEFuwB,OAAC,MAAI,WAAU,+BAEb,UAACA,OAAA,OAAI,UAAU,oBACb,UAAChB,MAAAw5E,GAAA,CAAM,UAAU,6BAA8B,GAC9Cx5E,EAAA,SAAE,UAAU,qCACV,WAAM,KACT,GACF,EAGAgB,OAAC,MAAI,WAAU,oBACb,UAAChB,MAAAytB,GAAA,CAAO,UAAU,6BAA8B,GAChDztB,MAAC,IAAE,WAAU,yBACX,SAAAA,EAAA,IAACmvE,GAAA,CACC,KAAM1+F,EAAM,aACZ,UAAW,GACX,UAAU,2BAEd,GACF,GACF,GACF,EACAuwB,OAAC,MAAI,WAAU,oCACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,aACV,QAASysD,EAER,SAAApH,QACEO,GAAc,WAAU,yBAAyB,EAElD1yE,EAAA,IAAC21C,GAAS,WAAU,wBAAyB,GAEjD,EACC31C,EAAA,YAAK,UAAW,kCACfvvB,EAAM,OAAS,aACX,8BACA,6BACN,GACG,SAAAA,EAAM,OAAS,aAAe,aAAe,UAChD,GACF,GACF,CACF,MCxEAgpG,GAAU,IAAM,CACpB,MAAM/1D,EAAWC,KACX,CAAC6xD,EAAeC,CAAgB,EAAIlwE,WAAuB,IAAI,EAC/D,CAACqzE,EAAec,CAAgB,EAAIn0E,WAAiB,KAAK,EAC1D,CAAC+jB,EAAeisD,CAAgB,EAAIhwE,EAAA,SAAmB,CAAE,GAG/DC,YAAU,IAAM,CACJ1V,EAAA,cAAc,WAAY,WAAW,CACjD,EAAG,CAAE,GAEL0V,YAAU,IAAM,CAId,MAAMmxE,EAFcttD,KAES,IAAI54C,GAASA,EAAM,EAAE,EAClD8kG,EAAiBoB,CAAQ,CAC3B,EAAG,CAAE,GAEC,MAAAC,EAAkB,CAACnmG,EAAcjB,IAAwB,CAC7DA,EAAE,gBAAgB,EAClB,QAAQ,IAAI,qDAAqDiB,EAAM,EAAE,EAAE,EAEtD64C,EAAc,SAAS74C,EAAM,EAAE,GAqBlDo5C,GAAiBp5C,EAAM,EAAE,EAEzB8kG,EAAiBjsD,EAAc,OAAOj2B,GAAMA,IAAO5iB,EAAM,EAAE,CAAC,EAO5D,QAAQ,IAAI,uBAAuBA,EAAM,EAAE,qBAAqB,EAEhEqf,EAAU,wBAAwBO,GAAY,OAAQ,QAAS5f,EAAM,GAAI,CACvE,YAAaA,EAAM,MACnB,OAAQ,UACT,IA/BDg5C,GAAUh5C,CAAK,EAEf8kG,EAAiB,CAAC,GAAGjsD,EAAe74C,EAAM,EAAE,CAAC,EAO7C,QAAQ,IAAI,uBAAuBA,EAAM,EAAE,yBAAyB,EAEpEqf,EAAU,wBAAwBO,GAAY,KAAM,QAAS5f,EAAM,GAAI,CACrE,YAAaA,EAAM,MACnB,OAAQ,UACT,EAkBH,EAUIkpG,EAAsBC,GAAmB,CAC7CF,EAAiBE,CAAM,EACvB9pF,EAAU,wBAAwBO,GAAY,OAAQ,CAAE,OAAAupF,CAAQ,IAG5DC,EAAe,CAACtyD,EAAiBqyD,IACjCA,IAAW,MAAcryD,EACtBA,EAAO,OAAgB92C,KAAM,OAASmpG,CAAM,EAI/CE,EAAgBC,GAA8B,CAE5C,MAAA3mG,EAAQ2mG,EAAU,MAAM,mBAAmB,EAC7C,IAAC3mG,EAAO,OAAO,OAAO,iBAC1B,MAAMq0B,EAAI,SAASr0B,EAAM,CAAC,EAAG,EAAE,EACzB1E,EAAI,SAAS0E,EAAM,CAAC,EAAG,EAAE,EAC/B,OAAOq0B,EAAI,GAAK/4B,CAAA,EAGZsrG,EAAmB7hE,GAChB,CAAC,GAAGA,CAAK,EAAE,KAAK,CAAC7iC,EAAGC,IAAMukG,EAAaxkG,EAAE,IAAI,EAAIwkG,EAAavkG,EAAE,IAAI,CAAC,EAI5E,OAAAyrB,EAAA,KAAC,MAAI,WAAU,kCACb,UAACA,OAAA,OAAI,UAAU,6BACb,UAACA,OAAA,UAAO,UAAU,yCAChB,UAACA,OAAA8rB,EAAA,CAAO,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAMpJ,EAAS,GAAG,EAC3D,UAAC1jB,MAAAi6E,GAAA,CAAU,UAAU,cAAe,GAAE,UAExC,EACCj6E,EAAA,UAAG,UAAU,mCAAmC,SAAS,cAC1DA,MAAC,MAAI,WAAU,8BACvB,SAAAA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,aAAW,wBACX,UAAU,4IACV,QAAS,SAAY,CACf,IACFh9B,EAAU,gBAAgB,iBAAiB,EAC3C,KAAM,CAAE,cAAA4gF,CAAA,EAAkB,gDAAM,2BAAAwJ,EAAA,mCAC1B1wD,EAAYjC,GAElB,IAAI4yD,EAAe,EACfC,EAAa,EACjB,UAAW3pG,KAAS+4C,GACH,MAAMknD,EAAcjgG,CAAK,GAC7B,QACT0pG,IAEAC,IAGAD,EAAe,GACXjnF,GAAA,CACJ,MAAO,mCACP,YAAa,GAAGinF,CAAY,uCAC7B,EAECC,EAAa,IACTlnF,GAAA,CACJ,MAAO,uCACP,YAAa,GAAGknF,CAAU,2CAC1B,QAAS,cACV,EACDtqF,EAAU,WAAWO,GAAY,UAAW,qCAAsC,CAAE,YAAa+pF,EAAY,SAExGprG,EAAO,CACRkkB,GAAA,CACJ,MAAO,oBACP,YAAalkB,aAAiB,MAAQA,EAAM,QAAU,sCACtD,QAAS,cACV,EACS8gB,EAAA,WAAWO,GAAY,UAAW,wCAAyC,CAAE,QAAUrhB,GAAA,YAAAA,EAAiB,QAAS,CAC7H,CACF,EAEA,SAAAgxB,MAAC01C,GAAS,WAAU,SAAU,KAElC,GACQ,EAGA11C,MAAC,OAAI,UAAU,eACb,eAAC04E,GAAY,gBAAgBiB,EAAoB,cAAAf,CAAA,CAA8B,CACjF,GAEA54E,MAAC,MAAI,WAAU,yDACf,GAECgB,EAAA,KAAAk3E,GAAA,CAAK,aAAa,SAAS,UAAU,SACpC,UAACl3E,OAAAo3E,GAAA,CAAS,UAAU,qCAClB,UAAAp3E,EAAA,KAACs3E,GAAA,CACC,MAAM,SACN,UAAU,kEAEV,UAACt4E,MAAA01C,GAAA,CAAS,UAAU,cAAe,GAAE,UAEvC,EACA10C,EAAA,KAACs3E,GAAA,CACC,MAAM,WACN,UAAU,kEAEV,UAACt4E,MAAA01C,GAAA,CAAS,UAAU,cAAe,GAAE,YAEvC,GACF,EAEC10C,EAAA,KAAAw3E,GAAA,CAAY,MAAM,SAAS,UAAU,YACnC,UAAgBwB,EAAAH,EAAanxD,GAAe,QAAQ,EAAGkwD,CAAa,CAAC,EAAE,IAAI,CAACnoG,EAAOwe,IAAU,CAC1F,MAAMorF,EAAW,UAAU5pG,EAAM,EAAE,IAAIwe,CAAK,GAC5C,aACG,MACC,UAAA+Q,EAAA,IAACq5E,GAAA,CACC,MAAA5oG,EACA,QAAS64C,EAAc,SAAS74C,EAAM,EAAE,EACxC,aAAc,IAAM,CAClBglG,EAAiBhlG,CAAK,EAEtBqf,EAAU,iBAAiBrf,EAAM,GAAIA,EAAM,KAAK,CAClD,EACA,YAAcjB,GAAMonG,EAAgBnmG,EAAOjB,CAAC,KATtC6qG,CAWV,EAEH,EAEFR,EAAanxD,GAAe,QAAQ,EAAGkwD,CAAa,EAAE,SAAW,GAChE54E,MAAC,OAAI,UAAU,kCACb,SAACA,MAAA,KAAE,kEAAuD,GAC5D,GAEJ,EAECgB,EAAA,KAAAw3E,GAAA,CAAY,MAAM,WAAW,UAAU,YACrC,UAAgBwB,EAAAH,EAAanxD,GAAe,UAAU,EAAGkwD,CAAa,CAAC,EAAE,IAAI,CAACnoG,EAAOwe,IAAU,CAC5F,MAAMorF,EAAW,YAAY5pG,EAAM,EAAE,IAAIwe,CAAK,GAC9C,aACG,MACC,UAAA+Q,EAAA,IAACq5E,GAAA,CACC,MAAA5oG,EACA,QAAS64C,EAAc,SAAS74C,EAAM,EAAE,EACxC,aAAc,IAAM,CAClBglG,EAAiBhlG,CAAK,EAEtBqf,EAAU,iBAAiBrf,EAAM,GAAIA,EAAM,KAAK,CAClD,EACA,YAAcjB,GAAMonG,EAAgBnmG,EAAOjB,CAAC,KATtC6qG,CAWV,EAEH,EAEFR,EAAanxD,GAAe,UAAU,EAAGkwD,CAAa,EAAE,SAAW,GAClE54E,MAAC,OAAI,UAAU,kCACb,SAACA,MAAA,KAAE,kEAAuD,GAC5D,GAEJ,GACF,EAGAA,EAAA,IAAC0xE,GAAA,CACC,MAAO8D,EACP,OAAQ,CAAC,CAACA,EACV,QAAS,IAAMC,EAAiB,IAAI,EACpC,OAAO,UACT,GACF,QAGClgC,GAAiB,GACpB,GAEJ,EC7Pa+kC,GAAuB,CAClC,QAAS,+PAET,QAAS,+SAET,aAAc,iSAEd,MAAO,0UACT,ECLaC,GAAmC,CAC9C,KAAM,wBACN,UAAW,UACX,YAAa,8GACb,YAAa,KACb,YAAa,GACb,aAAc,kCACd,aAAc,kCACd,UAAW,iDACb,ECZaC,GAA4B,CACvC,CACE,GAAI,UACJ,KAAM,iBACN,KAAM,YACN,YAAa,yBACf,EACA,CACE,GAAI,UACJ,KAAM,kBACN,KAAM,YACN,YAAa,2DACf,EACA,CACE,GAAI,UACJ,KAAM,iBACN,KAAM,aACN,YAAa,6BACf,CACF,ECbMC,GAAQ,IAAM,CAClB,MAAM/2D,EAAWC,KAGf,OAAA3iB,EAAA,KAAC,MAAI,WAAU,8DACb,UAACA,OAAA,OAAI,UAAU,0BACb,UAACA,OAAA,UAAO,UAAU,yCAChB,UAACA,OAAA8rB,EAAA,CAAO,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAMpJ,EAAS,MAAM,EAC9D,UAAC1jB,MAAAi6E,GAAA,CAAU,UAAU,cAAe,GAAE,UAExC,EACCj6E,EAAA,UAAG,UAAU,mCAAmC,SAAQ,aACzDA,EAAA,IAACw0C,GAAA,CACC,MAAM,oCACN,KAAK,wEACP,GACF,EAECxzC,EAAA,KAAAk3E,GAAA,CAAK,aAAa,cAAc,UAAU,cACzC,UAACl3E,OAAAo3E,GAAA,CAAS,UAAU,wBAClB,UAACp4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,cAAc,SAAW,gBAC3Ct4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,UAAU,SAAQ,aACpCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,OAAO,SAAO,YAChCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,UAAU,SAAU,gBACzC,EAEAt4E,MAACw4E,IAAY,MAAM,UAAU,UAAU,YACrC,SAAAx3E,EAAA,KAAC,MAAI,WAAU,oCACb,UAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAyB,8BACnEA,EAAA,SAAE,UAAU,qBAAqB,SAIlC,gTAEAA,MAAC,MAAI,WAAU,2BACb,SAAAA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,UAAU,sEACV,QAAS,IAAMpJ,EAAS,mBAAmB,EAC5C,iDAGH,EAGA1jB,MAAC,MAAI,WAAU,MAAO,GACrBA,EAAA,UAAG,UAAU,6BAA6B,SAAmB,wBAC7DA,EAAA,SAAE,UAAU,qBAAqB,SAKlC,+SAICA,EAAA,UAAG,UAAU,6BAA6B,SAAmB,wBAC7DA,EAAA,SAAE,UAAU,qBAAqB,SAIlC,2SAGF,CACF,GAECgB,EAAA,KAAAw3E,GAAA,CAAY,MAAM,cAAc,UAAU,YAC3C,UAACx3E,OAAA,OAAI,UAAU,wIACT,UAACA,OAAA,KAAE,KAAK,wCAAwC,OAAO,SAAS,IAAI,sBAAsB,UAAU,yGAClG,UAAChB,MAAA06E,GAAA,CAAU,UAAU,cAAe,GACpC16E,MAAC,QAAK,SAAW,iBACnB,EACAgB,OAAC,KAAE,KAAK,2BAA2B,OAAO,SAAS,IAAI,sBAAsB,UAAU,yGACrF,UAAChB,MAAA26E,GAAA,CAAQ,UAAU,cAAe,GAClC36E,MAAC,QAAK,SAAW,iBACnB,EACAgB,OAAC,KAAE,KAAM,UAAUu5E,GAAgB,YAAY,GAAI,UAAU,mHAC3D,UAACv5E,OAAA,OAAI,MAAM,6BAA6B,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,QAAQ,UAAU,6BAC1L,UAAChB,MAAA,QAAK,MAAM,KAAK,OAAO,KAAK,EAAE,IAAI,EAAE,IAAI,GAAG,GAAI,GAChDA,MAAC,OAAK,GAAE,2CAA4C,IACtD,EACCA,EAAA,YAAK,UAAU,WAAY,YAAgB,aAAa,GAC3D,GACF,EACFgB,OAAC,MAAI,WAAU,yCACb,UAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAkC,uCAC7EA,MAAC,MAAI,WAAU,+DACb,SAAAA,EAAA,IAAC,SACC,UAAU,+BACV,SAAQ,GACR,YAAW,GACX,OAAQquB,GAAa,uBAAuB,EAC5C,IAAKA,GAAa,wBAAwB,EAC1C,aAAW,mDAEf,EACCruB,EAAA,SAAE,UAAU,2CAA2C,SAExD,iEACF,EAGAgB,OAAC,MAAI,WAAU,oCAEb,UAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAc,mBACxDA,EAAA,SAAE,UAAU,qBACV,YAAU,QACb,EAECA,EAAA,UAAG,UAAU,6BAA6B,SAAa,kBACvDA,EAAA,SAAE,UAAU,qBACV,YAAU,QACb,EAECA,EAAA,UAAG,UAAU,6BAA6B,SAAc,mBACxDA,EAAA,SAAE,UAAU,qBACV,YAAU,aACb,EAECA,EAAA,UAAG,UAAU,6BAA6B,SAAgB,qBAC1DA,EAAA,SAAE,UAAU,qBACV,YAAU,MACb,GACF,GACF,EAECgB,EAAA,KAAAw3E,GAAA,CAAY,MAAM,OAAO,UAAU,YAClC,UAAAx4E,MAAC,OAAI,UAAU,yCACb,SAACgB,EAAA,UAAE,UAAU,gBAAgB,sCACDu5E,GAAgB,YAAY,wJAExD,CACF,SAEC,MAAI,WAAU,YACZ,SAAAC,GAAY,IAAKI,GACf56E,MAAA+4E,GAAA,CACC,eAACI,GAAY,WAAU,MACrB,SAACn4E,EAAA,YAAI,UAAU,8BACb,UAAChB,MAAA,OAAI,UAAU,qGACb,SAAAA,MAAC,QAAK,UAAU,4CACb,WAAO,KAAK,MAAM,GAAG,EAAE,OAAS,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAChD,CACF,GACAgB,OAAC,MAAI,WAAU,iBACb,UAAAhB,EAAA,IAAC,KAAG,WAAU,uBAAwB,SAAA46E,EAAO,KAAK,EACjD56E,EAAA,SAAE,UAAU,0BAA2B,WAAO,KAAK,EACnDA,EAAA,SAAE,UAAU,0CAA2C,WAAO,YAAY,GAC7E,EACF,EACF,IAdS46E,EAAO,EAelB,CACD,CACH,IACF,EAEA56E,MAACw4E,IAAY,MAAM,UAAU,UAAU,YACrC,SAAAx3E,EAAA,KAAC,MAAI,WAAU,yCACb,UAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAoB,yBAC9DA,EAAA,SAAE,UAAU,qBAAqB,SAGlC,sJAEAgB,OAAC,MAAI,WAAU,iBACb,UAACA,OAAA,OAAI,UAAU,sCACb,UAACA,OAAA,MAAG,UAAU,gCACZ,UAAChB,MAAA66E,GAAA,CAAM,UAAU,2BAA4B,GAAE,gBAEjD,EACC76E,EAAA,SAAE,UAAU,6BAA6B,SAE1C,0FACAgB,EAAA,KAAC8rB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,OACV,QAAS,IAAMpJ,EAAS,SAAS,EAEjC,UAAC1jB,MAAA66E,GAAA,CAAM,UAAU,2BAA4B,GAAE,4BAEjD,GACF,EAEA75E,OAAC,MAAI,WAAU,uCACb,UAACA,OAAA,MAAG,UAAU,gCACZ,UAAChB,MAAA86E,GAAA,CAAM,UAAU,4BAA6B,GAAE,kBAElD,EACA95E,OAAC,IAAE,WAAU,6BAA6B,0GAEvBhB,MAAC,IAAE,MAAM,UAAUu6E,GAAgB,YAAY,GAAI,UAAU,gCAAiC,SAAAA,GAAgB,YAAa,GAAI,KAClJ,GACF,EAEAv5E,OAAC,MAAI,WAAU,wCACb,UAACA,OAAA,MAAG,UAAU,gCACZ,UAACA,OAAA,OAAI,MAAM,6BAA6B,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,QAAQ,UAAU,8BAC1L,UAAChB,MAAA,QAAK,MAAM,KAAK,OAAO,KAAK,EAAE,IAAI,EAAE,IAAI,GAAG,GAAI,GAChDA,MAAC,OAAK,GAAE,2CAA4C,IACtD,EAAM,qBAER,EACAgB,OAAC,IAAE,WAAU,6BAA6B,mHAEvBhB,MAAC,IAAE,MAAM,UAAUu6E,GAAgB,YAAY,GAAI,UAAU,gCAAiC,SAAAA,GAAgB,YAAa,IAC9I,GACF,GACF,GACF,CACF,IACF,GACF,QAGChlC,GAAiB,GACpB,GAEJ,EClOMwlC,GAAS,IAAM,CACnB,MAAMr3D,EAAWC,KAGjBne,mBAAU,IAAM,CACJ1V,EAAA,cAAc,UAAW,cAAc,EACjDA,EAAU,sBAAsB,KAAK,CACvC,EAAG,CAAE,GAGHkR,EAAA,KAAC,MAAI,WAAU,8DACb,UAACA,OAAA,OAAI,UAAU,0BACb,UAACA,OAAA,UAAO,UAAU,yCAChB,UAAAA,EAAA,KAAC8rB,GAAO,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,CAAYh9B,EAAA,yBAAyBO,GAAY,gBAAiB,CAAE,OAAQ,YAAa,OAAQ,aAAc,EAAGqzB,EAAS,MAAM,CAChL,YAAC1jB,MAAAi6E,GAAA,CAAU,UAAU,cAAe,GAAE,UAExC,EACCj6E,EAAA,UAAG,UAAU,mCAAmC,SAAY,iBAC7DA,EAAA,IAACw0C,GAAA,CACC,MAAM,wCACN,KAAK,4FACP,GACF,EAEAx0C,EAAA,IAAC+4E,GAAK,WAAU,OACd,SAAA/4E,EAAA,IAACm5E,GAAY,WAAU,MAQrB,SAAAn5E,MAAC,MAAI,WAAU,YAcb,SAAAA,EAAA,IAAC,UACC,GAAG,WACH,MAAM,8BACN,UAAU,OACV,IAAI,gFACJ,MAAO,CAAE,MAAO,OAAQ,OAAQ,QAAS,OAAQ,MAAO,EAExD,OAAQ,IAAMlQ,EAAU,yBAAyBO,GAAY,eAAgB,CAAE,OAAQ,YAAa,cAAe,GAAM,GAE7H,EACF,GACF,EAEA2Q,OAAC,MAAI,WAAU,oCACb,UAAAhB,MAAC,KAAE,SAA2D,gEAC9DA,EAAA,IAAC,IAAE,WAAU,cACX,SAAAA,MAAC,IAAE,MAAK,yCAAyC,UAAU,gCAAgC,0CAE3F,GACF,GACF,GACF,QAGCu1C,GAAiB,GACpB,GAEJ,EChFMylC,GAAW,IAAM,CACrB,MAAMp3D,EAAWC,KAEjBre,mBAAU,IAAM,CACN,cACN,0DACAoe,EAAS,SACX,EACC,CAACA,EAAS,QAAQ,CAAC,QAGnB,MAAI,WAAU,4DACb,SAAC5iB,EAAA,YAAI,UAAU,cACb,UAAChB,EAAA,UAAG,UAAU,0BAA0B,SAAG,QAC1CA,EAAA,SAAE,UAAU,6BAA6B,SAAoB,+BAC7D,IAAE,MAAK,IAAI,UAAU,8CAA8C,SAEpE,mBACF,EACF,EAEJ,ECdMi7E,GAAe,CAAC,CAAE,WAAAp1E,EAAY,aAAAq1E,KAAsC,CACxE,KAAM,CAACC,EAAmBC,CAAoB,EAAI71E,WAAS,EAAK,EAC/Coe,GAAY,EAE7Bne,YAAU,IAAM,CAKR,MAAAY,EAAQ,WAAW,IAAM,CAC7Bg1E,EAAqB,EAAI,EAGzB,WAAW,IAAM,CACJv1E,KACV,GAAG,GACL,GAAiB,EAEb,UAAM,aAAaO,CAAK,GAC9B,CAACP,CAAU,CAAC,EAGf,MAAMw1E,EAAe,CACnB,OAAQ,CAAE,QAAS,EAAG,MAAO,EAAI,EACjC,QAAS,CACP,QAAS,EACT,MAAO,EACP,WAAY,CACV,SAAU,GACV,KAAM,SACR,CACF,EACA,KAAM,CACJ,QAAS,EACT,MAAO,IACP,WAAY,CACV,SAAU,GACV,KAAM,QACR,CACF,GAIA,OAAAr7E,EAAA,IAAC8mB,GAAO,IAAP,CACC,UAAU,yGACV,QAAS,CAAE,QAAS,CAAE,EACtB,QAAS,CAAE,QAAS,CAAE,EACtB,KAAM,CAAE,QAAS,CAAE,EACnB,WAAY,CAAE,SAAU,EAAI,EAE5B,SAAA9lB,EAAA,KAAC8lB,GAAO,IAAP,CACC,UAAU,6BACV,SAAUu0D,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,UAAAr7E,EAAA,IAAC8mB,GAAO,GAAP,CACC,UAAU,yCACV,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,WAAY,CAAE,MAAO,GAAK,SAAU,EAAI,EACzC,iCAED,EACA9mB,EAAA,IAAC8mB,GAAO,IAAP,CACC,IAAKuH,GAAa,WAAW,EAC7B,IAAI,yBACJ,UAAU,gCACZ,EAEAruB,EAAA,IAAC8mB,GAAO,GAAP,CACC,UAAU,4CACV,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,WAAY,CAAE,MAAO,GAAK,SAAU,EAAI,EACzC,6BAED,EACA9mB,EAAA,IAAC8mB,GAAO,EAAP,CACC,UAAU,kDACV,QAAS,CAAE,QAAS,CAAE,EACtB,QAAS,CAAE,QAAS,CAAE,EACtB,WAAY,CAAE,MAAO,GAAK,SAAU,EAAI,EAEvC,WACG,wDACA,sDACN,GACF,GAGN,EClGMw0D,GAAQx7E,EAAM,WAClB,CAAC,CAAE,UAAArK,EAAW,KAAA5e,EAAM,GAAGG,CAAA,EAAS+oB,IAE5BC,EAAA,IAAC,SACC,KAAAnpB,EACA,UAAW4oB,GACT,iYACAhK,CACF,EACA,IAAAsK,EACC,GAAG/oB,CAAA,EAIZ,EACAskG,GAAM,YAAc,QCbpB,IAAIC,GAAO,QACPz2C,GAAQhlC,EAAgB,WAAC,CAAC9oB,EAAOo5B,IACZpQ,EAAG,IACxB4Q,GAAU,MACV,CACE,GAAG55B,EACH,IAAKo5B,EACL,YAAc3/B,GAAU,OACPA,EAAM,OACV,QAAQ,iCAAiC,KACpD+C,EAAAwD,EAAM,cAAN,MAAAxD,EAAA,KAAAwD,EAAoBvG,GAChB,CAACA,EAAM,kBAAoBA,EAAM,OAAS,GAAGA,EAAM,iBACxD,CACF,CACL,CACC,EACDq0D,GAAM,YAAcy2C,GACpB,IAAIC,GAAO12C,GCjBX,MAAM22C,GAAgBtnF,GACpB,4FACF,EAEM2wC,GAAQhlC,EAIZ,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC07E,GAAA,CACC,IAAA37E,EACA,UAAWN,GAAGg8E,GAAc,EAAGhmF,CAAS,EACvC,GAAGze,CAAA,CACN,CACD,EACD8tD,GAAM,YAAc42C,GAAoB,YCdxC,MAAMj/F,GAAS0mC,GAAa,qBAAqB,EAmB3Cw4D,GAAiB,QAKVC,GAAgB,IAAc,CACzCn/F,GAAO,KAAK,mCAAmC,EAE3C,IACF,KAAM,CAAE,OAAA8qC,EAAQ,UAAAC,CAAU,EAAI4sD,GAAY,SAAS,EAE7CJ,EAAyB,CAC7B,OAAAzsD,EACA,UAAAC,EACA,WAAY,IAAI,KAAK,EAAE,YAAY,EACnC,QAASm0D,EAAA,EAGL1H,EAAW,KAAK,UAAUD,EAAY,KAAM,CAAC,EACnDv3F,UAAO,KAAK,wBAAwB8qC,EAAO,MAAM,kBAAkBC,EAAU,MAAM,QAAQ,EAEpFysD,QACAjlG,EAAO,CACPyN,SAAA,MAAM,2CAA6CzN,CAAK,EACzD,IAAI,MAAM,0CAA2C,CAC7D,CACF,EAKa6sG,GAAe,IAAc,CACxCp/F,GAAO,KAAK,4BAA4B,EAEpC,IACF,KAAM,CAAE,OAAA8qC,CAAA,EAAW6sD,GAAY,SAAS,EAElCJ,EAAa,CACjB,OAAAzsD,EACA,WAAY,IAAI,KAAK,EAAE,YAAY,EACnC,QAASo0D,EAAA,EAGL1H,EAAW,KAAK,UAAUD,EAAY,KAAM,CAAC,EACnDv3F,UAAO,KAAK,wBAAwB8qC,EAAO,MAAM,aAAa,EAEvD0sD,QACAjlG,EAAO,CACPyN,SAAA,MAAM,8CAAgDzN,CAAK,EAC5D,IAAI,MAAM,6CAA8C,CAChE,CACF,EA8Ba8sG,GAAoB,IAAc,CAC7Cr/F,GAAO,KAAK,0CAA0C,EAElD,IACF,KAAM,CAAE,OAAA8qC,CAAA,EAAW6sD,GAAY,SAAS,EAGlC3wF,EAAU,CACd,KACA,QACA,aACA,OACA,YACA,OACA,OACA,gBAIIg9E,EAAOl5C,EAAO,IAAa92C,GAChB,CACbA,EAAM,GACN,IAAIA,EAAM,MAAM,QAAQ,KAAM,IAAI,CAAC,IACnC,IAAIA,EAAM,WAAW,QAAQ,KAAM,IAAI,CAAC,IACxCA,EAAM,KACN,IAAIA,EAAM,UAAU,QAAQ,KAAM,IAAI,CAAC,IACvC,IAAIA,EAAM,KAAK,QAAQ,KAAM,IAAI,CAAC,IAClC,IAAIA,EAAM,KAAK,KAAK,GAAG,CAAC,IACxB,IAAIA,EAAM,aAAa,QAAQ,KAAM,IAAI,CAAC,KAG9B,KAAK,GAAG,CACvB,EAGKsrG,EAAM,CAACt4F,EAAQ,KAAK,GAAG,EAAG,GAAGg9E,CAAI,EAAE,KAAK;AAAA,CAAI,EAClDhkF,UAAO,KAAK,4BAA4B8qC,EAAO,MAAM,aAAa,EAE3Dw0D,QACA/sG,EAAO,CACPyN,SAAA,MAAM,4DAA8DzN,CAAK,EAC1E,IAAI,MAAM,2DAA4D,CAC9E,CACF,EAKaimG,GAAchB,GAAmC,CAC5Dx3F,GAAO,KAAK,oCAAoC,EAE5C,IACI,MAAAy3F,EAAe,KAAK,MAAMD,CAAQ,EAClCjkG,EAAmB,GACzB,IAAIgsG,EAAiB,EACjBC,EAAoB,EAGxB,GAAI,CAAC/H,EACI,OACL,QAAS,GACT,QAAS,kCACT,OAAQ,CAAC,sBAAsB,GAKnC,GAAIA,EAAa,WAAa,MAAM,QAAQA,EAAa,SAAS,EAAG,CACnEz3F,GAAO,KAAK,8BAA8By3F,EAAa,UAAU,MAAM,QAAQ,EAEpE,UAAAtwD,KAAYswD,EAAa,UAAW,CAEvC,MAAAV,EAAmBP,GAAiBrvD,CAAQ,EAElD,GAAI4vD,EAAiB,QAAS,CACtB,MAAAnzF,EAAS+zF,GAAY,YAAYxwD,CAAQ,EAE3CvjC,EAAO,QACT47F,IACS57F,EAAO,OACTrQ,EAAA,KAAK,wCAAwC4zC,EAAS,IAAM,SAAS,KAAKvjC,EAAO,KAAK,EAAE,CACjG,KACK,CACL,MAAM67F,EAAc1I,EAAiB,OAAO,OAAS,GAAGhkG,EAAE,KAAK,KAAKA,EAAE,OAAO,EAAE,EAAE,KAAK,IAAI,EAC1FQ,EAAO,KAAK,mCAAmC4zC,EAAS,IAAM,SAAS,KAAKs4D,CAAW,EAAE,CAC3F,CACF,CACF,CAGA,GAAIhI,EAAa,QAAU,MAAM,QAAQA,EAAa,MAAM,EAAG,CAC7Dz3F,GAAO,KAAK,8BAA8By3F,EAAa,OAAO,MAAM,aAAa,EAEtE,UAAAzjG,KAASyjG,EAAa,OAAQ,CAEjC,MAAAV,EAAmBR,GAAcviG,CAAK,EAE5C,GAAI+iG,EAAiB,QAAS,CACtB,MAAAnzF,EAAS+zF,GAAY,SAAS3jG,CAAK,EAErC4P,EAAO,QACT27F,IACS37F,EAAO,OACTrQ,EAAA,KAAK,+CAA+CS,EAAM,IAAM,SAAS,KAAK4P,EAAO,KAAK,EAAE,CACrG,KACK,CACL,MAAM67F,EAAc1I,EAAiB,OAAO,OAAS,GAAGhkG,EAAE,KAAK,KAAKA,EAAE,OAAO,EAAE,EAAE,KAAK,IAAI,EAC1FQ,EAAO,KAAK,uCAAuCS,EAAM,IAAM,SAAS,KAAKyrG,CAAW,EAAE,CAC5F,CACF,CACF,CAGA,IAAI/sG,EAAU,GACd,OAAI8sG,EAAoB,IACtB9sG,GAAW,GAAG8sG,CAAiB,yBAG7BD,EAAiB,IACnB7sG,GAAW,GAAG6sG,CAAc,6BAG1BC,IAAsB,GAAKD,IAAmB,IACtC7sG,EAAA,2BAIZilG,GAAY,mBAAmB,EAExB,CACL,QAAS4H,EAAiB,GAAKC,EAAoB,EACnD,QAAA9sG,EACA,eAAA6sG,EACA,kBAAAC,EACA,OAAQjsG,EAAO,OAAS,EAAIA,EAAS,cAEhChB,EAAO,CACPyN,UAAA,MAAM,2CAA6CzN,CAAK,EAExD,CACL,QAAS,GACT,QAAS,2CACT,OAAQ,CAAEA,EAAgB,OAAO,EAErC,CACF,EAKamtG,GAAuBC,GAAkC,CACpE3/F,GAAO,KAAK,qCAAsC,EAE9C,IAEI,MAAAo+D,EAAQuhC,EAAQ,MAAM;AAAA,CAAI,EAAE,OAAe9jB,KAAK,KAAK,IAAM,EAAE,EAE/D,GAAAzd,EAAM,OAAS,EACV,OACL,QAAS,GACT,QAAS,yDACT,OAAQ,CAAC,qBAAqB,GAKlC,MAAMp3D,EAAUo3D,EAAM,CAAC,EAAE,MAAM,GAAG,EAI5BwhC,EADkB,CAAC,KAAM,QAAS,aAAc,OAAQ,cAAc,EACrC,OAAOC,GAAU,CAAC74F,EAAQ,SAAS64F,CAAM,CAAC,EAE7E,GAAAD,EAAe,OAAS,EACnB,OACL,QAAS,GACT,QAAS,2CAA2CA,EAAe,KAAK,IAAI,CAAC,GAC7E,OAAQ,CAAC,uBAAuBA,EAAe,KAAK,IAAI,CAAC,EAAE,GAKzD,MAAAE,EAAgBjkB,GAA2B,CAC/C,MAAMh6B,EAAmB,GACzB,IAAIk+C,EAAe,GACfC,EAAe,GAEnB,QAAS1rG,EAAI,EAAGA,EAAIunF,EAAK,OAAQvnF,IAAK,CAC9B,MAAAszD,EAAOi0B,EAAKvnF,CAAC,EAEfszD,IAAS,IAEPo4C,GAAgB1rG,EAAI,EAAIunF,EAAK,QAAUA,EAAKvnF,EAAI,CAAC,IAAM,KACzCyrG,GAAA,IAChBzrG,KAGA0rG,EAAe,CAACA,EAETp4C,IAAS,KAAO,CAACo4C,GAE1Bn+C,EAAO,KAAKk+C,CAAY,EACTA,EAAA,IAGCA,GAAAn4C,CAEpB,CAGA,OAAA/F,EAAO,KAAKk+C,CAAY,EAEjBl+C,CAAA,EAIH/W,EAAkB,GAClBv3C,EAAmB,GAEzB,QAASe,EAAI,EAAGA,EAAI8pE,EAAM,OAAQ9pE,IAC5B,IACF,MAAMutD,EAASi+C,EAAa1hC,EAAM9pE,CAAC,CAAC,EAC9BN,EAAa,GAGnB,QAAS42B,EAAI,EAAGA,EAAI5jB,EAAQ,OAAQ4jB,IAC9B,GAAAA,EAAIi3B,EAAO,OAAQ,CACf,MAAAg+C,EAAS74F,EAAQ4jB,CAAC,EACpB,IAAAxzB,EAAQyqD,EAAOj3B,CAAC,EAGhBi1E,IAAW,KAAOA,IAAW,IACzB7rG,EAAA6rG,CAAM,EAAI,WAAWzoG,CAAK,EACvByoG,IAAW,OACd7rG,EAAA6rG,CAAM,EAAIzoG,EAAM,MAAM,GAAG,EAAE,IAAI80C,GAAOA,EAAI,KAAM,GAEtDl4C,EAAM6rG,CAAM,EAAIzoG,CAEpB,CAII,MAAA2/F,EAAmBR,GAAcviG,CAAc,EAErD,GAAI+iG,EAAiB,QACnBjsD,EAAO,KAAK92C,CAAc,MACrB,CACL,MAAMyrG,EAAc1I,EAAiB,OAAO,OAAS,GAAGhkG,EAAE,KAAK,KAAKA,EAAE,OAAO,EAAE,EAAE,KAAK,IAAI,EAC1FQ,EAAO,KAAK,SAASe,EAAI,CAAC,0BAA0BmrG,CAAW,EAAE,CACnE,QACOltG,EAAO,CACdgB,EAAO,KAAK,yCAAyCe,EAAI,CAAC,KAAM/B,EAAgB,OAAO,EAAE,CAC3F,CAIF,IAAI0tG,EAAgB,EAEpB,UAAWjsG,KAAS82C,EAAQ,CACpB,MAAAlnC,EAAS+zF,GAAY,SAAS3jG,CAAK,EAErC4P,EAAO,QACTq8F,IACSr8F,EAAO,OAChBrQ,EAAO,KAAK,+CAA+CS,EAAM,EAAE,KAAK4P,EAAO,KAAK,EAAE,CAE1F,CAGA,OAAA+zF,GAAY,mBAAmB,EAExB,CACL,QAASsI,EAAgB,EACzB,QAAS,GAAGA,CAAa,gCAAgCn1D,EAAO,MAAM,uBACtE,eAAgBm1D,EAChB,OAAQ1sG,EAAO,OAAS,EAAIA,EAAS,cAEhChB,EAAO,CACPyN,UAAA,MAAM,yDAA2DzN,CAAK,EAEtE,CACL,QAAS,GACT,QAAS,yDACT,OAAQ,CAAEA,EAAgB,OAAO,EAErC,CACF,ECpYa2tG,GAA8B,IAAM,CACzC,MAAAC,EAAen4E,EAAM,OAAyB,IAAI,EAClDo4E,EAAcp4E,EAAM,OAAyB,IAAI,EAEjDq4E,EAAkB,IAAM,CACxB,IACF,MAAMjoG,EAAO+mG,KACbmB,EAAaloG,EAAM,kBAAsB,SAAO,gBAAc,MAAM,GAAG,EAAE,CAAC,CAAC,QAAS,kBAAkB,QAC/F7F,EAAO,CACN,cAAM,uBAAyBA,CAAK,CAC9C,GAGIguG,EAAqB,IAAM,CAC3B,IACF,MAAMnoG,EAAOgnG,KACbkB,EAAaloG,EAAM,kBAAsB,SAAO,gBAAc,MAAM,GAAG,EAAE,CAAC,CAAC,QAAS,kBAAkB,QAC/F7F,EAAO,CACN,cAAM,sCAAwCA,CAAK,CAC7D,GAGIiuG,EAAwB,IAAM,CAC9B,IACF,MAAMpoG,EAAOinG,KACbiB,EAAaloG,EAAM,kBAAsB,SAAO,gBAAc,MAAM,GAAG,EAAE,CAAC,CAAC,OAAQ,wBAAwB,QACpG7F,EAAO,CACN,cAAM,oDAAsDA,CAAK,CAC3E,GAGIkuG,EAAgBzsG,GAA+C,OACnE,MAAM22F,GAAO5zF,EAAA/C,EAAM,OAAO,QAAb,YAAA+C,EAAqB,GAClC,GAAI,CAAC4zF,EAAM,OAEL,MAAA+V,EAAS,IAAI,WACZA,EAAA,OAAU3tG,GAAM,OACjB,IACI,MAAAqiC,GAAUr+B,EAAAhE,EAAE,SAAF,YAAAgE,EAAU,OACpB6M,EAAS40F,GAAWpjE,CAAO,EAE7BxxB,EAAO,QACD,YAAI,uBAAwBA,EAAO,OAAO,GAE1C,cAAM,iCAAmCA,EAAO,OAAO,EAE3DA,EAAO,QAAUA,EAAO,OAAO,OAAS,GAClC,cAAM,yBAA2BA,EAAO,MAAM,SAGnDrR,EAAO,CACN,cAAM,mCAAqCA,CAAK,CAC1D,CAGI4tG,EAAa,UACfA,EAAa,QAAQ,MAAQ,GAC/B,EAGFO,EAAO,WAAW/V,CAAI,GAGlBgW,EAAmB3sG,GAA+C,OACtE,MAAM22F,GAAO5zF,EAAA/C,EAAM,OAAO,QAAb,YAAA+C,EAAqB,GAClC,GAAI,CAAC4zF,EAAM,OAEL,MAAA+V,EAAS,IAAI,WACZA,EAAA,OAAU3tG,GAAM,OACjB,IACI,MAAAqiC,GAAUr+B,EAAAhE,EAAE,SAAF,YAAAgE,EAAU,OACpB6M,EAAS87F,GAAoBtqE,CAAO,EAEtCxxB,EAAO,QACD,YAAI,2BAA4BA,EAAO,OAAO,GAE9C,cAAM,qCAAuCA,EAAO,OAAO,EAE/DA,EAAO,QAAUA,EAAO,OAAO,OAAS,GAClC,cAAM,6BAA+BA,EAAO,MAAM,SAGvDrR,EAAO,CACN,cAAM,2BAA6BA,CAAK,CAClD,CAGI6tG,EAAY,UACdA,EAAY,QAAQ,MAAQ,GAC9B,EAGFM,EAAO,WAAW/V,CAAI,GAGlB2V,EAAe,CAACloG,EAAcwoG,EAAkBxmG,IAAiB,CAC/D,MAAAy0C,EAAO,IAAI,KAAK,CAACz2C,CAAI,EAAG,CAAE,KAAAgC,EAAM,EAChC4S,EAAM,IAAI,gBAAgB6hC,CAAI,EAC9Bh2C,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOmU,EACTnU,EAAE,SAAW+nG,EACJ,cAAK,YAAY/nG,CAAC,EAC3BA,EAAE,MAAM,EACC,cAAK,YAAYA,CAAC,EAC3B,IAAI,gBAAgBmU,CAAG,GAIvB,OAAAuX,EAAA,KAAC,MAAI,WAAU,YACb,UAAChB,EAAA,UAAG,UAAU,wBAAwB,SAAwB,6BAE9DgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,UAAG,UAAU,sBAAsB,SAAW,gBAC/CgB,OAAC,MAAI,WAAU,uBACb,UAAChB,EAAA,IAAA8sB,EAAA,CAAO,QAASgwD,EAAiB,SAElC,gCACC98E,EAAA,IAAA8sB,EAAA,CAAO,QAASkwD,EAAoB,SAErC,4BACCh9E,EAAA,IAAA8sB,EAAA,CAAO,QAASmwD,EAAuB,SAExC,mCACF,GACF,EAEAj8E,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,UAAG,UAAU,sBAAsB,SAAW,gBAC/CgB,OAAC,MAAI,WAAU,sBACb,UAAAA,OAAC,MACC,WAAAhB,MAAC8sB,GAAO,QAAS,IAAM,cAAAt5C,EAAAopG,EAAa,UAAb,YAAAppG,EAAsB,SAAS,SAEtD,yBACAwsB,EAAA,IAAC,SACC,KAAK,OACL,IAAK48E,EACL,SAAUM,EACV,OAAO,QACP,UAAU,SACZ,GACF,SAEC,MACC,WAAAl9E,MAAC8sB,GAAO,QAAS,IAAM,cAAAt5C,EAAAqpG,EAAY,UAAZ,YAAArpG,EAAqB,SAAS,SAErD,mCACAwsB,EAAA,IAAC,SACC,KAAK,OACL,IAAK68E,EACL,SAAUO,EACV,OAAO,OACP,UAAU,SACZ,GACF,GACF,GACF,CACF,GAEJ,EC3JME,GAAWx9E,EAAM,WACrB,CAAC,CAAE,UAAArK,EAAW,GAAGze,CAAA,EAAS+oB,IAEtBC,EAAA,IAAC,YACC,UAAWP,GACT,uSACAhK,CACF,EACA,IAAAsK,EACC,GAAG/oB,CAAA,EAIZ,EACAsmG,GAAS,YAAc,WCfvB,MAAMC,GAASC,GAITC,GAAcC,GAEdC,GAAgB79E,aAGpB,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,GAAGj3B,CAAM,EAAG+oB,IACpCiB,EAAA,KAAC48E,GAAA,CACC,IAAA79E,EACA,UAAWN,GACT,kTACAhK,CACF,EACC,GAAGze,EAEH,UAAAi3B,EACDjO,MAAC69E,GAAA,CAAqB,QAAO,GAC3B,SAAC79E,MAAAyxE,GAAA,CAAY,UAAU,qBAAqB,CAC9C,IACF,CACD,EACDkM,GAAc,YAAcC,GAAwB,YAEpD,MAAME,GAAuBh+E,EAG3B,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC+9E,GAAA,CACC,IAAAh+E,EACA,UAAWN,GACT,uDACAhK,CACF,EACC,GAAGze,EAEJ,SAAAgpB,MAACwxE,GAAU,WAAU,SAAU,GACjC,CACD,EACDsM,GAAqB,YAAcC,GAA+B,YAElE,MAAMC,GAAyBl+E,EAG7B,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACi+E,GAAA,CACC,IAAAl+E,EACA,UAAWN,GACT,uDACAhK,CACF,EACC,GAAGze,EAEJ,SAAAgpB,MAACyxE,GAAY,WAAU,SAAU,GACnC,CACD,EACDuM,GAAuB,YACrBC,GAAiC,YAEnC,MAAMC,GAAgBp+E,aAGpB,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,SAAAuf,EAAW,SAAU,GAAGx2C,GAAS+oB,IACxDC,MAAAm+E,GAAA,CACC,SAAAn9E,EAAA,KAACo9E,GAAA,CACC,IAAAr+E,EACA,UAAWN,GACT,scACA+tB,IAAa,UACX,kIACF/3B,CACF,EACA,SAAA+3B,EACC,GAAGx2C,EAEJ,UAAAgpB,EAAA,IAAC89E,GAAqB,IACtB99E,EAAA,IAACq+E,GAAA,CACC,UAAW5+E,GACT,MACA+tB,IAAa,UACX,yFACJ,EAEC,SAAAvf,CAAA,CACH,QACC+vE,GAAuB,KAC1B,EACF,CACD,EACDE,GAAc,YAAcE,GAAwB,YAEpD,MAAME,GAAcx+E,EAGlB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACu+E,GAAA,CACC,IAAAx+E,EACA,UAAWN,GAAG,yCAA0ChK,CAAS,EAChE,GAAGze,CAAA,CACN,CACD,EACDsnG,GAAY,YAAcC,GAAsB,YAEhD,MAAMC,GAAa1+E,aAGjB,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,GAAGj3B,CAAM,EAAG+oB,IACpCiB,EAAA,KAACy9E,GAAA,CACC,IAAA1+E,EACA,UAAWN,GACT,4NACAhK,CACF,EACC,GAAGze,EAEJ,UAAAgpB,EAAA,IAAC,OAAK,WAAU,+DACd,SAAAA,MAAC0+E,GAAA,CACC,SAAA1+E,MAAC4sB,GAAM,WAAU,SAAU,EAC7B,GACF,EAEC5sB,MAAA2+E,GAAA,CAA0B,SAAA1wE,EAAS,GACtC,CACD,EACDuwE,GAAW,YAAcC,GAAqB,YAE9C,MAAMG,GAAkB9+E,EAGtB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC6+E,GAAA,CACC,IAAA9+E,EACA,UAAWN,GAAG,2BAA4BhK,CAAS,EAClD,GAAGze,CAAA,CACN,CACD,EACD4nG,GAAgB,YAAcC,GAA0B,YCnIxD,IAAIC,GAAgB,WAChB,CAACC,GAAuBC,EAAmB,EAAI5xE,GAAmB0xE,EAAa,EAC/E,CAACG,GAAkBC,EAAkB,EAAIH,GAAsBD,EAAa,EAC5EK,GAAWr/E,EAAgB,WAC7B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,gBAAAgvE,EACA,KAAAzoG,EACA,QAAS0oG,EACT,eAAAC,EACA,SAAAC,EACA,SAAAp/C,EACA,MAAAtsD,EAAQ,KACR,gBAAAwtD,EACA,KAAAm+C,EACA,GAAGC,CACJ,EAAGzoG,EACE,CAAC0oG,EAAQC,CAAS,EAAIjsF,EAAc,SAAC,IAAI,EACzC4c,EAAeC,GAAgBH,EAAeuiC,GAASgtC,EAAUhtC,CAAI,CAAC,EACtEitC,EAAmCvxE,SAAa,EAAK,EACrDwxE,EAAgBH,EAASF,GAAQ,CAAC,CAACE,EAAO,QAAQ,MAAM,EAAI,GAC5D,CAACt+C,EAAU,GAAO0+C,CAAU,EAAIpwE,GAAqB,CACzD,KAAM2vE,EACN,YAAaC,EACb,SAAUj+C,CAChB,CAAK,EACK0+C,EAAyB1xE,SAAa+yB,CAAO,EACnDztC,mBAAgB,IAAM,CACpB,MAAMqsF,EAAQN,GAAA,YAAAA,EAAQ,KACtB,GAAIM,EAAO,CACT,MAAMC,EAAQ,IAAMH,EAAWC,EAAuB,OAAO,EAC7D,OAAAC,EAAM,iBAAiB,QAASC,CAAK,EAC9B,IAAMD,EAAM,oBAAoB,QAASC,CAAK,CACtD,CACP,EAAO,CAACP,EAAQI,CAAU,CAAC,EACA9+E,EAAI,KAACi+E,GAAkB,CAAE,MAAOG,EAAiB,MAAOh+C,EAAS,SAAAjB,EAAU,SAAU,CAC1FngC,EAAG,IACjB4Q,GAAU,OACV,CACE,KAAM,SACN,KAAM,WACN,eAAgB4wB,GAAgBJ,CAAO,EAAI,QAAUA,EACrD,gBAAiBm+C,EACjB,aAAcW,GAAS9+C,CAAO,EAC9B,gBAAiBjB,EAAW,GAAK,OACjC,SAAAA,EACA,MAAAtsD,EACA,GAAG4rG,EACH,IAAKnvE,EACL,UAAWO,GAAqB75B,EAAM,UAAYvG,GAAU,CACtDA,EAAM,MAAQ,SAASA,EAAM,eAAc,CAC3D,CAAW,EACD,QAASogC,GAAqB75B,EAAM,QAAUvG,GAAU,CACtDqvG,EAAYK,GAAgB3+C,GAAgB2+C,CAAW,EAAI,GAAO,CAACA,CAAW,EAC1EN,IACFD,EAAiC,QAAUnvG,EAAM,uBAC5CmvG,EAAiC,SAASnvG,EAAM,gBAAe,EAElF,CAAW,CACF,CACF,EACDovG,GAAiC7/E,EAAG,IAClCogF,GACA,CACE,QAASV,EACT,QAAS,CAACE,EAAiC,QAC3C,KAAAjpG,EACA,MAAA9C,EACA,QAAAutD,EACA,SAAAm+C,EACA,SAAAp/C,EACA,KAAAq/C,EACA,MAAO,CAAE,UAAW,mBAAqB,EACzC,eAAgBh+C,GAAgB89C,CAAc,EAAI,GAAQA,CAC3D,CACF,CACF,EAAE,CACJ,CACH,EACAH,GAAS,YAAcL,GACvB,IAAIl3C,GAAiB,oBACjBy4C,GAAoBvgF,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,gBAAAgvE,EAAiB,WAAAhuE,EAAY,GAAGkvE,CAAc,EAAKtpG,EACrDkrB,EAAUg9E,GAAmBt3C,GAAgBw3C,CAAe,EAClE,OAAuBp/E,EAAG,IAACuR,GAAU,CAAE,QAASH,GAAcowB,GAAgBt/B,EAAQ,KAAK,GAAKA,EAAQ,QAAU,GAAM,SAA0BlC,EAAG,IACnJ4Q,GAAU,KACV,CACE,aAAcsvE,GAASh+E,EAAQ,KAAK,EACpC,gBAAiBA,EAAQ,SAAW,GAAK,OACzC,GAAGo+E,EACH,IAAKlwE,EACL,MAAO,CAAE,cAAe,OAAQ,GAAGp5B,EAAM,KAAO,CACjD,CACF,EAAE,CACJ,CACH,EACAqpG,GAAkB,YAAcz4C,GAChC,IAAIw4C,GAAeppG,GAAU,CAC3B,KAAM,CAAE,QAAAupG,EAAS,QAAAn/C,EAAS,QAAAo/C,EAAU,GAAM,eAAAlB,EAAgB,GAAGmB,CAAY,EAAGzpG,EACtE+oB,EAAMsO,SAAa,IAAI,EACvB8xE,EAAcO,GAAYt/C,CAAO,EACjCu/C,EAAcC,GAAQL,CAAO,EACnC5sF,YAAgB,IAAM,CACpB,MAAMjiB,EAAQquB,EAAI,QACZ8gF,EAAa,OAAO,iBAAiB,UAErCf,EADa,OAAO,yBAAyBe,EAAY,SAAS,EAC1C,IAC9B,GAAIV,IAAgB/+C,GAAW0+C,EAAY,CACzC,MAAMrvG,EAAQ,IAAI,MAAM,QAAS,CAAE,QAAA+vG,CAAS,GAC5C9uG,EAAM,cAAgB8vD,GAAgBJ,CAAO,EAC7C0+C,EAAW,KAAKpuG,EAAO8vD,GAAgBJ,CAAO,EAAI,GAAQA,CAAO,EACjE1vD,EAAM,cAAcjB,CAAK,CAC1B,CACF,EAAE,CAAC0vG,EAAa/+C,EAASo/C,CAAO,CAAC,EAClC,MAAMM,EAAoBzyE,SAAamzB,GAAgBJ,CAAO,EAAI,GAAQA,CAAO,EACjF,OAAuBphC,EAAG,IACxB,QACA,CACE,KAAM,WACN,cAAe,GACf,eAAgBs/E,GAAkBwB,EAAkB,QACpD,GAAGL,EACH,SAAU,GACV,IAAA1gF,EACA,MAAO,CACL,GAAG/oB,EAAM,MACT,GAAG2pG,EACH,SAAU,WACV,cAAe,OACf,QAAS,EACT,OAAQ,CACT,CACF,CACL,CACA,EACA,SAASn/C,GAAgBJ,EAAS,CAChC,OAAOA,IAAY,eACrB,CACA,SAAS8+C,GAAS9+C,EAAS,CACzB,OAAOI,GAAgBJ,CAAO,EAAI,gBAAkBA,EAAU,UAAY,WAC5E,CACA,IAAIo6C,GAAO2D,GACP4B,GAAYV,GCtJhB,MAAMlB,GAAWr/E,EAGf,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAACghF,GAAA,CACC,IAAAjhF,EACA,UAAWN,GACT,iTACAhK,CACF,EACC,GAAGze,EAEJ,SAAAgpB,EAAA,IAACihF,GAAA,CACC,UAAWxhF,GAAG,+CAA+C,EAE7D,SAAAO,MAAC4sB,GAAM,WAAU,SAAU,GAC7B,EACF,CACD,EACDuyD,GAAS,YAAc6B,GAAuB,YCxB9C,MAAME,GAAY,GAClB,QAASnwG,EAAI,EAAGA,EAAI,IAAK,EAAEA,EACvBmwG,GAAU,MAAMnwG,EAAI,KAAO,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC,EAE7C,SAASowG,GAAgB/e,EAAKtc,EAAS,EAAG,CAC7C,OAAQo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EAC7Bo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzBo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzBo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzB,IACAo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzBo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzB,IACAo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzBo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzB,IACAo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzBo7B,GAAU9e,EAAItc,EAAS,CAAC,CAAC,EACzB,IACAo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,EAC1Bo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,EAC1Bo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,EAC1Bo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,EAC1Bo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,EAC1Bo7B,GAAU9e,EAAItc,EAAS,EAAE,CAAC,GAAG,YAAW,CAChD,CC1BA,IAAIs7B,GACJ,MAAMC,GAAQ,IAAI,WAAW,EAAE,EAChB,SAASC,IAAM,CAC1B,GAAI,CAACF,GAAiB,CAClB,GAAI,OAAO,OAAW,KAAe,CAAC,OAAO,gBACzC,MAAM,IAAI,MAAM,0GAA0G,EAE9HA,GAAkB,OAAO,gBAAgB,KAAK,MAAM,CACvD,CACD,OAAOA,GAAgBC,EAAK,CAChC,CCVA,MAAME,GAAa,OAAO,OAAW,KAAe,OAAO,YAAc,OAAO,WAAW,KAAK,MAAM,EACvFC,GAAA,CAAE,WAAAD,EAAY,ECE7B,SAASE,GAAGjqG,EAASkqG,EAAK57B,EAAQ,OAC9B,GAAI07B,GAAO,YAAc,CAACE,GAAO,CAAClqG,EAC9B,OAAOgqG,GAAO,aAElBhqG,EAAUA,GAAW,GACrB,MAAMmqG,EAAOnqG,EAAQ,UAAUhE,EAAAgE,EAAQ,MAAR,YAAAhE,EAAA,KAAAgE,KAAmB8pG,KAClD,GAAIK,EAAK,OAAS,GACd,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAAA,EAAK,CAAC,EAAKA,EAAK,CAAC,EAAI,GAAQ,GAC7BA,EAAK,CAAC,EAAKA,EAAK,CAAC,EAAI,GAAQ,IAWtBR,GAAgBQ,CAAI,CAC/B,CCVA,MAAMllG,GAAS0mC,GAAa,WAAW,EAOhC,SAASy+D,GAAU,CAAE,UAAAC,EAAW,aAAAC,GAAgC,SAC/D,MAAE,UAAAt6D,GAAc2tD,KAChB,CAAE,SAAAN,EAAU,YAAAF,CAAY,EAAIN,GAAQ,EAEpC,CAAC0N,EAAUC,CAAW,EAAIz8E,EAAA,SAC9Bu8E,GAAgB,CACd,GAAIG,GAAO,EACX,MAAO,GACP,WAAY,GACZ,KAAM,aACN,YAAa,GACb,UAAW,GACX,KAAM,GACN,KAAM,CAAC,EACP,WAAY,GACZ,aAAc,EAChB,GAGI,CAACjyG,EAAQkyG,CAAS,EAAI38E,EAAA,SAAiC,CAAE,GACzD,CAAC48E,EAAcC,CAAe,EAAI78E,WAAS,EAAK,EAChD,CAAC88E,EAAeC,CAAgB,EAAI/8E,EAAA,SAAS,CAAE,KAAM,GAAI,KAAM,GAAI,EAEnEg9E,EAAqB/yG,GAAiE,CAC1F,KAAM,CAAE,KAAAmH,EAAM,MAAA9C,GAAUrE,EAAE,OACdwyG,EAAAQ,IAAS,CAAE,GAAGA,EAAM,CAAC7rG,CAAI,EAAG9C,CAAQ,IAG5C7D,EAAO2G,CAAI,GACburG,EAAkBM,GAAA,CACV,MAAAC,EAAY,CAAE,GAAGD,GACvB,cAAOC,EAAU9rG,CAAI,EACd8rG,CAAA,CACR,CACH,EAGIC,EAAqB,CAAC/rG,EAAc9C,IAAkB,CAI1D,GAHYmuG,EAAAQ,IAAS,CAAE,GAAGA,EAAM,CAAC7rG,CAAI,EAAG9C,CAAQ,IAG5C8C,IAAS,aAAc,CACzB,MAAMgsG,EAAmBn7D,EAAU,KAAYa,KAAI,KAAOx0C,CAAK,EAC3D8uG,GACFX,EAAqBQ,IAAA,CACnB,GAAGA,EACH,aAAcG,EAAiB,IAC/B,GAEN,CAGI3yG,EAAO2G,CAAI,GACburG,EAAkBM,GAAA,CACV,MAAAC,EAAY,CAAE,GAAGD,GACvB,cAAOC,EAAU9rG,CAAI,EACd8rG,CAAA,CACR,CACH,EAGIG,EAAkB,CAACj6D,EAA4ByY,IAAqB,CACxE4gD,EAAoBQ,GAAA,CACZ,MAAAK,EAAcL,EAAK,MAAqC,GAC1D,IAAAM,EAEJ,OAAI1hD,EACQ0hD,EAAA,CAAC,GAAGD,EAAal6D,CAAG,EAE9Bm6D,EAAUD,EAAY,OAAYzhF,OAAMunB,CAAG,EAGtC,CAAE,GAAG65D,EAAM,KAAMM,CAAQ,EACjC,EAGG9yG,EAAO,MACTkyG,EAAkBM,GAAA,CACV,MAAAC,EAAY,CAAE,GAAGD,GACvB,cAAOC,EAAU,KACVA,CAAA,CACR,CACH,EAGIM,EAAe,IAAe,WAClC,MAAMN,EAAoC,GAG1C,OAAKjvG,EAAAuuG,EAAS,QAAT,MAAAvuG,EAAgB,SACnBivG,EAAU,MAAQ,6BAGf3hG,EAAAihG,EAAS,aAAT,MAAAjhG,EAAqB,SACxB2hG,EAAU,WAAa,wCAGpBthF,EAAA4gF,EAAS,cAAT,MAAA5gF,EAAsB,SACzBshF,EAAU,YAAc,kCAGrBV,EAAS,aACZU,EAAU,WAAa,kCAGrB,CAACV,EAAS,MAAQA,EAAS,KAAK,SAAW,KAC7CU,EAAU,KAAO,0CAGnBP,EAAUO,CAAS,EACZ,OAAO,KAAKA,CAAS,EAAE,SAAW,GAGrCO,EAAe,MAAOxzG,GAAuB,CAG7C,GAFJA,EAAE,eAAe,EAEb,CAACuzG,IAAgB,CACFT,EAAA,CACf,KAAM,mDACN,KAAM,QACP,EACD,MACF,CAEAF,EAAgB,EAAI,EACpBE,EAAiB,CAAE,KAAM,GAAI,KAAM,EAAI,GAEnC,IACF7lG,GAAO,KAAK,GAAGqlG,EAAe,cAAgB,UAAU,iBAAiB,EAClErlG,GAAA,MAAM,yBAA2BslG,CAAQ,EAEhD,MAAMkB,EAAYlB,EAEd,IAAA1hG,EACAyhG,EACFzhG,EAASs0F,EAAYsO,CAAS,EAE9B5iG,EAASw0F,EAASoO,CAAS,EAGzB5iG,EAAO,SACQiiG,EAAA,CACf,KAAM,aAAaR,EAAe,aAAe,MAAM,eACvD,KAAM,UACP,EAEIA,GAESE,EAAA,CACV,GAAIC,GAAO,EACX,MAAO,GACP,WAAY,GACZ,KAAM,aACN,YAAa,GACb,UAAW,GACX,KAAM,GACN,KAAM,CAAC,EACP,WAAY,GACZ,aAAc,GACf,EAGCJ,GACQA,KAGKS,EAAA,CACf,KAAM,WAAWjiG,EAAO,KAAK,GAC7B,KAAM,QACP,QAEIrR,EAAO,CACPyN,GAAA,MAAM,6CAA8CzN,CAAK,EAC/CszG,EAAA,CACf,KAAM,4BAA4BtzG,CAAK,GACvC,KAAM,QACP,SACD,CACAozG,EAAgB,EAAK,CACvB,GAIA,OAAAphF,EAAA,KAAC+3E,GAAK,WAAU,2BACd,UAAC/4E,MAAAg5E,GAAA,CACC,eAACC,GAAU,WAAU,iBAClB,SAAe6I,EAAA,wBAA0B,8BAC5C,CACF,SACC3I,GACC,UAAAn4E,OAAC,QAAK,SAAUgiF,EAAc,UAAU,YACtC,UAAChiF,OAAA,OAAI,UAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,QAAQ,SAAsB,2BAC7C9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,QACH,KAAK,QACL,MAAOyG,EAAS,OAAS,GACzB,SAAUQ,EACV,YAAY,uBACZ,UAAWvyG,EAAO,MAAQ,iBAAmB,GAC/C,EACCA,EAAO,OAASgwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,MAAM,GACrE,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,aAAa,SAAkB,uBAC9C9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,aACH,KAAK,aACL,MAAOyG,EAAS,YAAc,GAC9B,SAAUQ,EACV,YAAY,mBACZ,UAAWvyG,EAAO,WAAa,iBAAmB,GACpD,EACCA,EAAO,YAAcgwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,WAAW,GAC/E,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,OAAO,SAAkB,uBACxC9jC,EAAA,KAACu8E,GAAA,CACC,MAAOwE,EAAS,KAChB,cAAgBluG,GAAU6uG,EAAmB,OAAQ7uG,CAAK,EAE1D,UAACmsB,EAAA,IAAA29E,GAAA,CAAc,UAAW3tG,EAAO,KAAO,iBAAmB,GACzD,SAACgwB,MAAAy9E,GAAA,CAAY,YAAY,uBAAuB,CAClD,UACCS,GACC,WAACl+E,EAAA,IAAAw+E,GAAA,CAAW,MAAM,aAAa,SAAU,eACxCx+E,EAAA,IAAAw+E,GAAA,CAAW,MAAM,UAAU,SAAO,aACrC,GACF,EACCxuG,EAAO,MAAQgwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,KAAK,GACnE,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,cAAc,SAAa,kBAC1C9kC,EAAA,IAACs9E,GAAA,CACC,GAAG,cACH,KAAK,cACL,MAAOyE,EAAS,aAAe,GAC/B,SAAUQ,EACV,YAAY,6BACZ,UAAW,YAAYvyG,EAAO,YAAc,iBAAmB,EAAE,GACnE,EACCA,EAAO,aAAegwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,YAAY,GACjF,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,YAAY,SAAuB,4BAClD9kC,EAAA,IAACs9E,GAAA,CACC,GAAG,YACH,KAAK,YACL,MAAOyE,EAAS,WAAa,GAC7B,SAAUQ,EACV,YAAY,0BACZ,UAAU,WACZ,GACF,EAEAvhF,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,OAAO,SAAQ,aAC9B9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,OACH,KAAK,OACL,MAAOyG,EAAS,MAAQ,GACxB,SAAUQ,EACV,YAAY,oBACd,GACF,EAEAvhF,OAAC,MAAI,WAAU,YACb,UAAAhB,MAAC8kC,IAAM,SAAO,YACd9jC,OAAC,MAAI,WAAU,iBACb,UAACA,OAAA,OAAI,UAAU,8BACb,UAAAhB,EAAA,IAACm/E,GAAA,CACC,GAAG,SACH,UAAS3rG,EAAAuuG,EAAS,OAAT,YAAAvuG,EAAe,SAAS,YAAa,GAC9C,gBAAkB4tD,GAAYwhD,EAAgB,SAAUxhD,CAAkB,EAC5E,QACC0D,GAAM,SAAQ,SAAS,UAAU,iBAAiB,SAAM,YAC3D,EACA9jC,OAAC,MAAI,WAAU,8BACb,UAAAhB,EAAA,IAACm/E,GAAA,CACC,GAAG,WACH,UAASr+F,EAAAihG,EAAS,OAAT,YAAAjhG,EAAe,SAAS,cAAe,GAChD,gBAAkBsgD,GAAYwhD,EAAgB,WAAYxhD,CAAkB,EAC9E,QACC0D,GAAM,SAAQ,WAAW,UAAU,iBAAiB,SAAQ,cAC/D,GACF,EACC90D,EAAO,MAAQgwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,KAAK,GACnE,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,aAAa,SAAM,WAClC9jC,EAAA,KAACu8E,GAAA,CACC,MAAOwE,EAAS,WAChB,cAAgBluG,GAAU6uG,EAAmB,aAAc7uG,CAAK,EAEhE,UAACmsB,EAAA,IAAA29E,GAAA,CAAc,UAAW3tG,EAAO,WAAa,iBAAmB,GAC/D,SAACgwB,MAAAy9E,GAAA,CAAY,YAAY,uBAAuB,CAClD,SACCS,GACE,UAAA12D,EAAU,IAAK5D,GACb5jB,EAAA,IAAAw+E,GAAA,CAA6B,MAAO56D,EAAS,GAC3C,SAASA,EAAA,MADKA,EAAS,EAE1B,CACD,EACH,GACF,EACC5zC,EAAO,YAAcgwB,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,WAAW,GAC/E,EAEAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,QAAQ,SAA0B,+BACjD9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,QACH,KAAK,QACL,MAAOyG,EAAS,OAAS,GACzB,SAAUQ,EACV,YAAY,iBACd,GACF,EAEAvhF,OAACo4E,GAAW,WAAU,4BACpB,UAAAp5E,EAAA,IAAC8sB,EAAA,CACC,KAAK,SACL,SAAUq1D,EACV,UAAU,kCAET,SAAAA,EAAe,cAAiBL,EAAe,gBAAkB,sBACpE,EAECO,EAAc,MACZriF,MAAA,KAAE,UAAW,WAAWqiF,EAAc,OAAS,QAAU,eAAiB,gBAAgB,GACxF,WAAc,KACjB,GAEJ,GACF,CACF,EACF,GAEJ,CCpWA,MAAM5lG,GAAS0mC,GAAa,YAAY,EAGlC+/D,GAAY,OAMLC,GAAwC,CAAC,CAAE,QAAAC,KAAc,CACpE,KAAM,CAACC,EAAUC,CAAW,EAAI/9E,WAAS,EAAE,EACrC,CAACv2B,EAAOu0G,CAAQ,EAAIh+E,WAAS,EAAK,EAClC,CAACi+E,EAAUC,CAAW,EAAIl+E,WAAS,CAAC,EAEpCy9E,EAAgBxzG,GAAuB,CAC3CA,EAAE,eAAe,EAEb6zG,IAAaH,IACfzmG,GAAO,KAAK,kCAAkC,EAG/B,uBAAQ,qBAAsB,MAAM,EAG3C2mG,MAER3mG,GAAO,KAAK,+CAA+C,EAC3D8mG,EAAS,EAAI,EACbE,EAAYD,EAAW,CAAC,EACxBF,EAAY,EAAE,EAChB,EAGF,aACG,MAAI,WAAU,gDACb,SAACtiF,EAAA,KAAA+3E,GAAA,CAAK,UAAU,kBACd,UAAC/3E,OAAAg4E,GAAA,CAAW,UAAU,YACpB,UAAAh5E,EAAA,IAAC,MAAI,WAAU,wCACb,SAAAA,MAAC,MAAI,WAAU,gCACb,SAAAA,EAAA,IAAC0jF,GAAK,WAAU,oBAAqB,EACvC,GACF,EACC1jF,EAAA,IAAAi5E,GAAA,CAAU,UAAU,sCAAsC,SAE3D,yBACCj5E,EAAA,IAAAk5E,GAAA,CAAgB,UAAU,cAAc,SAEzC,iFACF,EACAl5E,EAAA,IAACm5E,IACC,SAACn5E,MAAA,QAAK,SAAUgjF,EACd,SAAAhiF,EAAA,KAAC,MAAI,WAAU,YACb,UAACA,OAAA,OAAI,UAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,WAAW,SAAQ,aAClC9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,WACH,KAAK,SACL,UAAU,UACV,QAAQ,SACR,UAAW,EACX,MAAO+H,EACP,SAAW7zG,GAAM,CAEXA,EAAE,OAAO,MAAM,QAAU,IACf8zG,EAAA9zG,EAAE,OAAO,KAAK,EACtBR,KAAgB,EAAK,EAE7B,EACA,UAAW,wCAAwCA,EAAQ,iBAAmB,EAAE,GAChF,YAAY,OACd,EACCA,GACCgyB,EAAA,KAAC,IAAE,WAAU,mCAAmC,iCACzBwiF,EAAW,EAAI,GAAGA,CAAQ,wBAA0B,IAC3E,GAEJ,QACC12D,EAAO,MAAK,SAAS,UAAU,sBAAsB,SAEtD,iBACF,EACF,GACF,EACF,EACF,EAEJ,EClFM62D,GAAkB,CACtB,YAAa,0EACf,EAKA,eAAsBC,IAAmD,CACnE,IAEkB,CAAC,aAAa,QAAQ,+BAA+B,IAEvE,aAAa,WAAW,mBAAmB,EAC9B,qBAAQ,gCAAiC,MAAM,EAC5D,QAAQ,IAAI,iDAAiD,GAI/D,MAAMxzG,EAAW,MAAM,MAAM,GAAGuzG,GAAgB,WAAW,wBAAwB,EAE/E,IAACvzG,EAAS,GACJ,qBAAM,yCAA0CA,EAAS,MAAM,EAChE,GAGH,MAAAyzG,EAAe,MAAMzzG,EAAS,OAC9B0zG,EAAkBD,EAAe,OAAO,OAAOA,CAAY,EAAwB,GAEzF,eAAQ,IAAI,yBAAyBC,EAAgB,MAAM,kBAAkB,EAEtEA,EAAgB,KAAK,CAACxuG,EAAmBC,IAC9C,IAAI,KAAKA,EAAE,SAAS,EAAE,UAAY,IAAI,KAAKD,EAAE,SAAS,EAAE,QAAQ,SAG3DtG,EAAO,CACN,qBAAM,8BAA+BA,CAAK,EAC3C,EACT,CACF,CAcA,eAAsB+0G,GAAmBh2F,EAAmD,WACpF,MAAAi2F,EAAgBj2F,EAAO,eAAiBA,EAAO,SACrD,GAAI,CAACi2F,EACG,UAAI,MAAM,0BAA0B,EAItC,MAAAC,EAAgBD,EAAc,MAAM,kBAAkB,EAItD3/D,EAA2B,CAC/B,GAJe4/D,EAAgBA,EAAc,CAAC,EAAI,SAAS,KAAK,IAAK,IAKrE,KAAMl2F,EAAO,KACb,cAAava,EAAAua,EAAO,cAAP,YAAAva,EAAoB,SAAU,UAC3C,UAASsN,EAAAiN,EAAO,UAAP,YAAAjN,EAAgB,SAAU,GACnC,SAAUkjG,EACV,aAAcA,EACd,cAAa7iF,EAAApT,EAAO,cAAP,YAAAoT,EAAoB,SAAU,GAC3C,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,WAAY,CACV,OAAQ,WACR,YAAa,IAAI,KAAK,EAAE,YAAY,CACtC,GAUE,KANa,MAAM,MAAM,GAAGwiF,GAAgB,WAAW,qBAAqBt/D,EAAS,EAAE,QAAS,CAClG,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAUA,CAAQ,EAC9B,GAEa,GACN,UAAI,MAAM,+DAA+D,EAGjF,eAAQ,IAAI,yCAAyC,EAGjD,OAAO,OAAW,KAEb,qBAAc,IAAI,YAAY,wBAAyB,CAC5D,OAAQ,CACN,QAAS,oCACT,YAAa,gEACb,KAAM,SACR,CACD,EAAC,EAGGA,CACT,CAKA,eAAsB6/D,GAAqBC,EAAgC,CAMrE,KAJa,MAAM,MAAM,GAAGR,GAAgB,WAAW,qBAAqBQ,CAAO,QAAS,CAC9F,OAAQ,SACT,GAEa,GACN,UAAI,MAAM,kCAAkC,EAGpD,QAAQ,IAAI,uCAAuC,CACrD,CCpHO,SAASC,IAAqC,CAC/C,IACI,MAAAC,EAAS,aAAa,QAAQ,mBAAmB,EACvD,OAAOA,EAAS,KAAK,MAAMA,CAAM,EAAI,SAC9Br1G,EAAO,CACN,qBAAM,kDAAmDA,CAAK,EAC/D,EACT,CACF,CAEO,SAASs1G,GAAYphB,EAAiC,CACvD,IACF,aAAa,QAAQ,oBAAqB,KAAK,UAAUA,CAAO,CAAC,EACjE,QAAQ,IAAI,sBAAsBA,EAAQ,MAAM,uBAAuB,QAChEl0F,EAAO,CACN,cAAM,qDAAsDA,CAAK,CAC3E,CACF,CAgCA,eAAsBu1G,GAAaJ,EAAgC,CAEjE,MAAMK,EADUJ,KACe,IAC7B19F,KAAM,KAAOy9F,EACT,CAAE,GAAGz9F,EAAO,WAAY,CAAE,OAAQ,UAA+B,YAAa,KAC9E,EAAAA,CAAA,EAGN49F,GAAYE,CAAc,EAClB,YAAI,6BAA6BL,CAAO,YAAY,CAC9D,CAGO,MAAMM,GAAwBF,GChD9B,SAASG,GAAOzqF,EAAU,CAC/B,MAAM0qF,EAAS,OAAO,UAAU,SAAS,KAAK1qF,CAAQ,EAGtD,OACEA,aAAoB,MACnB,OAAOA,GAAa,UAAY0qF,IAAW,gBAGrC,IAAI1qF,EAAS,YAAY,CAACA,CAAQ,EAEzC,OAAOA,GAAa,UACpB0qF,IAAW,mBACX,OAAO1qF,GAAa,UACpB0qF,IAAW,kBAGJ,IAAI,KAAK1qF,CAAQ,EAGjB,IAAI,KAAK,GAAG,CAEvB,CCxBO,SAAS2qF,GAAc5jG,EAAMnN,EAAO,CACzC,OAAImN,aAAgB,KACX,IAAIA,EAAK,YAAYnN,CAAK,EAE1B,IAAI,KAAKA,CAAK,CAEzB,CCwCO,MAAMgxG,GAAqB,OAOrBC,GAAoB,MCnFjC,IAAIC,GAAiB,GAEd,SAASC,IAAoB,CAClC,OAAOD,EACT,CC6BO,SAASE,GAAYjkG,EAAMxJ,EAAS,aACzC,MAAMutG,EAAiBC,KACjBE,GACJ1tG,GAAA,YAAAA,EAAS,iBACTsJ,GAAAtN,EAAAgE,GAAA,YAAAA,EAAS,SAAT,YAAAhE,EAAiB,UAAjB,YAAAsN,EAA0B,eAC1BikG,EAAe,gBACflnE,GAAA1c,EAAA4jF,EAAe,SAAf,YAAA5jF,EAAuB,UAAvB,YAAA0c,EAAgC,eAChC,EAEIsnE,EAAQT,GAAO1jG,CAAI,EACnB2nC,EAAMw8D,EAAM,SACZC,GAAQz8D,EAAMu8D,EAAe,EAAI,GAAKv8D,EAAMu8D,EAElD,OAAAC,EAAM,QAAQA,EAAM,QAAS,EAAGC,CAAI,EACpCD,EAAM,SAAS,EAAG,EAAG,EAAG,CAAC,EAClBA,CACT,CCzBO,SAASE,GAAerkG,EAAM,CACnC,OAAOikG,GAAYjkG,EAAM,CAAE,aAAc,CAAG,EAC9C,CCAO,SAASskG,GAAetkG,EAAM,CACnC,MAAMmkG,EAAQT,GAAO1jG,CAAI,EACnBukG,EAAOJ,EAAM,cAEbK,EAA4BZ,GAAc5jG,EAAM,CAAC,EACvDwkG,EAA0B,YAAYD,EAAO,EAAG,EAAG,CAAC,EACpDC,EAA0B,SAAS,EAAG,EAAG,EAAG,CAAC,EAC7C,MAAMC,EAAkBJ,GAAeG,CAAyB,EAE1DE,EAA4Bd,GAAc5jG,EAAM,CAAC,EACvD0kG,EAA0B,YAAYH,EAAM,EAAG,CAAC,EAChDG,EAA0B,SAAS,EAAG,EAAG,EAAG,CAAC,EAC7C,MAAMC,EAAkBN,GAAeK,CAAyB,EAEhE,OAAIP,EAAM,QAAO,GAAMM,EAAgB,QAAO,EACrCF,EAAO,EACLJ,EAAM,QAAS,GAAIQ,EAAgB,QAAO,EAC5CJ,EAEAA,EAAO,CAElB,CCzBO,SAASK,GAAW5kG,EAAM,CAC/B,MAAMmkG,EAAQT,GAAO1jG,CAAI,EACzB,OAAAmkG,EAAM,SAAS,EAAG,EAAG,EAAG,CAAC,EAClBA,CACT,CCbO,SAASU,GAAgC7kG,EAAM,CACpD,MAAMmkG,EAAQT,GAAO1jG,CAAI,EACnB8kG,EAAU,IAAI,KAClB,KAAK,IACHX,EAAM,YAAa,EACnBA,EAAM,SAAU,EAChBA,EAAM,QAAS,EACfA,EAAM,SAAU,EAChBA,EAAM,WAAY,EAClBA,EAAM,WAAY,EAClBA,EAAM,gBAAiB,CACxB,CACL,EACE,OAAAW,EAAQ,eAAeX,EAAM,YAAa,GACnC,CAACnkG,EAAO,CAAC8kG,CAClB,CCQO,SAASC,GAAyBC,EAAUC,EAAW,CAC5D,MAAMC,EAAiBN,GAAWI,CAAQ,EACpCG,EAAkBP,GAAWK,CAAS,EAEtCG,EACJ,CAACF,EAAiBL,GAAgCK,CAAc,EAC5DG,EACJ,CAACF,EAAkBN,GAAgCM,CAAe,EAKpE,OAAO,KAAK,OAAOC,EAAgBC,GAAkBvB,EAAiB,CACxE,CCtBO,SAASwB,GAAmBtlG,EAAM,CACvC,MAAMukG,EAAOD,GAAetkG,CAAI,EAC1BulG,EAAkB3B,GAAc5jG,EAAM,CAAC,EAC7C,OAAAulG,EAAgB,YAAYhB,EAAM,EAAG,CAAC,EACtCgB,EAAgB,SAAS,EAAG,EAAG,EAAG,CAAC,EAC5BlB,GAAekB,CAAe,CACvC,CCDO,SAASC,GAAO3yG,EAAO,CAC5B,OACEA,aAAiB,MAChB,OAAOA,GAAU,UAChB,OAAO,UAAU,SAAS,KAAKA,CAAK,IAAM,eAEhD,CCFO,SAAS4yG,GAAQzlG,EAAM,CAC5B,GAAI,CAACwlG,GAAOxlG,CAAI,GAAK,OAAOA,GAAS,SACnC,MAAO,GAET,MAAMmkG,EAAQT,GAAO1jG,CAAI,EACzB,MAAO,CAAC,MAAM,OAAOmkG,CAAK,CAAC,CAC7B,CCnBO,SAASuB,GAAY1lG,EAAM,CAChC,MAAM2lG,EAAYjC,GAAO1jG,CAAI,EACvBmkG,EAAQP,GAAc5jG,EAAM,CAAC,EACnC,OAAAmkG,EAAM,YAAYwB,EAAU,YAAW,EAAI,EAAG,CAAC,EAC/CxB,EAAM,SAAS,EAAG,EAAG,EAAG,CAAC,EAClBA,CACT,CC7BA,MAAMyB,GAAuB,CAC3B,iBAAkB,CAChB,IAAK,qBACL,MAAO,6BACR,EAED,SAAU,CACR,IAAK,WACL,MAAO,mBACR,EAED,YAAa,gBAEb,iBAAkB,CAChB,IAAK,qBACL,MAAO,6BACR,EAED,SAAU,CACR,IAAK,WACL,MAAO,mBACR,EAED,YAAa,CACX,IAAK,eACL,MAAO,uBACR,EAED,OAAQ,CACN,IAAK,SACL,MAAO,iBACR,EAED,MAAO,CACL,IAAK,QACL,MAAO,gBACR,EAED,YAAa,CACX,IAAK,eACL,MAAO,uBACR,EAED,OAAQ,CACN,IAAK,SACL,MAAO,iBACR,EAED,aAAc,CACZ,IAAK,gBACL,MAAO,wBACR,EAED,QAAS,CACP,IAAK,UACL,MAAO,kBACR,EAED,YAAa,CACX,IAAK,eACL,MAAO,uBACR,EAED,OAAQ,CACN,IAAK,SACL,MAAO,iBACR,EAED,WAAY,CACV,IAAK,cACL,MAAO,sBACR,EAED,aAAc,CACZ,IAAK,gBACL,MAAO,wBACR,CACH,EAEaC,GAAiB,CAACpjC,EAAOhxD,EAAOjb,IAAY,CACvD,IAAI6I,EAEJ,MAAMymG,EAAaF,GAAqBnjC,CAAK,EAS7C,OARI,OAAOqjC,GAAe,SACxBzmG,EAASymG,EACAr0F,IAAU,EACnBpS,EAASymG,EAAW,IAEpBzmG,EAASymG,EAAW,MAAM,QAAQ,YAAar0F,EAAM,SAAQ,CAAE,EAG7Djb,GAAA,MAAAA,EAAS,UACPA,EAAQ,YAAcA,EAAQ,WAAa,EACtC,MAAQ6I,EAERA,EAAS,OAIbA,CACT,ECpGO,SAAS0mG,GAAkBjuG,EAAM,CACtC,MAAO,CAACtB,EAAU,KAAO,CAEvB,MAAMwuB,EAAQxuB,EAAQ,MAAQ,OAAOA,EAAQ,KAAK,EAAIsB,EAAK,aAE3D,OADeA,EAAK,QAAQktB,CAAK,GAAKltB,EAAK,QAAQA,EAAK,YAAY,CAExE,CACA,CCLA,MAAMkuG,GAAc,CAClB,KAAM,mBACN,KAAM,aACN,OAAQ,WACR,MAAO,YACT,EAEMC,GAAc,CAClB,KAAM,iBACN,KAAM,cACN,OAAQ,YACR,MAAO,QACT,EAEMC,GAAkB,CACtB,KAAM,yBACN,KAAM,yBACN,OAAQ,qBACR,MAAO,oBACT,EAEaC,GAAa,CACxB,KAAMJ,GAAkB,CACtB,QAASC,GACT,aAAc,MAClB,CAAG,EAED,KAAMD,GAAkB,CACtB,QAASE,GACT,aAAc,MAClB,CAAG,EAED,SAAUF,GAAkB,CAC1B,QAASG,GACT,aAAc,MAClB,CAAG,CACH,ECtCME,GAAuB,CAC3B,SAAU,qBACV,UAAW,mBACX,MAAO,eACP,SAAU,kBACV,SAAU,cACV,MAAO,GACT,EAEaC,GAAiB,CAAC5jC,EAAO0hC,EAAOmC,EAAWpoG,IACtDkoG,GAAqB3jC,CAAK,EC+BrB,SAAS8jC,GAAgBzuG,EAAM,CACpC,MAAO,CAACjF,EAAO2D,IAAY,CACzB,MAAM0qB,EAAU1qB,GAAA,MAAAA,EAAS,QAAU,OAAOA,EAAQ,OAAO,EAAI,aAE7D,IAAIgwG,EACJ,GAAItlF,IAAY,cAAgBppB,EAAK,iBAAkB,CACrD,MAAM2uG,EAAe3uG,EAAK,wBAA0BA,EAAK,aACnDktB,EAAQxuB,GAAA,MAAAA,EAAS,MAAQ,OAAOA,EAAQ,KAAK,EAAIiwG,EAEvDD,EACE1uG,EAAK,iBAAiBktB,CAAK,GAAKltB,EAAK,iBAAiB2uG,CAAY,CAC1E,KAAW,CACL,MAAMA,EAAe3uG,EAAK,aACpBktB,EAAQxuB,GAAA,MAAAA,EAAS,MAAQ,OAAOA,EAAQ,KAAK,EAAIsB,EAAK,aAE5D0uG,EAAc1uG,EAAK,OAAOktB,CAAK,GAAKltB,EAAK,OAAO2uG,CAAY,CAC7D,CACD,MAAMx4F,EAAQnW,EAAK,iBAAmBA,EAAK,iBAAiBjF,CAAK,EAAIA,EAGrE,OAAO2zG,EAAYv4F,CAAK,CAC5B,CACA,CC7DA,MAAMy4F,GAAY,CAChB,OAAQ,CAAC,IAAK,GAAG,EACjB,YAAa,CAAC,KAAM,IAAI,EACxB,KAAM,CAAC,gBAAiB,aAAa,CACvC,EAEMC,GAAgB,CACpB,OAAQ,CAAC,IAAK,IAAK,IAAK,GAAG,EAC3B,YAAa,CAAC,KAAM,KAAM,KAAM,IAAI,EACpC,KAAM,CAAC,cAAe,cAAe,cAAe,aAAa,CACnE,EAMMC,GAAc,CAClB,OAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EACnE,YAAa,CACX,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACD,EAED,KAAM,CACJ,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,UACD,CACH,EAEMC,GAAY,CAChB,OAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EAC1C,MAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAChD,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EAC7D,KAAM,CACJ,SACA,SACA,UACA,YACA,WACA,SACA,UACD,CACH,EAEMC,GAAkB,CACtB,OAAQ,CACN,GAAI,IACJ,GAAI,IACJ,SAAU,KACV,KAAM,IACN,QAAS,UACT,UAAW,YACX,QAAS,UACT,MAAO,OACR,EACD,YAAa,CACX,GAAI,KACJ,GAAI,KACJ,SAAU,WACV,KAAM,OACN,QAAS,UACT,UAAW,YACX,QAAS,UACT,MAAO,OACR,EACD,KAAM,CACJ,GAAI,OACJ,GAAI,OACJ,SAAU,WACV,KAAM,OACN,QAAS,UACT,UAAW,YACX,QAAS,UACT,MAAO,OACR,CACH,EAEMC,GAA4B,CAChC,OAAQ,CACN,GAAI,IACJ,GAAI,IACJ,SAAU,KACV,KAAM,IACN,QAAS,iBACT,UAAW,mBACX,QAAS,iBACT,MAAO,UACR,EACD,YAAa,CACX,GAAI,KACJ,GAAI,KACJ,SAAU,WACV,KAAM,OACN,QAAS,iBACT,UAAW,mBACX,QAAS,iBACT,MAAO,UACR,EACD,KAAM,CACJ,GAAI,OACJ,GAAI,OACJ,SAAU,WACV,KAAM,OACN,QAAS,iBACT,UAAW,mBACX,QAAS,iBACT,MAAO,UACR,CACH,EAEMC,GAAgB,CAACC,EAAa/oG,IAAa,CAC/C,MAAMw4D,EAAS,OAAOuwC,CAAW,EAS3BC,EAASxwC,EAAS,IACxB,GAAIwwC,EAAS,IAAMA,EAAS,GAC1B,OAAQA,EAAS,GAAE,CACjB,IAAK,GACH,OAAOxwC,EAAS,KAClB,IAAK,GACH,OAAOA,EAAS,KAClB,IAAK,GACH,OAAOA,EAAS,IACnB,CAEH,OAAOA,EAAS,IAClB,EAEaywC,GAAW,CACxB,cAAEH,GAEA,IAAKT,GAAgB,CACnB,OAAQG,GACR,aAAc,MAClB,CAAG,EAED,QAASH,GAAgB,CACvB,OAAQI,GACR,aAAc,OACd,iBAAmBS,GAAYA,EAAU,CAC7C,CAAG,EAED,MAAOb,GAAgB,CACrB,OAAQK,GACR,aAAc,MAClB,CAAG,EAED,IAAKL,GAAgB,CACnB,OAAQM,GACR,aAAc,MAClB,CAAG,EAED,UAAWN,GAAgB,CACzB,OAAQO,GACR,aAAc,OACd,iBAAkBC,GAClB,uBAAwB,MAC5B,CAAG,CACH,EC1LO,SAASM,GAAavvG,EAAM,CACjC,MAAO,CAACqhB,EAAQ3iB,EAAU,KAAO,CAC/B,MAAMwuB,EAAQxuB,EAAQ,MAEhB8wG,EACHtiF,GAASltB,EAAK,cAAcktB,CAAK,GAClCltB,EAAK,cAAcA,EAAK,iBAAiB,EACrCyvG,EAAcpuF,EAAO,MAAMmuF,CAAY,EAE7C,GAAI,CAACC,EACH,OAAO,KAET,MAAMC,EAAgBD,EAAY,CAAC,EAE7BE,EACHziF,GAASltB,EAAK,cAAcktB,CAAK,GAClCltB,EAAK,cAAcA,EAAK,iBAAiB,EAErC1D,EAAM,MAAM,QAAQqzG,CAAa,EACnCC,GAAUD,EAAgBxlE,GAAYA,EAAQ,KAAKulE,CAAa,CAAC,EAEjEG,GAAQF,EAAgBxlE,GAAYA,EAAQ,KAAKulE,CAAa,CAAC,EAEnE,IAAI30G,EAEJA,EAAQiF,EAAK,cAAgBA,EAAK,cAAc1D,CAAG,EAAIA,EACvDvB,EAAQ2D,EAAQ,cAEZA,EAAQ,cAAc3D,CAAK,EAC3BA,EAEJ,MAAMmxB,EAAO7K,EAAO,MAAMquF,EAAc,MAAM,EAE9C,MAAO,CAAE,MAAA30G,EAAO,KAAAmxB,EACpB,CACA,CAEA,SAAS2jF,GAAQvvG,EAAQs9B,EAAW,CAClC,UAAWthC,KAAOgE,EAChB,GACE,OAAO,UAAU,eAAe,KAAKA,EAAQhE,CAAG,GAChDshC,EAAUt9B,EAAOhE,CAAG,CAAC,EAErB,OAAOA,CAIb,CAEA,SAASszG,GAAUjkG,EAAOiyB,EAAW,CACnC,QAASthC,EAAM,EAAGA,EAAMqP,EAAM,OAAQrP,IACpC,GAAIshC,EAAUjyB,EAAMrP,CAAG,CAAC,EACtB,OAAOA,CAIb,CCxDO,SAASwzG,GAAoB9vG,EAAM,CACxC,MAAO,CAACqhB,EAAQ3iB,EAAU,KAAO,CAC/B,MAAM+wG,EAAcpuF,EAAO,MAAMrhB,EAAK,YAAY,EAClD,GAAI,CAACyvG,EAAa,OAAO,KACzB,MAAMC,EAAgBD,EAAY,CAAC,EAE7BM,EAAc1uF,EAAO,MAAMrhB,EAAK,YAAY,EAClD,GAAI,CAAC+vG,EAAa,OAAO,KACzB,IAAIh1G,EAAQiF,EAAK,cACbA,EAAK,cAAc+vG,EAAY,CAAC,CAAC,EACjCA,EAAY,CAAC,EAGjBh1G,EAAQ2D,EAAQ,cAAgBA,EAAQ,cAAc3D,CAAK,EAAIA,EAE/D,MAAMmxB,EAAO7K,EAAO,MAAMquF,EAAc,MAAM,EAE9C,MAAO,CAAE,MAAA30G,EAAO,KAAAmxB,EACpB,CACA,CChBA,MAAM8jF,GAA4B,wBAC5BC,GAA4B,OAE5BC,GAAmB,CACvB,OAAQ,UACR,YAAa,6DACb,KAAM,4DACR,EACMC,GAAmB,CACvB,IAAK,CAAC,MAAO,SAAS,CACxB,EAEMC,GAAuB,CAC3B,OAAQ,WACR,YAAa,YACb,KAAM,gCACR,EACMC,GAAuB,CAC3B,IAAK,CAAC,KAAM,KAAM,KAAM,IAAI,CAC9B,EAEMC,GAAqB,CACzB,OAAQ,eACR,YAAa,sDACb,KAAM,2FACR,EACMC,GAAqB,CACzB,OAAQ,CACN,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACD,EAED,IAAK,CACH,OACA,MACA,QACA,OACA,QACA,QACA,QACA,OACA,MACA,MACA,MACA,KACD,CACH,EAEMC,GAAmB,CACvB,OAAQ,YACR,MAAO,2BACP,YAAa,kCACb,KAAM,8DACR,EACMC,GAAmB,CACvB,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EACxD,IAAK,CAAC,OAAQ,MAAO,OAAQ,MAAO,OAAQ,MAAO,MAAM,CAC3D,EAEMC,GAAyB,CAC7B,OAAQ,6DACR,IAAK,gFACP,EACMC,GAAyB,CAC7B,IAAK,CACH,GAAI,MACJ,GAAI,MACJ,SAAU,OACV,KAAM,OACN,QAAS,WACT,UAAW,aACX,QAAS,WACT,MAAO,QACR,CACH,EAEar2G,GAAQ,CACnB,cAAew1G,GAAoB,CACjC,aAAcE,GACd,aAAcC,GACd,cAAgBl1G,GAAU,SAASA,EAAO,EAAE,CAChD,CAAG,EAED,IAAKw0G,GAAa,CAChB,cAAeW,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,QAASZ,GAAa,CACpB,cAAea,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,MACnB,cAAgBl6F,GAAUA,EAAQ,CACtC,CAAG,EAED,MAAOo5F,GAAa,CAClB,cAAee,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,IAAKhB,GAAa,CAChB,cAAeiB,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,UAAWlB,GAAa,CACtB,cAAemB,GACf,kBAAmB,MACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,CACH,ECrHaC,GAAO,CAClB,KAAM,QACN,eAAgB7C,GAChB,WAAYM,GACZ,eAAgBE,GAChB,SAAUc,GACV,MAAO/0G,GACP,QAAS,CACP,aAAc,EACd,sBAAuB,CACxB,CACH,ECFO,SAASu2G,GAAa3oG,EAAM,CACjC,MAAMmkG,EAAQT,GAAO1jG,CAAI,EAGzB,OAFa+kG,GAAyBZ,EAAOuB,GAAYvB,CAAK,CAAC,EACtC,CAE3B,CCFO,SAASyE,GAAW5oG,EAAM,CAC/B,MAAMmkG,EAAQT,GAAO1jG,CAAI,EACnBokG,EAAO,CAACC,GAAeF,CAAK,EAAI,CAACmB,GAAmBnB,CAAK,EAK/D,OAAO,KAAK,MAAMC,EAAOP,EAAkB,EAAI,CACjD,CCWO,SAASgF,GAAY7oG,EAAMxJ,EAAS,aACzC,MAAM2tG,EAAQT,GAAO1jG,CAAI,EACnBukG,EAAOJ,EAAM,cAEbJ,EAAiBC,KACjB8E,GACJtyG,GAAA,YAAAA,EAAS,0BACTsJ,GAAAtN,EAAAgE,GAAA,YAAAA,EAAS,SAAT,YAAAhE,EAAiB,UAAjB,YAAAsN,EAA0B,wBAC1BikG,EAAe,yBACflnE,GAAA1c,EAAA4jF,EAAe,SAAf,YAAA5jF,EAAuB,UAAvB,YAAA0c,EAAgC,wBAChC,EAEIksE,EAAsBnF,GAAc5jG,EAAM,CAAC,EACjD+oG,EAAoB,YAAYxE,EAAO,EAAG,EAAGuE,CAAqB,EAClEC,EAAoB,SAAS,EAAG,EAAG,EAAG,CAAC,EACvC,MAAMtE,EAAkBR,GAAY8E,EAAqBvyG,CAAO,EAE1DwyG,EAAsBpF,GAAc5jG,EAAM,CAAC,EACjDgpG,EAAoB,YAAYzE,EAAM,EAAGuE,CAAqB,EAC9DE,EAAoB,SAAS,EAAG,EAAG,EAAG,CAAC,EACvC,MAAMrE,EAAkBV,GAAY+E,EAAqBxyG,CAAO,EAEhE,OAAI2tG,EAAM,QAAO,GAAMM,EAAgB,QAAO,EACrCF,EAAO,EACLJ,EAAM,QAAS,GAAIQ,EAAgB,QAAO,EAC5CJ,EAEAA,EAAO,CAElB,CC7BO,SAAS0E,GAAgBjpG,EAAMxJ,EAAS,aAC7C,MAAMutG,EAAiBC,KACjB8E,GACJtyG,GAAA,YAAAA,EAAS,0BACTsJ,GAAAtN,EAAAgE,GAAA,YAAAA,EAAS,SAAT,YAAAhE,EAAiB,UAAjB,YAAAsN,EAA0B,wBAC1BikG,EAAe,yBACflnE,GAAA1c,EAAA4jF,EAAe,SAAf,YAAA5jF,EAAuB,UAAvB,YAAA0c,EAAgC,wBAChC,EAEI0nE,EAAOsE,GAAY7oG,EAAMxJ,CAAO,EAChC0yG,EAAYtF,GAAc5jG,EAAM,CAAC,EACvC,OAAAkpG,EAAU,YAAY3E,EAAM,EAAGuE,CAAqB,EACpDI,EAAU,SAAS,EAAG,EAAG,EAAG,CAAC,EACfjF,GAAYiF,EAAW1yG,CAAO,CAE9C,CCdO,SAAS2yG,GAAQnpG,EAAMxJ,EAAS,CACrC,MAAM2tG,EAAQT,GAAO1jG,CAAI,EACnBokG,EAAO,CAACH,GAAYE,EAAO3tG,CAAO,EAAI,CAACyyG,GAAgB9E,EAAO3tG,CAAO,EAK3E,OAAO,KAAK,MAAM4tG,EAAOP,EAAkB,EAAI,CACjD,CCtDO,SAASuF,GAAgB1yC,EAAQ2yC,EAAc,CACpD,MAAMC,EAAO5yC,EAAS,EAAI,IAAM,GAC1B7lE,EAAS,KAAK,IAAI6lE,CAAM,EAAE,SAAQ,EAAG,SAAS2yC,EAAc,GAAG,EACrE,OAAOC,EAAOz4G,CAChB,CCWO,MAAM04G,GAAkB,CAE7B,EAAEvpG,EAAMyiE,EAAO,CAUb,MAAM+mC,EAAaxpG,EAAK,cAElBukG,EAAOiF,EAAa,EAAIA,EAAa,EAAIA,EAC/C,OAAOJ,GAAgB3mC,IAAU,KAAO8hC,EAAO,IAAMA,EAAM9hC,EAAM,MAAM,CACxE,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,MAAMgnC,EAAQzpG,EAAK,WACnB,OAAOyiE,IAAU,IAAM,OAAOgnC,EAAQ,CAAC,EAAIL,GAAgBK,EAAQ,EAAG,CAAC,CACxE,EAGD,EAAEzpG,EAAMyiE,EAAO,CACb,OAAO2mC,GAAgBppG,EAAK,QAAS,EAAEyiE,EAAM,MAAM,CACpD,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,MAAMinC,EAAqB1pG,EAAK,SAAQ,EAAK,IAAM,EAAI,KAAO,KAE9D,OAAQyiE,EAAK,CACX,IAAK,IACL,IAAK,KACH,OAAOinC,EAAmB,cAC5B,IAAK,MACH,OAAOA,EACT,IAAK,QACH,OAAOA,EAAmB,CAAC,EAC7B,IAAK,OACL,QACE,OAAOA,IAAuB,KAAO,OAAS,MACjD,CACF,EAGD,EAAE1pG,EAAMyiE,EAAO,CACb,OAAO2mC,GAAgBppG,EAAK,SAAU,EAAG,IAAM,GAAIyiE,EAAM,MAAM,CAChE,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,OAAO2mC,GAAgBppG,EAAK,SAAU,EAAEyiE,EAAM,MAAM,CACrD,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,OAAO2mC,GAAgBppG,EAAK,WAAY,EAAEyiE,EAAM,MAAM,CACvD,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,OAAO2mC,GAAgBppG,EAAK,WAAY,EAAEyiE,EAAM,MAAM,CACvD,EAGD,EAAEziE,EAAMyiE,EAAO,CACb,MAAMknC,EAAiBlnC,EAAM,OACvBmnC,EAAe5pG,EAAK,kBACpB6pG,EAAoB,KAAK,MAC7BD,EAAe,KAAK,IAAI,GAAID,EAAiB,CAAC,CACpD,EACI,OAAOP,GAAgBS,EAAmBpnC,EAAM,MAAM,CACvD,CACH,ECnFMqnC,GAAgB,CACpB,GAAI,KACJ,GAAI,KACJ,SAAU,WACV,KAAM,OACN,QAAS,UACT,UAAW,YACX,QAAS,UACT,MAAO,OACT,EAgDaC,GAAa,CAExB,EAAG,SAAU/pG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAM6C,EAAMhqG,EAAK,YAAa,EAAG,EAAI,EAAI,EACzC,OAAQyiE,EAAK,CAEX,IAAK,IACL,IAAK,KACL,IAAK,MACH,OAAO0kC,EAAS,IAAI6C,EAAK,CAAE,MAAO,aAAa,CAAE,EAEnD,IAAK,QACH,OAAO7C,EAAS,IAAI6C,EAAK,CAAE,MAAO,QAAQ,CAAE,EAE9C,IAAK,OACL,QACE,OAAO7C,EAAS,IAAI6C,EAAK,CAAE,MAAO,MAAM,CAAE,CAC7C,CACF,EAGD,EAAG,SAAUhqG,EAAMyiE,EAAO0kC,EAAU,CAElC,GAAI1kC,IAAU,KAAM,CAClB,MAAM+mC,EAAaxpG,EAAK,cAElBukG,EAAOiF,EAAa,EAAIA,EAAa,EAAIA,EAC/C,OAAOrC,EAAS,cAAc5C,EAAM,CAAE,KAAM,MAAM,CAAE,CACrD,CAED,OAAOgF,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU3wG,EAAS,CAC3C,MAAMyzG,EAAiBpB,GAAY7oG,EAAMxJ,CAAO,EAE1C0zG,EAAWD,EAAiB,EAAIA,EAAiB,EAAIA,EAG3D,GAAIxnC,IAAU,KAAM,CAClB,MAAM0nC,EAAeD,EAAW,IAChC,OAAOd,GAAgBe,EAAc,CAAC,CACvC,CAGD,OAAI1nC,IAAU,KACL0kC,EAAS,cAAc+C,EAAU,CAAE,KAAM,MAAM,CAAE,EAInDd,GAAgBc,EAAUznC,EAAM,MAAM,CAC9C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO,CACxB,MAAM2nC,EAAc9F,GAAetkG,CAAI,EAGvC,OAAOopG,GAAgBgB,EAAa3nC,EAAM,MAAM,CACjD,EAWD,EAAG,SAAUziE,EAAMyiE,EAAO,CACxB,MAAM8hC,EAAOvkG,EAAK,cAClB,OAAOopG,GAAgB7E,EAAM9hC,EAAM,MAAM,CAC1C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMC,EAAU,KAAK,MAAMpnG,EAAK,SAAU,EAAG,GAAK,CAAC,EACnD,OAAQyiE,EAAK,CAEX,IAAK,IACH,OAAO,OAAO2kC,CAAO,EAEvB,IAAK,KACH,OAAOgC,GAAgBhC,EAAS,CAAC,EAEnC,IAAK,KACH,OAAOD,EAAS,cAAcC,EAAS,CAAE,KAAM,SAAS,CAAE,EAE5D,IAAK,MACH,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUpnG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMC,EAAU,KAAK,MAAMpnG,EAAK,SAAU,EAAG,GAAK,CAAC,EACnD,OAAQyiE,EAAK,CAEX,IAAK,IACH,OAAO,OAAO2kC,CAAO,EAEvB,IAAK,KACH,OAAOgC,GAAgBhC,EAAS,CAAC,EAEnC,IAAK,KACH,OAAOD,EAAS,cAAcC,EAAS,CAAE,KAAM,SAAS,CAAE,EAE5D,IAAK,MACH,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOD,EAAS,QAAQC,EAAS,CAC/B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUpnG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMsC,EAAQzpG,EAAK,WACnB,OAAQyiE,EAAK,CACX,IAAK,IACL,IAAK,KACH,OAAO8mC,GAAgB,EAAEvpG,EAAMyiE,CAAK,EAEtC,IAAK,KACH,OAAO0kC,EAAS,cAAcsC,EAAQ,EAAG,CAAE,KAAM,OAAO,CAAE,EAE5D,IAAK,MACH,OAAOtC,EAAS,MAAMsC,EAAO,CAC3B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOtC,EAAS,MAAMsC,EAAO,CAC3B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOtC,EAAS,MAAMsC,EAAO,CAAE,MAAO,OAAQ,QAAS,YAAY,CAAE,CACxE,CACF,EAGD,EAAG,SAAUzpG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMsC,EAAQzpG,EAAK,WACnB,OAAQyiE,EAAK,CAEX,IAAK,IACH,OAAO,OAAOgnC,EAAQ,CAAC,EAEzB,IAAK,KACH,OAAOL,GAAgBK,EAAQ,EAAG,CAAC,EAErC,IAAK,KACH,OAAOtC,EAAS,cAAcsC,EAAQ,EAAG,CAAE,KAAM,OAAO,CAAE,EAE5D,IAAK,MACH,OAAOtC,EAAS,MAAMsC,EAAO,CAC3B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOtC,EAAS,MAAMsC,EAAO,CAC3B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOtC,EAAS,MAAMsC,EAAO,CAAE,MAAO,OAAQ,QAAS,YAAY,CAAE,CACxE,CACF,EAGD,EAAG,SAAUzpG,EAAMyiE,EAAO0kC,EAAU3wG,EAAS,CAC3C,MAAM6zG,EAAOlB,GAAQnpG,EAAMxJ,CAAO,EAElC,OAAIisE,IAAU,KACL0kC,EAAS,cAAckD,EAAM,CAAE,KAAM,MAAM,CAAE,EAG/CjB,GAAgBiB,EAAM5nC,EAAM,MAAM,CAC1C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMmD,EAAU1B,GAAW5oG,CAAI,EAE/B,OAAIyiE,IAAU,KACL0kC,EAAS,cAAcmD,EAAS,CAAE,KAAM,MAAM,CAAE,EAGlDlB,GAAgBkB,EAAS7nC,EAAM,MAAM,CAC7C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,OAAI1kC,IAAU,KACL0kC,EAAS,cAAcnnG,EAAK,QAAS,EAAE,CAAE,KAAM,MAAM,CAAE,EAGzDupG,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMoD,EAAY5B,GAAa3oG,CAAI,EAEnC,OAAIyiE,IAAU,KACL0kC,EAAS,cAAcoD,EAAW,CAAE,KAAM,WAAW,CAAE,EAGzDnB,GAAgBmB,EAAW9nC,EAAM,MAAM,CAC/C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMqD,EAAYxqG,EAAK,SACvB,OAAQyiE,EAAK,CAEX,IAAK,IACL,IAAK,KACL,IAAK,MACH,OAAO0kC,EAAS,IAAIqD,EAAW,CAC7B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,SACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,QACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUxqG,EAAMyiE,EAAO0kC,EAAU3wG,EAAS,CAC3C,MAAMg0G,EAAYxqG,EAAK,SACjByqG,GAAkBD,EAAYh0G,EAAQ,aAAe,GAAK,GAAK,EACrE,OAAQisE,EAAK,CAEX,IAAK,IACH,OAAO,OAAOgoC,CAAc,EAE9B,IAAK,KACH,OAAOrB,GAAgBqB,EAAgB,CAAC,EAE1C,IAAK,KACH,OAAOtD,EAAS,cAAcsD,EAAgB,CAAE,KAAM,KAAK,CAAE,EAC/D,IAAK,MACH,OAAOtD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,SACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,QACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUxqG,EAAMyiE,EAAO0kC,EAAU3wG,EAAS,CAC3C,MAAMg0G,EAAYxqG,EAAK,SACjByqG,GAAkBD,EAAYh0G,EAAQ,aAAe,GAAK,GAAK,EACrE,OAAQisE,EAAK,CAEX,IAAK,IACH,OAAO,OAAOgoC,CAAc,EAE9B,IAAK,KACH,OAAOrB,GAAgBqB,EAAgBhoC,EAAM,MAAM,EAErD,IAAK,KACH,OAAO0kC,EAAS,cAAcsD,EAAgB,CAAE,KAAM,KAAK,CAAE,EAC/D,IAAK,MACH,OAAOtD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,SACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,QACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUxqG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMqD,EAAYxqG,EAAK,SACjB0qG,EAAeF,IAAc,EAAI,EAAIA,EAC3C,OAAQ/nC,EAAK,CAEX,IAAK,IACH,OAAO,OAAOioC,CAAY,EAE5B,IAAK,KACH,OAAOtB,GAAgBsB,EAAcjoC,EAAM,MAAM,EAEnD,IAAK,KACH,OAAO0kC,EAAS,cAAcuD,EAAc,CAAE,KAAM,KAAK,CAAE,EAE7D,IAAK,MACH,OAAOvD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,cACP,QAAS,YACnB,CAAS,EAEH,IAAK,QACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,SACP,QAAS,YACnB,CAAS,EAEH,IAAK,SACH,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,QACP,QAAS,YACnB,CAAS,EAEH,IAAK,OACL,QACE,OAAOrD,EAAS,IAAIqD,EAAW,CAC7B,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAUxqG,EAAMyiE,EAAO0kC,EAAU,CAElC,MAAMuC,EADQ1pG,EAAK,WACgB,IAAM,EAAI,KAAO,KAEpD,OAAQyiE,EAAK,CACX,IAAK,IACL,IAAK,KACH,OAAO0kC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,cACP,QAAS,YACnB,CAAS,EACH,IAAK,MACH,OAAOvC,EACJ,UAAUuC,EAAoB,CAC7B,MAAO,cACP,QAAS,YACrB,CAAW,EACA,cACL,IAAK,QACH,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,SACP,QAAS,YACnB,CAAS,EACH,IAAK,OACL,QACE,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAU1pG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMwD,EAAQ3qG,EAAK,WACnB,IAAI0pG,EASJ,OARIiB,IAAU,GACZjB,EAAqBI,GAAc,KAC1Ba,IAAU,EACnBjB,EAAqBI,GAAc,SAEnCJ,EAAqBiB,EAAQ,IAAM,EAAI,KAAO,KAGxCloC,EAAK,CACX,IAAK,IACL,IAAK,KACH,OAAO0kC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,cACP,QAAS,YACnB,CAAS,EACH,IAAK,MACH,OAAOvC,EACJ,UAAUuC,EAAoB,CAC7B,MAAO,cACP,QAAS,YACrB,CAAW,EACA,cACL,IAAK,QACH,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,SACP,QAAS,YACnB,CAAS,EACH,IAAK,OACL,QACE,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAU1pG,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMwD,EAAQ3qG,EAAK,WACnB,IAAI0pG,EAWJ,OAVIiB,GAAS,GACXjB,EAAqBI,GAAc,QAC1Ba,GAAS,GAClBjB,EAAqBI,GAAc,UAC1Ba,GAAS,EAClBjB,EAAqBI,GAAc,QAEnCJ,EAAqBI,GAAc,MAG7BrnC,EAAK,CACX,IAAK,IACL,IAAK,KACL,IAAK,MACH,OAAO0kC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,cACP,QAAS,YACnB,CAAS,EACH,IAAK,QACH,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,SACP,QAAS,YACnB,CAAS,EACH,IAAK,OACL,QACE,OAAOvC,EAAS,UAAUuC,EAAoB,CAC5C,MAAO,OACP,QAAS,YACnB,CAAS,CACJ,CACF,EAGD,EAAG,SAAU1pG,EAAMyiE,EAAO0kC,EAAU,CAClC,GAAI1kC,IAAU,KAAM,CAClB,IAAIkoC,EAAQ3qG,EAAK,SAAQ,EAAK,GAC9B,OAAI2qG,IAAU,IAAGA,EAAQ,IAClBxD,EAAS,cAAcwD,EAAO,CAAE,KAAM,MAAM,CAAE,CACtD,CAED,OAAOpB,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,OAAI1kC,IAAU,KACL0kC,EAAS,cAAcnnG,EAAK,SAAU,EAAE,CAAE,KAAM,MAAM,CAAE,EAG1DupG,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,MAAMwD,EAAQ3qG,EAAK,SAAQ,EAAK,GAEhC,OAAIyiE,IAAU,KACL0kC,EAAS,cAAcwD,EAAO,CAAE,KAAM,MAAM,CAAE,EAGhDvB,GAAgBuB,EAAOloC,EAAM,MAAM,CAC3C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,IAAIwD,EAAQ3qG,EAAK,WAGjB,OAFI2qG,IAAU,IAAGA,EAAQ,IAErBloC,IAAU,KACL0kC,EAAS,cAAcwD,EAAO,CAAE,KAAM,MAAM,CAAE,EAGhDvB,GAAgBuB,EAAOloC,EAAM,MAAM,CAC3C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,OAAI1kC,IAAU,KACL0kC,EAAS,cAAcnnG,EAAK,WAAY,EAAE,CAAE,KAAM,QAAQ,CAAE,EAG9DupG,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO0kC,EAAU,CAClC,OAAI1kC,IAAU,KACL0kC,EAAS,cAAcnnG,EAAK,WAAY,EAAE,CAAE,KAAM,QAAQ,CAAE,EAG9DupG,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAO,CACxB,OAAO8mC,GAAgB,EAAEvpG,EAAMyiE,CAAK,CACrC,EAGD,EAAG,SAAUziE,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMC,EAAiB7qG,EAAK,oBAE5B,GAAI6qG,IAAmB,EACrB,MAAO,IAGT,OAAQpoC,EAAK,CAEX,IAAK,IACH,OAAOqoC,GAAkCD,CAAc,EAKzD,IAAK,OACL,IAAK,KACH,OAAOE,GAAeF,CAAc,EAKtC,IAAK,QACL,IAAK,MACL,QACE,OAAOE,GAAeF,EAAgB,GAAG,CAC5C,CACF,EAGD,EAAG,SAAU7qG,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMC,EAAiB7qG,EAAK,oBAE5B,OAAQyiE,EAAK,CAEX,IAAK,IACH,OAAOqoC,GAAkCD,CAAc,EAKzD,IAAK,OACL,IAAK,KACH,OAAOE,GAAeF,CAAc,EAKtC,IAAK,QACL,IAAK,MACL,QACE,OAAOE,GAAeF,EAAgB,GAAG,CAC5C,CACF,EAGD,EAAG,SAAU7qG,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMC,EAAiB7qG,EAAK,oBAE5B,OAAQyiE,EAAK,CAEX,IAAK,IACL,IAAK,KACL,IAAK,MACH,MAAO,MAAQuoC,GAAoBH,EAAgB,GAAG,EAExD,IAAK,OACL,QACE,MAAO,MAAQE,GAAeF,EAAgB,GAAG,CACpD,CACF,EAGD,EAAG,SAAU7qG,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMC,EAAiB7qG,EAAK,oBAE5B,OAAQyiE,EAAK,CAEX,IAAK,IACL,IAAK,KACL,IAAK,MACH,MAAO,MAAQuoC,GAAoBH,EAAgB,GAAG,EAExD,IAAK,OACL,QACE,MAAO,MAAQE,GAAeF,EAAgB,GAAG,CACpD,CACF,EAGD,EAAG,SAAU7qG,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMxnF,EAAY,KAAK,MAAMpjB,EAAK,QAAO,EAAK,GAAI,EAClD,OAAOopG,GAAgBhmF,EAAWq/C,EAAM,MAAM,CAC/C,EAGD,EAAG,SAAUziE,EAAMyiE,EAAOmoC,EAAW,CACnC,MAAMxnF,EAAYpjB,EAAK,UACvB,OAAOopG,GAAgBhmF,EAAWq/C,EAAM,MAAM,CAC/C,CACH,EAEA,SAASuoC,GAAoBlmC,EAAQmmC,EAAY,GAAI,CACnD,MAAM3B,EAAOxkC,EAAS,EAAI,IAAM,IAC1BomC,EAAY,KAAK,IAAIpmC,CAAM,EAC3B6lC,EAAQ,KAAK,MAAMO,EAAY,EAAE,EACjCC,EAAUD,EAAY,GAC5B,OAAIC,IAAY,EACP7B,EAAO,OAAOqB,CAAK,EAErBrB,EAAO,OAAOqB,CAAK,EAAIM,EAAY7B,GAAgB+B,EAAS,CAAC,CACtE,CAEA,SAASL,GAAkChmC,EAAQmmC,EAAW,CAC5D,OAAInmC,EAAS,KAAO,GACLA,EAAS,EAAI,IAAM,KAClBskC,GAAgB,KAAK,IAAItkC,CAAM,EAAI,GAAI,CAAC,EAEjDimC,GAAejmC,EAAQmmC,CAAS,CACzC,CAEA,SAASF,GAAejmC,EAAQmmC,EAAY,GAAI,CAC9C,MAAM3B,EAAOxkC,EAAS,EAAI,IAAM,IAC1BomC,EAAY,KAAK,IAAIpmC,CAAM,EAC3B6lC,EAAQvB,GAAgB,KAAK,MAAM8B,EAAY,EAAE,EAAG,CAAC,EACrDC,EAAU/B,GAAgB8B,EAAY,GAAI,CAAC,EACjD,OAAO5B,EAAOqB,EAAQM,EAAYE,CACpC,CCvwBA,MAAMC,GAAoB,CAACnpE,EAASkkE,IAAe,CACjD,OAAQlkE,EAAO,CACb,IAAK,IACH,OAAOkkE,EAAW,KAAK,CAAE,MAAO,OAAS,GAC3C,IAAK,KACH,OAAOA,EAAW,KAAK,CAAE,MAAO,QAAU,GAC5C,IAAK,MACH,OAAOA,EAAW,KAAK,CAAE,MAAO,MAAQ,GAC1C,IAAK,OACL,QACE,OAAOA,EAAW,KAAK,CAAE,MAAO,MAAQ,EAC3C,CACH,EAEMkF,GAAoB,CAACppE,EAASkkE,IAAe,CACjD,OAAQlkE,EAAO,CACb,IAAK,IACH,OAAOkkE,EAAW,KAAK,CAAE,MAAO,OAAS,GAC3C,IAAK,KACH,OAAOA,EAAW,KAAK,CAAE,MAAO,QAAU,GAC5C,IAAK,MACH,OAAOA,EAAW,KAAK,CAAE,MAAO,MAAQ,GAC1C,IAAK,OACL,QACE,OAAOA,EAAW,KAAK,CAAE,MAAO,MAAQ,EAC3C,CACH,EAEMmF,GAAwB,CAACrpE,EAASkkE,IAAe,CACrD,MAAMoB,EAActlE,EAAQ,MAAM,WAAW,GAAK,GAC5CspE,EAAchE,EAAY,CAAC,EAC3BiE,EAAcjE,EAAY,CAAC,EAEjC,GAAI,CAACiE,EACH,OAAOJ,GAAkBnpE,EAASkkE,CAAU,EAG9C,IAAIsF,EAEJ,OAAQF,EAAW,CACjB,IAAK,IACHE,EAAiBtF,EAAW,SAAS,CAAE,MAAO,OAAS,GACvD,MACF,IAAK,KACHsF,EAAiBtF,EAAW,SAAS,CAAE,MAAO,QAAU,GACxD,MACF,IAAK,MACHsF,EAAiBtF,EAAW,SAAS,CAAE,MAAO,MAAQ,GACtD,MACF,IAAK,OACL,QACEsF,EAAiBtF,EAAW,SAAS,CAAE,MAAO,MAAQ,GACtD,KACH,CAED,OAAOsF,EACJ,QAAQ,WAAYL,GAAkBG,EAAapF,CAAU,CAAC,EAC9D,QAAQ,WAAYkF,GAAkBG,EAAarF,CAAU,CAAC,CACnE,EAEauF,GAAiB,CAC5B,EAAGL,GACH,EAAGC,EACL,EC/DMK,GAAmB,OACnBC,GAAkB,OAElBC,GAAc,CAAC,IAAK,KAAM,KAAM,MAAM,EAErC,SAASC,GAA0BrpC,EAAO,CAC/C,OAAOkpC,GAAiB,KAAKlpC,CAAK,CACpC,CAEO,SAASspC,GAAyBtpC,EAAO,CAC9C,OAAOmpC,GAAgB,KAAKnpC,CAAK,CACnC,CAEO,SAASupC,GAA0BvpC,EAAOwpC,EAAQv7G,EAAO,CAC9D,MAAMw7G,EAAW/9G,GAAQs0E,EAAOwpC,EAAQv7G,CAAK,EAE7C,GADA,QAAQ,KAAKw7G,CAAQ,EACjBL,GAAY,SAASppC,CAAK,EAAG,MAAM,IAAI,WAAWypC,CAAQ,CAChE,CAEA,SAAS/9G,GAAQs0E,EAAOwpC,EAAQv7G,EAAO,CACrC,MAAMy7G,EAAU1pC,EAAM,CAAC,IAAM,IAAM,QAAU,oBAC7C,MAAO,SAASA,EAAM,YAAa,oBAAmBA,CAAK,YAAYwpC,CAAM,sBAAsBE,CAAO,mBAAmBz7G,CAAK,iFACpI,CCKA,MAAM07G,GACJ,wDAIIC,GAA6B,oCAE7BC,GAAsB,eACtBC,GAAoB,MACpBC,GAAgC,WAsS/B,SAASP,GAAOjsG,EAAMysG,EAAWj2G,EAAS,qBAC/C,MAAMutG,EAAiBC,KACjB0I,GAASl2G,GAAA,YAAAA,EAAS,SAAUutG,EAAe,QAAU4I,GAErD7D,GACJtyG,GAAA,YAAAA,EAAS,0BACTsJ,GAAAtN,EAAAgE,GAAA,YAAAA,EAAS,SAAT,YAAAhE,EAAiB,UAAjB,YAAAsN,EAA0B,wBAC1BikG,EAAe,yBACflnE,GAAA1c,EAAA4jF,EAAe,SAAf,YAAA5jF,EAAuB,UAAvB,YAAA0c,EAAgC,wBAChC,EAEIqnE,GACJ1tG,GAAA,YAAAA,EAAS,iBACTunC,GAAAC,EAAAxnC,GAAA,YAAAA,EAAS,SAAT,YAAAwnC,EAAiB,UAAjB,YAAAD,EAA0B,eAC1BgmE,EAAe,gBACf9lE,GAAAC,EAAA6lE,EAAe,SAAf,YAAA7lE,EAAuB,UAAvB,YAAAD,EAAgC,eAChC,EAEI2uE,EAAelJ,GAAO1jG,CAAI,EAEhC,GAAI,CAACylG,GAAQmH,CAAY,EACvB,MAAM,IAAI,WAAW,oBAAoB,EAG3C,IAAIC,EAAQJ,EACT,MAAMJ,EAA0B,EAChC,IAAKS,GAAc,CAClB,MAAMC,EAAiBD,EAAU,CAAC,EAClC,GAAIC,IAAmB,KAAOA,IAAmB,IAAK,CACpD,MAAMC,EAAgBtB,GAAeqB,CAAc,EACnD,OAAOC,EAAcF,EAAWJ,EAAO,UAAU,CAClD,CACD,OAAOI,CACb,CAAK,EACA,KAAK,EAAE,EACP,MAAMV,EAAsB,EAC5B,IAAKU,GAAc,CAElB,GAAIA,IAAc,KAChB,MAAO,CAAE,QAAS,GAAO,MAAO,GAAG,EAGrC,MAAMC,EAAiBD,EAAU,CAAC,EAClC,GAAIC,IAAmB,IACrB,MAAO,CAAE,QAAS,GAAO,MAAOE,GAAmBH,CAAS,GAG9D,GAAI/C,GAAWgD,CAAc,EAC3B,MAAO,CAAE,QAAS,GAAM,MAAOD,CAAS,EAG1C,GAAIC,EAAe,MAAMP,EAA6B,EACpD,MAAM,IAAI,WACR,iEACEO,EACA,GACZ,EAGM,MAAO,CAAE,QAAS,GAAO,MAAOD,CAAS,CAC/C,CAAK,EAGCJ,EAAO,SAAS,eAClBG,EAAQH,EAAO,SAAS,aAAaE,EAAcC,CAAK,GAG1D,MAAMK,EAAmB,CACvB,sBAAApE,EACA,aAAA5E,EACA,OAAAwI,CACJ,EAEE,OAAOG,EACJ,IAAK3iB,GAAS,CACb,GAAI,CAACA,EAAK,QAAS,OAAOA,EAAK,MAE/B,MAAMznB,EAAQynB,EAAK,OAGhB,EAAC1zF,GAAA,MAAAA,EAAS,8BACTu1G,GAAyBtpC,CAAK,GAC/B,EAACjsE,GAAA,MAAAA,EAAS,+BACTs1G,GAA0BrpC,CAAK,IAEjCupC,GAA0BvpC,EAAOgqC,EAAW,OAAOzsG,CAAI,CAAC,EAG1D,MAAMmtG,EAAYpD,GAAWtnC,EAAM,CAAC,CAAC,EACrC,OAAO0qC,EAAUP,EAAcnqC,EAAOiqC,EAAO,SAAUQ,CAAgB,CAC7E,CAAK,EACA,KAAK,EAAE,CACZ,CAEA,SAASD,GAAmBv8G,EAAO,CACjC,MAAM08G,EAAU18G,EAAM,MAAM47G,EAAmB,EAE/C,OAAKc,EAIEA,EAAQ,CAAC,EAAE,QAAQb,GAAmB,GAAG,EAHvC77G,CAIX,CChbA,MAAMk1G,GAAuB,CAC3B,iBAAkB,CAChB,IAAK,sBACL,MAAO,6BACR,EAED,SAAU,CACR,IAAK,YACL,MAAO,oBACR,EAED,YAAa,cAEb,iBAAkB,CAChB,IAAK,qBACL,MAAO,4BACR,EAED,SAAU,CACR,IAAK,WACL,MAAO,mBACR,EAED,YAAa,CACX,IAAK,kBACL,MAAO,0BACR,EAED,OAAQ,CACN,IAAK,UACL,MAAO,kBACR,EAED,MAAO,CACL,IAAK,SACL,MAAO,iBACR,EAED,YAAa,CACX,IAAK,oBACL,MAAO,4BACR,EAED,OAAQ,CACN,IAAK,YACL,MAAO,oBACR,EAED,aAAc,CACZ,IAAK,iBACL,MAAO,wBACR,EAED,QAAS,CACP,IAAK,SACL,MAAO,gBACR,EAED,YAAa,CACX,IAAK,eACL,MAAO,uBACR,EAED,OAAQ,CACN,IAAK,OACL,MAAO,eACR,EAED,WAAY,CACV,IAAK,eACL,MAAO,uBACR,EAED,aAAc,CACZ,IAAK,eACL,MAAO,uBACR,CACH,EAEaC,GAAiB,CAACpjC,EAAOhxD,EAAOjb,IAAY,CACvD,IAAI6I,EACJ,MAAMm/F,EAAOoH,GAAqBnjC,CAAK,EASvC,OARI,OAAO+7B,GAAS,SAClBn/F,EAASm/F,EACA/sF,IAAU,EACnBpS,EAASm/F,EAAK,IAEdn/F,EAASm/F,EAAK,MAAM,QAAQ,YAAa,OAAO/sF,CAAK,CAAC,EAGpDjb,GAAA,MAAAA,EAAS,UACPA,EAAQ,YAAcA,EAAQ,WAAa,EACtC,QAAU6I,EAEV,UAAYA,EAIhBA,CACT,ECjGM2mG,GAAc,CAClB,KAAM,gBACN,KAAM,WACN,OAAQ,UACR,MAAO,SACT,EAEMC,GAAc,CAClB,KAAM,gBACN,KAAM,aACN,OAAQ,WACR,MAAO,OACT,EAEMC,GAAkB,CACtB,KAAM,wBACN,KAAM,wBACN,OAAQ,qBACR,MAAO,oBACT,EAEaC,GAAa,CACxB,KAAMJ,GAAkB,CACtB,QAASC,GACT,aAAc,MAClB,CAAG,EAED,KAAMD,GAAkB,CACtB,QAASE,GACT,aAAc,MAClB,CAAG,EAED,SAAUF,GAAkB,CAC1B,QAASG,GACT,aAAc,MAClB,CAAG,CACH,ECtCME,GAAuB,CAC3B,SAAU,qBACV,UAAW,aACX,MAAO,oBACP,SAAU,gBACV,SAAU,sBACV,MAAO,GACT,EAEaC,GAAiB,CAAC5jC,EAAO0hC,EAAOmC,EAAWpoG,IACtDkoG,GAAqB3jC,CAAK,ECRtBikC,GAAY,CAChB,OAAQ,CAAC,WAAY,UAAU,EAC/B,YAAa,CAAC,WAAY,UAAU,EACpC,KAAM,CAAC,qBAAsB,oBAAoB,CACnD,EAEMC,GAAgB,CACpB,OAAQ,CAAC,KAAM,KAAM,KAAM,IAAI,EAC/B,YAAa,CAAC,YAAa,aAAc,aAAc,YAAY,EACnE,KAAM,CAAC,gBAAiB,iBAAkB,iBAAkB,gBAAgB,CAC9E,EAEMC,GAAc,CAClB,OAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EACnE,YAAa,CACX,QACA,QACA,OACA,OACA,MACA,OACA,QACA,OACA,QACA,OACA,OACA,MACD,EAED,KAAM,CACJ,UACA,UACA,OACA,QACA,MACA,OACA,UACA,OACA,YACA,UACA,WACA,UACD,CACH,EAEMC,GAAY,CAChB,OAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EAC1C,MAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAChD,YAAa,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAEpE,KAAM,CACJ,WACA,QACA,QACA,WACA,QACA,WACA,QACD,CACH,EAEMC,GAAkB,CACtB,OAAQ,CACN,GAAI,KACJ,GAAI,KACJ,SAAU,SACV,KAAM,OACN,QAAS,OACT,UAAW,QACX,QAAS,OACT,MAAO,MACR,EACD,YAAa,CACX,GAAI,KACJ,GAAI,KACJ,SAAU,SACV,KAAM,OACN,QAAS,QACT,UAAW,aACX,QAAS,OACT,MAAO,OACR,EACD,KAAM,CACJ,GAAI,KACJ,GAAI,KACJ,SAAU,SACV,KAAM,OACN,QAAS,WACT,UAAW,kBACX,QAAS,UACT,MAAO,UACR,CACH,EAEME,GAAgB,CAACC,EAAazwG,IAAY,CAC9C,MAAMkgE,EAAS,OAAOuwC,CAAW,EAC3BoG,EAAO72G,GAAA,YAAAA,EAAS,KAEtB,GAAIkgE,IAAW,EAAG,MAAO,IAEzB,MAAM42C,EAAgB,CAAC,OAAQ,OAAQ,OAAQ,SAAU,QAAQ,EACjE,IAAIxuB,EAEJ,OAAIpoB,IAAW,EACbooB,EAASuuB,GAAQC,EAAc,SAASD,CAAI,EAAI,MAAQ,KAExDvuB,EAAS,MAGJpoB,EAASooB,CAClB,EAEMyuB,GAAqB,CAAC,MAAO,MAAM,EAE5BpG,GAAW,CACtB,aAAc,CAACnnG,EAAM6sG,IAKf7sG,EAAK,QAAO,IAAO,GAMnB,CAJsB6sG,EAAM,KAC7B3iB,GAASA,EAAK,SAAWqjB,GAAmB,SAASrjB,EAAK,KAAK,CACtE,EAEmC2iB,EAExBA,EAAM,IAAK3iB,GAChBA,EAAK,SAAWA,EAAK,QAAU,KAC3B,CAAE,QAAS,GAAM,MAAO,GAAK,EAC7BA,CACV,EAGE,cAAA8c,GAEA,IAAKT,GAAgB,CACnB,OAAQG,GACR,aAAc,MAClB,CAAG,EAED,QAASH,GAAgB,CACvB,OAAQI,GACR,aAAc,OACd,iBAAmBS,GAAYA,EAAU,CAC7C,CAAG,EAED,MAAOb,GAAgB,CACrB,OAAQK,GACR,aAAc,MAClB,CAAG,EAED,IAAKL,GAAgB,CACnB,OAAQM,GACR,aAAc,MAClB,CAAG,EAED,UAAWN,GAAgB,CACzB,OAAQO,GACR,aAAc,MAClB,CAAG,CACH,ECjKMgB,GAA4B,8BAC5BC,GAA4B,OAE5BC,GAAmB,CACvB,OAAQ,kCACR,YAAa,oDACb,KAAM,2CACR,EACMC,GAAmB,CACvB,IAAK,CAAC,OAAQ,MAAM,CACtB,EAEMC,GAAuB,CAC3B,OAAQ,aACR,YAAa,8BACb,KAAM,+BACR,EACMC,GAAuB,CAC3B,IAAK,CAAC,KAAM,KAAM,KAAM,IAAI,CAC9B,EAEMC,GAAqB,CACzB,OAAQ,eACR,YACE,sEACF,KAAM,0FACR,EACMC,GAAqB,CACzB,OAAQ,CACN,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACD,EAED,IAAK,CACH,OACA,MACA,QACA,OACA,OACA,SACA,SACA,OACA,MACA,MACA,MACA,KACD,CACH,EAEMC,GAAmB,CACvB,OAAQ,aACR,MAAO,2BACP,YAAa,qCACb,KAAM,yDACR,EACMC,GAAmB,CACvB,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EACxD,IAAK,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,CAC9D,EAEMC,GAAyB,CAC7B,OAAQ,iDACR,IAAK,oEACP,EACMC,GAAyB,CAC7B,IAAK,CACH,GAAI,MACJ,GAAI,MACJ,SAAU,QACV,KAAM,QACN,QAAS,OACT,UAAW,MACX,QAAS,QACT,MAAO,OACR,CACH,EAEar2G,GAAQ,CACnB,cAAew1G,GAAoB,CACjC,aAAcE,GACd,aAAcC,GACd,cAAgBl1G,GAAU,SAASA,CAAK,CAC5C,CAAG,EAED,IAAKw0G,GAAa,CAChB,cAAeW,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,QAASZ,GAAa,CACpB,cAAea,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,MACnB,cAAgBl6F,GAAUA,EAAQ,CACtC,CAAG,EAED,MAAOo5F,GAAa,CAClB,cAAee,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,IAAKhB,GAAa,CAChB,cAAeiB,GACf,kBAAmB,OACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,EAED,UAAWlB,GAAa,CACtB,cAAemB,GACf,kBAAmB,MACnB,cAAeC,GACf,kBAAmB,KACvB,CAAG,CACH,ECtHa+E,GAAK,CAChB,KAAM,KACN,eAAgB3H,GAChB,WAAYM,GACZ,eAAgBE,GAChB,SAAUc,GACV,MAAO/0G,GACP,QAAS,CACP,aAAc,EACd,sBAAuB,CACxB,CACH,ECRMqJ,GAAS0mC,GAAa,qBAAqB,EAE1C,SAASsrE,IAAsB,CACpC,KAAM,CAACvrB,EAASwrB,CAAU,EAAInpF,EAAA,SAAgB,CAAE,GAC1C,CAACopF,EAASC,CAAU,EAAIrpF,WAAS,EAAI,EACrC,CAACspF,EAAUC,CAAW,EAAIvpF,WAAwB,IAAI,EACtD,CAACwpF,EAAWC,CAAY,EAAIzpF,WAAwB,IAAI,EAG9DC,YAAU,IAAM,CACFypF,GACd,EAAG,CAAE,GAGL,MAAMA,EAAc,SAAY,CAC1B,IACFL,EAAW,EAAI,EACT,MAAA/5G,EAAO,MAAM+uG,KACnBnnG,GAAO,KAAK,GAAG5H,EAAK,MAAM,yBAAyB,EACnD65G,EAAW75G,CAAa,QACjB7F,EAAO,CACPyN,GAAA,MAAM,8CAA+CzN,CAAK,EAC3DkkB,GAAA,CACJ,MAAO,SACP,YAAa,0CACb,QAAS,cACV,SACD,CACA07F,EAAW,EAAK,CAClB,GAIIM,EAAe,MAAO/K,GAAoB,CAC1C,IACF2K,EAAY3K,CAAO,EACZ1nG,GAAA,KAAK,kCAAkC0nG,CAAO,EAAE,EAEvD,MAAMD,GAAqBC,CAAO,EAGlCuK,KAAmBlM,EAAK,UAAgB97F,EAAM,KAAOy9F,CAAO,CAAC,EAEvDjxF,GAAA,CACJ,MAAO,SACP,YAAa,qCACb,QAAS,UACV,QACMlkB,EAAO,CACdyN,GAAO,MAAM,oDAAoD0nG,CAAO,GAAIn1G,CAAK,EAC3EkkB,GAAA,CACJ,MAAO,SACP,YAAa,0CACb,QAAS,cACV,SACD,CACA47F,EAAY,IAAI,CAClB,GAIIK,EAAgB,MAAOhL,GAAoB,CAC3C,IACF6K,EAAa7K,CAAO,EACb1nG,GAAA,KAAK,mCAAmC0nG,CAAO,EAAE,EAExD,MAAMM,GAAsBN,CAAO,EAGnCuK,KAAmBlM,EAAK,IAAa97F,KAAM,KAAOy9F,EAAU,CAAE,GAAGz9F,EAAO,WAAY,CAAE,OAAQ,UAAY,EAAIA,CAAK,CAAC,EAE9GwM,GAAA,CACJ,MAAO,SACP,YAAa,qCACb,QAAS,UACV,QACMlkB,EAAO,CACdyN,GAAO,MAAM,qDAAqD0nG,CAAO,GAAIn1G,CAAK,EAC5EkkB,GAAA,CACJ,MAAO,SACP,YAAa,0CACb,QAAS,cACV,SACD,CACA87F,EAAa,IAAI,CACnB,GAIIxe,EAAc4e,GAAuB,CACrC,IACE,IAACA,EAAmB,sBAClB,MAAApuG,EAAO,IAAI,KAAKouG,CAAU,EAChC,OAAI,MAAMpuG,EAAK,QAAQ,CAAC,EAAU,gBAC3BisG,GAAOjsG,EAAM,mBAAoB,CAAE,OAAQwtG,GAAI,OACxC,CACP,qBACT,GAIA,OAAAxtF,EAAA,KAAC,MAAI,WAAU,YACb,UAACA,OAAA,OAAI,UAAU,oCACb,UAAChB,EAAA,UAAG,UAAU,wBAAwB,SAAwC,6CAC9EgB,EAAA,KAAC8rB,EAAA,CACC,QAASmiE,EACT,QAAQ,UACR,KAAK,KACL,SAAUN,EAET,UAAAA,EAAW3uF,EAAA,IAAAqvF,GAAA,CAAO,UAAU,2BAA4B,GAAK,KAAK,cAErE,GACF,EAEAruF,OAACk3E,GAAK,cAAa,MACjB,UAACl3E,OAAAo3E,GAAA,CAAS,UAAU,OAClB,UAACp4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,MAAM,SAAM,WAC9Bt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,SAAS,SAAM,WACjCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,eAAe,SAAW,gBAC5Ct4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,UAAU,SAAU,eACtCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,WAAW,SAAS,eACzC,EAECt4E,EAAA,IAAAw4E,GAAA,CAAY,MAAM,MAChB,WAActV,EAAQ,OAAgBx8E,GAAA,eAAAlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,WAAU,EAAGq7G,EAAUK,CAAY,EACzG,QAEC1W,GAAY,OAAM,SAChB,SAAc8W,EAAApsB,EAAQ,OAAgBx8E,GAAA,cAAAA,EAAM,OAAS,WAAWlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,WAAU,EAAGq7G,EAAUK,CAAY,EACnI,QAEC1W,GAAY,OAAM,eAChB,SAAc8W,EAAApsB,EAAQ,OAAgBx8E,GAAA,cAAAA,EAAM,OAAS,iBAAiBlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,WAAU,EAAGq7G,EAAUK,CAAY,EACzI,EAEAlvF,MAACw4E,GAAY,OAAM,UAChB,SAAA8W,EACCpsB,EAAQ,OAAOx8E,GAAA,OAAS,QAAAlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,UAAS,EAC9Dq7G,EACAK,CAAA,EAEJ,EAEAlvF,MAACw4E,GAAY,OAAM,WAChB,SAAA+W,EACCrsB,EAAQ,OAAOx8E,GAAA,OAAS,QAAAlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,WAAU,EAC/Du7G,EACAI,CAAA,EAEJ,GACF,CACF,IAIO,SAAAG,EAAcE,EAAmCC,EAA2BC,EAAgC,CACnH,OAAIf,EAEA3uF,EAAA,IAAC,OAAI,UAAU,yCACb,eAACqvF,GAAO,WAAU,oCAAqC,EACzD,GAIAG,EAAgB,SAAW,EAE1BxvF,MAAA,OAAI,UAAU,kCAAkC,SAEjD,gCAKDA,EAAA,WAAI,UAAU,wCACZ,WAAgB,IAAItZ,GAClBsZ,sBAAA+4E,GAAA,CAAoB,UAAU,kBAC7B,SAAC/3E,OAAAm4E,GAAA,CAAY,UAAU,MACrB,UAACn4E,OAAA,OAAI,UAAU,mCACb,UAAAA,OAAC,MACC,WAAAhB,MAAC,IAAE,WAAU,cAAe,SAAAtZ,EAAM,aAAe,UAAU,EAC3Dsa,OAAC,IAAE,WAAU,wBACV,UAAMta,EAAA,OAAS,QAAU,QAAU,aAAa,MAAI8pF,EAAW9pF,EAAM,WAAaA,EAAM,SAAS,GACpG,GACF,EACAsa,OAAC,MAAI,WAAU,8BACZ,YAAMxtB,EAAAkT,EAAA,yBAAAlT,EAAY,UAAW,WAC5BwsB,MAAC2vF,IAAY,UAAU,wBAAyB,KAC9C7uG,EAAA4F,EAAM,aAAN,YAAA5F,EAAkB,UAAW,WAC/Bkf,MAAC4vF,IAAQ,UAAU,sBAAuB,GAEzC5vF,MAAA,OAAI,UAAU,+DAA+D,SAAU,eAE1FA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,kDACV,QAAS,IAAM4iE,EAAShpG,EAAM,EAAE,EAChC,SAAU+oG,IAAe/oG,EAAM,GAE9B,SAAA+oG,IAAe/oG,EAAM,GACnBsZ,EAAA,IAAAqvF,GAAA,CAAO,UAAU,sBAAuB,GAEzCrvF,MAAC6vF,GAAM,WAAU,SAAU,GAE/B,GACF,GACF,EAECnpG,EAAM,OAAS,SAAWA,EAAM,UAC9BsZ,MAAA,OAAI,UAAU,4BACb,SAAAA,EAAA,IAAC,OACC,IAAKtZ,EAAM,SACX,IAAK,mBAAmBA,EAAM,WAAW,GACzC,UAAU,8DACV,QAAUlX,GAAM,CACR,MAAAsgH,EAAW,OAAO,OAAW,KAAe,OAAO,SAAS,SAAS,SAAS,WAAW,EAC3F,iBACA,GACFtgH,EAAA,cAAc,IAAM,GAAGsgH,CAAQ,+BACnC,IAEJ,EAGDppG,EAAM,OAAS,eAAiBA,EAAM,SACpCsZ,MAAA,OAAI,UAAU,iCACb,eAAC,IAAE,WAAU,gBAAiB,SAAAtZ,EAAM,OAAQ,GAC9C,EAGFsa,OAAC,MAAI,WAAU,6BACb,UAAAA,OAAC,IAAE,kBAAKta,EAAM,IAAG,EAChBA,EAAM,SAAWsa,OAAC,IAAE,yBAAYta,EAAM,SAAQ,EAC9CA,EAAM,YAAcsa,OAAC,IAAE,oBAAOta,EAAM,YAAW,GAClD,GACF,CA5DS,EAAAA,EAAM,EA6DjB,EACD,CACH,EAEJ,CAGS,SAAA6oG,EAAsBC,EAAmCO,EAA4BC,EAAiC,CAC7H,OAAIrB,EAEA3uF,EAAA,IAAC,OAAI,UAAU,yCACb,eAACqvF,GAAO,WAAU,oCAAqC,EACzD,GAIAG,EAAgB,SAAW,EAE1BxvF,MAAA,OAAI,UAAU,kCAAkC,SAEjD,yCAKDA,EAAA,WAAI,UAAU,wCACZ,WAAgB,IAAItZ,GAClBsZ,MAAA+4E,GAAA,CAAoB,UAAU,kBAC7B,SAAC/3E,OAAAm4E,GAAA,CAAY,UAAU,MACrB,UAACn4E,OAAA,OAAI,UAAU,mCACb,UAAAA,OAAC,MACC,WAAAhB,MAAC,IAAE,WAAU,cAAe,SAAAtZ,EAAM,aAAe,UAAU,EAC3Dsa,OAAC,IAAE,WAAU,wBACV,UAAMta,EAAA,OAAS,QAAU,QAAU,aAAa,MAAI8pF,EAAW9pF,EAAM,WAAaA,EAAM,SAAS,GACpG,GACF,EACAsa,OAAC,MAAI,WAAU,8BACb,UAAChB,MAAA4vF,GAAA,CAAQ,UAAU,sBAAuB,GAC1C5vF,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,qDACV,QAAS,IAAMkjE,EAAUtpG,EAAM,EAAE,EACjC,SAAUqpG,IAAgBrpG,EAAM,GAE/B,SAAAqpG,IAAgBrpG,EAAM,GACpBsZ,EAAA,IAAAqvF,GAAA,CAAO,UAAU,sBAAuB,GAEzCrvF,MAAC2vF,GAAY,WAAU,SAAU,GAErC,GACF,GACF,EAECjpG,EAAM,OAAS,SAAWA,EAAM,UAC9BsZ,MAAA,OAAI,UAAU,4BACb,SAAAA,EAAA,IAAC,OACC,IAAKtZ,EAAM,SACX,IAAK,mBAAmBA,EAAM,WAAW,GACzC,UAAU,8DACV,QAAUlX,GAAM,CACR,MAAAsgH,EAAW,OAAO,OAAW,KAAe,OAAO,SAAS,SAAS,SAAS,WAAW,EAC3F,iBACA,GACFtgH,EAAA,cAAc,IAAM,GAAGsgH,CAAQ,+BACnC,IAEJ,EAGDppG,EAAM,OAAS,eAAiBA,EAAM,SACpCsZ,MAAA,OAAI,UAAU,iCACb,eAAC,IAAE,WAAU,gBAAiB,SAAAtZ,EAAM,OAAQ,GAC9C,EAGFsa,OAAC,MAAI,WAAU,6BACb,UAAAA,OAAC,IAAE,kBAAKta,EAAM,IAAG,EAChBA,EAAM,SAAWsa,OAAC,IAAE,yBAAYta,EAAM,SAAQ,EAC9CA,EAAM,YAAcsa,OAAC,IAAE,oBAAOta,EAAM,YAAW,GAClD,GACF,CAtDS,EAAAA,EAAM,EAuDjB,CACD,CACH,EAEJ,CACF,CClUA,MAAMjK,GAAS0mC,GAAa,OAAO,EAEnC,SAAwB8sE,IAAQ,CAC9BxzG,GAAO,KAAK,mCAAmC,EAE/C,MAAMinC,EAAWC,KAEX,CAAE,OAAA4D,GAAW2tD,KACb,CAAE,UAAA1tD,GAAc2tD,KAChB,CAAE,YAAAR,EAAa,eAAAC,CAAe,EAAIP,GAAQ,EAE1C,CAACgB,EAAcC,CAAe,EAAI/vE,EAAA,SAAqB,CAAE,GACzD,CAACmyB,EAAgBg+C,CAAiB,EAAInwE,WAAwB,IAAI,EAClE,CAAC2qF,EAAaC,CAAc,EAAI5qF,EAAA,SAAmC,CAAE,EAAG,EAAG,EAAG,EAAG,EACjF,CAAC6qF,EAAYC,CAAa,EAAI9qF,WAAS,EAAK,EAC5C,CAAC+qF,EAAiBC,CAAkB,EAAIhrF,WAAkB,EAAK,EAGrEC,YAAU,IAAM,CACa,eAAe,QAAQ,oBAAoB,IAC3C,QACzB+qF,EAAmB,EAAI,CAE3B,EAAG,CAAE,GAEL/qF,YAAU,IAAM,CAEd/oB,GAAO,KAAK,8BAA8B,EACnCA,GAAA,MAAM,4BAA6B+qC,CAAS,EACnD8tD,EAAgB9tD,CAAS,GACxB,CAACA,CAAS,CAAC,EAER,MAAAgpE,EAAwBpoE,GAAuB,CAC5C3rC,GAAA,KAAK,qBAAqB2rC,CAAU,EAAE,EAC7CstD,EAAkBttD,CAAU,EAE5B,MAAMxE,EAAWyxD,EAAa,KAAYhtD,KAAI,KAAOD,CAAU,EAC3DxE,GACFusE,EAAe,CAAE,EAAGvsE,EAAS,EAAG,EAAGA,EAAS,EAAG,CACjD,EAGI6sE,EAAkBjhH,GAAwC,CAC9DiN,GAAO,KAAK,mBAAmB,EAE3B,IAEF,MAAM2lB,EAAI,KAAK,MAAM5yB,EAAE,YAAY,OAAO,EACpC6yB,EAAI,KAAK,MAAM7yB,EAAE,YAAY,OAAO,EAG1CiN,GAAO,KAAK,0BAA0B2lB,CAAC,OAAOC,CAAC,EAAE,EAGlC8tF,EAAA,CAAE,EAAA/tF,EAAG,EAAAC,CAAA,CAAG,EACvBguF,EAAc,EAAI,EAGGK,UACd1hH,EAAO,CACPyN,GAAA,MAAM,mCAAoCzN,CAAK,CACxD,GAGI2hH,EAA0B,IAAM,OACpCl0G,GAAO,KAAK,wCAAwC,EACpDA,GAAO,MAAM,cAAe,CAAE,eAAAi7C,EAAgB,YAAAw4D,EAAa,WAAAE,EAAY,EAEnE,IACF,GAAI,CAAC14D,EAAgB,CACnBj7C,GAAO,KAAK,gDAAgD,EAC5D,MAAM,uCAAuC,EAC7C,MACF,CAEA,GAAI,CAAC2zG,IAAe,CAACF,EAAY,GAAK,CAACA,EAAY,GAAI,CACrDzzG,GAAO,KAAK,yDAAyD,EACrE,MAAM,sEAAsE,EAC5E,MACF,CAGM,MAAAi7F,EAAmBrC,EAAa,IAAgBzxD,GAChDA,EAAS,KAAO8T,GAClBj7C,GAAO,MAAM,mCAAoC,CAC/C,GAAImnC,EAAS,GACb,KAAMA,EAAS,KACf,KAAMA,EAAS,EACf,KAAMA,EAAS,EACf,KAAMssE,EAAY,EAClB,KAAMA,EAAY,EACnB,EACM,CAAE,GAAGtsE,EAAU,EAAGssE,EAAY,EAAG,EAAGA,EAAY,IAElDtsE,CACR,EAED0xD,EAAgBoC,CAAgB,EAChC2Y,EAAc,EAAK,EAGnB5zG,GAAO,KAAK,uDAAuD,EAC5DA,GAAA,MAAM,wBAAyBi7F,CAAgB,EAGtD,MAAMkZ,EAAmBppE,EAAU,KAAYa,KAAI,KAAOqP,CAAc,EAExE,GAAIk5D,EAAkB,CACpBn0G,GAAO,KAAK,+DAA+Dm0G,EAAiB,IAAI,EAAE,EAGlG,MAAMnd,EAAkB,CACtB,GAAGmd,EACH,EAAGV,EAAY,EACf,EAAGA,EAAY,GAIXW,EAAejc,EAAenB,CAAe,EAEnD,GAAIod,EAAa,QAAS,CACxBp0G,GAAO,MAAM,sDAAuD,CAClE,GAAIg3F,EAAgB,GACpB,KAAMA,EAAgB,KACtB,KAAMmd,EAAiB,EACvB,KAAMA,EAAiB,EACvB,KAAMV,EAAY,EAClB,KAAMA,EAAY,EACnB,EAGD,MAAMY,EAAiBvpE,EAAO,UAAgB92C,EAAM,eAAiBgjG,EAAgB,IAAI,EACzFh3F,GAAO,KAAK,kBAAkBq0G,EAAe,MAAM,gCAAgCrd,EAAgB,IAAI,EAAE,EAIzGh3F,GAAO,KAAK,GAAGq0G,EAAe,MAAM,gCAAgCrd,EAAgB,IAAI,uDAAuD,EAE/Ih3F,GAAO,KAAK,iCAAiCg3F,EAAgB,IAAI,OAAOqd,EAAe,MAAM,sBAAsB,OAEnHr0G,GAAO,MAAM,yCAAyCm0G,EAAiB,EAAE,GAAIC,EAAa,KAAK,CACjG,MAEOp0G,GAAA,KAAK,gBAAgBi7C,CAAc,6CAA6C,EAIzF,MAAM7O,GAAer1C,EAAA6hG,EAAa,QAAU1tE,EAAE,KAAO+vB,CAAc,IAA9C,YAAAlkD,EAAiD,KAC/DiJ,GAAA,KAAK,oCAAoCosC,CAAY,EAAE,EAC9D,MAAM,iCAAiCA,CAAY;AAAA,KAAQqnE,EAAY,CAAC,QAAQA,EAAY,CAAC;AAAA;AAAA,oDAAyD,QAC/IlhH,EAAO,CACPyN,GAAA,MAAM,gDAAiDzN,CAAK,EAC7D,wDAAkDA,CAAK,EAAE,CACjE,GAGI0hH,EAAuB,IAAM,CAGjC,GAFAj0G,GAAO,KAAK,mCAAmC,EAE3C,CAACi7C,EAAgB,CACnBj7C,GAAO,KAAK,yCAAyC,EACrD,MAAM,uCAAuC,EAC7C,MACF,CAGM,MAAAs0G,EAAgB1b,EAAa,IAAgBzxD,GAAA,CAC7C,GAAAA,EAAS,KAAO8T,EAAgB,CAE5B,MAAAi8C,EAAc,CAAE,GAAG/vD,EAAU,EAAGssE,EAAY,EAAG,EAAGA,EAAY,GACpEzzG,UAAO,MAAM,sDAAuD,CAClE,GAAImnC,EAAS,GACb,KAAMA,EAAS,KACf,KAAMA,EAAS,EACf,KAAMA,EAAS,EACf,KAAMssE,EAAY,EAClB,KAAMA,EAAY,EACnB,EACMvc,CACT,CACO,OAAA/vD,CAAA,CACR,EAGD0xD,EAAgByb,CAAa,EACtBt0G,GAAA,KAAK,gDAAiDyzG,CAAW,GAGpEc,EAAkB,IAAM,CAC5Bv0G,GAAO,KAAK,6BAA6B,EAErC,IACF,MAAMwsC,EAAgB,KAAK,UAAUosD,EAAc,KAAM,CAAC,EACpD/pD,EAAO,IAAI,KAAK,CAACrC,CAAa,EAAG,CAAE,KAAM,mBAAoB,EAC7Dx/B,EAAM,IAAI,gBAAgB6hC,CAAI,EAE9Bh2C,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOmU,EACTnU,EAAE,SAAW,iBACJ,cAAK,YAAYA,CAAC,EAC3BA,EAAE,MAAM,EACC,cAAK,YAAYA,CAAC,EAC3B,IAAI,gBAAgBmU,CAAG,EAEvBhN,GAAO,KAAK,qCAAqC,QAC1CzN,EAAO,CACPyN,GAAA,MAAM,+CAAiDzN,CAAK,EAC7D,uDAAiDA,CAAK,EAAE,CAChE,GAGIiiH,EAAc,IAAM,CACxBV,EAAmB,EAAI,EACR,uBAAQ,qBAAsB,MAAM,GAG/CW,EAAoB,IAAM,CAC9B,aAAa,MAAM,EACbh+F,GAAA,CACJ,MAAO,oBACP,YAAa,+CACb,QAAS,cACV,EACDzW,GAAO,KAAK,wCAAyC,EACrD,WAAW,IAAM,OAAO,SAAS,SAAU,IAAI,GAG3C00G,EAAkB,IAAM,CAC5B,aAAa,WAAW,mBAAmB,EACrCj+F,GAAA,CACJ,MAAO,0BACP,YAAa,oEACd,EACDzW,GAAO,KAAK,8CAA+C,GAG7D,OAAK6zG,EAoBHtvF,EAAA,KAAC,MAAI,WAAU,8CACb,UAACA,OAAA,OAAI,UAAU,yBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,UAAU,kBACV,QAAS,IAAMpJ,EAAS,EAAE,EAE1B,SAAA1jB,MAACi6E,GAAU,WAAU,SAAU,GACjC,EACCj6E,EAAA,UAAG,UAAU,oCAAoC,SAAc,oBAClE,EAEAA,MAAC,OAAI,UAAU,YACb,gBAACk4E,GAAK,cAAa,cAAc,UAAU,SACzC,UAACl3E,OAAAo3E,GAAA,CAAS,UAAU,0BAClB,UAACp4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,SAAS,SAAU,eACrCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,YAAY,SAAK,UACnCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,YAAY,SAAa,kBAC3Ct4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,gBAAgB,SAAa,kBAC/Ct4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,QAAQ,SAAgB,sBAC7C,EAGCt4E,MAAAw4E,GAAA,CAAY,MAAM,YACjB,gBAACO,GACC,WAAA/4E,MAACg5E,IACC,SAACh5E,EAAA,IAAAi5E,GAAA,CAAU,UAAU,iBAAiB,mCAAuB,CAC/D,GACCj5E,MAAAm5E,GAAA,CACC,SAACn4E,OAAA,OAAI,UAAU,yBACb,UAAAA,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAK,UAC/CA,EAAA,SAAE,UAAU,6BAA6B,SAAkD,6DAE3F,MAAI,WAAU,YACZ,SAAAq1E,EAAa,IACZzxD,GAAA5jB,EAAA,IAAC8sB,EAAA,CAEC,QAAS4K,IAAmB9T,EAAS,GAAK,UAAY,UACtD,UAAW,wBAAwB8T,IAAmB9T,EAAS,GAAK,eAAiB,EAAE,GACvF,QAAS,IAAM4sE,EAAqB5sE,EAAS,EAAE,EAE9C,SAASA,EAAA,MALLA,EAAS,EAOjB,GACH,GACF,EAEC8T,UACE,MACC,WAAC13B,EAAA,UAAG,UAAU,6BAA6B,SAAW,gBACrDA,EAAA,SAAE,UAAU,6BAA6B,SAE1C,iDAEAgB,OAAC,MAAI,WAAU,8BACb,UAAAA,OAAC,MACC,WAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,QAAQ,SAAC,MACxB9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,QACH,KAAK,SACL,MAAO4U,EAAY,EACnB,SAAW1gH,GAAM2gH,EAAe,CAAC,GAAGD,EAAa,EAAG1gH,EAAE,OAAO,MAAQ,SAASA,EAAE,OAAO,KAAK,EAAI,EAAE,EACpG,GACF,SACC,MACC,WAACwwB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,QAAQ,SAAC,MACxB9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,QACH,KAAK,SACL,MAAO4U,EAAY,EACnB,SAAW1gH,GAAM2gH,EAAe,CAAC,GAAGD,EAAa,EAAG1gH,EAAE,OAAO,MAAQ,SAASA,EAAE,OAAO,KAAK,EAAI,EAAE,EACpG,GACF,GACF,EAEAwwB,EAAA,IAAC8sB,EAAA,CACC,UAAU,2BACV,QAAS6jE,EACV,yCAED,EAEA3wF,EAAA,IAAC8sB,EAAA,CACC,UAAU,2BACV,QAAS4jE,EACV,+BAED,GACF,EAGF1vF,OAAC,MAAI,WAAU,WACb,UAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAK,UAC/CA,EAAA,SAAE,UAAU,6BAA6B,SAAiE,4EAE1G,MAAI,WAAU,uFACb,SAACA,MAAA,OAAI,UAAU,sBACb,SAAAA,EAAA,IAACo3B,GAAA,CACC,UAAWi+C,EACX,eAAA39C,EACA,QAAS+4D,CAAA,GAEb,CACF,IACF,GACF,CACF,IACF,CACF,GAGCzwF,MAAAw4E,GAAA,CAAY,MAAM,SACjB,gBAACO,GACC,WAAA/4E,MAACg5E,IACC,SAACh5E,EAAA,IAAAi5E,GAAA,CAAU,UAAU,iBAAiB,kCAAsB,CAC9D,GACCj5E,EAAA,IAAAm5E,GAAA,CACC,SAACn5E,EAAA,IAAA4hF,GAAA,CAAU,UAAW,IAAM,CAC1BnlG,GAAO,KAAK,8BAA8B,GACzC,CACL,IACF,CACF,GAGAujB,MAACw4E,IAAY,MAAM,YAAY,UAAU,YACvC,SAAAx4E,EAAA,IAACyuF,KAAoB,CACvB,GAGCzuF,MAAAw4E,GAAA,CAAY,MAAM,gBACjB,gBAACO,GACC,WAAA/4E,MAACg5E,IACC,SAACh5E,EAAA,IAAAi5E,GAAA,CAAU,UAAU,iBAAiB,uCAA2B,CACnE,UACCE,GACC,WAAAn5E,EAAA,IAAC28E,GAAkB,IAEnB38E,MAAC,MAAI,WAAU,OACb,SAAAA,EAAA,IAAC8sB,EAAA,CACC,UAAU,sBACV,QAASkkE,EACV,sCAGH,GACF,GACF,CACF,SAGCxY,GAAY,OAAM,QAAQ,UAAU,YACnC,gBAACO,GACC,WAAA/4E,MAACg5E,IACC,SAACh5E,EAAA,IAAAi5E,GAAA,CAAU,UAAU,iBAAiB,wCAA4B,CACpE,GACCj5E,MAAAm5E,GAAA,CACC,SAACn4E,OAAA,OAAI,UAAU,YACb,UAAAA,OAAC,MACC,WAAChB,EAAA,UAAG,UAAU,6BAA6B,SAAgC,qCAC1EA,EAAA,SAAE,UAAU,6BAA6B,SAE1C,2KACAA,EAAA,IAAC8sB,EAAA,CACC,QAASokE,EACT,UAAU,gDACX,iCAED,GACF,SAEC,MACC,WAAClxF,EAAA,UAAG,UAAU,6BAA6B,SAAgC,qCAC1EA,EAAA,SAAE,UAAU,6BAA6B,SAE1C,gIACAA,EAAA,IAAC8sB,EAAA,CACC,QAASqkE,EACT,UAAU,kDACX,sCAED,GACF,GACF,CACF,IACF,CACF,IACF,CACF,EACF,IAhNEnwF,EAAA,KAAC,MAAI,WAAU,8CACb,UAACA,OAAA,OAAI,UAAU,yBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,UAAU,kBACV,QAAS,IAAMpJ,EAAS,EAAE,EAE1B,SAAA1jB,MAACi6E,GAAU,WAAU,SAAU,GACjC,EACCj6E,EAAA,UAAG,UAAU,oCAAoC,SAAc,oBAClE,EAEAA,MAACmjF,GAAW,SAAS8N,CAAa,EACpC,GAqMN,CC1bA,MAAMx0G,GAAS0mC,GAAa,aAAa,EAEzC,SAAwBiuE,IAAc,CACpC,MAAM1tE,EAAWC,KACX,CAAC+G,EAAaknD,CAAc,EAAIrsE,EAAA,SAAuB,CAAE,GACzD,CAAC8rF,EAAkBC,CAAmB,EAAI/rF,WAAiB,EAAE,EAC7D,CAACwkB,EAAkBwnE,CAAmB,EAAIhsF,WAAiB,EAAE,EAC7D,CAACisF,EAAaC,CAAc,EAAIlsF,WAAwB,IAAI,EAG5D,CAACiwE,EAAeC,CAAgB,EAAIlwE,WAAuB,IAAI,EAC/D,CAACmsF,EAAkBC,CAAmB,EAAIpsF,WAAkB,EAAK,EAGjE,CAACqsF,EAA2BC,CAA4B,EAAItsF,WAAkB,EAAK,EACnF,CAACusF,EAA8BC,CAA+B,EAAIxsF,WAAkB,EAAK,EACzF,CAACysF,EAA6BC,CAA8B,EAAI1sF,WAAkB,EAAK,EAGvF,CAACssE,EAAmBC,CAAoB,EAAIvsE,WAAkB,EAAI,EAExEC,YAAU,IAAM,CAEdosE,EAAevoD,IAAgB,EAG/ByoD,EAAqB,EAAI,EAGfhiF,EAAA,cAAc,SAAU,wBAAwB,EAIpD,MAAAoiG,EAAoB,aAAa,QAAQ,mBAAmB,EAC5DC,EAAoBD,EAAoB,KAAK,MAAMA,CAAiB,EAAI,GAE1E3rF,GAAsBF,GAAgB,iBAAiB,GAAK,CAAC8rF,EAAkB9rF,GAAgB,iBAAiB,IAClHwrF,EAA6B,EAAI,EAEfM,EAAA9rF,GAAgB,iBAAiB,EAAI,IAGrDE,GAAsBF,GAAgB,qBAAqB,GAAK,CAAC8rF,EAAkB9rF,GAAgB,qBAAqB,IAC1H0rF,EAAgC,EAAI,EAElBI,EAAA9rF,GAAgB,qBAAqB,EAAI,IAGzDE,GAAsBF,GAAgB,gBAAgB,GAAK,CAAC8rF,EAAkB9rF,GAAgB,gBAAgB,IAChH4rF,EAA+B,EAAI,EAEjBE,EAAA9rF,GAAgB,gBAAgB,EAAI,IAIxD,aAAa,QAAQ,oBAAqB,KAAK,UAAU8rF,CAAiB,CAAC,CAC7E,EAAG,CAAE,GAEC,MAAAC,EAAqBvgG,GAAoB,CACvC,MAAAwgG,EAAgBxoE,GAAiBh4B,CAAO,EAC9C+/E,EAAeygB,CAAa,EAElBviG,EAAA,wBAAwBO,GAAY,OAAQ,QAASwB,EAAS,CAAE,OAAQ,QAAS,GAGvFygG,EAAyBzgG,GAAoB,CAC7C,IAACw/F,GAAoB,CAACtnE,EAAkB,OAE5C,MAAMwoE,EAA2B,SAAK,GAAGlB,CAAgB,IAAItnE,CAAgB,EAAE,EACzEsoE,EAAgBvoE,GAAqBj4B,EAAS0gG,EAAqB,YAAa,GACtF3gB,EAAeygB,CAAa,EAC5BZ,EAAe,IAAI,EACnBH,EAAoB,EAAE,EACtBC,EAAoB,EAAE,EAEtBzhG,EAAU,wBAAwBO,GAAY,eAAgB,CAAE,SAAUwB,EAAS,YAAa0gG,EAAqB,YAAY,EAAG,OAAQ,OAAS,IAIjJ/f,EAAsB,MAAO/hG,GAAsB,CACnD,IACFgM,GAAO,KAAK,kCAAmC,CAAE,QAAShM,EAAM,GAAI,EAE9D,MAAA4P,EAAS,MAAMqwF,GAAcjgG,CAAK,EAExC,GAAI4P,EAAO,QACH6S,GAAA,CACJ,MAAO,sBACP,YAAa,8CACb,QAAS,UACV,EACDzW,GAAO,KAAK,6BAA8B,CAAE,QAAShM,EAAM,GAAI,EAE/Dqf,EAAU,wBAAwBO,GAAY,MAAO,CAAE,WAAY,kBAAmB,SAAU5f,EAAM,GAAI,QAAS,GAAM,OAAQ,OAAS,OACrI,CACL,IAAImc,EAAe,wDAEfvM,EAAO,YAAcovF,GAAkB,cAC1B7iF,EAAA,4DACNvM,EAAO,YAAcovF,GAAkB,oBACjC7iF,EAAA,iDAGXsG,GAAA,CACJ,MAAO,SACP,YAAatG,EACb,QAAS,cACV,EACDnQ,GAAO,MAAM,uCAAwC,CACnD,QAAShM,EAAM,GACf,UAAW4P,EAAO,UAClB,aAAcA,EAAO,aACtB,EAEDyP,EAAU,wBAAwBO,GAAY,MAAO,CAAE,WAAY,kBAAmB,SAAU5f,EAAM,GAAI,QAAS,GAAO,WAAY4P,EAAO,UAAW,OAAQ,QAAS,CAC3K,QACOrR,EAAO,CACRkkB,GAAA,CACJ,MAAO,SACP,YAAa,qCACb,QAAS,cACV,EACDzW,GAAO,MAAM,0CAA2C,CAAE,MAAAzN,CAAO,GAEjE8gB,EAAU,wBAAwBO,GAAY,MAAO,CAAE,WAAY,kBAAmB,SAAU5f,EAAM,GAAI,QAAS,GAAO,UAAW,GAAM,OAAQ,QAAS,CAC9J,GAGI+hH,EAAmBpD,GAAuB,CACxC,MAAApuG,EAAO,IAAI,KAAKouG,CAAU,EAChC,OAAOnC,GAAOjsG,EAAM,mBAAoB,CAAE,OAAQwtG,GAAI,GAItD,OAAAxtF,EAAA,KAAC,MAAI,WAAU,8BAEb,UAAAhB,EAAA,IAAC0F,GAAA,CACC,QAASksF,EACT,QAAS9qF,GAAiCT,GAAgB,iBAAiB,EAC3E,WAAY,IAAMwrF,EAA6B,EAAK,EACtD,EACA7xF,EAAA,IAAC0F,GAAA,CACC,QAASosF,EACT,QAAShrF,GAAiCT,GAAgB,qBAAqB,EAC/E,WAAY,IAAM0rF,EAAgC,EAAK,EACzD,EACA/xF,EAAA,IAAC0F,GAAA,CACC,QAASssF,EACT,QAASlrF,GAAiCT,GAAgB,gBAAgB,EAC1E,WAAY,IAAM4rF,EAA+B,EAAK,EACxD,EAEAjxF,OAAC,MAAI,WAAU,6BACb,UAACA,OAAA,UAAO,UAAU,yCAChB,UAAAA,EAAA,KAAC8rB,GAAO,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,CAAEh9B,EAAU,iBAAiBO,GAAY,KAAM,SAAU,CAAE,KAAM,eAAgB,EAAGqzB,EAAS,GAAG,CAC/I,YAAC1jB,MAAAi6E,GAAA,CAAU,UAAU,cAAe,GAAE,UAExC,EACCj6E,EAAA,UAAG,UAAU,mCAAmC,SAAsB,2BACvEA,MAAC,MAAI,WAAU,MAAO,IACxB,EAEC0qB,EAAY,SAAW,EACrB1pB,EAAA,YAAI,UAAU,oBACb,UAAChB,EAAA,SAAE,UAAU,gBAAgB,SAA+C,oDAC5EA,EAAA,IAAC8sB,EAAA,CACC,UAAU,oBACV,QAAS,IAAMpJ,EAAS,UAAU,EACnC,6BAED,EACF,GAEA1jB,MAAC,MAAI,WAAU,YACZ,SAAA0qB,EAAY,IAAKj6C,GAChBuwB,OAAC+3E,GAAoB,WAAU,mBAC7B,UAAA/4E,MAACg5E,IAAW,UAAU,YACpB,SAACh4E,EAAA,YAAI,UAAU,mCACb,UAAAhB,EAAA,IAACi5E,GAAU,WAAU,wBAAyB,SAAAxoG,EAAM,MAAM,EAC1DuwB,OAAC,MAAI,WAAU,oBACZ,WAACvwB,EAAM,kBACNuvB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,kCACV,QAAS,IAAM2kE,EAAehhH,EAAM,EAAE,EAEtC,SAAAuvB,MAACyyF,GAAK,WAAU,SAAU,GAC5B,EAED5gB,GACC7xE,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,kCACV,QAAS,IAAM0lD,EAAoB/hG,CAAK,EACxC,MAAM,wBAEN,SAAAuvB,MAAC01C,GAAS,WAAU,SAAU,GAChC,EAEF11C,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,2BACV,QAAS,IAAMslE,EAAkB3hH,EAAM,EAAE,EAEzC,SAAAuvB,MAAC0yF,GAAO,WAAU,SAAU,GAC9B,GACF,GACF,CACF,SACCvZ,GAAY,WAAU,iBACrB,SAACn4E,EAAA,YAAI,UAAU,oBACb,UAACA,OAAA,OAAI,UAAU,kCACb,UAAChB,MAAA01C,GAAA,CAAS,UAAU,cAAe,UAClC,OAAM,WAAMjlE,EAAA,KAAK,IAAWk4C,OAAQ,SAAW,KAAO,IAAI,EAAE,KAAK,GAAG,EAAE,KAAGl4C,EAAM,MAAK,GACvF,EACAuwB,OAAC,MAAI,WAAU,oCACb,UAACA,OAAA,OAAI,UAAU,kCACb,UAAChB,MAAAytB,GAAA,CAAO,UAAU,cAAe,GACjCztB,MAAC,OAAM,UAAAvvB,EAAM,YAAa,IAC5B,EAGAuwB,EAAA,KAAC8rB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,kHACV,QAAS,IAAM,CAEb6kE,EAAoB,EAAI,EACxBlc,EAAiBhlG,CAAK,EAEZqf,EAAA,wBAAwBO,GAAY,cAAe,CAAE,SAAU5f,EAAM,GAAI,OAAQ,QAAS,CACtG,EAEA,UAACuvB,MAAA61C,GAAA,CAAK,UAAU,cAAe,GAAE,WAEnC,GACF,EAECplE,EAAM,kBACJuwB,OAAA,OAAI,UAAU,mCACb,UAAChB,MAAAyyF,GAAA,CAAK,UAAU,cAAe,UAC9B,OAAK,sBAASD,EAAgB/hH,EAAM,gBAAgB,GAAE,GACzD,EAGD+gH,IAAgB/gH,EAAM,GACpBuwB,EAAA,YAAI,UAAU,mCACb,UAACA,OAAA,OAAI,UAAU,OACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,UAAU,qBAAqB,SAAiB,sBACvD9jC,OAAC,MAAI,WAAU,yBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,qBACV,QAAS,IAAM,CAGP,MAAA6lE,EAAWliH,EAAM,KAAK,CAAC,EACvBs/F,MAAgB,KAEhB6iB,EAAWD,IAAa,SAAW,EAAI,EACtC,KAAA5iB,EAAU,OAAO,IAAM6iB,GAC5B7iB,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,EAErC,MAAA8iB,EAAe,IAAI,KAAK9iB,CAAS,EACvC8iB,EAAa,QAAQA,EAAa,QAAQ,EAAI,CAAC,EAC/CvB,EAAoBuB,EAAa,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EAC5DtB,EAAoB,OAAO,EAC3Be,EAAsB7hH,EAAM,EAAE,CAChC,EACD,wBAED,EACAuvB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,qBACV,QAAS,IAAM,CAGP,MAAA6lE,EAAWliH,EAAM,KAAK,CAAC,EACvBs/F,MAAgB,KAEhB6iB,EAAWD,IAAa,SAAW,EAAI,EACtC,KAAA5iB,EAAU,OAAO,IAAM6iB,GAC5B7iB,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,EAE3C,MAAM+iB,EAAYriH,EAAM,KAAK,MAAM,GAAG,EACtCs/F,EAAU,SAAS,SAAS+iB,EAAU,CAAC,CAAC,EAAG,SAASA,EAAU,CAAC,GAAK,GAAG,EAAG,CAAC,EACrE,MAAAD,EAAe,IAAI,KAAK9iB,CAAS,EACvC8iB,EAAa,SAASA,EAAa,SAAS,EAAI,CAAC,EACjDvB,EAAoBuB,EAAa,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EACxCtB,EAAA,GAAGsB,EAAa,SAAS,EAAE,WAAW,SAAS,EAAG,GAAG,CAAC,IAAIA,EAAa,aAAa,SAAS,EAAE,SAAS,EAAG,GAAG,CAAC,EAAE,EACrIP,EAAsB7hH,EAAM,EAAE,CAChC,EACD,0BAED,EACAuvB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,qBACV,QAAS,IAAM,CAGP,MAAA6lE,EAAWliH,EAAM,KAAK,CAAC,EACvBs/F,MAAgB,KAEhB6iB,EAAWD,IAAa,SAAW,EAAI,EACtC,KAAA5iB,EAAU,OAAO,IAAM6iB,GAC5B7iB,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,EAE3CuhB,EAAoBvhB,EAAU,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EACzDwhB,EAAoB,OAAO,EAC3Be,EAAsB7hH,EAAM,EAAE,CAChC,EACD,yBAED,EACAuvB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,qBACV,QAAS,IAAM,CAGP,MAAA6lE,EAAWliH,EAAM,KAAK,CAAC,EACvBs/F,MAAgB,KAEhB6iB,EAAWD,IAAa,SAAW,EAAI,EACtC,KAAA5iB,EAAU,OAAO,IAAM6iB,GAC5B7iB,EAAU,QAAQA,EAAU,QAAQ,EAAI,CAAC,EAE3CuhB,EAAoBvhB,EAAU,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC,EACzDwhB,EAAoB,OAAO,CAC7B,EACD,wBAED,GACF,GACF,EAGAvwF,OAAC,MAAI,WAAU,8BACb,UAAAA,OAAC,MACC,WAAChB,MAAA8kC,GAAA,CAAM,QAAS,QAAQr0D,EAAM,EAAE,GAAI,UAAU,eAAe,SAAI,SACjEuvB,EAAA,IAACs7E,GAAA,CACC,GAAI,QAAQ7qG,EAAM,EAAE,GACpB,KAAK,OACL,UAAU,cACV,MAAO4gH,EACP,SAAW7hH,GAAM8hH,EAAoB9hH,EAAE,OAAO,KAAK,EACrD,GACF,SACC,MACC,WAACwwB,MAAA8kC,GAAA,CAAM,QAAS,QAAQr0D,EAAM,EAAE,GAAI,UAAU,eAAe,SAAK,UAClEuvB,EAAA,IAACs7E,GAAA,CACC,GAAI,QAAQ7qG,EAAM,EAAE,GACpB,KAAK,OACL,UAAU,cACV,MAAOs5C,EACP,SAAWv6C,GAAM+hH,EAAoB/hH,EAAE,OAAO,KAAK,EACrD,GACF,GACF,EACAwxB,OAAC,MAAI,WAAU,sBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,UAAU,kCACV,QAAS,IAAMwlE,EAAsB7hH,EAAM,EAAE,EAC9C,mBAED,EACAuvB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,UACR,UAAU,qBACV,QAAS,IAAM2kE,EAAe,IAAI,EACnC,mBAED,GACF,GACF,EACE,MACN,CACF,EApNS,GAAAhhH,EAAM,EAqNjB,CACD,EACH,QAID8kE,GAAiB,IAGlBv1C,EAAA,IAAC0xE,GAAA,CACC,MAAO8D,EACP,OAAQkc,EACR,QAAS,IAAM,CACbC,EAAoB,EAAK,EACzBlc,EAAiB,IAAI,CACvB,EACA,OAAO,QACT,GACF,CACF,GAEJ,CC3aO,MAAMsd,GAAexvE,gBAGzB,CACD,eAAgB,GAChB,kBAAmB,IAAM,CAAC,CAC5B,CAAC,EAGYyvE,GAAW,IACNC,aAAWF,EAAY,ECElC,SAASG,IAAe,CAC7B,MAAMtvE,EAAWC,KACXsvE,EAAex+D,SAAsB,IAAI,EAG/CnvB,mBAAU,IAAM,CACd,MAAMgwC,EAAc5xB,EAAS,SACvBhzB,EAAY,SAAS,MAG3BuB,GAAcqjD,EAAa5kD,CAAS,EAGhCuiG,EAAa,SAAWA,EAAa,UAAY39C,GACzC1lD,EAAA,iBAAiBqjG,EAAa,QAAS39C,CAAW,EAI9D29C,EAAa,QAAU39C,CAAA,EACtB,CAAC5xB,EAAS,QAAQ,CAAC,EAGf,CAEL,WAAY,CAACtzB,EAAyBC,EAAqBC,IACzD4B,GAAW9B,EAAUC,EAAQC,CAAU,EAGzC,iBAAkB,CAACD,EAAqBQ,EAAiBP,IACvD6B,GAAiB9B,EAAQQ,EAASP,CAAU,EAG9C,WAAY,CAACa,EAA6C/gB,EAAgB4J,EAAkBsW,IAC1F8B,GAAWjB,EAAW/gB,EAAQ4J,EAASsW,CAAU,EAGnD,gBAAiB,CAACY,EAAqBZ,IACrC+B,GAAgBnB,EAAaZ,CAAU,EAGzC,wBAAyB,CAACD,EAAqBS,EAAqBC,EAAmBT,IACrFV,EAAU,wBAAwBS,EAAQS,EAAaC,EAAWT,CAAU,EAG9E,sBAAuB,CAACD,EAAqBW,EAAmBC,EAAiBX,IAC/EV,EAAU,sBAAsBS,EAAQW,EAAWC,EAASX,CAAU,EAGxE,oBAAqB,CAACD,EAAqBC,IACzCV,EAAU,oBAAoBS,EAAQC,CAAU,EAGlD,wBAAyB,CAACD,EAAqBC,IAC7CV,EAAU,wBAAwBS,EAAQC,CAAU,EAGtD,0BAA2B,CAACD,EAAqBC,IAC/CV,EAAU,0BAA0BS,EAAQC,CAAU,EAGxD,yBAA0B,CAACD,EAAqBC,IAC9CV,EAAU,yBAAyBS,EAAQC,CAAU,EAGvD,gBAAiB,CAACD,EAAqBC,IACrCV,EAAU,gBAAgBS,EAAQC,CAAU,EAG9C,WAAY,CAACD,EAAqBphB,EAAiBqhB,IACjDV,EAAU,WAAWS,EAAQphB,EAASqhB,CAAU,EAEtD,CChFA,SAAwB4iG,IAAa,CACnC,MAAM1vE,EAAWC,KACX,CAAC0vE,EAAcC,CAAe,EAAI/tF,WAAS,CAAC,EAC5C,CAACguF,EAAcC,CAAe,EAAIjuF,WAAS,EAAK,EAChD,CAAE,kBAAAkuF,GAAsBT,KACxBljG,EAAYojG,KAElB1tF,YAAU,IAAM,CAEJ1V,EAAA,gBAAgBO,GAAY,iBAAkB,CACtD,UAAW,IAAI,KAAK,EAAE,YAAY,EACnC,CACH,EAAG,CAAE,GAELmV,YAAU,IAAM,CACR,MAAAkuF,EAAmBC,EAAON,CAAY,EAElCvjG,EAAA,gBAAgBO,GAAY,sBAAuB,CAC3D,YAAagjG,EACb,YAAaK,EAAiB,MAC9B,UAAW,CAAC,CAACA,EAAiB,MAC/B,GACA,CAACL,CAAY,CAAC,EAEjB7tF,YAAU,IAAM,CACd,QAAQ,IAAI,uDAAuD,EACtD,qBAAQ,oBAAqB,MAAM,EAChDiuF,EAAkB,EAAI,GACrB,CAACA,CAAiB,CAAC,EAEtB,MAAME,EAAS,CACb,CACE,MAAO,oDACP,YAAa,CACX,yHACA,iHACF,EACA,MAAO,wBACP,MAAO,wBACT,EACA,CACE,MAAO,oDACP,YAAa,CACX,yHACA,iHACF,EACA,MAAO,wBACT,EACA,CACE,MAAO,wBACP,YAAa,CACX,2EACA,gFACA,0EACF,EACA,MAAO,wBACT,EACA,CACE,MAAO,oBACP,YAAa,CACX,iGACA,mEACA,2DACF,EACA,MAAO,wBACT,EACA,CACE,MAAO,4BACP,YAAa,CACX,iFACA,2EACA,kGACF,EACA,MAAO,wBACT,GAGIC,EAAY,IAAM,CACtB,QAAQ,IAAI,oDAAoD,EAChEH,EAAkB,EAAI,EACT,qBAAQ,oBAAqB,MAAM,EACtC3jG,EAAA,WAAW,OAAQ,SAAU,GAAM,CAC3C,cAAeujG,EACf,aAAcM,EAAO,OACtB,EAEGN,EAAeM,EAAO,OAAS,GACjCL,EAAgBD,EAAe,CAAC,CAClC,EAIIQ,EAAY,IAAM,CACtB,QAAQ,IAAI,oDAAoD,EAChEJ,EAAkB,EAAI,EACT,qBAAQ,oBAAqB,MAAM,EACtC3jG,EAAA,WAAW,QAAS,SAAU,GAAM,CAC5C,cAAeujG,EACf,aAAcM,EAAO,OACtB,EAEGN,EAAe,GACjBC,EAAgBD,EAAe,CAAC,CAClC,EAGIS,EAAe,IAAM,CAEzB,GAAIP,EAAc,CAChB,QAAQ,IAAI,+CAA+C,EAC3D,MACF,CAEI,IACFC,EAAgB,EAAI,EACpB,QAAQ,IAAI,gDAAgD,EAC5D,QAAQ,IAAI,sEAAuE,aAAa,QAAQ,mBAAmB,CAAC,EAE/G,qBAAQ,oBAAqB,MAAM,EAChD,QAAQ,IAAI,+DAAgE,aAAa,QAAQ,mBAAmB,CAAC,EAG3G1jG,EAAA,gBAAgBO,GAAY,oBAAqB,CACzD,oBAAqBgjG,EAAe,EACpC,gBAAiB,IAAI,KAAK,EAAE,YAAY,EACzC,EAED,QAAQ,IAAI,8CAA+C,OAAO,SAAS,IAAI,EAC/E,QAAQ,IAAI,0CAA0C,EAGtD3vE,EAAS,OAAQ,CAAE,QAAS,EAAM,GAElC,QAAQ,IAAI,0CAA0C,EAGtD,WAAW,IAAM,CACf,QAAQ,IAAI,6CAA8C,OAAO,SAAS,IAAI,GAC7E,GAAG,QAEC10C,EAAO,CACN,cAAM,+DAAgEA,CAAK,EAEnF00C,EAAS,OAAQ,CAAE,QAAS,EAAM,UAClC,CAEA,WAAW,IAAM8vE,EAAgB,EAAK,EAAG,GAAI,CAC/C,GAGIO,EAAgB,CAACtjH,EAAY4nE,IAAkB,CAE/CA,EAAK,OAAO,EAAI,KAAmBg7C,EAAeM,EAAO,OAAS,GAE1D7jG,EAAA,WAAW,OAAQ,UAAW,GAAM,CAC5C,cAAeujG,EACf,aAAcM,EAAO,OACrB,eAAgB,KAAK,IAAIt7C,EAAK,OAAO,CAAC,EACvC,EACDi7C,EAAgBD,EAAe,CAAC,GACvBh7C,EAAK,OAAO,EAAI,IAAkBg7C,EAAe,GAEhDvjG,EAAA,WAAW,QAAS,UAAW,GAAM,CAC7C,cAAeujG,EACf,aAAcM,EAAO,OACrB,eAAgB,KAAK,IAAIt7C,EAAK,OAAO,CAAC,EACvC,EACDi7C,EAAgBD,EAAe,CAAC,GAGtBvjG,EAAA,WACRuoD,EAAK,OAAO,EAAI,EAAI,OAAS,QAC7B,UACA,GACA,CACE,cAAeg7C,EACf,aAAcM,EAAO,OACrB,eAAgB,KAAK,IAAIt7C,EAAK,OAAO,CAAC,CACxC,EAEJ,EAGI27C,EAAkB,IAAM,CAC5B,QAAQ,IAAI,6BAA6B,EACzCP,EAAkB,EAAI,EACT,qBAAQ,oBAAqB,MAAM,EAGhD3jG,EAAU,sBAAsBO,GAAY,KAAM,QAAS,oBAAoBgjG,CAAY,GAAI,CAC7F,YAAaA,EACb,YAAaM,EAAON,CAAY,EAAE,MACnC,GAGGY,EAAmB,IAAM,CAC7B,QAAQ,IAAI,kCAAkC,EAG9CnkG,EAAU,sBAAsBO,GAAY,MAAO,QAAS,oBAAoBgjG,CAAY,GAAI,CAC9F,YAAaA,EACb,YAAaM,EAAON,CAAY,EAAE,MACnC,GAGGa,EAAmB,IAAM,CAC7B,QAAQ,IAAI,6BAA6B,EAGzCpkG,EAAU,sBAAsBO,GAAY,SAAU,QAAS,oBAAoBgjG,CAAY,GAAI,CACjG,YAAaA,EACb,YAAaM,EAAON,CAAY,EAAE,MACnC,GAgBH,cACG,OAAI,UAAU,2DAEb,UAACrzF,MAAA,OAAI,UAAU,uBAQf,QAGC,OAAI,UAAU,yDACb,SAACA,MAAA,OAAI,UAAU,iBACZ,SAAO2zF,EAAA,IAAI,CAACx+G,EAAG8Z,IACd+Q,EAAA,IAAC,OAEC,UAAW,wBAAwB/Q,IAAUokG,EAAe,eAAiB,aAAa,IADrFpkG,CAAA,CAGR,EACH,EACF,EAGA+Q,EAAA,IAAC8mB,GAAO,IAAP,CACC,UAAU,wDACV,KAAK,IACL,gBAAiB,CAAE,KAAM,EAAG,MAAO,CAAE,EACrC,UAAWitE,EACX,MAAO,CAAE,YAAa,OAAQ,EAChC,QAGC,MAAI,WAAU,gDACb,SAAC/yF,EAAA,YAAI,UAAU,uCAEb,UAAAhB,MAAC,MAAG,UAAU,0DAA2D,SAAO2zF,EAAAN,CAAY,EAAE,MAAM,EAEnGA,IAAiB,QAEf,MAAI,WAAU,2EACb,SAACrzF,MAAA,OAAI,UAAU,yDACb,SAAAA,EAAA,IAAC,SACC,UAAU,wBACV,SAAQ,GACR,YAAW,GACX,IAAKquB,GAAaslE,EAAON,CAAY,EAAE,OAAS,EAAE,EAClD,aAAY,UAAUM,EAAON,CAAY,EAAE,KAAK,GAChD,OAAQW,EACR,QAASC,EACT,QAASC,EACT,QAAU1kH,GAAMA,EAAE,gBAAgB,EACpC,EACF,EACF,EAIEwxB,OAAA0rB,WAAA,WAAC1sB,EAAA,WAAI,UAAU,4DACZ,SAAO2zF,EAAAN,CAAY,EAAE,MACnBrzF,EAAA,UAAI,WAAU,yDACb,SAAAA,EAAA,IAAC,SACC,UAAU,wBACV,SAAQ,GACR,YAAW,GACX,IAAKquB,GAAaslE,EAAON,CAAY,EAAE,OAAS,EAAE,EAClD,aAAY,UAAUM,EAAON,CAAY,EAAE,KAAK,GAChD,OAAQW,EACR,QAASC,EACT,QAASC,EACT,QAAU1kH,GAAMA,EAAE,gBAAgB,EACpC,EACF,EAEAwwB,EAAA,IAAC,OACC,UAAU,qDACV,MAAO,CAAE,gBAAiB,OAAOquB,GAAaslE,EAAON,CAAY,EAAE,KAAK,CAAC,GAAI,EAC7E,aAAYM,EAAON,CAAY,EAAE,QAGvC,EAEArzF,MAAC,OAAI,UAAU,uCACZ,eAAM,QAAQ2zF,EAAON,CAAY,EAAE,WAAW,EAC5CrzF,MAAA,MAAI,WAAU,YACZ,SAAO2zF,EAAAN,CAAY,EAAE,YAAY,IAAI,CAACc,EAAMpjH,IAC1CivB,MAAA,KAAU,UAAU,iDAAiD,wBAAyB,CAAE,OAAQm0F,EAAjG,EAAApjH,CAAyG,CAClH,CACH,GAEAivB,MAAC,KAAE,UAAU,iDAAiD,wBAAyB,CAAE,OAAQ2zF,EAAON,CAAY,EAAE,WAAY,EAAG,EAEzI,GACF,GAEJ,EACF,EAGCryF,OAAA,MAAI,WAAU,0FACZ,UAAAqyF,EAAe,GACdrzF,EAAA,IAAC8sB,EAAA,CACC,QAAS+mE,EACT,UAAU,qDACX,qBAED,EAGF7zF,EAAA,IAAC8sB,EAAA,CACC,QAASumE,IAAiBM,EAAO,OAAS,EAAIG,EAAeF,EAC7D,UAAU,iCAET,SAAiBP,IAAAM,EAAO,OAAS,EAAI,YAAc,UACtD,GACF,GACF,CAEJ,CCtVA,SAASS,GAAgBjhB,EAAckhB,EAAS,CAC9C,OAAOC,EAAgB,WAAC,CAACthG,EAAOviB,IACZ4jH,EAAQrhG,CAAK,EAAEviB,CAAK,GAClBuiB,EACnBmgF,CAAY,CACjB,CAIA,IAAIohB,GAAmB,aACnB,CAACC,GAAyBC,EAAqB,EAAIrnF,GAAmBmnF,EAAgB,EACtF,CAACG,GAAoBC,EAAoB,EAAIH,GAAwBD,EAAgB,EACrFK,GAAaC,EAAiB,WAChC,CAAC79G,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,kBAAA0kF,EACA,KAAAj+G,EAAO,QACP,IAAAskD,EACA,gBAAA45D,EAAkB,IAClB,GAAGC,CACJ,EAAGh+G,EACE,CAACi+G,EAAYC,CAAa,EAAIC,EAAe,SAAC,IAAI,EAClD,CAACC,EAAUC,CAAW,EAAIF,EAAe,SAAC,IAAI,EAC9C,CAACtjF,EAASwpB,CAAU,EAAI85D,EAAe,SAAC,IAAI,EAC5C,CAACG,EAAYC,CAAa,EAAIJ,EAAe,SAAC,IAAI,EAClD,CAACK,EAAYC,CAAa,EAAIN,EAAe,SAAC,IAAI,EAClD,CAACO,EAAaC,CAAc,EAAIR,EAAe,SAAC,CAAC,EACjD,CAACS,EAAcC,CAAe,EAAIV,EAAe,SAAC,CAAC,EACnD,CAACW,EAAmBC,CAAoB,EAAIZ,EAAe,SAAC,EAAK,EACjE,CAACa,EAAmBC,CAAoB,EAAId,EAAe,SAAC,EAAK,EACjE7kF,EAAeC,GAAgBH,EAAeuiC,GAASuiD,EAAcviD,CAAI,CAAC,EAC1EthD,EAAYoqC,GAAaN,CAAG,EAClC,OAAuBn7B,EAAG,IACxB00F,GACA,CACE,MAAOI,EACP,KAAAj+G,EACA,IAAKwa,EACL,gBAAA0jG,EACA,WAAAE,EACA,SAAAG,EACA,iBAAkBC,EAClB,QAAAxjF,EACA,gBAAiBwpB,EACjB,WAAAi6D,EACA,mBAAoBC,EACpB,kBAAAO,EACA,0BAA2BC,EAC3B,WAAAP,EACA,mBAAoBC,EACpB,kBAAAO,EACA,0BAA2BC,EAC3B,oBAAqBN,EACrB,qBAAsBE,EACtB,SAA0B71F,EAAG,IAC3B4Q,GAAU,IACV,CACE,IAAKvf,EACL,GAAG2jG,EACH,IAAK1kF,EACL,MAAO,CACL,SAAU,WAET,mCAAqColF,EAAc,KACnD,oCAAsCE,EAAe,KACtD,GAAG5+G,EAAM,KACV,CACF,CACF,CACF,CACP,CACG,CACH,EACA49G,GAAW,YAAcL,GACzB,IAAI2B,GAAgB,qBAChBC,GAAqBtB,EAAiB,WACxC,CAAC79G,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,kBAAA0kF,EAAmB,SAAA7mF,EAAU,QAAA8e,EAAS,MAAAqpE,EAAO,GAAGC,CAAe,EAAGr/G,EACpEkrB,EAAUyyF,GAAqBuB,GAAepB,CAAiB,EAC/D/0F,EAAMu2F,SAAc,IAAI,EACxBhmF,EAAeC,GAAgBH,EAAcrQ,EAAKmC,EAAQ,gBAAgB,EAChF,OAAuBlB,EAAI,KAAC0rB,WAAU,CAAE,SAAU,CAChC1sB,EAAG,IACjB,QACA,CACE,wBAAyB,CACvB,OAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAkBT,EACD,MAAAo2F,CACD,CACF,EACep2F,EAAG,IACjB4Q,GAAU,IACV,CACE,kCAAmC,GACnC,GAAGylF,EACH,QAAAtpE,EACA,IAAKzc,EACL,MAAO,CAYL,UAAWpO,EAAQ,kBAAoB,SAAW,SAClD,UAAWA,EAAQ,kBAAoB,SAAW,SAClD,GAAGlrB,EAAM,KACV,EACD,SAAUu/G,GAAW,CAAE,QAAAxpE,EAAS,SAAA9e,CAAU,EAAGuoF,GAA8Bx2F,EAAG,IAC5E,MACA,CACE,iCAAkC,GAClC,IAAKkC,EAAQ,gBACb,MAAO,CAAE,SAAUA,EAAQ,kBAAoB,cAAgB,MAAQ,EACvE,SAAUs0F,CACX,CACb,CAAW,CACF,CACF,CACF,EAAE,CACJ,CACH,EACAL,GAAmB,YAAcD,GACjC,IAAIO,GAAiB,sBACjBC,GAAsB7B,EAAiB,WACzC,CAAC79G,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,WAAAgB,EAAY,GAAGulF,CAAc,EAAK3/G,EACpCkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE,CAAE,0BAAA4/G,EAA2B,0BAAAC,CAA2B,EAAG30F,EAC3D40F,EAAe9/G,EAAM,cAAgB,aAC3C+/G,mBAAiB,KACfD,EAAeF,EAA0B,EAAI,EAAIC,EAA0B,EAAI,EACxE,IAAM,CACXC,EAAeF,EAA0B,EAAK,EAAIC,EAA0B,EAAK,CACzF,GACO,CAACC,EAAcF,EAA2BC,CAAyB,CAAC,EAChE30F,EAAQ,OAAS,QAA0BlC,EAAG,IAACg3F,GAA0B,CAAE,GAAGL,EAAgB,IAAKvmF,EAAc,WAAAgB,CAAU,CAAE,EAAIlP,EAAQ,OAAS,SAA2BlC,MAAIi3F,GAA2B,CAAE,GAAGN,EAAgB,IAAKvmF,EAAc,WAAAgB,CAAY,GAAIlP,EAAQ,OAAS,OAAyBlC,MAAIk3F,GAAyB,CAAE,GAAGP,EAAgB,IAAKvmF,EAAc,WAAAgB,EAAY,EAAIlP,EAAQ,OAAS,SAA2BlC,EAAG,IAACm3F,GAA4B,CAAE,GAAGR,EAAgB,IAAKvmF,EAAc,EAAI,IACngB,CACH,EACAsmF,GAAoB,YAAcD,GAClC,IAAIO,GAA2BnC,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACxE,KAAM,CAAE,WAAAgB,EAAY,GAAGulF,CAAc,EAAK3/G,EACpCkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE,CAACogH,EAASC,CAAU,EAAIlC,EAAe,SAAC,EAAK,EACnD4B,mBAAiB,IAAM,CACrB,MAAM9B,EAAa/yF,EAAQ,WAC3B,IAAIo1F,EAAY,EAChB,GAAIrC,EAAY,CACd,MAAMsC,EAAqB,IAAM,CAC/B,OAAO,aAAaD,CAAS,EAC7BD,EAAW,EAAI,CACvB,EACYG,EAAqB,IAAM,CAC/BF,EAAY,OAAO,WAAW,IAAMD,EAAW,EAAK,EAAGn1F,EAAQ,eAAe,CACtF,EACM,OAAA+yF,EAAW,iBAAiB,eAAgBsC,CAAkB,EAC9DtC,EAAW,iBAAiB,eAAgBuC,CAAkB,EACvD,IAAM,CACX,OAAO,aAAaF,CAAS,EAC7BrC,EAAW,oBAAoB,eAAgBsC,CAAkB,EACjEtC,EAAW,oBAAoB,eAAgBuC,CAAkB,CACzE,CACK,CACF,EAAE,CAACt1F,EAAQ,WAAYA,EAAQ,eAAe,CAAC,EACzBlC,MAAIuR,GAAU,CAAE,QAASH,GAAcgmF,EAAS,SAA0Bp3F,EAAG,IAClGk3F,GACA,CACE,aAAcE,EAAU,UAAY,SACpC,GAAGT,EACH,IAAKvmF,CACN,CACF,EAAE,CACL,CAAC,EACG6mF,GAA4BpC,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACzE,KAAM,CAAE,WAAAgB,EAAY,GAAGulF,CAAc,EAAK3/G,EACpCkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE8/G,EAAe9/G,EAAM,cAAgB,aACrCygH,EAAoBC,GAAoB,IAAMC,EAAK,YAAY,EAAG,GAAG,EACrE,CAAC3kG,EAAO2kG,CAAI,EAAIvD,GAAgB,SAAU,CAC9C,OAAQ,CACN,OAAQ,WACT,EACD,UAAW,CACT,WAAY,OACZ,cAAe,aAChB,EACD,YAAa,CACX,OAAQ,cACR,cAAe,MAChB,EACD,KAAM,CACJ,KAAM,SACN,OAAQ,YACR,cAAe,aAChB,CACL,CAAG,EACD2C,mBAAiB,IAAM,CACrB,GAAI/jG,IAAU,OAAQ,CACpB,MAAMskG,EAAY,OAAO,WAAW,IAAMK,EAAK,MAAM,EAAGz1F,EAAQ,eAAe,EAC/E,MAAO,IAAM,OAAO,aAAao1F,CAAS,CAC3C,CACF,EAAE,CAACtkG,EAAOkP,EAAQ,gBAAiBy1F,CAAI,CAAC,EACzCZ,YAAiB,IAAM,CACrB,MAAM3B,EAAWlzF,EAAQ,SACnB01F,EAAkBd,EAAe,aAAe,YACtD,GAAI1B,EAAU,CACZ,IAAIyC,EAAgBzC,EAASwC,CAAe,EAC5C,MAAMpkF,EAAe,IAAM,CACzB,MAAMskF,EAAY1C,EAASwC,CAAe,EACNC,IAAkBC,IAEpDH,EAAK,QAAQ,EACbF,KAEFI,EAAgBC,CACxB,EACM,OAAA1C,EAAS,iBAAiB,SAAU5hF,CAAY,EACzC,IAAM4hF,EAAS,oBAAoB,SAAU5hF,CAAY,CACjE,CACL,EAAK,CAACtR,EAAQ,SAAU40F,EAAca,EAAMF,CAAiB,CAAC,EACrCz3F,EAAG,IAACuR,GAAU,CAAE,QAASH,GAAcpe,IAAU,SAAU,SAA0BgN,EAAG,IAC7Gm3F,GACA,CACE,aAAcnkG,IAAU,SAAW,SAAW,UAC9C,GAAG2jG,EACH,IAAKvmF,EACL,eAAgBS,GAAqB75B,EAAM,eAAgB,IAAM2gH,EAAK,eAAe,CAAC,EACtF,eAAgB9mF,GAAqB75B,EAAM,eAAgB,IAAM2gH,EAAK,eAAe,CAAC,CACvF,CACF,EAAE,CACL,CAAC,EACGT,GAA0BrC,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACvE,MAAMlO,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE,CAAE,WAAAo6B,EAAY,GAAGulF,CAAc,EAAK3/G,EACpC,CAACogH,EAASC,CAAU,EAAIlC,EAAe,SAAC,EAAK,EAC7C2B,EAAe9/G,EAAM,cAAgB,aACrCyuB,EAAeiyF,GAAoB,IAAM,CAC7C,GAAIx1F,EAAQ,SAAU,CACpB,MAAM61F,EAAc71F,EAAQ,SAAS,YAAcA,EAAQ,SAAS,YAC9D81F,EAAc91F,EAAQ,SAAS,aAAeA,EAAQ,SAAS,aACrEm1F,EAAWP,EAAeiB,EAAcC,CAAW,CACpD,CACF,EAAE,EAAE,EACL,OAAAC,GAAkB/1F,EAAQ,SAAUuD,CAAY,EAChDwyF,GAAkB/1F,EAAQ,QAASuD,CAAY,EACxBzF,MAAIuR,GAAU,CAAE,QAASH,GAAcgmF,EAAS,SAA0Bp3F,EAAG,IAClGm3F,GACA,CACE,aAAcC,EAAU,UAAY,SACpC,GAAGT,EACH,IAAKvmF,CACN,CACF,EAAE,CACL,CAAC,EACG+mF,GAA6BtC,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CAC1E,KAAM,CAAE,YAAA8nF,EAAc,WAAY,GAAGvB,CAAc,EAAK3/G,EAClDkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtEmhH,EAAW7B,SAAc,IAAI,EAC7B8B,EAAmB9B,SAAc,CAAC,EAClC,CAAC+B,EAAOC,CAAQ,EAAInD,WAAgB,CACxC,QAAS,EACT,SAAU,EACV,UAAW,CAAE,KAAM,EAAG,aAAc,EAAG,WAAY,CAAG,CAC1D,CAAG,EACKoD,EAAaC,GAAcH,EAAM,SAAUA,EAAM,OAAO,EACxDI,EAAc,CAClB,GAAG9B,EACH,MAAA0B,EACA,cAAeC,EACf,SAAkBC,EAAa,GAAKA,EAAa,EACjD,cAAgBG,GAAUP,EAAS,QAAUO,EAC7C,iBAAkB,IAAMN,EAAiB,QAAU,EACnD,mBAAqBO,GAAeP,EAAiB,QAAUO,CACnE,EACE,SAASC,EAAkBD,EAAYx9D,EAAK,CAC1C,OAAO09D,GAA6BF,EAAYP,EAAiB,QAASC,EAAOl9D,CAAG,CACrF,CACD,OAAI+8D,IAAgB,aACKl4F,EAAG,IACxB84F,GACA,CACE,GAAGL,EACH,IAAKroF,EACL,sBAAuB,IAAM,CAC3B,GAAIlO,EAAQ,UAAYi2F,EAAS,QAAS,CACxC,MAAML,EAAY51F,EAAQ,SAAS,WAC7B4jD,EAASizC,GAAyBjB,EAAWO,EAAOn2F,EAAQ,GAAG,EACrEi2F,EAAS,QAAQ,MAAM,UAAY,eAAeryC,CAAM,WACzD,CACF,EACD,cAAgBgyC,GAAc,CACxB51F,EAAQ,WAAUA,EAAQ,SAAS,WAAa41F,EACrD,EACD,aAAea,GAAe,CACxBz2F,EAAQ,WACVA,EAAQ,SAAS,WAAa02F,EAAkBD,EAAYz2F,EAAQ,GAAG,EAE1E,CACF,CACP,EAEMg2F,IAAgB,WACKl4F,EAAG,IACxBg5F,GACA,CACE,GAAGP,EACH,IAAKroF,EACL,sBAAuB,IAAM,CAC3B,GAAIlO,EAAQ,UAAYi2F,EAAS,QAAS,CACxC,MAAML,EAAY51F,EAAQ,SAAS,UAC7B4jD,EAASizC,GAAyBjB,EAAWO,CAAK,EACxDF,EAAS,QAAQ,MAAM,UAAY,kBAAkBryC,CAAM,QAC5D,CACF,EACD,cAAgBgyC,GAAc,CACxB51F,EAAQ,WAAUA,EAAQ,SAAS,UAAY41F,EACpD,EACD,aAAea,GAAe,CACxBz2F,EAAQ,WAAUA,EAAQ,SAAS,UAAY02F,EAAkBD,CAAU,EAChF,CACF,CACP,EAES,IACT,CAAC,EACGG,GAAuBjE,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACpE,KAAM,CAAE,MAAAioF,EAAO,cAAAY,EAAe,GAAGtC,CAAc,EAAK3/G,EAC9CkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE,CAACkiH,EAAeC,CAAgB,EAAIhE,EAAe,WACnDp1F,EAAMu2F,SAAc,IAAI,EACxBjzD,EAAc9yB,GAAgBH,EAAcrQ,EAAKmC,EAAQ,kBAAkB,EACjF60F,mBAAiB,IAAM,CACjBh3F,EAAI,SAASo5F,EAAiB,iBAAiBp5F,EAAI,OAAO,CAAC,CACnE,EAAK,CAACA,CAAG,CAAC,EACeC,EAAG,IACxBo5F,GACA,CACE,mBAAoB,aACpB,GAAGzC,EACH,IAAKtzD,EACL,MAAAg1D,EACA,MAAO,CACL,OAAQ,EACR,KAAMn2F,EAAQ,MAAQ,MAAQ,wCAA0C,EACxE,MAAOA,EAAQ,MAAQ,MAAQ,wCAA0C,EACxE,kCAAoCm3F,GAAahB,CAAK,EAAI,KAC3D,GAAGrhH,EAAM,KACV,EACD,mBAAqB2hH,GAAe3hH,EAAM,mBAAmB2hH,EAAW,CAAC,EACzE,aAAeA,GAAe3hH,EAAM,aAAa2hH,EAAW,CAAC,EAC7D,cAAe,CAACloH,EAAO6oH,IAAiB,CACtC,GAAIp3F,EAAQ,SAAU,CACpB,MAAM41F,EAAY51F,EAAQ,SAAS,WAAazxB,EAAM,OACtDuG,EAAM,cAAc8gH,CAAS,EACzByB,GAAiCzB,EAAWwB,CAAY,GAC1D7oH,EAAM,eAAc,CAEvB,CACF,EACD,SAAU,IAAM,CACVsvB,EAAI,SAAWmC,EAAQ,UAAYg3F,GACrCD,EAAc,CACZ,QAAS/2F,EAAQ,SAAS,YAC1B,SAAUA,EAAQ,SAAS,YAC3B,UAAW,CACT,KAAMnC,EAAI,QAAQ,YAClB,aAAcy5F,GAAMN,EAAc,WAAW,EAC7C,WAAYM,GAAMN,EAAc,YAAY,CAC7C,CACb,CAAW,CAEJ,CACF,CACL,CACA,CAAC,EACGF,GAAuBnE,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACpE,KAAM,CAAE,MAAAioF,EAAO,cAAAY,EAAe,GAAGtC,CAAc,EAAK3/G,EAC9CkrB,EAAUyyF,GAAqB8B,GAAgBz/G,EAAM,iBAAiB,EACtE,CAACkiH,EAAeC,CAAgB,EAAIhE,EAAe,WACnDp1F,EAAMu2F,SAAc,IAAI,EACxBjzD,EAAc9yB,GAAgBH,EAAcrQ,EAAKmC,EAAQ,kBAAkB,EACjF60F,mBAAiB,IAAM,CACjBh3F,EAAI,SAASo5F,EAAiB,iBAAiBp5F,EAAI,OAAO,CAAC,CACnE,EAAK,CAACA,CAAG,CAAC,EACeC,EAAG,IACxBo5F,GACA,CACE,mBAAoB,WACpB,GAAGzC,EACH,IAAKtzD,EACL,MAAAg1D,EACA,MAAO,CACL,IAAK,EACL,MAAOn2F,EAAQ,MAAQ,MAAQ,EAAI,OACnC,KAAMA,EAAQ,MAAQ,MAAQ,EAAI,OAClC,OAAQ,yCACP,mCAAqCm3F,GAAahB,CAAK,EAAI,KAC5D,GAAGrhH,EAAM,KACV,EACD,mBAAqB2hH,GAAe3hH,EAAM,mBAAmB2hH,EAAW,CAAC,EACzE,aAAeA,GAAe3hH,EAAM,aAAa2hH,EAAW,CAAC,EAC7D,cAAe,CAACloH,EAAO6oH,IAAiB,CACtC,GAAIp3F,EAAQ,SAAU,CACpB,MAAM41F,EAAY51F,EAAQ,SAAS,UAAYzxB,EAAM,OACrDuG,EAAM,cAAc8gH,CAAS,EACzByB,GAAiCzB,EAAWwB,CAAY,GAC1D7oH,EAAM,eAAc,CAEvB,CACF,EACD,SAAU,IAAM,CACVsvB,EAAI,SAAWmC,EAAQ,UAAYg3F,GACrCD,EAAc,CACZ,QAAS/2F,EAAQ,SAAS,aAC1B,SAAUA,EAAQ,SAAS,aAC3B,UAAW,CACT,KAAMnC,EAAI,QAAQ,aAClB,aAAcy5F,GAAMN,EAAc,UAAU,EAC5C,WAAYM,GAAMN,EAAc,aAAa,CAC9C,CACb,CAAW,CAEJ,CACF,CACL,CACA,CAAC,EACG,CAACO,GAAmBC,EAAmB,EAAIlF,GAAwBiC,EAAc,EACjF2C,GAA0BvE,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACvE,KAAM,CACJ,kBAAA0kF,EACA,MAAAuD,EACA,SAAAsB,EACA,cAAAC,EACA,iBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,aAAAC,EACA,cAAAC,EACA,SAAAC,EACA,GAAGvD,CACJ,EAAG3/G,EACEkrB,EAAUyyF,GAAqB8B,GAAgB3B,CAAiB,EAChE,CAACqF,EAAWC,CAAY,EAAIjF,EAAe,SAAC,IAAI,EAChD9xD,EAAc9yB,GAAgBH,EAAeuiC,GAASynD,EAAaznD,CAAI,CAAC,EACxE0nD,EAAU/D,SAAc,IAAI,EAC5BgE,EAA0BhE,SAAc,EAAE,EAC1ClB,EAAWlzF,EAAQ,SACnBo3F,EAAejB,EAAM,QAAUA,EAAM,SACrCkC,EAAoB/+D,GAAey+D,CAAa,EAChDO,EAA4Bh/D,GAAeu+D,CAAqB,EAChEt0F,EAAeiyF,GAAoBwC,EAAU,EAAE,EACrD,SAASO,EAAiBhqH,EAAO,CAC/B,GAAI4pH,EAAQ,QAAS,CACnB,MAAMj4F,EAAI3xB,EAAM,QAAU4pH,EAAQ,QAAQ,KACpCh4F,EAAI5xB,EAAM,QAAU4pH,EAAQ,QAAQ,IAC1CL,EAAa,CAAE,EAAA53F,EAAG,EAAAC,CAAC,CAAE,CACtB,CACF,CACD00F,mBAAiB,IAAM,CACrB,MAAM2D,EAAejqH,GAAU,CAC7B,MAAMsgB,EAAUtgB,EAAM,QACG0pH,GAAA,YAAAA,EAAW,SAASppG,KACvBwpG,EAAkB9pH,EAAO6oH,CAAY,CACjE,EACI,gBAAS,iBAAiB,QAASoB,EAAa,CAAE,QAAS,EAAK,CAAE,EAC3D,IAAM,SAAS,oBAAoB,QAASA,EAAa,CAAE,QAAS,EAAK,CAAE,CACnF,EAAE,CAACtF,EAAU+E,EAAWb,EAAciB,CAAiB,CAAC,EACzDxD,YAAiByD,EAA2B,CAACnC,EAAOmC,CAAyB,CAAC,EAC9EvC,GAAkBkC,EAAW10F,CAAY,EACzCwyF,GAAkB/1F,EAAQ,QAASuD,CAAY,EACxBzF,EAAG,IACxBy5F,GACA,CACE,MAAO3E,EACP,UAAAqF,EACA,SAAAR,EACA,cAAen+D,GAAeo+D,CAAa,EAC3C,iBAAkBp+D,GAAeq+D,CAAgB,EACjD,sBAAuBW,EACvB,mBAAoBh/D,GAAes+D,CAAkB,EACrD,SAA0B95F,EAAG,IAC3B4Q,GAAU,IACV,CACE,GAAG+lF,EACH,IAAKtzD,EACL,MAAO,CAAE,SAAU,WAAY,GAAGszD,EAAe,KAAO,EACxD,cAAe9lF,GAAqB75B,EAAM,cAAgBvG,GAAU,CAE9DA,EAAM,SAAW,IACHA,EAAM,OACd,kBAAkBA,EAAM,SAAS,EACzC4pH,EAAQ,QAAUF,EAAU,wBAC5BG,EAAwB,QAAU,SAAS,KAAK,MAAM,iBACtD,SAAS,KAAK,MAAM,iBAAmB,OACnCp4F,EAAQ,WAAUA,EAAQ,SAAS,MAAM,eAAiB,QAC9Du4F,EAAiBhqH,CAAK,EAEpC,CAAW,EACD,cAAeogC,GAAqB75B,EAAM,cAAeyjH,CAAgB,EACzE,YAAa5pF,GAAqB75B,EAAM,YAAcvG,GAAU,CAC9D,MAAMsgB,EAAUtgB,EAAM,OAClBsgB,EAAQ,kBAAkBtgB,EAAM,SAAS,GAC3CsgB,EAAQ,sBAAsBtgB,EAAM,SAAS,EAE/C,SAAS,KAAK,MAAM,iBAAmB6pH,EAAwB,QAC3Dp4F,EAAQ,WAAUA,EAAQ,SAAS,MAAM,eAAiB,IAC9Dm4F,EAAQ,QAAU,IAC9B,CAAW,CACF,CACF,CACF,CACL,CACA,CAAC,EACGM,GAAa,kBACbC,GAAkB/F,EAAiB,WACrC,CAAC79G,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,WAAAgB,EAAY,GAAGypF,CAAU,EAAK7jH,EAChC8jH,EAAmBpB,GAAoBiB,GAAY3jH,EAAM,iBAAiB,EAChF,OAAuBgpB,MAAIuR,GAAU,CAAE,QAASH,GAAc0pF,EAAiB,SAAU,SAA0B96F,MAAI+6F,GAAqB,CAAE,IAAK3qF,EAAc,GAAGyqF,CAAU,CAAE,CAAC,CAAE,CACpL,CACH,EACIE,GAAsBlG,EAAiB,WACzC,CAAC79G,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,kBAAA0kF,EAAmB,MAAA5xE,EAAO,GAAG23E,CAAU,EAAK7jH,EAC9CgkH,EAAoBrG,GAAqBgG,GAAY7F,CAAiB,EACtEgG,EAAmBpB,GAAoBiB,GAAY7F,CAAiB,EACpE,CAAE,sBAAAiF,CAAuB,EAAGe,EAC5BG,EAAc1qF,GAClBH,EACCuiC,GAASmoD,EAAiB,cAAcnoD,CAAI,CACnD,EACUuoD,EAAkC5E,WAClCmB,EAAoBC,GAAoB,IAAM,CAC9CwD,EAAgC,UAClCA,EAAgC,QAAO,EACvCA,EAAgC,QAAU,OAE7C,EAAE,GAAG,EACNnE,mBAAiB,IAAM,CACrB,MAAM3B,EAAW4F,EAAkB,SACnC,GAAI5F,EAAU,CACZ,MAAM5hF,EAAe,IAAM,CAEzB,GADAikF,IACI,CAACyD,EAAgC,QAAS,CAC5C,MAAMxtG,EAAWytG,GAA0B/F,EAAU2E,CAAqB,EAC1EmB,EAAgC,QAAUxtG,EAC1CqsG,GACD,CACX,EACQ,OAAAA,IACA3E,EAAS,iBAAiB,SAAU5hF,CAAY,EACzC,IAAM4hF,EAAS,oBAAoB,SAAU5hF,CAAY,CACjE,CACF,EAAE,CAACwnF,EAAkB,SAAUvD,EAAmBsC,CAAqB,CAAC,EAClD/5F,EAAG,IACxB4Q,GAAU,IACV,CACE,aAAckqF,EAAiB,SAAW,UAAY,SACtD,GAAGD,EACH,IAAKI,EACL,MAAO,CACL,MAAO,uCACP,OAAQ,wCACR,GAAG/3E,CACJ,EACD,qBAAsBrS,GAAqB75B,EAAM,qBAAuBvG,GAAU,CAEhF,MAAM2qH,EADQ3qH,EAAM,OACI,wBAClB2xB,EAAI3xB,EAAM,QAAU2qH,EAAU,KAC9B/4F,EAAI5xB,EAAM,QAAU2qH,EAAU,IACpCN,EAAiB,mBAAmB,CAAE,EAAA14F,EAAG,EAAAC,CAAG,EACtD,CAAS,EACD,YAAawO,GAAqB75B,EAAM,YAAa8jH,EAAiB,gBAAgB,CACvF,CACP,CACG,CACH,EACAF,GAAgB,YAAcD,GAC9B,IAAIU,GAAc,mBACdC,GAAmBzG,EAAiB,WACtC,CAAC79G,EAAOo5B,IAAiB,CACvB,MAAMlO,EAAUyyF,GAAqB0G,GAAarkH,EAAM,iBAAiB,EACnEukH,EAA2B,GAAQr5F,EAAQ,YAAcA,EAAQ,YAEvE,OADkBA,EAAQ,OAAS,UAAYq5F,EACZv7F,MAAIw7F,GAAsB,CAAE,GAAGxkH,EAAO,IAAKo5B,EAAc,EAAI,IACjG,CACH,EACAkrF,GAAiB,YAAcD,GAC/B,IAAIG,GAAuB3G,EAAiB,WAAC,CAAC79G,EAAOo5B,IAAiB,CACpE,KAAM,CAAE,kBAAA0kF,EAAmB,GAAG2G,CAAW,EAAKzkH,EACxCkrB,EAAUyyF,GAAqB0G,GAAavG,CAAiB,EAC7D,CAAC9uF,EAAO01F,CAAQ,EAAIvG,EAAe,SAAC,CAAC,EACrC,CAAClvF,EAAQ01F,CAAS,EAAIxG,EAAe,SAAC,CAAC,EACvCyG,EAAU,GAAQ51F,GAASC,GACjC,OAAAgyF,GAAkB/1F,EAAQ,WAAY,IAAM,OAC1C,MAAM25F,IAAUroH,EAAA0uB,EAAQ,aAAR,YAAA1uB,EAAoB,eAAgB,EACpD0uB,EAAQ,qBAAqB25F,CAAO,EACpCF,EAAUE,CAAO,CACrB,CAAG,EACD5D,GAAkB/1F,EAAQ,WAAY,IAAM,OAC1C,MAAM45F,IAAStoH,EAAA0uB,EAAQ,aAAR,YAAA1uB,EAAoB,cAAe,EAClD0uB,EAAQ,oBAAoB45F,CAAM,EAClCJ,EAASI,CAAM,CACnB,CAAG,EACMF,EAA0B57F,EAAG,IAClC4Q,GAAU,IACV,CACE,GAAG6qF,EACH,IAAKrrF,EACL,MAAO,CACL,MAAApK,EACA,OAAAC,EACA,SAAU,WACV,MAAO/D,EAAQ,MAAQ,MAAQ,EAAI,OACnC,KAAMA,EAAQ,MAAQ,MAAQ,EAAI,OAClC,OAAQ,EACR,GAAGlrB,EAAM,KACV,CACF,CACF,EAAG,IACN,CAAC,EACD,SAASwiH,GAAM3lH,EAAO,CACpB,OAAOA,EAAQ,SAASA,EAAO,EAAE,EAAI,CACvC,CACA,SAAS2kH,GAAcuD,EAAcC,EAAa,CAChD,MAAMC,EAAQF,EAAeC,EAC7B,OAAO,MAAMC,CAAK,EAAI,EAAIA,CAC5B,CACA,SAAS5C,GAAahB,EAAO,CAC3B,MAAM4D,EAAQzD,GAAcH,EAAM,SAAUA,EAAM,OAAO,EACnD6D,EAAmB7D,EAAM,UAAU,aAAeA,EAAM,UAAU,WAClE8D,GAAa9D,EAAM,UAAU,KAAO6D,GAAoBD,EAC9D,OAAO,KAAK,IAAIE,EAAW,EAAE,CAC/B,CACA,SAAStD,GAA6BF,EAAYyD,EAAe/D,EAAOl9D,EAAM,MAAO,CACnF,MAAMkhE,EAAchD,GAAahB,CAAK,EAChCiE,EAAcD,EAAc,EAC5Bv2C,EAASs2C,GAAiBE,EAC1BC,EAAqBF,EAAcv2C,EACnC02C,EAAgBnE,EAAM,UAAU,aAAevyC,EAC/C22C,EAAgBpE,EAAM,UAAU,KAAOA,EAAM,UAAU,WAAakE,EACpEjD,EAAejB,EAAM,QAAUA,EAAM,SACrCqE,EAAcvhE,IAAQ,MAAQ,CAAC,EAAGm+D,CAAY,EAAI,CAACA,EAAe,GAAI,CAAC,EAE7E,OADoBqD,GAAY,CAACH,EAAeC,CAAa,EAAGC,CAAW,EACxD/D,CAAU,CAC/B,CACA,SAASI,GAAyBjB,EAAWO,EAAOl9D,EAAM,MAAO,CAC/D,MAAMkhE,EAAchD,GAAahB,CAAK,EAChC6D,EAAmB7D,EAAM,UAAU,aAAeA,EAAM,UAAU,WAClE8B,EAAY9B,EAAM,UAAU,KAAO6D,EACnC5C,EAAejB,EAAM,QAAUA,EAAM,SACrCuE,EAAczC,EAAYkC,EAC1BQ,EAAmB1hE,IAAQ,MAAQ,CAAC,EAAGm+D,CAAY,EAAI,CAACA,EAAe,GAAI,CAAC,EAC5EwD,EAAwBC,GAAMjF,EAAW+E,CAAgB,EAE/D,OADoBF,GAAY,CAAC,EAAGrD,CAAY,EAAG,CAAC,EAAGsD,CAAW,CAAC,EAChDE,CAAqB,CAC1C,CACA,SAASH,GAAYjrH,EAAOG,EAAQ,CAClC,OAAQgC,GAAU,CAChB,GAAInC,EAAM,CAAC,IAAMA,EAAM,CAAC,GAAKG,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAG,OAAOA,EAAO,CAAC,EACrE,MAAMoqH,GAASpqH,EAAO,CAAC,EAAIA,EAAO,CAAC,IAAMH,EAAM,CAAC,EAAIA,EAAM,CAAC,GAC3D,OAAOG,EAAO,CAAC,EAAIoqH,GAASpoH,EAAQnC,EAAM,CAAC,EAC/C,CACA,CACA,SAAS6nH,GAAiCzB,EAAWwB,EAAc,CACjE,OAAOxB,EAAY,GAAKA,EAAYwB,CACtC,CACA,IAAI6B,GAA4B,CAACxoD,EAAMjO,EAAU,IAAM,CACvD,IAAM,CACJ,IAAIs4D,EAAe,CAAE,KAAMrqD,EAAK,WAAY,IAAKA,EAAK,WAClDsqD,EAAM,EACV,OAAC,SAASxgE,GAAO,CACf,MAAMjP,EAAW,CAAE,KAAMmlB,EAAK,WAAY,IAAKA,EAAK,WAC9CuqD,EAAqBF,EAAa,OAASxvE,EAAS,KACpD2vE,EAAmBH,EAAa,MAAQxvE,EAAS,KACnD0vE,GAAsBC,IAAkBz4D,IAC5Cs4D,EAAexvE,EACfyvE,EAAM,OAAO,sBAAsBxgE,CAAI,CAC3C,IACS,IAAM,OAAO,qBAAqBwgE,CAAG,CAC9C,EACA,SAASvF,GAAoB9jH,EAAU6nC,EAAO,CAC5C,MAAM2hF,EAAiB5hE,GAAe5nD,CAAQ,EACxCypH,EAAmB/G,SAAc,CAAC,EACxCS,SAAgB,UAAC,IAAM,IAAM,OAAO,aAAasG,EAAiB,OAAO,EAAG,EAAE,EACvEC,EAAkB,YAAC,IAAM,CAC9B,OAAO,aAAaD,EAAiB,OAAO,EAC5CA,EAAiB,QAAU,OAAO,WAAWD,EAAgB3hF,CAAK,CACtE,EAAK,CAAC2hF,EAAgB3hF,CAAK,CAAC,CAC5B,CACA,SAASw8E,GAAkBlnG,EAASmpG,EAAU,CAC5C,MAAMz0F,EAAe+1B,GAAe0+D,CAAQ,EAC5CqD,GAAgB,IAAM,CACpB,IAAIN,EAAM,EACV,GAAIlsG,EAAS,CACX,MAAMysG,EAAiB,IAAI,eAAe,IAAM,CAC9C,qBAAqBP,CAAG,EACxBA,EAAM,OAAO,sBAAsBx3F,CAAY,CACvD,CAAO,EACD,OAAA+3F,EAAe,QAAQzsG,CAAO,EACvB,IAAM,CACX,OAAO,qBAAqBksG,CAAG,EAC/BO,EAAe,UAAUzsG,CAAO,CACxC,CACK,CACL,EAAK,CAACA,EAAS0U,CAAY,CAAC,CAC5B,CACA,SAAS8wF,GAAW/+G,EAASq6B,EAAS,CACpC,KAAM,CAAE,QAAAkb,EAAS,SAAA9e,CAAU,EAAGz2B,EAC9B,GAAI,CAACu1C,EAAS,OAAO,OAAOlb,GAAY,WAAaA,EAAQ5D,CAAQ,EAAI4D,EACzE,MAAM4rF,EAAaC,WAAgB,KAAKzvF,CAAQ,EAChD,OAAO0vF,eAAoBF,EAAY,CACrC,SAAU,OAAO5rF,GAAY,WAAaA,EAAQ4rF,EAAW,MAAM,QAAQ,EAAI5rF,CACnF,CAAG,CACH,CACA,IAAI2pE,GAAOoZ,GACPgJ,GAAWzH,GAGX0H,GAASvC,GCjvBb,MAAM1G,GAAa90F,aAGjB,CAAC,CAAE,UAAArK,EAAW,SAAAwY,EAAU,GAAGj3B,CAAM,EAAG+oB,IACpCiB,EAAA,KAAC88F,GAAA,CACC,IAAA/9F,EACA,UAAWN,GAAG,2BAA4BhK,CAAS,EAClD,GAAGze,EAEJ,UAAAgpB,MAAC+9F,GAAA,CAA6B,UAAU,kCACrC,SAAA9vF,CACH,SACC+vF,GAAU,IACXh+F,EAAA,IAACi+F,GAAA,EAA2B,GAC9B,CACD,EACDrJ,GAAW,YAAckJ,GAAyB,YAElD,MAAME,GAAYl+F,aAGhB,CAAC,CAAE,UAAArK,EAAW,YAAAyiG,EAAc,WAAY,GAAGlhH,GAAS+oB,IACpDC,EAAA,IAACk+F,GAAA,CACC,IAAAn+F,EACA,YAAAm4F,EACA,UAAWz4F,GACT,gDACAy4F,IAAgB,YACd,qDACFA,IAAgB,cACd,uDACFziG,CACF,EACC,GAAGze,EAEJ,SAACgpB,MAAAm+F,GAAA,CAAoC,UAAU,wCAAyC,GAC1F,CACD,EACDH,GAAU,YAAcE,GAAwC,YC5BhE,IAAIE,GAAY,CAAC,SAAU,UAAU,EACjCC,GAAa,CAAC,UAAW,YAAa,YAAa,YAAY,EAC/DC,GAAY,CACd,YAAa,CAAC,OAAQ,WAAY,YAAa,WAAW,EAC1D,aAAc,CAAC,OAAQ,WAAY,YAAa,YAAY,EAC5D,cAAe,CAAC,OAAQ,WAAY,YAAa,WAAW,EAC5D,WAAY,CAAC,OAAQ,WAAY,UAAW,WAAW,CACzD,EACIC,GAAc,SACd,CAAClkE,GAAYC,GAAeC,EAAqB,EAAIC,GAAiB+jE,EAAW,EACjF,CAACC,GAAqBC,EAAiB,EAAIrxF,GAAmBmxF,GAAa,CAC7EhkE,EACF,CAAC,EACG,CAACmkE,GAAgBC,EAAgB,EAAIH,GAAoBD,EAAW,EACpEK,GAAS9+F,EAAgB,WAC3B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,KAAAz5B,EACA,IAAAgrB,EAAM,EACN,IAAAC,EAAM,IACN,KAAAmsC,EAAO,EACP,YAAAmqD,EAAc,aACd,SAAA/3D,EAAW,GACX,sBAAA0+D,EAAwB,EACxB,aAAAC,EAAe,CAACn9F,CAAG,EACnB,MAAA9tB,EACA,cAAAiuD,EAAgB,IAAM,CACrB,EACD,cAAAi9D,EAAgB,IAAM,CACrB,EACD,SAAAC,EAAW,GACX,KAAAxf,EACA,GAAGyf,CACJ,EAAGjoH,EACEkoH,EAAY7wF,SAA6B,IAAI,GAAK,EAClD8wF,EAAwB9wF,SAAa,CAAC,EAEtC+wF,EADelH,IAAgB,aACImH,GAAmBC,GACtD,CAAChhE,EAAS,GAAIihE,CAAS,EAAI7vF,GAAqB,CACpD,KAAM77B,EACN,YAAairH,EACb,SAAWU,GAAW,QAEpBhsH,EADe,CAAC,GAAG0rH,EAAU,OAAO,EAC7BC,EAAsB,OAAO,IAApC,MAAA3rH,EAAuC,QACvCsuD,EAAc09D,CAAM,CACrB,CACP,CAAK,EACKC,EAA4BpxF,SAAaiwB,CAAM,EACrD,SAASohE,EAAiBF,EAAQ,CAChC,MAAMG,EAAeC,GAAqBthE,EAAQkhE,CAAM,EACxDK,EAAaL,EAAQG,CAAY,CAClC,CACD,SAASG,EAAgBN,EAAQ,CAC/BK,EAAaL,EAAQL,EAAsB,OAAO,CACnD,CACD,SAASY,GAAiB,CACxB,MAAMC,EAAYP,EAA0B,QAAQN,EAAsB,OAAO,EAC/D7gE,EAAO6gE,EAAsB,OAAO,IACrBa,GACjBjB,EAAczgE,CAAM,CACrC,CACD,SAASuhE,EAAaL,EAAQS,EAAS,CAAE,OAAAC,CAAM,EAAK,CAAE,OAAQ,IAAS,CACrE,MAAMC,EAAeC,GAAgBryD,CAAI,EACnCsyD,EAAaC,GAAW,KAAK,OAAOd,EAAS79F,GAAOosC,CAAI,EAAIA,EAAOpsC,EAAKw+F,CAAY,EACpFI,EAAYxD,GAAMsD,EAAY,CAAC1+F,EAAKC,CAAG,CAAC,EAC9C29F,EAAU,CAACiB,GAAa,KAAO,CAC7B,MAAMC,EAAaC,GAAoBF,GAAYD,EAAWN,CAAO,EACrE,GAAIU,GAAyBF,EAAY5B,EAAwB9wD,CAAI,EAAG,CACtEoxD,EAAsB,QAAUsB,EAAW,QAAQF,CAAS,EAC5D,MAAMK,EAAa,OAAOH,CAAU,IAAM,OAAOD,EAAU,EAC3D,OAAII,GAAcV,GAAQnB,EAAc0B,CAAU,EAC3CG,EAAaH,EAAaD,EAC3C,KACU,QAAOA,EAEjB,CAAO,CACF,CACD,OAAuBxgG,EAAG,IACxB0+F,GACA,CACE,MAAO1nH,EAAM,cACb,KAAAL,EACA,SAAAwpD,EACA,IAAAx+B,EACA,IAAAC,EACA,sBAAAu9F,EACA,OAAQD,EAAU,QAClB,OAAA5gE,EACA,YAAA45D,EACA,KAAA1Y,EACA,SAA0Bx/E,EAAG,IAACq6B,GAAW,SAAU,CAAE,MAAOrjD,EAAM,cAAe,SAA0BgpB,MAAIq6B,GAAW,KAAM,CAAE,MAAOrjD,EAAM,cAAe,SAA0BgpB,EAAG,IACzLo/F,EACA,CACE,gBAAiBj/D,EACjB,gBAAiBA,EAAW,GAAK,OACjC,GAAG8+D,EACH,IAAK7uF,EACL,cAAeS,GAAqBouF,EAAY,cAAe,IAAM,CAC9D9+D,IAAUs/D,EAA0B,QAAUnhE,EACjE,CAAa,EACD,IAAA38B,EACA,IAAAC,EACA,SAAAo9F,EACA,aAAc7+D,EAAW,OAASu/D,EAClC,YAAav/D,EAAW,OAAS2/D,EACjC,WAAY3/D,EAAW,OAAS4/D,EAChC,cAAe,IAAM,CAAC5/D,GAAY0/D,EAAal+F,EAAK,EAAG,CAAE,OAAQ,GAAM,EACvE,aAAc,IAAM,CAACw+B,GAAY0/D,EAAaj+F,EAAK08B,EAAO,OAAS,EAAG,CAAE,OAAQ,EAAI,CAAE,EACtF,cAAe,CAAC,CAAE,MAAA7tD,EAAO,UAAWowH,CAAa,IAAO,CACtD,GAAI,CAAC1gE,EAAU,CAGb,MAAM2gE,EAFY1C,GAAU,SAAS3tH,EAAM,GAAG,GACfA,EAAM,UAAY4tH,GAAW,SAAS5tH,EAAM,GAAG,EAC/C,GAAK,EAC9BwvH,EAAUd,EAAsB,QAChCK,GAASlhE,EAAO2hE,CAAO,EACvBc,EAAkBhzD,EAAO+yD,EAAaD,EAC5ChB,EAAaL,GAASuB,EAAiBd,EAAS,CAAE,OAAQ,EAAI,CAAE,CACjE,CACF,CACF,CACF,EAAE,CAAC,CAAE,CACP,CACP,CACG,CACH,EACArB,GAAO,YAAcL,GACrB,GAAI,CAACyC,GAA2BC,EAA2B,EAAIzC,GAAoBD,GAAa,CAC9F,UAAW,OACX,QAAS,QACT,KAAM,QACN,UAAW,CACb,CAAC,EACGc,GAAmBv/F,EAAgB,WACrC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,IAAAzO,EACA,IAAAC,EACA,IAAAu5B,EACA,SAAA6jE,EACA,aAAAkC,EACA,YAAAC,EACA,WAAAC,EACA,cAAAC,EACA,GAAGpC,CACJ,EAAGjoH,EACE,CAACsqH,EAAQC,CAAS,EAAI7tG,EAAc,SAAC,IAAI,EACzC4c,EAAeC,GAAgBH,EAAeuiC,GAAS4uD,EAAU5uD,CAAI,CAAC,EACtE0nD,EAAUhsF,WACVhd,EAAYoqC,GAAaN,CAAG,EAC5BqmE,EAAiBnwG,IAAc,MAC/BowG,EAAoBD,GAAkB,CAACxC,GAAY,CAACwC,GAAkBxC,EAC5E,SAAS0C,EAAoB3uF,EAAiB,CAC5C,MAAMmB,EAAOmmF,EAAQ,SAAWiH,EAAO,sBAAqB,EACtD5vH,EAAQ,CAAC,EAAGwiC,EAAK,KAAK,EAEtBrgC,EAAQ8oH,GAAYjrH,EADX+vH,EAAoB,CAAC9/F,EAAKC,CAAG,EAAI,CAACA,EAAKD,CAAG,CAClB,EACvC,OAAA04F,EAAQ,QAAUnmF,EACXrgC,EAAMk/B,EAAkBmB,EAAK,IAAI,CACzC,CACD,OAAuBlU,EAAG,IACxBghG,GACA,CACE,MAAOhqH,EAAM,cACb,UAAWyqH,EAAoB,OAAS,QACxC,QAASA,EAAoB,QAAU,OACvC,UAAWA,EAAoB,EAAI,GACnC,KAAM,QACN,SAA0BzhG,EAAG,IAC3B2hG,GACA,CACE,IAAKtwG,EACL,mBAAoB,aACpB,GAAG4tG,EACH,IAAK3uF,EACL,MAAO,CACL,GAAG2uF,EAAY,MACd,iCAAmC,kBACrC,EACD,aAAexuH,GAAU,CACvB,MAAMoD,EAAQ6tH,EAAoBjxH,EAAM,OAAO,EAC/CywH,GAAA,MAAAA,EAAertH,EAChB,EACD,YAAcpD,GAAU,CACtB,MAAMoD,EAAQ6tH,EAAoBjxH,EAAM,OAAO,EAC/C0wH,GAAA,MAAAA,EAActtH,EACf,EACD,WAAY,IAAM,CAChBwmH,EAAQ,QAAU,OAClB+G,GAAA,MAAAA,GACD,EACD,cAAgB3wH,GAAU,CAExB,MAAMmxH,EAAYtD,GADKmD,EAAoB,YAAc,YACf,EAAE,SAAShxH,EAAM,GAAG,EAC9D4wH,GAAA,MAAAA,EAAgB,CAAE,MAAA5wH,EAAO,UAAWmxH,EAAY,GAAK,CAAC,EACvD,CACF,CACF,CACF,CACP,CACG,CACH,EACItC,GAAiBx/F,EAAgB,WACnC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,IAAAzO,EACA,IAAAC,EACA,SAAAo9F,EACA,aAAAkC,EACA,YAAAC,EACA,WAAAC,EACA,cAAAC,EACA,GAAGpC,CACJ,EAAGjoH,EACE6qH,EAAYxzF,SAAa,IAAI,EAC7BtO,EAAMwQ,GAAgBH,EAAcyxF,CAAS,EAC7CxH,EAAUhsF,WACVyzF,EAAsB,CAAC9C,EAC7B,SAAS0C,EAAoB3uF,EAAiB,CAC5C,MAAMmB,EAAOmmF,EAAQ,SAAWwH,EAAU,QAAQ,wBAC5CnwH,EAAQ,CAAC,EAAGwiC,EAAK,MAAM,EAEvBrgC,EAAQ8oH,GAAYjrH,EADXowH,EAAsB,CAAClgG,EAAKD,CAAG,EAAI,CAACA,EAAKC,CAAG,CACpB,EACvC,OAAAy4F,EAAQ,QAAUnmF,EACXrgC,EAAMk/B,EAAkBmB,EAAK,GAAG,CACxC,CACD,OAAuBlU,EAAG,IACxBghG,GACA,CACE,MAAOhqH,EAAM,cACb,UAAW8qH,EAAsB,SAAW,MAC5C,QAASA,EAAsB,MAAQ,SACvC,KAAM,SACN,UAAWA,EAAsB,EAAI,GACrC,SAA0B9hG,EAAG,IAC3B2hG,GACA,CACE,mBAAoB,WACpB,GAAG1C,EACH,IAAAl/F,EACA,MAAO,CACL,GAAGk/F,EAAY,MACd,iCAAmC,iBACrC,EACD,aAAexuH,GAAU,CACvB,MAAMoD,EAAQ6tH,EAAoBjxH,EAAM,OAAO,EAC/CywH,GAAA,MAAAA,EAAertH,EAChB,EACD,YAAcpD,GAAU,CACtB,MAAMoD,EAAQ6tH,EAAoBjxH,EAAM,OAAO,EAC/C0wH,GAAA,MAAAA,EAActtH,EACf,EACD,WAAY,IAAM,CAChBwmH,EAAQ,QAAU,OAClB+G,GAAA,MAAAA,GACD,EACD,cAAgB3wH,GAAU,CAExB,MAAMmxH,EAAYtD,GADKwD,EAAsB,cAAgB,UACnB,EAAE,SAASrxH,EAAM,GAAG,EAC9D4wH,GAAA,MAAAA,EAAgB,CAAE,MAAA5wH,EAAO,UAAWmxH,EAAY,GAAK,CAAC,EACvD,CACF,CACF,CACF,CACP,CACG,CACH,EACID,GAAa7hG,EAAgB,WAC/B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,cAAA2xF,EACA,aAAAb,EACA,YAAAC,EACA,WAAAC,EACA,cAAAY,EACA,aAAAC,EACA,cAAAZ,EACA,GAAGpC,CACJ,EAAGjoH,EACEkrB,EAAUy8F,GAAiBJ,GAAawD,CAAa,EAC3D,OAAuB/hG,EAAG,IACxB4Q,GAAU,KACV,CACE,GAAGquF,EACH,IAAK7uF,EACL,UAAWS,GAAqB75B,EAAM,UAAYvG,GAAU,CACtDA,EAAM,MAAQ,QAChBuxH,EAAcvxH,CAAK,EACnBA,EAAM,eAAc,GACXA,EAAM,MAAQ,OACvBwxH,EAAaxxH,CAAK,EAClBA,EAAM,eAAc,GACX2tH,GAAU,OAAOC,EAAU,EAAE,SAAS5tH,EAAM,GAAG,IACxD4wH,EAAc5wH,CAAK,EACnBA,EAAM,eAAc,EAEhC,CAAS,EACD,cAAeogC,GAAqB75B,EAAM,cAAgBvG,GAAU,CAClE,MAAMgK,EAAShK,EAAM,OACrBgK,EAAO,kBAAkBhK,EAAM,SAAS,EACxCA,EAAM,eAAc,EAChByxB,EAAQ,OAAO,IAAIznB,CAAM,EAC3BA,EAAO,MAAK,EAEZymH,EAAazwH,CAAK,CAE9B,CAAS,EACD,cAAeogC,GAAqB75B,EAAM,cAAgBvG,GAAU,CACnDA,EAAM,OACV,kBAAkBA,EAAM,SAAS,GAAG0wH,EAAY1wH,CAAK,CAC1E,CAAS,EACD,YAAaogC,GAAqB75B,EAAM,YAAcvG,GAAU,CAC9D,MAAMgK,EAAShK,EAAM,OACjBgK,EAAO,kBAAkBhK,EAAM,SAAS,IAC1CgK,EAAO,sBAAsBhK,EAAM,SAAS,EAC5C2wH,EAAW3wH,CAAK,EAE5B,CAAS,CACF,CACP,CACG,CACH,EACIyxH,GAAa,cACbC,GAAcriG,EAAgB,WAChC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,cAAA2xF,EAAe,GAAGK,CAAU,EAAKprH,EACnCkrB,EAAUy8F,GAAiBuD,GAAYH,CAAa,EAC1D,OAAuB/hG,EAAG,IACxB4Q,GAAU,KACV,CACE,gBAAiB1O,EAAQ,SAAW,GAAK,OACzC,mBAAoBA,EAAQ,YAC5B,GAAGkgG,EACH,IAAKhyF,CACN,CACP,CACG,CACH,EACA+xF,GAAY,YAAcD,GAC1B,IAAIG,GAAa,cACbC,GAAcxiG,EAAgB,WAChC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,cAAA2xF,EAAe,GAAGQ,CAAU,EAAKvrH,EACnCkrB,EAAUy8F,GAAiB0D,GAAYN,CAAa,EACpD7J,EAAc+I,GAA4BoB,GAAYN,CAAa,EACnEhiG,EAAMsO,SAAa,IAAI,EACvBiC,EAAeC,GAAgBH,EAAcrQ,CAAG,EAChDyiG,EAActgG,EAAQ,OAAO,OAC7BugG,EAAcvgG,EAAQ,OAAO,IAChCruB,GAAU6uH,GAAyB7uH,EAAOquB,EAAQ,IAAKA,EAAQ,GAAG,CACzE,EACUygG,EAAcH,EAAc,EAAI,KAAK,IAAI,GAAGC,CAAW,EAAI,EAC3DG,EAAY,IAAM,KAAK,IAAI,GAAGH,CAAW,EAC/C,OAAuBziG,EAAG,IACxB4Q,GAAU,KACV,CACE,mBAAoB1O,EAAQ,YAC5B,gBAAiBA,EAAQ,SAAW,GAAK,OACzC,GAAGqgG,EACH,IAAKjyF,EACL,MAAO,CACL,GAAGt5B,EAAM,MACT,CAACkhH,EAAY,SAAS,EAAGyK,EAAc,IACvC,CAACzK,EAAY,OAAO,EAAG0K,EAAY,GACpC,CACF,CACP,CACG,CACH,EACAN,GAAY,YAAcD,GAC1B,IAAI1H,GAAa,cACbkI,GAAc/iG,EAAgB,WAChC,CAAC9oB,EAAOo5B,IAAiB,CACvB,MAAMgtB,EAAW9C,GAActjD,EAAM,aAAa,EAC5C,CAAC0hH,EAAOoK,CAAQ,EAAIpvG,EAAc,SAAC,IAAI,EACvC4c,EAAeC,GAAgBH,EAAeuiC,GAASmwD,EAASnwD,CAAI,CAAC,EACrE1jD,EAAQ4gB,EAAa,QACzB,IAAM6oF,EAAQt7D,IAAW,UAAWhlB,GAASA,EAAK,IAAI,UAAYsgF,CAAK,EAAI,GAC3E,CAACt7D,EAAUs7D,CAAK,CACtB,EACI,OAAuB14F,EAAG,IAAC+iG,GAAiB,CAAE,GAAG/rH,EAAO,IAAKs5B,EAAc,MAAArhB,CAAK,CAAE,CACnF,CACH,EACI8zG,GAAkBjjG,EAAgB,WACpC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,cAAA2xF,EAAe,MAAA9yG,EAAO,KAAAtY,EAAM,GAAGkkH,CAAY,EAAG7jH,EAChDkrB,EAAUy8F,GAAiBhE,GAAYoH,CAAa,EACpD7J,EAAc+I,GAA4BtG,GAAYoH,CAAa,EACnE,CAACrJ,EAAOoK,CAAQ,EAAIpvG,EAAc,SAAC,IAAI,EACvC4c,EAAeC,GAAgBH,EAAeuiC,GAASmwD,EAASnwD,CAAI,CAAC,EACrEktC,EAAgB6Y,EAAQx2F,EAAQ,MAAQ,CAAC,CAACw2F,EAAM,QAAQ,MAAM,EAAI,GAClE9zE,EAAOg8D,GAAQ8X,CAAK,EACpB7kH,EAAQquB,EAAQ,OAAOjT,CAAK,EAC5B+zG,EAAUnvH,IAAU,OAAS,EAAI6uH,GAAyB7uH,EAAOquB,EAAQ,IAAKA,EAAQ,GAAG,EACzFnF,EAAQkmG,GAASh0G,EAAOiT,EAAQ,OAAO,MAAM,EAC7CghG,EAAkBt+E,GAAA,YAAAA,EAAOszE,EAAY,MACrCiL,EAAsBD,EAAkBE,GAAuBF,EAAiBF,EAAS9K,EAAY,SAAS,EAAI,EACxHvkG,mBAAgB,IAAM,CACpB,GAAI+kG,EACF,OAAAx2F,EAAQ,OAAO,IAAIw2F,CAAK,EACjB,IAAM,CACXx2F,EAAQ,OAAO,OAAOw2F,CAAK,CACrC,CAEK,EAAE,CAACA,EAAOx2F,EAAQ,MAAM,CAAC,EACHlB,EAAI,KACzB,OACA,CACE,MAAO,CACL,UAAW,sCACX,SAAU,WACV,CAACk3F,EAAY,SAAS,EAAG,QAAQ8K,CAAO,OAAOG,CAAmB,KACnE,EACD,SAAU,CACQnjG,EAAG,IAACq6B,GAAW,SAAU,CAAE,MAAOrjD,EAAM,cAAe,SAA0BgpB,EAAG,IAClG4Q,GAAU,KACV,CACE,KAAM,SACN,aAAc55B,EAAM,YAAY,GAAK+lB,EACrC,gBAAiBmF,EAAQ,IACzB,gBAAiBruB,EACjB,gBAAiBquB,EAAQ,IACzB,mBAAoBA,EAAQ,YAC5B,mBAAoBA,EAAQ,YAC5B,gBAAiBA,EAAQ,SAAW,GAAK,OACzC,SAAUA,EAAQ,SAAW,OAAS,EACtC,GAAG24F,EACH,IAAKvqF,EACL,MAAOz8B,IAAU,OAAS,CAAE,QAAS,MAAM,EAAKmD,EAAM,MACtD,QAAS65B,GAAqB75B,EAAM,QAAS,IAAM,CACjDkrB,EAAQ,sBAAsB,QAAUjT,CACxD,CAAe,CACF,CACb,EAAa,EACH4wF,GAAiC7/E,EAAG,IAClCogF,GACA,CACE,KAAMzpG,IAASurB,EAAQ,KAAOA,EAAQ,MAAQA,EAAQ,OAAO,OAAS,EAAI,KAAO,IAAM,QACvF,KAAMA,EAAQ,KACd,MAAAruB,CACD,EACDob,CACD,CACF,CACF,CACP,CACG,CACH,EACA4zG,GAAY,YAAclI,GAC1B,IAAIva,GAAeppG,GAAU,CAC3B,KAAM,CAAE,MAAAnD,EAAO,GAAG4sG,CAAU,EAAKzpG,EAC3B+oB,EAAMsO,SAAa,IAAI,EACvB2xF,EAAYtf,GAAY7sG,CAAK,EACnC8f,mBAAgB,IAAM,CACpB,MAAMjiB,EAAQquB,EAAI,QACZ8gF,EAAa,OAAO,iBAAiB,UAErCwiB,EADa,OAAO,yBAAyBxiB,EAAY,OAAO,EAC1C,IAC5B,GAAImf,IAAcnsH,GAASwvH,EAAU,CACnC,MAAM5yH,EAAQ,IAAI,MAAM,QAAS,CAAE,QAAS,EAAI,CAAE,EAClD4yH,EAAS,KAAK3xH,EAAOmC,CAAK,EAC1BnC,EAAM,cAAcjB,CAAK,CAC1B,CACL,EAAK,CAACuvH,EAAWnsH,CAAK,CAAC,EACEmsB,EAAG,IAAC,QAAS,CAAE,MAAO,CAAE,QAAS,QAAU,GAAGygF,EAAY,IAAA1gF,EAAK,aAAclsB,CAAO,EAC7G,EACA,SAAS6sH,GAAoBF,EAAa,GAAID,EAAWN,EAAS,CAChE,MAAMQ,EAAa,CAAC,GAAGD,CAAU,EACjC,OAAAC,EAAWR,CAAO,EAAIM,EACfE,EAAW,KAAK,CAACnrH,EAAGC,IAAMD,EAAIC,CAAC,CACxC,CACA,SAASmtH,GAAyB7uH,EAAO8tB,EAAKC,EAAK,CAGjD,MAAM0hG,EADiB,KADN1hG,EAAMD,IAEc9tB,EAAQ8tB,GAC7C,OAAOo7F,GAAMuG,EAAY,CAAC,EAAG,GAAG,CAAC,CACnC,CACA,SAASL,GAASh0G,EAAOs0G,EAAa,CACpC,OAAIA,EAAc,EACT,SAASt0G,EAAQ,CAAC,OAAOs0G,CAAW,GAClCA,IAAgB,EAClB,CAAC,UAAW,SAAS,EAAEt0G,CAAK,EAEnC,MAEJ,CACA,SAAS2wG,GAAqBthE,EAAQiiE,EAAW,CAC/C,GAAIjiE,EAAO,SAAW,EAAG,MAAO,GAChC,MAAMklE,EAAYllE,EAAO,IAAKzqD,GAAU,KAAK,IAAIA,EAAQ0sH,CAAS,CAAC,EAC7DkD,EAAkB,KAAK,IAAI,GAAGD,CAAS,EAC7C,OAAOA,EAAU,QAAQC,CAAe,CAC1C,CACA,SAASL,GAAuBp9F,EAAOsO,EAAMjjB,EAAW,CACtD,MAAMqyG,EAAY19F,EAAQ,EAEpB8/C,EAAS62C,GAAY,CAAC,EADR,EACsB,EAAG,CAAC,EAAG+G,CAAS,CAAC,EAC3D,OAAQA,EAAY59C,EAAOxxC,CAAI,EAAIjjB,GAAaA,CAClD,CACA,SAASsyG,GAAsBrlE,EAAQ,CACrC,OAAOA,EAAO,MAAM,EAAG,EAAE,EAAE,IAAI,CAACzqD,EAAOob,IAAUqvC,EAAOrvC,EAAQ,CAAC,EAAIpb,CAAK,CAC5E,CACA,SAAS8sH,GAAyBriE,EAAQslE,EAAuB,CAC/D,GAAIA,EAAwB,EAAG,CAC7B,MAAMC,EAAqBF,GAAsBrlE,CAAM,EAEvD,OADoC,KAAK,IAAI,GAAGulE,CAAkB,GAC5BD,CACvC,CACD,MAAO,EACT,CACA,SAASjH,GAAYjrH,EAAOG,EAAQ,CAClC,OAAQgC,GAAU,CAChB,GAAInC,EAAM,CAAC,IAAMA,EAAM,CAAC,GAAKG,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAG,OAAOA,EAAO,CAAC,EACrE,MAAMoqH,GAASpqH,EAAO,CAAC,EAAIA,EAAO,CAAC,IAAMH,EAAM,CAAC,EAAIA,EAAM,CAAC,GAC3D,OAAOG,EAAO,CAAC,EAAIoqH,GAASpoH,EAAQnC,EAAM,CAAC,EAC/C,CACA,CACA,SAAS0uH,GAAgBvsH,EAAO,CAC9B,OAAQ,OAAOA,CAAK,EAAE,MAAM,GAAG,EAAE,CAAC,GAAK,IAAI,MAC7C,CACA,SAASysH,GAAWzsH,EAAOssH,EAAc,CACvC,MAAM2D,EAAU,KAAK,IAAI,GAAI3D,CAAY,EACzC,OAAO,KAAK,MAAMtsH,EAAQiwH,CAAO,EAAIA,CACvC,CACA,IAAItoB,GAAOojB,GACPmF,GAAQ5B,GACR6B,GAAQ1B,GACR2B,GAAQpB,GCvhBZ,MAAMjE,GAAS9+F,EAGb,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BiB,EAAA,KAACkjG,GAAA,CACC,IAAAnkG,EACA,UAAWN,GACT,2DACAhK,CACF,EACC,GAAGze,EAEJ,UAACgpB,MAAAmkG,GAAA,CAAsB,UAAU,qEAC/B,SAACnkG,MAAAokG,GAAA,CAAsB,UAAU,6BAA6B,CAChE,GACCpkG,MAAAqkG,GAAA,CAAsB,UAAU,gQAAiQ,IACpS,CACD,EACDzF,GAAO,YAAcsF,GAAqB,YCO1C,MAAMznH,GAAS0mC,GAAa,iBAAiB,EAEtC,SAASmhF,IAAkB,OAChC,MAAM5gF,EAAWC,KACXC,EAAWC,KACX,CAAC0gF,EAAeC,CAAgB,EAAIj/F,EAAA,SAAkC,CAAE,GAGxEk/F,EAAW9vE,SAAgC,IAAI,EAC/C,CAAC+vE,EAAWC,CAAY,EAAIp/F,WAAS,EAAK,EAC1C,CAACK,EAAUg/F,CAAW,EAAIr/F,WAAS,CAAC,EACpC,CAACs/F,EAAaC,CAAc,EAAIv/F,WAAS,CAAC,EAC1C,CAACw/F,EAAcC,CAAe,EAAIz/F,WAAS,EAAK,EAGhD0/F,GAAsBzxH,EAAAowC,EAAS,QAAT,YAAApwC,EAAgB,mBAGtC0xH,EAAoBD,EAAsBz9E,GAAU,QAAYa,EAAI,KAAO48E,CAAmB,EAAI,KAIxG,IAAIx5E,EAAuB,GACrB,MAAA05E,MAAqB,IAGrBC,EAAkB,CAAC,GAAG59E,EAAS,EAAE,KAAK,CAAClyC,EAAGC,IAE1CD,EAAE,SAAW,CAACC,EAAE,QAAgB,GAChC,CAACD,EAAE,SAAWC,EAAE,QAAgB,EAC7B,CACR,EAGD,UAAW8yC,KAAO+8E,GAEZ/8E,EAAI,SAAWA,EAAI,cAEhB88E,EAAe,IAAI98E,EAAI,IAAI,IAC9BoD,EAAqB,KAAKpD,CAAG,EACd88E,EAAA,IAAI98E,EAAI,IAAI,KAM5B68E,GAAA,MAAAA,EAAmB,SAAWA,GAAA,MAAAA,EAAmB,aAClD,CAACz5E,EAAqB,KAAYpD,KAAI,KAAO48E,CAAmB,GAClEx5E,EAAqB,KAAKy5E,CAAiB,EAI7C,KAAM,CAACviB,EAAkB0iB,CAAmB,EAAI9/F,WAAS,IAAM,WAEzD,OAAA0/F,GAAuBz9E,GAAU,KAAKa,GAAOA,EAAI,KAAO48E,CAAmB,KAC1EzxH,EAAAg0C,GAAU,KAAKa,GAAOA,EAAI,KAAO48E,CAAmB,IAApD,MAAAzxH,EAAuD,UACvDsN,EAAA0mC,GAAU,QAAYa,EAAI,KAAO48E,CAAmB,IAApD,MAAAnkH,EAAuD,YACnDmkH,IAGF9jG,EAAAsqB,EAAqB,CAAC,IAAtB,YAAAtqB,EAAyB,KAAM,KACvC,EAGKmkG,EAAuB75E,EAAqB,KAAYpD,KAAI,KAAOs6D,CAAgB,EAGnF4iB,EAAkB,IAAM,CACxBd,EAAS,UACPC,GACFD,EAAS,QAAQ,QACba,GAAA,MAAAA,EAAsB,IACdx1G,EAAA,WAAW,QAASw1G,EAAqB,EAAE,IAGvDb,EAAS,QAAQ,OACba,GAAA,MAAAA,EAAsB,IACdx1G,EAAA,WAAW,OAAQw1G,EAAqB,EAAE,GAGxDX,EAAa,CAACD,CAAS,EACzB,EAGIc,EAAmB,IAAM,CACzBf,EAAS,SACIK,EAAAL,EAAS,QAAQ,WAAW,CAC7C,EAGIgB,EAAuB,IAAM,CAC7BhB,EAAS,UACCG,EAAAH,EAAS,QAAQ,QAAQ,EACrCO,EAAgB,EAAK,EACvB,EAGIU,EAAsB7xH,GAAoB,CAC1C4wH,EAAS,UACFA,EAAA,QAAQ,YAAc5wH,EAAM,CAAC,EACvBixH,EAAAjxH,EAAM,CAAC,CAAC,EACnByxH,GAAA,MAAAA,EAAsB,IACxBx1G,EAAU,WAAW,OAAQw1G,EAAqB,GAAIzxH,EAAM,CAAC,CAAC,EAElE,EAII8xH,EAAcC,GAAiB,CACnC,MAAMzZ,EAAU,KAAK,MAAMyZ,EAAO,EAAE,EAC9BC,EAAU,KAAK,MAAMD,EAAO,EAAE,EAC7B,SAAGzZ,CAAO,IAAI0Z,EAAU,GAAK,IAAM,EAAE,GAAGA,CAAO,IAIxDrgG,mBAAU,IAAM,CAEJ1V,EAAA,cAAc,WAAY,oBAAoB,CAC1D,EAAG,CAAE,GAGL0V,YAAU,IAAM,CACd,GAAI8/F,GAAA,MAAAA,EAAsB,MAAO,CACzB,MAAAl6E,EAAYiD,GAAai3E,EAAqB,KAAK,EAGpDx5E,GAAqBV,CAAS,IAChBo5E,EAAAhiB,IAAS,CAAE,GAAGA,EAAM,CAACp3D,CAAS,EAAG,EAAO,IAG/BW,GAAAX,CAAS,EAChC,KAAgBlxC,GAAA,CACRuC,GAAA,KAAK,4BAA4BvC,EAAU,SAAW,QAAQ,IAAK,CAAE,UAAAkxC,EAAW,EACtEo5E,EAAAhiB,IAAS,CAAE,GAAGA,EAAM,CAACp3D,CAAS,EAAG,EAAQ,IAC3D,EACA,MAAep8C,GAAA,CACdyN,GAAO,MAAM,2CAA4C,CAAE,UAAA2uC,EAAW,MAAAp8C,EAAO,EAC5Dw1H,EAAAhiB,IAAS,CAAE,GAAGA,EAAM,CAACp3D,CAAS,EAAG,EAAQ,IAC3D,EAEP,CAEIk6E,IACFx1G,EAAU,kBAAkBw1G,EAAqB,GAAIA,EAAqB,IAAI,EACpEx1G,EAAA,yBAAyBw1G,EAAqB,GAAI,mBAAmB,EACjF,EACC,CAACA,CAAoB,CAAC,EAGzB9/F,YAAU,IAAM,CAEVi/F,EAAS,SAAWC,IACtBD,EAAS,QAAQ,QACjBE,EAAa,EAAK,GAGpBG,EAAe,CAAC,EAChBF,EAAY,CAAC,EAGTU,GAAA,MAAAA,EAAsB,OACxBN,EAAgB,EAAI,CACtB,EACC,CAACriB,CAAgB,CAAC,EAGnB3hF,EAAA,KAAC,MAAI,WAAU,6CACb,UAACA,OAAA,OAAI,UAAU,yBACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,OACV,QAAS,IAAMpJ,EAAS,EAAE,EAE1B,SAAA1jB,MAACi6E,GAAU,WAAU,SAAU,GACjC,EACCj6E,EAAA,UAAG,UAAU,oBAAoB,SAAkB,wBACtD,EAGAgB,OAAC,MAAI,WAAU,OACb,UAAChB,EAAA,UAAG,UAAU,0CAA0C,SAAoB,yBAC5EgB,EAAA,KAACu8E,GAAA,CACC,MAAOoF,EACP,cAAgB9uG,GAAUwxH,EAAoBxxH,CAAK,EAEnD,UAAAmsB,MAAC29E,IAAc,UAAU,yCACvB,eAACF,GAAY,aAAY,kBAAkB,CAC7C,SACCS,GACE,UAAAzyD,EAAqB,IAAK7H,GACxB5jB,EAAA,IAAAw+E,GAAA,CAA6B,MAAO56D,EAAS,GAC3C,SAAAA,EAAS,MADKA,EAAS,EAE1B,CACD,EACH,GACF,GACF,EAGC0hF,EACCtkG,EAAA,KAAC+3E,GAAK,WAAU,kCACd,UAAA/4E,MAACg5E,IAAW,UAAU,OACpB,SAACh4E,EAAA,YAAI,UAAU,qBACb,UAACA,OAAA,OAAI,UAAU,gDACb,UAAAhB,EAAA,IAACi5E,GAAU,WAAU,wCAClB,SAAAqsB,EAAqB,KACxB,EACAtkG,EAAA,KAAC8rB,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,wHACV,QAAS,IAAM,CAEbpJ,EAAS,OAAQ,CACf,MAAO,CACL,oBAAqB4hF,EAAqB,GAC1C,YAAa,EACf,EACD,EACSx1G,EAAA,oBAAoBO,GAAY,cAAe,CACvD,YAAai1G,EAAqB,GAClC,KAAM,eACP,CACH,EAEA,UAACtlG,MAAAytB,GAAA,CAAO,UAAU,cAAe,GAAE,qBAErC,GACF,EACCztB,EAAA,IAAAk5E,GAAA,CAAgB,UAAU,mCACxB,WAAqB,YACxB,GACF,CACF,UACCC,GACE,WAAAmsB,EAAqB,OACpBtkG,OAAC,MAAI,WAAU,OAEb,UAAAA,EAAA,KAAC,OACC,UAAU,oEACV,MAAO,CACL,gBAAiB,OAAOqtB,GAAai3E,EAAqB,KAAK,CAAC,IAChE,mBAAoB,SACpB,iBAAkB,YAClB,eAAgB,OAClB,EAGC,UAAAf,EAAcl2E,GAAai3E,EAAqB,KAAK,CAAC,GACrDtlG,MAAC,MAAI,WAAU,2EACb,SAAAA,MAAC2sB,GAAQ,WAAU,qCAAsC,GAC3D,EAIF3sB,EAAA,IAAC,OACC,IAAKquB,GAAai3E,EAAqB,KAAK,EAC5C,IAAK,uBAAuBA,EAAqB,IAAI,GACrD,UAAU,SACV,QAAU91H,GAAM,CAEdiN,GAAO,MAAM,mCAAoC,CAC/C,MAAO6oH,EAAqB,MAC5B,OAAQp+E,GAAS,EAClB,EACSp3B,EAAA,WAAWO,GAAY,eAAgB,4BAA6B,CAC5E,MAAOi1G,EAAqB,MAC5B,YAAaA,EAAqB,GAClC,OAAQp+E,GAAS,EAClB,CACH,EACF,GACF,EACAlmB,OAAC,IAAE,WAAU,yCAAyC,sBAAUskG,EAAqB,MAAK,GAC5F,EAIDA,EAAqB,OACnBtkG,OAAA,OAAI,UAAU,2DACb,UAACA,OAAA,OAAI,UAAU,yCACb,UAACA,OAAA,OAAI,UAAU,oBACb,UAAChB,MAAAkuB,GAAA,CAAQ,UAAU,6BAA8B,GAChDluB,EAAA,YAAK,UAAU,qCAAqC,SAAkB,wBACzE,EACAA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,UAAU,2BACV,QAASy4E,EACT,SAAUR,EAET,SACCA,EAAA/kG,MAAC2sB,GAAQ,WAAU,sCAAsC,EACvD+3E,EACD1kG,MAAA8lG,GAAA,CAAM,UAAU,yBAAyB,EAEzC9lG,EAAA,IAAA+lG,GAAA,CAAK,UAAU,yBAAyB,EAE7C,GACF,EAEA/kG,OAAC,MAAI,WAAU,YACb,UAAAhB,EAAA,IAAC4+F,GAAA,CACC,MAAO,CAACiG,CAAW,EACnB,IAAKj/F,GAAY,IACjB,KAAM,GACN,cAAe8/F,EACf,SAAUX,EACV,UAAU,iBACZ,EACA/jG,OAAC,MAAI,WAAU,8CACb,UAAChB,EAAA,YAAM,SAAW2lG,EAAAd,CAAW,CAAE,GAC9B7kG,EAAA,YAAM,SAAW2lG,EAAA//F,CAAQ,CAAE,IAC9B,GACF,EAEA5F,EAAA,IAAC,SACC,IAAKykG,EACL,IAAKa,EAAqB,MACvB,OAAO,SAAS,SAAS,SAAS,WAAW,EAC1C,iBAAiBA,EAAqB,KAAK,GAC3CA,EAAqB,MACvB,GACJ,aAAcE,EACd,iBAAkBC,EAClB,QAAS,IAAM,CACbd,EAAa,EAAK,EACdW,GAAA,MAAAA,EAAsB,IACdx1G,EAAA,WAAW,QAASw1G,EAAqB,EAAE,CAEzD,EACA,UAAW,IAAMN,EAAgB,EAAK,EACtC,QAAUx1H,GAAM,CACd,QAAQ,MAAM,8BAA+BA,EAAG81H,EAAqB,KAAK,EAC1EN,EAAgB,EAAK,CACvB,EACA,QAAQ,WACR,UAAU,SACZ,GACF,EAGDhlG,EAAA,UAAG,UAAU,yEAAyE,SAEvF,sBAEAA,MAAC40F,IAAW,UAAU,gBACpB,eAAC,MAAI,WAAU,YACX,UAAM,KAEN,IAAIoR,EAAiB,GAErB,GAAIV,EAAqB,QAEvBU,EAAiBV,EAAqB,gBAC7BA,EAAqB,WAAY,CAE1C,MAAMW,EAAqBz+E,GAAU,QAAYa,EAAI,KAAOi9E,EAAqB,UAAU,EACvFW,GAAA,MAAAA,EAAoB,UACtBD,EAAiBC,EAAmB,QAExC,CAGA,OAAOD,EAAe,MAAM;AAAA;AAAA,CAAM,EAAE,IAAI,CAACrwC,EAAW1mE,IAClD0mE,EAAU,QACP31D,MAAA,OAAgB,UAAU,OACxB,SAAA21D,EAAU,WAAW,GAAG,EACtB31D,MAAA,MAAG,UAAU,wCACX,SAAA21D,EAAU,QAAQ,IAAK,EAAE,EAAE,MAC9B,SAEC,IAAE,WAAU,yCAA0C,SAAUA,EAAA,GAN3D1mE,CAQV,CAEH,MAEL,CACF,IACF,EACF,GAEA+R,OAAC,MAAI,WAAU,+EACb,UAAChB,MAAA61C,GAAA,CAAK,UAAU,sCAAuC,GACtD71C,EAAA,SAAE,UAAU,qBAAqB,SAAoB,yBACrDA,EAAA,SAAE,UAAU,wBAAwB,SAAmC,yCAC1E,EAIFgB,OAAC,MAAI,WAAU,sEACZ,UACCskG,GAAAtkG,EAAA,KAAC8rB,EAAA,CACC,UAAU,iFACV,QAAQ,UACR,QAAS,IAAM,CACTw4E,IAEFrvD,GAA+BqvD,CAAoB,EAGnD5hF,EAAS,2BAA2B,EAE1B5zB,EAAA,0BAA0BO,GAAY,aAAc,CAC5D,OAAQ,eACR,YAAai1G,EAAqB,GACnC,EAEL,EAEA,UAACtlG,MAAA41C,GAAA,CAAO,UAAU,cAAe,GAAE,mCAErC,EAGF50C,EAAA,KAAC8rB,EAAA,CACC,UAAU,yEACV,QAAS,IAAM,CAEbpJ,EAAS,OAAQ,CACf,MAAO,CACL,oBAAqBi/D,EACrB,YAAa,GACb,UAAW,IAAI,KAAK,EAAE,QAAQ,CAChC,EACD,CACH,EAEA,UAAC3iF,MAAAytB,GAAA,CAAO,UAAU,cAAe,GAAE,qBAErC,GACF,QAEC8nB,GAAiB,GACpB,GAEJ,CCncA,SAAwB2wD,IAAY,CAClC,MAAMp2G,EAAYojG,KACZ,CAACiT,EAAWC,CAAY,EAAI7gG,WAAS,UAAU,EAC/C,CAAC6f,EAAWC,CAAY,EAAI9f,WAAS,EAAK,EAC1C,CAAC8gG,EAAeC,CAAgB,EAAI/gG,WAAc,IAAI,EAG5DC,YAAU,IAAM,CACd1V,EAAU,gBAAgB,sBAAuB,CAC/C,IAAKq2G,CAAA,CACN,GACA,CAACA,EAAWr2G,CAAS,CAAC,EAIzB0V,YAAU,IAAM,EACY,SAAY,CACpC6f,EAAa,EAAI,EACb,IAEF,MAAM,IAAI,QAAQ3xC,GAAW,WAAWA,EAAS,GAAI,CAAC,EAGrC4yH,EAAA,CACf,SAAU,CACR,WAAY,KACZ,YAAa,IACb,cAAe,IACf,uBAAwB,SACxB,WAAY,KACd,EACA,OAAQ,CACN,CAAE,KAAM,8BAA+B,MAAO,IAAK,MAAO,GAAI,EAC9D,CAAE,KAAM,iCAAkC,MAAO,IAAK,MAAO,GAAI,EACjE,CAAE,KAAM,6BAA8B,MAAO,IAAK,MAAO,GAAI,EAC7D,CAAE,KAAM,oBAAqB,MAAO,KAAM,MAAO,GAAI,EACrD,CAAE,KAAM,uBAAwB,MAAO,KAAM,MAAO,GAAI,EACxD,CAAE,KAAM,aAAc,MAAO,IAAK,MAAO,GAAI,EAC7C,CAAE,KAAM,iBAAkB,MAAO,IAAK,MAAO,GAAI,EACjD,CAAE,KAAM,sBAAuB,MAAO,KAAM,MAAO,GAAI,CACzD,EACA,SAAU,CACR,CAAE,KAAM,OAAQ,MAAO,KAAM,MAAO,GAAI,EACxC,CAAE,KAAM,WAAY,MAAO,IAAK,MAAO,GAAI,EAC3C,CAAE,KAAM,aAAc,MAAO,IAAK,MAAO,GAAI,EAC7C,CAAE,KAAM,SAAU,MAAO,IAAK,MAAO,GAAI,EACzC,CAAE,KAAM,SAAU,MAAO,IAAK,MAAO,GAAI,CAC3C,EACA,cAAe,CACb,KAAM,MACN,KAAM,MACN,MAAO,KACT,EACD,QACMt3H,EAAO,CACN,cAAM,mDAAoDA,CAAK,SACvE,CACAq2C,EAAa,EAAK,CACpB,KAIJ,EAAG,CAAE,GAGL,MAAMkhF,EAAmB,IAAM,CAC7B,GAAI,CAACF,EAAe,OAEpBv2G,EAAU,gBAAgB,mBAAoB,CAC5C,OAAQ,OACT,EAED,MAAM02G,EAAU,KAAK,UAAUH,EAAe,KAAM,CAAC,EAC/CI,EAAU,uCAAwC,mBAAmBD,CAAO,EAE5EE,EAAwB,oBAAoB,IAAI,KAAK,EAAE,cAAc,MAAM,GAAG,EAAE,CAAC,CAAC,QAElFC,EAAc,SAAS,cAAc,GAAG,EAClCA,EAAA,aAAa,OAAQF,CAAO,EAC5BE,EAAA,aAAa,WAAYD,CAAqB,EAC1DC,EAAY,MAAM,GAIlB,OAAA3lG,EAAA,KAAC,MAAI,WAAU,kCACb,UAACA,OAAA,OAAI,UAAU,yCACb,UAAChB,EAAA,UAAG,UAAU,qBAAqB,SAA0B,+BAC7DgB,EAAA,KAAC8rB,EAAA,CACC,QAAQ,UACR,QAASy5E,EACT,SAAUnhF,GAAa,CAACihF,EAExB,UAACrmG,MAAA4mG,GAAA,CAAS,UAAU,cAAe,GAAE,YAEvC,GACF,SAEC1uB,GAAK,OAAOiuB,EAAW,cAAeC,EAAc,UAAU,SAC7D,UAACplG,OAAAo3E,GAAA,CAAS,UAAU,wBAClB,UAACp4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,WAAW,SAAc,mBAC3Ct4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,SAAS,SAAU,eACrCt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,QAAQ,SAAK,UAC/Bt4E,EAAA,IAAAs4E,GAAA,CAAY,MAAM,QAAQ,SAAY,kBACzC,EAEClzD,EACCplB,EAAA,IAAC,MAAI,WAAU,wCACb,SAAAA,MAAC2sB,GAAQ,WAAU,oCAAqC,GAC1D,EACE05E,EAEArlG,OAAA0rB,WAAA,WAAA1rB,EAAA,KAACw3E,GAAY,OAAM,WAAW,UAAU,YACtC,UAACx3E,OAAA,OAAI,UAAU,uDACb,UAAAhB,MAAC+4E,IAAK,UAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAmB,8BACvD,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,SAAS,WAAW,GACxE,EACArmG,MAAC6mG,GAAU,WAAU,uBAAwB,IAC/C,CACF,SAEC9tB,GAAK,WAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAmB,8BACvD,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,SAAS,YAAY,GACzE,EACArmG,MAAC8mG,GAAS,WAAU,wBAAyB,IAC/C,CACF,SAEC/tB,GAAK,WAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAoB,+BACxD,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,SAAS,cAAc,GAC3E,EACArmG,MAAC+mG,GAAU,WAAU,yBAA0B,IACjD,CACF,SAEChuB,GAAK,WAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAwB,mCAC5D,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,SAAS,uBAAuB,GACpF,EACArmG,MAACgnG,GAAS,WAAU,yBAA0B,IAChD,CACF,SAECjuB,GAAK,WAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAc,yBAClD,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,SAAS,WAAW,GACxE,EACArmG,MAAC8mG,GAAS,WAAU,sBAAuB,IAC7C,CACF,SAEC/tB,GAAK,WAAU,MACd,SAAC/3E,EAAA,YAAI,UAAU,oCACb,UAAAA,OAAC,MACC,WAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAc,yBAClD,KAAG,WAAU,qBAAsB,SAAAqmG,EAAc,cAAc,MAAM,GACxE,EACArmG,MAAC6mG,GAAU,WAAU,yBAA0B,IACjD,CACF,IACF,EAEA7lG,OAAC+3E,GAAK,WAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAA0B,+BACnEgB,OAAC,MAAI,WAAU,yBACb,UAACA,OAAA,OAAI,UAAU,cACb,UAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAM,iBAC1C,IAAE,WAAU,oBAAqB,SAAAqmG,EAAc,cAAc,KAAK,GACrE,EACArlG,OAAC,MAAI,WAAU,cACb,UAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAM,iBAC1C,IAAE,WAAU,oBAAqB,SAAAqmG,EAAc,cAAc,KAAK,GACrE,EACArlG,OAAC,MAAI,WAAU,cACb,UAAChB,EAAA,SAAE,UAAU,wBAAwB,SAAO,kBAC3C,IAAE,WAAU,oBAAqB,SAAAqmG,EAAc,cAAc,MAAM,GACtE,GACF,GACF,GACF,EAEArmG,MAACw4E,IAAY,MAAM,SAAS,UAAU,YACpC,SAAAx3E,EAAA,KAAC+3E,GAAK,WAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAA6B,wCACrE,MAAI,WAAU,kBACb,SAACgB,EAAA,cAAM,UAAU,SACf,UAAAhB,MAAC,QACC,UAAAgB,OAAC,KAAG,WAAU,WACZ,UAAChB,EAAA,UAAG,UAAU,iBAAiB,SAAS,cACvCA,EAAA,UAAG,UAAU,kBAAkB,SAAM,WACrCA,EAAA,UAAG,UAAU,kBAAkB,SAAY,kBAC9C,CACF,GACAA,EAAA,IAAC,QACE,UAAAqmG,EAAc,OAAO,IAAI,CAAC51H,EAAYwe,IACrC+R,EAAA,KAAC,KAAe,WAAU,WACxB,UAAAhB,EAAA,IAAC,KAAG,WAAU,OAAQ,SAAAvvB,EAAM,KAAK,EAChCuvB,EAAA,UAAG,UAAU,kBAAmB,WAAM,MAAM,EAC5CA,EAAA,UAAG,UAAU,kBAAmB,WAAM,MAAM,IAHtC/Q,CAIT,CACD,EACH,GACF,CACF,IACF,CACF,GAEA+Q,MAACw4E,IAAY,MAAM,QAAQ,UAAU,YACnC,SAAAx3E,EAAA,KAAC+3E,GAAK,WAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAAuB,kCAC/D,MAAI,WAAU,kBACb,SAACgB,EAAA,cAAM,UAAU,SACf,UAAAhB,MAAC,QACC,UAAAgB,OAAC,KAAG,WAAU,WACZ,UAAChB,EAAA,UAAG,UAAU,iBAAiB,SAAI,SAClCA,EAAA,UAAG,UAAU,kBAAkB,SAAI,SACnCA,EAAA,UAAG,UAAU,kBAAkB,SAAY,kBAC9C,CACF,GACAA,EAAA,IAAC,QACE,UAAAqmG,EAAc,SAAS,IAAI,CAACrlF,EAAW/xB,IACtC+R,EAAA,KAAC,KAAe,WAAU,WACxB,UAAAhB,EAAA,IAAC,KAAG,WAAU,OAAQ,SAAAghB,EAAK,KAAK,EAC/BhhB,EAAA,UAAG,UAAU,kBAAmB,WAAK,MAAM,EAC3CA,EAAA,UAAG,UAAU,kBAAmB,WAAK,MAAM,IAHrC/Q,CAIT,CACD,EACH,GACF,CACF,IACF,CACF,GAEC+R,EAAA,KAAAw3E,GAAA,CAAY,MAAM,QAAQ,UAAU,YACnC,UAACx3E,OAAA,OAAI,UAAU,wCACb,UAACA,OAAA+3E,GAAA,CAAK,UAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAAuB,kCAC/D,MAAI,WAAU,wCACb,SAACgB,EAAA,YAAI,UAAU,8BACb,UAACA,OAAA,OAAI,UAAU,cACb,UAAChB,EAAA,WAAI,UAAU,qBAAqB,SAAG,QACtCA,EAAA,WAAI,UAAU,wBAAwB,SAAQ,cACjD,EACAgB,OAAC,MAAI,WAAU,cACb,UAAChB,EAAA,WAAI,UAAU,qBAAqB,SAAG,QACtCA,EAAA,WAAI,UAAU,wBAAwB,SAAU,gBACnD,GACF,CACF,IACF,EAEAgB,OAAC+3E,GAAK,WAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAAU,eACnDgB,OAAC,MAAI,WAAU,YACb,UAAAA,OAAC,MACC,WAACA,OAAA,OAAI,UAAU,4BACb,UAAChB,EAAA,YAAK,UAAU,UAAU,SAAmB,wBAC5CA,EAAA,YAAK,UAAU,sBAAsB,SAAG,SAC3C,EACCA,EAAA,WAAI,UAAU,sCACb,SAACA,MAAA,OAAI,UAAU,+BAA+B,MAAO,CAAE,MAAO,MAAS,GACzE,GACF,SAEC,MACC,WAACgB,OAAA,OAAI,UAAU,4BACb,UAAChB,EAAA,YAAK,UAAU,UAAU,SAAiB,sBAC1CA,EAAA,YAAK,UAAU,sBAAsB,SAAG,SAC3C,EACCA,EAAA,WAAI,UAAU,sCACb,SAACA,MAAA,OAAI,UAAU,gCAAgC,MAAO,CAAE,MAAO,MAAS,GAC1E,GACF,SAEC,MACC,WAACgB,OAAA,OAAI,UAAU,4BACb,UAAChB,EAAA,YAAK,UAAU,UAAU,SAAkB,uBAC3CA,EAAA,YAAK,UAAU,sBAAsB,SAAG,SAC3C,EACCA,EAAA,WAAI,UAAU,sCACb,SAACA,MAAA,OAAI,UAAU,iCAAiC,MAAO,CAAE,MAAO,MAAS,GAC3E,GACF,GACF,GACF,GACF,EAEAgB,OAAC+3E,GAAK,WAAU,MACd,UAAC/4E,EAAA,UAAG,UAAU,2BAA2B,SAAoB,yBAC7DgB,OAAC,MAAI,WAAU,4DACb,UAAChB,EAAA,WAAI,UAAU,2DAA2D,SAE1E,eACCA,EAAA,WAAI,UAAU,gBAAgB,SAAC,MAC/BA,EAAA,WAAI,UAAU,6DAA6D,SAE5E,UACCA,EAAA,WAAI,UAAU,gBAAgB,SAAC,MAC/BA,EAAA,WAAI,UAAU,+DAA+D,SAE9E,cACCA,EAAA,WAAI,UAAU,gBAAgB,SAAC,MAC/BA,EAAA,WAAI,UAAU,+DAA+D,SAE9E,uBACF,GACF,GACF,EACF,GAECA,MAAA,OAAI,UAAU,wCACb,eAAC,IAAE,WAAU,gBAAgB,wDAA6C,GAC5E,GAEJ,EAEAgB,OAAC,MAAI,WAAU,6BACb,UAAAhB,MAAC,KAAE,SAA0K,+KAC7KgB,OAAC,IAAE,WAAU,OAAO,4DAA+ChB,MAAC,IAAE,MAAK,uCAAuC,OAAO,SAAS,IAAI,sBAAsB,UAAU,gCAAgC,SAAgB,qBAAI,KAAC,GAC7N,CACF,GAEJ,CCzVO,MAAMinG,GAA8C,CAAC,CAAE,SAAAh5F,EAAU,UAAAxY,EAAY,YAE/E,MAAI,WAAW,+CAA+CA,CAAS,GACrE,SAAAwY,CACH,GCHSi5F,GAAwC,CAAC,CAAE,MAAAp1G,EAAO,SAAAq1G,EAAU,SAAAl5F,KAErEjN,EAAA,KAAC,MAAI,WAAU,OACb,UAAChB,EAAA,UAAG,UAAU,wCAAyC,SAAMlO,EAAA,EAC5Dq1G,GAAYnnG,EAAA,IAAC,IAAE,WAAU,gBAAiB,SAASmnG,EAAA,EACnDl5F,CACH,ICZJ,IAAIm5F,GAAmBr2G,GAAYA,EAAQ,OAAS,WAEhDs2G,GAAgBxzH,GAAUA,aAAiB,KAE3CyzH,GAAqBzzH,GAAUA,GAAS,KAE5C,MAAM0zH,GAAgB1zH,GAAU,OAAOA,GAAU,SACjD,IAAIgC,GAAYhC,GAAU,CAACyzH,GAAkBzzH,CAAK,GAC9C,CAAC,MAAM,QAAQA,CAAK,GACpB0zH,GAAa1zH,CAAK,GAClB,CAACwzH,GAAaxzH,CAAK,EAEnB2zH,GAAiB/2H,GAAUoF,GAASpF,CAAK,GAAKA,EAAM,OAClD22H,GAAgB32H,EAAM,MAAM,EACxBA,EAAM,OAAO,QACbA,EAAM,OAAO,MACjBA,EAEFg3H,GAAqB9wH,GAASA,EAAK,UAAU,EAAGA,EAAK,OAAO,aAAa,CAAC,GAAKA,EAE/E+wH,GAAqB,CAACC,EAAOhxH,IAASgxH,EAAM,IAAIF,GAAkB9wH,CAAI,CAAC,EAEvEygC,GAAiBwwF,GAAe,CAChC,MAAMC,EAAgBD,EAAW,aAAeA,EAAW,YAAY,UACvE,OAAQ/xH,GAASgyH,CAAa,GAAKA,EAAc,eAAe,eAAe,CACnF,EAEIC,GAAQ,OAAO,OAAW,KAC1B,OAAO,OAAO,YAAgB,KAC9B,OAAO,SAAa,IAExB,SAASC,GAAYlzH,EAAM,CACvB,IAAI8iC,EACJ,MAAMgwD,EAAU,MAAM,QAAQ9yF,CAAI,EAClC,GAAIA,aAAgB,KAChB8iC,EAAO,IAAI,KAAK9iC,CAAI,UAEfA,aAAgB,IACrB8iC,EAAO,IAAI,IAAI9iC,CAAI,UAEd,EAAEizH,KAAUjzH,aAAgB,MAAQA,aAAgB,aACxD8yF,GAAW9xF,GAAShB,CAAI,GAEzB,GADA8iC,EAAOgwD,EAAU,CAAE,EAAG,GAClB,CAACA,GAAW,CAACvwD,GAAcviC,CAAI,EAC/B8iC,EAAO9iC,MAGP,WAAWO,KAAOP,EACVA,EAAK,eAAeO,CAAG,IACvBuiC,EAAKviC,CAAG,EAAI2yH,GAAYlzH,EAAKO,CAAG,CAAC,OAM7C,QAAOP,EAEX,OAAO8iC,CACX,CAEA,IAAIqwF,GAAWn0H,GAAU,MAAM,QAAQA,CAAK,EAAIA,EAAM,OAAO,OAAO,EAAI,GAEpEo0H,GAAe/uH,GAAQA,IAAQ,OAE/BgvH,GAAM,CAAC9uH,EAAQ8d,EAAM4nG,IAAiB,CACtC,GAAI,CAAC5nG,GAAQ,CAACrhB,GAASuD,CAAM,EACzB,OAAO0lH,EAEX,MAAMz+G,EAAS2nH,GAAQ9wG,EAAK,MAAM,WAAW,CAAC,EAAE,OAAO,CAAC7W,EAAQjL,IAAQkyH,GAAkBjnH,CAAM,EAAIA,EAASA,EAAOjL,CAAG,EAAGgE,CAAM,EAChI,OAAO6uH,GAAY5nH,CAAM,GAAKA,IAAWjH,EACnC6uH,GAAY7uH,EAAO8d,CAAI,CAAC,EACpB4nG,EACA1lH,EAAO8d,CAAI,EACf7W,CACV,EAEI8nH,GAAat0H,GAAU,OAAOA,GAAU,UAExCu0H,GAASv0H,GAAU,QAAQ,KAAKA,CAAK,EAErCw0H,GAAgB32H,GAAUs2H,GAAQt2H,EAAM,QAAQ,YAAa,EAAE,EAAE,MAAM,OAAO,CAAC,EAE/EiU,GAAM,CAACvM,EAAQ8d,EAAMrjB,IAAU,CAC/B,IAAIob,EAAQ,GACZ,MAAMq5G,EAAWF,GAAMlxG,CAAI,EAAI,CAACA,CAAI,EAAImxG,GAAanxG,CAAI,EACnDinE,EAASmqC,EAAS,OAClB7mF,EAAY08C,EAAS,EAC3B,KAAO,EAAElvE,EAAQkvE,GAAQ,CACrB,MAAM/oF,EAAMkzH,EAASr5G,CAAK,EAC1B,IAAI/T,EAAWrH,EACf,GAAIob,IAAUwyB,EAAW,CACrB,MAAM8mF,EAAWnvH,EAAOhE,CAAG,EAC3B8F,EACIrF,GAAS0yH,CAAQ,GAAK,MAAM,QAAQA,CAAQ,EACtCA,EACC,MAAM,CAACD,EAASr5G,EAAQ,CAAC,CAAC,EAEvB,GADA,CAAE,CAEnB,CACD,GAAI7Z,IAAQ,YACR,OAEJgE,EAAOhE,CAAG,EAAI8F,EACd9B,EAASA,EAAOhE,CAAG,CACtB,CACD,OAAOgE,CACX,EAEA,MAAMovH,GAAS,CACX,KAAM,OACN,UAAW,WACX,OAAQ,QACZ,EACMC,GAAkB,CACpB,OAAQ,SACR,SAAU,WACV,SAAU,WACV,UAAW,YACX,IAAK,KACT,EACMC,GAAyB,CAC3B,IAAK,MACL,IAAK,MACL,UAAW,YACX,UAAW,YACX,QAAS,UACT,SAAU,WACV,SAAU,UACd,EAEMC,GAAkBlkG,EAAM,cAAc,IAAI,EA+B1CmkG,GAAiB,IAAMnkG,EAAM,WAAWkkG,EAAe,EAoC7D,IAAIE,GAAoB,CAACC,EAAWvoB,EAASwoB,EAAqBC,EAAS,KAAS,CAChF,MAAM3oH,EAAS,CACX,cAAekgG,EAAQ,cAC/B,EACI,UAAWnrG,KAAO0zH,EACd,OAAO,eAAezoH,EAAQjL,EAAK,CAC/B,IAAK,IAAM,CACP,MAAM6zH,EAAO7zH,EACb,OAAImrG,EAAQ,gBAAgB0oB,CAAI,IAAMR,GAAgB,MAClDloB,EAAQ,gBAAgB0oB,CAAI,EAAI,CAACD,GAAUP,GAAgB,KAGxDK,EAAUG,CAAI,CACxB,CACb,CAAS,EAEL,OAAO5oH,CACX,EAEI6oH,GAAiBr1H,GAAUgC,GAAShC,CAAK,GAAK,CAAC,OAAO,KAAKA,CAAK,EAAE,OAElEs1H,GAAwB,CAACC,EAAeC,EAAiBC,EAAiBN,IAAW,CACrFM,EAAgBF,CAAa,EAC7B,KAAM,CAAE,KAAAzyH,EAAM,GAAGmyH,CAAS,EAAKM,EAC/B,OAAQF,GAAcJ,CAAS,GAC3B,OAAO,KAAKA,CAAS,EAAE,QAAU,OAAO,KAAKO,CAAe,EAAE,QAC9D,OAAO,KAAKP,CAAS,EAAE,KAAM1zH,GAAQi0H,EAAgBj0H,CAAG,IACxCqzH,GAAgB,GAAI,CAC5C,EAEIc,GAAyB11H,GAAW,MAAM,QAAQA,CAAK,EAAIA,EAAQ,CAACA,CAAK,EAEzE21H,GAAwB,CAAC7yH,EAAM8yH,EAAYjzF,IAAU,CAAC7/B,GACtD,CAAC8yH,GACD9yH,IAAS8yH,GACTF,GAAsB5yH,CAAI,EAAE,KAAM+yH,GAAgBA,IAC7ClzF,EACKkzF,IAAgBD,EAChBC,EAAY,WAAWD,CAAU,GAC/BA,EAAW,WAAWC,CAAW,EAAE,EAEnD,SAASC,GAAa3yH,EAAO,CACzB,MAAM4yH,EAASnlG,EAAM,OAAOztB,CAAK,EACjC4yH,EAAO,QAAU5yH,EACjBytB,EAAM,UAAU,IAAM,CAClB,MAAMolG,EAAe,CAAC7yH,EAAM,UACxB4yH,EAAO,QAAQ,SACfA,EAAO,QAAQ,QAAQ,UAAU,CAC7B,KAAMA,EAAO,QAAQ,IACrC,CAAa,EACL,MAAO,IAAM,CACTC,GAAgBA,EAAa,aACzC,CACA,EAAO,CAAC7yH,EAAM,QAAQ,CAAC,CACvB,CAsEA,IAAI8yH,GAAYj2H,GAAU,OAAOA,GAAU,SAEvCk2H,GAAsB,CAACpC,EAAOqC,EAAQC,EAAYC,EAAUpL,IACxDgL,GAASnC,CAAK,GACduC,GAAYF,EAAO,MAAM,IAAIrC,CAAK,EAC3BO,GAAI+B,EAAYtC,EAAO7I,CAAY,GAE1C,MAAM,QAAQ6I,CAAK,EACZA,EAAM,IAAKj8G,IAAew+G,GAAYF,EAAO,MAAM,IAAIt+G,CAAS,EAAGw8G,GAAI+B,EAAYv+G,CAAS,EAAE,GAEzGw+G,IAAaF,EAAO,SAAW,IACxBC,GAmBX,SAASE,GAASnzH,EAAO,CACrB,MAAMozH,EAAUxB,KACV,CAAE,QAAAroB,EAAU6pB,EAAQ,QAAS,KAAAzzH,EAAM,aAAAmoH,EAAc,SAAA3+D,EAAU,MAAA3pB,CAAK,EAAMx/B,GAAS,GAC/EqzH,EAAQ5lG,EAAM,OAAO9tB,CAAI,EAC/B0zH,EAAM,QAAU1zH,EAChBgzH,GAAa,CACT,SAAAxpE,EACA,QAASogD,EAAQ,UAAU,OAC3B,KAAOuoB,GAAc,CACbU,GAAsBa,EAAM,QAASvB,EAAU,KAAMtyF,CAAK,GAC1D8zF,EAAYvC,GAAYgC,GAAoBM,EAAM,QAAS9pB,EAAQ,OAAQuoB,EAAU,QAAUvoB,EAAQ,YAAa,GAAOue,CAAY,CAAC,CAAC,CAEhJ,CACT,CAAK,EACD,KAAM,CAACjrH,EAAOy2H,CAAW,EAAI7lG,EAAM,SAAS87E,EAAQ,UAAU5pG,EAAMmoH,CAAY,CAAC,EACjF,OAAAr6F,EAAM,UAAU,IAAM87E,EAAQ,iBAAkB,GACzC1sG,CACX,CA0SA,IAAI02H,GAAe,CAAC5zH,EAAM6zH,EAA0Bx6H,EAAQ6G,EAAM1H,IAAYq7H,EACxE,CACE,GAAGx6H,EAAO2G,CAAI,EACd,MAAO,CACH,GAAI3G,EAAO2G,CAAI,GAAK3G,EAAO2G,CAAI,EAAE,MAAQ3G,EAAO2G,CAAI,EAAE,MAAQ,GAC9D,CAACE,CAAI,EAAG1H,GAAW,EACtB,CACJ,EACC,GAeFs7H,GAAsB3zH,IAAU,CAChC,WAAY,CAACA,GAAQA,IAAS2xH,GAAgB,SAC9C,SAAU3xH,IAAS2xH,GAAgB,OACnC,WAAY3xH,IAAS2xH,GAAgB,SACrC,QAAS3xH,IAAS2xH,GAAgB,IAClC,UAAW3xH,IAAS2xH,GAAgB,SACxC,GAEIiC,GAAY,CAAC/zH,EAAMqzH,EAAQW,IAAgB,CAACA,IAC3CX,EAAO,UACJA,EAAO,MAAM,IAAIrzH,CAAI,GACrB,CAAC,GAAGqzH,EAAO,KAAK,EAAE,KAAMY,GAAcj0H,EAAK,WAAWi0H,CAAS,GAC3D,SAAS,KAAKj0H,EAAK,MAAMi0H,EAAU,MAAM,CAAC,CAAC,GAEvD,MAAMC,GAAwB,CAACnyC,EAAQnoE,EAAQu6G,EAAaC,IAAe,CACvE,UAAW31H,KAAO01H,GAAe,OAAO,KAAKpyC,CAAM,EAAG,CAClD,MAAMvC,EAAQ+xC,GAAIxvC,EAAQtjF,CAAG,EAC7B,GAAI+gF,EAAO,CACP,KAAM,CAAE,GAAAp3C,EAAI,GAAGisF,CAAY,EAAK70C,EAChC,GAAIp3C,EAAI,CACJ,GAAIA,EAAG,MAAQA,EAAG,KAAK,CAAC,GAAKxuB,EAAOwuB,EAAG,KAAK,CAAC,EAAG3pC,CAAG,GAAK,CAAC21H,EACrD,MAAO,GAEN,GAAIhsF,EAAG,KAAOxuB,EAAOwuB,EAAG,IAAKA,EAAG,IAAI,GAAK,CAACgsF,EAC3C,MAAO,GAGP,GAAIF,GAAsBG,EAAcz6G,CAAM,EAC1C,KAGX,SACQ1a,GAASm1H,CAAY,GACtBH,GAAsBG,EAAcz6G,CAAM,EAC1C,KAGX,CACJ,CAEL,EAEA,IAAI06G,GAA4B,CAACj7H,EAAQhB,EAAO2H,IAAS,CACrD,MAAMu0H,EAAmB3B,GAAsBrB,GAAIl4H,EAAQ2G,CAAI,CAAC,EAChE,OAAAgP,GAAIulH,EAAkB,OAAQl8H,EAAM2H,CAAI,CAAC,EACzCgP,GAAI3V,EAAQ2G,EAAMu0H,CAAgB,EAC3Bl7H,CACX,EAEIm7H,GAAep6G,GAAYA,EAAQ,OAAS,OAE5Cq6G,GAAcv3H,GAAU,OAAOA,GAAU,WAEzCw3H,GAAiBx3H,GAAU,CAC3B,GAAI,CAACi0H,GACD,MAAO,GAEX,MAAMwD,EAAQz3H,EAAQA,EAAM,cAAgB,EAC5C,OAAQA,aACHy3H,GAASA,EAAM,YAAcA,EAAM,YAAY,YAAc,YACtE,EAEIC,GAAa13H,GAAUi2H,GAASj2H,CAAK,EAErC23H,GAAgBz6G,GAAYA,EAAQ,OAAS,QAE7C06G,GAAW53H,GAAUA,aAAiB,OAE1C,MAAM63H,GAAgB,CAClB,MAAO,GACP,QAAS,EACb,EACMC,GAAc,CAAE,MAAO,GAAM,QAAS,EAAI,EAChD,IAAIC,GAAoBp0H,GAAY,CAChC,GAAI,MAAM,QAAQA,CAAO,EAAG,CACxB,GAAIA,EAAQ,OAAS,EAAG,CACpB,MAAM8mD,EAAS9mD,EACV,OAAQq0H,GAAWA,GAAUA,EAAO,SAAW,CAACA,EAAO,QAAQ,EAC/D,IAAKA,GAAWA,EAAO,KAAK,EACjC,MAAO,CAAE,MAAOvtE,EAAQ,QAAS,CAAC,CAACA,EAAO,OAC7C,CACD,OAAO9mD,EAAQ,CAAC,EAAE,SAAW,CAACA,EAAQ,CAAC,EAAE,SAEjCA,EAAQ,CAAC,EAAE,YAAc,CAACywH,GAAYzwH,EAAQ,CAAC,EAAE,WAAW,KAAK,EAC3DywH,GAAYzwH,EAAQ,CAAC,EAAE,KAAK,GAAKA,EAAQ,CAAC,EAAE,QAAU,GAClDm0H,GACA,CAAE,MAAOn0H,EAAQ,CAAC,EAAE,MAAO,QAAS,EAAM,EAC9Cm0H,GACRD,EACT,CACD,OAAOA,EACX,EAEA,MAAMI,GAAgB,CAClB,QAAS,GACT,MAAO,IACX,EACA,IAAIC,GAAiBv0H,GAAY,MAAM,QAAQA,CAAO,EAChDA,EAAQ,OAAO,CAACupC,EAAU8qF,IAAWA,GAAUA,EAAO,SAAW,CAACA,EAAO,SACrE,CACE,QAAS,GACT,MAAOA,EAAO,KACjB,EACC9qF,EAAU+qF,EAAa,EAC3BA,GAEN,SAASE,GAAiB3rH,EAAQ0f,EAAKlpB,EAAO,WAAY,CACtD,GAAI00H,GAAUlrH,CAAM,GACf,MAAM,QAAQA,CAAM,GAAKA,EAAO,MAAMkrH,EAAS,GAC/CpD,GAAU9nH,CAAM,GAAK,CAACA,EACvB,MAAO,CACH,KAAAxJ,EACA,QAAS00H,GAAUlrH,CAAM,EAAIA,EAAS,GACtC,IAAA0f,CACZ,CAEA,CAEA,IAAIksG,GAAsBC,GAAmBr2H,GAASq2H,CAAc,GAAK,CAACT,GAAQS,CAAc,EAC1FA,EACA,CACE,MAAOA,EACP,QAAS,EACjB,EAEIC,GAAgB,MAAOh2C,EAAO8zC,EAAYO,EAA0B4B,EAA2BC,IAAiB,CAChH,KAAM,CAAE,IAAAtsG,EAAK,KAAAgF,EAAM,SAAAw6E,EAAU,UAAAnQ,EAAW,UAAAk9B,EAAW,IAAA3qG,EAAK,IAAAC,EAAK,QAAAqhB,EAAS,SAAAspF,EAAU,KAAA51H,EAAM,cAAA61H,EAAe,MAAAC,EAAO,SAAAtsE,CAAW,EAAGg2B,EAAM,GAC1Hu2C,EAAaxE,GAAI+B,EAAYtzH,CAAI,EACvC,GAAI,CAAC81H,GAAStsE,EACV,MAAO,GAEX,MAAMwsE,EAAW5nG,EAAOA,EAAK,CAAC,EAAIhF,EAC5B6sG,EAAqBz9H,GAAY,CAC/Bi9H,GAA6BO,EAAS,iBACtCA,EAAS,kBAAkBxE,GAAUh5H,CAAO,EAAI,GAAKA,GAAW,EAAE,EAClEw9H,EAAS,eAAc,EAEnC,EACU39H,EAAQ,GACR69H,EAAUrB,GAAazrG,CAAG,EAC1B+sG,EAAa1F,GAAgBrnG,CAAG,EAChCgtG,EAAoBF,GAAWC,EAC/BE,GAAYR,GAAiBrB,GAAYprG,CAAG,IAC9CkoG,GAAYloG,EAAI,KAAK,GACrBkoG,GAAYyE,CAAU,GACrBrB,GAActrG,CAAG,GAAKA,EAAI,QAAU,IACrC2sG,IAAe,IACd,MAAM,QAAQA,CAAU,GAAK,CAACA,EAAW,OACxCO,EAAoB1C,GAAa,KAAK,KAAM5zH,EAAM6zH,EAA0Bx7H,CAAK,EACjFk+H,EAAmB,CAACC,EAAWC,EAAkBC,EAAkBC,EAAU5E,GAAuB,UAAW6E,EAAU7E,GAAuB,YAAc,CAChK,MAAMv5H,GAAUg+H,EAAYC,EAAmBC,EAC/Cr+H,EAAM2H,CAAI,EAAI,CACV,KAAMw2H,EAAYG,EAAUC,EAC5B,QAAAp+H,GACA,IAAA4wB,EACA,GAAGktG,EAAkBE,EAAYG,EAAUC,EAASp+H,EAAO,CACvE,CACA,EACI,GAAIk9H,EACE,CAAC,MAAM,QAAQK,CAAU,GAAK,CAACA,EAAW,OAC1CntB,IACI,CAACwtB,IAAsBC,GAAW1F,GAAkBoF,CAAU,IAC3DvE,GAAUuE,CAAU,GAAK,CAACA,GAC1BI,GAAc,CAAClB,GAAiB7mG,CAAI,EAAE,SACtC8nG,GAAW,CAACd,GAAchnG,CAAI,EAAE,SAAW,CACpD,KAAM,CAAE,MAAAlxB,EAAO,QAAA1E,GAAYo8H,GAAUhsB,CAAQ,EACvC,CAAE,MAAO,CAAC,CAACA,EAAU,QAASA,CAAU,EACxC0sB,GAAmB1sB,CAAQ,EACjC,GAAI1rG,IACA7E,EAAM2H,CAAI,EAAI,CACV,KAAM+xH,GAAuB,SAC7B,QAAAv5H,EACA,IAAKw9H,EACL,GAAGM,EAAkBvE,GAAuB,SAAUv5H,CAAO,CAC7E,EACgB,CAACq7H,GACD,OAAAoC,EAAkBz9H,CAAO,EAClBH,CAGlB,CACD,GAAI,CAACg+H,IAAY,CAAC1F,GAAkB3lG,CAAG,GAAK,CAAC2lG,GAAkB1lG,CAAG,GAAI,CAClE,IAAIurG,EACAK,EACJ,MAAMC,EAAYxB,GAAmBrqG,CAAG,EAClC8rG,EAAYzB,GAAmBtqG,CAAG,EACxC,GAAI,CAAC2lG,GAAkBoF,CAAU,GAAK,CAAC,MAAMA,CAAU,EAAG,CACtD,MAAMiB,EAAc5tG,EAAI,eACnB2sG,GAAa,CAACA,EACdpF,GAAkBmG,EAAU,KAAK,IAClCN,EAAYQ,EAAcF,EAAU,OAEnCnG,GAAkBoG,EAAU,KAAK,IAClCF,EAAYG,EAAcD,EAAU,MAE3C,KACI,CACD,MAAME,EAAY7tG,EAAI,aAAe,IAAI,KAAK2sG,CAAU,EAClDmB,GAAqBjI,GAAS,IAAI,KAAK,IAAI,KAAM,EAAC,aAAc,EAAG,IAAMA,CAAI,EAC7EkI,EAAS/tG,EAAI,MAAQ,OACrBguG,EAAShuG,EAAI,MAAQ,OACvB+pG,GAAS2D,EAAU,KAAK,GAAKf,IAC7BS,EAAYW,EACND,GAAkBnB,CAAU,EAAImB,GAAkBJ,EAAU,KAAK,EACjEM,EACIrB,EAAae,EAAU,MACvBG,EAAY,IAAI,KAAKH,EAAU,KAAK,GAE9C3D,GAAS4D,EAAU,KAAK,GAAKhB,IAC7Bc,EAAYM,EACND,GAAkBnB,CAAU,EAAImB,GAAkBH,EAAU,KAAK,EACjEK,EACIrB,EAAagB,EAAU,MACvBE,EAAY,IAAI,KAAKF,EAAU,KAAK,EAErD,CACD,IAAIP,GAAaK,KACbN,EAAiB,CAAC,CAACC,EAAWM,EAAU,QAASC,EAAU,QAAShF,GAAuB,IAAKA,GAAuB,GAAG,EACtH,CAAC8B,GACD,OAAAoC,EAAkB59H,EAAM2H,CAAI,EAAE,OAAO,EAC9B3H,CAGlB,CACD,IAAKogG,GAAak9B,IACd,CAACU,IACAlD,GAAS4C,CAAU,GAAML,GAAgB,MAAM,QAAQK,CAAU,GAAK,CACvE,MAAMsB,EAAkB/B,GAAmB78B,CAAS,EAC9C6+B,EAAkBhC,GAAmBK,CAAS,EAC9Ca,EAAY,CAAC7F,GAAkB0G,EAAgB,KAAK,GACtDtB,EAAW,OAAS,CAACsB,EAAgB,MACnCR,EAAY,CAAClG,GAAkB2G,EAAgB,KAAK,GACtDvB,EAAW,OAAS,CAACuB,EAAgB,MACzC,IAAId,GAAaK,KACbN,EAAiBC,EAAWa,EAAgB,QAASC,EAAgB,OAAO,EACxE,CAACzD,GACD,OAAAoC,EAAkB59H,EAAM2H,CAAI,EAAE,OAAO,EAC9B3H,CAGlB,CACD,GAAIi0C,GAAW,CAAC+pF,GAAWlD,GAAS4C,CAAU,EAAG,CAC7C,KAAM,CAAE,MAAOwB,EAAc,QAAA/+H,CAAO,EAAK88H,GAAmBhpF,CAAO,EACnE,GAAIwoF,GAAQyC,CAAY,GAAK,CAACxB,EAAW,MAAMwB,CAAY,IACvDl/H,EAAM2H,CAAI,EAAI,CACV,KAAM+xH,GAAuB,QAC7B,QAAAv5H,EACA,IAAA4wB,EACA,GAAGktG,EAAkBvE,GAAuB,QAASv5H,CAAO,CAC5E,EACgB,CAACq7H,GACD,OAAAoC,EAAkBz9H,CAAO,EAClBH,CAGlB,CACD,GAAIu9H,GACA,GAAInB,GAAWmB,CAAQ,EAAG,CACtB,MAAMlsH,EAAS,MAAMksH,EAASG,EAAYzC,CAAU,EAC9CkE,EAAgBnC,GAAiB3rH,EAAQssH,CAAQ,EACvD,GAAIwB,IACAn/H,EAAM2H,CAAI,EAAI,CACV,GAAGw3H,EACH,GAAGlB,EAAkBvE,GAAuB,SAAUyF,EAAc,OAAO,CAC/F,EACoB,CAAC3D,GACD,OAAAoC,EAAkBuB,EAAc,OAAO,EAChCn/H,CAGlB,SACQ6G,GAAS02H,CAAQ,EAAG,CACzB,IAAI/4B,EAAmB,GACvB,UAAWp+F,KAAOm3H,EAAU,CACxB,GAAI,CAACrD,GAAc11B,CAAgB,GAAK,CAACg3B,EACrC,MAEJ,MAAM2D,EAAgBnC,GAAiB,MAAMO,EAASn3H,CAAG,EAAEs3H,EAAYzC,CAAU,EAAG0C,EAAUv3H,CAAG,EAC7F+4H,IACA36B,EAAmB,CACf,GAAG26B,EACH,GAAGlB,EAAkB73H,EAAK+4H,EAAc,OAAO,CACvE,EACoBvB,EAAkBuB,EAAc,OAAO,EACnC3D,IACAx7H,EAAM2H,CAAI,EAAI68F,GAGzB,CACD,GAAI,CAAC01B,GAAc11B,CAAgB,IAC/BxkG,EAAM2H,CAAI,EAAI,CACV,IAAKg2H,EACL,GAAGn5B,CACvB,EACoB,CAACg3B,GACD,OAAOx7H,CAGlB,EAEL,OAAA49H,EAAkB,EAAI,EACf59H,CACX,EAkDA,SAASo/H,GAAQh1H,EAAQi1H,EAAY,CACjC,MAAMlwC,EAASkwC,EAAW,MAAM,EAAG,EAAE,EAAE,OACvC,IAAIp/G,EAAQ,EACZ,KAAOA,EAAQkvE,GACX/kF,EAAS6uH,GAAY7uH,CAAM,EAAI6V,IAAU7V,EAAOi1H,EAAWp/G,GAAO,CAAC,EAEvE,OAAO7V,CACX,CACA,SAASk1H,GAAalkE,EAAK,CACvB,UAAWh1D,KAAOg1D,EACd,GAAIA,EAAI,eAAeh1D,CAAG,GAAK,CAAC6yH,GAAY79D,EAAIh1D,CAAG,CAAC,EAChD,MAAO,GAGf,MAAO,EACX,CACA,SAASm5H,GAAMn1H,EAAQ8d,EAAM,CACzB,MAAMs3G,EAAQ,MAAM,QAAQt3G,CAAI,EAC1BA,EACAkxG,GAAMlxG,CAAI,EACN,CAACA,CAAI,EACLmxG,GAAanxG,CAAI,EACrBu3G,EAAcD,EAAM,SAAW,EAAIp1H,EAASg1H,GAAQh1H,EAAQo1H,CAAK,EACjEv/G,EAAQu/G,EAAM,OAAS,EACvBp5H,EAAMo5H,EAAMv/G,CAAK,EACvB,OAAIw/G,GACA,OAAOA,EAAYr5H,CAAG,EAEtB6Z,IAAU,IACRpZ,GAAS44H,CAAW,GAAKvF,GAAcuF,CAAW,GAC/C,MAAM,QAAQA,CAAW,GAAKH,GAAaG,CAAW,IAC3DF,GAAMn1H,EAAQo1H,EAAM,MAAM,EAAG,EAAE,CAAC,EAE7Bp1H,CACX,CA8OA,IAAIs1H,GAAgB,IAAM,CACtB,IAAIhwF,EAAa,GAiBjB,MAAO,CACH,IAAI,WAAY,CACZ,OAAOA,CACV,EACD,KApBU7qC,GAAU,CACpB,UAAWypC,KAAYoB,EACnBpB,EAAS,MAAQA,EAAS,KAAKzpC,CAAK,CAEhD,EAiBQ,UAhBeypC,IACfoB,EAAW,KAAKpB,CAAQ,EACjB,CACH,YAAa,IAAM,CACfoB,EAAaA,EAAW,OAAQ3qB,GAAMA,IAAMupB,CAAQ,CACvD,CACb,GAWQ,YATgB,IAAM,CACtBoB,EAAa,EACrB,CAQA,CACA,EAEIiwF,GAAe96H,GAAUyzH,GAAkBzzH,CAAK,GAAK,CAAC0zH,GAAa1zH,CAAK,EAE5E,SAASwB,GAAUu5H,EAASC,EAAS,CACjC,GAAIF,GAAYC,CAAO,GAAKD,GAAYE,CAAO,EAC3C,OAAOD,IAAYC,EAEvB,GAAIxH,GAAauH,CAAO,GAAKvH,GAAawH,CAAO,EAC7C,OAAOD,EAAQ,QAAO,IAAOC,EAAQ,QAAO,EAEhD,MAAMC,EAAQ,OAAO,KAAKF,CAAO,EAC3BG,EAAQ,OAAO,KAAKF,CAAO,EACjC,GAAIC,EAAM,SAAWC,EAAM,OACvB,MAAO,GAEX,UAAW35H,KAAO05H,EAAO,CACrB,MAAME,EAAOJ,EAAQx5H,CAAG,EACxB,GAAI,CAAC25H,EAAM,SAAS35H,CAAG,EACnB,MAAO,GAEX,GAAIA,IAAQ,MAAO,CACf,MAAM65H,EAAOJ,EAAQz5H,CAAG,EACxB,GAAKiyH,GAAa2H,CAAI,GAAK3H,GAAa4H,CAAI,GACvCp5H,GAASm5H,CAAI,GAAKn5H,GAASo5H,CAAI,GAC/B,MAAM,QAAQD,CAAI,GAAK,MAAM,QAAQC,CAAI,EACxC,CAAC55H,GAAU25H,EAAMC,CAAI,EACrBD,IAASC,EACX,MAAO,EAEd,CACJ,CACD,MAAO,EACX,CAEA,IAAIC,GAAoBn+G,GAAYA,EAAQ,OAAS,kBAEjDg8G,GAAqBhtG,GAAQyrG,GAAazrG,CAAG,GAAKqnG,GAAgBrnG,CAAG,EAErEovG,GAAQpvG,GAAQsrG,GAActrG,CAAG,GAAKA,EAAI,YAE1CqvG,GAAqBv6H,GAAS,CAC9B,UAAWO,KAAOP,EACd,GAAIu2H,GAAWv2H,EAAKO,CAAG,CAAC,EACpB,MAAO,GAGf,MAAO,EACX,EAEA,SAASi6H,GAAgBx6H,EAAM6jF,EAAS,GAAI,CACxC,MAAM42C,EAAoB,MAAM,QAAQz6H,CAAI,EAC5C,GAAIgB,GAAShB,CAAI,GAAKy6H,EAClB,UAAWl6H,KAAOP,EACV,MAAM,QAAQA,EAAKO,CAAG,CAAC,GACtBS,GAAShB,EAAKO,CAAG,CAAC,GAAK,CAACg6H,GAAkBv6H,EAAKO,CAAG,CAAC,GACpDsjF,EAAOtjF,CAAG,EAAI,MAAM,QAAQP,EAAKO,CAAG,CAAC,EAAI,CAAE,EAAG,GAC9Ci6H,GAAgBx6H,EAAKO,CAAG,EAAGsjF,EAAOtjF,CAAG,CAAC,GAEhCkyH,GAAkBzyH,EAAKO,CAAG,CAAC,IACjCsjF,EAAOtjF,CAAG,EAAI,IAI1B,OAAOsjF,CACX,CACA,SAAS62C,GAAgC16H,EAAMo1H,EAAYuF,EAAuB,CAC9E,MAAMF,EAAoB,MAAM,QAAQz6H,CAAI,EAC5C,GAAIgB,GAAShB,CAAI,GAAKy6H,EAClB,UAAWl6H,KAAOP,EACV,MAAM,QAAQA,EAAKO,CAAG,CAAC,GACtBS,GAAShB,EAAKO,CAAG,CAAC,GAAK,CAACg6H,GAAkBv6H,EAAKO,CAAG,CAAC,EAChD6yH,GAAYgC,CAAU,GACtB0E,GAAYa,EAAsBp6H,CAAG,CAAC,EACtCo6H,EAAsBp6H,CAAG,EAAI,MAAM,QAAQP,EAAKO,CAAG,CAAC,EAC9Ci6H,GAAgBx6H,EAAKO,CAAG,EAAG,EAAE,EAC7B,CAAE,GAAGi6H,GAAgBx6H,EAAKO,CAAG,CAAC,CAAC,EAGrCm6H,GAAgC16H,EAAKO,CAAG,EAAGkyH,GAAkB2C,CAAU,EAAI,GAAKA,EAAW70H,CAAG,EAAGo6H,EAAsBp6H,CAAG,CAAC,EAI/Ho6H,EAAsBp6H,CAAG,EAAI,CAACC,GAAUR,EAAKO,CAAG,EAAG60H,EAAW70H,CAAG,CAAC,EAI9E,OAAOo6H,CACX,CACA,IAAIC,GAAiB,CAACC,EAAezF,IAAesF,GAAgCG,EAAezF,EAAYoF,GAAgBpF,CAAU,CAAC,EAEtI0F,GAAkB,CAAC97H,EAAO,CAAE,cAAA24H,EAAe,YAAAoD,EAAa,WAAAC,CAAY,IAAK5H,GAAYp0H,CAAK,EACxFA,EACA24H,EACI34H,IAAU,GACN,IACAA,GACI,CAACA,EAET+7H,GAAe9F,GAASj2H,CAAK,EACzB,IAAI,KAAKA,CAAK,EACdg8H,EACIA,EAAWh8H,CAAK,EAChBA,EAElB,SAASi8H,GAAc/wF,EAAI,CACvB,MAAMhf,EAAMgf,EAAG,IACf,GAAI,EAAAA,EAAG,KAAOA,EAAG,KAAK,MAAOhf,GAAQA,EAAI,QAAQ,EAAIA,EAAI,UAGzD,OAAIorG,GAAYprG,CAAG,EACRA,EAAI,MAEXyrG,GAAazrG,CAAG,EACTgsG,GAAchtF,EAAG,IAAI,EAAE,MAE9BmwF,GAAiBnvG,CAAG,EACb,CAAC,GAAGA,EAAI,eAAe,EAAE,IAAI,CAAC,CAAE,MAAAlsB,KAAYA,CAAK,EAExDuzH,GAAgBrnG,CAAG,EACZ6rG,GAAiB7sF,EAAG,IAAI,EAAE,MAE9B4wF,GAAgB1H,GAAYloG,EAAI,KAAK,EAAIgf,EAAG,IAAI,MAAQhf,EAAI,MAAOgf,CAAE,CAChF,CAEA,IAAIgxF,GAAqB,CAACjF,EAAakF,EAASC,EAAc7D,IAA8B,CACxF,MAAM1zC,EAAS,GACf,UAAW/hF,KAAQm0H,EAAa,CAC5B,MAAM30C,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EAC/Bw/E,GAASxwE,GAAI+yE,EAAQ/hF,EAAMw/E,EAAM,EAAE,CACtC,CACD,MAAO,CACH,aAAA85C,EACA,MAAO,CAAC,GAAGnF,CAAW,EACtB,OAAApyC,EACA,0BAAA0zC,CACR,CACA,EAEI8D,GAAgBC,GAASlI,GAAYkI,CAAI,EACvCA,EACA1E,GAAQ0E,CAAI,EACRA,EAAK,OACLt6H,GAASs6H,CAAI,EACT1E,GAAQ0E,EAAK,KAAK,EACdA,EAAK,MAAM,OACXA,EAAK,MACTA,EAEd,MAAMC,GAAiB,gBACvB,IAAIC,GAAwBC,IAAoB,CAACA,GAAkB,CAACA,EAAe,WAC/E,CAAC,EAAGlF,GAAWkF,EAAe,QAAQ,GAClCA,EAAe,SAAS,YAAY,OAASF,IAC5Cv6H,GAASy6H,EAAe,QAAQ,GAC7B,OAAO,OAAOA,EAAe,QAAQ,EAAE,KAAMC,GAAqBA,EAAiB,YAAY,OAASH,EAAc,GAE9HI,GAAiBh5H,GAAYA,EAAQ,QACpCA,EAAQ,UACLA,EAAQ,KACRA,EAAQ,KACRA,EAAQ,WACRA,EAAQ,WACRA,EAAQ,SACRA,EAAQ,UAEhB,SAASi5H,GAAkBzgI,EAAQggI,EAASr5H,EAAM,CAC9C,MAAM3H,EAAQk5H,GAAIl4H,EAAQ2G,CAAI,EAC9B,GAAI3H,GAASo5H,GAAMzxH,CAAI,EACnB,MAAO,CACH,MAAA3H,EACA,KAAA2H,CACZ,EAEI,MAAMgxH,EAAQhxH,EAAK,MAAM,GAAG,EAC5B,KAAOgxH,EAAM,QAAQ,CACjB,MAAMj8G,EAAYi8G,EAAM,KAAK,GAAG,EAC1BxxC,EAAQ+xC,GAAI8H,EAAStkH,CAAS,EAC9BglH,EAAaxI,GAAIl4H,EAAQ0b,CAAS,EACxC,GAAIyqE,GAAS,CAAC,MAAM,QAAQA,CAAK,GAAKx/E,IAAS+U,EAC3C,MAAO,CAAE,KAAA/U,CAAI,EAEjB,GAAI+5H,GAAcA,EAAW,KACzB,MAAO,CACH,KAAMhlH,EACN,MAAOglH,CACvB,EAEQ/I,EAAM,IAAG,CACZ,CACD,MAAO,CACH,KAAAhxH,CACR,CACA,CAEA,IAAIg6H,GAAiB,CAAChG,EAAaiG,EAAWC,EAAaC,EAAgBh6H,IACnEA,EAAK,QACE,GAEF,CAAC+5H,GAAe/5H,EAAK,UACnB,EAAE85H,GAAajG,IAEjBkG,EAAcC,EAAe,SAAWh6H,EAAK,UAC3C,CAAC6zH,GAEHkG,EAAcC,EAAe,WAAah6H,EAAK,YAC7C6zH,EAEJ,GAGPoG,GAAkB,CAAChxG,EAAKppB,IAAS,CAACqxH,GAAQE,GAAInoG,EAAKppB,CAAI,CAAC,EAAE,QAAU43H,GAAMxuG,EAAKppB,CAAI,EAEvF,MAAMouG,GAAiB,CACnB,KAAM0jB,GAAgB,SACtB,eAAgBA,GAAgB,SAChC,iBAAkB,EACtB,EACA,SAASuI,GAAkBh6H,EAAQ,GAAI,CACnC,IAAIkI,EAAW,CACX,GAAG6lG,GACH,GAAG/tG,CACX,EACQi6H,EAAa,CACb,YAAa,EACb,QAAS,GACT,UAAW7F,GAAWlsH,EAAS,aAAa,EAC5C,aAAc,GACd,YAAa,GACb,aAAc,GACd,mBAAoB,GACpB,QAAS,GACT,cAAe,CAAE,EACjB,YAAa,CAAE,EACf,iBAAkB,CAAE,EACpB,OAAQA,EAAS,QAAU,CAAE,EAC7B,SAAUA,EAAS,UAAY,EACvC,EACQ8wH,EAAU,GACVkB,EAAiBr7H,GAASqJ,EAAS,aAAa,GAAKrJ,GAASqJ,EAAS,MAAM,EAC3E6oH,GAAY7oH,EAAS,eAAiBA,EAAS,MAAM,GAAK,CAAE,EAC5D,GACFiyH,EAAcjyH,EAAS,iBACrB,CAAE,EACF6oH,GAAYmJ,CAAc,EAC5BE,EAAS,CACT,OAAQ,GACR,MAAO,GACP,MAAO,EACf,EACQpH,EAAS,CACT,MAAO,IAAI,IACX,QAAS,IAAI,IACb,MAAO,IAAI,IACX,MAAO,IAAI,GACnB,EACQqH,EACAjrG,EAAQ,EACZ,MAAMijG,EAAkB,CACpB,QAAS,GACT,YAAa,GACb,iBAAkB,GAClB,cAAe,GACf,aAAc,GACd,QAAS,GACT,OAAQ,EAChB,EACUiI,EAAY,CACd,OAAQ5C,GAAe,EACvB,MAAOA,GAAe,EACtB,MAAOA,GAAe,CAC9B,EACU6C,EAA6B9G,GAAmBvrH,EAAS,IAAI,EAC7DsyH,EAA4B/G,GAAmBvrH,EAAS,cAAc,EACtEuyH,EAAmCvyH,EAAS,eAAiBupH,GAAgB,IAC7ExvE,EAAYrlD,GAAc89H,GAAS,CACrC,aAAatrG,CAAK,EAClBA,EAAQ,WAAWxyB,EAAU89H,CAAI,CACzC,EACUC,EAAe,MAAOC,GAAsB,CAC9C,GAAI,CAAC56H,EAAM,WAAaqyH,EAAgB,SAAWuI,GAAoB,CACnE,MAAMnrB,EAAUvnG,EAAS,SACnBgqH,IAAe,MAAM2I,EAAgB,GAAE,MAAM,EAC7C,MAAMC,EAAyB9B,EAAS,EAAI,EAC9CvpB,IAAYwqB,EAAW,SACvBK,EAAU,MAAM,KAAK,CACjB,QAAA7qB,CACpB,CAAiB,CAER,CACT,EACUsrB,EAAsB,CAACpK,EAAOqK,IAAiB,CAC7C,CAACh7H,EAAM,WACNqyH,EAAgB,cAAgBA,EAAgB,qBAChD1B,GAAS,MAAM,KAAKqC,EAAO,KAAK,GAAG,QAASrzH,GAAS,CAC9CA,IACAq7H,EACMrsH,GAAIsrH,EAAW,iBAAkBt6H,EAAMq7H,CAAY,EACnDzD,GAAM0C,EAAW,iBAAkBt6H,CAAI,EAEjE,CAAa,EACD26H,EAAU,MAAM,KAAK,CACjB,iBAAkBL,EAAW,iBAC7B,aAAc,CAAC/H,GAAc+H,EAAW,gBAAgB,CACxE,CAAa,EAEb,EACUgB,EAAoB,CAACt7H,EAAM2nD,EAAS,CAAE,EAAEtlD,EAAQF,EAAMo5H,EAAkB,GAAMC,EAA6B,KAAS,CACtH,GAAIr5H,GAAQE,GAAU,CAAChC,EAAM,SAAU,CAEnC,GADAo6H,EAAO,OAAS,GACZe,GAA8B,MAAM,QAAQjK,GAAI8H,EAASr5H,CAAI,CAAC,EAAG,CACjE,MAAMy7H,GAAcp5H,EAAOkvH,GAAI8H,EAASr5H,CAAI,EAAGmC,EAAK,KAAMA,EAAK,IAAI,EACnEo5H,GAAmBvsH,GAAIqqH,EAASr5H,EAAMy7H,EAAW,CACpD,CACD,GAAID,GACA,MAAM,QAAQjK,GAAI+I,EAAW,OAAQt6H,CAAI,CAAC,EAAG,CAC7C,MAAM3G,GAASgJ,EAAOkvH,GAAI+I,EAAW,OAAQt6H,CAAI,EAAGmC,EAAK,KAAMA,EAAK,IAAI,EACxEo5H,GAAmBvsH,GAAIsrH,EAAW,OAAQt6H,EAAM3G,EAAM,EACtD+gI,GAAgBE,EAAW,OAAQt6H,CAAI,CAC1C,CACD,GAAI0yH,EAAgB,eAChB8I,GACA,MAAM,QAAQjK,GAAI+I,EAAW,cAAet6H,CAAI,CAAC,EAAG,CACpD,MAAM07H,GAAgBr5H,EAAOkvH,GAAI+I,EAAW,cAAet6H,CAAI,EAAGmC,EAAK,KAAMA,EAAK,IAAI,EACtFo5H,GAAmBvsH,GAAIsrH,EAAW,cAAet6H,EAAM07H,EAAa,CACvE,CACGhJ,EAAgB,cAChB4H,EAAW,YAAcxB,GAAeyB,EAAgBC,CAAW,GAEvEG,EAAU,MAAM,KAAK,CACjB,KAAA36H,EACA,QAAS27H,EAAU37H,EAAM2nD,CAAM,EAC/B,YAAa2yE,EAAW,YACxB,OAAQA,EAAW,OACnB,QAASA,EAAW,OACpC,CAAa,CACJ,MAEGtrH,GAAIwrH,EAAax6H,EAAM2nD,CAAM,CAEzC,EACUi0E,EAAe,CAAC57H,EAAM3H,IAAU,CAClC2W,GAAIsrH,EAAW,OAAQt6H,EAAM3H,CAAK,EAClCsiI,EAAU,MAAM,KAAK,CACjB,OAAQL,EAAW,MAC/B,CAAS,CACT,EACUuB,EAAcxiI,GAAW,CAC3BihI,EAAW,OAASjhI,EACpBshI,EAAU,MAAM,KAAK,CACjB,OAAQL,EAAW,OACnB,QAAS,EACrB,CAAS,CACT,EACUwB,EAAsB,CAAC97H,EAAM+7H,EAAsB7+H,EAAOksB,IAAQ,CACpE,MAAMo2D,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EAC/B,GAAIw/E,EAAO,CACP,MAAM2oC,EAAeoJ,GAAIiJ,EAAax6H,EAAMsxH,GAAYp0H,CAAK,EAAIq0H,GAAIgJ,EAAgBv6H,CAAI,EAAI9C,CAAK,EAClGo0H,GAAYnJ,CAAY,GACnB/+F,GAAOA,EAAI,gBACZ2yG,EACE/sH,GAAIwrH,EAAax6H,EAAM+7H,EAAuB5T,EAAegR,GAAc35C,EAAM,EAAE,CAAC,EACpFw8C,EAAch8H,EAAMmoH,CAAY,EACtCsS,EAAO,OAASO,GACnB,CACT,EACUiB,EAAsB,CAACj8H,EAAMk8H,EAAYlI,EAAamI,EAAaC,IAAiB,CACtF,IAAIC,EAAoB,GACpBC,GAAkB,GACtB,MAAMphI,GAAS,CACX,KAAA8E,CACZ,EACQ,GAAI,CAACK,EAAM,SAAU,CACjB,MAAMk8H,EAAgB,CAAC,EAAEhL,GAAI8H,EAASr5H,CAAI,GACtCuxH,GAAI8H,EAASr5H,CAAI,EAAE,IACnBuxH,GAAI8H,EAASr5H,CAAI,EAAE,GAAG,UAC1B,GAAI,CAACg0H,GAAemI,EAAa,CACzBzJ,EAAgB,UAChB4J,GAAkBhC,EAAW,QAC7BA,EAAW,QAAUp/H,GAAO,QAAUygI,EAAS,EAC/CU,EAAoBC,KAAoBphI,GAAO,SAEnD,MAAMshI,EAAyBD,GAAiB79H,GAAU6yH,GAAIgJ,EAAgBv6H,CAAI,EAAGk8H,CAAU,EAC/FI,GAAkB,CAAC,EAAE,CAACC,GAAiBhL,GAAI+I,EAAW,YAAat6H,CAAI,GACvEw8H,GAA0BD,EACpB3E,GAAM0C,EAAW,YAAat6H,CAAI,EAClCgP,GAAIsrH,EAAW,YAAat6H,EAAM,EAAI,EAC5C9E,GAAO,YAAco/H,EAAW,YAChC+B,EACIA,GACK3J,EAAgB,aACb4J,KAAoB,CAACE,CACpC,CACD,GAAIxI,EAAa,CACb,MAAMyI,EAAyBlL,GAAI+I,EAAW,cAAet6H,CAAI,EAC5Dy8H,IACDztH,GAAIsrH,EAAW,cAAet6H,EAAMg0H,CAAW,EAC/C94H,GAAO,cAAgBo/H,EAAW,cAClC+B,EACIA,GACK3J,EAAgB,eACb+J,IAA2BzI,EAE9C,CACDqI,GAAqBD,GAAgBzB,EAAU,MAAM,KAAKz/H,EAAM,CACnE,CACD,OAAOmhI,EAAoBnhI,GAAS,EAC5C,EACUwhI,EAAsB,CAAC18H,EAAM8vG,EAASz3G,EAAOskI,IAAe,CAC9D,MAAMC,EAAqBrL,GAAI+I,EAAW,OAAQt6H,CAAI,EAChDi7H,EAAoBvI,EAAgB,SACtClB,GAAU1hB,CAAO,GACjBwqB,EAAW,UAAYxqB,EAY3B,GAXIzvG,EAAM,YAAchI,GACpBqiI,EAAqBp4E,EAAS,IAAMs5E,EAAa57H,EAAM3H,CAAK,CAAC,EAC7DqiI,EAAmBr6H,EAAM,UAAU,IAGnC,aAAaovB,CAAK,EAClBirG,EAAqB,KACrBriI,EACM2W,GAAIsrH,EAAW,OAAQt6H,EAAM3H,CAAK,EAClCu/H,GAAM0C,EAAW,OAAQt6H,CAAI,IAElC3H,EAAQ,CAACqG,GAAUk+H,EAAoBvkI,CAAK,EAAIukI,IACjD,CAACrK,GAAcoK,CAAU,GACzB1B,EAAmB,CACnB,MAAM4B,GAAmB,CACrB,GAAGF,EACH,GAAI1B,GAAqBzJ,GAAU1hB,CAAO,EAAI,CAAE,QAAAA,CAAS,EAAG,GAC5D,OAAQwqB,EAAW,OACnB,KAAAt6H,CAChB,EACYs6H,EAAa,CACT,GAAGA,EACH,GAAGuC,EACnB,EACYlC,EAAU,MAAM,KAAKkC,EAAgB,CACxC,CACT,EACU3B,EAAiB,MAAOl7H,GAAS,CACnCo7H,EAAoBp7H,EAAM,EAAI,EAC9B,MAAM0J,EAAS,MAAMnB,EAAS,SAASiyH,EAAajyH,EAAS,QAAS6wH,GAAmBp5H,GAAQqzH,EAAO,MAAOgG,EAAS9wH,EAAS,aAAcA,EAAS,yBAAyB,CAAC,EAClL,OAAA6yH,EAAoBp7H,CAAI,EACjB0J,CACf,EACUozH,EAA8B,MAAO9L,GAAU,CACjD,KAAM,CAAE,OAAA33H,CAAQ,EAAG,MAAM6hI,EAAelK,CAAK,EAC7C,GAAIA,EACA,UAAWhxH,KAAQgxH,EAAO,CACtB,MAAM34H,EAAQk5H,GAAIl4H,EAAQ2G,CAAI,EAC9B3H,EACM2W,GAAIsrH,EAAW,OAAQt6H,EAAM3H,CAAK,EAClCu/H,GAAM0C,EAAW,OAAQt6H,CAAI,CACtC,MAGDs6H,EAAW,OAASjhI,EAExB,OAAOA,CACf,EACU8hI,EAA2B,MAAOp5C,EAAQg7C,EAAsBxxG,EAAU,CAC5E,MAAO,EACf,IAAU,CACF,UAAWvrB,KAAQ+hF,EAAQ,CACvB,MAAMvC,EAAQuC,EAAO/hF,CAAI,EACzB,GAAIw/E,EAAO,CACP,KAAM,CAAE,GAAAp3C,EAAI,GAAG8zF,EAAU,EAAK18C,EAC9B,GAAIp3C,EAAI,CACJ,MAAM40F,GAAmB3J,EAAO,MAAM,IAAIjrF,EAAG,IAAI,EAC3C60F,EAAoBz9C,EAAM,IAAMk6C,GAAqBl6C,EAAM,EAAE,EAC/Dy9C,GAAqBvK,EAAgB,kBACrC0I,EAAoB,CAACp7H,CAAI,EAAG,EAAI,EAEpC,MAAMk9H,EAAa,MAAM1H,GAAch2C,EAAOg7C,EAAaM,EAAkCvyH,EAAS,2BAA6B,CAACw0H,EAAsBC,EAAgB,EAI1K,GAHIC,GAAqBvK,EAAgB,kBACrC0I,EAAoB,CAACp7H,CAAI,CAAC,EAE1Bk9H,EAAW90F,EAAG,IAAI,IAClB7c,EAAQ,MAAQ,GACZwxG,GACA,MAGR,CAACA,IACIxL,GAAI2L,EAAY90F,EAAG,IAAI,EAClB40F,GACI1I,GAA0BgG,EAAW,OAAQ4C,EAAY90F,EAAG,IAAI,EAChEp5B,GAAIsrH,EAAW,OAAQlyF,EAAG,KAAM80F,EAAW90F,EAAG,IAAI,CAAC,EACvDwvF,GAAM0C,EAAW,OAAQlyF,EAAG,IAAI,EAC7C,CACD,CAACmqF,GAAc2J,EAAU,GACpB,MAAMf,EAAyBe,GAAYa,EAAsBxxG,CAAO,CAChF,CACJ,CACD,OAAOA,EAAQ,KACvB,EACU4xG,EAAmB,IAAM,CAC3B,UAAWn9H,KAAQqzH,EAAO,QAAS,CAC/B,MAAM7zC,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EAC/Bw/E,IACKA,EAAM,GAAG,KACJA,EAAM,GAAG,KAAK,MAAOp2D,GAAQ,CAACovG,GAAKpvG,CAAG,CAAC,EACvC,CAACovG,GAAKh5C,EAAM,GAAG,GAAG,IACxB49C,EAAWp9H,CAAI,CACtB,CACDqzH,EAAO,QAAU,IAAI,GAC7B,EACUsI,EAAY,CAAC37H,EAAM9B,IAAS,CAACmC,EAAM,WACpCL,GAAQ9B,GAAQ8Q,GAAIwrH,EAAax6H,EAAM9B,CAAI,EACxC,CAACQ,GAAU2+H,IAAa9C,CAAc,GACxC+C,EAAY,CAACtM,EAAO7I,EAAcoL,IAAaH,GAAoBpC,EAAOqC,EAAQ,CACpF,GAAIoH,EAAO,MACLD,EACAlJ,GAAYnJ,CAAY,EACpBoS,EACApH,GAASnC,CAAK,EACV,CAAE,CAACA,CAAK,EAAG7I,CAAc,EACzBA,CACtB,EAAOoL,EAAUpL,CAAY,EACnBoV,EAAkBv9H,GAASqxH,GAAQE,GAAIkJ,EAAO,MAAQD,EAAcD,EAAgBv6H,EAAMK,EAAM,iBAAmBkxH,GAAIgJ,EAAgBv6H,EAAM,EAAE,EAAI,CAAE,EAAC,EACtJg8H,EAAgB,CAACh8H,EAAM9C,EAAO2D,EAAU,KAAO,CACjD,MAAM2+E,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EAC/B,IAAIk8H,EAAah/H,EACjB,GAAIsiF,EAAO,CACP,MAAMm6C,EAAiBn6C,EAAM,GACzBm6C,IACA,CAACA,EAAe,UACZ3qH,GAAIwrH,EAAax6H,EAAMg5H,GAAgB97H,EAAOy8H,CAAc,CAAC,EACjEuC,EACIxH,GAAciF,EAAe,GAAG,GAAKhJ,GAAkBzzH,CAAK,EACtD,GACAA,EACNq7H,GAAiBoB,EAAe,GAAG,EACnC,CAAC,GAAGA,EAAe,IAAI,OAAO,EAAE,QAAS6D,IAAeA,GAAU,SAAWtB,EAAW,SAASsB,GAAU,KAAK,CAAE,EAE7G7D,EAAe,KAChBlJ,GAAgBkJ,EAAe,GAAG,EAClCA,EAAe,KAAK,OAAS,EACvBA,EAAe,KAAK,QAAS8D,KAAiB,CAACA,GAAY,gBAAkB,CAACA,GAAY,YACvFA,GAAY,QAAU,MAAM,QAAQvB,CAAU,EACzC,CAAC,CAACA,EAAW,KAAMh+H,IAASA,KAASu/H,GAAY,KAAK,EACtDvB,IAAeuB,GAAY,MAAM,EACzC9D,EAAe,KAAK,CAAC,IAClBA,EAAe,KAAK,CAAC,EAAE,QAAU,CAAC,CAACuC,GAG5CvC,EAAe,KAAK,QAAS+D,IAAcA,GAAS,QAAUA,GAAS,QAAUxB,CAAW,EAG3F1H,GAAYmF,EAAe,GAAG,EACnCA,EAAe,IAAI,MAAQ,IAG3BA,EAAe,IAAI,MAAQuC,EACtBvC,EAAe,IAAI,MACpBgB,EAAU,OAAO,KAAK,CAClB,KAAA36H,EACA,OAAQ,CAAE,GAAGw6H,CAAa,CACtD,CAAyB,GAIhB,EACA35H,EAAQ,aAAeA,EAAQ,cAC5Bo7H,EAAoBj8H,EAAMk8H,EAAYr7H,EAAQ,YAAaA,EAAQ,YAAa,EAAI,EACxFA,EAAQ,gBAAkBmuB,EAAQhvB,CAAI,CAC9C,EACU4oH,EAAY,CAAC5oH,EAAM9C,EAAO2D,IAAY,CACxC,UAAW88H,KAAYzgI,EAAO,CAC1B,MAAMg/H,EAAah/H,EAAMygI,CAAQ,EAC3B5oH,EAAY,GAAG/U,CAAI,IAAI29H,CAAQ,GAC/Bn+C,GAAQ+xC,GAAI8H,EAAStkH,CAAS,GACnCs+G,EAAO,MAAM,IAAIrzH,CAAI,GAClBd,GAASg9H,CAAU,GAClB18C,IAAS,CAACA,GAAM,KACjB,CAACkxC,GAAawL,CAAU,EACtBtT,EAAU7zG,EAAWmnH,EAAYr7H,CAAO,EACxCm7H,EAAcjnH,EAAWmnH,EAAYr7H,CAAO,CACrD,CACT,EACU6rH,GAAW,CAAC1sH,EAAM9C,EAAO2D,EAAU,KAAO,CAC5C,MAAM2+E,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EACzB01H,EAAerC,EAAO,MAAM,IAAIrzH,CAAI,EACpC49H,EAAaxM,GAAYl0H,CAAK,EACpC8R,GAAIwrH,EAAax6H,EAAM49H,CAAU,EAC7BlI,GACAiF,EAAU,MAAM,KAAK,CACjB,KAAA36H,EACA,OAAQ,CAAE,GAAGw6H,CAAa,CAC1C,CAAa,GACI9H,EAAgB,SAAWA,EAAgB,cAC5C7xH,EAAQ,aACR85H,EAAU,MAAM,KAAK,CACjB,KAAA36H,EACA,YAAa84H,GAAeyB,EAAgBC,CAAW,EACvD,QAASmB,EAAU37H,EAAM49H,CAAU,CACvD,CAAiB,GAILp+C,GAAS,CAACA,EAAM,IAAM,CAACmxC,GAAkBiN,CAAU,EAC7ChV,EAAU5oH,EAAM49H,EAAY/8H,CAAO,EACnCm7H,EAAch8H,EAAM49H,EAAY/8H,CAAO,EAEjDkzH,GAAU/zH,EAAMqzH,CAAM,GAAKsH,EAAU,MAAM,KAAK,CAAE,GAAGL,CAAU,CAAE,EACjEK,EAAU,OAAO,KAAK,CAClB,KAAMF,EAAO,MAAQz6H,EAAO,OAC5B,OAAQ,CAAE,GAAGw6H,CAAa,CACtC,CAAS,CACT,EACUqD,EAAW,MAAO/jI,GAAU,CAC9B2gI,EAAO,MAAQ,GACf,MAAM32H,EAAShK,EAAM,OACrB,IAAIkG,EAAO8D,EAAO,KACdg6H,EAAsB,GAC1B,MAAMt+C,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EACzB+9H,EAAuB,IAAMj6H,EAAO,KAAOq1H,GAAc35C,EAAM,EAAE,EAAIqxC,GAAc/2H,CAAK,EACxFkkI,GAA8B9B,IAAe,CAC/C4B,EACI,OAAO,MAAM5B,EAAU,GAClBxL,GAAawL,EAAU,GAAK,MAAMA,GAAW,QAAS,IACvDx9H,GAAUw9H,GAAY3K,GAAIiJ,EAAax6H,EAAMk8H,EAAU,CAAC,CAC5E,EACQ,GAAI18C,EAAO,CACP,IAAInnF,GACAy3G,EACJ,MAAMosB,EAAa6B,IACb/J,GAAcl6H,EAAM,OAAS+3H,GAAO,MAAQ/3H,EAAM,OAAS+3H,GAAO,UAClEoM,GAAwB,CAACpE,GAAcr6C,EAAM,EAAE,GACjD,CAACj3E,EAAS,UACV,CAACgpH,GAAI+I,EAAW,OAAQt6H,CAAI,GAC5B,CAACw/E,EAAM,GAAG,MACVw6C,GAAehG,GAAazC,GAAI+I,EAAW,cAAet6H,CAAI,EAAGs6H,EAAW,YAAaO,EAA2BD,CAA0B,EAC5IsD,GAAUnK,GAAU/zH,EAAMqzH,EAAQW,EAAW,EACnDhlH,GAAIwrH,EAAax6H,EAAMk8H,CAAU,EAC7BlI,IACAx0C,EAAM,GAAG,QAAUA,EAAM,GAAG,OAAO1lF,CAAK,EACxC4gI,GAAsBA,EAAmB,CAAC,GAErCl7C,EAAM,GAAG,UACdA,EAAM,GAAG,SAAS1lF,CAAK,EAE3B,MAAM6iI,GAAaV,EAAoBj8H,EAAMk8H,EAAYlI,GAAa,EAAK,EACrEoI,GAAe,CAAC7J,GAAcoK,EAAU,GAAKuB,GAOnD,GANA,CAAClK,IACG2G,EAAU,OAAO,KAAK,CAClB,KAAA36H,EACA,KAAMlG,EAAM,KACZ,OAAQ,CAAE,GAAG0gI,CAAa,CAC9C,CAAiB,EACDyD,GACA,OAAIvL,EAAgB,UACZryH,EAAM,OAAS,SACX2zH,IACAgH,IAIJA,KAGAoB,IACJzB,EAAU,MAAM,KAAK,CAAE,KAAA36H,EAAM,GAAIk+H,GAAU,CAAE,EAAGvB,EAAW,CAAE,EAGrE,GADA,CAAC3I,IAAekK,IAAWvD,EAAU,MAAM,KAAK,CAAE,GAAGL,CAAU,CAAE,EAC7D/xH,EAAS,SAAU,CACnB,KAAM,CAAE,OAAAlP,EAAM,EAAK,MAAM6hI,EAAe,CAACl7H,CAAI,CAAC,EAE9C,GADAg+H,GAA2B9B,CAAU,EACjC4B,EAAqB,CACrB,MAAMK,GAA4BrE,GAAkBQ,EAAW,OAAQjB,EAASr5H,CAAI,EAC9Eo+H,GAAoBtE,GAAkBzgI,GAAQggI,EAAS8E,GAA0B,MAAQn+H,CAAI,EACnG3H,GAAQ+lI,GAAkB,MAC1Bp+H,EAAOo+H,GAAkB,KACzBtuB,EAAUyiB,GAAcl5H,EAAM,CACjC,CACJ,MAEG+hI,EAAoB,CAACp7H,CAAI,EAAG,EAAI,EAChC3H,IAAS,MAAMm9H,GAAch2C,EAAOg7C,EAAaM,EAAkCvyH,EAAS,yBAAyB,GAAGvI,CAAI,EAC5Ho7H,EAAoB,CAACp7H,CAAI,CAAC,EAC1Bg+H,GAA2B9B,CAAU,EACjC4B,IACIzlI,GACAy3G,EAAU,GAEL4iB,EAAgB,UACrB5iB,EAAU,MAAMqrB,EAAyB9B,EAAS,EAAI,IAI9DyE,IACAt+C,EAAM,GAAG,MACLxwD,EAAQwwD,EAAM,GAAG,IAAI,EACzBk9C,EAAoB18H,EAAM8vG,EAASz3G,GAAOskI,EAAU,EAE3D,CACT,EACU0B,EAAc,CAACj1G,EAAK3qB,IAAQ,CAC9B,GAAI8yH,GAAI+I,EAAW,OAAQ77H,CAAG,GAAK2qB,EAAI,MACnC,OAAAA,EAAI,MAAK,EACF,CAGnB,EACU4F,EAAU,MAAOhvB,EAAMa,EAAU,KAAO,CAC1C,IAAIivG,EACAjT,EACJ,MAAMyhC,EAAa1L,GAAsB5yH,CAAI,EAC7C,GAAIuI,EAAS,SAAU,CACnB,MAAMlP,EAAS,MAAMyjI,EAA4BxL,GAAYtxH,CAAI,EAAIA,EAAOs+H,CAAU,EACtFxuB,EAAUyiB,GAAcl5H,CAAM,EAC9BwjG,EAAmB78F,EACb,CAACs+H,EAAW,KAAMt+H,IAASuxH,GAAIl4H,EAAQ2G,EAAI,CAAC,EAC5C8vG,CACT,MACQ9vG,GACL68F,GAAoB,MAAM,QAAQ,IAAIyhC,EAAW,IAAI,MAAOvpH,GAAc,CACtE,MAAMyqE,GAAQ+xC,GAAI8H,EAAStkH,CAAS,EACpC,OAAO,MAAMomH,EAAyB37C,IAASA,GAAM,GAAK,CAAE,CAACzqE,CAAS,EAAGyqE,IAAUA,EAAK,CACxG,CAAa,CAAC,GAAG,MAAM,OAAO,EAClB,EAAE,CAACqd,GAAoB,CAACy9B,EAAW,UAAYU,EAAY,GAG3Dn+B,EAAmBiT,EAAU,MAAMqrB,EAAyB9B,CAAO,EAEvE,OAAAsB,EAAU,MAAM,KAAK,CACjB,GAAI,CAACxH,GAASnzH,CAAI,GACb0yH,EAAgB,SAAW5iB,IAAYwqB,EAAW,QACjD,CAAE,EACF,CAAE,KAAAt6H,CAAI,EACZ,GAAIuI,EAAS,UAAY,CAACvI,EAAO,CAAE,QAAA8vG,CAAS,EAAG,GAC/C,OAAQwqB,EAAW,MAC/B,CAAS,EACDz5H,EAAQ,aACJ,CAACg8F,GACDq3B,GAAsBmF,EAASgF,EAAar+H,EAAOs+H,EAAajL,EAAO,KAAK,EACzEx2B,CACf,EACUwgC,EAAaiB,GAAe,CAC9B,MAAM32E,EAAS,CACX,GAAI8yE,EAAO,MAAQD,EAAcD,CAC7C,EACQ,OAAOjJ,GAAYgN,CAAU,EACvB32E,EACAwrE,GAASmL,CAAU,EACf/M,GAAI5pE,EAAQ22E,CAAU,EACtBA,EAAW,IAAKt+H,GAASuxH,GAAI5pE,EAAQ3nD,CAAI,CAAC,CAC5D,EACUu+H,GAAgB,CAACv+H,EAAMmyH,KAAe,CACxC,QAAS,CAAC,CAACZ,IAAKY,GAAamI,GAAY,OAAQt6H,CAAI,EACrD,QAAS,CAAC,CAACuxH,IAAKY,GAAamI,GAAY,YAAat6H,CAAI,EAC1D,MAAOuxH,IAAKY,GAAamI,GAAY,OAAQt6H,CAAI,EACjD,aAAc,CAAC,CAACuxH,GAAI+I,EAAW,iBAAkBt6H,CAAI,EACrD,UAAW,CAAC,CAACuxH,IAAKY,GAAamI,GAAY,cAAet6H,CAAI,CACtE,GACUw+H,EAAex+H,GAAS,CAC1BA,GACI4yH,GAAsB5yH,CAAI,EAAE,QAASy+H,GAAc7G,GAAM0C,EAAW,OAAQmE,CAAS,CAAC,EAC1F9D,EAAU,MAAM,KAAK,CACjB,OAAQ36H,EAAOs6H,EAAW,OAAS,CAAE,CACjD,CAAS,CACT,EACU1tB,GAAW,CAAC5sG,EAAM3H,EAAOwI,IAAY,CACvC,MAAMuoB,GAAOmoG,GAAI8H,EAASr5H,EAAM,CAAE,GAAI,GAAI,EAAE,IAAM,IAAI,IAChD0+H,EAAenN,GAAI+I,EAAW,OAAQt6H,CAAI,GAAK,GAE/C,CAAE,IAAK2+H,EAAY,QAAAnmI,GAAS,KAAA0H,GAAM,GAAG0+H,CAAiB,EAAGF,EAC/D1vH,GAAIsrH,EAAW,OAAQt6H,EAAM,CACzB,GAAG4+H,EACH,GAAGvmI,EACH,IAAA+wB,CACZ,CAAS,EACDuxG,EAAU,MAAM,KAAK,CACjB,KAAA36H,EACA,OAAQs6H,EAAW,OACnB,QAAS,EACrB,CAAS,EACDz5H,GAAWA,EAAQ,aAAeuoB,GAAOA,EAAI,OAASA,EAAI,OAClE,EACUy1G,GAAQ,CAAC7+H,EAAMmoH,IAAiBsM,GAAWz0H,CAAI,EAC/C26H,EAAU,OAAO,UAAU,CACzB,KAAOmE,GAAY9+H,EAAKs9H,EAAU,OAAWnV,CAAY,EAAG2W,CAAO,CAC/E,CAAS,EACCxB,EAAUt9H,EAAMmoH,EAAc,EAAI,EAClCiV,EAAa,CAACp9H,EAAMa,EAAU,KAAO,CACvC,UAAWkU,KAAa/U,EAAO4yH,GAAsB5yH,CAAI,EAAIqzH,EAAO,MAChEA,EAAO,MAAM,OAAOt+G,CAAS,EAC7Bs+G,EAAO,MAAM,OAAOt+G,CAAS,EACxBlU,EAAQ,YACT+2H,GAAMyB,EAAStkH,CAAS,EACxB6iH,GAAM4C,EAAazlH,CAAS,GAEhC,CAAClU,EAAQ,WAAa+2H,GAAM0C,EAAW,OAAQvlH,CAAS,EACxD,CAAClU,EAAQ,WAAa+2H,GAAM0C,EAAW,YAAavlH,CAAS,EAC7D,CAAClU,EAAQ,aAAe+2H,GAAM0C,EAAW,cAAevlH,CAAS,EACjE,CAAClU,EAAQ,kBACL+2H,GAAM0C,EAAW,iBAAkBvlH,CAAS,EAChD,CAACxM,EAAS,kBACN,CAAC1H,EAAQ,kBACT+2H,GAAM2C,EAAgBxlH,CAAS,EAEvC4lH,EAAU,OAAO,KAAK,CAClB,OAAQ,CAAE,GAAGH,CAAa,CACtC,CAAS,EACDG,EAAU,MAAM,KAAK,CACjB,GAAGL,EACH,GAAKz5H,EAAQ,UAAiB,CAAE,QAAS86H,EAAS,GAAzB,EACrC,CAAS,EACD,CAAC96H,EAAQ,aAAem6H,GAChC,EACU+D,GAAuB,CAAC,CAAE,SAAAv1E,EAAU,KAAAxpD,EAAM,MAAAw/E,EAAO,OAAAuC,EAAQ,MAAA7kF,KAAa,CACxE,GAAKs0H,GAAUhoE,CAAQ,GAAKixE,EAAO,OAAYjxE,EAAU,CACrD,MAAMusE,EAAavsE,EACb,OACA8nE,GAAYp0H,CAAK,EACbi8H,GAAc35C,EAAQA,EAAM,GAAK+xC,GAAIxvC,EAAQ/hF,CAAI,EAAE,EAAE,EACrD9C,EACV8R,GAAIwrH,EAAax6H,EAAM+1H,CAAU,EACjCkG,EAAoBj8H,EAAM+1H,EAAY,GAAO,GAAO,EAAI,CAC3D,CACT,EACUiJ,GAAW,CAACh/H,EAAMa,EAAU,KAAO,CACrC,IAAI2+E,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EAC7B,MAAMi/H,EAAoBzN,GAAU3wH,EAAQ,QAAQ,GAAK2wH,GAAUnxH,EAAM,QAAQ,EACjF,OAAA2O,GAAIqqH,EAASr5H,EAAM,CACf,GAAIw/E,GAAS,GACb,GAAI,CACA,GAAIA,GAASA,EAAM,GAAKA,EAAM,GAAK,CAAE,IAAK,CAAE,KAAAx/E,CAAI,GAChD,KAAAA,EACA,MAAO,GACP,GAAGa,CACN,CACb,CAAS,EACDwyH,EAAO,MAAM,IAAIrzH,CAAI,EACjBw/E,EACAu/C,GAAqB,CACjB,MAAAv/C,EACA,SAAUgyC,GAAU3wH,EAAQ,QAAQ,EAC9BA,EAAQ,SACRR,EAAM,SACZ,KAAAL,EACA,MAAOa,EAAQ,KAC/B,CAAa,EAGDi7H,EAAoB97H,EAAM,GAAMa,EAAQ,KAAK,EAE1C,CACH,GAAIo+H,EACE,CAAE,SAAUp+H,EAAQ,UAAYR,EAAM,QAAU,EAChD,GACN,GAAIkI,EAAS,YACP,CACE,SAAU,CAAC,CAAC1H,EAAQ,SACpB,IAAK04H,GAAa14H,EAAQ,GAAG,EAC7B,IAAK04H,GAAa14H,EAAQ,GAAG,EAC7B,UAAW04H,GAAa14H,EAAQ,SAAS,EACzC,UAAW04H,GAAa14H,EAAQ,SAAS,EACzC,QAAS04H,GAAa14H,EAAQ,OAAO,CACxC,EACC,GACN,KAAAb,EACA,SAAA69H,EACA,OAAQA,EACR,IAAMz0G,GAAQ,CACV,GAAIA,EAAK,CACL41G,GAASh/H,EAAMa,CAAO,EACtB2+E,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EACzB,MAAMk/H,EAAW5N,GAAYloG,EAAI,KAAK,GAChCA,EAAI,kBACAA,EAAI,iBAAiB,uBAAuB,EAAE,CAAC,GAAKA,EAGxD+1G,GAAkB/I,GAAkB8I,CAAQ,EAC5C9wG,GAAOoxD,EAAM,GAAG,MAAQ,GAC9B,GAAI2/C,GACE/wG,GAAK,KAAM8mG,GAAWA,IAAWgK,CAAQ,EACzCA,IAAa1/C,EAAM,GAAG,IACxB,OAEJxwE,GAAIqqH,EAASr5H,EAAM,CACf,GAAI,CACA,GAAGw/E,EAAM,GACT,GAAI2/C,GACE,CACE,KAAM,CACF,GAAG/wG,GAAK,OAAOoqG,EAAI,EACnB0G,EACA,GAAI,MAAM,QAAQ3N,GAAIgJ,EAAgBv6H,CAAI,CAAC,EAAI,CAAC,EAAE,EAAI,EACzD,EACD,IAAK,CAAE,KAAMk/H,EAAS,KAAM,KAAAl/H,CAAM,CACrC,EACC,CAAE,IAAKk/H,EAChB,CACzB,CAAqB,EACDpD,EAAoB97H,EAAM,GAAO,OAAWk/H,CAAQ,CACvD,MAEG1/C,EAAQ+xC,GAAI8H,EAASr5H,EAAM,CAAE,GACzBw/E,EAAM,KACNA,EAAM,GAAG,MAAQ,KAEpBj3E,EAAS,kBAAoB1H,EAAQ,mBAClC,EAAEkwH,GAAmBsC,EAAO,MAAOrzH,CAAI,GAAKy6H,EAAO,SACnDpH,EAAO,QAAQ,IAAIrzH,CAAI,CAElC,CACb,CACA,EACUo/H,GAAc,IAAM72H,EAAS,kBAC/B2rH,GAAsBmF,EAASgF,EAAahL,EAAO,KAAK,EACtDgM,GAAgB71E,GAAa,CAC3BgoE,GAAUhoE,CAAQ,IAClBmxE,EAAU,MAAM,KAAK,CAAE,SAAAnxE,CAAU,GACjC0qE,GAAsBmF,EAAS,CAACjwG,EAAKppB,IAAS,CAC1C,MAAMq0H,EAAe9C,GAAI8H,EAASr5H,CAAI,EAClCq0H,IACAjrG,EAAI,SAAWirG,EAAa,GAAG,UAAY7qE,EACvC,MAAM,QAAQ6qE,EAAa,GAAG,IAAI,GAClCA,EAAa,GAAG,KAAK,QAAS2B,GAAa,CACvCA,EAAS,SAAW3B,EAAa,GAAG,UAAY7qE,CAC5E,CAAyB,EAGzB,EAAe,EAAG,EAAK,EAEvB,EACU6iD,GAAe,CAACizB,EAASC,IAAc,MAAO1mI,GAAM,CACtD,IAAI2mI,EACA3mI,IACAA,EAAE,gBAAkBA,EAAE,iBACtBA,EAAE,SAAWA,EAAE,WAEnB,IAAI4iI,EAAcrK,GAAYoJ,CAAW,EAIzC,GAHAG,EAAU,MAAM,KAAK,CACjB,aAAc,EAC1B,CAAS,EACGpyH,EAAS,SAAU,CACnB,KAAM,CAAE,OAAAlP,EAAQ,OAAAsuD,IAAW,MAAMuzE,EAAc,EAC/CZ,EAAW,OAASjhI,EACpBoiI,EAAc9zE,EACjB,MAEG,MAAMwzE,EAAyB9B,CAAO,EAG1C,GADAzB,GAAM0C,EAAW,OAAQ,MAAM,EAC3B/H,GAAc+H,EAAW,MAAM,EAAG,CAClCK,EAAU,MAAM,KAAK,CACjB,OAAQ,CAAE,CAC1B,CAAa,EACD,GAAI,CACA,MAAM2E,EAAQ7D,EAAa5iI,CAAC,CAC/B,OACMR,EAAO,CACVmnI,EAAennI,CAClB,CACJ,MAEOknI,GACA,MAAMA,EAAU,CAAE,GAAGjF,EAAW,MAAQ,EAAEzhI,CAAC,EAE/CumI,KACA,WAAWA,EAAW,EAS1B,GAPAzE,EAAU,MAAM,KAAK,CACjB,YAAa,GACb,aAAc,GACd,mBAAoBpI,GAAc+H,EAAW,MAAM,GAAK,CAACkF,EACzD,YAAalF,EAAW,YAAc,EACtC,OAAQA,EAAW,MAC/B,CAAS,EACGkF,EACA,MAAMA,CAElB,EACUC,GAAa,CAACz/H,EAAMa,EAAU,KAAO,CACnC0wH,GAAI8H,EAASr5H,CAAI,IACbsxH,GAAYzwH,EAAQ,YAAY,EAChC6rH,GAAS1sH,EAAMoxH,GAAYG,GAAIgJ,EAAgBv6H,CAAI,CAAC,CAAC,GAGrD0sH,GAAS1sH,EAAMa,EAAQ,YAAY,EACnCmO,GAAIurH,EAAgBv6H,EAAMoxH,GAAYvwH,EAAQ,YAAY,CAAC,GAE1DA,EAAQ,aACT+2H,GAAM0C,EAAW,cAAet6H,CAAI,EAEnCa,EAAQ,YACT+2H,GAAM0C,EAAW,YAAat6H,CAAI,EAClCs6H,EAAW,QAAUz5H,EAAQ,aACvB86H,EAAU37H,EAAMoxH,GAAYG,GAAIgJ,EAAgBv6H,CAAI,CAAC,CAAC,EACtD27H,KAEL96H,EAAQ,YACT+2H,GAAM0C,EAAW,OAAQt6H,CAAI,EAC7B0yH,EAAgB,SAAWsI,KAE/BL,EAAU,MAAM,KAAK,CAAE,GAAGL,CAAY,GAElD,EACUoF,GAAS,CAACpM,EAAYqM,EAAmB,KAAO,CAClD,MAAMC,EAAgBtM,EAAalC,GAAYkC,CAAU,EAAIiH,EACvDsF,EAAqBzO,GAAYwO,CAAa,EAC9CE,EAAqBvN,GAAce,CAAU,EAC7C3rE,EAASm4E,EAAqBvF,EAAiBsF,EAIrD,GAHKF,EAAiB,oBAClBpF,EAAiBqF,GAEjB,CAACD,EAAiB,WAAY,CAC9B,GAAIA,EAAiB,gBAAiB,CAClC,MAAMI,GAAgB,IAAI,IAAI,CAC1B,GAAG1M,EAAO,MACV,GAAG,OAAO,KAAKyF,GAAeyB,EAAgBC,CAAW,CAAC,CAC9E,CAAiB,EACD,UAAWzlH,MAAa,MAAM,KAAKgrH,EAAa,EAC5CxO,GAAI+I,EAAW,YAAavlH,EAAS,EAC/B/F,GAAI24C,EAAQ5yC,GAAWw8G,GAAIiJ,EAAazlH,EAAS,CAAC,EAClD23G,GAAS33G,GAAWw8G,GAAI5pE,EAAQ5yC,EAAS,CAAC,CAEvD,KACI,CACD,GAAIo8G,IAASG,GAAYgC,CAAU,EAC/B,UAAWtzH,MAAQqzH,EAAO,MAAO,CAC7B,MAAM7zC,GAAQ+xC,GAAI8H,EAASr5H,EAAI,EAC/B,GAAIw/E,IAASA,GAAM,GAAI,CACnB,MAAMm6C,EAAiB,MAAM,QAAQn6C,GAAM,GAAG,IAAI,EAC5CA,GAAM,GAAG,KAAK,CAAC,EACfA,GAAM,GAAG,IACf,GAAIk1C,GAAciF,CAAc,EAAG,CAC/B,MAAM9wB,EAAO8wB,EAAe,QAAQ,MAAM,EAC1C,GAAI9wB,EAAM,CACNA,EAAK,MAAK,EACV,KACH,CACJ,CACJ,CACJ,CAELwwB,EAAU,EACb,CACDmB,EAAcn6H,EAAM,iBACds/H,EAAiB,kBACbvO,GAAYmJ,CAAc,EAC1B,CAAE,EACNnJ,GAAYzpE,CAAM,EACxBgzE,EAAU,MAAM,KAAK,CACjB,OAAQ,CAAE,GAAGhzE,CAAQ,CACrC,CAAa,EACDgzE,EAAU,OAAO,KAAK,CAClB,OAAQ,CAAE,GAAGhzE,CAAQ,CACrC,CAAa,CACJ,CACD0rE,EAAS,CACL,MAAOsM,EAAiB,gBAAkBtM,EAAO,MAAQ,IAAI,IAC7D,QAAS,IAAI,IACb,MAAO,IAAI,IACX,MAAO,IAAI,IACX,SAAU,GACV,MAAO,EACnB,EACQoH,EAAO,MACH,CAAC/H,EAAgB,SACb,CAAC,CAACiN,EAAiB,aACnB,CAAC,CAACA,EAAiB,gBAC3BlF,EAAO,MAAQ,CAAC,CAACp6H,EAAM,iBACvBs6H,EAAU,MAAM,KAAK,CACjB,YAAagF,EAAiB,gBACxBrF,EAAW,YACX,EACN,QAASwF,EACH,GACAH,EAAiB,UACbrF,EAAW,QACX,CAAC,EAAEqF,EAAiB,mBAClB,CAACjhI,GAAU40H,EAAYiH,CAAc,GACjD,YAAaoF,EAAiB,gBACxBrF,EAAW,YACX,GACN,YAAawF,EACP,CAAE,EACFH,EAAiB,gBACbA,EAAiB,mBAAqBnF,EAClC1B,GAAeyB,EAAgBC,CAAW,EAC1CF,EAAW,YACfqF,EAAiB,mBAAqBrM,EAClCwF,GAAeyB,EAAgBjH,CAAU,EACzCqM,EAAiB,UACbrF,EAAW,YACX,CAAE,EACpB,cAAeqF,EAAiB,YAC1BrF,EAAW,cACX,CAAE,EACR,OAAQqF,EAAiB,WAAarF,EAAW,OAAS,CAAE,EAC5D,mBAAoBqF,EAAiB,uBAC/BrF,EAAW,mBACX,GACN,aAAc,EAC1B,CAAS,CACT,EACUhxB,GAAQ,CAACgqB,EAAYqM,IAAqBD,GAAOjL,GAAWnB,CAAU,EACtEA,EAAWkH,CAAW,EACtBlH,EAAYqM,CAAgB,EA2BlC,MAAO,CACH,QAAS,CACL,SAAAX,GACA,WAAA5B,EACA,cAAAmB,GACA,aAAAlyB,GACA,SAAAO,GACA,eAAAsuB,EACA,UAAAoC,EACA,UAAA3B,EACA,aAAAX,EACA,iBAAAmC,EACA,kBAAA7B,EACA,qBAAAyD,GACA,eAAAxB,EACA,OAAAmC,GACA,oBAvBoB,IAAMjL,GAAWlsH,EAAS,aAAa,GAC/DA,EAAS,cAAa,EAAG,KAAMo/C,GAAW,CACtC2hD,GAAM3hD,EAAQp/C,EAAS,YAAY,EACnCoyH,EAAU,MAAM,KAAK,CACjB,UAAW,EAC3B,CAAa,CACb,CAAS,EAkBG,iBA9BkBkC,GAAqB,CAC3CvC,EAAa,CACT,GAAGA,EACH,GAAGuC,CACf,CACA,EA0BY,aAAAwC,GACA,UAAA1E,EACA,gBAAAjI,EACA,WAAAmJ,EACA,IAAI,SAAU,CACV,OAAOxC,CACV,EACD,IAAI,aAAc,CACd,OAAOmB,CACV,EACD,IAAI,QAAS,CACT,OAAOC,CACV,EACD,IAAI,OAAOv9H,EAAO,CACdu9H,EAASv9H,CACZ,EACD,IAAI,gBAAiB,CACjB,OAAOq9H,CACV,EACD,IAAI,QAAS,CACT,OAAOlH,CACV,EACD,IAAI,OAAOn2H,EAAO,CACdm2H,EAASn2H,CACZ,EACD,IAAI,YAAa,CACb,OAAOo9H,CACV,EACD,IAAI,WAAWp9H,EAAO,CAClBo9H,EAAap9H,CAChB,EACD,IAAI,UAAW,CACX,OAAOqL,CACV,EACD,IAAI,SAASrL,EAAO,CAChBqL,EAAW,CACP,GAAGA,EACH,GAAGrL,CACvB,CACa,CACJ,EACD,QAAA8xB,EACA,SAAAgwG,GACA,aAAA3yB,GACA,MAAAwyB,GACA,SAAAnS,GACA,UAAA2Q,EACA,MAAA/zB,GACA,WAAAm2B,GACA,YAAAjB,EACA,WAAApB,EACA,SAAAxwB,GACA,SAhGa,CAAC5sG,EAAMa,EAAU,KAAO,CACrC,MAAM2+E,EAAQ+xC,GAAI8H,EAASr5H,CAAI,EACzB25H,EAAiBn6C,GAASA,EAAM,GACtC,GAAIm6C,EAAgB,CAChB,MAAMuF,EAAWvF,EAAe,KAC1BA,EAAe,KAAK,CAAC,EACrBA,EAAe,IACjBuF,EAAS,QACTA,EAAS,MAAK,EACdr+H,EAAQ,cAAgBq+H,EAAS,SAExC,CACT,EAqFQ,cAAAX,EACR,CACA,CA+BA,SAASyB,GAAQ3/H,EAAQ,GAAI,CACzB,MAAM4/H,EAAenyG,EAAM,SACrBoyG,EAAUpyG,EAAM,SAChB,CAACqkG,EAAWQ,CAAe,EAAI7kG,EAAM,SAAS,CAChD,QAAS,GACT,aAAc,GACd,UAAW2mG,GAAWp0H,EAAM,aAAa,EACzC,YAAa,GACb,aAAc,GACd,mBAAoB,GACpB,QAAS,GACT,YAAa,EACb,YAAa,CAAE,EACf,cAAe,CAAE,EACjB,iBAAkB,CAAE,EACpB,OAAQA,EAAM,QAAU,CAAE,EAC1B,SAAUA,EAAM,UAAY,GAC5B,cAAeo0H,GAAWp0H,EAAM,aAAa,EACvC,OACAA,EAAM,aACpB,CAAK,EACI4/H,EAAa,UACdA,EAAa,QAAU,CACnB,GAAG5F,GAAkBh6H,CAAK,EAC1B,UAAA8xH,CACZ,GAEI,MAAMvoB,EAAUq2B,EAAa,QAAQ,QACrC,OAAAr2B,EAAQ,SAAWvpG,EACnB2yH,GAAa,CACT,QAASppB,EAAQ,UAAU,MAC3B,KAAO1sG,GAAU,CACTs1H,GAAsBt1H,EAAO0sG,EAAQ,gBAAiBA,EAAQ,gBAAsB,GACpF+oB,EAAgB,CAAE,GAAG/oB,EAAQ,UAAY,EAEhD,CACT,CAAK,EACD97E,EAAM,UAAU,IAAM87E,EAAQ,aAAavpG,EAAM,QAAQ,EAAG,CAACupG,EAASvpG,EAAM,QAAQ,CAAC,EACrFytB,EAAM,UAAU,IAAM,CAClB,GAAI87E,EAAQ,gBAAgB,QAAS,CACjC,MAAMu2B,EAAUv2B,EAAQ,YACpBu2B,IAAYhO,EAAU,SACtBvoB,EAAQ,UAAU,MAAM,KAAK,CACzB,QAAAu2B,CACpB,CAAiB,CAER,CACJ,EAAE,CAACv2B,EAASuoB,EAAU,OAAO,CAAC,EAC/BrkG,EAAM,UAAU,IAAM,CACdztB,EAAM,QAAU,CAAC3B,GAAU2B,EAAM,OAAQ6/H,EAAQ,OAAO,GACxDt2B,EAAQ,OAAOvpG,EAAM,OAAQupG,EAAQ,SAAS,YAAY,EAC1Ds2B,EAAQ,QAAU7/H,EAAM,OACxBsyH,EAAiBt2G,IAAW,CAAE,GAAGA,CAAK,EAAG,GAGzCutF,EAAQ,oBAAmB,CAElC,EAAE,CAACvpG,EAAM,OAAQupG,CAAO,CAAC,EAC1B97E,EAAM,UAAU,IAAM,CACdztB,EAAM,QACNupG,EAAQ,WAAWvpG,EAAM,MAAM,CAEtC,EAAE,CAACA,EAAM,OAAQupG,CAAO,CAAC,EAC1B97E,EAAM,UAAU,IAAM,CACb87E,EAAQ,OAAO,QAChBA,EAAQ,aAAY,EACpBA,EAAQ,OAAO,MAAQ,IAEvBA,EAAQ,OAAO,QACfA,EAAQ,OAAO,MAAQ,GACvBA,EAAQ,UAAU,MAAM,KAAK,CAAE,GAAGA,EAAQ,UAAU,CAAE,GAE1DA,EAAQ,iBAAgB,CAChC,CAAK,EACD97E,EAAM,UAAU,IAAM,CAClBztB,EAAM,kBACFupG,EAAQ,UAAU,OAAO,KAAK,CAC1B,OAAQA,EAAQ,UAAW,CAC3C,CAAa,CACR,EAAE,CAACvpG,EAAM,iBAAkBupG,CAAO,CAAC,EACpC97E,EAAM,UAAU,IAAM,CACdmyG,EAAa,UACbA,EAAa,QAAQ,MAAQA,EAAa,QAAQ,MAAM,KAAK,EAAE,EAE3E,EAAO,CAAC9N,CAAS,CAAC,EACd8N,EAAa,QAAQ,UAAY/N,GAAkBC,EAAWvoB,CAAO,EAC9Dq2B,EAAa,OACxB,CC/lFA,MAAMG,GAAgB5iH,GACpB,4JACA,CACE,SAAU,CACR,QAAS,CACP,QAAS,gCACT,YACE,yFACJ,CACF,EACA,gBAAiB,CACf,QAAS,SACX,CACF,CACF,EAEM6iH,GAAQl3G,aAGZ,CAAC,CAAE,UAAArK,EAAW,QAAAhW,EAAS,GAAGzI,CAAM,EAAG+oB,IACnCC,EAAA,IAAC,OACC,IAAAD,EACA,KAAK,QACL,UAAWN,GAAGs3G,GAAc,CAAE,QAAAt3H,CAAS,GAAGgW,CAAS,EAClD,GAAGze,CAAA,CACN,CACD,EACDggI,GAAM,YAAc,QAEpB,MAAMC,GAAan3G,EAGjB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,MACC,IAAAD,EACA,UAAWN,GAAG,+CAAgDhK,CAAS,EACtE,GAAGze,CAAA,CACN,CACD,EACDigI,GAAW,YAAc,aAEzB,MAAMC,GAAmBp3G,EAGvB,YAAC,CAAE,UAAArK,EAAW,GAAGze,CAAM,EAAG+oB,IAC1BC,EAAA,IAAC,OACC,IAAAD,EACA,UAAWN,GAAG,gCAAiChK,CAAS,EACvD,GAAGze,CAAA,CACN,CACD,EACDkgI,GAAiB,YAAc,mBCrC/B,SAAS9pG,GAAmB+pG,EAAWC,EAAyB,GAAI,CAClE,IAAIC,EAAkB,GACtB,SAASC,EAAeC,EAAmBC,EAAgB,CACzD,MAAMC,EAAch1F,gBAAoB+0F,CAAc,EAChDvoH,EAAQooH,EAAgB,OAC9BA,EAAkB,CAAC,GAAGA,EAAiBG,CAAc,EACrD,SAASj/H,EAASvB,EAAO,CACvB,KAAM,CAAE,MAAAkpC,EAAO,SAAAjS,EAAU,GAAG/L,CAAO,EAAKlrB,EAClC0gI,GAAUx3F,GAAA,YAAAA,EAAQi3F,GAAWloH,KAAUwoH,EACvC5jI,EAAQg8B,UAAc,IAAM3N,EAAS,OAAO,OAAOA,CAAO,CAAC,EACjE,OAAuBlC,MAAI03G,EAAQ,SAAU,CAAE,MAAA7jI,EAAO,SAAAo6B,CAAQ,CAAE,CACjE,CACD,SAAS0pG,EAAYC,EAAc13F,EAAO,CACxC,MAAMw3F,GAAUx3F,GAAA,YAAAA,EAAQi3F,GAAWloH,KAAUwoH,EACvCv1G,EAAU21G,aAAiBH,CAAO,EACxC,GAAIx1G,EAAS,OAAOA,EACpB,GAAIs1G,IAAmB,OAAQ,OAAOA,EACtC,MAAM,IAAI,MAAM,KAAKI,CAAY,4BAA4BL,CAAiB,IAAI,CACnF,CACD,OAAAh/H,EAAS,YAAcg/H,EAAoB,WACpC,CAACh/H,EAAUo/H,CAAW,CAC9B,CACD,MAAMG,EAAc,IAAM,CACxB,MAAMC,EAAgBV,EAAgB,IAAKG,GAClC/0F,gBAAoB+0F,CAAc,CAC1C,EACD,OAAO,SAAkBt3F,EAAO,CAC9B,MAAM83F,GAAW93F,GAAA,YAAAA,EAAQi3F,KAAcY,EACvC,OAAOloG,EAAa,QAClB,KAAO,CAAE,CAAC,UAAUsnG,CAAS,EAAE,EAAG,CAAE,GAAGj3F,EAAO,CAACi3F,CAAS,EAAGa,CAAQ,IACnE,CAAC93F,EAAO83F,CAAQ,CACxB,CACA,CACA,EACE,OAAAF,EAAY,UAAYX,EACjB,CAACG,EAAgBW,GAAqBH,EAAa,GAAGV,CAAsB,CAAC,CACtF,CACA,SAASa,MAAwBC,EAAQ,CACvC,MAAMC,EAAYD,EAAO,CAAC,EAC1B,GAAIA,EAAO,SAAW,EAAG,OAAOC,EAChC,MAAML,EAAc,IAAM,CACxB,MAAMM,EAAaF,EAAO,IAAKG,IAAkB,CAC/C,SAAUA,EAAc,EACxB,UAAWA,EAAa,SACzB,EAAC,EACF,OAAO,SAA2BC,EAAgB,CAChD,MAAMC,EAAaH,EAAW,OAAO,CAACI,EAAa,CAAE,SAAAC,EAAU,UAAAtB,KAAgB,CAE7E,MAAMuB,EADaD,EAASH,CAAc,EACV,UAAUnB,CAAS,EAAE,EACrD,MAAO,CAAE,GAAGqB,EAAa,GAAGE,EAC7B,EAAE,CAAE,GACL,OAAO7oG,UAAc,KAAO,CAAE,CAAC,UAAUsoG,EAAU,SAAS,EAAE,EAAGI,CAAY,GAAG,CAACA,CAAU,CAAC,CAClG,CACA,EACE,OAAAT,EAAY,UAAYK,EAAU,UAC3BL,CACT,CCpEA,IAAIa,GAAgB,WAChBC,GAAc,IACd,CAACC,GAAuBC,EAAmB,EAAI1rG,GAAmBurG,EAAa,EAC/E,CAACI,GAAkBC,EAAkB,EAAIH,GAAsBF,EAAa,EAC5EM,GAAWn5G,EAAgB,WAC7B,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CACJ,gBAAA8oG,EACA,MAAOC,EAAY,KACnB,IAAKC,EACL,cAAAC,EAAgBC,GAChB,GAAGC,CACJ,EAAGviI,GACCoiI,GAAWA,IAAY,IAAM,CAACI,GAAiBJ,CAAO,GACzD,QAAQ,MAAMK,GAAmB,GAAGL,CAAO,GAAI,UAAU,CAAC,EAE5D,MAAMx3G,EAAM43G,GAAiBJ,CAAO,EAAIA,EAAUR,GAC9CO,IAAc,MAAQ,CAACO,GAAmBP,EAAWv3G,CAAG,GAC1D,QAAQ,MAAM+3G,GAAqB,GAAGR,CAAS,GAAI,UAAU,CAAC,EAEhE,MAAMtlI,EAAQ6lI,GAAmBP,EAAWv3G,CAAG,EAAIu3G,EAAY,KACzDS,EAAah+G,GAAS/nB,CAAK,EAAIwlI,EAAcxlI,EAAO+tB,CAAG,EAAI,OACjE,OAAuB5B,EAAG,IAAC+4G,GAAkB,CAAE,MAAOG,EAAiB,MAAArlI,EAAO,IAAA+tB,EAAK,SAA0B5B,EAAG,IAC9G4Q,GAAU,IACV,CACE,gBAAiBhP,EACjB,gBAAiB,EACjB,gBAAiBhG,GAAS/nB,CAAK,EAAIA,EAAQ,OAC3C,iBAAkB+lI,EAClB,KAAM,cACN,aAAcC,GAAiBhmI,EAAO+tB,CAAG,EACzC,aAAc/tB,GAAS,OACvB,WAAY+tB,EACZ,GAAG23G,EACH,IAAKnpG,CACN,CACF,EAAE,CACJ,CACH,EACA6oG,GAAS,YAAcN,GACvB,IAAI/wE,GAAiB,oBACjBkyE,GAAoBh6G,EAAgB,WACtC,CAAC9oB,EAAOo5B,IAAiB,CACvB,KAAM,CAAE,gBAAA8oG,EAAiB,GAAG54B,CAAc,EAAKtpG,EACzCkrB,EAAU82G,GAAmBpxE,GAAgBsxE,CAAe,EAClE,OAAuBl5G,EAAG,IACxB4Q,GAAU,IACV,CACE,aAAcipG,GAAiB33G,EAAQ,MAAOA,EAAQ,GAAG,EACzD,aAAcA,EAAQ,OAAS,OAC/B,WAAYA,EAAQ,IACpB,GAAGo+E,EACH,IAAKlwE,CACN,CACP,CACG,CACH,EACA0pG,GAAkB,YAAclyE,GAChC,SAAS0xE,GAAqBzlI,EAAO+tB,EAAK,CACxC,MAAO,GAAG,KAAK,MAAM/tB,EAAQ+tB,EAAM,GAAG,CAAC,GACzC,CACA,SAASi4G,GAAiBhmI,EAAOkmI,EAAU,CACzC,OAAOlmI,GAAS,KAAO,gBAAkBA,IAAUkmI,EAAW,WAAa,SAC7E,CACA,SAASn+G,GAAS/nB,EAAO,CACvB,OAAO,OAAOA,GAAU,QAC1B,CACA,SAAS2lI,GAAiB53G,EAAK,CAC7B,OAAOhG,GAASgG,CAAG,GAAK,CAAC,MAAMA,CAAG,GAAKA,EAAM,CAC/C,CACA,SAAS83G,GAAmB7lI,EAAO+tB,EAAK,CACtC,OAAOhG,GAAS/nB,CAAK,GAAK,CAAC,MAAMA,CAAK,GAAKA,GAAS+tB,GAAO/tB,GAAS,CACtE,CACA,SAAS4lI,GAAmBO,EAAW/qI,EAAe,CACpD,MAAO,mCAAmC+qI,CAAS,oBAAoB/qI,CAAa,yEAAyE2pI,EAAW,KAC1K,CACA,SAASe,GAAqBK,EAAW/qI,EAAe,CACtD,MAAO,qCAAqC+qI,CAAS,oBAAoB/qI,CAAa;AAAA;AAAA,gDAExC2pI,EAAW;AAAA;AAAA;AAAA,wBAI3D,CACA,IAAIp9B,GAAOy9B,GACPl4B,GAAY+4B,GCvFhB,MAAMb,GAAWn5G,aAGf,CAAC,CAAE,UAAArK,EAAW,MAAA5hB,EAAO,GAAGmD,CAAM,EAAG+oB,IACjCC,EAAA,IAACi6G,GAAA,CACC,IAAAl6G,EACA,UAAWN,GACT,gEACAhK,CACF,EACC,GAAGze,EAEJ,SAAAgpB,EAAA,IAACk6G,GAAA,CACC,UAAU,iDACV,MAAO,CAAE,UAAW,eAAe,KAAOrmI,GAAS,EAAE,IAAK,EAC5D,EACF,CACD,EACDolI,GAAS,YAAcgB,GAAuB,YCCvC,MAAME,GAAgB,MAC3B/yC,EACA5vF,EAA8B,KACC,CACzB,MACJ,SAAA4iI,EAAW,KACX,UAAAC,EAAY,KACZ,QAAAC,EAAU,GACV,OAAArtB,EAAS,OACT,UAAAstB,EAAY,IACV,EAAA/iI,EAEJ,OAAO,IAAI,QAAQ,CAAC9D,EAASC,IAAW,CAChC,MAAA0/D,EAAM,IAAI,MACVrwC,EAAS,SAAS,cAAc,QAAQ,EACxCe,EAAMf,EAAO,WAAW,IAAI,EAElC,GAAI,CAACe,EAAK,CACDpwB,EAAA,IAAI,MAAM,wCAAwC,CAAC,EAC1D,MACF,CAEA0/D,EAAI,OAAS,IAAM,CAEjB,KAAM,CAAE,MAAOmnE,EAAU,OAAQC,CAAc,EAAAC,GAC7CrnE,EAAI,MACJA,EAAI,OACJ+mE,EACAC,CAAA,EAIFr3G,EAAO,MAAQw3G,EACfx3G,EAAO,OAASy3G,EAGhB12G,EAAI,sBAAwB,GAC5BA,EAAI,sBAAwB,OAG5BA,EAAI,UAAUsvC,EAAK,EAAG,EAAGmnE,EAAUC,CAAS,EAGtC,MAAAE,EAAW,SAAS1tB,CAAM,GAEzBjqF,EAAA,OACL,MAAOsoB,GAAS,CACd,GAAI,CAACA,EAAM,CACF33C,EAAA,IAAI,MAAM,yBAAyB,CAAC,EAC3C,MACF,CAEA,IAAIinI,EAAYtvF,EAIZA,EAAK,KAAOivF,EAAY,MAAQttB,IAAW,QAC7C2tB,EAAY,MAAMC,GAChB73G,EACA23G,EACAJ,EAAY,KACZD,CAAA,GAWJ,MAAMj6H,EAA4B,CAChC,KAPqB,IAAI,KACzB,CAACu6H,CAAS,EACV,cAAcxzC,EAAK,KAAK,QAAQ,YAAa,EAAE,CAAC,IAAI6lB,CAAM,GAC1D,CAAE,KAAM0tB,CAAS,GAKjB,aAAcvzC,EAAK,KACnB,eAAgBwzC,EAAU,KAC1B,iBAAkB,KAAK,OAAO,EAAIA,EAAU,KAAOxzC,EAAK,MAAQ,GAAG,EACnE,MAAOozC,EACP,OAAQC,CAAA,EAGV/mI,EAAQ2M,CAAM,CAChB,EACAs6H,EACAL,CAAA,CACF,EAGFjnE,EAAI,QAAU,IAAM,CACX1/D,EAAA,IAAI,MAAM,+BAAgC,CAAC,GAIhD0/D,EAAA,IAAM,IAAI,gBAAgB+zB,CAAI,EACnC,CACH,EAKMszC,GAAsB,CAC1BI,EACAC,EACAX,EACAC,IACsC,CAClC,IAAE,MAAAr0G,EAAO,OAAAC,GAAW,CAAE,MAAO60G,EAAe,OAAQC,GAGpD,GAAA/0G,GAASo0G,GAAYn0G,GAAUo0G,EAC1B,OAAE,MAAAr0G,EAAO,OAAAC,GAIlB,MAAM+0G,EAAaZ,EAAWp0G,EACxBi1G,EAAcZ,EAAYp0G,EAC1Bg2F,EAAQ,KAAK,IAAI+e,EAAYC,CAAW,EAEvC,OACL,MAAO,KAAK,MAAMj1G,EAAQi2F,CAAK,EAC/B,OAAQ,KAAK,MAAMh2F,EAASg2F,CAAK,EAErC,EAKM4e,GAAyB,MAC7B73G,EACA23G,EACAj5H,EACAw5H,IACkB,CAClB,IAAIZ,EAAUY,EACV5vF,EAAoB,KAExB,KAAOgvF,EAAU,KACfhvF,EAAO,MAAM,IAAI,QAAsB53C,GAAY,CAC1CsvB,EAAA,OAAOtvB,EAASinI,EAAUL,CAAO,EACzC,EAEG,EAAAhvF,GAAQA,EAAK,MAAQ5pC,KAId44H,GAAA,GAGN,OAAAhvF,GAAQ,IAAI,IACrB,EAKa6vF,GAAqB/zC,GACX,CAAC,aAAc,YAAa,YAAa,YAAY,EAGxD,SAASA,EAAK,IAAI,EAOhCA,EAAK,KAAO,GAAY,KAAO,KAC1B,CACL,MAAO,GACP,MAAO,wCAA6C,EAIjD,CAAE,MAAO,IAbP,CACL,MAAO,GACP,MAAO,mDAyCAg0C,GAAkBlqI,GAA0B,CACnD,GAAAA,IAAU,EAAU,YAExB,MAAMwE,EAAI,KACJ2iH,EAAQ,CAAC,IAAK,KAAM,KAAM,IAAI,EAC9BtnH,EAAI,KAAK,MAAM,KAAK,IAAIG,CAAK,EAAI,KAAK,IAAIwE,CAAC,CAAC,EAElD,MAAO,GAAG,YAAYxE,EAAQ,KAAK,IAAIwE,EAAG3E,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAIsnH,EAAMtnH,CAAC,CAAC,EACvE,EChOA,SAASkoD,GAA4Cn+C,EAAS2gC,EAA2C,CACnG,IAAA4/F,EACE,MAAAC,EAAiB,IAAIxiI,IAAgB,CACzC,aAAauiI,CAAS,EACtBA,EAAY,WAAW,IAAMvgI,EAAK,MAAM,KAAMhC,CAAI,EAAG2iC,CAAK,GAG5D,OAAA6/F,EAAc,OAAS,IAAM,CAC3B,aAAaD,CAAS,GAGjBC,CACT,CAEa,MAAAC,GAAc,CAAC,CAAE,IAAAnmI,EAAK,KAAAP,EAAM,MAAA4mC,EAAQ,IAAM,QAAAxtB,EAAU,MAA4B,CACrF,MAAAutH,EAAmB7mF,SAA2C,IAAI,EAGlE8mF,EAAsBC,GAAoB,CAC1C,IACI,MAAAC,EAAiB,KAAK,UAAU,CACpC,KAAMD,EACN,UAAW,KAAK,IAAI,EACpB,QAAS,MACV,EACD,aAAa,QAAQ,SAAStmI,CAAG,GAAIumI,CAAc,EAC3C,YAAI,oCAAoCvmI,CAAG,EAAE,QAC9CpG,EAAO,CACd,QAAQ,MAAM,gCAAgCoG,CAAG,IAAKpG,CAAK,CAC7D,GAII4sI,EAAuB,IAAkB,CACzC,IACF,MAAMD,EAAiB,aAAa,QAAQ,SAASvmI,CAAG,EAAE,EACtD,IAACumI,EAAuB,YAEtB,MAAAE,EAAS,KAAK,MAAMF,CAAc,EAGlCG,EAAS,GAAK,GAAK,GAAK,IAC9B,OAAI,KAAK,MAAQD,EAAO,UAAYC,GACrB,wBAAW,SAAS1mI,CAAG,EAAE,EAC/B,OAGD,YAAI,kCAAkCA,CAAG,EAAE,EAC5CymI,EAAO,YACP7sI,EAAO,CACd,eAAQ,MAAM,kCAAkCoG,CAAG,IAAKpG,CAAK,EACtD,IACT,GAII+sI,EAAa,IAAM,CACnB,IACW,wBAAW,SAAS3mI,CAAG,EAAE,EAC9B,YAAI,kCAAkCA,CAAG,EAAE,QAC5CpG,EAAO,CACd,QAAQ,MAAM,iCAAiCoG,CAAG,IAAKpG,CAAK,CAC9D,GAIFw2B,mBAAU,KACSg2G,EAAA,QAAUviF,GAASwiF,EAAoBhgG,CAAK,EAEtD,IAAM,CACP+/F,EAAiB,SACnBA,EAAiB,QAAQ,QAC3B,GAED,CAAC//F,CAAK,CAAC,EAGVjW,YAAU,IAAM,OACV,CAACvX,GAAW,CAACpZ,GAGD,OAAOA,GAAS,UAAY,OAAO,KAAKA,CAAI,EAAE,SAAW,IAGzErB,EAAAgoI,EAAiB,UAAjB,MAAAhoI,EAAA,KAAAgoI,EAA2B3mI,EAAI,EAC9B,CAACA,EAAMoZ,CAAO,CAAC,EAEX,CACL,UAAW2tH,EACX,WAAAG,EACA,SAAU,IAAM,CACV,IACF,OAAO,aAAa,QAAQ,SAAS3mI,CAAG,EAAE,IAAM,UAC1C,CACC,QACT,CACF,EAEJ,ECzEa4mI,GAAoD,CAAC,CAAE,SAAAC,KAAe,CACjF,KAAM,CAAC95B,EAAcC,CAAe,EAAI78E,WAAS,EAAK,EAChD,CAACsrG,EAAaqL,CAAc,EAAI32G,WAAS,EAAK,EAC9C,CAAC42G,EAAcC,CAAe,EAAI72G,WAAwB,IAAI,EAC9D,CAAC82G,EAAqBC,CAAsB,EAAI/2G,WAAc,IAAI,EAClE,CAACg3G,EAAiBC,CAAkB,EAAIj3G,WAAiB,EAAE,EAC3D,CAACk3G,EAAoBC,CAAqB,EAAIn3G,WAAiB,EAAE,EACjE,CAACo3G,EAAeC,CAAgB,EAAIr3G,WAAS,EAAK,EAClD,CAACs3G,EAAqBC,CAAsB,EAAIv3G,WAAS,CAAC,EAC1D,CAACw3G,EAAmBC,CAAoB,EAAIz3G,WAAmC,IAAI,EACnF,CAAC03G,EAAuBC,CAAwB,EAAI33G,WAAS,EAAK,EAClEq3E,EAAejoD,SAAyB,IAAI,EAE5C,CAAE,SAAAghF,EAAU,aAAA3yB,EAAc,MAAA/C,EAAO,SAAAojB,EAAU,UAAW,CAAE,OAAArzH,CAAO,EAAG,QAAAuwG,CAAQ,EAAIo2B,GAA0B,EAGxGwG,EAAgBhT,GAAS,CAAE,QAAA5pB,CAAS,GAGpC,CAAE,UAAA68B,EAAW,WAAArB,EAAY,SAAAsB,CAAA,EAAa9B,GAAY,CACtD,IAAK,oBACL,KAAM,CACJ,GAAG4B,EACH,gBAAAZ,EACA,mBAAAE,EACA,aAAcN,EAAe,YAAc,IAC7C,EACA,MAAO,IACP,QAAS,CAACtL,CAAA,CACX,EAGDrrG,YAAU,IAAM,CACA43G,KACDC,KACXH,EAAyB,EAAI,CAC/B,EACC,CAACE,EAAWC,CAAQ,CAAC,EAGxB73G,YAAU,IAAM,CACd,MAAMtD,EAAUg0C,KACZh0C,IACFo6G,EAAuBp6G,CAAO,EACtB,YAAI,oCAAqCA,CAAO,EAGpDA,EAAQ,OAAS,SAEVmhG,EAAA,UAAWnhG,EAAQ,EAAE,EAC9Bs6G,EAAmBt6G,EAAQ,EAAE,EACrB,YAAI,gDAAiDA,EAAQ,EAAE,EACvE,QAAQ,IAAI,uDAAwDqlB,GAAO,IAAS/3C,KAAE,EAAE,CAAC,EACjF,YAAI,gEAAiE+3C,GAAO,QAAU/3C,EAAE,KAAO0yB,EAAQ,EAAE,CAAC,EAG9GA,EAAQ,aACDmhG,EAAA,aAAcnhG,EAAQ,UAAU,EACzCw6G,EAAsBx6G,EAAQ,UAAU,EAChC,YAAI,4DAA6DA,EAAQ,UAAU,EACnF,YAAI,4DAA6DslB,GAAU,QAAU7f,EAAE,KAAOzF,EAAQ,UAAU,CAAC,IAElHA,EAAQ,OAAS,aAEjBmhG,EAAA,aAAcnhG,EAAQ,EAAE,EACjCw6G,EAAsBx6G,EAAQ,EAAE,EACxB,YAAI,2CAA4CA,EAAQ,EAAE,EAClE,QAAQ,IAAI,kDAAmDslB,GAAU,IAAS7f,KAAE,EAAE,CAAC,EAC/E,YAAI,yDAA0D6f,GAAU,QAAU7f,EAAE,KAAOzF,EAAQ,EAAE,CAAC,EAGvFslB,GAAU,QAAU7f,EAAE,KAAOzF,EAAQ,EAAE,GAE5D,QAAQ,KAAK,4HAA4H,IAK/IpS,EAAU,0BAA0BO,GAAY,aAAc,CAAE,MAAO,YAAa,GACnF,CAACgzG,CAAQ,CAAC,EAGP,MAAAia,EAAoB,MAAO9tI,GAA2C,SAC1E,QAAQ,IAAI,6CAA6CgE,EAAAhE,EAAE,OAAO,QAAT,YAAAgE,EAAgB,OAAQ,YAAY,EAEzF,IACF,MAAM4zF,GAAOtmF,EAAAtR,EAAE,OAAO,QAAT,YAAAsR,EAAiB,GAC9B,GAAI,CAACsmF,EAAM,OAGL,MAAAm2C,GAAapC,GAAkB/zC,CAAI,EACrC,IAACm2C,GAAW,MAAO,CACrB,MAAMA,GAAW,KAAK,EACtB,MACF,CAEA,QAAQ,IAAI,wCAAyCn2C,EAAK,KAAMg0C,GAAeh0C,EAAK,IAAI,CAAC,EACzFw1C,EAAiB,EAAI,EACrBE,EAAuB,CAAC,EAGlB,MAAAU,EAAmB,YAAY,IAAM,CACzCV,MAA+B,KAAK,IAAIt6B,GAAO,GAAI,EAAE,CAAC,GACrD,GAAG,EAEF,IAEIu6B,SAAoB,MAAM5C,GAAc/yC,EAAM,CAClD,SAAU,KACV,UAAW,KACX,QAAS,GACT,OAAQ,OACR,UAAW,KACZ,EAED,cAAco2C,CAAgB,EAC9BV,EAAuB,GAAG,EAC1BE,EAAqBD,EAAiB,EAEtC,QAAQ,IAAI,2CAA4C,CACtD,SAAU3B,GAAe2B,GAAkB,YAAY,EACvD,WAAY3B,GAAe2B,GAAkB,cAAc,EAC3D,MAAOA,GAAkB,iBAAmB,IAC5C,WAAY,GAAGA,GAAkB,KAAK,IAAIA,GAAkB,MAAM,GACnE,EAGK,MAAA5/B,GAAS,IAAI,WACZA,GAAA,OAAU1sG,IAAU,CACrBA,GAAM,QAAUA,GAAM,OAAO,QACf2rI,EAAA3rI,GAAM,OAAO,MAAgB,CAC/C,EAEK0sG,GAAA,cAAc4/B,GAAkB,IAAI,EAGrC,MAAAh7B,EAAW,IAAI,SACZA,EAAA,OAAO,OAAQg7B,GAAkB,IAAI,EACrCh7B,EAAA,OAAO,gBAAiB,kBAAkB,EAC1CA,EAAA,OAAO,aAAc,WAAW,EAEzC,QAAQ,IAAI,+DAAgE,CAC1E,IAAK,yDACL,OAAQ,mBACR,SAAUg7B,GAAkB,eAC5B,SAAUA,GAAkB,KAAK,KAClC,EAED,MAAM3sI,GAAW,MAAM,MACrB,yDACA,CACE,OAAQ,OACR,KAAM2xG,CACR,GAKF,GAFA,QAAQ,IAAI,iDAAkD3xG,GAAS,OAAQA,GAAS,UAAU,EAE9FA,GAAS,GAAI,CACT,MAAAyE,GAAO,MAAMzE,GAAS,OACpB,YAAI,+CAAgDyE,EAAI,EACvDwuH,EAAA,WAAYxuH,GAAK,UAAU,EAG1Bib,EAAA,0BAA0BO,GAAY,aAAc,CAC5D,MAAO,iBACP,kBAAmB0sH,GAAkB,iBACrC,cAAeA,GAAkB,aACjC,gBAAiBA,GAAkB,eACpC,MACI,CACC,MAAA55H,GAAY,MAAM/S,GAAS,OACzB,oBAAM,wCAAyC+S,EAAS,EAC1D,IAAI,MAAM,sBAAsB/S,GAAS,MAAM,EAAE,CACzD,QAEOqtI,GAAkB,CACzB,cAAcD,CAAgB,EACtB,cAAM,4CAA6CC,EAAgB,EAC3E,MAAM,+DAAgE,CACxE,QAEOzuI,EAAO,CACN,cAAM,sCAAuCA,CAAK,EAC1D,MAAM,2DAA4D,SAClE,CACA4tI,EAAiB,EAAK,EACtBE,EAAuB,CAAC,CAC1B,GAIIY,GAAgB,MAAO7oI,GAA2B,SACtD,QAAQ,IAAI,gDAAgD,EACpD,YAAI,mDAAoDA,CAAI,EAEhE,IACFutG,EAAgB,EAAI,EACpB,QAAQ,IAAI,8CAA8C,EAE1DtyF,EAAU,0BAA0BO,GAAY,aAAc,CAAE,MAAO,eAAgB,EAGvF,MAAMstH,EAAW9oI,EAAK,YAAYiM,GAAAtN,EAAAopG,EAAa,UAAb,YAAAppG,EAAsB,QAAtB,YAAAsN,EAA8B,IAC1DjK,GAAkB8mI,EAAW,QAAU,cAC7C,QAAQ,IAAI,qDAAsD9mI,GAAM8mI,EAAW,eAAiB,cAAc,EAGlH9oI,EAAK,KAAOgC,GAGRhC,EAAK,SACC,YAAI,gDAAiDA,EAAK,QAAQ,EAE1E,QAAQ,IAAI,qDAAqD,EAI3D,YAAI,oDAAqDwnI,CAAmB,EACpFxnI,EAAOwhE,GAA4BxhE,CAAI,EAC/B,YAAI,iEAAkEA,CAAI,EAGlF,QAAQ,IAAI,sDAAsD,EAE5D,MAAAwvC,EAAW,MAAM0/D,GAAmBlvG,CAAI,EACtC,YAAI,uDAAwDwvC,CAAQ,EAE5Ev0B,EAAU,0BAA0BO,GAAY,aAAc,CAAE,MAAO,UAAW,SAAUg0B,EAAS,GAAI,KAAMA,EAAS,IAAM,GAGxHnxB,GAAA,CACJ,MAAO,oCACP,YAAa,wFACb,SAAU,IACX,EAGDgpH,EAAe,EAAI,EAGnB,WAAW,IAAM,CACf,QAAQ,IAAI,sDAAsD,EAC5Dj8B,IACNm8B,EAAgB,IAAI,EACKhmE,KACzBkmE,EAAuB,IAAI,EAC3BE,EAAmB,EAAE,EACrBE,EAAsB,EAAE,EACxBR,EAAe,EAAK,EACpB,QAAQ,IAAI,4CAA4C,GACvD,GAAI,EAGP,QAAQ,IAAI,wDAAwD,EACpED,EAAS53F,CAAQ,EACjB,QAAQ,IAAI,4DAA4D,QAEjEr1C,EAAO,CACd,QAAQ,MAAM,yDAAyD,EAC/D,cAAM,uCAAwCA,CAAK,EAC3D,QAAQ,MAAM,kCAAmCA,aAAiB,MAAQA,EAAM,MAAQ,KAAK,EAE7F,MAAM,oFAAoF,EAE1F8gB,EAAU,0BAA0BO,GAAY,aAAc,CAAE,MAAO,UAAW,SAClF,CACA+xF,EAAgB,EAAK,EACrB,QAAQ,IAAI,iDAAiD,CAC/D,GAIA,OAAAphF,EAAA,KAAC8lB,GAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,EAC7B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,UAAU,kBAEV,UAAC9lB,OAAA,OAAI,UAAU,YACb,UAAChB,EAAA,UAAG,UAAU,wBAAwB,SAAyB,8BAC9DA,EAAA,SAAE,UAAU,yBAAyB,SAEtC,iGAGC6wG,GACC7vG,EAAA,KAACg2G,GAAM,WAAU,2CACf,UAACh3G,MAAAw5E,GAAA,CAAM,UAAU,uBAAwB,GACzCx4E,OAACk2G,GAAiB,WAAU,YAC1B,UAACl3G,EAAA,WAAI,UAAU,kCAAkC,SAEjD,8BACAgB,OAAC,MAAI,WAAU,oDACb,UAACA,OAAA,OAAI,UAAU,oDACb,UAAChB,MAAAw5E,GAAA,CAAM,UAAU,SAAU,GAC3Bx5E,MAAC,QAAK,SAA4C,kDACpD,EACCA,EAAA,WAAI,UAAU,6BAA6B,SAE5C,0EACF,EACCA,EAAA,WAAI,UAAU,wBAAwB,SAEvC,sEACF,GACF,EAIDq8G,GAAuB,CAACxL,GACtB7vG,EAAA,KAAAg2G,GAAA,CAAM,UAAU,kCACf,UAACh3G,MAAA61C,GAAA,CAAK,UAAU,uBAAwB,UACvCqhE,GAAiB,iDACoBmF,EAAoB,OAAS,QAAU,cAAgB,gBAAgB,IAACr8G,MAAC,SAAQ,UAAAq8G,EAAoB,IAAK,IAChJ,GACF,EAIDY,GACCj8G,EAAA,KAACg2G,GAAM,WAAU,sCACf,UAACh3G,MAAA61C,GAAA,CAAK,UAAU,yBAA0B,GAC1C71C,MAACk3G,IAAiB,SAElB,sEACF,GAEJ,EAEC,CAACrG,GACA7vG,EAAA,KAAC,QACC,SAAUgiF,EAAa06B,EAAa,EACpC,UAAU,YACV,aAAa,MACb,iBAAe,eACf,WAAU,GAGZ,UAAC18G,OAAA,OAAI,UAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,cAAc,SAA2B,gCACxD9kC,EAAA,IAACs7E,GAAA,CACC,GAAG,cACH,YAAY,0BACZ,aAAa,UACb,aAAa,MACb,iBAAe,2BACd,GAAGq6B,EAAS,aAAa,EAC5B,EACC31G,EAAA,SAAE,UAAU,yBAAyB,SAEtC,8CACF,EAGAgB,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,UAAU,SAA6B,kCACtD9jC,EAAA,KAACu8E,GAAA,CACC,MAAOg/B,EACP,cAAgB1oI,GAAU,CACxB2oI,EAAmB3oI,CAAK,EACxBwvH,EAAS,UAAWxvH,CAAK,CAC3B,EAEA,UAAAmsB,MAAC29E,GACC,UAAA39E,EAAA,IAACy9E,GAAY,aAAY,2BAA4B,GACvD,QACCS,GACE,UAAA32D,GAAO,IAAK92C,GACVuvB,EAAA,IAAAw+E,GAAA,CAA0B,MAAO/tG,EAAM,GAAK,SAAMA,EAAA,OAAlCA,EAAM,EAAkC,CAC1D,EACH,GACF,EACAuvB,EAAA,IAAC,SACC,KAAK,SACJ,GAAG21G,EAAS,SAAS,EACtB,MAAO4G,EACP,iBAAe,qBACf,aAAa,MACf,GACF,EAGAv7G,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,aAAa,SAAwB,6BACpD9jC,EAAA,KAACu8E,GAAA,CACC,MAAOk/B,EACP,cAAgB5oI,GAAU,CACxB6oI,EAAsB7oI,CAAK,EAC3BwvH,EAAS,aAAcxvH,CAAK,CAC9B,EAEA,UAAAmsB,MAAC29E,GACC,UAAA39E,EAAA,IAACy9E,GAAY,aAAY,sBAAuB,GAClD,QACCS,GACE,UAAA12D,GAAU,IAAK5D,GACb5jB,EAAA,IAAAw+E,GAAA,CAA6B,MAAO56D,EAAS,GAAK,SAASA,EAAA,MAA3CA,EAAS,EAAuC,CAClE,EACH,GACF,EACA5jB,EAAA,IAAC,SACC,KAAK,SACJ,GAAG21G,EAAS,YAAY,EACzB,MAAO8G,EACP,iBAAe,wBACf,aAAa,MACf,GACF,EAGAz7G,OAAC,MAAI,WAAU,YAEb,UAACA,OAAA,OAAI,UAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,QAAQ,SAAK,UAC5B9jC,EAAA,KAAC,OACC,UAAU,+HACV,QAAS,IAAM,cAAAxtB,EAAAopG,EAAa,UAAb,YAAAppG,EAAsB,SAEpC,UACC2oI,EAAAn7G,EAAA,KAAC,MAAI,WAAU,WACb,UAAAhB,EAAA,IAAC,OACC,IAAKm8G,EACL,IAAI,SACJ,UAAU,2BACZ,EACAn8G,EAAA,IAAC8sB,EAAA,CACC,KAAK,SACL,QAAQ,UACR,KAAK,KACL,UAAU,OACV,QAAUt9C,GAAM,CACdA,EAAE,gBAAgB,EAClB4sI,EAAgB,IAAI,EAChBx/B,EAAa,UACfA,EAAa,QAAQ,MAAQ,GAEjC,EACD,2BAED,EACF,GAEA57E,OAAC,MAAI,WAAU,wCACb,UAAChB,MAAA49G,GAAA,CAAO,UAAU,wBAAyB,GAC1C59G,EAAA,SAAE,UAAU,yBAAyB,SAEtC,2DACC28G,GACE38G,EAAA,IAAAi5G,GAAA,CAAS,MAAO4D,EAAqB,IAAK,IAAK,GAEpD,EAEF78G,EAAA,IAAC,SACC,KAAK,OACL,IAAK48E,EACL,OAAO,UACP,UAAU,SACV,SAAU0gC,EACV,iBAAe,qBACf,aAAa,MACf,GACF,GACF,EAGAt8G,OAAC,MAAI,WAAU,YACb,UAAChB,EAAA,IAAA8kC,GAAA,CAAM,QAAQ,cAAc,SAAuB,4BACpD9kC,EAAA,IAACs9E,GAAA,CACC,GAAG,cACH,YAAY,0BACZ,aAAa,MACb,iBAAe,2BACd,GAAGq4B,EAAS,aAAa,EAC5B,GACF,GACF,EAGA31G,EAAA,IAAC8sB,EAAA,CACC,KAAK,SACL,UAAU,SACV,SAAUq1D,EAET,WAEGnhF,OAAA0rB,EAAA,oBAAC1sB,MAAA2sB,GAAA,CAAQ,UAAU,2BAA4B,GAAE,qBAEnD,EAEA,WAEJ,GACA,IAIR,ECrgBakxF,GAAsC,CAAC,CAClD,IAAA51C,EACA,IAAA61C,EACA,UAAAroH,EACA,eAAAsoH,EACA,YAAAC,EACA,OAAAC,EACA,QAAArgG,EACA,SAAAsgG,EAAW,EACb,IAAM,CACJ,KAAM,CAACC,EAAUC,CAAW,EAAI74G,WAAS,EAAK,EACxC,CAAC84G,EAAUC,CAAW,EAAI/4G,WAAS24G,CAAQ,EAC3C,CAACK,EAAUC,CAAW,EAAIj5G,WAAS,CAAC0iE,CAAG,EACvCw2C,EAAS9pF,SAAyB,IAAI,EACtC+pF,EAAc/pF,SAAoC,IAAI,EAE5D,QAAQ,IAAI,+BAA+BszC,CAAG,eAAei2C,CAAQ,eAAeG,CAAQ,EAAE,GAG1F,CAACp2C,GAAOA,IAAQ,cACV,aAAK,qCAAqCA,CAAG,EAAE,EAIzDziE,YAAU,IAAM,CACd,GAAI04G,EAAU,CACJ,YAAI,8CAA8Cj2C,CAAG,EAAE,EAC/D,MACF,CAEQ,YAAI,wCAAwCA,CAAG,EAAE,EAEzD,MAAM3qD,EAAW,IAAI,qBAClB4lD,GAAY,CACHA,EAAA,QAASx8E,GAAU,CACzB,QAAQ,IAAI,kCAAkCuhF,CAAG,qBAAqBvhF,EAAM,cAAc,EAAE,EACxFA,EAAM,iBACR43H,EAAY,EAAI,EACPhhG,EAAA,UAAU52B,EAAM,MAAM,EACjC,CACD,CACH,EACA,CACE,WAAY,OACZ,UAAW,EACb,GAGF,OAAAg4H,EAAY,QAAUphG,EAElBmhG,EAAO,UACD,YAAI,kCAAkCx2C,CAAG,EAAE,EAC1C3qD,EAAA,QAAQmhG,EAAO,OAAO,GAG1B,IAAM,CACPC,EAAY,SACdA,EAAY,QAAQ,YACtB,CACF,EACC,CAACR,EAAUj2C,CAAG,CAAC,EAElB,MAAM02C,EAAa,IAAM,CACf,YAAI,6BAA6B12C,CAAG,EAAE,EAC9Cm2C,EAAY,EAAI,EACPH,GAAA,MAAAA,GAAA,EAGLW,EAAe5vI,GAAyD,CAC5E,QAAQ,MAAM,4BAA4Bi5F,CAAG,GAAIj5F,CAAK,EACtDwvI,EAAY,EAAI,EAChB5gG,GAAA,MAAAA,EAAU5uC,EAAM,YAAW,EAIvB6vI,EAAqB,sfAE3B,eAAQ,IAAI,sCAAsCR,CAAQ,cAAcF,CAAQ,cAAcI,CAAQ,EAAE,EAGtGv9G,EAAA,KAAC,OACC,IAAKy9G,EACL,UAAWh/G,GAAG,2BAA4BhK,CAAS,EAGlD,WAAC0oH,GACAn+G,EAAA,IAAC,OACC,UAAU,8CACV,MAAO,CACL,gBAAiB,OAAOg+G,GAAea,CAAkB,IACzD,eAAgB,QAChB,mBAAoB,SACpB,OAAQ,aACR,UAAW,YACb,EACF,EAIDR,GAAYp2C,GAAOA,IAAQ,aAC1BjoE,EAAA,IAAC,OACC,IAAAioE,EACA,IAAA61C,EACA,UAAWr+G,GACT,6DACA0+G,EAAW,cAAgB,WAC7B,EACA,OAAQQ,EACR,QAASC,EACT,QAASV,EAAW,QAAU,OAChC,EAIDG,GAAY,CAACF,GAAY,CAACI,GACzBv+G,EAAA,IAAC,MAAI,WAAU,oDACb,SAAAA,EAAA,IAAC,MAAI,WAAU,8EAA+E,GAChG,EAIDu+G,SACE,MAAI,WAAU,iEACb,SAACv9G,OAAA,OAAI,UAAU,6BACb,UAAChB,EAAA,WAAI,UAAU,gBAAgB,SAAE,OAChCA,EAAA,WAAI,UAAU,UAAU,SAAkB,wBAC7C,CACF,KAIR,ECnIa8+G,GAA0C,CAAC,CAAE,QAAA57C,EAAS,aAAA67C,KAAmB,CAEpF,MAAMC,EAAe,CACnB,OAAQ,CAAE,QAAS,EAAG,EAAG,EAAG,EAC5B,QAAUjuI,IAAe,CACvB,QAAS,EACT,EAAG,EACH,WAAY,CACV,MAAOA,EAAI,GACX,SAAU,EACZ,GACF,EAIA,OAAAivB,MAAC,OAAI,UAAU,8CACZ,WAAQ,IAAI,CAACtZ,EAAOuI,IACnB+R,EAAA,KAAC8lB,GAAO,IAAP,CAEC,OAAQ73B,EACR,SAAU+vH,EACV,QAAQ,SACR,QAAQ,UACR,UAAU,sCACV,QAAS,IAAMD,EAAar4H,CAAK,EAEhC,UAAAA,EAAM,OAAS,UAAYA,EAAM,cAAgBA,EAAM,UAEtDsa,OAAC,MAAI,WAAU,yBACb,UAAAhB,EAAA,IAAC69G,GAAA,CACC,IAAKn3H,EAAM,cAAgBA,EAAM,SACjC,IAAKA,EAAM,aAAe,sBAC1B,UAAU,6BACV,SAAUuI,EAAQ,EACpB,EAEC+Q,EAAA,WAAI,UAAU,qKACb,SAACA,EAAA,SAAE,UAAU,kCAAmC,SAAMtZ,EAAA,aAAeA,EAAM,OAAQ,GACrF,GACF,EACEA,EAAM,OAAS,QAEjBsa,OAAC,MAAI,WAAU,6FACb,UAAChB,EAAA,WAAI,UAAU,gBAAgB,SAAE,OAChCA,EAAA,SAAE,UAAU,qCAAqC,SAAoB,yBACrEA,EAAA,SAAE,UAAU,uDAAwD,WAAM,QAAQ,GACrF,EAGAgB,OAAC,MAAI,WAAU,iEACb,UAAAhB,EAAA,IAAC,IAAE,WAAU,iCAAkC,SAAAtZ,EAAM,QAAQ,QAC5D,MAAI,WAAU,8BACZ,SAAAA,EAAM,SACJsZ,MAAA,QAAK,UAAU,iBACb,WAAM,QAAQ,QAAQ,KAAM,GAAG,CAClC,GAEJ,GACF,QAMD,MAAI,WAAU,sEACb,SAACgB,EAAA,YAAI,UAAU,WACb,UAAChB,MAAA,QAAM,WAAM,WAAY,GACxBA,MAAA,QAAK,UAAU,8BACb,SAAMtZ,EAAA,WAAa,CAAC,MAAM,IAAI,KAAKA,EAAM,SAAS,EAAE,SAAS,EAC1DumG,GAAO,IAAI,KAAKvmG,EAAM,SAAS,EAAG,QAAS,CAAE,OAAQ8nG,GAAI,EACzD,EACN,IACF,CACF,KAvDK9nG,EAAM,EAyDd,EACH,EAEJ,EC1FMu4H,GAAO,OACPC,GAAQ,QACRC,GAAK,KACLC,GAAO,OAGPC,GAAe,CACjB,MAAO,GACP,qBAAsB,GACtB,cAAe,EACf,WAAY,GACZ,WAAY,GACZ,cAAe,IACf,kBAAmB,CAAE,QAAS,EAAM,CACxC,EACMlsC,GAAe,CACjB,MAAO,GACP,QAAS,CAAC,EAAG,CAAC,EACd,MAAO,EACP,QAAS,GACT,GAAI,CAAC,EAAG,CAAC,CACb,EACMmsC,GAAY,YACZC,GAAU,UACVC,GAAW,WACXC,GAAY,YACZC,GAAa,aACnB,SAAShpF,GAAaipF,EAAMC,EAAMC,EAAQC,EAAQ,CAC9C,OAAIH,EAAOC,EACHC,EAAS,EACFX,GAEJD,GAEFa,EAAS,EACPV,GAEJD,EACX,CACA,SAASY,GAAgB5uI,EAAKghD,EAAO,CACjC,GAAIA,IAAU,EACV,OAAOhhD,EACX,MAAM6uI,EAAkB,KAAK,GAAK,IAAO7tF,EACnC/vB,EAAIjxB,EAAI,CAAC,EAAI,KAAK,IAAI6uI,CAAc,EAAI7uI,EAAI,CAAC,EAAI,KAAK,IAAI6uI,CAAc,EACxE39G,EAAIlxB,EAAI,CAAC,EAAI,KAAK,IAAI6uI,CAAc,EAAI7uI,EAAI,CAAC,EAAI,KAAK,IAAI6uI,CAAc,EAC9E,MAAO,CAAC59G,EAAGC,CAAC,CAChB,CACA,SAAS49G,GAAYt6H,EAAKu6H,EAAc,CACpC,MAAMC,EAAW1vI,GAAU,CACvB,MAAM2vI,EAAU,YAAa3vI,EAEzB2vI,GAAW3vI,EAAM,QAAQ,OAAS,GAEtCkV,EAAI,CAACqN,EAAOhc,IAAU,CAEdA,EAAM,YAAc,CAACopI,IACrB,SAAS,iBAAiBd,GAAWe,CAAM,EAC3C,SAAS,iBAAiBd,GAASe,CAAI,GAE3C,KAAM,CAAE,QAAA5mF,EAAS,QAAAC,GAAYymF,EAAU3vI,EAAM,QAAQ,CAAC,EAAIA,EACpD8vI,EAAKR,GAAgB,CAACrmF,EAASC,CAAO,EAAG3iD,EAAM,aAAa,EAClE,OAAAA,EAAM,2BACFA,EAAM,0BAA0B,CAAE,MAAAvG,CAAK,CAAE,EACtC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,GAAIuiB,CAAK,EAAGmgF,EAAY,EAAG,CAAE,QAASotC,EAAG,MAAK,EAAI,GAAAA,EAAI,MAAO9vI,EAAM,WAAa,CAAC,CAAE,CAChJ,CAAS,CACT,EACU4vI,EAAU5vI,GAAU,CACtBkV,EAAI,CAACqN,EAAOhc,IAAU,CAClB,MAAMopI,EAAU,YAAa3vI,EAG7B,GAAI2vI,GAAW3vI,EAAM,QAAQ,OAAS,EAClC,OAAOuiB,EAGX,GAAIviB,EAAM,UAAYuiB,EAAM,MAAQhc,EAAM,cACtC,OAAOgc,EAAM,QAAU,OAAO,OAAO,OAAO,OAAO,GAAIA,CAAK,EAAG,CAAE,QAAS,EAAO,GAAIA,EAEzF,KAAM,CAAE,QAAA0mC,EAAS,QAAAC,GAAYymF,EAAU3vI,EAAM,QAAQ,CAAC,EAAIA,EACpD,CAAC2xB,EAAGC,CAAC,EAAI09G,GAAgB,CAACrmF,EAASC,CAAO,EAAG3iD,EAAM,aAAa,EAChE6oI,EAASz9G,EAAIpP,EAAM,GAAG,CAAC,EACvB8sH,EAASz9G,EAAIrP,EAAM,GAAG,CAAC,EACvB2sH,EAAO,KAAK,IAAIE,CAAM,EACtBD,EAAO,KAAK,IAAIE,CAAM,EACtBla,GAAQn1H,EAAM,WAAa,GAAKuiB,EAAM,MACtCwtH,EAAW,KAAK,KAAKb,EAAOA,EAAOC,EAAOA,CAAI,GAAKha,GAAQ,GAC3D6a,EAAO,CAACZ,GAAUja,GAAQ,GAAIka,GAAUla,GAAQ,EAAE,EAClDzqE,EAAMzE,GAAaipF,EAAMC,EAAMC,EAAQC,CAAM,EAE7CY,EAAQ,OAAO1pI,EAAM,OAAU,SAC/BA,EAAM,MACNA,EAAM,MAAMmkD,EAAI,aAAa,GAC3BkkF,GAAa,MACrB,GAAIM,EAAOe,GAASd,EAAOc,GAAS,CAAC1tH,EAAM,QACvC,OAAOA,EACX,MAAMiwF,EAAY,CACd,KAAA08B,EACA,KAAAC,EACA,OAAAC,EACA,OAAAC,EACA,IAAA3kF,EACA,MAAA1qD,EACA,MAAOuiB,EAAM,MACb,QAASA,EAAM,QACf,SAAAwtH,EACA,KAAAC,CAChB,EAEYx9B,EAAU,OAASjsG,EAAM,cAAgBA,EAAM,aAAaisG,CAAS,EAErEjsG,EAAM,WAAaA,EAAM,UAAUisG,CAAS,EAG5C,IAAI09B,EAAsB,GAC1B,OAAI3pI,EAAM,WACNA,EAAM,UACNA,EAAM,WAAWmkD,CAAG,EAAE,KACtBwlF,EAAsB,IAEtBA,GACA3pI,EAAM,sBACNA,EAAM,YACNvG,EAAM,YACNA,EAAM,eAAc,EAEjB,OAAO,OAAO,OAAO,OAAO,GAAIuiB,CAAK,EAAG,CAE3C,MAAO,GAAO,UAAAiwF,EAAW,QAAS,EAAM,EACxD,CAAS,CACT,EACU29B,EAASnwI,GAAU,CACrBkV,EAAI,CAACqN,EAAOhc,IAAU,CAClB,IAAIisG,EACJ,GAAIjwF,EAAM,SAAWA,EAAM,WAEvB,GAAIviB,EAAM,UAAYuiB,EAAM,MAAQhc,EAAM,cAAe,CACrDisG,EAAY,OAAO,OAAO,OAAO,OAAO,GAAIjwF,EAAM,SAAS,EAAG,CAAE,MAAAviB,CAAO,GACvEuG,EAAM,UAAYA,EAAM,SAASisG,CAAS,EAC1C,MAAM49B,EAAc7pI,EAAM,WAAWisG,EAAU,GAAG,EAAE,EACpD49B,GAAeA,EAAY59B,CAAS,CACvC,OAGDjsG,EAAM,OAASA,EAAM,MAAM,CAAE,MAAAvG,CAAO,GAExC,OAAAuG,EAAM,uBAAyBA,EAAM,sBAAsB,CAAE,MAAAvG,CAAO,GAC7D,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEuiB,CAAK,EAAGmgF,EAAY,EAAG,CAAE,UAAA8P,CAAW,EACrG,CAAS,CACT,EACU69B,EAAe,IAAM,CAEvB,SAAS,oBAAoBxB,GAAWe,CAAM,EAC9C,SAAS,oBAAoBd,GAASe,CAAI,CAClD,EACUA,EAAQ9wI,GAAM,CAChBsxI,IACAF,EAAMpxI,CAAC,CACf,EAaUuxI,EAAc,CAACnnF,EAAI5iD,IAAU,CAC/B,IAAIu1C,EAAU,IAAM,GACpB,GAAIqN,GAAMA,EAAG,iBAAkB,CAC3B,MAAMonF,EAAc,OAAO,OAAO,OAAO,OAAO,GAAI3B,GAAa,iBAAiB,EAAGroI,EAAM,iBAAiB,EAEtGiqI,EAAM,CACR,CAACvB,GAAYS,EAASa,CAAW,EAEjC,CACIvB,GACAY,EACA,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEW,CAAW,EAAIhqI,EAAM,qBAAuB,CAAE,QAAS,EAAK,EAAK,EAAI,CACxG,EACD,CAACwoI,GAAUoB,EAAOI,CAAW,CAC7C,EACYC,EAAI,QAAQ,CAAC,CAACzxI,EAAGi4B,EAAG1T,CAAC,IAAM6lC,EAAG,iBAAiBpqD,EAAGi4B,EAAG1T,CAAC,CAAC,EAEvDw4B,EAAU,IAAM00F,EAAI,QAAQ,CAAC,CAACzxI,EAAGi4B,CAAC,IAAMmyB,EAAG,oBAAoBpqD,EAAGi4B,CAAC,CAAC,CACvE,CACD,OAAO8kB,CACf,EAyBU16C,EAAS,CACX,IAzBW+nD,GAAO,CAGdA,IAAO,MAEXj0C,EAAI,CAACqN,EAAOhc,IAAU,CAElB,GAAIgc,EAAM,KAAO4mC,EACb,OAAO5mC,EACX,MAAMkuH,EAAW,GAEjB,OAAIluH,EAAM,IAAMA,EAAM,KAAO4mC,GAAM5mC,EAAM,eACrCA,EAAM,aAAY,EAClBkuH,EAAS,aAAe,QAGxBlqI,EAAM,YAAc4iD,IACpBsnF,EAAS,aAAeH,EAAYnnF,EAAI5iD,CAAK,GAG1C,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEgc,CAAK,EAAG,CAAE,GAAA4mC,CAAE,CAAE,EAAGsnF,CAAQ,CAC1F,CAAS,CACT,CAIA,EAEI,OAAIhB,EAAa,aACbruI,EAAO,YAAcsuI,GAElB,CAACtuI,EAAQkvI,CAAW,CAC/B,CACA,SAASI,GAAqBnuH,EAAOhc,EAAOoqI,EAAeL,EAAa,CAEpE,MAAI,CAAC/pI,EAAM,YAAc,CAACgc,EAAM,IACxBA,EAAM,cACNA,EAAM,aAAY,EAEf,OAAO,OAAO,OAAO,OAAO,GAAIA,CAAK,EAAG,CAAE,aAAc,MAAS,CAAE,GAGzEA,EAAM,aAMPhc,EAAM,uBAAyBoqI,EAAc,sBAC7CpqI,EAAM,kBAAkB,UAAYoqI,EAAc,kBAAkB,SACpEpuH,EAAM,aAAY,EACX,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEA,CAAK,EAAG,CAAE,aAAc+tH,EAAY/tH,EAAM,GAAIhc,CAAK,CAAG,IAE1Fgc,EAVI,OAAO,OAAO,OAAO,OAAO,CAAE,EAAEA,CAAK,EAAG,CAAE,aAAc+tH,EAAY/tH,EAAM,GAAIhc,CAAK,CAAG,EAWrG,CACA,SAASqqI,GAAa7pI,EAAS,CAC3B,KAAM,CAAE,WAAA8pI,CAAY,EAAG9pI,EACjB+pI,EAAiBlzG,SAAa,OAAO,OAAO,CAAE,EAAE8kE,EAAY,CAAC,EAC7DquC,EAAiBnzG,SAAa,OAAO,OAAO,CAAE,EAAEgxG,EAAY,CAAC,EAE7D+B,EAAgB/yG,EAAY,OAAC,OAAO,OAAO,GAAImzG,EAAe,OAAO,CAAC,EAC5EJ,EAAc,QAAU,OAAO,OAAO,GAAII,EAAe,OAAO,EAEhEA,EAAe,QAAU,OAAO,OAAO,OAAO,OAAO,GAAInC,EAAY,EAAG7nI,CAAO,EAE/E,IAAIiqI,EACJ,IAAKA,KAAcpC,GACXmC,EAAe,QAAQC,CAAU,IAAM,SACvCD,EAAe,QAAQC,CAAU,EAAIpC,GAAaoC,CAAU,GAGpE,KAAM,CAACrgD,EAAU2/C,CAAW,EAAIlxG,EAAa,QAAC,IAAMowG,GAAayB,GAAiBH,EAAe,QAAUG,EAAYH,EAAe,QAASC,EAAe,OAAO,EAAI,CAAE,WAAAF,EAAY,EAAG,CAACA,CAAU,CAAC,EACtM,OAAAC,EAAe,QAAUJ,GAAqBI,EAAe,QAASC,EAAe,QAASJ,EAAc,QAASL,CAAW,EACzH3/C,CACX,CC3PA,MAAMhzC,GAAc,IACd,OAAO,OAAW,KAAe,OAAO,SAAS,SAAS,SAAS,WAAW,EACzE,iBAEF,GAGIuzF,GAAwC,CAAC,CACpD,IAAA15C,EACA,IAAA61C,EACA,UAAAroH,EAAY,GACZ,YAAAmsH,EAAc,GAAGxzF,GAAa,gCAChC,IAAM,CACJ,KAAM,CAACyzF,EAAUC,CAAW,EAAIv8G,WAAiB,EAAE,EAC7C,CAACopF,EAASC,CAAU,EAAIrpF,WAAkB,EAAI,EAC9C,CAACv2B,EAAOu0G,CAAQ,EAAIh+E,WAAkB,EAAK,EAC3C,CAACw8G,EAAYC,CAAa,EAAIz8G,WAAiB,CAAC,EA6DtD,GA3DAC,YAAU,IAAM,EACI,IAAM,CACtBopF,EAAW,EAAI,EACfrL,EAAS,EAAK,EAEV,IAEF,GAAI,CAACtb,EAAK,CACR,QAAQ,MAAM,4CAA4C,EAC1Dsb,EAAS,EAAI,EACbqL,EAAW,EAAK,EAChB,MACF,CAGA,GAAI3mB,GAAO,OAAOA,GAAQ,UAAYA,EAAI,WAAW,QAAQ,EAAG,CACxD,MAAAg6C,EAAUh6C,EAAI,UAAU,CAAC,EACzBi6C,EAAa,aAAa,QAAQ,mBAAmBD,CAAO,EAAE,EAEhEC,EACFJ,EAAYI,CAAU,GAEd,cAAM,wCAAwCD,CAAO,EAAE,EAE3D,QAAU,UAAW,QAAUF,IAAe,EAChD,OAAO,KAAK,aAAa,EAAE,KAAcrqH,GAAA,CACvCA,EAAM,MAAM,oBAAoBuqH,CAAO,EAAE,EAAE,KAAiB7xI,GAAA,CACtDA,EACOA,EAAA,OAAO,KAAak7C,GAAA,CACrB,MAAA62F,EAAY,IAAI,gBAAgB72F,CAAI,EAC1Cw2F,EAAYK,CAAS,EACPH,EAAAx/B,GAAQA,EAAO,CAAC,EAC/B,EAEDe,EAAS,EAAI,CACf,CACD,EACF,EAAE,MAAM,IAAM,CACbA,EAAS,EAAI,EACd,EAEDA,EAAS,EAAI,EAEjB,MAGAu+B,EAAY75C,CAAG,QAEVv+E,EAAK,CACJ,cAAM,wCAA0CA,CAAG,EAC3D65F,EAAS,EAAI,SACb,CACAqL,EAAW,EAAK,CAClB,KAGQ,EACT,CAAC3mB,EAAK85C,CAAU,CAAC,EAEhBpzB,EAEA,OAAA3uF,MAAC,MAAI,WAAW,6BAA6BvK,CAAS,GACpD,SAAAuK,MAAC,OAAK,WAAU,UAAU,yBAAa,CACzC,GAIJ,GAAIhxB,EAAO,CAGDozI,QAAsBR,EAAY,WAAW,GAAG,EAClD,OAAO,SAAS,OAASA,EACzBA,EAGJ,OAAA5hH,EAAA,IAAC,OACC,IAAKoiH,EACL,IAAAtE,EACA,UAAAroH,EACA,QAAUjmB,GAAM,SAEZA,EAAA,cAAc,MAAM,QAAU,QAChCgE,EAAAhE,EAAE,cAAc,gBAAhB,MAAAgE,EAA+B,UAAU,IAAI,cAAe,OAAQ,eAAgB,kBAC9E,MAAA6uI,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,wBACjBA,EAAK,YAAc,wBACjBvhI,EAAAtR,EAAA,cAAc,gBAAd,MAAAsR,EAA6B,YAAYuhI,EAC7C,GAGN,CAGM,MAAAD,EAAsBR,EAAY,WAAW,GAAG,EAClD,OAAO,SAAS,OAASA,EACzBA,EAGF,OAAA5hH,EAAA,IAAC,OACC,IAAK6hH,EACL,IAAA/D,EACA,UAAAroH,EACA,QAAUjmB,GAAM,SAGV,GADJ,QAAQ,IAAI,oEAAoE,EAC5EA,EAAE,cAAc,MAAQ4yI,EAC1B5yI,EAAE,cAAc,IAAM4yI,MACjB,CACH5yI,EAAA,cAAc,MAAM,QAAU,QAChCgE,EAAAhE,EAAE,cAAc,gBAAhB,MAAAgE,EAA+B,UAAU,IAAI,cAAe,OAAQ,eAAgB,kBAC9E,MAAA6uI,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,wBACjBA,EAAK,YAAc,wBACjBvhI,EAAAtR,EAAA,cAAc,gBAAd,MAAAsR,EAA6B,YAAYuhI,EAC7C,CACF,GAGN,EChIaC,GAA0C,CAAC,CAAE,MAAA57H,EAAO,QAAAw8E,EAAS,aAAAl/C,EAAc,QAAApS,EAAS,WAAA2wG,KAAiB,CAEhH99G,EAAM,UAAU,KACL,cAAK,MAAM,SAAW,SACxB,IAAM,CACF,cAAK,MAAM,SAAW,SAEhC,CAAE,GAGL,MAAM+9G,EAAgBx+F,EAAe,EAC/By+F,EAAYz+F,EAAek/C,EAAQ,OAAS,EAE5Cw/C,EAAiB,IAAM,CACvBF,GACFD,EAAWv+F,EAAe,CAAC,CAC7B,EAGI2+F,EAAa,IAAM,CACnBF,GACFF,EAAWv+F,EAAe,CAAC,CAC7B,EAII4+F,EAAgBvB,GAAa,CACjC,aAAc,IAAM,CACdoB,GACSE,GAEf,EACA,cAAe,IAAM,CACfH,GACaE,GAEnB,EACA,WAAY,GACZ,qBAAsB,GACtB,MAAO,GACR,EAGDj+G,EAAM,UAAU,IAAM,CACd,MAAAi3B,EAAiBjrD,GAAyB,CAC1CA,EAAM,MAAQ,aAAe+xI,EAChBE,IACNjyI,EAAM,MAAQ,cAAgBgyI,EAC5BE,IACFlyI,EAAM,MAAQ,UACfmhC,GACV,EAGO,iCAAiB,UAAW8pB,CAAa,EAC3C,IAAM,SAAS,oBAAoB,UAAWA,CAAa,CACjE,GAAC8mF,EAAeC,EAAW7wG,CAAO,CAAC,EAGtC,MAAMixG,EAAkB,CACtB,OAAQ,CAAE,QAAS,CAAE,EACrB,QAAS,CAAE,QAAS,CAAE,GAGlBC,EAAgB,CACpB,OAAQ,CAAE,QAAS,EAAG,EAAG,GAAI,MAAO,GAAK,EACzC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,MAAO,EAAG,WAAY,CAAE,KAAM,SAAU,QAAS,GAAI,UAAW,IAAM,GAGrG,aACGC,GACC,UAAA/iH,EAAA,IAAC8mB,GAAO,IAAP,CACC,UAAU,sEACV,SAAU+7F,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,SACL,QAASjxG,EAET,SAAA5Q,EAAA,KAAC8lB,GAAO,IAAP,CACC,UAAU,mGACV,SAAUg8F,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,SACL,QAAUtzI,GAAMA,EAAE,gBAAgB,EACjC,GAAGozI,EAGJ,UAAC5hH,OAAA,OAAI,UAAU,iDACb,UAACA,OAAA,OAAI,UAAU,0BACb,UAAAhB,EAAA,IAAC,OAAK,WAAU,cAAe,SAAAtZ,EAAM,YAAY,EAChDsZ,EAAA,YAAK,UAAU,yBACb,YAAO,IAAI,KAAKtZ,EAAM,SAAS,EAAG,cAAe,CAAE,OAAQ8nG,EAAI,GAClE,GACF,EACAxtF,OAAC,MAAI,WAAU,0BAEb,UAACA,OAAA,QAAK,UAAU,8BACb,UAAegjB,EAAA,EAAE,MAAIk/C,EAAQ,QAChC,EAGAljE,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAAS41F,EACT,SAAU,CAACF,EACX,UAAU,UACV,MAAM,uCAEN,SAAAxiH,MAACgjH,GAAY,MAAM,EAAI,GACzB,EACAhjH,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAAS61F,EACT,SAAU,CAACF,EACX,UAAU,UACV,MAAM,qCAEN,SAAAziH,MAACopC,GAAa,MAAM,EAAI,GAC1B,QAGCtc,EAAO,SAAQ,QAAQ,KAAK,OAAO,QAASlb,EAAS,UAAU,UAAU,MAAM,iBAC9E,SAAA5R,EAAA,IAACS,GAAE,MAAM,EAAI,GACf,GACF,GACF,EAGAO,OAAC,MAAI,WAAU,0BACZ,UAAAta,EAAM,OAAS,QACbsa,EAAA,YAAI,UAAU,gBACb,UAACA,OAAA,OAAI,UAAU,WACb,UAAAhB,EAAA,IAAC2hH,GAAA,CACC,IAAKj7H,EAAM,SACX,IAAKA,EAAM,aAAe,sBAC1B,UAAU,gBACZ,EAGAsZ,EAAA,IAAC,MAAI,WAAU,kJACZ,SAAAwiH,GACExiH,MAAAgjH,GAAA,CAAY,UAAU,gBAAgB,KAAM,GAAI,CAErD,GACAhjH,EAAA,IAAC,MAAI,WAAU,iJACZ,SAAAyiH,GACEziH,MAAAopC,GAAA,CAAa,UAAU,gBAAgB,KAAM,GAAI,CAEtD,IACF,EACC1iD,EAAM,aACLsZ,EAAA,IAAC,KAAE,UAAU,cAAe,WAAM,YAAY,EAElD,GAECA,MAAA,OAAI,UAAU,MACb,SAACA,MAAA,KAAE,UAAU,UAAW,SAAMtZ,EAAA,OAAQ,GACxC,EAIFsa,OAAC,MAAI,WAAU,uCACZ,UAAAta,EAAM,SACLsa,OAAC,MAAI,WAAU,0BACb,UAAChB,MAAA01C,GAAA,CAAS,KAAM,EAAI,SACnB,OAAM,UAAAhvD,EAAM,QAAQ,QAAQ,KAAM,GAAG,EAAE,GAC1C,EAEDA,EAAM,YACJsa,OAAA,OAAI,UAAU,0BACb,UAAChB,MAAAytB,GAAA,CAAO,KAAM,EAAI,SACjB,OAAM,UAAA/mC,EAAM,WAAW,QAAQ,KAAM,GAAG,EAAE,GAC7C,GAEJ,GACF,QAGC,MAAI,WAAU,eACb,SAACsa,EAAA,YAAI,UAAU,oCACb,UAACA,OAAA,QAAK,UAAU,yBAAyB,wBAC3BisF,GAAO,IAAI,KAAKvmG,EAAM,SAAS,EAAG,sBAAuB,CAAE,OAAQ8nG,GAAI,GACrF,EACCxuF,EAAA,YAAK,UAAU,mCAAmC,SAEnD,6BACF,CACF,IACF,EAEJ,GAEJ,ECjNaijH,GAA8C,CAAC,CAC1D,UAAAC,EACA,SAAAj1G,EACA,SAAAkyB,EAAW,GACX,UAAAvZ,EAAY,EACd,IAAM,CACJ,KAAM,CAACu8F,EAAcC,CAAe,EAAI79G,WAAS,EAAK,EAChD,CAAC89G,EAAcC,CAAe,EAAI/9G,WAAS,CAAC,EAC5C,CAACg+G,EAAWC,CAAY,EAAIj+G,WAAS,EAAK,EAC1C,CAACk+G,EAAQC,CAAS,EAAIn+G,WAAS,CAAC,EAChC4yB,EAAexD,SAAuB,IAAI,EAE1CgvF,EAAgB,SAAY,CAChC,GAAI,EAAAxjF,GAAYgjF,GAEhB,CAAAC,EAAgB,EAAI,EAChB,IACF,MAAMF,EAAU,SAChB,CACAE,EAAgB,EAAK,EACrBE,EAAgB,CAAC,EACjBE,EAAa,EAAK,CACpB,IAII/8F,EAAoBj3C,GAAwB,CAChD,GAAI2wD,GAAYgjF,EAAc,OAE9B,MAAMhsI,EAAYghD,EAAa,QAC3B,CAAChhD,GAAaA,EAAU,UAAY,IAExCusI,EAAUl0I,EAAE,QAAQ,CAAC,EAAE,OAAO,EAC9Bg0I,EAAa,EAAI,IAGbI,EAAmBp0I,GAAwB,CAC3C,IAAC+zI,GAAapjF,GAAYgjF,EAAc,OAE5C,MAAMhsI,EAAYghD,EAAa,QAC/B,GAAI,CAAChhD,GAAaA,EAAU,UAAY,EAAG,CACzCqsI,EAAa,EAAK,EAClBF,EAAgB,CAAC,EACjB,MACF,CAEA,MAAMO,EAAWr0I,EAAE,QAAQ,CAAC,EAAE,QACxBgqD,EAAW,KAAK,IAAI,EAAGqqF,EAAWJ,CAAM,EAGxCK,EAAa,KAAK,IAAItqF,EAAW,GAAK5S,EAAY,GAAG,EAC3D08F,EAAgBQ,CAAU,EAGtBtqF,EAAW,IACbhqD,EAAE,eAAe,CACnB,EAGIk3C,EAAiB,IAAM,CACvB,CAAC68F,GAAapjF,GAAYgjF,IAE1BE,GAAgBz8F,EACJ+8F,KAEdL,EAAgB,CAAC,EACjBE,EAAa,EAAK,GACpB,EAIIO,EAAmBv0I,GAAwB,CAC/C,GAAI2wD,GAAYgjF,EAAc,OAE9B,MAAMhsI,EAAYghD,EAAa,QAC3B,CAAChhD,GAAaA,EAAU,UAAY,IAExCusI,EAAUl0I,EAAE,OAAO,EACnBg0I,EAAa,EAAI,IAGbtqF,EAAmB1pD,GAAwB,CAC3C,IAAC+zI,GAAapjF,GAAYgjF,EAAc,OAE5C,MAAMhsI,EAAYghD,EAAa,QAC/B,GAAI,CAAChhD,GAAaA,EAAU,UAAY,EAAG,CACzCqsI,EAAa,EAAK,EAClBF,EAAgB,CAAC,EACjB,MACF,CAEA,MAAM9pF,EAAW,KAAK,IAAI,EAAGhqD,EAAE,QAAUi0I,CAAM,EACzCK,EAAa,KAAK,IAAItqF,EAAW,GAAK5S,EAAY,GAAG,EAC3D08F,EAAgBQ,CAAU,GAGtBxqF,EAAgB,IAAM,CACtB,CAACiqF,GAAapjF,GAAYgjF,IAE1BE,GAAgBz8F,EACJ+8F,KAEdL,EAAgB,CAAC,EACjBE,EAAa,EAAK,GACpB,EAIFh+G,YAAU,IAAM,CACd,GAAI+9G,EAAW,CACP,MAAAS,EAAyBx0I,GAAkB,CAC/C,GAAI,CAAC+zI,EAAW,OAChB,MAAM/pF,EAAW,KAAK,IAAI,EAAGhqD,EAAE,QAAUi0I,CAAM,EACzCK,EAAa,KAAK,IAAItqF,EAAW,GAAK5S,EAAY,GAAG,EAC3D08F,EAAgBQ,CAAU,GAGtBG,EAAsB,IAAM,CAC5BZ,GAAgBz8F,EACJ+8F,KAEdL,EAAgB,CAAC,EACjBE,EAAa,EAAK,EACpB,EAGO,iCAAiB,YAAaQ,CAAqB,EACnD,0BAAiB,UAAWC,CAAmB,EAEjD,IAAM,CACF,6BAAoB,YAAaD,CAAqB,EACtD,6BAAoB,UAAWC,CAAmB,EAE/D,GACC,CAACV,EAAWE,EAAQJ,EAAcz8F,CAAS,CAAC,EAE/C,MAAMs9F,EAAgBb,GAAgBz8F,EAChCu9F,EAAW,KAAK,IAAId,EAAez8F,EAAW,CAAC,EAGnD,OAAA5lB,EAAA,KAAC,OACC,IAAKm3B,EACL,UAAU,gCACV,aAAc1R,EACd,YAAam9F,EACb,WAAYl9F,EACZ,YAAaq9F,EACb,YAAa7qF,EACb,UAAWI,EACX,MAAO,CACL,UAAW,cAAc,KAAK,IAAI+pF,EAAe,GAAK,EAAE,CAAC,MACzD,WAAYE,EAAY,OAAS,yBACnC,EAGA,UAACvjH,EAAA,IAAA+iH,GAAA,CACG,aAAaI,IACbnjH,EAAA,IAAC8mB,GAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,GAAI,EAC9B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAE,EAC5B,KAAM,CAAE,QAAS,EAAG,EAAG,GAAI,EAC3B,UAAU,2EACV,MAAO,CACL,UAAW,eAAe,KAAK,IAAI,EAAG,GAAKu8F,CAAY,CAAC,KAC1D,EAEA,SAAAriH,EAAA,KAAC,MAAI,WAAU,6GACb,UAAAhB,EAAA,IAACokH,GAAA,CACC,UAAW,+BACTjB,EAAe,eAAiB,EAClC,IAAIe,EAAgB,iBAAmB,gBAAgB,GACvD,KAAM,GACN,MAAO,CACL,UAAW,UAAUC,EAAW,GAAG,MACrC,EACF,EACCnkH,EAAA,YAAK,UAAW,yCACfkkH,EAAgB,iBAAmB,gBACrC,GACG,SACGf,EAAA,mBACAe,EACE,2BACA,wBAER,GACF,IAGN,EAGClkH,MAAA,OAAI,UAAU,aACZ,SAAAiO,CACH,KAGN,ECrLMo2G,GAA6B,IAAM,CACjC,MAAE,MAAAnxH,GAAUM,KACZowB,EAAWC,KACX,CAACq/C,EAASwrB,CAAU,EAAInpF,EAAA,SAA2B,CAAE,GACrD,CAACopF,EAASC,CAAU,EAAIrpF,WAAS,EAAI,EACrC,CAACv2B,EAAOu0G,CAAQ,EAAIh+E,WAAwB,IAAI,EAChD,CAACq0E,EAAQ0qC,CAAS,EAAI/+G,WAA0C,KAAK,EACrE,CAAC4gG,EAAWC,CAAY,EAAI7gG,WAAmC,SAAS,EACxE,CAACg/G,EAAgBC,CAAiB,EAAIj/G,WAAiB,CAAC,EACxD,CAACk/G,EAAeC,CAAgB,EAAIn/G,WAAgC,IAAI,EACxE,CAACo/G,EAAeC,CAAgB,EAAIr/G,WAAiB,CAAC,EAG5DC,YAAU,IAAM,CACC,IAAI,gBAAgBoe,EAAS,MAAM,EAC1B,IAAI,KAAK,IAEhB,eACfwiF,EAAa,YAAY,EAEft2G,EAAA,0BAA0BO,GAAY,aAAc,CAAE,MAAO,QAAS,OAAQ,YAAa,EACvG,EACC,CAACuzB,CAAQ,CAAC,EAGP,MAAAqrE,EAAc,MAAO41B,EAAsB,KAAU,CACrD,IACFthC,EAAS,IAAI,EACP,MAAA1uG,EAAO,MAAM+uG,KAGnB,GAAIihC,GAAuBN,EAAiB,GAAK1vI,EAAK,OAAS0vI,EAAgB,CACvE,MAAAO,EAAWjwI,EAAK,OAAS0vI,EACzBrxH,EAAA,CACJ,MAAO,+BACP,YAAa,GAAG4xH,CAAQ,YAAYA,EAAW,EAAI,IAAM,EAAE,gBAAgBA,EAAW,EAAI,IAAM,EAAE,WAAWA,EAAW,EAAI,IAAM,EAAE,GACpI,SAAU,IACX,CACH,CAEAp2B,EAAW75G,CAAI,EACf2vI,EAAkB3vI,EAAK,MAAM,EAGnBib,EAAA,0BAA0BO,GAAY,KAAM,CACpD,aAAc,UACd,cAAexb,EAAK,OACrB,QACM6U,EAAK,CACJ,cAAM,yCAA0CA,CAAG,EAC3D65F,EAAS,8DAA8D,EAG7DzzF,EAAA,0BAA0BO,GAAY,KAAM,CACpD,aAAc,UACd,MAAO,cACR,SACD,CACAu+F,EAAW,EAAK,CAClB,GAGFppF,YAAU,IAAM,CACFypF,GACd,EAAG,CAAE,GAGLzpF,YAAU,IAAM,CACR,MAAAu/G,EAAW,YAAY,IAAM,CAC7B5e,IAAc,YAChB,QAAQ,IAAI,gEAAgE,EAC5ElX,EAAY,EAAI,EAClB,EACC,IAAa,EAET,UAAM,cAAc81B,CAAQ,GAClC,CAAC5e,EAAWoe,CAAc,CAAC,EAG9B,MAAMZ,EAAgB,SAAY,CAChC,MAAM10B,EAAY,EAGZ/7F,EAAA,CACJ,MAAO,uBACP,YAAa,+CACb,SAAU,IACX,EAGSpD,EAAA,0BAA0BO,GAAY,KAAM,CACpD,aAAc,UACd,OAAQ,iBACT,GAIG20H,EAAyB3gG,GAA6B,CAC1DqqE,EAA0Bu2B,GAAA,CAAC5gG,EAAU,GAAG4gG,CAAW,CAAC,EACpD7e,EAAa,SAAS,EAGhBlzG,EAAA,CACJ,MAAO,4BACP,YAAa,wDACb,SAAU,IACX,EAGSpD,EAAA,0BAA0BO,GAAY,aAAc,CAC5D,MAAO,YACP,aAAcg0B,EAAS,KACxB,GAIG6gG,EAAkBhiD,EAAQ,OAAgBx8E,GAAA,OAE1C,QAAAlT,EAAAkT,EAAM,aAAN,YAAAlT,EAAkB,UAAW,WACxB,GAILomG,IAAW,MAAc,GACtBlzF,EAAM,OAASkzF,CAAA,CACvB,EAED,cACGqtB,GACC,WAAAjnG,EAAA,IAACknG,GAAA,CACC,MAAM,wBACN,SAAS,oDACX,EAEAlnG,EAAA,IAAC8mB,GAAO,IAAP,CACC,QAAQ,SACR,QAAQ,UACR,UAAU,6BAEV,SAAA9lB,EAAA,KAACk3E,GAAA,CACC,MAAOiuB,EACP,cAAgBtyH,GAAU,CACxBuyH,EAAavyH,CAAiC,EAC1CA,IAAU,cACFic,EAAA,0BAA0BO,GAAY,aAAc,CAAE,MAAO,QAAS,OAAQ,YAAa,CAEzG,EACA,UAAU,SAEV,UAAC2Q,OAAAo3E,GAAA,CAAS,UAAU,+BAClB,UAAAp3E,EAAA,KAACs3E,GAAY,OAAM,UAAU,UAAU,0BACrC,UAACt4E,MAAA41C,GAAA,CAAO,KAAM,EAAI,GAClB51C,MAAC,QAAK,SAAO,aACf,EACCgB,EAAA,KAAAs3E,GAAA,CAAY,MAAM,aAAa,UAAU,0BACxC,UAACt4E,MAAAmlH,GAAA,CAAc,KAAM,EAAI,GACzBnlH,MAAC,QAAK,SAAU,gBAClB,GACF,EAECA,EAAA,IAAAw4E,GAAA,CAAY,MAAM,UAAU,UAAU,SACrC,SAAAx4E,EAAA,IAACijH,GAAA,CACC,UAAWU,EACX,SAAUh1B,EAET,SACCA,EAAA3uF,EAAA,IAAC,MAAI,WAAU,wCACb,SAACA,EAAA,IAAA2sB,GAAA,CAAQ,UAAU,mCAAoC,GACzD,EACE39C,EACDgyB,OAAA,OAAI,UAAU,6DACb,UAAChB,EAAA,SAAE,UAAU,oBAAqB,SAAMhxB,EAAA,EACxCgxB,MAAC8sB,GAAO,QAAS,IAAM,OAAO,SAAS,SAAU,SAAS,eAC5D,EAIE9rB,OAAA0rB,EAAA,oBAAC1rB,OAAA,OAAI,UAAU,yCACb,UAACA,OAAA,OAAI,UAAU,0BACb,UAAChB,MAAAolH,GAAA,CAAO,KAAM,EAAI,GACjBplH,EAAA,YAAK,UAAU,sBAAsB,SAAQ,cAChD,EACAgB,OAAC,MAAI,WAAU,aACb,UAAAhB,EAAA,IAAC8sB,EAAA,CACC,QAAS8sD,IAAW,MAAQ,UAAY,UACxC,KAAK,KACL,QAAS,IAAM,CAAE0qC,EAAU,KAAK,EAAGx0H,EAAU,0BAA0BO,GAAY,OAAQ,CAAE,OAAQ,MAAO,CAAG,EAChH,gBAED,EACA2P,EAAA,IAAC8sB,EAAA,CACC,QAAS8sD,IAAW,QAAU,UAAY,UAC1C,KAAK,KACL,QAAS,IAAM,CAAE0qC,EAAU,OAAO,EAAGx0H,EAAU,0BAA0BO,GAAY,OAAQ,CAAE,OAAQ,QAAS,CAAG,EACpH,kBAED,EACA2P,EAAA,IAAC8sB,EAAA,CACC,QAAS8sD,IAAW,cAAgB,UAAY,UAChD,KAAK,KACL,QAAS,IAAM,CAAE0qC,EAAU,aAAa,EAAGx0H,EAAU,0BAA0BO,GAAY,OAAQ,CAAE,OAAQ,cAAe,CAAG,EAChI,uBAED,GACF,GACF,EAGC60H,EAAgB,OAAS,EACxBllH,EAAA,IAAC8+G,GAAA,CACC,QAASoG,EACT,aAAex+H,GAAU,CACvB,MAAMuI,EAAQi2H,EAAgB,aAAe11I,EAAE,KAAOkX,EAAM,EAAE,EAC9Dk+H,EAAiB31H,CAAK,EACtBy1H,EAAiBh+H,CAAK,EACZoJ,EAAA,0BAA0BO,GAAY,KAAM,CAAE,aAAc,QAAS,SAAU3J,EAAM,GAAI,CACrG,EAGF,EAAAsa,EAAA,KAAC,MAAI,WAAU,6DACb,UAAChB,EAAA,SAAE,UAAU,qBAAqB,SAAwC,6CAC1EA,MAAC8sB,EAAO,SAAS,IAAM,CAAYh9B,EAAA,0BAA0BO,GAAY,aAAc,CAAE,MAAO,QAAS,OAAQ,cAAe,EAAG+1G,EAAa,YAAY,GAAM,SAA6B,mCACjM,GAEJ,IAGN,EAEApmG,MAACw4E,GAAY,OAAM,aAAa,UAAU,SACxC,SAACx4E,MAAAg8G,GAAA,CAAiB,SAAUgJ,CAAA,CAAuB,CACrD,IACF,EACF,EAGCP,GACCzkH,EAAA,IAACsiH,GAAA,CACC,MAAOmC,EACP,QAASS,EACT,aAAcP,EACd,QAAS,IAAMD,EAAiB,IAAI,EACpC,WAAaz1H,GAAU,CACrB21H,EAAiB31H,CAAK,EACLy1H,EAAAQ,EAAgBj2H,CAAK,CAAC,CACzC,EACF,QAIDsmD,GAAiB,GACpB,GAEJ,EC1QM8vE,GAA8B,IAAM,CACxC,MAAM3hG,EAAWC,KACX,CAAC2hG,EAAQC,CAAS,EAAIhgH,EAAA,SAA4B,CAAE,GACpD,CAACopF,EAASC,CAAU,EAAIrpF,WAAS,EAAI,EACrC,CAACigH,EAAeC,CAAgB,EAAIlgH,WAAiC,IAAI,EACzE,CAACo/G,EAAeC,CAAgB,EAAIr/G,WAAiB,EAAE,EAGvDmgH,EAAajgG,cAAY,SAAY,CACrC,IAEF,MAAMkgG,EAA+B,GAG/B71B,EAAW,OAAO,SAAS,SAAS,SAAS,WAAW,EAC1D,mCACA,qBAGJ,QAAS/+G,EAAI,EAAGA,GAAK,IAAKA,IACxB40I,EAAU,KAAK,CACb,GAAI,UAAU50I,CAAC,GACf,KAAM,GAAG++G,CAAQ,WAAW/+G,CAAC,OAC7B,OAAQ,GACT,EAGH,QAAQ,IAAI,uBAAuB40I,EAAU,MAAM,kBAAkB,EACrEJ,EAAUI,CAAS,EACnB/2B,EAAW,EAAK,EAGhB9+F,EAAU,gBAAgB,qBAAsB,CAC9C,YAAa61H,EAAU,OACvB,UAAW,IAAI,KAAK,EAAE,YAAY,EACnC,QAEM32I,EAAO,CACN,cAAM,wCAAyCA,CAAK,EAC5D4/G,EAAW,EAAK,CAClB,CACF,EAAG,CAAE,GAELppF,YAAU,IAAM,CACHkgH,GAAA,EACV,CAACA,CAAU,CAAC,EA4DT,MAAAE,EAAiB,CAACjzC,EAAwB1jF,IAAkB,CAChEw2H,EAAiB9yC,CAAK,EACtBiyC,EAAiB31H,CAAK,EAGtBa,EAAU,wBAAwBO,GAAY,KAAM,mBAAoBsiF,EAAM,GAAI,CAChF,YAAa1jF,EACb,UAAW,IAAI,KAAK,EAAE,YAAY,EACnC,GAIG42H,EAAkB,IAAM,CAC5BJ,EAAiB,IAAI,EACrBb,EAAiB,EAAE,GAIfkB,EAAiBz0H,GAA+B,CACpD,GAAIszH,IAAkB,GAAI,OAE1B,IAAIoB,EAAWpB,EACXtzH,IAAc,OAChB00H,EAAWpB,EAAgB,EAAIA,EAAgB,EAAIW,EAAO,OAAS,EAEnES,EAAWpB,EAAgBW,EAAO,OAAS,EAAIX,EAAgB,EAAI,EAGrEC,EAAiBmB,CAAQ,EACRN,EAAAH,EAAOS,CAAQ,CAAC,GAInCvgH,YAAU,IAAM,CACR,MAAAwgH,EAAkBx2I,GAAqB,CAC3C,GAAKg2I,EAEL,OAAQh2I,EAAE,IAAK,CACb,IAAK,SACaq2I,IAChB,MACF,IAAK,YACHC,EAAc,MAAM,EACpB,MACF,IAAK,aACHA,EAAc,MAAM,EACpB,KACJ,GAGK,+BAAiB,UAAWE,CAAc,EAC1C,IAAM,OAAO,oBAAoB,UAAWA,CAAc,GAChE,CAACR,EAAeb,CAAa,CAAC,EAGjC,MAAM3F,EAAe,CACnB,OAAQ,CAAE,QAAS,EAAG,EAAG,EAAG,EAC5B,QAAUjuI,IAAe,CACvB,QAAS,EACT,EAAG,EACH,WAAY,CACV,MAAOA,EAAI,IACX,SAAU,EACZ,GACF,EAGIqwF,EAAWigD,GAAa,CAC5B,aAAc,IAAM,CACdmE,GACFM,EAAc,MAAM,CAExB,EACA,cAAe,IAAM,CACfN,GACFM,EAAc,MAAM,CAExB,EACA,WAAY,GACZ,qBAAsB,GACtB,MAAO,GACP,cAAe,IAChB,EAED,OACG9lH,EAAA,IAAA+lB,GAAA,CACC,SAAC/kB,OAAA,OAAI,UAAU,4DAEb,UAAChB,EAAA,WAAI,UAAU,2EACb,SAACA,EAAA,WAAI,UAAU,8BACb,SAAAgB,OAAC,MAAI,WAAU,oCACb,UAACA,OAAA,OAAI,UAAU,0BACb,UAAAA,EAAA,KAAC8rB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAAS,IAAMpJ,EAAS,EAAE,EAC1B,UAAU,eACX,cAEE1jB,EAAA,YAAK,UAAU,UAAU,SAAM,YAClC,SACC,MACC,WAACA,EAAA,UAAG,UAAU,oCAAoC,SAAkB,uBACnEA,EAAA,SAAE,UAAU,iBAAiB,SAAgC,sCAChE,GACF,EACAgB,OAAC,MAAI,WAAU,yBACZ,UAAOskH,EAAA,OAAO,WACjB,EACF,EACF,GACF,EAGAtlH,MAAC,OAAI,UAAU,8BACZ,WACEA,MAAA,OAAI,UAAU,4CACb,SAACA,EAAA,WAAI,UAAU,2EAA4E,GAC7F,EAEAA,EAAA,IAAC,MAAI,WAAU,uDACZ,SAAOslH,EAAA,IAAI,CAAC3yC,EAAO1jF,IAClB+R,EAAA,KAAC8lB,GAAO,IAAP,CAEC,OAAQ73B,EACR,SAAU+vH,EACV,QAAQ,SACR,QAAQ,UACR,UAAU,yEACV,QAAS,IAAM4G,EAAejzC,EAAO1jF,CAAK,EAE1C,UAAA+Q,EAAA,IAAC,OACC,IAAK2yE,EAAM,KACX,IAAK,oBAAoB1jF,EAAQ,CAAC,GAClC,UAAU,qFACV,QAASA,EAAQ,EAAI,QAAU,OAC/B,OAAQ,IAAM,CACZs2H,KAAkB/iC,EAAK,IAAI1xG,GACzBA,EAAE,KAAO6hG,EAAM,GAAK,CAAE,GAAG7hG,EAAG,OAAQ,IAASA,CAAA,CAC9C,CACH,EACA,QAAUtB,GAAM,CACd,QAAQ,KAAK,2BAA2BmjG,EAAM,IAAI,EAAE,EAEpD,MAAMl4F,EAASjL,EAAE,OACjBiL,EAAO,MAAM,QAAU,OAEjB,MAAAtD,EAAYsD,EAAO,QAAQ,gBAAgB,EAC7CtD,IACDA,EAA0B,MAAM,QAAU,OAE/C,EACF,QACC,MAAI,WAAU,yIACb,SAAC6pB,EAAA,aAAK,UAAU,iCAAiC,mBACxC/R,EAAQ,GACjB,CACF,KAlCK0jF,EAAM,GAoCd,EACH,CAEJ,GAGA3yE,MAAC+iH,IACE,SACCyC,GAAAxkH,EAAA,KAAC8lB,GAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAE,EACtB,QAAS,CAAE,QAAS,CAAE,EACtB,KAAM,CAAE,QAAS,CAAE,EACnB,UAAU,kEACV,QAAS++F,EACR,GAAGzkD,EAGJ,UAAApgE,EAAA,KAAC8rB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,wEACV,QAAS+4F,EAET,UAAC7lH,EAAA,YAAK,UAAU,UAAU,SAAM,WAC/BA,EAAA,YAAK,UAAU,WAAW,SAAO,OACpC,EAGAA,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,0FACV,QAAUt9C,GAAM,CACdA,EAAE,gBAAgB,EAClBs2I,EAAc,MAAM,CACtB,EACA,MAAM,uCACP,aAED,EAEA9lH,EAAA,IAAC8sB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,2FACV,QAAUt9C,GAAM,CACdA,EAAE,gBAAgB,EAClBs2I,EAAc,MAAM,CACtB,EACA,MAAM,qCACP,aAED,EAGA9kH,OAAC,MAAI,WAAU,sGACZ,UAAgB2jH,EAAA,EAAE,MAAIW,EAAO,QAChC,EAGCtlH,EAAA,WAAI,UAAU,sHAAsH,SAErI,4BAGAA,EAAA,IAAC8mB,GAAO,IAAP,CAEC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAE,EAClC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAE,EAChC,KAAM,CAAE,MAAO,GAAK,QAAS,CAAE,EAC/B,IAAK0+F,EAAc,KACnB,IAAK,oBAAoBb,EAAgB,CAAC,GAC1C,UAAU,uCACV,QAAUn1I,GAAMA,EAAE,gBAAgB,GAP7Bg2I,EAAc,EAQrB,KAGN,EACF,EACF,EAEJ,EC7VMS,GAAsB,IAAM,CAChC,MAAMviG,EAAWC,KAEXuiG,EAAsBC,GAAwB,CAElDr2H,EAAU,wBAAwBO,GAAY,KAAM,UAAW81H,EAAa,CAC1E,aAAcA,EACd,UAAW,IAAI,KAAK,EAAE,YAAY,EACnC,EAGQziG,EAAA,IAAIyiG,CAAW,EAAE,GAG5B,OACGnmH,EAAA,IAAA+lB,GAAA,CACC,SAAC/kB,OAAA,OAAI,UAAU,sCAEb,UAAAhB,MAAC,OAAI,UAAU,uCACb,SAACgB,EAAA,YAAI,UAAU,8BACb,UAAAA,EAAA,KAAC8rB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,OACV,QAAS,IAAMpJ,EAAS,EAAE,EAE1B,UAAC1jB,MAAAi6E,GAAA,CAAU,UAAU,SAAU,GAC9Bj6E,EAAA,YAAK,UAAU,UAAU,SAAM,YAClC,EACCA,EAAA,UAAG,UAAU,wBAAwB,SAAQ,cAChD,CACF,GAGAgB,OAAC,MAAI,WAAU,mBAAmB,cAChCA,OAAC,MAAI,WAAU,yBAEb,UAAAA,EAAA,KAAC,OACC,UAAU,wHACV,QAAS,IAAMklH,EAAmB,WAAW,EAE7C,UAAAlmH,EAAA,IAAC,MAAI,WAAU,4BACb,SAAAA,MAAC,MAAI,WAAU,oDACb,SAAAA,EAAA,IAAC41C,GAAO,WAAU,yBAA0B,EAC9C,GACF,EACA50C,OAAC,MAAI,WAAU,MACb,UAAChB,EAAA,UAAG,UAAU,sBAAsB,SAAuB,4BAC1DA,EAAA,SAAE,UAAU,qBAAqB,SAElC,uEACF,GACF,EAGAgB,EAAA,KAAC,OACC,UAAU,wHACV,QAAS,IAAMklH,EAAmB,YAAY,EAE9C,UAAAlmH,EAAA,IAAC,MAAI,WAAU,4BACb,SAAAA,MAAC,MAAI,WAAU,oDACb,SAAAA,EAAA,IAAComH,GAAQ,WAAU,yBAA0B,EAC/C,GACF,EACAplH,OAAC,MAAI,WAAU,MACb,UAAChB,EAAA,UAAG,UAAU,sBAAsB,SAAkB,uBACrDA,EAAA,SAAE,UAAU,qBAAqB,SAElC,0EACF,GACF,GACF,GACF,QAGCu1C,GAAiB,IACpB,EACF,EAEJ,ECxBa8wE,GAAgB,IAAM,CAC7B,IACF,MAAM7nI,EAAMyR,KACZ,GAAI,CAACzR,EAAK,CACR,QAAQ,KAAK,0DAA2D,EACxE,MACF,CACM,MAAAsR,EAAYT,GAAa7Q,CAAG,EAClC,GAAI,CAACsR,EAAW,CACd,QAAQ,KAAK,mEAAmE,EAChF,MACF,CAGA5f,GAAA,yBAAAyf,CAAA,mCAAA22H,EAAA,EAA6B,gBAAA32H,CAAA,gBAAK,CAAC,CAAE,SAAAA,KAAe,CAClDA,EAASG,EAAW,mBAAoB,CACtC,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,MAAO,GACR,EACD,QAAQ,IAAI,0CAA0C,EACvD,QACM9gB,EAAO,CACN,cAAM,iEAAkEA,CAAK,CACvF,CACF,ECnCau3I,GAAoB,IAAM,CACjC,IACE,IAAC,OAAO,KAAM,CAChB,QAAQ,KAAK,uCAAwC,EACrD,MACF,CAGO,YAAK,QAAS,aAAc,CACjC,eAAgB,QAChB,YAAa,aACb,WAAY,GACZ,UAAW,IAAI,KAAK,EAAE,YAAY,EACnC,EAED,QAAQ,IAAI,+CAA+C,QACpDv3I,EAAO,CACN,cAAM,6DAAgEA,CAAK,CACrF,CACF,ECvDaw3I,GAA0B,SAAyC,CAC9E,MAAMrmD,EAA8B,GAEhC,IAEI,MAAAsmD,EAAY,MAAMj3H,KAQxB,GAPA2wE,EAAQ,KAAK,CACX,QAASsmD,EACT,QAASA,EACL,yDACA,+DACL,EAEG,CAACA,EACI,OAAAtmD,EAIT,MAAM3hF,EAAMyR,KACNy2H,EAAwB,CAAC,CAACloI,EAQhC,GAPA2hF,EAAQ,KAAK,CACX,QAASumD,EACT,QAASA,EACL,uCACA,gCACL,EAEG,CAACA,EACI,OAAAvmD,EAIT,MAAMnhF,EAASR,EAAMA,EAAI,QAAU,GAC7BmoI,EAAmB,CAAC,CAAC3nI,EAAO,cAClCmhF,EAAQ,KAAK,CACX,QAASwmD,EACT,QAASA,EACL,8BACA,mDACJ,QAAS,CACP,cAAe3nI,EAAO,eAAiB,aACvC,OAAQA,EAAO,OAAS,YAAc,gBACtC,UAAWA,EAAO,WAAa,YACjC,EACD,EAGD,IAAI8Q,EAAY,KACZ,IACEtR,EACFsR,EAAYT,GAAa7Q,CAAG,EAE5B,QAAQ,KAAK,0DAA2D,EAE1E2hF,EAAQ,KAAK,CACX,QAAS,CAAC,CAACrwE,EACX,QAAWA,EACP,yCACA,wCACL,QACM9gB,EAAO,CACd,OAAAmxF,EAAQ,KAAK,CACX,QAAS,GACT,QAAS,8CACT,QAAS,CAAE,MAAOnxF,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAE,EAC1E,EACMmxF,CACT,CAGA,MAAM12E,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EAClCm9H,EAAmBn9H,EAAI,aAAa,IAAI,gBAAgB,EACxDo9H,EAAep9H,EAAI,aAAa,IAAI,YAAY,EAChDq9H,EAAcr9H,EAAI,aAAa,IAAI,WAAW,EAEpD02E,EAAQ,KAAK,CACX,QAASymD,GAAoBC,GAAgBC,EAC7C,QAAUF,GAAoBC,GAAgBC,EAC1C,0CACA,sCACJ,QAAS,CACP,eAAgBF,EAAmB,UAAY,SAC/C,WAAYC,EAAe,UAAY,SACvC,UAAWC,EAAc,UAAY,QACvC,EACD,EAGG,IAEFr3H,GAA8BK,EAAW,EAAI,EAC7CqwE,EAAQ,KAAK,CACX,QAAS,GACT,QAAS,+CACV,QACMnxF,EAAO,CACdmxF,EAAQ,KAAK,CACX,QAAS,GACT,QAAS,wDACT,QAAS,CAAE,MAAOnxF,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAE,EAC1E,CACH,CAGM,MAAA+3I,EAAU,OAAO,OAAO,MAAS,WACvC5mD,EAAQ,KAAK,CACX,QAAS4mD,EACT,QAASA,EACL,kCACA,wCACL,EAGD,MAAMC,EAAoBC,KAC1B9mD,EAAQ,KAAK,CACX,QAAS6mD,EAAkB,SAAW,EACtC,QAASA,EAAkB,SAAW,EAClC,mCACA,GAAGA,EAAkB,MAAM,uCAC/B,QAAS,CAAE,SAAUA,CAAkB,EACxC,QAEMh4I,EAAO,CACdmxF,EAAQ,KAAK,CACX,QAAS,GACT,QAAS,4BACT,QAAS,CAAE,MAAOnxF,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAE,EAC1E,CACH,CAEO,OAAAmxF,CACT,EAKA,SAAS8mD,IAA6B,CACpC,MAAMC,EAAqB,IAGvB,SAAS,eAAe,kBAAkB,GAC1C,SAAS,eAAe,iBAAiB,GACzC,SAAS,eAAe,gBAAgB,IAC1CA,EAAS,KAAK,gCAAgC,EAI5C,IACF,SAAS,OAAS,qCACd,SAAS,OAAO,QAAQ,aAAa,IAAM,IAC7CA,EAAS,KAAK,0BAA0B,OAEhC,CACVA,EAAS,KAAK,iCAAiC,CACjD,CAGI,IACW,qBAAQ,OAAQ,MAAM,EACnC,aAAa,WAAW,MAAM,OACpB,CACVA,EAAS,KAAK,mCAAmC,CACnD,CAoBA,MAAMC,EAAY,EAGZC,EAAc,OAAe,mBAAsB,OAAe,wBAExE,GAAIA,EACE,IACFA,EAAUD,EAAW,IACnB,IAAM,CAAC,EACP,IAAM,CAAED,EAAS,KAAK,4BAA4B,CAAG,QAE7C,CAEZ,CAGK,OAAAA,CACT,CAKO,MAAMG,GAAuB,SAAY,CAC9C,QAAQ,MAAM,kCAAkC,EAChD,QAAQ,IAAI,4BAA4B,EAElC,MAAAlnD,EAAU,MAAMqmD,KAEtB,IAAIrsC,EAAe,EACf//D,EAAe,EAEX,OAAA+lD,EAAA,QAAQ,CAAC9/E,EAAQ4O,IAAU,CAC7B5O,EAAO,SACT85F,IACA,QAAQ,IAAI,KAAKlrF,EAAQ,CAAC,KAAK5O,EAAO,OAAO,EAAE,IAE/C+5B,IACA,QAAQ,KAAK,KAAKnrB,EAAQ,CAAC,KAAK5O,EAAO,OAAO,EAAE,GAG9CA,EAAO,SACD,YAAI,aAAcA,EAAO,OAAO,CAC1C,CACD,EAED,QAAQ,IAAI;AAAA,YAAe85F,CAAY,YAAY//D,CAAY,YAAY,EAEvEA,EAAe,IACjB,QAAQ,IAAI;AAAA,iBAAoB,EAChC,QAAQ,IAAI,wDAAwD,EACpE,QAAQ,IAAI,sEAAuE,EACnF,QAAQ,IAAI,2CAA2C,EACvD,QAAQ,IAAI,mCAAmC,EAC/C,QAAQ,IAAI,6EAA6E,GAG3F,QAAQ,SAAS,EAEV,CACL,QAAA+lD,EACA,QAAS,CACP,MAAOA,EAAQ,OACf,QAASga,EACT,QAAS//D,CACX,EAEJ,EC/PA,SAAwBktG,IAAoB,CAC1C,KAAM,CAACC,EAAUC,CAAW,EAAIjiH,EAAA,SAAmB,CAAE,GAC/C,CAACkiH,EAAWC,CAAY,EAAIniH,WAAiB,UAAU,EACvD,CAACoiH,EAAWC,CAAY,EAAIriH,WAAiB,EAAE,EAC/C,CAACsiH,EAAmBC,CAAoB,EAAIviH,WAAc,IAAI,EAC9D,CAACwiH,EAAmBC,CAAoB,EAAIziH,WAAkB,EAAK,EAGzEC,YAAU,IAAM,CACd,MAAM/b,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EAClCsE,EAAS,GAEXtE,EAAI,aAAa,IAAI,gBAAgB,GACvCsE,EAAO,KAAK,qBAAqB,EAG/BtE,EAAI,aAAa,IAAI,WAAW,GAClCsE,EAAO,KAAK,aAAa,EAGvBtE,EAAI,aAAa,IAAI,YAAY,GACnCsE,EAAO,KAAK,iBAAiB,EAG/B65H,EAAa75H,EAAO,KAAK,IAAI,GAAK,kCAAkC,EAGpE4B,EAAS,qBAAqB,CAChC,EAAG,CAAE,GAEC,MAAAA,EAAYxgB,GAAoB,CACpCq4I,EAAoBhlC,GAAA,CAAC,GAAGA,EAAM,GAAG,IAAI,KAAK,EAAE,mBAAmB,CAAC,KAAKrzG,CAAO,EAAE,CAAC,GAG3E84I,EAAsB,IAAM,CAC5BR,IAAc,YACFpB,KACd12H,EAAS,mCAAmC,IAE1B42H,KAClB52H,EAAS,+BAA+B,EAC1C,EAGIu4H,EAAqB,IAAM,CACrBp4H,EAAA,cAAc,cAAe,kBAAkB,EACzDH,EAAS,mDAAmD,EAGxD83H,IAAc,QAAU,OAAO,OAC1B,YAAK,QAAS,YAAa,CAChC,WAAY,mBACZ,UAAW,cACX,WAAY,GACb,EACD93H,EAAS,qCAAqC,EAChD,EAGIw4H,EAA+B,IAAM,CAC/Br4H,EAAA,gBAAgBO,GAAY,oBAAqB,CACzD,oBAAqB,EACrB,gBAAiB,IAAI,KAAK,EAAE,YAAY,EACzC,EACDV,EAAS,sCAAsC,GAG3Cy4H,EAA2B,IAAM,CAC3Bt4H,EAAA,oBAAoBO,GAAY,SAAU,CAClD,SAAU,QACV,UAAW,KACZ,EACDV,EAAS,2BAA2B,GAGhC04H,EAAwB,IAAM,CACxBv4H,EAAA,WACRM,GAAc,QACdC,GAAY,YACZ,CAAE,aAAc,qBAAsB,aAAc,YAAa,GAEnEV,EAAS,mDAAmD,GAIxD24H,EAAiB,IAAM,CAC3B,MAAM7+H,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACpCA,EAAA,aAAa,IAAI,iBAAkB,MAAM,EACzCA,EAAA,aAAa,IAAI,aAAc,MAAM,EACrCA,EAAA,aAAa,IAAI,YAAa,GAAG,EAC9B,eAAQ,aAAa,CAAC,EAAG,SAAS,MAAOA,EAAI,UAAU,EAE9Dm+H,EAAa,mDAAmD,EAChEj4H,EAAS,qCAAsC,GAI3C44H,EAAY,IAAM,CACtBf,EAAY,CAAE,GACd73H,EAAS,cAAc,GAInB64H,EAAsB,SAAY,CACtCR,EAAqB,EAAI,EACzBr4H,EAAS,4BAA4B,EAEjC,IACI,MAAA84H,EAAmB,MAAMpB,KAC/BS,EAAqBW,CAAgB,EAC5B94H,EAAA,uBAAuB84H,EAAiB,QAAQ,OAAO,YAAYA,EAAiB,QAAQ,OAAO,YAAY,QACjHz5I,EAAO,CACL2gB,EAAA,8BAA8B3gB,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAC,EAAE,SAC/F,CACAg5I,EAAqB,EAAK,CAC5B,GAIA,OAAAhnH,EAAA,KAAC,MAAI,WAAU,2DACb,UAAChB,EAAA,UAAG,UAAU,0BAA0B,SAAkB,uBAE1DgB,OAAC,MAAI,WAAU,qDACb,UAAChB,EAAA,UAAG,UAAU,qBAAqB,SAAgB,qBACnDgB,OAAC,MAAI,WAAU,UACb,UAAAA,OAAC,IAAE,WAAChB,EAAA,YAAK,UAAU,cAAc,SAAK,UAAO,IAAEynH,IAAc,WAAa,qBAAuB,sBAAqB,SACrH,IAAE,WAACznH,EAAA,YAAK,UAAU,cAAc,SAAe,oBAAO,IAAE2nH,CAAA,EAAU,GACrE,GACF,EAEA3mH,OAAC,MAAI,WAAU,OACb,UAAChB,EAAA,UAAG,UAAU,qBAAqB,SAAgB,qBACnDgB,OAAC,MAAI,WAAU,aACb,UAAAhB,EAAA,IAAC,UACC,QAAS,IAAM0nH,EAAa,UAAU,EACtC,UAAW,qBAAqBD,IAAc,WAAa,yBAA2B,aAAa,GACpG,8BAED,EACAznH,EAAA,IAAC,UACC,QAAS,IAAM0nH,EAAa,MAAM,EAClC,UAAW,qBAAqBD,IAAc,OAAS,yBAA2B,aAAa,GAChG,6BAED,GACF,EAEAznH,MAAC,MAAI,WAAU,OACb,SAAAA,EAAA,IAAC,UACC,QAASwoH,EACT,SAAUT,EACV,UAAW,4BAA4BA,EAAoB,cAAgB,iCAAiC,+CAE3G,WAEG/mH,OAAA0rB,EAAA,oBAAC1rB,OAAA,OAAI,UAAU,6CAA6C,MAAM,6BAA6B,KAAK,OAAO,QAAQ,YACjH,UAAAhB,EAAA,IAAC,SAAO,WAAU,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,YAAY,IAAI,QAC3F,OAAK,WAAU,aAAa,KAAK,eAAe,EAAE,kHAAkH,GACvK,EAAM,8BAER,EACE,2BAER,GACF,EAEC6nH,GACC7mH,EAAA,KAAC,MAAI,WAAU,qCACb,UAAChB,EAAA,UAAG,UAAU,qBAAqB,SAAuB,4BAC1DgB,OAAC,MAAI,WAAU,UACb,UAACA,OAAA,OAAI,UAAU,4BACb,UAAAhB,MAAC,QAAK,SAAc,mBACpBgB,OAAC,OAAK,WAAU,6BAA8B,UAAA6mH,EAAkB,QAAQ,QAAQ,MAAIA,EAAkB,QAAQ,OAAM,GACtH,EACA7mH,OAAC,MAAI,WAAU,uBACb,UAAAhB,MAAC,QAAK,SAAmB,wBACxBA,EAAA,YAAK,UAAW,eAAe6nH,EAAkB,QAAQ,QAAU,EAAI,eAAiB,gBAAgB,GACtG,SAAAA,EAAkB,QAAQ,QAC7B,GACF,EAECA,EAAkB,QAAQ,QAAU,SAClC,MAAI,WAAU,4BAA4B,SAE3C,8FAEJ,GACF,EAGF7mH,OAAC,MAAI,WAAU,8BACb,UAAAhB,EAAA,IAAC,UACC,QAASioH,EACT,UAAU,6DACX,qCAED,EAEAjoH,EAAA,IAAC,UACC,QAASkoH,EACT,UAAU,+DACX,6BAED,EAEAloH,EAAA,IAAC,UACC,QAASmoH,EACT,UAAU,iEACX,uCAED,EAEAnoH,EAAA,IAAC,UACC,QAASooH,EACT,UAAU,iEACX,4BAED,EAEApoH,EAAA,IAAC,UACC,QAASqoH,EACT,UAAU,2DACX,0CAED,EAEAroH,EAAA,IAAC,UACC,QAASsoH,EACT,UAAU,iEACX,4CAED,GACF,EAEAtnH,OAAC,MAAI,WAAU,gDACb,UAACA,OAAA,OAAI,UAAU,yCACb,UAAChB,EAAA,UAAG,UAAU,wBAAwB,SAAsB,2BAC5DA,EAAA,IAAC,UACC,QAASuoH,EACT,UAAU,0DACX,mBAED,GACF,EACCvoH,EAAA,WAAI,UAAU,+BACZ,SAASunH,EAAA,SAAW,EACnBvnH,EAAA,IAAC,IAAE,WAAU,uBAAuB,iCAAsB,GAEzDA,MAAA,MAAG,UAAU,YACX,SAASunH,EAAA,IAAI,CAACzkG,EAAK7zB,IAClB+Q,MAAC,KAAe,WAAU,gCAAiC,SAAA8iB,CAAA,EAAlD7zB,CAAsD,CAChE,CACH,GAEJ,GACF,EAEA+R,OAAC,MAAI,WAAU,6BACb,UAAChB,EAAA,UAAG,UAAU,gBAAgB,SAAa,kBAC3CgB,OAAC,KAAG,WAAU,mCACZ,UAAAA,OAAC,KAAG,uEAAyDhB,MAAC,QAAK,SAAoB,yBAAO,KAAC,EAC/FA,MAAC,MAAG,SAAwD,uDAC5DA,MAAC,MAAG,SAA+D,8DACnEA,MAAC,MAAG,SAAqE,0EACzEA,MAAC,MAAG,SAAuF,4FAC3FA,MAAC,MAAG,SAA2E,iFACjF,EAEAgB,OAAC,MAAI,WAAU,yDACb,UAAChB,EAAA,SAAE,UAAU,gBAAgB,SAAwB,6BACrDgB,OAAC,KAAG,WAAU,sBACZ,UAAAhB,MAAC,MAAG,SAA4D,iEAChEA,MAAC,MAAG,SAA6C,kDACjDA,MAAC,MAAG,SAAmD,wDACvDA,MAAC,MAAG,SAAoE,0EAC1E,GACF,GACF,CACF,GAEJ,CCrPA,MAAM0oH,GAAc,IAAIhnG,GAYlBinG,GAA2B,IAAM,CACrC,MAAM/kG,EAAWC,KACXH,EAAWC,KACXilG,EAAcj0F,SAAe/Q,EAAS,QAAQ,EAG9C,CAACilG,EAAmBC,CAAoB,EAAIvjH,WAAkB,IAC9C,aAAa,QAAQ,mBAAmB,IACrC,MACxB,EAGDC,YAAU,IAAM,CACd,QAAQ,IAAI,8DAAgE,EAG5E,MAAMujH,EAAsB,IAAM,CAEhC,MAAM7tI,EADc,aAAa,QAAQ,mBAAmB,IAC3B,OAG7BA,IAAa2tI,IACP,YAAI,8DAA+D3tI,CAAQ,EACnF4tI,EAAqB5tI,CAAQ,EAC/B,EAIK,wBAAiB,UAAW6tI,CAAmB,EAGhD,MAAAhE,EAAW,YAAYgE,EAAqB,GAAG,EAErD,MAAO,IAAM,CACJ,2BAAoB,UAAWA,CAAmB,EACzD,cAAchE,CAAQ,EACxB,EACC,CAAC8D,CAAiB,CAAC,EAGtB,KAAM,CAACG,EAAYC,CAAa,EAAI1jH,WAAkB,EAAI,EAGpD2jH,EAAuB,IAAM,CACjCD,EAAc,EAAK,EAEdJ,GACHnlG,EAAS,aAAa,CACxB,EAKFle,YAAU,IAAM,CAQd,GAPA,QAAQ,IAAI,4CAA6C,CACvD,WAAAwjH,EACA,kBAAAH,EACA,SAAUjlG,EAAS,SACpB,EAGGolG,EAAY,CACd,QAAQ,IAAI,qDAAsD,EAClE,MACF,CAGI,CAACH,GAAqBjlG,EAAS,WAAa,eACtC,YAAI,4CAA6CA,EAAS,QAAQ,EAC1EF,EAAS,aAAa,GACbmlG,GAAqBjlG,EAAS,WAAa,eACpD,QAAQ,IAAI,iDAAiD,EAC7DF,EAAS,MAAM,GAEf,QAAQ,IAAI,8CAA8C,CAC5D,EACC,CAACmlG,EAAmBjlG,EAAS,SAAUF,EAAUslG,CAAU,CAAC,EAG/DxjH,YAAU,IAAM,CACd,MAAM2tF,EAAey1B,EAAY,QAC3BpzE,EAAc5xB,EAAS,SACzBuvE,IAAiB39C,IACT1lD,EAAA,iBAAiBqjG,EAAc39C,CAAW,EACpDozE,EAAY,QAAUpzE,EACxB,EACC,CAAC5xB,EAAS,QAAQ,CAAC,EAUtB,MAAM+B,EAA4B,CAChC,CAAE,KAAM,OAAQ,UAAWyvD,GAAK,UAAW,EAAK,EAEhD,CAAE,KAAM,mBAAoB,UAAWkyC,EAAkB,EACzD,CAAE,KAAM,WAAY,UAAW7tC,GAAS,UAAW,EAAK,EACxD,CAAE,KAAM,SAAU,UAAW2X,GAAa,UAAW,EAAK,EAC1D,CAAE,KAAM,aAAc,UAAWizB,GAAkB,UAAW,EAAK,EACnE,CAAE,KAAM,aAAc,UAAW4B,GAAW,UAAW,EAAM,EAC7D,CAAE,KAAM,cAAe,UAAWZ,GAAmB,UAAW,EAAM,EACtE,CAAE,KAAM,SAAU,UAAW5qC,GAAO,UAAW,EAAK,EACpD,CAAE,KAAM,UAAW,UAAWM,GAAQ,UAAW,EAAK,GAIlDouC,EAAiC,CACrC,CAAE,KAAM,SAAU,UAAWl5B,EAAM,EACnC,CAAE,KAAM,cAAe,UAAWmD,EAAW,EAC7C,CAAE,KAAM,oBAAqB,UAAWkR,EAAgB,EACxD,CAAE,KAAM,aAAc,UAAW4B,EAAU,GAIvCkjB,EAAkBriG,GAAiBnD,EAAS,QAAQ,EAGpDylG,EAAqB,CAAC3yI,EAAgCuvC,EAAuB,KAChFjmB,MAAA+lB,GAAuB,aAAAE,EACtB,SAACjmB,EAAA,IAAAtpB,EAAA,CAAU,EACb,GAIF,OAAIsyI,EAEAhpH,EAAA,IAACi7E,GAAA,CACC,WAAYiuC,EACZ,aAAc,CAACL,CAAA,SAMlB9F,GAAgB,MAAK,OACpB,SAAC/hH,OAAAsoH,IAAO,SAAA1lG,EAEN,UAAA5jB,MAACupH,IAAM,KAAK,IAAI,QACdV,EACE7oH,EAAA,IAACwpH,IAAS,GAAG,OAAO,QAAO,EAAC,GAE3BxpH,EAAA,IAAAwpH,GAAA,CAAS,GAAG,cAAc,QAAO,EAAC,GAErC,EAID7jG,EAAW,IACV8jG,GAAAzpH,EAAA,IAACupH,GAAA,CAEC,KAAME,EAAM,KACZ,QAASJ,EAAmBI,EAAM,UAAWL,GAAmBK,EAAM,SAAS,GAF1EA,EAAM,KAId,EAGAN,EAAgB,IACfM,GAAAzpH,EAAA,IAACupH,GAAA,CAEC,KAAME,EAAM,KACZ,QAASJ,EAAmBI,EAAM,SAAS,GAFtCA,EAAM,KAId,QAGAF,GAAM,MAAK,IAAI,QAASF,EAAmBruC,EAAQ,EAAG,CA9BxB,GAAAp3D,EAAS,QA+B1C,EACF,CAEJ,EAEM8lG,GAAuB,UACnBf,GAAe,IAIZgB,GAAmB,IAAI,YAmB9BC,GAAgB,IAAM,CAEpB,MAACC,EAAaC,CAAc,EAAIvkH,EAAA,SAGnC,CAAE,KAAM,GAAO,QAAS,GAAI,EAG/BC,mBAAU,IAAM,CACd,QAAQ,IAAI,+DAAiE,EAGvE,MAAAukH,EAA6Bt5I,GAAiB,CAClD,MAAMu5I,EAAcv5I,EACZ,YAAI,4CAA6Cu5I,EAAY,MAAM,EAE5DF,EAAA,CACb,KAAM,GACN,QAASE,EAAY,OAAO,QAC7B,EACD,QAAQ,IAAI,6CAA8CA,EAAY,OAAO,OAAO,GAIhFC,EAA2Bx5I,GAAiB,CAChD,MAAMu5I,EAAcv5I,EACZ,YAAI,+CAAgDu5I,EAAY,MAAM,EAE/DF,EAAA,CACb,KAAM,GACN,QAASE,EAAY,OAAO,QAC7B,EACD,QAAQ,IAAI,6CAA8CA,EAAY,OAAO,OAAO,GAItF,eAAQ,IAAI,kEAAoE,EAC/DL,GAAA,iBAAiB,cAAeI,CAAyB,EAE1E,QAAQ,IAAI,qEAAuE,EAC5E,wBAAiB,kBAAmBE,CAAuB,EAGjE,OAAe,oBAAsB,IAAM,CAC1C,QAAQ,IAAI,kDAAmD,EAC/D,aAAa,WAAW,mBAAmB,EAC3C,OAAO,SAAS,QAAO,EAGzB,QAAQ,IAAI,wEAAwE,EAG7E,IAAM,CACX,QAAQ,IAAI,4CAA6C,EACxCN,GAAA,oBAAoB,cAAeI,CAAyB,EACtE,2BAAoB,kBAAmBE,CAAuB,EAEzE,EAAG,CAAE,GAGLzkH,YAAU,IAAM,OAEd,eAAQ,IAAI,6BAA6BhyB,EAAA,OAAe,aAAf,YAAAA,EAA2B,WAAY,GAAG,EAG7DyzC,KAGE52C,KACZR,KAGUqgB,KACtB,QAAQ,IAAI,qCAAqC,EAGjDJ,EAAU,aAAa,EAGvBA,EAAU,gBAAgB,YAAa,CACrC,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,SAAU,SAAS,UAAY,SAChC,EAI0B,YAAY,IAAM,CACxB/f,IAAA,EAClB,GAAK,GAAK,GAAI,EAGEA,KAGKM,KAGF42C,KAGA2E,KAGf,IAAM,CACX97B,EAAU,WAAW,EAEzB,EAAG,CAAE,GAGL0V,YAAU,IAAM,CACV,IAEI,MAAA0kH,EAAa,YAAY,iBAAiB,YAAY,EACxD,GAAAA,GAAcA,EAAW,OAAS,EAAG,CACjC,MAAAC,EAAMD,EAAW,CAAC,EAClBE,EAAWD,EAAI,aAAeA,EAAI,UACpC,SAASC,CAAQ,GAAKA,GAAY,GACpCt6H,EAAU,iBAAiBO,GAAY,UAAW,KAAK,MAAM+5H,CAAQ,CAAC,CACxE,SACU,YAAoB,OAAQ,CACtC,MAAMn3H,EAAK,YAAoB,OACzBm3H,EAAWn3H,EAAE,aAAeA,EAAE,gBAChC,SAASm3H,CAAQ,GAAKA,GAAY,GACpCt6H,EAAU,iBAAiBO,GAAY,UAAW,KAAK,MAAM+5H,CAAQ,CAAC,CAE1E,CAGA,GAAI,wBAAyB,OAAQ,CACnC,MAAMC,EAAgB,IAAI,oBAAqBtpE,GAAS,CAC3C,UAAAr6D,KAASq6D,EAAK,aAAc,CACrC,MAAMpqE,EAAQ+P,EAAc,KACxB/P,IAAS,cACXmZ,EAAU,iBAAiBO,GAAY,YAAa,KAAK,MAAM3J,EAAM,SAAS,CAAC,EACtE/P,IAAS,0BAClBmZ,EAAU,iBAAiBO,GAAY,uBAAwB,KAAK,MAAM3J,EAAM,SAAS,CAAC,CAE9F,EACD,EACG,IACF2jI,EAAc,QAAQ,CAAE,KAAM,QAAS,SAAU,GAAiC,OACxE,CAAa,CAGzB,MAAMC,EAAc,IAAI,oBAAqBvpE,GAAS,CACzC,UAAAr6D,KAASq6D,EAAK,aAA0C,CAC3D,MAAA/8D,EAAM0C,EAAM,gBAAkBA,EAAM,UACtC,SAAS1C,CAAG,GAAKA,GAAO,GAC1B8L,EAAU,iBAAiBO,GAAY,kBAAmB,KAAK,MAAMrM,CAAG,EAAG,CACzE,KAAM0C,EAAM,KACZ,SAAU,KAAK,MAAMA,EAAM,QAAQ,EACpC,CAEL,EACD,EACG,IACF4jI,EAAY,QAAQ,CAAE,KAAM,cAAe,SAAU,GAAiC,OAC5E,CAAa,CAC3B,OACY,CAId,CACF,EAAG,CAAE,GAgDa,OAAO,SAAS,SAAS,SAAS,WAAW,EAK5DtqH,EAAA,IAAA0iB,GAAoB,QAAQgmG,GAC3B,SAAC1oH,MAAAmlB,GAAA,CACC,SAACnkB,EAAA,KAAA4M,GACC,WAAA5N,EAAA,IAACc,GAAQ,UACRmM,GAAO,UACLs9G,GACC,UAACvpH,OAAAyiB,GACC,WAAAzjB,EAAA,IAAC0pH,GAAW,UACXl9F,GAAiB,IACjBq9F,EAAY,MACX7pH,EAAA,IAAC0F,GAAA,CACC,QAASmkH,EAAY,KACrB,QAASA,EAAY,QACrB,SAAU,IACV,WAAY,IAAMC,EAAe,CAAE,KAAM,GAAO,QAAS,GAAI,EAC/D,GAEJ,EACF,GACJ,EACF,EACF,CAEJ,EC1eMrtI,GAAS0mC,GAAa,eAAe,EAMpC,SAASqnG,IAA0B,CAEtBnnG,KAYlB5mC,GAAO,KAAK,2CAA2C,CACzD,CCfA+tI,KAmBA57I,GAAW,SAAS,eAAe,MAAM,CAAE,EAAE,OAAQoxB,EAAA,IAAA4pH,KAAI,CAAE","names":["m","require$$0","createRoot","ERROR_STORAGE_KEY","MAX_STORED_ERRORS","captureError","error","componentName","additionalInfo","message","stack","errorInfo","storedErrorsStr","storedErrors","e","getStoredErrors","clearStoredErrors","EMAIL_SERVICE_ID","EMAIL_TEMPLATE_ID","initEmailJS","emailjs","checkAndSendErrors","errors","sendErrorsToTrackingService","__vitePreload","templateParams","response","setupGlobalErrorHandler","source","lineno","colno","event","getDefaultsFromPostinstall","stringToByteArray$1","str","out","p","i","c","byteArrayToString","bytes","pos","c1","c2","c3","c4","u","base64","input","webSafe","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","charToByteMap","byte4","DecodeBase64StringError","base64Encode","utf8Bytes","base64urlEncodeWithoutPadding","base64Decode","getGlobal","getDefaultsFromGlobal","getDefaultsFromEnvVariable","define_process_env_default","defaultsJsonString","getDefaultsFromCookie","match","decoded","getDefaults","getDefaultAppConfig","_a","Deferred","resolve","reject","callback","value","isBrowserExtension","runtime","isIndexedDBAvailable","validateIndexedDBOpenable","preExist","DB_CHECK_NAME","request","areCookiesEnabled","ERROR_NAME","FirebaseError","code","customData","ErrorFactory","service","serviceName","data","fullCode","template","replaceTemplate","fullMessage","PATTERN","_","key","deepEqual","a","b","aKeys","bKeys","k","aProp","bProp","isObject","thing","DEFAULT_INTERVAL_MILLIS","DEFAULT_BACKOFF_FACTOR","MAX_VALUE_MILLIS","RANDOM_FACTOR","calculateBackoffMillis","backoffCount","intervalMillis","backoffFactor","currBaseValue","randomWait","getModularInstance","Component","name","instanceFactory","type","mode","multipleInstances","props","DEFAULT_ENTRY_NAME","Provider$1","container","identifier","normalizedIdentifier","deferred","instance","options","optional","component","isComponentEager","instanceIdentifier","instanceDeferred","services","opts","normalizedDeferredIdentifier","existingCallbacks","existingInstance","callbacks","normalizeIdentifierForFactory","ComponentContainer","provider","Provider","LogLevel","levelStringToEnum","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","args","now","method","Logger","val","instanceOfAny","object","constructors","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","promise","unlisten","success","wrap","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","wrapFunction","func","storeNames","unwrap","transformCachableValue","newValue","openDB","version","blocked","upgrade","blocking","terminated","openPromise","db","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","oldTraps","PlatformLoggerServiceImpl","isVersionServiceProvider","logString","name$q","version$1","logger","name$p","name$o","name$n","name$m","name$l","name$k","name$j","name$i","name$h","name$g","name$f","name$e","name$d","name$c","name$b","name$a","name$9","name$8","name$7","name$6","name$5","name$4","name$3","name$2","name$1","PLATFORM_LOG_STRING","_apps","_serverApps","_components","_addComponent","app","_registerComponent","serverApp","_getProvider","heartbeatController","ERRORS","ERROR_FACTORY","FirebaseAppImpl","config","initializeApp","_options","rawConfig","existingApp","newApp","getApp","registerVersion","libraryKeyOrName","variant","library","libraryMismatch","versionMismatch","warning","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","oldVersion","readHeartbeatsFromIndexedDB","result","computeKey","idbGetError","writeHeartbeatsToIndexedDB","heartbeatObject","MAX_HEADER_BYTES","MAX_NUM_STORED_HEARTBEATS","HeartbeatServiceImpl","HeartbeatStorageImpl","_b","agent","date","getUTCDateString","singleDateHeartbeat","earliestHeartbeatIdx","getEarliestHeartbeatIdx","heartbeatsToSend","unsentEntries","extractHeartbeatsForHeader","headerString","heartbeatsCache","maxSize","heartbeatEntry","hb","countBytes","idbHeartbeatObject","heartbeatsObject","existingHeartbeatsObject","heartbeats","earliestHeartbeatDate","registerCoreComponents","PENDING_TIMEOUT_MS","PACKAGE_VERSION","INTERNAL_AUTH_VERSION","INSTALLATIONS_API_URL","TOKEN_EXPIRATION_BUFFER","SERVICE","SERVICE_NAME","ERROR_DESCRIPTION_MAP","isServerError","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","getExpiresInFromResponseExpiresIn","getErrorFromResponse","requestName","errorData","getHeaders","apiKey","getHeadersWithAuth","appConfig","refreshToken","headers","getAuthorizationHeader","retryIfServerError","fn","responseExpiresIn","createInstallationRequest","heartbeatServiceProvider","fid","endpoint","heartbeatService","heartbeatsHeader","body","responseValue","sleep","ms","bufferToBase64UrlSafe","array","VALID_FID_PATTERN","INVALID_FID","generateFid","fidByteArray","encode","getKey","fidChangeCallbacks","fidChanged","callFidChangeCallbacks","broadcastFidChange","channel","getBroadcastChannel","closeBroadcastChannel","broadcastChannel","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","set","objectStore","oldValue","remove","update","updateFn","store","getInstallationEntry","installations","registrationPromise","installationEntry","oldEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","entry","clearTimedOutRequest","registrationPromiseWithError","inProgressEntry","registerInstallation","waitUntilFidRegistration","registeredInstallationEntry","updateInstallationRequest","hasInstallationRequestTimedOut","generateAuthTokenRequest","getGenerateAuthTokenEndpoint","refreshAuthToken","forceRefresh","tokenPromise","isEntryRegistered","oldAuthToken","isAuthTokenValid","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","updateAuthTokenRequest","authToken","hasAuthTokenRequestTimedOut","updatedInstallationEntry","isAuthTokenExpired","inProgressAuthToken","getId","installationsImpl","getToken","completeInstallationRegistration","extractAppConfig","getMissingValueError","configKeys","keyName","valueName","INSTALLATIONS_NAME","INSTALLATIONS_NAME_INTERNAL","publicFactory","internalFactory","registerInstallations","ANALYTICS_TYPE","GA_FID_KEY","ORIGIN_KEY","FETCH_TIMEOUT_MILLIS","DYNAMIC_CONFIG_URL","GTAG_URL","createGtagTrustedTypesScriptURL","url","err","promiseAllSettled","promises","createTrustedTypesPolicy","policyName","policyOptions","trustedTypesPolicy","insertScriptTag","dataLayerName","measurementId","script","gtagScriptURL","getOrCreateDataLayer","dataLayer","gtagOnConfig","gtagCore","initializationPromisesMap","dynamicConfigPromisesList","measurementIdToAppId","gtagParams","correspondingAppId","foundConfig","gtagOnEvent","initializationPromisesToWaitFor","gaSendToList","dynamicConfigResults","sendToId","initializationPromise","wrapGtag","gtagWrapper","command","consentAction","fieldName","customParams","wrapOrCreateGtag","gtagFunctionName","_args","findGtagScriptOnPage","scriptTags","tag","LONG_RETRY_FACTOR","BASE_INTERVAL_MILLIS","RetryData","throttleMetadata","appId","metadata","defaultRetryData","fetchDynamicConfig","appFields","appUrl","errorMessage","jsonResponse","fetchDynamicConfigWithRetry","retryData","timeoutMillis","signal","AnalyticsAbortSignal","attemptFetchDynamicConfigWithRetry","throttleEndTimeMillis","setAbortableTimeout","isRetriableError","backoffMillis","timeout","httpStatus","listener","logEvent$1","gtagFunction","eventName","eventParams","params","setAnalyticsCollectionEnabled$1","enabled","validateIndexedDB","_initializeAnalytics","dynamicConfigPromise","fidPromise","envIsValid","dynamicConfig","configProperties","AnalyticsService$1","gtagName","gtagCoreFunction","wrappedGtagFunction","globalInitDone","warnOnBrowserContextMismatch","mismatchedEnvMessages","details","index","factory","wrappedGtag","AnalyticsService","getAnalytics","analyticsProvider","initializeAnalytics","isSupported","setAnalyticsCollectionEnabled","analyticsInstance","logEvent","registerAnalytics","analyticsOptions","analytics","firebaseApp","initializeFirebase","getFirebaseApp","initFirebaseAnalytics","getFirebaseAnalytics","EventCategory","EventAction","category","action","properties","urlHasDebug","lsDebug","pagePath","pageTitle","from","to","element","contentType","contentId","mediaType","mediaId","featureName","direction","sessionStart","sessionDuration","buildingId","buildingName","sectionTitle","artistId","artistName","eventId","title","isoDate","resolved","trackId","evt","trackPageView","trackEvent","trackInteraction","trackSwipe","trackFeatureUse","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","dispatch","reducer","state","t","toast","listeners","memoryState","id","dismiss","open","useToast","setState","React.useState","React.useEffect","r","f","n","o","clsx","falsyToString","cx","cva","base","_config_compoundVariants","variants","defaultVariants","getVariantClassNames","variantProp","defaultVariantProp","variantKey","propsWithoutUndefined","acc","param","getCompoundVariantClassNames","cvClass","cvClassName","compoundVariantOptions","CLASS_PART_SEPARATOR","createClassGroupUtils","classMap","createClassMap","conflictingClassGroups","conflictingClassGroupModifiers","className","classParts","getGroupRecursive","getGroupIdForArbitraryProperty","classGroupId","hasPostfixModifier","conflicts","classPartObject","currentClassPart","nextClassPartObject","classGroupFromNextClassPart","classRest","validator","arbitraryPropertyRegex","arbitraryPropertyClassName","property","theme","prefix","getPrefixedClassGroupEntries","classGroup","processClassesRecursively","classDefinition","classPartObjectToEdit","getPart","isThemeGetter","path","currentClassPartObject","pathPart","classGroupEntries","prefixedClassGroup","createLruCache","maxCacheSize","cacheSize","cache","previousCache","IMPORTANT_MODIFIER","createParseClassName","separator","experimentalParseClassName","isSeparatorSingleCharacter","firstSeparatorCharacter","separatorLength","parseClassName","modifiers","bracketDepth","modifierStart","postfixModifierPosition","currentCharacter","baseClassNameWithImportantModifier","hasImportantModifier","baseClassName","maybePostfixModifierPosition","sortModifiers","sortedModifiers","unsortedModifiers","modifier","createConfigUtils","SPLIT_CLASSES_REGEX","mergeClassList","classList","configUtils","getClassGroupId","getConflictingClassGroupIds","classGroupsInConflict","classNames","originalClassName","variantModifier","modifierId","classId","conflictGroups","group","twJoin","argument","resolvedValue","string","toValue","mix","createTailwindMerge","createConfigFirst","createConfigRest","cacheGet","cacheSet","functionToCall","initTailwindMerge","previousConfig","createConfigCurrent","tailwindMerge","cachedResult","fromTheme","themeGetter","arbitraryValueRegex","fractionRegex","stringLengths","tshirtUnitRegex","lengthUnitRegex","colorFunctionRegex","shadowRegex","imageRegex","isLength","isNumber","isArbitraryLength","getIsArbitraryValue","isLengthOnly","isArbitraryNumber","isInteger","isPercent","isArbitraryValue","isTshirtSize","sizeLabels","isArbitrarySize","isNever","isArbitraryPosition","imageLabels","isArbitraryImage","isImage","isArbitraryShadow","isShadow","isAny","label","testValue","getDefaultConfig","colors","spacing","blur","brightness","borderColor","borderRadius","borderSpacing","borderWidth","contrast","grayscale","hueRotate","invert","gap","gradientColorStops","gradientColorStopPositions","inset","margin","opacity","padding","saturate","scale","sepia","skew","space","translate","getOverscroll","getOverflow","getSpacingWithAutoAndArbitrary","getSpacingWithArbitrary","getLengthWithEmptyAndArbitrary","getNumberWithAutoAndArbitrary","getPositions","getLineStyles","getBlendModes","getAlign","getZeroAndEmpty","getBreaks","getNumberAndArbitrary","twMerge","cn","inputs","ToastProvider","ToastPrimitives.Provider","ToastViewport","React.forwardRef","ref","jsx","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","X","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","jsxs","description","tweenFunctions","_c","d","s","v","tweenFunctions_1","degreesToRads","degrees","randomRange","min","max","randomInt","ParticleShape","RotationDirection","DEFAULT_FRAME_TIME","Particle","context","getOptions","x","y","initialVelocityX","initialVelocityY","elapsed","gravity","wind","friction","drawShape","frameTimeMultiplier","rotateDelta","ParticleGenerator","canvas","newParticleX","newParticleY","particlesGenerated","lastNumberOfPieces","run","recycle","numberOfPieces","debug","tweenFunction","tweenDuration","nP","activeCount","tweenedVal","numToAdd","ctx","confettiDefaults","tweens.easeInOutQuad","Confetti","computedConfettiDefaults","timestamp","onConfettiComplete","frameRate","lastRunState","lastRecycleState","React","ReactConfettiInternal","extractCanvasProps","confettiOptions","passedProps","canvasStyles","refs","rest","confettiOptionKeys","refProps","ReactConfetti","useWindowSize","windowSize","setWindowSize","useState","useEffect","handleResize","Celebration","trigger","duration","onComplete","isActive","setIsActive","width","height","confettiWidth","confettiHeight","timer","AchievementType","achievementsList","isAchievementUnlocked","achievementId","unlockedAchievementsStr","unlockAchievement","isAlreadyUnlocked","unlockedAchievements","unlockTime","getAchievementCelebrationMessage","achievement","P","E","L","t.createContext","D","j","t.useContext","t.memo","g","h","w","l","R","$","S","t.createElement","Ct","$t","_t","Wt","Ut","Ft","It","Dt","kt","ct","ut","Ot","Vt","Kt","Xt","ft","U","qt","Qt","Zt","te","ee","oe","ae","ne","se","yt","xt","vt","wt","Tt","St","Rt","Et","Nt","Pt","q","V","Q","O","K","Z","tt","et","ot","W","I","at","T","z","nt","H","st","N","M","rt","A","J","Mt","At","Lt","mt","it","Y","pt","F","gt","zt","ht","bt","jt","lt","B","C","Yt","dt","Bt","Ht","Te","Gt","useTheme","Sonner","createTooltipContext","createTooltipScope","createContextScope","createPopperScope","usePopperScope","PROVIDER_NAME","DEFAULT_DELAY_DURATION","TOOLTIP_OPEN","TooltipProviderContextProvider","useTooltipProviderContext","TooltipProvider","__scopeTooltip","delayDuration","skipDelayDuration","disableHoverableContent","children","isOpenDelayed","setIsOpenDelayed","isPointerInTransitRef","React.useRef","skipDelayTimerRef","skipDelayTimer","React.useCallback","inTransit","TOOLTIP_NAME","TooltipContextProvider","useTooltipContext","Tooltip","openProp","defaultOpen","onOpenChange","disableHoverableContentProp","delayDurationProp","providerContext","popperScope","setTrigger","useId","openTimerRef","wasOpenDelayedRef","setOpen","useControllableState","open2","stateAttribute","React.useMemo","handleOpen","handleClose","handleDelayedOpen","PopperPrimitive.Root","TRIGGER_NAME","TooltipTrigger","forwardedRef","triggerProps","composedRefs","useComposedRefs","isPointerDownRef","hasPointerMoveOpenedRef","handlePointerUp","PopperPrimitive.Anchor","Primitive","composeEventHandlers","PORTAL_NAME","PortalProvider","usePortalContext","CONTENT_NAME","TooltipContent","portalContext","forceMount","side","contentProps","Presence","TooltipContentImpl","TooltipContentHoverable","pointerGraceArea","setPointerGraceArea","onClose","content","onPointerInTransitChange","handleRemoveGraceArea","handleCreateGraceArea","hoverTarget","currentTarget","exitPoint","exitSide","getExitSideFromRect","paddedExitPoints","getPaddedExitPoints","hoverTargetPoints","getPointsFromRect","graceArea","getHull","handleTriggerLeave","handleContentLeave","handleTrackPointerGrace","pointerPosition","hasEnteredTarget","isPointerOutsideGraceArea","isPointInPolygon","VisuallyHiddenContentContextProvider","useVisuallyHiddenContentContext","ariaLabel","onEscapeKeyDown","onPointerDownOutside","handleScroll","DismissableLayer","PopperPrimitive.Content","Slottable","VisuallyHiddenPrimitive.Root","ARROW_NAME","TooltipArrow","arrowProps","PopperPrimitive.Arrow","point","rect","top","bottom","right","left","polygon","inside","xi","yi","xj","yj","points","newPoints","getHullPresorted","upperHull","lowerHull","Root3","Trigger","Content2","TooltipPrimitive.Provider","TooltipPrimitive.Root","TooltipPrimitive.Trigger","sideOffset","TooltipPrimitive.Content","Subscribable","isServer","noop","functionalUpdate","updater","isValidTimeout","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","matchQuery","filters","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","matchMutation","mutation","status","mutationKey","hashKey","isPlainObject","replaceEqualDeep","isPlainArray","aItems","aSize","bItems","bSize","copy","equalItems","hasObjectPrototype","ctor","prot","replaceData","prevData","addToEnd","items","item","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","FocusManager","__privateAdd","_focused","_cleanup","_setup","__privateSet","onFocus","__privateGet","setup","focused","isFocused","focusManager","OnlineManager","_online","onOnline","onlineListener","offlineListener","online","onlineManager","pendingThenable","thenable","_resolve","_reject","finalize","reason","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","isCancelledError","createRetryer","isRetryCancelled","isResolved","continueFn","cancel","cancelOptions","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","promiseOrValue","initialPromise","retry","retryDelay","delay","shouldRetry","createNotifyManager","queue","transactions","notifyFn","batchNotifyFn","scheduleFn","cb","schedule","flush","originalQueue","notifyManager","Removable","_gcTimeout","newGcTime","Query","_Query_instances","_initialState","_revertState","_cache","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","newData","__privateMethod","dispatch_fn","setStateOptions","observer","abortController","addSignalProperty","fetchFn","queryFn","queryFnContext","onError","_d","fetchState","hasData","initialDataUpdatedAt","QueryCache","_queries","client","queryHash","queryInMap","defaultedFilters","queries","Mutation","_Mutation_instances","_observers","_mutationCache","variables","restored","isPaused","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_s","MutationCache","_mutations","_mutationId","__privateWrapper","scope","scopeFor","mutations","firstPendingMutation","foundMutation","pausedMutations","infiniteQueryBehavior","pages","oldPages","oldPageParams","currentPage","cancelled","fetchPage","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","cachedData","defaultedOptions","queryCache","refetchFilters","defaultedCancelOptions","defaults","queryDefault","QueryClientContext","React.createContext","QueryClientProvider","LOG_COLORS","logHistory","MAX_LOG_HISTORY","log","module","level","pattern","style","createLogger","moduleName","initErrorHandlers","NavigationContext","createContext","MAX_HISTORY_LENGTH","NavigationProvider","navigate","useNavigate","location","useLocation","history","setHistory","currentIndex","setCurrentIndex","canGoBack","canGoForward","initialEntry","newEntry","newHistory","trimmedHistory","contextValue","prevEntry","nextEntry","LoadingIndicator","size","color","fullScreen","text","spinnerSize","Container","LoadingContext","LoadingProvider","isLoading","setIsLoading","loadingText","setLoadingText","startLoading","useCallback","stopLoading","mainRoutes","transitionVariants","routeTransitionMap","swipeableRoutes","AnimatedPageTransition","transitionType","enableSwipe","startX","setStartX","currentRouteIndex","setCurrentRouteIndex","swipeDirection","setSwipeDirection","currentTransition","handleTouchStart","handleTouchEnd","diffX","threshold","activeVariants","motion","isSwipeableRoute","pathname","registerServiceWorker","isOnline","addOnlineStatusListener","handleOnline","handleOffline","cacheEventsInServiceWorker","events","locations","cacheMapImageInServiceWorker","CacheManager","__publicField","expiry","generator","freshData","cacheManager","artists","getArtistById","artist","getLocationNameById","locationId","loc","getLocationGPSById","getLocations","eventScheduleData","eventDetail","getEventsByDay","day","getEventsByLocation","locationName","uniqueLocations","locations$1","locationsModule","locationsData","eventsByLocation","eventIds","populateSynchronously","getSavedEvents","savedEventIds","ids","allEvents","saveEvent","savedEventIdsStr","eventExists","updatedIds","removeSavedEvent","setEventNotification","notificationTime","notificationsStr","notifications","isFirstNotification","getBaseUrl","getFullPath","baseUrl","cleanPath","CACHE_KEYS","CACHE_EXPIRY","preloadSavedEvents","savedEvents","getOfflineSavedEvents","preloadLocations","allLocations","locationIds","uniqueLocationIds","relevantLocations","getOfflineLocations","preloadLocationImages","imageUrls","imagePath","preloadPromises","blob","successfulUrls","preloadHistoryImages","locationsWithHistory","preloadMapImage","mapImageUrl","preloadAllOfflineData","mapPreloaded","isHistoryImageCached","preloadSingleHistoryImage","useOfflineMode","setOnline","offlineReady","setOfflineReady","preloadingData","setPreloadingData","preloadData","cleanup","OfflineIndicator","WifiOff","Fragment","Loader2","Check","buttonVariants","Button","asChild","Comp","Slot","LocationActivator","onLocationEnabled","onLocationDenied","onLocationDisabled","locationConsent","toggleLocation","position","MapPin","globalAudioElement","isGlobalAudioInitialized","AudioActivator","onAudioEnabled","onAudioDisabled","audioPath","handleToggleAudio","newState","Volume2","VolumeX","getBasePath","getImagePath","encodedPath","segment","FEYDEAU_CORNERS","FEYDEAU_CENTER","EARTH_RADIUS","calculateDistance","lat1","lon1","lat2","lon2","φ1","φ2","Δφ","Δλ","FEYDEAU_DIMENSIONS","MAP_CORNERS","gpsToMapCoordinatesAffine","latitude","longitude","gpsPoints","mapPoints","matrixX","vectorX","matrixY","vectorY","coeffX","solveLinearSystem","coeffY","lonMin","lonMax","latMin","latMax","xMin","xMax","yMin","yMax","relX","relY","matrix","vector","det","determinant3x3","matrix1","matrix2","matrix3","det1","det2","det3","isPositionWithinFeydeau","toleranceLatitude","toleranceLongitude","minLat","maxLat","minLng","maxLng","isWithinLatitude","isWithinLongitude","calculateDistanceToCenter","deltaLat","deltaLng","getDirectionToFeydeau","angle","ToastService","toastType","showToast","logMessage","logContext","toastService","originalLogger","LOCATION_UPDATE_INTERVAL","LOCATION_TIMEOUT","LOCATION_MAX_AGE","LOCATION_CONSENT_KEY","LOCATION_ACTIVATION_TIMESTAMP_KEY","RECENT_ACTIVATION_THRESHOLD","geoOptions","LocationService","updateCallback","permissionCallback","onLocationUpdate","onPermissionChange","activationTimestamp","denied","initialPosition","latOffset","lngOffset","simulatedPosition","locationService","MAP_WIDTH","MAP_HEIGHT","LOCATION_NOTIFICATION_TIMESTAMP_KEY","LOCATION_NOTIFICATION_KEY","LOCATION_NOTIFICATION_COOLDOWN","UserLocation","showNavigation","setPosition","mapCoords","setMapCoords","permissionDenied","setPermissionDenied","firstPositionRef","useRef","lastNotificationRef","isRecentlyActivated","canShowNotification","notificationKey","lastNotificationTimestamp","lastNotificationKey","lastTime","handleLocationUpdate","gpsPosition","mapPosition","gpsToMapCoordinates","isWithin","distanceToCenter","isFarFromCenter","isVisibleOnMap","handlePermissionChange","locationUpdateAdapter","__","stablePermissionHandler","originalInfo","originalDebug","Navigation","ARRIVAL_THRESHOLD","toRad","lat1Rad","lat2Rad","dLat","dLon","calculateSimpleDistance","calculatedDistance","getDirection","NavigationGuideSimple","userPosition","targetLocation","targetMapCoords","navigationInfo","setNavigationInfo","targetCoordinates","isNearby","displayDistance","MapComponent","visitedLocations","onLocationClick","highlightedLocation","testPoint","testPointAffine","activeLocation","onClick","readOnly","onScaleChange","userLocationProps","navigationProps","onPanStart","onPan","onPanEnd","containerRef","setScale","isDragging","setIsDragging","userMapCoords","setUserMapCoords","dragStartClient","lastClient","dragTotals","dragStartTime","calculateScale","parentWidth","newScale","debouncedResize","debounce","handleMouseMove","current","dx","dy","handleMouseUp","durationMs","distance","startDrag","clientX","clientY","el","onMouseDown","SELECTION_KEYS","FIRST_KEYS","LAST_KEYS","FIRST_LAST_KEYS","SUB_OPEN_KEYS","SUB_CLOSE_KEYS","MENU_NAME","Collection","useCollection","createCollectionScope","createCollection","createMenuContext","createMenuScope","createRovingFocusGroupScope","useRovingFocusGroupScope","MenuProvider","useMenuContext","MenuRootProvider","useMenuRootContext","Menu","__scopeMenu","dir","modal","setContent","isUsingKeyboardRef","handleOpenChange","useCallbackRef","useDirection","handleKeyDown","handlePointer","ANCHOR_NAME","MenuAnchor","anchorProps","MenuPortal","PortalPrimitive","MenuContentProvider","useMenuContentContext","MenuContent","rootContext","MenuRootContentModal","MenuRootContentNonModal","hideOthers","MenuContentImpl","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll","rovingFocusGroupScope","getItems","currentItemId","setCurrentItemId","contentRef","timerRef","searchRef","pointerGraceTimerRef","pointerGraceIntentRef","pointerDirRef","lastPointerXRef","ScrollLockWrapper","RemoveScroll","React.Fragment","scrollLockWrapperProps","handleTypeaheadSearch","search","currentItem","currentMatch","values","nextMatch","getNextMatch","newItem","updateSearch","useFocusGuards","isPointerMovingToSubmenu","isPointerInGraceArea","intent","FocusScope","RovingFocusGroup.Root","getOpenState","isKeyDownInside","isModifierKey","isCharacterKey","candidateNodes","focusFirst","whenMouse","pointerXHasChanged","newDir","GROUP_NAME","MenuGroup","groupProps","LABEL_NAME","MenuLabel","labelProps","ITEM_NAME","ITEM_SELECT","MenuItem","disabled","onSelect","itemProps","contentContext","handleSelect","menuItem","itemSelectEvent","dispatchDiscreteCustomEvent","MenuItemImpl","isTypingAhead","textValue","setIsFocused","textContent","setTextContent","RovingFocusGroup.Item","CHECKBOX_ITEM_NAME","MenuCheckboxItem","checked","onCheckedChange","checkboxItemProps","ItemIndicatorProvider","isIndeterminate","getCheckedState","RADIO_GROUP_NAME","RadioGroupProvider","useRadioGroupContext","MenuRadioGroup","onValueChange","handleValueChange","RADIO_ITEM_NAME","MenuRadioItem","radioItemProps","ITEM_INDICATOR_NAME","useItemIndicatorContext","MenuItemIndicator","itemIndicatorProps","indicatorContext","SEPARATOR_NAME","MenuSeparator","separatorProps","MenuArrow","SUB_NAME","MenuSubProvider","useMenuSubContext","SUB_TRIGGER_NAME","MenuSubTrigger","subContext","onPointerGraceIntentChange","clearOpenTimer","pointerGraceTimer","composeRefs","contentRect","rightSide","bleed","contentNearEdge","contentFarEdge","SUB_CONTENT_NAME","MenuSubContent","subContentProps","isCloseKey","candidates","PREVIOUSLY_FOCUSED_ELEMENT","candidate","wrapArray","startIndex","normalizedSearch","char","currentMatchIndex","wrappedValues","area","cursorPos","handler","Anchor2","Portal","Group","Label","Item2","CheckboxItem","RadioGroup","RadioItem","ItemIndicator","Separator","Arrow2","SubTrigger","SubContent","DROPDOWN_MENU_NAME","createDropdownMenuContext","createDropdownMenuScope","useMenuScope","DropdownMenuProvider","useDropdownMenuContext","DropdownMenu","__scopeDropdownMenu","menuScope","triggerRef","prevOpen","MenuPrimitive.Root","DropdownMenuTrigger","MenuPrimitive.Anchor","DropdownMenuPortal","portalProps","MenuPrimitive.Portal","DropdownMenuContent","hasInteractedOutsideRef","MenuPrimitive.Content","originalEvent","ctrlLeftClick","isRightClick","DropdownMenuGroup","MenuPrimitive.Group","DropdownMenuLabel","MenuPrimitive.Label","DropdownMenuItem","MenuPrimitive.Item","DropdownMenuCheckboxItem","MenuPrimitive.CheckboxItem","DropdownMenuRadioGroup","radioGroupProps","MenuPrimitive.RadioGroup","DropdownMenuRadioItem","MenuPrimitive.RadioItem","INDICATOR_NAME","DropdownMenuItemIndicator","MenuPrimitive.ItemIndicator","DropdownMenuSeparator","MenuPrimitive.Separator","DropdownMenuArrow","MenuPrimitive.Arrow","DropdownMenuSubTrigger","subTriggerProps","MenuPrimitive.SubTrigger","DropdownMenuSubContent","MenuPrimitive.SubContent","Root2","Portal2","Label2","CheckboxItem2","RadioItem2","ItemIndicator2","Separator2","SubTrigger2","SubContent2","DropdownMenuPrimitive.Root","DropdownMenuPrimitive.Trigger","DropdownMenuPrimitive.SubTrigger","ChevronRight","DropdownMenuPrimitive.SubContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuPrimitive.Item","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","DropdownMenuPrimitive.RadioItem","Circle","DropdownMenuPrimitive.Label","DropdownMenuPrimitive.Separator","__defProp","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","__spreadValues","__objRest","exclude","qrcodegen","qrcodegen2","_QrCode","errorCorrectionLevel","dataCodewords","msk","row","allCodewords","minPenalty","penalty","assert","ecl","segs","seg","minVersion","maxVersion","mask","boostEcl","dataUsedBits","dataCapacityBits2","usedBits","QrSegment","newEcl","bb","appendBits","dataCapacityBits","padByte","alignPatPos","numAlign","rem","bits","getBit","dist","xx","yy","isDark","ver","numBlocks","blockEccLen","rawCodewords","numShortBlocks","shortBlockLen","blocks","rsDiv","dat","ecc","block","vert","runColor","runX","runHistory","runY","dark","sum","total","step","degree","root","divisor","factor","coef","core","currentRunColor","currentRunLength","len","cond","_QrSegment","numChars","bitData","digits","temp","assignVal","ccbits","QrCode2","_Ecc","ordinal","formatBits","QrSegment2","_Mode","modeBits","numBitsCharCount","qrcodegen_default","ERROR_LEVEL_MAP","DEFAULT_SIZE","DEFAULT_LEVEL","DEFAULT_BGCOLOR","DEFAULT_FGCOLOR","DEFAULT_INCLUDEMARGIN","DEFAULT_MINVERSION","SPEC_MARGIN_SIZE","DEFAULT_MARGIN_SIZE","DEFAULT_IMG_SCALE","generatePath","modules","ops","start","cell","excavateModules","excavation","getImageSettings","cells","imageSettings","numCells","defaultSize","floorX","floorY","ceilW","ceilH","crossOrigin","getMarginSize","includeMargin","marginSize","useQRCode","boostLevel","qrcode","segments","accum","calculatedImageSettings","cells2","margin2","numCells2","calculatedImageSettings2","SUPPORTS_PATH2D","QRCodeCanvas","bgColor","fgColor","otherProps","imgSrc","_canvas","_image","setCanvasRef","node","isImgLoaded","setIsImageLoaded","cellsToDraw","image","haveImageToRender","pixelRatio","rdx","cdx","canvasStyle","img","QRCodeSVG","fgPath","Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","descriptionId","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","ShareButton","shareUrl","showQrCode","setShowQrCode","handleShare","platform","absoluteUrl","copyToClipboard","isIOS","isAndroid","fallbackCopyToClipboard","textArea","successful","Share2","QrCode","BottomNavigation","currentPath","Link","Calendar","Bookmark","Camera","Info","Gift","CONTRIBUTION_CONTEXT_KEY","setEventContributionContext","setLocationContributionContext","getContributionContext","contextData","clearContributionContext","enrichSubmissionWithContext","stringify","settings","nameRe","nameReJsx","emptyOptions","re","whitespace","empty","Schema","normal","merge","definitions","definition","normalize","attribute","powers","boolean","increment","booleanish","overloadedBoolean","number","spaceSeparated","commaSeparated","commaOrSpaceSeparated","checks","types","DefinedInfo","mark","check","create","normals","info","aria","caseSensitiveTransform","attributes","caseInsensitiveTransform","html","svg","xlink","xmlns","xml","hastToReact","cap","dash","valid","find","schema","Type","camelcase","dashes","kebab","$0","htmlBase","svgBase","COMMENT_REGEX","NEWLINE_REGEX","WHITESPACE_REGEX","PROPERTY_REGEX","COLON_REGEX","VALUE_REGEX","SEMICOLON_REGEX","TRIM_REGEX","NEWLINE","FORWARD_SLASH","ASTERISK","EMPTY_STRING","TYPE_COMMENT","TYPE_DECLARATION","inlineStyleParser","column","updatePosition","lines","Position","msg","comments","rules","comment","declaration","ret","trim","declarations","decls","decl","__importDefault","this","mod","cjs","StyleToObject","inline_style_parser_1","iterator","styleObject","hasIterator","utilities","CUSTOM_PROPERTY_REGEX","HYPHEN_REGEX","NO_HYPHEN_REGEX","VENDOR_PREFIX_REGEX","MS_VENDOR_PREFIX_REGEX","skipCamelCase","capitalize","character","trimHyphen","camelCase","style_to_object_1","utilities_1","require$$1","StyleToJS","pointEnd","pointStart","end","stringifyPosition","VFileMessage","causeOrReason","optionsOrParentOrPlace","origin","legacyCause","parent","own","emptyMap","tableElements","tableCellElement","docs","toJsxRuntime","tree","filePath","developmentCreate","productionCreate","one","mdxExpression","mdxJsxElement","mdxEsm","parentSchema","findComponentFromName","createElementProps","createChildren","child","addNode","addChildren","expression","crashEstree","createJsxElementProps","jsxDEV","isStaticChildren","alignValue","createProperty","objectExpression","countsByName","commas","spaces","parseStyle","transformStylesToCssCasing","styleToJs","cause","allowExpression","identifiers","isIdentifierName","place","domCasing","cssCasing","transformStyleToCssCasing","toDash","urlAttributes","toString","includeImageAlt","includeHtml","all","decodeNamedCharacterReference","characterReference","splice","list","chunkStart","parameters","push","hasOwnProperty","combineExtensions","extensions","syntaxExtension","extension","hook","constructs","existing","before","decodeNumericCharacterReference","normalizeIdentifier","asciiAlpha","regexCheck","asciiAlphanumeric","asciiAtext","asciiControl","asciiDigit","asciiHexDigit","asciiPunctuation","markdownLineEnding","markdownLineEndingOrSpace","markdownSpace","unicodePunctuation","unicodeWhitespace","regex","normalizeUri","skip","replace","next","factorySpace","effects","ok","limit","initializeContent","contentStart","afterContentStartConstruct","paragraphInitial","lineStart","token","document","initializeDocument","containerConstruct","tokenizeContainer","self","continued","childFlow","childToken","lineStartOffset","documentContinue","checkNewContainers","closeFlow","indexBeforeExits","indexBeforeFlow","exitContainers","documentContinued","flowStart","thereIsANewContainer","thereIsNoNewContainer","containerContinue","flowContinue","writeToChild","endOfFile","stream","seen","nok","classifyCharacter","resolveAll","called","attention","resolveAllAttention","tokenizeAttention","openingSequence","closingSequence","use","nextEvents","offset","movePoint","attentionMarkers","marker","after","close","autolink","tokenizeAutolink","schemeOrEmailAtext","emailAtext","schemeInsideOrEmailAtext","urlInside","emailAtSignOrDot","emailLabel","emailValue","blankLine","tokenizeBlankLine","blockQuote","tokenizeBlockQuoteContinuation","exit","tokenizeBlockQuoteStart","contStart","contBefore","characterEscape","tokenizeCharacterEscape","tokenizeCharacterReference","test","numeric","nonLazyContinuation","tokenizeNonLazyContinuation","codeFenced","tokenizeCodeFenced","closeStart","tokenizeCloseStart","initialPrefix","sizeOpen","beforeSequenceOpen","tail","sequenceOpen","infoBefore","atNonLazyBreak","metaBefore","meta","contentBefore","beforeContentChunk","contentChunk","startBefore","beforeSequenceClose","sequenceClose","sequenceCloseAfter","codeIndented","tokenizeCodeIndented","furtherStart","tokenizeFurtherStart","afterPrefix","atBreak","codeText","resolveCodeText","tokenizeCodeText","tailExitIndex","headEnterIndex","enter","between","SpliceBuffer","initial","stop","deleteCount","removed","chunkedPush","subtokenize","eventsArray","jumps","lineIndex","otherIndex","otherEvent","subevents","more","subcontent","eventIndex","startPosition","startPositions","tokenizer","childEvents","gaps","adjust","breaks","slice","resolveContent","tokenizeContent","continuationConstruct","tokenizeContinuation","chunkInside","contentEnd","contentContinue","startLookahead","prefixed","factoryDestination","literalType","literalMarkerType","rawType","stringType","balance","enclosedBefore","raw","enclosed","enclosedEscape","rawEscape","factoryLabel","markerType","labelInside","labelEscape","factoryTitle","begin","escape","factoryWhitespace","tokenizeDefinition","titleBefore","tokenizeTitleBefore","labelAfter","markerAfter","destinationBefore","destinationAfter","afterWhitespace","beforeMarker","titleAfter","titleAfterOptionalWhitespace","hardBreakEscape","tokenizeHardBreakEscape","headingAtx","resolveHeadingAtx","tokenizeHeadingAtx","sequenceFurther","htmlBlockNames","htmlRawNames","htmlFlow","resolveToHtmlFlow","tokenizeHtmlFlow","blankLineBefore","tokenizeBlankLineBefore","nonLazyContinuationStart","tokenizeNonLazyContinuationStart","closingTag","buffer","markerB","declarationOpen","tagCloseStart","continuationDeclarationInside","tagName","commentOpenInside","cdataOpenInside","continuation","slash","basicSelfClosing","completeClosingTagAfter","completeAttributeNameBefore","completeEnd","completeAttributeName","completeAttributeNameAfter","completeAttributeValueBefore","completeAttributeValueQuoted","completeAttributeValueUnquoted","completeAttributeValueQuotedAfter","completeAfter","continuationCommentInside","continuationRawTagOpen","continuationClose","continuationCdataInside","continuationAfter","continuationStart","continuationStartNonLazy","continuationBefore","continuationRawEndTag","htmlText","tokenizeHtmlText","returnState","instruction","tagOpen","commentEnd","commentClose","lineEndingBefore","cdata","cdataClose","cdataEnd","instructionClose","tagClose","tagCloseBetween","tagOpenBetween","tagOpenAttributeName","tagOpenAttributeNameAfter","tagOpenAttributeValueBefore","tagOpenAttributeValueQuoted","tagOpenAttributeValueUnquoted","tagOpenAttributeValueQuotedAfter","lineEndingAfter","lineEndingAfterPrefix","labelEnd","resolveAllLabelEnd","resolveToLabelEnd","tokenizeLabelEnd","resourceConstruct","tokenizeResource","referenceFullConstruct","tokenizeReferenceFull","referenceCollapsedConstruct","tokenizeReferenceCollapsed","newEvents","media","labelStart","defined","labelEndNok","labelEndOk","referenceNotFull","resourceStart","resourceBefore","resourceOpen","resourceEnd","resourceDestinationAfter","resourceDestinationMissing","resourceBetween","resourceTitleAfter","referenceFull","referenceFullAfter","referenceFullMissing","referenceCollapsedStart","referenceCollapsedOpen","labelStartImage","tokenizeLabelStartImage","labelStartLink","tokenizeLabelStartLink","lineEnding","tokenizeLineEnding","thematicBreak","tokenizeThematicBreak","sequence","tokenizeListContinuation","tokenizeListEnd","tokenizeListStart","listItemPrefixWhitespaceConstruct","tokenizeListItemPrefixWhitespace","indentConstruct","tokenizeIndent","initialSize","kind","atMarker","onBlank","endOfPrefix","otherPrefix","notBlank","notInCurrentItem","setextUnderline","resolveToSetextUnderline","tokenizeSetextUnderline","heading","paragraph","flow","initializeFlow","atBlankEnding","afterConstruct","resolver","createResolver","initializeFactory","field","resolveAllLineSuffixes","initializeText","notText","extraResolver","resolveAllText","chunks","bufferIndex","tabs","chunk","contentInitial","flowInitial","insideSpan","resolveText","disable","createTokenizer","parser","initialize","columnStart","resolveAllConstructs","constructFactory","onsuccessfulconstruct","onsuccessfulcheck","consume","defineSkip","sliceSerialize","sliceStream","write","main","addResult","expandTabs","serializeChunks","sliceChunks","_bufferIndex","_index","line","accountForPotentialSkip","chunkIndex","go","fields","construct","onreturn","bogusState","listOfConstructs","constructIndex","currentConstruct","handleListOfConstructs","handleMapOfConstructs","map","handleConstruct","startPoint","startPrevious","startCurrentConstruct","startEventsIndex","startStack","restore","startBufferIndex","endIndex","endBufferIndex","view","head","atTab","parse","defaultConstructs","creator","postprocess","preprocess","atCarriageReturn","preprocessor","encoding","endPosition","characterEscapeOrReference","decodeString","decode","$1","$2","hex","fromMarkdown","compiler","opener","link","onenterdata","codeFlow","emphasis","hardBreak","listItem","onenterlistitemvalue","onenterlistordered","onenterreference","strong","closer","onexitatxheadingsequence","onexitautolinkemail","onexitautolinkprotocol","onexitdata","onexitcharacterreferencemarker","onexitcharacterreferencevalue","onexitcharacterreference","onexitcodefenced","onexitcodefencedfence","onexitcodefencedfenceinfo","onexitcodefencedfencemeta","onexitcodeindented","onexitcodetext","onexitdefinitiondestinationstring","onexitdefinitionlabelstring","onexitdefinitiontitlestring","onexithardbreak","onexithtmlflow","onexithtmltext","onexitimage","onexitlabel","onexitlabeltext","onexitlineending","onexitlink","onexitreferencestring","onexitresourcedestinationstring","onexitresourcetitlestring","onexitresource","onexitsetextheading","onexitsetextheadinglinesequence","onexitsetextheadingtext","configure","compile","resume","listStack","prepareList","defaultOnError","length","containerBalance","listSpread","firstBlankLineIndex","tailIndex","tailEvent","and","errorHandler","onExitError","ancestor","depth","siblings","referenceType","fragment","combined","remarkParse","doc","blockquote","strikethrough","footnoteReference","clobberPrefix","safeId","counter","reuseCounter","sup","revert","subtype","suffix","contents","imageReference","inlineCode","linkReference","results","loose","listLoose","listItemLoose","spread","table","rows","firstRow","tableContent","tableRow","align","cellIndex","tableCell","tab","trimLines","last","trimLine","handlers","ignore","VOID","PRIMITIVE","ARRAY","OBJECT","DATE","REGEXP","MAP","SET","ERROR","BIGINT","env","deserializer","as","unpair","arr","flags","deserialize","serialized","EMPTY","keys","typeOf","asString","shouldSkip","TYPE","serializer","strict","json","pair","entries","serialize","lossy","structuredClone$1","any","defaultFootnoteBackContent","rereferenceIndex","defaultFootnoteBackLabel","referenceIndex","footer","footnoteBackContent","footnoteBackLabel","footnoteLabel","footnoteLabelTagName","footnoteLabelProperties","listItems","backReferences","counts","tailTail","structuredClone","convert","castFactory","anyFactory","propsFactory","typeFactory","tests","checkAsRecord","nodeAsRecord","testFunction","looksLikeANode","CONTINUE","EXIT","SKIP","visitParents","visitor","reverse","is","parents","visit","subresult","grandparents","toResult","nodeAsParent","testOrVisitor","visitorOrReverse","maybeReverse","overload","createState","definitionById","footnoteById","footnoteCounts","defaultHandlers","applyData","patch","handle","shallow","defaultUnknownHandler","nodes","trimMarkdownSpaceStart","hName","hChildren","hProperties","toHast","foot","remarkRehype","destination","file","hastTree","bail","hasOwn","toStr","defineProperty","gOPD","isArray","hasOwnConstructor","hasIsPrototypeOf","setProperty","getProperty","extend","src","copyIsArray","clone","deep","prototype","trough","fns","pipeline","middlewareIndex","middelware","middleware","wrapped","fnExpectsCallback","exception","then","minpath","basename","dirname","extname","join","assertPath","seenNonSlash","firstNonSlashEnd","extnameIndex","unmatchedSlash","startPart","startDot","preDotState","joined","absolute","normalizeString","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","minproc","cwd","isUrl","fileUrlOrPath","urlToPath","getPathFromURLPosix","third","order","VFile","isUint8Array","assertNonEmpty","assertPart","stem","part","CallableInstance","proto","apply","Processor","attacher","assertUnfrozen","transformer","realFile","vfile","assertParser","assertCompiler","executor","parseTree","realDone","compileTree","compileResult","looksLikeAValue","assertDone","assertNode","transformers","outputTree","resultingTree","attachers","namespace","addPlugin","addList","addPreset","add","plugin","plugins","entryIndex","primary","currentPrimary","isPlainObj","unified","frozen","asyncName","looksLikeAVFile","changelog","emptyPlugins","emptyRemarkRehypeOptions","safeProtocol","deprecations","Markdown","processor","createProcessor","createFile","post","rehypePlugins","remarkPlugins","remarkRehypeOptions","allowedElements","allowElement","components","disallowedElements","skipHtml","unwrapDisallowed","urlTransform","defaultUrlTransform","deprecation","transform","colon","questionMark","numberSign","TruncatedText","maxLength","tooltipEnabled","isTooltipOpen","setIsTooltipOpen","truncatedText","CalendarErrorType","isCalendarSupported","isMobile","hasWebShare","isDesktop","formatEventForCalendar","eventDate","startTime","endTime","startDate","startHour","startMinute","endDate","endHour","endMinute","formatDate","formatText","addToCalendar","icalEvent","iosError","shareError","ArtistDescription","isExpanded","setIsExpanded","teaser","fullText","truncated","lastSpaceIndex","showExpandOption","toggleExpand","ReactMarkdown","ChevronUp","ChevronDown","EventDetails","isOpen","setSavedEvents","calendarSupported","setCalendarSupported","relatedEvents","setRelatedEvents","currentSavedEvents","eventsAtSameLocation","isSaved","saved","navigateToMap","handleContribute","toggleSaveEvent","handleAddToCalendar","isEventSaved","BookmarkCheck","photo","videoUrl","embedUrl","videoId","ampersandPosition","validateEvent","validateLocation","formatValidationErrors","initialState","initialEvents","initialLocations","_DataService","updatedEvent","validationResult","updatedLocation","newEvent","newLocation","savedLocations","parsedLocations","eventsData","parsedEvents","exportData","jsonData","importedData","DataService","dataService","useData","unsubscribe","getEvents","getEventById","getLocationById","getEventsByLocationId","updateEvent","updateLocation","addEvent","addLocation","removeEvent","removeLocation","importData","useEvents","useLocations","Map","mapLocations","setMapLocations","setSavedEventIds","selectedEvent","setSelectedEvent","setActiveLocation","setHighlightedLocation","setUserPosition","userGpsPosition","setUserGpsPosition","mapScale","setMapScale","navigationTarget","setNavigationTarget","showLocationFeatures","setShowLocationFeatures","locationPermissionRequested","setLocationPermissionRequested","isDevelopmentEnvironment","useMemo","mergedLocations","savedLoc","savedIds","handleSaveEvent","highlightId","fromEvent","fromHistory","searchParams","highlightParam","locationParam","eventParam","locationIdToHighlight","locationIdToUse","locationToHighlight","handleLocationClick","markLocationAsVisited","visited","updatedLocations","getLocationEvents","eventsWithThisLocation","visitedCount","totalCount","reactivateLocation","totalDx","totalDy","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","EventFilter","onFilterChange","currentFilter","ImageIcon","Music","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","EventCard","onEventClick","onSaveClick","Clock","Program","setCurrentFilter","handleFilterChange","filter","filterEvents","startMinutes","timeRange","sortByStartTime","ArrowLeft","calendarService","successCount","errorCount","eventKey","aboutInfo","associationInfo","teamMembers","About","Instagram","Twitter","member","Heart","Users","Donate","NotFound","SplashScreen","isFirstVisit","animationComplete","setAnimationComplete","logoVariants","Input","NAME","Root","labelVariants","LabelPrimitive.Root","EXPORT_VERSION","exportAllData","exportEvents","exportEventsToCSV","csv","importedEvents","importedLocations","errorFields","importEventsFromCSV","csvData","missingHeaders","header","parseCSVLine","currentValue","insideQuotes","importedCount","ImportExportPanel","fileInputRef","csvInputRef","handleExportAll","downloadFile","handleExportEvents","handleExportEventsCSV","handleImport","reader","handleImportCSV","filename","Textarea","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","CHECKBOX_NAME","createCheckboxContext","createCheckboxScope","CheckboxProvider","useCheckboxContext","Checkbox","__scopeCheckbox","checkedProp","defaultChecked","required","form","checkboxProps","button","setButton","hasConsumerStoppedPropagationRef","isFormControl","setChecked","initialCheckedStateRef","form2","reset","getState","prevChecked","BubbleInput","CheckboxIndicator","indicatorProps","control","bubbles","inputProps","usePrevious","controlSize","useSize","inputProto","defaultCheckedRef","Indicator","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","byteToHex","unsafeStringify","getRandomValues","rnds8","rng","randomUUID","native","v4","buf","rnds","EventForm","onSuccess","editingEvent","formData","setFormData","uuidv4","setErrors","isSubmitting","setIsSubmitting","submitMessage","setSubmitMessage","handleInputChange","prev","newErrors","handleSelectChange","selectedLocation","handleDayChange","currentDays","newDays","validateForm","handleSubmit","eventData","ADMIN_PIN","AdminLogin","onLogin","password","setPassword","setError","attempts","setAttempts","Lock","FIREBASE_CONFIG","fetchCommunityEntries","firebaseData","firebaseEntries","submitContribution","finalImageUrl","publicIdMatch","deleteCommunityEntry","entryId","getStoredEntries","stored","saveEntries","restoreEntry","updatedEntries","restoreCommunityEntry","toDate","argStr","constructFrom","millisecondsInWeek","millisecondsInDay","defaultOptions","getDefaultOptions","startOfWeek","weekStartsOn","_date","diff","startOfISOWeek","getISOWeekYear","year","fourthOfJanuaryOfNextYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","startOfDay","getTimezoneOffsetInMilliseconds","utcDate","differenceInCalendarDays","dateLeft","dateRight","startOfDayLeft","startOfDayRight","timestampLeft","timestampRight","startOfISOWeekYear","fourthOfJanuary","isDate","isValid","startOfYear","cleanDate","formatDistanceLocale","formatDistance","tokenValue","buildFormatLongFn","dateFormats","timeFormats","dateTimeFormats","formatLong","formatRelativeLocale","formatRelative","_baseDate","buildLocalizeFn","valuesArray","defaultWidth","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","rem100","localize","quarter","buildMatchFn","matchPattern","matchResult","matchedString","parsePatterns","findIndex","findKey","buildMatchPatternFn","parseResult","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","enUS","getDayOfYear","getISOWeek","getWeekYear","firstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","startOfWeekYear","firstWeek","getWeek","addLeadingZeros","targetLength","sign","lightFormatters","signedYear","month","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","era","signedWeekYear","weekYear","twoDigitYear","isoWeekYear","week","isoWeek","dayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","delimiter","absOffset","minutes","dateLongFormatter","timeLongFormatter","dateTimeLongFormatter","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","isProtectedWeekYearToken","warnOrThrowProtectedError","format","_message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","formatStr","locale","defaultLocale","originalDate","parts","substring","firstCharacter","longFormatter","cleanEscapedString","formatterOptions","formatter","matched","unit","feminineUnits","LONG_MONTHS_TOKENS","fr","CommunityManagement","setEntries","loading","setLoading","deleting","setDeleting","restoring","setRestoring","loadEntries","handleDelete","handleRestore","dateString","Loader","renderEntries","renderArchivedEntries","entriesToRender","deletingId","onDelete","CheckCircle","XCircle","Trash","basePath","restoringId","onRestore","Admin","coordinates","setCoordinates","mapClicked","setMapClicked","isAuthenticated","setIsAuthenticated","handleLocationSelect","handleMapClick","testCoordinatesOnMap","handleUpdateCoordinates","locationToUpdate","updateResult","locationEvents","testLocations","exportLocations","handleLogin","clearLocalStorage","resetOnboarding","SavedEvents","notificationDate","setNotificationDate","setNotificationTime","activeEvent","setActiveEvent","eventDetailsOpen","setEventDetailsOpen","showFirstSavedCelebration","setShowFirstSavedCelebration","showMultipleSavedCelebration","setShowMultipleSavedCelebration","showNotificationCelebration","setShowNotificationCelebration","celebrationsShown","shownCelebrations","handleRemoveEvent","updatedEvents","handleSetNotification","notificationDateTime","formatEventDate","Bell","Trash2","eventDay","dayIndex","reminderDate","eventTime","AudioContext","useAudio","useContext","useAnalytics","previousPath","Onboarding","currentSlide","setCurrentSlide","isNavigating","setIsNavigating","setUserInteracted","currentSlideData","slides","nextSlide","prevSlide","handleFinish","handleDragEnd","handleVideoPlay","handleVideoPause","handleVideoEnded","desc","useStateMachine","machine","React.useReducer","SCROLL_AREA_NAME","createScrollAreaContext","createScrollAreaScope","ScrollAreaProvider","useScrollAreaContext","ScrollArea","React2.forwardRef","__scopeScrollArea","scrollHideDelay","scrollAreaProps","scrollArea","setScrollArea","React2.useState","viewport","setViewport","scrollbarX","setScrollbarX","scrollbarY","setScrollbarY","cornerWidth","setCornerWidth","cornerHeight","setCornerHeight","scrollbarXEnabled","setScrollbarXEnabled","scrollbarYEnabled","setScrollbarYEnabled","VIEWPORT_NAME","ScrollAreaViewport","nonce","viewportProps","React2.useRef","getSubtree","children2","SCROLLBAR_NAME","ScrollAreaScrollbar","scrollbarProps","onScrollbarXEnabledChange","onScrollbarYEnabledChange","isHorizontal","React2.useEffect","ScrollAreaScrollbarHover","ScrollAreaScrollbarScroll","ScrollAreaScrollbarAuto","ScrollAreaScrollbarVisible","visible","setVisible","hideTimer","handlePointerEnter","handlePointerLeave","debounceScrollEnd","useDebounceCallback","send","scrollDirection","prevScrollPos","scrollPos","isOverflowX","isOverflowY","useResizeObserver","orientation","thumbRef","pointerOffsetRef","sizes","setSizes","thumbRatio","getThumbRatio","commonProps","thumb","pointerPos","getScrollPosition","getScrollPositionFromPointer","ScrollAreaScrollbarX","getThumbOffsetFromScroll","ScrollAreaScrollbarY","onSizesChange","computedStyle","setComputedStyle","ScrollAreaScrollbarImpl","getThumbSize","maxScrollPos","isScrollingWithinScrollbarBounds","toInt","ScrollbarProvider","useScrollbarContext","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize","scrollbar","setScrollbar","rectRef","prevWebkitUserSelectRef","handleWheelScroll","handleThumbPositionChange","handleDragScroll","handleWheel","THUMB_NAME","ScrollAreaThumb","thumbProps","scrollbarContext","ScrollAreaThumbImpl","scrollAreaContext","composedRef","removeUnlinkedScrollListenerRef","addUnlinkedScrollListener","thumbRect","CORNER_NAME","ScrollAreaCorner","hasBothScrollbarsVisible","ScrollAreaCornerImpl","cornerProps","setWidth","setHeight","hasSize","height2","width2","viewportSize","contentSize","ratio","scrollbarPadding","thumbSize","pointerOffset","thumbSizePx","thumbCenter","thumbOffsetFromEnd","minPointerPos","maxPointerPos","scrollRange","linearScale","maxThumbPos","scrollClampRange","scrollWithoutMomentum","clamp","prevPosition","rAF","isHorizontalScroll","isVerticalScroll","handleCallback","debounceTimerRef","React2.useCallback","useLayoutEffect","resizeObserver","firstChild","React2.Children","React2.cloneElement","Viewport","Corner","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","PAGE_KEYS","ARROW_KEYS","BACK_KEYS","SLIDER_NAME","createSliderContext","createSliderScope","SliderProvider","useSliderContext","Slider","minStepsBetweenThumbs","defaultValue","onValueCommit","inverted","sliderProps","thumbRefs","valueIndexToChangeRef","SliderOrientation","SliderHorizontal","SliderVertical","setValues","value2","valuesBeforeSlideStartRef","handleSlideStart","closestIndex","getClosestValueIndex","updateValues","handleSlideMove","handleSlideEnd","prevValue","atIndex","commit","decimalCount","getDecimalCount","snapToStep","roundValue","nextValue","prevValues","nextValues","getNextSortedValues","hasMinStepsBetweenValues","hasChanged","stepDirection","multiplier","stepInDirection","SliderOrientationProvider","useSliderOrientationContext","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown","slider","setSlider","isDirectionLTR","isSlidingFromLeft","getValueFromPointer","SliderImpl","isBackKey","sliderRef","isSlidingFromBottom","__scopeSlider","onHomeKeyDown","onEndKeyDown","TRACK_NAME","SliderTrack","trackProps","RANGE_NAME","SliderRange","rangeProps","valuesCount","percentages","convertValueToPercentage","offsetStart","offsetEnd","SliderThumb","setThumb","SliderThumbImpl","percent","getLabel","orientationSize","thumbInBoundsOffset","getThumbInBoundsOffset","setValue","percentage","totalValues","distances","closestDistance","halfWidth","getStepsBetweenValues","minStepsBetweenValues","stepsBetweenValues","rounder","Track","Range","Thumb","SliderPrimitive.Root","SliderPrimitive.Track","SliderPrimitive.Range","SliderPrimitive.Thumb","LocationHistory","imagesLoading","setImagesLoading","audioRef","isPlaying","setIsPlaying","setDuration","currentTime","setCurrentTime","audioLoading","setAudioLoading","locationIdFromState","locationFromState","processedNames","sortedLocations","setSelectedLocation","selectedLocationData","togglePlayPause","handleTimeUpdate","handleLoadedMetadata","handleSliderChange","formatTime","time","seconds","Pause","Play","historyContent","referencedLocation","Analytics","activeTab","setActiveTab","analyticsData","setAnalyticsData","handleExportData","dataStr","dataUri","exportFileDefaultName","linkElement","Download","BarChart3","Activity","LineChart","PieChart","PageContainer","PageHeader","subtitle","isCheckBoxInput","isDateObject","isNullOrUndefined","isObjectType","getEventValue","getNodeParentName","isNameInFieldArray","names","tempObject","prototypeCopy","isWeb","cloneObject","compact","isUndefined","get","isBoolean","isKey","stringToPath","tempPath","objValue","EVENTS","VALIDATION_MODE","INPUT_VALIDATION_RULES","HookFormContext","useFormContext","getProxyFormState","formState","localProxyFormState","isRoot","_key","isEmptyObject","shouldRenderFormState","formStateData","_proxyFormState","updateFormState","convertToArrayPayload","shouldSubscribeByName","signalName","currentName","useSubscribe","_props","subscription","isString","generateWatchOutput","_names","formValues","isGlobal","useWatch","methods","_name","updateValue","appendErrors","validateAllFieldCriteria","getValidationModes","isWatched","isBlurEvent","watchName","iterateFieldsByAction","fieldsNames","abortEarly","currentField","updateFieldArrayRootError","fieldArrayErrors","isFileInput","isFunction","isHTMLElement","owner","isMessage","isRadioInput","isRegex","defaultResult","validResult","getCheckboxValue","option","defaultReturn","getRadioValue","getValidateError","getValueAndMessage","validationData","validateField","shouldUseNativeValidation","isFieldArray","minLength","validate","valueAsNumber","mount","inputValue","inputRef","setCustomValidity","isRadio","isCheckBox","isRadioOrCheckbox","isEmpty","appendErrorsCurry","getMinMaxMessage","exceedMax","maxLengthMessage","minLengthMessage","maxType","minType","exceedMin","maxOutput","minOutput","valueNumber","valueDate","convertTimeToDate","isTime","isWeek","maxLengthOutput","minLengthOutput","patternValue","validateError","baseGet","updatePath","isEmptyArray","unset","paths","childObject","createSubject","isPrimitive","object1","object2","keys1","keys2","val1","val2","isMultipleSelect","live","objectHasFunction","markFieldsDirty","isParentNodeArray","getDirtyFieldsFromDefaultValues","dirtyFieldsFromValues","getDirtyFields","defaultValues","getFieldValueAs","valueAsDate","setValueAs","getFieldValue","getResolverOptions","_fields","criteriaMode","getRuleValue","rule","ASYNC_FUNCTION","hasPromiseValidation","fieldReference","validateFunction","hasValidation","schemaErrorLookup","foundError","skipValidation","isTouched","isSubmitted","reValidateMode","unsetEmptyArray","createFormControl","_formState","_defaultValues","_formValues","_state","delayErrorCallback","_subjects","validationModeBeforeSubmit","validationModeAfterSubmit","shouldDisplayAllAssociatedErrors","wait","_updateValid","shouldUpdateValid","_executeSchema","executeBuiltInValidation","_updateIsValidating","isValidating","_updateFieldArray","shouldSetValues","shouldUpdateFieldsAndState","fieldValues","touchedFields","_getDirty","updateErrors","_setErrors","updateValidAndValue","shouldSkipSetValueAs","setFieldValue","updateTouchAndDirty","fieldValue","shouldDirty","shouldRender","shouldUpdateField","isPreviousDirty","disabledField","isCurrentFieldPristine","isPreviousFieldTouched","shouldRenderByError","fieldState","previousFieldError","updatedFormState","executeSchemaAndUpdateState","shouldOnlyCheckValid","isFieldArrayRoot","isPromiseFunction","fieldError","_removeUnmounted","unregister","getValues","_getWatch","_getFieldArray","optionRef","checkboxRef","radioRef","fieldKey","cloneValue","onChange","isFieldValueUpdated","getCurrentFieldValue","_updateIsFieldValueUpdated","shouldSkipValidation","watched","previousErrorLookupResult","errorLookupResult","_focusInput","fieldNames","getFieldState","clearErrors","inputName","currentError","currentRef","restOfErrorTree","watch","payload","_updateDisabledField","register","disabledIsDefined","fieldRef","radioOrCheckbox","_focusError","_disableForm","onValid","onInvalid","onValidError","resetField","_reset","keepStateOptions","updatedValues","cloneUpdatedValues","isEmptyResetValues","fieldsToCheck","useForm","_formControl","_values","isDirty","alertVariants","Alert","AlertTitle","AlertDescription","scopeName","createContextScopeDeps","defaultContexts","createContext3","rootComponentName","defaultContext","BaseContext","Context","useContext2","consumerName","React.useContext","createScope","scopeContexts","contexts","composeContextScopes","scopes","baseScope","scopeHooks","createScope2","overrideScopes","nextScopes","nextScopes2","useScope","currentScope","PROGRESS_NAME","DEFAULT_MAX","createProgressContext","createProgressScope","ProgressProvider","useProgressContext","Progress","__scopeProgress","valueProp","maxProp","getValueLabel","defaultGetValueLabel","progressProps","isValidMaxNumber","getInvalidMaxError","isValidValueNumber","getInvalidValueError","valueLabel","getProgressState","ProgressIndicator","maxValue","propValue","ProgressPrimitive.Root","ProgressPrimitive.Indicator","compressImage","maxWidth","maxHeight","quality","maxSizeKB","newWidth","newHeight","calculateDimensions","mimeType","finalBlob","reduceQualityUntilSize","originalWidth","originalHeight","widthRatio","heightRatio","initialQuality","validateImageFile","formatFileSize","timeoutId","debouncedFunc","useAutoSave","debouncedSaveRef","saveToLocalStorage","dataToSave","serializedData","loadFromLocalStorage","parsed","maxAge","clearDraft","ContributionForm","onSubmit","setIsSubmitted","imagePreview","setImagePreview","contributionContext","setContributionContext","selectedEventId","setSelectedEventId","selectedLocationId","setSelectedLocationId","isCompressing","setIsCompressing","compressionProgress","setCompressionProgress","compressionResult","setCompressionResult","showDraftNotification","setShowDraftNotification","watchedFields","loadDraft","hasDraft","handleImageChange","validation","progressInterval","compressionError","processSubmit","hasImage","Upload","LazyImage","alt","placeholderSrc","blurDataURL","onLoad","priority","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","imgRef","observerRef","handleLoad","handleError","defaultBlurDataURL","GalleryGrid","onEntryClick","itemVariants","LEFT","RIGHT","UP","DOWN","defaultProps","mouseMove","mouseUp","touchEnd","touchMove","touchStart","absX","absY","deltaX","deltaY","rotateXYByAngle","angleInRadians","getHandlers","handlerProps","onStart","isTouch","onMove","onUp","xy","velocity","vxvy","delta","cancelablePageSwipe","onEnd","onSwipedDir","cleanUpMouse","attachTouch","baseOptions","tls","addState","updateTransientState","previousProps","useSwipeable","trackMouse","transientState","transientProps","defaultKey","stateSetter","LocalImage","fallbackSrc","imageSrc","setImageSrc","retryCount","setRetryCount","imageId","base64Data","objectURL","absoluteFallbackSrc","span","EntryDetail","onNavigate","canGoPrevious","canGoNext","handlePrevious","handleNext","swipeHandlers","overlayVariants","modalVariants","AnimatePresence","ChevronLeft","PullToRefresh","onRefresh","isRefreshing","setIsRefreshing","pullDistance","setPullDistance","isPulling","setIsPulling","startY","setStartY","handleRefresh","handleTouchMove","currentY","resistance","handleMouseDown","handleGlobalMouseMove","handleGlobalMouseUp","shouldTrigger","progress","RefreshCw","CommunityGallery","setFilter","lastKnownCount","setLastKnownCount","selectedEntry","setSelectedEntry","selectedIndex","setSelectedIndex","showNewNotification","newCount","interval","handleNewContribution","prevEntries","filteredEntries","MessageSquare","Filter","HistoricalGallery","photos","setPhotos","selectedPhoto","setSelectedPhoto","loadPhotos","photoList","openPhotoModal","closePhotoModal","navigatePhoto","newIndex","handleKeyPress","Galleries","handleGalleryClick","galleryType","History","sendTestEvent","index_esm","sendGtagTestEvent","runAnalyticsDiagnostics","supported","isFirebaseInitialized","hasMeasurementId","hasFirebaseDebug","hasDebugMode","hasGtmDebug","hasGtag","potentialBlockers","checkForBlockers","blockers","TEMPORARY","requestFS","runAndLogDiagnostics","AnalyticsDebugger","eventLog","setEventLog","debugMode","setDebugMode","urlParams","setUrlParams","diagnosticResults","setDiagnosticResults","runningDiagnostic","setRunningDiagnostic","handleSendTestEvent","handleSendPageView","handleSendOnboardingComplete","handleSendMapInteraction","handleSendCustomEvent","addDebugParams","clearLogs","handleRunDiagnostic","diagnosticResult","queryClient","AnimatedRoutes","prevPathRef","hasSeenOnboarding","setHasSeenOnboarding","handleStorageChange","showSplash","setShowSplash","handleSplashComplete","secondaryRoutes","isSwipeablePage","renderRouteElement","Routes","Route","Navigate","route","AppContent","achievementEvent","App","celebration","setCelebration","handleInternalAchievement","customEvent","handleGlobalAchievement","navEntries","nav","loadTime","paintObserver","fidObserver","HashRouter","initErrorHandlingSystem"],"ignoreList":[0,2,3,4,5,6,7,8,9,10,11,15,16,17,21,22,26,27,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,72,73,75,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,232,238,240,241,242,243,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,295,297,303,305,306,313],"sources":["../../node_modules/react-dom/client.js","../../src/services/errorTracking.ts","../../node_modules/@firebase/util/dist/postinstall.mjs","../../node_modules/@firebase/util/dist/index.esm2017.js","../../node_modules/@firebase/component/dist/esm/index.esm2017.js","../../node_modules/@firebase/logger/dist/esm/index.esm2017.js","../../node_modules/idb/build/wrap-idb-value.js","../../node_modules/idb/build/index.js","../../node_modules/@firebase/app/dist/esm/index.esm2017.js","../../node_modules/firebase/app/dist/esm/index.esm.js","../../node_modules/@firebase/installations/dist/esm/index.esm2017.js","../../node_modules/@firebase/analytics/dist/esm/index.esm2017.js","../../src/services/firebaseConfig.ts","../../src/services/firebaseAnalytics.ts","../../src/hooks/use-toast.ts","../../node_modules/clsx/dist/clsx.mjs","../../node_modules/class-variance-authority/dist/index.mjs","../../node_modules/tailwind-merge/dist/bundle-mjs.mjs","../../src/lib/utils.ts","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../node_modules/tween-functions/index.js","../../node_modules/react-confetti/dist/react-confetti.mjs","../../src/hooks/useWindowSize.ts","../../src/components/Celebration.tsx","../../src/services/achievements.ts","../../node_modules/next-themes/dist/index.mjs","../../node_modules/sonner/dist/index.mjs","../../src/components/ui/sonner.tsx","../../node_modules/@radix-ui/react-tooltip/dist/index.mjs","../../src/components/ui/tooltip.tsx","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../src/utils/logger.ts","../../src/contexts/NavigationContext.tsx","../../src/components/LoadingIndicator.tsx","../../src/contexts/LoadingContext.tsx","../../src/components/AnimatedPageTransition.tsx","../../src/utils/serviceWorkerRegistration.ts","../../src/utils/cacheManager.ts","../../src/data/artists.ts","../../src/data/locations.ts","../../src/data/events.ts","../../src/services/savedEvents.ts","../../src/services/offlineService.ts","../../src/hooks/useOfflineMode.ts","../../src/components/OfflineIndicator.tsx","../../src/components/ui/button.tsx","../../src/components/LocationActivator.tsx","../../src/components/AudioActivator.tsx","../../src/utils/imagePaths.ts","../../src/data/gpsCoordinates.ts","../../src/utils/gpsConverter.ts","../../src/utils/locationUtils.ts","../../src/services/toastService.ts","../../src/services/locationService.ts","../../src/components/UserLocation.tsx","../../src/components/NavigationGuideSimple.tsx","../../src/components/MapComponent.tsx","../../node_modules/@radix-ui/react-menu/dist/index.mjs","../../node_modules/@radix-ui/react-dropdown-menu/dist/index.mjs","../../src/components/ui/dropdown-menu.tsx","../../node_modules/qrcode.react/lib/esm/index.js","../../src/components/ui/dialog.tsx","../../src/components/ShareButton.tsx","../../src/components/BottomNavigation.tsx","../../src/services/contextualContributionService.ts","../../node_modules/comma-separated-tokens/index.js","../../node_modules/estree-util-is-identifier-name/lib/index.js","../../node_modules/hast-util-whitespace/lib/index.js","../../node_modules/property-information/lib/util/schema.js","../../node_modules/property-information/lib/util/merge.js","../../node_modules/property-information/lib/normalize.js","../../node_modules/property-information/lib/util/info.js","../../node_modules/property-information/lib/util/types.js","../../node_modules/property-information/lib/util/defined-info.js","../../node_modules/property-information/lib/util/create.js","../../node_modules/property-information/lib/aria.js","../../node_modules/property-information/lib/util/case-sensitive-transform.js","../../node_modules/property-information/lib/util/case-insensitive-transform.js","../../node_modules/property-information/lib/html.js","../../node_modules/property-information/lib/svg.js","../../node_modules/property-information/lib/xlink.js","../../node_modules/property-information/lib/xmlns.js","../../node_modules/property-information/lib/xml.js","../../node_modules/property-information/lib/hast-to-react.js","../../node_modules/property-information/lib/find.js","../../node_modules/property-information/index.js","../../node_modules/space-separated-tokens/index.js","../../node_modules/inline-style-parser/index.js","../../node_modules/style-to-object/cjs/index.js","../../node_modules/style-to-js/cjs/utilities.js","../../node_modules/style-to-js/cjs/index.js","../../node_modules/unist-util-position/lib/index.js","../../node_modules/unist-util-stringify-position/lib/index.js","../../node_modules/vfile-message/lib/index.js","../../node_modules/hast-util-to-jsx-runtime/lib/index.js","../../node_modules/html-url-attributes/lib/index.js","../../node_modules/mdast-util-to-string/lib/index.js","../../node_modules/decode-named-character-reference/index.dom.js","../../node_modules/micromark-util-chunked/index.js","../../node_modules/micromark-util-combine-extensions/index.js","../../node_modules/micromark-util-decode-numeric-character-reference/index.js","../../node_modules/micromark-util-normalize-identifier/index.js","../../node_modules/micromark-util-character/index.js","../../node_modules/micromark-util-sanitize-uri/index.js","../../node_modules/micromark-factory-space/index.js","../../node_modules/micromark/lib/initialize/content.js","../../node_modules/micromark/lib/initialize/document.js","../../node_modules/micromark-util-classify-character/index.js","../../node_modules/micromark-util-resolve-all/index.js","../../node_modules/micromark-core-commonmark/lib/attention.js","../../node_modules/micromark-core-commonmark/lib/autolink.js","../../node_modules/micromark-core-commonmark/lib/blank-line.js","../../node_modules/micromark-core-commonmark/lib/block-quote.js","../../node_modules/micromark-core-commonmark/lib/character-escape.js","../../node_modules/micromark-core-commonmark/lib/character-reference.js","../../node_modules/micromark-core-commonmark/lib/code-fenced.js","../../node_modules/micromark-core-commonmark/lib/code-indented.js","../../node_modules/micromark-core-commonmark/lib/code-text.js","../../node_modules/micromark-util-subtokenize/lib/splice-buffer.js","../../node_modules/micromark-util-subtokenize/index.js","../../node_modules/micromark-core-commonmark/lib/content.js","../../node_modules/micromark-factory-destination/index.js","../../node_modules/micromark-factory-label/index.js","../../node_modules/micromark-factory-title/index.js","../../node_modules/micromark-factory-whitespace/index.js","../../node_modules/micromark-core-commonmark/lib/definition.js","../../node_modules/micromark-core-commonmark/lib/hard-break-escape.js","../../node_modules/micromark-core-commonmark/lib/heading-atx.js","../../node_modules/micromark-util-html-tag-name/index.js","../../node_modules/micromark-core-commonmark/lib/html-flow.js","../../node_modules/micromark-core-commonmark/lib/html-text.js","../../node_modules/micromark-core-commonmark/lib/label-end.js","../../node_modules/micromark-core-commonmark/lib/label-start-image.js","../../node_modules/micromark-core-commonmark/lib/label-start-link.js","../../node_modules/micromark-core-commonmark/lib/line-ending.js","../../node_modules/micromark-core-commonmark/lib/thematic-break.js","../../node_modules/micromark-core-commonmark/lib/list.js","../../node_modules/micromark-core-commonmark/lib/setext-underline.js","../../node_modules/micromark/lib/initialize/flow.js","../../node_modules/micromark/lib/initialize/text.js","../../node_modules/micromark/lib/constructs.js","../../node_modules/micromark/lib/create-tokenizer.js","../../node_modules/micromark/lib/parse.js","../../node_modules/micromark/lib/postprocess.js","../../node_modules/micromark/lib/preprocess.js","../../node_modules/micromark-util-decode-string/index.js","../../node_modules/mdast-util-from-markdown/lib/index.js","../../node_modules/remark-parse/lib/index.js","../../node_modules/mdast-util-to-hast/lib/handlers/blockquote.js","../../node_modules/mdast-util-to-hast/lib/handlers/break.js","../../node_modules/mdast-util-to-hast/lib/handlers/code.js","../../node_modules/mdast-util-to-hast/lib/handlers/delete.js","../../node_modules/mdast-util-to-hast/lib/handlers/emphasis.js","../../node_modules/mdast-util-to-hast/lib/handlers/footnote-reference.js","../../node_modules/mdast-util-to-hast/lib/handlers/heading.js","../../node_modules/mdast-util-to-hast/lib/handlers/html.js","../../node_modules/mdast-util-to-hast/lib/revert.js","../../node_modules/mdast-util-to-hast/lib/handlers/image-reference.js","../../node_modules/mdast-util-to-hast/lib/handlers/image.js","../../node_modules/mdast-util-to-hast/lib/handlers/inline-code.js","../../node_modules/mdast-util-to-hast/lib/handlers/link-reference.js","../../node_modules/mdast-util-to-hast/lib/handlers/link.js","../../node_modules/mdast-util-to-hast/lib/handlers/list-item.js","../../node_modules/mdast-util-to-hast/lib/handlers/list.js","../../node_modules/mdast-util-to-hast/lib/handlers/paragraph.js","../../node_modules/mdast-util-to-hast/lib/handlers/root.js","../../node_modules/mdast-util-to-hast/lib/handlers/strong.js","../../node_modules/mdast-util-to-hast/lib/handlers/table.js","../../node_modules/mdast-util-to-hast/lib/handlers/table-row.js","../../node_modules/mdast-util-to-hast/lib/handlers/table-cell.js","../../node_modules/trim-lines/index.js","../../node_modules/mdast-util-to-hast/lib/handlers/text.js","../../node_modules/mdast-util-to-hast/lib/handlers/thematic-break.js","../../node_modules/mdast-util-to-hast/lib/handlers/index.js","../../node_modules/@ungap/structured-clone/esm/types.js","../../node_modules/@ungap/structured-clone/esm/deserialize.js","../../node_modules/@ungap/structured-clone/esm/serialize.js","../../node_modules/@ungap/structured-clone/esm/index.js","../../node_modules/mdast-util-to-hast/lib/footer.js","../../node_modules/unist-util-is/lib/index.js","../../node_modules/unist-util-visit-parents/lib/index.js","../../node_modules/unist-util-visit/lib/index.js","../../node_modules/mdast-util-to-hast/lib/state.js","../../node_modules/mdast-util-to-hast/lib/index.js","../../node_modules/remark-rehype/lib/index.js","../../node_modules/bail/index.js","../../node_modules/extend/index.js","../../node_modules/is-plain-obj/index.js","../../node_modules/trough/lib/index.js","../../node_modules/vfile/lib/minpath.browser.js","../../node_modules/vfile/lib/minproc.browser.js","../../node_modules/vfile/lib/minurl.shared.js","../../node_modules/vfile/lib/minurl.browser.js","../../node_modules/vfile/lib/index.js","../../node_modules/unified/lib/callable-instance.js","../../node_modules/unified/lib/index.js","../../node_modules/react-markdown/lib/index.js","../../src/components/TruncatedText.tsx","../../src/services/calendarService.ts","../../src/components/EventDetails.tsx","../../src/services/validationService.ts","../../src/services/dataService.ts","../../src/hooks/useData.ts","../../src/pages/Map.tsx","../../src/components/ui/tabs.tsx","../../src/components/EventFilter.tsx","../../src/components/ui/card.tsx","../../src/components/EventCard.tsx","../../src/pages/Program.tsx","../../src/data/about.ts","../../src/data/association.ts","../../src/data/team.ts","../../src/pages/About.tsx","../../src/pages/Donate.tsx","../../src/pages/NotFound.tsx","../../src/pages/SplashScreen.tsx","../../src/components/ui/input.tsx","../../node_modules/@radix-ui/react-label/dist/index.mjs","../../src/components/ui/label.tsx","../../src/services/importExportService.ts","../../src/components/ImportExportPanel.tsx","../../src/components/ui/textarea.tsx","../../src/components/ui/select.tsx","../../node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../src/components/ui/checkbox.tsx","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/components/EventForm.tsx","../../src/components/AdminLogin.tsx","../../src/services/cloudinaryService.ts","../../src/services/communityServiceBridge.ts","../../node_modules/date-fns/toDate.mjs","../../node_modules/date-fns/constructFrom.mjs","../../node_modules/date-fns/constants.mjs","../../node_modules/date-fns/_lib/defaultOptions.mjs","../../node_modules/date-fns/startOfWeek.mjs","../../node_modules/date-fns/startOfISOWeek.mjs","../../node_modules/date-fns/getISOWeekYear.mjs","../../node_modules/date-fns/startOfDay.mjs","../../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.mjs","../../node_modules/date-fns/differenceInCalendarDays.mjs","../../node_modules/date-fns/startOfISOWeekYear.mjs","../../node_modules/date-fns/isDate.mjs","../../node_modules/date-fns/isValid.mjs","../../node_modules/date-fns/startOfYear.mjs","../../node_modules/date-fns/locale/en-US/_lib/formatDistance.mjs","../../node_modules/date-fns/locale/_lib/buildFormatLongFn.mjs","../../node_modules/date-fns/locale/en-US/_lib/formatLong.mjs","../../node_modules/date-fns/locale/en-US/_lib/formatRelative.mjs","../../node_modules/date-fns/locale/_lib/buildLocalizeFn.mjs","../../node_modules/date-fns/locale/en-US/_lib/localize.mjs","../../node_modules/date-fns/locale/_lib/buildMatchFn.mjs","../../node_modules/date-fns/locale/_lib/buildMatchPatternFn.mjs","../../node_modules/date-fns/locale/en-US/_lib/match.mjs","../../node_modules/date-fns/locale/en-US.mjs","../../node_modules/date-fns/getDayOfYear.mjs","../../node_modules/date-fns/getISOWeek.mjs","../../node_modules/date-fns/getWeekYear.mjs","../../node_modules/date-fns/startOfWeekYear.mjs","../../node_modules/date-fns/getWeek.mjs","../../node_modules/date-fns/_lib/addLeadingZeros.mjs","../../node_modules/date-fns/_lib/format/lightFormatters.mjs","../../node_modules/date-fns/_lib/format/formatters.mjs","../../node_modules/date-fns/_lib/format/longFormatters.mjs","../../node_modules/date-fns/_lib/protectedTokens.mjs","../../node_modules/date-fns/format.mjs","../../node_modules/date-fns/locale/fr/_lib/formatDistance.mjs","../../node_modules/date-fns/locale/fr/_lib/formatLong.mjs","../../node_modules/date-fns/locale/fr/_lib/formatRelative.mjs","../../node_modules/date-fns/locale/fr/_lib/localize.mjs","../../node_modules/date-fns/locale/fr/_lib/match.mjs","../../node_modules/date-fns/locale/fr.mjs","../../src/components/CommunityManagement.tsx","../../src/pages/Admin.tsx","../../src/pages/SavedEvents.tsx","../../src/components/AudioPlayer.tsx","../../src/hooks/useAnalytics.ts","../../src/pages/Onboarding.tsx","../../node_modules/@radix-ui/react-scroll-area/dist/index.mjs","../../src/components/ui/scroll-area.tsx","../../node_modules/@radix-ui/react-slider/dist/index.mjs","../../src/components/ui/slider.tsx","../../src/pages/LocationHistory.tsx","../../src/pages/Analytics.tsx","../../src/components/PageContainer.tsx","../../src/components/PageHeader.tsx","../../node_modules/react-hook-form/dist/index.esm.mjs","../../src/components/ui/alert.tsx","../../node_modules/@radix-ui/react-progress/node_modules/@radix-ui/react-context/dist/index.mjs","../../node_modules/@radix-ui/react-progress/dist/index.mjs","../../src/components/ui/progress.tsx","../../src/utils/imageCompression.ts","../../src/hooks/useAutoSave.ts","../../src/components/community/ContributionForm.tsx","../../src/components/ui/LazyImage.tsx","../../src/components/community/GalleryGrid.tsx","../../node_modules/react-swipeable/es/index.js","../../src/components/community/LocalImage.tsx","../../src/components/community/EntryDetail.tsx","../../src/components/community/PullToRefresh.tsx","../../src/pages/CommunityGallery.tsx","../../src/pages/HistoricalGallery.tsx","../../src/pages/Galleries.tsx","../../src/debug/firebaseDebug.ts","../../src/debug/gtag-debug.ts","../../src/debug/analytics-diagnostics.ts","../../src/debug/AnalyticsDebugger.tsx","../../src/App.tsx","../../src/utils/errorHandling.ts","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\r\n * Service de suivi des erreurs\r\n * Ce service permet de collecter des informations sur les erreurs rencontrées\r\n * par les utilisateurs et de les envoyer à un service de suivi\r\n */\r\n\r\n// Type pour les erreurs collectées\r\nexport interface ErrorInfo {\r\n  message: string;\r\n  stack?: string;\r\n  url: string;\r\n  timestamp: string;\r\n  userAgent: string;\r\n  path: string;\r\n  componentName?: string;\r\n  additionalInfo?: Record<string, any>;\r\n}\r\n\r\n// Stockage local des erreurs\r\nconst ERROR_STORAGE_KEY = 'app_errors';\r\nconst MAX_STORED_ERRORS = 50;\r\n\r\n/**\r\n * Capturer une erreur et la stocker localement\r\n */\r\nexport const captureError = (\r\n  error: Error | string,\r\n  componentName?: string,\r\n  additionalInfo?: Record<string, any>\r\n): void => {\r\n  try {\r\n    const message = typeof error === 'string' ? error : error.message;\r\n    const stack = typeof error === 'string' ? undefined : error.stack;\r\n    \r\n    const errorInfo: ErrorInfo = {\r\n      message,\r\n      stack,\r\n      url: window.location.href,\r\n      timestamp: new Date().toISOString(),\r\n      userAgent: navigator.userAgent,\r\n      path: window.location.pathname,\r\n      componentName,\r\n      additionalInfo\r\n    };\r\n    \r\n    // Récupérer les erreurs existantes\r\n    const storedErrorsStr = localStorage.getItem(ERROR_STORAGE_KEY);\r\n    let storedErrors: ErrorInfo[] = [];\r\n    \r\n    if (storedErrorsStr) {\r\n      try {\r\n        storedErrors = JSON.parse(storedErrorsStr);\r\n        if (!Array.isArray(storedErrors)) storedErrors = [];\r\n      } catch (e) {\r\n        console.error('Erreur lors de la lecture des erreurs stockées:', e);\r\n        storedErrors = [];\r\n      }\r\n    }\r\n    \r\n    // Ajouter la nouvelle erreur\r\n    storedErrors.push(errorInfo);\r\n    \r\n    // Limiter le nombre d'erreurs stockées\r\n    if (storedErrors.length > MAX_STORED_ERRORS) {\r\n      storedErrors = storedErrors.slice(-MAX_STORED_ERRORS);\r\n    }\r\n    \r\n    // Sauvegarder les erreurs\r\n    localStorage.setItem(ERROR_STORAGE_KEY, JSON.stringify(storedErrors));\r\n    \r\n    // Afficher l'erreur dans la console pour le débogage\r\n    console.error('Erreur capturée:', errorInfo);\r\n  } catch (e) {\r\n    console.error('Erreur lors de la capture d\\'erreur:', e);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer toutes les erreurs stockées\r\n */\r\nexport const getStoredErrors = (): ErrorInfo[] => {\r\n  try {\r\n    const storedErrorsStr = localStorage.getItem(ERROR_STORAGE_KEY);\r\n    if (!storedErrorsStr) return [];\r\n    \r\n    const storedErrors = JSON.parse(storedErrorsStr);\r\n    return Array.isArray(storedErrors) ? storedErrors : [];\r\n  } catch (e) {\r\n    console.error('Erreur lors de la récupération des erreurs stockées:', e);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Effacer toutes les erreurs stockées\r\n */\r\nexport const clearStoredErrors = (): void => {\r\n  localStorage.removeItem(ERROR_STORAGE_KEY);\r\n};\r\n\r\n// Configuration EmailJS\r\nconst EMAIL_SERVICE_ID = 'service_3l31ox3';\r\nconst EMAIL_TEMPLATE_ID = 'template_q7nh8h2';\r\n\r\n/**\r\n * Initialiser EmailJS\r\n * À appeler au démarrage de l'application\r\n */\r\nexport const initEmailJS = async (): Promise<void> => {\r\n  try {\r\n    const emailjs = await import('@emailjs/browser');\r\n    // Vous n'avez pas besoin de spécifier le USER_ID ici\r\n    // EmailJS le récupérera depuis le script chargé dans index.html\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'initialisation d\\'EmailJS:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Vérifier et envoyer les erreurs automatiquement\r\n * À appeler périodiquement ou lors d'événements spécifiques\r\n */\r\nexport const checkAndSendErrors = async (): Promise<void> => {\r\n  const errors = getStoredErrors();\r\n  \r\n  // Envoyer les erreurs si leur nombre dépasse un certain seuil\r\n  if (errors.length >= 5) {\r\n    await sendErrorsToTrackingService();\r\n  } else if (errors.length > 0) {\r\n    console.log(`${errors.length} erreur(s) en attente d'envoi`);\r\n  }\r\n};\r\n\r\n/**\r\n * Envoyer les erreurs stockées à un service de suivi via EmailJS\r\n */\r\nexport const sendErrorsToTrackingService = async (): Promise<boolean> => {\r\n  try {\r\n    const errors = getStoredErrors();\r\n    if (errors.length === 0) return true;\r\n    \r\n    // Vérifier si nous sommes en production\r\n    const isProd = import.meta.env.PROD;\r\n    \r\n    if (isProd) {\r\n      console.log(`Envoi de ${errors.length} erreurs par email`);\r\n      \r\n      // Importer EmailJS dynamiquement\r\n      const emailjs = await import('@emailjs/browser');\r\n      \r\n      // Préparer les données pour le modèle d'email\r\n      const templateParams = {\r\n        errors_json: JSON.stringify(errors, null, 2),\r\n        error_count: errors.length,\r\n        timestamp: new Date().toISOString(),\r\n        user_agent: navigator.userAgent,\r\n        app_version: '1.0.0', // À mettre à jour avec la version de votre application\r\n        app_name: 'Collectif Feydeau'\r\n      };\r\n      \r\n      // Envoyer l'email avec la clé publique explicite\r\n      // Même si elle est déjà initialisée dans index.html, la fournir ici pour s'assurer qu'elle est disponible\r\n      const PUBLIC_KEY = 'HoNWMyqrINGzjeK6E';\r\n      const response = await emailjs.send(\r\n        EMAIL_SERVICE_ID,\r\n        EMAIL_TEMPLATE_ID,\r\n        templateParams,\r\n        PUBLIC_KEY\r\n      );\r\n      \r\n      if (response.status === 200) {\r\n        console.log('Erreurs envoyées avec succès');\r\n        clearStoredErrors();\r\n        return true;\r\n      } else {\r\n        throw new Error(`Erreur lors de l'envoi: ${response.text}`);\r\n      }\r\n    } else {\r\n      // En développement, juste afficher les erreurs\r\n      console.log('Mode développement - Simulation d\\'envoi de', errors.length, 'erreurs');\r\n      console.table(errors);\r\n      clearStoredErrors();\r\n      return true;\r\n    }\r\n  } catch (e) {\r\n    console.error('Erreur lors de l\\'envoi des erreurs:', e);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Configurer un gestionnaire global d'erreurs non capturées\r\n */\r\nexport const setupGlobalErrorHandler = (): void => {\r\n  window.onerror = (message, source, lineno, colno, error) => {\r\n    captureError(\r\n      error || String(message),\r\n      'GlobalErrorHandler',\r\n      { source, lineno, colno }\r\n    );\r\n    return false; // Permettre au gestionnaire d'erreurs par défaut de s'exécuter également\r\n  };\r\n  \r\n  window.addEventListener('unhandledrejection', (event) => {\r\n    captureError(\r\n      event.reason || 'Promesse rejetée non gérée',\r\n      'UnhandledRejection'\r\n    );\r\n  });\r\n};\r\n\r\n/**\r\n * Créer un composant d'erreur pour React Error Boundary\r\n */\r\nexport const createErrorBoundaryHandler = (componentName: string) => {\r\n  return (error: Error, info: { componentStack: string }) => {\r\n    captureError(error, componentName, { componentStack: info.componentStack });\r\n  };\r\n};\r\n","const getDefaultsFromPostinstall = () => (undefined);\nexport { getDefaultsFromPostinstall };","import { getDefaultsFromPostinstall } from './postinstall.mjs';\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\nconst CONSTANTS = {\n    /**\n     * @define {boolean} Whether this is the client Node.js SDK.\n     */\n    NODE_CLIENT: false,\n    /**\n     * @define {boolean} Whether this is the Admin Node.js SDK.\n     */\n    NODE_ADMIN: false,\n    /**\n     * Firebase SDK Version\n     */\n    SDK_VERSION: '${JSCORE_VERSION}'\n};\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Throws an error if the provided assertion is falsy\n */\nconst assert = function (assertion, message) {\n    if (!assertion) {\n        throw assertionError(message);\n    }\n};\n/**\n * Returns an Error object suitable for throwing.\n */\nconst assertionError = function (message) {\n    return new Error('Firebase Database (' +\n        CONSTANTS.SDK_VERSION +\n        ') INTERNAL ASSERT FAILED: ' +\n        message);\n};\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst stringToByteArray$1 = function (str) {\n    // TODO(user): Use native implementations if/when available\n    const out = [];\n    let p = 0;\n    for (let i = 0; i < str.length; i++) {\n        let c = str.charCodeAt(i);\n        if (c < 128) {\n            out[p++] = c;\n        }\n        else if (c < 2048) {\n            out[p++] = (c >> 6) | 192;\n            out[p++] = (c & 63) | 128;\n        }\n        else if ((c & 0xfc00) === 0xd800 &&\n            i + 1 < str.length &&\n            (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\n            // Surrogate Pair\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n            out[p++] = (c >> 18) | 240;\n            out[p++] = ((c >> 12) & 63) | 128;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n        else {\n            out[p++] = (c >> 12) | 224;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n    }\n    return out;\n};\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes) {\n    // TODO(user): Use native implementations if/when available\n    const out = [];\n    let pos = 0, c = 0;\n    while (pos < bytes.length) {\n        const c1 = bytes[pos++];\n        if (c1 < 128) {\n            out[c++] = String.fromCharCode(c1);\n        }\n        else if (c1 > 191 && c1 < 224) {\n            const c2 = bytes[pos++];\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n        }\n        else if (c1 > 239 && c1 < 365) {\n            // Surrogate Pair\n            const c2 = bytes[pos++];\n            const c3 = bytes[pos++];\n            const c4 = bytes[pos++];\n            const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n                0x10000;\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n        }\n        else {\n            const c2 = bytes[pos++];\n            const c3 = bytes[pos++];\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n        }\n    }\n    return out.join('');\n};\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\n// TODO(dlarocque): Define this as a class, since we no longer target ES5.\nconst base64 = {\n    /**\n     * Maps bytes to characters.\n     */\n    byteToCharMap_: null,\n    /**\n     * Maps characters to bytes.\n     */\n    charToByteMap_: null,\n    /**\n     * Maps bytes to websafe characters.\n     * @private\n     */\n    byteToCharMapWebSafe_: null,\n    /**\n     * Maps websafe characters to bytes.\n     * @private\n     */\n    charToByteMapWebSafe_: null,\n    /**\n     * Our default alphabet, shared between\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n     */\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n    /**\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n     */\n    get ENCODED_VALS() {\n        return this.ENCODED_VALS_BASE + '+/=';\n    },\n    /**\n     * Our websafe alphabet.\n     */\n    get ENCODED_VALS_WEBSAFE() {\n        return this.ENCODED_VALS_BASE + '-_.';\n    },\n    /**\n     * Whether this browser supports the atob and btoa functions. This extension\n     * started at Mozilla but is now implemented by many browsers. We use the\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\n     * but still allowing the standard per-browser compilations.\n     *\n     */\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\n    /**\n     * Base64-encode an array of bytes.\n     *\n     * @param input An array of bytes (numbers with\n     *     value in [0, 255]) to encode.\n     * @param webSafe Boolean indicating we should use the\n     *     alternative alphabet.\n     * @return The base64 encoded string.\n     */\n    encodeByteArray(input, webSafe) {\n        if (!Array.isArray(input)) {\n            throw Error('encodeByteArray takes an array as a parameter');\n        }\n        this.init_();\n        const byteToCharMap = webSafe\n            ? this.byteToCharMapWebSafe_\n            : this.byteToCharMap_;\n        const output = [];\n        for (let i = 0; i < input.length; i += 3) {\n            const byte1 = input[i];\n            const haveByte2 = i + 1 < input.length;\n            const byte2 = haveByte2 ? input[i + 1] : 0;\n            const haveByte3 = i + 2 < input.length;\n            const byte3 = haveByte3 ? input[i + 2] : 0;\n            const outByte1 = byte1 >> 2;\n            const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n            let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n            let outByte4 = byte3 & 0x3f;\n            if (!haveByte3) {\n                outByte4 = 64;\n                if (!haveByte2) {\n                    outByte3 = 64;\n                }\n            }\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\n        }\n        return output.join('');\n    },\n    /**\n     * Base64-encode a string.\n     *\n     * @param input A string to encode.\n     * @param webSafe If true, we should use the\n     *     alternative alphabet.\n     * @return The base64 encoded string.\n     */\n    encodeString(input, webSafe) {\n        // Shortcut for Mozilla browsers that implement\n        // a native base64 encoder in the form of \"btoa/atob\"\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n            return btoa(input);\n        }\n        return this.encodeByteArray(stringToByteArray$1(input), webSafe);\n    },\n    /**\n     * Base64-decode a string.\n     *\n     * @param input to decode.\n     * @param webSafe True if we should use the\n     *     alternative alphabet.\n     * @return string representing the decoded value.\n     */\n    decodeString(input, webSafe) {\n        // Shortcut for Mozilla browsers that implement\n        // a native base64 encoder in the form of \"btoa/atob\"\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n            return atob(input);\n        }\n        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n    },\n    /**\n     * Base64-decode a string.\n     *\n     * In base-64 decoding, groups of four characters are converted into three\n     * bytes.  If the encoder did not apply padding, the input length may not\n     * be a multiple of 4.\n     *\n     * In this case, the last group will have fewer than 4 characters, and\n     * padding will be inferred.  If the group has one or two characters, it decodes\n     * to one byte.  If the group has three characters, it decodes to two bytes.\n     *\n     * @param input Input to decode.\n     * @param webSafe True if we should use the web-safe alphabet.\n     * @return bytes representing the decoded value.\n     */\n    decodeStringToByteArray(input, webSafe) {\n        this.init_();\n        const charToByteMap = webSafe\n            ? this.charToByteMapWebSafe_\n            : this.charToByteMap_;\n        const output = [];\n        for (let i = 0; i < input.length;) {\n            const byte1 = charToByteMap[input.charAt(i++)];\n            const haveByte2 = i < input.length;\n            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n            ++i;\n            const haveByte3 = i < input.length;\n            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n            ++i;\n            const haveByte4 = i < input.length;\n            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n            ++i;\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n                throw new DecodeBase64StringError();\n            }\n            const outByte1 = (byte1 << 2) | (byte2 >> 4);\n            output.push(outByte1);\n            if (byte3 !== 64) {\n                const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n                output.push(outByte2);\n                if (byte4 !== 64) {\n                    const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n                    output.push(outByte3);\n                }\n            }\n        }\n        return output;\n    },\n    /**\n     * Lazy static initialization function. Called before\n     * accessing any of the static map variables.\n     * @private\n     */\n    init_() {\n        if (!this.byteToCharMap_) {\n            this.byteToCharMap_ = {};\n            this.charToByteMap_ = {};\n            this.byteToCharMapWebSafe_ = {};\n            this.charToByteMapWebSafe_ = {};\n            // We want quick mappings back and forth, so we precompute two maps.\n            for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n                // Be forgiving when decoding and correctly decode both encodings.\n                if (i >= this.ENCODED_VALS_BASE.length) {\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n                }\n            }\n        }\n    }\n};\n/**\n * An error encountered while decoding base64 string.\n */\nclass DecodeBase64StringError extends Error {\n    constructor() {\n        super(...arguments);\n        this.name = 'DecodeBase64StringError';\n    }\n}\n/**\n * URL-safe base64 encoding\n */\nconst base64Encode = function (str) {\n    const utf8Bytes = stringToByteArray$1(str);\n    return base64.encodeByteArray(utf8Bytes, true);\n};\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nconst base64urlEncodeWithoutPadding = function (str) {\n    // Use base64url encoding and remove padding in the end (dot characters).\n    return base64Encode(str).replace(/\\./g, '');\n};\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nconst base64Decode = function (str) {\n    try {\n        return base64.decodeString(str, true);\n    }\n    catch (e) {\n        console.error('base64Decode failed: ', e);\n    }\n    return null;\n};\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nfunction deepCopy(value) {\n    return deepExtend(undefined, value);\n}\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n *\n * Note: we don't merge __proto__ to prevent prototype pollution\n */\nfunction deepExtend(target, source) {\n    if (!(source instanceof Object)) {\n        return source;\n    }\n    switch (source.constructor) {\n        case Date:\n            // Treat Dates like scalars; if the target date object had any child\n            // properties - they will be lost!\n            const dateValue = source;\n            return new Date(dateValue.getTime());\n        case Object:\n            if (target === undefined) {\n                target = {};\n            }\n            break;\n        case Array:\n            // Always copy the array source and overwrite the target.\n            target = [];\n            break;\n        default:\n            // Not a plain Object - treat it as a scalar.\n            return source;\n    }\n    for (const prop in source) {\n        // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\n        if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\n            continue;\n        }\n        target[prop] = deepExtend(target[prop], source[prop]);\n    }\n    return target;\n}\nfunction isValidKey(key) {\n    return key !== '__proto__';\n}\n\n/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nfunction getGlobal() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('Unable to locate global object.');\n}\n\n/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = () => {\n    if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n        return;\n    }\n    const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n    if (defaultsJsonString) {\n        return JSON.parse(defaultsJsonString);\n    }\n};\nconst getDefaultsFromCookie = () => {\n    if (typeof document === 'undefined') {\n        return;\n    }\n    let match;\n    try {\n        match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n    }\n    catch (e) {\n        // Some environments such as Angular Universal SSR have a\n        // `document` object but error on accessing `document.cookie`.\n        return;\n    }\n    const decoded = match && base64Decode(match[1]);\n    return decoded && JSON.parse(decoded);\n};\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nconst getDefaults = () => {\n    try {\n        return (getDefaultsFromPostinstall() ||\n            getDefaultsFromGlobal() ||\n            getDefaultsFromEnvVariable() ||\n            getDefaultsFromCookie());\n    }\n    catch (e) {\n        /**\n         * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n         * to any environment case we have not accounted for. Log to\n         * info instead of swallowing so we can find these unknown cases\n         * and add paths for them if needed.\n         */\n        console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n        return;\n    }\n};\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nconst getDefaultEmulatorHost = (productName) => { var _a, _b; return (_b = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.emulatorHosts) === null || _b === void 0 ? void 0 : _b[productName]; };\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nconst getDefaultEmulatorHostnameAndPort = (productName) => {\n    const host = getDefaultEmulatorHost(productName);\n    if (!host) {\n        return undefined;\n    }\n    const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n    if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n        throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n    }\n    // eslint-disable-next-line no-restricted-globals\n    const port = parseInt(host.substring(separatorIndex + 1), 10);\n    if (host[0] === '[') {\n        // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n        return [host.substring(1, separatorIndex - 1), port];\n    }\n    else {\n        return [host.substring(0, separatorIndex), port];\n    }\n};\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nconst getDefaultAppConfig = () => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.config; };\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nconst getExperimentalSetting = (name) => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a[`_${name}`]; };\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass Deferred {\n    constructor() {\n        this.reject = () => { };\n        this.resolve = () => { };\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n    /**\n     * Our API internals are not promisified and cannot because our callback APIs have subtle expectations around\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\n     */\n    wrapCallback(callback) {\n        return (error, value) => {\n            if (error) {\n                this.reject(error);\n            }\n            else {\n                this.resolve(value);\n            }\n            if (typeof callback === 'function') {\n                // Attaching noop handler just in case developer wasn't expecting\n                // promises\n                this.promise.catch(() => { });\n                // Some of our callbacks don't expect a value and our own tests\n                // assert that the parameter length is 1\n                if (callback.length === 1) {\n                    callback(error);\n                }\n                else {\n                    callback(error, value);\n                }\n            }\n        };\n    }\n}\n\n/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Checks whether host is a cloud workstation or not.\n * @public\n */\nfunction isCloudWorkstation(host) {\n    return host.endsWith('.cloudworkstations.dev');\n}\n/**\n * Makes a fetch request to the given server.\n * Mostly used for forwarding cookies in Firebase Studio.\n * @public\n */\nasync function pingServer(endpoint) {\n    const result = await fetch(endpoint, {\n        credentials: 'include'\n    });\n    return result.ok;\n}\n\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction createMockUserToken(token, projectId) {\n    if (token.uid) {\n        throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\n    }\n    // Unsecured JWTs use \"none\" as the algorithm.\n    const header = {\n        alg: 'none',\n        type: 'JWT'\n    };\n    const project = projectId || 'demo-project';\n    const iat = token.iat || 0;\n    const sub = token.sub || token.user_id;\n    if (!sub) {\n        throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n    }\n    const payload = Object.assign({ \n        // Set all required fields to decent defaults\n        iss: `https://securetoken.google.com/${project}`, aud: project, iat, exp: iat + 3600, auth_time: iat, sub, user_id: sub, firebase: {\n            sign_in_provider: 'custom',\n            identities: {}\n        } }, token);\n    // Unsecured JWTs use the empty string as a signature.\n    const signature = '';\n    return [\n        base64urlEncodeWithoutPadding(JSON.stringify(header)),\n        base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n        signature\n    ].join('.');\n}\nconst emulatorStatus = {};\n// Checks whether any products are running on an emulator\nfunction getEmulatorSummary() {\n    const summary = {\n        prod: [],\n        emulator: []\n    };\n    for (const key of Object.keys(emulatorStatus)) {\n        if (emulatorStatus[key]) {\n            summary.emulator.push(key);\n        }\n        else {\n            summary.prod.push(key);\n        }\n    }\n    return summary;\n}\nfunction getOrCreateEl(id) {\n    let parentDiv = document.getElementById(id);\n    let created = false;\n    if (!parentDiv) {\n        parentDiv = document.createElement('div');\n        parentDiv.setAttribute('id', id);\n        created = true;\n    }\n    return { created, element: parentDiv };\n}\nlet previouslyDismissed = false;\n/**\n * Updates Emulator Banner. Primarily used for Firebase Studio\n * @param name\n * @param isRunningEmulator\n * @public\n */\nfunction updateEmulatorBanner(name, isRunningEmulator) {\n    if (typeof window === 'undefined' ||\n        typeof document === 'undefined' ||\n        !isCloudWorkstation(window.location.host) ||\n        emulatorStatus[name] === isRunningEmulator ||\n        emulatorStatus[name] || // If already set to use emulator, can't go back to prod.\n        previouslyDismissed) {\n        return;\n    }\n    emulatorStatus[name] = isRunningEmulator;\n    function prefixedId(id) {\n        return `__firebase__banner__${id}`;\n    }\n    const bannerId = '__firebase__banner';\n    const summary = getEmulatorSummary();\n    const showError = summary.prod.length > 0;\n    function tearDown() {\n        const element = document.getElementById(bannerId);\n        if (element) {\n            element.remove();\n        }\n    }\n    function setupBannerStyles(bannerEl) {\n        bannerEl.style.display = 'flex';\n        bannerEl.style.background = '#7faaf0';\n        bannerEl.style.position = 'fixed';\n        bannerEl.style.bottom = '5px';\n        bannerEl.style.left = '5px';\n        bannerEl.style.padding = '.5em';\n        bannerEl.style.borderRadius = '5px';\n        bannerEl.style.alignItems = 'center';\n    }\n    function setupIconStyles(prependIcon, iconId) {\n        prependIcon.setAttribute('width', '24');\n        prependIcon.setAttribute('id', iconId);\n        prependIcon.setAttribute('height', '24');\n        prependIcon.setAttribute('viewBox', '0 0 24 24');\n        prependIcon.setAttribute('fill', 'none');\n        prependIcon.style.marginLeft = '-6px';\n    }\n    function setupCloseBtn() {\n        const closeBtn = document.createElement('span');\n        closeBtn.style.cursor = 'pointer';\n        closeBtn.style.marginLeft = '16px';\n        closeBtn.style.fontSize = '24px';\n        closeBtn.innerHTML = ' &times;';\n        closeBtn.onclick = () => {\n            previouslyDismissed = true;\n            tearDown();\n        };\n        return closeBtn;\n    }\n    function setupLinkStyles(learnMoreLink, learnMoreId) {\n        learnMoreLink.setAttribute('id', learnMoreId);\n        learnMoreLink.innerText = 'Learn more';\n        learnMoreLink.href =\n            'https://firebase.google.com/docs/studio/preview-apps#preview-backend';\n        learnMoreLink.setAttribute('target', '__blank');\n        learnMoreLink.style.paddingLeft = '5px';\n        learnMoreLink.style.textDecoration = 'underline';\n    }\n    function setupDom() {\n        const banner = getOrCreateEl(bannerId);\n        const firebaseTextId = prefixedId('text');\n        const firebaseText = document.getElementById(firebaseTextId) || document.createElement('span');\n        const learnMoreId = prefixedId('learnmore');\n        const learnMoreLink = document.getElementById(learnMoreId) ||\n            document.createElement('a');\n        const prependIconId = prefixedId('preprendIcon');\n        const prependIcon = document.getElementById(prependIconId) ||\n            document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        if (banner.created) {\n            // update styles\n            const bannerEl = banner.element;\n            setupBannerStyles(bannerEl);\n            setupLinkStyles(learnMoreLink, learnMoreId);\n            const closeBtn = setupCloseBtn();\n            setupIconStyles(prependIcon, prependIconId);\n            bannerEl.append(prependIcon, firebaseText, learnMoreLink, closeBtn);\n            document.body.appendChild(bannerEl);\n        }\n        if (showError) {\n            firebaseText.innerText = `Preview backend disconnected.`;\n            prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6013_33858)\">\n<path d=\"M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6013_33858\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n        }\n        else {\n            prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6083_34804)\">\n<path d=\"M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6083_34804\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n            firebaseText.innerText = 'Preview backend running in this workspace.';\n        }\n        firebaseText.setAttribute('id', firebaseTextId);\n    }\n    if (document.readyState === 'loading') {\n        window.addEventListener('DOMContentLoaded', setupDom);\n    }\n    else {\n        setupDom();\n    }\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nfunction getUA() {\n    if (typeof navigator !== 'undefined' &&\n        typeof navigator['userAgent'] === 'string') {\n        return navigator['userAgent'];\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nfunction isMobileCordova() {\n    return (typeof window !== 'undefined' &&\n        // @ts-ignore Setting up an broadly applicable index signature for Window\n        // just to deal with this case would probably be a bad idea.\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\n}\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nfunction isNode() {\n    var _a;\n    const forceEnvironment = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.forceEnvironment;\n    if (forceEnvironment === 'node') {\n        return true;\n    }\n    else if (forceEnvironment === 'browser') {\n        return false;\n    }\n    try {\n        return (Object.prototype.toString.call(global.process) === '[object process]');\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * Detect Browser Environment.\n * Note: This will return true for certain test frameworks that are incompletely\n * mimicking a browser, and should not lead to assuming all browser APIs are\n * available.\n */\nfunction isBrowser() {\n    return typeof window !== 'undefined' || isWebWorker();\n}\n/**\n * Detect Web Worker context.\n */\nfunction isWebWorker() {\n    return (typeof WorkerGlobalScope !== 'undefined' &&\n        typeof self !== 'undefined' &&\n        self instanceof WorkerGlobalScope);\n}\n/**\n * Detect Cloudflare Worker context.\n */\nfunction isCloudflareWorker() {\n    return (typeof navigator !== 'undefined' &&\n        navigator.userAgent === 'Cloudflare-Workers');\n}\nfunction isBrowserExtension() {\n    const runtime = typeof chrome === 'object'\n        ? chrome.runtime\n        : typeof browser === 'object'\n            ? browser.runtime\n            : undefined;\n    return typeof runtime === 'object' && runtime.id !== undefined;\n}\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nfunction isReactNative() {\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\n}\n/** Detects Electron apps. */\nfunction isElectron() {\n    return getUA().indexOf('Electron/') >= 0;\n}\n/** Detects Internet Explorer. */\nfunction isIE() {\n    const ua = getUA();\n    return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n/** Detects Universal Windows Platform apps. */\nfunction isUWP() {\n    return getUA().indexOf('MSAppHost/') >= 0;\n}\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nfunction isNodeSdk() {\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n/** Returns true if we are running in Safari. */\nfunction isSafari() {\n    return (!isNode() &&\n        !!navigator.userAgent &&\n        navigator.userAgent.includes('Safari') &&\n        !navigator.userAgent.includes('Chrome'));\n}\n/** Returns true if we are running in Safari or WebKit */\nfunction isSafariOrWebkit() {\n    return (!isNode() &&\n        !!navigator.userAgent &&\n        (navigator.userAgent.includes('Safari') ||\n            navigator.userAgent.includes('WebKit')) &&\n        !navigator.userAgent.includes('Chrome'));\n}\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nfunction isIndexedDBAvailable() {\n    try {\n        return typeof indexedDB === 'object';\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nfunction validateIndexedDBOpenable() {\n    return new Promise((resolve, reject) => {\n        try {\n            let preExist = true;\n            const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\n            const request = self.indexedDB.open(DB_CHECK_NAME);\n            request.onsuccess = () => {\n                request.result.close();\n                // delete database only when it doesn't pre-exist\n                if (!preExist) {\n                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n                }\n                resolve(true);\n            };\n            request.onupgradeneeded = () => {\n                preExist = false;\n            };\n            request.onerror = () => {\n                var _a;\n                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\n            };\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nfunction areCookiesEnabled() {\n    if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n        return false;\n    }\n    return true;\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // TypeScript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\nconst ERROR_NAME = 'FirebaseError';\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nclass FirebaseError extends Error {\n    constructor(\n    /** The error code for this error. */\n    code, message, \n    /** Custom data for this error. */\n    customData) {\n        super(message);\n        this.code = code;\n        this.customData = customData;\n        /** The custom name for all FirebaseErrors. */\n        this.name = ERROR_NAME;\n        // Fix For ES5\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        // TODO(dlarocque): Replace this with `new.target`: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n        //                   which we can now use since we no longer target ES5.\n        Object.setPrototypeOf(this, FirebaseError.prototype);\n        // Maintains proper stack trace for where our error was thrown.\n        // Only available on V8.\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, ErrorFactory.prototype.create);\n        }\n    }\n}\nclass ErrorFactory {\n    constructor(service, serviceName, errors) {\n        this.service = service;\n        this.serviceName = serviceName;\n        this.errors = errors;\n    }\n    create(code, ...data) {\n        const customData = data[0] || {};\n        const fullCode = `${this.service}/${code}`;\n        const template = this.errors[code];\n        const message = template ? replaceTemplate(template, customData) : 'Error';\n        // Service Name: Error message (service/code).\n        const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n        const error = new FirebaseError(fullCode, fullMessage, customData);\n        return error;\n    }\n}\nfunction replaceTemplate(template, data) {\n    return template.replace(PATTERN, (_, key) => {\n        const value = data[key];\n        return value != null ? String(value) : `<${key}?>`;\n    });\n}\nconst PATTERN = /\\{\\$([^}]+)}/g;\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nfunction jsonEval(str) {\n    return JSON.parse(str);\n}\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data JavaScript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nfunction stringify(data) {\n    return JSON.stringify(data);\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nconst decode = function (token) {\n    let header = {}, claims = {}, data = {}, signature = '';\n    try {\n        const parts = token.split('.');\n        header = jsonEval(base64Decode(parts[0]) || '');\n        claims = jsonEval(base64Decode(parts[1]) || '');\n        signature = parts[2];\n        data = claims['d'] || {};\n        delete claims['d'];\n    }\n    catch (e) { }\n    return {\n        header,\n        claims,\n        data,\n        signature\n    };\n};\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nconst isValidTimestamp = function (token) {\n    const claims = decode(token).claims;\n    const now = Math.floor(new Date().getTime() / 1000);\n    let validSince = 0, validUntil = 0;\n    if (typeof claims === 'object') {\n        if (claims.hasOwnProperty('nbf')) {\n            validSince = claims['nbf'];\n        }\n        else if (claims.hasOwnProperty('iat')) {\n            validSince = claims['iat'];\n        }\n        if (claims.hasOwnProperty('exp')) {\n            validUntil = claims['exp'];\n        }\n        else {\n            // token will expire after 24h by default\n            validUntil = validSince + 86400;\n        }\n    }\n    return (!!now &&\n        !!validSince &&\n        !!validUntil &&\n        now >= validSince &&\n        now <= validUntil);\n};\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nconst issuedAtTime = function (token) {\n    const claims = decode(token).claims;\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n        return claims['iat'];\n    }\n    return null;\n};\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nconst isValidFormat = function (token) {\n    const decoded = decode(token), claims = decoded.claims;\n    return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nconst isAdmin = function (token) {\n    const claims = decode(token).claims;\n    return typeof claims === 'object' && claims['admin'] === true;\n};\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction contains(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction safeGet(obj, key) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        return obj[key];\n    }\n    else {\n        return undefined;\n    }\n}\nfunction isEmpty(obj) {\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction map(obj, fn, contextObj) {\n    const res = {};\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            res[key] = fn.call(contextObj, obj[key], key, obj);\n        }\n    }\n    return res;\n}\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nfunction deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n    for (const k of aKeys) {\n        if (!bKeys.includes(k)) {\n            return false;\n        }\n        const aProp = a[k];\n        const bProp = b[k];\n        if (isObject(aProp) && isObject(bProp)) {\n            if (!deepEqual(aProp, bProp)) {\n                return false;\n            }\n        }\n        else if (aProp !== bProp) {\n            return false;\n        }\n    }\n    for (const k of bKeys) {\n        if (!aKeys.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isObject(thing) {\n    return thing !== null && typeof thing === 'object';\n}\n\n/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\n * @internal\n */\nfunction promiseWithTimeout(promise, timeInMS = 2000) {\n    const deferredPromise = new Deferred();\n    setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\n    promise.then(deferredPromise.resolve, deferredPromise.reject);\n    return deferredPromise.promise;\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nfunction querystring(querystringParams) {\n    const params = [];\n    for (const [key, value] of Object.entries(querystringParams)) {\n        if (Array.isArray(value)) {\n            value.forEach(arrayVal => {\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\n            });\n        }\n        else {\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n        }\n    }\n    return params.length ? '&' + params.join('&') : '';\n}\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nfunction querystringDecode(querystring) {\n    const obj = {};\n    const tokens = querystring.replace(/^\\?/, '').split('&');\n    tokens.forEach(token => {\n        if (token) {\n            const [key, value] = token.split('=');\n            obj[decodeURIComponent(key)] = decodeURIComponent(value);\n        }\n    });\n    return obj;\n}\n/**\n * Extract the query string part of a URL, including the leading question mark (if present).\n */\nfunction extractQuerystring(url) {\n    const queryStart = url.indexOf('?');\n    if (!queryStart) {\n        return '';\n    }\n    const fragmentStart = url.indexOf('#', queryStart);\n    return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nclass Sha1 {\n    constructor() {\n        /**\n         * Holds the previous values of accumulated variables a-e in the compress_\n         * function.\n         * @private\n         */\n        this.chain_ = [];\n        /**\n         * A buffer holding the partially computed hash result.\n         * @private\n         */\n        this.buf_ = [];\n        /**\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n         * as the message schedule in the docs.\n         * @private\n         */\n        this.W_ = [];\n        /**\n         * Contains data needed to pad messages less than 64 bytes.\n         * @private\n         */\n        this.pad_ = [];\n        /**\n         * @private {number}\n         */\n        this.inbuf_ = 0;\n        /**\n         * @private {number}\n         */\n        this.total_ = 0;\n        this.blockSize = 512 / 8;\n        this.pad_[0] = 128;\n        for (let i = 1; i < this.blockSize; ++i) {\n            this.pad_[i] = 0;\n        }\n        this.reset();\n    }\n    reset() {\n        this.chain_[0] = 0x67452301;\n        this.chain_[1] = 0xefcdab89;\n        this.chain_[2] = 0x98badcfe;\n        this.chain_[3] = 0x10325476;\n        this.chain_[4] = 0xc3d2e1f0;\n        this.inbuf_ = 0;\n        this.total_ = 0;\n    }\n    /**\n     * Internal compress helper function.\n     * @param buf Block to compress.\n     * @param offset Offset of the block in the buffer.\n     * @private\n     */\n    compress_(buf, offset) {\n        if (!offset) {\n            offset = 0;\n        }\n        const W = this.W_;\n        // get 16 big endian words\n        if (typeof buf === 'string') {\n            for (let i = 0; i < 16; i++) {\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n                // have a bug that turns the post-increment ++ operator into pre-increment\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\n                // correctness and which is affected by this bug, so I've removed all uses\n                // of post-increment ++ in which the result value is used.  We can revert\n                // this change once the Safari bug\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n                // most clients have been updated.\n                W[i] =\n                    (buf.charCodeAt(offset) << 24) |\n                        (buf.charCodeAt(offset + 1) << 16) |\n                        (buf.charCodeAt(offset + 2) << 8) |\n                        buf.charCodeAt(offset + 3);\n                offset += 4;\n            }\n        }\n        else {\n            for (let i = 0; i < 16; i++) {\n                W[i] =\n                    (buf[offset] << 24) |\n                        (buf[offset + 1] << 16) |\n                        (buf[offset + 2] << 8) |\n                        buf[offset + 3];\n                offset += 4;\n            }\n        }\n        // expand to 80 words\n        for (let i = 16; i < 80; i++) {\n            const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n        }\n        let a = this.chain_[0];\n        let b = this.chain_[1];\n        let c = this.chain_[2];\n        let d = this.chain_[3];\n        let e = this.chain_[4];\n        let f, k;\n        // TODO(user): Try to unroll this loop to speed up the computation.\n        for (let i = 0; i < 80; i++) {\n            if (i < 40) {\n                if (i < 20) {\n                    f = d ^ (b & (c ^ d));\n                    k = 0x5a827999;\n                }\n                else {\n                    f = b ^ c ^ d;\n                    k = 0x6ed9eba1;\n                }\n            }\n            else {\n                if (i < 60) {\n                    f = (b & c) | (d & (b | c));\n                    k = 0x8f1bbcdc;\n                }\n                else {\n                    f = b ^ c ^ d;\n                    k = 0xca62c1d6;\n                }\n            }\n            const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n            e = d;\n            d = c;\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n            b = a;\n            a = t;\n        }\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n    }\n    update(bytes, length) {\n        // TODO(johnlenz): tighten the function signature and remove this check\n        if (bytes == null) {\n            return;\n        }\n        if (length === undefined) {\n            length = bytes.length;\n        }\n        const lengthMinusBlock = length - this.blockSize;\n        let n = 0;\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\n        const buf = this.buf_;\n        let inbuf = this.inbuf_;\n        // The outer while loop should execute at most twice.\n        while (n < length) {\n            // When we have no data in the block to top up, we can directly process the\n            // input buffer (assuming it contains sufficient data). This gives ~25%\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n            // the data is provided in large chunks (or in multiples of 64 bytes).\n            if (inbuf === 0) {\n                while (n <= lengthMinusBlock) {\n                    this.compress_(bytes, n);\n                    n += this.blockSize;\n                }\n            }\n            if (typeof bytes === 'string') {\n                while (n < length) {\n                    buf[inbuf] = bytes.charCodeAt(n);\n                    ++inbuf;\n                    ++n;\n                    if (inbuf === this.blockSize) {\n                        this.compress_(buf);\n                        inbuf = 0;\n                        // Jump to the outer loop so we use the full-block optimization.\n                        break;\n                    }\n                }\n            }\n            else {\n                while (n < length) {\n                    buf[inbuf] = bytes[n];\n                    ++inbuf;\n                    ++n;\n                    if (inbuf === this.blockSize) {\n                        this.compress_(buf);\n                        inbuf = 0;\n                        // Jump to the outer loop so we use the full-block optimization.\n                        break;\n                    }\n                }\n            }\n        }\n        this.inbuf_ = inbuf;\n        this.total_ += length;\n    }\n    /** @override */\n    digest() {\n        const digest = [];\n        let totalBits = this.total_ * 8;\n        // Add pad 0x80 0x00*.\n        if (this.inbuf_ < 56) {\n            this.update(this.pad_, 56 - this.inbuf_);\n        }\n        else {\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n        }\n        // Add # bits.\n        for (let i = this.blockSize - 1; i >= 56; i--) {\n            this.buf_[i] = totalBits & 255;\n            totalBits /= 256; // Don't use bit-shifting here!\n        }\n        this.compress_(this.buf_);\n        let n = 0;\n        for (let i = 0; i < 5; i++) {\n            for (let j = 24; j >= 0; j -= 8) {\n                digest[n] = (this.chain_[i] >> j) & 255;\n                ++n;\n            }\n        }\n        return digest;\n    }\n}\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nfunction createSubscribe(executor, onNoObservers) {\n    const proxy = new ObserverProxy(executor, onNoObservers);\n    return proxy.subscribe.bind(proxy);\n}\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy {\n    /**\n     * @param executor Function which can make calls to a single Observer\n     *     as a proxy.\n     * @param onNoObservers Callback when count of Observers goes to zero.\n     */\n    constructor(executor, onNoObservers) {\n        this.observers = [];\n        this.unsubscribes = [];\n        this.observerCount = 0;\n        // Micro-task scheduling by calling task.then().\n        this.task = Promise.resolve();\n        this.finalized = false;\n        this.onNoObservers = onNoObservers;\n        // Call the executor asynchronously so subscribers that are called\n        // synchronously after the creation of the subscribe function\n        // can still receive the very first value generated in the executor.\n        this.task\n            .then(() => {\n            executor(this);\n        })\n            .catch(e => {\n            this.error(e);\n        });\n    }\n    next(value) {\n        this.forEachObserver((observer) => {\n            observer.next(value);\n        });\n    }\n    error(error) {\n        this.forEachObserver((observer) => {\n            observer.error(error);\n        });\n        this.close(error);\n    }\n    complete() {\n        this.forEachObserver((observer) => {\n            observer.complete();\n        });\n        this.close();\n    }\n    /**\n     * Subscribe function that can be used to add an Observer to the fan-out list.\n     *\n     * - We require that no event is sent to a subscriber synchronously to their\n     *   call to subscribe().\n     */\n    subscribe(nextOrObserver, error, complete) {\n        let observer;\n        if (nextOrObserver === undefined &&\n            error === undefined &&\n            complete === undefined) {\n            throw new Error('Missing Observer.');\n        }\n        // Assemble an Observer object when passed as callback functions.\n        if (implementsAnyMethods(nextOrObserver, [\n            'next',\n            'error',\n            'complete'\n        ])) {\n            observer = nextOrObserver;\n        }\n        else {\n            observer = {\n                next: nextOrObserver,\n                error,\n                complete\n            };\n        }\n        if (observer.next === undefined) {\n            observer.next = noop;\n        }\n        if (observer.error === undefined) {\n            observer.error = noop;\n        }\n        if (observer.complete === undefined) {\n            observer.complete = noop;\n        }\n        const unsub = this.unsubscribeOne.bind(this, this.observers.length);\n        // Attempt to subscribe to a terminated Observable - we\n        // just respond to the Observer with the final error or complete\n        // event.\n        if (this.finalized) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.task.then(() => {\n                try {\n                    if (this.finalError) {\n                        observer.error(this.finalError);\n                    }\n                    else {\n                        observer.complete();\n                    }\n                }\n                catch (e) {\n                    // nothing\n                }\n                return;\n            });\n        }\n        this.observers.push(observer);\n        return unsub;\n    }\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\n    // any unsubscribed Observer.\n    unsubscribeOne(i) {\n        if (this.observers === undefined || this.observers[i] === undefined) {\n            return;\n        }\n        delete this.observers[i];\n        this.observerCount -= 1;\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n            this.onNoObservers(this);\n        }\n    }\n    forEachObserver(fn) {\n        if (this.finalized) {\n            // Already closed by previous event....just eat the additional values.\n            return;\n        }\n        // Since sendOne calls asynchronously - there is no chance that\n        // this.observers will become undefined.\n        for (let i = 0; i < this.observers.length; i++) {\n            this.sendOne(i, fn);\n        }\n    }\n    // Call the Observer via one of it's callback function. We are careful to\n    // confirm that the observe has not been unsubscribed since this asynchronous\n    // function had been queued.\n    sendOne(i, fn) {\n        // Execute the callback asynchronously\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.task.then(() => {\n            if (this.observers !== undefined && this.observers[i] !== undefined) {\n                try {\n                    fn(this.observers[i]);\n                }\n                catch (e) {\n                    // Ignore exceptions raised in Observers or missing methods of an\n                    // Observer.\n                    // Log error to console. b/31404806\n                    if (typeof console !== 'undefined' && console.error) {\n                        console.error(e);\n                    }\n                }\n            }\n        });\n    }\n    close(err) {\n        if (this.finalized) {\n            return;\n        }\n        this.finalized = true;\n        if (err !== undefined) {\n            this.finalError = err;\n        }\n        // Proxy is no longer needed - garbage collect references\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.task.then(() => {\n            this.observers = undefined;\n            this.onNoObservers = undefined;\n        });\n    }\n}\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction async(fn, onError) {\n    return (...args) => {\n        Promise.resolve(true)\n            .then(() => {\n            fn(...args);\n        })\n            .catch((error) => {\n            if (onError) {\n                onError(error);\n            }\n        });\n    };\n}\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(obj, methods) {\n    if (typeof obj !== 'object' || obj === null) {\n        return false;\n    }\n    for (const method of methods) {\n        if (method in obj && typeof obj[method] === 'function') {\n            return true;\n        }\n    }\n    return false;\n}\nfunction noop() {\n    // do nothing\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nconst validateArgCount = function (fnName, minCount, maxCount, argCount) {\n    let argError;\n    if (argCount < minCount) {\n        argError = 'at least ' + minCount;\n    }\n    else if (argCount > maxCount) {\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n    }\n    if (argError) {\n        const error = fnName +\n            ' failed: Was called with ' +\n            argCount +\n            (argCount === 1 ? ' argument.' : ' arguments.') +\n            ' Expects ' +\n            argError +\n            '.';\n        throw new Error(error);\n    }\n};\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argName The name of the argument\n * @return The prefix to add to the error thrown for validation.\n */\nfunction errorPrefix(fnName, argName) {\n    return `${fnName} failed: ${argName} argument `;\n}\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nfunction validateNamespace(fnName, namespace, optional) {\n    if (optional && !namespace) {\n        return;\n    }\n    if (typeof namespace !== 'string') {\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\n        throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\n    }\n}\nfunction validateCallback(fnName, argumentName, \n// eslint-disable-next-line @typescript-eslint/ban-types\ncallback, optional) {\n    if (optional && !callback) {\n        return;\n    }\n    if (typeof callback !== 'function') {\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\n    }\n}\nfunction validateContextObject(fnName, argumentName, context, optional) {\n    if (optional && !context) {\n        return;\n    }\n    if (typeof context !== 'object' || context === null) {\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\n    }\n}\n\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in JavaScript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n/**\n * @param {string} str\n * @return {Array}\n */\nconst stringToByteArray = function (str) {\n    const out = [];\n    let p = 0;\n    for (let i = 0; i < str.length; i++) {\n        let c = str.charCodeAt(i);\n        // Is this the lead surrogate in a surrogate pair?\n        if (c >= 0xd800 && c <= 0xdbff) {\n            const high = c - 0xd800; // the high 10 bits.\n            i++;\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n            const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n            c = 0x10000 + (high << 10) + low;\n        }\n        if (c < 128) {\n            out[p++] = c;\n        }\n        else if (c < 2048) {\n            out[p++] = (c >> 6) | 192;\n            out[p++] = (c & 63) | 128;\n        }\n        else if (c < 65536) {\n            out[p++] = (c >> 12) | 224;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n        else {\n            out[p++] = (c >> 18) | 240;\n            out[p++] = ((c >> 12) & 63) | 128;\n            out[p++] = ((c >> 6) & 63) | 128;\n            out[p++] = (c & 63) | 128;\n        }\n    }\n    return out;\n};\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nconst stringLength = function (str) {\n    let p = 0;\n    for (let i = 0; i < str.length; i++) {\n        const c = str.charCodeAt(i);\n        if (c < 128) {\n            p++;\n        }\n        else if (c < 2048) {\n            p += 2;\n        }\n        else if (c >= 0xd800 && c <= 0xdbff) {\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n            p += 4;\n            i++; // skip trail surrogate.\n        }\n        else {\n            p += 3;\n        }\n    }\n    return p;\n};\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The amount of milliseconds to exponentially increase.\n */\nconst DEFAULT_INTERVAL_MILLIS = 1000;\n/**\n * The factor to backoff by.\n * Should be a number greater than 1.\n */\nconst DEFAULT_BACKOFF_FACTOR = 2;\n/**\n * The maximum milliseconds to increase to.\n *\n * <p>Visible for testing\n */\nconst MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n/**\n * The percentage of backoff time to randomize by.\n * See\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\n * for context.\n *\n * <p>Visible for testing\n */\nconst RANDOM_FACTOR = 0.5;\n/**\n * Based on the backoff method from\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\n */\nfunction calculateBackoffMillis(backoffCount, intervalMillis = DEFAULT_INTERVAL_MILLIS, backoffFactor = DEFAULT_BACKOFF_FACTOR) {\n    // Calculates an exponentially increasing value.\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\n    // and count to restore state.\n    const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\n    // A random \"fuzz\" to avoid waves of retries.\n    // Deviation: randomFactor is required.\n    const randomWait = Math.round(\n    // A fraction of the backoff value to add/subtract.\n    // Deviation: changes multiplication order to improve readability.\n    RANDOM_FACTOR *\n        currBaseValue *\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n        // if we add or subtract.\n        (Math.random() - 0.5) *\n        2);\n    // Limits backoff to max to avoid effectively permanent backoff.\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Provide English ordinal letters after a number\n */\nfunction ordinal(i) {\n    if (!Number.isFinite(i)) {\n        return `${i}`;\n    }\n    return i + indicator(i);\n}\nfunction indicator(i) {\n    i = Math.abs(i);\n    const cent = i % 100;\n    if (cent >= 10 && cent <= 20) {\n        return 'th';\n    }\n    const dec = i % 10;\n    if (dec === 1) {\n        return 'st';\n    }\n    if (dec === 2) {\n        return 'nd';\n    }\n    if (dec === 3) {\n        return 'rd';\n    }\n    return 'th';\n}\n\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getModularInstance(service) {\n    if (service && service._delegate) {\n        return service._delegate;\n    }\n    else {\n        return service;\n    }\n}\n\nexport { CONSTANTS, DecodeBase64StringError, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getDefaultAppConfig, getDefaultEmulatorHost, getDefaultEmulatorHostnameAndPort, getDefaults, getExperimentalSetting, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isCloudWorkstation, isCloudflareWorker, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isSafariOrWebkit, isUWP, isValidFormat, isValidTimestamp, isWebWorker, issuedAtTime, jsonEval, map, ordinal, pingServer, promiseWithTimeout, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, updateEmulatorBanner, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace };\n//# sourceMappingURL=index.esm2017.js.map\n","import { Deferred } from '@firebase/util';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nclass Component {\n    /**\n     *\n     * @param name The public service name, e.g. app, auth, firestore, database\n     * @param instanceFactory Service factory responsible for creating the public interface\n     * @param type whether the service provided by the component is public or private\n     */\n    constructor(name, instanceFactory, type) {\n        this.name = name;\n        this.instanceFactory = instanceFactory;\n        this.type = type;\n        this.multipleInstances = false;\n        /**\n         * Properties to be added to the service namespace\n         */\n        this.serviceProps = {};\n        this.instantiationMode = \"LAZY\" /* InstantiationMode.LAZY */;\n        this.onInstanceCreated = null;\n    }\n    setInstantiationMode(mode) {\n        this.instantiationMode = mode;\n        return this;\n    }\n    setMultipleInstances(multipleInstances) {\n        this.multipleInstances = multipleInstances;\n        return this;\n    }\n    setServiceProps(props) {\n        this.serviceProps = props;\n        return this;\n    }\n    setInstanceCreatedCallback(callback) {\n        this.onInstanceCreated = callback;\n        return this;\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nclass Provider {\n    constructor(name, container) {\n        this.name = name;\n        this.container = container;\n        this.component = null;\n        this.instances = new Map();\n        this.instancesDeferred = new Map();\n        this.instancesOptions = new Map();\n        this.onInitCallbacks = new Map();\n    }\n    /**\n     * @param identifier A provider can provide multiple instances of a service\n     * if this.component.multipleInstances is true.\n     */\n    get(identifier) {\n        // if multipleInstances is not supported, use the default name\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n        if (!this.instancesDeferred.has(normalizedIdentifier)) {\n            const deferred = new Deferred();\n            this.instancesDeferred.set(normalizedIdentifier, deferred);\n            if (this.isInitialized(normalizedIdentifier) ||\n                this.shouldAutoInitialize()) {\n                // initialize the service if it can be auto-initialized\n                try {\n                    const instance = this.getOrInitializeService({\n                        instanceIdentifier: normalizedIdentifier\n                    });\n                    if (instance) {\n                        deferred.resolve(instance);\n                    }\n                }\n                catch (e) {\n                    // when the instance factory throws an exception during get(), it should not cause\n                    // a fatal error. We just return the unresolved promise in this case.\n                }\n            }\n        }\n        return this.instancesDeferred.get(normalizedIdentifier).promise;\n    }\n    getImmediate(options) {\n        var _a;\n        // if multipleInstances is not supported, use the default name\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);\n        const optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;\n        if (this.isInitialized(normalizedIdentifier) ||\n            this.shouldAutoInitialize()) {\n            try {\n                return this.getOrInitializeService({\n                    instanceIdentifier: normalizedIdentifier\n                });\n            }\n            catch (e) {\n                if (optional) {\n                    return null;\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        else {\n            // In case a component is not initialized and should/cannot be auto-initialized at the moment, return null if the optional flag is set, or throw\n            if (optional) {\n                return null;\n            }\n            else {\n                throw Error(`Service ${this.name} is not available`);\n            }\n        }\n    }\n    getComponent() {\n        return this.component;\n    }\n    setComponent(component) {\n        if (component.name !== this.name) {\n            throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);\n        }\n        if (this.component) {\n            throw Error(`Component for ${this.name} has already been provided`);\n        }\n        this.component = component;\n        // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n        if (!this.shouldAutoInitialize()) {\n            return;\n        }\n        // if the service is eager, initialize the default instance\n        if (isComponentEager(component)) {\n            try {\n                this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n            }\n            catch (e) {\n                // when the instance factory for an eager Component throws an exception during the eager\n                // initialization, it should not cause a fatal error.\n                // TODO: Investigate if we need to make it configurable, because some component may want to cause\n                // a fatal error in this case?\n            }\n        }\n        // Create service instances for the pending promises and resolve them\n        // NOTE: if this.multipleInstances is false, only the default instance will be created\n        // and all promises with resolve with it regardless of the identifier.\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\n            const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\n            try {\n                // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n                const instance = this.getOrInitializeService({\n                    instanceIdentifier: normalizedIdentifier\n                });\n                instanceDeferred.resolve(instance);\n            }\n            catch (e) {\n                // when the instance factory throws an exception, it should not cause\n                // a fatal error. We just leave the promise unresolved.\n            }\n        }\n    }\n    clearInstance(identifier = DEFAULT_ENTRY_NAME) {\n        this.instancesDeferred.delete(identifier);\n        this.instancesOptions.delete(identifier);\n        this.instances.delete(identifier);\n    }\n    // app.delete() will call this method on every provider to delete the services\n    // TODO: should we mark the provider as deleted?\n    async delete() {\n        const services = Array.from(this.instances.values());\n        await Promise.all([\n            ...services\n                .filter(service => 'INTERNAL' in service) // legacy services\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                .map(service => service.INTERNAL.delete()),\n            ...services\n                .filter(service => '_delete' in service) // modularized services\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                .map(service => service._delete())\n        ]);\n    }\n    isComponentSet() {\n        return this.component != null;\n    }\n    isInitialized(identifier = DEFAULT_ENTRY_NAME) {\n        return this.instances.has(identifier);\n    }\n    getOptions(identifier = DEFAULT_ENTRY_NAME) {\n        return this.instancesOptions.get(identifier) || {};\n    }\n    initialize(opts = {}) {\n        const { options = {} } = opts;\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);\n        if (this.isInitialized(normalizedIdentifier)) {\n            throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);\n        }\n        if (!this.isComponentSet()) {\n            throw Error(`Component ${this.name} has not been registered yet`);\n        }\n        const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier,\n            options\n        });\n        // resolve any pending promise waiting for the service instance\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\n            const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\n            if (normalizedIdentifier === normalizedDeferredIdentifier) {\n                instanceDeferred.resolve(instance);\n            }\n        }\n        return instance;\n    }\n    /**\n     *\n     * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n     * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n     *\n     * @param identifier An optional instance identifier\n     * @returns a function to unregister the callback\n     */\n    onInit(callback, identifier) {\n        var _a;\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n        const existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();\n        existingCallbacks.add(callback);\n        this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n        const existingInstance = this.instances.get(normalizedIdentifier);\n        if (existingInstance) {\n            callback(existingInstance, normalizedIdentifier);\n        }\n        return () => {\n            existingCallbacks.delete(callback);\n        };\n    }\n    /**\n     * Invoke onInit callbacks synchronously\n     * @param instance the service instance`\n     */\n    invokeOnInitCallbacks(instance, identifier) {\n        const callbacks = this.onInitCallbacks.get(identifier);\n        if (!callbacks) {\n            return;\n        }\n        for (const callback of callbacks) {\n            try {\n                callback(instance, identifier);\n            }\n            catch (_a) {\n                // ignore errors in the onInit callback\n            }\n        }\n    }\n    getOrInitializeService({ instanceIdentifier, options = {} }) {\n        let instance = this.instances.get(instanceIdentifier);\n        if (!instance && this.component) {\n            instance = this.component.instanceFactory(this.container, {\n                instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n                options\n            });\n            this.instances.set(instanceIdentifier, instance);\n            this.instancesOptions.set(instanceIdentifier, options);\n            /**\n             * Invoke onInit listeners.\n             * Note this.component.onInstanceCreated is different, which is used by the component creator,\n             * while onInit listeners are registered by consumers of the provider.\n             */\n            this.invokeOnInitCallbacks(instance, instanceIdentifier);\n            /**\n             * Order is important\n             * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n             * makes `isInitialized()` return true.\n             */\n            if (this.component.onInstanceCreated) {\n                try {\n                    this.component.onInstanceCreated(this.container, instanceIdentifier, instance);\n                }\n                catch (_a) {\n                    // ignore errors in the onInstanceCreatedCallback\n                }\n            }\n        }\n        return instance || null;\n    }\n    normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME) {\n        if (this.component) {\n            return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n        }\n        else {\n            return identifier; // assume multiple instances are supported before the component is provided.\n        }\n    }\n    shouldAutoInitialize() {\n        return (!!this.component &&\n            this.component.instantiationMode !== \"EXPLICIT\" /* InstantiationMode.EXPLICIT */);\n    }\n}\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier) {\n    return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\nfunction isComponentEager(component) {\n    return component.instantiationMode === \"EAGER\" /* InstantiationMode.EAGER */;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nclass ComponentContainer {\n    constructor(name) {\n        this.name = name;\n        this.providers = new Map();\n    }\n    /**\n     *\n     * @param component Component being added\n     * @param overwrite When a component with the same name has already been registered,\n     * if overwrite is true: overwrite the existing component with the new component and create a new\n     * provider with the new component. It can be useful in tests where you want to use different mocks\n     * for different tests.\n     * if overwrite is false: throw an exception\n     */\n    addComponent(component) {\n        const provider = this.getProvider(component.name);\n        if (provider.isComponentSet()) {\n            throw new Error(`Component ${component.name} has already been registered with ${this.name}`);\n        }\n        provider.setComponent(component);\n    }\n    addOrOverwriteComponent(component) {\n        const provider = this.getProvider(component.name);\n        if (provider.isComponentSet()) {\n            // delete the existing provider from the container, so we can register the new component\n            this.providers.delete(component.name);\n        }\n        this.addComponent(component);\n    }\n    /**\n     * getProvider provides a type safe interface where it can only be called with a field name\n     * present in NameServiceMapping interface.\n     *\n     * Firebase SDKs providing services should extend NameServiceMapping interface to register\n     * themselves.\n     */\n    getProvider(name) {\n        if (this.providers.has(name)) {\n            return this.providers.get(name);\n        }\n        // create a Provider for a service that hasn't registered with Firebase\n        const provider = new Provider(name, this);\n        this.providers.set(name, provider);\n        return provider;\n    }\n    getProviders() {\n        return Array.from(this.providers.values());\n    }\n}\n\nexport { Component, ComponentContainer, Provider };\n//# sourceMappingURL=index.esm2017.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A container for all of the Logger instances\n */\nconst instances = [];\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\n})(LogLevel || (LogLevel = {}));\nconst levelStringToEnum = {\n    'debug': LogLevel.DEBUG,\n    'verbose': LogLevel.VERBOSE,\n    'info': LogLevel.INFO,\n    'warn': LogLevel.WARN,\n    'error': LogLevel.ERROR,\n    'silent': LogLevel.SILENT\n};\n/**\n * The default log level\n */\nconst defaultLogLevel = LogLevel.INFO;\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n    [LogLevel.DEBUG]: 'log',\n    [LogLevel.VERBOSE]: 'log',\n    [LogLevel.INFO]: 'info',\n    [LogLevel.WARN]: 'warn',\n    [LogLevel.ERROR]: 'error'\n};\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler = (instance, logType, ...args) => {\n    if (logType < instance.logLevel) {\n        return;\n    }\n    const now = new Date().toISOString();\n    const method = ConsoleMethod[logType];\n    if (method) {\n        console[method](`[${now}]  ${instance.name}:`, ...args);\n    }\n    else {\n        throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);\n    }\n};\nclass Logger {\n    /**\n     * Gives you an instance of a Logger to capture messages according to\n     * Firebase's logging scheme.\n     *\n     * @param name The name that the logs will be associated with\n     */\n    constructor(name) {\n        this.name = name;\n        /**\n         * The log level of the given Logger instance.\n         */\n        this._logLevel = defaultLogLevel;\n        /**\n         * The main (internal) log handler for the Logger instance.\n         * Can be set to a new function in internal package code but not by user.\n         */\n        this._logHandler = defaultLogHandler;\n        /**\n         * The optional, additional, user-defined log handler for the Logger instance.\n         */\n        this._userLogHandler = null;\n        /**\n         * Capture the current instance for later use\n         */\n        instances.push(this);\n    }\n    get logLevel() {\n        return this._logLevel;\n    }\n    set logLevel(val) {\n        if (!(val in LogLevel)) {\n            throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n        }\n        this._logLevel = val;\n    }\n    // Workaround for setter/getter having to be the same type.\n    setLogLevel(val) {\n        this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n    }\n    get logHandler() {\n        return this._logHandler;\n    }\n    set logHandler(val) {\n        if (typeof val !== 'function') {\n            throw new TypeError('Value assigned to `logHandler` must be a function');\n        }\n        this._logHandler = val;\n    }\n    get userLogHandler() {\n        return this._userLogHandler;\n    }\n    set userLogHandler(val) {\n        this._userLogHandler = val;\n    }\n    /**\n     * The functions below are all based on the `console` interface\n     */\n    debug(...args) {\n        this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n        this._logHandler(this, LogLevel.DEBUG, ...args);\n    }\n    log(...args) {\n        this._userLogHandler &&\n            this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n        this._logHandler(this, LogLevel.VERBOSE, ...args);\n    }\n    info(...args) {\n        this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n        this._logHandler(this, LogLevel.INFO, ...args);\n    }\n    warn(...args) {\n        this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n        this._logHandler(this, LogLevel.WARN, ...args);\n    }\n    error(...args) {\n        this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n        this._logHandler(this, LogLevel.ERROR, ...args);\n    }\n}\nfunction setLogLevel(level) {\n    instances.forEach(inst => {\n        inst.setLogLevel(level);\n    });\n}\nfunction setUserLogHandler(logCallback, options) {\n    for (const instance of instances) {\n        let customLogLevel = null;\n        if (options && options.level) {\n            customLogLevel = levelStringToEnum[options.level];\n        }\n        if (logCallback === null) {\n            instance.userLogHandler = null;\n        }\n        else {\n            instance.userLogHandler = (instance, level, ...args) => {\n                const message = args\n                    .map(arg => {\n                    if (arg == null) {\n                        return null;\n                    }\n                    else if (typeof arg === 'string') {\n                        return arg;\n                    }\n                    else if (typeof arg === 'number' || typeof arg === 'boolean') {\n                        return arg.toString();\n                    }\n                    else if (arg instanceof Error) {\n                        return arg.message;\n                    }\n                    else {\n                        try {\n                            return JSON.stringify(arg);\n                        }\n                        catch (ignored) {\n                            return null;\n                        }\n                    }\n                })\n                    .filter(arg => arg)\n                    .join(' ');\n                if (level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel)) {\n                    logCallback({\n                        level: LogLevel[level].toLowerCase(),\n                        message,\n                        args,\n                        type: instance.name\n                    });\n                }\n            };\n        }\n    }\n}\n\nexport { LogLevel, Logger, setLogLevel, setUserLogHandler };\n//# sourceMappingURL=index.esm2017.js.map\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { Component, ComponentContainer } from '@firebase/component';\nimport { Logger, setUserLogHandler, setLogLevel as setLogLevel$1 } from '@firebase/logger';\nimport { ErrorFactory, base64Decode, getDefaultAppConfig, deepEqual, isBrowser, isWebWorker, FirebaseError, base64urlEncodeWithoutPadding, isIndexedDBAvailable, validateIndexedDBOpenable } from '@firebase/util';\nexport { FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass PlatformLoggerServiceImpl {\n    constructor(container) {\n        this.container = container;\n    }\n    // In initial implementation, this will be called by installations on\n    // auth token refresh, and installations will send this string.\n    getPlatformInfoString() {\n        const providers = this.container.getProviders();\n        // Loop through providers and get library/version pairs from any that are\n        // version components.\n        return providers\n            .map(provider => {\n            if (isVersionServiceProvider(provider)) {\n                const service = provider.getImmediate();\n                return `${service.library}/${service.version}`;\n            }\n            else {\n                return null;\n            }\n        })\n            .filter(logString => logString)\n            .join(' ');\n    }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider) {\n    const component = provider.getComponent();\n    return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\" /* ComponentType.VERSION */;\n}\n\nconst name$q = \"@firebase/app\";\nconst version$1 = \"0.13.1\";\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst logger = new Logger('@firebase/app');\n\nconst name$p = \"@firebase/app-compat\";\n\nconst name$o = \"@firebase/analytics-compat\";\n\nconst name$n = \"@firebase/analytics\";\n\nconst name$m = \"@firebase/app-check-compat\";\n\nconst name$l = \"@firebase/app-check\";\n\nconst name$k = \"@firebase/auth\";\n\nconst name$j = \"@firebase/auth-compat\";\n\nconst name$i = \"@firebase/database\";\n\nconst name$h = \"@firebase/data-connect\";\n\nconst name$g = \"@firebase/database-compat\";\n\nconst name$f = \"@firebase/functions\";\n\nconst name$e = \"@firebase/functions-compat\";\n\nconst name$d = \"@firebase/installations\";\n\nconst name$c = \"@firebase/installations-compat\";\n\nconst name$b = \"@firebase/messaging\";\n\nconst name$a = \"@firebase/messaging-compat\";\n\nconst name$9 = \"@firebase/performance\";\n\nconst name$8 = \"@firebase/performance-compat\";\n\nconst name$7 = \"@firebase/remote-config\";\n\nconst name$6 = \"@firebase/remote-config-compat\";\n\nconst name$5 = \"@firebase/storage\";\n\nconst name$4 = \"@firebase/storage-compat\";\n\nconst name$3 = \"@firebase/firestore\";\n\nconst name$2 = \"@firebase/ai\";\n\nconst name$1 = \"@firebase/firestore-compat\";\n\nconst name = \"firebase\";\nconst version = \"11.9.0\";\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The default app name\n *\n * @internal\n */\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\nconst PLATFORM_LOG_STRING = {\n    [name$q]: 'fire-core',\n    [name$p]: 'fire-core-compat',\n    [name$n]: 'fire-analytics',\n    [name$o]: 'fire-analytics-compat',\n    [name$l]: 'fire-app-check',\n    [name$m]: 'fire-app-check-compat',\n    [name$k]: 'fire-auth',\n    [name$j]: 'fire-auth-compat',\n    [name$i]: 'fire-rtdb',\n    [name$h]: 'fire-data-connect',\n    [name$g]: 'fire-rtdb-compat',\n    [name$f]: 'fire-fn',\n    [name$e]: 'fire-fn-compat',\n    [name$d]: 'fire-iid',\n    [name$c]: 'fire-iid-compat',\n    [name$b]: 'fire-fcm',\n    [name$a]: 'fire-fcm-compat',\n    [name$9]: 'fire-perf',\n    [name$8]: 'fire-perf-compat',\n    [name$7]: 'fire-rc',\n    [name$6]: 'fire-rc-compat',\n    [name$5]: 'fire-gcs',\n    [name$4]: 'fire-gcs-compat',\n    [name$3]: 'fire-fst',\n    [name$1]: 'fire-fst-compat',\n    [name$2]: 'fire-vertex',\n    'fire-js': 'fire-js', // Platform identifier for JS SDK.\n    [name]: 'fire-js-all'\n};\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @internal\n */\nconst _apps = new Map();\n/**\n * @internal\n */\nconst _serverApps = new Map();\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst _components = new Map();\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nfunction _addComponent(app, component) {\n    try {\n        app.container.addComponent(component);\n    }\n    catch (e) {\n        logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`, e);\n    }\n}\n/**\n *\n * @internal\n */\nfunction _addOrOverwriteComponent(app, component) {\n    app.container.addOrOverwriteComponent(component);\n}\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nfunction _registerComponent(component) {\n    const componentName = component.name;\n    if (_components.has(componentName)) {\n        logger.debug(`There were multiple attempts to register component ${componentName}.`);\n        return false;\n    }\n    _components.set(componentName, component);\n    // add the component to existing app instances\n    for (const app of _apps.values()) {\n        _addComponent(app, component);\n    }\n    for (const serverApp of _serverApps.values()) {\n        _addComponent(serverApp, component);\n    }\n    return true;\n}\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nfunction _getProvider(app, name) {\n    const heartbeatController = app.container\n        .getProvider('heartbeat')\n        .getImmediate({ optional: true });\n    if (heartbeatController) {\n        void heartbeatController.triggerHeartbeat();\n    }\n    return app.container.getProvider(name);\n}\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nfunction _removeServiceInstance(app, name, instanceIdentifier = DEFAULT_ENTRY_NAME) {\n    _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n/**\n *\n * @param obj - an object of type FirebaseApp or FirebaseOptions.\n *\n * @returns true if the provide object is of type FirebaseApp.\n *\n * @internal\n */\nfunction _isFirebaseApp(obj) {\n    return obj.options !== undefined;\n}\n/**\n *\n * @param obj - an object of type FirebaseApp.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nfunction _isFirebaseServerApp(obj) {\n    if (obj === null || obj === undefined) {\n        return false;\n    }\n    return obj.settings !== undefined;\n}\n/**\n * Test only\n *\n * @internal\n */\nfunction _clearComponents() {\n    _components.clear();\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst ERRORS = {\n    [\"no-app\" /* AppError.NO_APP */]: \"No Firebase App '{$appName}' has been created - \" +\n        'call initializeApp() first',\n    [\"bad-app-name\" /* AppError.BAD_APP_NAME */]: \"Illegal App name: '{$appName}'\",\n    [\"duplicate-app\" /* AppError.DUPLICATE_APP */]: \"Firebase App named '{$appName}' already exists with different options or config\",\n    [\"app-deleted\" /* AppError.APP_DELETED */]: \"Firebase App named '{$appName}' already deleted\",\n    [\"server-app-deleted\" /* AppError.SERVER_APP_DELETED */]: 'Firebase Server App has been deleted',\n    [\"no-options\" /* AppError.NO_OPTIONS */]: 'Need to provide options, when not being deployed to hosting via source.',\n    [\"invalid-app-argument\" /* AppError.INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +\n        'Firebase App instance.',\n    [\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */]: 'First argument to `onLog` must be null or a function.',\n    [\"idb-open\" /* AppError.IDB_OPEN */]: 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n    [\"idb-get\" /* AppError.IDB_GET */]: 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n    [\"idb-set\" /* AppError.IDB_WRITE */]: 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n    [\"idb-delete\" /* AppError.IDB_DELETE */]: 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',\n    [\"finalization-registry-not-supported\" /* AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED */]: 'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',\n    [\"invalid-server-app-environment\" /* AppError.INVALID_SERVER_APP_ENVIRONMENT */]: 'FirebaseServerApp is not for use in browser environments.'\n};\nconst ERROR_FACTORY = new ErrorFactory('app', 'Firebase', ERRORS);\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass FirebaseAppImpl {\n    constructor(options, config, container) {\n        this._isDeleted = false;\n        this._options = Object.assign({}, options);\n        this._config = Object.assign({}, config);\n        this._name = config.name;\n        this._automaticDataCollectionEnabled =\n            config.automaticDataCollectionEnabled;\n        this._container = container;\n        this.container.addComponent(new Component('app', () => this, \"PUBLIC\" /* ComponentType.PUBLIC */));\n    }\n    get automaticDataCollectionEnabled() {\n        this.checkDestroyed();\n        return this._automaticDataCollectionEnabled;\n    }\n    set automaticDataCollectionEnabled(val) {\n        this.checkDestroyed();\n        this._automaticDataCollectionEnabled = val;\n    }\n    get name() {\n        this.checkDestroyed();\n        return this._name;\n    }\n    get options() {\n        this.checkDestroyed();\n        return this._options;\n    }\n    get config() {\n        this.checkDestroyed();\n        return this._config;\n    }\n    get container() {\n        return this._container;\n    }\n    get isDeleted() {\n        return this._isDeleted;\n    }\n    set isDeleted(val) {\n        this._isDeleted = val;\n    }\n    /**\n     * This function will throw an Error if the App has already been deleted -\n     * use before performing API actions on the App.\n     */\n    checkDestroyed() {\n        if (this.isDeleted) {\n            throw ERROR_FACTORY.create(\"app-deleted\" /* AppError.APP_DELETED */, { appName: this._name });\n        }\n    }\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Parse the token and check to see if the `exp` claim is in the future.\n// Reports an error to the console if the token or claim could not be parsed, or if `exp` is in\n// the past.\nfunction validateTokenTTL(base64Token, tokenName) {\n    const secondPart = base64Decode(base64Token.split('.')[1]);\n    if (secondPart === null) {\n        console.error(`FirebaseServerApp ${tokenName} is invalid: second part could not be parsed.`);\n        return;\n    }\n    const expClaim = JSON.parse(secondPart).exp;\n    if (expClaim === undefined) {\n        console.error(`FirebaseServerApp ${tokenName} is invalid: expiration claim could not be parsed`);\n        return;\n    }\n    const exp = JSON.parse(secondPart).exp * 1000;\n    const now = new Date().getTime();\n    const diff = exp - now;\n    if (diff <= 0) {\n        console.error(`FirebaseServerApp ${tokenName} is invalid: the token has expired.`);\n    }\n}\nclass FirebaseServerAppImpl extends FirebaseAppImpl {\n    constructor(options, serverConfig, name, container) {\n        // Build configuration parameters for the FirebaseAppImpl base class.\n        const automaticDataCollectionEnabled = serverConfig.automaticDataCollectionEnabled !== undefined\n            ? serverConfig.automaticDataCollectionEnabled\n            : true;\n        // Create the FirebaseAppSettings object for the FirebaseAppImp constructor.\n        const config = {\n            name,\n            automaticDataCollectionEnabled\n        };\n        if (options.apiKey !== undefined) {\n            // Construct the parent FirebaseAppImp object.\n            super(options, config, container);\n        }\n        else {\n            const appImpl = options;\n            super(appImpl.options, config, container);\n        }\n        // Now construct the data for the FirebaseServerAppImpl.\n        this._serverConfig = Object.assign({ automaticDataCollectionEnabled }, serverConfig);\n        // Ensure that the current time is within the `authIdtoken` window of validity.\n        if (this._serverConfig.authIdToken) {\n            validateTokenTTL(this._serverConfig.authIdToken, 'authIdToken');\n        }\n        // Ensure that the current time is within the `appCheckToken` window of validity.\n        if (this._serverConfig.appCheckToken) {\n            validateTokenTTL(this._serverConfig.appCheckToken, 'appCheckToken');\n        }\n        this._finalizationRegistry = null;\n        if (typeof FinalizationRegistry !== 'undefined') {\n            this._finalizationRegistry = new FinalizationRegistry(() => {\n                this.automaticCleanup();\n            });\n        }\n        this._refCount = 0;\n        this.incRefCount(this._serverConfig.releaseOnDeref);\n        // Do not retain a hard reference to the dref object, otherwise the FinalizationRegistry\n        // will never trigger.\n        this._serverConfig.releaseOnDeref = undefined;\n        serverConfig.releaseOnDeref = undefined;\n        registerVersion(name$q, version$1, 'serverapp');\n    }\n    toJSON() {\n        return undefined;\n    }\n    get refCount() {\n        return this._refCount;\n    }\n    // Increment the reference count of this server app. If an object is provided, register it\n    // with the finalization registry.\n    incRefCount(obj) {\n        if (this.isDeleted) {\n            return;\n        }\n        this._refCount++;\n        if (obj !== undefined && this._finalizationRegistry !== null) {\n            this._finalizationRegistry.register(obj, this);\n        }\n    }\n    // Decrement the reference count.\n    decRefCount() {\n        if (this.isDeleted) {\n            return 0;\n        }\n        return --this._refCount;\n    }\n    // Invoked by the FinalizationRegistry callback to note that this app should go through its\n    // reference counts and delete itself if no reference count remain. The coordinating logic that\n    // handles this is in deleteApp(...).\n    automaticCleanup() {\n        void deleteApp(this);\n    }\n    get settings() {\n        this.checkDestroyed();\n        return this._serverConfig;\n    }\n    /**\n     * This function will throw an Error if the App has already been deleted -\n     * use before performing API actions on the App.\n     */\n    checkDestroyed() {\n        if (this.isDeleted) {\n            throw ERROR_FACTORY.create(\"server-app-deleted\" /* AppError.SERVER_APP_DELETED */);\n        }\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The current SDK version.\n *\n * @public\n */\nconst SDK_VERSION = version;\nfunction initializeApp(_options, rawConfig = {}) {\n    let options = _options;\n    if (typeof rawConfig !== 'object') {\n        const name = rawConfig;\n        rawConfig = { name };\n    }\n    const config = Object.assign({ name: DEFAULT_ENTRY_NAME, automaticDataCollectionEnabled: true }, rawConfig);\n    const name = config.name;\n    if (typeof name !== 'string' || !name) {\n        throw ERROR_FACTORY.create(\"bad-app-name\" /* AppError.BAD_APP_NAME */, {\n            appName: String(name)\n        });\n    }\n    options || (options = getDefaultAppConfig());\n    if (!options) {\n        throw ERROR_FACTORY.create(\"no-options\" /* AppError.NO_OPTIONS */);\n    }\n    const existingApp = _apps.get(name);\n    if (existingApp) {\n        // return the existing app if options and config deep equal the ones in the existing app.\n        if (deepEqual(options, existingApp.options) &&\n            deepEqual(config, existingApp.config)) {\n            return existingApp;\n        }\n        else {\n            throw ERROR_FACTORY.create(\"duplicate-app\" /* AppError.DUPLICATE_APP */, { appName: name });\n        }\n    }\n    const container = new ComponentContainer(name);\n    for (const component of _components.values()) {\n        container.addComponent(component);\n    }\n    const newApp = new FirebaseAppImpl(options, config, container);\n    _apps.set(name, newApp);\n    return newApp;\n}\nfunction initializeServerApp(_options, _serverAppConfig) {\n    if (isBrowser() && !isWebWorker()) {\n        // FirebaseServerApp isn't designed to be run in browsers.\n        throw ERROR_FACTORY.create(\"invalid-server-app-environment\" /* AppError.INVALID_SERVER_APP_ENVIRONMENT */);\n    }\n    if (_serverAppConfig.automaticDataCollectionEnabled === undefined) {\n        _serverAppConfig.automaticDataCollectionEnabled = true;\n    }\n    let appOptions;\n    if (_isFirebaseApp(_options)) {\n        appOptions = _options.options;\n    }\n    else {\n        appOptions = _options;\n    }\n    // Build an app name based on a hash of the configuration options.\n    const nameObj = Object.assign(Object.assign({}, _serverAppConfig), appOptions);\n    // However, Do not mangle the name based on releaseOnDeref, since it will vary between the\n    // construction of FirebaseServerApp instances. For example, if the object is the request headers.\n    if (nameObj.releaseOnDeref !== undefined) {\n        delete nameObj.releaseOnDeref;\n    }\n    const hashCode = (s) => {\n        return [...s].reduce((hash, c) => (Math.imul(31, hash) + c.charCodeAt(0)) | 0, 0);\n    };\n    if (_serverAppConfig.releaseOnDeref !== undefined) {\n        if (typeof FinalizationRegistry === 'undefined') {\n            throw ERROR_FACTORY.create(\"finalization-registry-not-supported\" /* AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED */, {});\n        }\n    }\n    const nameString = '' + hashCode(JSON.stringify(nameObj));\n    const existingApp = _serverApps.get(nameString);\n    if (existingApp) {\n        existingApp.incRefCount(_serverAppConfig.releaseOnDeref);\n        return existingApp;\n    }\n    const container = new ComponentContainer(nameString);\n    for (const component of _components.values()) {\n        container.addComponent(component);\n    }\n    const newApp = new FirebaseServerAppImpl(appOptions, _serverAppConfig, nameString, container);\n    _serverApps.set(nameString, newApp);\n    return newApp;\n}\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nfunction getApp(name = DEFAULT_ENTRY_NAME) {\n    const app = _apps.get(name);\n    if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\n        return initializeApp();\n    }\n    if (!app) {\n        throw ERROR_FACTORY.create(\"no-app\" /* AppError.NO_APP */, { appName: name });\n    }\n    return app;\n}\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nfunction getApps() {\n    return Array.from(_apps.values());\n}\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nasync function deleteApp(app) {\n    let cleanupProviders = false;\n    const name = app.name;\n    if (_apps.has(name)) {\n        cleanupProviders = true;\n        _apps.delete(name);\n    }\n    else if (_serverApps.has(name)) {\n        const firebaseServerApp = app;\n        if (firebaseServerApp.decRefCount() <= 0) {\n            _serverApps.delete(name);\n            cleanupProviders = true;\n        }\n    }\n    if (cleanupProviders) {\n        await Promise.all(app.container\n            .getProviders()\n            .map(provider => provider.delete()));\n        app.isDeleted = true;\n    }\n}\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nfunction registerVersion(libraryKeyOrName, version, variant) {\n    var _a;\n    // TODO: We can use this check to whitelist strings when/if we set up\n    // a good whitelist system.\n    let library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\n    if (variant) {\n        library += `-${variant}`;\n    }\n    const libraryMismatch = library.match(/\\s|\\//);\n    const versionMismatch = version.match(/\\s|\\//);\n    if (libraryMismatch || versionMismatch) {\n        const warning = [\n            `Unable to register library \"${library}\" with version \"${version}\":`\n        ];\n        if (libraryMismatch) {\n            warning.push(`library name \"${library}\" contains illegal characters (whitespace or \"/\")`);\n        }\n        if (libraryMismatch && versionMismatch) {\n            warning.push('and');\n        }\n        if (versionMismatch) {\n            warning.push(`version name \"${version}\" contains illegal characters (whitespace or \"/\")`);\n        }\n        logger.warn(warning.join(' '));\n        return;\n    }\n    _registerComponent(new Component(`${library}-version`, () => ({ library, version }), \"VERSION\" /* ComponentType.VERSION */));\n}\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nfunction onLog(logCallback, options) {\n    if (logCallback !== null && typeof logCallback !== 'function') {\n        throw ERROR_FACTORY.create(\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */);\n    }\n    setUserLogHandler(logCallback, options);\n}\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nfunction setLogLevel(logLevel) {\n    setLogLevel$1(logLevel);\n}\n\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\nlet dbPromise = null;\nfunction getDbPromise() {\n    if (!dbPromise) {\n        dbPromise = openDB(DB_NAME, DB_VERSION, {\n            upgrade: (db, oldVersion) => {\n                // We don't use 'break' in this switch statement, the fall-through\n                // behavior is what we want, because if there are multiple versions between\n                // the old version and the current version, we want ALL the migrations\n                // that correspond to those versions to run, not only the last one.\n                // eslint-disable-next-line default-case\n                switch (oldVersion) {\n                    case 0:\n                        try {\n                            db.createObjectStore(STORE_NAME);\n                        }\n                        catch (e) {\n                            // Safari/iOS browsers throw occasional exceptions on\n                            // db.createObjectStore() that may be a bug. Avoid blocking\n                            // the rest of the app functionality.\n                            console.warn(e);\n                        }\n                }\n            }\n        }).catch(e => {\n            throw ERROR_FACTORY.create(\"idb-open\" /* AppError.IDB_OPEN */, {\n                originalErrorMessage: e.message\n            });\n        });\n    }\n    return dbPromise;\n}\nasync function readHeartbeatsFromIndexedDB(app) {\n    try {\n        const db = await getDbPromise();\n        const tx = db.transaction(STORE_NAME);\n        const result = await tx.objectStore(STORE_NAME).get(computeKey(app));\n        // We already have the value but tx.done can throw,\n        // so we need to await it here to catch errors\n        await tx.done;\n        return result;\n    }\n    catch (e) {\n        if (e instanceof FirebaseError) {\n            logger.warn(e.message);\n        }\n        else {\n            const idbGetError = ERROR_FACTORY.create(\"idb-get\" /* AppError.IDB_GET */, {\n                originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\n            });\n            logger.warn(idbGetError.message);\n        }\n    }\n}\nasync function writeHeartbeatsToIndexedDB(app, heartbeatObject) {\n    try {\n        const db = await getDbPromise();\n        const tx = db.transaction(STORE_NAME, 'readwrite');\n        const objectStore = tx.objectStore(STORE_NAME);\n        await objectStore.put(heartbeatObject, computeKey(app));\n        await tx.done;\n    }\n    catch (e) {\n        if (e instanceof FirebaseError) {\n            logger.warn(e.message);\n        }\n        else {\n            const idbGetError = ERROR_FACTORY.create(\"idb-set\" /* AppError.IDB_WRITE */, {\n                originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\n            });\n            logger.warn(idbGetError.message);\n        }\n    }\n}\nfunction computeKey(app) {\n    return `${app.name}!${app.options.appId}`;\n}\n\n/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst MAX_HEADER_BYTES = 1024;\nconst MAX_NUM_STORED_HEARTBEATS = 30;\nclass HeartbeatServiceImpl {\n    constructor(container) {\n        this.container = container;\n        /**\n         * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n         * the header string.\n         * Stores one record per date. This will be consolidated into the standard\n         * format of one record per user agent string before being sent as a header.\n         * Populated from indexedDB when the controller is instantiated and should\n         * be kept in sync with indexedDB.\n         * Leave public for easier testing.\n         */\n        this._heartbeatsCache = null;\n        const app = this.container.getProvider('app').getImmediate();\n        this._storage = new HeartbeatStorageImpl(app);\n        this._heartbeatsCachePromise = this._storage.read().then(result => {\n            this._heartbeatsCache = result;\n            return result;\n        });\n    }\n    /**\n     * Called to report a heartbeat. The function will generate\n     * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n     * to IndexedDB.\n     * Note that we only store one heartbeat per day. So if a heartbeat for today is\n     * already logged, subsequent calls to this function in the same day will be ignored.\n     */\n    async triggerHeartbeat() {\n        var _a, _b;\n        try {\n            const platformLogger = this.container\n                .getProvider('platform-logger')\n                .getImmediate();\n            // This is the \"Firebase user agent\" string from the platform logger\n            // service, not the browser user agent.\n            const agent = platformLogger.getPlatformInfoString();\n            const date = getUTCDateString();\n            if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null) {\n                this._heartbeatsCache = await this._heartbeatsCachePromise;\n                // If we failed to construct a heartbeats cache, then return immediately.\n                if (((_b = this._heartbeatsCache) === null || _b === void 0 ? void 0 : _b.heartbeats) == null) {\n                    return;\n                }\n            }\n            // Do not store a heartbeat if one is already stored for this day\n            // or if a header has already been sent today.\n            if (this._heartbeatsCache.lastSentHeartbeatDate === date ||\n                this._heartbeatsCache.heartbeats.some(singleDateHeartbeat => singleDateHeartbeat.date === date)) {\n                return;\n            }\n            else {\n                // There is no entry for this date. Create one.\n                this._heartbeatsCache.heartbeats.push({ date, agent });\n                // If the number of stored heartbeats exceeds the maximum number of stored heartbeats, remove the heartbeat with the earliest date.\n                // Since this is executed each time a heartbeat is pushed, the limit can only be exceeded by one, so only one needs to be removed.\n                if (this._heartbeatsCache.heartbeats.length > MAX_NUM_STORED_HEARTBEATS) {\n                    const earliestHeartbeatIdx = getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);\n                    this._heartbeatsCache.heartbeats.splice(earliestHeartbeatIdx, 1);\n                }\n            }\n            return this._storage.overwrite(this._heartbeatsCache);\n        }\n        catch (e) {\n            logger.warn(e);\n        }\n    }\n    /**\n     * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n     * It also clears all heartbeats from memory as well as in IndexedDB.\n     *\n     * NOTE: Consuming product SDKs should not send the header if this method\n     * returns an empty string.\n     */\n    async getHeartbeatsHeader() {\n        var _a;\n        try {\n            if (this._heartbeatsCache === null) {\n                await this._heartbeatsCachePromise;\n            }\n            // If it's still null or the array is empty, there is no data to send.\n            if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null ||\n                this._heartbeatsCache.heartbeats.length === 0) {\n                return '';\n            }\n            const date = getUTCDateString();\n            // Extract as many heartbeats from the cache as will fit under the size limit.\n            const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats);\n            const headerString = base64urlEncodeWithoutPadding(JSON.stringify({ version: 2, heartbeats: heartbeatsToSend }));\n            // Store last sent date to prevent another being logged/sent for the same day.\n            this._heartbeatsCache.lastSentHeartbeatDate = date;\n            if (unsentEntries.length > 0) {\n                // Store any unsent entries if they exist.\n                this._heartbeatsCache.heartbeats = unsentEntries;\n                // This seems more likely than emptying the array (below) to lead to some odd state\n                // since the cache isn't empty and this will be called again on the next request,\n                // and is probably safest if we await it.\n                await this._storage.overwrite(this._heartbeatsCache);\n            }\n            else {\n                this._heartbeatsCache.heartbeats = [];\n                // Do not wait for this, to reduce latency.\n                void this._storage.overwrite(this._heartbeatsCache);\n            }\n            return headerString;\n        }\n        catch (e) {\n            logger.warn(e);\n            return '';\n        }\n    }\n}\nfunction getUTCDateString() {\n    const today = new Date();\n    // Returns date format 'YYYY-MM-DD'\n    return today.toISOString().substring(0, 10);\n}\nfunction extractHeartbeatsForHeader(heartbeatsCache, maxSize = MAX_HEADER_BYTES) {\n    // Heartbeats grouped by user agent in the standard format to be sent in\n    // the header.\n    const heartbeatsToSend = [];\n    // Single date format heartbeats that are not sent.\n    let unsentEntries = heartbeatsCache.slice();\n    for (const singleDateHeartbeat of heartbeatsCache) {\n        // Look for an existing entry with the same user agent.\n        const heartbeatEntry = heartbeatsToSend.find(hb => hb.agent === singleDateHeartbeat.agent);\n        if (!heartbeatEntry) {\n            // If no entry for this user agent exists, create one.\n            heartbeatsToSend.push({\n                agent: singleDateHeartbeat.agent,\n                dates: [singleDateHeartbeat.date]\n            });\n            if (countBytes(heartbeatsToSend) > maxSize) {\n                // If the header would exceed max size, remove the added heartbeat\n                // entry and stop adding to the header.\n                heartbeatsToSend.pop();\n                break;\n            }\n        }\n        else {\n            heartbeatEntry.dates.push(singleDateHeartbeat.date);\n            // If the header would exceed max size, remove the added date\n            // and stop adding to the header.\n            if (countBytes(heartbeatsToSend) > maxSize) {\n                heartbeatEntry.dates.pop();\n                break;\n            }\n        }\n        // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n        // quota and the loop breaks early.)\n        unsentEntries = unsentEntries.slice(1);\n    }\n    return {\n        heartbeatsToSend,\n        unsentEntries\n    };\n}\nclass HeartbeatStorageImpl {\n    constructor(app) {\n        this.app = app;\n        this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n    }\n    async runIndexedDBEnvironmentCheck() {\n        if (!isIndexedDBAvailable()) {\n            return false;\n        }\n        else {\n            return validateIndexedDBOpenable()\n                .then(() => true)\n                .catch(() => false);\n        }\n    }\n    /**\n     * Read all heartbeats.\n     */\n    async read() {\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\n        if (!canUseIndexedDB) {\n            return { heartbeats: [] };\n        }\n        else {\n            const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n            if (idbHeartbeatObject === null || idbHeartbeatObject === void 0 ? void 0 : idbHeartbeatObject.heartbeats) {\n                return idbHeartbeatObject;\n            }\n            else {\n                return { heartbeats: [] };\n            }\n        }\n    }\n    // overwrite the storage with the provided heartbeats\n    async overwrite(heartbeatsObject) {\n        var _a;\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\n        if (!canUseIndexedDB) {\n            return;\n        }\n        else {\n            const existingHeartbeatsObject = await this.read();\n            return writeHeartbeatsToIndexedDB(this.app, {\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\n                heartbeats: heartbeatsObject.heartbeats\n            });\n        }\n    }\n    // add heartbeats\n    async add(heartbeatsObject) {\n        var _a;\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\n        if (!canUseIndexedDB) {\n            return;\n        }\n        else {\n            const existingHeartbeatsObject = await this.read();\n            return writeHeartbeatsToIndexedDB(this.app, {\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\n                heartbeats: [\n                    ...existingHeartbeatsObject.heartbeats,\n                    ...heartbeatsObject.heartbeats\n                ]\n            });\n        }\n    }\n}\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nfunction countBytes(heartbeatsCache) {\n    // base64 has a restricted set of characters, all of which should be 1 byte.\n    return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })).length;\n}\n/**\n * Returns the index of the heartbeat with the earliest date.\n * If the heartbeats array is empty, -1 is returned.\n */\nfunction getEarliestHeartbeatIdx(heartbeats) {\n    if (heartbeats.length === 0) {\n        return -1;\n    }\n    let earliestHeartbeatIdx = 0;\n    let earliestHeartbeatDate = heartbeats[0].date;\n    for (let i = 1; i < heartbeats.length; i++) {\n        if (heartbeats[i].date < earliestHeartbeatDate) {\n            earliestHeartbeatDate = heartbeats[i].date;\n            earliestHeartbeatIdx = i;\n        }\n    }\n    return earliestHeartbeatIdx;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction registerCoreComponents(variant) {\n    _registerComponent(new Component('platform-logger', container => new PlatformLoggerServiceImpl(container), \"PRIVATE\" /* ComponentType.PRIVATE */));\n    _registerComponent(new Component('heartbeat', container => new HeartbeatServiceImpl(container), \"PRIVATE\" /* ComponentType.PRIVATE */));\n    // Register `app` package.\n    registerVersion(name$q, version$1, variant);\n    // BUILD_TARGET will be replaced by values like esm2017, cjs2017, etc during the compilation\n    registerVersion(name$q, version$1, 'esm2017');\n    // Register platform SDK identifier (no version).\n    registerVersion('fire-js', '');\n}\n\n/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\nregisterCoreComponents('');\n\nexport { SDK_VERSION, DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME, _addComponent, _addOrOverwriteComponent, _apps, _clearComponents, _components, _getProvider, _isFirebaseApp, _isFirebaseServerApp, _registerComponent, _removeServiceInstance, _serverApps, deleteApp, getApp, getApps, initializeApp, initializeServerApp, onLog, registerVersion, setLogLevel };\n//# sourceMappingURL=index.esm2017.js.map\n","import { registerVersion } from '@firebase/app';\nexport * from '@firebase/app';\n\nvar name = \"firebase\";\nvar version = \"11.9.1\";\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nregisterVersion(name, version, 'app');\n//# sourceMappingURL=index.esm.js.map\n","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Component } from '@firebase/component';\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\nconst name = \"@firebase/installations\";\nconst version = \"0.6.17\";\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst PENDING_TIMEOUT_MS = 10000;\nconst PACKAGE_VERSION = `w:${version}`;\nconst INTERNAL_AUTH_VERSION = 'FIS_v2';\nconst INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\nconst TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\nconst SERVICE = 'installations';\nconst SERVICE_NAME = 'Installations';\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst ERROR_DESCRIPTION_MAP = {\n    [\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */]: 'Missing App configuration value: \"{$valueName}\"',\n    [\"not-registered\" /* ErrorCode.NOT_REGISTERED */]: 'Firebase Installation is not registered.',\n    [\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */]: 'Firebase Installation not found.',\n    [\"request-failed\" /* ErrorCode.REQUEST_FAILED */]: '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\n    [\"app-offline\" /* ErrorCode.APP_OFFLINE */]: 'Could not process request. Application offline.',\n    [\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */]: \"Can't delete installation while there is a pending registration request.\"\n};\nconst ERROR_FACTORY = new ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\nfunction isServerError(error) {\n    return (error instanceof FirebaseError &&\n        error.code.includes(\"request-failed\" /* ErrorCode.REQUEST_FAILED */));\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getInstallationsEndpoint({ projectId }) {\n    return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\n}\nfunction extractAuthTokenInfoFromResponse(response) {\n    return {\n        token: response.token,\n        requestStatus: 2 /* RequestStatus.COMPLETED */,\n        expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n        creationTime: Date.now()\n    };\n}\nasync function getErrorFromResponse(requestName, response) {\n    const responseJson = await response.json();\n    const errorData = responseJson.error;\n    return ERROR_FACTORY.create(\"request-failed\" /* ErrorCode.REQUEST_FAILED */, {\n        requestName,\n        serverCode: errorData.code,\n        serverMessage: errorData.message,\n        serverStatus: errorData.status\n    });\n}\nfunction getHeaders({ apiKey }) {\n    return new Headers({\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'x-goog-api-key': apiKey\n    });\n}\nfunction getHeadersWithAuth(appConfig, { refreshToken }) {\n    const headers = getHeaders(appConfig);\n    headers.append('Authorization', getAuthorizationHeader(refreshToken));\n    return headers;\n}\n/**\n * Calls the passed in fetch wrapper and returns the response.\n * If the returned response has a status of 5xx, re-runs the function once and\n * returns the response.\n */\nasync function retryIfServerError(fn) {\n    const result = await fn();\n    if (result.status >= 500 && result.status < 600) {\n        // Internal Server Error. Retry request.\n        return fn();\n    }\n    return result;\n}\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\n    // This works because the server will never respond with fractions of a second.\n    return Number(responseExpiresIn.replace('s', '000'));\n}\nfunction getAuthorizationHeader(refreshToken) {\n    return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function createInstallationRequest({ appConfig, heartbeatServiceProvider }, { fid }) {\n    const endpoint = getInstallationsEndpoint(appConfig);\n    const headers = getHeaders(appConfig);\n    // If heartbeat service exists, add the heartbeat string to the header.\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\n        optional: true\n    });\n    if (heartbeatService) {\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n        if (heartbeatsHeader) {\n            headers.append('x-firebase-client', heartbeatsHeader);\n        }\n    }\n    const body = {\n        fid,\n        authVersion: INTERNAL_AUTH_VERSION,\n        appId: appConfig.appId,\n        sdkVersion: PACKAGE_VERSION\n    };\n    const request = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(body)\n    };\n    const response = await retryIfServerError(() => fetch(endpoint, request));\n    if (response.ok) {\n        const responseValue = await response.json();\n        const registeredInstallationEntry = {\n            fid: responseValue.fid || fid,\n            registrationStatus: 2 /* RequestStatus.COMPLETED */,\n            refreshToken: responseValue.refreshToken,\n            authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n        };\n        return registeredInstallationEntry;\n    }\n    else {\n        throw await getErrorFromResponse('Create Installation', response);\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Returns a promise that resolves after given time passes. */\nfunction sleep(ms) {\n    return new Promise(resolve => {\n        setTimeout(resolve, ms);\n    });\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction bufferToBase64UrlSafe(array) {\n    const b64 = btoa(String.fromCharCode(...array));\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nconst INVALID_FID = '';\n/**\n * Generates a new FID using random values from Web Crypto API.\n * Returns an empty string if FID generation fails for any reason.\n */\nfunction generateFid() {\n    try {\n        // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n        // bytes. our implementation generates a 17 byte array instead.\n        const fidByteArray = new Uint8Array(17);\n        const crypto = self.crypto || self.msCrypto;\n        crypto.getRandomValues(fidByteArray);\n        // Replace the first 4 random bits with the constant FID header of 0b0111.\n        fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\n        const fid = encode(fidByteArray);\n        return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n    }\n    catch (_a) {\n        // FID generation errored\n        return INVALID_FID;\n    }\n}\n/** Converts a FID Uint8Array to a base64 string representation. */\nfunction encode(fidByteArray) {\n    const b64String = bufferToBase64UrlSafe(fidByteArray);\n    // Remove the 23rd character that was added because of the extra 4 bits at the\n    // end of our 17 byte array, and the '=' padding.\n    return b64String.substr(0, 22);\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Returns a string key that can be used to identify the app. */\nfunction getKey(appConfig) {\n    return `${appConfig.appName}!${appConfig.appId}`;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst fidChangeCallbacks = new Map();\n/**\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\n * change to other tabs.\n */\nfunction fidChanged(appConfig, fid) {\n    const key = getKey(appConfig);\n    callFidChangeCallbacks(key, fid);\n    broadcastFidChange(key, fid);\n}\nfunction addCallback(appConfig, callback) {\n    // Open the broadcast channel if it's not already open,\n    // to be able to listen to change events from other tabs.\n    getBroadcastChannel();\n    const key = getKey(appConfig);\n    let callbackSet = fidChangeCallbacks.get(key);\n    if (!callbackSet) {\n        callbackSet = new Set();\n        fidChangeCallbacks.set(key, callbackSet);\n    }\n    callbackSet.add(callback);\n}\nfunction removeCallback(appConfig, callback) {\n    const key = getKey(appConfig);\n    const callbackSet = fidChangeCallbacks.get(key);\n    if (!callbackSet) {\n        return;\n    }\n    callbackSet.delete(callback);\n    if (callbackSet.size === 0) {\n        fidChangeCallbacks.delete(key);\n    }\n    // Close broadcast channel if there are no more callbacks.\n    closeBroadcastChannel();\n}\nfunction callFidChangeCallbacks(key, fid) {\n    const callbacks = fidChangeCallbacks.get(key);\n    if (!callbacks) {\n        return;\n    }\n    for (const callback of callbacks) {\n        callback(fid);\n    }\n}\nfunction broadcastFidChange(key, fid) {\n    const channel = getBroadcastChannel();\n    if (channel) {\n        channel.postMessage({ key, fid });\n    }\n    closeBroadcastChannel();\n}\nlet broadcastChannel = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\nfunction getBroadcastChannel() {\n    if (!broadcastChannel && 'BroadcastChannel' in self) {\n        broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n        broadcastChannel.onmessage = e => {\n            callFidChangeCallbacks(e.data.key, e.data.fid);\n        };\n    }\n    return broadcastChannel;\n}\nfunction closeBroadcastChannel() {\n    if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n        broadcastChannel.close();\n        broadcastChannel = null;\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DATABASE_NAME = 'firebase-installations-database';\nconst DATABASE_VERSION = 1;\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\nlet dbPromise = null;\nfunction getDbPromise() {\n    if (!dbPromise) {\n        dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\n            upgrade: (db, oldVersion) => {\n                // We don't use 'break' in this switch statement, the fall-through\n                // behavior is what we want, because if there are multiple versions between\n                // the old version and the current version, we want ALL the migrations\n                // that correspond to those versions to run, not only the last one.\n                // eslint-disable-next-line default-case\n                switch (oldVersion) {\n                    case 0:\n                        db.createObjectStore(OBJECT_STORE_NAME);\n                }\n            }\n        });\n    }\n    return dbPromise;\n}\n/** Assigns or overwrites the record for the given key with the given value. */\nasync function set(appConfig, value) {\n    const key = getKey(appConfig);\n    const db = await getDbPromise();\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(OBJECT_STORE_NAME);\n    const oldValue = (await objectStore.get(key));\n    await objectStore.put(value, key);\n    await tx.done;\n    if (!oldValue || oldValue.fid !== value.fid) {\n        fidChanged(appConfig, value.fid);\n    }\n    return value;\n}\n/** Removes record(s) from the objectStore that match the given key. */\nasync function remove(appConfig) {\n    const key = getKey(appConfig);\n    const db = await getDbPromise();\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n    await tx.objectStore(OBJECT_STORE_NAME).delete(key);\n    await tx.done;\n}\n/**\n * Atomically updates a record with the result of updateFn, which gets\n * called with the current value. If newValue is undefined, the record is\n * deleted instead.\n * @return Updated value\n */\nasync function update(appConfig, updateFn) {\n    const key = getKey(appConfig);\n    const db = await getDbPromise();\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n    const store = tx.objectStore(OBJECT_STORE_NAME);\n    const oldValue = (await store.get(key));\n    const newValue = updateFn(oldValue);\n    if (newValue === undefined) {\n        await store.delete(key);\n    }\n    else {\n        await store.put(newValue, key);\n    }\n    await tx.done;\n    if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n        fidChanged(appConfig, newValue.fid);\n    }\n    return newValue;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Updates and returns the InstallationEntry from the database.\n * Also triggers a registration request if it is necessary and possible.\n */\nasync function getInstallationEntry(installations) {\n    let registrationPromise;\n    const installationEntry = await update(installations.appConfig, oldEntry => {\n        const installationEntry = updateOrCreateInstallationEntry(oldEntry);\n        const entryWithPromise = triggerRegistrationIfNecessary(installations, installationEntry);\n        registrationPromise = entryWithPromise.registrationPromise;\n        return entryWithPromise.installationEntry;\n    });\n    if (installationEntry.fid === INVALID_FID) {\n        // FID generation failed. Waiting for the FID from the server.\n        return { installationEntry: await registrationPromise };\n    }\n    return {\n        installationEntry,\n        registrationPromise\n    };\n}\n/**\n * Creates a new Installation Entry if one does not exist.\n * Also clears timed out pending requests.\n */\nfunction updateOrCreateInstallationEntry(oldEntry) {\n    const entry = oldEntry || {\n        fid: generateFid(),\n        registrationStatus: 0 /* RequestStatus.NOT_STARTED */\n    };\n    return clearTimedOutRequest(entry);\n}\n/**\n * If the Firebase Installation is not registered yet, this will trigger the\n * registration and return an InProgressInstallationEntry.\n *\n * If registrationPromise does not exist, the installationEntry is guaranteed\n * to be registered.\n */\nfunction triggerRegistrationIfNecessary(installations, installationEntry) {\n    if (installationEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\n        if (!navigator.onLine) {\n            // Registration required but app is offline.\n            const registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */));\n            return {\n                installationEntry,\n                registrationPromise: registrationPromiseWithError\n            };\n        }\n        // Try registering. Change status to IN_PROGRESS.\n        const inProgressEntry = {\n            fid: installationEntry.fid,\n            registrationStatus: 1 /* RequestStatus.IN_PROGRESS */,\n            registrationTime: Date.now()\n        };\n        const registrationPromise = registerInstallation(installations, inProgressEntry);\n        return { installationEntry: inProgressEntry, registrationPromise };\n    }\n    else if (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\n        return {\n            installationEntry,\n            registrationPromise: waitUntilFidRegistration(installations)\n        };\n    }\n    else {\n        return { installationEntry };\n    }\n}\n/** This will be executed only once for each new Firebase Installation. */\nasync function registerInstallation(installations, installationEntry) {\n    try {\n        const registeredInstallationEntry = await createInstallationRequest(installations, installationEntry);\n        return set(installations.appConfig, registeredInstallationEntry);\n    }\n    catch (e) {\n        if (isServerError(e) && e.customData.serverCode === 409) {\n            // Server returned a \"FID cannot be used\" error.\n            // Generate a new ID next time.\n            await remove(installations.appConfig);\n        }\n        else {\n            // Registration failed. Set FID as not registered.\n            await set(installations.appConfig, {\n                fid: installationEntry.fid,\n                registrationStatus: 0 /* RequestStatus.NOT_STARTED */\n            });\n        }\n        throw e;\n    }\n}\n/** Call if FID registration is pending in another request. */\nasync function waitUntilFidRegistration(installations) {\n    // Unfortunately, there is no way of reliably observing when a value in\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n    // so we need to poll.\n    let entry = await updateInstallationRequest(installations.appConfig);\n    while (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\n        // createInstallation request still in progress.\n        await sleep(100);\n        entry = await updateInstallationRequest(installations.appConfig);\n    }\n    if (entry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\n        // The request timed out or failed in a different call. Try again.\n        const { installationEntry, registrationPromise } = await getInstallationEntry(installations);\n        if (registrationPromise) {\n            return registrationPromise;\n        }\n        else {\n            // if there is no registrationPromise, entry is registered.\n            return installationEntry;\n        }\n    }\n    return entry;\n}\n/**\n * Called only if there is a CreateInstallation request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * CreateInstallation request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateInstallationRequest(appConfig) {\n    return update(appConfig, oldEntry => {\n        if (!oldEntry) {\n            throw ERROR_FACTORY.create(\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */);\n        }\n        return clearTimedOutRequest(oldEntry);\n    });\n}\nfunction clearTimedOutRequest(entry) {\n    if (hasInstallationRequestTimedOut(entry)) {\n        return {\n            fid: entry.fid,\n            registrationStatus: 0 /* RequestStatus.NOT_STARTED */\n        };\n    }\n    return entry;\n}\nfunction hasInstallationRequestTimedOut(installationEntry) {\n    return (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\n        installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now());\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function generateAuthTokenRequest({ appConfig, heartbeatServiceProvider }, installationEntry) {\n    const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\n    // If heartbeat service exists, add the heartbeat string to the header.\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\n        optional: true\n    });\n    if (heartbeatService) {\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n        if (heartbeatsHeader) {\n            headers.append('x-firebase-client', heartbeatsHeader);\n        }\n    }\n    const body = {\n        installation: {\n            sdkVersion: PACKAGE_VERSION,\n            appId: appConfig.appId\n        }\n    };\n    const request = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(body)\n    };\n    const response = await retryIfServerError(() => fetch(endpoint, request));\n    if (response.ok) {\n        const responseValue = await response.json();\n        const completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\n        return completedAuthToken;\n    }\n    else {\n        throw await getErrorFromResponse('Generate Auth Token', response);\n    }\n}\nfunction getGenerateAuthTokenEndpoint(appConfig, { fid }) {\n    return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns a valid authentication token for the installation. Generates a new\n * token if one doesn't exist, is expired or about to expire.\n *\n * Should only be called if the Firebase Installation is registered.\n */\nasync function refreshAuthToken(installations, forceRefresh = false) {\n    let tokenPromise;\n    const entry = await update(installations.appConfig, oldEntry => {\n        if (!isEntryRegistered(oldEntry)) {\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\n        }\n        const oldAuthToken = oldEntry.authToken;\n        if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n            // There is a valid token in the DB.\n            return oldEntry;\n        }\n        else if (oldAuthToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\n            // There already is a token request in progress.\n            tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n            return oldEntry;\n        }\n        else {\n            // No token or token expired.\n            if (!navigator.onLine) {\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\n            }\n            const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n            tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n            return inProgressEntry;\n        }\n    });\n    const authToken = tokenPromise\n        ? await tokenPromise\n        : entry.authToken;\n    return authToken;\n}\n/**\n * Call only if FID is registered and Auth Token request is in progress.\n *\n * Waits until the current pending request finishes. If the request times out,\n * tries once in this thread as well.\n */\nasync function waitUntilAuthTokenRequest(installations, forceRefresh) {\n    // Unfortunately, there is no way of reliably observing when a value in\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n    // so we need to poll.\n    let entry = await updateAuthTokenRequest(installations.appConfig);\n    while (entry.authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\n        // generateAuthToken still in progress.\n        await sleep(100);\n        entry = await updateAuthTokenRequest(installations.appConfig);\n    }\n    const authToken = entry.authToken;\n    if (authToken.requestStatus === 0 /* RequestStatus.NOT_STARTED */) {\n        // The request timed out or failed in a different call. Try again.\n        return refreshAuthToken(installations, forceRefresh);\n    }\n    else {\n        return authToken;\n    }\n}\n/**\n * Called only if there is a GenerateAuthToken request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * GenerateAuthToken request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateAuthTokenRequest(appConfig) {\n    return update(appConfig, oldEntry => {\n        if (!isEntryRegistered(oldEntry)) {\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\n        }\n        const oldAuthToken = oldEntry.authToken;\n        if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n            return Object.assign(Object.assign({}, oldEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\n        }\n        return oldEntry;\n    });\n}\nasync function fetchAuthTokenFromServer(installations, installationEntry) {\n    try {\n        const authToken = await generateAuthTokenRequest(installations, installationEntry);\n        const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken });\n        await set(installations.appConfig, updatedInstallationEntry);\n        return authToken;\n    }\n    catch (e) {\n        if (isServerError(e) &&\n            (e.customData.serverCode === 401 || e.customData.serverCode === 404)) {\n            // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\n            // Generate a new ID next time.\n            await remove(installations.appConfig);\n        }\n        else {\n            const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\n            await set(installations.appConfig, updatedInstallationEntry);\n        }\n        throw e;\n    }\n}\nfunction isEntryRegistered(installationEntry) {\n    return (installationEntry !== undefined &&\n        installationEntry.registrationStatus === 2 /* RequestStatus.COMPLETED */);\n}\nfunction isAuthTokenValid(authToken) {\n    return (authToken.requestStatus === 2 /* RequestStatus.COMPLETED */ &&\n        !isAuthTokenExpired(authToken));\n}\nfunction isAuthTokenExpired(authToken) {\n    const now = Date.now();\n    return (now < authToken.creationTime ||\n        authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER);\n}\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\n    const inProgressAuthToken = {\n        requestStatus: 1 /* RequestStatus.IN_PROGRESS */,\n        requestTime: Date.now()\n    };\n    return Object.assign(Object.assign({}, oldEntry), { authToken: inProgressAuthToken });\n}\nfunction hasAuthTokenRequestTimedOut(authToken) {\n    return (authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\n        authToken.requestTime + PENDING_TIMEOUT_MS < Date.now());\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Creates a Firebase Installation if there isn't one for the app and\n * returns the Installation ID.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nasync function getId(installations) {\n    const installationsImpl = installations;\n    const { installationEntry, registrationPromise } = await getInstallationEntry(installationsImpl);\n    if (registrationPromise) {\n        registrationPromise.catch(console.error);\n    }\n    else {\n        // If the installation is already registered, update the authentication\n        // token if needed.\n        refreshAuthToken(installationsImpl).catch(console.error);\n    }\n    return installationEntry.fid;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns a Firebase Installations auth token, identifying the current\n * Firebase Installation.\n * @param installations - The `Installations` instance.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nasync function getToken(installations, forceRefresh = false) {\n    const installationsImpl = installations;\n    await completeInstallationRegistration(installationsImpl);\n    // At this point we either have a Registered Installation in the DB, or we've\n    // already thrown an error.\n    const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\n    return authToken.token;\n}\nasync function completeInstallationRegistration(installations) {\n    const { registrationPromise } = await getInstallationEntry(installations);\n    if (registrationPromise) {\n        // A createInstallation request is in progress. Wait until it finishes.\n        await registrationPromise;\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function deleteInstallationRequest(appConfig, installationEntry) {\n    const endpoint = getDeleteEndpoint(appConfig, installationEntry);\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\n    const request = {\n        method: 'DELETE',\n        headers\n    };\n    const response = await retryIfServerError(() => fetch(endpoint, request));\n    if (!response.ok) {\n        throw await getErrorFromResponse('Delete Installation', response);\n    }\n}\nfunction getDeleteEndpoint(appConfig, { fid }) {\n    return `${getInstallationsEndpoint(appConfig)}/${fid}`;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Deletes the Firebase Installation and all associated data.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nasync function deleteInstallations(installations) {\n    const { appConfig } = installations;\n    const entry = await update(appConfig, oldEntry => {\n        if (oldEntry && oldEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\n            // Delete the unregistered entry without sending a deleteInstallation request.\n            return undefined;\n        }\n        return oldEntry;\n    });\n    if (entry) {\n        if (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\n            // Can't delete while trying to register.\n            throw ERROR_FACTORY.create(\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */);\n        }\n        else if (entry.registrationStatus === 2 /* RequestStatus.COMPLETED */) {\n            if (!navigator.onLine) {\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\n            }\n            else {\n                await deleteInstallationRequest(appConfig, entry);\n                await remove(appConfig);\n            }\n        }\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Sets a new callback that will get called when Installation ID changes.\n * Returns an unsubscribe function that will remove the callback when called.\n * @param installations - The `Installations` instance.\n * @param callback - The callback function that is invoked when FID changes.\n * @returns A function that can be called to unsubscribe.\n *\n * @public\n */\nfunction onIdChange(installations, callback) {\n    const { appConfig } = installations;\n    addCallback(appConfig, callback);\n    return () => {\n        removeCallback(appConfig, callback);\n    };\n}\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns an instance of {@link Installations} associated with the given\n * {@link @firebase/app#FirebaseApp} instance.\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\n *\n * @public\n */\nfunction getInstallations(app = getApp()) {\n    const installationsImpl = _getProvider(app, 'installations').getImmediate();\n    return installationsImpl;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction extractAppConfig(app) {\n    if (!app || !app.options) {\n        throw getMissingValueError('App Configuration');\n    }\n    if (!app.name) {\n        throw getMissingValueError('App Name');\n    }\n    // Required app config keys\n    const configKeys = [\n        'projectId',\n        'apiKey',\n        'appId'\n    ];\n    for (const keyName of configKeys) {\n        if (!app.options[keyName]) {\n            throw getMissingValueError(keyName);\n        }\n    }\n    return {\n        appName: app.name,\n        projectId: app.options.projectId,\n        apiKey: app.options.apiKey,\n        appId: app.options.appId\n    };\n}\nfunction getMissingValueError(valueName) {\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */, {\n        valueName\n    });\n}\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst INSTALLATIONS_NAME = 'installations';\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\nconst publicFactory = (container) => {\n    const app = container.getProvider('app').getImmediate();\n    // Throws if app isn't configured properly.\n    const appConfig = extractAppConfig(app);\n    const heartbeatServiceProvider = _getProvider(app, 'heartbeat');\n    const installationsImpl = {\n        app,\n        appConfig,\n        heartbeatServiceProvider,\n        _delete: () => Promise.resolve()\n    };\n    return installationsImpl;\n};\nconst internalFactory = (container) => {\n    const app = container.getProvider('app').getImmediate();\n    // Internal FIS instance relies on public FIS instance.\n    const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\n    const installationsInternal = {\n        getId: () => getId(installations),\n        getToken: (forceRefresh) => getToken(installations, forceRefresh)\n    };\n    return installationsInternal;\n};\nfunction registerInstallations() {\n    _registerComponent(new Component(INSTALLATIONS_NAME, publicFactory, \"PUBLIC\" /* ComponentType.PUBLIC */));\n    _registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL, internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\n}\n\n/**\n * The Firebase Installations Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\nregisterInstallations();\nregisterVersion(name, version);\n// BUILD_TARGET will be replaced by values like esm2017, cjs2017, etc during the compilation\nregisterVersion(name, version, 'esm2017');\n\nexport { deleteInstallations, getId, getInstallations, getToken, onIdChange };\n//# sourceMappingURL=index.esm2017.js.map\n","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Logger } from '@firebase/logger';\nimport { ErrorFactory, calculateBackoffMillis, FirebaseError, isIndexedDBAvailable, validateIndexedDBOpenable, isBrowserExtension, areCookiesEnabled, getModularInstance, deepEqual } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport '@firebase/installations';\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Type constant for Firebase Analytics.\n */\nconst ANALYTICS_TYPE = 'analytics';\n// Key to attach FID to in gtag params.\nconst GA_FID_KEY = 'firebase_id';\nconst ORIGIN_KEY = 'origin';\nconst FETCH_TIMEOUT_MILLIS = 60 * 1000;\nconst DYNAMIC_CONFIG_URL = 'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig';\nconst GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst logger = new Logger('@firebase/analytics');\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst ERRORS = {\n    [\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */]: 'A Firebase Analytics instance with the appId {$id} ' +\n        ' already exists. ' +\n        'Only one Firebase Analytics instance can be created for each appId.',\n    [\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */]: 'initializeAnalytics() cannot be called again with different options than those ' +\n        'it was initially called with. It can be called again with the same options to ' +\n        'return the existing instance, or getAnalytics() can be used ' +\n        'to get a reference to the already-initialized instance.',\n    [\"already-initialized-settings\" /* AnalyticsError.ALREADY_INITIALIZED_SETTINGS */]: 'Firebase Analytics has already been initialized.' +\n        'settings() must be called before initializing any Analytics instance' +\n        'or it will have no effect.',\n    [\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */]: 'Firebase Analytics Interop Component failed to instantiate: {$reason}',\n    [\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */]: 'Firebase Analytics is not supported in this environment. ' +\n        'Wrap initialization of analytics in analytics.isSupported() ' +\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\n    [\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */]: 'IndexedDB unavailable or restricted in this environment. ' +\n        'Wrap initialization of analytics in analytics.isSupported() ' +\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\n    [\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */]: 'The config fetch request timed out while in an exponential backoff state.' +\n        ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\n    [\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */]: 'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}',\n    [\"no-api-key\" /* AnalyticsError.NO_API_KEY */]: 'The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\n        'contain a valid API key.',\n    [\"no-app-id\" /* AnalyticsError.NO_APP_ID */]: 'The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\n        'contain a valid app ID.',\n    [\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */]: 'The \"client_id\" field is empty.',\n    [\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */]: 'Trusted Types detected an invalid gtag resource: {$gtagURL}.'\n};\nconst ERROR_FACTORY = new ErrorFactory('analytics', 'Analytics', ERRORS);\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Verifies and creates a TrustedScriptURL.\n */\nfunction createGtagTrustedTypesScriptURL(url) {\n    if (!url.startsWith(GTAG_URL)) {\n        const err = ERROR_FACTORY.create(\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */, {\n            gtagURL: url\n        });\n        logger.warn(err.message);\n        return '';\n    }\n    return url;\n}\n/**\n * Makeshift polyfill for Promise.allSettled(). Resolves when all promises\n * have either resolved or rejected.\n *\n * @param promises Array of promises to wait for.\n */\nfunction promiseAllSettled(promises) {\n    return Promise.all(promises.map(promise => promise.catch(e => e)));\n}\n/**\n * Creates a TrustedTypePolicy object that implements the rules passed as policyOptions.\n *\n * @param policyName A string containing the name of the policy\n * @param policyOptions Object containing implementations of instance methods for TrustedTypesPolicy, see {@link https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy#instance_methods\n * | the TrustedTypePolicy reference documentation}.\n */\nfunction createTrustedTypesPolicy(policyName, policyOptions) {\n    // Create a TrustedTypes policy that we can use for updating src\n    // properties\n    let trustedTypesPolicy;\n    if (window.trustedTypes) {\n        trustedTypesPolicy = window.trustedTypes.createPolicy(policyName, policyOptions);\n    }\n    return trustedTypesPolicy;\n}\n/**\n * Inserts gtag script tag into the page to asynchronously download gtag.\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\n */\nfunction insertScriptTag(dataLayerName, measurementId) {\n    const trustedTypesPolicy = createTrustedTypesPolicy('firebase-js-sdk-policy', {\n        createScriptURL: createGtagTrustedTypesScriptURL\n    });\n    const script = document.createElement('script');\n    // We are not providing an analyticsId in the URL because it would trigger a `page_view`\n    // without fid. We will initialize ga-id using gtag (config) command together with fid.\n    const gtagScriptURL = `${GTAG_URL}?l=${dataLayerName}&id=${measurementId}`;\n    script.src = trustedTypesPolicy\n        ? trustedTypesPolicy === null || trustedTypesPolicy === void 0 ? void 0 : trustedTypesPolicy.createScriptURL(gtagScriptURL)\n        : gtagScriptURL;\n    script.async = true;\n    document.head.appendChild(script);\n}\n/**\n * Get reference to, or create, global datalayer.\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\n */\nfunction getOrCreateDataLayer(dataLayerName) {\n    // Check for existing dataLayer and create if needed.\n    let dataLayer = [];\n    if (Array.isArray(window[dataLayerName])) {\n        dataLayer = window[dataLayerName];\n    }\n    else {\n        window[dataLayerName] = dataLayer;\n    }\n    return dataLayer;\n}\n/**\n * Wrapped gtag logic when gtag is called with 'config' command.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n * @param measurementId GA Measurement ID to set config for.\n * @param gtagParams Gtag config params to set.\n */\nasync function gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams) {\n    // If config is already fetched, we know the appId and can use it to look up what FID promise we\n    /// are waiting for, and wait only on that one.\n    const correspondingAppId = measurementIdToAppId[measurementId];\n    try {\n        if (correspondingAppId) {\n            await initializationPromisesMap[correspondingAppId];\n        }\n        else {\n            // If config is not fetched yet, wait for all configs (we don't know which one we need) and\n            // find the appId (if any) corresponding to this measurementId. If there is one, wait on\n            // that appId's initialization promise. If there is none, promise resolves and gtag\n            // call goes through.\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\n            const foundConfig = dynamicConfigResults.find(config => config.measurementId === measurementId);\n            if (foundConfig) {\n                await initializationPromisesMap[foundConfig.appId];\n            }\n        }\n    }\n    catch (e) {\n        logger.error(e);\n    }\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, measurementId, gtagParams);\n}\n/**\n * Wrapped gtag logic when gtag is called with 'event' command.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementId GA Measurement ID to log event to.\n * @param gtagParams Params to log with this event.\n */\nasync function gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams) {\n    try {\n        let initializationPromisesToWaitFor = [];\n        // If there's a 'send_to' param, check if any ID specified matches\n        // an initializeIds() promise we are waiting for.\n        if (gtagParams && gtagParams['send_to']) {\n            let gaSendToList = gtagParams['send_to'];\n            // Make it an array if is isn't, so it can be dealt with the same way.\n            if (!Array.isArray(gaSendToList)) {\n                gaSendToList = [gaSendToList];\n            }\n            // Checking 'send_to' fields requires having all measurement ID results back from\n            // the dynamic config fetch.\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\n            for (const sendToId of gaSendToList) {\n                // Any fetched dynamic measurement ID that matches this 'send_to' ID\n                const foundConfig = dynamicConfigResults.find(config => config.measurementId === sendToId);\n                const initializationPromise = foundConfig && initializationPromisesMap[foundConfig.appId];\n                if (initializationPromise) {\n                    initializationPromisesToWaitFor.push(initializationPromise);\n                }\n                else {\n                    // Found an item in 'send_to' that is not associated\n                    // directly with an FID, possibly a group.  Empty this array,\n                    // exit the loop early, and let it get populated below.\n                    initializationPromisesToWaitFor = [];\n                    break;\n                }\n            }\n        }\n        // This will be unpopulated if there was no 'send_to' field , or\n        // if not all entries in the 'send_to' field could be mapped to\n        // a FID. In these cases, wait on all pending initialization promises.\n        if (initializationPromisesToWaitFor.length === 0) {\n            /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\n            initializationPromisesToWaitFor = Object.values(initializationPromisesMap);\n        }\n        // Run core gtag function with args after all relevant initialization\n        // promises have been resolved.\n        await Promise.all(initializationPromisesToWaitFor);\n        // Workaround for http://b/141370449 - third argument cannot be undefined.\n        gtagCore(\"event\" /* GtagCommand.EVENT */, measurementId, gtagParams || {});\n    }\n    catch (e) {\n        logger.error(e);\n    }\n}\n/**\n * Wraps a standard gtag function with extra code to wait for completion of\n * relevant initialization promises before sending requests.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n */\nfunction wrapGtag(gtagCore, \n/**\n * Allows wrapped gtag calls to wait on whichever initialization promises are required,\n * depending on the contents of the gtag params' `send_to` field, if any.\n */\ninitializationPromisesMap, \n/**\n * Wrapped gtag calls sometimes require all dynamic config fetches to have returned\n * before determining what initialization promises (which include FIDs) to wait for.\n */\ndynamicConfigPromisesList, \n/**\n * Wrapped gtag config calls can narrow down which initialization promise (with FID)\n * to wait for if the measurementId is already fetched, by getting the corresponding appId,\n * which is the key for the initialization promises map.\n */\nmeasurementIdToAppId) {\n    /**\n     * Wrapper around gtag that ensures FID is sent with gtag calls.\n     * @param command Gtag command type.\n     * @param idOrNameOrParams Measurement ID if command is EVENT/CONFIG, params if command is SET.\n     * @param gtagParams Params if event is EVENT/CONFIG.\n     */\n    async function gtagWrapper(command, ...args) {\n        try {\n            // If event, check that relevant initialization promises have completed.\n            if (command === \"event\" /* GtagCommand.EVENT */) {\n                const [measurementId, gtagParams] = args;\n                // If EVENT, second arg must be measurementId.\n                await gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams);\n            }\n            else if (command === \"config\" /* GtagCommand.CONFIG */) {\n                const [measurementId, gtagParams] = args;\n                // If CONFIG, second arg must be measurementId.\n                await gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams);\n            }\n            else if (command === \"consent\" /* GtagCommand.CONSENT */) {\n                const [consentAction, gtagParams] = args;\n                // consentAction can be one of 'default' or 'update'.\n                gtagCore(\"consent\" /* GtagCommand.CONSENT */, consentAction, gtagParams);\n            }\n            else if (command === \"get\" /* GtagCommand.GET */) {\n                const [measurementId, fieldName, callback] = args;\n                gtagCore(\"get\" /* GtagCommand.GET */, measurementId, fieldName, callback);\n            }\n            else if (command === \"set\" /* GtagCommand.SET */) {\n                const [customParams] = args;\n                // If SET, second arg must be params.\n                gtagCore(\"set\" /* GtagCommand.SET */, customParams);\n            }\n            else {\n                gtagCore(command, ...args);\n            }\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    return gtagWrapper;\n}\n/**\n * Creates global gtag function or wraps existing one if found.\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\n * 'event' calls that belong to the GAID associated with this Firebase instance.\n *\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n * @param dataLayerName Name of global GA datalayer array.\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified).\n */\nfunction wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagFunctionName) {\n    // Create a basic core gtag function\n    let gtagCore = function (..._args) {\n        // Must push IArguments object, not an array.\n        window[dataLayerName].push(arguments);\n    };\n    // Replace it with existing one if found\n    if (window[gtagFunctionName] &&\n        typeof window[gtagFunctionName] === 'function') {\n        // @ts-ignore\n        gtagCore = window[gtagFunctionName];\n    }\n    window[gtagFunctionName] = wrapGtag(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId);\n    return {\n        gtagCore,\n        wrappedGtag: window[gtagFunctionName]\n    };\n}\n/**\n * Returns the script tag in the DOM matching both the gtag url pattern\n * and the provided data layer name.\n */\nfunction findGtagScriptOnPage(dataLayerName) {\n    const scriptTags = window.document.getElementsByTagName('script');\n    for (const tag of Object.values(scriptTags)) {\n        if (tag.src &&\n            tag.src.includes(GTAG_URL) &&\n            tag.src.includes(dataLayerName)) {\n            return tag;\n        }\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Backoff factor for 503 errors, which we want to be conservative about\n * to avoid overloading servers. Each retry interval will be\n * BASE_INTERVAL_MILLIS * LONG_RETRY_FACTOR ^ retryCount, so the second one\n * will be ~30 seconds (with fuzzing).\n */\nconst LONG_RETRY_FACTOR = 30;\n/**\n * Base wait interval to multiplied by backoffFactor^backoffCount.\n */\nconst BASE_INTERVAL_MILLIS = 1000;\n/**\n * Stubbable retry data storage class.\n */\nclass RetryData {\n    constructor(throttleMetadata = {}, intervalMillis = BASE_INTERVAL_MILLIS) {\n        this.throttleMetadata = throttleMetadata;\n        this.intervalMillis = intervalMillis;\n    }\n    getThrottleMetadata(appId) {\n        return this.throttleMetadata[appId];\n    }\n    setThrottleMetadata(appId, metadata) {\n        this.throttleMetadata[appId] = metadata;\n    }\n    deleteThrottleMetadata(appId) {\n        delete this.throttleMetadata[appId];\n    }\n}\nconst defaultRetryData = new RetryData();\n/**\n * Set GET request headers.\n * @param apiKey App API key.\n */\nfunction getHeaders(apiKey) {\n    return new Headers({\n        Accept: 'application/json',\n        'x-goog-api-key': apiKey\n    });\n}\n/**\n * Fetches dynamic config from backend.\n * @param app Firebase app to fetch config for.\n */\nasync function fetchDynamicConfig(appFields) {\n    var _a;\n    const { appId, apiKey } = appFields;\n    const request = {\n        method: 'GET',\n        headers: getHeaders(apiKey)\n    };\n    const appUrl = DYNAMIC_CONFIG_URL.replace('{app-id}', appId);\n    const response = await fetch(appUrl, request);\n    if (response.status !== 200 && response.status !== 304) {\n        let errorMessage = '';\n        try {\n            // Try to get any error message text from server response.\n            const jsonResponse = (await response.json());\n            if ((_a = jsonResponse.error) === null || _a === void 0 ? void 0 : _a.message) {\n                errorMessage = jsonResponse.error.message;\n            }\n        }\n        catch (_ignored) { }\n        throw ERROR_FACTORY.create(\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */, {\n            httpStatus: response.status,\n            responseMessage: errorMessage\n        });\n    }\n    return response.json();\n}\n/**\n * Fetches dynamic config from backend, retrying if failed.\n * @param app Firebase app to fetch config for.\n */\nasync function fetchDynamicConfigWithRetry(app, \n// retryData and timeoutMillis are parameterized to allow passing a different value for testing.\nretryData = defaultRetryData, timeoutMillis) {\n    const { appId, apiKey, measurementId } = app.options;\n    if (!appId) {\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\n    }\n    if (!apiKey) {\n        if (measurementId) {\n            return {\n                measurementId,\n                appId\n            };\n        }\n        throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\n    }\n    const throttleMetadata = retryData.getThrottleMetadata(appId) || {\n        backoffCount: 0,\n        throttleEndTimeMillis: Date.now()\n    };\n    const signal = new AnalyticsAbortSignal();\n    setTimeout(async () => {\n        // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\n        signal.abort();\n    }, timeoutMillis !== undefined ? timeoutMillis : FETCH_TIMEOUT_MILLIS);\n    return attemptFetchDynamicConfigWithRetry({ appId, apiKey, measurementId }, throttleMetadata, signal, retryData);\n}\n/**\n * Runs one retry attempt.\n * @param appFields Necessary app config fields.\n * @param throttleMetadata Ongoing metadata to determine throttling times.\n * @param signal Abort signal.\n */\nasync function attemptFetchDynamicConfigWithRetry(appFields, { throttleEndTimeMillis, backoffCount }, signal, retryData = defaultRetryData // for testing\n) {\n    var _a;\n    const { appId, measurementId } = appFields;\n    // Starts with a (potentially zero) timeout to support resumption from stored state.\n    // Ensures the throttle end time is honored if the last attempt timed out.\n    // Note the SDK will never make a request if the fetch timeout expires at this point.\n    try {\n        await setAbortableTimeout(signal, throttleEndTimeMillis);\n    }\n    catch (e) {\n        if (measurementId) {\n            logger.warn(`Timed out fetching this Firebase app's measurement ID from the server.` +\n                ` Falling back to the measurement ID ${measurementId}` +\n                ` provided in the \"measurementId\" field in the local Firebase config. [${e === null || e === void 0 ? void 0 : e.message}]`);\n            return { appId, measurementId };\n        }\n        throw e;\n    }\n    try {\n        const response = await fetchDynamicConfig(appFields);\n        // Note the SDK only clears throttle state if response is success or non-retriable.\n        retryData.deleteThrottleMetadata(appId);\n        return response;\n    }\n    catch (e) {\n        const error = e;\n        if (!isRetriableError(error)) {\n            retryData.deleteThrottleMetadata(appId);\n            if (measurementId) {\n                logger.warn(`Failed to fetch this Firebase app's measurement ID from the server.` +\n                    ` Falling back to the measurement ID ${measurementId}` +\n                    ` provided in the \"measurementId\" field in the local Firebase config. [${error === null || error === void 0 ? void 0 : error.message}]`);\n                return { appId, measurementId };\n            }\n            else {\n                throw e;\n            }\n        }\n        const backoffMillis = Number((_a = error === null || error === void 0 ? void 0 : error.customData) === null || _a === void 0 ? void 0 : _a.httpStatus) === 503\n            ? calculateBackoffMillis(backoffCount, retryData.intervalMillis, LONG_RETRY_FACTOR)\n            : calculateBackoffMillis(backoffCount, retryData.intervalMillis);\n        // Increments backoff state.\n        const throttleMetadata = {\n            throttleEndTimeMillis: Date.now() + backoffMillis,\n            backoffCount: backoffCount + 1\n        };\n        // Persists state.\n        retryData.setThrottleMetadata(appId, throttleMetadata);\n        logger.debug(`Calling attemptFetch again in ${backoffMillis} millis`);\n        return attemptFetchDynamicConfigWithRetry(appFields, throttleMetadata, signal, retryData);\n    }\n}\n/**\n * Supports waiting on a backoff by:\n *\n * <ul>\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\n *       request appear the same.</li>\n * </ul>\n *\n * <p>Visible for testing.\n */\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\n    return new Promise((resolve, reject) => {\n        // Derives backoff from given end time, normalizing negative numbers to zero.\n        const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\n        const timeout = setTimeout(resolve, backoffMillis);\n        // Adds listener, rather than sets onabort, because signal is a shared object.\n        signal.addEventListener(() => {\n            clearTimeout(timeout);\n            // If the request completes before this timeout, the rejection has no effect.\n            reject(ERROR_FACTORY.create(\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */, {\n                throttleEndTimeMillis\n            }));\n        });\n    });\n}\n/**\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\n */\nfunction isRetriableError(e) {\n    if (!(e instanceof FirebaseError) || !e.customData) {\n        return false;\n    }\n    // Uses string index defined by ErrorData, which FirebaseError implements.\n    const httpStatus = Number(e.customData['httpStatus']);\n    return (httpStatus === 429 ||\n        httpStatus === 500 ||\n        httpStatus === 503 ||\n        httpStatus === 504);\n}\n/**\n * Shims a minimal AbortSignal (copied from Remote Config).\n *\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\n * swapped out if/when we do.\n */\nclass AnalyticsAbortSignal {\n    constructor() {\n        this.listeners = [];\n    }\n    addEventListener(listener) {\n        this.listeners.push(listener);\n    }\n    abort() {\n        this.listeners.forEach(listener => listener());\n    }\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Event parameters to set on 'gtag' during initialization.\n */\nlet defaultEventParametersForInit;\n/**\n * Logs an analytics event through the Firebase SDK.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\n * @param eventParams Analytics event parameters.\n */\nasync function logEvent$1(gtagFunction, initializationPromise, eventName, eventParams, options) {\n    if (options && options.global) {\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, eventParams);\n        return;\n    }\n    else {\n        const measurementId = await initializationPromise;\n        const params = Object.assign(Object.assign({}, eventParams), { 'send_to': measurementId });\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, params);\n    }\n}\n/**\n * Set screen_name parameter for this Google Analytics ID.\n *\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param screenName Screen name string to set.\n */\nasync function setCurrentScreen$1(gtagFunction, initializationPromise, screenName, options) {\n    if (options && options.global) {\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'screen_name': screenName });\n        return Promise.resolve();\n    }\n    else {\n        const measurementId = await initializationPromise;\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\n            update: true,\n            'screen_name': screenName\n        });\n    }\n}\n/**\n * Set user_id parameter for this Google Analytics ID.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param id User ID string to set\n */\nasync function setUserId$1(gtagFunction, initializationPromise, id, options) {\n    if (options && options.global) {\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'user_id': id });\n        return Promise.resolve();\n    }\n    else {\n        const measurementId = await initializationPromise;\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\n            update: true,\n            'user_id': id\n        });\n    }\n}\n/**\n * Set all other user properties other than user_id and screen_name.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param properties Map of user properties to set\n */\nasync function setUserProperties$1(gtagFunction, initializationPromise, properties, options) {\n    if (options && options.global) {\n        const flatProperties = {};\n        for (const key of Object.keys(properties)) {\n            // use dot notation for merge behavior in gtag.js\n            flatProperties[`user_properties.${key}`] = properties[key];\n        }\n        gtagFunction(\"set\" /* GtagCommand.SET */, flatProperties);\n        return Promise.resolve();\n    }\n    else {\n        const measurementId = await initializationPromise;\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\n            update: true,\n            'user_properties': properties\n        });\n    }\n}\n/**\n * Retrieves a unique Google Analytics identifier for the web client.\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n */\nasync function internalGetGoogleAnalyticsClientId(gtagFunction, initializationPromise) {\n    const measurementId = await initializationPromise;\n    return new Promise((resolve, reject) => {\n        gtagFunction(\"get\" /* GtagCommand.GET */, measurementId, 'client_id', (clientId) => {\n            if (!clientId) {\n                reject(ERROR_FACTORY.create(\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */));\n            }\n            resolve(clientId);\n        });\n    });\n}\n/**\n * Set whether collection is enabled for this ID.\n *\n * @param enabled If true, collection is enabled for this ID.\n */\nasync function setAnalyticsCollectionEnabled$1(initializationPromise, enabled) {\n    const measurementId = await initializationPromise;\n    window[`ga-disable-${measurementId}`] = !enabled;\n}\n/**\n * Consent parameters to default to during 'gtag' initialization.\n */\nlet defaultConsentSettingsForInit;\n/**\n * Sets the variable {@link defaultConsentSettingsForInit} for use in the initialization of\n * analytics.\n *\n * @param consentSettings Maps the applicable end user consent state for gtag.js.\n */\nfunction _setConsentDefaultForInit(consentSettings) {\n    defaultConsentSettingsForInit = consentSettings;\n}\n/**\n * Sets the variable `defaultEventParametersForInit` for use in the initialization of\n * analytics.\n *\n * @param customParams Any custom params the user may pass to gtag.js.\n */\nfunction _setDefaultEventParametersForInit(customParams) {\n    defaultEventParametersForInit = customParams;\n}\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function validateIndexedDB() {\n    if (!isIndexedDBAvailable()) {\n        logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\n            errorInfo: 'IndexedDB is not available in this environment.'\n        }).message);\n        return false;\n    }\n    else {\n        try {\n            await validateIndexedDBOpenable();\n        }\n        catch (e) {\n            logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\n                errorInfo: e === null || e === void 0 ? void 0 : e.toString()\n            }).message);\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Initialize the analytics instance in gtag.js by calling config command with fid.\n *\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\n * part of the `page_view` event that's sent during the initialization\n * @param app Firebase app\n * @param gtagCore The gtag function that's not wrapped.\n * @param dynamicConfigPromisesList Array of all dynamic config promises.\n * @param measurementIdToAppId Maps measurementID to appID.\n * @param installations _FirebaseInstallationsInternal instance.\n *\n * @returns Measurement ID.\n */\nasync function _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCore, dataLayerName, options) {\n    var _a;\n    const dynamicConfigPromise = fetchDynamicConfigWithRetry(app);\n    // Once fetched, map measurementIds to appId, for ease of lookup in wrapped gtag function.\n    dynamicConfigPromise\n        .then(config => {\n        measurementIdToAppId[config.measurementId] = config.appId;\n        if (app.options.measurementId &&\n            config.measurementId !== app.options.measurementId) {\n            logger.warn(`The measurement ID in the local Firebase config (${app.options.measurementId})` +\n                ` does not match the measurement ID fetched from the server (${config.measurementId}).` +\n                ` To ensure analytics events are always sent to the correct Analytics property,` +\n                ` update the` +\n                ` measurement ID field in the local config or remove it from the local config.`);\n        }\n    })\n        .catch(e => logger.error(e));\n    // Add to list to track state of all dynamic config promises.\n    dynamicConfigPromisesList.push(dynamicConfigPromise);\n    const fidPromise = validateIndexedDB().then(envIsValid => {\n        if (envIsValid) {\n            return installations.getId();\n        }\n        else {\n            return undefined;\n        }\n    });\n    const [dynamicConfig, fid] = await Promise.all([\n        dynamicConfigPromise,\n        fidPromise\n    ]);\n    // Detect if user has already put the gtag <script> tag on this page with the passed in\n    // data layer name.\n    if (!findGtagScriptOnPage(dataLayerName)) {\n        insertScriptTag(dataLayerName, dynamicConfig.measurementId);\n    }\n    // Detects if there are consent settings that need to be configured.\n    if (defaultConsentSettingsForInit) {\n        gtagCore(\"consent\" /* GtagCommand.CONSENT */, 'default', defaultConsentSettingsForInit);\n        _setConsentDefaultForInit(undefined);\n    }\n    // This command initializes gtag.js and only needs to be called once for the entire web app,\n    // but since it is idempotent, we can call it multiple times.\n    // We keep it together with other initialization logic for better code structure.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    gtagCore('js', new Date());\n    // User config added first. We don't want users to accidentally overwrite\n    // base Firebase config properties.\n    const configProperties = (_a = options === null || options === void 0 ? void 0 : options.config) !== null && _a !== void 0 ? _a : {};\n    // guard against developers accidentally setting properties with prefix `firebase_`\n    configProperties[ORIGIN_KEY] = 'firebase';\n    configProperties.update = true;\n    if (fid != null) {\n        configProperties[GA_FID_KEY] = fid;\n    }\n    // It should be the first config command called on this GA-ID\n    // Initialize this GA-ID and set FID on it using the gtag config API.\n    // Note: This will trigger a page_view event unless 'send_page_view' is set to false in\n    // `configProperties`.\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, dynamicConfig.measurementId, configProperties);\n    // Detects if there is data that will be set on every event logged from the SDK.\n    if (defaultEventParametersForInit) {\n        gtagCore(\"set\" /* GtagCommand.SET */, defaultEventParametersForInit);\n        _setDefaultEventParametersForInit(undefined);\n    }\n    return dynamicConfig.measurementId;\n}\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Analytics Service class.\n */\nclass AnalyticsService {\n    constructor(app) {\n        this.app = app;\n    }\n    _delete() {\n        delete initializationPromisesMap[this.app.options.appId];\n        return Promise.resolve();\n    }\n}\n/**\n * Maps appId to full initialization promise. Wrapped gtag calls must wait on\n * all or some of these, depending on the call's `send_to` param and the status\n * of the dynamic config fetches (see below).\n */\nlet initializationPromisesMap = {};\n/**\n * List of dynamic config fetch promises. In certain cases, wrapped gtag calls\n * wait on all these to be complete in order to determine if it can selectively\n * wait for only certain initialization (FID) promises or if it must wait for all.\n */\nlet dynamicConfigPromisesList = [];\n/**\n * Maps fetched measurementIds to appId. Populated when the app's dynamic config\n * fetch completes. If already populated, gtag config calls can use this to\n * selectively wait for only this app's initialization promise (FID) instead of all\n * initialization promises.\n */\nconst measurementIdToAppId = {};\n/**\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\n */\nlet dataLayerName = 'dataLayer';\n/**\n * Name for window global gtag function used by GA: defaults to 'gtag'.\n */\nlet gtagName = 'gtag';\n/**\n * Reproduction of standard gtag function or reference to existing\n * gtag function on window object.\n */\nlet gtagCoreFunction;\n/**\n * Wrapper around gtag function that ensures FID is sent with all\n * relevant event and config calls.\n */\nlet wrappedGtagFunction;\n/**\n * Flag to ensure page initialization steps (creation or wrapping of\n * dataLayer and gtag script) are only run once per page load.\n */\nlet globalInitDone = false;\n/**\n * Configures Firebase Analytics to use custom `gtag` or `dataLayer` names.\n * Intended to be used if `gtag.js` script has been installed on\n * this page independently of Firebase Analytics, and is using non-default\n * names for either the `gtag` function or for `dataLayer`.\n * Must be called before calling `getAnalytics()` or it won't\n * have any effect.\n *\n * @public\n *\n * @param options - Custom gtag and dataLayer names.\n */\nfunction settings(options) {\n    if (globalInitDone) {\n        throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\n    }\n    if (options.dataLayerName) {\n        dataLayerName = options.dataLayerName;\n    }\n    if (options.gtagName) {\n        gtagName = options.gtagName;\n    }\n}\n/**\n * Returns true if no environment mismatch is found.\n * If environment mismatches are found, throws an INVALID_ANALYTICS_CONTEXT\n * error that also lists details for each mismatch found.\n */\nfunction warnOnBrowserContextMismatch() {\n    const mismatchedEnvMessages = [];\n    if (isBrowserExtension()) {\n        mismatchedEnvMessages.push('This is a browser extension environment.');\n    }\n    if (!areCookiesEnabled()) {\n        mismatchedEnvMessages.push('Cookies are not available.');\n    }\n    if (mismatchedEnvMessages.length > 0) {\n        const details = mismatchedEnvMessages\n            .map((message, index) => `(${index + 1}) ${message}`)\n            .join(' ');\n        const err = ERROR_FACTORY.create(\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */, {\n            errorInfo: details\n        });\n        logger.warn(err.message);\n    }\n}\n/**\n * Analytics instance factory.\n * @internal\n */\nfunction factory(app, installations, options) {\n    warnOnBrowserContextMismatch();\n    const appId = app.options.appId;\n    if (!appId) {\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\n    }\n    if (!app.options.apiKey) {\n        if (app.options.measurementId) {\n            logger.warn(`The \"apiKey\" field is empty in the local Firebase config. This is needed to fetch the latest` +\n                ` measurement ID for this Firebase app. Falling back to the measurement ID ${app.options.measurementId}` +\n                ` provided in the \"measurementId\" field in the local Firebase config.`);\n        }\n        else {\n            throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\n        }\n    }\n    if (initializationPromisesMap[appId] != null) {\n        throw ERROR_FACTORY.create(\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */, {\n            id: appId\n        });\n    }\n    if (!globalInitDone) {\n        // Steps here should only be done once per page: creation or wrapping\n        // of dataLayer and global gtag function.\n        getOrCreateDataLayer(dataLayerName);\n        const { wrappedGtag, gtagCore } = wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagName);\n        wrappedGtagFunction = wrappedGtag;\n        gtagCoreFunction = gtagCore;\n        globalInitDone = true;\n    }\n    // Async but non-blocking.\n    // This map reflects the completion state of all promises for each appId.\n    initializationPromisesMap[appId] = _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCoreFunction, dataLayerName, options);\n    const analyticsInstance = new AnalyticsService(app);\n    return analyticsInstance;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Returns an {@link Analytics} instance for the given app.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nfunction getAnalytics(app = getApp()) {\n    app = getModularInstance(app);\n    // Dependencies\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\n    if (analyticsProvider.isInitialized()) {\n        return analyticsProvider.getImmediate();\n    }\n    return initializeAnalytics(app);\n}\n/**\n * Returns an {@link Analytics} instance for the given app.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nfunction initializeAnalytics(app, options = {}) {\n    // Dependencies\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\n    if (analyticsProvider.isInitialized()) {\n        const existingInstance = analyticsProvider.getImmediate();\n        if (deepEqual(options, analyticsProvider.getOptions())) {\n            return existingInstance;\n        }\n        else {\n            throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\n        }\n    }\n    const analyticsInstance = analyticsProvider.initialize({ options });\n    return analyticsInstance;\n}\n/**\n * This is a public static method provided to users that wraps four different checks:\n *\n * 1. Check if it's not a browser extension environment.\n * 2. Check if cookies are enabled in current browser.\n * 3. Check if IndexedDB is supported by the browser environment.\n * 4. Check if the current browser context is valid for using `IndexedDB.open()`.\n *\n * @public\n *\n */\nasync function isSupported() {\n    if (isBrowserExtension()) {\n        return false;\n    }\n    if (!areCookiesEnabled()) {\n        return false;\n    }\n    if (!isIndexedDBAvailable()) {\n        return false;\n    }\n    try {\n        const isDBOpenable = await validateIndexedDBOpenable();\n        return isDBOpenable;\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Use gtag `config` command to set `screen_name`.\n *\n * @public\n *\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param screenName - Screen name to set.\n */\nfunction setCurrentScreen(analyticsInstance, screenName, options) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    setCurrentScreen$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], screenName, options).catch(e => logger.error(e));\n}\n/**\n * Retrieves a unique Google Analytics identifier for the web client.\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nasync function getGoogleAnalyticsClientId(analyticsInstance) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    return internalGetGoogleAnalyticsClientId(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId]);\n}\n/**\n * Use gtag `config` command to set `user_id`.\n *\n * @public\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param id - User ID to set.\n */\nfunction setUserId(analyticsInstance, id, options) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    setUserId$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], id, options).catch(e => logger.error(e));\n}\n/**\n * Use gtag `config` command to set all params specified.\n *\n * @public\n */\nfunction setUserProperties(analyticsInstance, properties, options) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    setUserProperties$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], properties, options).catch(e => logger.error(e));\n}\n/**\n * Sets whether Google Analytics collection is enabled for this app on this device.\n * Sets global `window['ga-disable-analyticsId'] = true;`\n *\n * @public\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param enabled - If true, enables collection, if false, disables it.\n */\nfunction setAnalyticsCollectionEnabled(analyticsInstance, enabled) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    setAnalyticsCollectionEnabled$1(initializationPromisesMap[analyticsInstance.app.options.appId], enabled).catch(e => logger.error(e));\n}\n/**\n * Adds data that will be set on every event logged from the SDK, including automatic ones.\n * With gtag's \"set\" command, the values passed persist on the current page and are passed with\n * all subsequent events.\n * @public\n * @param customParams - Any custom params the user may pass to gtag.js.\n */\nfunction setDefaultEventParameters(customParams) {\n    // Check if reference to existing gtag function on window object exists\n    if (wrappedGtagFunction) {\n        wrappedGtagFunction(\"set\" /* GtagCommand.SET */, customParams);\n    }\n    else {\n        _setDefaultEventParametersForInit(customParams);\n    }\n}\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * List of official event parameters can be found in the gtag.js\n * reference documentation:\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n *\n * @public\n */\nfunction logEvent(analyticsInstance, eventName, eventParams, options) {\n    analyticsInstance = getModularInstance(analyticsInstance);\n    logEvent$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], eventName, eventParams, options).catch(e => logger.error(e));\n}\n/**\n * Sets the applicable end user consent state for this web app across all gtag references once\n * Firebase Analytics is initialized.\n *\n * Use the {@link ConsentSettings} to specify individual consent type values. By default consent\n * types are set to \"granted\".\n * @public\n * @param consentSettings - Maps the applicable end user consent state for gtag.js.\n */\nfunction setConsent(consentSettings) {\n    // Check if reference to existing gtag function on window object exists\n    if (wrappedGtagFunction) {\n        wrappedGtagFunction(\"consent\" /* GtagCommand.CONSENT */, 'update', consentSettings);\n    }\n    else {\n        _setConsentDefaultForInit(consentSettings);\n    }\n}\n\nconst name = \"@firebase/analytics\";\nconst version = \"0.10.16\";\n\n/**\n * The Firebase Analytics Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\nfunction registerAnalytics() {\n    _registerComponent(new Component(ANALYTICS_TYPE, (container, { options: analyticsOptions }) => {\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app').getImmediate();\n        const installations = container\n            .getProvider('installations-internal')\n            .getImmediate();\n        return factory(app, installations, analyticsOptions);\n    }, \"PUBLIC\" /* ComponentType.PUBLIC */));\n    _registerComponent(new Component('analytics-internal', internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\n    registerVersion(name, version);\n    // BUILD_TARGET will be replaced by values like esm2017, cjs2017, etc during the compilation\n    registerVersion(name, version, 'esm2017');\n    function internalFactory(container) {\n        try {\n            const analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\n            return {\n                logEvent: (eventName, eventParams, options) => logEvent(analytics, eventName, eventParams, options)\n            };\n        }\n        catch (e) {\n            throw ERROR_FACTORY.create(\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */, {\n                reason: e\n            });\n        }\n    }\n}\nregisterAnalytics();\n\nexport { getAnalytics, getGoogleAnalyticsClientId, initializeAnalytics, isSupported, logEvent, setAnalyticsCollectionEnabled, setConsent, setCurrentScreen, setDefaultEventParameters, setUserId, setUserProperties, settings };\n//# sourceMappingURL=index.esm2017.js.map\n","// Configuration Firebase pour l'application Collectif Île Feydeau\nimport { initializeApp } from 'firebase/app';\nimport { getAnalytics } from 'firebase/analytics';\n\n// Configuration Firebase\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY || '',\n  authDomain: \"collectif-ile-feydeau----app.firebaseapp.com\",\n  projectId: \"collectif-ile-feydeau----app\",\n  storageBucket: \"collectif-ile-feydeau----app.firebasestorage.app\",\n  messagingSenderId: \"705686402200\",\n  appId: \"1:705686402200:web:3e36a3b2c359a62be14ced\",\n  measurementId: \"G-D6K43TLW5Y\" // ID Google Analytics\n};\n\n// Variable pour stocker l'instance Firebase\nlet firebaseApp: any = null;\n\n// Fonction pour initialiser Firebase de manière conditionnelle\nconst initializeFirebase = () => {\n  // Vérifier si la clé API est disponible\n  if (firebaseConfig.apiKey) {\n    try {\n      return initializeApp(firebaseConfig);\n    } catch (error) {\n      console.warn('Erreur lors de l\\'initialisation de Firebase:', error);\n      return null;\n    }\n  } else {\n    console.warn('Firebase non initialisé: clé API manquante');\n    return null;\n  }\n};\n\n// Initialiser Firebase uniquement si la clé API est disponible\nexport const getFirebaseApp = () => {\n  if (!firebaseApp) {\n    firebaseApp = initializeFirebase();\n  }\n  return firebaseApp;\n};\n\n// Initialiser Analytics (uniquement côté client et si Firebase est initialisé)\nlet analyticsInstance: any = null;\n\nexport const initFirebaseAnalytics = () => {\n  if (typeof window !== 'undefined') {\n    const app = getFirebaseApp();\n    if (app) {\n      try {\n        analyticsInstance = getAnalytics(app);\n        return analyticsInstance;\n      } catch (error) {\n        console.warn('Erreur lors de l\\'initialisation de Firebase Analytics:', error);\n      }\n    }\n  }\n  return null;\n};\n\nexport const getFirebaseAnalytics = () => analyticsInstance;\n","import { getFirebaseAnalytics } from './firebaseConfig';\nimport { logEvent } from 'firebase/analytics';\n\n// Types pour les événements\nexport enum EventCategory {\n  NAVIGATION = 'navigation',\n  INTERACTION = 'interaction',\n  CONTENT = 'content',\n  MEDIA = 'media',\n  PERFORMANCE = 'performance',\n  ERROR = 'error',\n  USER = 'user',\n  FEATURE = 'feature',\n  ONBOARDING = 'onboarding',\n  COMMUNITY = 'community',\n  PROGRAM = 'program',\n  MAP = 'map',\n  DONATION = 'donation',\n}\n\nexport enum EventAction {\n  // Navigation\n  PAGE_VIEW = 'page_view',\n  ROUTE_CHANGE = 'route_change',\n  EXTERNAL_LINK = 'external_link',\n  BACK = 'back',\n  FORWARD = 'forward',\n  \n  // Interaction\n  CLICK = 'click',\n  SWIPE = 'swipe',\n  SCROLL = 'scroll',\n  ZOOM = 'zoom',\n  DRAG = 'drag',\n  HOVER = 'hover',\n  FOCUS = 'focus',\n  BLUR = 'blur',\n  \n  // Content\n  VIEW = 'view',\n  SEARCH = 'search',\n  FILTER = 'filter',\n  SORT = 'sort',\n  SHARE = 'share',\n  SAVE = 'save',\n  UNSAVE = 'unsave',\n  LIKE = 'like',\n  UNLIKE = 'unlike',\n  \n  // Media\n  PLAY = 'play',\n  PAUSE = 'pause',\n  COMPLETE = 'complete',\n  SEEK = 'seek',\n  VOLUME_CHANGE = 'volume_change',\n  FULLSCREEN = 'fullscreen',\n  \n  // Performance\n  LOAD_TIME = 'load_time',\n  FIRST_PAINT = 'first_paint',\n  FIRST_CONTENTFUL_PAINT = 'first_contentful_paint',\n  FIRST_INPUT_DELAY = 'first_input_delay',\n  \n  // Error\n  JS_ERROR = 'js_error',\n  API_ERROR = 'api_error',\n  RESOURCE_ERROR = 'resource_error',\n  \n  // User\n  LOGIN = 'login',\n  LOGOUT = 'logout',\n  REGISTER = 'register',\n  PROFILE_UPDATE = 'profile_update',\n  \n  // Feature\n  FEATURE_ENABLE = 'feature_enable',\n  FEATURE_DISABLE = 'feature_disable',\n  FEATURE_USE = 'feature_use',\n  \n  // Onboarding\n  ONBOARDING_START = 'onboarding_start',\n  ONBOARDING_COMPLETE = 'onboarding_complete',\n  ONBOARDING_SKIP = 'onboarding_skip',\n  ONBOARDING_SLIDE_VIEW = 'onboarding_slide_view',\n  \n  // Community\n  CONTRIBUTION = 'contribution',\n  COMMENT = 'comment',\n  UPLOAD = 'upload',\n  \n  // Program\n  EVENT_VIEW = 'event_view',\n  EVENT_DETAILS = 'event_details',\n  EVENT_REMINDER = 'event_reminder',\n  \n  // Map\n  MAP_LOAD = 'map_load',\n  LOCATION_VIEW = 'location_view',\n  ROUTE_CALCULATE = 'route_calculate',\n  USER_LOCATION = 'user_location',\n  \n  // Donation\n  DONATION_START = 'donation_start',\n  DONATION_COMPLETE = 'donation_complete',\n  DONATION_CANCEL = 'donation_cancel',\n}\n\n// Interface pour les propriétés d'événement\nexport interface EventProperties {\n  [key: string]: any;\n}\n\n// Classe principale pour l'analytique\nclass AnalyticsService {\n  // Traquer un événement générique\n  trackEvent(category: EventCategory, action: EventAction, properties?: EventProperties): void {\n    try {\n      const analytics = getFirebaseAnalytics();\n      if (!analytics) return;\n\n      // Préparer les propriétés de l'événement\n      const eventName = `${category}_${action}`;\n      const eventParams: Record<string, any> = {\n        event_category: category,\n        event_action: action,\n        timestamp: new Date().toISOString(),\n        ...properties\n      };\n\n      // Forcer l'affichage en DebugView si activé\n      try {\n        const urlHasDebug = typeof window !== 'undefined' && window.location.search.includes('firebase_debug=1');\n        const lsDebug = typeof window !== 'undefined' && localStorage.getItem('analytics_debug') === '1';\n        const debugEnabled = import.meta.env.DEV || urlHasDebug || lsDebug;\n        if (debugEnabled) {\n          eventParams.debug_mode = true;\n        }\n      } catch (_) {\n        // ignore\n      }\n\n      // Envoyer l'événement à Firebase Analytics\n      logEvent(analytics, eventName, eventParams);\n      \n      // Log pour le débogage en développement\n      if (import.meta.env.DEV) {\n        console.log(`[Analytics] ${eventName}`, eventParams);\n      }\n    } catch (error) {\n      console.error('[Analytics] Erreur lors du tracking de l\\'événement:', error);\n    }\n  }\n\n  // Traquer une vue de page\n  trackPageView(pagePath: string, pageTitle: string): void {\n    this.trackEvent(EventCategory.NAVIGATION, EventAction.PAGE_VIEW, {\n      page_path: pagePath,\n      page_title: pageTitle\n    });\n  }\n\n  // Traquer un changement de route\n  trackRouteChange(from: string, to: string): void {\n    this.trackEvent(EventCategory.NAVIGATION, EventAction.ROUTE_CHANGE, {\n      from_route: from,\n      to_route: to\n    });\n  }\n\n  // Traquer une interaction utilisateur\n  trackInteraction(action: EventAction, element: string, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.INTERACTION, action, {\n      element,\n      ...properties\n    });\n  }\n\n  // Traquer une interaction avec du contenu\n  trackContentInteraction(action: EventAction, contentType: string, contentId: string, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.CONTENT, action, {\n      content_type: contentType,\n      content_id: contentId,\n      ...properties\n    });\n  }\n\n  // Traquer une interaction média\n  trackMediaInteraction(action: EventAction, mediaType: string, mediaId: string, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.MEDIA, action, {\n      media_type: mediaType,\n      media_id: mediaId,\n      ...properties\n    });\n  }\n\n  // Traquer une métrique de performance\n  trackPerformance(action: EventAction, value: number, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.PERFORMANCE, action, {\n      value,\n      ...properties\n    });\n  }\n\n  // Traquer une erreur\n  trackError(action: EventAction, message: string, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.ERROR, action, {\n      error_message: message,\n      ...properties\n    });\n  }\n\n  // Traquer une action utilisateur\n  trackUserAction(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.USER, action, properties);\n  }\n\n  // Traquer l'utilisation d'une fonctionnalité\n  trackFeatureUse(featureName: string, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.FEATURE, EventAction.FEATURE_USE, {\n      feature_name: featureName,\n      ...properties\n    });\n  }\n\n  // Traquer les événements d'onboarding\n  trackOnboarding(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.ONBOARDING, action, properties);\n  }\n\n  // Traquer les interactions avec la carte\n  trackMapInteraction(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.MAP, action, properties);\n  }\n\n  // Traquer les interactions avec le programme\n  trackProgramInteraction(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.PROGRAM, action, properties);\n  }\n\n  // Traquer les interactions communautaires\n  trackCommunityInteraction(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.COMMUNITY, action, properties);\n  }\n\n  // Traquer les interactions de donation\n  trackDonationInteraction(action: EventAction, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.DONATION, action, properties);\n  }\n\n  // Traquer les interactions de swipe\n  trackSwipe(direction: 'left' | 'right' | 'up' | 'down', source: string, success: boolean, properties?: EventProperties): void {\n    this.trackEvent(EventCategory.INTERACTION, EventAction.SWIPE, {\n      swipe_direction: direction,\n      swipe_source: source,\n      swipe_success: success,\n      ...properties\n    });\n  }\n\n  // Traquer les métriques de session\n  startSession(): void {\n    this.trackEvent(EventCategory.USER, EventAction.LOGIN as EventAction, {\n      session_start: Date.now()\n    });\n    \n    // Stocker le début de la session\n    sessionStorage.setItem('session_start', Date.now().toString());\n  }\n\n  endSession(): void {\n    const sessionStart = sessionStorage.getItem('session_start');\n    if (sessionStart) {\n      const sessionDuration = Date.now() - parseInt(sessionStart, 10);\n      this.trackEvent(EventCategory.USER, EventAction.LOGOUT as EventAction, {\n        session_duration: sessionDuration\n      });\n    }\n  }\n\n  // ===== Domain-specific helpers =====\n  // Bâtiment (lieux)\n  trackBuildingView(buildingId: string, buildingName: string): void {\n    this.trackEvent(EventCategory.CONTENT, EventAction.VIEW, {\n      content_type: 'building',\n      building_id: buildingId,\n      building_name: buildingName\n    });\n  }\n\n  trackBuildingHistoryView(buildingId: string, sectionTitle: string): void {\n    this.trackEvent(EventCategory.CONTENT, EventAction.VIEW, {\n      content_type: 'building_history',\n      building_id: buildingId,\n      section_title: sectionTitle\n    });\n  }\n\n  // Artiste\n  trackArtistView(artistId: string, artistName: string): void {\n    this.trackEvent(EventCategory.CONTENT, EventAction.VIEW, {\n      content_type: 'artist',\n      artist_id: artistId,\n      artist_name: artistName\n    });\n  }\n\n  // Concert / Event du programme\n  trackConcertView(eventId: string, title: string, isoDate?: string): void {\n    this.trackEvent(EventCategory.PROGRAM, EventAction.EVENT_VIEW, {\n      event_id: eventId,\n      event_title: title,\n      event_date: isoDate\n    });\n  }\n\n  trackProgramCTA(action: 'open_program' | 'open_event_details' | 'add_to_calendar' | 'get_directions', eventId?: string): void {\n    this.trackEvent(EventCategory.PROGRAM, EventAction.CLICK, {\n      cta_action: action,\n      event_id: eventId\n    });\n  }\n\n  // Page dons / tunnel dons\n  trackDonationPageOpen(source: string): void {\n    this.trackEvent(EventCategory.DONATION, EventAction.VIEW, {\n      page: 'donation',\n      source\n    });\n  }\n\n  // Vidéo d'introduction\n  trackIntroVideo(action: 'start' | 'complete' | 'skip'): void {\n    const map: Record<string, EventAction> = {\n      start: EventAction.PLAY,\n      complete: EventAction.COMPLETE,\n      skip: EventAction.PAUSE\n    };\n    const resolved = map[action] || EventAction.PLAY;\n    this.trackEvent(EventCategory.MEDIA, resolved, {\n      media_type: 'intro_video'\n    });\n  }\n\n  // Contrôles audio (lecteur des histoires)\n  trackAudio(action: 'play' | 'pause' | 'seek' | 'volume_change', trackId: string, value?: number): void {\n    const actionMap: Record<string, EventAction> = {\n      play: EventAction.PLAY,\n      pause: EventAction.PAUSE,\n      seek: EventAction.SEEK,\n      volume_change: EventAction.VOLUME_CHANGE\n    };\n    const evt = actionMap[action] || EventAction.PLAY;\n    this.trackEvent(EventCategory.MEDIA, evt, {\n      media_type: 'audio',\n      media_id: trackId,\n      value\n    });\n  }\n}\n\n// Exporter une instance singleton\nexport const analytics = new AnalyticsService();\n\n// Exporter des fonctions utilitaires pour faciliter l'utilisation\nexport const trackPageView = (pagePath: string, pageTitle: string) => \n  analytics.trackPageView(pagePath, pageTitle);\n\nexport const trackEvent = (category: EventCategory, action: EventAction, properties?: EventProperties) => \n  analytics.trackEvent(category, action, properties);\n\nexport const trackInteraction = (action: EventAction, element: string, properties?: EventProperties) => \n  analytics.trackInteraction(action, element, properties);\n\nexport const trackSwipe = (direction: 'left' | 'right' | 'up' | 'down', source: string, success: boolean, properties?: EventProperties) => \n  analytics.trackSwipe(direction, source, success, properties);\n\nexport const trackFeatureUse = (featureName: string, properties?: EventProperties) => \n  analytics.trackFeatureUse(featureName, properties);\n\nexport const trackError = (action: EventAction, message: string, properties?: EventProperties) => \n  analytics.trackError(action, message, properties);\n","import * as React from \"react\";\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n} from \"@/components/ui/toast\";\r\n\r\nconst TOAST_REMOVE_DELAY = 2000;\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string;\r\n  title?: JSX.Element | string;\r\n  description?: JSX.Element | string;\r\n  action?: ToastActionElement;\r\n};\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const;\r\n\r\nlet count = 0;\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\r\n  return count.toString();\r\n}\r\n\r\ntype ActionType = typeof actionTypes;\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"];\r\n      toast: ToasterToast;\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"];\r\n      toast: Partial<ToasterToast>;\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"];\r\n      toastId?: string;\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"];\r\n      toastId?: string;\r\n    };\r\n\r\ninterface State {\r\n  toasts: ToasterToast[];\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return;\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId);\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId,\r\n    });\r\n  }, TOAST_REMOVE_DELAY);\r\n\r\n  toastTimeouts.set(toastId, timeout);\r\n};\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [...state.toasts, action.toast],\r\n      };\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      };\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action;\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId);\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id);\r\n        });\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      };\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      };\r\n  }\r\n};\r\n\r\nconst listeners: ((state: State) => void)[] = [];\r\n\r\nlet memoryState: State = { toasts: [] };\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action);\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState);\r\n  });\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">;\r\n\r\nfunction toast(props: Toast) {\r\n  const id = genId();\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    });\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id });\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss();\r\n      },\r\n    },\r\n  });\r\n\r\n  return {\r\n    id,\r\n    dismiss,\r\n    update,\r\n  };\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState);\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState);\r\n    return () => {\r\n      const index = listeners.indexOf(setState);\r\n      if (index > -1) {\r\n        listeners.splice(index, 1);\r\n      }\r\n    };\r\n  }, [state]);\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  };\r\n}\r\n\r\nexport { useToast, toast };\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * Copyright 2022 Joe Bell. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with the\n * License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR REPRESENTATIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */ import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? `${value}` : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>(props)=>{\n        var _config_compoundVariants;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants, defaultVariants } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (_config_compoundVariants = config.compoundVariants) === null || _config_compoundVariants === void 0 ? void 0 : _config_compoundVariants.reduce((acc, param)=>{\n            let { class: cvClass, className: cvClassName, ...compoundVariantOptions } = param;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n\n","const CLASS_PART_SEPARATOR = '-';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and remove it from classParts.\n    if (classParts[0] === '' && classParts.length !== 1) {\n      classParts.shift();\n    }\n    return getGroupRecursive(classParts, classMap) || getGroupIdForArbitraryProperty(className);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    const conflicts = conflictingClassGroups[classGroupId] || [];\n    if (hasPostfixModifier && conflictingClassGroupModifiers[classGroupId]) {\n      return [...conflicts, ...conflictingClassGroupModifiers[classGroupId]];\n    }\n    return conflicts;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, classPartObject) => {\n  if (classParts.length === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[0];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  const classGroupFromNextClassPart = nextClassPartObject ? getGroupRecursive(classParts.slice(1), nextClassPartObject) : undefined;\n  if (classGroupFromNextClassPart) {\n    return classGroupFromNextClassPart;\n  }\n  if (classPartObject.validators.length === 0) {\n    return undefined;\n  }\n  const classRest = classParts.join(CLASS_PART_SEPARATOR);\n  return classPartObject.validators.find(({\n    validator\n  }) => validator(classRest))?.classGroupId;\n};\nconst arbitraryPropertyRegex = /^\\[(.+)\\]$/;\nconst getGroupIdForArbitraryProperty = className => {\n  if (arbitraryPropertyRegex.test(className)) {\n    const arbitraryPropertyClassName = arbitraryPropertyRegex.exec(className)[1];\n    const property = arbitraryPropertyClassName?.substring(0, arbitraryPropertyClassName.indexOf(':'));\n    if (property) {\n      // I use two dots here because one dot is used as prefix for class groups in plugins\n      return 'arbitrary..' + property;\n    }\n  }\n};\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    prefix\n  } = config;\n  const classMap = {\n    nextPart: new Map(),\n    validators: []\n  };\n  const prefixedClassGroupEntries = getPrefixedClassGroupEntries(Object.entries(config.classGroups), prefix);\n  prefixedClassGroupEntries.forEach(([classGroupId, classGroup]) => {\n    processClassesRecursively(classGroup, classMap, classGroupId, theme);\n  });\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  classGroup.forEach(classDefinition => {\n    if (typeof classDefinition === 'string') {\n      const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n      classPartObjectToEdit.classGroupId = classGroupId;\n      return;\n    }\n    if (typeof classDefinition === 'function') {\n      if (isThemeGetter(classDefinition)) {\n        processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n        return;\n      }\n      classPartObject.validators.push({\n        validator: classDefinition,\n        classGroupId\n      });\n      return;\n    }\n    Object.entries(classDefinition).forEach(([key, classGroup]) => {\n      processClassesRecursively(classGroup, getPart(classPartObject, key), classGroupId, theme);\n    });\n  });\n};\nconst getPart = (classPartObject, path) => {\n  let currentClassPartObject = classPartObject;\n  path.split(CLASS_PART_SEPARATOR).forEach(pathPart => {\n    if (!currentClassPartObject.nextPart.has(pathPart)) {\n      currentClassPartObject.nextPart.set(pathPart, {\n        nextPart: new Map(),\n        validators: []\n      });\n    }\n    currentClassPartObject = currentClassPartObject.nextPart.get(pathPart);\n  });\n  return currentClassPartObject;\n};\nconst isThemeGetter = func => func.isThemeGetter;\nconst getPrefixedClassGroupEntries = (classGroupEntries, prefix) => {\n  if (!prefix) {\n    return classGroupEntries;\n  }\n  return classGroupEntries.map(([classGroupId, classGroup]) => {\n    const prefixedClassGroup = classGroup.map(classDefinition => {\n      if (typeof classDefinition === 'string') {\n        return prefix + classDefinition;\n      }\n      if (typeof classDefinition === 'object') {\n        return Object.fromEntries(Object.entries(classDefinition).map(([key, value]) => [prefix + key, value]));\n      }\n      return classDefinition;\n    });\n    return [classGroupId, prefixedClassGroup];\n  });\n};\n\n// LRU cache inspired from hashlru (https://github.com/dominictarr/hashlru/blob/v1.0.4/index.js) but object replaced with Map to improve performance\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = new Map();\n  let previousCache = new Map();\n  const update = (key, value) => {\n    cache.set(key, value);\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = new Map();\n    }\n  };\n  return {\n    get(key) {\n      let value = cache.get(key);\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache.get(key)) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (cache.has(key)) {\n        cache.set(key, value);\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst createParseClassName = config => {\n  const {\n    separator,\n    experimentalParseClassName\n  } = config;\n  const isSeparatorSingleCharacter = separator.length === 1;\n  const firstSeparatorCharacter = separator[0];\n  const separatorLength = separator.length;\n  // parseClassName inspired by https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n  const parseClassName = className => {\n    const modifiers = [];\n    let bracketDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    for (let index = 0; index < className.length; index++) {\n      let currentCharacter = className[index];\n      if (bracketDepth === 0) {\n        if (currentCharacter === firstSeparatorCharacter && (isSeparatorSingleCharacter || className.slice(index, index + separatorLength) === separator)) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + separatorLength;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') {\n        bracketDepth++;\n      } else if (currentCharacter === ']') {\n        bracketDepth--;\n      }\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.substring(modifierStart);\n    const hasImportantModifier = baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER);\n    const baseClassName = hasImportantModifier ? baseClassNameWithImportantModifier.substring(1) : baseClassNameWithImportantModifier;\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    };\n  };\n  if (experimentalParseClassName) {\n    return className => experimentalParseClassName({\n      className,\n      parseClassName\n    });\n  }\n  return parseClassName;\n};\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst sortModifiers = modifiers => {\n  if (modifiers.length <= 1) {\n    return modifiers;\n  }\n  const sortedModifiers = [];\n  let unsortedModifiers = [];\n  modifiers.forEach(modifier => {\n    const isArbitraryVariant = modifier[0] === '[';\n    if (isArbitraryVariant) {\n      sortedModifiers.push(...unsortedModifiers.sort(), modifier);\n      unsortedModifiers = [];\n    } else {\n      unsortedModifiers.push(modifier);\n    }\n  });\n  sortedModifiers.push(...unsortedModifiers.sort());\n  return sortedModifiers;\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    let hasPostfixModifier = Boolean(maybePostfixModifierPosition);\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    const variantModifier = sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.includes(classId)) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nfunction twJoin() {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < arguments.length) {\n    if (argument = arguments[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n}\nconst toValue = mix => {\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nfunction createTailwindMerge(createConfigFirst, ...createConfigRest) {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall = initTailwindMerge;\n  function initTailwindMerge(classList) {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  }\n  function tailwindMerge(classList) {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  }\n  return function callTailwindMerge() {\n    return functionToCall(twJoin.apply(null, arguments));\n  };\n}\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || [];\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:([a-z-]+):)?(.+)\\]$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst stringLengths = /*#__PURE__*/new Set(['px', 'full', 'screen']);\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch))\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isLength = value => isNumber(value) || stringLengths.has(value) || fractionRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, 'length', isLengthOnly);\nconst isNumber = value => Boolean(value) && !Number.isNaN(Number(value));\nconst isArbitraryNumber = value => getIsArbitraryValue(value, 'number', isNumber);\nconst isInteger = value => Boolean(value) && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst sizeLabels = /*#__PURE__*/new Set(['length', 'size', 'percentage']);\nconst isArbitrarySize = value => getIsArbitraryValue(value, sizeLabels, isNever);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, 'position', isNever);\nconst imageLabels = /*#__PURE__*/new Set(['image', 'url']);\nconst isArbitraryImage = value => getIsArbitraryValue(value, imageLabels, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, '', isShadow);\nconst isAny = () => true;\nconst getIsArbitraryValue = (value, label, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return typeof label === 'string' ? result[1] === label : label.has(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isInteger,\n  isLength,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  const colors = fromTheme('colors');\n  const spacing = fromTheme('spacing');\n  const blur = fromTheme('blur');\n  const brightness = fromTheme('brightness');\n  const borderColor = fromTheme('borderColor');\n  const borderRadius = fromTheme('borderRadius');\n  const borderSpacing = fromTheme('borderSpacing');\n  const borderWidth = fromTheme('borderWidth');\n  const contrast = fromTheme('contrast');\n  const grayscale = fromTheme('grayscale');\n  const hueRotate = fromTheme('hueRotate');\n  const invert = fromTheme('invert');\n  const gap = fromTheme('gap');\n  const gradientColorStops = fromTheme('gradientColorStops');\n  const gradientColorStopPositions = fromTheme('gradientColorStopPositions');\n  const inset = fromTheme('inset');\n  const margin = fromTheme('margin');\n  const opacity = fromTheme('opacity');\n  const padding = fromTheme('padding');\n  const saturate = fromTheme('saturate');\n  const scale = fromTheme('scale');\n  const sepia = fromTheme('sepia');\n  const skew = fromTheme('skew');\n  const space = fromTheme('space');\n  const translate = fromTheme('translate');\n  const getOverscroll = () => ['auto', 'contain', 'none'];\n  const getOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const getSpacingWithAutoAndArbitrary = () => ['auto', isArbitraryValue, spacing];\n  const getSpacingWithArbitrary = () => [isArbitraryValue, spacing];\n  const getLengthWithEmptyAndArbitrary = () => ['', isLength, isArbitraryLength];\n  const getNumberWithAutoAndArbitrary = () => ['auto', isNumber, isArbitraryValue];\n  const getPositions = () => ['bottom', 'center', 'left', 'left-bottom', 'left-top', 'right', 'right-bottom', 'right-top', 'top'];\n  const getLineStyles = () => ['solid', 'dashed', 'dotted', 'double', 'none'];\n  const getBlendModes = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const getAlign = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch'];\n  const getZeroAndEmpty = () => ['', '0', isArbitraryValue];\n  const getBreaks = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const getNumberAndArbitrary = () => [isNumber, isArbitraryValue];\n  return {\n    cacheSize: 500,\n    separator: ':',\n    theme: {\n      colors: [isAny],\n      spacing: [isLength, isArbitraryLength],\n      blur: ['none', '', isTshirtSize, isArbitraryValue],\n      brightness: getNumberAndArbitrary(),\n      borderColor: [colors],\n      borderRadius: ['none', '', 'full', isTshirtSize, isArbitraryValue],\n      borderSpacing: getSpacingWithArbitrary(),\n      borderWidth: getLengthWithEmptyAndArbitrary(),\n      contrast: getNumberAndArbitrary(),\n      grayscale: getZeroAndEmpty(),\n      hueRotate: getNumberAndArbitrary(),\n      invert: getZeroAndEmpty(),\n      gap: getSpacingWithArbitrary(),\n      gradientColorStops: [colors],\n      gradientColorStopPositions: [isPercent, isArbitraryLength],\n      inset: getSpacingWithAutoAndArbitrary(),\n      margin: getSpacingWithAutoAndArbitrary(),\n      opacity: getNumberAndArbitrary(),\n      padding: getSpacingWithArbitrary(),\n      saturate: getNumberAndArbitrary(),\n      scale: getNumberAndArbitrary(),\n      sepia: getZeroAndEmpty(),\n      skew: getNumberAndArbitrary(),\n      space: getSpacingWithArbitrary(),\n      translate: getSpacingWithArbitrary()\n    },\n    classGroups: {\n      // Layout\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', 'video', isArbitraryValue]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isTshirtSize]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': getBreaks()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': getBreaks()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: [...getPositions(), isArbitraryValue]\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: getOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': getOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': getOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': getOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: [inset]\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': [inset]\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': [inset]\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: [inset]\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: [inset]\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: [inset]\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: [inset]\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: [inset]\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: [inset]\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: ['auto', isInteger, isArbitraryValue]\n      }],\n      // Flexbox and Grid\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: getSpacingWithAutoAndArbitrary()\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['wrap', 'wrap-reverse', 'nowrap']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: ['1', 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: getZeroAndEmpty()\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: getZeroAndEmpty()\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: ['first', 'last', 'none', isInteger, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': [isAny]\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: ['auto', {\n          span: ['full', isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': [isAny]\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: ['auto', {\n          span: [isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: [gap]\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': [gap]\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': [gap]\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: ['normal', ...getAlign()]\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': ['start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...getAlign(), 'baseline']\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', 'start', 'end', 'center', 'stretch', 'baseline']\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': [...getAlign(), 'baseline']\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: [padding]\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: [padding]\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: [padding]\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: [padding]\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: [padding]\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: [padding]\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: [padding]\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: [padding]\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: [padding]\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: [margin]\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: [margin]\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: [margin]\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: [margin]\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: [margin]\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: [margin]\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: [margin]\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: [margin]\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: [margin]\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x': [{\n        'space-x': [space]\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y': [{\n        'space-y': [space]\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // Sizing\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: ['auto', 'min', 'max', 'fit', 'svw', 'lvw', 'dvw', isArbitraryValue, spacing]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [isArbitraryValue, spacing, 'min', 'max', 'fit']\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [isArbitraryValue, spacing, 'none', 'full', 'min', 'max', 'fit', 'prose', {\n          screen: [isTshirtSize]\n        }, isTshirtSize]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/size\n       */\n      size: [{\n        size: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit']\n      }],\n      // Typography\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', isTshirtSize, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black', isArbitraryNumber]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isAny]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractons'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest', isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': ['none', isNumber, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose', isLength, isArbitraryValue]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryValue]\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['none', 'disc', 'decimal', isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: [colors]\n      }],\n      /**\n       * Placeholder Opacity\n       * @see https://tailwindcss.com/docs/placeholder-opacity\n       */\n      'placeholder-opacity': [{\n        'placeholder-opacity': [opacity]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: [colors]\n      }],\n      /**\n       * Text Opacity\n       * @see https://tailwindcss.com/docs/text-opacity\n       */\n      'text-opacity': [{\n        'text-opacity': [opacity]\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...getLineStyles(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: ['auto', 'from-font', isLength, isArbitraryLength]\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': ['auto', isLength, isArbitraryValue]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: [colors]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: getSpacingWithArbitrary()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryValue]\n      }],\n      // Backgrounds\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Opacity\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/background-opacity\n       */\n      'bg-opacity': [{\n        'bg-opacity': [opacity]\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: [...getPositions(), isArbitraryPosition]\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: ['no-repeat', {\n          repeat: ['', 'x', 'y', 'round', 'space']\n        }]\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: ['auto', 'cover', 'contain', isArbitrarySize]\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          'gradient-to': ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n        }, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: [colors]\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: [gradientColorStops]\n      }],\n      // Borders\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: [borderRadius]\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': [borderRadius]\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': [borderRadius]\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': [borderRadius]\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': [borderRadius]\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': [borderRadius]\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': [borderRadius]\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': [borderRadius]\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': [borderRadius]\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': [borderRadius]\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: [borderWidth]\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': [borderWidth]\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': [borderWidth]\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': [borderWidth]\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': [borderWidth]\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': [borderWidth]\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': [borderWidth]\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': [borderWidth]\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': [borderWidth]\n      }],\n      /**\n       * Border Opacity\n       * @see https://tailwindcss.com/docs/border-opacity\n       */\n      'border-opacity': [{\n        'border-opacity': [opacity]\n      }],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...getLineStyles(), 'hidden']\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x': [{\n        'divide-x': [borderWidth]\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y': [{\n        'divide-y': [borderWidth]\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Divide Opacity\n       * @see https://tailwindcss.com/docs/divide-opacity\n       */\n      'divide-opacity': [{\n        'divide-opacity': [opacity]\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/divide-style\n       */\n      'divide-style': [{\n        divide: getLineStyles()\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: [borderColor]\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': [borderColor]\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': [borderColor]\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': [borderColor]\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': [borderColor]\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': [borderColor]\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': [borderColor]\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': [borderColor]\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': [borderColor]\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: [borderColor]\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: ['', ...getLineStyles()]\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isLength, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: [isLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: [colors]\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w': [{\n        ring: getLengthWithEmptyAndArbitrary()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/ring-color\n       */\n      'ring-color': [{\n        ring: [colors]\n      }],\n      /**\n       * Ring Opacity\n       * @see https://tailwindcss.com/docs/ring-opacity\n       */\n      'ring-opacity': [{\n        'ring-opacity': [opacity]\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://tailwindcss.com/docs/ring-offset-width\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isLength, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://tailwindcss.com/docs/ring-offset-color\n       */\n      'ring-offset-color': [{\n        'ring-offset': [colors]\n      }],\n      // Effects\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: ['', 'inner', 'none', isTshirtSize, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow-color\n       */\n      'shadow-color': [{\n        shadow: [isAny]\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [opacity]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...getBlendModes(), 'plus-lighter', 'plus-darker']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': getBlendModes()\n      }],\n      // Filters\n      /**\n       * Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: ['', 'none']\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: [blur]\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [brightness]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [contrast]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': ['', 'none', isTshirtSize, isArbitraryValue]\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: [grayscale]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [hueRotate]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: [invert]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [saturate]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: [sepia]\n      }],\n      /**\n       * Backdrop Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': ['', 'none']\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': [blur]\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [brightness]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [contrast]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': [grayscale]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [hueRotate]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': [invert]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [opacity]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [saturate]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': [sepia]\n      }],\n      // Tables\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': [borderSpacing]\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': [borderSpacing]\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': [borderSpacing]\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // Transitions and Animation\n      /**\n       * Tranisition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['none', 'all', '', 'colors', 'opacity', 'shadow', 'transform', isArbitraryValue]\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: getNumberAndArbitrary()\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'in', 'out', 'in-out', isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: getNumberAndArbitrary()\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', 'spin', 'ping', 'pulse', 'bounce', isArbitraryValue]\n      }],\n      // Transforms\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: ['', 'gpu', 'none']\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: [scale]\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': [scale]\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': [scale]\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: [isInteger, isArbitraryValue]\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': [translate]\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': [translate]\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': [skew]\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': [skew]\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: ['center', 'top', 'top-right', 'right', 'bottom-right', 'bottom', 'bottom-left', 'left', 'top-left', isArbitraryValue]\n      }],\n      // Interactivity\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: ['auto', colors]\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryValue]\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: [colors]\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['none', 'auto']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', 'y', 'x', '']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryValue]\n      }],\n      // SVG\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: [colors, 'none']\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: [colors, 'none']\n      }],\n      // Accessibility\n      /**\n       * Screen Readers\n       * @see https://tailwindcss.com/docs/screen-readers\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    }\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  separator,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'separator', separator);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  for (const configKey in override) {\n    overrideConfigProperties(baseConfig[configKey], override[configKey]);\n  }\n  for (const key in extend) {\n    mergeConfigProperties(baseConfig[key], extend[key]);\n  }\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      const mergeValue = mergeObject[key];\n      if (mergeValue !== undefined) {\n        baseObject[key] = (baseObject[key] || []).concat(mergeValue);\n      }\n    }\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\nexport { createTailwindMerge, extendTailwindMerge, fromTheme, getDefaultConfig, mergeConfigs, twJoin, twMerge, validators };\n//# sourceMappingURL=bundle-mjs.mjs.map\n","import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-background text-foreground\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n","import { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"@/components/ui/toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider data-swipe-direction=\"right\" swipeThreshold={10}>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props} data-swipe-direction=\"right\">\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n","'use strict';\n\n// t: current time, b: beginning value, _c: final value, d: total duration\nvar tweenFunctions = {\n  linear: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * t / d + b;\n  },\n  easeInQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t + b;\n  },\n  easeOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  easeInOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    } else {\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    }\n  },\n  easeInCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t + b;\n  },\n  easeOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  },\n  easeInOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  easeInQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t + b;\n  },\n  easeOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  },\n  easeInOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t + b;\n    } else {\n      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  easeInQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  easeOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  easeInOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  easeInSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  easeOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  },\n  easeInOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  },\n  easeInExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n  },\n  easeOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n  },\n  easeInOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    } else {\n      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  easeInCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  easeOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  },\n  easeInOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    } else {\n      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  easeInElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  easeOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  easeInOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    } else {\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    }\n  },\n  easeInBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  easeOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  easeInOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    }\n  },\n  easeInBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    v = tweenFunctions.easeOutBounce(d - t, 0, c, d);\n    return c - v + b;\n  },\n  easeOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  easeInOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    if (t < d / 2) {\n      v = tweenFunctions.easeInBounce(t * 2, 0, c, d);\n      return v * 0.5 + b;\n    } else {\n      v = tweenFunctions.easeOutBounce(t * 2 - d, 0, c, d);\n      return v * 0.5 + c * 0.5 + b;\n    }\n  }\n};\n\nmodule.exports = tweenFunctions;\n","import { jsx } from 'react/jsx-runtime';\nimport React from 'react';\nimport * as tweens from 'tween-functions';\n\nfunction degreesToRads(degrees) {\n    return (degrees * Math.PI) / 180;\n}\nfunction randomRange(min, max) {\n    return min + Math.random() * (max - min);\n}\nfunction randomInt(min, max) {\n    return Math.floor(min + Math.random() * (max - min + 1));\n}\n\nvar ParticleShape;\n(function (ParticleShape) {\n    ParticleShape[ParticleShape[\"Circle\"] = 0] = \"Circle\";\n    ParticleShape[ParticleShape[\"Square\"] = 1] = \"Square\";\n    ParticleShape[ParticleShape[\"Strip\"] = 2] = \"Strip\";\n})(ParticleShape || (ParticleShape = {}));\nvar RotationDirection;\n(function (RotationDirection) {\n    RotationDirection[RotationDirection[\"Positive\"] = 1] = \"Positive\";\n    RotationDirection[RotationDirection[\"Negative\"] = -1] = \"Negative\";\n})(RotationDirection || (RotationDirection = {}));\nconst DEFAULT_FRAME_TIME = 1000 / 60;\nclass Particle {\n    constructor(context, getOptions, x, y) {\n        this.getOptions = getOptions;\n        const { colors, initialVelocityX, initialVelocityY } = this.getOptions();\n        this.context = context;\n        this.x = x;\n        this.y = y;\n        this.w = randomRange(5, 20);\n        this.h = randomRange(5, 20);\n        this.radius = randomRange(5, 10);\n        this.vx =\n            typeof initialVelocityX === 'number'\n                ? randomRange(-initialVelocityX, initialVelocityX)\n                : randomRange(initialVelocityX.min, initialVelocityX.max);\n        this.vy =\n            typeof initialVelocityY === 'number'\n                ? randomRange(-initialVelocityY, 0)\n                : randomRange(initialVelocityY.min, initialVelocityY.max);\n        this.shape = randomInt(0, 2);\n        this.angle = degreesToRads(randomRange(0, 360));\n        this.angularSpin = randomRange(-0.2, 0.2);\n        this.color = colors[Math.floor(Math.random() * colors.length)];\n        this.rotateY = randomRange(0, 1);\n        this.rotationDirection = randomRange(0, 1)\n            ? RotationDirection.Positive\n            : RotationDirection.Negative;\n    }\n    update(elapsed) {\n        const { gravity, wind, friction, opacity, drawShape } = this.getOptions();\n        const frameTimeMultiplier = elapsed / DEFAULT_FRAME_TIME;\n        this.x += this.vx * frameTimeMultiplier;\n        this.y += this.vy * frameTimeMultiplier;\n        this.vy += gravity * frameTimeMultiplier;\n        this.vx += wind * frameTimeMultiplier;\n        this.vx *= friction ** frameTimeMultiplier;\n        this.vy *= friction ** frameTimeMultiplier;\n        if (this.rotateY >= 1 &&\n            this.rotationDirection === RotationDirection.Positive) {\n            this.rotationDirection = RotationDirection.Negative;\n        }\n        else if (this.rotateY <= -1 &&\n            this.rotationDirection === RotationDirection.Negative) {\n            this.rotationDirection = RotationDirection.Positive;\n        }\n        const rotateDelta = 0.1 * this.rotationDirection * frameTimeMultiplier;\n        this.rotateY += rotateDelta;\n        this.angle += this.angularSpin;\n        this.context.save();\n        this.context.translate(this.x, this.y);\n        this.context.rotate(this.angle);\n        this.context.scale(1, this.rotateY);\n        this.context.rotate(this.angle);\n        this.context.beginPath();\n        this.context.fillStyle = this.color;\n        this.context.strokeStyle = this.color;\n        this.context.globalAlpha = opacity;\n        this.context.lineCap = 'round';\n        this.context.lineWidth = 2;\n        if (drawShape && typeof drawShape === 'function') {\n            drawShape.call(this, this.context);\n        }\n        else {\n            switch (this.shape) {\n                case ParticleShape.Circle: {\n                    this.context.beginPath();\n                    this.context.arc(0, 0, this.radius, 0, 2 * Math.PI);\n                    this.context.fill();\n                    break;\n                }\n                case ParticleShape.Square: {\n                    this.context.fillRect(-this.w / 2, -this.h / 2, this.w, this.h);\n                    break;\n                }\n                case ParticleShape.Strip: {\n                    this.context.fillRect(-this.w / 6, -this.h / 2, this.w / 3, this.h);\n                    break;\n                }\n            }\n        }\n        this.context.closePath();\n        this.context.restore();\n    }\n}\n\nclass ParticleGenerator {\n    constructor(canvas, getOptions) {\n        this.x = 0;\n        this.y = 0;\n        this.w = 0;\n        this.h = 0;\n        this.lastNumberOfPieces = 0;\n        this.tweenProgress = 0;\n        this.tweenFrom = 0;\n        this.particles = [];\n        this.particlesGenerated = 0;\n        this.removeParticleAt = (i) => {\n            this.particles.splice(i, 1);\n        };\n        this.getParticle = () => {\n            const newParticleX = randomRange(this.x, this.w + this.x);\n            const newParticleY = randomRange(this.y, this.h + this.y);\n            return new Particle(this.context, this.getOptions, newParticleX, newParticleY);\n        };\n        this.animate = (elapsed) => {\n            const { canvas, context, particlesGenerated, lastNumberOfPieces } = this;\n            const { run, recycle, numberOfPieces, debug, tweenFunction, tweenDuration, } = this.getOptions();\n            if (!run) {\n                return false;\n            }\n            const nP = this.particles.length;\n            const activeCount = recycle ? nP : particlesGenerated;\n            // Initial population\n            if (activeCount < numberOfPieces) {\n                // Use the numberOfPieces prop as a key to reset the easing timing\n                if (lastNumberOfPieces !== numberOfPieces) {\n                    this.tweenProgress = 0;\n                    this.tweenFrom = activeCount;\n                    this.lastNumberOfPieces = numberOfPieces;\n                }\n                // Clamp tweenProgress between 0 and tweenDuration\n                this.tweenProgress = Math.min(tweenDuration, Math.max(0, this.tweenProgress + elapsed));\n                const tweenedVal = tweenFunction(this.tweenProgress, this.tweenFrom, numberOfPieces, tweenDuration);\n                const numToAdd = Math.round(tweenedVal - activeCount);\n                for (let i = 0; i < numToAdd; i++) {\n                    this.particles.push(this.getParticle());\n                }\n                this.particlesGenerated += numToAdd;\n            }\n            if (debug) {\n                // Draw debug text\n                context.font = '12px sans-serif';\n                context.fillStyle = '#333';\n                context.textAlign = 'right';\n                context.fillText(`Particles: ${nP}`, canvas.width - 10, canvas.height - 20);\n            }\n            // Maintain the population, iterating backwards to prevent issues when removing particles\n            for (let i = this.particles.length - 1; i >= 0; i--) {\n                const p = this.particles[i];\n                // Update each particle's position\n                p.update(elapsed);\n                // Prune the off-canvas particles\n                if (p.y > canvas.height ||\n                    p.y < -100 ||\n                    p.x > canvas.width + 100 ||\n                    p.x < -100) {\n                    if (recycle && activeCount <= numberOfPieces) {\n                        // Replace the particle with a brand new one\n                        this.particles[i] = this.getParticle();\n                    }\n                    else {\n                        this.removeParticleAt(i);\n                    }\n                }\n            }\n            return nP > 0 || activeCount < numberOfPieces;\n        };\n        this.canvas = canvas;\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get canvas context');\n        }\n        this.context = ctx;\n        this.getOptions = getOptions;\n    }\n}\n\nconst confettiDefaults = {\n    width: typeof window !== 'undefined' ? window.innerWidth : 300,\n    height: typeof window !== 'undefined' ? window.innerHeight : 200,\n    numberOfPieces: 200,\n    friction: 0.99,\n    wind: 0,\n    gravity: 0.1,\n    initialVelocityX: 4,\n    initialVelocityY: 10,\n    colors: [\n        '#f44336',\n        '#e91e63',\n        '#9c27b0',\n        '#673ab7',\n        '#3f51b5',\n        '#2196f3',\n        '#03a9f4',\n        '#00bcd4',\n        '#009688',\n        '#4CAF50',\n        '#8BC34A',\n        '#CDDC39',\n        '#FFEB3B',\n        '#FFC107',\n        '#FF9800',\n        '#FF5722',\n        '#795548',\n    ],\n    opacity: 1.0,\n    debug: false,\n    tweenFunction: tweens.easeInOutQuad,\n    tweenDuration: 5000,\n    recycle: true,\n    run: true,\n};\nclass Confetti {\n    constructor(canvas, opts) {\n        this.lastFrameTime = 0;\n        this.setOptionsWithDefaults = (opts) => {\n            const computedConfettiDefaults = {\n                confettiSource: {\n                    x: 0,\n                    y: 0,\n                    w: this.canvas.width,\n                    h: 0,\n                },\n            };\n            this._options = {\n                ...computedConfettiDefaults,\n                ...confettiDefaults,\n                ...opts,\n            };\n            Object.assign(this, opts.confettiSource);\n        };\n        this.update = (timestamp = 0) => {\n            const { options: { run, onConfettiComplete, frameRate }, canvas, context, } = this;\n            // Cap elapsed time to 50ms to prevent large time steps\n            const elapsed = Math.min(timestamp - this.lastFrameTime, 50);\n            // Throttle the frame rate if set\n            if (frameRate && elapsed < 1000 / frameRate) {\n                this.rafId = requestAnimationFrame(this.update);\n                return;\n            }\n            this.lastFrameTime = timestamp - (frameRate ? elapsed % frameRate : 0);\n            if (run) {\n                context.fillStyle = 'white';\n                context.clearRect(0, 0, canvas.width, canvas.height);\n            }\n            if (this.generator.animate(elapsed)) {\n                this.rafId = requestAnimationFrame(this.update);\n            }\n            else {\n                if (onConfettiComplete &&\n                    typeof onConfettiComplete === 'function' &&\n                    this.generator.particlesGenerated > 0) {\n                    onConfettiComplete.call(this, this);\n                }\n                this._options.run = false;\n            }\n        };\n        this.reset = () => {\n            if (this.generator && this.generator.particlesGenerated > 0) {\n                this.generator.particlesGenerated = 0;\n                this.generator.particles = [];\n                this.generator.lastNumberOfPieces = 0;\n            }\n        };\n        this.stop = () => {\n            this.options = { run: false };\n            if (this.rafId) {\n                cancelAnimationFrame(this.rafId);\n                this.rafId = undefined;\n            }\n        };\n        this.canvas = canvas;\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get canvas context');\n        }\n        this.context = ctx;\n        this.generator = new ParticleGenerator(this.canvas, () => this.options);\n        this.options = opts;\n        this.update();\n    }\n    get options() {\n        return this._options;\n    }\n    set options(opts) {\n        const lastRunState = this._options?.run;\n        const lastRecycleState = this._options?.recycle;\n        this.setOptionsWithDefaults(opts);\n        if (this.generator) {\n            Object.assign(this.generator, this.options.confettiSource);\n            if (typeof opts.recycle === 'boolean' &&\n                opts.recycle &&\n                lastRecycleState === false) {\n                this.generator.lastNumberOfPieces = this.generator.particles.length;\n            }\n        }\n        if (typeof opts.run === 'boolean' && opts.run && lastRunState === false) {\n            this.update();\n        }\n    }\n}\n\nconst ref = React.createRef();\nclass ReactConfettiInternal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        this.canvas = props.canvasRef || ref;\n    }\n    componentDidMount() {\n        if (this.canvas.current) {\n            const opts = extractCanvasProps(this.props)[0];\n            this.confetti = new Confetti(this.canvas.current, opts);\n        }\n    }\n    componentDidUpdate() {\n        const confettiOptions = extractCanvasProps(this.props)[0];\n        if (this.confetti) {\n            this.confetti.options = confettiOptions;\n        }\n    }\n    componentWillUnmount() {\n        if (this.confetti) {\n            this.confetti.stop();\n        }\n        this.confetti = undefined;\n    }\n    render() {\n        const [confettiOptions, passedProps] = extractCanvasProps(this.props);\n        const canvasStyles = {\n            zIndex: 2,\n            position: 'absolute',\n            pointerEvents: 'none',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            ...passedProps.style,\n        };\n        return (jsx(\"canvas\", { width: confettiOptions.width, height: confettiOptions.height, ref: this.canvas, ...passedProps, style: canvasStyles }));\n    }\n}\nReactConfettiInternal.defaultProps = {\n    ...confettiDefaults,\n};\nReactConfettiInternal.displayName = 'ReactConfetti';\nfunction extractCanvasProps(props) {\n    const confettiOptions = {};\n    const refs = {};\n    const rest = {};\n    const confettiOptionKeys = [\n        ...Object.keys(confettiDefaults),\n        'confettiSource',\n        'drawShape',\n        'onConfettiComplete',\n        'frameRate',\n    ];\n    const refProps = ['canvasRef'];\n    for (const prop in props) {\n        const val = props[prop];\n        if (confettiOptionKeys.includes(prop)) {\n            confettiOptions[prop] = val;\n        }\n        else if (refProps.includes(prop)) {\n            refProps[prop] = val;\n        }\n        else {\n            rest[prop] = val;\n        }\n    }\n    return [confettiOptions, rest, refs];\n}\nconst ReactConfetti = React.forwardRef((props, ref) => jsx(ReactConfettiInternal, { canvasRef: ref, ...props }));\n\nexport { ReactConfetti as default };\n//# sourceMappingURL=react-confetti.mjs.map\n","import { useState, useEffect } from 'react';\r\n\r\ninterface WindowSize {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\n/**\r\n * Hook qui retourne les dimensions actuelles de la fenêtre\r\n * et se met à jour automatiquement lors du redimensionnement\r\n */\r\nexport const useWindowSize = (): WindowSize => {\r\n  const [windowSize, setWindowSize] = useState<WindowSize>({\r\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\r\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Gestionnaire pour mettre à jour les dimensions lors du redimensionnement\r\n    const handleResize = () => {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    };\r\n\r\n    // Ajouter l'écouteur d'événement\r\n    window.addEventListener('resize', handleResize);\r\n    \r\n    // Appeler le gestionnaire immédiatement pour définir les dimensions initiales\r\n    handleResize();\r\n    \r\n    // Nettoyer l'écouteur d'événement lors du démontage\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowSize;\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport Confetti from 'react-confetti';\r\nimport { useWindowSize } from '../hooks/useWindowSize';\r\n\r\ninterface CelebrationProps {\r\n  trigger: boolean;\r\n  duration?: number;\r\n  message?: string;\r\n  onComplete?: () => void;\r\n}\r\n\r\n/**\r\n * Composant de célébration qui affiche des confettis et un message\r\n * @param trigger - Déclenche l'animation lorsque true\r\n * @param duration - Durée de l'animation en millisecondes (défaut: 3000ms)\r\n * @param message - Message à afficher pendant la célébration\r\n * @param onComplete - Fonction appelée à la fin de l'animation\r\n */\r\nexport const Celebration: React.FC<CelebrationProps> = ({\r\n  trigger,\r\n  duration = 3000,\r\n  message,\r\n  onComplete\r\n}) => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const { width, height } = useWindowSize();\r\n  \r\n  // Utiliser les dimensions de la fenêtre ou des valeurs par défaut pour mobile\r\n  const confettiWidth = width || window.innerWidth || document.documentElement.clientWidth || 375;\r\n  const confettiHeight = height || window.innerHeight || document.documentElement.clientHeight || 667;\r\n\r\n  useEffect(() => {\r\n    if (trigger) {\r\n      console.log('Celebration triggered with message:', message);\r\n      setIsActive(true);\r\n      \r\n      // Désactiver après la durée spécifiée\r\n      const timer = setTimeout(() => {\r\n        setIsActive(false);\r\n        if (onComplete) onComplete();\r\n      }, duration);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [trigger, duration, message, onComplete]);\r\n\r\n  if (!isActive) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[9999] pointer-events-none\">\r\n      <Confetti\r\n        width={confettiWidth}\r\n        height={confettiHeight}\r\n        recycle={false}\r\n        numberOfPieces={200}\r\n        gravity={0.2}\r\n        tweenDuration={5000}\r\n      />\r\n      \r\n      {message && (\r\n        <div className=\"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white bg-opacity-80 px-6 py-3 rounded-lg shadow-lg text-center\">\r\n          <p className=\"text-lg font-bold text-[#4a5d94]\">{message}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Celebration;\r\n","/**\r\n * Service de gestion des réalisations utilisateur\r\n * Ce service permet de suivre les actions importantes de l'utilisateur\r\n * et de déclencher des célébrations pour les moments clés\r\n */\r\n\r\n// Types de réalisations disponibles\r\nexport enum AchievementType {\r\n  FIRST_EVENT_SAVED = 'first_event_saved',\r\n  ALL_LOCATIONS_VISITED = 'all_locations_visited',\r\n  MULTIPLE_EVENTS_SAVED = 'multiple_events_saved',\r\n  NOTIFICATION_SET = 'notification_set',\r\n  FIRST_LOCATION_VISITED = 'first_location_visited',\r\n  THREE_LOCATIONS_VISITED = 'three_locations_visited',\r\n  FIVE_LOCATIONS_VISITED = 'five_locations_visited'\r\n}\r\n\r\n// Interface pour une réalisation\r\nexport interface Achievement {\r\n  id: AchievementType;\r\n  title: string;\r\n  description: string;\r\n  unlockedAt?: string;\r\n  celebrationMessage: string;\r\n}\r\n\r\n// Liste des réalisations disponibles\r\nconst achievementsList: Achievement[] = [\r\n  {\r\n    id: AchievementType.FIRST_EVENT_SAVED,\r\n    title: \"Premier événement sauvegardé\",\r\n    description: \"Vous avez sauvegardé votre premier événement\",\r\n    celebrationMessage: \"Félicitations ! Vous avez sauvegardé votre premier événement !\"\r\n  },\r\n  {\r\n    id: AchievementType.ALL_LOCATIONS_VISITED,\r\n    title: \"Explorateur de l'Île\",\r\n    description: \"Vous avez visité tous les lieux de l'Île Feydeau\",\r\n    celebrationMessage: \"Bravo ! Vous avez visité tous les lieux de l'Île Feydeau !\"\r\n  },\r\n  {\r\n    id: AchievementType.MULTIPLE_EVENTS_SAVED,\r\n    title: \"Collectionneur d'événements\",\r\n    description: \"Vous avez sauvegardé 5 événements ou plus\",\r\n    celebrationMessage: \"Impressionnant ! Vous êtes un vrai collectionneur d'événements !\"\r\n  },\r\n  {\r\n    id: AchievementType.NOTIFICATION_SET,\r\n    title: \"Toujours à l'heure\",\r\n    description: \"Vous avez configuré votre première notification\",\r\n    celebrationMessage: \"Super ! Vous ne manquerez plus aucun événement !\"\r\n  },\r\n  {\r\n    id: AchievementType.FIRST_LOCATION_VISITED,\r\n    title: \"Premier pas sur l'Île\",\r\n    description: \"Vous avez visité votre premier lieu sur l'Île Feydeau\",\r\n    celebrationMessage: \"Félicitations ! Vous avez fait votre premier pas sur l'Île Feydeau !\"\r\n  },\r\n  {\r\n    id: AchievementType.THREE_LOCATIONS_VISITED,\r\n    title: \"Explorateur en herbe\",\r\n    description: \"Vous avez visité 3 lieux sur l'Île Feydeau\",\r\n    celebrationMessage: \"Vous commencez à bien connaître l'Île Feydeau !\"\r\n  },\r\n  {\r\n    id: AchievementType.FIVE_LOCATIONS_VISITED,\r\n    title: \"Guide de l'Île\",\r\n    description: \"Vous avez visité 5 lieux sur l'Île Feydeau\",\r\n    celebrationMessage: \"Impressionnant ! Vous pourriez maintenant guider les visiteurs sur l'Île Feydeau !\"\r\n  }\r\n];\r\n\r\n/**\r\n * Récupérer toutes les réalisations avec leur statut\r\n */\r\nexport const getAchievements = (): Achievement[] => {\r\n  try {\r\n    const unlockedAchievementsStr = localStorage.getItem('unlockedAchievements');\r\n    let unlockedAchievements = {};\r\n    \r\n    if (unlockedAchievementsStr) {\r\n      try {\r\n        unlockedAchievements = JSON.parse(unlockedAchievementsStr);\r\n      } catch (error) {\r\n        console.error('Erreur lors de la lecture des réalisations débloquées:', error);\r\n        unlockedAchievements = {};\r\n      }\r\n    }\r\n    \r\n    // Retourner la liste complète avec les dates de déblocage\r\n    return achievementsList.map(achievement => ({\r\n      ...achievement,\r\n      unlockedAt: unlockedAchievements[achievement.id]\r\n    }));\r\n  } catch (error) {\r\n    console.error('Erreur dans getAchievements:', error);\r\n    return achievementsList;\r\n  }\r\n};\r\n\r\n/**\r\n * Vérifier si une réalisation est débloquée\r\n */\r\nexport const isAchievementUnlocked = (achievementId: AchievementType): boolean => {\r\n  try {\r\n    const unlockedAchievementsStr = localStorage.getItem('unlockedAchievements');\r\n    if (!unlockedAchievementsStr) return false;\r\n    \r\n    const unlockedAchievements = JSON.parse(unlockedAchievementsStr);\r\n    return !!unlockedAchievements[achievementId];\r\n  } catch (error) {\r\n    console.error('Erreur dans isAchievementUnlocked:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Débloquer une réalisation\r\n * @returns true si la réalisation vient d'être débloquée, false si elle l'était déjà\r\n */\r\nexport const unlockAchievement = (achievementId: AchievementType): boolean => {\r\n  try {\r\n    console.log(`[achievements] Tentative de déblocage de l'achievement: ${achievementId}`);\r\n    \r\n    // Vérifier si la réalisation est déjà débloquée\r\n    const isAlreadyUnlocked = isAchievementUnlocked(achievementId);\r\n    console.log(`[achievements] Achievement déjà débloqué: ${isAlreadyUnlocked}`);\r\n    \r\n    if (isAlreadyUnlocked) {\r\n      console.log(`[achievements] Achievement déjà débloqué, aucune action nécessaire`);\r\n      return false;\r\n    }\r\n    \r\n    // Récupérer les réalisations débloquées\r\n    const unlockedAchievementsStr = localStorage.getItem('unlockedAchievements');\r\n    console.log(`[achievements] Récupération des achievements débloqués depuis localStorage: ${unlockedAchievementsStr || 'aucun'}`);\r\n    \r\n    let unlockedAchievements = {};\r\n    \r\n    if (unlockedAchievementsStr) {\r\n      try {\r\n        unlockedAchievements = JSON.parse(unlockedAchievementsStr);\r\n        console.log(`[achievements] Achievements débloqués parsés:`, unlockedAchievements);\r\n      } catch (error) {\r\n        console.error('[achievements] Erreur lors de la lecture des réalisations débloquées:', error);\r\n        unlockedAchievements = {};\r\n      }\r\n    }\r\n    \r\n    // Débloquer la réalisation\r\n    const unlockTime = new Date().toISOString();\r\n    unlockedAchievements[achievementId] = unlockTime;\r\n    localStorage.setItem('unlockedAchievements', JSON.stringify(unlockedAchievements));\r\n    console.log(`[achievements] Achievement ${achievementId} débloqué à ${unlockTime}`);\r\n    \r\n    // Déclencher l'événement d'achievement pour afficher les confettis\r\n    try {\r\n      // Utiliser un timeout pour éviter les problèmes de timing\r\n      console.log(`[achievements] Planification du déclenchement de l'événement d'achievement dans 100ms`);\r\n      setTimeout(() => {\r\n        // Créer et dispatcher directement l'événement personnalisé\r\n        const message = getAchievementCelebrationMessage(achievementId);\r\n        console.log(`[achievements] Message de célébration: ${message}`);\r\n        \r\n        if (message) {\r\n          console.log(`[achievements] Déclenchement de l'événement global app-achievement pour: ${achievementId}`);\r\n          // Créer un événement global pour éviter les dépendances circulaires\r\n          const event = new CustomEvent('app-achievement', {\r\n            detail: { type: achievementId, message }\r\n          });\r\n          window.dispatchEvent(event);\r\n          console.log(`[achievements] Événement global dispatché avec succès`);\r\n        } else {\r\n          console.error(`[achievements] Impossible de trouver un message pour l'achievement ${achievementId}`);\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('[achievements] Erreur lors du déclenchement de l\\'achievement:', error);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('[achievements] Erreur globale dans unlockAchievement:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer le message de célébration pour une réalisation\r\n */\r\nexport const getAchievementCelebrationMessage = (achievementId: AchievementType): string | null => {\r\n  const achievement = achievementsList.find(a => a.id === achievementId);\r\n  return achievement ? achievement.celebrationMessage : null;\r\n};\r\n","\"use client\";import*as t from\"react\";var P=[\"light\",\"dark\"],E=\"(prefers-color-scheme: dark)\",Q=typeof window==\"undefined\",L=t.createContext(void 0),D={setTheme:e=>{},themes:[]},j=()=>{var e;return(e=t.useContext(L))!=null?e:D},z=e=>t.useContext(L)?e.children:t.createElement(O,{...e}),N=[\"light\",\"dark\"],O=({forcedTheme:e,disableTransitionOnChange:a=!1,enableSystem:n=!0,enableColorScheme:g=!0,storageKey:m=\"theme\",themes:c=N,defaultTheme:o=n?\"system\":\"light\",attribute:y=\"data-theme\",value:h,children:k,nonce:w})=>{let[i,d]=t.useState(()=>M(m,o)),[S,l]=t.useState(()=>M(m)),u=h?Object.values(h):c,R=t.useCallback(s=>{let r=s;if(!r)return;s===\"system\"&&n&&(r=T());let v=h?h[r]:r,C=a?_():null,x=document.documentElement;if(y===\"class\"?(x.classList.remove(...u),v&&x.classList.add(v)):v?x.setAttribute(y,v):x.removeAttribute(y),g){let I=P.includes(o)?o:null,A=P.includes(r)?r:I;x.style.colorScheme=A}C==null||C()},[]),f=t.useCallback(s=>{let r=typeof s==\"function\"?s(s):s;d(r);try{localStorage.setItem(m,r)}catch(v){}},[e]),p=t.useCallback(s=>{let r=T(s);l(r),i===\"system\"&&n&&!e&&R(\"system\")},[i,e]);t.useEffect(()=>{let s=window.matchMedia(E);return s.addListener(p),p(s),()=>s.removeListener(p)},[p]),t.useEffect(()=>{let s=r=>{if(r.key!==m)return;let v=r.newValue||o;f(v)};return window.addEventListener(\"storage\",s),()=>window.removeEventListener(\"storage\",s)},[f]),t.useEffect(()=>{R(e!=null?e:i)},[e,i]);let $=t.useMemo(()=>({theme:i,setTheme:f,forcedTheme:e,resolvedTheme:i===\"system\"?S:i,themes:n?[...c,\"system\"]:c,systemTheme:n?S:void 0}),[i,f,e,S,n,c]);return t.createElement(L.Provider,{value:$},t.createElement(U,{forcedTheme:e,disableTransitionOnChange:a,enableSystem:n,enableColorScheme:g,storageKey:m,themes:c,defaultTheme:o,attribute:y,value:h,children:k,attrs:u,nonce:w}),k)},U=t.memo(({forcedTheme:e,storageKey:a,attribute:n,enableSystem:g,enableColorScheme:m,defaultTheme:c,value:o,attrs:y,nonce:h})=>{let k=c===\"system\",w=n===\"class\"?`var d=document.documentElement,c=d.classList;${`c.remove(${y.map(u=>`'${u}'`).join(\",\")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,i=m?(P.includes(c)?c:null)?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${c}'`:\"if(e==='light'||e==='dark')d.style.colorScheme=e\":\"\",d=(l,u=!1,R=!0)=>{let f=o?o[l]:l,p=u?l+\"|| ''\":`'${f}'`,$=\"\";return m&&R&&!u&&P.includes(l)&&($+=`d.style.colorScheme = '${l}';`),n===\"class\"?u||f?$+=`c.add(${p})`:$+=\"null\":f&&($+=`d[s](n,${p})`),$},S=e?`!function(){${w}${d(e)}}()`:g?`!function(){try{${w}var e=localStorage.getItem('${a}');if('system'===e||(!e&&${k})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d(\"dark\")}}else{${d(\"light\")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:\"\"}${d(o?\"x[e]\":\"e\",!0)}}${k?\"\":\"else{\"+d(c,!1,!1)+\"}\"}${i}}catch(e){}}()`:`!function(){try{${w}var e=localStorage.getItem('${a}');if(e){${o?`var x=${JSON.stringify(o)};`:\"\"}${d(o?\"x[e]\":\"e\",!0)}}else{${d(c,!1,!1)};}${i}}catch(t){}}();`;return t.createElement(\"script\",{nonce:h,dangerouslySetInnerHTML:{__html:S}})}),M=(e,a)=>{if(Q)return;let n;try{n=localStorage.getItem(e)||void 0}catch(g){}return n||a},_=()=>{let e=document.createElement(\"style\");return e.appendChild(document.createTextNode(\"*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},T=e=>(e||(e=window.matchMedia(E)),e.matches?\"dark\":\"light\");export{z as ThemeProvider,j as useTheme};\n","\"use client\";import e from\"react\";import Gt from\"react-dom\";import E from\"react\";var Ct=s=>{switch(s){case\"success\":return $t;case\"info\":return _t;case\"warning\":return Wt;case\"error\":return Ut;default:return null}},Ft=Array(12).fill(0),It=({visible:s})=>E.createElement(\"div\",{className:\"sonner-loading-wrapper\",\"data-visible\":s},E.createElement(\"div\",{className:\"sonner-spinner\"},Ft.map((o,t)=>E.createElement(\"div\",{className:\"sonner-loading-bar\",key:`spinner-bar-${t}`})))),$t=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",clipRule:\"evenodd\"})),Wt=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",clipRule:\"evenodd\"})),_t=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",clipRule:\"evenodd\"})),Ut=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",clipRule:\"evenodd\"}));import kt from\"react\";var Dt=()=>{let[s,o]=kt.useState(document.hidden);return kt.useEffect(()=>{let t=()=>{o(document.hidden)};return document.addEventListener(\"visibilitychange\",t),()=>window.removeEventListener(\"visibilitychange\",t)},[]),s};var ct=1,ut=class{constructor(){this.subscribe=o=>(this.subscribers.push(o),()=>{let t=this.subscribers.indexOf(o);this.subscribers.splice(t,1)});this.publish=o=>{this.subscribers.forEach(t=>t(o))};this.addToast=o=>{this.publish(o),this.toasts=[...this.toasts,o]};this.create=o=>{var b;let{message:t,...n}=o,h=typeof(o==null?void 0:o.id)==\"number\"||((b=o.id)==null?void 0:b.length)>0?o.id:ct++,u=this.toasts.find(d=>d.id===h),g=o.dismissible===void 0?!0:o.dismissible;return u?this.toasts=this.toasts.map(d=>d.id===h?(this.publish({...d,...o,id:h,title:t}),{...d,...o,id:h,dismissible:g,title:t}):d):this.addToast({title:t,...n,dismissible:g,id:h}),h};this.dismiss=o=>(o||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:o,dismiss:!0})),o);this.message=(o,t)=>this.create({...t,message:o});this.error=(o,t)=>this.create({...t,message:o,type:\"error\"});this.success=(o,t)=>this.create({...t,type:\"success\",message:o});this.info=(o,t)=>this.create({...t,type:\"info\",message:o});this.warning=(o,t)=>this.create({...t,type:\"warning\",message:o});this.loading=(o,t)=>this.create({...t,type:\"loading\",message:o});this.promise=(o,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:o,type:\"loading\",message:t.loading,description:typeof t.description!=\"function\"?t.description:void 0}));let h=o instanceof Promise?o:o(),u=n!==void 0;return h.then(async g=>{if(Ot(g)&&!g.ok){u=!1;let b=typeof t.error==\"function\"?await t.error(`HTTP error! status: ${g.status}`):t.error,d=typeof t.description==\"function\"?await t.description(`HTTP error! status: ${g.status}`):t.description;this.create({id:n,type:\"error\",message:b,description:d})}else if(t.success!==void 0){u=!1;let b=typeof t.success==\"function\"?await t.success(g):t.success,d=typeof t.description==\"function\"?await t.description(g):t.description;this.create({id:n,type:\"success\",message:b,description:d})}}).catch(async g=>{if(t.error!==void 0){u=!1;let b=typeof t.error==\"function\"?await t.error(g):t.error,d=typeof t.description==\"function\"?await t.description(g):t.description;this.create({id:n,type:\"error\",message:b,description:d})}}).finally(()=>{var g;u&&(this.dismiss(n),n=void 0),(g=t.finally)==null||g.call(t)}),n};this.custom=(o,t)=>{let n=(t==null?void 0:t.id)||ct++;return this.create({jsx:o(n),id:n,...t}),n};this.subscribers=[],this.toasts=[]}},v=new ut,Vt=(s,o)=>{let t=(o==null?void 0:o.id)||ct++;return v.addToast({title:s,...o,id:t}),t},Ot=s=>s&&typeof s==\"object\"&&\"ok\"in s&&typeof s.ok==\"boolean\"&&\"status\"in s&&typeof s.status==\"number\",Kt=Vt,Xt=()=>v.toasts,Jt=Object.assign(Kt,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:Xt});function ft(s,{insertAt:o}={}){if(!s||typeof document==\"undefined\")return;let t=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",o===\"top\"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}ft(`:where(html[dir=\"ltr\"]),:where([data-sonner-toaster][dir=\"ltr\"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir=\"rtl\"]),:where([data-sonner-toaster][dir=\"rtl\"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position=\"right\"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position=\"left\"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position=\"center\"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position=\"top\"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position=\"bottom\"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled=\"true\"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position=\"top\"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position=\"bottom\"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise=\"true\"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme=\"dark\"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled=\"true\"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping=\"true\"]):before{content:\"\";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position=\"top\"][data-swiping=\"true\"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position=\"bottom\"][data-swiping=\"true\"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping=\"false\"][data-removed=\"true\"]):before{content:\"\";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:\"\";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted=\"true\"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"][data-styled=\"true\"])>*{opacity:0}:where([data-sonner-toast][data-visible=\"false\"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted=\"true\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"true\"][data-swipe-out=\"false\"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"false\"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n`);function U(s){return s.label!==void 0}var qt=3,Qt=\"32px\",Zt=4e3,te=356,ee=14,oe=20,ae=200;function ne(...s){return s.filter(Boolean).join(\" \")}var se=s=>{var yt,xt,vt,wt,Tt,St,Rt,Et,Nt,Pt;let{invert:o,toast:t,unstyled:n,interacting:h,setHeights:u,visibleToasts:g,heights:b,index:d,toasts:q,expanded:$,removeToast:V,defaultRichColors:Q,closeButton:i,style:O,cancelButtonStyle:K,actionButtonStyle:Z,className:tt=\"\",descriptionClassName:et=\"\",duration:X,position:ot,gap:w,loadingIcon:j,expandByDefault:W,classNames:r,icons:I,closeButtonAriaLabel:at=\"Close toast\",pauseWhenPageIsHidden:k,cn:T}=s,[z,nt]=e.useState(!1),[D,H]=e.useState(!1),[st,N]=e.useState(!1),[M,rt]=e.useState(!1),[c,m]=e.useState(0),[y,S]=e.useState(0),A=e.useRef(null),l=e.useRef(null),_=d===0,J=d+1<=g,x=t.type,P=t.dismissible!==!1,Mt=t.className||\"\",At=t.descriptionClassName||\"\",G=e.useMemo(()=>b.findIndex(a=>a.toastId===t.id)||0,[b,t.id]),Lt=e.useMemo(()=>{var a;return(a=t.closeButton)!=null?a:i},[t.closeButton,i]),mt=e.useMemo(()=>t.duration||X||Zt,[t.duration,X]),it=e.useRef(0),Y=e.useRef(0),pt=e.useRef(0),F=e.useRef(null),[gt,zt]=ot.split(\"-\"),ht=e.useMemo(()=>b.reduce((a,f,p)=>p>=G?a:a+f.height,0),[b,G]),bt=Dt(),jt=t.invert||o,lt=x===\"loading\";Y.current=e.useMemo(()=>G*w+ht,[G,ht]),e.useEffect(()=>{nt(!0)},[]),e.useLayoutEffect(()=>{if(!z)return;let a=l.current,f=a.style.height;a.style.height=\"auto\";let p=a.getBoundingClientRect().height;a.style.height=f,S(p),u(B=>B.find(R=>R.toastId===t.id)?B.map(R=>R.toastId===t.id?{...R,height:p}:R):[{toastId:t.id,height:p,position:t.position},...B])},[z,t.title,t.description,u,t.id]);let L=e.useCallback(()=>{H(!0),m(Y.current),u(a=>a.filter(f=>f.toastId!==t.id)),setTimeout(()=>{V(t)},ae)},[t,V,u,Y]);e.useEffect(()=>{if(t.promise&&x===\"loading\"||t.duration===1/0||t.type===\"loading\")return;let a,f=mt;return $||h||k&&bt?(()=>{if(pt.current<it.current){let C=new Date().getTime()-it.current;f=f-C}pt.current=new Date().getTime()})():(()=>{f!==1/0&&(it.current=new Date().getTime(),a=setTimeout(()=>{var C;(C=t.onAutoClose)==null||C.call(t,t),L()},f))})(),()=>clearTimeout(a)},[$,h,W,t,mt,L,t.promise,x,k,bt]),e.useEffect(()=>{let a=l.current;if(a){let f=a.getBoundingClientRect().height;return S(f),u(p=>[{toastId:t.id,height:f,position:t.position},...p]),()=>u(p=>p.filter(B=>B.toastId!==t.id))}},[u,t.id]),e.useEffect(()=>{t.delete&&L()},[L,t.delete]);function Yt(){return I!=null&&I.loading?e.createElement(\"div\",{className:\"sonner-loader\",\"data-visible\":x===\"loading\"},I.loading):j?e.createElement(\"div\",{className:\"sonner-loader\",\"data-visible\":x===\"loading\"},j):e.createElement(It,{visible:x===\"loading\"})}return e.createElement(\"li\",{\"aria-live\":t.important?\"assertive\":\"polite\",\"aria-atomic\":\"true\",role:\"status\",tabIndex:0,ref:l,className:T(tt,Mt,r==null?void 0:r.toast,(yt=t==null?void 0:t.classNames)==null?void 0:yt.toast,r==null?void 0:r.default,r==null?void 0:r[x],(xt=t==null?void 0:t.classNames)==null?void 0:xt[x]),\"data-sonner-toast\":\"\",\"data-rich-colors\":(vt=t.richColors)!=null?vt:Q,\"data-styled\":!(t.jsx||t.unstyled||n),\"data-mounted\":z,\"data-promise\":!!t.promise,\"data-removed\":D,\"data-visible\":J,\"data-y-position\":gt,\"data-x-position\":zt,\"data-index\":d,\"data-front\":_,\"data-swiping\":st,\"data-dismissible\":P,\"data-type\":x,\"data-invert\":jt,\"data-swipe-out\":M,\"data-expanded\":!!($||W&&z),style:{\"--index\":d,\"--toasts-before\":d,\"--z-index\":q.length-d,\"--offset\":`${D?c:Y.current}px`,\"--initial-height\":W?\"auto\":`${y}px`,...O,...t.style},onPointerDown:a=>{lt||!P||(A.current=new Date,m(Y.current),a.target.setPointerCapture(a.pointerId),a.target.tagName!==\"BUTTON\"&&(N(!0),F.current={x:a.clientX,y:a.clientY}))},onPointerUp:()=>{var B,C,R,dt;if(M||!P)return;F.current=null;let a=Number(((B=l.current)==null?void 0:B.style.getPropertyValue(\"--swipe-amount\").replace(\"px\",\"\"))||0),f=new Date().getTime()-((C=A.current)==null?void 0:C.getTime()),p=Math.abs(a)/f;if(Math.abs(a)>=oe||p>.11){m(Y.current),(R=t.onDismiss)==null||R.call(t,t),L(),rt(!0);return}(dt=l.current)==null||dt.style.setProperty(\"--swipe-amount\",\"0px\"),N(!1)},onPointerMove:a=>{var Bt;if(!F.current||!P)return;let f=a.clientY-F.current.y,p=a.clientX-F.current.x,C=(gt===\"top\"?Math.min:Math.max)(0,f),R=a.pointerType===\"touch\"?10:2;Math.abs(C)>R?(Bt=l.current)==null||Bt.style.setProperty(\"--swipe-amount\",`${f}px`):Math.abs(p)>R&&(F.current=null)}},Lt&&!t.jsx?e.createElement(\"button\",{\"aria-label\":at,\"data-disabled\":lt,\"data-close-button\":!0,onClick:lt||!P?()=>{}:()=>{var a;L(),(a=t.onDismiss)==null||a.call(t,t)},className:T(r==null?void 0:r.closeButton,(wt=t==null?void 0:t.classNames)==null?void 0:wt.closeButton)},e.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"},e.createElement(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),e.createElement(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"}))):null,t.jsx||e.isValidElement(t.title)?t.jsx||t.title:e.createElement(e.Fragment,null,x||t.icon||t.promise?e.createElement(\"div\",{\"data-icon\":\"\",className:T(r==null?void 0:r.icon,(Tt=t==null?void 0:t.classNames)==null?void 0:Tt.icon)},t.promise||t.type===\"loading\"&&!t.icon?t.icon||Yt():null,t.type!==\"loading\"?t.icon||(I==null?void 0:I[x])||Ct(x):null):null,e.createElement(\"div\",{\"data-content\":\"\",className:T(r==null?void 0:r.content,(St=t==null?void 0:t.classNames)==null?void 0:St.content)},e.createElement(\"div\",{\"data-title\":\"\",className:T(r==null?void 0:r.title,(Rt=t==null?void 0:t.classNames)==null?void 0:Rt.title)},t.title),t.description?e.createElement(\"div\",{\"data-description\":\"\",className:T(et,At,r==null?void 0:r.description,(Et=t==null?void 0:t.classNames)==null?void 0:Et.description)},t.description):null),e.isValidElement(t.cancel)?t.cancel:t.cancel&&U(t.cancel)?e.createElement(\"button\",{\"data-button\":!0,\"data-cancel\":!0,style:t.cancelButtonStyle||K,onClick:a=>{var f,p;U(t.cancel)&&P&&((p=(f=t.cancel).onClick)==null||p.call(f,a),L())},className:T(r==null?void 0:r.cancelButton,(Nt=t==null?void 0:t.classNames)==null?void 0:Nt.cancelButton)},t.cancel.label):null,e.isValidElement(t.action)?t.action:t.action&&U(t.action)?e.createElement(\"button\",{\"data-button\":!0,\"data-action\":!0,style:t.actionButtonStyle||Z,onClick:a=>{var f,p;U(t.action)&&(a.defaultPrevented||((p=(f=t.action).onClick)==null||p.call(f,a),L()))},className:T(r==null?void 0:r.actionButton,(Pt=t==null?void 0:t.classNames)==null?void 0:Pt.actionButton)},t.action.label):null))};function Ht(){if(typeof window==\"undefined\"||typeof document==\"undefined\")return\"ltr\";let s=document.documentElement.getAttribute(\"dir\");return s===\"auto\"||!s?window.getComputedStyle(document.documentElement).direction:s}function we(){let[s,o]=e.useState([]);return e.useEffect(()=>v.subscribe(t=>{o(n=>{if(\"dismiss\"in t&&t.dismiss)return n.filter(u=>u.id!==t.id);let h=n.findIndex(u=>u.id===t.id);if(h!==-1){let u=[...n];return u[h]={...u[h],...t},u}else return[t,...n]})}),[]),{toasts:s}}var Te=s=>{let{invert:o,position:t=\"bottom-right\",hotkey:n=[\"altKey\",\"KeyT\"],expand:h,closeButton:u,className:g,offset:b,theme:d=\"light\",richColors:q,duration:$,style:V,visibleToasts:Q=qt,toastOptions:i,dir:O=Ht(),gap:K=ee,loadingIcon:Z,icons:tt,containerAriaLabel:et=\"Notifications\",pauseWhenPageIsHidden:X,cn:ot=ne}=s,[w,j]=e.useState([]),W=e.useMemo(()=>Array.from(new Set([t].concat(w.filter(c=>c.position).map(c=>c.position)))),[w,t]),[r,I]=e.useState([]),[at,k]=e.useState(!1),[T,z]=e.useState(!1),[nt,D]=e.useState(d!==\"system\"?d:typeof window!=\"undefined\"&&window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"),H=e.useRef(null),st=n.join(\"+\").replace(/Key/g,\"\").replace(/Digit/g,\"\"),N=e.useRef(null),M=e.useRef(!1),rt=e.useCallback(c=>{var m;(m=w.find(y=>y.id===c.id))!=null&&m.delete||v.dismiss(c.id),j(y=>y.filter(({id:S})=>S!==c.id))},[w]);return e.useEffect(()=>v.subscribe(c=>{if(c.dismiss){j(m=>m.map(y=>y.id===c.id?{...y,delete:!0}:y));return}setTimeout(()=>{Gt.flushSync(()=>{j(m=>{let y=m.findIndex(S=>S.id===c.id);return y!==-1?[...m.slice(0,y),{...m[y],...c},...m.slice(y+1)]:[c,...m]})})})}),[]),e.useEffect(()=>{if(d!==\"system\"){D(d);return}d===\"system\"&&(window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?D(\"dark\"):D(\"light\")),typeof window!=\"undefined\"&&window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\",({matches:c})=>{D(c?\"dark\":\"light\")})},[d]),e.useEffect(()=>{w.length<=1&&k(!1)},[w]),e.useEffect(()=>{let c=m=>{var S,A;n.every(l=>m[l]||m.code===l)&&(k(!0),(S=H.current)==null||S.focus()),m.code===\"Escape\"&&(document.activeElement===H.current||(A=H.current)!=null&&A.contains(document.activeElement))&&k(!1)};return document.addEventListener(\"keydown\",c),()=>document.removeEventListener(\"keydown\",c)},[n]),e.useEffect(()=>{if(H.current)return()=>{N.current&&(N.current.focus({preventScroll:!0}),N.current=null,M.current=!1)}},[H.current]),w.length?e.createElement(\"section\",{\"aria-label\":`${et} ${st}`,tabIndex:-1},W.map((c,m)=>{var A;let[y,S]=c.split(\"-\");return e.createElement(\"ol\",{key:c,dir:O===\"auto\"?Ht():O,tabIndex:-1,ref:H,className:g,\"data-sonner-toaster\":!0,\"data-theme\":nt,\"data-y-position\":y,\"data-x-position\":S,style:{\"--front-toast-height\":`${((A=r[0])==null?void 0:A.height)||0}px`,\"--offset\":typeof b==\"number\"?`${b}px`:b||Qt,\"--width\":`${te}px`,\"--gap\":`${K}px`,...V},onBlur:l=>{M.current&&!l.currentTarget.contains(l.relatedTarget)&&(M.current=!1,N.current&&(N.current.focus({preventScroll:!0}),N.current=null))},onFocus:l=>{l.target instanceof HTMLElement&&l.target.dataset.dismissible===\"false\"||M.current||(M.current=!0,N.current=l.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{T||k(!1)},onPointerDown:l=>{l.target instanceof HTMLElement&&l.target.dataset.dismissible===\"false\"||z(!0)},onPointerUp:()=>z(!1)},w.filter(l=>!l.position&&m===0||l.position===c).map((l,_)=>{var J,x;return e.createElement(se,{key:l.id,icons:tt,index:_,toast:l,defaultRichColors:q,duration:(J=i==null?void 0:i.duration)!=null?J:$,className:i==null?void 0:i.className,descriptionClassName:i==null?void 0:i.descriptionClassName,invert:o,visibleToasts:Q,closeButton:(x=i==null?void 0:i.closeButton)!=null?x:u,interacting:T,position:c,style:i==null?void 0:i.style,unstyled:i==null?void 0:i.unstyled,classNames:i==null?void 0:i.classNames,cancelButtonStyle:i==null?void 0:i.cancelButtonStyle,actionButtonStyle:i==null?void 0:i.actionButtonStyle,removeToast:rt,toasts:w.filter(P=>P.position==l.position),heights:r.filter(P=>P.position==l.position),setHeights:I,expandByDefault:h,gap:K,loadingIcon:Z,expanded:at,pauseWhenPageIsHidden:X,cn:ot})}))})):null};export{Te as Toaster,Jt as toast,we as useSonner};\n//# sourceMappingURL=index.mjs.map","import { useTheme } from \"next-themes\"\r\nimport { Toaster as Sonner, toast } from \"sonner\"\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme()\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton:\r\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton:\r\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Toaster, toast }\r\n","\"use client\";\n\n// packages/react/tooltip/src/Tooltip.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { useId } from \"@radix-ui/react-id\";\nimport * as PopperPrimitive from \"@radix-ui/react-popper\";\nimport { createPopperScope } from \"@radix-ui/react-popper\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Slottable } from \"@radix-ui/react-slot\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport * as VisuallyHiddenPrimitive from \"@radix-ui/react-visually-hidden\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar [createTooltipContext, createTooltipScope] = createContextScope(\"Tooltip\", [\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar PROVIDER_NAME = \"TooltipProvider\";\nvar DEFAULT_DELAY_DURATION = 700;\nvar TOOLTIP_OPEN = \"tooltip.open\";\nvar [TooltipProviderContextProvider, useTooltipProviderContext] = createTooltipContext(PROVIDER_NAME);\nvar TooltipProvider = (props) => {\n  const {\n    __scopeTooltip,\n    delayDuration = DEFAULT_DELAY_DURATION,\n    skipDelayDuration = 300,\n    disableHoverableContent = false,\n    children\n  } = props;\n  const [isOpenDelayed, setIsOpenDelayed] = React.useState(true);\n  const isPointerInTransitRef = React.useRef(false);\n  const skipDelayTimerRef = React.useRef(0);\n  React.useEffect(() => {\n    const skipDelayTimer = skipDelayTimerRef.current;\n    return () => window.clearTimeout(skipDelayTimer);\n  }, []);\n  return /* @__PURE__ */ jsx(\n    TooltipProviderContextProvider,\n    {\n      scope: __scopeTooltip,\n      isOpenDelayed,\n      delayDuration,\n      onOpen: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        setIsOpenDelayed(false);\n      }, []),\n      onClose: React.useCallback(() => {\n        window.clearTimeout(skipDelayTimerRef.current);\n        skipDelayTimerRef.current = window.setTimeout(\n          () => setIsOpenDelayed(true),\n          skipDelayDuration\n        );\n      }, [skipDelayDuration]),\n      isPointerInTransitRef,\n      onPointerInTransitChange: React.useCallback((inTransit) => {\n        isPointerInTransitRef.current = inTransit;\n      }, []),\n      disableHoverableContent,\n      children\n    }\n  );\n};\nTooltipProvider.displayName = PROVIDER_NAME;\nvar TOOLTIP_NAME = \"Tooltip\";\nvar [TooltipContextProvider, useTooltipContext] = createTooltipContext(TOOLTIP_NAME);\nvar Tooltip = (props) => {\n  const {\n    __scopeTooltip,\n    children,\n    open: openProp,\n    defaultOpen = false,\n    onOpenChange,\n    disableHoverableContent: disableHoverableContentProp,\n    delayDuration: delayDurationProp\n  } = props;\n  const providerContext = useTooltipProviderContext(TOOLTIP_NAME, props.__scopeTooltip);\n  const popperScope = usePopperScope(__scopeTooltip);\n  const [trigger, setTrigger] = React.useState(null);\n  const contentId = useId();\n  const openTimerRef = React.useRef(0);\n  const disableHoverableContent = disableHoverableContentProp ?? providerContext.disableHoverableContent;\n  const delayDuration = delayDurationProp ?? providerContext.delayDuration;\n  const wasOpenDelayedRef = React.useRef(false);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: (open2) => {\n      if (open2) {\n        providerContext.onOpen();\n        document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN));\n      } else {\n        providerContext.onClose();\n      }\n      onOpenChange?.(open2);\n    }\n  });\n  const stateAttribute = React.useMemo(() => {\n    return open ? wasOpenDelayedRef.current ? \"delayed-open\" : \"instant-open\" : \"closed\";\n  }, [open]);\n  const handleOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    wasOpenDelayedRef.current = false;\n    setOpen(true);\n  }, [setOpen]);\n  const handleClose = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = 0;\n    setOpen(false);\n  }, [setOpen]);\n  const handleDelayedOpen = React.useCallback(() => {\n    window.clearTimeout(openTimerRef.current);\n    openTimerRef.current = window.setTimeout(() => {\n      wasOpenDelayedRef.current = true;\n      setOpen(true);\n      openTimerRef.current = 0;\n    }, delayDuration);\n  }, [delayDuration, setOpen]);\n  React.useEffect(() => {\n    return () => {\n      if (openTimerRef.current) {\n        window.clearTimeout(openTimerRef.current);\n        openTimerRef.current = 0;\n      }\n    };\n  }, []);\n  return /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children: /* @__PURE__ */ jsx(\n    TooltipContextProvider,\n    {\n      scope: __scopeTooltip,\n      contentId,\n      open,\n      stateAttribute,\n      trigger,\n      onTriggerChange: setTrigger,\n      onTriggerEnter: React.useCallback(() => {\n        if (providerContext.isOpenDelayed) handleDelayedOpen();\n        else handleOpen();\n      }, [providerContext.isOpenDelayed, handleDelayedOpen, handleOpen]),\n      onTriggerLeave: React.useCallback(() => {\n        if (disableHoverableContent) {\n          handleClose();\n        } else {\n          window.clearTimeout(openTimerRef.current);\n          openTimerRef.current = 0;\n        }\n      }, [handleClose, disableHoverableContent]),\n      onOpen: handleOpen,\n      onClose: handleClose,\n      disableHoverableContent,\n      children\n    }\n  ) });\n};\nTooltip.displayName = TOOLTIP_NAME;\nvar TRIGGER_NAME = \"TooltipTrigger\";\nvar TooltipTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...triggerProps } = props;\n    const context = useTooltipContext(TRIGGER_NAME, __scopeTooltip);\n    const providerContext = useTooltipProviderContext(TRIGGER_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onTriggerChange);\n    const isPointerDownRef = React.useRef(false);\n    const hasPointerMoveOpenedRef = React.useRef(false);\n    const handlePointerUp = React.useCallback(() => isPointerDownRef.current = false, []);\n    React.useEffect(() => {\n      return () => document.removeEventListener(\"pointerup\", handlePointerUp);\n    }, [handlePointerUp]);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        \"aria-describedby\": context.open ? context.contentId : void 0,\n        \"data-state\": context.stateAttribute,\n        ...triggerProps,\n        ref: composedRefs,\n        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n          if (event.pointerType === \"touch\") return;\n          if (!hasPointerMoveOpenedRef.current && !providerContext.isPointerInTransitRef.current) {\n            context.onTriggerEnter();\n            hasPointerMoveOpenedRef.current = true;\n          }\n        }),\n        onPointerLeave: composeEventHandlers(props.onPointerLeave, () => {\n          context.onTriggerLeave();\n          hasPointerMoveOpenedRef.current = false;\n        }),\n        onPointerDown: composeEventHandlers(props.onPointerDown, () => {\n          isPointerDownRef.current = true;\n          document.addEventListener(\"pointerup\", handlePointerUp, { once: true });\n        }),\n        onFocus: composeEventHandlers(props.onFocus, () => {\n          if (!isPointerDownRef.current) context.onOpen();\n        }),\n        onBlur: composeEventHandlers(props.onBlur, context.onClose),\n        onClick: composeEventHandlers(props.onClick, context.onClose)\n      }\n    ) });\n  }\n);\nTooltipTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"TooltipPortal\";\nvar [PortalProvider, usePortalContext] = createTooltipContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar TooltipPortal = (props) => {\n  const { __scopeTooltip, forceMount, children, container } = props;\n  const context = useTooltipContext(PORTAL_NAME, __scopeTooltip);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeTooltip, forceMount, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children }) }) });\n};\nTooltipPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"TooltipContent\";\nvar TooltipContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeTooltip);\n    const { forceMount = portalContext.forceMount, side = \"top\", ...contentProps } = props;\n    const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: context.disableHoverableContent ? /* @__PURE__ */ jsx(TooltipContentImpl, { side, ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsx(TooltipContentHoverable, { side, ...contentProps, ref: forwardedRef }) });\n  }\n);\nvar TooltipContentHoverable = React.forwardRef((props, forwardedRef) => {\n  const context = useTooltipContext(CONTENT_NAME, props.__scopeTooltip);\n  const providerContext = useTooltipProviderContext(CONTENT_NAME, props.__scopeTooltip);\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const [pointerGraceArea, setPointerGraceArea] = React.useState(null);\n  const { trigger, onClose } = context;\n  const content = ref.current;\n  const { onPointerInTransitChange } = providerContext;\n  const handleRemoveGraceArea = React.useCallback(() => {\n    setPointerGraceArea(null);\n    onPointerInTransitChange(false);\n  }, [onPointerInTransitChange]);\n  const handleCreateGraceArea = React.useCallback(\n    (event, hoverTarget) => {\n      const currentTarget = event.currentTarget;\n      const exitPoint = { x: event.clientX, y: event.clientY };\n      const exitSide = getExitSideFromRect(exitPoint, currentTarget.getBoundingClientRect());\n      const paddedExitPoints = getPaddedExitPoints(exitPoint, exitSide);\n      const hoverTargetPoints = getPointsFromRect(hoverTarget.getBoundingClientRect());\n      const graceArea = getHull([...paddedExitPoints, ...hoverTargetPoints]);\n      setPointerGraceArea(graceArea);\n      onPointerInTransitChange(true);\n    },\n    [onPointerInTransitChange]\n  );\n  React.useEffect(() => {\n    return () => handleRemoveGraceArea();\n  }, [handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (trigger && content) {\n      const handleTriggerLeave = (event) => handleCreateGraceArea(event, content);\n      const handleContentLeave = (event) => handleCreateGraceArea(event, trigger);\n      trigger.addEventListener(\"pointerleave\", handleTriggerLeave);\n      content.addEventListener(\"pointerleave\", handleContentLeave);\n      return () => {\n        trigger.removeEventListener(\"pointerleave\", handleTriggerLeave);\n        content.removeEventListener(\"pointerleave\", handleContentLeave);\n      };\n    }\n  }, [trigger, content, handleCreateGraceArea, handleRemoveGraceArea]);\n  React.useEffect(() => {\n    if (pointerGraceArea) {\n      const handleTrackPointerGrace = (event) => {\n        const target = event.target;\n        const pointerPosition = { x: event.clientX, y: event.clientY };\n        const hasEnteredTarget = trigger?.contains(target) || content?.contains(target);\n        const isPointerOutsideGraceArea = !isPointInPolygon(pointerPosition, pointerGraceArea);\n        if (hasEnteredTarget) {\n          handleRemoveGraceArea();\n        } else if (isPointerOutsideGraceArea) {\n          handleRemoveGraceArea();\n          onClose();\n        }\n      };\n      document.addEventListener(\"pointermove\", handleTrackPointerGrace);\n      return () => document.removeEventListener(\"pointermove\", handleTrackPointerGrace);\n    }\n  }, [trigger, content, pointerGraceArea, onClose, handleRemoveGraceArea]);\n  return /* @__PURE__ */ jsx(TooltipContentImpl, { ...props, ref: composedRefs });\n});\nvar [VisuallyHiddenContentContextProvider, useVisuallyHiddenContentContext] = createTooltipContext(TOOLTIP_NAME, { isInside: false });\nvar TooltipContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTooltip,\n      children,\n      \"aria-label\": ariaLabel,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      ...contentProps\n    } = props;\n    const context = useTooltipContext(CONTENT_NAME, __scopeTooltip);\n    const popperScope = usePopperScope(__scopeTooltip);\n    const { onClose } = context;\n    React.useEffect(() => {\n      document.addEventListener(TOOLTIP_OPEN, onClose);\n      return () => document.removeEventListener(TOOLTIP_OPEN, onClose);\n    }, [onClose]);\n    React.useEffect(() => {\n      if (context.trigger) {\n        const handleScroll = (event) => {\n          const target = event.target;\n          if (target?.contains(context.trigger)) onClose();\n        };\n        window.addEventListener(\"scroll\", handleScroll, { capture: true });\n        return () => window.removeEventListener(\"scroll\", handleScroll, { capture: true });\n      }\n    }, [context.trigger, onClose]);\n    return /* @__PURE__ */ jsx(\n      DismissableLayer,\n      {\n        asChild: true,\n        disableOutsidePointerEvents: false,\n        onEscapeKeyDown,\n        onPointerDownOutside,\n        onFocusOutside: (event) => event.preventDefault(),\n        onDismiss: onClose,\n        children: /* @__PURE__ */ jsxs(\n          PopperPrimitive.Content,\n          {\n            \"data-state\": context.stateAttribute,\n            ...popperScope,\n            ...contentProps,\n            ref: forwardedRef,\n            style: {\n              ...contentProps.style,\n              // re-namespace exposed content custom properties\n              ...{\n                \"--radix-tooltip-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n                \"--radix-tooltip-content-available-width\": \"var(--radix-popper-available-width)\",\n                \"--radix-tooltip-content-available-height\": \"var(--radix-popper-available-height)\",\n                \"--radix-tooltip-trigger-width\": \"var(--radix-popper-anchor-width)\",\n                \"--radix-tooltip-trigger-height\": \"var(--radix-popper-anchor-height)\"\n              }\n            },\n            children: [\n              /* @__PURE__ */ jsx(Slottable, { children }),\n              /* @__PURE__ */ jsx(VisuallyHiddenContentContextProvider, { scope: __scopeTooltip, isInside: true, children: /* @__PURE__ */ jsx(VisuallyHiddenPrimitive.Root, { id: context.contentId, role: \"tooltip\", children: ariaLabel || children }) })\n            ]\n          }\n        )\n      }\n    );\n  }\n);\nTooltipContent.displayName = CONTENT_NAME;\nvar ARROW_NAME = \"TooltipArrow\";\nvar TooltipArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTooltip, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeTooltip);\n    const visuallyHiddenContentContext = useVisuallyHiddenContentContext(\n      ARROW_NAME,\n      __scopeTooltip\n    );\n    return visuallyHiddenContentContext.isInside ? null : /* @__PURE__ */ jsx(PopperPrimitive.Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nTooltipArrow.displayName = ARROW_NAME;\nfunction getExitSideFromRect(point, rect) {\n  const top = Math.abs(rect.top - point.y);\n  const bottom = Math.abs(rect.bottom - point.y);\n  const right = Math.abs(rect.right - point.x);\n  const left = Math.abs(rect.left - point.x);\n  switch (Math.min(top, bottom, right, left)) {\n    case left:\n      return \"left\";\n    case right:\n      return \"right\";\n    case top:\n      return \"top\";\n    case bottom:\n      return \"bottom\";\n    default:\n      throw new Error(\"unreachable\");\n  }\n}\nfunction getPaddedExitPoints(exitPoint, exitSide, padding = 5) {\n  const paddedExitPoints = [];\n  switch (exitSide) {\n    case \"top\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y + padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"bottom\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y - padding }\n      );\n      break;\n    case \"left\":\n      paddedExitPoints.push(\n        { x: exitPoint.x + padding, y: exitPoint.y - padding },\n        { x: exitPoint.x + padding, y: exitPoint.y + padding }\n      );\n      break;\n    case \"right\":\n      paddedExitPoints.push(\n        { x: exitPoint.x - padding, y: exitPoint.y - padding },\n        { x: exitPoint.x - padding, y: exitPoint.y + padding }\n      );\n      break;\n  }\n  return paddedExitPoints;\n}\nfunction getPointsFromRect(rect) {\n  const { top, right, bottom, left } = rect;\n  return [\n    { x: left, y: top },\n    { x: right, y: top },\n    { x: right, y: bottom },\n    { x: left, y: bottom }\n  ];\n}\nfunction isPointInPolygon(point, polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n    const intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\nfunction getHull(points) {\n  const newPoints = points.slice();\n  newPoints.sort((a, b) => {\n    if (a.x < b.x) return -1;\n    else if (a.x > b.x) return 1;\n    else if (a.y < b.y) return -1;\n    else if (a.y > b.y) return 1;\n    else return 0;\n  });\n  return getHullPresorted(newPoints);\n}\nfunction getHullPresorted(points) {\n  if (points.length <= 1) return points.slice();\n  const upperHull = [];\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    while (upperHull.length >= 2) {\n      const q = upperHull[upperHull.length - 1];\n      const r = upperHull[upperHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) upperHull.pop();\n      else break;\n    }\n    upperHull.push(p);\n  }\n  upperHull.pop();\n  const lowerHull = [];\n  for (let i = points.length - 1; i >= 0; i--) {\n    const p = points[i];\n    while (lowerHull.length >= 2) {\n      const q = lowerHull[lowerHull.length - 1];\n      const r = lowerHull[lowerHull.length - 2];\n      if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x)) lowerHull.pop();\n      else break;\n    }\n    lowerHull.push(p);\n  }\n  lowerHull.pop();\n  if (upperHull.length === 1 && lowerHull.length === 1 && upperHull[0].x === lowerHull[0].x && upperHull[0].y === lowerHull[0].y) {\n    return upperHull;\n  } else {\n    return upperHull.concat(lowerHull);\n  }\n}\nvar Provider = TooltipProvider;\nvar Root3 = Tooltip;\nvar Trigger = TooltipTrigger;\nvar Portal = TooltipPortal;\nvar Content2 = TooltipContent;\nvar Arrow2 = TooltipArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  Portal,\n  Provider,\n  Root3 as Root,\n  Tooltip,\n  TooltipArrow,\n  TooltipContent,\n  TooltipPortal,\n  TooltipProvider,\n  TooltipTrigger,\n  Trigger,\n  createTooltipScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n  return void 0;\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return !Object.keys(b).some((key) => !partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItems.includes(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/thenable.ts\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nexport {\n  pendingThenable\n};\n//# sourceMappingURL=thenable.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let isResolved = false;\n  let continueFn;\n  const thenable = pendingThenable();\n  const cancel = (cancelOptions) => {\n    if (!isResolved) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onSuccess?.(value);\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onError?.(value);\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/notifyManager.ts\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = (cb) => setTimeout(cb, 0);\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { canFetch, createRetryer, isCancelledError } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#cache = config.cache;\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStale() {\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0;\n  }\n  isStaleByTime(staleTime = 0) {\n    return this.state.isInvalidated || this.state.data === void 0 || !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const queryFnContext = {\n        queryKey: this.queryKey,\n        meta: this.meta\n      };\n      addSignalProperty(queryFnContext);\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const context = {\n      fetchOptions,\n      options: this.options,\n      queryKey: this.queryKey,\n      state: this.state,\n      fetchFn\n    };\n    addSignalProperty(context);\n    this.options.behavior?.onFetch(\n      context,\n      this\n    );\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    const onError = (error) => {\n      if (!(isCancelledError(error) && error.silent)) {\n        this.#dispatch({\n          type: \"error\",\n          error\n        });\n      }\n      if (!isCancelledError(error)) {\n        this.#cache.config.onError?.(\n          error,\n          this\n        );\n        this.#cache.config.onSettled?.(\n          this.state.data,\n          error,\n          this\n        );\n      }\n      this.scheduleGc();\n    };\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onSuccess: (data) => {\n        if (data === void 0) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(\n              `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n            );\n          }\n          onError(new Error(`${this.queryHash} data is undefined`));\n          return;\n        }\n        try {\n          this.setData(data);\n        } catch (error) {\n          onError(error);\n          return;\n        }\n        this.#cache.config.onSuccess?.(data, this);\n        this.#cache.config.onSettled?.(\n          data,\n          this.state.error,\n          this\n        );\n        this.scheduleGc();\n      },\n      onError,\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    return this.#retryer.start();\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n        case \"error\":\n          const error = action.error;\n          if (isCancelledError(error) && error.revert && this.#revertState) {\n            return { ...this.#revertState, fetchStatus: \"idle\" };\n          }\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (!restored) {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Map();\n    this.#mutationId = Date.now();\n  }\n  #mutations;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    const scope = scopeFor(mutation);\n    const mutations = this.#mutations.get(scope) ?? [];\n    mutations.push(mutation);\n    this.#mutations.set(scope, mutations);\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    const scope = scopeFor(mutation);\n    if (this.#mutations.has(scope)) {\n      const mutations = this.#mutations.get(scope)?.filter((x) => x !== mutation);\n      if (mutations) {\n        if (mutations.length === 0) {\n          this.#mutations.delete(scope);\n        } else {\n          this.#mutations.set(scope, mutations);\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const firstPendingMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m.state.status === \"pending\");\n    return !firstPendingMutation || firstPendingMutation === mutation;\n  }\n  runNext(mutation) {\n    const foundMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m !== mutation && m.state.isPaused);\n    return foundMutation?.continue() ?? Promise.resolve();\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((mutation) => {\n        this.remove(mutation);\n      });\n    });\n  }\n  getAll() {\n    return [...this.#mutations.values()].flat();\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id ?? String(mutation.mutationId);\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const queryFnContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n            direction: previous ? \"backward\" : \"forward\",\n            meta: context.options.meta\n          };\n          addSignalProperty(queryFnContext);\n          const page = await queryFn(\n            queryFnContext\n          );\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data)\n    return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam)\n    return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1)\n      return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0)\n      return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const cachedData = this.getQueryData(options.queryKey);\n    if (cachedData === void 0)\n      return this.fetchQuery(options);\n    else {\n      const defaultedOptions = this.defaultQueryOptions(options);\n      const query = this.#queryCache.build(this, defaultedOptions);\n      if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n        void this.prefetchQuery(defaultedOptions);\n      }\n      return Promise.resolve(cachedData);\n    }\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    const refetchFilters = {\n      type: \"active\",\n      ...filters\n    };\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  cancelQueries(filters = {}, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters = {}, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      const refetchFilters = {\n        ...filters,\n        type: filters.refetchType ?? filters.type ?? \"active\"\n      };\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  refetchQueries(filters = {}, options) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options?.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.enabled !== true && defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","/**\n * Utilitaire de journalisation pour l'application\n * Permet de centraliser et formater les logs pour faciliter le débogage\n * Version améliorée avec capture des erreurs non gérées et interface visuelle\n */\n\n// Niveaux de log disponibles\ntype LogLevel = 'info' | 'warn' | 'error' | 'debug';\n\n// Configuration des couleurs pour les différents niveaux de log\nconst LOG_COLORS = {\n  info: '#4a5d94',  // Bleu de l'application\n  warn: '#ff7a45',  // Orange de l'application\n  error: '#e53935', // Rouge\n  debug: '#2e7d32'  // Vert\n};\n\n// Stockage des logs pour l'interface visuelle\ninterface LogEntry {\n  timestamp: string;\n  module: string;\n  message: string;\n  level: LogLevel;\n  data?: any;\n}\n\n// Tableau pour stocker les logs récents\nconst logHistory: LogEntry[] = [];\nconst MAX_LOG_HISTORY = 100;\n\n/**\n * Fonction de journalisation avec formatage et préfixe\n * @param module Nom du module/composant qui génère le log\n * @param message Message à journaliser\n * @param level Niveau de log (info, warn, error, debug)\n * @param data Données supplémentaires à journaliser\n */\nexport function log(\n  module: string,\n  message: string,\n  level: LogLevel = 'info',\n  data?: any\n) {\n  // Filtrer tous les logs indésirables\n  if (level === 'info') {\n    // Liste complète des motifs à filtrer\n    const blacklistedPatterns = [\n      'Rendu du marqueur utilisateur',\n      'Position utilisateur mise à jour',\n      'Position utilisateur mise à jour sur la carte',\n      'redimensionné',\n      'Marqueur utilisateur',\n      'Rendu du marqueur',\n      'Position utilisateur'\n    ];\n    \n    // Vérifier si le message contient l'un des motifs à filtrer\n    const shouldFilter = blacklistedPatterns.some(pattern => \n      message.includes(pattern) || \n      (data && JSON.stringify(data).includes(pattern))\n    );\n    \n    // Ne pas filtrer les logs d'éloignement\n    if (shouldFilter && !message.includes('Toast d\\'éloignement')) {\n      // Ignorer ces logs pour réduire le bruit dans la console\n      return;\n    }\n  }\n  \n  const now = new Date();\n  const timestamp = now.toISOString().split('T')[1].split('.')[0];\n  const prefix = `[${timestamp}][${module}]`;\n  \n  const style = `color: ${LOG_COLORS[level]}; font-weight: bold`;\n  \n  // Ajouter au stockage des logs\n  logHistory.push({\n    timestamp: now.toISOString(),\n    module,\n    message,\n    level,\n    data\n  });\n  \n  // Limiter la taille de l'historique\n  if (logHistory.length > MAX_LOG_HISTORY) {\n    logHistory.shift();\n  }\n  \n  // Afficher dans la console\n  switch (level) {\n    case 'info':\n      console.log(`%c${prefix} ${message}`, style, data ? data : '');\n      break;\n    case 'warn':\n      console.warn(`%c${prefix} ${message}`, style, data ? data : '');\n      break;\n    case 'error':\n      console.error(`%c${prefix} ${message}`, style, data ? data : '');\n      break;\n    case 'debug':\n      console.debug(`%c${prefix} ${message}`, style, data ? data : '');\n      break;\n  }\n}\n\n/**\n * Crée un logger spécifique à un module\n * @param moduleName Nom du module pour lequel créer un logger\n */\nexport function createLogger(moduleName: string) {\n  return {\n    info: (message: string, data?: any) => log(moduleName, message, 'info', data),\n    warn: (message: string, data?: any) => log(moduleName, message, 'warn', data),\n    error: (message: string, data?: any) => log(moduleName, message, 'error', data),\n    debug: (message: string, data?: any) => log(moduleName, message, 'debug', data)\n  };\n}\n\n/**\n * Récupère l'historique des logs pour l'affichage\n */\nexport function getLogHistory() {\n  return [...logHistory];\n}\n\n/**\n * Efface l'historique des logs\n */\nexport function clearLogHistory() {\n  logHistory.length = 0;\n}\n\n/**\n * Initialise les gestionnaires d'erreurs globaux\n * À appeler dans le composant racine de l'application\n */\nexport function initErrorHandlers() {\n  // Capturer les erreurs non gérées\n  window.onerror = (message, source, lineno, colno, error) => {\n    log('GlobalErrorHandler', `Erreur non gérée: ${message}`, 'error', { source, lineno, colno, error });\n    return false; // Permet à l'erreur de se propager à la console du navigateur\n  };\n\n  // Capturer les rejets de promesses non gérés\n  window.onunhandledrejection = (event) => {\n    log('GlobalErrorHandler', 'Promesse rejetée non gérée', 'error', { reason: event.reason });\n  };\n\n  log('Logger', 'Gestionnaires d\\'erreurs globaux initialisés', 'info');\n}\n\n/**\n * Composant pour afficher les logs dans l'interface\n * Peut être importé et utilisé dans un composant React\n */\nexport function createLogViewer() {\n  // Créer un conteneur principal pour le visualiseur de logs\n  const container = document.createElement('div');\n  container.id = 'log-viewer-container';\n  container.style.position = 'fixed';\n  container.style.bottom = '0';\n  container.style.right = '0';\n  container.style.width = '500px';\n  container.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';\n  container.style.color = 'white';\n  container.style.zIndex = '9999';\n  container.style.display = 'none';\n  container.style.borderRadius = '8px 0 0 0';\n  container.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';\n  container.style.fontFamily = 'monospace';\n  container.style.fontSize = '12px';\n  \n  // Créer une barre d'outils pour les actions\n  const toolbar = document.createElement('div');\n  toolbar.style.display = 'flex';\n  toolbar.style.justifyContent = 'space-between';\n  toolbar.style.padding = '8px';\n  toolbar.style.borderBottom = '1px solid rgba(255, 255, 255, 0.2)';\n  toolbar.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';\n  toolbar.style.borderRadius = '8px 0 0 0';\n  \n  // Titre\n  const title = document.createElement('div');\n  title.textContent = 'Console de logs';\n  title.style.fontWeight = 'bold';\n  \n  // Boutons d'action\n  const actions = document.createElement('div');\n  \n  // Bouton pour effacer les logs\n  const clearButton = document.createElement('button');\n  clearButton.textContent = 'Effacer';\n  clearButton.style.marginRight = '8px';\n  clearButton.style.padding = '2px 8px';\n  clearButton.style.backgroundColor = '#ff7a45';\n  clearButton.style.border = 'none';\n  clearButton.style.borderRadius = '4px';\n  clearButton.style.color = 'white';\n  clearButton.style.cursor = 'pointer';\n  \n  // Bouton pour copier les logs\n  const copyButton = document.createElement('button');\n  copyButton.textContent = 'Copier';\n  copyButton.style.marginRight = '8px';\n  copyButton.style.padding = '2px 8px';\n  copyButton.style.backgroundColor = '#4a5d94';\n  copyButton.style.border = 'none';\n  copyButton.style.borderRadius = '4px';\n  copyButton.style.color = 'white';\n  copyButton.style.cursor = 'pointer';\n  \n  // Bouton pour fermer\n  const closeButton = document.createElement('button');\n  closeButton.textContent = 'X';\n  closeButton.style.padding = '2px 8px';\n  closeButton.style.backgroundColor = 'transparent';\n  closeButton.style.border = '1px solid rgba(255, 255, 255, 0.3)';\n  closeButton.style.borderRadius = '4px';\n  closeButton.style.color = 'white';\n  closeButton.style.cursor = 'pointer';\n  \n  // Ajouter les boutons au conteneur d'actions\n  actions.appendChild(clearButton);\n  actions.appendChild(copyButton);\n  actions.appendChild(closeButton);\n  \n  // Ajouter titre et actions à la barre d'outils\n  toolbar.appendChild(title);\n  toolbar.appendChild(actions);\n  \n  // Conteneur pour les logs\n  const logViewerElement = document.createElement('div');\n  logViewerElement.id = 'log-viewer';\n  logViewerElement.style.height = '400px';\n  logViewerElement.style.overflow = 'auto';\n  logViewerElement.style.padding = '10px';\n  \n  // Filtres pour les logs\n  const filters = document.createElement('div');\n  filters.style.padding = '8px';\n  filters.style.borderBottom = '1px solid rgba(255, 255, 255, 0.2)';\n  filters.style.display = 'flex';\n  filters.style.gap = '8px';\n  \n  // Créer des filtres pour chaque niveau de log\n  const levels = ['info', 'warn', 'error', 'debug'];\n  const filterButtons: {[key: string]: HTMLButtonElement} = {};\n  \n  levels.forEach(level => {\n    const button = document.createElement('button');\n    button.textContent = level.toUpperCase();\n    button.dataset.level = level;\n    button.style.padding = '2px 8px';\n    button.style.backgroundColor = LOG_COLORS[level as LogLevel];\n    button.style.border = 'none';\n    button.style.borderRadius = '4px';\n    button.style.color = 'white';\n    button.style.cursor = 'pointer';\n    button.style.opacity = '1';\n    \n    filterButtons[level] = button;\n    filters.appendChild(button);\n  });\n  \n  // Assembler le conteneur principal\n  container.appendChild(toolbar);\r\n  container.appendChild(filters);\r\n  container.appendChild(logViewerElement);\r\n  \r\n  // Créer un bouton pour afficher/masquer les logs\r\n  const toggleButton = document.createElement('button');\r\n  toggleButton.textContent = 'Logs';\r\n  toggleButton.style.position = 'fixed';\r\n  toggleButton.style.left = '5px';\r\n  toggleButton.style.bottom = '80px';\r\n  toggleButton.style.zIndex = '9000';\r\n  toggleButton.style.padding = '3px 6px';\r\n  toggleButton.style.backgroundColor = 'rgba(74, 93, 148, 0.8)';\r\n  toggleButton.style.color = 'white';\r\n  toggleButton.style.border = 'none';\r\n  toggleButton.style.borderRadius = '4px';\r\n  toggleButton.style.cursor = 'pointer';\r\n  toggleButton.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.3)';\r\n  toggleButton.style.fontSize = '10px';\r\n  toggleButton.style.opacity = '0.8';\r\n  toggleButton.style.transition = 'opacity 0.3s ease';\r\n  \r\n  // Ajouter un effet de survol pour rendre le bouton plus visible\r\n  toggleButton.onmouseover = () => {\r\n    toggleButton.style.opacity = '1';\r\n  };\r\n  toggleButton.onmouseout = () => {\r\n    toggleButton.style.opacity = '0.8';\r\n  };\r\n  \r\n  // Ajouter les éléments au DOM\r\n  document.body.appendChild(container);\r\n  document.body.appendChild(toggleButton);\r\n  \r\n  // État des filtres actifs\r\n  const activeFilters = new Set(levels);\r\n  \r\n  // Gérer les filtres\r\n  levels.forEach(level => {\r\n    const button = filterButtons[level];\r\n    button.addEventListener('click', () => {\r\n      if (activeFilters.has(level)) {\r\n        activeFilters.delete(level);\r\n        button.style.opacity = '0.5';\r\n      } else {\r\n        activeFilters.add(level);\r\n        button.style.opacity = '1';\r\n      }\r\n      updateLogDisplay();\r\n    });\r\n  });\r\n  \r\n  // Gérer l'effacement des logs\r\n  clearButton.addEventListener('click', () => {\r\n    clearLogHistory();\r\n    updateLogDisplay();\r\n    console.log('[LogViewer] Logs effacés');\r\n  });\r\n  \r\n  // Gérer la copie des logs\r\n  copyButton.addEventListener('click', () => {\r\n    // Obtenir tous les logs filtrés\r\n    const logs = getLogHistory()\r\n      .filter(entry => activeFilters.has(entry.level))\r\n      .map(entry => {\r\n        const time = entry.timestamp.split('T')[1].split('.')[0];\r\n        let logText = `[${time}][${entry.module}] ${entry.message}`;\r\n        \r\n        // Ajouter les données si disponibles\r\n        if (entry.data) {\r\n          logText += '\\n  ' + JSON.stringify(entry.data, null, 2).replace(/\\n/g, '\\n  ');\r\n        }\r\n        \r\n        return logText;\r\n      })\r\n      .join('\\n');\r\n    \r\n    // Utiliser une méthode plus simple pour copier le texte\r\n    const textArea = document.createElement('textarea');\r\n    textArea.value = logs;\r\n    textArea.style.position = 'fixed';\r\n    textArea.style.left = '-9999px';\r\n    textArea.style.top = '-9999px';\r\n    document.body.appendChild(textArea);\r\n    \r\n    try {\r\n      textArea.select();\r\n      const success = document.execCommand('copy');\r\n      \r\n      if (success) {\r\n        // Afficher une confirmation visuelle\r\n        copyButton.textContent = 'Copié !';\r\n        copyButton.style.backgroundColor = '#2e7d32'; // Vert\r\n        console.log('[LogViewer] Logs copiés dans le presse-papier');\r\n      } else {\r\n        copyButton.textContent = 'Erreur !';\r\n        copyButton.style.backgroundColor = '#d32f2f'; // Rouge\r\n        console.error('[LogViewer] Échec de la copie des logs');\r\n      }\r\n    } catch (error) {\r\n      copyButton.textContent = 'Erreur !';\r\n      copyButton.style.backgroundColor = '#d32f2f'; // Rouge\r\n      console.error('[LogViewer] Erreur lors de la copie des logs', error);\r\n    } finally {\r\n      document.body.removeChild(textArea);\r\n      \r\n      // Rétablir le texte original après un court délai\r\n      setTimeout(() => {\r\n        copyButton.textContent = 'Copier';\r\n        copyButton.style.backgroundColor = '#4a5d94';\r\n      }, 1500);\r\n    }\r\n  });\r\n  \r\n  // Gérer la fermeture\r\n  closeButton.addEventListener('click', () => {\r\n    container.style.display = 'none';\r\n  });\r\n  \r\n  // Gérer l'affichage/masquage des logs\r\n  toggleButton.addEventListener('click', () => {\r\n    const isVisible = container.style.display === 'block';\r\n    container.style.display = isVisible ? 'none' : 'block';\r\n    if (!isVisible) {\r\n      // Faire défiler vers le bas lorsqu'on ouvre\r\n      logViewerElement.scrollTop = logViewerElement.scrollHeight;\r\n    }\r\n  });\r\n  \r\n  // Fonction pour mettre à jour l'affichage des logs\r\n  function updateLogDisplay() {\r\n    const logs = getLogHistory();\r\n    logViewerElement.innerHTML = '';\r\n    \r\n    // Créer un conteneur pour les logs sélectionnables\r\n    const logsText = document.createElement('pre');\r\n    logsText.style.margin = '0';\r\n    logsText.style.whiteSpace = 'pre-wrap';\r\n    logsText.style.userSelect = 'text';\r\n    \r\n    // Filtrer et afficher les logs\r\n    logs\r\n      .filter(entry => activeFilters.has(entry.level))\r\n      .forEach((entry) => {\r\n        const logLine = document.createElement('div');\r\n        logLine.style.borderBottom = '1px solid rgba(255, 255, 255, 0.2)';\r\n        logLine.style.padding = '3px 0';\r\n        logLine.style.color = LOG_COLORS[entry.level];\r\n        \r\n        const time = entry.timestamp.split('T')[1].split('.')[0];\r\n        logLine.textContent = `[${time}][${entry.module}] ${entry.message}`;\r\n        \r\n        // Ajouter des informations supplémentaires si disponibles\r\n        if (entry.data) {\r\n          const dataText = document.createElement('div');\r\n          dataText.style.paddingLeft = '20px';\r\n          dataText.style.fontSize = '11px';\r\n          dataText.style.color = 'rgba(255, 255, 255, 0.7)';\r\n          dataText.textContent = JSON.stringify(entry.data, null, 2);\r\n          logLine.appendChild(dataText);\r\n        }\r\n        \r\n        logsText.appendChild(logLine);\r\n      });\r\n    \r\n    logViewerElement.appendChild(logsText);\r\n    \r\n    // Faire défiler vers le bas\r\n    logViewerElement.scrollTop = logViewerElement.scrollHeight;\r\n  }\r\n  \r\n  // Mettre à jour l'affichage toutes les secondes\r\n  setInterval(updateLogDisplay, 1000);\r\n  \r\n  // Exposer l'API publique\r\n  return {\r\n    show: () => { \r\n      container.style.display = 'block'; \r\n      logViewerElement.scrollTop = logViewerElement.scrollHeight;\r\n    },\r\n    hide: () => { container.style.display = 'none'; },\r\n    toggle: () => {\r\n      const isVisible = container.style.display === 'block';\r\n      container.style.display = isVisible ? 'none' : 'block';\r\n      if (!isVisible) {\r\n        logViewerElement.scrollTop = logViewerElement.scrollHeight;\r\n      }\r\n    },\r\n    clear: () => {\r\n      clearLogHistory();\r\n      updateLogDisplay();\r\n    }\r\n  };\r\n}\r\n","import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { createLogger } from '@/utils/logger';\r\n\r\nconst logger = createLogger('NavigationContext');\r\n\r\n// Définir le type pour un élément d'historique\r\ninterface HistoryEntry {\r\n  path: string;\r\n  state: any;\r\n  timestamp: number;\r\n  title?: string;\r\n}\r\n\r\n// Définir l'interface du contexte de navigation\r\ninterface NavigationContextType {\r\n  history: HistoryEntry[];\r\n  currentIndex: number;\r\n  goBack: () => void;\r\n  goForward: () => void;\r\n  navigateTo: (path: string, state?: any, title?: string) => void;\r\n  canGoBack: boolean;\r\n  canGoForward: boolean;\r\n  getPreviousPath: () => string | null;\r\n}\r\n\r\n// Créer le contexte\r\nconst NavigationContext = createContext<NavigationContextType | undefined>(undefined);\r\n\r\n// Nombre maximum d'entrées d'historique à conserver\r\nconst MAX_HISTORY_LENGTH = 20;\r\n\r\nexport const NavigationProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // État pour l'historique et l'index actuel\r\n  const [history, setHistory] = useState<HistoryEntry[]>([]);\r\n  const [currentIndex, setCurrentIndex] = useState<number>(-1);\r\n  \r\n  // Déterminer si on peut naviguer en avant ou en arrière\r\n  const canGoBack = currentIndex > 0;\r\n  const canGoForward = currentIndex < history.length - 1;\r\n  \r\n  // Initialiser l'historique avec la page actuelle lors du chargement\r\n  useEffect(() => {\r\n    const initialEntry: HistoryEntry = {\r\n      path: location.pathname,\r\n      state: location.state,\r\n      timestamp: Date.now()\r\n    };\r\n    \r\n    setHistory([initialEntry]);\r\n    setCurrentIndex(0);\r\n    \r\n    logger.info('Historique de navigation initialisé', { path: location.pathname });\r\n  }, []);\r\n  \r\n  // Mettre à jour l'historique lorsque la location change\r\n  useEffect(() => {\r\n    // Ignorer les changements lors de l'initialisation\r\n    if (history.length === 0) return;\r\n    \r\n    // Vérifier si nous naviguons via goBack/goForward ou via une nouvelle navigation\r\n    const isHistoryNavigation = history.some(entry => \r\n      entry.path === location.pathname && \r\n      JSON.stringify(entry.state) === JSON.stringify(location.state)\r\n    );\r\n    \r\n    if (!isHistoryNavigation) {\r\n      // Nouvelle navigation, ajouter à l'historique\r\n      const newEntry: HistoryEntry = {\r\n        path: location.pathname,\r\n        state: location.state,\r\n        timestamp: Date.now()\r\n      };\r\n      \r\n      // Supprimer les entrées après l'index actuel (comme un navigateur)\r\n      const newHistory = [...history.slice(0, currentIndex + 1), newEntry];\r\n      \r\n      // Limiter la taille de l'historique\r\n      const trimmedHistory = newHistory.length > MAX_HISTORY_LENGTH \r\n        ? newHistory.slice(newHistory.length - MAX_HISTORY_LENGTH) \r\n        : newHistory;\r\n      \r\n      setHistory(trimmedHistory);\r\n      setCurrentIndex(trimmedHistory.length - 1);\r\n      \r\n      logger.info('Nouvelle entrée ajoutée à l\\'historique', { \r\n        path: location.pathname, \r\n        historyLength: trimmedHistory.length \r\n      });\r\n    }\r\n  }, [location, history, currentIndex]);\r\n  \r\n  // Fonction pour naviguer en arrière\r\n  const goBack = () => {\r\n    if (canGoBack) {\r\n      const prevEntry = history[currentIndex - 1];\r\n      navigate(prevEntry.path, { state: prevEntry.state });\r\n      setCurrentIndex(currentIndex - 1);\r\n      \r\n      logger.info('Navigation arrière', { to: prevEntry.path });\r\n    } else {\r\n      logger.warn('Tentative de navigation arrière impossible');\r\n    }\r\n  };\r\n  \r\n  // Fonction pour naviguer en avant\r\n  const goForward = () => {\r\n    if (canGoForward) {\r\n      const nextEntry = history[currentIndex + 1];\r\n      navigate(nextEntry.path, { state: nextEntry.state });\r\n      setCurrentIndex(currentIndex + 1);\r\n      \r\n      logger.info('Navigation avant', { to: nextEntry.path });\r\n    } else {\r\n      logger.warn('Tentative de navigation avant impossible');\r\n    }\r\n  };\r\n  \r\n  // Fonction pour naviguer vers une nouvelle page\r\n  const navigateTo = (path: string, state?: any, title?: string) => {\r\n    navigate(path, { state });\r\n    \r\n    // L'historique sera mis à jour via l'effet useEffect qui surveille location\r\n    logger.info('Navigation vers', { path, hasState: !!state });\r\n  };\r\n  \r\n  // Fonction pour obtenir le chemin précédent\r\n  const getPreviousPath = (): string | null => {\r\n    if (currentIndex > 0) {\r\n      return history[currentIndex - 1].path;\r\n    }\r\n    return null;\r\n  };\r\n  \r\n  // Valeur du contexte\r\n  const contextValue: NavigationContextType = {\r\n    history,\r\n    currentIndex,\r\n    goBack,\r\n    goForward,\r\n    navigateTo,\r\n    canGoBack,\r\n    canGoForward,\r\n    getPreviousPath\r\n  };\r\n  \r\n  return (\r\n    <NavigationContext.Provider value={contextValue}>\r\n      {children}\r\n    </NavigationContext.Provider>\r\n  );\r\n};\r\n\r\n// Hook personnalisé pour utiliser le contexte de navigation\r\nexport const useNavigation = () => {\r\n  const context = useContext(NavigationContext);\r\n  \r\n  if (context === undefined) {\r\n    throw new Error('useNavigation doit être utilisé à l\\'intérieur d\\'un NavigationProvider');\r\n  }\r\n  \r\n  return context;\r\n};\r\n","import React from 'react';\r\n\r\ninterface LoadingIndicatorProps {\r\n  size?: 'small' | 'medium' | 'large';\r\n  color?: string;\r\n  fullScreen?: boolean;\r\n  text?: string;\r\n}\r\n\r\nexport const LoadingIndicator: React.FC<LoadingIndicatorProps> = ({\r\n  size = 'medium',\r\n  color = '#4a5d94',\r\n  fullScreen = false,\r\n  text = 'Chargement...'\r\n}) => {\r\n  // Déterminer la taille du spinner\r\n  const sizeMap = {\r\n    small: 'w-6 h-6',\r\n    medium: 'w-10 h-10',\r\n    large: 'w-16 h-16'\r\n  };\r\n\r\n  const spinnerSize = sizeMap[size];\r\n  \r\n  // Conteneur conditionnel selon que l'indicateur est plein écran ou non\r\n  const Container = fullScreen \r\n    ? ({ children }: { children: React.ReactNode }) => (\r\n        <div className=\"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50\">\r\n          {children}\r\n        </div>\r\n      )\r\n    : ({ children }: { children: React.ReactNode }) => (\r\n        <div className=\"flex flex-col items-center justify-center py-4\">\r\n          {children}\r\n        </div>\r\n      );\r\n\r\n  return (\r\n    <Container>\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className={`${spinnerSize} animate-spin`}>\r\n          <svg\r\n            className=\"w-full h-full\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <circle\r\n              className=\"opacity-25\"\r\n              cx=\"12\"\r\n              cy=\"12\"\r\n              r=\"10\"\r\n              stroke={color}\r\n              strokeWidth=\"4\"\r\n            />\r\n            <path\r\n              className=\"opacity-75\"\r\n              fill={color}\r\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        {text && <p className=\"mt-2 text-sm font-medium\" style={{ color }}>{text}</p>}\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n","import React, { createContext, useContext, useState, useCallback } from 'react';\r\nimport { LoadingIndicator } from '@/components/LoadingIndicator';\r\n\r\ninterface LoadingContextType {\r\n  isLoading: boolean;\r\n  startLoading: (text?: string) => void;\r\n  stopLoading: () => void;\r\n}\r\n\r\nconst LoadingContext = createContext<LoadingContextType>({\r\n  isLoading: false,\r\n  startLoading: () => {},\r\n  stopLoading: () => {}\r\n});\r\n\r\nexport const useLoading = () => useContext(LoadingContext);\r\n\r\nexport const LoadingProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [loadingText, setLoadingText] = useState('Chargement...');\r\n  \r\n  // Démarrer le chargement avec un texte optionnel\r\n  const startLoading = useCallback((text?: string) => {\r\n    if (text) setLoadingText(text);\r\n    setIsLoading(true);\r\n  }, []);\r\n  \r\n  // Arrêter le chargement\r\n  const stopLoading = useCallback(() => {\r\n    setIsLoading(false);\r\n    // Réinitialiser le texte par défaut après un court délai\r\n    setTimeout(() => {\r\n      setLoadingText('Chargement...');\r\n    }, 300);\r\n  }, []);\r\n  \r\n  return (\r\n    <LoadingContext.Provider value={{ isLoading, startLoading, stopLoading }}>\r\n      {children}\r\n      {isLoading && <LoadingIndicator fullScreen text={loadingText} />}\r\n    </LoadingContext.Provider>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\n// Define main routes in the same order as the navigation bar\r\nconst mainRoutes = [\r\n  '/map',       // Carte\r\n  '/program',   // Programme\r\n  '/saved',     // Enregistrés\r\n  '/about',     // À propos\r\n  '/donate',    // Dons\r\n];\r\n\r\n// Define different animation variants for transitions\r\nconst transitionVariants = {\r\n  fade: {\r\n    initial: { opacity: 0 },\r\n    animate: { opacity: 1 },\r\n    exit: { opacity: 0 },\r\n    transition: { duration: 0.3 }\r\n  },\r\n  slide: {\r\n    initial: { x: '100%', opacity: 0 },\r\n    animate: { x: 0, opacity: 1 },\r\n    exit: { x: '-100%', opacity: 0 },\r\n    transition: { type: 'spring', stiffness: 300, damping: 30 }\r\n  },\r\n  scale: {\r\n    initial: { scale: 0.8, opacity: 0 },\r\n    animate: { scale: 1, opacity: 1 },\r\n    exit: { scale: 0.8, opacity: 0 },\r\n    transition: { type: 'spring', stiffness: 300, damping: 30 }\r\n  },\r\n  flip: {\r\n    initial: { rotateY: 90, opacity: 0 },\r\n    animate: { rotateY: 0, opacity: 1 },\r\n    exit: { rotateY: -90, opacity: 0 },\r\n    transition: { duration: 0.4 }\r\n  }\r\n};\r\n\r\n// Map routes to transition types\r\nconst routeTransitionMap: Record<string, 'fade' | 'slide' | 'scale' | 'flip'> = {\r\n  '/map': 'scale',\r\n  '/program': 'slide',\r\n  '/saved-events': 'slide',\r\n  '/donate': 'fade',\r\n  '/about': 'fade',\r\n  '/admin': 'fade',\r\n  '/location-history': 'flip'\r\n};\r\n\r\n// Define swipeable routes\r\nconst swipeableRoutes = [\r\n  '/',\r\n  '/map',\r\n  '/program',\r\n  '/saved',\r\n  '/about',\r\n  '/donate'\r\n];\r\n\r\ninterface AnimatedPageTransitionProps {\r\n  children: React.ReactNode;\r\n  transitionType?: 'fade' | 'slide' | 'scale' | 'flip';\r\n  enableSwipe?: boolean;\r\n}\r\n\r\nexport function AnimatedPageTransition({ \r\n  children, \r\n  transitionType,\r\n  enableSwipe = false\r\n}: AnimatedPageTransitionProps) {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [startX, setStartX] = useState<number | null>(null);\r\n  const [currentRouteIndex, setCurrentRouteIndex] = useState<number>(0);\r\n  const [swipeDirection, setSwipeDirection] = useState<'left' | 'right' | null>(null);\r\n  \r\n  // Determine the current route index for swipe navigation\r\n  useEffect(() => {\r\n    // Handle redirect from root to /map\r\n    const path = location.pathname === '/' ? '/map' : location.pathname;\r\n    const index = mainRoutes.indexOf(path);\r\n    if (index !== -1) {\r\n      setCurrentRouteIndex(index);\r\n    }\r\n  }, [location.pathname]);\r\n  \r\n  // Determine the transition type to use\r\n  const getTransitionType = () => {\r\n    if (transitionType) return transitionType;\r\n    return routeTransitionMap[location.pathname] || 'fade';\r\n  };\r\n  \r\n  const currentTransition = getTransitionType();\r\n  const variant = transitionVariants[currentTransition];\r\n  \r\n  // Touch event handlers for swipe navigation\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    if (!enableSwipe) return;\r\n    setStartX(e.touches[0].clientX);\r\n  };\r\n\r\n  const handleTouchEnd = (e: React.TouchEvent) => {\r\n    if (!enableSwipe || startX === null) return;\r\n\r\n    const endX = e.changedTouches[0].clientX;\r\n    const diffX = endX - startX;\r\n    const threshold = window.innerWidth * 0.2; // 20% of screen width\r\n\r\n    // Determine swipe direction\r\n    if (Math.abs(diffX) > threshold) {\r\n      if (diffX > 0 && currentRouteIndex > 0) {\r\n        // Swipe right (previous page)\r\n        setSwipeDirection('right');\r\n        navigate(mainRoutes[currentRouteIndex - 1]);\r\n      } else if (diffX < 0 && currentRouteIndex < mainRoutes.length - 1) {\r\n        // Swipe left (next page)\r\n        setSwipeDirection('left');\r\n        navigate(mainRoutes[currentRouteIndex + 1]);\r\n      }\r\n    }\r\n\r\n    setStartX(null);\r\n  };\r\n  \r\n  // Swipe animation variants\r\n  const swipeVariants = {\r\n    initial: (direction: 'left' | 'right' | null) => ({\r\n      x: direction === 'right' ? '-100%' : direction === 'left' ? '100%' : 0,\r\n      opacity: 0,\r\n    }),\r\n    animate: {\r\n      x: 0,\r\n      opacity: 1,\r\n      transition: {\r\n        x: { type: 'spring', stiffness: 300, damping: 30 },\r\n        opacity: { duration: 0.2 },\r\n      },\r\n    },\r\n    exit: (direction: 'left' | 'right' | null) => ({\r\n      x: direction === 'left' ? '-100%' : direction === 'right' ? '100%' : 0,\r\n      opacity: 0,\r\n      transition: {\r\n        x: { type: 'spring', stiffness: 300, damping: 30 },\r\n        opacity: { duration: 0.2 },\r\n      },\r\n    }),\r\n  };\r\n  \r\n  // Use swipe variants if swipe is enabled, otherwise use regular transition variants\r\n  const activeVariants = enableSwipe ? swipeVariants : {\r\n    initial: variant.initial,\r\n    animate: variant.animate,\r\n    exit: variant.exit,\r\n    transition: variant.transition\r\n  };\r\n  \r\n  return (\r\n    <motion.div\r\n      className=\"animated-page-transition\"\r\n      onTouchStart={handleTouchStart}\r\n      onTouchEnd={handleTouchEnd}\r\n      initial=\"initial\"\r\n      animate=\"animate\"\r\n      exit=\"exit\"\r\n      variants={activeVariants}\r\n      custom={swipeDirection}\r\n      key={location.pathname}\r\n      style={{ \r\n        width: '100%', \r\n        height: '100%',\r\n        overflowX: 'hidden',\r\n        position: 'relative',\r\n        touchAction: 'pan-y' // Allow vertical scrolling while capturing horizontal swipes\r\n      }}\r\n    >\r\n      {children}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n// Helper function to check if a route is swipeable\r\nexport function isSwipeableRoute(pathname: string): boolean {\r\n  return swipeableRoutes.includes(pathname);\r\n}\r\n","/**\r\n * Service Worker Registration Utility\r\n * \r\n * Ce fichier est temporairement simplifié pour éviter les erreurs dans la console.\r\n * L'enregistrement du service worker est désactivé jusqu'à ce que les problèmes soient résolus.\r\n */\r\n\r\nimport { createLogger } from './logger';\r\n\r\nconst logger = createLogger('ServiceWorker');\r\n\r\n/**\r\n * Register the service worker\r\n * \r\n * Temporairement désactivé pour éviter les erreurs dans la console.\r\n */\r\nexport const registerServiceWorker = () => {\r\n  // L'enregistrement du service worker est temporairement désactivé\r\n  logger.info('Service worker registration is temporarily disabled');\r\n  return;\r\n};\r\n\r\n/**\r\n * Unregister the service worker\r\n * \r\n * Fonction simplifiée pour éviter les erreurs.\r\n */\r\nexport const unregisterServiceWorker = () => {\r\n  // Désactivé temporairement\r\n  return;\r\n};\r\n\r\n/**\r\n * Check if the user is online\r\n */\r\nexport const isOnline = (): boolean => {\r\n  return typeof navigator !== 'undefined' && typeof navigator.onLine === 'boolean'\r\n    ? navigator.onLine\r\n    : true;\r\n};\r\n\r\n/**\r\n * Add an online status listener\r\n * @returns A cleanup function to remove the listeners\r\n */\r\nexport const addOnlineStatusListener = (callback: (online: boolean) => void): (() => void) | undefined => {\r\n  if (typeof window === 'undefined') return undefined;\r\n\r\n  const handleOnline = () => callback(true);\r\n  const handleOffline = () => callback(false);\r\n\r\n  window.addEventListener('online', handleOnline);\r\n  window.addEventListener('offline', handleOffline);\r\n\r\n  // Appeler le callback immédiatement avec l'état actuel\r\n  callback(isOnline());\r\n\r\n  return () => {\r\n    window.removeEventListener('online', handleOnline);\r\n    window.removeEventListener('offline', handleOffline);\r\n  };\r\n};\r\n\r\n/**\r\n * Précharge les événements sauvegardés dans le service worker\r\n * @param events Les événements à précharger\r\n * @param locations Les lieux associés aux événements\r\n */\r\nexport const cacheEventsInServiceWorker = (events: any[], locations: any[]): void => {\r\n  // Désactivé temporairement\r\n  return;\r\n};\r\n\r\n/**\r\n * Précharge l'image de la carte dans le service worker\r\n */\r\nexport const cacheMapImageInServiceWorker = (): void => {\r\n  // Désactivé temporairement\r\n  return;\r\n};\r\n","/**\r\n * Gestionnaire de cache pour stocker les données fréquemment utilisées\r\n * Cela permet d'améliorer les performances et de réduire les recherches répétitives\r\n */\r\n\r\ntype CacheItem<T> = {\r\n  data: T;\r\n  timestamp: number;\r\n  expiry: number | null; // null = pas d'expiration\r\n};\r\n\r\nclass CacheManager {\r\n  private cache: Map<string, CacheItem<any>> = new Map();\r\n  private defaultExpiry: number = 30 * 60 * 1000; // 30 minutes par défaut\r\n\r\n  /**\r\n   * Définit une valeur dans le cache\r\n   * @param key - Clé unique pour identifier les données\r\n   * @param data - Données à mettre en cache\r\n   * @param expiry - Durée de validité en millisecondes (null = pas d'expiration)\r\n   */\r\n  set<T>(key: string, data: T, expiry: number | null = this.defaultExpiry): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiry\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Récupère des données du cache\r\n   * @param key - Clé des données à récupérer\r\n   * @returns Les données si elles existent et sont valides, sinon null\r\n   */\r\n  get<T>(key: string): T | null {\r\n    const item = this.cache.get(key);\r\n    \r\n    if (!item) return null;\r\n    \r\n    // Vérifier si les données ont expiré\r\n    if (item.expiry !== null) {\r\n      const now = Date.now();\r\n      if (now - item.timestamp > item.expiry) {\r\n        this.cache.delete(key);\r\n        return null;\r\n      }\r\n    }\r\n    \r\n    return item.data as T;\r\n  }\r\n\r\n  /**\r\n   * Récupère des données du cache ou les génère si elles n'existent pas\r\n   * @param key - Clé des données\r\n   * @param generator - Fonction qui génère les données si elles ne sont pas en cache\r\n   * @param expiry - Durée de validité en millisecondes\r\n   * @returns Les données du cache ou nouvellement générées\r\n   */\r\n  async getOrSet<T>(\r\n    key: string, \r\n    generator: () => Promise<T>, \r\n    expiry: number | null = this.defaultExpiry\r\n  ): Promise<T> {\r\n    const cachedData = this.get<T>(key);\r\n    \r\n    if (cachedData !== null) {\r\n      return cachedData;\r\n    }\r\n    \r\n    const freshData = await generator();\r\n    this.set(key, freshData, expiry);\r\n    return freshData;\r\n  }\r\n\r\n  /**\r\n   * Supprime des données du cache\r\n   * @param key - Clé des données à supprimer\r\n   */\r\n  remove(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Vérifie si une clé existe dans le cache et est valide\r\n   * @param key - Clé à vérifier\r\n   * @returns true si la clé existe et est valide, sinon false\r\n   */\r\n  has(key: string): boolean {\r\n    return this.get(key) !== null;\r\n  }\r\n\r\n  /**\r\n   * Vide le cache entièrement\r\n   */\r\n  clear(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Nettoie les entrées expirées du cache\r\n   */\r\n  cleanup(): void {\r\n    const now = Date.now();\r\n    \r\n    for (const [key, item] of this.cache.entries()) {\r\n      if (item.expiry !== null && now - item.timestamp > item.expiry) {\r\n        this.cache.delete(key);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Exporter une instance unique du gestionnaire de cache\r\nexport const cacheManager = new CacheManager();\r\n","// Artists data for exhibitions and concerts\nexport type Artist = {\n  id: string;\n  name: string;\n  type: \"exposition\" | \"concert\";\n  title: string;\n  instagram?: string;\n  image?: string;\n  // Nouveaux champs pour les concerts\n  email?: string;\n  photos?: string[];\n  videos?: string[]; // Tableau de liens vers des vidéos (YouTube, Vimeo, etc.)\n  presentation?: string;\n  link?: string;\n  website?: string;\n  facebook?: string;\n  phone?: string;\n  director?: string;\n  members?: string; // Liste des membres pour les groupes/ensembles\n  youtube?: string;\n  tiktok?: string;\n};\n\nexport const artists: Artist[] = [\n  // Artistes d'exposition\n  {\n    id: \"bruno-barbier\",\n    name: \"Bruno Barbier\",\n    type: \"exposition\",\n    title: \"Peintures et dessins\",\n    presentation: \"Artiste peintre et dessinateur installé à Nantes, explorant les thèmes du souvenir et de la nostalgie, Bruno Barbier évoque des fragments de mémoire, entre émotions passées et traces du temps.\",\n    instagram: \"https://www.instagram.com/brunobarbierpainter\"\n  },\n  {\n    id: \"alain-gremillet\",\n    name: \"Alain Gremillet\",\n    type: \"exposition\",\n    title: \"Peinture abstraite\",\n    presentation: \"Artiste peintre abstrait, associant couleurs, mouvements et lumière pour susciter l'émotion. L'artiste peintre abstrait Alain Gremillet explore librement la matière avec acrylique, spatules et objets du quotidien, donnant naissance à des œuvres uniques et lumineuses.\",\n    instagram: \"https://www.instagram.com/alaingremillet\"\n  },\n  {\n    id: \"jerome-gourdon\",\n    name: \"Jérôme Gourdon\",\n    type: \"exposition\",\n    title: \"Photo-émographie\",\n    presentation: \"Photo-émographe, mêlant photographie, intervention in-situ et peinture acrylique. Jérôme Gourdon se définit comme un photo-émographe. Son travail explore les frontières entre image captée et image transformée, pour créer des œuvres à la croisée des médiums.\",\n    instagram: \"https://www.instagram.com/jerome_gourdon\"\n  },\n  {\n    id: \"nadege-hameau\",\n    name: \"Nadège Hameau\",\n    type: \"exposition\",\n    title: \"Marqueur acrylique\",\n    presentation: \"Artiste autodidacte. Des mondes imaginaires prennent forme au marqueur acrylique, dans un style mêlant pointillisme, précision et rêverie. Autodidacte, Nadhame.artiste, alias Nadège Hameau, cultive une démarche empreinte de patience et de poésie visuelle.\",\n    instagram: \"https://www.instagram.com/nadhame.artiste\"\n  },\n  {\n    id: \"pauline-crusson\",\n    name: \"Pauline Crusson\",\n    type: \"exposition\",\n    title: \"PaoaNaoned\",\n    presentation: \"Illustratrice nantaise. Revisitant les cartes postales du vieux Nantes avec un style unique et détaillé, Pauline Crusson sous le nom de PaoaNaoned, redonne vie à ces images anciennes. Elle capture ainsi l'essence de la ville à travers ses dessins.\",\n    instagram: \"https://www.instagram.com/paoanaoned\"\n  },\n  {\n    id: \"marie-husson\",\n    name: \"Marie Husson\",\n    type: \"exposition\",\n    title: \"Dessins et peintures\",\n    presentation: \"Artiste peintre et dessinatrice. Explorant des instants d'intimité à la lisière du visible, Marie Husson archive ses découvertes sous forme de dessins et peintures mêlant aquarelle, encre, broderie ou huile. Sa pratique, expérimentale et sensible, donne naissance à des images profondes, fragiles et puissamment poétiques.\",\n    instagram: \"https://www.instagram.com/marie.husson.art\"\n  },\n  {\n    id: \"clotilde-debar-zablocki\",\n    name: \"Clotilde Debar Zablocki\",\n    type: \"exposition\",\n    title: \"apolline.design\",\n    presentation: \"Artiste et décoratrice. Inspirée par l'histoire et le patrimoine local, notamment celui d'Anne de Bretagne, Clotilde Debar-Zablocki crée un univers poétique et sensible. Avec David, elle forme le duo apolline.design, spécialisé en fresques décoratives et patines.\",\n    instagram: \"https://www.instagram.com/apolline.design\"\n  },\n  {\n    id: \"malou-tual\",\n    name: \"Malou Tual\",\n    type: \"exposition\",\n    title: \"Peinture et sculpture sur bois\",\n    presentation: \"Artiste peintre et sculptrice sur bois. Malou Tual crée des œuvres uniques autour de masques ethniques et de mandalas émotionnels. Ses sculptures, façonnées à la main, allient sensibilité et tradition dans une démarche artisanale profonde.\",\n    instagram: \"https://www.instagram.com/l_ame_agit_dans_les_mains\"\n  },\n  {\n    id: \"gael-caudoux\",\n    name: \"Gaël Caudoux\",\n    type: \"exposition\",\n    title: \"Cartographies imaginaires\",\n    presentation: \"Artiste cartographe. Vastes cartographies de territoires imaginaires, riches en détails et en narration, Gaël Caudoux les réalise à la main depuis l'enfance. Ses grands formats, en constante évolution, invitent à la découverte d'un univers unique et fascinant.\",\n    instagram: \"https://www.instagram.com/gaelcaudoux.imaginarium\"\n  },\n  {\n    id: \"atelier-norg\",\n    name: \"Atelier Norg\",\n    type: \"exposition\",\n    title: \"Peinture, sculpture et dessin\",\n    presentation: \"Plasticien nantais. Norg est un plasticien basé à Nantes dont le travail navigue entre peinture, sculpture et dessin, avec une énergie brute et expressive. Son univers visuel est direct et instinctif.\",\n    instagram: \"https://www.instagram.com/ateliernorg\"\n  },\n  {\n    id: \"jerome-luneau\",\n    name: \"Jérôme Luneau\",\n    type: \"exposition\",\n    title: \"Chun Yong Ho\",\n    presentation: \"Chun Yong Ho, artiste peintre originaire de Corée du Sud, explore l'abstraction à travers des jeux de couleurs et de lignes évoquant des paysages mentaux. Son travail invite à un voyage intérieur, entre sensations et émotions.\",\n    instagram: \"https://www.instagram.com/yonghochun\"\n  },\n  {\n    id: \"andry-shango-rajoelina\",\n    name: \"Andry Shango Rajoelina\",\n    type: \"exposition\",\n    title: \"Art multidisciplinaire\",\n    presentation: \"Artiste multidisciplinaire mêlant peinture, design et art textile, Andry \\\"Shango\\\" Rajoelina explore les identités africaines à travers une esthétique vibrante et contemporaine. Son univers visuel, riche en symboles et en couleurs, reflète un profond engagement culturel et narratif.\",\n    instagram: \"https://www.instagram.com/andryshango\",\n    email: \"rajoelina.a@gmail.com\"\n  },\n  {\n    id: \"expo9\", // This was 'Jocelyn Prouff (Joss Proof)' in events.ts but ID was 'expo9' in artistsData\n    name: \"Jocelyn Prouff (Joss Proof)\",\n    type: \"exposition\",\n    title: \"Carnets Nantais\",\n    presentation: \"Croquant in situ des lieux urbains où la nature reprend ses droits, avec une attention particulière à la lumière et aux détails, Joss Proof invite à un autre regard sur la ville à travers ses carnets sensibles. Il partage cet univers dans son livre \\\"Carnets Nantais\\\".\",\n    instagram: \"https://www.instagram.com/joss_proof\"\n  },\n  {\n    id: \"emmanuelle-boisson\",\n    name: \"Emmanuelle Boisson (Manoukidessine)\",\n    type: \"exposition\",\n    title: \"Illustrations et Carnets\",\n    presentation: \"Portée par le désir de raconter des histoires en images, Manoukidessine explore avec tendresse les émotions, le quotidien et l'imaginaire. Elle partage son univers à travers dessins, carnets et albums jeunesse.\",\n    instagram: \"https://www.instagram.com/manoukidessine\"\n  },\n  {\n    id: \"catherine-clement\",\n    name: \"Catherine Clément (Kat Klementi)\",\n    type: \"exposition\",\n    title: \"Les Petits Formats\",\n    presentation: \"Depuis 2018, je développe une série de petits formats réalisés à partir de cadres anciens chinés. Ces œuvres sont à la croisée d'une recherche esthétique et d'une narration silencieuse. Le cadre, loin d'être un simple ornement : « Le choix des cadres est essentiel. Ils doivent dialoguer avec l'œuvre, la compléter, la renforcer. Ce ne sont pas de simples éléments décoratifs : ils soulignent le sujet et rendent chaque tableau unique. » Les petits formats représentent des personnages, des objets isolés, des intérieurs... toujours cadrés au plus proche. Le regard oscille entre micro-natures mortes, mini-portraits et scènes intimistes. « Jouer avec les échelles oblige le spectateur à regarder de plus près, à observer avec attention. » Isoler un objet de son contexte lui donne une nouvelle présence, une intensité singulière « Ce n'est plus un simple objet du quotidien, mais un élément qui appelle à l'introspection. J'insiste sur l'individualité dans chacune de mes compositions. » Les rayures sont un motif récurrent dans mes peintures, les rayures instaurent un rythme visuel qui attire l'œil et structure l'espace. « Les rayures apportent une harmonie, un équilibre. Elles unifient l'ensemble des peintures et permettent aux sujets de s'inscrire dans un décor cohérent. »\",\n    instagram: \"https://www.instagram.com/katklementi\"\n  },\n  {\n    id: \"mostapha-rouine\",\n    name: \"Mostapha Rouine\",\n    type: \"exposition\",\n    title: \"Entre Bretagne et Maroc\",\n    presentation: \"Puisant son inspiration entre la Bretagne et le Maroc, entre pêche à pied et scènes de vie quotidienne, Mostapha Rouine crée avec aquarelles, brou de noix et huiles. L'artiste peintre autodidacte fait vibrer la lumière, l'ambiance et les couleurs de ces deux mondes.\",\n    instagram: \"https://www.instagram.com/mostapharouine\"\n  },\n  {\n    id: \"elizaveta-vodyanova\",\n    name: \"Elizaveta Vodyanova\",\n    type: \"exposition\",\n    title: \"Peinture\",\n    presentation: \"Artiste peintre contemporaine basée à Nantes, Elizaveta Vodyanova explore la peinture figurative à l'acrylique. Ses œuvres, intimes et poétiques, capturent des instants de vie — intérieurs, visages, paysages marins — avec une palette subtile et vibrante.\",\n    email: \"vojnovich@yandex.com\",\n    instagram: \"https://www.instagram.com/elvodyanova\"\n\n  },\n  {\n    id: \"fabienne-choyau\",\n    name: \"Fabienne Choyau\",\n    type: \"exposition\",\n    title: \"Peinture contemporaine\",\n    presentation: \"Guidée par sa passion pour la couleur, Fabienne Choyau puise son inspiration dans la nature et les instants du quotidien. Son regard se laisse porter par ce qui l'entoure, transformant émotions et impressions en toiles vibrantes\",\n    email: \"fabienne.choyau@laposte.net\",\n    instagram: \"https://www.instagram.com/fabiennechoyau/\"\n  },\n\n\n\n  // Concerts (from artistsData.ts)\n  {\n    id: \"violoncelles\",\n    name: \"Ensemble de violoncelles du conservatoire\",\n    type: \"concert\",\n    title: \"Ensemble de violoncelles du conservatoire\",\n    presentation: \"\"\n  },\n  {\n    id: \"clarine\",\n    name: \"Clarine Julienne\",\n    type: \"concert\",\n    title: \"Concert de Clarine Julienne\",\n    presentation: \"Après avoir sillonné l'Amérique Latine avec sa guitare, Clarine revient avec de nombreuses chansons de l'Argentine au Mexique, en passant par les Andes péruviennes. Elle propose un set doux, rythmé et coloré, mêlant musiques traditionnelles et compositions personnelles.\",\n    email: \"clarine.julienne@gmail.com\",\n    instagram: \"https://www.instagram.com/clarinemusic\",\n    youtube: \"https://www.youtube.com/clarinemusic\",\n    tiktok: \"https://www.tiktok.com/@clarine.musica\",\n    photos: [\"/concerts/Clarine/Clarine.JPG\"],\n    videos: [\n      \"https://www.youtube.com/watch?v=-RMQS5dNWfE&authuser=0\", \n      \"https://www.youtube.com/watch?v=5mpeAOWKl-M&authuser=0\"]\n  },\n  {\n    id: \"nota-bene\",\n    name: \"Nota Bene\",\n    type: \"concert\",\n    title: \"Choeur de femmes Nota Bene\",\n    presentation: \"\",\n    email: \"contact@notabene.fr\",\n    instagram: \"\"\n  },\n  {\n    id: \"philippe-peaud\",\n    name: \"Philippe Peaud\",\n    type: \"concert\",\n    title: \"Philippe Péaud - Conteur\",\n    presentation: \"\",\n    email: \"philippe.peaud@club-internet.fr\",\n    instagram: \"\"\n  },\n  {\n    id: \"scarabees\",\n    name: \"Les Scarabées Rôdent\",\n    type: \"concert\",\n    title: \"Les Scarabées Rôdent\",\n    presentation: \"\",\n    email: \"contact@scarabees.fr\",\n    instagram: \"\"\n  },\n  {\n    id: \"aperto\",\n    name: \"Aperto !\",\n    type: \"concert\",\n    title: \"Aperto !\",\n    presentation: \"Allegro aperto est le titre du premier mouvement d'un concerto pour flûte de Mozart.\\n\\nLe mot Aperto signifie « ouvert » en italien.\\n\\nL'ensemble est ouvert à tou.te.s les flûtistes : élèves du conservatoire, anciens élèves, amateurs et musiciens professionnels.\\n\\nIl est également ouvert à toutes les musiques :\\n\\n- musique classique : de Bach à Bartok\\n- musiques du monde : Irlande (reels et jigs), Europe centrale (klezmer), Espagne (sardanes), Brésil (choros), Grèce (kalamatianos), etc.\\n- chansons populaires : Beatles, Simon & Garfunkel, comédies musicales, films Disney, etc.\",\n    email: \"contact@aperto.fr\",\n    instagram: \"\",\n    link: \"https://youtu.be/aKxyrWCofOI\",\n    photos: [\n      \"/concerts/Aperto/Aperto1.jpg\",\n      \"/concerts/Aperto/Aperto2.jpg\"\n    ]\n  },\n  {\n    id: \"quatuor-liger\",\n    name: \"Quatuor Liger\",\n    type: \"concert\",\n    title: \"Quatuor Liger\",\n    presentation: \"Le Quatuor Liger est un quatuor à cordes formé en 1995 à Nantes, et qui a évolué ces dernières années avec de nouveaux membres.\"\n    +\"Composé de quatre musiciens passionnés (Patrick Févai, Solenne Guilbert, Gwenola Morin, Cédric Forré), le quatuor propose un répertoire varié\"\n    +\" allant de la musique classique aux arrangements contemporains. Leur interprétation sensible et dynamique offre une expérience musicale unique.\"\n    +\"\\n\\n---\\n\\n## PROGRAMME\\n\\n### Wolfgang Mozart (1756-1791)\\n**Quatuor n°17 \\\"La chasse\\\" - 25 min**\\n\\nLe quatuor n°17 en si bémol majeur, surnommé \"\n    +\"\\\"La Chasse\\\", fait partie des six quatuors dédiés à Haydn par Mozart. Composé en 1784, il doit son surnom à son premier mouvement, dont le caractère \"\n    +\"rythmé et léger rappelle une scène de chasse. L'œuvre est pleine de vitalité et de charme, témoignant de l'amitié et de l'admiration de Mozart pour Haydn.\"\n    +\"\\n\\n### Franz Schubert (1797-1828)\\n**Quatuor n°10 - 25 min**\\n\\nLe quatuor à cordes n°10 en mi bémol majeur de Schubert, également appelé \\\"Quatuor jeunesse\\\", \"\n    +\"a été écrit en 1813 alors que le compositeur n'avait que 16 ans. Malgré son jeune âge, cette œuvre révèle déjà une grande maîtrise de la forme et une sensibilité \"\n    +\"profonde. Moins dramatique que ses œuvres ultérieures, le quatuor se distingue par sa fraîcheur mélodique et son atmosphère paisible.\"\n    +\"\\n\\n---\\n\\nMozart et Schubert ont été au cœur de l'évolution du quatuor à cordes, garants d'une transmission et créateurs de génie. Ces deux quatuors, de périodes\"\n    +\" et de styles différents, sont des témoignages brillants du génie de leurs compositeurs respectifs, et contiennent à la fois ce classicisme et cette révolution qui\"\n    +\" s'est opérée en 30 ans.\\n\\nLe Quatuor Liger interprète ces compositeurs viennois du tournant des XVIIIe et XIXe siècle sur des instruments historiques (cordes en boyaux, archets classiques).\",\n    members: \"Patrick Févai, Solenne Guilbert, Gwenola Morin, Cédric Forré\",\n    instagram: \"\",\n    email: \"solenne.guilbert@quatuorliger.fr\",\n    link: \"\",\n    photos: [\n      \"/concerts/QuatuorLiger/quatuor-liger-1.jpg\",\n      \"/concerts/QuatuorLiger/quatuor-liger-2.jpg\"\n    ]\n  },\n  {\n    id: \"eva\",\n    name: \"L'Ensemble Vocal EVA\",\n    type: \"concert\",\n    title: \"L'Ensemble Vocal EVA\",\n    presentation: \"L'Ensemble Vocal EVA, dirigé depuis 2023 par Pascale GARCIA, fait le choix d'un répertoire ouvert sur différentes époques, incluant des œuvres profanes ou sacrées, peu connues ou inédites. L'Ensemble Vocal EVA propose des créations de compositeurs emblématiques des XXe et XXIe siècles, qui savent magnifier des textes poétiques ou bibliques, chantés à 3, 4, 5 ou même 6 voix, a cappella ou accompagnés d'instruments.\",\n    website: \"https://www.choeureva.fr\",\n    facebook: \"EVA-choeur de femmes\",\n    phone: \"06 87 08 63 84\",\n    director: \"Pascale Garcia\",\n    email: \"contact@choeureva.fr\",\n    instagram: \"\"\n\n  },\n  {\n    id: \"swing-it\",\n    name: \"Swing it !\",\n    type: \"concert\",\n    title: \"Swing it !\",\n    presentation: \"\",\n    email: \"contact@swingit.fr\",\n    instagram: \"\"\n  },\n  {\n    id: \"variabilis\",\n    name: \"Variabilis\",\n    type: \"concert\",\n    title: \"Variabilis\",\n    presentation: \"VARIABILIS, C'EST 70 MUSICIENS AMATEURS.\\n\\nL'ambition de cet ensemble :\\n\\n\"\n    + \"Vivre la musique dans un esprit d'ouverture et de partage.\\n\\n\"\n    + \"Explorer la diversité du répertoire classique.\\n\\n\"\n    + \"Présenter des concerts dans des formats et des lieux variés.\\n\\n\"\n    + \"Aller au devant de publics parfois éloignés des scènes musicales classiques.\",\n    email: \"contact@variabilis.fr\",\n    instagram: \"https://www.instagram.com/variabilis_ensemble/?igshid=MzRlODBiNWFlZA%3D%3D\",\n    photos: [\"/concerts/Variabilis/Variabilis.jpg\"],\n    facebook: \"https://www.facebook.com/EnsembleVariabilis\",\n    website: \"https://www.variabilis.fr\"\n  },\n  {\n    id: \"Semaphore Omega\",\n    name: \"Semaphore Omega\",\n    type: \"concert\",\n    title: \"Semaphore Omega\",\n    presentation: \"Les lectures poétiques d'Olivier Bardoul résonnent aux vibrations profondes du didgeridoo de Jean-Yves Redor.\",\n    email: \"bardoul.olivier@netcourrier.com\",\n    instagram: \"\"\n  }\n  // Ajouter d'autres artistes au besoin\n];\n\n// Fonctions utilitaires\nexport function getArtistById(id: string): Artist | undefined {\n  return artists.find(artist => artist.id === id);\n}\n\nexport function getAllArtists(): Artist[] {\n  return artists;\n}\n\nexport function getArtistsByType(type: \"exposition\" | \"concert\"): Artist[] {\n  return artists.filter(artist => artist.type === type);\n}\n","// Locations data for the map\r\nexport type Location = {\r\n  id: string;\r\n  name: string;\r\n  x: number;\r\n  y: number;\r\n  description: string;\r\n  history?: string; // Historique complet du lieu\r\n  historyRef?: string; // Référence à l'ID d'un autre lieu pour partager son historique\r\n  image?: string; // URL de l'image du lieu\r\n  audio?: string; // URL du fichier audio pour l'histoire du lieu\r\n  visited?: boolean;\r\n  hasProgram?: boolean; // Indique si le lieu a une programmation d'événements\r\n  gps?: {\r\n    latitude: number;\r\n    longitude: number;\r\n  }; // Coordonnées GPS précises\r\n};\r\n\r\n// Fonction utilitaire pour obtenir le nom d'un lieu à partir de son ID\r\nexport function getLocationNameById(locationId: string): string {\r\n  const location = locations.find(loc => loc.id === locationId);\r\n  return location ? location.name : '';\r\n}\r\n\r\n// Fonction utilitaire pour obtenir les coordonnées GPS d'un lieu à partir de son ID\r\nexport function getLocationGPSById(locationId: string): { latitude: number; longitude: number } | null {\r\n  const location = locations.find(loc => loc.id === locationId);\r\n  return location && location.gps ? location.gps : null;\r\n}\r\n\r\n// Fonction utilitaire pour récupérer tous les lieux\r\nexport function getLocations(): Location[] {\r\n  return locations;\r\n}\r\n\r\n// Données des lieux\r\nexport const locations: Location[] = [\r\n  {\r\n    id: \"maison-jules-verne\",\r\n    name: \"Maison natale de Jules Verne\",\r\n    x: 170,\r\n    y: 50,\r\n    description: \"Maison natale de Jules Verne (1828). Située au 4 Cours Olivier de Clisson (ancien 2 quai Jean-Bart), c'est ici que naquit le célèbre écrivain le 8 février 1828. Il y passa les quatorze premières années de sa vie, dans un immeuble qui dominait le confluent de la Loire et de l'Erdre.\",\r\n    image: \"/images/locations/jules-enfant-cibot.jpg\",\r\n    audio: \"/audio/4-cours-Olivier-de-Clisson.mp3\",\r\n    hasProgram: false,\r\n    history: \"La maison natale de Jules Verne se trouve au cœur de Nantes, sur l'île Feydeau, au 2 quai Jean-Bart, aujourd'hui connu sous le nom de 4 Cours Olivier de Clisson. Il y naquit le 8 février 1828 et y passa les quatorze premières années de sa vie. L'immeuble dominait le confluent de la Loire et de l'Erdre.\\n\\nAlors que Jules était âgé d'une dizaine d'années, la famille fit l'acquisition d'une maison de campagne dans le village de Chantenay (aujourd'hui un quartier de Nantes). Depuis celle-ci, on voyait l'activité du port se déployer jusqu'au cœur de la ville, marquant profondément le jeune garçon.\\n\\nS'il n'a vu la mer pour la première fois qu'à l'âge de douze ans, les îles, les ports et les bateaux étaient depuis longtemps déjà dans sa vie et dans ses rêves.\\n\\n« Il y a cette circonstance que je suis né à Nantes, où mon enfance s'est tout entière écoulée. » Jules Verne, Souvenirs d'enfance et de jeunesse, 1891.\\nDans la famille Verne, on pratiquait volontiers la poésie de circonstance : naissances et mariages étaient l'occasion de célébrer en vers les joies de l'amour et de la famille.\\n\\nÀ l'adolescence, il commença à remplir les deux cahiers de poésies qui l'ont accompagné toute sa vie. Restés inédits à sa mort, ils ne furent publiés qu'en 1989. Poésie lyrique ou satirique, émois amoureux ou rimes de chansonnier, les genres les plus divers s'y côtoient. Plus tard, il fut aussi parolier, fournissant à son ami le compositeur Aristide Hignard des poèmes à mettre en musique. Ces chansons, réunies en recueil, parurent en 1857, sous le titre de Rimes et mélodies.\\n\\n« Dès l'âge de douze ou quatorze ans, j'avais toujours un crayon sur moi et du temps où j'allais à l'école, je n'arrêtais pas d'écrire, travaillant surtout la poésie. » Jules Verne.\\n\\nAu début des années 1850, Jules Verne monta à Paris pour y terminer ses études de droit.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.213307,\r\n      longitude: -1.554879\r\n    }\r\n  },\r\n  {\r\n    id: \"quai-turenne-8\",\r\n    name: \"8 quai Turenne\",\r\n    x: 300, \r\n    y: 108,\r\n    description: \"Bâtiment historique du XVIIIe siècle situé au 8 allée Turenne/9 rue Kervégan. Construit en 1753 pour Jacques Berouette, négociant et actionnaire d'origine du lotissement de l'Île Feydeau. L'immeuble présente des façades richement décorées avec des mascarons à thèmes marins. Les façades et la cage d'escalier sont inscrites aux monuments historiques depuis 1984.\",\r\n    image: \"/8 quai Turenne.jpg\",\r\n    audio: \"/audio/8-quai-turenne.mp3\",\r\n    history: \"Habité par un des actionnaires d'origine\\n\\nJacques Berouette, négociant et avocat du roi est l'un des actionnaires d'origine de la compagnie créée pour construire le lotissement. En 1753, il habite sa nouvelle maison de l'Île Feydeau.\\n\\nLe bâti\\n\\nLes deux façades de l'immeuble ont beaucoup de points communs avec le 15, allée Duguay-Trouin/28, rue Kervégan. Celle côté quai est plus richement décorée. Les mascarons traitent de thèmes marins. Contrairement à beaucoup d'immeubles pour lesquels l'escalier est situé dans une tourelle, il a été choisi ici de l'intégrer au bâti. \\nIl donne sur chacun des couloirs d'entrée. Le mur-noyau en est ajouré pour donner plus de clarté. Le balcon du 1er étage est monté sur des consoles, celui du 2ème en encorbellement sur une Trompe.\\n\\nLes matériaux\\n\\nLa partie basse du rez-de-chaussée est construite en granite alors que la partie haute et notamment les mascarons sont en calcaire de Saint-Savinien (Charente maritime), une pierre semi-dure. Les étages sont construits en tuffeau de la région de Saumur.\\n\\nUn immeuble inscrit\\n\\nEn 1933, les deux immeubles ont été séparés. La restauration de chacun a été effectuée à quelques années d'intervalle. Les façades sur rue et sur cour ainsi que la cage d'escalier ont été inscrits à l'inventaire supplémentaire des monuments historiques le 5 décembre 1984.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.212746973313344,\r\n      longitude: -1.5547571895170953\r\n    }\r\n  },\r\n  {\r\n    id: \"quai-turenne-9\",\r\n    name: \"09 quai Turenne / 11 rue Kervégan\",\r\n    x: 260,\r\n    y: 150,\r\n    description: \"Immeuble dit à la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire à pans coupés. Décors caractéristiques: mascarons et ferronneries. Double accès côté quai et rue. Monument Historique depuis 1984.\",\r\n    image: \"/9 quai Turenne.jpg\",\r\n    audio: \"/audio/9-quai-Turenne.mp3\",\r\n    history: \"Immeuble dit à la \\\"Cour Ovale\\\"\\nEn 1756, Joseph Raimbaud (marchand de bois) acquiert sur l'île Feydeau, deux terrains contigus et y fait édifier deux immeubles avec une cour commune, vaste cour rectangulaire à pans coupés, la \\\"Cour ovale\\\". Les deux immeubles aux décors caractéristiques du milieu du siècle (mascarons et ferronneries) ont un double accès, côté quai et côté rue. Les deux façades sur quai sont traitées de manière identique et en symétrie, les 12 travées étant groupées deux par deux. Les façades sur rue sont moins ostentatoires, les quatre doubles travées de gauche n'ont reçu qu'un seul étage, le programme architectural n'ayant pas été achevé. Immeuble classé au titre des Monuments Historiques depuis 1984.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21230600,\r\n      longitude: -1.55698600\r\n    }\r\n  },\r\n  {\r\n    id: \"quai-turenne-9-concert\",\r\n    name: \"09 quai Turenne / 11 rue Kervégan\",\r\n    x: 260,\r\n    y: 180,\r\n    description: \"Immeuble dit à la 'Cour Ovale' (1756). Construit par Joseph Raimbaud, marchand de bois, avec une cour commune rectangulaire à pans coupés. Décors caractéristiques: mascarons et ferronneries. Double accès côté quai et rue. Monument Historique depuis 1984.\",\r\n    image: \"/9 quai Turenne.jpg\",\r\n    audio: \"/audio/9-quai-Turenne.mp3\",\r\n    // Référence à la même fiche historique que quai-turenne-9\r\n    historyRef: \"quai-turenne-9\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21273557840543,\r\n      longitude: -1.5552255095605205\r\n    }\r\n  },\r\n  {\r\n    id: \"quai-turenne-10\",\r\n    name: \"10 quai Turenne / 13 rue Kervégan\",\r\n    x: 260,\r\n    y: 224,\r\n    description: \"Immeuble de négociant (1755-56). Construit par Joseph Raimbaud, marchand de bois. Innovation architecturale: premier immeuble de Feydeau avec des appartements à couloir plutôt qu'en enfilade. 3 étages et combles sans entresol. Inscrit aux Monuments Historiques depuis 1984.\",\r\n    image: \"/10 quai Turenne.jpg\",\r\n    audio: \"/audio/10-quai-Turenne.mp3\",\r\n    history: \"Un immeuble de négociant\\n\\nJacques Goubert, ingénieur, est un des actionnaires d'origine du lotissement. Il est l'auteur des plans du parcellaire. Il propose également dans son projet un modèle d'élévation qui ne sera pas suivi par les constructeurs.\\nIl revend sa parcelle à Joseph Raimbaud, marchand de bois en lien avec le milieu de la construction navale. Celui-ci fait construire l'immeuble en 1755-56.\\n\\n3 étages et combles sans entresol\\n\\nLes immeubles du lotissement Feydeau sont tantôt entresolé, tantôt non. La présence de l'entresol révèle l'importance accordée à l'activité commerciale : celui-ci permet d'installer des réserves et des bureaux. Dans le cas présent, les constructeurs ont souhaité privilégier le logement. Aussi le rez-de-chaussée est-il occupé par des appartements.\\n\\nUne innovation : des appartements avec un couloir\\n\\nJusqu'au début du XVIIIe siècle, on ne connaît qu'une seule manière d'agencer les pièces d'un appartement : l'enfilade. Les différentes salles se commandent les unes les autres. Au fil du siècle, le désir d'intimité grandissant, on voit apparaître le couloir, jugé plus pratique. Cet immeuble est le seul dans Feydeau à présenter cette particularité.\\n\\nUne décoration soignée\\n\\nContrairement à d'autres immeubles du lotissement, les façades sur rue et quai sont identiques. Toutes les ouvertures comportent un mascaron, avec des visages africains. Les balcons sont construits sur des consoles au 1er étage et sur trompe au 2ème. Les angles de la cour ainsi que les demi-tourelles de latrines sont à pans coupés. L'immeuble est Inscrit sur l'inventaire supplémentaire des monuments historiques depuis 1984.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.213066264735716,\r\n      longitude: -1.5555775290702223\r\n    }\r\n  },\r\n  {\r\n    id: \"rue-kervegan-17\",\r\n    name: \"17 rue Kervégan / 11 quai Turenne\",\r\n    x: 220,\r\n    y: 407,\r\n    description: \"Immeuble de la 'galaxie Pierre Rousseau' (après 1775). Construit pour Pierre Lassalle, gendre de Pierre Rousseau. Particularité: corps de bâtiments indépendants sur quai et rue, avec cour commune. Façade sobre typique de la fin du 18ème siècle, mais intérieurs richement décorés.\",\r\n    image: \"/17 rue Kervégan.jpg\",\r\n    audio: \"/audio/17-rue-Kervegan.mp3\",\r\n    history: \"Un immeuble de la \\\"galaxie Pierre Rousseau\\\"\\n\\nCet immeuble a été construit après 1775 pour Pierre Lassalle, gendre de Pierre Rousseau. Ce dernier reprend une partie des dispositions adoptées au 12, allée Turenne, qu'il a construit comme immeuble de rapport en 1753.\\n\\nUne parcelle pour deux immeubles indépendants\\n\\nContrairement à d'autres immeubles de Feydeau. Le corps de bâtiment sur le quai Turenne et celui sur la rue Kervégan sont indépendants. Si la cour est commune, Ils possèdent chacun leur propre escalier et deux latrines par étage. \\n\\nChacun des immeubles comprenait à l'origine un appartement par étage, constitué de 4 pièces en façade et deux pièces de part et d'autre de l'escalier. Par la suite, certains logements ont été divisés.\\n\\nDécoration\\n\\nAu fil du 18ème siècle, on s'achemine vers un type de façade de plus en plus sobre : les mascarons, les balcons sur trompe ou sur consoles sculptées disparaissent, La place Royale en est un bon exemple. Si les façades de cet immeuble ne comportent ni balcons, ni décoration, les intérieurs n'ont rien à envier à ceux de la génération précédente.\\n\\nPetits ou grand vitrages\\n\\nJusqu'aux années 1750, les vantaux des fenêtres sont à petits bois. Dans les années 1760 apparaît le grand carreau, qui est, dans un premier temps, réservé aux grandes demeures. On peut donc affirmer avec certitude que tous les immeubles de l'Île Feydeau avaient à l'origine des fenêtres à petits bois.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21247281536768,\r\n      longitude: -1.5562154487439073\r\n    }\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-11\",\r\n    name: \"11 allée Duguay Trouin / 20 rue Kervégan\",\r\n    x: 150,\r\n    y: 186,\r\n    description: \"Immeuble de rapport (1752) construit par Bertrand Doudet, négociant. Particularité: système de galeries très développé avec escalier unique ouvrant sur trois faces. Deux appartements spacieux par étage (200 m²). Façade côté Duguay-Trouin reconstruite à l'identique après les bombardements de 1945.\",\r\n    image: \"/20 rue Kervégan.jpg\",\r\n    audio: \"/audio/11-allee-duguay-trouin.mp3\",\r\n    history: \"Un immeuble de rapport\\n\\nBertrand Doudet, négociant, acquiert en 1747 une des parcelles du lotissement auprès de la veuve Beaulieu-Belloteau, dont le mari était un des actionnaires d'origine. En 1752, la 'maison' est terminée : il en habite un des appartements. Les autres sont probablement loués. \\n\\nDes appartements donnant sur des galeries\\n\\nDe tous les immeubles de l'île Feydeau, c'est dans celui-ci que ce système constructif est le plus développé : l'unique escalier ouvre sur trois faces de galeries. Chaque étage comprend à l'origine deux appartements : l'un côté Kervégan, l'autre côté Duguay-Trouin, soit un peu plus de 200 m2 par appartement. On trouve donc deux portes d'entrée sur chaque palier de l'escalier, qui donnent sur la coursière de chaque appartement. Sur celle-ci ouvrent les porte-fenêtres de chaque pièce. On trouve également, juste après la porte d'entrée, des toilettes. On habite en fonction de sa condition… \\n\\nOn peut supposer que Bertrand Doudet s'était réservé un des deux appartements du 1er étage. Il faut imaginer qu'à l'époque, habiter haut, c'est multiplier les contraintes : monter les seaux d'eau, le bois… Par ailleurs, le 1er étage est toujours celui qui offre la plus grande hauteur sous plafond, les plus belles cheminées, et les éléments de décoration les plus remarquables (boiseries, parquets à la française, fontaines à eau dans des niches...). Certains de ces éléments sont encore présents dans l'immeuble.\\n\\nNi classé, ni inscrit\\n\\nMême s'il s'agit d'un immeuble remarquable, cette maison ne comporte pas d'éléments de décoration qui justifient une demande de protection. La façade ne présente ni mascarons, ni balcons sur trompe ou sur consoles. Ce type d'immeuble se retrouve fréquemment dans le centre ancien. Ce qui fait la typicité de celui-ci, comme de tous les immeubles de Feydeau, est la largeur des façades, qui a permis de créer dans chacun des appartements une enfilade de trois grandes pièces.\\n\\nLes modes passent\\n\\nA la fin du XVIIIème siècle, Feydeau n'est plus à la mode. Les Nantais préfèrent habiter les nouveaux quartiers plus en hauteur : les cours près de la Cathédrale et surtout le quartier Graslin. Les propriétaires changent et certains des appartements sont divisés. Les habitants des immeubles sont souvent de condition plus modeste.\\n\\nLes vicissitudes de la seconde guerre mondiale\\n\\nL'immeuble a souffert durant les bombardements. En 1945, sa façade côté Duguay-Trouin est pour partie détruite. La SNCF, locataire de l'immeuble pour y loger son personnel, fait démolir et reconstruire cette façade à l'identique. Seules les baies du rez-de-chaussée sont agrandies, pour faciliter l'activité commerciale. Pour ce chantier, on réutilise les parpaings de granite du rez-de-chaussée, et on remplace le tuffeau des étages par une pierre plus dure. L'immeuble a fait l'objet d'une restauration générale durant les années 1990. La façade côté Duguay-Trouin en cours de reconstruction au printemps 1948.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.213066264735716,\r\n      longitude: -1.5555775290702223\r\n    }\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-15\",\r\n    name: \"15 allée Duguay Trouin\",\r\n    x: 105,\r\n    y: 407,\r\n    description: \"Deux immeubles de rapport (1753) construits par les négociants Razeau et Geslin. Façade remarquable avec six travées et décor soigné: balcons sur consoles sculptées, chapiteaux ioniques, fronton et ferronneries. Habité par des négociants occupant un étage entier. Restauré en 1995. Monument Historique depuis 1984.\",\r\n    image: \"/15 allée Duguay-Trouin.jpg\",\r\n    audio: \"/audio/15-allee-duguay-trouin.mp3\",\r\n    history: \"15 allée Duguay Trouin\\nDeux immeubles de rapport\\n\\nDe même que pour d'autres parcelles du lotissement, le propriétaire initial du terrain, Adrien van Voorn, n'en est pas le bâtisseur. Il revend sa parcelle à Paul-Louis-Julien Razeau et René Geslin, tous deux négociants. Ceux-ci font construire par les architectes Nicolas Rainard et Pierre Desprées deux immeubles de rapport achevés en 1753.\\nUne architecture soignée\\n\\nLa façade possède six travées à arcs surbaissés au rez-de-chaussée. Les deux travées centrales sont richement traitées : balcons sur consoles sculptées au 1er étage et sur trompe au 2ème, chapiteaux ioniques et fronton. Les ferronneries sont remarquables. La cour comporte deux tourelles pour les toilettes.\\nLes habitants\\n\\nEn 1776, les deux immeubles sont essentiellement habités par des négociants, qui disposent chacun d'un étage entier (appartements de 6 ou 7 pièces).\\nUne restauration exemplaire côté Duguay-Trouin\\n\\nL'immeuble a été entièrement restauré à partir de 1995. Le relevé de l'existant a été effectué avec beaucoup de soin. Des menuiseries à petits bois ont été réintroduites, qui redonnent à la façade son aspect du XVIIIe siècle. Les façades et toitures sur l'allée Duguay-Trouin, la rue Kervégan et la cour sont inscrites à l'inventaire supplémentaire des Monuments historiques depuis le 5 décembre 1984.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21274016472948,\r\n      longitude: -1.5567136782622693\r\n    }\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-16\",\r\n    name: \"16 allée Duguay Trouin\",\r\n    x: 105,\r\n    y: 450,\r\n    description: \"Immeuble du XVIIIe siècle situé dans la partie sud de l'Île Feydeau. Cet immeuble présente une architecture typique du lotissement avec une cour intérieure et des espaces d'exposition. Il accueille aujourd'hui des artistes contemporains dans ses espaces rénovés.\",\r\n    image: \"/16 allée Duguay-Trouin.jpg\",\r\n    audio: \"/audio/16-allee-duguay-trouin.mp3\",\r\n    history: \"Un espace artistique contemporain\\n\\nCet immeuble du XVIIIe siècle, situé dans la partie sud de l'Île Feydeau, témoigne de l'architecture typique du lotissement. Construit à l'origine pour des négociants nantais, il a connu diverses transformations au fil des siècles. Aujourd'hui, ses espaces rénovés accueillent des artistes contemporains qui y trouvent un cadre historique inspirant pour leurs créations.\\n\\nUne architecture préservée\\n\\nL'immeuble conserve les caractéristiques architecturales de l'époque: une cour intérieure, des espaces généreux et une façade sobre typique de la fin du XVIIIe siècle. La rénovation a permis de préserver l'esprit du lieu tout en l'adaptant aux besoins des artistes qui y exposent régulièrement.\\n\\nUn lieu de création et d'exposition\\n\\nLe bâtiment est devenu un lieu important pour la scène artistique nantaise, accueillant des expositions temporaires et des ateliers d'artistes. Sa configuration avec une cour et un hall offre des espaces d'exposition variés, permettant de mettre en valeur différentes formes d'expression artistique.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21265104842529,\r\n      longitude: -1.5568766504416809\r\n    }\r\n  },\r\n  {\r\n    id: \"rue-kervegan-32\",\r\n    name: \"32 rue Kervégan\",\r\n    x: 185,\r\n    y: 507,\r\n    description: \"Immeuble construit entre 1747 et 1752 par Guillaume Grou, négociant-armateur. Façade modifiée au 19e siècle avec ajout d'un troisième étage. Organisation typique: appartement de l'armateur au premier, bureaux au rez-de-chaussée entresolé, appartements locatifs aux étages supérieurs. Monument Historique: façade et ferronneries (1932), cage d'escalier (1986).\",\r\n    image: \"/32 rue Kervegan.jpg\",\r\n    audio: \"/audio/32-rue-kervegan.mp3\",\r\n    history: \"Entre 1747 et 1752, Guillaume Grou, négociant-armateur, fait construire cet immeuble sur l'île Feydeau. La composition d'origine de la façade a été modifiée au début du 19e siècle par l'ajout d'un troisième étage. L'immeuble abritait au premier étage l'appartement de l'armateur dont l'accès se faisait par la porte de la façade principale. Le rez-de-chaussée entresolé était occupé par des bureaux et magasins. Les appartements locatifs des étages supérieurs étaient desservis par une porte latérale donnant rue Kervégan. La façade y compris les ferronneries et la toiture sont inscrites au titre des Monuments Historiques depuis 1932, la cage d'escalier intérieur est, quant à elle, inscrite en 1986.\",\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.2123232,\r\n      longitude: -1.5570202\r\n    }\r\n  },\r\n  {\r\n    id: \"rue-duguesclin\",\r\n    name: \"Rue Duguesclin\",\r\n    x: 130,\r\n    y: 310,\r\n    description: \"Mur Le Chat Noir jusqu'à rue Kervégan. Située sur l'Île Feydeau, cette rue piétonne relie la rue Kervégan à l'allée Duguay Trouin. Elle est caractérisée par son architecture du XVIIIe siècle et abrite aujourd'hui des espaces d'exposition temporaires.\",\r\n    audio: \"/audio/rue-duguayclin.mp3\",\r\n    history: \"Cette rue piétonne de l'Île Feydeau porte le nom de Bertrand du Guesclin, connétable de France au XIVe siècle. Elle fait partie du lotissement original de l'Île, conçu au XVIIIe siècle. Aujourd'hui, elle accueille des expositions temporaires qui animent ce passage historique entre la rue Kervégan et l'allée Duguay Trouin.\",\r\n    hasProgram: false,\r\n    visited: false,\r\n    gps: {\r\n      latitude: 47.21299917260203,\r\n      longitude: -1.556253314217484\r\n    }\r\n  }\r\n];\r\n","import { getArtistById, Artist } from './artists';\nimport { getLocationNameById } from './locations';\n\n// Type for event-specific details, linking to an artist via artistId\nexport type EventDetails = {\n  id: string; // Unique ID for this specific event instance\n  artistId: string; // Foreign key to artists.ts\n  title: string; // Event's own title\n  // description: string; // Event's own description\n  time: string;\n  days: (\"samedi\" | \"dimanche\")[];\n  locationId: string; // Référence à l'ID du lieu dans locations.ts\n};\n\n// Combined Event type that components will use\n// It mirrors the structure of the old Event type for compatibility\nexport type Event = {\n  // Fields from EventDetails\n  id: string;\n  artistId: string;\n  title: string; // Event's title\n  // description: string; // Event's description\n  time: string;\n  days: (\"samedi\" | \"dimanche\")[];\n  locationId: string;\n  locationName: string;\n\n  // Fields from Artist (kept for compatibility)\n  artistName: Artist['name'];\n  type: Artist['type']; // 'exposition' or 'concert'\n  image?: Artist['image'];\n};\n\n// Raw schedule data: list of event-specific details\nconst eventScheduleData: EventDetails[] = [\n  // Concerts\n  {\n    id: \"clarine\",\n    artistId: \"clarine\",\n    title: \"Clarine Julienne\",\n    // description: \"Choeur de femmes Nota Bene en concert\",\n    time: \"14h00 - 14h30\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-nota-bene\",\n    artistId: \"nota-bene\",\n    title: \"Choeur de femmes Nota Bene\",\n    // description: \"Choeur de femmes Nota Bene en concert\",\n    time: \"14h45 - 15h15\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"Omega\",\n    artistId: \"Semaphore Omega\",\n    title: \"Semaphore Omega (lectures poétiques en musique)\",\n    time: \"15h30 - 16h00\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-conteurs-samedi\",\n    artistId: \"philippe-peaud\",\n    title: \"Conteurs\",\n    // description: \"Séance de contes avec Philippe Peaud\",\n    time: \"16h00 - 16h45\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-conteurs-dimanche\",\n    artistId: \"philippe-peaud\", // Same artist, different event\n    title: \"Conteurs\",\n    // description: \"Séance de contes avec Philippe Peaud\",\n    time: \"16h00 - 16h45\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-violoncelles\",\n    artistId: \"violoncelles\", // Same artist, different event\n    title: \"Ensemble de violoncelles du conservatoire\",\n    time: \"17h45 - 18h15\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"scarabees\",\n    artistId: \"scarabees\", // Matched with artists.ts id\n    title: \"Les Scarabées Rôdent\",\n    time: \"17h45 - 18h15\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"aperto\",\n    artistId: \"aperto\", // Matched with artists.ts id\n    title: \"Aperto !\",\n    time: \"18h30 - 19h00\",\n    days: [\"samedi\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-quatuor-liger\",\n    artistId: \"quatuor-liger\", // Matched with artists.ts id\n    title: \"Quatuor Liger\",\n    time: \"14h00 - 14h30\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-eva\",\n    artistId: \"eva\", // Matched with artists.ts id\n    title: \"L'Ensemble Vocal EVA\",\n    time: \"14h45 - 15h15\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"Omega\",\n    artistId: \"Semaphore Omega\",\n    title: \"Semaphore Omega (lectures poétiques en musique)\",\n    time: \"15h30 - 16h00\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-swing-it\",\n    artistId: \"swing-it\", // Matched with artists.ts id\n    title: \"Swing it !\",\n    time: \"17h00 - 17h30\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n  {\n    id: \"concert-variabilis\",\n    artistId: \"variabilis\", // Matched with artists.ts id\n    title: \"Variabilis\",\n    time: \"17h45 - 18h15\",\n    days: [\"dimanche\"],\n    locationId: \"quai-turenne-9-concert\",\n  },\n\n\n  // Expositions\n  {\n    id: \"expo-emmanuelle-boisson\", // Changed ID to be more descriptive\n    artistId: \"emmanuelle-boisson\",\n    title: \"Illustrations et Carnets\", // This is the exhibition title\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-8\",\n\n  },\n  {\n    id: \"expo-catherine-clement\", // Changed ID\n    artistId: \"catherine-clement\",\n    title: \"Peintures en Miniature\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-8\",\n\n  },\n  {\n    id: \"expo-mostapha-rouine\", // Changed ID\n    artistId: \"mostapha-rouine\",\n    title: \"Entre Bretagne et Maroc\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-8\",\n\n  },\n\n  {\n    id: \"expo-bruno-barbier\", \n    artistId: \"bruno-barbier\",\n    title: \"Peintures et dessins\",\n    time: \"12h00 - 19h00\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-9\",\n\n  },\n  // {\n  //   id: \"expo-pauline-crusson\", // Changed ID (was pauline-crusson)\n  //   artistId: \"pauline-crusson\",\n  //   title: \"Cartes postales du vieux Nantes\",\n  //   time: \"12h00 - 19h00\",\n  //   days: [\"samedi\", \"dimanche\"],\n  //   locationId: \"rue-duguesclin\",\n\n  // },\n  {\n    id: \"expo-alain-gremillet\",\n    artistId: \"alain-gremillet\",\n    title: \"Peinture abstraite\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-10\",\n\n  },\n  {\n    id: \"expo-jerome-gourdon\",\n    artistId: \"jerome-gourdon\",\n    title: \"Photo-émographie\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-10\",\n\n  },\n  {\n    id: \"expo-nadege-hameau\",\n    artistId: \"nadege-hameau\",\n    title: \"Marqueur acrylique\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-10\",\n\n  },\n  {\n    id: \"expo-pauline-crusson-2\",\n    artistId: \"pauline-crusson\",\n    title: \"PaoaNaoned\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-10\",\n\n  },\n  {\n    id: \"expo-marie-husson\",\n    artistId: \"marie-husson\",\n    title: \"Dessins et peintures\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"rue-kervegan-17\",\n\n  },\n  {\n    id: \"expo-clotilde-debar-zablocki\",\n    artistId: \"clotilde-debar-zablocki\",\n    title: \"apolline.design\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-15\",\n\n  },\n  {\n    id: \"expo-malou-tual\",\n    artistId: \"malou-tual\",\n    title: \"Peinture et sculpture sur bois\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-11\",\n\n  },\n  {\n    id: \"expo-gael-caudoux\",\n    artistId: \"gael-caudoux\",\n    title: \"Cartographies imaginaires\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-11\",\n\n  },\n  {\n    id: \"expo-andry-shango-rajoelina\",\n    artistId: \"andry-shango-rajoelina\",\n    title: \"Art multidisciplinaire\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-16\",\n\n  },\n  {\n    id: \"expo-jerome-luneau\",\n    artistId: \"jerome-luneau\",\n    title: \"Chun Yong Ho\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-16\",\n\n  },\n  {\n    id: \"expo-jocelyn-prouff\", // Changed ID (was expo9)\n    artistId: \"expo9\",\n    title: \"Carnets Nantais\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-16\",\n\n  },\n  {\n    id: \"expo-elizaveta-vodyanova\",\n    artistId: \"elizaveta-vodyanova\",\n    title: \"Peinture\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"quai-turenne-10\",\n\n  },\n  {\n    id: \"expo-fabienne-choyau\",\n    artistId: \"fabienne-choyau\",\n    title: \"Peinture contemporaine\",\n    time: \"12h00 - 19h00, samedi et dimanche\",\n    days: [\"samedi\", \"dimanche\"],\n    locationId: \"allee-duguay-trouin-15\",\n\n  }\n];\n\n// Dynamically construct the events array by merging EventDetails with Artist data\nexport const events: Event[] = eventScheduleData.map(eventDetail => {\n  const artist = getArtistById(eventDetail.artistId);\n\n  if (!artist) {\n    // This case should ideally not happen if artistId always refers to a valid artist.\n    // Handle error: log it, and potentially return a default/error object or filter out.\n    console.error(`Artist not found for ID: ${eventDetail.artistId} (Event ID: ${eventDetail.id}). Check data consistency.`);\n    // For robustness, you might want to throw an error or return a distinctly identifiable error object.\n    // Returning null here and filtering later, but this might hide issues during development.\n    return null;\n  }\n\n  return {\n    // From EventDetails\n    id: eventDetail.id,\n    artistId: eventDetail.artistId,\n    title: eventDetail.title,\n    // description: eventDetail.description,\n    time: eventDetail.time,\n    days: eventDetail.days,\n    locationId: eventDetail.locationId,\n    locationName: getLocationNameById(eventDetail.locationId),\n\n    // From Artist\n    artistName: artist.name,\n    type: artist.type,\n    image: artist.image,\n  };\n}).filter(event => event !== null) as Event[]; // Filter out any nulls if artists weren't found\n\n// Helper functions (preserved from original file)\nexport function getEventsByDay(day: \"samedi\" | \"dimanche\") {\n  return events.filter(event => event.days.includes(day));\n}\n\nexport function getEventById(id: string) {\n  return events.find(event => event.id === id);\n}\n\nexport function getEventsByLocation(locationName: string) {\n  // Récupérer le lieu par son nom\n  const locations = getLocations();\n  const location = locations.find(loc => loc.name === locationName);\n  \n  if (location) {\n    // Si on a trouvé le lieu, récupérer les événements qui ont ce locationId\n    return events.filter(event => event.locationId === location.id);\n  }\n  \n  // Si on ne trouve pas le lieu, retourner un tableau vide\n  return [];\n}\n\n// Get unique locations from events\nexport function getLocations() {\n  const uniqueLocations = new Map<string, { id: string, name: string, description: string, x: number, y: number, events: string[], visited: boolean }>();\n  \n  // Import locations data and use it as the primary source for location information\n  try {\n    import('../data/locations').then(locationsModule => {\n      const locationsData = locationsModule.locations;\n      \n      // Create a map of events by locationId\n      const eventsByLocation = new Map<string, string[]>();\n      events.forEach(event => {\n        if (!eventsByLocation.has(event.locationId)) {\n          eventsByLocation.set(event.locationId, [event.id]);\n        } else {\n          eventsByLocation.get(event.locationId)?.push(event.id);\n        }\n      });\n      \n      // Use locations data as the primary source\n      locationsData.forEach(location => {\n        const eventIds = eventsByLocation.get(location.id) || [];\n        uniqueLocations.set(location.name, {\n          id: location.id,\n          name: location.name,\n          description: location.description,\n          x: location.x,\n          y: location.y,\n          events: eventIds,\n          visited: location.visited || false\n        });\n      });\n    }).catch(error => {\n      console.warn('Could not load locations data:', error);\n      // Fallback to using event data if locations cannot be loaded\n      populateSynchronously();\n    });\n  } catch (error) {\n    console.warn('Dynamic import not available, using fallback for locations:', error);\n    populateSynchronously();\n  }\n\n  // Fallback function that uses event data to populate locations\n  function populateSynchronously() {\n    // Group events by location\n    const eventsByLocation = new Map<string, string[]>();\n    events.forEach(event => {\n      if (!eventsByLocation.has(event.locationId)) {\n        eventsByLocation.set(event.locationId, [event.id]);\n      } else {\n        eventsByLocation.get(event.locationId)?.push(event.id);\n      }\n    });\n    \n    // Create location entries with default coordinates\n    // Note: In this fallback mode, we don't have actual coordinates\n    // so we use a default value that will be corrected when locations.ts is loaded\n    events.forEach(event => {\n      if (!uniqueLocations.has(event.locationName)) {\n        uniqueLocations.set(event.locationName, {\n          id: event.locationId,\n          name: event.locationName,\n          description: '', // Default empty description\n          x: 0, // Default coordinate, will be updated from locations.ts when available\n          y: 0, // Default coordinate, will be updated from locations.ts when available\n          events: eventsByLocation.get(event.locationId) || [],\n          visited: false\n        });\n      }\n    });\n  }\n\n  // Initial synchronous population before async attempt or as fallback\n  if (uniqueLocations.size === 0) {\n      populateSynchronously();\n  }\n  \n  return Array.from(uniqueLocations.values());\n}\n\n// Get location ID from event ID\nexport function getLocationIdForEvent(eventId: string): string | null {\n  const event = getEventById(eventId);\n  if (!event) return null;\n  \n  return event.locationId;\n}\n","import { Event, events as allEvents } from \"@/data/events\";\r\nimport { AchievementType, unlockAchievement } from \"./achievements\";\r\n\r\n// Type pour les événements sauvegardés\r\nexport interface SavedEvent extends Event {\r\n  savedAt: string;\r\n  notificationTime?: string;\r\n}\r\n\r\n// Récupérer les événements sauvegardés depuis le localStorage\r\nexport const getSavedEvents = (): SavedEvent[] => {\r\n  try {\r\n    const savedEventIds = localStorage.getItem('savedEvents');\r\n    if (!savedEventIds) return [];\r\n    \r\n    // Convertir les IDs sauvegardés en objets d'événements complets\r\n    const ids = JSON.parse(savedEventIds) as string[];\r\n    if (!Array.isArray(ids)) return [];\r\n    \r\n    // Utiliser les événements importés directement\r\n    // (allEvents est importé en haut du fichier)\r\n    \r\n    return ids.map(id => {\r\n      if (!id) return null;\r\n      const event = allEvents.find((e: Event) => e && e.id === id);\r\n      if (!event) return null;\r\n      \r\n      return {\r\n        ...event,\r\n        savedAt: new Date().toISOString()\r\n      };\r\n    }).filter(Boolean) as SavedEvent[];\r\n  } catch (error) {\r\n    console.error('Erreur dans getSavedEvents:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Sauvegarder un événement\r\nexport const saveEvent = (event: Event): SavedEvent[] => {\r\n  try {\r\n    if (!event || !event.id) {\r\n      console.error('Tentative de sauvegarde d\\'un événement invalide:', event);\r\n      return getSavedEvents();\r\n    }\r\n    \r\n    const savedEventIdsStr = localStorage.getItem('savedEvents');\r\n    let savedEventIds = [];\r\n    \r\n    try {\r\n      savedEventIds = savedEventIdsStr ? JSON.parse(savedEventIdsStr) as string[] : [];\r\n      if (!Array.isArray(savedEventIds)) savedEventIds = [];\r\n    } catch (error) {\r\n      console.error('Erreur lors de la lecture des événements sauvegardés:', error);\r\n      savedEventIds = [];\r\n    }\r\n    \r\n    console.log(`[savedEvents] Événements déjà sauvegardés: ${savedEventIds.length}`, savedEventIds);\r\n    \r\n    // Vérifier si l'événement est déjà sauvegardé\r\n    const eventExists = savedEventIds.includes(event.id);\r\n    console.log(`[savedEvents] Événement déjà sauvegardé: ${eventExists}`);\r\n    \r\n    if (!eventExists) {\r\n      const updatedIds = [...savedEventIds, event.id];\r\n      localStorage.setItem('savedEvents', JSON.stringify(updatedIds));\r\n      console.log(`[savedEvents] Événement sauvegardé, nouveau total: ${updatedIds.length}`);\r\n      \r\n      // Débloquer des réalisations avec un délai pour assurer que l'interface est prête\r\n      console.log(`[savedEvents] Planification du déclenchement des achievements dans 500ms`);\r\n      setTimeout(() => {\r\n        // Premier événement sauvegardé\r\n        if (updatedIds.length === 1) {\r\n          console.log(`[savedEvents] Déclenchement de l'achievement FIRST_EVENT_SAVED (premier événement)`);\r\n          unlockAchievement(AchievementType.FIRST_EVENT_SAVED);\r\n        }\r\n        \r\n        // 5 événements ou plus sauvegardés\r\n        if (updatedIds.length >= 5) {\r\n          console.log(`[savedEvents] Déclenchement de l'achievement MULTIPLE_EVENTS_SAVED (${updatedIds.length} événements)`);\r\n          unlockAchievement(AchievementType.MULTIPLE_EVENTS_SAVED);\r\n        }\r\n      }, 500); // Délai de 500ms pour assurer que l'interface est prête\r\n    } else {\r\n      console.log(`[savedEvents] Événement déjà sauvegardé, aucune action nécessaire`);\r\n    }\r\n    \r\n    return getSavedEvents();\r\n  } catch (error) {\r\n    console.error('Erreur dans saveEvent:', error);\r\n    return getSavedEvents();\r\n  }\r\n};\r\n\r\n// Supprimer un événement sauvegardé\r\nexport const removeSavedEvent = (eventId: string): SavedEvent[] => {\r\n  try {\r\n    if (!eventId) {\r\n      console.error('Tentative de suppression d\\'un événement avec un ID invalide');\r\n      return getSavedEvents();\r\n    }\r\n    \r\n    const savedEventIdsStr = localStorage.getItem('savedEvents');\r\n    if (!savedEventIdsStr) return [];\r\n    \r\n    let savedEventIds = [];\r\n    try {\r\n      savedEventIds = JSON.parse(savedEventIdsStr) as string[];\r\n      if (!Array.isArray(savedEventIds)) savedEventIds = [];\r\n    } catch (error) {\r\n      console.error('Erreur lors de la lecture des événements sauvegardés:', error);\r\n      return [];\r\n    }\r\n    \r\n    const updatedIds = savedEventIds.filter(id => id !== eventId);\r\n    localStorage.setItem('savedEvents', JSON.stringify(updatedIds));\r\n    \r\n    return getSavedEvents();\r\n  } catch (error) {\r\n    console.error('Erreur dans removeSavedEvent:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Définir une notification pour un événement sauvegardé\r\nexport const setEventNotification = (eventId: string, notificationTime: string): SavedEvent[] => {\r\n  try {\r\n    if (!eventId) {\r\n      console.error('Tentative de définir une notification pour un événement avec un ID invalide');\r\n      return getSavedEvents();\r\n    }\r\n    \r\n    // Stocker les notifications séparément\r\n    const notificationsStr = localStorage.getItem('eventNotifications');\r\n    let notifications = {};\r\n    \r\n    try {\r\n      notifications = notificationsStr ? JSON.parse(notificationsStr) : {};\r\n      if (typeof notifications !== 'object') notifications = {};\r\n    } catch (error) {\r\n      console.error('Erreur lors de la lecture des notifications:', error);\r\n      notifications = {};\r\n    }\r\n    \r\n    // Vérifier si c'est la première notification configurée\r\n    const isFirstNotification = Object.keys(notifications).length === 0;\r\n    \r\n    // Mettre à jour la notification pour cet événement\r\n    notifications[eventId] = notificationTime;\r\n    localStorage.setItem('eventNotifications', JSON.stringify(notifications));\r\n    \r\n    // Débloquer la réalisation si c'est la première notification\r\n    if (isFirstNotification) {\r\n      unlockAchievement(AchievementType.NOTIFICATION_SET);\r\n    }\r\n    \r\n    // Récupérer les événements sauvegardés avec les notifications mises à jour\r\n    const events = getSavedEvents();\r\n    return events.map(event => {\r\n      if (event && event.id === eventId) {\r\n        return { ...event, notificationTime };\r\n      }\r\n      return event;\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur dans setEventNotification:', error);\r\n    return getSavedEvents();\r\n  }\r\n};\r\n\r\n// Vérifier les notifications à afficher\r\nexport const checkNotifications = (): SavedEvent[] => {\r\n  try {\r\n    const events = getSavedEvents();\r\n    const now = new Date();\r\n    \r\n    // Récupérer les notifications\r\n    const notificationsStr = localStorage.getItem('eventNotifications');\r\n    if (!notificationsStr) return [];\r\n    \r\n    let notifications = {};\r\n    try {\r\n      notifications = JSON.parse(notificationsStr);\r\n      if (typeof notifications !== 'object') return [];\r\n    } catch (error) {\r\n      console.error('Erreur lors de la lecture des notifications:', error);\r\n      return [];\r\n    }\r\n    \r\n    // Filtrer les événements dont la notification doit être affichée\r\n    return events.filter(event => {\r\n      if (!event || !event.id) return false;\r\n      \r\n      const notificationTime = notifications[event.id];\r\n      if (!notificationTime) return false;\r\n      \r\n      try {\r\n        const notificationDate = new Date(notificationTime);\r\n        return notificationDate <= now;\r\n      } catch (error) {\r\n        console.error('Date de notification invalide:', error);\r\n        return false;\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur dans checkNotifications:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Marquer une notification comme lue\r\nexport const markNotificationAsRead = (eventId: string): SavedEvent[] => {\r\n  try {\r\n    if (!eventId) {\r\n      console.error('Tentative de marquer comme lue une notification avec un ID invalide');\r\n      return getSavedEvents();\r\n    }\r\n    \r\n    // Récupérer les notifications\r\n    const notificationsStr = localStorage.getItem('eventNotifications');\r\n    if (!notificationsStr) return getSavedEvents();\r\n    \r\n    let notifications = {};\r\n    try {\r\n      notifications = JSON.parse(notificationsStr);\r\n      if (typeof notifications !== 'object') return getSavedEvents();\r\n    } catch (error) {\r\n      console.error('Erreur lors de la lecture des notifications:', error);\r\n      return getSavedEvents();\r\n    }\r\n    \r\n    // Supprimer la notification pour cet événement\r\n    if (notifications[eventId]) {\r\n      delete notifications[eventId];\r\n      localStorage.setItem('eventNotifications', JSON.stringify(notifications));\r\n    }\r\n    \r\n    return getSavedEvents();\r\n  } catch (error) {\r\n    console.error('Erreur dans markNotificationAsRead:', error);\r\n    return getSavedEvents();\r\n  }\r\n};\r\n","import { cacheManager } from '@/utils/cacheManager';\r\nimport { getSavedEvents } from './savedEvents';\r\nimport { Event, getEventById } from '@/data/events';\r\nimport { Location, getLocationNameById, getLocations } from '@/data/locations';\r\nimport { getArtistById } from '@/data/artists';\r\n\r\n// Fonction pour obtenir la base URL de l'application\r\nconst getBaseUrl = (): string => {\r\n  if (typeof window !== 'undefined' && window.APP_CONFIG && window.APP_CONFIG.BASE_URL) {\r\n    return window.APP_CONFIG.BASE_URL;\r\n  }\r\n  return '/';\r\n};\r\n\r\n// Fonction pour construire un chemin complet avec la base URL\r\nconst getFullPath = (path: string): string => {\r\n  const baseUrl = getBaseUrl();\r\n  // Si le chemin commence déjà par la base URL, le retourner tel quel\r\n  if (path.startsWith(baseUrl)) {\r\n    return path;\r\n  }\r\n  // Si le chemin commence par un slash, le supprimer pour éviter les doubles slashs\r\n  const cleanPath = path.startsWith('/') ? path.substring(1) : path;\r\n  return `${baseUrl}${cleanPath}`;\r\n};\r\n\r\n// Constantes pour les clés de cache\r\nconst CACHE_KEYS = {\r\n  SAVED_EVENTS: 'offline_saved_events',\r\n  LOCATIONS: 'offline_locations',\r\n  MAP_IMAGE: 'offline_map_image',\r\n  LOCATION_IMAGES: 'offline_location_images',\r\n  HISTORY_IMAGES: 'offline_history_images',\r\n};\r\n\r\n// Durée de validité du cache en millisecondes (7 jours)\r\nconst CACHE_EXPIRY = 7 * 24 * 60 * 60 * 1000;\r\n\r\n/**\r\n * Précharge les détails des événements sauvegardés pour une utilisation hors-ligne\r\n * @returns Promise<Event[]> Les événements sauvegardés préchargés\r\n */\r\nexport const preloadSavedEvents = async (): Promise<Event[]> => {\r\n  try {\r\n    console.log('[OfflineService] Préchargement des événements sauvegardés');\r\n    \r\n    // Récupérer les événements sauvegardés\r\n    const savedEvents = getSavedEvents();\r\n    \r\n    if (savedEvents.length === 0) {\r\n      console.log('[OfflineService] Aucun événement sauvegardé à précharger');\r\n      return [];\r\n    }\r\n    \r\n    // Stocker les événements dans le cache\r\n    cacheManager.set(CACHE_KEYS.SAVED_EVENTS, savedEvents, CACHE_EXPIRY);\r\n    console.log(`[OfflineService] ${savedEvents.length} événements sauvegardés mis en cache`);\r\n    \r\n    return savedEvents;\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement des événements:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère les événements sauvegardés depuis le cache ou les précharge si nécessaire\r\n * @returns Promise<Event[]> Les événements sauvegardés\r\n */\r\nexport const getOfflineSavedEvents = async (): Promise<Event[]> => {\r\n  return cacheManager.getOrSet(\r\n    CACHE_KEYS.SAVED_EVENTS,\r\n    async () => preloadSavedEvents(),\r\n    CACHE_EXPIRY\r\n  );\r\n};\r\n\r\n/**\r\n * Précharge les lieux associés aux événements sauvegardés\r\n * @returns Promise<Location[]> Les lieux préchargés\r\n */\r\nexport const preloadLocations = async (): Promise<Location[]> => {\r\n  try {\r\n    console.log('[OfflineService] Préchargement des lieux');\r\n    \r\n    // Récupérer les événements sauvegardés\r\n    const savedEvents = await getOfflineSavedEvents();\r\n    \r\n    if (savedEvents.length === 0) {\r\n      console.log('[OfflineService] Aucun lieu à précharger (pas d\\'événements sauvegardés)');\r\n      return [];\r\n    }\r\n    \r\n    // Récupérer tous les lieux\r\n    const allLocations = getLocations();\r\n    \r\n    // Filtrer les lieux associés aux événements sauvegardés\r\n    const locationIds = savedEvents.map(event => event.locationId);\r\n    const uniqueLocationIds = [...new Set(locationIds)];\r\n    const relevantLocations = allLocations.filter(location => \r\n      uniqueLocationIds.includes(location.id)\r\n    );\r\n    \r\n    // Stocker les lieux dans le cache\r\n    cacheManager.set(CACHE_KEYS.LOCATIONS, relevantLocations, CACHE_EXPIRY);\r\n    console.log(`[OfflineService] ${relevantLocations.length} lieux mis en cache`);\r\n    \r\n    return relevantLocations;\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement des lieux:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère les lieux depuis le cache ou les précharge si nécessaire\r\n * @returns Promise<Location[]> Les lieux\r\n */\r\nexport const getOfflineLocations = async (): Promise<Location[]> => {\r\n  return cacheManager.getOrSet(\r\n    CACHE_KEYS.LOCATIONS,\r\n    async () => preloadLocations(),\r\n    CACHE_EXPIRY\r\n  );\r\n};\r\n\r\n/**\r\n * Précharge les images des lieux pour une utilisation hors-ligne\r\n * @returns Promise<string[]> Les URLs des images préchargées\r\n */\r\nexport const preloadLocationImages = async (): Promise<string[]> => {\r\n  try {\r\n    console.log('[OfflineService] Préchargement des images des lieux');\r\n    \r\n    // Récupérer les lieux\r\n    const locations = await getOfflineLocations();\r\n    \r\n    if (locations.length === 0) {\r\n      console.log('[OfflineService] Aucune image de lieu à précharger');\r\n      return [];\r\n    }\r\n    \r\n    // Récupérer les URLs des images\r\n    const imageUrls = locations\r\n      .filter(location => location.image)\r\n      .map(location => {\r\n        const imagePath = location.image as string;\r\n        // Si l'URL est déjà absolue (commence par http ou https), la laisser telle quelle\r\n        if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\r\n          return imagePath;\r\n        }\r\n        // Sinon, ajouter la base URL\r\n        return getFullPath(imagePath);\r\n      });\r\n    \r\n    // Précharger chaque image\r\n    const preloadPromises = imageUrls.map(async (url) => {\r\n      try {\r\n        // Utiliser fetch pour précharger l'image et la mettre en cache\r\n        const response = await fetch(url, { \r\n          cache: 'force-cache',\r\n          headers: {\r\n            'Cache-Control': 'max-age=31536000', // 1 an\r\n          },\r\n          mode: 'no-cors' // Permet le chargement même en cas de problèmes CORS\r\n        });\r\n        \r\n        if (!response.ok && response.type !== 'opaque') {\r\n          throw new Error(`Erreur lors du chargement de l'image: ${response.status}`);\r\n        }\r\n        \r\n        // Créer un blob à partir de la réponse pour garantir que l'image est complètement téléchargée\r\n        const blob = await response.blob();\r\n        \r\n        // Stocker les métadonnées de l'image dans le cache\r\n        cacheManager.set(`${CACHE_KEYS.LOCATION_IMAGES}_${url}`, {\r\n          url,\r\n          size: blob.size,\r\n          type: blob.type,\r\n          timestamp: Date.now()\r\n        }, CACHE_EXPIRY);\r\n        \r\n        console.log(`[OfflineService] Image préchargée: ${url} (${blob.size} octets)`);\r\n        \r\n        // Également mettre en cache dans le cache du navigateur via le service worker\r\n        if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n          navigator.serviceWorker.controller.postMessage({\r\n            type: 'CACHE_LOCATION_IMAGE',\r\n            url\r\n          });\r\n        }\r\n        \r\n        return url;\r\n      } catch (error) {\r\n        console.error(`[OfflineService] Erreur lors du préchargement de l'image ${url}:`, error);\r\n        return null;\r\n      }\r\n    });\r\n    \r\n    const results = await Promise.all(preloadPromises);\r\n    const successfulUrls = results.filter(url => url !== null) as string[];\r\n    \r\n    console.log(`[OfflineService] ${successfulUrls.length}/${imageUrls.length} images préchargées`);\r\n    \r\n    return successfulUrls;\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement des images:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Précharge les images des historiques des lieux pour une utilisation hors-ligne\r\n * @returns Promise<string[]> Les URLs des images préchargées\r\n */\r\nexport const preloadHistoryImages = async (): Promise<string[]> => {\r\n  try {\r\n    console.log('[OfflineService] Préchargement des images des historiques');\r\n    \r\n    // Récupérer tous les lieux (pas seulement ceux liés aux événements sauvegardés)\r\n    const allLocations = getLocations();\r\n    \r\n    // Filtrer les lieux qui ont un historique et une image\r\n    const locationsWithHistory = allLocations.filter(location => \r\n      location.history && location.image\r\n    );\r\n    \r\n    if (locationsWithHistory.length === 0) {\r\n      console.log('[OfflineService] Aucune image d\\'historique à précharger');\r\n      return [];\r\n    }\r\n    \r\n    // Récupérer les URLs des images\r\n    const imageUrls = locationsWithHistory.map(location => {\r\n      const imagePath = location.image as string;\r\n      // Si l'URL est déjà absolue (commence par http ou https), la laisser telle quelle\r\n      if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\r\n        return imagePath;\r\n      }\r\n      // Sinon, ajouter la base URL\r\n      return getFullPath(imagePath);\r\n    });\r\n    \r\n    // Précharger chaque image\r\n    const preloadPromises = imageUrls.map(async (url) => {\r\n      try {\r\n        // Vérifier si l'image est déjà en cache\r\n        if (cacheManager.has(`${CACHE_KEYS.HISTORY_IMAGES}_${url}`)) {\r\n          console.log(`[OfflineService] Image d'historique déjà en cache: ${url}`);\r\n          return url;\r\n        }\r\n        \r\n        // Utiliser fetch pour précharger l'image et la mettre en cache\r\n        const response = await fetch(url, { \r\n          cache: 'force-cache',\r\n          headers: {\r\n            'Cache-Control': 'max-age=31536000', // 1 an\r\n          },\r\n          mode: 'no-cors' // Permet le chargement même en cas de problèmes CORS\r\n        });\r\n        \r\n        if (!response.ok && response.type !== 'opaque') {\r\n          throw new Error(`Erreur lors du chargement de l'image d'historique: ${response.status}`);\r\n        }\r\n        \r\n        // Créer un blob à partir de la réponse pour garantir que l'image est complètement téléchargée\r\n        const blob = await response.blob();\r\n        \r\n        // Stocker les métadonnées de l'image dans le cache\r\n        cacheManager.set(`${CACHE_KEYS.HISTORY_IMAGES}_${url}`, {\r\n          url,\r\n          size: blob.size,\r\n          type: blob.type,\r\n          timestamp: Date.now()\r\n        }, CACHE_EXPIRY);\r\n        \r\n        console.log(`[OfflineService] Image d'historique préchargée: ${url} (${blob.size} octets)`);\r\n        \r\n        // Également mettre en cache dans le cache du navigateur via le service worker\r\n        if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n          navigator.serviceWorker.controller.postMessage({\r\n            type: 'CACHE_HISTORY_IMAGE',\r\n            url\r\n          });\r\n        }\r\n        \r\n        return url;\r\n      } catch (error) {\r\n        console.error(`[OfflineService] Erreur lors du préchargement de l'image d'historique ${url}:`, error);\r\n        return null;\r\n      }\r\n    });\r\n    \r\n    const results = await Promise.all(preloadPromises);\r\n    const successfulUrls = results.filter(url => url !== null) as string[];\r\n    \r\n    console.log(`[OfflineService] ${successfulUrls.length}/${imageUrls.length} images d'historique préchargées`);\r\n    \r\n    return successfulUrls;\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement des images d\\'historique:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Précharge l'image de la carte pour une utilisation hors-ligne\r\n * @returns Promise<boolean> true si l'image a été préchargée avec succès\r\n */\r\nexport const preloadMapImage = async (): Promise<boolean> => {\r\n  try {\r\n    console.log('[OfflineService] Préchargement de l\\'image de la carte');\r\n    \r\n    const mapImageUrl = getFullPath('map-feydeau.png');\r\n    \r\n    // Utiliser fetch pour précharger l'image et la mettre en cache\r\n    const response = await fetch(mapImageUrl, { \r\n      cache: 'force-cache',\r\n      // Ajouter des options pour éviter les problèmes de cache\r\n      headers: {\r\n        'Cache-Control': 'max-age=31536000', // 1 an\r\n        'Pragma': 'no-cache' // Force le rechargement\r\n      },\r\n      mode: 'no-cors' // Permet le chargement même en cas de problèmes CORS\r\n    });\r\n    \r\n    if (!response.ok && response.type !== 'opaque') {\r\n      throw new Error(`Erreur lors du chargement de l'image de la carte: ${response.status}`);\r\n    }\r\n    \r\n    // Créer un blob à partir de la réponse pour garantir que l'image est complètement téléchargée\r\n    const blob = await response.blob();\r\n    \r\n    // Stocker l'URL de l'image et le blob dans le cache\r\n    cacheManager.set(CACHE_KEYS.MAP_IMAGE, {\r\n      url: mapImageUrl,\r\n      size: blob.size,\r\n      type: blob.type,\r\n      timestamp: Date.now()\r\n    }, CACHE_EXPIRY);\r\n    \r\n    console.log(`[OfflineService] Image de la carte préchargée (${blob.size} octets)`);\r\n    \r\n    // Également mettre en cache dans le cache du navigateur via le service worker\r\n    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.controller.postMessage({\r\n        type: 'CACHE_MAP_IMAGE',\r\n        url: mapImageUrl\r\n      });\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement de l\\'image de la carte:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Précharge toutes les données nécessaires pour le mode hors-ligne\r\n * @returns Promise<void>\r\n */\r\nexport const preloadAllOfflineData = async (): Promise<void> => {\r\n  try {\r\n    console.log('[OfflineService] Démarrage du préchargement des données hors-ligne');\r\n    \r\n    // Précharger l'image de la carte en premier (priorité élevée)\r\n    const mapPreloaded = await preloadMapImage();\r\n    console.log(`[OfflineService] Préchargement de la carte: ${mapPreloaded ? 'réussi' : 'échoué'}`);\r\n    \r\n    // Précharger les événements sauvegardés\r\n    await preloadSavedEvents();\r\n    \r\n    // Précharger les lieux\r\n    await preloadLocations();\r\n    \r\n    // Précharger les images des lieux\r\n    await preloadLocationImages();\r\n    \r\n    // Précharger les images des historiques des lieux\r\n    await preloadHistoryImages();\r\n    \r\n    // Si le préchargement de la carte a échoué, réessayer\r\n    if (!mapPreloaded) {\r\n      console.log('[OfflineService] Nouvelle tentative de préchargement de la carte');\r\n      await preloadMapImage();\r\n    }\r\n    \r\n    console.log('[OfflineService] Préchargement des données hors-ligne terminé');\r\n  } catch (error) {\r\n    console.error('[OfflineService] Erreur lors du préchargement des données hors-ligne:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Vérifie si les données hors-ligne sont disponibles\r\n * @returns boolean true si les données sont disponibles\r\n */\r\nexport const hasOfflineData = (): boolean => {\r\n  return cacheManager.has(CACHE_KEYS.SAVED_EVENTS) && \r\n         cacheManager.has(CACHE_KEYS.LOCATIONS) &&\r\n         cacheManager.has(CACHE_KEYS.MAP_IMAGE);\r\n};\r\n\r\n/**\r\n * Récupère l'image de la carte depuis le cache\r\n * @returns L'URL de l'image de la carte ou null si elle n'est pas en cache\r\n */\r\nexport const getOfflineMapImage = (): string | null => {\r\n  const mapImageData = cacheManager.get<{url: string}>(CACHE_KEYS.MAP_IMAGE);\r\n  return mapImageData ? mapImageData.url : null;\r\n};\r\n\r\n/**\r\n * Vérifie si une image d'historique est disponible dans le cache\r\n * @param url L'URL de l'image à vérifier\r\n * @returns boolean true si l'image est disponible dans le cache\r\n */\r\nexport const isHistoryImageCached = (url: string): boolean => {\r\n  return cacheManager.has(`${CACHE_KEYS.HISTORY_IMAGES}_${url}`);\r\n};\r\n\r\n/**\r\n * Précharge une image d'historique spécifique\r\n * @param url L'URL de l'image à précharger\r\n * @returns Promise<boolean> true si l'image a été préchargée avec succès\r\n */\r\nexport const preloadSingleHistoryImage = async (url: string): Promise<boolean> => {\r\n  try {\r\n    // Vérifier si l'image est déjà en cache\r\n    if (isHistoryImageCached(url)) {\r\n      console.log(`[OfflineService] Image déjà en cache: ${url}`);\r\n      return true;\r\n    }\r\n    \r\n    console.log(`[OfflineService] Préchargement de l'image: ${url}`);\r\n    \r\n    // Utiliser fetch pour précharger l'image et la mettre en cache\r\n    const response = await fetch(url, { \r\n      cache: 'force-cache',\r\n      headers: {\r\n        'Cache-Control': 'max-age=31536000', // 1 an\r\n      },\r\n      mode: 'no-cors' // Permet le chargement même en cas de problèmes CORS\r\n    });\r\n    \r\n    if (!response.ok && response.type !== 'opaque') {\r\n      throw new Error(`Erreur lors du chargement de l'image: ${response.status}`);\r\n    }\r\n    \r\n    // Créer un blob à partir de la réponse pour garantir que l'image est complètement téléchargée\r\n    const blob = await response.blob();\r\n    \r\n    // Stocker les métadonnées de l'image dans le cache\r\n    cacheManager.set(`${CACHE_KEYS.HISTORY_IMAGES}_${url}`, {\r\n      url,\r\n      size: blob.size,\r\n      type: blob.type,\r\n      timestamp: Date.now()\r\n    }, CACHE_EXPIRY);\r\n    \r\n    console.log(`[OfflineService] Image préchargée: ${url} (${blob.size} octets)`);\r\n    \r\n    // Également mettre en cache dans le cache du navigateur via le service worker\r\n    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.controller.postMessage({\r\n        type: 'CACHE_HISTORY_IMAGE',\r\n        url\r\n      });\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[OfflineService] Erreur lors du préchargement de l'image ${url}:`, error);\r\n    return false;\r\n  }\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { isOnline, addOnlineStatusListener, cacheEventsInServiceWorker, cacheMapImageInServiceWorker } from '@/utils/serviceWorkerRegistration';\r\nimport { preloadAllOfflineData, getOfflineSavedEvents, getOfflineLocations, preloadMapImage } from '@/services/offlineService';\r\nimport { getSavedEvents } from '@/services/savedEvents';\r\nimport { getLocations } from '@/data/locations';\r\n\r\n/**\r\n * Hook pour gérer le mode hors-ligne et le préchargement des données\r\n */\r\nexport const useOfflineMode = () => {\r\n  const [online, setOnline] = useState<boolean>(isOnline());\r\n  const [offlineReady, setOfflineReady] = useState<boolean>(false);\r\n  const [preloadingData, setPreloadingData] = useState<boolean>(false);\r\n\r\n  // Fonction pour précharger toutes les données nécessaires\r\n  const preloadData = useCallback(async () => {\r\n    if (preloadingData) return;\r\n    \r\n    try {\r\n      setPreloadingData(true);\r\n      console.log('[useOfflineMode] Démarrage du préchargement des données');\r\n      \r\n      // Précharger les données via le service offlineService\r\n      await preloadAllOfflineData();\r\n      \r\n      // Récupérer les événements sauvegardés et les lieux pour les mettre en cache dans le service worker\r\n      const savedEvents = getSavedEvents();\r\n      const locations = getLocations().filter(location => \r\n        savedEvents.some(event => event.locationId === location.id)\r\n      );\r\n      \r\n      // Mettre en cache les événements et les lieux dans le service worker\r\n      if (savedEvents.length > 0) {\r\n        cacheEventsInServiceWorker(savedEvents, locations);\r\n      }\r\n      \r\n      // Précharger l'image de la carte\r\n      await preloadMapImage();\r\n      cacheMapImageInServiceWorker();\r\n      \r\n      setOfflineReady(true);\r\n      console.log('[useOfflineMode] Préchargement des données terminé');\r\n    } catch (error) {\r\n      console.error('[useOfflineMode] Erreur lors du préchargement des données:', error);\r\n    } finally {\r\n      setPreloadingData(false);\r\n    }\r\n  }, [preloadingData]);\r\n\r\n  // Écouter les changements d'état de connexion\r\n  useEffect(() => {\r\n    const cleanup = addOnlineStatusListener((isOnline) => {\r\n      setOnline(isOnline);\r\n      \r\n      // Si l'utilisateur vient de se reconnecter, vérifier si les données hors-ligne sont prêtes\r\n      if (isOnline && !offlineReady && !preloadingData) {\r\n        preloadData();\r\n      }\r\n    });\r\n    \r\n    return () => {\r\n      if (cleanup) cleanup();\r\n    };\r\n  }, [offlineReady, preloadingData, preloadData]);\r\n\r\n  // Précharger les données au premier chargement si l'utilisateur est en ligne\r\n  useEffect(() => {\r\n    if (online && !offlineReady && !preloadingData) {\r\n      preloadData();\r\n    }\r\n  }, [online, offlineReady, preloadingData, preloadData]);\r\n\r\n  return {\r\n    online,\r\n    offlineReady,\r\n    preloadingData,\r\n    preloadData\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { useOfflineMode } from '@/hooks/useOfflineMode';\r\nimport WifiOff from 'lucide-react/dist/esm/icons/wifi-off';\r\nimport Loader2 from 'lucide-react/dist/esm/icons/loader-2';\r\nimport Check from 'lucide-react/dist/esm/icons/check';\r\n\r\n/**\r\n * Component that displays an indicator when the user is offline\r\n * and shows the status of offline data preloading\r\n */\r\nexport const OfflineIndicator: React.FC = () => {\r\n  const { online, offlineReady, preloadingData, preloadData } = useOfflineMode();\r\n  \r\n  // Si l'utilisateur est en ligne et que les données sont préchargées, ne rien afficher\r\n  if (online && offlineReady) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed bottom-16 left-0 right-0 z-50 flex justify-center pointer-events-none\">\r\n      <div \r\n        className={`px-4 py-2 rounded-full shadow-md flex items-center gap-2 pointer-events-auto ${!online ? 'bg-amber-100 text-amber-800' : 'bg-blue-100 text-blue-800'}`}\r\n      >\r\n        {!online && <WifiOff className=\"h-4 w-4\" />}\r\n        \r\n        {!online && (\r\n          <span className=\"text-sm font-medium\">\r\n            Mode hors ligne\r\n            {offlineReady && ' (données disponibles)'}\r\n          </span>\r\n        )}\r\n        \r\n        {online && !offlineReady && (\r\n          <>\r\n            {preloadingData ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                <span className=\"text-sm font-medium\">Préparation du mode hors-ligne...</span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span className=\"text-sm font-medium\">Préparer le mode hors-ligne</span>\r\n                <button \r\n                  onClick={() => preloadData()} \r\n                  className=\"ml-2 bg-blue-200 hover:bg-blue-300 text-blue-800 px-2 py-1 rounded text-xs\"\r\n                >\r\n                  Activer\r\n                </button>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n        \r\n        {online && offlineReady && (\r\n          <>\r\n            <Check className=\"h-4 w-4\" />\r\n            <span className=\"text-sm font-medium\">Mode hors-ligne prêt</span>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OfflineIndicator;\r\n","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\r\nimport { createLogger } from \"@/utils/logger\";\r\n\r\nconst logger = createLogger('LocationActivator');\r\n\r\ninterface LocationActivatorProps {\r\n  onLocationEnabled?: () => void;\r\n  onLocationDenied?: () => void;\r\n  onLocationDisabled?: () => void;\r\n}\r\n\r\n/**\r\n * Composant pour activer ou désactiver la géolocalisation\r\n */\r\nconst LocationActivator: React.FC<LocationActivatorProps> = ({\r\n  onLocationEnabled,\r\n  onLocationDenied,\r\n  onLocationDisabled\r\n}) => {\r\n  // Par défaut, le bouton est sur \"Activer localisation\"\r\n  const [isActive, setIsActive] = useState<boolean>(false);\r\n  \r\n  // Vérifier l'état initial de la localisation au chargement\r\n  useEffect(() => {\r\n    const locationConsent = localStorage.getItem('locationConsent');\r\n    // Mettre à jour l'état uniquement si le consentement est explicitement 'granted'\r\n    if (locationConsent === 'granted') {\r\n      setIsActive(true);\r\n    } else {\r\n      // S'assurer que l'état est à false si pas de consentement ou autre valeur\r\n      setIsActive(false);\r\n    }\r\n  }, []);\r\n  \r\n  const toggleLocation = () => {\r\n    if (isActive) {\r\n      // Désactiver la localisation\r\n      localStorage.removeItem('locationConsent');\r\n      setIsActive(false);\r\n      \r\n      \r\n      // Callback\r\n      if (onLocationDisabled) {\r\n        onLocationDisabled();\r\n      }\r\n      \r\n      return;\r\n    }\r\n    \r\n    // Activer la localisation\r\n    if (navigator.geolocation) {\r\n      logger.info('Demande d\\'autorisation de géolocalisation explicite');\r\n      \r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          // Succès\r\n          logger.info('Autorisation de géolocalisation accordée', {\r\n            coords: {\r\n              latitude: position.coords.latitude,\r\n              longitude: position.coords.longitude,\r\n              accuracy: position.coords.accuracy\r\n            }\r\n          });\r\n          \r\n          // Stocker le consentement\r\n          localStorage.setItem('locationConsent', 'granted');\r\n          \r\n          // Mettre à jour l'état du bouton\r\n          setIsActive(true);\r\n          \r\n          \r\n          // Callback\r\n          if (onLocationEnabled) {\r\n            onLocationEnabled();\r\n          }\r\n        },\r\n        (error) => {\r\n          // Erreur\r\n          logger.warn('Autorisation de géolocalisation refusée', { \r\n            code: error.code,\r\n            message: error.message\r\n          });\r\n          \r\n          \r\n          // Callback\r\n          if (onLocationDenied) {\r\n            onLocationDenied();\r\n          }\r\n        },\r\n        { \r\n          enableHighAccuracy: true, \r\n          timeout: 10000, \r\n          maximumAge: 0 \r\n        }\r\n      );\r\n    } else {\r\n      // Géolocalisation non supportée\r\n      logger.warn('Géolocalisation non supportée par le navigateur');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant={isActive ? \"destructive\" : \"default\"}\r\n      size=\"sm\"\r\n      className=\"flex items-center gap-1 font-medium\"\r\n      onClick={toggleLocation}\r\n    >\r\n      <MapPin className=\"h-4 w-4\" />\r\n      {isActive ? \"Désactiver localisation\" : \"Activer localisation\"}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default LocationActivator;\r\n","import React, { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport Volume2 from \"lucide-react/dist/esm/icons/volume-2\";\nimport VolumeX from \"lucide-react/dist/esm/icons/volume-x\";\n\n// Audio global partagé entre les instances du composant\nlet globalAudioElement: HTMLAudioElement | null = null;\nlet isGlobalAudioInitialized = false;\n\ninterface AudioActivatorProps {\n  onAudioEnabled?: () => void;\n  onAudioDisabled?: () => void;\n}\n\n/**\n * Composant pour activer ou désactiver le son d'ambiance\n * Utilise une variable globale pour maintenir l'état audio entre les pages\n */\nconst AudioActivator: React.FC<AudioActivatorProps> = ({\n  onAudioEnabled,\n  onAudioDisabled\n}) => {\n  // État local qui reflète l'état global\n  const [isActive, setIsActive] = useState<boolean>(() => {\n    const audioPreference = localStorage.getItem('audioEnabled');\n    return audioPreference === 'true';\n  });\n  \n  // Initialisation de l'audio global une seule fois\n  useEffect(() => {\n    if (!isGlobalAudioInitialized) {\n      // Créer l'élément audio s'il n'existe pas déjà\n      if (!globalAudioElement) {\n        globalAudioElement = new Audio();\n        globalAudioElement.loop = true;\n        globalAudioElement.volume = 0.5;\n        \n        // Déterminer le chemin audio en fonction de l'environnement\n        const audioPath = window.location.hostname.includes('github.io')\n          ? '/1Hall1Artiste/audio/Port-marchand.mp3'\n          : '/audio/Port-marchand.mp3';\n        \n        globalAudioElement.src = audioPath;\n      }\n      \n      isGlobalAudioInitialized = true;\n      \n      // Si l'audio était activé, le jouer\n      if (isActive && globalAudioElement) {\n        globalAudioElement.play().catch(error => {\n          console.warn('Impossible de lire l\\'audio automatiquement', error);\n        });\n      }\n    }\n  }, [isActive]);\n  \n  // Fonction pour gérer le clic sur le bouton\n  const handleToggleAudio = () => {\n    const newState = !isActive;\n    setIsActive(newState);\n    \n    // Sauvegarder la préférence\n    localStorage.setItem('audioEnabled', newState.toString());\n    \n    if (newState) {\n      // Activer le son\n      if (globalAudioElement) {\n        globalAudioElement.play().catch(error => {\n          console.warn('Impossible de lire l\\'audio', error);\n          setIsActive(false);\n          localStorage.setItem('audioEnabled', 'false');\n        });\n      }\n      \n      \n      // Callback\n      if (onAudioEnabled) {\n        onAudioEnabled();\n      }\n    } else {\n      // Désactiver le son\n      if (globalAudioElement) {\n        globalAudioElement.pause();\n      }\n      \n      \n      // Callback\n      if (onAudioDisabled) {\n        onAudioDisabled();\n      }\n    }\n  };\n\n  return (\n    <Button\n      variant={isActive ? \"destructive\" : \"default\"}\n      size=\"sm\"\n      className=\"flex items-center gap-1 font-medium\"\n      onClick={handleToggleAudio}\n    >\n      {isActive ? (\n        <>\n          <Volume2 className=\"h-4 w-4\" />\n          Désactiver son\n        </>\n      ) : (\n        <>\n          <VolumeX className=\"h-4 w-4\" />\n          Activer son\n        </>\n      )}\n    </Button>\n  );\n};\n\nexport default AudioActivator;\n","/**\r\n * Utilitaire pour gérer les chemins d'images en tenant compte du préfixe de base\r\n * pour GitHub Pages en production\r\n */\r\n\r\n// Utiliser la base URL dynamique définie dans index.html\r\nexport const getBasePath = (): string => {\r\n  // Récupérer la base URL depuis la configuration globale\r\n  if (typeof window !== 'undefined' && window.APP_CONFIG && window.APP_CONFIG.BASE_URL) {\r\n    // Enlever le slash final s'il existe pour la cohérence\r\n    const baseUrl = window.APP_CONFIG.BASE_URL.endsWith('/') \r\n      ? window.APP_CONFIG.BASE_URL.slice(0, -1) \r\n      : window.APP_CONFIG.BASE_URL;\r\n    return baseUrl;\r\n  }\r\n  \r\n  // Fallback pour le développement local ou si la configuration n'est pas disponible\r\n  return import.meta.env.PROD ? '/1Hall1Artiste' : '';\r\n};\r\n\r\n/**\r\n * Retourne le chemin complet d'une image en ajoutant le préfixe de base si nécessaire\r\n * @param path Chemin relatif de l'image (commençant par /)\r\n * @returns Chemin complet de l'image avec le préfixe de base si en production\r\n */\r\nexport function getImagePath(path: string): string {\r\n  // S'assurer que le chemin commence par un slash\r\n  const normalizedPath = path.startsWith('/') ? path : `/${path}`;\r\n  \r\n  // Encoder les espaces et caractères spéciaux pour les URL\r\n  // Mais préserver les slashes et autres caractères d'URL valides\r\n  const encodedPath = normalizedPath.split('/').map(segment => \r\n    segment ? encodeURIComponent(segment) : ''\r\n  ).join('/');\r\n  \r\n  // Utiliser la fonction getBasePath pour obtenir le préfixe dynamique\r\n  return `${getBasePath()}${encodedPath}`;\r\n}\r\n","/**\r\n * Coordonnées GPS précises pour les points d'intérêt de l'Île Feydeau\r\n * Ces coordonnées sont utilisées pour la localisation et la navigation\r\n */\r\n\r\n// Fonction pour convertir les coordonnées DMS (Degrés, Minutes, Secondes) en décimal\r\nconst dmsToDecimal = (degrees: number, minutes: number, seconds: number, direction: string): number => {\r\n  let decimal = degrees + minutes / 60 + seconds / 3600;\r\n  if (direction === 'S' || direction === 'W' || direction === 'O') {\r\n    decimal = -decimal;\r\n  }\r\n  return decimal;\r\n};\r\n\r\n// Fonction pour parser une chaîne de coordonnées DMS\r\nconst parseDMS = (dmsString: string): number => {\r\n  // Format attendu: 47°12'48.5\"N ou similaire\r\n  const regex = /(\\d+)°(\\d+)'([\\d.]+)\"([NSWE])/;\r\n  const match = dmsString.match(regex);\r\n  \r\n  if (match) {\r\n    const degrees = parseInt(match[1], 10);\r\n    const minutes = parseInt(match[2], 10);\r\n    const seconds = parseFloat(match[3]);\r\n    const direction = match[4];\r\n    \r\n    return dmsToDecimal(degrees, minutes, seconds, direction);\r\n  }\r\n  \r\n  // Si le format ne correspond pas, essayer de parser comme un nombre décimal\r\n  return parseFloat(dmsString);\r\n};\r\n\r\n// Coins de l'Île Feydeau avec coordonnées précises\r\nexport const FEYDEAU_CORNERS = {\r\n  topLeft: {\r\n    latitude: 47.213490,\r\n    longitude: -1.555052\r\n  },\r\n  topRight: {\r\n    latitude: 47.212850,\r\n    longitude: -1.554495\r\n  },\r\n  bottomLeft: {\r\n    latitude: 47.212509,\r\n    longitude: -1.557447\r\n  },\r\n  bottomRight: {\r\n    latitude: 47.21186198914097,\r\n    longitude: -1.5569021991319243\r\n  }\r\n};\r\n\r\n// Centre calculé de l'Île Feydeau basé sur les coins\r\nexport const FEYDEAU_CENTER = {\r\n  latitude: (FEYDEAU_CORNERS.topLeft.latitude + FEYDEAU_CORNERS.topRight.latitude + \r\n             FEYDEAU_CORNERS.bottomLeft.latitude + FEYDEAU_CORNERS.bottomRight.latitude) / 4,\r\n  longitude: (FEYDEAU_CORNERS.topLeft.longitude + FEYDEAU_CORNERS.topRight.longitude + \r\n              FEYDEAU_CORNERS.bottomLeft.longitude + FEYDEAU_CORNERS.bottomRight.longitude) / 4\r\n};\r\n\r\n// Calcul des dimensions approximatives de l'Île Feydeau en mètres\r\nconst EARTH_RADIUS = 6371000; // Rayon de la Terre en mètres\r\n\r\n// Calcul de la distance entre deux points GPS en mètres\r\nconst calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\r\n  const φ1 = lat1 * Math.PI / 180;\r\n  const φ2 = lat2 * Math.PI / 180;\r\n  const Δφ = (lat2 - lat1) * Math.PI / 180;\r\n  const Δλ = (lon2 - lon1) * Math.PI / 180;\r\n  \r\n  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\r\n            Math.cos(φ1) * Math.cos(φ2) *\r\n            Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  \r\n  return EARTH_RADIUS * c;\r\n};\r\n\r\n// Calcul de la largeur et de la hauteur de l'Île\r\nconst width = calculateDistance(\r\n  FEYDEAU_CORNERS.topLeft.latitude,\r\n  FEYDEAU_CORNERS.topLeft.longitude,\r\n  FEYDEAU_CORNERS.topRight.latitude,\r\n  FEYDEAU_CORNERS.topRight.longitude\r\n);\r\n\r\nconst height = calculateDistance(\r\n  FEYDEAU_CORNERS.topLeft.latitude,\r\n  FEYDEAU_CORNERS.topLeft.longitude,\r\n  FEYDEAU_CORNERS.bottomLeft.latitude,\r\n  FEYDEAU_CORNERS.bottomLeft.longitude\r\n);\r\n\r\nexport const FEYDEAU_DIMENSIONS = {\r\n  width,  // mètres (est-ouest)\r\n  height  // mètres (nord-sud)\r\n};\r\n\r\n// Type pour les coordonnées GPS d'un lieu\r\nexport type GpsCoordinate = {\r\n  id: string;      // ID du lieu (doit correspondre à l'ID dans locations.ts)\r\n  latitude: number;\r\n  longitude: number;\r\n};\r\n\r\n/**\r\n * Coordonnées GPS des points d'intérêt\r\n * Ces coordonnées sont calculées en fonction des coins de l'Île Feydeau\r\n * et de la position des points sur la carte\r\n */\r\n\r\n// Fonction pour interpoler les coordonnées GPS en fonction de la position relative sur la carte\r\nconst interpolateCoordinates = (relX: number, relY: number): { latitude: number, longitude: number } => {\r\n  // relX et relY sont des valeurs entre 0 et 1 représentant la position relative sur la carte\r\n  // 0,0 = coin supérieur gauche, 1,1 = coin inférieur droit\r\n  \r\n  // Interpolation linéaire pour la latitude (axe Y)\r\n  const latTop = FEYDEAU_CORNERS.topLeft.latitude * (1 - relX) + FEYDEAU_CORNERS.topRight.latitude * relX;\r\n  const latBottom = FEYDEAU_CORNERS.bottomLeft.latitude * (1 - relX) + FEYDEAU_CORNERS.bottomRight.latitude * relX;\r\n  const latitude = latTop * (1 - relY) + latBottom * relY;\r\n  \r\n  // Interpolation linéaire pour la longitude (axe X)\r\n  const lngLeft = FEYDEAU_CORNERS.topLeft.longitude * (1 - relY) + FEYDEAU_CORNERS.bottomLeft.longitude * relY;\r\n  const lngRight = FEYDEAU_CORNERS.topRight.longitude * (1 - relY) + FEYDEAU_CORNERS.bottomRight.longitude * relY;\r\n  const longitude = lngLeft * (1 - relX) + lngRight * relX;\r\n  \r\n  return { latitude, longitude };\r\n};\r\n\r\nexport const gpsCoordinates: GpsCoordinate[] = [\r\n  {\r\n    id: \"quai-turenne-8\",\r\n    // Quai Turenne 8 est en haut à droite sur la carte\r\n    ...interpolateCoordinates(0.8, 0.15)\r\n  },\r\n  {\r\n    id: \"quai-turenne-9\",\r\n    // Quai Turenne 9 est sur le côté droit, un peu plus bas\r\n    ...interpolateCoordinates(0.75, 0.25)\r\n  },\r\n  {\r\n    id: \"quai-turenne-9-concert\",\r\n    // Quai Turenne 9 Concert est sur le côté droit, un peu plus bas\r\n    ...interpolateCoordinates(0.75, 0.35)\r\n  },\r\n  {\r\n    id: \"quai-turenne-10\",\r\n    // Quai Turenne 10 est sur le côté droit, au milieu\r\n    ...interpolateCoordinates(0.75, 0.45)\r\n  },\r\n  {\r\n    id: \"rue-kervegan-17\",\r\n    // Rue Kervegan 17 est sur le côté droit, en bas\r\n    ...interpolateCoordinates(0.75, 0.65)\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-11\",\r\n    // Allée Duguay Trouin 11 est sur le côté gauche, au milieu\r\n    ...interpolateCoordinates(0.25, 0.45)\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-15\",\r\n    // Allée Duguay Trouin 15 est sur le côté gauche, en bas\r\n    ...interpolateCoordinates(0.25, 0.65)\r\n  },\r\n  {\r\n    id: \"allee-duguay-trouin-16\",\r\n    // Allée Duguay Trouin 16 est sur le côté gauche, tout en bas\r\n    ...interpolateCoordinates(0.25, 0.75)\r\n  },\r\n  {\r\n    id: \"rue-kervegan-32\",\r\n    // Rue Kervegan 32 est au milieu, en bas\r\n    ...interpolateCoordinates(0.5, 0.85)\r\n  },\r\n  {\r\n    id: \"rue-duguesclin\",\r\n    // Rue Duguesclin est au milieu\r\n    ...interpolateCoordinates(0.5, 0.5)\r\n  }\r\n];\r\n\r\n/**\r\n * Fonction pour obtenir les coordonnées GPS d'un lieu par son ID\r\n */\r\nexport function getGpsCoordinateById(locationId: string): GpsCoordinate | undefined {\r\n  return gpsCoordinates.find(coord => coord.id === locationId);\r\n}\r\n\r\n/**\r\n * Fonction pour convertir les coordonnées de la carte (x, y) en coordonnées GPS\r\n * Cette fonction est l'inverse de gpsToMapCoordinates dans UserLocation.tsx\r\n */\r\nexport function mapToGpsCoordinates(\r\n  x: number,\r\n  y: number,\r\n  mapWidth: number,\r\n  mapHeight: number\r\n): { latitude: number, longitude: number } {\r\n  // Calculer la distance en mètres par rapport au centre\r\n  const eastWestMeters = ((x - mapWidth / 2) / mapWidth) * FEYDEAU_DIMENSIONS.width;\r\n  const northSouthMeters = ((mapHeight / 2 - y) / mapHeight) * FEYDEAU_DIMENSIONS.height;\r\n  \r\n  // Conversion approximative de mètres en degrés (à cette latitude)\r\n  const metersPerLatDegree = 111000;\r\n  const metersPerLngDegree = 111000 * Math.cos(FEYDEAU_CENTER.latitude * Math.PI / 180);\r\n  \r\n  // Calculer les différences en degrés\r\n  const latDiff = northSouthMeters / metersPerLatDegree;\r\n  const lngDiff = eastWestMeters / metersPerLngDegree;\r\n  \r\n  // Calculer les coordonnées GPS\r\n  const latitude = FEYDEAU_CENTER.latitude + latDiff;\r\n  const longitude = FEYDEAU_CENTER.longitude + lngDiff;\r\n  \r\n  return { latitude, longitude };\r\n}\r\n","/**\n * Utilitaire pour convertir les coordonnées GPS en coordonnées de carte\n * en utilisant les coins de l'île Feydeau comme référence\n */\n\nimport { FEYDEAU_CORNERS } from '@/data/gpsCoordinates';\n\n// Définition des coins de la carte (coordonnées x,y)\nconst MAP_CORNERS = {\n  topLeft: { x: 100, y: 50 },     // Cours Olivier de Clisson (Nord-Ouest)\n  topRight: { x: 300, y: 50 },    // Quai Turenne (Nord-Est)\n  bottomLeft: { x: 100, y: 550 }, // Allée Duguay Trouin (Sud-Ouest)\n  bottomRight: { x: 300, y: 550 } // Quai Turenne (Sud-Est)\n};\n\n// Points de référence existants (GPS -> coordonnées carte)\nexport const referenceLocations = [\n  { \n    name: \"8 quai Turenne\",\n    gps: { latitude: 47.212746973313344, longitude: -1.5547571895170953 },\n    map: { x: 300, y: 108 }\n  },\n  { \n    name: \"9 quai Turenne\",\n    gps: { latitude: 47.21230600, longitude: -1.55698600 },\n    map: { x: 260, y: 150 }\n  },\n  { \n    name: \"10 quai Turenne\",\n    gps: { latitude: 47.213066264735716, longitude: -1.5555775290702223 },\n    map: { x: 260, y: 224 }\n  },\n  { \n    name: \"17 rue Kervégan\",\n    gps: { latitude: 47.21247281536768, longitude: -1.5562154487439073 },\n    map: { x: 220, y: 407 }\n  },\n  { \n    name: \"11 allée Duguay Trouin\",\n    gps: { latitude: 47.213066264735716, longitude: -1.5555775290702223 },\n    map: { x: 150, y: 186 }\n  },\n  { \n    name: \"15 allée Duguay Trouin\",\n    gps: { latitude: 47.21274016472948, longitude: -1.5567136782622693 },\n    map: { x: 105, y: 407 }\n  },\n  { \n    name: \"16 allée Duguay Trouin\",\n    gps: { latitude: 47.21265104842529, longitude: -1.5568766504416809 },\n    map: { x: 105, y: 450 }\n  },\n  { \n    name: \"32 rue Kervégan\",\n    gps: { latitude: 47.2123232, longitude: -1.5570202 },\n    map: { x: 185, y: 507 }\n  },\n  { \n    name: \"Rue Duguesclin\",\n    gps: { latitude: 47.21299917260203, longitude: -1.556253314217484 },\n    map: { x: 130, y: 310 }\n  },\n  {\n    name: \"Maison Jules Verne\",\n    gps: { latitude: 47.213307, longitude: -1.554879 },\n    map: { x: 170, y: 50 } // Coordonnées corrigées manuellement\n  }\n];\n\n/**\n * Calcule la distance entre deux points GPS\n */\nexport function calculateGPSDistance(\n  point1: { latitude: number; longitude: number },\n  point2: { latitude: number; longitude: number }\n): number {\n  return Math.sqrt(\n    Math.pow(point1.latitude - point2.latitude, 2) +\n    Math.pow(point1.longitude - point2.longitude, 2)\n  );\n}\n\n/**\n * Convertit les coordonnées GPS en coordonnées de carte (x, y)\n * en utilisant une transformation affine complète qui prend en compte l'inclinaison de l'île\n */\nexport function gpsToMapCoordinatesAffine(latitude: number, longitude: number): { x: number; y: number } {\n  // Définition des points de référence (coins de l'île Feydeau)\n  // Coordonnées GPS des quatre coins\n  const gpsPoints = [\n    { x: FEYDEAU_CORNERS.topLeft.longitude, y: FEYDEAU_CORNERS.topLeft.latitude },       // Nord-Ouest\n    { x: FEYDEAU_CORNERS.topRight.longitude, y: FEYDEAU_CORNERS.topRight.latitude },      // Nord-Est\n    { x: FEYDEAU_CORNERS.bottomLeft.longitude, y: FEYDEAU_CORNERS.bottomLeft.latitude },  // Sud-Ouest\n    { x: FEYDEAU_CORNERS.bottomRight.longitude, y: FEYDEAU_CORNERS.bottomRight.latitude } // Sud-Est\n  ];\n  \n  // Coordonnées correspondantes sur la carte\n  const mapPoints = [\n    { x: MAP_CORNERS.topLeft.x, y: MAP_CORNERS.topLeft.y },         // Nord-Ouest\n    { x: MAP_CORNERS.topRight.x, y: MAP_CORNERS.topRight.y },       // Nord-Est\n    { x: MAP_CORNERS.bottomLeft.x, y: MAP_CORNERS.bottomLeft.y },   // Sud-Ouest\n    { x: MAP_CORNERS.bottomRight.x, y: MAP_CORNERS.bottomRight.y }  // Sud-Est\n  ];\n  \n  // Calcul des coefficients de la transformation affine\n  // Pour une transformation affine complète, nous avons besoin de résoudre:\n  // x' = a*x + b*y + c\n  // y' = d*x + e*y + f\n  // où (x,y) sont les coordonnées GPS et (x',y') sont les coordonnées de la carte\n  \n  // Nous allons utiliser les quatre coins pour calculer les coefficients\n  // en résolvant un système d'équations linéaires\n  \n  // Première étape : calculer les coefficients pour la transformation de x\n  // Nous utilisons les trois premiers points pour créer un système 3x3\n  const matrixX = [\n    [gpsPoints[0].x, gpsPoints[0].y, 1],\n    [gpsPoints[1].x, gpsPoints[1].y, 1],\n    [gpsPoints[2].x, gpsPoints[2].y, 1]\n  ];\n  \n  const vectorX = [\n    mapPoints[0].x,\n    mapPoints[1].x,\n    mapPoints[2].x\n  ];\n  \n  // Deuxième étape : calculer les coefficients pour la transformation de y\n  const matrixY = [\n    [gpsPoints[0].x, gpsPoints[0].y, 1],\n    [gpsPoints[1].x, gpsPoints[1].y, 1],\n    [gpsPoints[2].x, gpsPoints[2].y, 1]\n  ];\n  \n  const vectorY = [\n    mapPoints[0].y,\n    mapPoints[1].y,\n    mapPoints[2].y\n  ];\n  \n  // Résoudre les systèmes d'équations pour obtenir les coefficients\n  const coeffX = solveLinearSystem(matrixX, vectorX);\n  const coeffY = solveLinearSystem(matrixY, vectorY);\n  \n  // Si nous n'avons pas pu résoudre le système, utiliser une approche de secours\n  if (!coeffX || !coeffY) {\n    // Approche de secours : interpolation linéaire simple\n    const lonMin = Math.min(...gpsPoints.map(p => p.x));\n    const lonMax = Math.max(...gpsPoints.map(p => p.x));\n    const latMin = Math.min(...gpsPoints.map(p => p.y));\n    const latMax = Math.max(...gpsPoints.map(p => p.y));\n    \n    const xMin = Math.min(...mapPoints.map(p => p.x));\n    const xMax = Math.max(...mapPoints.map(p => p.x));\n    const yMin = Math.min(...mapPoints.map(p => p.y));\n    const yMax = Math.max(...mapPoints.map(p => p.y));\n    \n    const relX = (longitude - lonMin) / (lonMax - lonMin);\n    const relY = 1 - ((latitude - latMin) / (latMax - latMin)); // Inversion pour Y\n    \n    const x = xMin + relX * (xMax - xMin);\n    const y = yMin + relY * (yMax - yMin);\n    \n    return { x: Math.round(x), y: Math.round(y) };\n  }\n  \n  // Appliquer la transformation affine aux coordonnées GPS d'entrée\n  const x = coeffX[0] * longitude + coeffX[1] * latitude + coeffX[2];\n  const y = coeffY[0] * longitude + coeffY[1] * latitude + coeffY[2];\n  \n  return { x: Math.round(x), y: Math.round(y) };\n}\n\n/**\n * Résout un système d'équations linéaires 3x3 en utilisant la règle de Cramer\n * @param matrix Matrice 3x3 des coefficients\n * @param vector Vecteur des termes constants\n * @returns Vecteur solution [a, b, c] ou null si le système n'a pas de solution unique\n */\nfunction solveLinearSystem(matrix: number[][], vector: number[]): number[] | null {\n  // Calcul du déterminant de la matrice principale\n  const det = determinant3x3(matrix);\n  \n  // Si le déterminant est proche de zéro, le système n'a pas de solution unique\n  if (Math.abs(det) < 1e-10) {\n    return null;\n  }\n  \n  // Créer les matrices pour chaque inconnue en remplaçant une colonne par le vecteur\n  const matrix1 = [\n    [vector[0], matrix[0][1], matrix[0][2]],\n    [vector[1], matrix[1][1], matrix[1][2]],\n    [vector[2], matrix[2][1], matrix[2][2]]\n  ];\n  \n  const matrix2 = [\n    [matrix[0][0], vector[0], matrix[0][2]],\n    [matrix[1][0], vector[1], matrix[1][2]],\n    [matrix[2][0], vector[2], matrix[2][2]]\n  ];\n  \n  const matrix3 = [\n    [matrix[0][0], matrix[0][1], vector[0]],\n    [matrix[1][0], matrix[1][1], vector[1]],\n    [matrix[2][0], matrix[2][1], vector[2]]\n  ];\n  \n  // Calculer les déterminants des matrices modifiées\n  const det1 = determinant3x3(matrix1);\n  const det2 = determinant3x3(matrix2);\n  const det3 = determinant3x3(matrix3);\n  \n  // Calculer les coefficients selon la règle de Cramer\n  return [det1 / det, det2 / det, det3 / det];\n}\n\n/**\n * Calcule le déterminant d'une matrice 3x3\n */\nfunction determinant3x3(matrix: number[][]): number {\n  return (\n    matrix[0][0] * (matrix[1][1] * matrix[2][2] - matrix[1][2] * matrix[2][1]) -\n    matrix[0][1] * (matrix[1][0] * matrix[2][2] - matrix[1][2] * matrix[2][0]) +\n    matrix[0][2] * (matrix[1][0] * matrix[2][1] - matrix[1][1] * matrix[2][0])\n  );\n}\n\n/**\n * Convertit les coordonnées GPS en coordonnées de carte (x, y)\n * en utilisant une triangulation basée sur les points de référence connus\n */\nexport function gpsToMapCoordinates(\n  latitude: number, \n  longitude: number\n): { x: number; y: number; nearestPoints: Array<{name: string, distance: number}> } {\n  // Trouver les trois points les plus proches\n  const sortedPoints = [...referenceLocations]\n    .map(point => ({\n      ...point,\n      distance: calculateGPSDistance(\n        { latitude, longitude },\n        point.gps\n      )\n    }))\n    .sort((a, b) => a.distance - b.distance);\n    \n  const nearestPoints = sortedPoints.slice(0, 3);\n\n  // Si un point est très proche, utiliser directement ses coordonnées\n  const veryClosePoint = nearestPoints.find(p => p.distance < 0.00005); // ~5m\n  if (veryClosePoint) {\n    return { \n      x: veryClosePoint.map.x, \n      y: veryClosePoint.map.y,\n      nearestPoints: nearestPoints.map(p => ({\n        name: p.name,\n        distance: p.distance\n      }))\n    };\n  }\n\n  // Calculer les poids inversement proportionnels à la distance\n  const totalDistance = nearestPoints.reduce((sum, p) => sum + p.distance, 0);\n  const weights = nearestPoints.map(p => {\n    // Éviter la division par zéro\n    if (p.distance === 0) return 1;\n    // Plus la distance est petite, plus le poids est grand\n    return (totalDistance - p.distance) / totalDistance;\n  });\n\n  // Normaliser les poids pour qu'ils somment à 1\n  const totalWeight = weights.reduce((sum, w) => sum + w, 0);\n  const normalizedWeights = weights.map(w => w / totalWeight);\n\n  // Calculer les coordonnées pondérées\n  let x = 0;\n  let y = 0;\n\n  for (let i = 0; i < nearestPoints.length; i++) {\n    x += nearestPoints[i].map.x * normalizedWeights[i];\n    y += nearestPoints[i].map.y * normalizedWeights[i];\n  }\n\n  return { \n    x: Math.round(x), \n    y: Math.round(y),\n    nearestPoints: nearestPoints.map(p => ({\n      name: p.name,\n      distance: p.distance\n    }))\n  };\n}\n\n/**\n * Fonction de test pour convertir des coordonnées GPS en coordonnées de carte\n */\nexport function testGPSConversion(latitude: number, longitude: number): string {\n  const resultTriangulation = gpsToMapCoordinates(latitude, longitude);\n  const resultAffine = gpsToMapCoordinatesAffine(latitude, longitude);\n  \n  let output = `Coordonnées GPS (${latitude}, ${longitude})\\n\\n`;\n  output += `Méthode triangulation: (${resultTriangulation.x}, ${resultTriangulation.y})\\n`;\n  output += `Méthode affine: (${resultAffine.x}, ${resultAffine.y})\\n\\n`;\n  output += \"Points les plus proches:\\n\";\n  \n  resultTriangulation.nearestPoints.forEach((point, index) => {\n    output += `${index + 1}. ${point.name} - Distance: ${point.distance.toFixed(8)}\\n`;\n  });\n  \n  return output;\n}\n","import { FEYDEAU_CENTER, FEYDEAU_CORNERS, FEYDEAU_DIMENSIONS } from \"@/data/gpsCoordinates\";\r\nimport { createLogger } from \"@/utils/logger\";\r\n\r\n// Créer un logger pour le module\r\nconst logger = createLogger('locationUtils');\r\n\r\n/**\r\n * Type représentant une position géographique\r\n */\r\nexport type GeoPosition = {\r\n  latitude: number;\r\n  longitude: number;\r\n  accuracy: number;\r\n};\r\n\r\n/**\r\n * Vérifie si une position GPS est à l'intérieur des limites de l'Île Feydeau\r\n * avec une tolérance augmentée pour une meilleure expérience utilisateur\r\n * @param position Position GPS à vérifier\r\n * @returns true si la position est dans les limites (avec tolérance), false sinon\r\n */\r\nexport function isPositionWithinFeydeau(position: GeoPosition): boolean {\r\n  const { latitude, longitude } = position;\r\n  \r\n  // Augmenter la marge de tolérance (environ 100 mètres)\r\n  const toleranceLatitude = 0.001; // Environ 100 mètres en latitude\r\n  const toleranceLongitude = 0.0014; // Environ 100 mètres en longitude à cette latitude\r\n  \r\n  // Limites de l'Île avec tolérance\r\n  const minLat = Math.min(FEYDEAU_CORNERS.bottomLeft.latitude, FEYDEAU_CORNERS.bottomRight.latitude) - toleranceLatitude;\r\n  const maxLat = Math.max(FEYDEAU_CORNERS.topLeft.latitude, FEYDEAU_CORNERS.topRight.latitude) + toleranceLatitude;\r\n  const minLng = Math.min(FEYDEAU_CORNERS.topLeft.longitude, FEYDEAU_CORNERS.bottomLeft.longitude) - toleranceLongitude;\r\n  const maxLng = Math.max(FEYDEAU_CORNERS.topRight.longitude, FEYDEAU_CORNERS.bottomRight.longitude) + toleranceLongitude;\r\n  \r\n  // Vérification avec tolérance: nous considérons l'Île comme un rectangle avec marge\r\n  const isWithinLatitude = latitude >= minLat && latitude <= maxLat;\r\n  const isWithinLongitude = longitude >= minLng && longitude <= maxLng;\r\n  \r\n  // Si la position est très proche du centre de l'Île, la considérer comme valide\r\n  const distanceToCenter = calculateDistanceToCenter(latitude, longitude);\r\n  if (distanceToCenter < 150) { // 150 mètres du centre\r\n    return true;\r\n  }\r\n  \r\n  return isWithinLatitude && isWithinLongitude;\r\n}\r\n\r\n/**\r\n * Calcule la distance approximative au centre de l'Île Feydeau\r\n * @param latitude Latitude de la position\r\n * @param longitude Longitude de la position\r\n * @returns Distance en mètres\r\n */\r\nexport function calculateDistanceToCenter(latitude: number, longitude: number): number {\r\n  const R = 6371000; // Rayon de la Terre en mètres\r\n  const lat1 = latitude * Math.PI / 180;\r\n  const lat2 = FEYDEAU_CENTER.latitude * Math.PI / 180;\r\n  const deltaLat = (FEYDEAU_CENTER.latitude - latitude) * Math.PI / 180;\r\n  const deltaLng = (FEYDEAU_CENTER.longitude - longitude) * Math.PI / 180;\r\n  \r\n  const a = Math.sin(deltaLat/2) * Math.sin(deltaLat/2) +\r\n            Math.cos(lat1) * Math.cos(lat2) *\r\n            Math.sin(deltaLng/2) * Math.sin(deltaLng/2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n  \r\n  return R * c; // Distance en mètres\r\n}\r\n\r\n/**\r\n * Calcule la direction vers l'Île Feydeau depuis une position extérieure\r\n * @param position Position GPS actuelle\r\n * @returns Direction en texte (nord, sud-est, etc.)\r\n */\r\nexport function getDirectionToFeydeau(position: GeoPosition): string {\r\n  const { latitude, longitude } = position;\r\n  \r\n  // Calcul de l'angle par rapport au centre de l'Île\r\n  const y = Math.sin(FEYDEAU_CENTER.longitude - longitude) * Math.cos(FEYDEAU_CENTER.latitude);\r\n  const x = Math.cos(latitude) * Math.sin(FEYDEAU_CENTER.latitude) - \r\n            Math.sin(latitude) * Math.cos(FEYDEAU_CENTER.latitude) * \r\n            Math.cos(FEYDEAU_CENTER.longitude - longitude);\r\n  let angle = Math.atan2(y, x) * 180 / Math.PI;\r\n  \r\n  // Convertir en angle positif (0-360°)\r\n  angle = (angle + 360) % 360;\r\n  \r\n  // Convertir l'angle en direction cardinale\r\n  if (angle >= 337.5 || angle < 22.5) return \"nord\";\r\n  if (angle >= 22.5 && angle < 67.5) return \"nord-est\";\r\n  if (angle >= 67.5 && angle < 112.5) return \"est\";\r\n  if (angle >= 112.5 && angle < 157.5) return \"sud-est\";\r\n  if (angle >= 157.5 && angle < 202.5) return \"sud\";\r\n  if (angle >= 202.5 && angle < 247.5) return \"sud-ouest\";\r\n  if (angle >= 247.5 && angle < 292.5) return \"ouest\";\r\n  return \"nord-ouest\";\r\n}\r\n\r\n/**\r\n * Détermine si une notification de position doit être affichée\r\n * en fonction de différents critères pour éviter de spammer l'utilisateur\r\n * @param isWithinFeydeau Si l'utilisateur est dans l'Île Feydeau\r\n * @param isFirstPosition Si c'est la première position reçue\r\n * @param isRecentlyActivated Si la localisation vient d'être activée\r\n * @param isFarFromCenter Si l'utilisateur est loin du centre\r\n * @returns true si une notification peut être affichée, false sinon\r\n */\r\nexport function shouldShowLocationNotification(\r\n  isWithinFeydeau: boolean,\r\n  isFirstPosition: boolean,\r\n  isRecentlyActivated: boolean,\r\n  isFarFromCenter: boolean\r\n): boolean {\r\n  // Ne pas afficher de notification si:\r\n  // - L'utilisateur est dans l'Île Feydeau\r\n  // - C'est la première position reçue\r\n  // - La localisation vient d'être activée\r\n  // - L'utilisateur n'est pas assez loin du centre\r\n  return !isWithinFeydeau && !isFirstPosition && !isRecentlyActivated && isFarFromCenter;\r\n}\r\n\r\n/**\r\n * Génère un offset aléatoire pour la simulation de position\r\n * @returns Un offset aléatoire pour la latitude et la longitude\r\n */\r\nexport function generateRandomPositionOffset(): { latOffset: number, lngOffset: number } {\r\n  return {\r\n    latOffset: (Math.random() - 0.5) * 0.0002, // Environ ±10 mètres en latitude\r\n    lngOffset: (Math.random() - 0.5) * 0.0002  // Environ ±10 mètres en longitude\r\n  };\r\n}\r\n","import { toast as showToast } from \"@/components/ui/use-toast\";\nimport type { ToastActionElement } from \"@/components/ui/toast\";\nimport { createLogger } from \"@/utils/logger\";\n\n// Créer un logger dédié pour les toasts\nconst logger = createLogger('ToastService');\n\n// Types pour les toasts\nexport type ToastType = 'info' | 'success' | 'warning' | 'error';\nexport type ToastOptions = {\n  title: string;\n  description?: string;\n  variant?: 'default' | 'destructive';\n  duration?: number;\n  action?: ToastActionElement;\n  source?: string; // Composant ou fonction qui a déclenché le toast\n  context?: Record<string, any>; // Contexte supplémentaire pour le logging\n};\n\n/**\n * Service centralisé pour la gestion des toasts\n * Permet de logger systématiquement les toasts et leurs conditions d'apparition\n */\nclass ToastService {\n  /**\n   * Affiche un toast et le log\n   */\n  show(options: ToastOptions): void {\n    const { title, description, variant = 'default', duration, action, source, context } = options;\n    \n    // Déterminer le type de toast en fonction du variant\n    const toastType: ToastType = variant === 'destructive' ? 'error' : 'info';\n    \n    // Afficher le toast\n    showToast({\n      title,\n      description,\n      variant,\n      duration,\n      action\n    });\n    \n    // Logger le toast avec son contexte\n    this.logToast(title, toastType, description, source, context);\n  }\n  \n  /**\n   * Affiche un toast de succès\n   */\n  success(options: Omit<ToastOptions, 'variant'>): void {\n    this.show({\n      ...options,\n      variant: 'default'\n    });\n  }\n  \n  /**\n   * Affiche un toast d'erreur\n   */\n  error(options: Omit<ToastOptions, 'variant'>): void {\n    this.show({\n      ...options,\n      variant: 'destructive'\n    });\n  }\n  \n  /**\n   * Affiche un toast d'information sur la localisation\n   */\n  location(options: Omit<ToastOptions, 'source'>): void {\n    this.show({\n      ...options,\n      source: 'LocationService'\n    });\n  }\n  \n  /**\n   * Log un toast dans la console\n   * Désactivation des logs systématiques pour réduire le bruit dans la console\n   * Seuls les toasts de type error sont loggés pour faciliter le débogage\n   */\n  private logToast(\n    message: string,\n    type: ToastType,\n    description?: string,\n    source?: string,\n    context?: Record<string, any>\n  ): void {\n    // Ne logger que les toasts d'erreur pour réduire le bruit dans la console\n    if (type === 'error') {\n      const logMessage = `Toast [${type}]: ${message}${description ? ` - ${description}` : ''}`;\n      const logContext = {\n        source: source || 'Unknown',\n        ...context\n      };\n      logger.warn(logMessage, logContext);\n    }\n    // Les autres types de toasts (info, success, warning) ne génèrent plus de logs\n  }\n}\n\n// Exporter une instance unique du service\nexport const toastService = new ToastService();\n","import { createLogger } from \"@/utils/logger\";\nimport { GeoPosition, isPositionWithinFeydeau, calculateDistanceToCenter } from \"@/utils/locationUtils\";\nimport { FEYDEAU_CENTER } from \"@/data/gpsCoordinates\";\nimport { toastService } from \"@/services/toastService\";\n\n// Créer un logger pour le service avec filtrage des logs indésirables\nconst originalLogger = createLogger('locationService');\n\n// Wrapper pour filtrer les logs indésirables\nconst logger = {\n  info: (message: string, data?: any) => {\n    // Filtrer les logs liés à la position et au marqueur utilisateur\n    if (message.includes('Position utilisateur') || \n        message.includes('Rendu du marqueur') || \n        message.includes('mise à jour')) {\n      // Préserver les logs d'éloignement\n      if (message.includes('Toast d\\'éloignement')) {\n        return originalLogger.info(message, data);\n      }\n      // Ignorer les autres logs indésirables\n      return;\n    }\n    return originalLogger.info(message, data);\n  },\n  warn: originalLogger.warn,\n  error: originalLogger.error,\n  debug: (message: string, data?: any) => {\n    // Filtrer les logs de debug liés à la position et au marqueur\n    if (message.includes('Position utilisateur') || \n        message.includes('Rendu du marqueur') || \n        message.includes('mise à jour')) {\n      return;\n    }\n    return originalLogger.debug(message, data);\n  }\n};\n\n// Constantes pour le service de localisation\nconst LOCATION_UPDATE_INTERVAL = 5000; // 5 secondes\nconst LOCATION_TIMEOUT = 10000; // 10 secondes\nconst LOCATION_MAX_AGE = 30000; // 30 secondes\nconst LOCATION_CONSENT_KEY = 'locationConsent';\nconst LOCATION_ACTIVATION_TIMESTAMP_KEY = 'locationActivationTimestamp';\nconst RECENT_ACTIVATION_THRESHOLD = 5000; // 5 secondes\n\n// Options pour la géolocalisation\nconst geoOptions: PositionOptions = {\n  enableHighAccuracy: true,\n  timeout: LOCATION_TIMEOUT,\n  maximumAge: LOCATION_MAX_AGE\n};\n\n// Type pour les callbacks de mise à jour de position\nexport type LocationUpdateCallback = (position: GeoPosition) => void;\nexport type MapCoordinatesUpdateCallback = (x: number, y: number, position?: GeoPosition) => void;\nexport type PermissionChangeCallback = (denied: boolean) => void;\n\n// Interface pour le service de localisation\nexport interface LocationServiceInterface {\n  startTracking: (\n    onLocationUpdate: MapCoordinatesUpdateCallback,\n    onPermissionChange?: PermissionChangeCallback\n  ) => void;\n  stopTracking: () => void;\n  isLocationActivated: () => boolean;\n  activateLocation: () => void;\n  deactivateLocation: () => void;\n}\n\n/**\n * Service pour gérer le suivi de la localisation de l'utilisateur\n */\nclass LocationService implements LocationServiceInterface {\n  private watchId: number | null = null;\n  private lastPosition: GeoPosition | null = null;\n  private onLocationUpdateCallback: MapCoordinatesUpdateCallback | null = null;\n  private onPermissionChangeCallback: PermissionChangeCallback | null = null;\n  private permissionDenied: boolean = false;\n  private isLocalDevelopment: boolean = false;\n  private simulationInterval: number | null = null;\n\n  constructor() {\n    // Détecter si nous sommes en environnement de développement local\n    // Pour les tests sur le terrain, on force cette valeur à true pour tester le mode simulation\n    this.isLocalDevelopment = false;\n    \n    // Vérifier si la géolocalisation est disponible\n    if (!navigator.geolocation && !this.isLocalDevelopment) {\n      logger.warn('La géolocalisation n\\'est pas prise en charge par ce navigateur');\n    }\n    \n    // Ajouter un gestionnaire d'événement pour détecter quand l'application revient au premier plan\n    document.addEventListener('visibilitychange', this.handleVisibilityChange.bind(this));\n  }\n\n  /**\n   * Gère les changements de visibilité de la page\n   * Réinitialise le suivi de localisation quand l'application revient au premier plan\n   */\n  private handleVisibilityChange(): void {\n    // Si la page redevient visible et que le suivi est actif\n    if (document.visibilityState === 'visible' && this.watchId !== null && this.isLocationActivated()) {\n      logger.info('Application revenue au premier plan, réinitialisation du suivi de localisation');\n      \n      // Stocker temporairement les callbacks\n      const updateCallback = this.onLocationUpdateCallback;\n      const permissionCallback = this.onPermissionChangeCallback;\n      \n      // Arrêter le suivi actuel\n      this.stopTracking();\n      \n      // Redémarrer le suivi avec les mêmes callbacks\n      if (updateCallback) {\n        setTimeout(() => {\n          this.startTracking(updateCallback, permissionCallback || undefined);\n        }, 500); // Petit délai pour s'assurer que l'arrêt est bien effectué\n      }\n    }\n  }\n  \n  /**\n   * Démarre le suivi de la localisation\n   * @param onLocationUpdate Callback pour les mises à jour de position sur la carte\n   * @param onPermissionChange Callback pour les changements d'état de permission\n   */\n  public startTracking(\n    onLocationUpdate: MapCoordinatesUpdateCallback,\n    onPermissionChange?: PermissionChangeCallback\n  ): void {\n    this.onLocationUpdateCallback = onLocationUpdate;\n    this.onPermissionChangeCallback = onPermissionChange || null;\n    \n    // Réinitialiser l'état de permission refusée au démarrage\n    this.permissionDenied = false;\n    \n    // Notifier que la permission n'est pas refusée\n    this.notifyPermissionChange(false);\n    \n    // Si la localisation n'est pas activée, ne pas démarrer le suivi\n    if (!this.isLocationActivated()) {\n      logger.info('La localisation n\\'est pas activée, le suivi ne démarre pas');\n      return;\n    }\n    \n    // En mode développement local, simuler la position\n    if (this.isLocalDevelopment) {\n      this.startPositionSimulation();\n      return;\n    }\n    \n    // Vérifier si la géolocalisation est disponible\n    if (!navigator.geolocation) {\n      logger.warn('La géolocalisation n\\'est pas prise en charge par ce navigateur');\n      toastService.error({\n        title: \"Localisation non disponible\",\n        description: \"Votre navigateur ne prend pas en charge la géolocalisation.\",\n        source: \"LocationService.startTracking\",\n        context: {\n          browserSupport: false\n        }\n      });\n      return;\n    }\n    \n    // Forcer une demande d'autorisation de géolocalisation immédiatement\n    navigator.geolocation.getCurrentPosition(\n      this.handlePositionSuccess.bind(this),\n      this.handlePositionError.bind(this),\n      geoOptions\n    );\n    \n    // Démarrer le suivi de la position\n    const id = navigator.geolocation.watchPosition(\n      this.handlePositionSuccess.bind(this),\n      this.handlePositionError.bind(this),\n      geoOptions\n    );\n    \n    this.watchId = id;\n    // Log de démarrage supprimé pour réduire le bruit dans la console\n  }\n\n  /**\n   * Arrête le suivi de la localisation\n   */\n  public stopTracking(): void {\n    // Arrêter la simulation si elle est active\n    if (this.simulationInterval !== null) {\n      window.clearInterval(this.simulationInterval);\n      this.simulationInterval = null;\n      // Log d'arrêt de simulation supprimé pour réduire le bruit dans la console\n    }\n    \n    // Arrêter le suivi si actif\n    if (this.watchId !== null) {\n      navigator.geolocation.clearWatch(this.watchId);\n      this.watchId = null;\n      // Log d'arrêt de suivi supprimé pour réduire le bruit dans la console\n    }\n    \n    // Réinitialiser les callbacks\n    this.onLocationUpdateCallback = null;\n    this.onPermissionChangeCallback = null;\n  }\n\n  /**\n   * Vérifie si la localisation est activée\n   * @returns true si la localisation est activée, false sinon\n   */\n  public isLocationActivated(): boolean {\n    return localStorage.getItem(LOCATION_CONSENT_KEY) === 'granted';\n  }\n\n  /**\n   * Active la localisation\n   */\n  public activateLocation(): void {\n    localStorage.setItem(LOCATION_CONSENT_KEY, 'granted');\n    localStorage.setItem(LOCATION_ACTIVATION_TIMESTAMP_KEY, Date.now().toString());\n    // Suppression du log pour réduire le bruit dans la console\n    \n    toastService.success({\n      title: \"Localisation activée\",\n      description: \"Vous pouvez maintenant voir votre position sur la carte.\",\n      duration: 3000,\n      source: \"LocationService.activateLocation\",\n      context: {\n        timestamp: Date.now()\n      }\n    });\n  }\n\n  /**\n   * Désactive la localisation\n   */\n  public deactivateLocation(): void {\n    localStorage.removeItem(LOCATION_CONSENT_KEY);\n    localStorage.removeItem(LOCATION_ACTIVATION_TIMESTAMP_KEY);\n    // Suppression du log pour réduire le bruit dans la console\n    \n    toastService.show({\n      title: \"Localisation désactivée\",\n      description: \"Votre position ne sera plus suivie.\",\n      duration: 3000,\n      source: \"LocationService.deactivateLocation\",\n      context: {\n        timestamp: Date.now()\n      }\n    });\n    \n    // Arrêter le suivi\n    this.stopTracking();\n  }\n\n  /**\n   * Vérifie si la localisation a été activée récemment\n   * @returns true si la localisation a été activée il y a moins de RECENT_ACTIVATION_THRESHOLD ms\n   */\n  private isRecentlyActivated(): boolean {\n    const activationTimestamp = localStorage.getItem(LOCATION_ACTIVATION_TIMESTAMP_KEY);\n    if (!activationTimestamp) return false;\n    \n    const timestamp = parseInt(activationTimestamp, 10);\n    const now = Date.now();\n    return now - timestamp < RECENT_ACTIVATION_THRESHOLD;\n  }\n\n  /**\n   * Notifie le changement d'état de permission\n   * @param denied true si la permission est refusée, false sinon\n   */\n  private notifyPermissionChange(denied: boolean): void {\n    if (this.permissionDenied !== denied) {\n      this.permissionDenied = denied;\n      \n      if (this.onPermissionChangeCallback) {\n        this.onPermissionChangeCallback(denied);\n      }\n    }\n  }\n\n  /**\n   * Gère le succès de la géolocalisation\n   * @param pos Position reçue du navigateur\n   */\n  private handlePositionSuccess(pos: GeolocationPosition): void {\n    // Extraire les données de position\n    const position: GeoPosition = {\n      latitude: pos.coords.latitude,\n      longitude: pos.coords.longitude,\n      accuracy: pos.coords.accuracy\n    };\n    \n    // Enregistrer la position\n    this.lastPosition = position;\n    \n    // Désactivation complète des logs de position pour éviter de surcharger la console\n    // Les logs ne seront générés que pour les événements importants (démarrage/arrêt du suivi, erreurs)\n    \n    // Convertir les coordonnées GPS en coordonnées de carte\n    // Cette conversion est gérée par le composant qui utilise ce service\n    \n    // Vérifier si l'utilisateur est dans l'Île Feydeau\n    const isWithin = isPositionWithinFeydeau(position);\n    \n    // Calculer la distance au centre\n    const distanceToCenter = calculateDistanceToCenter(position.latitude, position.longitude);\n    const isFarFromCenter = distanceToCenter > 300; // Plus de 300 mètres\n    \n    // Déterminer s'il faut afficher une notification\n    const isFirstPosition = this.lastPosition === position;\n    const isRecentlyActivated = this.isRecentlyActivated();\n    \n    // Afficher une notification si l'utilisateur est loin de l'Île\n    if (!isWithin && !isFirstPosition && !isRecentlyActivated && isFarFromCenter) {\n      // Cette notification est maintenant gérée par le composant qui utilise ce service\r\n    }\r\n    \r\n    // Notifier la mise à jour de position\r\n    if (this.onLocationUpdateCallback) {\r\n      // Le callback doit gérer la conversion GPS -> carte\r\n      this.onLocationUpdateCallback(0, 0, position);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gère les erreurs de géolocalisation\r\n   * @param err Erreur de géolocalisation\r\n   */\r\n  private handlePositionError(err: GeolocationPositionError): void {\r\n    // Ne pas logger les erreurs de timeout, elles sont normales\r\n    if (err.code !== err.TIMEOUT) {\r\n      logger.error('Erreur de géolocalisation', {\r\n        code: err.code,\r\n        message: err.message\r\n      });\r\n    }\r\n    \r\n    // Gérer les différents types d'erreurs\r\n    switch (err.code) {\r\n      case err.PERMISSION_DENIED:\r\n        this.notifyPermissionChange(true);\r\n        break;\r\n        \r\n      case err.POSITION_UNAVAILABLE:\r\n        // Notification gérée par le composant\r\n        break;\r\n        \r\n      case err.TIMEOUT:\r\n        // Ignorer les timeouts, ils sont normaux\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Démarre la simulation de position pour le développement local\r\n   */\r\n  private startPositionSimulation(): void {\r\n    // Suppression du log pour réduire le bruit dans la console\r\n    \r\n    // Simuler une position initiale au centre de l'Île Feydeau (utiliser les coordonnées du point de référence)\r\n    const initialPosition: GeoPosition = {\r\n      latitude: 47.212600, // Centre de référence de la carte\r\n      longitude: -1.555900, // Centre de référence de la carte\r\n      accuracy: 10 // 10 mètres de précision\r\n    };\r\n    \r\n    // Notifier immédiatement avec la position initiale\r\n    this.handlePositionSuccess({\r\n      coords: {\r\n        latitude: initialPosition.latitude,\r\n        longitude: initialPosition.longitude,\r\n        accuracy: initialPosition.accuracy,\r\n        altitude: null,\r\n        altitudeAccuracy: null,\r\n        heading: null,\r\n        speed: null\r\n      },\r\n      timestamp: Date.now()\r\n    } as GeolocationPosition);\r\n    \r\n    // Mettre à jour la position simulée périodiquement\r\n    this.simulationInterval = window.setInterval(() => {\r\n      // Générer une légère variation aléatoire pour simuler un mouvement\r\n      const latOffset = (Math.random() - 0.5) * 0.0002; // Environ ±10 mètres\r\n      const lngOffset = (Math.random() - 0.5) * 0.0002; // Environ ±10 mètres\r\n      \r\n      const simulatedPosition: GeoPosition = {\r\n        latitude: 47.212600 + latOffset, // Centre de référence de la carte + offset\r\n        longitude: -1.555900 + lngOffset, // Centre de référence de la carte + offset\r\n        accuracy: 5 + Math.random() * 10 // Entre 5 et 15 mètres de précision\r\n      };\r\n      \r\n      // Notifier avec la position simulée\r\n      this.handlePositionSuccess({\r\n        coords: {\r\n          latitude: simulatedPosition.latitude,\r\n          longitude: simulatedPosition.longitude,\r\n          accuracy: simulatedPosition.accuracy,\r\n          altitude: null,\r\n          altitudeAccuracy: null,\r\n          heading: null,\r\n          speed: null\r\n        },\r\n        timestamp: Date.now()\r\n      } as GeolocationPosition);\r\n    }, LOCATION_UPDATE_INTERVAL);\r\n  }\r\n}\r\n\r\n// Exporter une instance unique du service\r\nexport const locationService = new LocationService();\r\n","import React, { useEffect, useState, useRef } from 'react';\nimport { createLogger } from \"@/utils/logger\";\nimport { ToastAction } from \"@/components/ui/toast\";\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\nimport Navigation from \"lucide-react/dist/esm/icons/navigation\";\nimport { FEYDEAU_DIMENSIONS } from \"@/data/gpsCoordinates\";\nimport { gpsToMapCoordinatesAffine as gpsToMapCoordinates } from \"@/utils/gpsConverter\";\nimport { GeoPosition, isPositionWithinFeydeau, getDirectionToFeydeau, calculateDistanceToCenter } from \"@/utils/locationUtils\";\nimport { locationService } from \"@/services/locationService\";\nimport { toastService } from \"@/services/toastService\";\n\n// Créer un logger pour le composant\nconst logger = createLogger('UserLocation');\n\n// Dimensions de la carte en pixels (importées de MapComponent)\nexport const MAP_WIDTH = 400;\nexport const MAP_HEIGHT = 600;\n\nexport type UserLocationProps = {\n  onLocationUpdate?: (x: number, y: number, gpsPosition?: GeoPosition) => void;\n  showNavigation?: boolean;\n  onPermissionChange?: (denied: boolean) => void;\n  scale?: number; // Facteur d'échelle de la carte\n};\n\n// Réexporter le type GeoPosition pour la compatibilité avec le code existant\nexport type { GeoPosition };\n\n// Constantes pour la gestion des notifications\nconst LOCATION_ACTIVATION_TIMESTAMP_KEY = 'locationActivationTimestamp';\nconst RECENT_ACTIVATION_THRESHOLD = 5000; // 5 secondes\nconst LOCATION_NOTIFICATION_TIMESTAMP_KEY = 'locationNotificationTimestamp';\nconst LOCATION_NOTIFICATION_KEY = 'lastLocationNotificationKey';\nconst LOCATION_NOTIFICATION_COOLDOWN = 30 * 60 * 1000; // 30 minutes en millisecondes\nconst NOTIFICATION_THROTTLE_DURATION = 300000; // 5 minutes (300000 ms)\n\n/**\n * Composant pour gérer et afficher la localisation de l'utilisateur sur la carte\n */\nconst UserLocation: React.FC<UserLocationProps> = ({ \n  onLocationUpdate,\n  showNavigation = false,\n  onPermissionChange,\n  scale = 1 // Valeur par défaut de 1 si non fourni\n}) => {\n  const [position, setPosition] = useState<GeoPosition | null>(null);\n  const [mapCoords, setMapCoords] = useState<{ x: number, y: number } | null>(null);\n  const [permissionDenied, setPermissionDenied] = useState(false);\n  const firstPositionRef = useRef(true);\n  const lastNotificationRef = useRef<string | null>(null);\n  \n  // Fonction pour vérifier si la localisation a été activée récemment\n  const isRecentlyActivated = (): boolean => {\n    const activationTimestamp = localStorage.getItem(LOCATION_ACTIVATION_TIMESTAMP_KEY);\n    if (!activationTimestamp) return false;\n    \n    const timestamp = parseInt(activationTimestamp, 10);\n    const now = Date.now();\n    return now - timestamp < RECENT_ACTIVATION_THRESHOLD;\n  };\n  \n  // Fonction pour vérifier si une notification peut être affichée\n  const canShowNotification = (notificationKey: string): boolean => {\n    const now = Date.now();\n    const lastNotificationTimestamp = localStorage.getItem(LOCATION_NOTIFICATION_TIMESTAMP_KEY);\n    const lastNotificationKey = localStorage.getItem(LOCATION_NOTIFICATION_KEY);\n    \n    if (lastNotificationTimestamp) {\n      const lastTime = parseInt(lastNotificationTimestamp, 10);\n      \n      // Si moins de 30 minutes se sont écoulées, ne pas afficher\n      if (now - lastTime < LOCATION_NOTIFICATION_COOLDOWN) {\n        return false;\n      }\n      \n      // Vérifier si c'est la même notification\n      if (lastNotificationKey === notificationKey) {\n        return false;\n      }\n    }\n    \n    // Mettre à jour le timestamp et la clé de la dernière notification\n    localStorage.setItem(LOCATION_NOTIFICATION_TIMESTAMP_KEY, now.toString());\n    localStorage.setItem(LOCATION_NOTIFICATION_KEY, notificationKey);\n    lastNotificationRef.current = notificationKey;\n    return true;\n  };\n  \n  // Fonction pour gérer la mise à jour de position\n  const handleLocationUpdate = React.useCallback((x: number, y: number, gpsPosition?: GeoPosition): void => {\n    if (!gpsPosition) return;\n    \n    // Log de la position GPS reçue\n    console.log(`[UserLocation] Nouvelle position GPS reçue: lat=${gpsPosition.latitude}, lng=${gpsPosition.longitude}, accuracy=${gpsPosition.accuracy}`);\n    // Mettre à jour la position GPS\n    setPosition(gpsPosition);\n    \n    // Convertir les coordonnées GPS en coordonnées de carte\n    const mapPosition = gpsToMapCoordinates(gpsPosition.latitude, gpsPosition.longitude);\n    setMapCoords(mapPosition);\n    \n    // Journaliser les informations de position seulement occasionnellement (1% des mises à jour)\n    // pour éviter de surcharger la console\n    // if (Math.random() < 0.01) {\n    //   logger.info('Position utilisateur mise à jour', {\n    //     latitude: gpsPosition.latitude,\n    //     longitude: gpsPosition.longitude,\n    //     mapX: mapPosition.x,\n    //     mapY: mapPosition.y,\n    //     accuracy: gpsPosition.accuracy\n    //   });\n    // }\n    \n    // Vérifier si l'utilisateur est dans l'Île Feydeau\n    const isWithin = isPositionWithinFeydeau(gpsPosition);\n    \n    // Calculer la distance au centre\n    const distanceToCenter = calculateDistanceToCenter(gpsPosition.latitude, gpsPosition.longitude);\n    const isFarFromCenter = distanceToCenter > 300; // Plus de 300 mètres\n    \n    // Vérifier si l'utilisateur est visible sur la carte\n    const isVisibleOnMap = mapPosition.x >= 0 && mapPosition.x <= MAP_WIDTH && \n                           mapPosition.y >= 0 && mapPosition.y <= MAP_HEIGHT;\n    \n    // Afficher une notification UNIQUEMENT si l'utilisateur est hors de la carte\n    if (!isWithin && !firstPositionRef.current && !isRecentlyActivated() && isFarFromCenter && !isVisibleOnMap) {\n      const direction = getDirectionToFeydeau(gpsPosition);\n      const notificationKey = `distance-${Math.round(distanceToCenter/100)}00-${direction}`;\n      \n      // Vérifier si on peut afficher la notification (pas trop fréquente)\n      if (canShowNotification(notificationKey)) {\n        // Ajouter un log spécifique pour le toast d'éloignement pour déboguer\n        console.log('Toast d\\'\\u00e9loignement de l\\'\\u00cele Feydeau', {\n          direction,\n          distance: Math.round(distanceToCenter),\n          isWithin,\n          isFarFromCenter,\n          notificationKey,\n          isVisibleOnMap,\n          position: {\n            latitude: gpsPosition.latitude,\n            longitude: gpsPosition.longitude,\n            mapX: mapPosition.x,\n            mapY: mapPosition.y,\n            accuracy: gpsPosition.accuracy\n          }\n        });\n        \n        logger.info('Toast d\\'\\u00e9loignement de l\\'\\u00cele Feydeau', {\n          direction,\n          distance: Math.round(distanceToCenter),\n          isWithin,\n          isFarFromCenter,\n          notificationKey,\n          isVisibleOnMap\n        });\n        \n        toastService.show({\n          title: \"Vous êtes éloigné de l'Île Feydeau\",\n          description: `L'Île Feydeau se trouve au ${direction} de votre position actuelle.`,\n          duration: 5000,\n          action: <ToastAction altText=\"Me guider\">Me guider</ToastAction>,\n          source: \"UserLocation.handleLocationUpdate\",\n          context: {\n            direction,\n            distance: Math.round(distanceToCenter),\n            isWithin,\n            isFarFromCenter,\n            notificationKey\n          }\n        });\n      }\n    }\n    \n    // Après la première position, désactiver le flag\n    if (firstPositionRef.current) {\n      firstPositionRef.current = false;\n    }\n    \n    // Notifier le composant parent de la mise à jour\n    if (onLocationUpdate) {\n      onLocationUpdate(mapPosition.x, mapPosition.y, gpsPosition);\n    }\n  }, [onLocationUpdate, firstPositionRef, isRecentlyActivated, canShowNotification]);\n  \n  // Fonction pour gérer le changement d'état de permission\n  const handlePermissionChange = React.useCallback((denied: boolean): void => {\n    setPermissionDenied(denied);\n    \n    if (onPermissionChange) {\n      onPermissionChange(denied);\n    }\n    \n    if (denied) {\n      toastService.error({\n        title: \"Localisation refusée\",\n        description: \"Vous avez refusé l'accès à votre position. Certaines fonctionnalités ne seront pas disponibles.\",\n        duration: 5000,\n        source: \"UserLocation.handlePermissionChange\",\n        context: {\n          permissionDenied: true\n        }\n      });\n    }\n  }, [onPermissionChange]);\n  \n  // Démarrer le suivi de la position de l'utilisateur\n  useEffect(() => {\n    // Enregistrer le timestamp d'activation\n    localStorage.setItem(LOCATION_ACTIVATION_TIMESTAMP_KEY, Date.now().toString());\n    \n    // Créer une référence stable aux fonctions pour éviter les redémarrages\n    const locationUpdateAdapter = (_: number, __: number, gpsPosition?: GeoPosition) => {\n      if (!gpsPosition) return;\n      handleLocationUpdate(0, 0, gpsPosition); // Les coordonnées x,y sont recalculées dans handleLocationUpdate\n    };\n    \n    // Créer une référence stable pour le gestionnaire de permission\n    const stablePermissionHandler = (denied: boolean) => {\n      handlePermissionChange(denied);\n    };\n    \n    // Démarrer le suivi de la position avec le service de localisation\n    locationService.startTracking(locationUpdateAdapter, stablePermissionHandler);\n    \n    // Nettoyer lors du démontage du composant\n    return () => {\n      locationService.stopTracking();\n    };\n  }, []); // Utilise les fonctions mémorisées pour éviter les re-rendus inutiles\n\n  // Désactiver temporairement les logs pour ce composant\n  React.useEffect(() => {\n    // Sauvegarder les fonctions originales\n    const originalInfo = logger.info;\n    const originalDebug = logger.debug;\n    \n    // Remplacer par des fonctions qui filtrent les logs indésirables\n    logger.info = (message, data) => {\n      // Toujours logger les messages liés aux toasts d'éloignement\n      if (message.includes('Toast d\\'éloignement')) {\n        console.log('LOG INFO (TOAST):', message, data);\n        return originalInfo(message, data);\n      }\n      \n      // Ne pas logger les messages liés au rendu du marqueur et à la position\n      if (message.includes('Rendu du marqueur') || \n          message.includes('Position utilisateur') ||\n          message.includes('mise à jour')) {\n        return;\n      }\n      \n      return originalInfo(message, data);\n    };\n    \n    // Restaurer les fonctions originales lors du démontage\n    return () => {\n      logger.info = originalInfo;\n      logger.debug = originalDebug;\n    };\n  }, []);\n  \n  // Si la position n'est pas encore disponible ou permission refusée\n  if (!mapCoords || permissionDenied) {\n    return (\n      <div className=\"absolute left-1/2 top-8 z-40 w-full flex justify-center pointer-events-none\">\n        <div className=\"bg-white/90 text-[#ff7a45] border border-[#ff7a45] rounded px-3 py-2 text-center shadow-md text-sm max-w-xs\">\n          {permissionDenied\n            ? \"Localisation désactivée ou refusée. Activez la géolocalisation pour voir votre position.\"\n            : \"Position utilisateur indisponible. En attente de signal GPS ou autorisation.\"}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* Marqueur de position de l'utilisateur */}\n      <div \n        className=\"absolute z-30 pointer-events-none\"\n        style={{\n          left: `${mapCoords.x * scale}px`,\n          top: `${mapCoords.y * scale}px`,\n          transform: 'translate(-50%, -50%)' // Centrer le marqueur sur les coordonnées\n        }}\n      >\n        <div className=\"relative\">\n          {/* Cercle de précision */}\n          {position && (\n            <div \n              className=\"absolute rounded-full bg-blue-500/20 border border-blue-500/50\"\n              style={{\n                width: `${(position.accuracy / FEYDEAU_DIMENSIONS.width) * MAP_WIDTH * 1 * scale}px`,\n                height: `${(position.accuracy / FEYDEAU_DIMENSIONS.width) * MAP_WIDTH * 1 * scale}px`,\n                transform: 'translate(-50%, -50%)',\n                left: '50%',\n                top: '50%'\n              }}\n            />\n          )}\n          \n          {/* Indicateur de position - plus grand et plus visible */}\n          <div className=\"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n            {showNavigation ? (\n              <Navigation className=\"h-8 w-8 text-blue-600 drop-shadow-md\" />\n            ) : (\n              <div className=\"h-8 w-8 bg-blue-600 rounded-full border-4 border-white shadow-lg pulse-animation z-50\" />\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default UserLocation;\n","import React, { useEffect, useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Location, getLocationGPSById } from \"@/data/locations\";\r\nimport { GeoPosition } from \"./UserLocation\";\r\nimport { createLogger } from \"@/utils/logger\";\r\nimport Navigation from \"lucide-react/dist/esm/icons/navigation\";\r\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\r\nimport X from \"lucide-react/dist/esm/icons/x\";\r\n\r\n// Créer un logger pour le composant\r\nconst logger = createLogger('NavigationGuideSimple');\r\n\r\n// Distance maximale en mètres pour considérer qu'un lieu est \"atteint\"\r\nconst ARRIVAL_THRESHOLD = 20;\r\n\r\n/**\r\n * Calcule la distance entre deux points GPS en mètres\r\n */\r\nfunction calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\r\n  // Rayon de la Terre en mètres\r\n  const R = 6371000;\r\n  \r\n  // Conversion des degrés en radians\r\n  const toRad = (angle: number) => (angle * Math.PI) / 180;\r\n  const lat1Rad = toRad(lat1);\r\n  const lat2Rad = toRad(lat2);\r\n  const dLat = toRad(lat2 - lat1);\r\n  const dLon = toRad(lon2 - lon1);\r\n  \r\n  // Formule haversine\r\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n            Math.cos(lat1Rad) * Math.cos(lat2Rad) *\r\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  \r\n  // Distance en mètres\r\n  return R * c;\r\n}\r\n\r\n/**\r\n * Calcule une distance simplifiée pour l'affichage\r\n * \r\n * @param calculatedDistance Distance GPS calculée en mètres\r\n * @returns Distance adaptée à l'échelle de la carte en mètres\r\n */\r\nfunction calculateSimpleDistance(calculatedDistance: number): number {\r\n  // Arrondir la distance au mètre près sans appliquer de facteur de correction\r\n  return Math.round(calculatedDistance);\r\n}\r\n\r\n/**\r\n * Détermine la direction entre deux points GPS\r\n */\r\nfunction getDirection(lat1: number, lon1: number, lat2: number, lon2: number): string {\r\n  // Calculer l'angle en degrés\r\n  const y = Math.sin(lon2 - lon1) * Math.cos(lat2);\r\n  const x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\r\n  let angle = Math.atan2(y, x) * 180 / Math.PI;\r\n  \r\n  // Convertir en angle positif (0-360°)\r\n  angle = (angle + 360) % 360;\r\n  \r\n  // Convertir l'angle en direction cardinale\r\n  if (angle >= 337.5 || angle < 22.5) return \"nord\";\r\n  if (angle >= 22.5 && angle < 67.5) return \"nord-est\";\r\n  if (angle >= 67.5 && angle < 112.5) return \"est\";\r\n  if (angle >= 112.5 && angle < 157.5) return \"sud-est\";\r\n  if (angle >= 157.5 && angle < 202.5) return \"sud\";\r\n  if (angle >= 202.5 && angle < 247.5) return \"sud-ouest\";\r\n  if (angle >= 247.5 && angle < 292.5) return \"ouest\";\r\n  return \"nord-ouest\";\r\n}\r\n\r\ntype NavigationGuideSimpleProps = {\r\n  userPosition: GeoPosition | null;\r\n  targetLocation: Location | null;\r\n  mapCoords?: { x: number; y: number } | null;\r\n  targetMapCoords?: { x: number; y: number } | null;\r\n  scale?: number;\r\n  onClose: () => void;\r\n};\r\n\r\n/**\r\n * Composant simplifié pour guider l'utilisateur vers un point d'intérêt\r\n */\r\nfunction NavigationGuideSimple(props: NavigationGuideSimpleProps) {\r\n  const { userPosition, targetLocation, onClose, mapCoords, targetMapCoords, scale = 1 } = props;\r\n  \r\n  const [navigationInfo, setNavigationInfo] = useState({\r\n    distance: 0,\r\n    direction: '',\r\n    isNearby: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (userPosition && targetLocation) {\r\n      try {\r\n        // Récupérer les coordonnées GPS de l'emplacement cible à partir de son ID\r\n        const targetCoordinates = getLocationGPSById(targetLocation.id);\r\n        \r\n        if (!targetCoordinates) {\r\n          logger.warn('[NavigationGuideSimple] Coordonnées GPS non trouvées pour', targetLocation.id);\r\n          return;\r\n        }\r\n        \r\n        // Calculer la distance entre l'utilisateur et la cible\r\n        const calculatedDistance = calculateDistance(\r\n          userPosition.latitude, userPosition.longitude,\r\n          targetCoordinates.latitude, targetCoordinates.longitude\r\n        );\r\n        \r\n        // Calculer la direction (simplifiée pour cet exemple)\r\n        const direction = getDirection(\r\n          userPosition.latitude, userPosition.longitude,\r\n          targetCoordinates.latitude, targetCoordinates.longitude\r\n        );\r\n        \r\n        // Déterminer si l'utilisateur est à proximité (moins de 20 mètres)\r\n        const isNearby = calculatedDistance < ARRIVAL_THRESHOLD;\r\n        \r\n        // Appliquer le facteur de correction pour l'affichage\r\n        const displayDistance = calculateSimpleDistance(calculatedDistance);\r\n        \r\n        // Mettre à jour l'état\r\n        setNavigationInfo({\r\n          distance: displayDistance,\r\n          direction,\r\n          isNearby\r\n        });\r\n        \r\n        // Journaliser les informations de navigation pour le débogage\r\n        logger.info('[NavigationGuideSimple] Navigation calculée', {\r\n          userPosition,\r\n          targetLocation: targetLocation.id,\r\n          distance: displayDistance,\r\n          direction,\r\n          isNearby\r\n        });\r\n      } catch (error: any) {\r\n        logger.error('[NavigationGuideSimple] Erreur lors du calcul de la navigation', error);\r\n      }\r\n    }\r\n  }, [userPosition, targetLocation]);\r\n\r\n  // Si les données nécessaires ne sont pas disponibles, ne rien afficher\r\n  if (!userPosition || !targetLocation) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      {/* Affichage du chemin uniquement si les coordonnées de carte sont disponibles */}\r\n      {mapCoords && targetMapCoords && (\r\n        <div className=\"absolute top-0 left-0 w-full h-full z-40\">\r\n          {/* Ligne simple entre les deux points */}\r\n          <svg width=\"100%\" height=\"100%\" className=\"absolute top-0 left-0 pointer-events-none\">\r\n            <line \r\n              x1={mapCoords.x * scale} \r\n              y1={mapCoords.y * scale} \r\n              x2={targetMapCoords.x * scale} \r\n              y2={targetMapCoords.y * scale} \r\n              stroke=\"#3b82f6\" \r\n              strokeWidth=\"4\" \r\n              strokeDasharray=\"8,4\" \r\n            />\r\n            \r\n            {/* Points de départ et d'arrivée */}\r\n            <circle cx={mapCoords.x * scale} cy={mapCoords.y * scale} r=\"6\" fill=\"#3b82f6\" />\r\n            <circle cx={targetMapCoords.x * scale} cy={targetMapCoords.y * scale} r=\"6\" fill=\"#ef4444\" />\r\n          </svg>\r\n          \r\n          {/* Affichage de la distance au milieu de la ligne avec bouton pour arrêter la navigation */}\r\n          <div \r\n            className=\"absolute bg-white/90 px-3 py-1.5 rounded text-sm font-medium text-blue-700 shadow-md flex items-center gap-2 cursor-pointer hover:bg-white/100 transition-colors\"\r\n            style={{\r\n              left: `${((mapCoords.x + targetMapCoords.x) / 2) * scale}px`,\r\n              top: `${((mapCoords.y + targetMapCoords.y) / 2) * scale}px`,\r\n              transform: 'translate(-50%, -50%)'\r\n            }}\r\n            onClick={onClose}\r\n          >\r\n            <span>{navigationInfo.distance} m</span>\r\n            <X className=\"w-3 h-3 text-gray-500\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Panneau de navigation en bas de l'écran */}\r\n      <div className=\"fixed bottom-20 left-0 right-0 z-50 p-4 bg-white/90 shadow-lg rounded-t-xl\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <div className=\"flex items-center\">\r\n            <MapPin className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n            <h3 className=\"font-semibold text-lg\">{targetLocation.name}</h3>\r\n          </div>\r\n          <Button variant=\"destructive\" size=\"sm\" onClick={onClose} className=\"flex items-center gap-1\">\r\n            <X className=\"w-4 h-4\" />\r\n            Arrêter\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <Navigation className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n            <div>\r\n              <p className=\"font-medium\">\r\n                {navigationInfo.isNearby ? \"Vous êtes arrivé!\" : `${navigationInfo.distance} mètres`}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NavigationGuideSimple;\r\n","import React, { useEffect, useRef, useState } from 'react';\nimport { createLogger } from \"@/utils/logger\";\nimport { Location } from \"@/data/locations\";\nimport { getImagePath } from \"@/utils/imagePaths\";\nimport { isOnline } from \"@/utils/serviceWorkerRegistration\";\nimport UserLocation, { UserLocationProps } from \"./UserLocation\";\nimport { toast } from \"@/components/ui/use-toast\";\n\n// Créer un logger pour le composant Map avec filtrage\nconst originalLogger = createLogger('MapComponent');\n// Wrapper pour filtrer les logs indésirables\nconst logger = {\n  info: (message: string, data?: any) => {\n    // Filtrer les logs de redimensionnement\n    if (message.includes('redimensionné')) {\n      return;\n    }\n    return originalLogger.info(message, data);\n  },\n  warn: originalLogger.warn,\n  error: originalLogger.error,\n  debug: originalLogger.debug\n};\n\n// Dimensions de référence pour la carte (utilisées pour calculer les ratios)\nexport const MAP_WIDTH = 400;\nexport const MAP_HEIGHT = 600;\n\n// Utilisation du type Location importé depuis data/locations.ts\n\nimport NavigationGuideSimple from \"./NavigationGuideSimple\";\nimport { GeoPosition } from \"./UserLocation\";\n\nexport interface MapComponentProps {\n  locations: Location[];\n  visitedLocations?: string[];\n  onLocationClick?: (locationId: string) => void;\n  highlightedLocation?: string | null;\n  testPoint?: { x: number; y: number };\n  testPointAffine?: { x: number; y: number };\n  activeLocation?: string | null;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  readOnly?: boolean;\n  onScaleChange?: (scale: number) => void;\n  userLocationProps?: Omit<UserLocationProps, 'scale'>;\n  navigationProps?: {\n    userPosition: GeoPosition | null;\n    targetLocation: Location | null;\n    onClose: () => void;\n  };\n  // Optional pan/drag callbacks (for analytics)\n  onPanStart?: (info: { x: number; y: number }) => void;\n  onPan?: (info: { dx: number; dy: number; x: number; y: number }) => void;\n  onPanEnd?: (info: { totalDx: number; totalDy: number; distance: number; durationMs: number }) => void;\n};\n\n/**\n * Composant de carte\n * \n * Affiche une carte interactive avec des points représentant les lieux.\n * Les dimensions de la carte sont fixes pour assurer la cohérence des coordonnées.\n * Les coordonnées des points sont définies directement dans le fichier de données.\n */\nexport const MapComponent: React.FC<MapComponentProps> = ({\n  locations,\n  visitedLocations = [],\n  onLocationClick,\n  highlightedLocation = null,\n  testPoint,\n  testPointAffine,\n  activeLocation = null,\n  onClick,\n  readOnly = false,\n  onScaleChange,\n  userLocationProps,\n  navigationProps,\n  onPanStart,\n  onPan,\n  onPanEnd\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [scale, setScale] = useState(1); // Facteur d'échelle pour les coordonnées\n  const [isDragging, setIsDragging] = useState(false);\n  const [startDragPos, setStartDragPos] = useState({ x: 0, y: 0 });\n  const [mapPosition, setMapPosition] = useState({ x: 0, y: 0 });\n  const [userMapCoords, setUserMapCoords] = useState<{ x: number, y: number } | null>(null);\n  const mapRef = useRef<HTMLDivElement>(null);\n  // Drag state (client coordinates)\n  const dragStartClient = useRef<{ x: number; y: number } | null>(null);\n  const lastClient = useRef<{ x: number; y: number } | null>(null);\n  const dragTotals = useRef<{ dx: number; dy: number }>({ dx: 0, dy: 0 });\n  const dragStartTime = useRef<number>(0);\n\n  // Référence pour suivre si un avertissement de limite de carte a été affiché\n  const outOfBoundsWarningShownRef = useRef(false);\n\n  // Effet pour appliquer des dimensions responsives au conteneur principal\n  useEffect(() => {\n    const calculateScale = () => {\n      if (containerRef.current) {\n        // Obtenir la largeur du conteneur parent\n        const parentWidth = containerRef.current.parentElement?.clientWidth || window.innerWidth;\n        // Calculer le facteur d'échelle basé sur la largeur disponible\n        const maxWidth = Math.min(parentWidth, MAP_WIDTH);\n        const newScale = maxWidth / MAP_WIDTH;\n        \n        // Mettre à jour l'état local\n        setScale(newScale);\n        \n        // Notifier le parent du changement d'échelle\n        if (onScaleChange) {\n          onScaleChange(newScale);\n        }\n        \n        // Appliquer les dimensions mises à l'échelle\n        containerRef.current.style.width = `${MAP_WIDTH * newScale}px`;\n        containerRef.current.style.height = `${MAP_HEIGHT * newScale}px`;\n        \n        // Appliquer une transformation d'échelle directe au conteneur\n        // containerRef.current.style.transform = `scale(${newScale})`;\n        // containerRef.current.style.transformOrigin = 'top left';\n        \n        // Journaliser seulement 10% des redimensionnements pour réduire le bruit dans la console\n        // if (Math.random() < 0.1) {\n        //   logger.info('MapComponent redimensionné', { \n        //     parentWidth, \n        //     maxWidth, \n        //     scale: newScale, \n        //     newWidth: MAP_WIDTH * newScale, \n        //     newHeight: MAP_HEIGHT * newScale \n        //   });\n        // }\n      }\n    };\n    \n    // Appliquer immédiatement et écouter les redimensionnements\n    calculateScale();\n    \n    // Utiliser un délai pour s'assurer que le redimensionnement est terminé\n    const debouncedResize = debounce(calculateScale, 100);\n    window.addEventListener('resize', debouncedResize);\n    \n    // Fonction de debounce pour limiter les appels fréquents\n    function debounce(fn: Function, delay: number) {\n      let timer: number | null = null;\n      return function() {\n        if (timer) window.clearTimeout(timer);\n        timer = window.setTimeout(() => {\n          fn();\n          timer = null;\n        }, delay);\n      };\n    }\n    \n    return () => {\n      window.removeEventListener('resize', debouncedResize);\n    };\n  }, [onScaleChange]); // Ajouter onScaleChange comme dépendance\n\n  // Mouse drag handlers (basic analytics support without visual panning)\n  useEffect(() => {\n    if (readOnly) return;\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isDragging || !dragStartClient.current) return;\n      const current = { x: e.clientX, y: e.clientY };\n      if (!lastClient.current) {\n        lastClient.current = current;\n        return;\n      }\n      const dx = current.x - lastClient.current.x;\n      const dy = current.y - lastClient.current.y;\n      dragTotals.current.dx += dx;\n      dragTotals.current.dy += dy;\n      lastClient.current = current;\n      if (onPan) {\n        onPan({ dx, dy, x: current.x, y: current.y });\n      }\n    };\n    const handleMouseUp = () => {\n      if (!isDragging) return;\n      setIsDragging(false);\n      const durationMs = Date.now() - dragStartTime.current;\n      const { dx, dy } = dragTotals.current;\n      const distance = Math.hypot(dx, dy);\n      // Reset refs\n      dragStartClient.current = null;\n      lastClient.current = null;\n      dragTotals.current = { dx: 0, dy: 0 };\n      if (onPanEnd) {\n        onPanEnd({ totalDx: dx, totalDy: dy, distance, durationMs });\n      }\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n    const startDrag = (clientX: number, clientY: number) => {\n      setIsDragging(true);\n      dragStartClient.current = { x: clientX, y: clientY };\n      lastClient.current = { x: clientX, y: clientY };\n      dragTotals.current = { dx: 0, dy: 0 };\n      dragStartTime.current = Date.now();\n      if (onPanStart) onPanStart({ x: clientX, y: clientY });\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n    };\n    const el = containerRef.current;\n    if (!el) return;\n    const onMouseDown = (e: MouseEvent) => {\n      // Ignore if primary button not pressed\n      if (e.button !== 0) return;\n      startDrag(e.clientX, e.clientY);\n    };\n    el.addEventListener('mousedown', onMouseDown);\n    return () => {\n      el.removeEventListener('mousedown', onMouseDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isDragging, readOnly, onPanStart, onPan, onPanEnd]);\n  \n  // Log des coordonnées des points au chargement\n  useEffect(() => {\n    if (locations && locations.length > 0) {\n      logger.info('Coordonnées des points sur la carte', {\n        activeLocationId: activeLocation || 'aucun',\n        points: locations.map(loc => ({\n          id: loc.id,\n          name: loc.name,\n          x: loc.x,\n          y: loc.y\n        }))\n      });\n    }\n  }, [locations, activeLocation]);\n  \n  return (\n    <div \n      ref={containerRef}\n      className=\"relative border border-[#d8e3ff] rounded-lg bg-[#f0f5ff] mb-4 overflow-hidden mx-auto\"\n      style={{ \n        width: `${MAP_WIDTH * scale}px`, \n        height: `${MAP_HEIGHT * scale}px`\n      }}\n    >\n      {/* Fond de carte avec image */}\n      <div \n        className=\"absolute inset-0 bg-white flex items-center justify-center\"\n        onClick={!readOnly ? onClick : undefined}\n        style={{ \n          cursor: !readOnly ? 'pointer' : 'default'\n        }}\n      >\n        {/* Utiliser une div avec background-image comme solution de secours */}\n        <div\n          className=\"w-full h-full\"\n          style={{\n            backgroundImage: `url(${getImagePath('/map-feydeau.png')})`,\n            backgroundPosition: 'center',\n            backgroundRepeat: 'no-repeat',\n            backgroundSize: 'contain',\n            opacity: 0.9,\n            pointerEvents: 'none' // Empêcher l'interaction avec l'image\n          }}\n        >\n          {/* Image cachée pour détecter les erreurs de chargement */}\n          <img \n            src={getImagePath('/map-feydeau.png')} \n            alt=\"Plan de l'Île Feydeau\" \n            className=\"hidden\"\n            onError={(e) => {\n              logger.error('Erreur de chargement de l\\'image de la carte', { online: isOnline() });\n              // L'image d'arrière-plan sera toujours visible même si cette image échoue\n            }}\n          />\n        </div>\n      </div>\n      \n      {/* Points sur la carte */}\n      <div className=\"absolute inset-0\">\n        {/* Point de test pour la méthode de triangulation */}\n        {testPoint && (\n          <div\n            className=\"absolute\"\n            style={{\n              position: 'absolute',\n              left: `${testPoint.x * scale}px`,\n              top: `${testPoint.y * scale}px`,\n              zIndex: 30,\n              transform: 'translate(-50%, -50%)'\n            }}\n          >\n            <div\n              className=\"rounded-full shadow-lg border-2 border-white bg-[#ff0000]/90\"\n              style={{\n                width: `${24 * scale}px`,\n                height: `${24 * scale}px`\n              }}\n            />\n          </div>\n        )}\n        \n        {/* Point de test pour la méthode affine */}\n        {testPointAffine && (\n          <div\n            className=\"absolute\"\n            style={{\n              position: 'absolute',\n              left: `${testPointAffine.x * scale}px`,\n              top: `${testPointAffine.y * scale}px`,\n              zIndex: 30,\n              transform: 'translate(-50%, -50%)'\n            }}\n          >\n            <div\n              className=\"rounded-full shadow-lg border-2 border-white bg-[#0000ff]/90\"\n              style={{\n                width: `${24 * scale}px`,\n                height: `${24 * scale}px`\n              }}\n            />\n          </div>\n        )}\n        \n        {locations.map((location) => (\n          <div \n            key={location.id}\n            id={`location-${location.id}`}\n            data-location-id={location.id}\n            className=\"absolute\"  \n            style={{ \n              position: 'absolute',\n              left: `${location.x * scale}px`, \n              top: `${location.y * scale}px`,\n              zIndex: 20,\n              width: `${60 * scale}px`, // Zone de clic mise à l'échelle\n              height: `${60 * scale}px`,\n              transform: 'translate(-50%, -50%)', // Centrer le point sur les coordonnées\n              pointerEvents: !readOnly ? 'auto' : 'none',\n              cursor: !readOnly ? 'pointer' : 'default'\n            }}\n            onClick={!readOnly ? (e) => {\n              e.stopPropagation();\n              if (onClick) onClick(e);\n            } : undefined}\n          >\n            {/* Point visible */}\n            <div\n              className={`absolute top-1/2 left-1/2 w-8 h-8 rounded-full shadow-lg border-2 border-white\n                ${activeLocation === location.id \n                  ? 'bg-[#ff7a45]/90 ring-2 ring-[#ff7a45] ring-opacity-70 scale-110' \n                  : highlightedLocation === location.id\n                    ? location.visited \n                      ? 'bg-[#4CAF50]/90 ring-4 ring-green-400 ring-opacity-80' \n                      : 'bg-[#ff7a45]/90 ring-4 ring-yellow-400 ring-opacity-80'\n                    : location.hasProgram === false\n                      ? 'bg-[#757575]/90' // Gris pour les lieux sans programmation\n                      : location.visited \n                        ? 'bg-[#4CAF50]/90' \n                        : 'bg-[#4a5d94]/90'\n                }`}\n              style={{\n                transform: 'translate(-50%, -50%)',\n                width: `${32 * scale}px`,\n                height: `${32 * scale}px`\n              }}\n            />\n          </div>\n        ))}\r\n      </div>\r\n      \r\n      {/* Composant de localisation utilisateur (conditionnel) */}\r\n      {userLocationProps && (\r\n        <UserLocation \r\n          {...userLocationProps}\r\n          scale={scale}\r\n          onLocationUpdate={(x, y, gpsPosition) => {\r\n            setUserMapCoords({x, y});\r\n            if (userLocationProps.onLocationUpdate) {\r\n              userLocationProps.onLocationUpdate(x, y, gpsPosition);\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Composant de navigation simplifié (conditionnel) */}\r\n      {navigationProps && userLocationProps && (\r\n        <NavigationGuideSimple \r\n          {...navigationProps}\r\n          mapCoords={userMapCoords}\r\n          targetMapCoords={navigationProps.targetLocation ? {\r\n            x: navigationProps.targetLocation.x,\r\n            y: navigationProps.targetLocation.y\r\n          } : null}\r\n          scale={scale}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","\"use client\";\n\n// packages/react/menu/src/Menu.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { useComposedRefs, composeRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { useFocusGuards } from \"@radix-ui/react-focus-guards\";\nimport { FocusScope } from \"@radix-ui/react-focus-scope\";\nimport { useId } from \"@radix-ui/react-id\";\nimport * as PopperPrimitive from \"@radix-ui/react-popper\";\nimport { createPopperScope } from \"@radix-ui/react-popper\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive, dispatchDiscreteCustomEvent } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { hideOthers } from \"aria-hidden\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { jsx } from \"react/jsx-runtime\";\nvar SELECTION_KEYS = [\"Enter\", \" \"];\nvar FIRST_KEYS = [\"ArrowDown\", \"PageUp\", \"Home\"];\nvar LAST_KEYS = [\"ArrowUp\", \"PageDown\", \"End\"];\nvar FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nvar SUB_OPEN_KEYS = {\n  ltr: [...SELECTION_KEYS, \"ArrowRight\"],\n  rtl: [...SELECTION_KEYS, \"ArrowLeft\"]\n};\nvar SUB_CLOSE_KEYS = {\n  ltr: [\"ArrowLeft\"],\n  rtl: [\"ArrowRight\"]\n};\nvar MENU_NAME = \"Menu\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(MENU_NAME);\nvar [createMenuContext, createMenuScope] = createContextScope(MENU_NAME, [\n  createCollectionScope,\n  createPopperScope,\n  createRovingFocusGroupScope\n]);\nvar usePopperScope = createPopperScope();\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [MenuProvider, useMenuContext] = createMenuContext(MENU_NAME);\nvar [MenuRootProvider, useMenuRootContext] = createMenuContext(MENU_NAME);\nvar Menu = (props) => {\n  const { __scopeMenu, open = false, children, dir, onOpenChange, modal = true } = props;\n  const popperScope = usePopperScope(__scopeMenu);\n  const [content, setContent] = React.useState(null);\n  const isUsingKeyboardRef = React.useRef(false);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n  const direction = useDirection(dir);\n  React.useEffect(() => {\n    const handleKeyDown = () => {\n      isUsingKeyboardRef.current = true;\n      document.addEventListener(\"pointerdown\", handlePointer, { capture: true, once: true });\n      document.addEventListener(\"pointermove\", handlePointer, { capture: true, once: true });\n    };\n    const handlePointer = () => isUsingKeyboardRef.current = false;\n    document.addEventListener(\"keydown\", handleKeyDown, { capture: true });\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown, { capture: true });\n      document.removeEventListener(\"pointerdown\", handlePointer, { capture: true });\n      document.removeEventListener(\"pointermove\", handlePointer, { capture: true });\n    };\n  }, []);\n  return /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children: /* @__PURE__ */ jsx(\n    MenuProvider,\n    {\n      scope: __scopeMenu,\n      open,\n      onOpenChange: handleOpenChange,\n      content,\n      onContentChange: setContent,\n      children: /* @__PURE__ */ jsx(\n        MenuRootProvider,\n        {\n          scope: __scopeMenu,\n          onClose: React.useCallback(() => handleOpenChange(false), [handleOpenChange]),\n          isUsingKeyboardRef,\n          dir: direction,\n          modal,\n          children\n        }\n      )\n    }\n  ) });\n};\nMenu.displayName = MENU_NAME;\nvar ANCHOR_NAME = \"MenuAnchor\";\nvar MenuAnchor = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, ...anchorProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Anchor, { ...popperScope, ...anchorProps, ref: forwardedRef });\n  }\n);\nMenuAnchor.displayName = ANCHOR_NAME;\nvar PORTAL_NAME = \"MenuPortal\";\nvar [PortalProvider, usePortalContext] = createMenuContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar MenuPortal = (props) => {\n  const { __scopeMenu, forceMount, children, container } = props;\n  const context = useMenuContext(PORTAL_NAME, __scopeMenu);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeMenu, forceMount, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children }) }) });\n};\nMenuPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"MenuContent\";\nvar [MenuContentProvider, useMenuContentContext] = createMenuContext(CONTENT_NAME);\nvar MenuContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n    return /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeMenu, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeMenu, children: rootContext.modal ? /* @__PURE__ */ jsx(MenuRootContentModal, { ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsx(MenuRootContentNonModal, { ...contentProps, ref: forwardedRef }) }) }) });\n  }\n);\nvar MenuRootContentModal = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    React.useEffect(() => {\n      const content = ref.current;\n      if (content) return hideOthers(content);\n    }, []);\n    return /* @__PURE__ */ jsx(\n      MenuContentImpl,\n      {\n        ...props,\n        ref: composedRefs,\n        trapFocus: context.open,\n        disableOutsidePointerEvents: context.open,\n        disableOutsideScroll: true,\n        onFocusOutside: composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault(),\n          { checkForDefaultPrevented: false }\n        ),\n        onDismiss: () => context.onOpenChange(false)\n      }\n    );\n  }\n);\nvar MenuRootContentNonModal = React.forwardRef((props, forwardedRef) => {\n  const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n  return /* @__PURE__ */ jsx(\n    MenuContentImpl,\n    {\n      ...props,\n      ref: forwardedRef,\n      trapFocus: false,\n      disableOutsidePointerEvents: false,\n      disableOutsideScroll: false,\n      onDismiss: () => context.onOpenChange(false)\n    }\n  );\n});\nvar MenuContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeMenu,\n      loop = false,\n      trapFocus,\n      onOpenAutoFocus,\n      onCloseAutoFocus,\n      disableOutsidePointerEvents,\n      onEntryFocus,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside,\n      onInteractOutside,\n      onDismiss,\n      disableOutsideScroll,\n      ...contentProps\n    } = props;\n    const context = useMenuContext(CONTENT_NAME, __scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, __scopeMenu);\n    const popperScope = usePopperScope(__scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const getItems = useCollection(__scopeMenu);\n    const [currentItemId, setCurrentItemId] = React.useState(null);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef, context.onContentChange);\n    const timerRef = React.useRef(0);\n    const searchRef = React.useRef(\"\");\n    const pointerGraceTimerRef = React.useRef(0);\n    const pointerGraceIntentRef = React.useRef(null);\n    const pointerDirRef = React.useRef(\"right\");\n    const lastPointerXRef = React.useRef(0);\n    const ScrollLockWrapper = disableOutsideScroll ? RemoveScroll : React.Fragment;\n    const scrollLockWrapperProps = disableOutsideScroll ? { as: Slot, allowPinchZoom: true } : void 0;\n    const handleTypeaheadSearch = (key) => {\n      const search = searchRef.current + key;\n      const items = getItems().filter((item) => !item.disabled);\n      const currentItem = document.activeElement;\n      const currentMatch = items.find((item) => item.ref.current === currentItem)?.textValue;\n      const values = items.map((item) => item.textValue);\n      const nextMatch = getNextMatch(values, search, currentMatch);\n      const newItem = items.find((item) => item.textValue === nextMatch)?.ref.current;\n      (function updateSearch(value) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== \"\") timerRef.current = window.setTimeout(() => updateSearch(\"\"), 1e3);\n      })(search);\n      if (newItem) {\n        setTimeout(() => newItem.focus());\n      }\n    };\n    React.useEffect(() => {\n      return () => window.clearTimeout(timerRef.current);\n    }, []);\n    useFocusGuards();\n    const isPointerMovingToSubmenu = React.useCallback((event) => {\n      const isMovingTowards = pointerDirRef.current === pointerGraceIntentRef.current?.side;\n      return isMovingTowards && isPointerInGraceArea(event, pointerGraceIntentRef.current?.area);\n    }, []);\n    return /* @__PURE__ */ jsx(\n      MenuContentProvider,\n      {\n        scope: __scopeMenu,\n        searchRef,\n        onItemEnter: React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        ),\n        onItemLeave: React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) return;\n            contentRef.current?.focus();\n            setCurrentItemId(null);\n          },\n          [isPointerMovingToSubmenu]\n        ),\n        onTriggerLeave: React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        ),\n        pointerGraceTimerRef,\n        onPointerGraceIntentChange: React.useCallback((intent) => {\n          pointerGraceIntentRef.current = intent;\n        }, []),\n        children: /* @__PURE__ */ jsx(ScrollLockWrapper, { ...scrollLockWrapperProps, children: /* @__PURE__ */ jsx(\n          FocusScope,\n          {\n            asChild: true,\n            trapped: trapFocus,\n            onMountAutoFocus: composeEventHandlers(onOpenAutoFocus, (event) => {\n              event.preventDefault();\n              contentRef.current?.focus({ preventScroll: true });\n            }),\n            onUnmountAutoFocus: onCloseAutoFocus,\n            children: /* @__PURE__ */ jsx(\n              DismissableLayer,\n              {\n                asChild: true,\n                disableOutsidePointerEvents,\n                onEscapeKeyDown,\n                onPointerDownOutside,\n                onFocusOutside,\n                onInteractOutside,\n                onDismiss,\n                children: /* @__PURE__ */ jsx(\n                  RovingFocusGroup.Root,\n                  {\n                    asChild: true,\n                    ...rovingFocusGroupScope,\n                    dir: rootContext.dir,\n                    orientation: \"vertical\",\n                    loop,\n                    currentTabStopId: currentItemId,\n                    onCurrentTabStopIdChange: setCurrentItemId,\n                    onEntryFocus: composeEventHandlers(onEntryFocus, (event) => {\n                      if (!rootContext.isUsingKeyboardRef.current) event.preventDefault();\n                    }),\n                    preventScrollOnEntryFocus: true,\n                    children: /* @__PURE__ */ jsx(\n                      PopperPrimitive.Content,\n                      {\n                        role: \"menu\",\n                        \"aria-orientation\": \"vertical\",\n                        \"data-state\": getOpenState(context.open),\n                        \"data-radix-menu-content\": \"\",\n                        dir: rootContext.dir,\n                        ...popperScope,\n                        ...contentProps,\n                        ref: composedRefs,\n                        style: { outline: \"none\", ...contentProps.style },\n                        onKeyDown: composeEventHandlers(contentProps.onKeyDown, (event) => {\n                          const target = event.target;\n                          const isKeyDownInside = target.closest(\"[data-radix-menu-content]\") === event.currentTarget;\n                          const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                          const isCharacterKey = event.key.length === 1;\n                          if (isKeyDownInside) {\n                            if (event.key === \"Tab\") event.preventDefault();\n                            if (!isModifierKey && isCharacterKey) handleTypeaheadSearch(event.key);\n                          }\n                          const content = contentRef.current;\n                          if (event.target !== content) return;\n                          if (!FIRST_LAST_KEYS.includes(event.key)) return;\n                          event.preventDefault();\n                          const items = getItems().filter((item) => !item.disabled);\n                          const candidateNodes = items.map((item) => item.ref.current);\n                          if (LAST_KEYS.includes(event.key)) candidateNodes.reverse();\n                          focusFirst(candidateNodes);\n                        }),\n                        onBlur: composeEventHandlers(props.onBlur, (event) => {\n                          if (!event.currentTarget.contains(event.target)) {\n                            window.clearTimeout(timerRef.current);\n                            searchRef.current = \"\";\n                          }\n                        }),\n                        onPointerMove: composeEventHandlers(\n                          props.onPointerMove,\n                          whenMouse((event) => {\n                            const target = event.target;\n                            const pointerXHasChanged = lastPointerXRef.current !== event.clientX;\n                            if (event.currentTarget.contains(target) && pointerXHasChanged) {\n                              const newDir = event.clientX > lastPointerXRef.current ? \"right\" : \"left\";\n                              pointerDirRef.current = newDir;\n                              lastPointerXRef.current = event.clientX;\n                            }\n                          })\n                        )\n                      }\n                    )\n                  }\n                )\n              }\n            )\n          }\n        ) })\n      }\n    );\n  }\n);\nMenuContent.displayName = CONTENT_NAME;\nvar GROUP_NAME = \"MenuGroup\";\nvar MenuGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, ...groupProps } = props;\n    return /* @__PURE__ */ jsx(Primitive.div, { role: \"group\", ...groupProps, ref: forwardedRef });\n  }\n);\nMenuGroup.displayName = GROUP_NAME;\nvar LABEL_NAME = \"MenuLabel\";\nvar MenuLabel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, ...labelProps } = props;\n    return /* @__PURE__ */ jsx(Primitive.div, { ...labelProps, ref: forwardedRef });\n  }\n);\nMenuLabel.displayName = LABEL_NAME;\nvar ITEM_NAME = \"MenuItem\";\nvar ITEM_SELECT = \"menu.itemSelect\";\nvar MenuItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const { disabled = false, onSelect, ...itemProps } = props;\n    const ref = React.useRef(null);\n    const rootContext = useMenuRootContext(ITEM_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(ITEM_NAME, props.__scopeMenu);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const isPointerDownRef = React.useRef(false);\n    const handleSelect = () => {\n      const menuItem = ref.current;\n      if (!disabled && menuItem) {\n        const itemSelectEvent = new CustomEvent(ITEM_SELECT, { bubbles: true, cancelable: true });\n        menuItem.addEventListener(ITEM_SELECT, (event) => onSelect?.(event), { once: true });\n        dispatchDiscreteCustomEvent(menuItem, itemSelectEvent);\n        if (itemSelectEvent.defaultPrevented) {\n          isPointerDownRef.current = false;\n        } else {\n          rootContext.onClose();\n        }\n      }\n    };\n    return /* @__PURE__ */ jsx(\n      MenuItemImpl,\n      {\n        ...itemProps,\n        ref: composedRefs,\n        disabled,\n        onClick: composeEventHandlers(props.onClick, handleSelect),\n        onPointerDown: (event) => {\n          props.onPointerDown?.(event);\n          isPointerDownRef.current = true;\n        },\n        onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n          if (!isPointerDownRef.current) event.currentTarget?.click();\n        }),\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          const isTypingAhead = contentContext.searchRef.current !== \"\";\n          if (disabled || isTypingAhead && event.key === \" \") return;\n          if (SELECTION_KEYS.includes(event.key)) {\n            event.currentTarget.click();\n            event.preventDefault();\n          }\n        })\n      }\n    );\n  }\n);\nMenuItem.displayName = ITEM_NAME;\nvar MenuItemImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, disabled = false, textValue, ...itemProps } = props;\n    const contentContext = useMenuContentContext(ITEM_NAME, __scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const [isFocused, setIsFocused] = React.useState(false);\n    const [textContent, setTextContent] = React.useState(\"\");\n    React.useEffect(() => {\n      const menuItem = ref.current;\n      if (menuItem) {\n        setTextContent((menuItem.textContent ?? \"\").trim());\n      }\n    }, [itemProps.children]);\n    return /* @__PURE__ */ jsx(\n      Collection.ItemSlot,\n      {\n        scope: __scopeMenu,\n        disabled,\n        textValue: textValue ?? textContent,\n        children: /* @__PURE__ */ jsx(RovingFocusGroup.Item, { asChild: true, ...rovingFocusGroupScope, focusable: !disabled, children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"menuitem\",\n            \"data-highlighted\": isFocused ? \"\" : void 0,\n            \"aria-disabled\": disabled || void 0,\n            \"data-disabled\": disabled ? \"\" : void 0,\n            ...itemProps,\n            ref: composedRefs,\n            onPointerMove: composeEventHandlers(\n              props.onPointerMove,\n              whenMouse((event) => {\n                if (disabled) {\n                  contentContext.onItemLeave(event);\n                } else {\n                  contentContext.onItemEnter(event);\n                  if (!event.defaultPrevented) {\n                    const item = event.currentTarget;\n                    item.focus({ preventScroll: true });\n                  }\n                }\n              })\n            ),\n            onPointerLeave: composeEventHandlers(\n              props.onPointerLeave,\n              whenMouse((event) => contentContext.onItemLeave(event))\n            ),\n            onFocus: composeEventHandlers(props.onFocus, () => setIsFocused(true)),\n            onBlur: composeEventHandlers(props.onBlur, () => setIsFocused(false))\n          }\n        ) })\n      }\n    );\n  }\n);\nvar CHECKBOX_ITEM_NAME = \"MenuCheckboxItem\";\nvar MenuCheckboxItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const { checked = false, onCheckedChange, ...checkboxItemProps } = props;\n    return /* @__PURE__ */ jsx(ItemIndicatorProvider, { scope: props.__scopeMenu, checked, children: /* @__PURE__ */ jsx(\n      MenuItem,\n      {\n        role: \"menuitemcheckbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        ...checkboxItemProps,\n        ref: forwardedRef,\n        \"data-state\": getCheckedState(checked),\n        onSelect: composeEventHandlers(\n          checkboxItemProps.onSelect,\n          () => onCheckedChange?.(isIndeterminate(checked) ? true : !checked),\n          { checkForDefaultPrevented: false }\n        )\n      }\n    ) });\n  }\n);\nMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\nvar RADIO_GROUP_NAME = \"MenuRadioGroup\";\nvar [RadioGroupProvider, useRadioGroupContext] = createMenuContext(\n  RADIO_GROUP_NAME,\n  { value: void 0, onValueChange: () => {\n  } }\n);\nvar MenuRadioGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    const { value, onValueChange, ...groupProps } = props;\n    const handleValueChange = useCallbackRef(onValueChange);\n    return /* @__PURE__ */ jsx(RadioGroupProvider, { scope: props.__scopeMenu, value, onValueChange: handleValueChange, children: /* @__PURE__ */ jsx(MenuGroup, { ...groupProps, ref: forwardedRef }) });\n  }\n);\nMenuRadioGroup.displayName = RADIO_GROUP_NAME;\nvar RADIO_ITEM_NAME = \"MenuRadioItem\";\nvar MenuRadioItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const { value, ...radioItemProps } = props;\n    const context = useRadioGroupContext(RADIO_ITEM_NAME, props.__scopeMenu);\n    const checked = value === context.value;\n    return /* @__PURE__ */ jsx(ItemIndicatorProvider, { scope: props.__scopeMenu, checked, children: /* @__PURE__ */ jsx(\n      MenuItem,\n      {\n        role: \"menuitemradio\",\n        \"aria-checked\": checked,\n        ...radioItemProps,\n        ref: forwardedRef,\n        \"data-state\": getCheckedState(checked),\n        onSelect: composeEventHandlers(\n          radioItemProps.onSelect,\n          () => context.onValueChange?.(value),\n          { checkForDefaultPrevented: false }\n        )\n      }\n    ) });\n  }\n);\nMenuRadioItem.displayName = RADIO_ITEM_NAME;\nvar ITEM_INDICATOR_NAME = \"MenuItemIndicator\";\nvar [ItemIndicatorProvider, useItemIndicatorContext] = createMenuContext(\n  ITEM_INDICATOR_NAME,\n  { checked: false }\n);\nvar MenuItemIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, forceMount, ...itemIndicatorProps } = props;\n    const indicatorContext = useItemIndicatorContext(ITEM_INDICATOR_NAME, __scopeMenu);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(indicatorContext.checked) || indicatorContext.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            ...itemIndicatorProps,\n            ref: forwardedRef,\n            \"data-state\": getCheckedState(indicatorContext.checked)\n          }\n        )\n      }\n    );\n  }\n);\nMenuItemIndicator.displayName = ITEM_INDICATOR_NAME;\nvar SEPARATOR_NAME = \"MenuSeparator\";\nvar MenuSeparator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, ...separatorProps } = props;\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        role: \"separator\",\n        \"aria-orientation\": \"horizontal\",\n        ...separatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nMenuSeparator.displayName = SEPARATOR_NAME;\nvar ARROW_NAME = \"MenuArrow\";\nvar MenuArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeMenu, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nMenuArrow.displayName = ARROW_NAME;\nvar SUB_NAME = \"MenuSub\";\nvar [MenuSubProvider, useMenuSubContext] = createMenuContext(SUB_NAME);\nvar MenuSub = (props) => {\n  const { __scopeMenu, children, open = false, onOpenChange } = props;\n  const parentMenuContext = useMenuContext(SUB_NAME, __scopeMenu);\n  const popperScope = usePopperScope(__scopeMenu);\n  const [trigger, setTrigger] = React.useState(null);\n  const [content, setContent] = React.useState(null);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n  React.useEffect(() => {\n    if (parentMenuContext.open === false) handleOpenChange(false);\n    return () => handleOpenChange(false);\n  }, [parentMenuContext.open, handleOpenChange]);\n  return /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children: /* @__PURE__ */ jsx(\n    MenuProvider,\n    {\n      scope: __scopeMenu,\n      open,\n      onOpenChange: handleOpenChange,\n      content,\n      onContentChange: setContent,\n      children: /* @__PURE__ */ jsx(\n        MenuSubProvider,\n        {\n          scope: __scopeMenu,\n          contentId: useId(),\n          triggerId: useId(),\n          trigger,\n          onTriggerChange: setTrigger,\n          children\n        }\n      )\n    }\n  ) });\n};\nMenuSub.displayName = SUB_NAME;\nvar SUB_TRIGGER_NAME = \"MenuSubTrigger\";\nvar MenuSubTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useMenuContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const openTimerRef = React.useRef(null);\n    const { pointerGraceTimerRef, onPointerGraceIntentChange } = contentContext;\n    const scope = { __scopeMenu: props.__scopeMenu };\n    const clearOpenTimer = React.useCallback(() => {\n      if (openTimerRef.current) window.clearTimeout(openTimerRef.current);\n      openTimerRef.current = null;\n    }, []);\n    React.useEffect(() => clearOpenTimer, [clearOpenTimer]);\n    React.useEffect(() => {\n      const pointerGraceTimer = pointerGraceTimerRef.current;\n      return () => {\n        window.clearTimeout(pointerGraceTimer);\n        onPointerGraceIntentChange(null);\n      };\n    }, [pointerGraceTimerRef, onPointerGraceIntentChange]);\n    return /* @__PURE__ */ jsx(MenuAnchor, { asChild: true, ...scope, children: /* @__PURE__ */ jsx(\n      MenuItemImpl,\n      {\n        id: subContext.triggerId,\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": context.open,\n        \"aria-controls\": subContext.contentId,\n        \"data-state\": getOpenState(context.open),\n        ...props,\n        ref: composeRefs(forwardedRef, subContext.onTriggerChange),\n        onClick: (event) => {\n          props.onClick?.(event);\n          if (props.disabled || event.defaultPrevented) return;\n          event.currentTarget.focus();\n          if (!context.open) context.onOpenChange(true);\n        },\n        onPointerMove: composeEventHandlers(\n          props.onPointerMove,\n          whenMouse((event) => {\n            contentContext.onItemEnter(event);\n            if (event.defaultPrevented) return;\n            if (!props.disabled && !context.open && !openTimerRef.current) {\n              contentContext.onPointerGraceIntentChange(null);\n              openTimerRef.current = window.setTimeout(() => {\n                context.onOpenChange(true);\n                clearOpenTimer();\n              }, 100);\n            }\n          })\n        ),\n        onPointerLeave: composeEventHandlers(\n          props.onPointerLeave,\n          whenMouse((event) => {\n            clearOpenTimer();\n            const contentRect = context.content?.getBoundingClientRect();\n            if (contentRect) {\n              const side = context.content?.dataset.side;\n              const rightSide = side === \"right\";\n              const bleed = rightSide ? -5 : 5;\n              const contentNearEdge = contentRect[rightSide ? \"left\" : \"right\"];\n              const contentFarEdge = contentRect[rightSide ? \"right\" : \"left\"];\n              contentContext.onPointerGraceIntentChange({\n                area: [\n                  // Apply a bleed on clientX to ensure that our exit point is\n                  // consistently within polygon bounds\n                  { x: event.clientX + bleed, y: event.clientY },\n                  { x: contentNearEdge, y: contentRect.top },\n                  { x: contentFarEdge, y: contentRect.top },\n                  { x: contentFarEdge, y: contentRect.bottom },\n                  { x: contentNearEdge, y: contentRect.bottom }\n                ],\n                side\n              });\n              window.clearTimeout(pointerGraceTimerRef.current);\n              pointerGraceTimerRef.current = window.setTimeout(\n                () => contentContext.onPointerGraceIntentChange(null),\n                300\n              );\n            } else {\n              contentContext.onTriggerLeave(event);\n              if (event.defaultPrevented) return;\n              contentContext.onPointerGraceIntentChange(null);\n            }\n          })\n        ),\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          const isTypingAhead = contentContext.searchRef.current !== \"\";\n          if (props.disabled || isTypingAhead && event.key === \" \") return;\n          if (SUB_OPEN_KEYS[rootContext.dir].includes(event.key)) {\n            context.onOpenChange(true);\n            context.content?.focus();\n            event.preventDefault();\n          }\n        })\n      }\n    ) });\n  }\n);\nMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\nvar SUB_CONTENT_NAME = \"MenuSubContent\";\nvar MenuSubContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...subContentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    return /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeMenu, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeMenu, children: /* @__PURE__ */ jsx(\n      MenuContentImpl,\n      {\n        id: subContext.contentId,\n        \"aria-labelledby\": subContext.triggerId,\n        ...subContentProps,\n        ref: composedRefs,\n        align: \"start\",\n        side: rootContext.dir === \"rtl\" ? \"left\" : \"right\",\n        disableOutsidePointerEvents: false,\n        disableOutsideScroll: false,\n        trapFocus: false,\n        onOpenAutoFocus: (event) => {\n          if (rootContext.isUsingKeyboardRef.current) ref.current?.focus();\n          event.preventDefault();\n        },\n        onCloseAutoFocus: (event) => event.preventDefault(),\n        onFocusOutside: composeEventHandlers(props.onFocusOutside, (event) => {\n          if (event.target !== subContext.trigger) context.onOpenChange(false);\n        }),\n        onEscapeKeyDown: composeEventHandlers(props.onEscapeKeyDown, (event) => {\n          rootContext.onClose();\n          event.preventDefault();\n        }),\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          const isKeyDownInside = event.currentTarget.contains(event.target);\n          const isCloseKey = SUB_CLOSE_KEYS[rootContext.dir].includes(event.key);\n          if (isKeyDownInside && isCloseKey) {\n            context.onOpenChange(false);\n            subContext.trigger?.focus();\n            event.preventDefault();\n          }\n        })\n      }\n    ) }) }) });\n  }\n);\nMenuSubContent.displayName = SUB_CONTENT_NAME;\nfunction getOpenState(open) {\n  return open ? \"open\" : \"closed\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getCheckedState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nfunction focusFirst(candidates) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus();\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nfunction getNextMatch(values, search, currentMatch) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentMatchIndex = currentMatch ? values.indexOf(currentMatch) : -1;\n  let wrappedValues = wrapArray(values, Math.max(currentMatchIndex, 0));\n  const excludeCurrentMatch = normalizedSearch.length === 1;\n  if (excludeCurrentMatch) wrappedValues = wrappedValues.filter((v) => v !== currentMatch);\n  const nextMatch = wrappedValues.find(\n    (value) => value.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextMatch !== currentMatch ? nextMatch : void 0;\n}\nfunction isPointInPolygon(point, polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n    const intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\nfunction isPointerInGraceArea(event, area) {\n  if (!area) return false;\n  const cursorPos = { x: event.clientX, y: event.clientY };\n  return isPointInPolygon(cursorPos, area);\n}\nfunction whenMouse(handler) {\n  return (event) => event.pointerType === \"mouse\" ? handler(event) : void 0;\n}\nvar Root3 = Menu;\nvar Anchor2 = MenuAnchor;\nvar Portal = MenuPortal;\nvar Content2 = MenuContent;\nvar Group = MenuGroup;\nvar Label = MenuLabel;\nvar Item2 = MenuItem;\nvar CheckboxItem = MenuCheckboxItem;\nvar RadioGroup = MenuRadioGroup;\nvar RadioItem = MenuRadioItem;\nvar ItemIndicator = MenuItemIndicator;\nvar Separator = MenuSeparator;\nvar Arrow2 = MenuArrow;\nvar Sub = MenuSub;\nvar SubTrigger = MenuSubTrigger;\nvar SubContent = MenuSubContent;\nexport {\n  Anchor2 as Anchor,\n  Arrow2 as Arrow,\n  CheckboxItem,\n  Content2 as Content,\n  Group,\n  Item2 as Item,\n  ItemIndicator,\n  Label,\n  Menu,\n  MenuAnchor,\n  MenuArrow,\n  MenuCheckboxItem,\n  MenuContent,\n  MenuGroup,\n  MenuItem,\n  MenuItemIndicator,\n  MenuLabel,\n  MenuPortal,\n  MenuRadioGroup,\n  MenuRadioItem,\n  MenuSeparator,\n  MenuSub,\n  MenuSubContent,\n  MenuSubTrigger,\n  Portal,\n  RadioGroup,\n  RadioItem,\n  Root3 as Root,\n  Separator,\n  Sub,\n  SubContent,\n  SubTrigger,\n  createMenuScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/dropdown-menu/src/DropdownMenu.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { composeRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as MenuPrimitive from \"@radix-ui/react-menu\";\nimport { createMenuScope } from \"@radix-ui/react-menu\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DROPDOWN_MENU_NAME = \"DropdownMenu\";\nvar [createDropdownMenuContext, createDropdownMenuScope] = createContextScope(\n  DROPDOWN_MENU_NAME,\n  [createMenuScope]\n);\nvar useMenuScope = createMenuScope();\nvar [DropdownMenuProvider, useDropdownMenuContext] = createDropdownMenuContext(DROPDOWN_MENU_NAME);\nvar DropdownMenu = (props) => {\n  const {\n    __scopeDropdownMenu,\n    children,\n    dir,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    modal = true\n  } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  const triggerRef = React.useRef(null);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange\n  });\n  return /* @__PURE__ */ jsx(\n    DropdownMenuProvider,\n    {\n      scope: __scopeDropdownMenu,\n      triggerId: useId(),\n      triggerRef,\n      contentId: useId(),\n      open,\n      onOpenChange: setOpen,\n      onOpenToggle: React.useCallback(() => setOpen((prevOpen) => !prevOpen), [setOpen]),\n      modal,\n      children: /* @__PURE__ */ jsx(MenuPrimitive.Root, { ...menuScope, open, onOpenChange: setOpen, dir, modal, children })\n    }\n  );\n};\nDropdownMenu.displayName = DROPDOWN_MENU_NAME;\nvar TRIGGER_NAME = \"DropdownMenuTrigger\";\nvar DropdownMenuTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, disabled = false, ...triggerProps } = props;\n    const context = useDropdownMenuContext(TRIGGER_NAME, __scopeDropdownMenu);\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return /* @__PURE__ */ jsx(MenuPrimitive.Anchor, { asChild: true, ...menuScope, children: /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        id: context.triggerId,\n        \"aria-haspopup\": \"menu\",\n        \"aria-expanded\": context.open,\n        \"aria-controls\": context.open ? context.contentId : void 0,\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        ...triggerProps,\n        ref: composeRefs(forwardedRef, context.triggerRef),\n        onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n          if (!disabled && event.button === 0 && event.ctrlKey === false) {\n            context.onOpenToggle();\n            if (!context.open) event.preventDefault();\n          }\n        }),\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          if (disabled) return;\n          if ([\"Enter\", \" \"].includes(event.key)) context.onOpenToggle();\n          if (event.key === \"ArrowDown\") context.onOpenChange(true);\n          if ([\"Enter\", \" \", \"ArrowDown\"].includes(event.key)) event.preventDefault();\n        })\n      }\n    ) });\n  }\n);\nDropdownMenuTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"DropdownMenuPortal\";\nvar DropdownMenuPortal = (props) => {\n  const { __scopeDropdownMenu, ...portalProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.Portal, { ...menuScope, ...portalProps });\n};\nDropdownMenuPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"DropdownMenuContent\";\nvar DropdownMenuContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, ...contentProps } = props;\n    const context = useDropdownMenuContext(CONTENT_NAME, __scopeDropdownMenu);\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    const hasInteractedOutsideRef = React.useRef(false);\n    return /* @__PURE__ */ jsx(\n      MenuPrimitive.Content,\n      {\n        id: context.contentId,\n        \"aria-labelledby\": context.triggerId,\n        ...menuScope,\n        ...contentProps,\n        ref: forwardedRef,\n        onCloseAutoFocus: composeEventHandlers(props.onCloseAutoFocus, (event) => {\n          if (!hasInteractedOutsideRef.current) context.triggerRef.current?.focus();\n          hasInteractedOutsideRef.current = false;\n          event.preventDefault();\n        }),\n        onInteractOutside: composeEventHandlers(props.onInteractOutside, (event) => {\n          const originalEvent = event.detail.originalEvent;\n          const ctrlLeftClick = originalEvent.button === 0 && originalEvent.ctrlKey === true;\n          const isRightClick = originalEvent.button === 2 || ctrlLeftClick;\n          if (!context.modal || isRightClick) hasInteractedOutsideRef.current = true;\n        }),\n        style: {\n          ...props.style,\n          // re-namespace exposed content custom properties\n          ...{\n            \"--radix-dropdown-menu-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n            \"--radix-dropdown-menu-content-available-width\": \"var(--radix-popper-available-width)\",\n            \"--radix-dropdown-menu-content-available-height\": \"var(--radix-popper-available-height)\",\n            \"--radix-dropdown-menu-trigger-width\": \"var(--radix-popper-anchor-width)\",\n            \"--radix-dropdown-menu-trigger-height\": \"var(--radix-popper-anchor-height)\"\n          }\n        }\n      }\n    );\n  }\n);\nDropdownMenuContent.displayName = CONTENT_NAME;\nvar GROUP_NAME = \"DropdownMenuGroup\";\nvar DropdownMenuGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, ...groupProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return /* @__PURE__ */ jsx(MenuPrimitive.Group, { ...menuScope, ...groupProps, ref: forwardedRef });\n  }\n);\nDropdownMenuGroup.displayName = GROUP_NAME;\nvar LABEL_NAME = \"DropdownMenuLabel\";\nvar DropdownMenuLabel = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, ...labelProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return /* @__PURE__ */ jsx(MenuPrimitive.Label, { ...menuScope, ...labelProps, ref: forwardedRef });\n  }\n);\nDropdownMenuLabel.displayName = LABEL_NAME;\nvar ITEM_NAME = \"DropdownMenuItem\";\nvar DropdownMenuItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, ...itemProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return /* @__PURE__ */ jsx(MenuPrimitive.Item, { ...menuScope, ...itemProps, ref: forwardedRef });\n  }\n);\nDropdownMenuItem.displayName = ITEM_NAME;\nvar CHECKBOX_ITEM_NAME = \"DropdownMenuCheckboxItem\";\nvar DropdownMenuCheckboxItem = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...checkboxItemProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.CheckboxItem, { ...menuScope, ...checkboxItemProps, ref: forwardedRef });\n});\nDropdownMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\nvar RADIO_GROUP_NAME = \"DropdownMenuRadioGroup\";\nvar DropdownMenuRadioGroup = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...radioGroupProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.RadioGroup, { ...menuScope, ...radioGroupProps, ref: forwardedRef });\n});\nDropdownMenuRadioGroup.displayName = RADIO_GROUP_NAME;\nvar RADIO_ITEM_NAME = \"DropdownMenuRadioItem\";\nvar DropdownMenuRadioItem = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...radioItemProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.RadioItem, { ...menuScope, ...radioItemProps, ref: forwardedRef });\n});\nDropdownMenuRadioItem.displayName = RADIO_ITEM_NAME;\nvar INDICATOR_NAME = \"DropdownMenuItemIndicator\";\nvar DropdownMenuItemIndicator = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...itemIndicatorProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.ItemIndicator, { ...menuScope, ...itemIndicatorProps, ref: forwardedRef });\n});\nDropdownMenuItemIndicator.displayName = INDICATOR_NAME;\nvar SEPARATOR_NAME = \"DropdownMenuSeparator\";\nvar DropdownMenuSeparator = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...separatorProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.Separator, { ...menuScope, ...separatorProps, ref: forwardedRef });\n});\nDropdownMenuSeparator.displayName = SEPARATOR_NAME;\nvar ARROW_NAME = \"DropdownMenuArrow\";\nvar DropdownMenuArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDropdownMenu, ...arrowProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return /* @__PURE__ */ jsx(MenuPrimitive.Arrow, { ...menuScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nDropdownMenuArrow.displayName = ARROW_NAME;\nvar DropdownMenuSub = (props) => {\n  const { __scopeDropdownMenu, children, open: openProp, onOpenChange, defaultOpen } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange\n  });\n  return /* @__PURE__ */ jsx(MenuPrimitive.Sub, { ...menuScope, open, onOpenChange: setOpen, children });\n};\nvar SUB_TRIGGER_NAME = \"DropdownMenuSubTrigger\";\nvar DropdownMenuSubTrigger = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...subTriggerProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(MenuPrimitive.SubTrigger, { ...menuScope, ...subTriggerProps, ref: forwardedRef });\n});\nDropdownMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\nvar SUB_CONTENT_NAME = \"DropdownMenuSubContent\";\nvar DropdownMenuSubContent = React.forwardRef((props, forwardedRef) => {\n  const { __scopeDropdownMenu, ...subContentProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return /* @__PURE__ */ jsx(\n    MenuPrimitive.SubContent,\n    {\n      ...menuScope,\n      ...subContentProps,\n      ref: forwardedRef,\n      style: {\n        ...props.style,\n        // re-namespace exposed content custom properties\n        ...{\n          \"--radix-dropdown-menu-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n          \"--radix-dropdown-menu-content-available-width\": \"var(--radix-popper-available-width)\",\n          \"--radix-dropdown-menu-content-available-height\": \"var(--radix-popper-available-height)\",\n          \"--radix-dropdown-menu-trigger-width\": \"var(--radix-popper-anchor-width)\",\n          \"--radix-dropdown-menu-trigger-height\": \"var(--radix-popper-anchor-height)\"\n        }\n      }\n    }\n  );\n});\nDropdownMenuSubContent.displayName = SUB_CONTENT_NAME;\nvar Root2 = DropdownMenu;\nvar Trigger = DropdownMenuTrigger;\nvar Portal2 = DropdownMenuPortal;\nvar Content2 = DropdownMenuContent;\nvar Group2 = DropdownMenuGroup;\nvar Label2 = DropdownMenuLabel;\nvar Item2 = DropdownMenuItem;\nvar CheckboxItem2 = DropdownMenuCheckboxItem;\nvar RadioGroup2 = DropdownMenuRadioGroup;\nvar RadioItem2 = DropdownMenuRadioItem;\nvar ItemIndicator2 = DropdownMenuItemIndicator;\nvar Separator2 = DropdownMenuSeparator;\nvar Arrow2 = DropdownMenuArrow;\nvar Sub2 = DropdownMenuSub;\nvar SubTrigger2 = DropdownMenuSubTrigger;\nvar SubContent2 = DropdownMenuSubContent;\nexport {\n  Arrow2 as Arrow,\n  CheckboxItem2 as CheckboxItem,\n  Content2 as Content,\n  DropdownMenu,\n  DropdownMenuArrow,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuItemIndicator,\n  DropdownMenuLabel,\n  DropdownMenuPortal,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n  Group2 as Group,\n  Item2 as Item,\n  ItemIndicator2 as ItemIndicator,\n  Label2 as Label,\n  Portal2 as Portal,\n  RadioGroup2 as RadioGroup,\n  RadioItem2 as RadioItem,\n  Root2 as Root,\n  Separator2 as Separator,\n  Sub2 as Sub,\n  SubContent2 as SubContent,\n  SubTrigger2 as SubTrigger,\n  Trigger,\n  createDropdownMenuScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// src/index.tsx\nimport React from \"react\";\n\n// src/third-party/qrcodegen/index.ts\n/**\n * @license QR Code generator library (TypeScript)\n * Copyright (c) Project Nayuki.\n * SPDX-License-Identifier: MIT\n */\nvar qrcodegen;\n((qrcodegen2) => {\n  const _QrCode = class _QrCode {\n    /*-- Constructor (low level) and fields --*/\n    // Creates a new QR Code with the given version number,\n    // error correction level, data codeword bytes, and mask number.\n    // This is a low-level API that most users should not use directly.\n    // A mid-level API is the encodeSegments() function.\n    constructor(version, errorCorrectionLevel, dataCodewords, msk) {\n      this.version = version;\n      this.errorCorrectionLevel = errorCorrectionLevel;\n      // The modules of this QR Code (false = light, true = dark).\n      // Immutable after constructor finishes. Accessed through getModule().\n      this.modules = [];\n      // Indicates function modules that are not subjected to masking. Discarded when constructor finishes.\n      this.isFunction = [];\n      if (version < _QrCode.MIN_VERSION || version > _QrCode.MAX_VERSION)\n        throw new RangeError(\"Version value out of range\");\n      if (msk < -1 || msk > 7)\n        throw new RangeError(\"Mask value out of range\");\n      this.size = version * 4 + 17;\n      let row = [];\n      for (let i = 0; i < this.size; i++)\n        row.push(false);\n      for (let i = 0; i < this.size; i++) {\n        this.modules.push(row.slice());\n        this.isFunction.push(row.slice());\n      }\n      this.drawFunctionPatterns();\n      const allCodewords = this.addEccAndInterleave(dataCodewords);\n      this.drawCodewords(allCodewords);\n      if (msk == -1) {\n        let minPenalty = 1e9;\n        for (let i = 0; i < 8; i++) {\n          this.applyMask(i);\n          this.drawFormatBits(i);\n          const penalty = this.getPenaltyScore();\n          if (penalty < minPenalty) {\n            msk = i;\n            minPenalty = penalty;\n          }\n          this.applyMask(i);\n        }\n      }\n      assert(0 <= msk && msk <= 7);\n      this.mask = msk;\n      this.applyMask(msk);\n      this.drawFormatBits(msk);\n      this.isFunction = [];\n    }\n    /*-- Static factory functions (high level) --*/\n    // Returns a QR Code representing the given Unicode text string at the given error correction level.\n    // As a conservative upper bound, this function is guaranteed to succeed for strings that have 738 or fewer\n    // Unicode code points (not UTF-16 code units) if the low error correction level is used. The smallest possible\n    // QR Code version is automatically chosen for the output. The ECC level of the result may be higher than the\n    // ecl argument if it can be done without increasing the version.\n    static encodeText(text, ecl) {\n      const segs = qrcodegen2.QrSegment.makeSegments(text);\n      return _QrCode.encodeSegments(segs, ecl);\n    }\n    // Returns a QR Code representing the given binary data at the given error correction level.\n    // This function always encodes using the binary segment mode, not any text mode. The maximum number of\n    // bytes allowed is 2953. The smallest possible QR Code version is automatically chosen for the output.\n    // The ECC level of the result may be higher than the ecl argument if it can be done without increasing the version.\n    static encodeBinary(data, ecl) {\n      const seg = qrcodegen2.QrSegment.makeBytes(data);\n      return _QrCode.encodeSegments([seg], ecl);\n    }\n    /*-- Static factory functions (mid level) --*/\n    // Returns a QR Code representing the given segments with the given encoding parameters.\n    // The smallest possible QR Code version within the given range is automatically\n    // chosen for the output. Iff boostEcl is true, then the ECC level of the result\n    // may be higher than the ecl argument if it can be done without increasing the\n    // version. The mask number is either between 0 to 7 (inclusive) to force that\n    // mask, or -1 to automatically choose an appropriate mask (which may be slow).\n    // This function allows the user to create a custom sequence of segments that switches\n    // between modes (such as alphanumeric and byte) to encode text in less space.\n    // This is a mid-level API; the high-level API is encodeText() and encodeBinary().\n    static encodeSegments(segs, ecl, minVersion = 1, maxVersion = 40, mask = -1, boostEcl = true) {\n      if (!(_QrCode.MIN_VERSION <= minVersion && minVersion <= maxVersion && maxVersion <= _QrCode.MAX_VERSION) || mask < -1 || mask > 7)\n        throw new RangeError(\"Invalid value\");\n      let version;\n      let dataUsedBits;\n      for (version = minVersion; ; version++) {\n        const dataCapacityBits2 = _QrCode.getNumDataCodewords(version, ecl) * 8;\n        const usedBits = QrSegment.getTotalBits(segs, version);\n        if (usedBits <= dataCapacityBits2) {\n          dataUsedBits = usedBits;\n          break;\n        }\n        if (version >= maxVersion)\n          throw new RangeError(\"Data too long\");\n      }\n      for (const newEcl of [_QrCode.Ecc.MEDIUM, _QrCode.Ecc.QUARTILE, _QrCode.Ecc.HIGH]) {\n        if (boostEcl && dataUsedBits <= _QrCode.getNumDataCodewords(version, newEcl) * 8)\n          ecl = newEcl;\n      }\n      let bb = [];\n      for (const seg of segs) {\n        appendBits(seg.mode.modeBits, 4, bb);\n        appendBits(seg.numChars, seg.mode.numCharCountBits(version), bb);\n        for (const b of seg.getData())\n          bb.push(b);\n      }\n      assert(bb.length == dataUsedBits);\n      const dataCapacityBits = _QrCode.getNumDataCodewords(version, ecl) * 8;\n      assert(bb.length <= dataCapacityBits);\n      appendBits(0, Math.min(4, dataCapacityBits - bb.length), bb);\n      appendBits(0, (8 - bb.length % 8) % 8, bb);\n      assert(bb.length % 8 == 0);\n      for (let padByte = 236; bb.length < dataCapacityBits; padByte ^= 236 ^ 17)\n        appendBits(padByte, 8, bb);\n      let dataCodewords = [];\n      while (dataCodewords.length * 8 < bb.length)\n        dataCodewords.push(0);\n      bb.forEach((b, i) => dataCodewords[i >>> 3] |= b << 7 - (i & 7));\n      return new _QrCode(version, ecl, dataCodewords, mask);\n    }\n    /*-- Accessor methods --*/\n    // Returns the color of the module (pixel) at the given coordinates, which is false\n    // for light or true for dark. The top left corner has the coordinates (x=0, y=0).\n    // If the given coordinates are out of bounds, then false (light) is returned.\n    getModule(x, y) {\n      return 0 <= x && x < this.size && 0 <= y && y < this.size && this.modules[y][x];\n    }\n    // Modified to expose modules for easy access\n    getModules() {\n      return this.modules;\n    }\n    /*-- Private helper methods for constructor: Drawing function modules --*/\n    // Reads this object's version field, and draws and marks all function modules.\n    drawFunctionPatterns() {\n      for (let i = 0; i < this.size; i++) {\n        this.setFunctionModule(6, i, i % 2 == 0);\n        this.setFunctionModule(i, 6, i % 2 == 0);\n      }\n      this.drawFinderPattern(3, 3);\n      this.drawFinderPattern(this.size - 4, 3);\n      this.drawFinderPattern(3, this.size - 4);\n      const alignPatPos = this.getAlignmentPatternPositions();\n      const numAlign = alignPatPos.length;\n      for (let i = 0; i < numAlign; i++) {\n        for (let j = 0; j < numAlign; j++) {\n          if (!(i == 0 && j == 0 || i == 0 && j == numAlign - 1 || i == numAlign - 1 && j == 0))\n            this.drawAlignmentPattern(alignPatPos[i], alignPatPos[j]);\n        }\n      }\n      this.drawFormatBits(0);\n      this.drawVersion();\n    }\n    // Draws two copies of the format bits (with its own error correction code)\n    // based on the given mask and this object's error correction level field.\n    drawFormatBits(mask) {\n      const data = this.errorCorrectionLevel.formatBits << 3 | mask;\n      let rem = data;\n      for (let i = 0; i < 10; i++)\n        rem = rem << 1 ^ (rem >>> 9) * 1335;\n      const bits = (data << 10 | rem) ^ 21522;\n      assert(bits >>> 15 == 0);\n      for (let i = 0; i <= 5; i++)\n        this.setFunctionModule(8, i, getBit(bits, i));\n      this.setFunctionModule(8, 7, getBit(bits, 6));\n      this.setFunctionModule(8, 8, getBit(bits, 7));\n      this.setFunctionModule(7, 8, getBit(bits, 8));\n      for (let i = 9; i < 15; i++)\n        this.setFunctionModule(14 - i, 8, getBit(bits, i));\n      for (let i = 0; i < 8; i++)\n        this.setFunctionModule(this.size - 1 - i, 8, getBit(bits, i));\n      for (let i = 8; i < 15; i++)\n        this.setFunctionModule(8, this.size - 15 + i, getBit(bits, i));\n      this.setFunctionModule(8, this.size - 8, true);\n    }\n    // Draws two copies of the version bits (with its own error correction code),\n    // based on this object's version field, iff 7 <= version <= 40.\n    drawVersion() {\n      if (this.version < 7)\n        return;\n      let rem = this.version;\n      for (let i = 0; i < 12; i++)\n        rem = rem << 1 ^ (rem >>> 11) * 7973;\n      const bits = this.version << 12 | rem;\n      assert(bits >>> 18 == 0);\n      for (let i = 0; i < 18; i++) {\n        const color = getBit(bits, i);\n        const a = this.size - 11 + i % 3;\n        const b = Math.floor(i / 3);\n        this.setFunctionModule(a, b, color);\n        this.setFunctionModule(b, a, color);\n      }\n    }\n    // Draws a 9*9 finder pattern including the border separator,\n    // with the center module at (x, y). Modules can be out of bounds.\n    drawFinderPattern(x, y) {\n      for (let dy = -4; dy <= 4; dy++) {\n        for (let dx = -4; dx <= 4; dx++) {\n          const dist = Math.max(Math.abs(dx), Math.abs(dy));\n          const xx = x + dx;\n          const yy = y + dy;\n          if (0 <= xx && xx < this.size && 0 <= yy && yy < this.size)\n            this.setFunctionModule(xx, yy, dist != 2 && dist != 4);\n        }\n      }\n    }\n    // Draws a 5*5 alignment pattern, with the center module\n    // at (x, y). All modules must be in bounds.\n    drawAlignmentPattern(x, y) {\n      for (let dy = -2; dy <= 2; dy++) {\n        for (let dx = -2; dx <= 2; dx++)\n          this.setFunctionModule(x + dx, y + dy, Math.max(Math.abs(dx), Math.abs(dy)) != 1);\n      }\n    }\n    // Sets the color of a module and marks it as a function module.\n    // Only used by the constructor. Coordinates must be in bounds.\n    setFunctionModule(x, y, isDark) {\n      this.modules[y][x] = isDark;\n      this.isFunction[y][x] = true;\n    }\n    /*-- Private helper methods for constructor: Codewords and masking --*/\n    // Returns a new byte string representing the given data with the appropriate error correction\n    // codewords appended to it, based on this object's version and error correction level.\n    addEccAndInterleave(data) {\n      const ver = this.version;\n      const ecl = this.errorCorrectionLevel;\n      if (data.length != _QrCode.getNumDataCodewords(ver, ecl))\n        throw new RangeError(\"Invalid argument\");\n      const numBlocks = _QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\n      const blockEccLen = _QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver];\n      const rawCodewords = Math.floor(_QrCode.getNumRawDataModules(ver) / 8);\n      const numShortBlocks = numBlocks - rawCodewords % numBlocks;\n      const shortBlockLen = Math.floor(rawCodewords / numBlocks);\n      let blocks = [];\n      const rsDiv = _QrCode.reedSolomonComputeDivisor(blockEccLen);\n      for (let i = 0, k = 0; i < numBlocks; i++) {\n        let dat = data.slice(k, k + shortBlockLen - blockEccLen + (i < numShortBlocks ? 0 : 1));\n        k += dat.length;\n        const ecc = _QrCode.reedSolomonComputeRemainder(dat, rsDiv);\n        if (i < numShortBlocks)\n          dat.push(0);\n        blocks.push(dat.concat(ecc));\n      }\n      let result = [];\n      for (let i = 0; i < blocks[0].length; i++) {\n        blocks.forEach((block, j) => {\n          if (i != shortBlockLen - blockEccLen || j >= numShortBlocks)\n            result.push(block[i]);\n        });\n      }\n      assert(result.length == rawCodewords);\n      return result;\n    }\n    // Draws the given sequence of 8-bit codewords (data and error correction) onto the entire\n    // data area of this QR Code. Function modules need to be marked off before this is called.\n    drawCodewords(data) {\n      if (data.length != Math.floor(_QrCode.getNumRawDataModules(this.version) / 8))\n        throw new RangeError(\"Invalid argument\");\n      let i = 0;\n      for (let right = this.size - 1; right >= 1; right -= 2) {\n        if (right == 6)\n          right = 5;\n        for (let vert = 0; vert < this.size; vert++) {\n          for (let j = 0; j < 2; j++) {\n            const x = right - j;\n            const upward = (right + 1 & 2) == 0;\n            const y = upward ? this.size - 1 - vert : vert;\n            if (!this.isFunction[y][x] && i < data.length * 8) {\n              this.modules[y][x] = getBit(data[i >>> 3], 7 - (i & 7));\n              i++;\n            }\n          }\n        }\n      }\n      assert(i == data.length * 8);\n    }\n    // XORs the codeword modules in this QR Code with the given mask pattern.\n    // The function modules must be marked and the codeword bits must be drawn\n    // before masking. Due to the arithmetic of XOR, calling applyMask() with\n    // the same mask value a second time will undo the mask. A final well-formed\n    // QR Code needs exactly one (not zero, two, etc.) mask applied.\n    applyMask(mask) {\n      if (mask < 0 || mask > 7)\n        throw new RangeError(\"Mask value out of range\");\n      for (let y = 0; y < this.size; y++) {\n        for (let x = 0; x < this.size; x++) {\n          let invert;\n          switch (mask) {\n            case 0:\n              invert = (x + y) % 2 == 0;\n              break;\n            case 1:\n              invert = y % 2 == 0;\n              break;\n            case 2:\n              invert = x % 3 == 0;\n              break;\n            case 3:\n              invert = (x + y) % 3 == 0;\n              break;\n            case 4:\n              invert = (Math.floor(x / 3) + Math.floor(y / 2)) % 2 == 0;\n              break;\n            case 5:\n              invert = x * y % 2 + x * y % 3 == 0;\n              break;\n            case 6:\n              invert = (x * y % 2 + x * y % 3) % 2 == 0;\n              break;\n            case 7:\n              invert = ((x + y) % 2 + x * y % 3) % 2 == 0;\n              break;\n            default:\n              throw new Error(\"Unreachable\");\n          }\n          if (!this.isFunction[y][x] && invert)\n            this.modules[y][x] = !this.modules[y][x];\n        }\n      }\n    }\n    // Calculates and returns the penalty score based on state of this QR Code's current modules.\n    // This is used by the automatic mask choice algorithm to find the mask pattern that yields the lowest score.\n    getPenaltyScore() {\n      let result = 0;\n      for (let y = 0; y < this.size; y++) {\n        let runColor = false;\n        let runX = 0;\n        let runHistory = [0, 0, 0, 0, 0, 0, 0];\n        for (let x = 0; x < this.size; x++) {\n          if (this.modules[y][x] == runColor) {\n            runX++;\n            if (runX == 5)\n              result += _QrCode.PENALTY_N1;\n            else if (runX > 5)\n              result++;\n          } else {\n            this.finderPenaltyAddHistory(runX, runHistory);\n            if (!runColor)\n              result += this.finderPenaltyCountPatterns(runHistory) * _QrCode.PENALTY_N3;\n            runColor = this.modules[y][x];\n            runX = 1;\n          }\n        }\n        result += this.finderPenaltyTerminateAndCount(runColor, runX, runHistory) * _QrCode.PENALTY_N3;\n      }\n      for (let x = 0; x < this.size; x++) {\n        let runColor = false;\n        let runY = 0;\n        let runHistory = [0, 0, 0, 0, 0, 0, 0];\n        for (let y = 0; y < this.size; y++) {\n          if (this.modules[y][x] == runColor) {\n            runY++;\n            if (runY == 5)\n              result += _QrCode.PENALTY_N1;\n            else if (runY > 5)\n              result++;\n          } else {\n            this.finderPenaltyAddHistory(runY, runHistory);\n            if (!runColor)\n              result += this.finderPenaltyCountPatterns(runHistory) * _QrCode.PENALTY_N3;\n            runColor = this.modules[y][x];\n            runY = 1;\n          }\n        }\n        result += this.finderPenaltyTerminateAndCount(runColor, runY, runHistory) * _QrCode.PENALTY_N3;\n      }\n      for (let y = 0; y < this.size - 1; y++) {\n        for (let x = 0; x < this.size - 1; x++) {\n          const color = this.modules[y][x];\n          if (color == this.modules[y][x + 1] && color == this.modules[y + 1][x] && color == this.modules[y + 1][x + 1])\n            result += _QrCode.PENALTY_N2;\n        }\n      }\n      let dark = 0;\n      for (const row of this.modules)\n        dark = row.reduce((sum, color) => sum + (color ? 1 : 0), dark);\n      const total = this.size * this.size;\n      const k = Math.ceil(Math.abs(dark * 20 - total * 10) / total) - 1;\n      assert(0 <= k && k <= 9);\n      result += k * _QrCode.PENALTY_N4;\n      assert(0 <= result && result <= 2568888);\n      return result;\n    }\n    /*-- Private helper functions --*/\n    // Returns an ascending list of positions of alignment patterns for this version number.\n    // Each position is in the range [0,177), and are used on both the x and y axes.\n    // This could be implemented as lookup table of 40 variable-length lists of integers.\n    getAlignmentPatternPositions() {\n      if (this.version == 1)\n        return [];\n      else {\n        const numAlign = Math.floor(this.version / 7) + 2;\n        const step = this.version == 32 ? 26 : Math.ceil((this.version * 4 + 4) / (numAlign * 2 - 2)) * 2;\n        let result = [6];\n        for (let pos = this.size - 7; result.length < numAlign; pos -= step)\n          result.splice(1, 0, pos);\n        return result;\n      }\n    }\n    // Returns the number of data bits that can be stored in a QR Code of the given version number, after\n    // all function modules are excluded. This includes remainder bits, so it might not be a multiple of 8.\n    // The result is in the range [208, 29648]. This could be implemented as a 40-entry lookup table.\n    static getNumRawDataModules(ver) {\n      if (ver < _QrCode.MIN_VERSION || ver > _QrCode.MAX_VERSION)\n        throw new RangeError(\"Version number out of range\");\n      let result = (16 * ver + 128) * ver + 64;\n      if (ver >= 2) {\n        const numAlign = Math.floor(ver / 7) + 2;\n        result -= (25 * numAlign - 10) * numAlign - 55;\n        if (ver >= 7)\n          result -= 36;\n      }\n      assert(208 <= result && result <= 29648);\n      return result;\n    }\n    // Returns the number of 8-bit data (i.e. not error correction) codewords contained in any\n    // QR Code of the given version number and error correction level, with remainder bits discarded.\n    // This stateless pure function could be implemented as a (40*4)-cell lookup table.\n    static getNumDataCodewords(ver, ecl) {\n      return Math.floor(_QrCode.getNumRawDataModules(ver) / 8) - _QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver] * _QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\n    }\n    // Returns a Reed-Solomon ECC generator polynomial for the given degree. This could be\n    // implemented as a lookup table over all possible parameter values, instead of as an algorithm.\n    static reedSolomonComputeDivisor(degree) {\n      if (degree < 1 || degree > 255)\n        throw new RangeError(\"Degree out of range\");\n      let result = [];\n      for (let i = 0; i < degree - 1; i++)\n        result.push(0);\n      result.push(1);\n      let root = 1;\n      for (let i = 0; i < degree; i++) {\n        for (let j = 0; j < result.length; j++) {\n          result[j] = _QrCode.reedSolomonMultiply(result[j], root);\n          if (j + 1 < result.length)\n            result[j] ^= result[j + 1];\n        }\n        root = _QrCode.reedSolomonMultiply(root, 2);\n      }\n      return result;\n    }\n    // Returns the Reed-Solomon error correction codeword for the given data and divisor polynomials.\n    static reedSolomonComputeRemainder(data, divisor) {\n      let result = divisor.map((_) => 0);\n      for (const b of data) {\n        const factor = b ^ result.shift();\n        result.push(0);\n        divisor.forEach((coef, i) => result[i] ^= _QrCode.reedSolomonMultiply(coef, factor));\n      }\n      return result;\n    }\n    // Returns the product of the two given field elements modulo GF(2^8/0x11D). The arguments and result\n    // are unsigned 8-bit integers. This could be implemented as a lookup table of 256*256 entries of uint8.\n    static reedSolomonMultiply(x, y) {\n      if (x >>> 8 != 0 || y >>> 8 != 0)\n        throw new RangeError(\"Byte out of range\");\n      let z = 0;\n      for (let i = 7; i >= 0; i--) {\n        z = z << 1 ^ (z >>> 7) * 285;\n        z ^= (y >>> i & 1) * x;\n      }\n      assert(z >>> 8 == 0);\n      return z;\n    }\n    // Can only be called immediately after a light run is added, and\n    // returns either 0, 1, or 2. A helper function for getPenaltyScore().\n    finderPenaltyCountPatterns(runHistory) {\n      const n = runHistory[1];\n      assert(n <= this.size * 3);\n      const core = n > 0 && runHistory[2] == n && runHistory[3] == n * 3 && runHistory[4] == n && runHistory[5] == n;\n      return (core && runHistory[0] >= n * 4 && runHistory[6] >= n ? 1 : 0) + (core && runHistory[6] >= n * 4 && runHistory[0] >= n ? 1 : 0);\n    }\n    // Must be called at the end of a line (row or column) of modules. A helper function for getPenaltyScore().\n    finderPenaltyTerminateAndCount(currentRunColor, currentRunLength, runHistory) {\n      if (currentRunColor) {\n        this.finderPenaltyAddHistory(currentRunLength, runHistory);\n        currentRunLength = 0;\n      }\n      currentRunLength += this.size;\n      this.finderPenaltyAddHistory(currentRunLength, runHistory);\n      return this.finderPenaltyCountPatterns(runHistory);\n    }\n    // Pushes the given value to the front and drops the last value. A helper function for getPenaltyScore().\n    finderPenaltyAddHistory(currentRunLength, runHistory) {\n      if (runHistory[0] == 0)\n        currentRunLength += this.size;\n      runHistory.pop();\n      runHistory.unshift(currentRunLength);\n    }\n  };\n  /*-- Constants and tables --*/\n  // The minimum version number supported in the QR Code Model 2 standard.\n  _QrCode.MIN_VERSION = 1;\n  // The maximum version number supported in the QR Code Model 2 standard.\n  _QrCode.MAX_VERSION = 40;\n  // For use in getPenaltyScore(), when evaluating which mask is best.\n  _QrCode.PENALTY_N1 = 3;\n  _QrCode.PENALTY_N2 = 3;\n  _QrCode.PENALTY_N3 = 40;\n  _QrCode.PENALTY_N4 = 10;\n  _QrCode.ECC_CODEWORDS_PER_BLOCK = [\n    // Version: (note that index 0 is for padding, and is set to an illegal value)\n    //0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level\n    [-1, 7, 10, 15, 20, 26, 18, 20, 24, 30, 18, 20, 24, 26, 30, 22, 24, 28, 30, 28, 28, 28, 28, 30, 30, 26, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],\n    // Low\n    [-1, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26, 30, 22, 22, 24, 24, 28, 28, 26, 26, 26, 26, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28],\n    // Medium\n    [-1, 13, 22, 18, 26, 18, 24, 18, 22, 20, 24, 28, 26, 24, 20, 30, 24, 28, 28, 26, 30, 28, 30, 30, 30, 30, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],\n    // Quartile\n    [-1, 17, 28, 22, 16, 22, 28, 26, 26, 24, 28, 24, 28, 22, 24, 24, 30, 28, 28, 26, 28, 30, 24, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]\n    // High\n  ];\n  _QrCode.NUM_ERROR_CORRECTION_BLOCKS = [\n    // Version: (note that index 0 is for padding, and is set to an illegal value)\n    //0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level\n    [-1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 4, 4, 4, 4, 6, 6, 6, 6, 7, 8, 8, 9, 9, 10, 12, 12, 12, 13, 14, 15, 16, 17, 18, 19, 19, 20, 21, 22, 24, 25],\n    // Low\n    [-1, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5, 5, 8, 9, 9, 10, 10, 11, 13, 14, 16, 17, 17, 18, 20, 21, 23, 25, 26, 28, 29, 31, 33, 35, 37, 38, 40, 43, 45, 47, 49],\n    // Medium\n    [-1, 1, 1, 2, 2, 4, 4, 6, 6, 8, 8, 8, 10, 12, 16, 12, 17, 16, 18, 21, 20, 23, 23, 25, 27, 29, 34, 34, 35, 38, 40, 43, 45, 48, 51, 53, 56, 59, 62, 65, 68],\n    // Quartile\n    [-1, 1, 1, 2, 4, 4, 4, 5, 6, 8, 8, 11, 11, 16, 16, 18, 16, 19, 21, 25, 25, 25, 34, 30, 32, 35, 37, 40, 42, 45, 48, 51, 54, 57, 60, 63, 66, 70, 74, 77, 81]\n    // High\n  ];\n  let QrCode = _QrCode;\n  qrcodegen2.QrCode = _QrCode;\n  function appendBits(val, len, bb) {\n    if (len < 0 || len > 31 || val >>> len != 0)\n      throw new RangeError(\"Value out of range\");\n    for (let i = len - 1; i >= 0; i--)\n      bb.push(val >>> i & 1);\n  }\n  function getBit(x, i) {\n    return (x >>> i & 1) != 0;\n  }\n  function assert(cond) {\n    if (!cond)\n      throw new Error(\"Assertion error\");\n  }\n  const _QrSegment = class _QrSegment {\n    /*-- Constructor (low level) and fields --*/\n    // Creates a new QR Code segment with the given attributes and data.\n    // The character count (numChars) must agree with the mode and the bit buffer length,\n    // but the constraint isn't checked. The given bit buffer is cloned and stored.\n    constructor(mode, numChars, bitData) {\n      this.mode = mode;\n      this.numChars = numChars;\n      this.bitData = bitData;\n      if (numChars < 0)\n        throw new RangeError(\"Invalid argument\");\n      this.bitData = bitData.slice();\n    }\n    /*-- Static factory functions (mid level) --*/\n    // Returns a segment representing the given binary data encoded in\n    // byte mode. All input byte arrays are acceptable. Any text string\n    // can be converted to UTF-8 bytes and encoded as a byte mode segment.\n    static makeBytes(data) {\n      let bb = [];\n      for (const b of data)\n        appendBits(b, 8, bb);\n      return new _QrSegment(_QrSegment.Mode.BYTE, data.length, bb);\n    }\n    // Returns a segment representing the given string of decimal digits encoded in numeric mode.\n    static makeNumeric(digits) {\n      if (!_QrSegment.isNumeric(digits))\n        throw new RangeError(\"String contains non-numeric characters\");\n      let bb = [];\n      for (let i = 0; i < digits.length; ) {\n        const n = Math.min(digits.length - i, 3);\n        appendBits(parseInt(digits.substring(i, i + n), 10), n * 3 + 1, bb);\n        i += n;\n      }\n      return new _QrSegment(_QrSegment.Mode.NUMERIC, digits.length, bb);\n    }\n    // Returns a segment representing the given text string encoded in alphanumeric mode.\n    // The characters allowed are: 0 to 9, A to Z (uppercase only), space,\n    // dollar, percent, asterisk, plus, hyphen, period, slash, colon.\n    static makeAlphanumeric(text) {\n      if (!_QrSegment.isAlphanumeric(text))\n        throw new RangeError(\"String contains unencodable characters in alphanumeric mode\");\n      let bb = [];\n      let i;\n      for (i = 0; i + 2 <= text.length; i += 2) {\n        let temp = _QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)) * 45;\n        temp += _QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i + 1));\n        appendBits(temp, 11, bb);\n      }\n      if (i < text.length)\n        appendBits(_QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)), 6, bb);\n      return new _QrSegment(_QrSegment.Mode.ALPHANUMERIC, text.length, bb);\n    }\n    // Returns a new mutable list of zero or more segments to represent the given Unicode text string.\n    // The result may use various segment modes and switch modes to optimize the length of the bit stream.\n    static makeSegments(text) {\n      if (text == \"\")\n        return [];\n      else if (_QrSegment.isNumeric(text))\n        return [_QrSegment.makeNumeric(text)];\n      else if (_QrSegment.isAlphanumeric(text))\n        return [_QrSegment.makeAlphanumeric(text)];\n      else\n        return [_QrSegment.makeBytes(_QrSegment.toUtf8ByteArray(text))];\n    }\n    // Returns a segment representing an Extended Channel Interpretation\n    // (ECI) designator with the given assignment value.\n    static makeEci(assignVal) {\n      let bb = [];\n      if (assignVal < 0)\n        throw new RangeError(\"ECI assignment value out of range\");\n      else if (assignVal < 1 << 7)\n        appendBits(assignVal, 8, bb);\n      else if (assignVal < 1 << 14) {\n        appendBits(2, 2, bb);\n        appendBits(assignVal, 14, bb);\n      } else if (assignVal < 1e6) {\n        appendBits(6, 3, bb);\n        appendBits(assignVal, 21, bb);\n      } else\n        throw new RangeError(\"ECI assignment value out of range\");\n      return new _QrSegment(_QrSegment.Mode.ECI, 0, bb);\n    }\n    // Tests whether the given string can be encoded as a segment in numeric mode.\n    // A string is encodable iff each character is in the range 0 to 9.\n    static isNumeric(text) {\n      return _QrSegment.NUMERIC_REGEX.test(text);\n    }\n    // Tests whether the given string can be encoded as a segment in alphanumeric mode.\n    // A string is encodable iff each character is in the following set: 0 to 9, A to Z\n    // (uppercase only), space, dollar, percent, asterisk, plus, hyphen, period, slash, colon.\n    static isAlphanumeric(text) {\n      return _QrSegment.ALPHANUMERIC_REGEX.test(text);\n    }\n    /*-- Methods --*/\n    // Returns a new copy of the data bits of this segment.\n    getData() {\n      return this.bitData.slice();\n    }\n    // (Package-private) Calculates and returns the number of bits needed to encode the given segments at\n    // the given version. The result is infinity if a segment has too many characters to fit its length field.\n    static getTotalBits(segs, version) {\n      let result = 0;\n      for (const seg of segs) {\n        const ccbits = seg.mode.numCharCountBits(version);\n        if (seg.numChars >= 1 << ccbits)\n          return Infinity;\n        result += 4 + ccbits + seg.bitData.length;\n      }\n      return result;\n    }\n    // Returns a new array of bytes representing the given string encoded in UTF-8.\n    static toUtf8ByteArray(str) {\n      str = encodeURI(str);\n      let result = [];\n      for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) != \"%\")\n          result.push(str.charCodeAt(i));\n        else {\n          result.push(parseInt(str.substring(i + 1, i + 3), 16));\n          i += 2;\n        }\n      }\n      return result;\n    }\n  };\n  /*-- Constants --*/\n  // Describes precisely all strings that are encodable in numeric mode.\n  _QrSegment.NUMERIC_REGEX = /^[0-9]*$/;\n  // Describes precisely all strings that are encodable in alphanumeric mode.\n  _QrSegment.ALPHANUMERIC_REGEX = /^[A-Z0-9 $%*+.\\/:-]*$/;\n  // The set of all legal characters in alphanumeric mode,\n  // where each character value maps to the index in the string.\n  _QrSegment.ALPHANUMERIC_CHARSET = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:\";\n  let QrSegment = _QrSegment;\n  qrcodegen2.QrSegment = _QrSegment;\n})(qrcodegen || (qrcodegen = {}));\n((qrcodegen2) => {\n  let QrCode;\n  ((QrCode2) => {\n    const _Ecc = class _Ecc {\n      // The QR Code can tolerate about 30% erroneous codewords\n      /*-- Constructor and fields --*/\n      constructor(ordinal, formatBits) {\n        this.ordinal = ordinal;\n        this.formatBits = formatBits;\n      }\n    };\n    /*-- Constants --*/\n    _Ecc.LOW = new _Ecc(0, 1);\n    // The QR Code can tolerate about  7% erroneous codewords\n    _Ecc.MEDIUM = new _Ecc(1, 0);\n    // The QR Code can tolerate about 15% erroneous codewords\n    _Ecc.QUARTILE = new _Ecc(2, 3);\n    // The QR Code can tolerate about 25% erroneous codewords\n    _Ecc.HIGH = new _Ecc(3, 2);\n    let Ecc = _Ecc;\n    QrCode2.Ecc = _Ecc;\n  })(QrCode = qrcodegen2.QrCode || (qrcodegen2.QrCode = {}));\n})(qrcodegen || (qrcodegen = {}));\n((qrcodegen2) => {\n  let QrSegment;\n  ((QrSegment2) => {\n    const _Mode = class _Mode {\n      /*-- Constructor and fields --*/\n      constructor(modeBits, numBitsCharCount) {\n        this.modeBits = modeBits;\n        this.numBitsCharCount = numBitsCharCount;\n      }\n      /*-- Method --*/\n      // (Package-private) Returns the bit width of the character count field for a segment in\n      // this mode in a QR Code at the given version number. The result is in the range [0, 16].\n      numCharCountBits(ver) {\n        return this.numBitsCharCount[Math.floor((ver + 7) / 17)];\n      }\n    };\n    /*-- Constants --*/\n    _Mode.NUMERIC = new _Mode(1, [10, 12, 14]);\n    _Mode.ALPHANUMERIC = new _Mode(2, [9, 11, 13]);\n    _Mode.BYTE = new _Mode(4, [8, 16, 16]);\n    _Mode.KANJI = new _Mode(8, [8, 10, 12]);\n    _Mode.ECI = new _Mode(7, [0, 0, 0]);\n    let Mode = _Mode;\n    QrSegment2.Mode = _Mode;\n  })(QrSegment = qrcodegen2.QrSegment || (qrcodegen2.QrSegment = {}));\n})(qrcodegen || (qrcodegen = {}));\nvar qrcodegen_default = qrcodegen;\n\n// src/index.tsx\n/**\n * @license qrcode.react\n * Copyright (c) Paul O'Shannessy\n * SPDX-License-Identifier: ISC\n */\nvar ERROR_LEVEL_MAP = {\n  L: qrcodegen_default.QrCode.Ecc.LOW,\n  M: qrcodegen_default.QrCode.Ecc.MEDIUM,\n  Q: qrcodegen_default.QrCode.Ecc.QUARTILE,\n  H: qrcodegen_default.QrCode.Ecc.HIGH\n};\nvar DEFAULT_SIZE = 128;\nvar DEFAULT_LEVEL = \"L\";\nvar DEFAULT_BGCOLOR = \"#FFFFFF\";\nvar DEFAULT_FGCOLOR = \"#000000\";\nvar DEFAULT_INCLUDEMARGIN = false;\nvar DEFAULT_MINVERSION = 1;\nvar SPEC_MARGIN_SIZE = 4;\nvar DEFAULT_MARGIN_SIZE = 0;\nvar DEFAULT_IMG_SCALE = 0.1;\nfunction generatePath(modules, margin = 0) {\n  const ops = [];\n  modules.forEach(function(row, y) {\n    let start = null;\n    row.forEach(function(cell, x) {\n      if (!cell && start !== null) {\n        ops.push(\n          `M${start + margin} ${y + margin}h${x - start}v1H${start + margin}z`\n        );\n        start = null;\n        return;\n      }\n      if (x === row.length - 1) {\n        if (!cell) {\n          return;\n        }\n        if (start === null) {\n          ops.push(`M${x + margin},${y + margin} h1v1H${x + margin}z`);\n        } else {\n          ops.push(\n            `M${start + margin},${y + margin} h${x + 1 - start}v1H${start + margin}z`\n          );\n        }\n        return;\n      }\n      if (cell && start === null) {\n        start = x;\n      }\n    });\n  });\n  return ops.join(\"\");\n}\nfunction excavateModules(modules, excavation) {\n  return modules.slice().map((row, y) => {\n    if (y < excavation.y || y >= excavation.y + excavation.h) {\n      return row;\n    }\n    return row.map((cell, x) => {\n      if (x < excavation.x || x >= excavation.x + excavation.w) {\n        return cell;\n      }\n      return false;\n    });\n  });\n}\nfunction getImageSettings(cells, size, margin, imageSettings) {\n  if (imageSettings == null) {\n    return null;\n  }\n  const numCells = cells.length + margin * 2;\n  const defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\n  const scale = numCells / size;\n  const w = (imageSettings.width || defaultSize) * scale;\n  const h = (imageSettings.height || defaultSize) * scale;\n  const x = imageSettings.x == null ? cells.length / 2 - w / 2 : imageSettings.x * scale;\n  const y = imageSettings.y == null ? cells.length / 2 - h / 2 : imageSettings.y * scale;\n  const opacity = imageSettings.opacity == null ? 1 : imageSettings.opacity;\n  let excavation = null;\n  if (imageSettings.excavate) {\n    let floorX = Math.floor(x);\n    let floorY = Math.floor(y);\n    let ceilW = Math.ceil(w + x - floorX);\n    let ceilH = Math.ceil(h + y - floorY);\n    excavation = { x: floorX, y: floorY, w: ceilW, h: ceilH };\n  }\n  const crossOrigin = imageSettings.crossOrigin;\n  return { x, y, h, w, excavation, opacity, crossOrigin };\n}\nfunction getMarginSize(includeMargin, marginSize) {\n  if (marginSize != null) {\n    return Math.max(Math.floor(marginSize), 0);\n  }\n  return includeMargin ? SPEC_MARGIN_SIZE : DEFAULT_MARGIN_SIZE;\n}\nfunction useQRCode({\n  value,\n  level,\n  minVersion,\n  includeMargin,\n  marginSize,\n  imageSettings,\n  size,\n  boostLevel\n}) {\n  let qrcode = React.useMemo(() => {\n    const values = Array.isArray(value) ? value : [value];\n    const segments = values.reduce((accum, v) => {\n      accum.push(...qrcodegen_default.QrSegment.makeSegments(v));\n      return accum;\n    }, []);\n    return qrcodegen_default.QrCode.encodeSegments(\n      segments,\n      ERROR_LEVEL_MAP[level],\n      minVersion,\n      void 0,\n      void 0,\n      boostLevel\n    );\n  }, [value, level, minVersion, boostLevel]);\n  const { cells, margin, numCells, calculatedImageSettings } = React.useMemo(() => {\n    let cells2 = qrcode.getModules();\n    const margin2 = getMarginSize(includeMargin, marginSize);\n    const numCells2 = cells2.length + margin2 * 2;\n    const calculatedImageSettings2 = getImageSettings(\n      cells2,\n      size,\n      margin2,\n      imageSettings\n    );\n    return {\n      cells: cells2,\n      margin: margin2,\n      numCells: numCells2,\n      calculatedImageSettings: calculatedImageSettings2\n    };\n  }, [qrcode, size, imageSettings, includeMargin, marginSize]);\n  return {\n    qrcode,\n    margin,\n    cells,\n    numCells,\n    calculatedImageSettings\n  };\n}\nvar SUPPORTS_PATH2D = function() {\n  try {\n    new Path2D().addPath(new Path2D());\n  } catch (e) {\n    return false;\n  }\n  return true;\n}();\nvar QRCodeCanvas = React.forwardRef(\n  function QRCodeCanvas2(props, forwardedRef) {\n    const _a = props, {\n      value,\n      size = DEFAULT_SIZE,\n      level = DEFAULT_LEVEL,\n      bgColor = DEFAULT_BGCOLOR,\n      fgColor = DEFAULT_FGCOLOR,\n      includeMargin = DEFAULT_INCLUDEMARGIN,\n      minVersion = DEFAULT_MINVERSION,\n      boostLevel,\n      marginSize,\n      imageSettings\n    } = _a, extraProps = __objRest(_a, [\n      \"value\",\n      \"size\",\n      \"level\",\n      \"bgColor\",\n      \"fgColor\",\n      \"includeMargin\",\n      \"minVersion\",\n      \"boostLevel\",\n      \"marginSize\",\n      \"imageSettings\"\n    ]);\n    const _b = extraProps, { style } = _b, otherProps = __objRest(_b, [\"style\"]);\n    const imgSrc = imageSettings == null ? void 0 : imageSettings.src;\n    const _canvas = React.useRef(null);\n    const _image = React.useRef(null);\n    const setCanvasRef = React.useCallback(\n      (node) => {\n        _canvas.current = node;\n        if (typeof forwardedRef === \"function\") {\n          forwardedRef(node);\n        } else if (forwardedRef) {\n          forwardedRef.current = node;\n        }\n      },\n      [forwardedRef]\n    );\n    const [isImgLoaded, setIsImageLoaded] = React.useState(false);\n    const { margin, cells, numCells, calculatedImageSettings } = useQRCode({\n      value,\n      level,\n      minVersion,\n      boostLevel,\n      includeMargin,\n      marginSize,\n      imageSettings,\n      size\n    });\n    React.useEffect(() => {\n      if (_canvas.current != null) {\n        const canvas = _canvas.current;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n          return;\n        }\n        let cellsToDraw = cells;\n        const image = _image.current;\n        const haveImageToRender = calculatedImageSettings != null && image !== null && image.complete && image.naturalHeight !== 0 && image.naturalWidth !== 0;\n        if (haveImageToRender) {\n          if (calculatedImageSettings.excavation != null) {\n            cellsToDraw = excavateModules(\n              cells,\n              calculatedImageSettings.excavation\n            );\n          }\n        }\n        const pixelRatio = window.devicePixelRatio || 1;\n        canvas.height = canvas.width = size * pixelRatio;\n        const scale = size / numCells * pixelRatio;\n        ctx.scale(scale, scale);\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, numCells, numCells);\n        ctx.fillStyle = fgColor;\n        if (SUPPORTS_PATH2D) {\n          ctx.fill(new Path2D(generatePath(cellsToDraw, margin)));\n        } else {\n          cells.forEach(function(row, rdx) {\n            row.forEach(function(cell, cdx) {\n              if (cell) {\n                ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\n              }\n            });\n          });\n        }\n        if (calculatedImageSettings) {\n          ctx.globalAlpha = calculatedImageSettings.opacity;\n        }\n        if (haveImageToRender) {\n          ctx.drawImage(\n            image,\n            calculatedImageSettings.x + margin,\n            calculatedImageSettings.y + margin,\n            calculatedImageSettings.w,\n            calculatedImageSettings.h\n          );\n        }\n      }\n    });\n    React.useEffect(() => {\n      setIsImageLoaded(false);\n    }, [imgSrc]);\n    const canvasStyle = __spreadValues({ height: size, width: size }, style);\n    let img = null;\n    if (imgSrc != null) {\n      img = /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: imgSrc,\n          key: imgSrc,\n          style: { display: \"none\" },\n          onLoad: () => {\n            setIsImageLoaded(true);\n          },\n          ref: _image,\n          crossOrigin: calculatedImageSettings == null ? void 0 : calculatedImageSettings.crossOrigin\n        }\n      );\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      \"canvas\",\n      __spreadValues({\n        style: canvasStyle,\n        height: size,\n        width: size,\n        ref: setCanvasRef,\n        role: \"img\"\n      }, otherProps)\n    ), img);\n  }\n);\nQRCodeCanvas.displayName = \"QRCodeCanvas\";\nvar QRCodeSVG = React.forwardRef(\n  function QRCodeSVG2(props, forwardedRef) {\n    const _a = props, {\n      value,\n      size = DEFAULT_SIZE,\n      level = DEFAULT_LEVEL,\n      bgColor = DEFAULT_BGCOLOR,\n      fgColor = DEFAULT_FGCOLOR,\n      includeMargin = DEFAULT_INCLUDEMARGIN,\n      minVersion = DEFAULT_MINVERSION,\n      boostLevel,\n      title,\n      marginSize,\n      imageSettings\n    } = _a, otherProps = __objRest(_a, [\n      \"value\",\n      \"size\",\n      \"level\",\n      \"bgColor\",\n      \"fgColor\",\n      \"includeMargin\",\n      \"minVersion\",\n      \"boostLevel\",\n      \"title\",\n      \"marginSize\",\n      \"imageSettings\"\n    ]);\n    const { margin, cells, numCells, calculatedImageSettings } = useQRCode({\n      value,\n      level,\n      minVersion,\n      boostLevel,\n      includeMargin,\n      marginSize,\n      imageSettings,\n      size\n    });\n    let cellsToDraw = cells;\n    let image = null;\n    if (imageSettings != null && calculatedImageSettings != null) {\n      if (calculatedImageSettings.excavation != null) {\n        cellsToDraw = excavateModules(\n          cells,\n          calculatedImageSettings.excavation\n        );\n      }\n      image = /* @__PURE__ */ React.createElement(\n        \"image\",\n        {\n          href: imageSettings.src,\n          height: calculatedImageSettings.h,\n          width: calculatedImageSettings.w,\n          x: calculatedImageSettings.x + margin,\n          y: calculatedImageSettings.y + margin,\n          preserveAspectRatio: \"none\",\n          opacity: calculatedImageSettings.opacity,\n          crossOrigin: calculatedImageSettings.crossOrigin\n        }\n      );\n    }\n    const fgPath = generatePath(cellsToDraw, margin);\n    return /* @__PURE__ */ React.createElement(\n      \"svg\",\n      __spreadValues({\n        height: size,\n        width: size,\n        viewBox: `0 0 ${numCells} ${numCells}`,\n        ref: forwardedRef,\n        role: \"img\"\n      }, otherProps),\n      !!title && /* @__PURE__ */ React.createElement(\"title\", null, title),\n      /* @__PURE__ */ React.createElement(\n        \"path\",\n        {\n          fill: bgColor,\n          d: `M0,0 h${numCells}v${numCells}H0z`,\n          shapeRendering: \"crispEdges\"\n        }\n      ),\n      /* @__PURE__ */ React.createElement(\"path\", { fill: fgColor, d: fgPath, shapeRendering: \"crispEdges\" }),\n      image\n    );\n  }\n);\nQRCodeSVG.displayName = \"QRCodeSVG\";\nexport {\n  QRCodeCanvas,\n  QRCodeSVG\n};\n","import React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport X from \"lucide-react/dist/esm/icons/x\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\n// Types pour React.forwardRef\r\ntype ElementRef<C extends React.ElementType> = React.ComponentPropsWithRef<C>[\"ref\"];\r\ntype ComponentPropsWithoutRef<C extends React.ElementType> = React.ComponentPropsWithoutRef<C>;\r\ntype HTMLAttributes<T> = React.HTMLAttributes<T>;\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  ElementRef<typeof DialogPrimitive.Overlay>,\r\n  ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  ElementRef<typeof DialogPrimitive.Content>,\r\n  ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => {\r\n  // Générer un ID unique pour la description\r\n  const descriptionId = React.useId();\r\n  return (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-2 border border-slate-200 bg-white p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:p-6 sm:gap-4 max-h-[90vh] overflow-y-auto\",\r\n        className\r\n      )}\r\n      aria-describedby={descriptionId}\r\n      {...props}\r\n    >\r\n      <div id={descriptionId} className=\"sr-only\">\r\n        Contenu de la boîte de dialogue\r\n      </div>\r\n      {children}\r\n      <DialogPrimitive.Close \r\n        className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500\"\r\n        aria-label=\"Close dialog\"\r\n      >\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n)})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  ElementRef<typeof DialogPrimitive.Title>,\r\n  ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  ElementRef<typeof DialogPrimitive.Description>,\r\n  ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","import React from \"react\";\r\nimport Share2 from \"lucide-react/dist/esm/icons/share-2\";\r\nimport QrCode from \"lucide-react/dist/esm/icons/qr-code\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { analytics } from \"@/services/firebaseAnalytics\";\r\nimport { QRCodeSVG } from \"qrcode.react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\n\r\ninterface ShareButtonProps {\r\n  title: string;\r\n  text: string;\r\n  url?: string;\r\n}\r\n\r\nexport function ShareButton({ title, text, url }: ShareButtonProps) {\r\n  // Utiliser une référence pour s'assurer que l'URL est disponible après le rendu\r\n  const shareUrl = url || (typeof window !== 'undefined' ? window.location.href : '');\r\n  const [showQrCode, setShowQrCode] = React.useState(false);\r\n  \r\n  const handleShare = async (platform: string) => {\r\n    try {\r\n      // Analytics: share\r\n      analytics.trackFeatureUse('share', { platform, title });\r\n    \r\n    // S'assurer que l'URL est absolue\r\n    const absoluteUrl = shareUrl.startsWith('http') ? shareUrl : (typeof window !== 'undefined' ? window.location.origin + shareUrl : shareUrl);\r\n    \r\n    switch (platform) {\r\n      case \"native\":\r\n        // Vérifier si l'API Web Share est disponible\r\n        if (navigator.share) {\r\n          try {\r\n            await navigator.share({\r\n              title,\r\n              text,\r\n              url: absoluteUrl,\r\n            });\r\n          } catch (error) {\r\n            console.error(\"Error sharing:\", error);\r\n            // Fallback en cas d'erreur\r\n            copyToClipboard(absoluteUrl);\r\n          }\r\n        } else {\r\n          // Fallback pour les navigateurs qui ne supportent pas l'API Web Share\r\n          copyToClipboard(absoluteUrl);\r\n        }\r\n        break;\r\n      case \"facebook\":\r\n        try {\r\n          window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(absoluteUrl)}`, \"_blank\");\r\n        } catch (error) {\r\n          console.error(\"Error opening Facebook share:\", error);\r\n          copyToClipboard(absoluteUrl);\r\n        }\r\n        break;\r\n      case \"x\":\r\n        try {\r\n          window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(absoluteUrl)}`, \"_blank\");\r\n        } catch (error) {\r\n          console.error(\"Error opening Twitter share:\", error);\r\n          copyToClipboard(absoluteUrl);\r\n        }\r\n        break;\r\n      case \"instagram\":\r\n        try {\r\n          // Instagram n'a pas d'API de partage directe comme les autres plateformes\r\n          // Nous allons essayer d'ouvrir l'application, puis rediriger vers le site web\r\n          const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\r\n          const isAndroid = /Android/.test(navigator.userAgent);\r\n          \r\n          if (isIOS || isAndroid) {\r\n            // Essayer d'ouvrir l'application Instagram\r\n            window.location.href = `instagram://`;\r\n            \r\n            // Rediriger vers le site web si l'application ne s'ouvre pas\r\n            setTimeout(() => {\r\n              window.location.href = `https://www.instagram.com/`;\r\n            }, 2000);\r\n          } else {\r\n            // Sur desktop, ouvrir simplement le site web\r\n            window.open(`https://www.instagram.com/`, \"_blank\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error opening Instagram:\", error);\r\n          copyToClipboard(absoluteUrl);\r\n        }\r\n        break;\r\n      case \"copy\":\r\n        copyToClipboard(absoluteUrl);\r\n        break;\r\n    }\r\n    } catch (error) {\r\n      console.error(\"Error in handleShare:\", error);\r\n      // Fallback en cas d'erreur générale\r\n      try {\r\n        copyToClipboard(shareUrl);\r\n      } catch (e) {\r\n        console.error(\"Error in fallback copy:\", e);\r\n        alert('Impossible de partager. Veuillez copier manuellement : ' + shareUrl);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const copyToClipboard = (text: string) => {\r\n    // Vérifier si l'API Clipboard est disponible\r\n    if (navigator.clipboard && navigator.clipboard.writeText) {\r\n      navigator.clipboard.writeText(text)\r\n        .then(() => {\r\n          alert('Lien copié dans le presse-papier');\r\n        })\r\n        .catch(err => {\r\n          console.error('Erreur lors de la copie :', err);\r\n          fallbackCopyToClipboard(text);\r\n        });\r\n    } else {\r\n      fallbackCopyToClipboard(text);\r\n    }\r\n  };\r\n  \r\n  // Méthode alternative pour les navigateurs qui ne supportent pas l'API Clipboard\r\n  const fallbackCopyToClipboard = (text: string) => {\r\n    try {\r\n      const textArea = document.createElement('textarea');\r\n      textArea.value = text;\r\n      textArea.style.position = 'fixed';\r\n      textArea.style.left = '-999999px';\r\n      textArea.style.top = '-999999px';\r\n      document.body.appendChild(textArea);\r\n      textArea.focus();\r\n      textArea.select();\r\n      const successful = document.execCommand('copy');\r\n      document.body.removeChild(textArea);\r\n      if (successful) {\r\n        alert('Lien copié dans le presse-papier');\r\n      } else {\r\n        alert('Impossible de copier le lien. Veuillez le copier manuellement : ' + text);\r\n      }\r\n    } catch (err) {\r\n      console.error('Erreur lors de la copie fallback :', err);\r\n      alert('Impossible de copier le lien. Veuillez le copier manuellement : ' + text);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"icon\" \r\n            className=\"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm\"\r\n          >\r\n            <Share2 className=\"h-5 w-5\" />\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"end\" className=\"min-w-[150px]\">\r\n          {typeof navigator !== 'undefined' && navigator.share && (\r\n            <DropdownMenuItem onClick={() => handleShare(\"native\")} className=\"cursor-pointer\">\r\n              Partager\r\n            </DropdownMenuItem>\r\n          )}\r\n          <DropdownMenuItem onClick={() => handleShare(\"facebook\")} className=\"cursor-pointer\">\r\n            Facebook\r\n          </DropdownMenuItem>\r\n          <DropdownMenuItem onClick={() => handleShare(\"x\")} className=\"cursor-pointer\">\r\n            X\r\n          </DropdownMenuItem>\r\n          <DropdownMenuItem onClick={() => handleShare(\"instagram\")} className=\"cursor-pointer\">\r\n            Instagram\r\n          </DropdownMenuItem>\r\n          <DropdownMenuItem onClick={() => handleShare(\"copy\")} className=\"cursor-pointer\">\r\n            Copier le lien\r\n          </DropdownMenuItem>\r\n          <DropdownMenuItem onClick={() => setShowQrCode(true)} className=\"cursor-pointer\">\r\n            <QrCode className=\"h-4 w-4 mr-2\" />\r\n            Afficher QR code\r\n          </DropdownMenuItem>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n      \r\n      <Dialog open={showQrCode} onOpenChange={setShowQrCode}>\r\n        <DialogContent className=\"sm:max-w-[425px]\">\r\n          <DialogHeader>\r\n            <DialogTitle>Scannez ce QR code</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"flex flex-col items-center justify-center py-4\">\r\n            <QRCodeSVG \r\n              value={shareUrl} \r\n              size={200} \r\n              bgColor={\"#ffffff\"}\r\n              fgColor={\"#4a5d94\"}\r\n              level={\"H\"}\r\n              includeMargin={true}\r\n            />\r\n            <p className=\"text-sm text-gray-500 mt-4 text-center\">\r\n              Partagez facilement cette page en scannant le code QR\r\n            </p>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button onClick={() => setShowQrCode(false)}>Fermer</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import MapPin from \"lucide-react/dist/esm/icons/map-pin\";\nimport Calendar from \"lucide-react/dist/esm/icons/calendar\";\nimport Info from \"lucide-react/dist/esm/icons/info\";\nimport Heart from \"lucide-react/dist/esm/icons/heart\";\nimport Home from \"lucide-react/dist/esm/icons/home\";\nimport Bookmark from \"lucide-react/dist/esm/icons/bookmark\";\nimport Gift from \"lucide-react/dist/esm/icons/gift\";\nimport Instagram from \"lucide-react/dist/esm/icons/instagram\";\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\nimport Twitter from \"lucide-react/dist/esm/icons/twitter\";\nimport MoreHorizontal from \"lucide-react/dist/esm/icons/more-horizontal\";\nimport History from \"lucide-react/dist/esm/icons/history\";\nimport BarChart from \"lucide-react/dist/esm/icons/bar-chart\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\nexport function BottomNavigation() {\n  const location = useLocation();\n  const currentPath = location.pathname;\n\n  const isActive = (path: string) => {\n    return currentPath === path;\n  };\n  \n  const openSocialMedia = (url: string) => {\n    window.open(url, '_blank');\n  };\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-center h-16 z-[9999] shadow-lg\">\n      <div className=\"w-full max-w-screen-lg grid grid-cols-6 gap-0 px-1 mx-auto\">\n        <Link\n          to=\"/map\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/\") || isActive(\"/map\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <MapPin className={`${isActive(\"/\") || isActive(\"/map\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/\") || isActive(\"/map\") ? \"text-[11px]\" : \"text-[10px]\"}`}>Carte</span>\n\n        </Link>\n        \n        <Link\n          to=\"/program\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/program\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <Calendar className={`${isActive(\"/program\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/program\") ? \"text-[11px]\" : \"text-[10px]\"}`}>Programme</span>\n\n        </Link>\n        \n        <Link\n          to=\"/saved\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/saved\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <Bookmark className={`${isActive(\"/saved\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/saved\") ? \"text-[11px]\" : \"text-[10px]\"}`}>Enregistrés</span>\n\n        </Link>\n        \n        <Link\n          to=\"/galleries\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/galleries\") || isActive(\"/community\") || isActive(\"/historical\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <Camera className={`${isActive(\"/galleries\") || isActive(\"/community\") || isActive(\"/historical\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/galleries\") || isActive(\"/community\") || isActive(\"/historical\") ? \"text-[11px]\" : \"text-[10px]\"}`}>Galeries</span>\n        </Link>\n        \n        <Link\n          to=\"/about\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/about\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <Info className={`${isActive(\"/about\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/about\") ? \"text-[11px]\" : \"text-[10px]\"}`}>À propos</span>\n\n        </Link>\n        \n        <Link\n          to=\"/donate\"\n          className={`flex flex-col items-center justify-center w-full h-full nav-item-hover ${\n            isActive(\"/donate\") ? \"text-[#ff7a45] font-medium\" : \"text-gray-500\"\n          }`}\n        >\n          <Gift className={`${isActive(\"/donate\") ? \"h-7 w-7\" : \"h-6 w-6\"}`} />\n          <span className={`mt-1 leading-tight ${isActive(\"/donate\") ? \"text-[11px]\" : \"text-[10px]\"}`}>Dons</span>\n\n        </Link>\n        \n        {/* <div className=\"flex flex-col items-center justify-center w-full h-full\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" className=\"h-full w-full flex flex-col items-center justify-center p-0 hover:bg-gray-100\">\n                <MoreHorizontal className=\"h-6 w-6 text-gray-500\" />\n                <span className=\"text-[10px] mt-1 leading-tight text-gray-500\">Plus</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n\n              <DropdownMenuItem asChild>\n                <Link to=\"/historical\" className=\"flex items-center gap-2 w-full cursor-pointer\">\n                  <History className=\"h-4 w-4\" />\n                  <span>Photos historiques</span>\n                </Link>\n              </DropdownMenuItem>\n\n              <DropdownMenuItem asChild>\n                <Link to=\"/analytics\" className=\"flex items-center gap-2 w-full cursor-pointer\">\n                  <BarChart className=\"h-4 w-4\" />\n                  <span>Statistiques</span>\n                </Link>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div> */}\n      </div>\n    </div>\n  );\n}\n","import { Event } from \"@/data/events\";\nimport { Location } from \"@/data/locations\";\nimport { SubmissionParams } from \"@/types/communityTypes\";\nimport { getImagePath } from \"@/utils/imagePaths\";\n\n// Interface pour stocker les informations de contribution contextuelle\ninterface ContributionContext {\n  type: \"event\" | \"location\";\n  id: string;\n  name: string;\n  imageUrl?: string;\n  locationId?: string; // ID du lieu associé à l'événement\n}\n\n// Clé pour le stockage local\nconst CONTRIBUTION_CONTEXT_KEY = 'contribution_context';\n\n/**\n * Enregistre le contexte d'une contribution liée à un événement\n */\nexport function setEventContributionContext(event: Event): void {\n  const context: ContributionContext = {\n    type: \"event\",\n    id: event.id,\n    name: event.title,\n    imageUrl: event.image ? getImagePath(event.image) : undefined,\n    locationId: event.locationId // Inclure l'ID du lieu associé à l'événement\n  };\n  \n  try {\n    localStorage.setItem(CONTRIBUTION_CONTEXT_KEY, JSON.stringify(context));\n  } catch (error) {\n    console.error(\"Erreur lors de l'enregistrement du contexte de contribution:\", error);\n  }\n}\n\n/**\n * Enregistre le contexte d'une contribution liée à un lieu\n */\nexport function setLocationContributionContext(location: Location): void {\n  const context: ContributionContext = {\n    type: \"location\",\n    id: location.id,\n    name: location.name,\n    imageUrl: location.image ? getImagePath(location.image) : undefined\n  };\n  \n  try {\n    localStorage.setItem(CONTRIBUTION_CONTEXT_KEY, JSON.stringify(context));\n  } catch (error) {\n    console.error(\"Erreur lors de l'enregistrement du contexte de contribution:\", error);\n  }\n}\n\n/**\n * Récupère le contexte de contribution actuel\n */\nexport function getContributionContext(): ContributionContext | null {\n  try {\n    const contextData = localStorage.getItem(CONTRIBUTION_CONTEXT_KEY);\n    return contextData ? JSON.parse(contextData) : null;\n  } catch (error) {\n    console.error(\"Erreur lors de la récupération du contexte de contribution:\", error);\n    return null;\n  }\n}\n\n/**\n * Efface le contexte de contribution\n */\nexport function clearContributionContext(): void {\n  try {\n    localStorage.removeItem(CONTRIBUTION_CONTEXT_KEY);\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression du contexte de contribution:\", error);\n  }\n}\n\n/**\n * Enrichit les paramètres de soumission avec le contexte actuel\n */\nexport function enrichSubmissionWithContext(params: SubmissionParams): SubmissionParams {\n  const context = getContributionContext();\n  \n  if (!context) {\n    return params;\n  }\n  \n  return {\n    ...params,\n    contextType: context.type,\n    contextId: context.id\n  };\n}\n","/**\n * @typedef Options\n *   Configuration for `stringify`.\n * @property {boolean} [padLeft=true]\n *   Whether to pad a space before a token.\n * @property {boolean} [padRight=false]\n *   Whether to pad a space after a token.\n */\n\n/**\n * @typedef {Options} StringifyOptions\n *   Please use `StringifyOptions` instead.\n */\n\n/**\n * Parse comma-separated tokens to an array.\n *\n * @param {string} value\n *   Comma-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  /** @type {Array<string>} */\n  const tokens = []\n  const input = String(value || '')\n  let index = input.indexOf(',')\n  let start = 0\n  /** @type {boolean} */\n  let end = false\n\n  while (!end) {\n    if (index === -1) {\n      index = input.length\n      end = true\n    }\n\n    const token = input.slice(start, index).trim()\n\n    if (token || !end) {\n      tokens.push(token)\n    }\n\n    start = index + 1\n    index = input.indexOf(',', start)\n  }\n\n  return tokens\n}\n\n/**\n * Serialize an array of strings or numbers to comma-separated tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @param {Options} [options]\n *   Configuration for `stringify` (optional).\n * @returns {string}\n *   Comma-separated tokens.\n */\nexport function stringify(values, options) {\n  const settings = options || {}\n\n  // Ensure the last empty entry is seen.\n  const input = values[values.length - 1] === '' ? [...values, ''] : values\n\n  return input\n    .join(\n      (settings.padRight ? ' ' : '') +\n        ',' +\n        (settings.padLeft === false ? '' : ' ')\n    )\n    .trim()\n}\n","/**\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [jsx=false]\n *   Support JSX identifiers (default: `false`).\n */\n\nconst startRe = /[$_\\p{ID_Start}]/u\nconst contRe = /[$_\\u{200C}\\u{200D}\\p{ID_Continue}]/u\nconst contReJsx = /[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]/u\nconst nameRe = /^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$/u\nconst nameReJsx = /^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$/u\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Checks if the given code point can start an identifier.\n *\n * @param {number | undefined} code\n *   Code point to check.\n * @returns {boolean}\n *   Whether `code` can start an identifier.\n */\n// Note: `undefined` is supported so you can pass the result from `''.codePointAt`.\nexport function start(code) {\n  return code ? startRe.test(String.fromCodePoint(code)) : false\n}\n\n/**\n * Checks if the given code point can continue an identifier.\n *\n * @param {number | undefined} code\n *   Code point to check.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {boolean}\n *   Whether `code` can continue an identifier.\n */\n// Note: `undefined` is supported so you can pass the result from `''.codePointAt`.\nexport function cont(code, options) {\n  const settings = options || emptyOptions\n  const re = settings.jsx ? contReJsx : contRe\n  return code ? re.test(String.fromCodePoint(code)) : false\n}\n\n/**\n * Checks if the given value is a valid identifier name.\n *\n * @param {string} name\n *   Identifier to check.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {boolean}\n *   Whether `name` can be an identifier.\n */\nexport function name(name, options) {\n  const settings = options || emptyOptions\n  const re = settings.jsx ? nameReJsx : nameRe\n  return re.test(name)\n}\n","/**\n * @typedef {import('hast').Nodes} Nodes\n */\n\n// HTML whitespace expression.\n// See <https://infra.spec.whatwg.org/#ascii-whitespace>.\nconst re = /[ \\t\\n\\f\\r]/g\n\n/**\n * Check if the given value is *inter-element whitespace*.\n *\n * @param {Nodes | string} thing\n *   Thing to check (`Node` or `string`).\n * @returns {boolean}\n *   Whether the `value` is inter-element whitespace (`boolean`): consisting of\n *   zero or more of space, tab (`\\t`), line feed (`\\n`), carriage return\n *   (`\\r`), or form feed (`\\f`); if a node is passed it must be a `Text` node,\n *   whose `value` field is checked.\n */\nexport function whitespace(thing) {\n  return typeof thing === 'object'\n    ? thing.type === 'text'\n      ? empty(thing.value)\n      : false\n    : empty(thing)\n}\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nfunction empty(value) {\n  return value.replace(re, '') === ''\n}\n","/**\n * @import {Schema as SchemaType, Space} from 'property-information'\n */\n\n/** @type {SchemaType} */\nexport class Schema {\n  /**\n   * @param {SchemaType['property']} property\n   *   Property.\n   * @param {SchemaType['normal']} normal\n   *   Normal.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Schema.\n   */\n  constructor(property, normal, space) {\n    this.normal = normal\n    this.property = property\n\n    if (space) {\n      this.space = space\n    }\n  }\n}\n\nSchema.prototype.normal = {}\nSchema.prototype.property = {}\nSchema.prototype.space = undefined\n","/**\n * @import {Info, Space} from 'property-information'\n */\n\nimport {Schema} from './schema.js'\n\n/**\n * @param {ReadonlyArray<Schema>} definitions\n *   Definitions.\n * @param {Space | undefined} [space]\n *   Space.\n * @returns {Schema}\n *   Schema.\n */\nexport function merge(definitions, space) {\n  /** @type {Record<string, Info>} */\n  const property = {}\n  /** @type {Record<string, string>} */\n  const normal = {}\n\n  for (const definition of definitions) {\n    Object.assign(property, definition.property)\n    Object.assign(normal, definition.normal)\n  }\n\n  return new Schema(property, normal, space)\n}\n","/**\n * Get the cleaned case insensitive form of an attribute or property.\n *\n * @param {string} value\n *   An attribute-like or property-like name.\n * @returns {string}\n *   Value that can be used to look up the properly cased property on a\n *   `Schema`.\n */\nexport function normalize(value) {\n  return value.toLowerCase()\n}\n","/**\n * @import {Info as InfoType} from 'property-information'\n */\n\n/** @type {InfoType} */\nexport class Info {\n  /**\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute) {\n    this.attribute = attribute\n    this.property = property\n  }\n}\n\nInfo.prototype.attribute = ''\nInfo.prototype.booleanish = false\nInfo.prototype.boolean = false\nInfo.prototype.commaOrSpaceSeparated = false\nInfo.prototype.commaSeparated = false\nInfo.prototype.defined = false\nInfo.prototype.mustUseProperty = false\nInfo.prototype.number = false\nInfo.prototype.overloadedBoolean = false\nInfo.prototype.property = ''\nInfo.prototype.spaceSeparated = false\nInfo.prototype.space = undefined\n","let powers = 0\n\nexport const boolean = increment()\nexport const booleanish = increment()\nexport const overloadedBoolean = increment()\nexport const number = increment()\nexport const spaceSeparated = increment()\nexport const commaSeparated = increment()\nexport const commaOrSpaceSeparated = increment()\n\nfunction increment() {\n  return 2 ** ++powers\n}\n","/**\n * @import {Space} from 'property-information'\n */\n\nimport {Info} from './info.js'\nimport * as types from './types.js'\n\nconst checks = /** @type {ReadonlyArray<keyof typeof types>} */ (\n  Object.keys(types)\n)\n\nexport class DefinedInfo extends Info {\n  /**\n   * @constructor\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @param {number | null | undefined} [mask]\n   *   Mask.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute, mask, space) {\n    let index = -1\n\n    super(property, attribute)\n\n    mark(this, 'space', space)\n\n    if (typeof mask === 'number') {\n      while (++index < checks.length) {\n        const check = checks[index]\n        mark(this, checks[index], (mask & types[check]) === types[check])\n      }\n    }\n  }\n}\n\nDefinedInfo.prototype.defined = true\n\n/**\n * @template {keyof DefinedInfo} Key\n *   Key type.\n * @param {DefinedInfo} values\n *   Info.\n * @param {Key} key\n *   Key.\n * @param {DefinedInfo[Key]} value\n *   Value.\n * @returns {undefined}\n *   Nothing.\n */\nfunction mark(values, key, value) {\n  if (value) {\n    values[key] = value\n  }\n}\n","/**\n * @import {Info, Space} from 'property-information'\n */\n\n/**\n * @typedef Definition\n *   Definition of a schema.\n * @property {Record<string, string> | undefined} [attributes]\n *   Normalzed names to special attribute case.\n * @property {ReadonlyArray<string> | undefined} [mustUseProperty]\n *   Normalized names that must be set as properties.\n * @property {Record<string, number | null>} properties\n *   Property names to their types.\n * @property {Space | undefined} [space]\n *   Space.\n * @property {Transform} transform\n *   Transform a property name.\n */\n\n/**\n * @callback Transform\n *   Transform.\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} property\n *   Property.\n * @returns {string}\n *   Attribute.\n */\n\nimport {normalize} from '../normalize.js'\nimport {DefinedInfo} from './defined-info.js'\nimport {Schema} from './schema.js'\n\n/**\n * @param {Definition} definition\n *   Definition.\n * @returns {Schema}\n *   Schema.\n */\nexport function create(definition) {\n  /** @type {Record<string, Info>} */\n  const properties = {}\n  /** @type {Record<string, string>} */\n  const normals = {}\n\n  for (const [property, value] of Object.entries(definition.properties)) {\n    const info = new DefinedInfo(\n      property,\n      definition.transform(definition.attributes || {}, property),\n      value,\n      definition.space\n    )\n\n    if (\n      definition.mustUseProperty &&\n      definition.mustUseProperty.includes(property)\n    ) {\n      info.mustUseProperty = true\n    }\n\n    properties[property] = info\n\n    normals[normalize(property)] = property\n    normals[normalize(info.attribute)] = property\n  }\n\n  return new Schema(properties, normals, definition.space)\n}\n","import {create} from './util/create.js'\nimport {booleanish, number, spaceSeparated} from './util/types.js'\n\nexport const aria = create({\n  properties: {\n    ariaActiveDescendant: null,\n    ariaAtomic: booleanish,\n    ariaAutoComplete: null,\n    ariaBusy: booleanish,\n    ariaChecked: booleanish,\n    ariaColCount: number,\n    ariaColIndex: number,\n    ariaColSpan: number,\n    ariaControls: spaceSeparated,\n    ariaCurrent: null,\n    ariaDescribedBy: spaceSeparated,\n    ariaDetails: null,\n    ariaDisabled: booleanish,\n    ariaDropEffect: spaceSeparated,\n    ariaErrorMessage: null,\n    ariaExpanded: booleanish,\n    ariaFlowTo: spaceSeparated,\n    ariaGrabbed: booleanish,\n    ariaHasPopup: null,\n    ariaHidden: booleanish,\n    ariaInvalid: null,\n    ariaKeyShortcuts: null,\n    ariaLabel: null,\n    ariaLabelledBy: spaceSeparated,\n    ariaLevel: number,\n    ariaLive: null,\n    ariaModal: booleanish,\n    ariaMultiLine: booleanish,\n    ariaMultiSelectable: booleanish,\n    ariaOrientation: null,\n    ariaOwns: spaceSeparated,\n    ariaPlaceholder: null,\n    ariaPosInSet: number,\n    ariaPressed: booleanish,\n    ariaReadOnly: booleanish,\n    ariaRelevant: null,\n    ariaRequired: booleanish,\n    ariaRoleDescription: spaceSeparated,\n    ariaRowCount: number,\n    ariaRowIndex: number,\n    ariaRowSpan: number,\n    ariaSelected: booleanish,\n    ariaSetSize: number,\n    ariaSort: null,\n    ariaValueMax: number,\n    ariaValueMin: number,\n    ariaValueNow: number,\n    ariaValueText: null,\n    role: null\n  },\n  transform(_, property) {\n    return property === 'role'\n      ? property\n      : 'aria-' + property.slice(4).toLowerCase()\n  }\n})\n","/**\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} attribute\n *   Attribute.\n * @returns {string}\n *   Transformed attribute.\n */\nexport function caseSensitiveTransform(attributes, attribute) {\n  return attribute in attributes ? attributes[attribute] : attribute\n}\n","import {caseSensitiveTransform} from './case-sensitive-transform.js'\n\n/**\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} property\n *   Property.\n * @returns {string}\n *   Transformed property.\n */\nexport function caseInsensitiveTransform(attributes, property) {\n  return caseSensitiveTransform(attributes, property.toLowerCase())\n}\n","import {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\nimport {create} from './util/create.js'\nimport {\n  booleanish,\n  boolean,\n  commaSeparated,\n  number,\n  overloadedBoolean,\n  spaceSeparated\n} from './util/types.js'\n\nexport const html = create({\n  attributes: {\n    acceptcharset: 'accept-charset',\n    classname: 'class',\n    htmlfor: 'for',\n    httpequiv: 'http-equiv'\n  },\n  mustUseProperty: ['checked', 'multiple', 'muted', 'selected'],\n  properties: {\n    // Standard Properties.\n    abbr: null,\n    accept: commaSeparated,\n    acceptCharset: spaceSeparated,\n    accessKey: spaceSeparated,\n    action: null,\n    allow: null,\n    allowFullScreen: boolean,\n    allowPaymentRequest: boolean,\n    allowUserMedia: boolean,\n    alt: null,\n    as: null,\n    async: boolean,\n    autoCapitalize: null,\n    autoComplete: spaceSeparated,\n    autoFocus: boolean,\n    autoPlay: boolean,\n    blocking: spaceSeparated,\n    capture: null,\n    charSet: null,\n    checked: boolean,\n    cite: null,\n    className: spaceSeparated,\n    cols: number,\n    colSpan: null,\n    content: null,\n    contentEditable: booleanish,\n    controls: boolean,\n    controlsList: spaceSeparated,\n    coords: number | commaSeparated,\n    crossOrigin: null,\n    data: null,\n    dateTime: null,\n    decoding: null,\n    default: boolean,\n    defer: boolean,\n    dir: null,\n    dirName: null,\n    disabled: boolean,\n    download: overloadedBoolean,\n    draggable: booleanish,\n    encType: null,\n    enterKeyHint: null,\n    fetchPriority: null,\n    form: null,\n    formAction: null,\n    formEncType: null,\n    formMethod: null,\n    formNoValidate: boolean,\n    formTarget: null,\n    headers: spaceSeparated,\n    height: number,\n    hidden: overloadedBoolean,\n    high: number,\n    href: null,\n    hrefLang: null,\n    htmlFor: spaceSeparated,\n    httpEquiv: spaceSeparated,\n    id: null,\n    imageSizes: null,\n    imageSrcSet: null,\n    inert: boolean,\n    inputMode: null,\n    integrity: null,\n    is: null,\n    isMap: boolean,\n    itemId: null,\n    itemProp: spaceSeparated,\n    itemRef: spaceSeparated,\n    itemScope: boolean,\n    itemType: spaceSeparated,\n    kind: null,\n    label: null,\n    lang: null,\n    language: null,\n    list: null,\n    loading: null,\n    loop: boolean,\n    low: number,\n    manifest: null,\n    max: null,\n    maxLength: number,\n    media: null,\n    method: null,\n    min: null,\n    minLength: number,\n    multiple: boolean,\n    muted: boolean,\n    name: null,\n    nonce: null,\n    noModule: boolean,\n    noValidate: boolean,\n    onAbort: null,\n    onAfterPrint: null,\n    onAuxClick: null,\n    onBeforeMatch: null,\n    onBeforePrint: null,\n    onBeforeToggle: null,\n    onBeforeUnload: null,\n    onBlur: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onContextLost: null,\n    onContextMenu: null,\n    onContextRestored: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFormData: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLanguageChange: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadEnd: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMessageError: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRejectionHandled: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onScrollEnd: null,\n    onSecurityPolicyViolation: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onSlotChange: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnhandledRejection: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onWheel: null,\n    open: boolean,\n    optimum: number,\n    pattern: null,\n    ping: spaceSeparated,\n    placeholder: null,\n    playsInline: boolean,\n    popover: null,\n    popoverTarget: null,\n    popoverTargetAction: null,\n    poster: null,\n    preload: null,\n    readOnly: boolean,\n    referrerPolicy: null,\n    rel: spaceSeparated,\n    required: boolean,\n    reversed: boolean,\n    rows: number,\n    rowSpan: number,\n    sandbox: spaceSeparated,\n    scope: null,\n    scoped: boolean,\n    seamless: boolean,\n    selected: boolean,\n    shadowRootClonable: boolean,\n    shadowRootDelegatesFocus: boolean,\n    shadowRootMode: null,\n    shape: null,\n    size: number,\n    sizes: null,\n    slot: null,\n    span: number,\n    spellCheck: booleanish,\n    src: null,\n    srcDoc: null,\n    srcLang: null,\n    srcSet: null,\n    start: number,\n    step: null,\n    style: null,\n    tabIndex: number,\n    target: null,\n    title: null,\n    translate: null,\n    type: null,\n    typeMustMatch: boolean,\n    useMap: null,\n    value: booleanish,\n    width: number,\n    wrap: null,\n    writingSuggestions: null,\n\n    // Legacy.\n    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis\n    align: null, // Several. Use CSS `text-align` instead,\n    aLink: null, // `<body>`. Use CSS `a:active {color}` instead\n    archive: spaceSeparated, // `<object>`. List of URIs to archives\n    axis: null, // `<td>` and `<th>`. Use `scope` on `<th>`\n    background: null, // `<body>`. Use CSS `background-image` instead\n    bgColor: null, // `<body>` and table elements. Use CSS `background-color` instead\n    border: number, // `<table>`. Use CSS `border-width` instead,\n    borderColor: null, // `<table>`. Use CSS `border-color` instead,\n    bottomMargin: number, // `<body>`\n    cellPadding: null, // `<table>`\n    cellSpacing: null, // `<table>`\n    char: null, // Several table elements. When `align=char`, sets the character to align on\n    charOff: null, // Several table elements. When `char`, offsets the alignment\n    classId: null, // `<object>`\n    clear: null, // `<br>`. Use CSS `clear` instead\n    code: null, // `<object>`\n    codeBase: null, // `<object>`\n    codeType: null, // `<object>`\n    color: null, // `<font>` and `<hr>`. Use CSS instead\n    compact: boolean, // Lists. Use CSS to reduce space between items instead\n    declare: boolean, // `<object>`\n    event: null, // `<script>`\n    face: null, // `<font>`. Use CSS instead\n    frame: null, // `<table>`\n    frameBorder: null, // `<iframe>`. Use CSS `border` instead\n    hSpace: number, // `<img>` and `<object>`\n    leftMargin: number, // `<body>`\n    link: null, // `<body>`. Use CSS `a:link {color: *}` instead\n    longDesc: null, // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`\n    lowSrc: null, // `<img>`. Use a `<picture>`\n    marginHeight: number, // `<body>`\n    marginWidth: number, // `<body>`\n    noResize: boolean, // `<frame>`\n    noHref: boolean, // `<area>`. Use no href instead of an explicit `nohref`\n    noShade: boolean, // `<hr>`. Use background-color and height instead of borders\n    noWrap: boolean, // `<td>` and `<th>`\n    object: null, // `<applet>`\n    profile: null, // `<head>`\n    prompt: null, // `<isindex>`\n    rev: null, // `<link>`\n    rightMargin: number, // `<body>`\n    rules: null, // `<table>`\n    scheme: null, // `<meta>`\n    scrolling: booleanish, // `<frame>`. Use overflow in the child context\n    standby: null, // `<object>`\n    summary: null, // `<table>`\n    text: null, // `<body>`. Use CSS `color` instead\n    topMargin: number, // `<body>`\n    valueType: null, // `<param>`\n    version: null, // `<html>`. Use a doctype.\n    vAlign: null, // Several. Use CSS `vertical-align` instead\n    vLink: null, // `<body>`. Use CSS `a:visited {color}` instead\n    vSpace: number, // `<img>` and `<object>`\n\n    // Non-standard Properties.\n    allowTransparency: null,\n    autoCorrect: null,\n    autoSave: null,\n    disablePictureInPicture: boolean,\n    disableRemotePlayback: boolean,\n    prefix: null,\n    property: null,\n    results: number,\n    security: null,\n    unselectable: null\n  },\n  space: 'html',\n  transform: caseInsensitiveTransform\n})\n","import {caseSensitiveTransform} from './util/case-sensitive-transform.js'\nimport {create} from './util/create.js'\nimport {\n  boolean,\n  commaOrSpaceSeparated,\n  commaSeparated,\n  number,\n  spaceSeparated\n} from './util/types.js'\n\nexport const svg = create({\n  attributes: {\n    accentHeight: 'accent-height',\n    alignmentBaseline: 'alignment-baseline',\n    arabicForm: 'arabic-form',\n    baselineShift: 'baseline-shift',\n    capHeight: 'cap-height',\n    className: 'class',\n    clipPath: 'clip-path',\n    clipRule: 'clip-rule',\n    colorInterpolation: 'color-interpolation',\n    colorInterpolationFilters: 'color-interpolation-filters',\n    colorProfile: 'color-profile',\n    colorRendering: 'color-rendering',\n    crossOrigin: 'crossorigin',\n    dataType: 'datatype',\n    dominantBaseline: 'dominant-baseline',\n    enableBackground: 'enable-background',\n    fillOpacity: 'fill-opacity',\n    fillRule: 'fill-rule',\n    floodColor: 'flood-color',\n    floodOpacity: 'flood-opacity',\n    fontFamily: 'font-family',\n    fontSize: 'font-size',\n    fontSizeAdjust: 'font-size-adjust',\n    fontStretch: 'font-stretch',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    glyphName: 'glyph-name',\n    glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n    glyphOrientationVertical: 'glyph-orientation-vertical',\n    hrefLang: 'hreflang',\n    horizAdvX: 'horiz-adv-x',\n    horizOriginX: 'horiz-origin-x',\n    horizOriginY: 'horiz-origin-y',\n    imageRendering: 'image-rendering',\n    letterSpacing: 'letter-spacing',\n    lightingColor: 'lighting-color',\n    markerEnd: 'marker-end',\n    markerMid: 'marker-mid',\n    markerStart: 'marker-start',\n    navDown: 'nav-down',\n    navDownLeft: 'nav-down-left',\n    navDownRight: 'nav-down-right',\n    navLeft: 'nav-left',\n    navNext: 'nav-next',\n    navPrev: 'nav-prev',\n    navRight: 'nav-right',\n    navUp: 'nav-up',\n    navUpLeft: 'nav-up-left',\n    navUpRight: 'nav-up-right',\n    onAbort: 'onabort',\n    onActivate: 'onactivate',\n    onAfterPrint: 'onafterprint',\n    onBeforePrint: 'onbeforeprint',\n    onBegin: 'onbegin',\n    onCancel: 'oncancel',\n    onCanPlay: 'oncanplay',\n    onCanPlayThrough: 'oncanplaythrough',\n    onChange: 'onchange',\n    onClick: 'onclick',\n    onClose: 'onclose',\n    onCopy: 'oncopy',\n    onCueChange: 'oncuechange',\n    onCut: 'oncut',\n    onDblClick: 'ondblclick',\n    onDrag: 'ondrag',\n    onDragEnd: 'ondragend',\n    onDragEnter: 'ondragenter',\n    onDragExit: 'ondragexit',\n    onDragLeave: 'ondragleave',\n    onDragOver: 'ondragover',\n    onDragStart: 'ondragstart',\n    onDrop: 'ondrop',\n    onDurationChange: 'ondurationchange',\n    onEmptied: 'onemptied',\n    onEnd: 'onend',\n    onEnded: 'onended',\n    onError: 'onerror',\n    onFocus: 'onfocus',\n    onFocusIn: 'onfocusin',\n    onFocusOut: 'onfocusout',\n    onHashChange: 'onhashchange',\n    onInput: 'oninput',\n    onInvalid: 'oninvalid',\n    onKeyDown: 'onkeydown',\n    onKeyPress: 'onkeypress',\n    onKeyUp: 'onkeyup',\n    onLoad: 'onload',\n    onLoadedData: 'onloadeddata',\n    onLoadedMetadata: 'onloadedmetadata',\n    onLoadStart: 'onloadstart',\n    onMessage: 'onmessage',\n    onMouseDown: 'onmousedown',\n    onMouseEnter: 'onmouseenter',\n    onMouseLeave: 'onmouseleave',\n    onMouseMove: 'onmousemove',\n    onMouseOut: 'onmouseout',\n    onMouseOver: 'onmouseover',\n    onMouseUp: 'onmouseup',\n    onMouseWheel: 'onmousewheel',\n    onOffline: 'onoffline',\n    onOnline: 'ononline',\n    onPageHide: 'onpagehide',\n    onPageShow: 'onpageshow',\n    onPaste: 'onpaste',\n    onPause: 'onpause',\n    onPlay: 'onplay',\n    onPlaying: 'onplaying',\n    onPopState: 'onpopstate',\n    onProgress: 'onprogress',\n    onRateChange: 'onratechange',\n    onRepeat: 'onrepeat',\n    onReset: 'onreset',\n    onResize: 'onresize',\n    onScroll: 'onscroll',\n    onSeeked: 'onseeked',\n    onSeeking: 'onseeking',\n    onSelect: 'onselect',\n    onShow: 'onshow',\n    onStalled: 'onstalled',\n    onStorage: 'onstorage',\n    onSubmit: 'onsubmit',\n    onSuspend: 'onsuspend',\n    onTimeUpdate: 'ontimeupdate',\n    onToggle: 'ontoggle',\n    onUnload: 'onunload',\n    onVolumeChange: 'onvolumechange',\n    onWaiting: 'onwaiting',\n    onZoom: 'onzoom',\n    overlinePosition: 'overline-position',\n    overlineThickness: 'overline-thickness',\n    paintOrder: 'paint-order',\n    panose1: 'panose-1',\n    pointerEvents: 'pointer-events',\n    referrerPolicy: 'referrerpolicy',\n    renderingIntent: 'rendering-intent',\n    shapeRendering: 'shape-rendering',\n    stopColor: 'stop-color',\n    stopOpacity: 'stop-opacity',\n    strikethroughPosition: 'strikethrough-position',\n    strikethroughThickness: 'strikethrough-thickness',\n    strokeDashArray: 'stroke-dasharray',\n    strokeDashOffset: 'stroke-dashoffset',\n    strokeLineCap: 'stroke-linecap',\n    strokeLineJoin: 'stroke-linejoin',\n    strokeMiterLimit: 'stroke-miterlimit',\n    strokeOpacity: 'stroke-opacity',\n    strokeWidth: 'stroke-width',\n    tabIndex: 'tabindex',\n    textAnchor: 'text-anchor',\n    textDecoration: 'text-decoration',\n    textRendering: 'text-rendering',\n    transformOrigin: 'transform-origin',\n    typeOf: 'typeof',\n    underlinePosition: 'underline-position',\n    underlineThickness: 'underline-thickness',\n    unicodeBidi: 'unicode-bidi',\n    unicodeRange: 'unicode-range',\n    unitsPerEm: 'units-per-em',\n    vAlphabetic: 'v-alphabetic',\n    vHanging: 'v-hanging',\n    vIdeographic: 'v-ideographic',\n    vMathematical: 'v-mathematical',\n    vectorEffect: 'vector-effect',\n    vertAdvY: 'vert-adv-y',\n    vertOriginX: 'vert-origin-x',\n    vertOriginY: 'vert-origin-y',\n    wordSpacing: 'word-spacing',\n    writingMode: 'writing-mode',\n    xHeight: 'x-height',\n    // These were camelcased in Tiny. Now lowercased in SVG 2\n    playbackOrder: 'playbackorder',\n    timelineBegin: 'timelinebegin'\n  },\n  properties: {\n    about: commaOrSpaceSeparated,\n    accentHeight: number,\n    accumulate: null,\n    additive: null,\n    alignmentBaseline: null,\n    alphabetic: number,\n    amplitude: number,\n    arabicForm: null,\n    ascent: number,\n    attributeName: null,\n    attributeType: null,\n    azimuth: number,\n    bandwidth: null,\n    baselineShift: null,\n    baseFrequency: null,\n    baseProfile: null,\n    bbox: null,\n    begin: null,\n    bias: number,\n    by: null,\n    calcMode: null,\n    capHeight: number,\n    className: spaceSeparated,\n    clip: null,\n    clipPath: null,\n    clipPathUnits: null,\n    clipRule: null,\n    color: null,\n    colorInterpolation: null,\n    colorInterpolationFilters: null,\n    colorProfile: null,\n    colorRendering: null,\n    content: null,\n    contentScriptType: null,\n    contentStyleType: null,\n    crossOrigin: null,\n    cursor: null,\n    cx: null,\n    cy: null,\n    d: null,\n    dataType: null,\n    defaultAction: null,\n    descent: number,\n    diffuseConstant: number,\n    direction: null,\n    display: null,\n    dur: null,\n    divisor: number,\n    dominantBaseline: null,\n    download: boolean,\n    dx: null,\n    dy: null,\n    edgeMode: null,\n    editable: null,\n    elevation: number,\n    enableBackground: null,\n    end: null,\n    event: null,\n    exponent: number,\n    externalResourcesRequired: null,\n    fill: null,\n    fillOpacity: number,\n    fillRule: null,\n    filter: null,\n    filterRes: null,\n    filterUnits: null,\n    floodColor: null,\n    floodOpacity: null,\n    focusable: null,\n    focusHighlight: null,\n    fontFamily: null,\n    fontSize: null,\n    fontSizeAdjust: null,\n    fontStretch: null,\n    fontStyle: null,\n    fontVariant: null,\n    fontWeight: null,\n    format: null,\n    fr: null,\n    from: null,\n    fx: null,\n    fy: null,\n    g1: commaSeparated,\n    g2: commaSeparated,\n    glyphName: commaSeparated,\n    glyphOrientationHorizontal: null,\n    glyphOrientationVertical: null,\n    glyphRef: null,\n    gradientTransform: null,\n    gradientUnits: null,\n    handler: null,\n    hanging: number,\n    hatchContentUnits: null,\n    hatchUnits: null,\n    height: null,\n    href: null,\n    hrefLang: null,\n    horizAdvX: number,\n    horizOriginX: number,\n    horizOriginY: number,\n    id: null,\n    ideographic: number,\n    imageRendering: null,\n    initialVisibility: null,\n    in: null,\n    in2: null,\n    intercept: number,\n    k: number,\n    k1: number,\n    k2: number,\n    k3: number,\n    k4: number,\n    kernelMatrix: commaOrSpaceSeparated,\n    kernelUnitLength: null,\n    keyPoints: null, // SEMI_COLON_SEPARATED\n    keySplines: null, // SEMI_COLON_SEPARATED\n    keyTimes: null, // SEMI_COLON_SEPARATED\n    kerning: null,\n    lang: null,\n    lengthAdjust: null,\n    letterSpacing: null,\n    lightingColor: null,\n    limitingConeAngle: number,\n    local: null,\n    markerEnd: null,\n    markerMid: null,\n    markerStart: null,\n    markerHeight: null,\n    markerUnits: null,\n    markerWidth: null,\n    mask: null,\n    maskContentUnits: null,\n    maskUnits: null,\n    mathematical: null,\n    max: null,\n    media: null,\n    mediaCharacterEncoding: null,\n    mediaContentEncodings: null,\n    mediaSize: number,\n    mediaTime: null,\n    method: null,\n    min: null,\n    mode: null,\n    name: null,\n    navDown: null,\n    navDownLeft: null,\n    navDownRight: null,\n    navLeft: null,\n    navNext: null,\n    navPrev: null,\n    navRight: null,\n    navUp: null,\n    navUpLeft: null,\n    navUpRight: null,\n    numOctaves: null,\n    observer: null,\n    offset: null,\n    onAbort: null,\n    onActivate: null,\n    onAfterPrint: null,\n    onBeforePrint: null,\n    onBegin: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnd: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFocusIn: null,\n    onFocusOut: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onMouseWheel: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRepeat: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onShow: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onZoom: null,\n    opacity: null,\n    operator: null,\n    order: null,\n    orient: null,\n    orientation: null,\n    origin: null,\n    overflow: null,\n    overlay: null,\n    overlinePosition: number,\n    overlineThickness: number,\n    paintOrder: null,\n    panose1: null,\n    path: null,\n    pathLength: number,\n    patternContentUnits: null,\n    patternTransform: null,\n    patternUnits: null,\n    phase: null,\n    ping: spaceSeparated,\n    pitch: null,\n    playbackOrder: null,\n    pointerEvents: null,\n    points: null,\n    pointsAtX: number,\n    pointsAtY: number,\n    pointsAtZ: number,\n    preserveAlpha: null,\n    preserveAspectRatio: null,\n    primitiveUnits: null,\n    propagate: null,\n    property: commaOrSpaceSeparated,\n    r: null,\n    radius: null,\n    referrerPolicy: null,\n    refX: null,\n    refY: null,\n    rel: commaOrSpaceSeparated,\n    rev: commaOrSpaceSeparated,\n    renderingIntent: null,\n    repeatCount: null,\n    repeatDur: null,\n    requiredExtensions: commaOrSpaceSeparated,\n    requiredFeatures: commaOrSpaceSeparated,\n    requiredFonts: commaOrSpaceSeparated,\n    requiredFormats: commaOrSpaceSeparated,\n    resource: null,\n    restart: null,\n    result: null,\n    rotate: null,\n    rx: null,\n    ry: null,\n    scale: null,\n    seed: null,\n    shapeRendering: null,\n    side: null,\n    slope: null,\n    snapshotTime: null,\n    specularConstant: number,\n    specularExponent: number,\n    spreadMethod: null,\n    spacing: null,\n    startOffset: null,\n    stdDeviation: null,\n    stemh: null,\n    stemv: null,\n    stitchTiles: null,\n    stopColor: null,\n    stopOpacity: null,\n    strikethroughPosition: number,\n    strikethroughThickness: number,\n    string: null,\n    stroke: null,\n    strokeDashArray: commaOrSpaceSeparated,\n    strokeDashOffset: null,\n    strokeLineCap: null,\n    strokeLineJoin: null,\n    strokeMiterLimit: number,\n    strokeOpacity: number,\n    strokeWidth: null,\n    style: null,\n    surfaceScale: number,\n    syncBehavior: null,\n    syncBehaviorDefault: null,\n    syncMaster: null,\n    syncTolerance: null,\n    syncToleranceDefault: null,\n    systemLanguage: commaOrSpaceSeparated,\n    tabIndex: number,\n    tableValues: null,\n    target: null,\n    targetX: number,\n    targetY: number,\n    textAnchor: null,\n    textDecoration: null,\n    textRendering: null,\n    textLength: null,\n    timelineBegin: null,\n    title: null,\n    transformBehavior: null,\n    type: null,\n    typeOf: commaOrSpaceSeparated,\n    to: null,\n    transform: null,\n    transformOrigin: null,\n    u1: null,\n    u2: null,\n    underlinePosition: number,\n    underlineThickness: number,\n    unicode: null,\n    unicodeBidi: null,\n    unicodeRange: null,\n    unitsPerEm: number,\n    values: null,\n    vAlphabetic: number,\n    vMathematical: number,\n    vectorEffect: null,\n    vHanging: number,\n    vIdeographic: number,\n    version: null,\n    vertAdvY: number,\n    vertOriginX: number,\n    vertOriginY: number,\n    viewBox: null,\n    viewTarget: null,\n    visibility: null,\n    width: null,\n    widths: null,\n    wordSpacing: null,\n    writingMode: null,\n    x: null,\n    x1: null,\n    x2: null,\n    xChannelSelector: null,\n    xHeight: number,\n    y: null,\n    y1: null,\n    y2: null,\n    yChannelSelector: null,\n    z: null,\n    zoomAndPan: null\n  },\n  space: 'svg',\n  transform: caseSensitiveTransform\n})\n","import {create} from './util/create.js'\n\nexport const xlink = create({\n  properties: {\n    xLinkActuate: null,\n    xLinkArcRole: null,\n    xLinkHref: null,\n    xLinkRole: null,\n    xLinkShow: null,\n    xLinkTitle: null,\n    xLinkType: null\n  },\n  space: 'xlink',\n  transform(_, property) {\n    return 'xlink:' + property.slice(5).toLowerCase()\n  }\n})\n","import {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const xmlns = create({\n  attributes: {xmlnsxlink: 'xmlns:xlink'},\n  properties: {xmlnsXLink: null, xmlns: null},\n  space: 'xmlns',\n  transform: caseInsensitiveTransform\n})\n","import {create} from './util/create.js'\n\nexport const xml = create({\n  properties: {xmlBase: null, xmlLang: null, xmlSpace: null},\n  space: 'xml',\n  transform(_, property) {\n    return 'xml:' + property.slice(3).toLowerCase()\n  }\n})\n","/**\n * Special cases for React (`Record<string, string>`).\n *\n * `hast` is close to `React` but differs in a couple of cases.\n * To get a React property from a hast property,\n * check if it is in `hastToReact`.\n * If it is, use the corresponding value;\n * otherwise, use the hast property.\n *\n * @type {Record<string, string>}\n */\nexport const hastToReact = {\n  classId: 'classID',\n  dataType: 'datatype',\n  itemId: 'itemID',\n  strokeDashArray: 'strokeDasharray',\n  strokeDashOffset: 'strokeDashoffset',\n  strokeLineCap: 'strokeLinecap',\n  strokeLineJoin: 'strokeLinejoin',\n  strokeMiterLimit: 'strokeMiterlimit',\n  typeOf: 'typeof',\n  xLinkActuate: 'xlinkActuate',\n  xLinkArcRole: 'xlinkArcrole',\n  xLinkHref: 'xlinkHref',\n  xLinkRole: 'xlinkRole',\n  xLinkShow: 'xlinkShow',\n  xLinkTitle: 'xlinkTitle',\n  xLinkType: 'xlinkType',\n  xmlnsXLink: 'xmlnsXlink'\n}\n","/**\n * @import {Schema} from 'property-information'\n */\n\nimport {DefinedInfo} from './util/defined-info.js'\nimport {Info} from './util/info.js'\nimport {normalize} from './normalize.js'\n\nconst cap = /[A-Z]/g\nconst dash = /-[a-z]/g\nconst valid = /^data[-\\w.:]+$/i\n\n/**\n * Look up info on a property.\n *\n * In most cases the given `schema` contains info on the property.\n * All standard,\n * most legacy,\n * and some non-standard properties are supported.\n * For these cases,\n * the returned `Info` has hints about the value of the property.\n *\n * `name` can also be a valid data attribute or property,\n * in which case an `Info` object with the correctly cased `attribute` and\n * `property` is returned.\n *\n * `name` can be an unknown attribute,\n * in which case an `Info` object with `attribute` and `property` set to the\n * given name is returned.\n * It is not recommended to provide unsupported legacy or recently specced\n * properties.\n *\n *\n * @param {Schema} schema\n *   Schema;\n *   either the `html` or `svg` export.\n * @param {string} value\n *   An attribute-like or property-like name;\n *   it will be passed through `normalize` to hopefully find the correct info.\n * @returns {Info}\n *   Info.\n */\nexport function find(schema, value) {\n  const normal = normalize(value)\n  let property = value\n  let Type = Info\n\n  if (normal in schema.normal) {\n    return schema.property[schema.normal[normal]]\n  }\n\n  if (normal.length > 4 && normal.slice(0, 4) === 'data' && valid.test(value)) {\n    // Attribute or property.\n    if (value.charAt(4) === '-') {\n      // Turn it into a property.\n      const rest = value.slice(5).replace(dash, camelcase)\n      property = 'data' + rest.charAt(0).toUpperCase() + rest.slice(1)\n    } else {\n      // Turn it into an attribute.\n      const rest = value.slice(4)\n\n      if (!dash.test(rest)) {\n        let dashes = rest.replace(cap, kebab)\n\n        if (dashes.charAt(0) !== '-') {\n          dashes = '-' + dashes\n        }\n\n        value = 'data' + dashes\n      }\n    }\n\n    Type = DefinedInfo\n  }\n\n  return new Type(property, value)\n}\n\n/**\n * @param {string} $0\n *   Value.\n * @returns {string}\n *   Kebab.\n */\nfunction kebab($0) {\n  return '-' + $0.toLowerCase()\n}\n\n/**\n * @param {string} $0\n *   Value.\n * @returns {string}\n *   Camel.\n */\nfunction camelcase($0) {\n  return $0.charAt(1).toUpperCase()\n}\n","// Note: types exposed from `index.d.ts`.\nimport {merge} from './lib/util/merge.js'\nimport {aria} from './lib/aria.js'\nimport {html as htmlBase} from './lib/html.js'\nimport {svg as svgBase} from './lib/svg.js'\nimport {xlink} from './lib/xlink.js'\nimport {xmlns} from './lib/xmlns.js'\nimport {xml} from './lib/xml.js'\n\nexport {hastToReact} from './lib/hast-to-react.js'\n\nexport const html = merge([aria, htmlBase, xlink, xmlns, xml], 'html')\n\nexport {find} from './lib/find.js'\nexport {normalize} from './lib/normalize.js'\n\nexport const svg = merge([aria, svgBase, xlink, xmlns, xml], 'svg')\n","/**\n * Parse space-separated tokens to an array of strings.\n *\n * @param {string} value\n *   Space-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  const input = String(value || '').trim()\n  return input ? input.split(/[ \\t\\n\\r\\f]+/g) : []\n}\n\n/**\n * Serialize an array of strings as space separated-tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @returns {string}\n *   Space-separated tokens.\n */\nexport function stringify(values) {\n  return values.join(' ').trim()\n}\n","// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\n\n// declaration\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\n\n// strings\nvar NEWLINE = '\\n';\nvar FORWARD_SLASH = '/';\nvar ASTERISK = '*';\nvar EMPTY_STRING = '';\n\n// types\nvar TYPE_COMMENT = 'comment';\nvar TYPE_DECLARATION = 'declaration';\n\n/**\n * @param {String} style\n * @param {Object} [options]\n * @return {Object[]}\n * @throws {TypeError}\n * @throws {Error}\n */\nmodule.exports = function (style, options) {\n  if (typeof style !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (!style) return [];\n\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   *\n   * @param {String} str\n   */\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(NEWLINE);\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   *\n   * @return {Function}\n   */\n  function position() {\n    var start = { line: lineno, column: column };\n    return function (node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node.\n   *\n   * @constructor\n   * @property {Object} start\n   * @property {Object} end\n   * @property {undefined|String} source\n   */\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string.\n   */\n  Position.prototype.content = style;\n\n  var errorsList = [];\n\n  /**\n   * Error `msg`.\n   *\n   * @param {String} msg\n   * @throws {Error}\n   */\n  function error(msg) {\n    var err = new Error(\n      options.source + ':' + lineno + ':' + column + ': ' + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n\n  /**\n   * Match `re` and return captures.\n   *\n   * @param {RegExp} re\n   * @return {undefined|Array}\n   */\n  function match(re) {\n    var m = re.exec(style);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n  function whitespace() {\n    match(WHITESPACE_REGEX);\n  }\n\n  /**\n   * Parse comments.\n   *\n   * @param {Object[]} [rules]\n   * @return {Object[]}\n   */\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function comment() {\n    var pos = position();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n\n    var i = 2;\n    while (\n      EMPTY_STRING != style.charAt(i) &&\n      (ASTERISK != style.charAt(i) || FORWARD_SLASH != style.charAt(i + 1))\n    ) {\n      ++i;\n    }\n    i += 2;\n\n    if (EMPTY_STRING === style.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n\n    var str = style.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i);\n    column += 2;\n\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n\n  /**\n   * Parse declaration.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n\n    // :\n    if (!match(COLON_REGEX)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(VALUE_REGEX);\n\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val\n        ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING))\n        : EMPTY_STRING\n    });\n\n    // ;\n    match(SEMICOLON_REGEX);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   *\n   * @return {Object[]}\n   */\n  function declarations() {\n    var decls = [];\n\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    return decls;\n  }\n\n  whitespace();\n  return declarations();\n};\n\n/**\n * Trim `str`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = StyleToObject;\nvar inline_style_parser_1 = __importDefault(require(\"inline-style-parser\"));\n/**\n * Parses inline style to object.\n *\n * @param style - Inline style.\n * @param iterator - Iterator.\n * @returns - Style object or null.\n *\n * @example Parsing inline style to object:\n *\n * ```js\n * import parse from 'style-to-object';\n * parse('line-height: 42;'); // { 'line-height': '42' }\n * ```\n */\nfunction StyleToObject(style, iterator) {\n    var styleObject = null;\n    if (!style || typeof style !== 'string') {\n        return styleObject;\n    }\n    var declarations = (0, inline_style_parser_1.default)(style);\n    var hasIterator = typeof iterator === 'function';\n    declarations.forEach(function (declaration) {\n        if (declaration.type !== 'declaration') {\n            return;\n        }\n        var property = declaration.property, value = declaration.value;\n        if (hasIterator) {\n            iterator(property, value, declaration);\n        }\n        else if (value) {\n            styleObject = styleObject || {};\n            styleObject[property] = value;\n        }\n    });\n    return styleObject;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.camelCase = void 0;\nvar CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9_-]+$/;\nvar HYPHEN_REGEX = /-([a-z])/g;\nvar NO_HYPHEN_REGEX = /^[^-]+$/;\nvar VENDOR_PREFIX_REGEX = /^-(webkit|moz|ms|o|khtml)-/;\nvar MS_VENDOR_PREFIX_REGEX = /^-(ms)-/;\n/**\n * Checks whether to skip camelCase.\n */\nvar skipCamelCase = function (property) {\n    return !property ||\n        NO_HYPHEN_REGEX.test(property) ||\n        CUSTOM_PROPERTY_REGEX.test(property);\n};\n/**\n * Replacer that capitalizes first character.\n */\nvar capitalize = function (match, character) {\n    return character.toUpperCase();\n};\n/**\n * Replacer that removes beginning hyphen of vendor prefix property.\n */\nvar trimHyphen = function (match, prefix) { return \"\".concat(prefix, \"-\"); };\n/**\n * CamelCases a CSS property.\n */\nvar camelCase = function (property, options) {\n    if (options === void 0) { options = {}; }\n    if (skipCamelCase(property)) {\n        return property;\n    }\n    property = property.toLowerCase();\n    if (options.reactCompat) {\n        // `-ms` vendor prefix should not be capitalized\n        property = property.replace(MS_VENDOR_PREFIX_REGEX, trimHyphen);\n    }\n    else {\n        // for non-React, remove first hyphen so vendor prefix is not capitalized\n        property = property.replace(VENDOR_PREFIX_REGEX, trimHyphen);\n    }\n    return property.replace(HYPHEN_REGEX, capitalize);\n};\nexports.camelCase = camelCase;\n//# sourceMappingURL=utilities.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar style_to_object_1 = __importDefault(require(\"style-to-object\"));\nvar utilities_1 = require(\"./utilities\");\n/**\n * Parses CSS inline style to JavaScript object (camelCased).\n */\nfunction StyleToJS(style, options) {\n    var output = {};\n    if (!style || typeof style !== 'string') {\n        return output;\n    }\n    (0, style_to_object_1.default)(style, function (property, value) {\n        // skip CSS comment\n        if (property && value) {\n            output[(0, utilities_1.camelCase)(property, options)] = value;\n        }\n    });\n    return output;\n}\nStyleToJS.default = StyleToJS;\nmodule.exports = StyleToJS;\n//# sourceMappingURL=index.js.map","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n */\n\n/**\n * Get the ending point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointEnd = point('end')\n\n/**\n * Get the starting point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointStart = point('start')\n\n/**\n * Get the positional info of `node`.\n *\n * @param {'end' | 'start'} type\n *   Side.\n * @returns\n *   Getter.\n */\nfunction point(type) {\n  return point\n\n  /**\n   * Get the point info of `node` at a bound side.\n   *\n   * @param {Node | NodeLike | null | undefined} [node]\n   * @returns {Point | undefined}\n   */\n  function point(node) {\n    const point = (node && node.position && node.position[type]) || {}\n\n    if (\n      typeof point.line === 'number' &&\n      point.line > 0 &&\n      typeof point.column === 'number' &&\n      point.column > 0\n    ) {\n      return {\n        line: point.line,\n        column: point.column,\n        offset:\n          typeof point.offset === 'number' && point.offset > -1\n            ? point.offset\n            : undefined\n      }\n    }\n  }\n}\n\n/**\n * Get the positional info of `node`.\n *\n * @param {Node | NodeLike | null | undefined} [node]\n *   Node.\n * @returns {Position | undefined}\n *   Position.\n */\nexport function position(node) {\n  const start = pointStart(node)\n  const end = pointEnd(node)\n\n  if (start && end) {\n    return {start, end}\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n */\n\n/**\n * Serialize the positional info of a point, position (start and end points),\n * or node.\n *\n * @param {Node | NodeLike | Point | PointLike | Position | PositionLike | null | undefined} [value]\n *   Node, position, or point.\n * @returns {string}\n *   Pretty printed positional info of a node (`string`).\n *\n *   In the format of a range `ls:cs-le:ce` (when given `node` or `position`)\n *   or a point `l:c` (when given `point`), where `l` stands for line, `c` for\n *   column, `s` for `start`, and `e` for end.\n *   An empty string (`''`) is returned if the given value is neither `node`,\n *   `position`, nor `point`.\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point | PointLike | null | undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position | PositionLike | null | undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number | null | undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n *\n * @typedef Options\n *   Configuration.\n * @property {Array<Node> | null | undefined} [ancestors]\n *   Stack of (inclusive) ancestor nodes surrounding the message (optional).\n * @property {Error | null | undefined} [cause]\n *   Original error cause of the message (optional).\n * @property {Point | Position | null | undefined} [place]\n *   Place of message (optional).\n * @property {string | null | undefined} [ruleId]\n *   Category of message (optional, example: `'my-rule'`).\n * @property {string | null | undefined} [source]\n *   Namespace of who sent the message (optional, example: `'my-package'`).\n */\n\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\n/**\n * Message.\n */\nexport class VFileMessage extends Error {\n  /**\n   * Create a message for `reason`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Options | null | undefined} [options]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns\n   *   Instance of `VFileMessage`.\n   */\n  // eslint-disable-next-line complexity\n  constructor(causeOrReason, optionsOrParentOrPlace, origin) {\n    super()\n\n    if (typeof optionsOrParentOrPlace === 'string') {\n      origin = optionsOrParentOrPlace\n      optionsOrParentOrPlace = undefined\n    }\n\n    /** @type {string} */\n    let reason = ''\n    /** @type {Options} */\n    let options = {}\n    let legacyCause = false\n\n    if (optionsOrParentOrPlace) {\n      // Point.\n      if (\n        'line' in optionsOrParentOrPlace &&\n        'column' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Position.\n      else if (\n        'start' in optionsOrParentOrPlace &&\n        'end' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Node.\n      else if ('type' in optionsOrParentOrPlace) {\n        options = {\n          ancestors: [optionsOrParentOrPlace],\n          place: optionsOrParentOrPlace.position\n        }\n      }\n      // Options.\n      else {\n        options = {...optionsOrParentOrPlace}\n      }\n    }\n\n    if (typeof causeOrReason === 'string') {\n      reason = causeOrReason\n    }\n    // Error.\n    else if (!options.cause && causeOrReason) {\n      legacyCause = true\n      reason = causeOrReason.message\n      options.cause = causeOrReason\n    }\n\n    if (!options.ruleId && !options.source && typeof origin === 'string') {\n      const index = origin.indexOf(':')\n\n      if (index === -1) {\n        options.ruleId = origin\n      } else {\n        options.source = origin.slice(0, index)\n        options.ruleId = origin.slice(index + 1)\n      }\n    }\n\n    if (!options.place && options.ancestors && options.ancestors) {\n      const parent = options.ancestors[options.ancestors.length - 1]\n\n      if (parent) {\n        options.place = parent.position\n      }\n    }\n\n    const start =\n      options.place && 'start' in options.place\n        ? options.place.start\n        : options.place\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * Stack of ancestor nodes surrounding the message.\n     *\n     * @type {Array<Node> | undefined}\n     */\n    this.ancestors = options.ancestors || undefined\n\n    /**\n     * Original error cause of the message.\n     *\n     * @type {Error | undefined}\n     */\n    this.cause = options.cause || undefined\n\n    /**\n     * Starting column of message.\n     *\n     * @type {number | undefined}\n     */\n    this.column = start ? start.column : undefined\n\n    /**\n     * State of problem.\n     *\n     * * `true` — error, file not usable\n     * * `false` — warning, change may be needed\n     * * `undefined` — change likely not needed\n     *\n     * @type {boolean | null | undefined}\n     */\n    this.fatal = undefined\n\n    /**\n     * Path of a file (used throughout the `VFile` ecosystem).\n     *\n     * @type {string | undefined}\n     */\n    this.file\n\n    // Field from `Error`.\n    /**\n     * Reason for message.\n     *\n     * @type {string}\n     */\n    this.message = reason\n\n    /**\n     * Starting line of error.\n     *\n     * @type {number | undefined}\n     */\n    this.line = start ? start.line : undefined\n\n    // Field from `Error`.\n    /**\n     * Serialized positional info of message.\n     *\n     * On normal errors, this would be something like `ParseError`, buit in\n     * `VFile` messages we use this space to show where an error happened.\n     */\n    this.name = stringifyPosition(options.place) || '1:1'\n\n    /**\n     * Place of message.\n     *\n     * @type {Point | Position | undefined}\n     */\n    this.place = options.place || undefined\n\n    /**\n     * Reason for message, should use markdown.\n     *\n     * @type {string}\n     */\n    this.reason = this.message\n\n    /**\n     * Category of message (example: `'my-rule'`).\n     *\n     * @type {string | undefined}\n     */\n    this.ruleId = options.ruleId || undefined\n\n    /**\n     * Namespace of message (example: `'my-package'`).\n     *\n     * @type {string | undefined}\n     */\n    this.source = options.source || undefined\n\n    // Field from `Error`.\n    /**\n     * Stack of message.\n     *\n     * This is used by normal errors to show where something happened in\n     * programming code, irrelevant for `VFile` messages,\n     *\n     * @type {string}\n     */\n    this.stack =\n      legacyCause && options.cause && typeof options.cause.stack === 'string'\n        ? options.cause.stack\n        : ''\n\n    // The following fields are “well known”.\n    // Not standard.\n    // Feel free to add other non-standard fields to your messages.\n\n    /**\n     * Specify the source value that’s being reported, which is deemed\n     * incorrect.\n     *\n     * @type {string | undefined}\n     */\n    this.actual\n\n    /**\n     * Suggest acceptable values that can be used instead of `actual`.\n     *\n     * @type {Array<string> | undefined}\n     */\n    this.expected\n\n    /**\n     * Long form description of the message (you should use markdown).\n     *\n     * @type {string | undefined}\n     */\n    this.note\n\n    /**\n     * Link to docs for the message.\n     *\n     * > 👉 **Note**: this must be an absolute URL that can be passed as `x`\n     * > to `new URL(x)`.\n     *\n     * @type {string | undefined}\n     */\n    this.url\n    /* eslint-enable no-unused-expressions */\n  }\n}\n\nVFileMessage.prototype.file = ''\nVFileMessage.prototype.name = ''\nVFileMessage.prototype.reason = ''\nVFileMessage.prototype.message = ''\nVFileMessage.prototype.stack = ''\nVFileMessage.prototype.column = undefined\nVFileMessage.prototype.line = undefined\nVFileMessage.prototype.ancestors = undefined\nVFileMessage.prototype.cause = undefined\nVFileMessage.prototype.fatal = undefined\nVFileMessage.prototype.place = undefined\nVFileMessage.prototype.ruleId = undefined\nVFileMessage.prototype.source = undefined\n","/**\n * @import {Identifier, Literal, MemberExpression} from 'estree'\n * @import {Jsx, JsxDev, Options, Props} from 'hast-util-to-jsx-runtime'\n * @import {Element, Nodes, Parents, Root, Text} from 'hast'\n * @import {MdxFlowExpressionHast, MdxTextExpressionHast} from 'mdast-util-mdx-expression'\n * @import {MdxJsxFlowElementHast, MdxJsxTextElementHast} from 'mdast-util-mdx-jsx'\n * @import {MdxjsEsmHast} from 'mdast-util-mdxjs-esm'\n * @import {Position} from 'unist'\n * @import {Child, Create, Field, JsxElement, State, Style} from './types.js'\n */\n\nimport {stringify as commas} from 'comma-separated-tokens'\nimport {ok as assert} from 'devlop'\nimport {name as isIdentifierName} from 'estree-util-is-identifier-name'\nimport {whitespace} from 'hast-util-whitespace'\nimport {find, hastToReact, html, svg} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport styleToJs from 'style-to-js'\nimport {pointStart} from 'unist-util-position'\nimport {VFileMessage} from 'vfile-message'\n\n// To do: next major: `Object.hasOwn`.\nconst own = {}.hasOwnProperty\n\n/** @type {Map<string, number>} */\nconst emptyMap = new Map()\n\nconst cap = /[A-Z]/g\n\n// `react-dom` triggers a warning for *any* white space in tables.\n// To follow GFM, `mdast-util-to-hast` injects line endings between elements.\n// Other tools might do so too, but they don’t do here, so we remove all of\n// that.\n\n// See: <https://github.com/facebook/react/pull/7081>.\n// See: <https://github.com/facebook/react/pull/7515>.\n// See: <https://github.com/remarkjs/remark-react/issues/64>.\n// See: <https://github.com/rehypejs/rehype-react/pull/29>.\n// See: <https://github.com/rehypejs/rehype-react/pull/32>.\n// See: <https://github.com/rehypejs/rehype-react/pull/45>.\nconst tableElements = new Set(['table', 'tbody', 'thead', 'tfoot', 'tr'])\n\nconst tableCellElement = new Set(['td', 'th'])\n\nconst docs = 'https://github.com/syntax-tree/hast-util-to-jsx-runtime'\n\n/**\n * Transform a hast tree to preact, react, solid, svelte, vue, etc.,\n * with an automatic JSX runtime.\n *\n * @param {Nodes} tree\n *   Tree to transform.\n * @param {Options} options\n *   Configuration (required).\n * @returns {JsxElement}\n *   JSX element.\n */\n\nexport function toJsxRuntime(tree, options) {\n  if (!options || options.Fragment === undefined) {\n    throw new TypeError('Expected `Fragment` in options')\n  }\n\n  const filePath = options.filePath || undefined\n  /** @type {Create} */\n  let create\n\n  if (options.development) {\n    if (typeof options.jsxDEV !== 'function') {\n      throw new TypeError(\n        'Expected `jsxDEV` in options when `development: true`'\n      )\n    }\n\n    create = developmentCreate(filePath, options.jsxDEV)\n  } else {\n    if (typeof options.jsx !== 'function') {\n      throw new TypeError('Expected `jsx` in production options')\n    }\n\n    if (typeof options.jsxs !== 'function') {\n      throw new TypeError('Expected `jsxs` in production options')\n    }\n\n    create = productionCreate(filePath, options.jsx, options.jsxs)\n  }\n\n  /** @type {State} */\n  const state = {\n    Fragment: options.Fragment,\n    ancestors: [],\n    components: options.components || {},\n    create,\n    elementAttributeNameCase: options.elementAttributeNameCase || 'react',\n    evaluater: options.createEvaluater ? options.createEvaluater() : undefined,\n    filePath,\n    ignoreInvalidStyle: options.ignoreInvalidStyle || false,\n    passKeys: options.passKeys !== false,\n    passNode: options.passNode || false,\n    schema: options.space === 'svg' ? svg : html,\n    stylePropertyNameCase: options.stylePropertyNameCase || 'dom',\n    tableCellAlignToStyle: options.tableCellAlignToStyle !== false\n  }\n\n  const result = one(state, tree, undefined)\n\n  // JSX element.\n  if (result && typeof result !== 'string') {\n    return result\n  }\n\n  // Text node or something that turned into nothing.\n  return state.create(\n    tree,\n    state.Fragment,\n    {children: result || undefined},\n    undefined\n  )\n}\n\n/**\n * Transform a node.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Nodes} node\n *   Current node.\n * @param {string | undefined} key\n *   Key.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction one(state, node, key) {\n  if (node.type === 'element') {\n    return element(state, node, key)\n  }\n\n  if (node.type === 'mdxFlowExpression' || node.type === 'mdxTextExpression') {\n    return mdxExpression(state, node)\n  }\n\n  if (node.type === 'mdxJsxFlowElement' || node.type === 'mdxJsxTextElement') {\n    return mdxJsxElement(state, node, key)\n  }\n\n  if (node.type === 'mdxjsEsm') {\n    return mdxEsm(state, node)\n  }\n\n  if (node.type === 'root') {\n    return root(state, node, key)\n  }\n\n  if (node.type === 'text') {\n    return text(state, node)\n  }\n}\n\n/**\n * Handle element.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Element} node\n *   Current node.\n * @param {string | undefined} key\n *   Key.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction element(state, node, key) {\n  const parentSchema = state.schema\n  let schema = parentSchema\n\n  if (node.tagName.toLowerCase() === 'svg' && parentSchema.space === 'html') {\n    schema = svg\n    state.schema = schema\n  }\n\n  state.ancestors.push(node)\n\n  const type = findComponentFromName(state, node.tagName, false)\n  const props = createElementProps(state, node)\n  let children = createChildren(state, node)\n\n  if (tableElements.has(node.tagName)) {\n    children = children.filter(function (child) {\n      return typeof child === 'string' ? !whitespace(child) : true\n    })\n  }\n\n  addNode(state, props, type, node)\n  addChildren(props, children)\n\n  // Restore.\n  state.ancestors.pop()\n  state.schema = parentSchema\n\n  return state.create(node, type, props, key)\n}\n\n/**\n * Handle MDX expression.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdxFlowExpressionHast | MdxTextExpressionHast} node\n *   Current node.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction mdxExpression(state, node) {\n  if (node.data && node.data.estree && state.evaluater) {\n    const program = node.data.estree\n    const expression = program.body[0]\n    assert(expression.type === 'ExpressionStatement')\n\n    // Assume result is a child.\n    return /** @type {Child | undefined} */ (\n      state.evaluater.evaluateExpression(expression.expression)\n    )\n  }\n\n  crashEstree(state, node.position)\n}\n\n/**\n * Handle MDX ESM.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdxjsEsmHast} node\n *   Current node.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction mdxEsm(state, node) {\n  if (node.data && node.data.estree && state.evaluater) {\n    // Assume result is a child.\n    return /** @type {Child | undefined} */ (\n      state.evaluater.evaluateProgram(node.data.estree)\n    )\n  }\n\n  crashEstree(state, node.position)\n}\n\n/**\n * Handle MDX JSX.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdxJsxFlowElementHast | MdxJsxTextElementHast} node\n *   Current node.\n * @param {string | undefined} key\n *   Key.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction mdxJsxElement(state, node, key) {\n  const parentSchema = state.schema\n  let schema = parentSchema\n\n  if (node.name === 'svg' && parentSchema.space === 'html') {\n    schema = svg\n    state.schema = schema\n  }\n\n  state.ancestors.push(node)\n\n  const type =\n    node.name === null\n      ? state.Fragment\n      : findComponentFromName(state, node.name, true)\n  const props = createJsxElementProps(state, node)\n  const children = createChildren(state, node)\n\n  addNode(state, props, type, node)\n  addChildren(props, children)\n\n  // Restore.\n  state.ancestors.pop()\n  state.schema = parentSchema\n\n  return state.create(node, type, props, key)\n}\n\n/**\n * Handle root.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Root} node\n *   Current node.\n * @param {string | undefined} key\n *   Key.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction root(state, node, key) {\n  /** @type {Props} */\n  const props = {}\n\n  addChildren(props, createChildren(state, node))\n\n  return state.create(node, state.Fragment, props, key)\n}\n\n/**\n * Handle text.\n *\n * @param {State} _\n *   Info passed around.\n * @param {Text} node\n *   Current node.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction text(_, node) {\n  return node.value\n}\n\n/**\n * Add `node` to props.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Props} props\n *   Props.\n * @param {unknown} type\n *   Type.\n * @param {Element | MdxJsxFlowElementHast | MdxJsxTextElementHast} node\n *   Node.\n * @returns {undefined}\n *   Nothing.\n */\nfunction addNode(state, props, type, node) {\n  // If this is swapped out for a component:\n  if (typeof type !== 'string' && type !== state.Fragment && state.passNode) {\n    props.node = node\n  }\n}\n\n/**\n * Add children to props.\n *\n * @param {Props} props\n *   Props.\n * @param {Array<Child>} children\n *   Children.\n * @returns {undefined}\n *   Nothing.\n */\nfunction addChildren(props, children) {\n  if (children.length > 0) {\n    const value = children.length > 1 ? children : children[0]\n\n    if (value) {\n      props.children = value\n    }\n  }\n}\n\n/**\n * @param {string | undefined} _\n *   Path to file.\n * @param {Jsx} jsx\n *   Dynamic.\n * @param {Jsx} jsxs\n *   Static.\n * @returns {Create}\n *   Create a production element.\n */\nfunction productionCreate(_, jsx, jsxs) {\n  return create\n  /** @type {Create} */\n  function create(_, type, props, key) {\n    // Only an array when there are 2 or more children.\n    const isStaticChildren = Array.isArray(props.children)\n    const fn = isStaticChildren ? jsxs : jsx\n    return key ? fn(type, props, key) : fn(type, props)\n  }\n}\n\n/**\n * @param {string | undefined} filePath\n *   Path to file.\n * @param {JsxDev} jsxDEV\n *   Development.\n * @returns {Create}\n *   Create a development element.\n */\nfunction developmentCreate(filePath, jsxDEV) {\n  return create\n  /** @type {Create} */\n  function create(node, type, props, key) {\n    // Only an array when there are 2 or more children.\n    const isStaticChildren = Array.isArray(props.children)\n    const point = pointStart(node)\n    return jsxDEV(\n      type,\n      props,\n      key,\n      isStaticChildren,\n      {\n        columnNumber: point ? point.column - 1 : undefined,\n        fileName: filePath,\n        lineNumber: point ? point.line : undefined\n      },\n      undefined\n    )\n  }\n}\n\n/**\n * Create props from an element.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Element} node\n *   Current element.\n * @returns {Props}\n *   Props.\n */\nfunction createElementProps(state, node) {\n  /** @type {Props} */\n  const props = {}\n  /** @type {string | undefined} */\n  let alignValue\n  /** @type {string} */\n  let prop\n\n  for (prop in node.properties) {\n    if (prop !== 'children' && own.call(node.properties, prop)) {\n      const result = createProperty(state, prop, node.properties[prop])\n\n      if (result) {\n        const [key, value] = result\n\n        if (\n          state.tableCellAlignToStyle &&\n          key === 'align' &&\n          typeof value === 'string' &&\n          tableCellElement.has(node.tagName)\n        ) {\n          alignValue = value\n        } else {\n          props[key] = value\n        }\n      }\n    }\n  }\n\n  if (alignValue) {\n    // Assume style is an object.\n    const style = /** @type {Style} */ (props.style || (props.style = {}))\n    style[state.stylePropertyNameCase === 'css' ? 'text-align' : 'textAlign'] =\n      alignValue\n  }\n\n  return props\n}\n\n/**\n * Create props from a JSX element.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdxJsxFlowElementHast | MdxJsxTextElementHast} node\n *   Current JSX element.\n * @returns {Props}\n *   Props.\n */\nfunction createJsxElementProps(state, node) {\n  /** @type {Props} */\n  const props = {}\n\n  for (const attribute of node.attributes) {\n    if (attribute.type === 'mdxJsxExpressionAttribute') {\n      if (attribute.data && attribute.data.estree && state.evaluater) {\n        const program = attribute.data.estree\n        const expression = program.body[0]\n        assert(expression.type === 'ExpressionStatement')\n        const objectExpression = expression.expression\n        assert(objectExpression.type === 'ObjectExpression')\n        const property = objectExpression.properties[0]\n        assert(property.type === 'SpreadElement')\n\n        Object.assign(\n          props,\n          state.evaluater.evaluateExpression(property.argument)\n        )\n      } else {\n        crashEstree(state, node.position)\n      }\n    } else {\n      // For JSX, the author is responsible of passing in the correct values.\n      const name = attribute.name\n      /** @type {unknown} */\n      let value\n\n      if (attribute.value && typeof attribute.value === 'object') {\n        if (\n          attribute.value.data &&\n          attribute.value.data.estree &&\n          state.evaluater\n        ) {\n          const program = attribute.value.data.estree\n          const expression = program.body[0]\n          assert(expression.type === 'ExpressionStatement')\n          value = state.evaluater.evaluateExpression(expression.expression)\n        } else {\n          crashEstree(state, node.position)\n        }\n      } else {\n        value = attribute.value === null ? true : attribute.value\n      }\n\n      // Assume a prop.\n      props[name] = /** @type {Props[keyof Props]} */ (value)\n    }\n  }\n\n  return props\n}\n\n/**\n * Create children.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Parents} node\n *   Current element.\n * @returns {Array<Child>}\n *   Children.\n */\nfunction createChildren(state, node) {\n  /** @type {Array<Child>} */\n  const children = []\n  let index = -1\n  /** @type {Map<string, number>} */\n  // Note: test this when Solid doesn’t want to merge my upcoming PR.\n  /* c8 ignore next */\n  const countsByName = state.passKeys ? new Map() : emptyMap\n\n  while (++index < node.children.length) {\n    const child = node.children[index]\n    /** @type {string | undefined} */\n    let key\n\n    if (state.passKeys) {\n      const name =\n        child.type === 'element'\n          ? child.tagName\n          : child.type === 'mdxJsxFlowElement' ||\n              child.type === 'mdxJsxTextElement'\n            ? child.name\n            : undefined\n\n      if (name) {\n        const count = countsByName.get(name) || 0\n        key = name + '-' + count\n        countsByName.set(name, count + 1)\n      }\n    }\n\n    const result = one(state, child, key)\n    if (result !== undefined) children.push(result)\n  }\n\n  return children\n}\n\n/**\n * Handle a property.\n *\n * @param {State} state\n *   Info passed around.\n * @param {string} prop\n *   Key.\n * @param {Array<number | string> | boolean | number | string | null | undefined} value\n *   hast property value.\n * @returns {Field | undefined}\n *   Field for runtime, optional.\n */\nfunction createProperty(state, prop, value) {\n  const info = find(state.schema, prop)\n\n  // Ignore nullish and `NaN` values.\n  if (\n    value === null ||\n    value === undefined ||\n    (typeof value === 'number' && Number.isNaN(value))\n  ) {\n    return\n  }\n\n  if (Array.isArray(value)) {\n    // Accept `array`.\n    // Most props are space-separated.\n    value = info.commaSeparated ? commas(value) : spaces(value)\n  }\n\n  // React only accepts `style` as object.\n  if (info.property === 'style') {\n    let styleObject =\n      typeof value === 'object' ? value : parseStyle(state, String(value))\n\n    if (state.stylePropertyNameCase === 'css') {\n      styleObject = transformStylesToCssCasing(styleObject)\n    }\n\n    return ['style', styleObject]\n  }\n\n  return [\n    state.elementAttributeNameCase === 'react' && info.space\n      ? hastToReact[info.property] || info.property\n      : info.attribute,\n    value\n  ]\n}\n\n/**\n * Parse a CSS declaration to an object.\n *\n * @param {State} state\n *   Info passed around.\n * @param {string} value\n *   CSS declarations.\n * @returns {Style}\n *   Properties.\n * @throws\n *   Throws `VFileMessage` when CSS cannot be parsed.\n */\nfunction parseStyle(state, value) {\n  try {\n    return styleToJs(value, {reactCompat: true})\n  } catch (error) {\n    if (state.ignoreInvalidStyle) {\n      return {}\n    }\n\n    const cause = /** @type {Error} */ (error)\n    const message = new VFileMessage('Cannot parse `style` attribute', {\n      ancestors: state.ancestors,\n      cause,\n      ruleId: 'style',\n      source: 'hast-util-to-jsx-runtime'\n    })\n    message.file = state.filePath || undefined\n    message.url = docs + '#cannot-parse-style-attribute'\n\n    throw message\n  }\n}\n\n/**\n * Create a JSX name from a string.\n *\n * @param {State} state\n *   To do.\n * @param {string} name\n *   Name.\n * @param {boolean} allowExpression\n *   Allow member expressions and identifiers.\n * @returns {unknown}\n *   To do.\n */\nfunction findComponentFromName(state, name, allowExpression) {\n  /** @type {Identifier | Literal | MemberExpression} */\n  let result\n\n  if (!allowExpression) {\n    result = {type: 'Literal', value: name}\n  } else if (name.includes('.')) {\n    const identifiers = name.split('.')\n    let index = -1\n    /** @type {Identifier | Literal | MemberExpression | undefined} */\n    let node\n\n    while (++index < identifiers.length) {\n      /** @type {Identifier | Literal} */\n      const prop = isIdentifierName(identifiers[index])\n        ? {type: 'Identifier', name: identifiers[index]}\n        : {type: 'Literal', value: identifiers[index]}\n      node = node\n        ? {\n            type: 'MemberExpression',\n            object: node,\n            property: prop,\n            computed: Boolean(index && prop.type === 'Literal'),\n            optional: false\n          }\n        : prop\n    }\n\n    assert(node, 'always a result')\n    result = node\n  } else {\n    result =\n      isIdentifierName(name) && !/^[a-z]/.test(name)\n        ? {type: 'Identifier', name}\n        : {type: 'Literal', value: name}\n  }\n\n  // Only literals can be passed in `components` currently.\n  // No identifiers / member expressions.\n  if (result.type === 'Literal') {\n    const name = /** @type {string | number} */ (result.value)\n    return own.call(state.components, name) ? state.components[name] : name\n  }\n\n  // Assume component.\n  if (state.evaluater) {\n    return state.evaluater.evaluateExpression(result)\n  }\n\n  crashEstree(state)\n}\n\n/**\n * @param {State} state\n * @param {Position | undefined} [place]\n * @returns {never}\n */\nfunction crashEstree(state, place) {\n  const message = new VFileMessage(\n    'Cannot handle MDX estrees without `createEvaluater`',\n    {\n      ancestors: state.ancestors,\n      place,\n      ruleId: 'mdx-estree',\n      source: 'hast-util-to-jsx-runtime'\n    }\n  )\n  message.file = state.filePath || undefined\n  message.url = docs + '#cannot-handle-mdx-estrees-without-createevaluater'\n\n  throw message\n}\n\n/**\n * Transform a DOM casing style object to a CSS casing style object.\n *\n * @param {Style} domCasing\n * @returns {Style}\n */\nfunction transformStylesToCssCasing(domCasing) {\n  /** @type {Style} */\n  const cssCasing = {}\n  /** @type {string} */\n  let from\n\n  for (from in domCasing) {\n    if (own.call(domCasing, from)) {\n      cssCasing[transformStyleToCssCasing(from)] = domCasing[from]\n    }\n  }\n\n  return cssCasing\n}\n\n/**\n * Transform a DOM casing style field to a CSS casing style field.\n *\n * @param {string} from\n * @returns {string}\n */\nfunction transformStyleToCssCasing(from) {\n  let to = from.replace(cap, toDash)\n  // Handle `ms-xxx` -> `-ms-xxx`.\n  if (to.slice(0, 3) === 'ms-') to = '-' + to\n  return to\n}\n\n/**\n * Make `$0` dash cased.\n *\n * @param {string} $0\n *   Capitalized ASCII leter.\n * @returns {string}\n *   Dash and lower letter.\n */\nfunction toDash($0) {\n  return '-' + $0.toLowerCase()\n}\n","/**\n * HTML URL properties.\n *\n * Each key is a property name and each value is a list of tag names it applies\n * to or `null` if it applies to all elements.\n *\n * @type {Record<string, Array<string> | null>}\n */\nexport const urlAttributes = {\n  action: ['form'],\n  cite: ['blockquote', 'del', 'ins', 'q'],\n  data: ['object'],\n  formAction: ['button', 'input'],\n  href: ['a', 'area', 'base', 'link'],\n  icon: ['menuitem'],\n  itemId: null,\n  manifest: ['html'],\n  ping: ['a', 'area'],\n  poster: ['video'],\n  src: [\n    'audio',\n    'embed',\n    'iframe',\n    'img',\n    'input',\n    'script',\n    'source',\n    'track',\n    'video'\n  ]\n}\n","/**\n * @typedef {import('mdast').Nodes} Nodes\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [includeImageAlt=true]\n *   Whether to use `alt` for `image`s (default: `true`).\n * @property {boolean | null | undefined} [includeHtml=true]\n *   Whether to use `value` of HTML (default: `true`).\n */\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Get the text content of a node or list of nodes.\n *\n * Prefers the node’s plain-text fields, otherwise serializes its children,\n * and if the given value is an array, serialize the nodes in it.\n *\n * @param {unknown} [value]\n *   Thing to serialize, typically `Node`.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized `value`.\n */\nexport function toString(value, options) {\n  const settings = options || emptyOptions\n  const includeImageAlt =\n    typeof settings.includeImageAlt === 'boolean'\n      ? settings.includeImageAlt\n      : true\n  const includeHtml =\n    typeof settings.includeHtml === 'boolean' ? settings.includeHtml : true\n\n  return one(value, includeImageAlt, includeHtml)\n}\n\n/**\n * One node or several nodes.\n *\n * @param {unknown} value\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if ('value' in value) {\n      return value.type === 'html' && !includeHtml ? '' : value.value\n    }\n\n    if (includeImageAlt && 'alt' in value && value.alt) {\n      return value.alt\n    }\n\n    if ('children' in value) {\n      return all(value.children, includeImageAlt, includeHtml)\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml)\n  }\n\n  return ''\n}\n\n/**\n * Serialize a list of nodes.\n *\n * @param {Array<unknown>} values\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized nodes.\n */\nfunction all(values, includeImageAlt, includeHtml) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n\n  while (++index < values.length) {\n    result[index] = one(values[index], includeImageAlt, includeHtml)\n  }\n\n  return result.join('')\n}\n\n/**\n * Check if `value` looks like a node.\n *\n * @param {unknown} value\n *   Thing.\n * @returns {value is Nodes}\n *   Whether `value` is a node.\n */\nfunction node(value) {\n  return Boolean(value && typeof value === 'object')\n}\n","/// <reference lib=\"dom\" />\n\n/* eslint-env browser */\n\nconst element = document.createElement('i')\n\n/**\n * @param {string} value\n * @returns {string | false}\n */\nexport function decodeNamedCharacterReference(value) {\n  const characterReference = '&' + value + ';'\n  element.innerHTML = characterReference\n  const character = element.textContent\n\n  // Some named character references do not require the closing semicolon\n  // (`&not`, for instance), which leads to situations where parsing the assumed\n  // named reference of `&notit;` will result in the string `¬it;`.\n  // When we encounter a trailing semicolon after parsing, and the character\n  // reference to decode was not a semicolon (`&semi;`), we can assume that the\n  // matching was not complete.\n  if (\n    // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n    // yield `null`.\n    character.charCodeAt(character.length - 1) === 59 /* `;` */ &&\n    value !== 'semi'\n  ) {\n    return false\n  }\n\n  // If the decoded string is equal to the input, the character reference was\n  // not valid.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  return character === characterReference ? false : character\n}\n","/**\n * Like `Array#splice`, but smarter for giant arrays.\n *\n * `Array#splice` takes all items to be inserted as individual argument which\n * causes a stack overflow in V8 when trying to insert 100k items for instance.\n *\n * Otherwise, this does not return the removed items, and takes `items` as an\n * array instead of rest parameters.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {number} start\n *   Index to remove/insert at (can be negative).\n * @param {number} remove\n *   Number of items to remove.\n * @param {Array<T>} items\n *   Items to inject into `list`.\n * @returns {undefined}\n *   Nothing.\n */\nexport function splice(list, start, remove, items) {\n  const end = list.length;\n  let chunkStart = 0;\n  /** @type {Array<unknown>} */\n  let parameters;\n\n  // Make start between zero and `end` (included).\n  if (start < 0) {\n    start = -start > end ? 0 : end + start;\n  } else {\n    start = start > end ? end : start;\n  }\n  remove = remove > 0 ? remove : 0;\n\n  // No need to chunk the items if there’s only a couple (10k) items.\n  if (items.length < 10000) {\n    parameters = Array.from(items);\n    parameters.unshift(start, remove);\n    // @ts-expect-error Hush, it’s fine.\n    list.splice(...parameters);\n  } else {\n    // Delete `remove` items starting from `start`\n    if (remove) list.splice(start, remove);\n\n    // Insert the items in chunks to not cause stack overflows.\n    while (chunkStart < items.length) {\n      parameters = items.slice(chunkStart, chunkStart + 10000);\n      parameters.unshift(start, 0);\n      // @ts-expect-error Hush, it’s fine.\n      list.splice(...parameters);\n      chunkStart += 10000;\n      start += 10000;\n    }\n  }\n}\n\n/**\n * Append `items` (an array) at the end of `list` (another array).\n * When `list` was empty, returns `items` instead.\n *\n * This prevents a potentially expensive operation when `list` is empty,\n * and adds items in batches to prevent V8 from hanging.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {Array<T>} items\n *   Items to add to `list`.\n * @returns {Array<T>}\n *   Either `list` or `items`.\n */\nexport function push(list, items) {\n  if (list.length > 0) {\n    splice(list, list.length, 0, items);\n    return list;\n  }\n  return items;\n}","/**\n * @import {\n *   Extension,\n *   Handles,\n *   HtmlExtension,\n *   NormalizedExtension\n * } from 'micromark-util-types'\n */\n\nimport {splice} from 'micromark-util-chunked'\n\nconst hasOwnProperty = {}.hasOwnProperty\n\n/**\n * Combine multiple syntax extensions into one.\n *\n * @param {ReadonlyArray<Extension>} extensions\n *   List of syntax extensions.\n * @returns {NormalizedExtension}\n *   A single combined extension.\n */\nexport function combineExtensions(extensions) {\n  /** @type {NormalizedExtension} */\n  const all = {}\n  let index = -1\n\n  while (++index < extensions.length) {\n    syntaxExtension(all, extensions[index])\n  }\n\n  return all\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {NormalizedExtension} all\n *   Extension to merge into.\n * @param {Extension} extension\n *   Extension to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction syntaxExtension(all, extension) {\n  /** @type {keyof Extension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    /** @type {Record<string, unknown>} */\n    const left = maybe || (all[hook] = {})\n    /** @type {Record<string, unknown> | undefined} */\n    const right = extension[hook]\n    /** @type {string} */\n    let code\n\n    if (right) {\n      for (code in right) {\n        if (!hasOwnProperty.call(left, code)) left[code] = []\n        const value = right[code]\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code],\n          Array.isArray(value) ? value : value ? [value] : []\n        )\n      }\n    }\n  }\n}\n\n/**\n * Merge `list` into `existing` (both lists of constructs).\n * Mutates `existing`.\n *\n * @param {Array<unknown>} existing\n *   List of constructs to merge into.\n * @param {Array<unknown>} list\n *   List of constructs to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction constructs(existing, list) {\n  let index = -1\n  /** @type {Array<unknown>} */\n  const before = []\n\n  while (++index < list.length) {\n    // @ts-expect-error Looks like an object.\n    ;(list[index].add === 'after' ? existing : before).push(list[index])\n  }\n\n  splice(existing, 0, 0, before)\n}\n\n/**\n * Combine multiple HTML extensions into one.\n *\n * @param {ReadonlyArray<HtmlExtension>} htmlExtensions\n *   List of HTML extensions.\n * @returns {HtmlExtension}\n *   Single combined HTML extension.\n */\nexport function combineHtmlExtensions(htmlExtensions) {\n  /** @type {HtmlExtension} */\n  const handlers = {}\n  let index = -1\n\n  while (++index < htmlExtensions.length) {\n    htmlExtension(handlers, htmlExtensions[index])\n  }\n\n  return handlers\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {HtmlExtension} all\n *   Extension to merge into.\n * @param {HtmlExtension} extension\n *   Extension to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction htmlExtension(all, extension) {\n  /** @type {keyof HtmlExtension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    const left = maybe || (all[hook] = {})\n    const right = extension[hook]\n    /** @type {keyof Handles} */\n    let type\n\n    if (right) {\n      for (type in right) {\n        // @ts-expect-error assume document vs regular handler are managed correctly.\n        left[type] = right[type]\n      }\n    }\n  }\n}\n","/**\n * Turn the number (in string form as either hexa- or plain decimal) coming from\n * a numeric character reference into a character.\n *\n * Sort of like `String.fromCodePoint(Number.parseInt(value, base))`, but makes\n * non-characters and control characters safe.\n *\n * @param {string} value\n *   Value to decode.\n * @param {number} base\n *   Numeric base.\n * @returns {string}\n *   Character.\n */\nexport function decodeNumericCharacterReference(value, base) {\n  const code = Number.parseInt(value, base);\n  if (\n  // C0 except for HT, LF, FF, CR, space.\n  code < 9 || code === 11 || code > 13 && code < 32 ||\n  // Control character (DEL) of C0, and C1 controls.\n  code > 126 && code < 160 ||\n  // Lone high surrogates and low surrogates.\n  code > 55_295 && code < 57_344 ||\n  // Noncharacters.\n  code > 64_975 && code < 65_008 || /* eslint-disable no-bitwise */\n  (code & 65_535) === 65_535 || (code & 65_535) === 65_534 || /* eslint-enable no-bitwise */\n  // Out of range\n  code > 1_114_111) {\n    return \"\\uFFFD\";\n  }\n  return String.fromCodePoint(code);\n}","/**\n * Normalize an identifier (as found in references, definitions).\n *\n * Collapses markdown whitespace, trim, and then lower- and uppercase.\n *\n * Some characters are considered “uppercase”, such as U+03F4 (`ϴ`), but if their\n * lowercase counterpart (U+03B8 (`θ`)) is uppercased will result in a different\n * uppercase character (U+0398 (`Θ`)).\n * So, to get a canonical form, we perform both lower- and uppercase.\n *\n * Using uppercase last makes sure keys will never interact with default\n * prototypal values (such as `constructor`): nothing in the prototype of\n * `Object` is uppercase.\n *\n * @param {string} value\n *   Identifier to normalize.\n * @returns {string}\n *   Normalized identifier.\n */\nexport function normalizeIdentifier(value) {\n  return value\n  // Collapse markdown whitespace.\n  .replace(/[\\t\\n\\r ]+/g, \" \")\n  // Trim.\n  .replace(/^ | $/g, '')\n  // Some characters are considered “uppercase”, but if their lowercase\n  // counterpart is uppercased will result in a different uppercase\n  // character.\n  // Hence, to get that form, we perform both lower- and uppercase.\n  // Upper case makes sure keys will not interact with default prototypal\n  // methods: no method is uppercase.\n  .toLowerCase().toUpperCase();\n}","/**\n * @import {Code} from 'micromark-util-types'\n */\n\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlpha = regexCheck(/[A-Za-z]/);\n\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/);\n\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/);\n\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < 32 || code === 127)\n  );\n}\n\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiDigit = regexCheck(/\\d/);\n\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/);\n\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/);\n\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEnding(code) {\n  return code !== null && code < -2;\n}\n\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < 0 || code === 32);\n}\n\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownSpace(code) {\n  return code === -2 || code === -1 || code === 32;\n}\n\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodePunctuation = regexCheck(/\\p{P}|\\p{S}/u);\n\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodeWhitespace = regexCheck(/\\s/);\n\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n *   Expression.\n * @returns {(code: Code) => boolean}\n *   Check.\n */\nfunction regexCheck(regex) {\n  return check;\n\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code\n   *   Character code.\n   * @returns {boolean}\n   *   Whether the character code matches the bound regex.\n   */\n  function check(code) {\n    return code !== null && code > -1 && regex.test(String.fromCharCode(code));\n  }\n}","import { asciiAlphanumeric } from 'micromark-util-character';\nimport { encode } from 'micromark-util-encode';\n/**\n * Make a value safe for injection as a URL.\n *\n * This encodes unsafe characters with percent-encoding and skips already\n * encoded sequences (see `normalizeUri`).\n * Further unsafe characters are encoded as character references (see\n * `micromark-util-encode`).\n *\n * A regex of allowed protocols can be given, in which case the URL is\n * sanitized.\n * For example, `/^(https?|ircs?|mailto|xmpp)$/i` can be used for `a[href]`, or\n * `/^https?$/i` for `img[src]` (this is what `github.com` allows).\n * If the URL includes an unknown protocol (one not matched by `protocol`, such\n * as a dangerous example, `javascript:`), the value is ignored.\n *\n * @param {string | null | undefined} url\n *   URI to sanitize.\n * @param {RegExp | null | undefined} [protocol]\n *   Allowed protocols.\n * @returns {string}\n *   Sanitized URI.\n */\nexport function sanitizeUri(url, protocol) {\n  const value = encode(normalizeUri(url || ''));\n  if (!protocol) {\n    return value;\n  }\n  const colon = value.indexOf(':');\n  const questionMark = value.indexOf('?');\n  const numberSign = value.indexOf('#');\n  const slash = value.indexOf('/');\n  if (\n  // If there is no protocol, it’s relative.\n  colon < 0 ||\n  // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n  slash > -1 && colon > slash || questionMark > -1 && colon > questionMark || numberSign > -1 && colon > numberSign ||\n  // It is a protocol, it should be allowed.\n  protocol.test(value.slice(0, colon))) {\n    return value;\n  }\n  return '';\n}\n\n/**\n * Normalize a URL.\n *\n * Encode unsafe characters with percent-encoding, skipping already encoded\n * sequences.\n *\n * @param {string} value\n *   URI to normalize.\n * @returns {string}\n *   Normalized URI.\n */\nexport function normalizeUri(value) {\n  /** @type {Array<string>} */\n  const result = [];\n  let index = -1;\n  let start = 0;\n  let skip = 0;\n  while (++index < value.length) {\n    const code = value.charCodeAt(index);\n    /** @type {string} */\n    let replace = '';\n\n    // A correct percent encoded value.\n    if (code === 37 && asciiAlphanumeric(value.charCodeAt(index + 1)) && asciiAlphanumeric(value.charCodeAt(index + 2))) {\n      skip = 2;\n    }\n    // ASCII.\n    else if (code < 128) {\n      if (!/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(code))) {\n        replace = String.fromCharCode(code);\n      }\n    }\n    // Astral.\n    else if (code > 55_295 && code < 57_344) {\n      const next = value.charCodeAt(index + 1);\n\n      // A correct surrogate pair.\n      if (code < 56_320 && next > 56_319 && next < 57_344) {\n        replace = String.fromCharCode(code, next);\n        skip = 1;\n      }\n      // Lone surrogate.\n      else {\n        replace = \"\\uFFFD\";\n      }\n    }\n    // Unicode.\n    else {\n      replace = String.fromCharCode(code);\n    }\n    if (replace) {\n      result.push(value.slice(start, index), encodeURIComponent(replace));\n      start = index + skip + 1;\n      replace = '';\n    }\n    if (skip) {\n      index += skip;\n      skip = 0;\n    }\n  }\n  return result.join('') + value.slice(start);\n}","/**\n * @import {Effects, State, TokenType} from 'micromark-util-types'\n */\n\nimport { markdownSpace } from 'micromark-util-character';\n\n// To do: implement `spaceOrTab`, `spaceOrTabMinMax`, `spaceOrTabWithOptions`.\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   spaces in markdown are often optional, in which case this factory can be\n *     used and `ok` will be switched to whether spaces were found or not\n * *   one line ending or space can be detected with `markdownSpace(code)` right\n *     before using `factorySpace`\n *\n * ###### Examples\n *\n * Where `␉` represents a tab (plus how much it expands) and `␠` represents a\n * single space.\n *\n * ```markdown\n * ␉\n * ␠␠␠␠\n * ␉␠\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {TokenType} type\n *   Type (`' \\t'`).\n * @param {number | undefined} [max=Infinity]\n *   Max (exclusive).\n * @returns {State}\n *   Start state.\n */\nexport function factorySpace(effects, ok, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY;\n  let size = 0;\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownSpace(code)) {\n      effects.enter(type);\n      return prefix(code);\n    }\n    return ok(code);\n  }\n\n  /** @type {State} */\n  function prefix(code) {\n    if (markdownSpace(code) && size++ < limit) {\n      effects.consume(code);\n      return prefix;\n    }\n    effects.exit(type);\n    return ok(code);\n  }\n}","/**\n * @import {\n *   InitialConstruct,\n *   Initializer,\n *   State,\n *   TokenizeContext,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\n/** @type {InitialConstruct} */\nexport const content = {\n  tokenize: initializeContent\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Initializer}\n *   Content.\n */\nfunction initializeContent(effects) {\n  const contentStart = effects.attempt(this.parser.constructs.contentInitial, afterContentStartConstruct, paragraphInitial);\n  /** @type {Token} */\n  let previous;\n  return contentStart;\n\n  /** @type {State} */\n  function afterContentStartConstruct(code) {\n    if (code === null) {\n      effects.consume(code);\n      return;\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, contentStart, \"linePrefix\");\n  }\n\n  /** @type {State} */\n  function paragraphInitial(code) {\n    effects.enter(\"paragraph\");\n    return lineStart(code);\n  }\n\n  /** @type {State} */\n  function lineStart(code) {\n    const token = effects.enter(\"chunkText\", {\n      contentType: \"text\",\n      previous\n    });\n    if (previous) {\n      previous.next = token;\n    }\n    previous = token;\n    return data(code);\n  }\n\n  /** @type {State} */\n  function data(code) {\n    if (code === null) {\n      effects.exit(\"chunkText\");\n      effects.exit(\"paragraph\");\n      effects.consume(code);\n      return;\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code);\n      effects.exit(\"chunkText\");\n      return lineStart;\n    }\n\n    // Data.\n    effects.consume(code);\n    return data;\n  }\n}","/**\n * @import {\n *   Construct,\n *   ContainerState,\n *   InitialConstruct,\n *   Initializer,\n *   Point,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\n/**\n * @typedef {[Construct, ContainerState]} StackItem\n *   Construct and its state.\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\nimport { splice } from 'micromark-util-chunked';\n/** @type {InitialConstruct} */\nexport const document = {\n  tokenize: initializeDocument\n};\n\n/** @type {Construct} */\nconst containerConstruct = {\n  tokenize: tokenizeContainer\n};\n\n/**\n * @this {TokenizeContext}\n *   Self.\n * @type {Initializer}\n *   Initializer.\n */\nfunction initializeDocument(effects) {\n  const self = this;\n  /** @type {Array<StackItem>} */\n  const stack = [];\n  let continued = 0;\n  /** @type {TokenizeContext | undefined} */\n  let childFlow;\n  /** @type {Token | undefined} */\n  let childToken;\n  /** @type {number} */\n  let lineStartOffset;\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    // First we iterate through the open blocks, starting with the root\n    // document, and descending through last children down to the last open\n    // block.\n    // Each block imposes a condition that the line must satisfy if the block is\n    // to remain open.\n    // For example, a block quote requires a `>` character.\n    // A paragraph requires a non-blank line.\n    // In this phase we may match all or just some of the open blocks.\n    // But we cannot close unmatched blocks yet, because we may have a lazy\n    // continuation line.\n    if (continued < stack.length) {\n      const item = stack[continued];\n      self.containerState = item[1];\n      return effects.attempt(item[0].continuation, documentContinue, checkNewContainers)(code);\n    }\n\n    // Done.\n    return checkNewContainers(code);\n  }\n\n  /** @type {State} */\n  function documentContinue(code) {\n    continued++;\n\n    // Note: this field is called `_closeFlow` but it also closes containers.\n    // Perhaps a good idea to rename it but it’s already used in the wild by\n    // extensions.\n    if (self.containerState._closeFlow) {\n      self.containerState._closeFlow = undefined;\n      if (childFlow) {\n        closeFlow();\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when dealing with lazy lines in `writeToChild`.\n      const indexBeforeExits = self.events.length;\n      let indexBeforeFlow = indexBeforeExits;\n      /** @type {Point | undefined} */\n      let point;\n\n      // Find the flow chunk.\n      while (indexBeforeFlow--) {\n        if (self.events[indexBeforeFlow][0] === 'exit' && self.events[indexBeforeFlow][1].type === \"chunkFlow\") {\n          point = self.events[indexBeforeFlow][1].end;\n          break;\n        }\n      }\n      exitContainers(continued);\n\n      // Fix positions.\n      let index = indexBeforeExits;\n      while (index < self.events.length) {\n        self.events[index][1].end = {\n          ...point\n        };\n        index++;\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(self.events, indexBeforeFlow + 1, 0, self.events.slice(indexBeforeExits));\n\n      // Discard the duplicate exits.\n      self.events.length = index;\n      return checkNewContainers(code);\n    }\n    return start(code);\n  }\n\n  /** @type {State} */\n  function checkNewContainers(code) {\n    // Next, after consuming the continuation markers for existing blocks, we\n    // look for new block starts (e.g. `>` for a block quote).\n    // If we encounter a new block start, we close any blocks unmatched in\n    // step 1 before creating the new block as a child of the last matched\n    // block.\n    if (continued === stack.length) {\n      // No need to `check` whether there’s a container, of `exitContainers`\n      // would be moot.\n      // We can instead immediately `attempt` to parse one.\n      if (!childFlow) {\n        return documentContinued(code);\n      }\n\n      // If we have concrete content, such as block HTML or fenced code,\n      // we can’t have containers “pierce” into them, so we can immediately\n      // start.\n      if (childFlow.currentConstruct && childFlow.currentConstruct.concrete) {\n        return flowStart(code);\n      }\n\n      // If we do have flow, it could still be a blank line,\n      // but we’d be interrupting it w/ a new container if there’s a current\n      // construct.\n      // To do: next major: remove `_gfmTableDynamicInterruptHack` (no longer\n      // needed in micromark-extension-gfm-table@1.0.6).\n      self.interrupt = Boolean(childFlow.currentConstruct && !childFlow._gfmTableDynamicInterruptHack);\n    }\n\n    // Check if there is a new container.\n    self.containerState = {};\n    return effects.check(containerConstruct, thereIsANewContainer, thereIsNoNewContainer)(code);\n  }\n\n  /** @type {State} */\n  function thereIsANewContainer(code) {\n    if (childFlow) closeFlow();\n    exitContainers(continued);\n    return documentContinued(code);\n  }\n\n  /** @type {State} */\n  function thereIsNoNewContainer(code) {\n    self.parser.lazy[self.now().line] = continued !== stack.length;\n    lineStartOffset = self.now().offset;\n    return flowStart(code);\n  }\n\n  /** @type {State} */\n  function documentContinued(code) {\n    // Try new containers.\n    self.containerState = {};\n    return effects.attempt(containerConstruct, containerContinue, flowStart)(code);\n  }\n\n  /** @type {State} */\n  function containerContinue(code) {\n    continued++;\n    stack.push([self.currentConstruct, self.containerState]);\n    // Try another.\n    return documentContinued(code);\n  }\n\n  /** @type {State} */\n  function flowStart(code) {\n    if (code === null) {\n      if (childFlow) closeFlow();\n      exitContainers(0);\n      effects.consume(code);\n      return;\n    }\n    childFlow = childFlow || self.parser.flow(self.now());\n    effects.enter(\"chunkFlow\", {\n      _tokenizer: childFlow,\n      contentType: \"flow\",\n      previous: childToken\n    });\n    return flowContinue(code);\n  }\n\n  /** @type {State} */\n  function flowContinue(code) {\n    if (code === null) {\n      writeToChild(effects.exit(\"chunkFlow\"), true);\n      exitContainers(0);\n      effects.consume(code);\n      return;\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code);\n      writeToChild(effects.exit(\"chunkFlow\"));\n      // Get ready for the next line.\n      continued = 0;\n      self.interrupt = undefined;\n      return start;\n    }\n    effects.consume(code);\n    return flowContinue;\n  }\n\n  /**\n   * @param {Token} token\n   *   Token.\n   * @param {boolean | undefined} [endOfFile]\n   *   Whether the token is at the end of the file (default: `false`).\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function writeToChild(token, endOfFile) {\n    const stream = self.sliceStream(token);\n    if (endOfFile) stream.push(null);\n    token.previous = childToken;\n    if (childToken) childToken.next = token;\n    childToken = token;\n    childFlow.defineSkip(token.start);\n    childFlow.write(stream);\n\n    // Alright, so we just added a lazy line:\n    //\n    // ```markdown\n    // > a\n    // b.\n    //\n    // Or:\n    //\n    // > ~~~c\n    // d\n    //\n    // Or:\n    //\n    // > | e |\n    // f\n    // ```\n    //\n    // The construct in the second example (fenced code) does not accept lazy\n    // lines, so it marked itself as done at the end of its first line, and\n    // then the content construct parses `d`.\n    // Most constructs in markdown match on the first line: if the first line\n    // forms a construct, a non-lazy line can’t “unmake” it.\n    //\n    // The construct in the third example is potentially a GFM table, and\n    // those are *weird*.\n    // It *could* be a table, from the first line, if the following line\n    // matches a condition.\n    // In this case, that second line is lazy, which “unmakes” the first line\n    // and turns the whole into one content block.\n    //\n    // We’ve now parsed the non-lazy and the lazy line, and can figure out\n    // whether the lazy line started a new flow block.\n    // If it did, we exit the current containers between the two flow blocks.\n    if (self.parser.lazy[token.start.line]) {\n      let index = childFlow.events.length;\n      while (index--) {\n        if (\n        // The token starts before the line ending…\n        childFlow.events[index][1].start.offset < lineStartOffset && (\n        // …and either is not ended yet…\n        !childFlow.events[index][1].end ||\n        // …or ends after it.\n        childFlow.events[index][1].end.offset > lineStartOffset)) {\n          // Exit: there’s still something open, which means it’s a lazy line\n          // part of something.\n          return;\n        }\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when closing flow in `documentContinue`.\n      const indexBeforeExits = self.events.length;\n      let indexBeforeFlow = indexBeforeExits;\n      /** @type {boolean | undefined} */\n      let seen;\n      /** @type {Point | undefined} */\n      let point;\n\n      // Find the previous chunk (the one before the lazy line).\n      while (indexBeforeFlow--) {\n        if (self.events[indexBeforeFlow][0] === 'exit' && self.events[indexBeforeFlow][1].type === \"chunkFlow\") {\n          if (seen) {\n            point = self.events[indexBeforeFlow][1].end;\n            break;\n          }\n          seen = true;\n        }\n      }\n      exitContainers(continued);\n\n      // Fix positions.\n      index = indexBeforeExits;\n      while (index < self.events.length) {\n        self.events[index][1].end = {\n          ...point\n        };\n        index++;\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(self.events, indexBeforeFlow + 1, 0, self.events.slice(indexBeforeExits));\n\n      // Discard the duplicate exits.\n      self.events.length = index;\n    }\n  }\n\n  /**\n   * @param {number} size\n   *   Size.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function exitContainers(size) {\n    let index = stack.length;\n\n    // Exit open containers.\n    while (index-- > size) {\n      const entry = stack[index];\n      self.containerState = entry[1];\n      entry[0].exit.call(self, effects);\n    }\n    stack.length = size;\n  }\n  function closeFlow() {\n    childFlow.write([null]);\n    childToken = undefined;\n    childFlow = undefined;\n    self.containerState._closeFlow = undefined;\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n *   Tokenizer.\n */\nfunction tokenizeContainer(effects, ok, nok) {\n  // Always populated by defaults.\n\n  return factorySpace(effects, effects.attempt(this.parser.constructs.document, ok, nok), \"linePrefix\", this.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4);\n}","/**\n * @import {Code} from 'micromark-util-types'\n */\n\nimport { markdownLineEndingOrSpace, unicodePunctuation, unicodeWhitespace } from 'micromark-util-character';\n/**\n * Classify whether a code represents whitespace, punctuation, or something\n * else.\n *\n * Used for attention (emphasis, strong), whose sequences can open or close\n * based on the class of surrounding characters.\n *\n * > 👉 **Note**: eof (`null`) is seen as whitespace.\n *\n * @param {Code} code\n *   Code.\n * @returns {typeof constants.characterGroupWhitespace | typeof constants.characterGroupPunctuation | undefined}\n *   Group.\n */\nexport function classifyCharacter(code) {\n  if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n    return 1;\n  }\n  if (unicodePunctuation(code)) {\n    return 2;\n  }\n}","/**\n * @import {Event, Resolver, TokenizeContext} from 'micromark-util-types'\n */\n\n/**\n * Call all `resolveAll`s.\n *\n * @param {ReadonlyArray<{resolveAll?: Resolver | undefined}>} constructs\n *   List of constructs, optionally with `resolveAll`s.\n * @param {Array<Event>} events\n *   List of events.\n * @param {TokenizeContext} context\n *   Context used by `tokenize`.\n * @returns {Array<Event>}\n *   Changed events.\n */\nexport function resolveAll(constructs, events, context) {\n  /** @type {Array<Resolver>} */\n  const called = []\n  let index = -1\n\n  while (++index < constructs.length) {\n    const resolve = constructs[index].resolveAll\n\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context)\n      called.push(resolve)\n    }\n  }\n\n  return events\n}\n","/**\n * @import {\n *   Code,\n *   Construct,\n *   Event,\n *   Point,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { push, splice } from 'micromark-util-chunked';\nimport { classifyCharacter } from 'micromark-util-classify-character';\nimport { resolveAll } from 'micromark-util-resolve-all';\n/** @type {Construct} */\nexport const attention = {\n  name: 'attention',\n  resolveAll: resolveAllAttention,\n  tokenize: tokenizeAttention\n};\n\n/**\n * Take all events and resolve attention to emphasis or strong.\n *\n * @type {Resolver}\n */\n// eslint-disable-next-line complexity\nfunction resolveAllAttention(events, context) {\n  let index = -1;\n  /** @type {number} */\n  let open;\n  /** @type {Token} */\n  let group;\n  /** @type {Token} */\n  let text;\n  /** @type {Token} */\n  let openingSequence;\n  /** @type {Token} */\n  let closingSequence;\n  /** @type {number} */\n  let use;\n  /** @type {Array<Event>} */\n  let nextEvents;\n  /** @type {number} */\n  let offset;\n\n  // Walk through all events.\n  //\n  // Note: performance of this is fine on an mb of normal markdown, but it’s\n  // a bottleneck for malicious stuff.\n  while (++index < events.length) {\n    // Find a token that can close.\n    if (events[index][0] === 'enter' && events[index][1].type === 'attentionSequence' && events[index][1]._close) {\n      open = index;\n\n      // Now walk back to find an opener.\n      while (open--) {\n        // Find a token that can open the closer.\n        if (events[open][0] === 'exit' && events[open][1].type === 'attentionSequence' && events[open][1]._open &&\n        // If the markers are the same:\n        context.sliceSerialize(events[open][1]).charCodeAt(0) === context.sliceSerialize(events[index][1]).charCodeAt(0)) {\n          // If the opening can close or the closing can open,\n          // and the close size *is not* a multiple of three,\n          // but the sum of the opening and closing size *is* multiple of three,\n          // then don’t match.\n          if ((events[open][1]._close || events[index][1]._open) && (events[index][1].end.offset - events[index][1].start.offset) % 3 && !((events[open][1].end.offset - events[open][1].start.offset + events[index][1].end.offset - events[index][1].start.offset) % 3)) {\n            continue;\n          }\n\n          // Number of markers to use from the sequence.\n          use = events[open][1].end.offset - events[open][1].start.offset > 1 && events[index][1].end.offset - events[index][1].start.offset > 1 ? 2 : 1;\n          const start = {\n            ...events[open][1].end\n          };\n          const end = {\n            ...events[index][1].start\n          };\n          movePoint(start, -use);\n          movePoint(end, use);\n          openingSequence = {\n            type: use > 1 ? \"strongSequence\" : \"emphasisSequence\",\n            start,\n            end: {\n              ...events[open][1].end\n            }\n          };\n          closingSequence = {\n            type: use > 1 ? \"strongSequence\" : \"emphasisSequence\",\n            start: {\n              ...events[index][1].start\n            },\n            end\n          };\n          text = {\n            type: use > 1 ? \"strongText\" : \"emphasisText\",\n            start: {\n              ...events[open][1].end\n            },\n            end: {\n              ...events[index][1].start\n            }\n          };\n          group = {\n            type: use > 1 ? \"strong\" : \"emphasis\",\n            start: {\n              ...openingSequence.start\n            },\n            end: {\n              ...closingSequence.end\n            }\n          };\n          events[open][1].end = {\n            ...openingSequence.start\n          };\n          events[index][1].start = {\n            ...closingSequence.end\n          };\n          nextEvents = [];\n\n          // If there are more markers in the opening, add them before.\n          if (events[open][1].end.offset - events[open][1].start.offset) {\n            nextEvents = push(nextEvents, [['enter', events[open][1], context], ['exit', events[open][1], context]]);\n          }\n\n          // Opening.\n          nextEvents = push(nextEvents, [['enter', group, context], ['enter', openingSequence, context], ['exit', openingSequence, context], ['enter', text, context]]);\n\n          // Always populated by defaults.\n\n          // Between.\n          nextEvents = push(nextEvents, resolveAll(context.parser.constructs.insideSpan.null, events.slice(open + 1, index), context));\n\n          // Closing.\n          nextEvents = push(nextEvents, [['exit', text, context], ['enter', closingSequence, context], ['exit', closingSequence, context], ['exit', group, context]]);\n\n          // If there are more markers in the closing, add them after.\n          if (events[index][1].end.offset - events[index][1].start.offset) {\n            offset = 2;\n            nextEvents = push(nextEvents, [['enter', events[index][1], context], ['exit', events[index][1], context]]);\n          } else {\n            offset = 0;\n          }\n          splice(events, open - 1, index - open + 3, nextEvents);\n          index = open + nextEvents.length - offset - 2;\n          break;\n        }\n      }\n    }\n  }\n\n  // Remove remaining sequences.\n  index = -1;\n  while (++index < events.length) {\n    if (events[index][1].type === 'attentionSequence') {\n      events[index][1].type = 'data';\n    }\n  }\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeAttention(effects, ok) {\n  const attentionMarkers = this.parser.constructs.attentionMarkers.null;\n  const previous = this.previous;\n  const before = classifyCharacter(previous);\n\n  /** @type {NonNullable<Code>} */\n  let marker;\n  return start;\n\n  /**\n   * Before a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    marker = code;\n    effects.enter('attentionSequence');\n    return inside(code);\n  }\n\n  /**\n   * In a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code);\n      return inside;\n    }\n    const token = effects.exit('attentionSequence');\n\n    // To do: next major: move this to resolver, just like `markdown-rs`.\n    const after = classifyCharacter(code);\n\n    // Always populated by defaults.\n\n    const open = !after || after === 2 && before || attentionMarkers.includes(code);\n    const close = !before || before === 2 && after || attentionMarkers.includes(previous);\n    token._open = Boolean(marker === 42 ? open : open && (before || !close));\n    token._close = Boolean(marker === 42 ? close : close && (after || !open));\n    return ok(code);\n  }\n}\n\n/**\n * Move a point a bit.\n *\n * Note: `move` only works inside lines! It’s not possible to move past other\n * chunks (replacement characters, tabs, or line endings).\n *\n * @param {Point} point\n *   Point.\n * @param {number} offset\n *   Amount to move.\n * @returns {undefined}\n *   Nothing.\n */\nfunction movePoint(point, offset) {\n  point.column += offset;\n  point.offset += offset;\n  point._bufferIndex += offset;\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { asciiAlphanumeric, asciiAlpha, asciiAtext, asciiControl } from 'micromark-util-character';\n/** @type {Construct} */\nexport const autolink = {\n  name: 'autolink',\n  tokenize: tokenizeAutolink\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeAutolink(effects, ok, nok) {\n  let size = 0;\n  return start;\n\n  /**\n   * Start of an autolink.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *      ^\n   * > | a<user@example.com>b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"autolink\");\n    effects.enter(\"autolinkMarker\");\n    effects.consume(code);\n    effects.exit(\"autolinkMarker\");\n    effects.enter(\"autolinkProtocol\");\n    return open;\n  }\n\n  /**\n   * After `<`, at protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *       ^\n   * > | a<user@example.com>b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return schemeOrEmailAtext;\n    }\n    if (code === 64) {\n      return nok(code);\n    }\n    return emailAtext(code);\n  }\n\n  /**\n   * At second byte of protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeOrEmailAtext(code) {\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) {\n      // Count the previous alphabetical from `open` too.\n      size = 1;\n      return schemeInsideOrEmailAtext(code);\n    }\n    return emailAtext(code);\n  }\n\n  /**\n   * In ambiguous protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeInsideOrEmailAtext(code) {\n    if (code === 58) {\n      effects.consume(code);\n      size = 0;\n      return urlInside;\n    }\n\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if ((code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) && size++ < 32) {\n      effects.consume(code);\n      return schemeInsideOrEmailAtext;\n    }\n    size = 0;\n    return emailAtext(code);\n  }\n\n  /**\n   * After protocol, in URL.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function urlInside(code) {\n    if (code === 62) {\n      effects.exit(\"autolinkProtocol\");\n      effects.enter(\"autolinkMarker\");\n      effects.consume(code);\n      effects.exit(\"autolinkMarker\");\n      effects.exit(\"autolink\");\n      return ok;\n    }\n\n    // ASCII control, space, or `<`.\n    if (code === null || code === 32 || code === 60 || asciiControl(code)) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return urlInside;\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtext(code) {\n    if (code === 64) {\n      effects.consume(code);\n      return emailAtSignOrDot;\n    }\n    if (asciiAtext(code)) {\n      effects.consume(code);\n      return emailAtext;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In label, after at-sign or dot.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                 ^       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtSignOrDot(code) {\n    return asciiAlphanumeric(code) ? emailLabel(code) : nok(code);\n  }\n\n  /**\n   * In label, where `.` and `>` are allowed.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailLabel(code) {\n    if (code === 46) {\n      effects.consume(code);\n      size = 0;\n      return emailAtSignOrDot;\n    }\n    if (code === 62) {\n      // Exit, then change the token type.\n      effects.exit(\"autolinkProtocol\").type = \"autolinkEmail\";\n      effects.enter(\"autolinkMarker\");\n      effects.consume(code);\n      effects.exit(\"autolinkMarker\");\n      effects.exit(\"autolink\");\n      return ok;\n    }\n    return emailValue(code);\n  }\n\n  /**\n   * In label, where `.` and `>` are *not* allowed.\n   *\n   * Though, this is also used in `emailLabel` to parse other values.\n   *\n   * ```markdown\n   * > | a<user.name@ex-ample.com>b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailValue(code) {\n    // ASCII alphanumeric or `-`.\n    if ((code === 45 || asciiAlphanumeric(code)) && size++ < 63) {\n      const next = code === 45 ? emailValue : emailLabel;\n      effects.consume(code);\n      return next;\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const blankLine = {\n  partial: true,\n  tokenize: tokenizeBlankLine\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLine(effects, ok, nok) {\n  return start;\n\n  /**\n   * Start of blank line.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *     ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    return markdownSpace(code) ? factorySpace(effects, after, \"linePrefix\")(code) : after(code);\n  }\n\n  /**\n   * At eof/eol, after optional whitespace.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *       ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   Exiter,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const blockQuote = {\n  continuation: {\n    tokenize: tokenizeBlockQuoteContinuation\n  },\n  exit,\n  name: 'blockQuote',\n  tokenize: tokenizeBlockQuoteStart\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteStart(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   * Start of block quote.\n   *\n   * ```markdown\n   * > | > a\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 62) {\n      const state = self.containerState;\n      if (!state.open) {\n        effects.enter(\"blockQuote\", {\n          _container: true\n        });\n        state.open = true;\n      }\n      effects.enter(\"blockQuotePrefix\");\n      effects.enter(\"blockQuoteMarker\");\n      effects.consume(code);\n      effects.exit(\"blockQuoteMarker\");\n      return after;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `>`, before optional whitespace.\n   *\n   * ```markdown\n   * > | > a\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (markdownSpace(code)) {\n      effects.enter(\"blockQuotePrefixWhitespace\");\n      effects.consume(code);\n      effects.exit(\"blockQuotePrefixWhitespace\");\n      effects.exit(\"blockQuotePrefix\");\n      return ok;\n    }\n    effects.exit(\"blockQuotePrefix\");\n    return ok(code);\n  }\n}\n\n/**\n * Start of block quote continuation.\n *\n * ```markdown\n *   | > a\n * > | > b\n *     ^\n * ```\n *\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteContinuation(effects, ok, nok) {\n  const self = this;\n  return contStart;\n\n  /**\n   * Start of block quote continuation.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contStart(code) {\n    if (markdownSpace(code)) {\n      // Always populated by defaults.\n\n      return factorySpace(effects, contBefore, \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code);\n    }\n    return contBefore(code);\n  }\n\n  /**\n   * At `>`, after optional whitespace.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contBefore(code) {\n    return effects.attempt(blockQuote, ok, nok)(code);\n  }\n}\n\n/** @type {Exiter} */\nfunction exit(effects) {\n  effects.exit(\"blockQuote\");\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { asciiPunctuation } from 'micromark-util-character';\n/** @type {Construct} */\nexport const characterEscape = {\n  name: 'characterEscape',\n  tokenize: tokenizeCharacterEscape\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterEscape(effects, ok, nok) {\n  return start;\n\n  /**\n   * Start of character escape.\n   *\n   * ```markdown\n   * > | a\\*b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"characterEscape\");\n    effects.enter(\"escapeMarker\");\n    effects.consume(code);\n    effects.exit(\"escapeMarker\");\n    return inside;\n  }\n\n  /**\n   * After `\\`, at punctuation.\n   *\n   * ```markdown\n   * > | a\\*b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // ASCII punctuation.\n    if (asciiPunctuation(code)) {\n      effects.enter(\"characterEscapeValue\");\n      effects.consume(code);\n      effects.exit(\"characterEscapeValue\");\n      effects.exit(\"characterEscape\");\n      return ok;\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { decodeNamedCharacterReference } from 'decode-named-character-reference';\nimport { asciiAlphanumeric, asciiDigit, asciiHexDigit } from 'micromark-util-character';\n/** @type {Construct} */\nexport const characterReference = {\n  name: 'characterReference',\n  tokenize: tokenizeCharacterReference\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterReference(effects, ok, nok) {\n  const self = this;\n  let size = 0;\n  /** @type {number} */\n  let max;\n  /** @type {(code: Code) => boolean} */\n  let test;\n  return start;\n\n  /**\n   * Start of character reference.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *      ^\n   * > | a&#123;b\n   *      ^\n   * > | a&#x9;b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"characterReference\");\n    effects.enter(\"characterReferenceMarker\");\n    effects.consume(code);\n    effects.exit(\"characterReferenceMarker\");\n    return open;\n  }\n\n  /**\n   * After `&`, at `#` for numeric references or alphanumeric for named\n   * references.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^\n   * > | a&#123;b\n   *       ^\n   * > | a&#x9;b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 35) {\n      effects.enter(\"characterReferenceMarkerNumeric\");\n      effects.consume(code);\n      effects.exit(\"characterReferenceMarkerNumeric\");\n      return numeric;\n    }\n    effects.enter(\"characterReferenceValue\");\n    max = 31;\n    test = asciiAlphanumeric;\n    return value(code);\n  }\n\n  /**\n   * After `#`, at `x` for hexadecimals or digit for decimals.\n   *\n   * ```markdown\n   * > | a&#123;b\n   *        ^\n   * > | a&#x9;b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function numeric(code) {\n    if (code === 88 || code === 120) {\n      effects.enter(\"characterReferenceMarkerHexadecimal\");\n      effects.consume(code);\n      effects.exit(\"characterReferenceMarkerHexadecimal\");\n      effects.enter(\"characterReferenceValue\");\n      max = 6;\n      test = asciiHexDigit;\n      return value;\n    }\n    effects.enter(\"characterReferenceValue\");\n    max = 7;\n    test = asciiDigit;\n    return value(code);\n  }\n\n  /**\n   * After markers (`&#x`, `&#`, or `&`), in value, before `;`.\n   *\n   * The character reference kind defines what and how many characters are\n   * allowed.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^^^\n   * > | a&#123;b\n   *        ^^^\n   * > | a&#x9;b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function value(code) {\n    if (code === 59 && size) {\n      const token = effects.exit(\"characterReferenceValue\");\n      if (test === asciiAlphanumeric && !decodeNamedCharacterReference(self.sliceSerialize(token))) {\n        return nok(code);\n      }\n\n      // To do: `markdown-rs` uses a different name:\n      // `CharacterReferenceMarkerSemi`.\n      effects.enter(\"characterReferenceMarker\");\n      effects.consume(code);\n      effects.exit(\"characterReferenceMarker\");\n      effects.exit(\"characterReference\");\n      return ok;\n    }\n    if (test(code) && size++ < max) {\n      effects.consume(code);\n      return value;\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nconst nonLazyContinuation = {\n  partial: true,\n  tokenize: tokenizeNonLazyContinuation\n};\n\n/** @type {Construct} */\nexport const codeFenced = {\n  concrete: true,\n  name: 'codeFenced',\n  tokenize: tokenizeCodeFenced\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeCodeFenced(effects, ok, nok) {\n  const self = this;\n  /** @type {Construct} */\n  const closeStart = {\n    partial: true,\n    tokenize: tokenizeCloseStart\n  };\n  let initialPrefix = 0;\n  let sizeOpen = 0;\n  /** @type {NonNullable<Code>} */\n  let marker;\n  return start;\n\n  /**\n   * Start of code.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse whitespace like `markdown-rs`.\n    return beforeSequenceOpen(code);\n  }\n\n  /**\n   * In opening fence, after prefix, at sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeSequenceOpen(code) {\n    const tail = self.events[self.events.length - 1];\n    initialPrefix = tail && tail[1].type === \"linePrefix\" ? tail[2].sliceSerialize(tail[1], true).length : 0;\n    marker = code;\n    effects.enter(\"codeFenced\");\n    effects.enter(\"codeFencedFence\");\n    effects.enter(\"codeFencedFenceSequence\");\n    return sequenceOpen(code);\n  }\n\n  /**\n   * In opening fence sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *      ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === marker) {\n      sizeOpen++;\n      effects.consume(code);\n      return sequenceOpen;\n    }\n    if (sizeOpen < 3) {\n      return nok(code);\n    }\n    effects.exit(\"codeFencedFenceSequence\");\n    return markdownSpace(code) ? factorySpace(effects, infoBefore, \"whitespace\")(code) : infoBefore(code);\n  }\n\n  /**\n   * In opening fence, after the sequence (and optional whitespace), before info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function infoBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"codeFencedFence\");\n      return self.interrupt ? ok(code) : effects.check(nonLazyContinuation, atNonLazyBreak, after)(code);\n    }\n    effects.enter(\"codeFencedFenceInfo\");\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return info(code);\n  }\n\n  /**\n   * In info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function info(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceInfo\");\n      return infoBefore(code);\n    }\n    if (markdownSpace(code)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceInfo\");\n      return factorySpace(effects, metaBefore, \"whitespace\")(code);\n    }\n    if (code === 96 && code === marker) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return info;\n  }\n\n  /**\n   * In opening fence, after info and whitespace, before meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function metaBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return infoBefore(code);\n    }\n    effects.enter(\"codeFencedFenceMeta\");\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return meta(code);\n  }\n\n  /**\n   * In meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function meta(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceMeta\");\n      return infoBefore(code);\n    }\n    if (code === 96 && code === marker) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return meta;\n  }\n\n  /**\n   * At eol/eof in code, before a non-lazy closing fence or content.\n   *\n   * ```markdown\n   * > | ~~~js\n   *          ^\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function atNonLazyBreak(code) {\n    return effects.attempt(closeStart, after, contentBefore)(code);\n  }\n\n  /**\n   * Before code content, not a closing fence, at eol.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentBefore(code) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return contentStart;\n  }\n\n  /**\n   * Before code content, not a closing fence.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentStart(code) {\n    return initialPrefix > 0 && markdownSpace(code) ? factorySpace(effects, beforeContentChunk, \"linePrefix\", initialPrefix + 1)(code) : beforeContentChunk(code);\n  }\n\n  /**\n   * Before code content, after optional prefix.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeContentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return effects.check(nonLazyContinuation, atNonLazyBreak, after)(code);\n    }\n    effects.enter(\"codeFlowValue\");\n    return contentChunk(code);\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^^^^^^^^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"codeFlowValue\");\n      return beforeContentChunk(code);\n    }\n    effects.consume(code);\n    return contentChunk;\n  }\n\n  /**\n   * After code.\n   *\n   * ```markdown\n   *   | ~~~js\n   *   | alert(1)\n   * > | ~~~\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    effects.exit(\"codeFenced\");\n    return ok(code);\n  }\n\n  /**\n   * @this {TokenizeContext}\n   *   Context.\n   * @type {Tokenizer}\n   */\n  function tokenizeCloseStart(effects, ok, nok) {\n    let size = 0;\n    return startBefore;\n\n    /**\n     *\n     *\n     * @type {State}\n     */\n    function startBefore(code) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return start;\n    }\n\n    /**\n     * Before closing fence, at optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function start(code) {\n      // Always populated by defaults.\n\n      // To do: `enter` here or in next state?\n      effects.enter(\"codeFencedFence\");\n      return markdownSpace(code) ? factorySpace(effects, beforeSequenceClose, \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code) : beforeSequenceClose(code);\n    }\n\n    /**\n     * In closing fence, after optional whitespace, at sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function beforeSequenceClose(code) {\n      if (code === marker) {\n        effects.enter(\"codeFencedFenceSequence\");\n        return sequenceClose(code);\n      }\n      return nok(code);\n    }\n\n    /**\n     * In closing fence sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceClose(code) {\n      if (code === marker) {\n        size++;\n        effects.consume(code);\n        return sequenceClose;\n      }\n      if (size >= sizeOpen) {\n        effects.exit(\"codeFencedFenceSequence\");\n        return markdownSpace(code) ? factorySpace(effects, sequenceCloseAfter, \"whitespace\")(code) : sequenceCloseAfter(code);\n      }\n      return nok(code);\n    }\n\n    /**\n     * After closing fence sequence, after optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *        ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceCloseAfter(code) {\n      if (code === null || markdownLineEnding(code)) {\n        effects.exit(\"codeFencedFence\");\n        return ok(code);\n      }\n      return nok(code);\n    }\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuation(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === null) {\n      return nok(code);\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return lineStart;\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function lineStart(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const codeIndented = {\n  name: 'codeIndented',\n  tokenize: tokenizeCodeIndented\n};\n\n/** @type {Construct} */\nconst furtherStart = {\n  partial: true,\n  tokenize: tokenizeFurtherStart\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeCodeIndented(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   * Start of code (indented).\n   *\n   * > **Parsing note**: it is not needed to check if this first line is a\n   * > filled line (that it has a non-whitespace character), because blank lines\n   * > are parsed already, so we never run into that.\n   *\n   * ```markdown\n   * > |     aaa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: manually check if interrupting like `markdown-rs`.\n\n    effects.enter(\"codeIndented\");\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, \"linePrefix\", 4 + 1)(code);\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4 ? atBreak(code) : nok(code);\n  }\n\n  /**\n   * At a break.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === null) {\n      return after(code);\n    }\n    if (markdownLineEnding(code)) {\n      return effects.attempt(furtherStart, atBreak, after)(code);\n    }\n    effects.enter(\"codeFlowValue\");\n    return inside(code);\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"codeFlowValue\");\n      return atBreak(code);\n    }\n    effects.consume(code);\n    return inside;\n  }\n\n  /** @type {State} */\n  function after(code) {\n    effects.exit(\"codeIndented\");\n    // To do: allow interrupting like `markdown-rs`.\n    // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    return ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeFurtherStart(effects, ok, nok) {\n  const self = this;\n  return furtherStart;\n\n  /**\n   * At eol, trying to parse another indent.\n   *\n   * ```markdown\n   * > |     aaa\n   *            ^\n   *   |     bbb\n   * ```\n   *\n   * @type {State}\n   */\n  function furtherStart(code) {\n    // To do: improve `lazy` / `pierce` handling.\n    // If this is a lazy line, it can’t be code.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code);\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return furtherStart;\n    }\n\n    // To do: the code here in `micromark-js` is a bit different from\n    // `markdown-rs` because there it can attempt spaces.\n    // We can’t yet.\n    //\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, \"linePrefix\", 4 + 1)(code);\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4 ? ok(code) : markdownLineEnding(code) ? furtherStart(code) : nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   Previous,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { markdownLineEnding } from 'micromark-util-character';\n/** @type {Construct} */\nexport const codeText = {\n  name: 'codeText',\n  previous,\n  resolve: resolveCodeText,\n  tokenize: tokenizeCodeText\n};\n\n// To do: next major: don’t resolve, like `markdown-rs`.\n/** @type {Resolver} */\nfunction resolveCodeText(events) {\n  let tailExitIndex = events.length - 4;\n  let headEnterIndex = 3;\n  /** @type {number} */\n  let index;\n  /** @type {number | undefined} */\n  let enter;\n\n  // If we start and end with an EOL or a space.\n  if ((events[headEnterIndex][1].type === \"lineEnding\" || events[headEnterIndex][1].type === 'space') && (events[tailExitIndex][1].type === \"lineEnding\" || events[tailExitIndex][1].type === 'space')) {\n    index = headEnterIndex;\n\n    // And we have data.\n    while (++index < tailExitIndex) {\n      if (events[index][1].type === \"codeTextData\") {\n        // Then we have padding.\n        events[headEnterIndex][1].type = \"codeTextPadding\";\n        events[tailExitIndex][1].type = \"codeTextPadding\";\n        headEnterIndex += 2;\n        tailExitIndex -= 2;\n        break;\n      }\n    }\n  }\n\n  // Merge adjacent spaces and data.\n  index = headEnterIndex - 1;\n  tailExitIndex++;\n  while (++index <= tailExitIndex) {\n    if (enter === undefined) {\n      if (index !== tailExitIndex && events[index][1].type !== \"lineEnding\") {\n        enter = index;\n      }\n    } else if (index === tailExitIndex || events[index][1].type === \"lineEnding\") {\n      events[enter][1].type = \"codeTextData\";\n      if (index !== enter + 2) {\n        events[enter][1].end = events[index - 1][1].end;\n        events.splice(enter + 2, index - enter - 2);\n        tailExitIndex -= index - enter - 2;\n        index = enter + 2;\n      }\n      enter = undefined;\n    }\n  }\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Previous}\n */\nfunction previous(code) {\n  // If there is a previous code, there will always be a tail.\n  return code !== 96 || this.events[this.events.length - 1][1].type === \"characterEscape\";\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeCodeText(effects, ok, nok) {\n  const self = this;\n  let sizeOpen = 0;\n  /** @type {number} */\n  let size;\n  /** @type {Token} */\n  let token;\n  return start;\n\n  /**\n   * Start of code (text).\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * > | \\`a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"codeText\");\n    effects.enter(\"codeTextSequence\");\n    return sequenceOpen(code);\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 96) {\n      effects.consume(code);\n      sizeOpen++;\n      return sequenceOpen;\n    }\n    effects.exit(\"codeTextSequence\");\n    return between(code);\n  }\n\n  /**\n   * Between something and something else.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function between(code) {\n    // EOF.\n    if (code === null) {\n      return nok(code);\n    }\n\n    // To do: next major: don’t do spaces in resolve, but when compiling,\n    // like `markdown-rs`.\n    // Tabs don’t work, and virtual spaces don’t make sense.\n    if (code === 32) {\n      effects.enter('space');\n      effects.consume(code);\n      effects.exit('space');\n      return between;\n    }\n\n    // Closing fence? Could also be data.\n    if (code === 96) {\n      token = effects.enter(\"codeTextSequence\");\n      size = 0;\n      return sequenceClose(code);\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return between;\n    }\n\n    // Data.\n    effects.enter(\"codeTextData\");\n    return data(code);\n  }\n\n  /**\n   * In data.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (code === null || code === 32 || code === 96 || markdownLineEnding(code)) {\n      effects.exit(\"codeTextData\");\n      return between(code);\n    }\n    effects.consume(code);\n    return data;\n  }\n\n  /**\n   * In closing sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceClose(code) {\n    // More.\n    if (code === 96) {\n      effects.consume(code);\n      size++;\n      return sequenceClose;\n    }\n\n    // Done!\n    if (size === sizeOpen) {\n      effects.exit(\"codeTextSequence\");\n      effects.exit(\"codeText\");\n      return ok(code);\n    }\n\n    // More or less accents: mark as data.\n    token.type = \"codeTextData\";\n    return data(code);\n  }\n}","/**\n * Some of the internal operations of micromark do lots of editing\n * operations on very large arrays. This runs into problems with two\n * properties of most circa-2020 JavaScript interpreters:\n *\n *  - Array-length modifications at the high end of an array (push/pop) are\n *    expected to be common and are implemented in (amortized) time\n *    proportional to the number of elements added or removed, whereas\n *    other operations (shift/unshift and splice) are much less efficient.\n *  - Function arguments are passed on the stack, so adding tens of thousands\n *    of elements to an array with `arr.push(...newElements)` will frequently\n *    cause stack overflows. (see <https://stackoverflow.com/questions/22123769/rangeerror-maximum-call-stack-size-exceeded-why>)\n *\n * SpliceBuffers are an implementation of gap buffers, which are a\n * generalization of the \"queue made of two stacks\" idea. The splice buffer\n * maintains a cursor, and moving the cursor has cost proportional to the\n * distance the cursor moves, but inserting, deleting, or splicing in\n * new information at the cursor is as efficient as the push/pop operation.\n * This allows for an efficient sequence of splices (or pushes, pops, shifts,\n * or unshifts) as long such edits happen at the same part of the array or\n * generally sweep through the array from the beginning to the end.\n *\n * The interface for splice buffers also supports large numbers of inputs by\n * passing a single array argument rather passing multiple arguments on the\n * function call stack.\n *\n * @template T\n *   Item type.\n */\nexport class SpliceBuffer {\n  /**\n   * @param {ReadonlyArray<T> | null | undefined} [initial]\n   *   Initial items (optional).\n   * @returns\n   *   Splice buffer.\n   */\n  constructor(initial) {\n    /** @type {Array<T>} */\n    this.left = initial ? [...initial] : [];\n    /** @type {Array<T>} */\n    this.right = [];\n  }\n\n  /**\n   * Array access;\n   * does not move the cursor.\n   *\n   * @param {number} index\n   *   Index.\n   * @return {T}\n   *   Item.\n   */\n  get(index) {\n    if (index < 0 || index >= this.left.length + this.right.length) {\n      throw new RangeError('Cannot access index `' + index + '` in a splice buffer of size `' + (this.left.length + this.right.length) + '`');\n    }\n    if (index < this.left.length) return this.left[index];\n    return this.right[this.right.length - index + this.left.length - 1];\n  }\n\n  /**\n   * The length of the splice buffer, one greater than the largest index in the\n   * array.\n   */\n  get length() {\n    return this.left.length + this.right.length;\n  }\n\n  /**\n   * Remove and return `list[0]`;\n   * moves the cursor to `0`.\n   *\n   * @returns {T | undefined}\n   *   Item, optional.\n   */\n  shift() {\n    this.setCursor(0);\n    return this.right.pop();\n  }\n\n  /**\n   * Slice the buffer to get an array;\n   * does not move the cursor.\n   *\n   * @param {number} start\n   *   Start.\n   * @param {number | null | undefined} [end]\n   *   End (optional).\n   * @returns {Array<T>}\n   *   Array of items.\n   */\n  slice(start, end) {\n    /** @type {number} */\n    const stop = end === null || end === undefined ? Number.POSITIVE_INFINITY : end;\n    if (stop < this.left.length) {\n      return this.left.slice(start, stop);\n    }\n    if (start > this.left.length) {\n      return this.right.slice(this.right.length - stop + this.left.length, this.right.length - start + this.left.length).reverse();\n    }\n    return this.left.slice(start).concat(this.right.slice(this.right.length - stop + this.left.length).reverse());\n  }\n\n  /**\n   * Mimics the behavior of Array.prototype.splice() except for the change of\n   * interface necessary to avoid segfaults when patching in very large arrays.\n   *\n   * This operation moves cursor is moved to `start` and results in the cursor\n   * placed after any inserted items.\n   *\n   * @param {number} start\n   *   Start;\n   *   zero-based index at which to start changing the array;\n   *   negative numbers count backwards from the end of the array and values\n   *   that are out-of bounds are clamped to the appropriate end of the array.\n   * @param {number | null | undefined} [deleteCount=0]\n   *   Delete count (default: `0`);\n   *   maximum number of elements to delete, starting from start.\n   * @param {Array<T> | null | undefined} [items=[]]\n   *   Items to include in place of the deleted items (default: `[]`).\n   * @return {Array<T>}\n   *   Any removed items.\n   */\n  splice(start, deleteCount, items) {\n    /** @type {number} */\n    const count = deleteCount || 0;\n    this.setCursor(Math.trunc(start));\n    const removed = this.right.splice(this.right.length - count, Number.POSITIVE_INFINITY);\n    if (items) chunkedPush(this.left, items);\n    return removed.reverse();\n  }\n\n  /**\n   * Remove and return the highest-numbered item in the array, so\n   * `list[list.length - 1]`;\n   * Moves the cursor to `length`.\n   *\n   * @returns {T | undefined}\n   *   Item, optional.\n   */\n  pop() {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    return this.left.pop();\n  }\n\n  /**\n   * Inserts a single item to the high-numbered side of the array;\n   * moves the cursor to `length`.\n   *\n   * @param {T} item\n   *   Item.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  push(item) {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    this.left.push(item);\n  }\n\n  /**\n   * Inserts many items to the high-numbered side of the array.\n   * Moves the cursor to `length`.\n   *\n   * @param {Array<T>} items\n   *   Items.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  pushMany(items) {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    chunkedPush(this.left, items);\n  }\n\n  /**\n   * Inserts a single item to the low-numbered side of the array;\n   * Moves the cursor to `0`.\n   *\n   * @param {T} item\n   *   Item.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  unshift(item) {\n    this.setCursor(0);\n    this.right.push(item);\n  }\n\n  /**\n   * Inserts many items to the low-numbered side of the array;\n   * moves the cursor to `0`.\n   *\n   * @param {Array<T>} items\n   *   Items.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  unshiftMany(items) {\n    this.setCursor(0);\n    chunkedPush(this.right, items.reverse());\n  }\n\n  /**\n   * Move the cursor to a specific position in the array. Requires\n   * time proportional to the distance moved.\n   *\n   * If `n < 0`, the cursor will end up at the beginning.\n   * If `n > length`, the cursor will end up at the end.\n   *\n   * @param {number} n\n   *   Position.\n   * @return {undefined}\n   *   Nothing.\n   */\n  setCursor(n) {\n    if (n === this.left.length || n > this.left.length && this.right.length === 0 || n < 0 && this.left.length === 0) return;\n    if (n < this.left.length) {\n      // Move cursor to the this.left\n      const removed = this.left.splice(n, Number.POSITIVE_INFINITY);\n      chunkedPush(this.right, removed.reverse());\n    } else {\n      // Move cursor to the this.right\n      const removed = this.right.splice(this.left.length + this.right.length - n, Number.POSITIVE_INFINITY);\n      chunkedPush(this.left, removed.reverse());\n    }\n  }\n}\n\n/**\n * Avoid stack overflow by pushing items onto the stack in segments\n *\n * @template T\n *   Item type.\n * @param {Array<T>} list\n *   List to inject into.\n * @param {ReadonlyArray<T>} right\n *   Items to inject.\n * @return {undefined}\n *   Nothing.\n */\nfunction chunkedPush(list, right) {\n  /** @type {number} */\n  let chunkStart = 0;\n  if (right.length < 10000) {\n    list.push(...right);\n  } else {\n    while (chunkStart < right.length) {\n      list.push(...right.slice(chunkStart, chunkStart + 10000));\n      chunkStart += 10000;\n    }\n  }\n}","/**\n * @import {Chunk, Event, Token} from 'micromark-util-types'\n */\n\nimport { splice } from 'micromark-util-chunked';\nimport { SpliceBuffer } from './lib/splice-buffer.js';\n\n// Hidden API exposed for testing.\nexport { SpliceBuffer } from './lib/splice-buffer.js';\n\n/**\n * Tokenize subcontent.\n *\n * @param {Array<Event>} eventsArray\n *   List of events.\n * @returns {boolean}\n *   Whether subtokens were found.\n */\n// eslint-disable-next-line complexity\nexport function subtokenize(eventsArray) {\n  /** @type {Record<string, number>} */\n  const jumps = {};\n  let index = -1;\n  /** @type {Event} */\n  let event;\n  /** @type {number | undefined} */\n  let lineIndex;\n  /** @type {number} */\n  let otherIndex;\n  /** @type {Event} */\n  let otherEvent;\n  /** @type {Array<Event>} */\n  let parameters;\n  /** @type {Array<Event>} */\n  let subevents;\n  /** @type {boolean | undefined} */\n  let more;\n  const events = new SpliceBuffer(eventsArray);\n  while (++index < events.length) {\n    while (index in jumps) {\n      index = jumps[index];\n    }\n    event = events.get(index);\n\n    // Add a hook for the GFM tasklist extension, which needs to know if text\n    // is in the first content of a list item.\n    if (index && event[1].type === \"chunkFlow\" && events.get(index - 1)[1].type === \"listItemPrefix\") {\n      subevents = event[1]._tokenizer.events;\n      otherIndex = 0;\n      if (otherIndex < subevents.length && subevents[otherIndex][1].type === \"lineEndingBlank\") {\n        otherIndex += 2;\n      }\n      if (otherIndex < subevents.length && subevents[otherIndex][1].type === \"content\") {\n        while (++otherIndex < subevents.length) {\n          if (subevents[otherIndex][1].type === \"content\") {\n            break;\n          }\n          if (subevents[otherIndex][1].type === \"chunkText\") {\n            subevents[otherIndex][1]._isInFirstContentOfListItem = true;\n            otherIndex++;\n          }\n        }\n      }\n    }\n\n    // Enter.\n    if (event[0] === 'enter') {\n      if (event[1].contentType) {\n        Object.assign(jumps, subcontent(events, index));\n        index = jumps[index];\n        more = true;\n      }\n    }\n    // Exit.\n    else if (event[1]._container) {\n      otherIndex = index;\n      lineIndex = undefined;\n      while (otherIndex--) {\n        otherEvent = events.get(otherIndex);\n        if (otherEvent[1].type === \"lineEnding\" || otherEvent[1].type === \"lineEndingBlank\") {\n          if (otherEvent[0] === 'enter') {\n            if (lineIndex) {\n              events.get(lineIndex)[1].type = \"lineEndingBlank\";\n            }\n            otherEvent[1].type = \"lineEnding\";\n            lineIndex = otherIndex;\n          }\n        } else if (otherEvent[1].type === \"linePrefix\" || otherEvent[1].type === \"listItemIndent\") {\n          // Move past.\n        } else {\n          break;\n        }\n      }\n      if (lineIndex) {\n        // Fix position.\n        event[1].end = {\n          ...events.get(lineIndex)[1].start\n        };\n\n        // Switch container exit w/ line endings.\n        parameters = events.slice(lineIndex, index);\n        parameters.unshift(event);\n        events.splice(lineIndex, index - lineIndex + 1, parameters);\n      }\n    }\n  }\n\n  // The changes to the `events` buffer must be copied back into the eventsArray\n  splice(eventsArray, 0, Number.POSITIVE_INFINITY, events.slice(0));\n  return !more;\n}\n\n/**\n * Tokenize embedded tokens.\n *\n * @param {SpliceBuffer<Event>} events\n *   Events.\n * @param {number} eventIndex\n *   Index.\n * @returns {Record<string, number>}\n *   Gaps.\n */\nfunction subcontent(events, eventIndex) {\n  const token = events.get(eventIndex)[1];\n  const context = events.get(eventIndex)[2];\n  let startPosition = eventIndex - 1;\n  /** @type {Array<number>} */\n  const startPositions = [];\n  let tokenizer = token._tokenizer;\n  if (!tokenizer) {\n    tokenizer = context.parser[token.contentType](token.start);\n    if (token._contentTypeTextTrailing) {\n      tokenizer._contentTypeTextTrailing = true;\n    }\n  }\n  const childEvents = tokenizer.events;\n  /** @type {Array<[number, number]>} */\n  const jumps = [];\n  /** @type {Record<string, number>} */\n  const gaps = {};\n  /** @type {Array<Chunk>} */\n  let stream;\n  /** @type {Token | undefined} */\n  let previous;\n  let index = -1;\n  /** @type {Token | undefined} */\n  let current = token;\n  let adjust = 0;\n  let start = 0;\n  const breaks = [start];\n\n  // Loop forward through the linked tokens to pass them in order to the\n  // subtokenizer.\n  while (current) {\n    // Find the position of the event for this token.\n    while (events.get(++startPosition)[1] !== current) {\n      // Empty.\n    }\n    startPositions.push(startPosition);\n    if (!current._tokenizer) {\n      stream = context.sliceStream(current);\n      if (!current.next) {\n        stream.push(null);\n      }\n      if (previous) {\n        tokenizer.defineSkip(current.start);\n      }\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = true;\n      }\n      tokenizer.write(stream);\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = undefined;\n      }\n    }\n\n    // Unravel the next token.\n    previous = current;\n    current = current.next;\n  }\n\n  // Now, loop back through all events (and linked tokens), to figure out which\n  // parts belong where.\n  current = token;\n  while (++index < childEvents.length) {\n    if (\n    // Find a void token that includes a break.\n    childEvents[index][0] === 'exit' && childEvents[index - 1][0] === 'enter' && childEvents[index][1].type === childEvents[index - 1][1].type && childEvents[index][1].start.line !== childEvents[index][1].end.line) {\n      start = index + 1;\n      breaks.push(start);\n      // Help GC.\n      current._tokenizer = undefined;\n      current.previous = undefined;\n      current = current.next;\n    }\n  }\n\n  // Help GC.\n  tokenizer.events = [];\n\n  // If there’s one more token (which is the cases for lines that end in an\n  // EOF), that’s perfect: the last point we found starts it.\n  // If there isn’t then make sure any remaining content is added to it.\n  if (current) {\n    // Help GC.\n    current._tokenizer = undefined;\n    current.previous = undefined;\n  } else {\n    breaks.pop();\n  }\n\n  // Now splice the events from the subtokenizer into the current events,\n  // moving back to front so that splice indices aren’t affected.\n  index = breaks.length;\n  while (index--) {\n    const slice = childEvents.slice(breaks[index], breaks[index + 1]);\n    const start = startPositions.pop();\n    jumps.push([start, start + slice.length - 1]);\n    events.splice(start, 2, slice);\n  }\n  jumps.reverse();\n  index = -1;\n  while (++index < jumps.length) {\n    gaps[adjust + jumps[index][0]] = adjust + jumps[index][1];\n    adjust += jumps[index][1] - jumps[index][0] - 1;\n  }\n  return gaps;\n}","/**\n * @import {\n *   Construct,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\nimport { subtokenize } from 'micromark-util-subtokenize';\n/**\n * No name because it must not be turned off.\n * @type {Construct}\n */\nexport const content = {\n  resolve: resolveContent,\n  tokenize: tokenizeContent\n};\n\n/** @type {Construct} */\nconst continuationConstruct = {\n  partial: true,\n  tokenize: tokenizeContinuation\n};\n\n/**\n * Content is transparent: it’s parsed right now. That way, definitions are also\n * parsed right now: before text in paragraphs (specifically, media) are parsed.\n *\n * @type {Resolver}\n */\nfunction resolveContent(events) {\n  subtokenize(events);\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeContent(effects, ok) {\n  /** @type {Token | undefined} */\n  let previous;\n  return chunkStart;\n\n  /**\n   * Before a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkStart(code) {\n    effects.enter(\"content\");\n    previous = effects.enter(\"chunkContent\", {\n      contentType: \"content\"\n    });\n    return chunkInside(code);\n  }\n\n  /**\n   * In a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkInside(code) {\n    if (code === null) {\n      return contentEnd(code);\n    }\n\n    // To do: in `markdown-rs`, each line is parsed on its own, and everything\n    // is stitched together resolving.\n    if (markdownLineEnding(code)) {\n      return effects.check(continuationConstruct, contentContinue, contentEnd)(code);\n    }\n\n    // Data.\n    effects.consume(code);\n    return chunkInside;\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentEnd(code) {\n    effects.exit(\"chunkContent\");\n    effects.exit(\"content\");\n    return ok(code);\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentContinue(code) {\n    effects.consume(code);\n    effects.exit(\"chunkContent\");\n    previous.next = effects.enter(\"chunkContent\", {\n      contentType: \"content\",\n      previous\n    });\n    previous = previous.next;\n    return chunkInside;\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeContinuation(effects, ok, nok) {\n  const self = this;\n  return startLookahead;\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function startLookahead(code) {\n    effects.exit(\"chunkContent\");\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, prefixed, \"linePrefix\");\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function prefixed(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code);\n    }\n\n    // Always populated by defaults.\n\n    const tail = self.events[self.events.length - 1];\n    if (!self.parser.constructs.disable.null.includes('codeIndented') && tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4) {\n      return ok(code);\n    }\n    return effects.interrupt(self.parser.constructs.flow, nok, ok)(code);\n  }\n}","/**\n * @import {Effects, State, TokenType} from 'micromark-util-types'\n */\n\nimport { asciiControl, markdownLineEndingOrSpace, markdownLineEnding } from 'micromark-util-character';\n/**\n * Parse destinations.\n *\n * ###### Examples\n *\n * ```markdown\n * <a>\n * <a\\>b>\n * <a b>\n * <a)>\n * a\n * a\\)b\n * a(b)c\n * a(b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type for whole (`<a>` or `b`).\n * @param {TokenType} literalType\n *   Type when enclosed (`<a>`).\n * @param {TokenType} literalMarkerType\n *   Type for enclosing (`<` and `>`).\n * @param {TokenType} rawType\n *   Type when not enclosed (`b`).\n * @param {TokenType} stringType\n *   Type for the value (`a` or `b`).\n * @param {number | undefined} [max=Infinity]\n *   Depth of nested parens (inclusive).\n * @returns {State}\n *   Start state.\n */\nexport function factoryDestination(effects, ok, nok, type, literalType, literalMarkerType, rawType, stringType, max) {\n  const limit = max || Number.POSITIVE_INFINITY;\n  let balance = 0;\n  return start;\n\n  /**\n   * Start of destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *     ^\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 60) {\n      effects.enter(type);\n      effects.enter(literalType);\n      effects.enter(literalMarkerType);\n      effects.consume(code);\n      effects.exit(literalMarkerType);\n      return enclosedBefore;\n    }\n\n    // ASCII control, space, closing paren.\n    if (code === null || code === 32 || code === 41 || asciiControl(code)) {\n      return nok(code);\n    }\n    effects.enter(type);\n    effects.enter(rawType);\n    effects.enter(stringType);\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return raw(code);\n  }\n\n  /**\n   * After `<`, at an enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedBefore(code) {\n    if (code === 62) {\n      effects.enter(literalMarkerType);\n      effects.consume(code);\n      effects.exit(literalMarkerType);\n      effects.exit(literalType);\n      effects.exit(type);\n      return ok;\n    }\n    effects.enter(stringType);\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return enclosed(code);\n  }\n\n  /**\n   * In enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosed(code) {\n    if (code === 62) {\n      effects.exit(\"chunkString\");\n      effects.exit(stringType);\n      return enclosedBefore(code);\n    }\n    if (code === null || code === 60 || markdownLineEnding(code)) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return code === 92 ? enclosedEscape : enclosed;\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | <a\\*a>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedEscape(code) {\n    if (code === 60 || code === 62 || code === 92) {\n      effects.consume(code);\n      return enclosed;\n    }\n    return enclosed(code);\n  }\n\n  /**\n   * In raw destination.\n   *\n   * ```markdown\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function raw(code) {\n    if (!balance && (code === null || code === 41 || markdownLineEndingOrSpace(code))) {\n      effects.exit(\"chunkString\");\n      effects.exit(stringType);\n      effects.exit(rawType);\n      effects.exit(type);\n      return ok(code);\n    }\n    if (balance < limit && code === 40) {\n      effects.consume(code);\n      balance++;\n      return raw;\n    }\n    if (code === 41) {\n      effects.consume(code);\n      balance--;\n      return raw;\n    }\n\n    // ASCII control (but *not* `\\0`) and space and `(`.\n    // Note: in `markdown-rs`, `\\0` exists in codes, in `micromark-js` it\n    // doesn’t.\n    if (code === null || code === 32 || code === 40 || asciiControl(code)) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return code === 92 ? rawEscape : raw;\n  }\n\n  /**\n   * After `\\`, at special character.\n   *\n   * ```markdown\n   * > | a\\*a\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function rawEscape(code) {\n    if (code === 40 || code === 41 || code === 92) {\n      effects.consume(code);\n      return raw;\n    }\n    return raw(code);\n  }\n}","/**\n * @import {\n *   Effects,\n *   State,\n *   TokenizeContext,\n *   TokenType\n * } from 'micromark-util-types'\n */\n\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/**\n * Parse labels.\n *\n * > 👉 **Note**: labels in markdown are capped at 999 characters in the string.\n *\n * ###### Examples\n *\n * ```markdown\n * [a]\n * [a\n * b]\n * [a\\]b]\n * ```\n *\n * @this {TokenizeContext}\n *   Tokenize context.\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole label (`[a]`).\n * @param {TokenType} markerType\n *   Type for the markers (`[` and `]`).\n * @param {TokenType} stringType\n *   Type for the identifier (`a`).\n * @returns {State}\n *   Start state.\n */\nexport function factoryLabel(effects, ok, nok, type, markerType, stringType) {\n  const self = this;\n  let size = 0;\n  /** @type {boolean} */\n  let seen;\n  return start;\n\n  /**\n   * Start of label.\n   *\n   * ```markdown\n   * > | [a]\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(type);\n    effects.enter(markerType);\n    effects.consume(code);\n    effects.exit(markerType);\n    effects.enter(stringType);\n    return atBreak;\n  }\n\n  /**\n   * In label, at something, before something else.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (size > 999 || code === null || code === 91 || code === 93 && !seen ||\n    // To do: remove in the future once we’ve switched from\n    // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,\n    // which doesn’t need this.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    code === 94 && !size && '_hiddenFootnoteSupport' in self.parser.constructs) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.exit(stringType);\n      effects.enter(markerType);\n      effects.consume(code);\n      effects.exit(markerType);\n      effects.exit(type);\n      return ok;\n    }\n\n    // To do: indent? Link chunks and EOLs together?\n    if (markdownLineEnding(code)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return atBreak;\n    }\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return labelInside(code);\n  }\n\n  /**\n   * In label, in text.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (code === null || code === 91 || code === 93 || markdownLineEnding(code) || size++ > 999) {\n      effects.exit(\"chunkString\");\n      return atBreak(code);\n    }\n    effects.consume(code);\n    if (!seen) seen = !markdownSpace(code);\n    return code === 92 ? labelEscape : labelInside;\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | [a\\*a]\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code);\n      size++;\n      return labelInside;\n    }\n    return labelInside(code);\n  }\n}","/**\n * @import {\n *   Code,\n *   Effects,\n *   State,\n *   TokenType\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\n/**\n * Parse titles.\n *\n * ###### Examples\n *\n * ```markdown\n * \"a\"\n * 'b'\n * (c)\n * \"a\n * b\"\n * 'a\n *     b'\n * (a\\)b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole title (`\"a\"`, `'b'`, `(c)`).\n * @param {TokenType} markerType\n *   Type for the markers (`\"`, `'`, `(`, and `)`).\n * @param {TokenType} stringType\n *   Type for the value (`a`).\n * @returns {State}\n *   Start state.\n */\nexport function factoryTitle(effects, ok, nok, type, markerType, stringType) {\n  /** @type {NonNullable<Code>} */\n  let marker;\n  return start;\n\n  /**\n   * Start of title.\n   *\n   * ```markdown\n   * > | \"a\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      effects.enter(type);\n      effects.enter(markerType);\n      effects.consume(code);\n      effects.exit(markerType);\n      marker = code === 40 ? 41 : code;\n      return begin;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After opening marker.\n   *\n   * This is also used at the closing marker.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function begin(code) {\n    if (code === marker) {\n      effects.enter(markerType);\n      effects.consume(code);\n      effects.exit(markerType);\n      effects.exit(type);\n      return ok;\n    }\n    effects.enter(stringType);\n    return atBreak(code);\n  }\n\n  /**\n   * At something, before something else.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.exit(stringType);\n      return begin(marker);\n    }\n    if (code === null) {\n      return nok(code);\n    }\n\n    // Note: blank lines can’t exist in content.\n    if (markdownLineEnding(code)) {\n      // To do: use `space_or_tab_eol_with_options`, connect.\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return factorySpace(effects, atBreak, \"linePrefix\");\n    }\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return inside(code);\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker || code === null || markdownLineEnding(code)) {\n      effects.exit(\"chunkString\");\n      return atBreak(code);\n    }\n    effects.consume(code);\n    return code === 92 ? escape : inside;\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | \"a\\*b\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function escape(code) {\n    if (code === marker || code === 92) {\n      effects.consume(code);\n      return inside;\n    }\n    return inside(code);\n  }\n}","/**\n * @import {Effects, State} from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   line endings or spaces in markdown are often optional, in which case this\n *     factory can be used and `ok` will be switched to whether spaces were found\n *     or not\n * *   one line ending or space can be detected with\n *     `markdownLineEndingOrSpace(code)` right before using `factoryWhitespace`\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @returns {State}\n *   Start state.\n */\nexport function factoryWhitespace(effects, ok) {\n  /** @type {boolean} */\n  let seen;\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      seen = true;\n      return start;\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, start, seen ? \"linePrefix\" : \"lineSuffix\")(code);\n    }\n    return ok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factoryDestination } from 'micromark-factory-destination';\nimport { factoryLabel } from 'micromark-factory-label';\nimport { factorySpace } from 'micromark-factory-space';\nimport { factoryTitle } from 'micromark-factory-title';\nimport { factoryWhitespace } from 'micromark-factory-whitespace';\nimport { markdownLineEndingOrSpace, markdownLineEnding, markdownSpace } from 'micromark-util-character';\nimport { normalizeIdentifier } from 'micromark-util-normalize-identifier';\n/** @type {Construct} */\nexport const definition = {\n  name: 'definition',\n  tokenize: tokenizeDefinition\n};\n\n/** @type {Construct} */\nconst titleBefore = {\n  partial: true,\n  tokenize: tokenizeTitleBefore\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeDefinition(effects, ok, nok) {\n  const self = this;\n  /** @type {string} */\n  let identifier;\n  return start;\n\n  /**\n   * At start of a definition.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Do not interrupt paragraphs (but do follow definitions).\n    // To do: do `interrupt` the way `markdown-rs` does.\n    // To do: parse whitespace the way `markdown-rs` does.\n    effects.enter(\"definition\");\n    return before(code);\n  }\n\n  /**\n   * After optional whitespace, at `[`.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    // To do: parse whitespace the way `markdown-rs` does.\n\n    return factoryLabel.call(self, effects, labelAfter,\n    // Note: we don’t need to reset the way `markdown-rs` does.\n    nok, \"definitionLabel\", \"definitionLabelMarker\", \"definitionLabelString\")(code);\n  }\n\n  /**\n   * After label.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    identifier = normalizeIdentifier(self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1));\n    if (code === 58) {\n      effects.enter(\"definitionMarker\");\n      effects.consume(code);\n      effects.exit(\"definitionMarker\");\n      return markerAfter;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After marker.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function markerAfter(code) {\n    // Note: whitespace is optional.\n    return markdownLineEndingOrSpace(code) ? factoryWhitespace(effects, destinationBefore)(code) : destinationBefore(code);\n  }\n\n  /**\n   * Before destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationBefore(code) {\n    return factoryDestination(effects, destinationAfter,\n    // Note: we don’t need to reset the way `markdown-rs` does.\n    nok, \"definitionDestination\", \"definitionDestinationLiteral\", \"definitionDestinationLiteralMarker\", \"definitionDestinationRaw\", \"definitionDestinationString\")(code);\n  }\n\n  /**\n   * After destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationAfter(code) {\n    return effects.attempt(titleBefore, after, after)(code);\n  }\n\n  /**\n   * After definition.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return markdownSpace(code) ? factorySpace(effects, afterWhitespace, \"whitespace\")(code) : afterWhitespace(code);\n  }\n\n  /**\n   * After definition, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterWhitespace(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"definition\");\n\n      // Note: we don’t care about uniqueness.\n      // It’s likely that that doesn’t happen very frequently.\n      // It is more likely that it wastes precious time.\n      self.parser.defined.push(identifier);\n\n      // To do: `markdown-rs` interrupt.\n      // // You’d be interrupting.\n      // tokenizer.interrupt = true\n      return ok(code);\n    }\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeTitleBefore(effects, ok, nok) {\n  return titleBefore;\n\n  /**\n   * After destination, at whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleBefore(code) {\n    return markdownLineEndingOrSpace(code) ? factoryWhitespace(effects, beforeMarker)(code) : nok(code);\n  }\n\n  /**\n   * At title.\n   *\n   * ```markdown\n   *   | [a]: b\n   * > | \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeMarker(code) {\n    return factoryTitle(effects, titleAfter, nok, \"definitionTitle\", \"definitionTitleMarker\", \"definitionTitleString\")(code);\n  }\n\n  /**\n   * After title.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfter(code) {\n    return markdownSpace(code) ? factorySpace(effects, titleAfterOptionalWhitespace, \"whitespace\")(code) : titleAfterOptionalWhitespace(code);\n  }\n\n  /**\n   * After title, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfterOptionalWhitespace(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { markdownLineEnding } from 'micromark-util-character';\n/** @type {Construct} */\nexport const hardBreakEscape = {\n  name: 'hardBreakEscape',\n  tokenize: tokenizeHardBreakEscape\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeHardBreakEscape(effects, ok, nok) {\n  return start;\n\n  /**\n   * Start of a hard break (escape).\n   *\n   * ```markdown\n   * > | a\\\n   *      ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"hardBreakEscape\");\n    effects.consume(code);\n    return after;\n  }\n\n  /**\n   * After `\\`, at eol.\n   *\n   * ```markdown\n   * > | a\\\n   *       ^\n   *   | b\n   * ```\n   *\n   *  @type {State}\n   */\n  function after(code) {\n    if (markdownLineEnding(code)) {\n      effects.exit(\"hardBreakEscape\");\n      return ok(code);\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEndingOrSpace, markdownLineEnding, markdownSpace } from 'micromark-util-character';\nimport { splice } from 'micromark-util-chunked';\n/** @type {Construct} */\nexport const headingAtx = {\n  name: 'headingAtx',\n  resolve: resolveHeadingAtx,\n  tokenize: tokenizeHeadingAtx\n};\n\n/** @type {Resolver} */\nfunction resolveHeadingAtx(events, context) {\n  let contentEnd = events.length - 2;\n  let contentStart = 3;\n  /** @type {Token} */\n  let content;\n  /** @type {Token} */\n  let text;\n\n  // Prefix whitespace, part of the opening.\n  if (events[contentStart][1].type === \"whitespace\") {\n    contentStart += 2;\n  }\n\n  // Suffix whitespace, part of the closing.\n  if (contentEnd - 2 > contentStart && events[contentEnd][1].type === \"whitespace\") {\n    contentEnd -= 2;\n  }\n  if (events[contentEnd][1].type === \"atxHeadingSequence\" && (contentStart === contentEnd - 1 || contentEnd - 4 > contentStart && events[contentEnd - 2][1].type === \"whitespace\")) {\n    contentEnd -= contentStart + 1 === contentEnd ? 2 : 4;\n  }\n  if (contentEnd > contentStart) {\n    content = {\n      type: \"atxHeadingText\",\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end\n    };\n    text = {\n      type: \"chunkText\",\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end,\n      contentType: \"text\"\n    };\n    splice(events, contentStart, contentEnd - contentStart + 1, [['enter', content, context], ['enter', text, context], ['exit', text, context], ['exit', content, context]]);\n  }\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeHeadingAtx(effects, ok, nok) {\n  let size = 0;\n  return start;\n\n  /**\n   * Start of a heading (atx).\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    effects.enter(\"atxHeading\");\n    return before(code);\n  }\n\n  /**\n   * After optional whitespace, at `#`.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter(\"atxHeadingSequence\");\n    return sequenceOpen(code);\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 35 && size++ < 6) {\n      effects.consume(code);\n      return sequenceOpen;\n    }\n\n    // Always at least one `#`.\n    if (code === null || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"atxHeadingSequence\");\n      return atBreak(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ## aa\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === 35) {\n      effects.enter(\"atxHeadingSequence\");\n      return sequenceFurther(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"atxHeading\");\n      // To do: interrupt like `markdown-rs`.\n      // // Feel free to interrupt.\n      // tokenizer.interrupt = false\n      return ok(code);\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, atBreak, \"whitespace\")(code);\n    }\n\n    // To do: generate `data` tokens, add the `text` token later.\n    // Needs edit map, see: `markdown.rs`.\n    effects.enter(\"atxHeadingText\");\n    return data(code);\n  }\n\n  /**\n   * In further sequence (after whitespace).\n   *\n   * Could be normal “visible” hashes in the heading or a final sequence.\n   *\n   * ```markdown\n   * > | ## aa ##\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceFurther(code) {\n    if (code === 35) {\n      effects.consume(code);\n      return sequenceFurther;\n    }\n    effects.exit(\"atxHeadingSequence\");\n    return atBreak(code);\n  }\n\n  /**\n   * In text.\n   *\n   * ```markdown\n   * > | ## aa\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (code === null || code === 35 || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"atxHeadingText\");\n      return atBreak(code);\n    }\n    effects.consume(code);\n    return data;\n  }\n}","/**\n * List of lowercase HTML “block” tag names.\n *\n * The list, when parsing HTML (flow), results in more relaxed rules (condition\n * 6).\n * Because they are known blocks, the HTML-like syntax doesn’t have to be\n * strictly parsed.\n * For tag names not in this list, a more strict algorithm (condition 7) is used\n * to detect whether the HTML-like syntax is seen as HTML (flow) or not.\n *\n * This is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `search` was added in `CommonMark@0.31`.\n */\nexport const htmlBlockNames = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'search',\n  'section',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n]\n\n/**\n * List of lowercase HTML “raw” tag names.\n *\n * The list, when parsing HTML (flow), results in HTML that can include lines\n * without exiting, until a closing tag also in this list is found (condition\n * 1).\n *\n * This module is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `textarea` was added in `CommonMark@0.30`.\n */\nexport const htmlRawNames = ['pre', 'script', 'style', 'textarea']\n","/**\n * @import {\n *   Code,\n *   Construct,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { asciiAlphanumeric, asciiAlpha, markdownLineEndingOrSpace, markdownLineEnding, markdownSpace } from 'micromark-util-character';\nimport { htmlBlockNames, htmlRawNames } from 'micromark-util-html-tag-name';\nimport { blankLine } from './blank-line.js';\n\n/** @type {Construct} */\nexport const htmlFlow = {\n  concrete: true,\n  name: 'htmlFlow',\n  resolveTo: resolveToHtmlFlow,\n  tokenize: tokenizeHtmlFlow\n};\n\n/** @type {Construct} */\nconst blankLineBefore = {\n  partial: true,\n  tokenize: tokenizeBlankLineBefore\n};\nconst nonLazyContinuationStart = {\n  partial: true,\n  tokenize: tokenizeNonLazyContinuationStart\n};\n\n/** @type {Resolver} */\nfunction resolveToHtmlFlow(events) {\n  let index = events.length;\n  while (index--) {\n    if (events[index][0] === 'enter' && events[index][1].type === \"htmlFlow\") {\n      break;\n    }\n  }\n  if (index > 1 && events[index - 2][1].type === \"linePrefix\") {\n    // Add the prefix start to the HTML token.\n    events[index][1].start = events[index - 2][1].start;\n    // Add the prefix start to the HTML line token.\n    events[index + 1][1].start = events[index - 2][1].start;\n    // Remove the line prefix.\n    events.splice(index - 2, 2);\n  }\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlFlow(effects, ok, nok) {\n  const self = this;\n  /** @type {number} */\n  let marker;\n  /** @type {boolean} */\n  let closingTag;\n  /** @type {string} */\n  let buffer;\n  /** @type {number} */\n  let index;\n  /** @type {Code} */\n  let markerB;\n  return start;\n\n  /**\n   * Start of HTML (flow).\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    return before(code);\n  }\n\n  /**\n   * At `<`, after optional whitespace.\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter(\"htmlFlow\");\n    effects.enter(\"htmlFlowData\");\n    effects.consume(code);\n    return open;\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | <x />\n   *      ^\n   * > | <!doctype>\n   *      ^\n   * > | <!--xxx-->\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code);\n      return declarationOpen;\n    }\n    if (code === 47) {\n      effects.consume(code);\n      closingTag = true;\n      return tagCloseStart;\n    }\n    if (code === 63) {\n      effects.consume(code);\n      marker = 3;\n      // To do:\n      // tokenizer.concrete = true\n      // To do: use `markdown-rs` style interrupt.\n      // While we’re in an instruction instead of a declaration, we’re on a `?`\n      // right now, so we do need to search for `>`, similar to declarations.\n      return self.interrupt ? ok : continuationDeclarationInside;\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      // Always the case.\n      effects.consume(code);\n      buffer = String.fromCharCode(code);\n      return tagName;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *       ^\n   * > | <!--xxx-->\n   *       ^\n   * > | <![CDATA[>&<]]>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code);\n      marker = 2;\n      return commentOpenInside;\n    }\n    if (code === 91) {\n      effects.consume(code);\n      marker = 5;\n      index = 0;\n      return cdataOpenInside;\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      marker = 4;\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `<!-`, inside a comment, at another `-`.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code);\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `<![`, inside CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *        ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = \"CDATA[\";\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code);\n      if (index === value.length) {\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok : continuation;\n      }\n      return cdataOpenInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | </x>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    if (asciiAlpha(code)) {\n      // Always the case.\n      effects.consume(code);\n      buffer = String.fromCharCode(code);\n      return tagName;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In tag name.\n   *\n   * ```markdown\n   * > | <ab>\n   *      ^^\n   * > | </ab>\n   *       ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagName(code) {\n    if (code === null || code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      const slash = code === 47;\n      const name = buffer.toLowerCase();\n      if (!slash && !closingTag && htmlRawNames.includes(name)) {\n        marker = 1;\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code);\n      }\n      if (htmlBlockNames.includes(buffer.toLowerCase())) {\n        marker = 6;\n        if (slash) {\n          effects.consume(code);\n          return basicSelfClosing;\n        }\n\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code);\n      }\n      marker = 7;\n      // Do not support complete HTML when interrupting.\n      return self.interrupt && !self.parser.lazy[self.now().line] ? nok(code) : closingTag ? completeClosingTagAfter(code) : completeAttributeNameBefore(code);\n    }\n\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code);\n      buffer += String.fromCharCode(code);\n      return tagName;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After closing slash of a basic tag name.\n   *\n   * ```markdown\n   * > | <div/>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function basicSelfClosing(code) {\n    if (code === 62) {\n      effects.consume(code);\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuation;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After closing slash of a complete tag name.\n   *\n   * ```markdown\n   * > | <x/>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeClosingTagAfter(code) {\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return completeClosingTagAfter;\n    }\n    return completeEnd(code);\n  }\n\n  /**\n   * At an attribute name.\n   *\n   * At first, this state is used after a complete tag name, after whitespace,\n   * where it expects optional attributes or the end of the tag.\n   * It is also reused after attributes, when expecting more optional\n   * attributes.\n   *\n   * ```markdown\n   * > | <a />\n   *        ^\n   * > | <a :b>\n   *        ^\n   * > | <a _b>\n   *        ^\n   * > | <a b>\n   *        ^\n   * > | <a >\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameBefore(code) {\n    if (code === 47) {\n      effects.consume(code);\n      return completeEnd;\n    }\n\n    // ASCII alphanumerical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code);\n      return completeAttributeName;\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return completeAttributeNameBefore;\n    }\n    return completeEnd(code);\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | <a :b>\n   *         ^\n   * > | <a _b>\n   *         ^\n   * > | <a b>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeName(code) {\n    // ASCII alphanumerical and `-`, `.`, `:`, and `_`.\n    if (code === 45 || code === 46 || code === 58 || code === 95 || asciiAlphanumeric(code)) {\n      effects.consume(code);\n      return completeAttributeName;\n    }\n    return completeAttributeNameAfter(code);\n  }\n\n  /**\n   * After attribute name, at an optional initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b>\n   *         ^\n   * > | <a b=c>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code);\n      return completeAttributeValueBefore;\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return completeAttributeNameAfter;\n    }\n    return completeAttributeNameBefore(code);\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * > | <a b=\"c\">\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueBefore(code) {\n    if (code === null || code === 60 || code === 61 || code === 62 || code === 96) {\n      return nok(code);\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code);\n      markerB = code;\n      return completeAttributeValueQuoted;\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return completeAttributeValueBefore;\n    }\n    return completeAttributeValueUnquoted(code);\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *           ^\n   * > | <a b='c'>\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuoted(code) {\n    if (code === markerB) {\n      effects.consume(code);\n      markerB = null;\n      return completeAttributeValueQuotedAfter;\n    }\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code);\n    }\n    effects.consume(code);\n    return completeAttributeValueQuoted;\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueUnquoted(code) {\n    if (code === null || code === 34 || code === 39 || code === 47 || code === 60 || code === 61 || code === 62 || code === 96 || markdownLineEndingOrSpace(code)) {\n      return completeAttributeNameAfter(code);\n    }\n    effects.consume(code);\n    return completeAttributeValueUnquoted;\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the\n   * end of the tag.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownSpace(code)) {\n      return completeAttributeNameBefore(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In certain circumstances of a complete tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeEnd(code) {\n    if (code === 62) {\n      effects.consume(code);\n      return completeAfter;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `>` in a complete tag.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAfter(code) {\n    if (code === null || markdownLineEnding(code)) {\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return continuation(code);\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return completeAfter;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In continuation of any HTML kind.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuation(code) {\n    if (code === 45 && marker === 2) {\n      effects.consume(code);\n      return continuationCommentInside;\n    }\n    if (code === 60 && marker === 1) {\n      effects.consume(code);\n      return continuationRawTagOpen;\n    }\n    if (code === 62 && marker === 4) {\n      effects.consume(code);\n      return continuationClose;\n    }\n    if (code === 63 && marker === 3) {\n      effects.consume(code);\n      return continuationDeclarationInside;\n    }\n    if (code === 93 && marker === 5) {\n      effects.consume(code);\n      return continuationCdataInside;\n    }\n    if (markdownLineEnding(code) && (marker === 6 || marker === 7)) {\n      effects.exit(\"htmlFlowData\");\n      return effects.check(blankLineBefore, continuationAfter, continuationStart)(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"htmlFlowData\");\n      return continuationStart(code);\n    }\n    effects.consume(code);\n    return continuation;\n  }\n\n  /**\n   * In continuation, at eol.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStart(code) {\n    return effects.check(nonLazyContinuationStart, continuationStartNonLazy, continuationAfter)(code);\n  }\n\n  /**\n   * In continuation, at eol, before non-lazy content.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStartNonLazy(code) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return continuationBefore;\n  }\n\n  /**\n   * In continuation, before non-lazy content.\n   *\n   * ```markdown\n   *   | <x>\n   * > | asd\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return continuationStart(code);\n    }\n    effects.enter(\"htmlFlowData\");\n    return continuation(code);\n  }\n\n  /**\n   * In comment continuation, after one `-`, expecting another.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCommentInside(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return continuationDeclarationInside;\n    }\n    return continuation(code);\n  }\n\n  /**\n   * In raw continuation, after `<`, at `/`.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawTagOpen(code) {\n    if (code === 47) {\n      effects.consume(code);\n      buffer = '';\n      return continuationRawEndTag;\n    }\n    return continuation(code);\n  }\n\n  /**\n   * In raw continuation, after `</`, in a raw tag name.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                             ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawEndTag(code) {\n    if (code === 62) {\n      const name = buffer.toLowerCase();\n      if (htmlRawNames.includes(name)) {\n        effects.consume(code);\n        return continuationClose;\n      }\n      return continuation(code);\n    }\n    if (asciiAlpha(code) && buffer.length < 8) {\n      // Always the case.\n      effects.consume(code);\n      buffer += String.fromCharCode(code);\n      return continuationRawEndTag;\n    }\n    return continuation(code);\n  }\n\n  /**\n   * In cdata continuation, after `]`, expecting `]>`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *                  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCdataInside(code) {\n    if (code === 93) {\n      effects.consume(code);\n      return continuationDeclarationInside;\n    }\n    return continuation(code);\n  }\n\n  /**\n   * In declaration or instruction continuation, at `>`.\n   *\n   * ```markdown\n   * > | <!-->\n   *         ^\n   * > | <?>\n   *       ^\n   * > | <!q>\n   *        ^\n   * > | <!--ab-->\n   *             ^\n   * > | <![CDATA[>&<]]>\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationDeclarationInside(code) {\n    if (code === 62) {\n      effects.consume(code);\n      return continuationClose;\n    }\n\n    // More dashes.\n    if (code === 45 && marker === 2) {\n      effects.consume(code);\n      return continuationDeclarationInside;\n    }\n    return continuation(code);\n  }\n\n  /**\n   * In closed continuation: everything we get until the eol/eof is part of it.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationClose(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"htmlFlowData\");\n      return continuationAfter(code);\n    }\n    effects.consume(code);\n    return continuationClose;\n  }\n\n  /**\n   * Done.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationAfter(code) {\n    effects.exit(\"htmlFlow\");\n    // // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    // // No longer concrete.\n    // tokenizer.concrete = false\n    return ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuationStart(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   * At eol, before continuation.\n   *\n   * ```markdown\n   * > | * ```js\n   *            ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code);\n      effects.exit(\"lineEnding\");\n      return after;\n    }\n    return nok(code);\n  }\n\n  /**\n   * A continuation.\n   *\n   * ```markdown\n   *   | * ```js\n   * > | b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLineBefore(effects, ok, nok) {\n  return start;\n\n  /**\n   * Before eol, expecting blank line.\n   *\n   * ```markdown\n   * > | <div>\n   *          ^\n   *   |\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return effects.attempt(blankLine, ok, nok);\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { asciiAlphanumeric, asciiAlpha, markdownLineEndingOrSpace, markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const htmlText = {\n  name: 'htmlText',\n  tokenize: tokenizeHtmlText\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlText(effects, ok, nok) {\n  const self = this;\n  /** @type {NonNullable<Code> | undefined} */\n  let marker;\n  /** @type {number} */\n  let index;\n  /** @type {State} */\n  let returnState;\n  return start;\n\n  /**\n   * Start of HTML (text).\n   *\n   * ```markdown\n   * > | a <b> c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"htmlText\");\n    effects.enter(\"htmlTextData\");\n    effects.consume(code);\n    return open;\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | a <b> c\n   *        ^\n   * > | a <!doctype> c\n   *        ^\n   * > | a <!--b--> c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code);\n      return declarationOpen;\n    }\n    if (code === 47) {\n      effects.consume(code);\n      return tagCloseStart;\n    }\n    if (code === 63) {\n      effects.consume(code);\n      return instruction;\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return tagOpen;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | a <!doctype> c\n   *         ^\n   * > | a <!--b--> c\n   *         ^\n   * > | a <![CDATA[>&<]]> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return commentOpenInside;\n    }\n    if (code === 91) {\n      effects.consume(code);\n      index = 0;\n      return cdataOpenInside;\n    }\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return declaration;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In a comment, after `<!-`, at another `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return commentEnd;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In comment.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function comment(code) {\n    if (code === null) {\n      return nok(code);\n    }\n    if (code === 45) {\n      effects.consume(code);\n      return commentClose;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = comment;\n      return lineEndingBefore(code);\n    }\n    effects.consume(code);\n    return comment;\n  }\n\n  /**\n   * In comment, after `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentClose(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return commentEnd;\n    }\n    return comment(code);\n  }\n\n  /**\n   * In comment, after `--`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentEnd(code) {\n    return code === 62 ? end(code) : code === 45 ? commentClose(code) : comment(code);\n  }\n\n  /**\n   * After `<![`, in CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *          ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = \"CDATA[\";\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code);\n      return index === value.length ? cdata : cdataOpenInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In CDATA.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdata(code) {\n    if (code === null) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.consume(code);\n      return cdataClose;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = cdata;\n      return lineEndingBefore(code);\n    }\n    effects.consume(code);\n    return cdata;\n  }\n\n  /**\n   * In CDATA, after `]`, at another `]`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataClose(code) {\n    if (code === 93) {\n      effects.consume(code);\n      return cdataEnd;\n    }\n    return cdata(code);\n  }\n\n  /**\n   * In CDATA, after `]]`, at `>`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataEnd(code) {\n    if (code === 62) {\n      return end(code);\n    }\n    if (code === 93) {\n      effects.consume(code);\n      return cdataEnd;\n    }\n    return cdata(code);\n  }\n\n  /**\n   * In declaration.\n   *\n   * ```markdown\n   * > | a <!b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declaration(code) {\n    if (code === null || code === 62) {\n      return end(code);\n    }\n    if (markdownLineEnding(code)) {\n      returnState = declaration;\n      return lineEndingBefore(code);\n    }\n    effects.consume(code);\n    return declaration;\n  }\n\n  /**\n   * In instruction.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instruction(code) {\n    if (code === null) {\n      return nok(code);\n    }\n    if (code === 63) {\n      effects.consume(code);\n      return instructionClose;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = instruction;\n      return lineEndingBefore(code);\n    }\n    effects.consume(code);\n    return instruction;\n  }\n\n  /**\n   * In instruction, after `?`, at `>`.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instructionClose(code) {\n    return code === 62 ? end(code) : instruction(code);\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return tagClose;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `</x`, in a tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagClose(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code);\n      return tagClose;\n    }\n    return tagCloseBetween(code);\n  }\n\n  /**\n   * In closing tag, after tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseBetween(code) {\n    if (markdownLineEnding(code)) {\n      returnState = tagCloseBetween;\n      return lineEndingBefore(code);\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return tagCloseBetween;\n    }\n    return end(code);\n  }\n\n  /**\n   * After `<x`, in opening tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpen(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code);\n      return tagOpen;\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In opening tag, after tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenBetween(code) {\n    if (code === 47) {\n      effects.consume(code);\n      return end;\n    }\n\n    // ASCII alphabetical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code);\n      return tagOpenAttributeName;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenBetween;\n      return lineEndingBefore(code);\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return tagOpenBetween;\n    }\n    return end(code);\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeName(code) {\n    // ASCII alphabetical and `-`, `.`, `:`, and `_`.\n    if (code === 45 || code === 46 || code === 58 || code === 95 || asciiAlphanumeric(code)) {\n      effects.consume(code);\n      return tagOpenAttributeName;\n    }\n    return tagOpenAttributeNameAfter(code);\n  }\n\n  /**\n   * After attribute name, before initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code);\n      return tagOpenAttributeValueBefore;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeNameAfter;\n      return lineEndingBefore(code);\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return tagOpenAttributeNameAfter;\n    }\n    return tagOpenBetween(code);\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueBefore(code) {\n    if (code === null || code === 60 || code === 61 || code === 62 || code === 96) {\n      return nok(code);\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code);\n      marker = code;\n      return tagOpenAttributeValueQuoted;\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueBefore;\n      return lineEndingBefore(code);\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code);\n      return tagOpenAttributeValueBefore;\n    }\n    effects.consume(code);\n    return tagOpenAttributeValueUnquoted;\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuoted(code) {\n    if (code === marker) {\n      effects.consume(code);\n      marker = undefined;\n      return tagOpenAttributeValueQuotedAfter;\n    }\n    if (code === null) {\n      return nok(code);\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueQuoted;\n      return lineEndingBefore(code);\n    }\n    effects.consume(code);\n    return tagOpenAttributeValueQuoted;\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueUnquoted(code) {\n    if (code === null || code === 34 || code === 39 || code === 60 || code === 61 || code === 96) {\n      return nok(code);\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code);\n    }\n    effects.consume(code);\n    return tagOpenAttributeValueUnquoted;\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the end\n   * of the tag.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In certain circumstances of a tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function end(code) {\n    if (code === 62) {\n      effects.consume(code);\n      effects.exit(\"htmlTextData\");\n      effects.exit(\"htmlText\");\n      return ok;\n    }\n    return nok(code);\n  }\n\n  /**\n   * At eol.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   * > | a <!--a\n   *            ^\n   *   | b-->\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingBefore(code) {\n    effects.exit(\"htmlTextData\");\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return lineEndingAfter;\n  }\n\n  /**\n   * After eol, at optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfter(code) {\n    // Always populated by defaults.\n\n    return markdownSpace(code) ? factorySpace(effects, lineEndingAfterPrefix, \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code) : lineEndingAfterPrefix(code);\n  }\n\n  /**\n   * After eol, after optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfterPrefix(code) {\n    effects.enter(\"htmlTextData\");\n    return returnState(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   Event,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer,\n *   Token\n * } from 'micromark-util-types'\n */\n\nimport { factoryDestination } from 'micromark-factory-destination';\nimport { factoryLabel } from 'micromark-factory-label';\nimport { factoryTitle } from 'micromark-factory-title';\nimport { factoryWhitespace } from 'micromark-factory-whitespace';\nimport { markdownLineEndingOrSpace } from 'micromark-util-character';\nimport { push, splice } from 'micromark-util-chunked';\nimport { normalizeIdentifier } from 'micromark-util-normalize-identifier';\nimport { resolveAll } from 'micromark-util-resolve-all';\n/** @type {Construct} */\nexport const labelEnd = {\n  name: 'labelEnd',\n  resolveAll: resolveAllLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  tokenize: tokenizeLabelEnd\n};\n\n/** @type {Construct} */\nconst resourceConstruct = {\n  tokenize: tokenizeResource\n};\n/** @type {Construct} */\nconst referenceFullConstruct = {\n  tokenize: tokenizeReferenceFull\n};\n/** @type {Construct} */\nconst referenceCollapsedConstruct = {\n  tokenize: tokenizeReferenceCollapsed\n};\n\n/** @type {Resolver} */\nfunction resolveAllLabelEnd(events) {\n  let index = -1;\n  /** @type {Array<Event>} */\n  const newEvents = [];\n  while (++index < events.length) {\n    const token = events[index][1];\n    newEvents.push(events[index]);\n    if (token.type === \"labelImage\" || token.type === \"labelLink\" || token.type === \"labelEnd\") {\n      // Remove the marker.\n      const offset = token.type === \"labelImage\" ? 4 : 2;\n      token.type = \"data\";\n      index += offset;\n    }\n  }\n\n  // If the events are equal, we don't have to copy newEvents to events\n  if (events.length !== newEvents.length) {\n    splice(events, 0, events.length, newEvents);\n  }\n  return events;\n}\n\n/** @type {Resolver} */\nfunction resolveToLabelEnd(events, context) {\n  let index = events.length;\n  let offset = 0;\n  /** @type {Token} */\n  let token;\n  /** @type {number | undefined} */\n  let open;\n  /** @type {number | undefined} */\n  let close;\n  /** @type {Array<Event>} */\n  let media;\n\n  // Find an opening.\n  while (index--) {\n    token = events[index][1];\n    if (open) {\n      // If we see another link, or inactive link label, we’ve been here before.\n      if (token.type === \"link\" || token.type === \"labelLink\" && token._inactive) {\n        break;\n      }\n\n      // Mark other link openings as inactive, as we can’t have links in\n      // links.\n      if (events[index][0] === 'enter' && token.type === \"labelLink\") {\n        token._inactive = true;\n      }\n    } else if (close) {\n      if (events[index][0] === 'enter' && (token.type === \"labelImage\" || token.type === \"labelLink\") && !token._balanced) {\n        open = index;\n        if (token.type !== \"labelLink\") {\n          offset = 2;\n          break;\n        }\n      }\n    } else if (token.type === \"labelEnd\") {\n      close = index;\n    }\n  }\n  const group = {\n    type: events[open][1].type === \"labelLink\" ? \"link\" : \"image\",\n    start: {\n      ...events[open][1].start\n    },\n    end: {\n      ...events[events.length - 1][1].end\n    }\n  };\n  const label = {\n    type: \"label\",\n    start: {\n      ...events[open][1].start\n    },\n    end: {\n      ...events[close][1].end\n    }\n  };\n  const text = {\n    type: \"labelText\",\n    start: {\n      ...events[open + offset + 2][1].end\n    },\n    end: {\n      ...events[close - 2][1].start\n    }\n  };\n  media = [['enter', group, context], ['enter', label, context]];\n\n  // Opening marker.\n  media = push(media, events.slice(open + 1, open + offset + 3));\n\n  // Text open.\n  media = push(media, [['enter', text, context]]);\n\n  // Always populated by defaults.\n\n  // Between.\n  media = push(media, resolveAll(context.parser.constructs.insideSpan.null, events.slice(open + offset + 4, close - 3), context));\n\n  // Text close, marker close, label close.\n  media = push(media, [['exit', text, context], events[close - 2], events[close - 1], ['exit', label, context]]);\n\n  // Reference, resource, or so.\n  media = push(media, events.slice(close + 1));\n\n  // Media close.\n  media = push(media, [['exit', group, context]]);\n  splice(events, open, events.length, media);\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeLabelEnd(effects, ok, nok) {\n  const self = this;\n  let index = self.events.length;\n  /** @type {Token} */\n  let labelStart;\n  /** @type {boolean} */\n  let defined;\n\n  // Find an opening.\n  while (index--) {\n    if ((self.events[index][1].type === \"labelImage\" || self.events[index][1].type === \"labelLink\") && !self.events[index][1]._balanced) {\n      labelStart = self.events[index][1];\n      break;\n    }\n  }\n  return start;\n\n  /**\n   * Start of label end.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // If there is not an okay opening.\n    if (!labelStart) {\n      return nok(code);\n    }\n\n    // If the corresponding label (link) start is marked as inactive,\n    // it means we’d be wrapping a link, like this:\n    //\n    // ```markdown\n    // > | a [b [c](d) e](f) g.\n    //                  ^\n    // ```\n    //\n    // We can’t have that, so it’s just balanced brackets.\n    if (labelStart._inactive) {\n      return labelEndNok(code);\n    }\n    defined = self.parser.defined.includes(normalizeIdentifier(self.sliceSerialize({\n      start: labelStart.end,\n      end: self.now()\n    })));\n    effects.enter(\"labelEnd\");\n    effects.enter(\"labelMarker\");\n    effects.consume(code);\n    effects.exit(\"labelMarker\");\n    effects.exit(\"labelEnd\");\n    return after;\n  }\n\n  /**\n   * After `]`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Note: `markdown-rs` also parses GFM footnotes here, which for us is in\n    // an extension.\n\n    // Resource (`[asd](fgh)`)?\n    if (code === 40) {\n      return effects.attempt(resourceConstruct, labelEndOk, defined ? labelEndOk : labelEndNok)(code);\n    }\n\n    // Full (`[asd][fgh]`) or collapsed (`[asd][]`) reference?\n    if (code === 91) {\n      return effects.attempt(referenceFullConstruct, labelEndOk, defined ? referenceNotFull : labelEndNok)(code);\n    }\n\n    // Shortcut (`[asd]`) reference?\n    return defined ? labelEndOk(code) : labelEndNok(code);\n  }\n\n  /**\n   * After `]`, at `[`, but not at a full reference.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] b\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceNotFull(code) {\n    return effects.attempt(referenceCollapsedConstruct, labelEndOk, labelEndNok)(code);\n  }\n\n  /**\n   * Done, we found something.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *           ^\n   * > | [a][b] c\n   *           ^\n   * > | [a][] b\n   *          ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndOk(code) {\n    // Note: `markdown-rs` does a bunch of stuff here.\n    return ok(code);\n  }\n\n  /**\n   * Done, it’s nothing.\n   *\n   * There was an okay opening, but we didn’t match anything.\n   *\n   * ```markdown\n   * > | [a](b c\n   *        ^\n   * > | [a][b c\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndNok(code) {\n    labelStart._balanced = true;\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeResource(effects, ok, nok) {\n  return resourceStart;\n\n  /**\n   * At a resource.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceStart(code) {\n    effects.enter(\"resource\");\n    effects.enter(\"resourceMarker\");\n    effects.consume(code);\n    effects.exit(\"resourceMarker\");\n    return resourceBefore;\n  }\n\n  /**\n   * In resource, after `(`, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBefore(code) {\n    return markdownLineEndingOrSpace(code) ? factoryWhitespace(effects, resourceOpen)(code) : resourceOpen(code);\n  }\n\n  /**\n   * In resource, after optional whitespace, at `)` or a destination.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceOpen(code) {\n    if (code === 41) {\n      return resourceEnd(code);\n    }\n    return factoryDestination(effects, resourceDestinationAfter, resourceDestinationMissing, \"resourceDestination\", \"resourceDestinationLiteral\", \"resourceDestinationLiteralMarker\", \"resourceDestinationRaw\", \"resourceDestinationString\", 32)(code);\n  }\n\n  /**\n   * In resource, after destination, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationAfter(code) {\n    return markdownLineEndingOrSpace(code) ? factoryWhitespace(effects, resourceBetween)(code) : resourceEnd(code);\n  }\n\n  /**\n   * At invalid destination.\n   *\n   * ```markdown\n   * > | [a](<<) b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationMissing(code) {\n    return nok(code);\n  }\n\n  /**\n   * In resource, after destination and whitespace, at `(` or title.\n   *\n   * ```markdown\n   * > | [a](b ) c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBetween(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      return factoryTitle(effects, resourceTitleAfter, nok, \"resourceTitle\", \"resourceTitleMarker\", \"resourceTitleString\")(code);\n    }\n    return resourceEnd(code);\n  }\n\n  /**\n   * In resource, after title, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b \"c\") d\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceTitleAfter(code) {\n    return markdownLineEndingOrSpace(code) ? factoryWhitespace(effects, resourceEnd)(code) : resourceEnd(code);\n  }\n\n  /**\n   * In resource, at `)`.\n   *\n   * ```markdown\n   * > | [a](b) d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceEnd(code) {\n    if (code === 41) {\n      effects.enter(\"resourceMarker\");\n      effects.consume(code);\n      effects.exit(\"resourceMarker\");\n      effects.exit(\"resource\");\n      return ok;\n    }\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceFull(effects, ok, nok) {\n  const self = this;\n  return referenceFull;\n\n  /**\n   * In a reference (full), at the `[`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFull(code) {\n    return factoryLabel.call(self, effects, referenceFullAfter, referenceFullMissing, \"reference\", \"referenceMarker\", \"referenceString\")(code);\n  }\n\n  /**\n   * In a reference (full), after `]`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullAfter(code) {\n    return self.parser.defined.includes(normalizeIdentifier(self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1))) ? ok(code) : nok(code);\n  }\n\n  /**\n   * In reference (full) that was missing.\n   *\n   * ```markdown\n   * > | [a][b d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullMissing(code) {\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceCollapsed(effects, ok, nok) {\n  return referenceCollapsedStart;\n\n  /**\n   * In reference (collapsed), at `[`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceCollapsedStart(code) {\n    // We only attempt a collapsed label if there’s a `[`.\n\n    effects.enter(\"reference\");\n    effects.enter(\"referenceMarker\");\n    effects.consume(code);\n    effects.exit(\"referenceMarker\");\n    return referenceCollapsedOpen;\n  }\n\n  /**\n   * In reference (collapsed), at `]`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *         ^\n   * ```\n   *\n   *  @type {State}\n   */\n  function referenceCollapsedOpen(code) {\n    if (code === 93) {\n      effects.enter(\"referenceMarker\");\n      effects.consume(code);\n      effects.exit(\"referenceMarker\");\n      effects.exit(\"reference\");\n      return ok;\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { labelEnd } from './label-end.js';\n\n/** @type {Construct} */\nexport const labelStartImage = {\n  name: 'labelStartImage',\n  resolveAll: labelEnd.resolveAll,\n  tokenize: tokenizeLabelStartImage\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartImage(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   * Start of label (image) start.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"labelImage\");\n    effects.enter(\"labelImageMarker\");\n    effects.consume(code);\n    effects.exit(\"labelImageMarker\");\n    return open;\n  }\n\n  /**\n   * After `!`, at `[`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 91) {\n      effects.enter(\"labelMarker\");\n      effects.consume(code);\n      effects.exit(\"labelMarker\");\n      effects.exit(\"labelImage\");\n      return after;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After `![`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *         ^\n   * ```\n   *\n   * This is needed in because, when GFM footnotes are enabled, images never\n   * form when started with a `^`.\n   * Instead, links form:\n   *\n   * ```markdown\n   * ![^a](b)\n   *\n   * ![^a][b]\n   *\n   * [b]: c\n   * ```\n   *\n   * ```html\n   * <p>!<a href=\\\"b\\\">^a</a></p>\n   * <p>!<a href=\\\"c\\\">^a</a></p>\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // To do: use a new field to do this, this is still needed for\n    // `micromark-extension-gfm-footnote`, but the `label-start-link`\n    // behavior isn’t.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs ? nok(code) : ok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { labelEnd } from './label-end.js';\n\n/** @type {Construct} */\nexport const labelStartLink = {\n  name: 'labelStartLink',\n  resolveAll: labelEnd.resolveAll,\n  tokenize: tokenizeLabelStartLink\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartLink(effects, ok, nok) {\n  const self = this;\n  return start;\n\n  /**\n   * Start of label (link) start.\n   *\n   * ```markdown\n   * > | a [b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"labelLink\");\n    effects.enter(\"labelMarker\");\n    effects.consume(code);\n    effects.exit(\"labelMarker\");\n    effects.exit(\"labelLink\");\n    return after;\n  }\n\n  /** @type {State} */\n  function after(code) {\n    // To do: this isn’t needed in `micromark-extension-gfm-footnote`,\n    // remove.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs ? nok(code) : ok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\n/** @type {Construct} */\nexport const lineEnding = {\n  name: 'lineEnding',\n  tokenize: tokenizeLineEnding\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeLineEnding(effects, ok) {\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, ok, \"linePrefix\");\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const thematicBreak = {\n  name: 'thematicBreak',\n  tokenize: tokenizeThematicBreak\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeThematicBreak(effects, ok, nok) {\n  let size = 0;\n  /** @type {NonNullable<Code>} */\n  let marker;\n  return start;\n\n  /**\n   * Start of thematic break.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(\"thematicBreak\");\n    // To do: parse indent like `markdown-rs`.\n    return before(code);\n  }\n\n  /**\n   * After optional whitespace, at marker.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    marker = code;\n    return atBreak(code);\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.enter(\"thematicBreakSequence\");\n      return sequence(code);\n    }\n    if (size >= 3 && (code === null || markdownLineEnding(code))) {\n      effects.exit(\"thematicBreak\");\n      return ok(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequence(code) {\n    if (code === marker) {\n      effects.consume(code);\n      size++;\n      return sequence;\n    }\n    effects.exit(\"thematicBreakSequence\");\n    return markdownSpace(code) ? factorySpace(effects, atBreak, \"whitespace\")(code) : atBreak(code);\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   Exiter,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { asciiDigit, markdownSpace } from 'micromark-util-character';\nimport { blankLine } from './blank-line.js';\nimport { thematicBreak } from './thematic-break.js';\n\n/** @type {Construct} */\nexport const list = {\n  continuation: {\n    tokenize: tokenizeListContinuation\n  },\n  exit: tokenizeListEnd,\n  name: 'list',\n  tokenize: tokenizeListStart\n};\n\n/** @type {Construct} */\nconst listItemPrefixWhitespaceConstruct = {\n  partial: true,\n  tokenize: tokenizeListItemPrefixWhitespace\n};\n\n/** @type {Construct} */\nconst indentConstruct = {\n  partial: true,\n  tokenize: tokenizeIndent\n};\n\n// To do: `markdown-rs` parses list items on their own and later stitches them\n// together.\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeListStart(effects, ok, nok) {\n  const self = this;\n  const tail = self.events[self.events.length - 1];\n  let initialSize = tail && tail[1].type === \"linePrefix\" ? tail[2].sliceSerialize(tail[1], true).length : 0;\n  let size = 0;\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    const kind = self.containerState.type || (code === 42 || code === 43 || code === 45 ? \"listUnordered\" : \"listOrdered\");\n    if (kind === \"listUnordered\" ? !self.containerState.marker || code === self.containerState.marker : asciiDigit(code)) {\n      if (!self.containerState.type) {\n        self.containerState.type = kind;\n        effects.enter(kind, {\n          _container: true\n        });\n      }\n      if (kind === \"listUnordered\") {\n        effects.enter(\"listItemPrefix\");\n        return code === 42 || code === 45 ? effects.check(thematicBreak, nok, atMarker)(code) : atMarker(code);\n      }\n      if (!self.interrupt || code === 49) {\n        effects.enter(\"listItemPrefix\");\n        effects.enter(\"listItemValue\");\n        return inside(code);\n      }\n    }\n    return nok(code);\n  }\n\n  /** @type {State} */\n  function inside(code) {\n    if (asciiDigit(code) && ++size < 10) {\n      effects.consume(code);\n      return inside;\n    }\n    if ((!self.interrupt || size < 2) && (self.containerState.marker ? code === self.containerState.marker : code === 41 || code === 46)) {\n      effects.exit(\"listItemValue\");\n      return atMarker(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * @type {State}\n   **/\n  function atMarker(code) {\n    effects.enter(\"listItemMarker\");\n    effects.consume(code);\n    effects.exit(\"listItemMarker\");\n    self.containerState.marker = self.containerState.marker || code;\n    return effects.check(blankLine,\n    // Can’t be empty when interrupting.\n    self.interrupt ? nok : onBlank, effects.attempt(listItemPrefixWhitespaceConstruct, endOfPrefix, otherPrefix));\n  }\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.initialBlankLine = true;\n    initialSize++;\n    return endOfPrefix(code);\n  }\n\n  /** @type {State} */\n  function otherPrefix(code) {\n    if (markdownSpace(code)) {\n      effects.enter(\"listItemPrefixWhitespace\");\n      effects.consume(code);\n      effects.exit(\"listItemPrefixWhitespace\");\n      return endOfPrefix;\n    }\n    return nok(code);\n  }\n\n  /** @type {State} */\n  function endOfPrefix(code) {\n    self.containerState.size = initialSize + self.sliceSerialize(effects.exit(\"listItemPrefix\"), true).length;\n    return ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeListContinuation(effects, ok, nok) {\n  const self = this;\n  self.containerState._closeFlow = undefined;\n  return effects.check(blankLine, onBlank, notBlank);\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.furtherBlankLines = self.containerState.furtherBlankLines || self.containerState.initialBlankLine;\n\n    // We have a blank line.\n    // Still, try to consume at most the items size.\n    return factorySpace(effects, ok, \"listItemIndent\", self.containerState.size + 1)(code);\n  }\n\n  /** @type {State} */\n  function notBlank(code) {\n    if (self.containerState.furtherBlankLines || !markdownSpace(code)) {\n      self.containerState.furtherBlankLines = undefined;\n      self.containerState.initialBlankLine = undefined;\n      return notInCurrentItem(code);\n    }\n    self.containerState.furtherBlankLines = undefined;\n    self.containerState.initialBlankLine = undefined;\n    return effects.attempt(indentConstruct, ok, notInCurrentItem)(code);\n  }\n\n  /** @type {State} */\n  function notInCurrentItem(code) {\n    // While we do continue, we signal that the flow should be closed.\n    self.containerState._closeFlow = true;\n    // As we’re closing flow, we’re no longer interrupting.\n    self.interrupt = undefined;\n    // Always populated by defaults.\n\n    return factorySpace(effects, effects.attempt(list, ok, nok), \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this;\n  return factorySpace(effects, afterPrefix, \"listItemIndent\", self.containerState.size + 1);\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return tail && tail[1].type === \"listItemIndent\" && tail[2].sliceSerialize(tail[1], true).length === self.containerState.size ? ok(code) : nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Exiter}\n */\nfunction tokenizeListEnd(effects) {\n  effects.exit(this.containerState.type);\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeListItemPrefixWhitespace(effects, ok, nok) {\n  const self = this;\n\n  // Always populated by defaults.\n\n  return factorySpace(effects, afterPrefix, \"listItemPrefixWhitespace\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4 + 1);\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return !markdownSpace(code) && tail && tail[1].type === \"listItemPrefixWhitespace\" ? ok(code) : nok(code);\n  }\n}","/**\n * @import {\n *   Code,\n *   Construct,\n *   Resolver,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const setextUnderline = {\n  name: 'setextUnderline',\n  resolveTo: resolveToSetextUnderline,\n  tokenize: tokenizeSetextUnderline\n};\n\n/** @type {Resolver} */\nfunction resolveToSetextUnderline(events, context) {\n  // To do: resolve like `markdown-rs`.\n  let index = events.length;\n  /** @type {number | undefined} */\n  let content;\n  /** @type {number | undefined} */\n  let text;\n  /** @type {number | undefined} */\n  let definition;\n\n  // Find the opening of the content.\n  // It’ll always exist: we don’t tokenize if it isn’t there.\n  while (index--) {\n    if (events[index][0] === 'enter') {\n      if (events[index][1].type === \"content\") {\n        content = index;\n        break;\n      }\n      if (events[index][1].type === \"paragraph\") {\n        text = index;\n      }\n    }\n    // Exit\n    else {\n      if (events[index][1].type === \"content\") {\n        // Remove the content end (if needed we’ll add it later)\n        events.splice(index, 1);\n      }\n      if (!definition && events[index][1].type === \"definition\") {\n        definition = index;\n      }\n    }\n  }\n  const heading = {\n    type: \"setextHeading\",\n    start: {\n      ...events[content][1].start\n    },\n    end: {\n      ...events[events.length - 1][1].end\n    }\n  };\n\n  // Change the paragraph to setext heading text.\n  events[text][1].type = \"setextHeadingText\";\n\n  // If we have definitions in the content, we’ll keep on having content,\n  // but we need move it.\n  if (definition) {\n    events.splice(text, 0, ['enter', heading, context]);\n    events.splice(definition + 1, 0, ['exit', events[content][1], context]);\n    events[content][1].end = {\n      ...events[definition][1].end\n    };\n  } else {\n    events[content][1] = heading;\n  }\n\n  // Add the heading exit at the end.\n  events.push(['exit', heading, context]);\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeSetextUnderline(effects, ok, nok) {\n  const self = this;\n  /** @type {NonNullable<Code>} */\n  let marker;\n  return start;\n\n  /**\n   * At start of heading (setext) underline.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length;\n    /** @type {boolean | undefined} */\n    let paragraph;\n    // Find an opening.\n    while (index--) {\n      // Skip enter/exit of line ending, line prefix, and content.\n      // We can now either have a definition or a paragraph.\n      if (self.events[index][1].type !== \"lineEnding\" && self.events[index][1].type !== \"linePrefix\" && self.events[index][1].type !== \"content\") {\n        paragraph = self.events[index][1].type === \"paragraph\";\n        break;\n      }\n    }\n\n    // To do: handle lazy/pierce like `markdown-rs`.\n    // To do: parse indent like `markdown-rs`.\n    if (!self.parser.lazy[self.now().line] && (self.interrupt || paragraph)) {\n      effects.enter(\"setextHeadingLine\");\n      marker = code;\n      return before(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * After optional whitespace, at `-` or `=`.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter(\"setextHeadingLineSequence\");\n    return inside(code);\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code);\n      return inside;\n    }\n    effects.exit(\"setextHeadingLineSequence\");\n    return markdownSpace(code) ? factorySpace(effects, after, \"lineSuffix\")(code) : after(code);\n  }\n\n  /**\n   * After sequence, after optional whitespace.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit(\"setextHeadingLine\");\n      return ok(code);\n    }\n    return nok(code);\n  }\n}","/**\n * @import {\n *   InitialConstruct,\n *   Initializer,\n *   State,\n *   TokenizeContext\n * } from 'micromark-util-types'\n */\n\nimport { blankLine, content } from 'micromark-core-commonmark';\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding } from 'micromark-util-character';\n/** @type {InitialConstruct} */\nexport const flow = {\n  tokenize: initializeFlow\n};\n\n/**\n * @this {TokenizeContext}\n *   Self.\n * @type {Initializer}\n *   Initializer.\n */\nfunction initializeFlow(effects) {\n  const self = this;\n  const initial = effects.attempt(\n  // Try to parse a blank line.\n  blankLine, atBlankEnding,\n  // Try to parse initial flow (essentially, only code).\n  effects.attempt(this.parser.constructs.flowInitial, afterConstruct, factorySpace(effects, effects.attempt(this.parser.constructs.flow, afterConstruct, effects.attempt(content, afterConstruct)), \"linePrefix\")));\n  return initial;\n\n  /** @type {State} */\n  function atBlankEnding(code) {\n    if (code === null) {\n      effects.consume(code);\n      return;\n    }\n    effects.enter(\"lineEndingBlank\");\n    effects.consume(code);\n    effects.exit(\"lineEndingBlank\");\n    self.currentConstruct = undefined;\n    return initial;\n  }\n\n  /** @type {State} */\n  function afterConstruct(code) {\n    if (code === null) {\n      effects.consume(code);\n      return;\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code);\n    effects.exit(\"lineEnding\");\n    self.currentConstruct = undefined;\n    return initial;\n  }\n}","/**\n * @import {\n *   Code,\n *   InitialConstruct,\n *   Initializer,\n *   Resolver,\n *   State,\n *   TokenizeContext\n * } from 'micromark-util-types'\n */\n\nexport const resolver = {\n  resolveAll: createResolver()\n};\nexport const string = initializeFactory('string');\nexport const text = initializeFactory('text');\n\n/**\n * @param {'string' | 'text'} field\n *   Field.\n * @returns {InitialConstruct}\n *   Construct.\n */\nfunction initializeFactory(field) {\n  return {\n    resolveAll: createResolver(field === 'text' ? resolveAllLineSuffixes : undefined),\n    tokenize: initializeText\n  };\n\n  /**\n   * @this {TokenizeContext}\n   *   Context.\n   * @type {Initializer}\n   */\n  function initializeText(effects) {\n    const self = this;\n    const constructs = this.parser.constructs[field];\n    const text = effects.attempt(constructs, start, notText);\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      return atBreak(code) ? text(code) : notText(code);\n    }\n\n    /** @type {State} */\n    function notText(code) {\n      if (code === null) {\n        effects.consume(code);\n        return;\n      }\n      effects.enter(\"data\");\n      effects.consume(code);\n      return data;\n    }\n\n    /** @type {State} */\n    function data(code) {\n      if (atBreak(code)) {\n        effects.exit(\"data\");\n        return text(code);\n      }\n\n      // Data.\n      effects.consume(code);\n      return data;\n    }\n\n    /**\n     * @param {Code} code\n     *   Code.\n     * @returns {boolean}\n     *   Whether the code is a break.\n     */\n    function atBreak(code) {\n      if (code === null) {\n        return true;\n      }\n      const list = constructs[code];\n      let index = -1;\n      if (list) {\n        // Always populated by defaults.\n\n        while (++index < list.length) {\n          const item = list[index];\n          if (!item.previous || item.previous.call(self, self.previous)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n}\n\n/**\n * @param {Resolver | undefined} [extraResolver]\n *   Resolver.\n * @returns {Resolver}\n *   Resolver.\n */\nfunction createResolver(extraResolver) {\n  return resolveAllText;\n\n  /** @type {Resolver} */\n  function resolveAllText(events, context) {\n    let index = -1;\n    /** @type {number | undefined} */\n    let enter;\n\n    // A rather boring computation (to merge adjacent `data` events) which\n    // improves mm performance by 29%.\n    while (++index <= events.length) {\n      if (enter === undefined) {\n        if (events[index] && events[index][1].type === \"data\") {\n          enter = index;\n          index++;\n        }\n      } else if (!events[index] || events[index][1].type !== \"data\") {\n        // Don’t do anything if there is one data token.\n        if (index !== enter + 2) {\n          events[enter][1].end = events[index - 1][1].end;\n          events.splice(enter + 2, index - enter - 2);\n          index = enter + 2;\n        }\n        enter = undefined;\n      }\n    }\n    return extraResolver ? extraResolver(events, context) : events;\n  }\n}\n\n/**\n * A rather ugly set of instructions which again looks at chunks in the input\n * stream.\n * The reason to do this here is that it is *much* faster to parse in reverse.\n * And that we can’t hook into `null` to split the line suffix before an EOF.\n * To do: figure out if we can make this into a clean utility, or even in core.\n * As it will be useful for GFMs literal autolink extension (and maybe even\n * tables?)\n *\n * @type {Resolver}\n */\nfunction resolveAllLineSuffixes(events, context) {\n  let eventIndex = 0; // Skip first.\n\n  while (++eventIndex <= events.length) {\n    if ((eventIndex === events.length || events[eventIndex][1].type === \"lineEnding\") && events[eventIndex - 1][1].type === \"data\") {\n      const data = events[eventIndex - 1][1];\n      const chunks = context.sliceStream(data);\n      let index = chunks.length;\n      let bufferIndex = -1;\n      let size = 0;\n      /** @type {boolean | undefined} */\n      let tabs;\n      while (index--) {\n        const chunk = chunks[index];\n        if (typeof chunk === 'string') {\n          bufferIndex = chunk.length;\n          while (chunk.charCodeAt(bufferIndex - 1) === 32) {\n            size++;\n            bufferIndex--;\n          }\n          if (bufferIndex) break;\n          bufferIndex = -1;\n        }\n        // Number\n        else if (chunk === -2) {\n          tabs = true;\n          size++;\n        } else if (chunk === -1) {\n          // Empty\n        } else {\n          // Replacement character, exit.\n          index++;\n          break;\n        }\n      }\n\n      // Allow final trailing whitespace.\n      if (context._contentTypeTextTrailing && eventIndex === events.length) {\n        size = 0;\n      }\n      if (size) {\n        const token = {\n          type: eventIndex === events.length || tabs || size < 2 ? \"lineSuffix\" : \"hardBreakTrailing\",\n          start: {\n            _bufferIndex: index ? bufferIndex : data.start._bufferIndex + bufferIndex,\n            _index: data.start._index + index,\n            line: data.end.line,\n            column: data.end.column - size,\n            offset: data.end.offset - size\n          },\n          end: {\n            ...data.end\n          }\n        };\n        data.end = {\n          ...token.start\n        };\n        if (data.start.offset === data.end.offset) {\n          Object.assign(data, token);\n        } else {\n          events.splice(eventIndex, 0, ['enter', token, context], ['exit', token, context]);\n          eventIndex += 2;\n        }\n      }\n      eventIndex++;\n    }\n  }\n  return events;\n}","/**\n * @import {Extension} from 'micromark-util-types'\n */\n\nimport { attention, autolink, blockQuote, characterEscape, characterReference, codeFenced, codeIndented, codeText, definition, hardBreakEscape, headingAtx, htmlFlow, htmlText, labelEnd, labelStartImage, labelStartLink, lineEnding, list, setextUnderline, thematicBreak } from 'micromark-core-commonmark';\nimport { resolver as resolveText } from './initialize/text.js';\n\n/** @satisfies {Extension['document']} */\nexport const document = {\n  [42]: list,\n  [43]: list,\n  [45]: list,\n  [48]: list,\n  [49]: list,\n  [50]: list,\n  [51]: list,\n  [52]: list,\n  [53]: list,\n  [54]: list,\n  [55]: list,\n  [56]: list,\n  [57]: list,\n  [62]: blockQuote\n};\n\n/** @satisfies {Extension['contentInitial']} */\nexport const contentInitial = {\n  [91]: definition\n};\n\n/** @satisfies {Extension['flowInitial']} */\nexport const flowInitial = {\n  [-2]: codeIndented,\n  [-1]: codeIndented,\n  [32]: codeIndented\n};\n\n/** @satisfies {Extension['flow']} */\nexport const flow = {\n  [35]: headingAtx,\n  [42]: thematicBreak,\n  [45]: [setextUnderline, thematicBreak],\n  [60]: htmlFlow,\n  [61]: setextUnderline,\n  [95]: thematicBreak,\n  [96]: codeFenced,\n  [126]: codeFenced\n};\n\n/** @satisfies {Extension['string']} */\nexport const string = {\n  [38]: characterReference,\n  [92]: characterEscape\n};\n\n/** @satisfies {Extension['text']} */\nexport const text = {\n  [-5]: lineEnding,\n  [-4]: lineEnding,\n  [-3]: lineEnding,\n  [33]: labelStartImage,\n  [38]: characterReference,\n  [42]: attention,\n  [60]: [autolink, htmlText],\n  [91]: labelStartLink,\n  [92]: [hardBreakEscape, characterEscape],\n  [93]: labelEnd,\n  [95]: attention,\n  [96]: codeText\n};\n\n/** @satisfies {Extension['insideSpan']} */\nexport const insideSpan = {\n  null: [attention, resolveText]\n};\n\n/** @satisfies {Extension['attentionMarkers']} */\nexport const attentionMarkers = {\n  null: [42, 95]\n};\n\n/** @satisfies {Extension['disable']} */\nexport const disable = {\n  null: []\n};","/**\n * @import {\n *   Chunk,\n *   Code,\n *   ConstructRecord,\n *   Construct,\n *   Effects,\n *   InitialConstruct,\n *   ParseContext,\n *   Point,\n *   State,\n *   TokenizeContext,\n *   Token\n * } from 'micromark-util-types'\n */\n\n/**\n * @callback Restore\n *   Restore the state.\n * @returns {undefined}\n *   Nothing.\n *\n * @typedef Info\n *   Info.\n * @property {Restore} restore\n *   Restore.\n * @property {number} from\n *   From.\n *\n * @callback ReturnHandle\n *   Handle a successful run.\n * @param {Construct} construct\n *   Construct.\n * @param {Info} info\n *   Info.\n * @returns {undefined}\n *   Nothing.\n */\n\nimport { markdownLineEnding } from 'micromark-util-character';\nimport { push, splice } from 'micromark-util-chunked';\nimport { resolveAll } from 'micromark-util-resolve-all';\n/**\n * Create a tokenizer.\n * Tokenizers deal with one type of data (e.g., containers, flow, text).\n * The parser is the object dealing with it all.\n * `initialize` works like other constructs, except that only its `tokenize`\n * function is used, in which case it doesn’t receive an `ok` or `nok`.\n * `from` can be given to set the point before the first character, although\n * when further lines are indented, they must be set with `defineSkip`.\n *\n * @param {ParseContext} parser\n *   Parser.\n * @param {InitialConstruct} initialize\n *   Construct.\n * @param {Omit<Point, '_bufferIndex' | '_index'> | undefined} [from]\n *   Point (optional).\n * @returns {TokenizeContext}\n *   Context.\n */\nexport function createTokenizer(parser, initialize, from) {\n  /** @type {Point} */\n  let point = {\n    _bufferIndex: -1,\n    _index: 0,\n    line: from && from.line || 1,\n    column: from && from.column || 1,\n    offset: from && from.offset || 0\n  };\n  /** @type {Record<string, number>} */\n  const columnStart = {};\n  /** @type {Array<Construct>} */\n  const resolveAllConstructs = [];\n  /** @type {Array<Chunk>} */\n  let chunks = [];\n  /** @type {Array<Token>} */\n  let stack = [];\n  /** @type {boolean | undefined} */\n  let consumed = true;\n\n  /**\n   * Tools used for tokenizing.\n   *\n   * @type {Effects}\n   */\n  const effects = {\n    attempt: constructFactory(onsuccessfulconstruct),\n    check: constructFactory(onsuccessfulcheck),\n    consume,\n    enter,\n    exit,\n    interrupt: constructFactory(onsuccessfulcheck, {\n      interrupt: true\n    })\n  };\n\n  /**\n   * State and tools for resolving and serializing.\n   *\n   * @type {TokenizeContext}\n   */\n  const context = {\n    code: null,\n    containerState: {},\n    defineSkip,\n    events: [],\n    now,\n    parser,\n    previous: null,\n    sliceSerialize,\n    sliceStream,\n    write\n  };\n\n  /**\n   * The state function.\n   *\n   * @type {State | undefined}\n   */\n  let state = initialize.tokenize.call(context, effects);\n\n  /**\n   * Track which character we expect to be consumed, to catch bugs.\n   *\n   * @type {Code}\n   */\n  let expectedCode;\n  if (initialize.resolveAll) {\n    resolveAllConstructs.push(initialize);\n  }\n  return context;\n\n  /** @type {TokenizeContext['write']} */\n  function write(slice) {\n    chunks = push(chunks, slice);\n    main();\n\n    // Exit if we’re not done, resolve might change stuff.\n    if (chunks[chunks.length - 1] !== null) {\n      return [];\n    }\n    addResult(initialize, 0);\n\n    // Otherwise, resolve, and exit.\n    context.events = resolveAll(resolveAllConstructs, context.events, context);\n    return context.events;\n  }\n\n  //\n  // Tools.\n  //\n\n  /** @type {TokenizeContext['sliceSerialize']} */\n  function sliceSerialize(token, expandTabs) {\n    return serializeChunks(sliceStream(token), expandTabs);\n  }\n\n  /** @type {TokenizeContext['sliceStream']} */\n  function sliceStream(token) {\n    return sliceChunks(chunks, token);\n  }\n\n  /** @type {TokenizeContext['now']} */\n  function now() {\n    // This is a hot path, so we clone manually instead of `Object.assign({}, point)`\n    const {\n      _bufferIndex,\n      _index,\n      line,\n      column,\n      offset\n    } = point;\n    return {\n      _bufferIndex,\n      _index,\n      line,\n      column,\n      offset\n    };\n  }\n\n  /** @type {TokenizeContext['defineSkip']} */\n  function defineSkip(value) {\n    columnStart[value.line] = value.column;\n    accountForPotentialSkip();\n  }\n\n  //\n  // State management.\n  //\n\n  /**\n   * Main loop (note that `_index` and `_bufferIndex` in `point` are modified by\n   * `consume`).\n   * Here is where we walk through the chunks, which either include strings of\n   * several characters, or numerical character codes.\n   * The reason to do this in a loop instead of a call is so the stack can\n   * drain.\n   *\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function main() {\n    /** @type {number} */\n    let chunkIndex;\n    while (point._index < chunks.length) {\n      const chunk = chunks[point._index];\n\n      // If we’re in a buffer chunk, loop through it.\n      if (typeof chunk === 'string') {\n        chunkIndex = point._index;\n        if (point._bufferIndex < 0) {\n          point._bufferIndex = 0;\n        }\n        while (point._index === chunkIndex && point._bufferIndex < chunk.length) {\n          go(chunk.charCodeAt(point._bufferIndex));\n        }\n      } else {\n        go(chunk);\n      }\n    }\n  }\n\n  /**\n   * Deal with one code.\n   *\n   * @param {Code} code\n   *   Code.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function go(code) {\n    consumed = undefined;\n    expectedCode = code;\n    state = state(code);\n  }\n\n  /** @type {Effects['consume']} */\n  function consume(code) {\n    if (markdownLineEnding(code)) {\n      point.line++;\n      point.column = 1;\n      point.offset += code === -3 ? 2 : 1;\n      accountForPotentialSkip();\n    } else if (code !== -1) {\n      point.column++;\n      point.offset++;\n    }\n\n    // Not in a string chunk.\n    if (point._bufferIndex < 0) {\n      point._index++;\n    } else {\n      point._bufferIndex++;\n\n      // At end of string chunk.\n      if (point._bufferIndex ===\n      // Points w/ non-negative `_bufferIndex` reference\n      // strings.\n      /** @type {string} */\n      chunks[point._index].length) {\n        point._bufferIndex = -1;\n        point._index++;\n      }\n    }\n\n    // Expose the previous character.\n    context.previous = code;\n\n    // Mark as consumed.\n    consumed = true;\n  }\n\n  /** @type {Effects['enter']} */\n  function enter(type, fields) {\n    /** @type {Token} */\n    // @ts-expect-error Patch instead of assign required fields to help GC.\n    const token = fields || {};\n    token.type = type;\n    token.start = now();\n    context.events.push(['enter', token, context]);\n    stack.push(token);\n    return token;\n  }\n\n  /** @type {Effects['exit']} */\n  function exit(type) {\n    const token = stack.pop();\n    token.end = now();\n    context.events.push(['exit', token, context]);\n    return token;\n  }\n\n  /**\n   * Use results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulconstruct(construct, info) {\n    addResult(construct, info.from);\n  }\n\n  /**\n   * Discard results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulcheck(_, info) {\n    info.restore();\n  }\n\n  /**\n   * Factory to attempt/check/interrupt.\n   *\n   * @param {ReturnHandle} onreturn\n   *   Callback.\n   * @param {{interrupt?: boolean | undefined} | undefined} [fields]\n   *   Fields.\n   */\n  function constructFactory(onreturn, fields) {\n    return hook;\n\n    /**\n     * Handle either an object mapping codes to constructs, a list of\n     * constructs, or a single construct.\n     *\n     * @param {Array<Construct> | ConstructRecord | Construct} constructs\n     *   Constructs.\n     * @param {State} returnState\n     *   State.\n     * @param {State | undefined} [bogusState]\n     *   State.\n     * @returns {State}\n     *   State.\n     */\n    function hook(constructs, returnState, bogusState) {\n      /** @type {ReadonlyArray<Construct>} */\n      let listOfConstructs;\n      /** @type {number} */\n      let constructIndex;\n      /** @type {Construct} */\n      let currentConstruct;\n      /** @type {Info} */\n      let info;\n      return Array.isArray(constructs) ? /* c8 ignore next 1 */\n      handleListOfConstructs(constructs) : 'tokenize' in constructs ?\n      // Looks like a construct.\n      handleListOfConstructs([(/** @type {Construct} */constructs)]) : handleMapOfConstructs(constructs);\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {ConstructRecord} map\n       *   Constructs.\n       * @returns {State}\n       *   State.\n       */\n      function handleMapOfConstructs(map) {\n        return start;\n\n        /** @type {State} */\n        function start(code) {\n          const left = code !== null && map[code];\n          const all = code !== null && map.null;\n          const list = [\n          // To do: add more extension tests.\n          /* c8 ignore next 2 */\n          ...(Array.isArray(left) ? left : left ? [left] : []), ...(Array.isArray(all) ? all : all ? [all] : [])];\n          return handleListOfConstructs(list)(code);\n        }\n      }\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {ReadonlyArray<Construct>} list\n       *   Constructs.\n       * @returns {State}\n       *   State.\n       */\n      function handleListOfConstructs(list) {\n        listOfConstructs = list;\n        constructIndex = 0;\n        if (list.length === 0) {\n          return bogusState;\n        }\n        return handleConstruct(list[constructIndex]);\n      }\n\n      /**\n       * Handle a single construct.\n       *\n       * @param {Construct} construct\n       *   Construct.\n       * @returns {State}\n       *   State.\n       */\n      function handleConstruct(construct) {\n        return start;\n\n        /** @type {State} */\n        function start(code) {\n          // To do: not needed to store if there is no bogus state, probably?\n          // Currently doesn’t work because `inspect` in document does a check\n          // w/o a bogus, which doesn’t make sense. But it does seem to help perf\n          // by not storing.\n          info = store();\n          currentConstruct = construct;\n          if (!construct.partial) {\n            context.currentConstruct = construct;\n          }\n\n          // Always populated by defaults.\n\n          if (construct.name && context.parser.constructs.disable.null.includes(construct.name)) {\n            return nok(code);\n          }\n          return construct.tokenize.call(\n          // If we do have fields, create an object w/ `context` as its\n          // prototype.\n          // This allows a “live binding”, which is needed for `interrupt`.\n          fields ? Object.assign(Object.create(context), fields) : context, effects, ok, nok)(code);\n        }\n      }\n\n      /** @type {State} */\n      function ok(code) {\n        consumed = true;\n        onreturn(currentConstruct, info);\n        return returnState;\n      }\n\n      /** @type {State} */\n      function nok(code) {\n        consumed = true;\n        info.restore();\n        if (++constructIndex < listOfConstructs.length) {\n          return handleConstruct(listOfConstructs[constructIndex]);\n        }\n        return bogusState;\n      }\n    }\n  }\n\n  /**\n   * @param {Construct} construct\n   *   Construct.\n   * @param {number} from\n   *   From.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function addResult(construct, from) {\n    if (construct.resolveAll && !resolveAllConstructs.includes(construct)) {\n      resolveAllConstructs.push(construct);\n    }\n    if (construct.resolve) {\n      splice(context.events, from, context.events.length - from, construct.resolve(context.events.slice(from), context));\n    }\n    if (construct.resolveTo) {\n      context.events = construct.resolveTo(context.events, context);\n    }\n  }\n\n  /**\n   * Store state.\n   *\n   * @returns {Info}\n   *   Info.\n   */\n  function store() {\n    const startPoint = now();\n    const startPrevious = context.previous;\n    const startCurrentConstruct = context.currentConstruct;\n    const startEventsIndex = context.events.length;\n    const startStack = Array.from(stack);\n    return {\n      from: startEventsIndex,\n      restore\n    };\n\n    /**\n     * Restore state.\n     *\n     * @returns {undefined}\n     *   Nothing.\n     */\n    function restore() {\n      point = startPoint;\n      context.previous = startPrevious;\n      context.currentConstruct = startCurrentConstruct;\n      context.events.length = startEventsIndex;\n      stack = startStack;\n      accountForPotentialSkip();\n    }\n  }\n\n  /**\n   * Move the current point a bit forward in the line when it’s on a column\n   * skip.\n   *\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function accountForPotentialSkip() {\n    if (point.line in columnStart && point.column < 2) {\n      point.column = columnStart[point.line];\n      point.offset += columnStart[point.line] - 1;\n    }\n  }\n}\n\n/**\n * Get the chunks from a slice of chunks in the range of a token.\n *\n * @param {ReadonlyArray<Chunk>} chunks\n *   Chunks.\n * @param {Pick<Token, 'end' | 'start'>} token\n *   Token.\n * @returns {Array<Chunk>}\n *   Chunks.\n */\nfunction sliceChunks(chunks, token) {\n  const startIndex = token.start._index;\n  const startBufferIndex = token.start._bufferIndex;\n  const endIndex = token.end._index;\n  const endBufferIndex = token.end._bufferIndex;\n  /** @type {Array<Chunk>} */\n  let view;\n  if (startIndex === endIndex) {\n    // @ts-expect-error `_bufferIndex` is used on string chunks.\n    view = [chunks[startIndex].slice(startBufferIndex, endBufferIndex)];\n  } else {\n    view = chunks.slice(startIndex, endIndex);\n    if (startBufferIndex > -1) {\n      const head = view[0];\n      if (typeof head === 'string') {\n        view[0] = head.slice(startBufferIndex);\n        /* c8 ignore next 4 -- used to be used, no longer */\n      } else {\n        view.shift();\n      }\n    }\n    if (endBufferIndex > 0) {\n      // @ts-expect-error `_bufferIndex` is used on string chunks.\n      view.push(chunks[endIndex].slice(0, endBufferIndex));\n    }\n  }\n  return view;\n}\n\n/**\n * Get the string value of a slice of chunks.\n *\n * @param {ReadonlyArray<Chunk>} chunks\n *   Chunks.\n * @param {boolean | undefined} [expandTabs=false]\n *   Whether to expand tabs (default: `false`).\n * @returns {string}\n *   Result.\n */\nfunction serializeChunks(chunks, expandTabs) {\n  let index = -1;\n  /** @type {Array<string>} */\n  const result = [];\n  /** @type {boolean | undefined} */\n  let atTab;\n  while (++index < chunks.length) {\n    const chunk = chunks[index];\n    /** @type {string} */\n    let value;\n    if (typeof chunk === 'string') {\n      value = chunk;\n    } else switch (chunk) {\n      case -5:\n        {\n          value = \"\\r\";\n          break;\n        }\n      case -4:\n        {\n          value = \"\\n\";\n          break;\n        }\n      case -3:\n        {\n          value = \"\\r\" + \"\\n\";\n          break;\n        }\n      case -2:\n        {\n          value = expandTabs ? \" \" : \"\\t\";\n          break;\n        }\n      case -1:\n        {\n          if (!expandTabs && atTab) continue;\n          value = \" \";\n          break;\n        }\n      default:\n        {\n          // Currently only replacement character.\n          value = String.fromCharCode(chunk);\n        }\n    }\n    atTab = chunk === -2;\n    result.push(value);\n  }\n  return result.join('');\n}","/**\n * @import {\n *   Create,\n *   FullNormalizedExtension,\n *   InitialConstruct,\n *   ParseContext,\n *   ParseOptions\n * } from 'micromark-util-types'\n */\n\nimport { combineExtensions } from 'micromark-util-combine-extensions';\nimport { content } from './initialize/content.js';\nimport { document } from './initialize/document.js';\nimport { flow } from './initialize/flow.js';\nimport { string, text } from './initialize/text.js';\nimport * as defaultConstructs from './constructs.js';\nimport { createTokenizer } from './create-tokenizer.js';\n\n/**\n * @param {ParseOptions | null | undefined} [options]\n *   Configuration (optional).\n * @returns {ParseContext}\n *   Parser.\n */\nexport function parse(options) {\n  const settings = options || {};\n  const constructs = /** @type {FullNormalizedExtension} */\n  combineExtensions([defaultConstructs, ...(settings.extensions || [])]);\n\n  /** @type {ParseContext} */\n  const parser = {\n    constructs,\n    content: create(content),\n    defined: [],\n    document: create(document),\n    flow: create(flow),\n    lazy: {},\n    string: create(string),\n    text: create(text)\n  };\n  return parser;\n\n  /**\n   * @param {InitialConstruct} initial\n   *   Construct to start with.\n   * @returns {Create}\n   *   Create a tokenizer.\n   */\n  function create(initial) {\n    return creator;\n    /** @type {Create} */\n    function creator(from) {\n      return createTokenizer(parser, initial, from);\n    }\n  }\n}","/**\n * @import {Event} from 'micromark-util-types'\n */\n\nimport { subtokenize } from 'micromark-util-subtokenize';\n\n/**\n * @param {Array<Event>} events\n *   Events.\n * @returns {Array<Event>}\n *   Events.\n */\nexport function postprocess(events) {\n  while (!subtokenize(events)) {\n    // Empty\n  }\n  return events;\n}","/**\n * @import {Chunk, Code, Encoding, Value} from 'micromark-util-types'\n */\n\n/**\n * @callback Preprocessor\n *   Preprocess a value.\n * @param {Value} value\n *   Value.\n * @param {Encoding | null | undefined} [encoding]\n *   Encoding when `value` is a typed array (optional).\n * @param {boolean | null | undefined} [end=false]\n *   Whether this is the last chunk (default: `false`).\n * @returns {Array<Chunk>}\n *   Chunks.\n */\n\nconst search = /[\\0\\t\\n\\r]/g;\n\n/**\n * @returns {Preprocessor}\n *   Preprocess a value.\n */\nexport function preprocess() {\n  let column = 1;\n  let buffer = '';\n  /** @type {boolean | undefined} */\n  let start = true;\n  /** @type {boolean | undefined} */\n  let atCarriageReturn;\n  return preprocessor;\n\n  /** @type {Preprocessor} */\n  // eslint-disable-next-line complexity\n  function preprocessor(value, encoding, end) {\n    /** @type {Array<Chunk>} */\n    const chunks = [];\n    /** @type {RegExpMatchArray | null} */\n    let match;\n    /** @type {number} */\n    let next;\n    /** @type {number} */\n    let startPosition;\n    /** @type {number} */\n    let endPosition;\n    /** @type {Code} */\n    let code;\n    value = buffer + (typeof value === 'string' ? value.toString() : new TextDecoder(encoding || undefined).decode(value));\n    startPosition = 0;\n    buffer = '';\n    if (start) {\n      // To do: `markdown-rs` actually parses BOMs (byte order mark).\n      if (value.charCodeAt(0) === 65279) {\n        startPosition++;\n      }\n      start = undefined;\n    }\n    while (startPosition < value.length) {\n      search.lastIndex = startPosition;\n      match = search.exec(value);\n      endPosition = match && match.index !== undefined ? match.index : value.length;\n      code = value.charCodeAt(endPosition);\n      if (!match) {\n        buffer = value.slice(startPosition);\n        break;\n      }\n      if (code === 10 && startPosition === endPosition && atCarriageReturn) {\n        chunks.push(-3);\n        atCarriageReturn = undefined;\n      } else {\n        if (atCarriageReturn) {\n          chunks.push(-5);\n          atCarriageReturn = undefined;\n        }\n        if (startPosition < endPosition) {\n          chunks.push(value.slice(startPosition, endPosition));\n          column += endPosition - startPosition;\n        }\n        switch (code) {\n          case 0:\n            {\n              chunks.push(65533);\n              column++;\n              break;\n            }\n          case 9:\n            {\n              next = Math.ceil(column / 4) * 4;\n              chunks.push(-2);\n              while (column++ < next) chunks.push(-1);\n              break;\n            }\n          case 10:\n            {\n              chunks.push(-4);\n              column = 1;\n              break;\n            }\n          default:\n            {\n              atCarriageReturn = true;\n              column = 1;\n            }\n        }\n      }\n      startPosition = endPosition + 1;\n    }\n    if (end) {\n      if (atCarriageReturn) chunks.push(-5);\n      if (buffer) chunks.push(buffer);\n      chunks.push(null);\n    }\n    return chunks;\n  }\n}","import { decodeNamedCharacterReference } from 'decode-named-character-reference';\nimport { decodeNumericCharacterReference } from 'micromark-util-decode-numeric-character-reference';\nconst characterEscapeOrReference = /\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi;\n\n/**\n * Decode markdown strings (which occur in places such as fenced code info\n * strings, destinations, labels, and titles).\n *\n * The “string” content type allows character escapes and -references.\n * This decodes those.\n *\n * @param {string} value\n *   Value to decode.\n * @returns {string}\n *   Decoded value.\n */\nexport function decodeString(value) {\n  return value.replace(characterEscapeOrReference, decode);\n}\n\n/**\n * @param {string} $0\n *   Match.\n * @param {string} $1\n *   Character escape.\n * @param {string} $2\n *   Character reference.\n * @returns {string}\n *   Decoded value\n */\nfunction decode($0, $1, $2) {\n  if ($1) {\n    // Escape.\n    return $1;\n  }\n\n  // Reference.\n  const head = $2.charCodeAt(0);\n  if (head === 35) {\n    const head = $2.charCodeAt(1);\n    const hex = head === 120 || head === 88;\n    return decodeNumericCharacterReference($2.slice(hex ? 2 : 1), hex ? 16 : 10);\n  }\n  return decodeNamedCharacterReference($2) || $0;\n}","/**\n * @import {\n *   Break,\n *   Blockquote,\n *   Code,\n *   Definition,\n *   Emphasis,\n *   Heading,\n *   Html,\n *   Image,\n *   InlineCode,\n *   Link,\n *   ListItem,\n *   List,\n *   Nodes,\n *   Paragraph,\n *   PhrasingContent,\n *   ReferenceType,\n *   Root,\n *   Strong,\n *   Text,\n *   ThematicBreak\n * } from 'mdast'\n * @import {\n *   Encoding,\n *   Event,\n *   Token,\n *   Value\n * } from 'micromark-util-types'\n * @import {Point} from 'unist'\n * @import {\n *   CompileContext,\n *   CompileData,\n *   Config,\n *   Extension,\n *   Handle,\n *   OnEnterError,\n *   Options\n * } from './types.js'\n */\n\nimport { toString } from 'mdast-util-to-string';\nimport { parse, postprocess, preprocess } from 'micromark';\nimport { decodeNumericCharacterReference } from 'micromark-util-decode-numeric-character-reference';\nimport { decodeString } from 'micromark-util-decode-string';\nimport { normalizeIdentifier } from 'micromark-util-normalize-identifier';\nimport { decodeNamedCharacterReference } from 'decode-named-character-reference';\nimport { stringifyPosition } from 'unist-util-stringify-position';\nconst own = {}.hasOwnProperty;\n\n/**\n * Turn markdown into a syntax tree.\n *\n * @overload\n * @param {Value} value\n * @param {Encoding | null | undefined} [encoding]\n * @param {Options | null | undefined} [options]\n * @returns {Root}\n *\n * @overload\n * @param {Value} value\n * @param {Options | null | undefined} [options]\n * @returns {Root}\n *\n * @param {Value} value\n *   Markdown to parse.\n * @param {Encoding | Options | null | undefined} [encoding]\n *   Character encoding for when `value` is `Buffer`.\n * @param {Options | null | undefined} [options]\n *   Configuration.\n * @returns {Root}\n *   mdast tree.\n */\nexport function fromMarkdown(value, encoding, options) {\n  if (typeof encoding !== 'string') {\n    options = encoding;\n    encoding = undefined;\n  }\n  return compiler(options)(postprocess(parse(options).document().write(preprocess()(value, encoding, true))));\n}\n\n/**\n * Note this compiler only understand complete buffering, not streaming.\n *\n * @param {Options | null | undefined} [options]\n */\nfunction compiler(options) {\n  /** @type {Config} */\n  const config = {\n    transforms: [],\n    canContainEols: ['emphasis', 'fragment', 'heading', 'paragraph', 'strong'],\n    enter: {\n      autolink: opener(link),\n      autolinkProtocol: onenterdata,\n      autolinkEmail: onenterdata,\n      atxHeading: opener(heading),\n      blockQuote: opener(blockQuote),\n      characterEscape: onenterdata,\n      characterReference: onenterdata,\n      codeFenced: opener(codeFlow),\n      codeFencedFenceInfo: buffer,\n      codeFencedFenceMeta: buffer,\n      codeIndented: opener(codeFlow, buffer),\n      codeText: opener(codeText, buffer),\n      codeTextData: onenterdata,\n      data: onenterdata,\n      codeFlowValue: onenterdata,\n      definition: opener(definition),\n      definitionDestinationString: buffer,\n      definitionLabelString: buffer,\n      definitionTitleString: buffer,\n      emphasis: opener(emphasis),\n      hardBreakEscape: opener(hardBreak),\n      hardBreakTrailing: opener(hardBreak),\n      htmlFlow: opener(html, buffer),\n      htmlFlowData: onenterdata,\n      htmlText: opener(html, buffer),\n      htmlTextData: onenterdata,\n      image: opener(image),\n      label: buffer,\n      link: opener(link),\n      listItem: opener(listItem),\n      listItemValue: onenterlistitemvalue,\n      listOrdered: opener(list, onenterlistordered),\n      listUnordered: opener(list),\n      paragraph: opener(paragraph),\n      reference: onenterreference,\n      referenceString: buffer,\n      resourceDestinationString: buffer,\n      resourceTitleString: buffer,\n      setextHeading: opener(heading),\n      strong: opener(strong),\n      thematicBreak: opener(thematicBreak)\n    },\n    exit: {\n      atxHeading: closer(),\n      atxHeadingSequence: onexitatxheadingsequence,\n      autolink: closer(),\n      autolinkEmail: onexitautolinkemail,\n      autolinkProtocol: onexitautolinkprotocol,\n      blockQuote: closer(),\n      characterEscapeValue: onexitdata,\n      characterReferenceMarkerHexadecimal: onexitcharacterreferencemarker,\n      characterReferenceMarkerNumeric: onexitcharacterreferencemarker,\n      characterReferenceValue: onexitcharacterreferencevalue,\n      characterReference: onexitcharacterreference,\n      codeFenced: closer(onexitcodefenced),\n      codeFencedFence: onexitcodefencedfence,\n      codeFencedFenceInfo: onexitcodefencedfenceinfo,\n      codeFencedFenceMeta: onexitcodefencedfencemeta,\n      codeFlowValue: onexitdata,\n      codeIndented: closer(onexitcodeindented),\n      codeText: closer(onexitcodetext),\n      codeTextData: onexitdata,\n      data: onexitdata,\n      definition: closer(),\n      definitionDestinationString: onexitdefinitiondestinationstring,\n      definitionLabelString: onexitdefinitionlabelstring,\n      definitionTitleString: onexitdefinitiontitlestring,\n      emphasis: closer(),\n      hardBreakEscape: closer(onexithardbreak),\n      hardBreakTrailing: closer(onexithardbreak),\n      htmlFlow: closer(onexithtmlflow),\n      htmlFlowData: onexitdata,\n      htmlText: closer(onexithtmltext),\n      htmlTextData: onexitdata,\n      image: closer(onexitimage),\n      label: onexitlabel,\n      labelText: onexitlabeltext,\n      lineEnding: onexitlineending,\n      link: closer(onexitlink),\n      listItem: closer(),\n      listOrdered: closer(),\n      listUnordered: closer(),\n      paragraph: closer(),\n      referenceString: onexitreferencestring,\n      resourceDestinationString: onexitresourcedestinationstring,\n      resourceTitleString: onexitresourcetitlestring,\n      resource: onexitresource,\n      setextHeading: closer(onexitsetextheading),\n      setextHeadingLineSequence: onexitsetextheadinglinesequence,\n      setextHeadingText: onexitsetextheadingtext,\n      strong: closer(),\n      thematicBreak: closer()\n    }\n  };\n  configure(config, (options || {}).mdastExtensions || []);\n\n  /** @type {CompileData} */\n  const data = {};\n  return compile;\n\n  /**\n   * Turn micromark events into an mdast tree.\n   *\n   * @param {Array<Event>} events\n   *   Events.\n   * @returns {Root}\n   *   mdast tree.\n   */\n  function compile(events) {\n    /** @type {Root} */\n    let tree = {\n      type: 'root',\n      children: []\n    };\n    /** @type {Omit<CompileContext, 'sliceSerialize'>} */\n    const context = {\n      stack: [tree],\n      tokenStack: [],\n      config,\n      enter,\n      exit,\n      buffer,\n      resume,\n      data\n    };\n    /** @type {Array<number>} */\n    const listStack = [];\n    let index = -1;\n    while (++index < events.length) {\n      // We preprocess lists to add `listItem` tokens, and to infer whether\n      // items the list itself are spread out.\n      if (events[index][1].type === \"listOrdered\" || events[index][1].type === \"listUnordered\") {\n        if (events[index][0] === 'enter') {\n          listStack.push(index);\n        } else {\n          const tail = listStack.pop();\n          index = prepareList(events, tail, index);\n        }\n      }\n    }\n    index = -1;\n    while (++index < events.length) {\n      const handler = config[events[index][0]];\n      if (own.call(handler, events[index][1].type)) {\n        handler[events[index][1].type].call(Object.assign({\n          sliceSerialize: events[index][2].sliceSerialize\n        }, context), events[index][1]);\n      }\n    }\n\n    // Handle tokens still being open.\n    if (context.tokenStack.length > 0) {\n      const tail = context.tokenStack[context.tokenStack.length - 1];\n      const handler = tail[1] || defaultOnError;\n      handler.call(context, undefined, tail[0]);\n    }\n\n    // Figure out `root` position.\n    tree.position = {\n      start: point(events.length > 0 ? events[0][1].start : {\n        line: 1,\n        column: 1,\n        offset: 0\n      }),\n      end: point(events.length > 0 ? events[events.length - 2][1].end : {\n        line: 1,\n        column: 1,\n        offset: 0\n      })\n    };\n\n    // Call transforms.\n    index = -1;\n    while (++index < config.transforms.length) {\n      tree = config.transforms[index](tree) || tree;\n    }\n    return tree;\n  }\n\n  /**\n   * @param {Array<Event>} events\n   * @param {number} start\n   * @param {number} length\n   * @returns {number}\n   */\n  function prepareList(events, start, length) {\n    let index = start - 1;\n    let containerBalance = -1;\n    let listSpread = false;\n    /** @type {Token | undefined} */\n    let listItem;\n    /** @type {number | undefined} */\n    let lineIndex;\n    /** @type {number | undefined} */\n    let firstBlankLineIndex;\n    /** @type {boolean | undefined} */\n    let atMarker;\n    while (++index <= length) {\n      const event = events[index];\n      switch (event[1].type) {\n        case \"listUnordered\":\n        case \"listOrdered\":\n        case \"blockQuote\":\n          {\n            if (event[0] === 'enter') {\n              containerBalance++;\n            } else {\n              containerBalance--;\n            }\n            atMarker = undefined;\n            break;\n          }\n        case \"lineEndingBlank\":\n          {\n            if (event[0] === 'enter') {\n              if (listItem && !atMarker && !containerBalance && !firstBlankLineIndex) {\n                firstBlankLineIndex = index;\n              }\n              atMarker = undefined;\n            }\n            break;\n          }\n        case \"linePrefix\":\n        case \"listItemValue\":\n        case \"listItemMarker\":\n        case \"listItemPrefix\":\n        case \"listItemPrefixWhitespace\":\n          {\n            // Empty.\n\n            break;\n          }\n        default:\n          {\n            atMarker = undefined;\n          }\n      }\n      if (!containerBalance && event[0] === 'enter' && event[1].type === \"listItemPrefix\" || containerBalance === -1 && event[0] === 'exit' && (event[1].type === \"listUnordered\" || event[1].type === \"listOrdered\")) {\n        if (listItem) {\n          let tailIndex = index;\n          lineIndex = undefined;\n          while (tailIndex--) {\n            const tailEvent = events[tailIndex];\n            if (tailEvent[1].type === \"lineEnding\" || tailEvent[1].type === \"lineEndingBlank\") {\n              if (tailEvent[0] === 'exit') continue;\n              if (lineIndex) {\n                events[lineIndex][1].type = \"lineEndingBlank\";\n                listSpread = true;\n              }\n              tailEvent[1].type = \"lineEnding\";\n              lineIndex = tailIndex;\n            } else if (tailEvent[1].type === \"linePrefix\" || tailEvent[1].type === \"blockQuotePrefix\" || tailEvent[1].type === \"blockQuotePrefixWhitespace\" || tailEvent[1].type === \"blockQuoteMarker\" || tailEvent[1].type === \"listItemIndent\") {\n              // Empty\n            } else {\n              break;\n            }\n          }\n          if (firstBlankLineIndex && (!lineIndex || firstBlankLineIndex < lineIndex)) {\n            listItem._spread = true;\n          }\n\n          // Fix position.\n          listItem.end = Object.assign({}, lineIndex ? events[lineIndex][1].start : event[1].end);\n          events.splice(lineIndex || index, 0, ['exit', listItem, event[2]]);\n          index++;\n          length++;\n        }\n\n        // Create a new list item.\n        if (event[1].type === \"listItemPrefix\") {\n          /** @type {Token} */\n          const item = {\n            type: 'listItem',\n            _spread: false,\n            start: Object.assign({}, event[1].start),\n            // @ts-expect-error: we’ll add `end` in a second.\n            end: undefined\n          };\n          listItem = item;\n          events.splice(index, 0, ['enter', item, event[2]]);\n          index++;\n          length++;\n          firstBlankLineIndex = undefined;\n          atMarker = true;\n        }\n      }\n    }\n    events[start][1]._spread = listSpread;\n    return length;\n  }\n\n  /**\n   * Create an opener handle.\n   *\n   * @param {(token: Token) => Nodes} create\n   *   Create a node.\n   * @param {Handle | undefined} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function opener(create, and) {\n    return open;\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {undefined}\n     */\n    function open(token) {\n      enter.call(this, create(token), token);\n      if (and) and.call(this, token);\n    }\n  }\n\n  /**\n   * @type {CompileContext['buffer']}\n   */\n  function buffer() {\n    this.stack.push({\n      type: 'fragment',\n      children: []\n    });\n  }\n\n  /**\n   * @type {CompileContext['enter']}\n   */\n  function enter(node, token, errorHandler) {\n    const parent = this.stack[this.stack.length - 1];\n    /** @type {Array<Nodes>} */\n    const siblings = parent.children;\n    siblings.push(node);\n    this.stack.push(node);\n    this.tokenStack.push([token, errorHandler || undefined]);\n    node.position = {\n      start: point(token.start),\n      // @ts-expect-error: `end` will be patched later.\n      end: undefined\n    };\n  }\n\n  /**\n   * Create a closer handle.\n   *\n   * @param {Handle | undefined} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function closer(and) {\n    return close;\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {undefined}\n     */\n    function close(token) {\n      if (and) and.call(this, token);\n      exit.call(this, token);\n    }\n  }\n\n  /**\n   * @type {CompileContext['exit']}\n   */\n  function exit(token, onExitError) {\n    const node = this.stack.pop();\n    const open = this.tokenStack.pop();\n    if (!open) {\n      throw new Error('Cannot close `' + token.type + '` (' + stringifyPosition({\n        start: token.start,\n        end: token.end\n      }) + '): it’s not open');\n    } else if (open[0].type !== token.type) {\n      if (onExitError) {\n        onExitError.call(this, token, open[0]);\n      } else {\n        const handler = open[1] || defaultOnError;\n        handler.call(this, token, open[0]);\n      }\n    }\n    node.position.end = point(token.end);\n  }\n\n  /**\n   * @type {CompileContext['resume']}\n   */\n  function resume() {\n    return toString(this.stack.pop());\n  }\n\n  //\n  // Handlers.\n  //\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistordered() {\n    this.data.expectingFirstListItemValue = true;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistitemvalue(token) {\n    if (this.data.expectingFirstListItemValue) {\n      const ancestor = this.stack[this.stack.length - 2];\n      ancestor.start = Number.parseInt(this.sliceSerialize(token), 10);\n      this.data.expectingFirstListItemValue = undefined;\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfenceinfo() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.lang = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfencemeta() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.meta = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfence() {\n    // Exit if this is the closing fence.\n    if (this.data.flowCodeInside) return;\n    this.buffer();\n    this.data.flowCodeInside = true;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefenced() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.value = data.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g, '');\n    this.data.flowCodeInside = undefined;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodeindented() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.value = data.replace(/(\\r?\\n|\\r)$/g, '');\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitionlabelstring(token) {\n    const label = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.label = label;\n    node.identifier = normalizeIdentifier(this.sliceSerialize(token)).toLowerCase();\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiontitlestring() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.title = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiondestinationstring() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.url = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitatxheadingsequence(token) {\n    const node = this.stack[this.stack.length - 1];\n    if (!node.depth) {\n      const depth = this.sliceSerialize(token).length;\n      node.depth = depth;\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadingtext() {\n    this.data.setextHeadingSlurpLineEnding = true;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadinglinesequence(token) {\n    const node = this.stack[this.stack.length - 1];\n    node.depth = this.sliceSerialize(token).codePointAt(0) === 61 ? 1 : 2;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheading() {\n    this.data.setextHeadingSlurpLineEnding = undefined;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterdata(token) {\n    const node = this.stack[this.stack.length - 1];\n    /** @type {Array<Nodes>} */\n    const siblings = node.children;\n    let tail = siblings[siblings.length - 1];\n    if (!tail || tail.type !== 'text') {\n      // Add a new text node.\n      tail = text();\n      tail.position = {\n        start: point(token.start),\n        // @ts-expect-error: we’ll add `end` later.\n        end: undefined\n      };\n      siblings.push(tail);\n    }\n    this.stack.push(tail);\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitdata(token) {\n    const tail = this.stack.pop();\n    tail.value += this.sliceSerialize(token);\n    tail.position.end = point(token.end);\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlineending(token) {\n    const context = this.stack[this.stack.length - 1];\n    // If we’re at a hard break, include the line ending in there.\n    if (this.data.atHardBreak) {\n      const tail = context.children[context.children.length - 1];\n      tail.position.end = point(token.end);\n      this.data.atHardBreak = undefined;\n      return;\n    }\n    if (!this.data.setextHeadingSlurpLineEnding && config.canContainEols.includes(context.type)) {\n      onenterdata.call(this, token);\n      onexitdata.call(this, token);\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithardbreak() {\n    this.data.atHardBreak = true;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmlflow() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.value = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmltext() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.value = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcodetext() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.value = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlink() {\n    const node = this.stack[this.stack.length - 1];\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n\n    // To do: clean.\n    if (this.data.inReference) {\n      /** @type {ReferenceType} */\n      const referenceType = this.data.referenceType || 'shortcut';\n      node.type += 'Reference';\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType;\n      // @ts-expect-error: mutate.\n      delete node.url;\n      delete node.title;\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier;\n      // @ts-expect-error: mutate.\n      delete node.label;\n    }\n    this.data.referenceType = undefined;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitimage() {\n    const node = this.stack[this.stack.length - 1];\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n\n    // To do: clean.\n    if (this.data.inReference) {\n      /** @type {ReferenceType} */\n      const referenceType = this.data.referenceType || 'shortcut';\n      node.type += 'Reference';\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType;\n      // @ts-expect-error: mutate.\n      delete node.url;\n      delete node.title;\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier;\n      // @ts-expect-error: mutate.\n      delete node.label;\n    }\n    this.data.referenceType = undefined;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabeltext(token) {\n    const string = this.sliceSerialize(token);\n    const ancestor = this.stack[this.stack.length - 2];\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    ancestor.label = decodeString(string);\n    // @ts-expect-error: same as above.\n    ancestor.identifier = normalizeIdentifier(string).toLowerCase();\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabel() {\n    const fragment = this.stack[this.stack.length - 1];\n    const value = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    // Assume a reference.\n    this.data.inReference = true;\n    if (node.type === 'link') {\n      /** @type {Array<PhrasingContent>} */\n      const children = fragment.children;\n      node.children = children;\n    } else {\n      node.alt = value;\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcedestinationstring() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.url = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcetitlestring() {\n    const data = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    node.title = data;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresource() {\n    this.data.inReference = undefined;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterreference() {\n    this.data.referenceType = 'collapsed';\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitreferencestring(token) {\n    const label = this.resume();\n    const node = this.stack[this.stack.length - 1];\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    node.label = label;\n    // @ts-expect-error: same as above.\n    node.identifier = normalizeIdentifier(this.sliceSerialize(token)).toLowerCase();\n    this.data.referenceType = 'full';\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcharacterreferencemarker(token) {\n    this.data.characterReferenceType = token.type;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcharacterreferencevalue(token) {\n    const data = this.sliceSerialize(token);\n    const type = this.data.characterReferenceType;\n    /** @type {string} */\n    let value;\n    if (type) {\n      value = decodeNumericCharacterReference(data, type === \"characterReferenceMarkerNumeric\" ? 10 : 16);\n      this.data.characterReferenceType = undefined;\n    } else {\n      const result = decodeNamedCharacterReference(data);\n      value = result;\n    }\n    const tail = this.stack[this.stack.length - 1];\n    tail.value += value;\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcharacterreference(token) {\n    const tail = this.stack.pop();\n    tail.position.end = point(token.end);\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkprotocol(token) {\n    onexitdata.call(this, token);\n    const node = this.stack[this.stack.length - 1];\n    node.url = this.sliceSerialize(token);\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkemail(token) {\n    onexitdata.call(this, token);\n    const node = this.stack[this.stack.length - 1];\n    node.url = 'mailto:' + this.sliceSerialize(token);\n  }\n\n  //\n  // Creaters.\n  //\n\n  /** @returns {Blockquote} */\n  function blockQuote() {\n    return {\n      type: 'blockquote',\n      children: []\n    };\n  }\n\n  /** @returns {Code} */\n  function codeFlow() {\n    return {\n      type: 'code',\n      lang: null,\n      meta: null,\n      value: ''\n    };\n  }\n\n  /** @returns {InlineCode} */\n  function codeText() {\n    return {\n      type: 'inlineCode',\n      value: ''\n    };\n  }\n\n  /** @returns {Definition} */\n  function definition() {\n    return {\n      type: 'definition',\n      identifier: '',\n      label: null,\n      title: null,\n      url: ''\n    };\n  }\n\n  /** @returns {Emphasis} */\n  function emphasis() {\n    return {\n      type: 'emphasis',\n      children: []\n    };\n  }\n\n  /** @returns {Heading} */\n  function heading() {\n    return {\n      type: 'heading',\n      // @ts-expect-error `depth` will be set later.\n      depth: 0,\n      children: []\n    };\n  }\n\n  /** @returns {Break} */\n  function hardBreak() {\n    return {\n      type: 'break'\n    };\n  }\n\n  /** @returns {Html} */\n  function html() {\n    return {\n      type: 'html',\n      value: ''\n    };\n  }\n\n  /** @returns {Image} */\n  function image() {\n    return {\n      type: 'image',\n      title: null,\n      url: '',\n      alt: null\n    };\n  }\n\n  /** @returns {Link} */\n  function link() {\n    return {\n      type: 'link',\n      title: null,\n      url: '',\n      children: []\n    };\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {List}\n   */\n  function list(token) {\n    return {\n      type: 'list',\n      ordered: token.type === 'listOrdered',\n      start: null,\n      spread: token._spread,\n      children: []\n    };\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {ListItem}\n   */\n  function listItem(token) {\n    return {\n      type: 'listItem',\n      spread: token._spread,\n      checked: null,\n      children: []\n    };\n  }\n\n  /** @returns {Paragraph} */\n  function paragraph() {\n    return {\n      type: 'paragraph',\n      children: []\n    };\n  }\n\n  /** @returns {Strong} */\n  function strong() {\n    return {\n      type: 'strong',\n      children: []\n    };\n  }\n\n  /** @returns {Text} */\n  function text() {\n    return {\n      type: 'text',\n      value: ''\n    };\n  }\n\n  /** @returns {ThematicBreak} */\n  function thematicBreak() {\n    return {\n      type: 'thematicBreak'\n    };\n  }\n}\n\n/**\n * Copy a point-like value.\n *\n * @param {Point} d\n *   Point-like value.\n * @returns {Point}\n *   unist point.\n */\nfunction point(d) {\n  return {\n    line: d.line,\n    column: d.column,\n    offset: d.offset\n  };\n}\n\n/**\n * @param {Config} combined\n * @param {Array<Array<Extension> | Extension>} extensions\n * @returns {undefined}\n */\nfunction configure(combined, extensions) {\n  let index = -1;\n  while (++index < extensions.length) {\n    const value = extensions[index];\n    if (Array.isArray(value)) {\n      configure(combined, value);\n    } else {\n      extension(combined, value);\n    }\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Extension} extension\n * @returns {undefined}\n */\nfunction extension(combined, extension) {\n  /** @type {keyof Extension} */\n  let key;\n  for (key in extension) {\n    if (own.call(extension, key)) {\n      switch (key) {\n        case 'canContainEols':\n          {\n            const right = extension[key];\n            if (right) {\n              combined[key].push(...right);\n            }\n            break;\n          }\n        case 'transforms':\n          {\n            const right = extension[key];\n            if (right) {\n              combined[key].push(...right);\n            }\n            break;\n          }\n        case 'enter':\n        case 'exit':\n          {\n            const right = extension[key];\n            if (right) {\n              Object.assign(combined[key], right);\n            }\n            break;\n          }\n        // No default\n      }\n    }\n  }\n}\n\n/** @type {OnEnterError} */\nfunction defaultOnError(left, right) {\n  if (left) {\n    throw new Error('Cannot close `' + left.type + '` (' + stringifyPosition({\n      start: left.start,\n      end: left.end\n    }) + '): a different token (`' + right.type + '`, ' + stringifyPosition({\n      start: right.start,\n      end: right.end\n    }) + ') is open');\n  } else {\n    throw new Error('Cannot close document, a token (`' + right.type + '`, ' + stringifyPosition({\n      start: right.start,\n      end: right.end\n    }) + ') is still open');\n  }\n}","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast-util-from-markdown').Options} FromMarkdownOptions\n * @typedef {import('unified').Parser<Root>} Parser\n * @typedef {import('unified').Processor<Root>} Processor\n */\n\n/**\n * @typedef {Omit<FromMarkdownOptions, 'extensions' | 'mdastExtensions'>} Options\n */\n\nimport {fromMarkdown} from 'mdast-util-from-markdown'\n\n/**\n * Aadd support for parsing from markdown.\n *\n * @param {Readonly<Options> | null | undefined} [options]\n *   Configuration (optional).\n * @returns {undefined}\n *   Nothing.\n */\nexport default function remarkParse(options) {\n  /** @type {Processor} */\n  // @ts-expect-error: TS in JSDoc generates wrong types if `this` is typed regularly.\n  const self = this\n\n  self.parser = parser\n\n  /**\n   * @type {Parser}\n   */\n  function parser(doc) {\n    return fromMarkdown(doc, {\n      ...self.data('settings'),\n      ...options,\n      // Note: these options are not in the readme.\n      // The goal is for them to be set by plugins on `data` instead of being\n      // passed by users.\n      extensions: self.data('micromarkExtensions') || [],\n      mdastExtensions: self.data('fromMarkdownExtensions') || []\n    })\n  }\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `blockquote` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Blockquote} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function blockquote(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'blockquote',\n    properties: {},\n    children: state.wrap(state.all(node), true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').Break} Break\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `break` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Break} node\n *   mdast node.\n * @returns {Array<Element | Text>}\n *   hast element content.\n */\nexport function hardBreak(state, node) {\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'br', properties: {}, children: []}\n  state.patch(node, result)\n  return [state.applyData(node, result), {type: 'text', value: '\\n'}]\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Code} Code\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `code` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Code} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function code(state, node) {\n  const value = node.value ? node.value + '\\n' : ''\n  /** @type {Properties} */\n  const properties = {}\n\n  if (node.lang) {\n    properties.className = ['language-' + node.lang]\n  }\n\n  // Create `<code>`.\n  /** @type {Element} */\n  let result = {\n    type: 'element',\n    tagName: 'code',\n    properties,\n    children: [{type: 'text', value}]\n  }\n\n  if (node.meta) {\n    result.data = {meta: node.meta}\n  }\n\n  state.patch(node, result)\n  result = state.applyData(node, result)\n\n  // Create `<pre>`.\n  result = {type: 'element', tagName: 'pre', properties: {}, children: [result]}\n  state.patch(node, result)\n  return result\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `delete` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Delete} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function strikethrough(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'del',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `emphasis` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Emphasis} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function emphasis(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'em',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').FootnoteReference} FootnoteReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `footnoteReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {FootnoteReference} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function footnoteReference(state, node) {\n  const clobberPrefix =\n    typeof state.options.clobberPrefix === 'string'\n      ? state.options.clobberPrefix\n      : 'user-content-'\n  const id = String(node.identifier).toUpperCase()\n  const safeId = normalizeUri(id.toLowerCase())\n  const index = state.footnoteOrder.indexOf(id)\n  /** @type {number} */\n  let counter\n\n  let reuseCounter = state.footnoteCounts.get(id)\n\n  if (reuseCounter === undefined) {\n    reuseCounter = 0\n    state.footnoteOrder.push(id)\n    counter = state.footnoteOrder.length\n  } else {\n    counter = index + 1\n  }\n\n  reuseCounter += 1\n  state.footnoteCounts.set(id, reuseCounter)\n\n  /** @type {Element} */\n  const link = {\n    type: 'element',\n    tagName: 'a',\n    properties: {\n      href: '#' + clobberPrefix + 'fn-' + safeId,\n      id:\n        clobberPrefix +\n        'fnref-' +\n        safeId +\n        (reuseCounter > 1 ? '-' + reuseCounter : ''),\n      dataFootnoteRef: true,\n      ariaDescribedBy: ['footnote-label']\n    },\n    children: [{type: 'text', value: String(counter)}]\n  }\n  state.patch(node, link)\n\n  /** @type {Element} */\n  const sup = {\n    type: 'element',\n    tagName: 'sup',\n    properties: {},\n    children: [link]\n  }\n  state.patch(node, sup)\n  return state.applyData(node, sup)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `heading` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Heading} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function heading(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'h' + node.depth,\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Html} Html\n * @typedef {import('../state.js').State} State\n * @typedef {import('../../index.js').Raw} Raw\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `html` node into hast (`raw` node in dangerous mode, otherwise\n * nothing).\n *\n * @param {State} state\n *   Info passed around.\n * @param {Html} node\n *   mdast node.\n * @returns {Element | Raw | undefined}\n *   hast node.\n */\nexport function html(state, node) {\n  if (state.options.allowDangerousHtml) {\n    /** @type {Raw} */\n    const result = {type: 'raw', value: node.value}\n    state.patch(node, result)\n    return state.applyData(node, result)\n  }\n\n  return undefined\n}\n","/**\n * @typedef {import('hast').ElementContent} ElementContent\n *\n * @typedef {import('mdast').Nodes} Nodes\n * @typedef {import('mdast').Reference} Reference\n *\n * @typedef {import('./state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Return the content of a reference without definition as plain text.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Extract<Nodes, Reference>} node\n *   Reference node (image, link).\n * @returns {Array<ElementContent>}\n *   hast content.\n */\nexport function revert(state, node) {\n  const subtype = node.referenceType\n  let suffix = ']'\n\n  if (subtype === 'collapsed') {\n    suffix += '[]'\n  } else if (subtype === 'full') {\n    suffix += '[' + (node.label || node.identifier) + ']'\n  }\n\n  if (node.type === 'imageReference') {\n    return [{type: 'text', value: '![' + node.alt + suffix}]\n  }\n\n  const contents = state.all(node)\n  const head = contents[0]\n\n  if (head && head.type === 'text') {\n    head.value = '[' + head.value\n  } else {\n    contents.unshift({type: 'text', value: '['})\n  }\n\n  const tail = contents[contents.length - 1]\n\n  if (tail && tail.type === 'text') {\n    tail.value += suffix\n  } else {\n    contents.push({type: 'text', value: suffix})\n  }\n\n  return contents\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\nimport {revert} from '../revert.js'\n\n/**\n * Turn an mdast `imageReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ImageReference} node\n *   mdast node.\n * @returns {Array<ElementContent> | ElementContent}\n *   hast node.\n */\nexport function imageReference(state, node) {\n  const id = String(node.identifier).toUpperCase()\n  const definition = state.definitionById.get(id)\n\n  if (!definition) {\n    return revert(state, node)\n  }\n\n  /** @type {Properties} */\n  const properties = {src: normalizeUri(definition.url || ''), alt: node.alt}\n\n  if (definition.title !== null && definition.title !== undefined) {\n    properties.title = definition.title\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'img', properties, children: []}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Image} Image\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `image` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Image} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function image(state, node) {\n  /** @type {Properties} */\n  const properties = {src: normalizeUri(node.url)}\n\n  if (node.alt !== null && node.alt !== undefined) {\n    properties.alt = node.alt\n  }\n\n  if (node.title !== null && node.title !== undefined) {\n    properties.title = node.title\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'img', properties, children: []}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `inlineCode` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {InlineCode} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function inlineCode(state, node) {\n  /** @type {Text} */\n  const text = {type: 'text', value: node.value.replace(/\\r?\\n|\\r/g, ' ')}\n  state.patch(node, text)\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'code',\n    properties: {},\n    children: [text]\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\nimport {revert} from '../revert.js'\n\n/**\n * Turn an mdast `linkReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {LinkReference} node\n *   mdast node.\n * @returns {Array<ElementContent> | ElementContent}\n *   hast node.\n */\nexport function linkReference(state, node) {\n  const id = String(node.identifier).toUpperCase()\n  const definition = state.definitionById.get(id)\n\n  if (!definition) {\n    return revert(state, node)\n  }\n\n  /** @type {Properties} */\n  const properties = {href: normalizeUri(definition.url || '')}\n\n  if (definition.title !== null && definition.title !== undefined) {\n    properties.title = definition.title\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'a',\n    properties,\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Link} Link\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `link` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Link} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function link(state, node) {\n  /** @type {Properties} */\n  const properties = {href: normalizeUri(node.url)}\n\n  if (node.title !== null && node.title !== undefined) {\n    properties.title = node.title\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'a',\n    properties,\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `listItem` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ListItem} node\n *   mdast node.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @returns {Element}\n *   hast node.\n */\nexport function listItem(state, node, parent) {\n  const results = state.all(node)\n  const loose = parent ? listLoose(parent) : listItemLoose(node)\n  /** @type {Properties} */\n  const properties = {}\n  /** @type {Array<ElementContent>} */\n  const children = []\n\n  if (typeof node.checked === 'boolean') {\n    const head = results[0]\n    /** @type {Element} */\n    let paragraph\n\n    if (head && head.type === 'element' && head.tagName === 'p') {\n      paragraph = head\n    } else {\n      paragraph = {type: 'element', tagName: 'p', properties: {}, children: []}\n      results.unshift(paragraph)\n    }\n\n    if (paragraph.children.length > 0) {\n      paragraph.children.unshift({type: 'text', value: ' '})\n    }\n\n    paragraph.children.unshift({\n      type: 'element',\n      tagName: 'input',\n      properties: {type: 'checkbox', checked: node.checked, disabled: true},\n      children: []\n    })\n\n    // According to github-markdown-css, this class hides bullet.\n    // See: <https://github.com/sindresorhus/github-markdown-css>.\n    properties.className = ['task-list-item']\n  }\n\n  let index = -1\n\n  while (++index < results.length) {\n    const child = results[index]\n\n    // Add eols before nodes, except if this is a loose, first paragraph.\n    if (\n      loose ||\n      index !== 0 ||\n      child.type !== 'element' ||\n      child.tagName !== 'p'\n    ) {\n      children.push({type: 'text', value: '\\n'})\n    }\n\n    if (child.type === 'element' && child.tagName === 'p' && !loose) {\n      children.push(...child.children)\n    } else {\n      children.push(child)\n    }\n  }\n\n  const tail = results[results.length - 1]\n\n  // Add a final eol.\n  if (tail && (loose || tail.type !== 'element' || tail.tagName !== 'p')) {\n    children.push({type: 'text', value: '\\n'})\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'li', properties, children}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n\n/**\n * @param {Parents} node\n * @return {Boolean}\n */\nfunction listLoose(node) {\n  let loose = false\n  if (node.type === 'list') {\n    loose = node.spread || false\n    const children = node.children\n    let index = -1\n\n    while (!loose && ++index < children.length) {\n      loose = listItemLoose(children[index])\n    }\n  }\n\n  return loose\n}\n\n/**\n * @param {ListItem} node\n * @return {Boolean}\n */\nfunction listItemLoose(node) {\n  const spread = node.spread\n\n  return spread === null || spread === undefined\n    ? node.children.length > 1\n    : spread\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').List} List\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `list` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {List} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function list(state, node) {\n  /** @type {Properties} */\n  const properties = {}\n  const results = state.all(node)\n  let index = -1\n\n  if (typeof node.start === 'number' && node.start !== 1) {\n    properties.start = node.start\n  }\n\n  // Like GitHub, add a class for custom styling.\n  while (++index < results.length) {\n    const child = results[index]\n\n    if (\n      child.type === 'element' &&\n      child.tagName === 'li' &&\n      child.properties &&\n      Array.isArray(child.properties.className) &&\n      child.properties.className.includes('task-list-item')\n    ) {\n      properties.className = ['contains-task-list']\n      break\n    }\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: node.ordered ? 'ol' : 'ul',\n    properties,\n    children: state.wrap(results, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `paragraph` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Paragraph} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function paragraph(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'p',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Parents} HastParents\n * @typedef {import('hast').Root} HastRoot\n * @typedef {import('mdast').Root} MdastRoot\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `root` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastRoot} node\n *   mdast node.\n * @returns {HastParents}\n *   hast node.\n */\nexport function root(state, node) {\n  /** @type {HastRoot} */\n  const result = {type: 'root', children: state.wrap(state.all(node))}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `strong` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Strong} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function strong(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'strong',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Table} Table\n * @typedef {import('../state.js').State} State\n */\n\nimport {pointEnd, pointStart} from 'unist-util-position'\n\n/**\n * Turn an mdast `table` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Table} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function table(state, node) {\n  const rows = state.all(node)\n  const firstRow = rows.shift()\n  /** @type {Array<Element>} */\n  const tableContent = []\n\n  if (firstRow) {\n    /** @type {Element} */\n    const head = {\n      type: 'element',\n      tagName: 'thead',\n      properties: {},\n      children: state.wrap([firstRow], true)\n    }\n    state.patch(node.children[0], head)\n    tableContent.push(head)\n  }\n\n  if (rows.length > 0) {\n    /** @type {Element} */\n    const body = {\n      type: 'element',\n      tagName: 'tbody',\n      properties: {},\n      children: state.wrap(rows, true)\n    }\n\n    const start = pointStart(node.children[1])\n    const end = pointEnd(node.children[node.children.length - 1])\n    if (start && end) body.position = {start, end}\n    tableContent.push(body)\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'table',\n    properties: {},\n    children: state.wrap(tableContent, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('mdast').TableRow} TableRow\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `tableRow` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {TableRow} node\n *   mdast node.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @returns {Element}\n *   hast node.\n */\nexport function tableRow(state, node, parent) {\n  const siblings = parent ? parent.children : undefined\n  // Generate a body row when without parent.\n  const rowIndex = siblings ? siblings.indexOf(node) : 1\n  const tagName = rowIndex === 0 ? 'th' : 'td'\n  // To do: option to use `style`?\n  const align = parent && parent.type === 'table' ? parent.align : undefined\n  const length = align ? align.length : node.children.length\n  let cellIndex = -1\n  /** @type {Array<ElementContent>} */\n  const cells = []\n\n  while (++cellIndex < length) {\n    // Note: can also be undefined.\n    const cell = node.children[cellIndex]\n    /** @type {Properties} */\n    const properties = {}\n    const alignValue = align ? align[cellIndex] : undefined\n\n    if (alignValue) {\n      properties.align = alignValue\n    }\n\n    /** @type {Element} */\n    let result = {type: 'element', tagName, properties, children: []}\n\n    if (cell) {\n      result.children = state.all(cell)\n      state.patch(cell, result)\n      result = state.applyData(cell, result)\n    }\n\n    cells.push(result)\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'tr',\n    properties: {},\n    children: state.wrap(cells, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `tableCell` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {TableCell} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function tableCell(state, node) {\n  // Note: this function is normally not called: see `table-row` for how rows\n  // and their cells are compiled.\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'td', // Assume body cell.\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","const tab = 9 /* `\\t` */\nconst space = 32 /* ` ` */\n\n/**\n * Remove initial and final spaces and tabs at the line breaks in `value`.\n * Does not trim initial and final spaces and tabs of the value itself.\n *\n * @param {string} value\n *   Value to trim.\n * @returns {string}\n *   Trimmed value.\n */\nexport function trimLines(value) {\n  const source = String(value)\n  const search = /\\r?\\n|\\r/g\n  let match = search.exec(source)\n  let last = 0\n  /** @type {Array<string>} */\n  const lines = []\n\n  while (match) {\n    lines.push(\n      trimLine(source.slice(last, match.index), last > 0, true),\n      match[0]\n    )\n\n    last = match.index + match[0].length\n    match = search.exec(source)\n  }\n\n  lines.push(trimLine(source.slice(last), last > 0, false))\n\n  return lines.join('')\n}\n\n/**\n * @param {string} value\n *   Line to trim.\n * @param {boolean} start\n *   Whether to trim the start of the line.\n * @param {boolean} end\n *   Whether to trim the end of the line.\n * @returns {string}\n *   Trimmed line.\n */\nfunction trimLine(value, start, end) {\n  let startIndex = 0\n  let endIndex = value.length\n\n  if (start) {\n    let code = value.codePointAt(startIndex)\n\n    while (code === tab || code === space) {\n      startIndex++\n      code = value.codePointAt(startIndex)\n    }\n  }\n\n  if (end) {\n    let code = value.codePointAt(endIndex - 1)\n\n    while (code === tab || code === space) {\n      endIndex--\n      code = value.codePointAt(endIndex - 1)\n    }\n  }\n\n  return endIndex > startIndex ? value.slice(startIndex, endIndex) : ''\n}\n","/**\n * @typedef {import('hast').Element} HastElement\n * @typedef {import('hast').Text} HastText\n * @typedef {import('mdast').Text} MdastText\n * @typedef {import('../state.js').State} State\n */\n\nimport {trimLines} from 'trim-lines'\n\n/**\n * Turn an mdast `text` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastText} node\n *   mdast node.\n * @returns {HastElement | HastText}\n *   hast node.\n */\nexport function text(state, node) {\n  /** @type {HastText} */\n  const result = {type: 'text', value: trimLines(String(node.value))}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `thematicBreak` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ThematicBreak} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function thematicBreak(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'hr',\n    properties: {},\n    children: []\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {strikethrough} from './delete.js'\nimport {emphasis} from './emphasis.js'\nimport {footnoteReference} from './footnote-reference.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {imageReference} from './image-reference.js'\nimport {image} from './image.js'\nimport {inlineCode} from './inline-code.js'\nimport {linkReference} from './link-reference.js'\nimport {link} from './link.js'\nimport {listItem} from './list-item.js'\nimport {list} from './list.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {table} from './table.js'\nimport {tableRow} from './table-row.js'\nimport {tableCell} from './table-cell.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/**\n * Default handlers for nodes.\n *\n * @satisfies {import('../state.js').Handlers}\n */\nexport const handlers = {\n  blockquote,\n  break: hardBreak,\n  code,\n  delete: strikethrough,\n  emphasis,\n  footnoteReference,\n  heading,\n  html,\n  imageReference,\n  image,\n  inlineCode,\n  linkReference,\n  link,\n  listItem,\n  list,\n  paragraph,\n  // @ts-expect-error: root is different, but hard to type.\n  root,\n  strong,\n  table,\n  tableCell,\n  tableRow,\n  text,\n  thematicBreak,\n  toml: ignore,\n  yaml: ignore,\n  definition: ignore,\n  footnoteDefinition: ignore\n}\n\n// Return nothing for nodes that are ignored.\nfunction ignore() {\n  return undefined\n}\n","export const VOID       = -1;\nexport const PRIMITIVE  = 0;\nexport const ARRAY      = 1;\nexport const OBJECT     = 2;\nexport const DATE       = 3;\nexport const REGEXP     = 4;\nexport const MAP        = 5;\nexport const SET        = 6;\nexport const ERROR      = 7;\nexport const BIGINT     = 8;\n// export const SYMBOL = 9;\n","import {\n  VOID, PRIMITIVE,\n  ARRAY, OBJECT,\n  DATE, REGEXP, MAP, SET,\n  ERROR, BIGINT\n} from './types.js';\n\nconst env = typeof self === 'object' ? self : globalThis;\n\nconst deserializer = ($, _) => {\n  const as = (out, index) => {\n    $.set(index, out);\n    return out;\n  };\n\n  const unpair = index => {\n    if ($.has(index))\n      return $.get(index);\n\n    const [type, value] = _[index];\n    switch (type) {\n      case PRIMITIVE:\n      case VOID:\n        return as(value, index);\n      case ARRAY: {\n        const arr = as([], index);\n        for (const index of value)\n          arr.push(unpair(index));\n        return arr;\n      }\n      case OBJECT: {\n        const object = as({}, index);\n        for (const [key, index] of value)\n          object[unpair(key)] = unpair(index);\n        return object;\n      }\n      case DATE:\n        return as(new Date(value), index);\n      case REGEXP: {\n        const {source, flags} = value;\n        return as(new RegExp(source, flags), index);\n      }\n      case MAP: {\n        const map = as(new Map, index);\n        for (const [key, index] of value)\n          map.set(unpair(key), unpair(index));\n        return map;\n      }\n      case SET: {\n        const set = as(new Set, index);\n        for (const index of value)\n          set.add(unpair(index));\n        return set;\n      }\n      case ERROR: {\n        const {name, message} = value;\n        return as(new env[name](message), index);\n      }\n      case BIGINT:\n        return as(BigInt(value), index);\n      case 'BigInt':\n        return as(Object(BigInt(value)), index);\n      case 'ArrayBuffer':\n        return as(new Uint8Array(value).buffer, value);\n      case 'DataView': {\n        const { buffer } = new Uint8Array(value);\n        return as(new DataView(buffer), value);\n      }\n    }\n    return as(new env[type](value), index);\n  };\n\n  return unpair;\n};\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns a deserialized value from a serialized array of Records.\n * @param {Record[]} serialized a previously serialized value.\n * @returns {any}\n */\nexport const deserialize = serialized => deserializer(new Map, serialized)(0);\n","import {\n  VOID, PRIMITIVE,\n  ARRAY, OBJECT,\n  DATE, REGEXP, MAP, SET,\n  ERROR, BIGINT\n} from './types.js';\n\nconst EMPTY = '';\n\nconst {toString} = {};\nconst {keys} = Object;\n\nconst typeOf = value => {\n  const type = typeof value;\n  if (type !== 'object' || !value)\n    return [PRIMITIVE, type];\n\n  const asString = toString.call(value).slice(8, -1);\n  switch (asString) {\n    case 'Array':\n      return [ARRAY, EMPTY];\n    case 'Object':\n      return [OBJECT, EMPTY];\n    case 'Date':\n      return [DATE, EMPTY];\n    case 'RegExp':\n      return [REGEXP, EMPTY];\n    case 'Map':\n      return [MAP, EMPTY];\n    case 'Set':\n      return [SET, EMPTY];\n    case 'DataView':\n      return [ARRAY, asString];\n  }\n\n  if (asString.includes('Array'))\n    return [ARRAY, asString];\n\n  if (asString.includes('Error'))\n    return [ERROR, asString];\n\n  return [OBJECT, asString];\n};\n\nconst shouldSkip = ([TYPE, type]) => (\n  TYPE === PRIMITIVE &&\n  (type === 'function' || type === 'symbol')\n);\n\nconst serializer = (strict, json, $, _) => {\n\n  const as = (out, value) => {\n    const index = _.push(out) - 1;\n    $.set(value, index);\n    return index;\n  };\n\n  const pair = value => {\n    if ($.has(value))\n      return $.get(value);\n\n    let [TYPE, type] = typeOf(value);\n    switch (TYPE) {\n      case PRIMITIVE: {\n        let entry = value;\n        switch (type) {\n          case 'bigint':\n            TYPE = BIGINT;\n            entry = value.toString();\n            break;\n          case 'function':\n          case 'symbol':\n            if (strict)\n              throw new TypeError('unable to serialize ' + type);\n            entry = null;\n            break;\n          case 'undefined':\n            return as([VOID], value);\n        }\n        return as([TYPE, entry], value);\n      }\n      case ARRAY: {\n        if (type) {\n          let spread = value;\n          if (type === 'DataView') {\n            spread = new Uint8Array(value.buffer);\n          }\n          else if (type === 'ArrayBuffer') {\n            spread = new Uint8Array(value);\n          }\n          return as([type, [...spread]], value);\n        }\n\n        const arr = [];\n        const index = as([TYPE, arr], value);\n        for (const entry of value)\n          arr.push(pair(entry));\n        return index;\n      }\n      case OBJECT: {\n        if (type) {\n          switch (type) {\n            case 'BigInt':\n              return as([type, value.toString()], value);\n            case 'Boolean':\n            case 'Number':\n            case 'String':\n              return as([type, value.valueOf()], value);\n          }\n        }\n\n        if (json && ('toJSON' in value))\n          return pair(value.toJSON());\n\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const key of keys(value)) {\n          if (strict || !shouldSkip(typeOf(value[key])))\n            entries.push([pair(key), pair(value[key])]);\n        }\n        return index;\n      }\n      case DATE:\n        return as([TYPE, value.toISOString()], value);\n      case REGEXP: {\n        const {source, flags} = value;\n        return as([TYPE, {source, flags}], value);\n      }\n      case MAP: {\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const [key, entry] of value) {\n          if (strict || !(shouldSkip(typeOf(key)) || shouldSkip(typeOf(entry))))\n            entries.push([pair(key), pair(entry)]);\n        }\n        return index;\n      }\n      case SET: {\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const entry of value) {\n          if (strict || !shouldSkip(typeOf(entry)))\n            entries.push(pair(entry));\n        }\n        return index;\n      }\n    }\n\n    const {message} = value;\n    return as([TYPE, {name: type, message}], value);\n  };\n\n  return pair;\n};\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns an array of serialized Records.\n * @param {any} value a serializable value.\n * @param {{json?: boolean, lossy?: boolean}?} options an object with a `lossy` or `json` property that,\n *  if `true`, will not throw errors on incompatible types, and behave more\n *  like JSON stringify would behave. Symbol and Function will be discarded.\n * @returns {Record[]}\n */\n export const serialize = (value, {json, lossy} = {}) => {\n  const _ = [];\n  return serializer(!(json || lossy), !!json, new Map, _)(value), _;\n};\n","import {deserialize} from './deserialize.js';\nimport {serialize} from './serialize.js';\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns an array of serialized Records.\n * @param {any} any a serializable value.\n * @param {{transfer?: any[], json?: boolean, lossy?: boolean}?} options an object with\n * a transfer option (ignored when polyfilled) and/or non standard fields that\n * fallback to the polyfill if present.\n * @returns {Record[]}\n */\nexport default typeof structuredClone === \"function\" ?\n  /* c8 ignore start */\n  (any, options) => (\n    options && ('json' in options || 'lossy' in options) ?\n      deserialize(serialize(any, options)) : structuredClone(any)\n  ) :\n  (any, options) => deserialize(serialize(any, options));\n  /* c8 ignore stop */\n\nexport {deserialize, serialize};\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n *\n * @typedef {import('./state.js').State} State\n */\n\n/**\n * @callback FootnoteBackContentTemplate\n *   Generate content for the backreference dynamically.\n *\n *   For the following markdown:\n *\n *   ```markdown\n *   Alpha[^micromark], bravo[^micromark], and charlie[^remark].\n *\n *   [^remark]: things about remark\n *   [^micromark]: things about micromark\n *   ```\n *\n *   This function will be called with:\n *\n *   *  `0` and `0` for the backreference from `things about micromark` to\n *      `alpha`, as it is the first used definition, and the first call to it\n *   *  `0` and `1` for the backreference from `things about micromark` to\n *      `bravo`, as it is the first used definition, and the second call to it\n *   *  `1` and `0` for the backreference from `things about remark` to\n *      `charlie`, as it is the second used definition\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {Array<ElementContent> | ElementContent | string}\n *   Content for the backreference when linking back from definitions to their\n *   reference.\n *\n * @callback FootnoteBackLabelTemplate\n *   Generate a back label dynamically.\n *\n *   For the following markdown:\n *\n *   ```markdown\n *   Alpha[^micromark], bravo[^micromark], and charlie[^remark].\n *\n *   [^remark]: things about remark\n *   [^micromark]: things about micromark\n *   ```\n *\n *   This function will be called with:\n *\n *   *  `0` and `0` for the backreference from `things about micromark` to\n *      `alpha`, as it is the first used definition, and the first call to it\n *   *  `0` and `1` for the backreference from `things about micromark` to\n *      `bravo`, as it is the first used definition, and the second call to it\n *   *  `1` and `0` for the backreference from `things about remark` to\n *      `charlie`, as it is the second used definition\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {string}\n *   Back label to use when linking back from definitions to their reference.\n */\n\nimport structuredClone from '@ungap/structured-clone'\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Generate the default content that GitHub uses on backreferences.\n *\n * @param {number} _\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {Array<ElementContent>}\n *   Content.\n */\nexport function defaultFootnoteBackContent(_, rereferenceIndex) {\n  /** @type {Array<ElementContent>} */\n  const result = [{type: 'text', value: '↩'}]\n\n  if (rereferenceIndex > 1) {\n    result.push({\n      type: 'element',\n      tagName: 'sup',\n      properties: {},\n      children: [{type: 'text', value: String(rereferenceIndex)}]\n    })\n  }\n\n  return result\n}\n\n/**\n * Generate the default label that GitHub uses on backreferences.\n *\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {string}\n *   Label.\n */\nexport function defaultFootnoteBackLabel(referenceIndex, rereferenceIndex) {\n  return (\n    'Back to reference ' +\n    (referenceIndex + 1) +\n    (rereferenceIndex > 1 ? '-' + rereferenceIndex : '')\n  )\n}\n\n/**\n * Generate a hast footer for called footnote definitions.\n *\n * @param {State} state\n *   Info passed around.\n * @returns {Element | undefined}\n *   `section` element or `undefined`.\n */\n// eslint-disable-next-line complexity\nexport function footer(state) {\n  const clobberPrefix =\n    typeof state.options.clobberPrefix === 'string'\n      ? state.options.clobberPrefix\n      : 'user-content-'\n  const footnoteBackContent =\n    state.options.footnoteBackContent || defaultFootnoteBackContent\n  const footnoteBackLabel =\n    state.options.footnoteBackLabel || defaultFootnoteBackLabel\n  const footnoteLabel = state.options.footnoteLabel || 'Footnotes'\n  const footnoteLabelTagName = state.options.footnoteLabelTagName || 'h2'\n  const footnoteLabelProperties = state.options.footnoteLabelProperties || {\n    className: ['sr-only']\n  }\n  /** @type {Array<ElementContent>} */\n  const listItems = []\n  let referenceIndex = -1\n\n  while (++referenceIndex < state.footnoteOrder.length) {\n    const definition = state.footnoteById.get(\n      state.footnoteOrder[referenceIndex]\n    )\n\n    if (!definition) {\n      continue\n    }\n\n    const content = state.all(definition)\n    const id = String(definition.identifier).toUpperCase()\n    const safeId = normalizeUri(id.toLowerCase())\n    let rereferenceIndex = 0\n    /** @type {Array<ElementContent>} */\n    const backReferences = []\n    const counts = state.footnoteCounts.get(id)\n\n    // eslint-disable-next-line no-unmodified-loop-condition\n    while (counts !== undefined && ++rereferenceIndex <= counts) {\n      if (backReferences.length > 0) {\n        backReferences.push({type: 'text', value: ' '})\n      }\n\n      let children =\n        typeof footnoteBackContent === 'string'\n          ? footnoteBackContent\n          : footnoteBackContent(referenceIndex, rereferenceIndex)\n\n      if (typeof children === 'string') {\n        children = {type: 'text', value: children}\n      }\n\n      backReferences.push({\n        type: 'element',\n        tagName: 'a',\n        properties: {\n          href:\n            '#' +\n            clobberPrefix +\n            'fnref-' +\n            safeId +\n            (rereferenceIndex > 1 ? '-' + rereferenceIndex : ''),\n          dataFootnoteBackref: '',\n          ariaLabel:\n            typeof footnoteBackLabel === 'string'\n              ? footnoteBackLabel\n              : footnoteBackLabel(referenceIndex, rereferenceIndex),\n          className: ['data-footnote-backref']\n        },\n        children: Array.isArray(children) ? children : [children]\n      })\n    }\n\n    const tail = content[content.length - 1]\n\n    if (tail && tail.type === 'element' && tail.tagName === 'p') {\n      const tailTail = tail.children[tail.children.length - 1]\n      if (tailTail && tailTail.type === 'text') {\n        tailTail.value += ' '\n      } else {\n        tail.children.push({type: 'text', value: ' '})\n      }\n\n      tail.children.push(...backReferences)\n    } else {\n      content.push(...backReferences)\n    }\n\n    /** @type {Element} */\n    const listItem = {\n      type: 'element',\n      tagName: 'li',\n      properties: {id: clobberPrefix + 'fn-' + safeId},\n      children: state.wrap(content, true)\n    }\n\n    state.patch(definition, listItem)\n\n    listItems.push(listItem)\n  }\n\n  if (listItems.length === 0) {\n    return\n  }\n\n  return {\n    type: 'element',\n    tagName: 'section',\n    properties: {dataFootnotes: true, className: ['footnotes']},\n    children: [\n      {\n        type: 'element',\n        tagName: footnoteLabelTagName,\n        properties: {\n          ...structuredClone(footnoteLabelProperties),\n          id: 'footnote-label'\n        },\n        children: [{type: 'text', value: footnoteLabel}]\n      },\n      {type: 'text', value: '\\n'},\n      {\n        type: 'element',\n        tagName: 'ol',\n        properties: {},\n        children: state.wrap(listItems, true)\n      },\n      {type: 'text', value: '\\n'}\n    ]\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n */\n\n/**\n * @template Fn\n * @template Fallback\n * @typedef {Fn extends (value: any) => value is infer Thing ? Thing : Fallback} Predicate\n */\n\n/**\n * @callback Check\n *   Check that an arbitrary value is a node.\n * @param {unknown} this\n *   The given context.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean}\n *   Whether this is a node and passes a test.\n *\n * @typedef {Record<string, unknown> | Node} Props\n *   Object to check for equivalence.\n *\n *   Note: `Node` is included as it is common but is not indexable.\n *\n * @typedef {Array<Props | TestFunction | string> | Props | TestFunction | string | null | undefined} Test\n *   Check for an arbitrary node.\n *\n * @callback TestFunction\n *   Check if a node passes a test.\n * @param {unknown} this\n *   The given context.\n * @param {Node} node\n *   A node.\n * @param {number | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean | undefined | void}\n *   Whether this node passes the test.\n *\n *   Note: `void` is included until TS sees no return as `undefined`.\n */\n\n/**\n * Check if `node` is a `Node` and whether it passes the given test.\n *\n * @param {unknown} node\n *   Thing to check, typically `Node`.\n * @param {Test} test\n *   A check for a specific node.\n * @param {number | null | undefined} index\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} parent\n *   The node’s parent.\n * @param {unknown} context\n *   Context object (`this`) to pass to `test` functions.\n * @returns {boolean}\n *   Whether `node` is a node and passes a test.\n */\nexport const is =\n  // Note: overloads in JSDoc can’t yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((node?: null | undefined) => false) &\n   *   ((node: unknown, test?: null | undefined, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((node: unknown, test?: Test, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => boolean)\n   * )}\n   */\n  (\n    /**\n     * @param {unknown} [node]\n     * @param {Test} [test]\n     * @param {number | null | undefined} [index]\n     * @param {Parent | null | undefined} [parent]\n     * @param {unknown} [context]\n     * @returns {boolean}\n     */\n    // eslint-disable-next-line max-params\n    function (node, test, index, parent, context) {\n      const check = convert(test)\n\n      if (\n        index !== undefined &&\n        index !== null &&\n        (typeof index !== 'number' ||\n          index < 0 ||\n          index === Number.POSITIVE_INFINITY)\n      ) {\n        throw new Error('Expected positive finite index')\n      }\n\n      if (\n        parent !== undefined &&\n        parent !== null &&\n        (!is(parent) || !parent.children)\n      ) {\n        throw new Error('Expected parent node')\n      }\n\n      if (\n        (parent === undefined || parent === null) !==\n        (index === undefined || index === null)\n      ) {\n        throw new Error('Expected both parent and index')\n      }\n\n      return looksLikeANode(node)\n        ? check.call(context, node, index, parent)\n        : false\n    }\n  )\n\n/**\n * Generate an assertion from a test.\n *\n * Useful if you’re going to test many nodes, for example when creating a\n * utility where something else passes a compatible test.\n *\n * The created function is a bit faster because it expects valid input only:\n * a `node`, `index`, and `parent`.\n *\n * @param {Test} test\n *   *   when nullish, checks if `node` is a `Node`.\n *   *   when `string`, works like passing `(node) => node.type === test`.\n *   *   when `function` checks if function passed the node is true.\n *   *   when `object`, checks that all keys in test are in node, and that they have (strictly) equal values.\n *   *   when `array`, checks if any one of the subtests pass.\n * @returns {Check}\n *   An assertion.\n */\nexport const convert =\n  // Note: overloads in JSDoc can’t yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((test?: Test) => Check)\n   * )}\n   */\n  (\n    /**\n     * @param {Test} [test]\n     * @returns {Check}\n     */\n    function (test) {\n      if (test === null || test === undefined) {\n        return ok\n      }\n\n      if (typeof test === 'function') {\n        return castFactory(test)\n      }\n\n      if (typeof test === 'object') {\n        return Array.isArray(test) ? anyFactory(test) : propsFactory(test)\n      }\n\n      if (typeof test === 'string') {\n        return typeFactory(test)\n      }\n\n      throw new Error('Expected function, string, or object as test')\n    }\n  )\n\n/**\n * @param {Array<Props | TestFunction | string>} tests\n * @returns {Check}\n */\nfunction anyFactory(tests) {\n  /** @type {Array<Check>} */\n  const checks = []\n  let index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return castFactory(any)\n\n  /**\n   * @this {unknown}\n   * @type {TestFunction}\n   */\n  function any(...parameters) {\n    let index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].apply(this, parameters)) return true\n    }\n\n    return false\n  }\n}\n\n/**\n * Turn an object into a test for a node with a certain fields.\n *\n * @param {Props} check\n * @returns {Check}\n */\nfunction propsFactory(check) {\n  const checkAsRecord = /** @type {Record<string, unknown>} */ (check)\n\n  return castFactory(all)\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function all(node) {\n    const nodeAsRecord = /** @type {Record<string, unknown>} */ (\n      /** @type {unknown} */ (node)\n    )\n\n    /** @type {string} */\n    let key\n\n    for (key in check) {\n      if (nodeAsRecord[key] !== checkAsRecord[key]) return false\n    }\n\n    return true\n  }\n}\n\n/**\n * Turn a string into a test for a node with a certain type.\n *\n * @param {string} check\n * @returns {Check}\n */\nfunction typeFactory(check) {\n  return castFactory(type)\n\n  /**\n   * @param {Node} node\n   */\n  function type(node) {\n    return node && node.type === check\n  }\n}\n\n/**\n * Turn a custom test into a test for a node that passes that test.\n *\n * @param {TestFunction} testFunction\n * @returns {Check}\n */\nfunction castFactory(testFunction) {\n  return check\n\n  /**\n   * @this {unknown}\n   * @type {Check}\n   */\n  function check(value, index, parent) {\n    return Boolean(\n      looksLikeANode(value) &&\n        testFunction.call(\n          this,\n          value,\n          typeof index === 'number' ? index : undefined,\n          parent || undefined\n        )\n    )\n  }\n}\n\nfunction ok() {\n  return true\n}\n\n/**\n * @param {unknown} value\n * @returns {value is Node}\n */\nfunction looksLikeANode(value) {\n  return value !== null && typeof value === 'object' && 'type' in value\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesn’t work when publishing on npm.\n */\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {InternalAncestor<InclusiveDescendant<Tree>, Child>} Ancestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   > 👉 **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesn’t improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesn’t hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {'skip' | boolean} Action\n *   Union of the action types.\n *\n * @typedef {number} Index\n *   Move to the sibling at `index` next (after node itself is completely\n *   traversed).\n *\n *   Useful if mutating the tree, such as removing the node the visitor is\n *   currently on, or any of its previous siblings.\n *   Results less than 0 or greater than or equal to `children.length` stop\n *   traversing the parent.\n *\n * @typedef {[(Action | null | undefined | void)?, (Index | null | undefined)?]} ActionTuple\n *   List with one or two values, the first an action, the second an index.\n *\n * @typedef {Action | ActionTuple | Index | null | undefined | void} VisitorResult\n *   Any value that can be returned from a visitor.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform the parent of node (the last of `ancestors`).\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of an ancestor still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Array<VisitedParents>} ancestors\n *   Ancestors of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [VisitedParents=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Matches<InclusiveDescendant<Tree>, Check>, Ancestor<Tree, Matches<InclusiveDescendant<Tree>, Check>>>} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parents`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Tree type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {convert} from 'unist-util-is'\nimport {color} from 'unist-util-visit-parents/do-not-use-color'\n\n/** @type {Readonly<ActionTuple>} */\nconst empty = []\n\n/**\n * Continue traversing as normal.\n */\nexport const CONTINUE = true\n\n/**\n * Stop traversing immediately.\n */\nexport const EXIT = false\n\n/**\n * Do not traverse this node’s children.\n */\nexport const SKIP = 'skip'\n\n/**\n * Visit nodes, with ancestral information.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} test\n *   `unist-util-is`-compatible test\n * @param {Visitor | boolean | null | undefined} [visitor]\n *   Handle each node.\n * @param {boolean | null | undefined} [reverse]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visitParents(tree, test, visitor, reverse) {\n  /** @type {Test} */\n  let check\n\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    // @ts-expect-error no visitor given, so `visitor` is test.\n    visitor = test\n  } else {\n    // @ts-expect-error visitor given, so `test` isn’t a visitor.\n    check = test\n  }\n\n  const is = convert(check)\n  const step = reverse ? -1 : 1\n\n  factory(tree, undefined, [])()\n\n  /**\n   * @param {UnistNode} node\n   * @param {number | undefined} index\n   * @param {Array<UnistParent>} parents\n   */\n  function factory(node, index, parents) {\n    const value = /** @type {Record<string, unknown>} */ (\n      node && typeof node === 'object' ? node : {}\n    )\n\n    if (typeof value.type === 'string') {\n      const name =\n        // `hast`\n        typeof value.tagName === 'string'\n          ? value.tagName\n          : // `xast`\n          typeof value.name === 'string'\n          ? value.name\n          : undefined\n\n      Object.defineProperty(visit, 'name', {\n        value:\n          'node (' + color(node.type + (name ? '<' + name + '>' : '')) + ')'\n      })\n    }\n\n    return visit\n\n    function visit() {\n      /** @type {Readonly<ActionTuple>} */\n      let result = empty\n      /** @type {Readonly<ActionTuple>} */\n      let subresult\n      /** @type {number} */\n      let offset\n      /** @type {Array<UnistParent>} */\n      let grandparents\n\n      if (!test || is(node, index, parents[parents.length - 1] || undefined)) {\n        // @ts-expect-error: `visitor` is now a visitor.\n        result = toResult(visitor(node, parents))\n\n        if (result[0] === EXIT) {\n          return result\n        }\n      }\n\n      if ('children' in node && node.children) {\n        const nodeAsParent = /** @type {UnistParent} */ (node)\n\n        if (nodeAsParent.children && result[0] !== SKIP) {\n          offset = (reverse ? nodeAsParent.children.length : -1) + step\n          grandparents = parents.concat(nodeAsParent)\n\n          while (offset > -1 && offset < nodeAsParent.children.length) {\n            const child = nodeAsParent.children[offset]\n\n            subresult = factory(child, offset, grandparents)()\n\n            if (subresult[0] === EXIT) {\n              return subresult\n            }\n\n            offset =\n              typeof subresult[1] === 'number' ? subresult[1] : offset + step\n          }\n        }\n      }\n\n      return result\n    }\n  }\n}\n\n/**\n * Turn a return value into a clean result.\n *\n * @param {VisitorResult} value\n *   Valid return values from visitors.\n * @returns {Readonly<ActionTuple>}\n *   Clean result.\n */\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return value === null || value === undefined ? empty : [value]\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n * @typedef {import('unist-util-visit-parents').VisitorResult} VisitorResult\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesn’t work when publishing on npm.\n */\n\n// To do: use types from `unist-util-visit-parents` when it’s released.\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   > 👉 **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesn’t improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesn’t hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform `parent`.\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of `parent` still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Visited extends UnistNode ? number | undefined : never} index\n *   Index of `node` in `parent`.\n * @param {Ancestor extends UnistParent ? Ancestor | undefined : never} parent\n *   Parent of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [Ancestor=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Visited, Parent<Ancestor, Visited>>} BuildVisitorFromMatch\n *   Build a typed `Visitor` function from a node and all possible parents.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Visited\n *   Node type.\n * @template {UnistParent} Ancestor\n *   Parent type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromMatch<\n *     Matches<Descendant, Check>,\n *     Extract<Descendant, UnistParent>\n *   >\n * )} BuildVisitorFromDescendants\n *   Build a typed `Visitor` function from a list of descendants and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Descendant\n *   Node type.\n * @template {Test} Check\n *   Test type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromDescendants<\n *     InclusiveDescendant<Tree>,\n *     Check\n *   >\n * )} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Node type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {visitParents} from 'unist-util-visit-parents'\n\nexport {CONTINUE, EXIT, SKIP} from 'unist-util-visit-parents'\n\n/**\n * Visit nodes.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} testOrVisitor\n *   `unist-util-is`-compatible test (optional, omit to pass a visitor).\n * @param {Visitor | boolean | null | undefined} [visitorOrReverse]\n *   Handle each node (when test is omitted, pass `reverse`).\n * @param {boolean | null | undefined} [maybeReverse=false]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visit(tree, testOrVisitor, visitorOrReverse, maybeReverse) {\n  /** @type {boolean | null | undefined} */\n  let reverse\n  /** @type {Test} */\n  let test\n  /** @type {Visitor} */\n  let visitor\n\n  if (\n    typeof testOrVisitor === 'function' &&\n    typeof visitorOrReverse !== 'function'\n  ) {\n    test = undefined\n    visitor = testOrVisitor\n    reverse = visitorOrReverse\n  } else {\n    // @ts-expect-error: assume the overload with test was given.\n    test = testOrVisitor\n    // @ts-expect-error: assume the overload with test was given.\n    visitor = visitorOrReverse\n    reverse = maybeReverse\n  }\n\n  visitParents(tree, test, overload, reverse)\n\n  /**\n   * @param {UnistNode} node\n   * @param {Array<UnistParent>} parents\n   */\n  function overload(node, parents) {\n    const parent = parents[parents.length - 1]\n    const index = parent ? parent.children.indexOf(node) : undefined\n    return visitor(node, index, parent)\n  }\n}\n","/**\n * @typedef {import('hast').Element} HastElement\n * @typedef {import('hast').ElementContent} HastElementContent\n * @typedef {import('hast').Nodes} HastNodes\n * @typedef {import('hast').Properties} HastProperties\n * @typedef {import('hast').RootContent} HastRootContent\n * @typedef {import('hast').Text} HastText\n *\n * @typedef {import('mdast').Definition} MdastDefinition\n * @typedef {import('mdast').FootnoteDefinition} MdastFootnoteDefinition\n * @typedef {import('mdast').Nodes} MdastNodes\n * @typedef {import('mdast').Parents} MdastParents\n *\n * @typedef {import('vfile').VFile} VFile\n *\n * @typedef {import('./footer.js').FootnoteBackContentTemplate} FootnoteBackContentTemplate\n * @typedef {import('./footer.js').FootnoteBackLabelTemplate} FootnoteBackLabelTemplate\n */\n\n/**\n * @callback Handler\n *   Handle a node.\n * @param {State} state\n *   Info passed around.\n * @param {any} node\n *   mdast node to handle.\n * @param {MdastParents | undefined} parent\n *   Parent of `node`.\n * @returns {Array<HastElementContent> | HastElementContent | undefined}\n *   hast node.\n *\n * @typedef {Partial<Record<MdastNodes['type'], Handler>>} Handlers\n *   Handle nodes.\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [allowDangerousHtml=false]\n *   Whether to persist raw HTML in markdown in the hast tree (default:\n *   `false`).\n * @property {string | null | undefined} [clobberPrefix='user-content-']\n *   Prefix to use before the `id` property on footnotes to prevent them from\n *   *clobbering* (default: `'user-content-'`).\n *\n *   Pass `''` for trusted markdown and when you are careful with\n *   polyfilling.\n *   You could pass a different prefix.\n *\n *   DOM clobbering is this:\n *\n *   ```html\n *   <p id=\"x\"></p>\n *   <script>alert(x) // `x` now refers to the `p#x` DOM element</script>\n *   ```\n *\n *   The above example shows that elements are made available by browsers, by\n *   their ID, on the `window` object.\n *   This is a security risk because you might be expecting some other variable\n *   at that place.\n *   It can also break polyfills.\n *   Using a prefix solves these problems.\n * @property {VFile | null | undefined} [file]\n *   Corresponding virtual file representing the input document (optional).\n * @property {FootnoteBackContentTemplate | string | null | undefined} [footnoteBackContent]\n *   Content of the backreference back to references (default: `defaultFootnoteBackContent`).\n *\n *   The default value is:\n *\n *   ```js\n *   function defaultFootnoteBackContent(_, rereferenceIndex) {\n *     const result = [{type: 'text', value: '↩'}]\n *\n *     if (rereferenceIndex > 1) {\n *       result.push({\n *         type: 'element',\n *         tagName: 'sup',\n *         properties: {},\n *         children: [{type: 'text', value: String(rereferenceIndex)}]\n *       })\n *     }\n *\n *     return result\n *   }\n *   ```\n *\n *   This content is used in the `a` element of each backreference (the `↩`\n *   links).\n * @property {FootnoteBackLabelTemplate | string | null | undefined} [footnoteBackLabel]\n *   Label to describe the backreference back to references (default:\n *   `defaultFootnoteBackLabel`).\n *\n *   The default value is:\n *\n *   ```js\n *   function defaultFootnoteBackLabel(referenceIndex, rereferenceIndex) {\n *    return (\n *      'Back to reference ' +\n *      (referenceIndex + 1) +\n *      (rereferenceIndex > 1 ? '-' + rereferenceIndex : '')\n *    )\n *   }\n *   ```\n *\n *   Change it when the markdown is not in English.\n *\n *   This label is used in the `ariaLabel` property on each backreference\n *   (the `↩` links).\n *   It affects users of assistive technology.\n * @property {string | null | undefined} [footnoteLabel='Footnotes']\n *   Textual label to use for the footnotes section (default: `'Footnotes'`).\n *\n *   Change it when the markdown is not in English.\n *\n *   This label is typically hidden visually (assuming a `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass different properties with the `footnoteLabelProperties` option.\n * @property {HastProperties | null | undefined} [footnoteLabelProperties={className: ['sr-only']}]\n *   Properties to use on the footnote label (default: `{className:\n *   ['sr-only']}`).\n *\n *   Change it to show the label and add other properties.\n *\n *   This label is typically hidden visually (assuming an `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass an empty string.\n *   You can also add different properties.\n *\n *   > **Note**: `id: 'footnote-label'` is always added, because footnote\n *   > calls use it with `aria-describedby` to provide an accessible label.\n * @property {string | null | undefined} [footnoteLabelTagName='h2']\n *   HTML tag name to use for the footnote label element (default: `'h2'`).\n *\n *   Change it to match your document structure.\n *\n *   This label is typically hidden visually (assuming a `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass different properties with the `footnoteLabelProperties` option.\n * @property {Handlers | null | undefined} [handlers]\n *   Extra handlers for nodes (optional).\n * @property {Array<MdastNodes['type']> | null | undefined} [passThrough]\n *   List of custom mdast node types to pass through (keep) in hast (note that\n *   the node itself is passed, but eventual children are transformed)\n *   (optional).\n * @property {Handler | null | undefined} [unknownHandler]\n *   Handler for all unknown nodes (optional).\n *\n * @typedef State\n *   Info passed around.\n * @property {(node: MdastNodes) => Array<HastElementContent>} all\n *   Transform the children of an mdast parent to hast.\n * @property {<Type extends HastNodes>(from: MdastNodes, to: Type) => HastElement | Type} applyData\n *   Honor the `data` of `from`, and generate an element instead of `node`.\n * @property {Map<string, MdastDefinition>} definitionById\n *   Definitions by their identifier.\n * @property {Map<string, MdastFootnoteDefinition>} footnoteById\n *   Footnote definitions by their identifier.\n * @property {Map<string, number>} footnoteCounts\n *   Counts for how often the same footnote was called.\n * @property {Array<string>} footnoteOrder\n *   Identifiers of order when footnote calls first appear in tree order.\n * @property {Handlers} handlers\n *   Applied handlers.\n * @property {(node: MdastNodes, parent: MdastParents | undefined) => Array<HastElementContent> | HastElementContent | undefined} one\n *   Transform an mdast node to hast.\n * @property {Options} options\n *   Configuration.\n * @property {(from: MdastNodes, node: HastNodes) => undefined} patch\n *   Copy a node’s positional info.\n * @property {<Type extends HastRootContent>(nodes: Array<Type>, loose?: boolean | undefined) => Array<HastText | Type>} wrap\n *   Wrap `nodes` with line endings between each node, adds initial/final line endings when `loose`.\n */\n\nimport structuredClone from '@ungap/structured-clone'\nimport {visit} from 'unist-util-visit'\nimport {position} from 'unist-util-position'\nimport {handlers as defaultHandlers} from './handlers/index.js'\n\nconst own = {}.hasOwnProperty\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Create `state` from an mdast tree.\n *\n * @param {MdastNodes} tree\n *   mdast node to transform.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {State}\n *   `state` function.\n */\nexport function createState(tree, options) {\n  const settings = options || emptyOptions\n  /** @type {Map<string, MdastDefinition>} */\n  const definitionById = new Map()\n  /** @type {Map<string, MdastFootnoteDefinition>} */\n  const footnoteById = new Map()\n  /** @type {Map<string, number>} */\n  const footnoteCounts = new Map()\n  /** @type {Handlers} */\n  // @ts-expect-error: the root handler returns a root.\n  // Hard to type.\n  const handlers = {...defaultHandlers, ...settings.handlers}\n\n  /** @type {State} */\n  const state = {\n    all,\n    applyData,\n    definitionById,\n    footnoteById,\n    footnoteCounts,\n    footnoteOrder: [],\n    handlers,\n    one,\n    options: settings,\n    patch,\n    wrap\n  }\n\n  visit(tree, function (node) {\n    if (node.type === 'definition' || node.type === 'footnoteDefinition') {\n      const map = node.type === 'definition' ? definitionById : footnoteById\n      const id = String(node.identifier).toUpperCase()\n\n      // Mimick CM behavior of link definitions.\n      // See: <https://github.com/syntax-tree/mdast-util-definitions/blob/9032189/lib/index.js#L20-L21>.\n      if (!map.has(id)) {\n        // @ts-expect-error: node type matches map.\n        map.set(id, node)\n      }\n    }\n  })\n\n  return state\n\n  /**\n   * Transform an mdast node into a hast node.\n   *\n   * @param {MdastNodes} node\n   *   mdast node.\n   * @param {MdastParents | undefined} [parent]\n   *   Parent of `node`.\n   * @returns {Array<HastElementContent> | HastElementContent | undefined}\n   *   Resulting hast node.\n   */\n  function one(node, parent) {\n    const type = node.type\n    const handle = state.handlers[type]\n\n    if (own.call(state.handlers, type) && handle) {\n      return handle(state, node, parent)\n    }\n\n    if (state.options.passThrough && state.options.passThrough.includes(type)) {\n      if ('children' in node) {\n        const {children, ...shallow} = node\n        const result = structuredClone(shallow)\n        // @ts-expect-error: TS doesn’t understand…\n        result.children = state.all(node)\n        // @ts-expect-error: TS doesn’t understand…\n        return result\n      }\n\n      // @ts-expect-error: it’s custom.\n      return structuredClone(node)\n    }\n\n    const unknown = state.options.unknownHandler || defaultUnknownHandler\n\n    return unknown(state, node, parent)\n  }\n\n  /**\n   * Transform the children of an mdast node into hast nodes.\n   *\n   * @param {MdastNodes} parent\n   *   mdast node to compile\n   * @returns {Array<HastElementContent>}\n   *   Resulting hast nodes.\n   */\n  function all(parent) {\n    /** @type {Array<HastElementContent>} */\n    const values = []\n\n    if ('children' in parent) {\n      const nodes = parent.children\n      let index = -1\n      while (++index < nodes.length) {\n        const result = state.one(nodes[index], parent)\n\n        // To do: see if we van clean this? Can we merge texts?\n        if (result) {\n          if (index && nodes[index - 1].type === 'break') {\n            if (!Array.isArray(result) && result.type === 'text') {\n              result.value = trimMarkdownSpaceStart(result.value)\n            }\n\n            if (!Array.isArray(result) && result.type === 'element') {\n              const head = result.children[0]\n\n              if (head && head.type === 'text') {\n                head.value = trimMarkdownSpaceStart(head.value)\n              }\n            }\n          }\n\n          if (Array.isArray(result)) {\n            values.push(...result)\n          } else {\n            values.push(result)\n          }\n        }\n      }\n    }\n\n    return values\n  }\n}\n\n/**\n * Copy a node’s positional info.\n *\n * @param {MdastNodes} from\n *   mdast node to copy from.\n * @param {HastNodes} to\n *   hast node to copy into.\n * @returns {undefined}\n *   Nothing.\n */\nfunction patch(from, to) {\n  if (from.position) to.position = position(from)\n}\n\n/**\n * Honor the `data` of `from` and maybe generate an element instead of `to`.\n *\n * @template {HastNodes} Type\n *   Node type.\n * @param {MdastNodes} from\n *   mdast node to use data from.\n * @param {Type} to\n *   hast node to change.\n * @returns {HastElement | Type}\n *   Nothing.\n */\nfunction applyData(from, to) {\n  /** @type {HastElement | Type} */\n  let result = to\n\n  // Handle `data.hName`, `data.hProperties, `data.hChildren`.\n  if (from && from.data) {\n    const hName = from.data.hName\n    const hChildren = from.data.hChildren\n    const hProperties = from.data.hProperties\n\n    if (typeof hName === 'string') {\n      // Transforming the node resulted in an element with a different name\n      // than wanted:\n      if (result.type === 'element') {\n        result.tagName = hName\n      }\n      // Transforming the node resulted in a non-element, which happens for\n      // raw, text, and root nodes (unless custom handlers are passed).\n      // The intent of `hName` is to create an element, but likely also to keep\n      // the content around (otherwise: pass `hChildren`).\n      else {\n        /** @type {Array<HastElementContent>} */\n        // @ts-expect-error: assume no doctypes in `root`.\n        const children = 'children' in result ? result.children : [result]\n        result = {type: 'element', tagName: hName, properties: {}, children}\n      }\n    }\n\n    if (result.type === 'element' && hProperties) {\n      Object.assign(result.properties, structuredClone(hProperties))\n    }\n\n    if (\n      'children' in result &&\n      result.children &&\n      hChildren !== null &&\n      hChildren !== undefined\n    ) {\n      result.children = hChildren\n    }\n  }\n\n  return result\n}\n\n/**\n * Transform an unknown node.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastNodes} node\n *   Unknown mdast node.\n * @returns {HastElement | HastText}\n *   Resulting hast node.\n */\nfunction defaultUnknownHandler(state, node) {\n  const data = node.data || {}\n  /** @type {HastElement | HastText} */\n  const result =\n    'value' in node &&\n    !(own.call(data, 'hProperties') || own.call(data, 'hChildren'))\n      ? {type: 'text', value: node.value}\n      : {\n          type: 'element',\n          tagName: 'div',\n          properties: {},\n          children: state.all(node)\n        }\n\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n\n/**\n * Wrap `nodes` with line endings between each node.\n *\n * @template {HastRootContent} Type\n *   Node type.\n * @param {Array<Type>} nodes\n *   List of nodes to wrap.\n * @param {boolean | undefined} [loose=false]\n *   Whether to add line endings at start and end (default: `false`).\n * @returns {Array<HastText | Type>}\n *   Wrapped nodes.\n */\nexport function wrap(nodes, loose) {\n  /** @type {Array<HastText | Type>} */\n  const result = []\n  let index = -1\n\n  if (loose) {\n    result.push({type: 'text', value: '\\n'})\n  }\n\n  while (++index < nodes.length) {\n    if (index) result.push({type: 'text', value: '\\n'})\n    result.push(nodes[index])\n  }\n\n  if (loose && nodes.length > 0) {\n    result.push({type: 'text', value: '\\n'})\n  }\n\n  return result\n}\n\n/**\n * Trim spaces and tabs at the start of `value`.\n *\n * @param {string} value\n *   Value to trim.\n * @returns {string}\n *   Result.\n */\nfunction trimMarkdownSpaceStart(value) {\n  let index = 0\n  let code = value.charCodeAt(index)\n\n  while (code === 9 || code === 32) {\n    index++\n    code = value.charCodeAt(index)\n  }\n\n  return value.slice(index)\n}\n","/**\n * @typedef {import('hast').Nodes} HastNodes\n * @typedef {import('mdast').Nodes} MdastNodes\n * @typedef {import('./state.js').Options} Options\n */\n\nimport {ok as assert} from 'devlop'\nimport {footer} from './footer.js'\nimport {createState} from './state.js'\n\n/**\n * Transform mdast to hast.\n *\n * ##### Notes\n *\n * ###### HTML\n *\n * Raw HTML is available in mdast as `html` nodes and can be embedded in hast\n * as semistandard `raw` nodes.\n * Most utilities ignore `raw` nodes but two notable ones don’t:\n *\n * *   `hast-util-to-html` also has an option `allowDangerousHtml` which will\n *     output the raw HTML.\n *     This is typically discouraged as noted by the option name but is useful\n *     if you completely trust authors\n * *   `hast-util-raw` can handle the raw embedded HTML strings by parsing them\n *     into standard hast nodes (`element`, `text`, etc).\n *     This is a heavy task as it needs a full HTML parser, but it is the only\n *     way to support untrusted content\n *\n * ###### Footnotes\n *\n * Many options supported here relate to footnotes.\n * Footnotes are not specified by CommonMark, which we follow by default.\n * They are supported by GitHub, so footnotes can be enabled in markdown with\n * `mdast-util-gfm`.\n *\n * The options `footnoteBackLabel` and `footnoteLabel` define natural language\n * that explains footnotes, which is hidden for sighted users but shown to\n * assistive technology.\n * When your page is not in English, you must define translated values.\n *\n * Back references use ARIA attributes, but the section label itself uses a\n * heading that is hidden with an `sr-only` class.\n * To show it to sighted users, define different attributes in\n * `footnoteLabelProperties`.\n *\n * ###### Clobbering\n *\n * Footnotes introduces a problem, as it links footnote calls to footnote\n * definitions on the page through `id` attributes generated from user content,\n * which results in DOM clobbering.\n *\n * DOM clobbering is this:\n *\n * ```html\n * <p id=x></p>\n * <script>alert(x) // `x` now refers to the DOM `p#x` element</script>\n * ```\n *\n * Elements by their ID are made available by browsers on the `window` object,\n * which is a security risk.\n * Using a prefix solves this problem.\n *\n * More information on how to handle clobbering and the prefix is explained in\n * Example: headings (DOM clobbering) in `rehype-sanitize`.\n *\n * ###### Unknown nodes\n *\n * Unknown nodes are nodes with a type that isn’t in `handlers` or `passThrough`.\n * The default behavior for unknown nodes is:\n *\n * *   when the node has a `value` (and doesn’t have `data.hName`,\n *     `data.hProperties`, or `data.hChildren`, see later), create a hast `text`\n *     node\n * *   otherwise, create a `<div>` element (which could be changed with\n *     `data.hName`), with its children mapped from mdast to hast as well\n *\n * This behavior can be changed by passing an `unknownHandler`.\n *\n * @param {MdastNodes} tree\n *   mdast tree.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {HastNodes}\n *   hast tree.\n */\nexport function toHast(tree, options) {\n  const state = createState(tree, options)\n  const node = state.one(tree, undefined)\n  const foot = footer(state)\n  /** @type {HastNodes} */\n  const result = Array.isArray(node)\n    ? {type: 'root', children: node}\n    : node || {type: 'root', children: []}\n\n  if (foot) {\n    // If there’s a footer, there were definitions, meaning block\n    // content.\n    // So `result` is a parent node.\n    assert('children' in result)\n    result.children.push({type: 'text', value: '\\n'}, foot)\n  }\n\n  return result\n}\n","/**\n * @import {Root as HastRoot} from 'hast'\n * @import {Root as MdastRoot} from 'mdast'\n * @import {Options as ToHastOptions} from 'mdast-util-to-hast'\n * @import {Processor} from 'unified'\n * @import {VFile} from 'vfile'\n */\n\n/**\n * @typedef {Omit<ToHastOptions, 'file'>} Options\n *\n * @callback TransformBridge\n *   Bridge-mode.\n *\n *   Runs the destination with the new hast tree.\n *   Discards result.\n * @param {MdastRoot} tree\n *   Tree.\n * @param {VFile} file\n *   File.\n * @returns {Promise<undefined>}\n *   Nothing.\n *\n * @callback TransformMutate\n *  Mutate-mode.\n *\n *  Further transformers run on the hast tree.\n * @param {MdastRoot} tree\n *   Tree.\n * @param {VFile} file\n *   File.\n * @returns {HastRoot}\n *   Tree (hast).\n */\n\nimport {toHast} from 'mdast-util-to-hast'\n\n/**\n * Turn markdown into HTML.\n *\n * ##### Notes\n *\n * ###### Signature\n *\n * * if a processor is given,\n *   runs the (rehype) plugins used on it with a hast tree,\n *   then discards the result (*bridge mode*)\n * * otherwise,\n *   returns a hast tree,\n *   the plugins used after `remarkRehype` are rehype plugins (*mutate mode*)\n *\n * > 👉 **Note**:\n * > It’s highly unlikely that you want to pass a `processor`.\n *\n * ###### HTML\n *\n * Raw HTML is available in mdast as `html` nodes and can be embedded in hast\n * as semistandard `raw` nodes.\n * Most plugins ignore `raw` nodes but two notable ones don’t:\n *\n * * `rehype-stringify` also has an option `allowDangerousHtml` which will\n *   output the raw HTML.\n *   This is typically discouraged as noted by the option name but is useful if\n *   you completely trust authors\n * * `rehype-raw` can handle the raw embedded HTML strings by parsing them\n *   into standard hast nodes (`element`, `text`, etc);\n *   this is a heavy task as it needs a full HTML parser,\n *   but it is the only way to support untrusted content\n *\n * ###### Footnotes\n *\n * Many options supported here relate to footnotes.\n * Footnotes are not specified by CommonMark,\n * which we follow by default.\n * They are supported by GitHub,\n * so footnotes can be enabled in markdown with `remark-gfm`.\n *\n * The options `footnoteBackLabel` and `footnoteLabel` define natural language\n * that explains footnotes,\n * which is hidden for sighted users but shown to assistive technology.\n * When your page is not in English,\n * you must define translated values.\n *\n * Back references use ARIA attributes,\n * but the section label itself uses a heading that is hidden with an\n * `sr-only` class.\n * To show it to sighted users,\n * define different attributes in `footnoteLabelProperties`.\n *\n * ###### Clobbering\n *\n * Footnotes introduces a problem,\n * as it links footnote calls to footnote definitions on the page through `id`\n * attributes generated from user content,\n * which results in DOM clobbering.\n *\n * DOM clobbering is this:\n *\n * ```html\n * <p id=x></p>\n * <script>alert(x) // `x` now refers to the DOM `p#x` element</script>\n * ```\n *\n * Elements by their ID are made available by browsers on the `window` object,\n * which is a security risk.\n * Using a prefix solves this problem.\n *\n * More information on how to handle clobbering and the prefix is explained in\n * *Example: headings (DOM clobbering)* in `rehype-sanitize`.\n *\n * ###### Unknown nodes\n *\n * Unknown nodes are nodes with a type that isn’t in `handlers` or `passThrough`.\n * The default behavior for unknown nodes is:\n *\n * * when the node has a `value`\n *   (and doesn’t have `data.hName`, `data.hProperties`, or `data.hChildren`,\n *   see later),\n *   create a hast `text` node\n * * otherwise,\n *   create a `<div>` element (which could be changed with `data.hName`),\n *   with its children mapped from mdast to hast as well\n *\n * This behavior can be changed by passing an `unknownHandler`.\n *\n * @overload\n * @param {Processor} processor\n * @param {Readonly<Options> | null | undefined} [options]\n * @returns {TransformBridge}\n *\n * @overload\n * @param {Readonly<Options> | null | undefined} [options]\n * @returns {TransformMutate}\n *\n * @overload\n * @param {Readonly<Options> | Processor | null | undefined} [destination]\n * @param {Readonly<Options> | null | undefined} [options]\n * @returns {TransformBridge | TransformMutate}\n *\n * @param {Readonly<Options> | Processor | null | undefined} [destination]\n *   Processor or configuration (optional).\n * @param {Readonly<Options> | null | undefined} [options]\n *   When a processor was given,\n *   configuration (optional).\n * @returns {TransformBridge | TransformMutate}\n *   Transform.\n */\nexport default function remarkRehype(destination, options) {\n  if (destination && 'run' in destination) {\n    /**\n     * @type {TransformBridge}\n     */\n    return async function (tree, file) {\n      // Cast because root in -> root out.\n      const hastTree = /** @type {HastRoot} */ (\n        toHast(tree, {file, ...options})\n      )\n      await destination.run(hastTree, file)\n    }\n  }\n\n  /**\n   * @type {TransformMutate}\n   */\n  return function (tree, file) {\n    // Cast because root in -> root out.\n    // To do: in the future, disallow ` || options` fallback.\n    // With `unified-engine`, `destination` can be `undefined` but\n    // `options` will be the file set.\n    // We should not pass that as `options`.\n    return /** @type {HastRoot} */ (\n      toHast(tree, {file, ...(destination || options)})\n    )\n  }\n}\n","/**\n * Throw a given error.\n *\n * @param {Error|null|undefined} [error]\n *   Maybe error.\n * @returns {asserts error is null|undefined}\n */\nexport function bail(error) {\n  if (error) {\n    throw error\n  }\n}\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default function isPlainObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n}\n","// To do: remove `void`s\n// To do: remove `null` from output of our APIs, allow it as user APIs.\n\n/**\n * @typedef {(error?: Error | null | undefined, ...output: Array<any>) => void} Callback\n *   Callback.\n *\n * @typedef {(...input: Array<any>) => any} Middleware\n *   Ware.\n *\n * @typedef Pipeline\n *   Pipeline.\n * @property {Run} run\n *   Run the pipeline.\n * @property {Use} use\n *   Add middleware.\n *\n * @typedef {(...input: Array<any>) => void} Run\n *   Call all middleware.\n *\n *   Calls `done` on completion with either an error or the output of the\n *   last middleware.\n *\n *   > 👉 **Note**: as the length of input defines whether async functions get a\n *   > `next` function,\n *   > it’s recommended to keep `input` at one value normally.\n\n *\n * @typedef {(fn: Middleware) => Pipeline} Use\n *   Add middleware.\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n *   Pipeline.\n */\nexport function trough() {\n  /** @type {Array<Middleware>} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or we’re done.\n     *\n     * @param {Error | null | undefined} error\n     * @param {Array<any>} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware` into a uniform interface.\n *\n * You can pass all input to the resulting function.\n * `callback` is then called with the output of `middleware`.\n *\n * If `middleware` accepts more arguments than the later given in input,\n * an extra `done` function is passed to it after that input,\n * which must be called by `middleware`.\n *\n * The first value in `input` is the main input value.\n * All other input values are the rest input values.\n * The values given to `callback` are the input values,\n * merged with every non-nullish output value.\n *\n * * if `middleware` throws an error,\n *   returns a promise that is rejected,\n *   or calls the given `done` function with an error,\n *   `callback` is called with that error\n * * if `middleware` returns a value or returns a promise that is resolved,\n *   that value is the main output value\n * * if `middleware` calls `done`,\n *   all non-nullish values except for the first one (the error) overwrite the\n *   output values\n *\n * @param {Middleware} middleware\n *   Function to wrap.\n * @param {Callback} callback\n *   Callback called with the output of `middleware`.\n * @returns {Run}\n *   Wrapped middleware.\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @this {any}\n   * @param {Array<any>} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware.apply(this, parameters)\n    } catch (error) {\n      const exception = /** @type {Error} */ (error)\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result && result.then && typeof result.then === 'function') {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   *\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n","// A derivative work based on:\n// <https://github.com/browserify/path-browserify>.\n// Which is licensed:\n//\n// MIT License\n//\n// Copyright (c) 2013 James Halliday\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A derivative work based on:\n//\n// Parts of that are extracted from Node’s internal `path` module:\n// <https://github.com/nodejs/node/blob/master/lib/path.js>.\n// Which is licensed:\n//\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nexport const minpath = {basename, dirname, extname, join, sep: '/'}\n\n/* eslint-disable max-depth, complexity */\n\n/**\n * Get the basename from a path.\n *\n * @param {string} path\n *   File path.\n * @param {string | null | undefined} [extname]\n *   Extension to strip.\n * @returns {string}\n *   Stem or basename.\n */\nfunction basename(path, extname) {\n  if (extname !== undefined && typeof extname !== 'string') {\n    throw new TypeError('\"ext\" argument must be a string')\n  }\n\n  assertPath(path)\n  let start = 0\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let seenNonSlash\n\n  if (\n    extname === undefined ||\n    extname.length === 0 ||\n    extname.length > path.length\n  ) {\n    while (index--) {\n      if (path.codePointAt(index) === 47 /* `/` */) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now.\n        if (seenNonSlash) {\n          start = index + 1\n          break\n        }\n      } else if (end < 0) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component.\n        seenNonSlash = true\n        end = index + 1\n      }\n    }\n\n    return end < 0 ? '' : path.slice(start, end)\n  }\n\n  if (extname === path) {\n    return ''\n  }\n\n  let firstNonSlashEnd = -1\n  let extnameIndex = extname.length - 1\n\n  while (index--) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (seenNonSlash) {\n        start = index + 1\n        break\n      }\n    } else {\n      if (firstNonSlashEnd < 0) {\n        // We saw the first non-path separator, remember this index in case\n        // we need it if the extension ends up not matching.\n        seenNonSlash = true\n        firstNonSlashEnd = index + 1\n      }\n\n      if (extnameIndex > -1) {\n        // Try to match the explicit extension.\n        if (path.codePointAt(index) === extname.codePointAt(extnameIndex--)) {\n          if (extnameIndex < 0) {\n            // We matched the extension, so mark this as the end of our path\n            // component\n            end = index\n          }\n        } else {\n          // Extension does not match, so our result is the entire path\n          // component\n          extnameIndex = -1\n          end = firstNonSlashEnd\n        }\n      }\n    }\n  }\n\n  if (start === end) {\n    end = firstNonSlashEnd\n  } else if (end < 0) {\n    end = path.length\n  }\n\n  return path.slice(start, end)\n}\n\n/**\n * Get the dirname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\nfunction dirname(path) {\n  assertPath(path)\n\n  if (path.length === 0) {\n    return '.'\n  }\n\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  // Prefix `--` is important to not run on `0`.\n  while (--index) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      if (unmatchedSlash) {\n        end = index\n        break\n      }\n    } else if (!unmatchedSlash) {\n      // We saw the first non-path separator\n      unmatchedSlash = true\n    }\n  }\n\n  return end < 0\n    ? path.codePointAt(0) === 47 /* `/` */\n      ? '/'\n      : '.'\n    : end === 1 && path.codePointAt(0) === 47 /* `/` */\n      ? '//'\n      : path.slice(0, end)\n}\n\n/**\n * Get an extname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   Extname.\n */\nfunction extname(path) {\n  assertPath(path)\n\n  let index = path.length\n\n  let end = -1\n  let startPart = 0\n  let startDot = -1\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find.\n  let preDotState = 0\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  while (index--) {\n    const code = path.codePointAt(index)\n\n    if (code === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (unmatchedSlash) {\n        startPart = index + 1\n        break\n      }\n\n      continue\n    }\n\n    if (end < 0) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension.\n      unmatchedSlash = true\n      end = index + 1\n    }\n\n    if (code === 46 /* `.` */) {\n      // If this is our first dot, mark it as the start of our extension.\n      if (startDot < 0) {\n        startDot = index\n      } else if (preDotState !== 1) {\n        preDotState = 1\n      }\n    } else if (startDot > -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension.\n      preDotState = -1\n    }\n  }\n\n  if (\n    startDot < 0 ||\n    end < 0 ||\n    // We saw a non-dot character immediately before the dot.\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly `..`.\n    (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n  ) {\n    return ''\n  }\n\n  return path.slice(startDot, end)\n}\n\n/**\n * Join segments from a path.\n *\n * @param {Array<string>} segments\n *   Path segments.\n * @returns {string}\n *   File path.\n */\nfunction join(...segments) {\n  let index = -1\n  /** @type {string | undefined} */\n  let joined\n\n  while (++index < segments.length) {\n    assertPath(segments[index])\n\n    if (segments[index]) {\n      joined =\n        joined === undefined ? segments[index] : joined + '/' + segments[index]\n    }\n  }\n\n  return joined === undefined ? '.' : normalize(joined)\n}\n\n/**\n * Normalize a basic file path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\n// Note: `normalize` is not exposed as `path.normalize`, so some code is\n// manually removed from it.\nfunction normalize(path) {\n  assertPath(path)\n\n  const absolute = path.codePointAt(0) === 47 /* `/` */\n\n  // Normalize the path according to POSIX rules.\n  let value = normalizeString(path, !absolute)\n\n  if (value.length === 0 && !absolute) {\n    value = '.'\n  }\n\n  if (value.length > 0 && path.codePointAt(path.length - 1) === 47 /* / */) {\n    value += '/'\n  }\n\n  return absolute ? '/' + value : value\n}\n\n/**\n * Resolve `.` and `..` elements in a path with directory names.\n *\n * @param {string} path\n *   File path.\n * @param {boolean} allowAboveRoot\n *   Whether `..` can move above root.\n * @returns {string}\n *   File path.\n */\nfunction normalizeString(path, allowAboveRoot) {\n  let result = ''\n  let lastSegmentLength = 0\n  let lastSlash = -1\n  let dots = 0\n  let index = -1\n  /** @type {number | undefined} */\n  let code\n  /** @type {number} */\n  let lastSlashIndex\n\n  while (++index <= path.length) {\n    if (index < path.length) {\n      code = path.codePointAt(index)\n    } else if (code === 47 /* `/` */) {\n      break\n    } else {\n      code = 47 /* `/` */\n    }\n\n    if (code === 47 /* `/` */) {\n      if (lastSlash === index - 1 || dots === 1) {\n        // Empty.\n      } else if (lastSlash !== index - 1 && dots === 2) {\n        if (\n          result.length < 2 ||\n          lastSegmentLength !== 2 ||\n          result.codePointAt(result.length - 1) !== 46 /* `.` */ ||\n          result.codePointAt(result.length - 2) !== 46 /* `.` */\n        ) {\n          if (result.length > 2) {\n            lastSlashIndex = result.lastIndexOf('/')\n\n            if (lastSlashIndex !== result.length - 1) {\n              if (lastSlashIndex < 0) {\n                result = ''\n                lastSegmentLength = 0\n              } else {\n                result = result.slice(0, lastSlashIndex)\n                lastSegmentLength = result.length - 1 - result.lastIndexOf('/')\n              }\n\n              lastSlash = index\n              dots = 0\n              continue\n            }\n          } else if (result.length > 0) {\n            result = ''\n            lastSegmentLength = 0\n            lastSlash = index\n            dots = 0\n            continue\n          }\n        }\n\n        if (allowAboveRoot) {\n          result = result.length > 0 ? result + '/..' : '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (result.length > 0) {\n          result += '/' + path.slice(lastSlash + 1, index)\n        } else {\n          result = path.slice(lastSlash + 1, index)\n        }\n\n        lastSegmentLength = index - lastSlash - 1\n      }\n\n      lastSlash = index\n      dots = 0\n    } else if (code === 46 /* `.` */ && dots > -1) {\n      dots++\n    } else {\n      dots = -1\n    }\n  }\n\n  return result\n}\n\n/**\n * Make sure `path` is a string.\n *\n * @param {string} path\n *   File path.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError(\n      'Path must be a string. Received ' + JSON.stringify(path)\n    )\n  }\n}\n\n/* eslint-enable max-depth, complexity */\n","// Somewhat based on:\n// <https://github.com/defunctzombie/node-process/blob/master/browser.js>.\n// But I don’t think one tiny line of code can be copyrighted. 😅\nexport const minproc = {cwd}\n\nfunction cwd() {\n  return '/'\n}\n","/**\n * Checks if a value has the shape of a WHATWG URL object.\n *\n * Using a symbol or instanceof would not be able to recognize URL objects\n * coming from other implementations (e.g. in Electron), so instead we are\n * checking some well known properties for a lack of a better test.\n *\n * We use `href` and `protocol` as they are the only properties that are\n * easy to retrieve and calculate due to the lazy nature of the getters.\n *\n * We check for auth attribute to distinguish legacy url instance with\n * WHATWG URL instance.\n *\n * @param {unknown} fileUrlOrPath\n *   File path or URL.\n * @returns {fileUrlOrPath is URL}\n *   Whether it’s a URL.\n */\n// From: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js#L720>\nexport function isUrl(fileUrlOrPath) {\n  return Boolean(\n    fileUrlOrPath !== null &&\n      typeof fileUrlOrPath === 'object' &&\n      'href' in fileUrlOrPath &&\n      fileUrlOrPath.href &&\n      'protocol' in fileUrlOrPath &&\n      fileUrlOrPath.protocol &&\n      // @ts-expect-error: indexing is fine.\n      fileUrlOrPath.auth === undefined\n  )\n}\n","import {isUrl} from './minurl.shared.js'\n\nexport {isUrl} from './minurl.shared.js'\n\n// See: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js>\n\n/**\n * @param {URL | string} path\n *   File URL.\n * @returns {string}\n *   File URL.\n */\nexport function urlToPath(path) {\n  if (typeof path === 'string') {\n    path = new URL(path)\n  } else if (!isUrl(path)) {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'The \"path\" argument must be of type string or an instance of URL. Received `' +\n        path +\n        '`'\n    )\n    error.code = 'ERR_INVALID_ARG_TYPE'\n    throw error\n  }\n\n  if (path.protocol !== 'file:') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError('The URL must be of scheme file')\n    error.code = 'ERR_INVALID_URL_SCHEME'\n    throw error\n  }\n\n  return getPathFromURLPosix(path)\n}\n\n/**\n * Get a path from a POSIX URL.\n *\n * @param {URL} url\n *   URL.\n * @returns {string}\n *   File path.\n */\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== '') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'File URL host must be \"localhost\" or empty on darwin'\n    )\n    error.code = 'ERR_INVALID_FILE_URL_HOST'\n    throw error\n  }\n\n  const pathname = url.pathname\n  let index = -1\n\n  while (++index < pathname.length) {\n    if (\n      pathname.codePointAt(index) === 37 /* `%` */ &&\n      pathname.codePointAt(index + 1) === 50 /* `2` */\n    ) {\n      const third = pathname.codePointAt(index + 2)\n      if (third === 70 /* `F` */ || third === 102 /* `f` */) {\n        /** @type {NodeJS.ErrnoException} */\n        const error = new TypeError(\n          'File URL path must not include encoded / characters'\n        )\n        error.code = 'ERR_INVALID_FILE_URL_PATH'\n        throw error\n      }\n    }\n  }\n\n  return decodeURIComponent(pathname)\n}\n","/**\n * @import {Node, Point, Position} from 'unist'\n * @import {Options as MessageOptions} from 'vfile-message'\n * @import {Compatible, Data, Map, Options, Value} from 'vfile'\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n */\n\nimport {VFileMessage} from 'vfile-message'\nimport {minpath} from '#minpath'\nimport {minproc} from '#minproc'\nimport {urlToPath, isUrl} from '#minurl'\n\n/**\n * Order of setting (least specific to most), we need this because otherwise\n * `{stem: 'a', path: '~/b.js'}` would throw, as a path is needed before a\n * stem can be set.\n */\nconst order = /** @type {const} */ ([\n  'history',\n  'path',\n  'basename',\n  'stem',\n  'extname',\n  'dirname'\n])\n\nexport class VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * `options` is treated as:\n   *\n   * *   `string` or `Uint8Array` — `{value: options}`\n   * *   `URL` — `{path: options}`\n   * *   `VFile` — shallow copies its data over to the new file\n   * *   `object` — all fields are shallow copied over to the new file\n   *\n   * Path related fields are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * You cannot set `dirname` or `extname` without setting either `history`,\n   * `path`, `basename`, or `stem` too.\n   *\n   * @param {Compatible | null | undefined} [value]\n   *   File value.\n   * @returns\n   *   New instance.\n   */\n  constructor(value) {\n    /** @type {Options | VFile} */\n    let options\n\n    if (!value) {\n      options = {}\n    } else if (isUrl(value)) {\n      options = {path: value}\n    } else if (typeof value === 'string' || isUint8Array(value)) {\n      options = {value}\n    } else {\n      options = value\n    }\n\n    /* eslint-disable no-unused-expressions */\n\n    /**\n     * Base of `path` (default: `process.cwd()` or `'/'` in browsers).\n     *\n     * @type {string}\n     */\n    // Prevent calling `cwd` (which could be expensive) if it’s not needed;\n    // the empty string will be overridden in the next block.\n    this.cwd = 'cwd' in options ? '' : minproc.cwd()\n\n    /**\n     * Place to store custom info (default: `{}`).\n     *\n     * It’s OK to store custom data directly on the file but moving it to\n     * `data` is recommended.\n     *\n     * @type {Data}\n     */\n    this.data = {}\n\n    /**\n     * List of file paths the file moved between.\n     *\n     * The first is the original path and the last is the current path.\n     *\n     * @type {Array<string>}\n     */\n    this.history = []\n\n    /**\n     * List of messages associated with the file.\n     *\n     * @type {Array<VFileMessage>}\n     */\n    this.messages = []\n\n    /**\n     * Raw value.\n     *\n     * @type {Value}\n     */\n    this.value\n\n    // The below are non-standard, they are “well-known”.\n    // As in, used in several tools.\n    /**\n     * Source map.\n     *\n     * This type is equivalent to the `RawSourceMap` type from the `source-map`\n     * module.\n     *\n     * @type {Map | null | undefined}\n     */\n    this.map\n\n    /**\n     * Custom, non-string, compiled, representation.\n     *\n     * This is used by unified to store non-string results.\n     * One example is when turning markdown into React nodes.\n     *\n     * @type {unknown}\n     */\n    this.result\n\n    /**\n     * Whether a file was saved to disk.\n     *\n     * This is used by vfile reporters.\n     *\n     * @type {boolean}\n     */\n    this.stored\n    /* eslint-enable no-unused-expressions */\n\n    // Set path related properties in the correct order.\n    let index = -1\n\n    while (++index < order.length) {\n      const field = order[index]\n\n      // Note: we specifically use `in` instead of `hasOwnProperty` to accept\n      // `vfile`s too.\n      if (\n        field in options &&\n        options[field] !== undefined &&\n        options[field] !== null\n      ) {\n        // @ts-expect-error: TS doesn’t understand basic reality.\n        this[field] = field === 'history' ? [...options[field]] : options[field]\n      }\n    }\n\n    /** @type {string} */\n    let field\n\n    // Set non-path related properties.\n    for (field in options) {\n      // @ts-expect-error: fine to set other things.\n      if (!order.includes(field)) {\n        // @ts-expect-error: fine to set other things.\n        this[field] = options[field]\n      }\n    }\n  }\n\n  /**\n   * Get the basename (including extname) (example: `'index.min.js'`).\n   *\n   * @returns {string | undefined}\n   *   Basename.\n   */\n  get basename() {\n    return typeof this.path === 'string'\n      ? minpath.basename(this.path)\n      : undefined\n  }\n\n  /**\n   * Set basename (including extname) (`'index.min.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} basename\n   *   Basename.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set basename(basename) {\n    assertNonEmpty(basename, 'basename')\n    assertPart(basename, 'basename')\n    this.path = minpath.join(this.dirname || '', basename)\n  }\n\n  /**\n   * Get the parent path (example: `'~'`).\n   *\n   * @returns {string | undefined}\n   *   Dirname.\n   */\n  get dirname() {\n    return typeof this.path === 'string'\n      ? minpath.dirname(this.path)\n      : undefined\n  }\n\n  /**\n   * Set the parent path (example: `'~'`).\n   *\n   * Cannot be set if there’s no `path` yet.\n   *\n   * @param {string | undefined} dirname\n   *   Dirname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set dirname(dirname) {\n    assertPath(this.basename, 'dirname')\n    this.path = minpath.join(dirname || '', this.basename)\n  }\n\n  /**\n   * Get the extname (including dot) (example: `'.js'`).\n   *\n   * @returns {string | undefined}\n   *   Extname.\n   */\n  get extname() {\n    return typeof this.path === 'string'\n      ? minpath.extname(this.path)\n      : undefined\n  }\n\n  /**\n   * Set the extname (including dot) (example: `'.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be set if there’s no `path` yet.\n   *\n   * @param {string | undefined} extname\n   *   Extname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set extname(extname) {\n    assertPart(extname, 'extname')\n    assertPath(this.dirname, 'extname')\n\n    if (extname) {\n      if (extname.codePointAt(0) !== 46 /* `.` */) {\n        throw new Error('`extname` must start with `.`')\n      }\n\n      if (extname.includes('.', 1)) {\n        throw new Error('`extname` cannot contain multiple dots')\n      }\n    }\n\n    this.path = minpath.join(this.dirname, this.stem + (extname || ''))\n  }\n\n  /**\n   * Get the full path (example: `'~/index.min.js'`).\n   *\n   * @returns {string}\n   *   Path.\n   */\n  get path() {\n    return this.history[this.history.length - 1]\n  }\n\n  /**\n   * Set the full path (example: `'~/index.min.js'`).\n   *\n   * Cannot be nullified.\n   * You can set a file URL (a `URL` object with a `file:` protocol) which will\n   * be turned into a path with `url.fileURLToPath`.\n   *\n   * @param {URL | string} path\n   *   Path.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path)\n    }\n\n    assertNonEmpty(path, 'path')\n\n    if (this.path !== path) {\n      this.history.push(path)\n    }\n  }\n\n  /**\n   * Get the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * @returns {string | undefined}\n   *   Stem.\n   */\n  get stem() {\n    return typeof this.path === 'string'\n      ? minpath.basename(this.path, this.extname)\n      : undefined\n  }\n\n  /**\n   * Set the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} stem\n   *   Stem.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, 'stem')\n    assertPart(stem, 'stem')\n    this.path = minpath.join(this.dirname || '', stem + (this.extname || ''))\n  }\n\n  // Normal prototypal methods.\n  /**\n   * Create a fatal message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `true` (error; file not usable)\n   * and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {never}\n   *   Never.\n   * @throws {VFileMessage}\n   *   Message.\n   */\n  fail(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = true\n\n    throw message\n  }\n\n  /**\n   * Create an info message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `undefined` (info; change\n   * likely not needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  info(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = undefined\n\n    return message\n  }\n\n  /**\n   * Create a message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `false` (warning; change may be\n   * needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  message(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = new VFileMessage(\n      // @ts-expect-error: the overloads are fine.\n      causeOrReason,\n      optionsOrParentOrPlace,\n      origin\n    )\n\n    if (this.path) {\n      message.name = this.path + ':' + message.name\n      message.file = this.path\n    }\n\n    message.fatal = false\n\n    this.messages.push(message)\n\n    return message\n  }\n\n  /**\n   * Serialize the file.\n   *\n   * > **Note**: which encodings are supported depends on the engine.\n   * > For info on Node.js, see:\n   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.\n   *\n   * @param {string | null | undefined} [encoding='utf8']\n   *   Character encoding to understand `value` as when it’s a `Uint8Array`\n   *   (default: `'utf-8'`).\n   * @returns {string}\n   *   Serialized file.\n   */\n  toString(encoding) {\n    if (this.value === undefined) {\n      return ''\n    }\n\n    if (typeof this.value === 'string') {\n      return this.value\n    }\n\n    const decoder = new TextDecoder(encoding || undefined)\n    return decoder.decode(this.value)\n  }\n}\n\n/**\n * Assert that `part` is not a path (as in, does not contain `path.sep`).\n *\n * @param {string | null | undefined} part\n *   File path part.\n * @param {string} name\n *   Part name.\n * @returns {undefined}\n *   Nothing.\n */\nfunction assertPart(part, name) {\n  if (part && part.includes(minpath.sep)) {\n    throw new Error(\n      '`' + name + '` cannot be a path: did not expect `' + minpath.sep + '`'\n    )\n  }\n}\n\n/**\n * Assert that `part` is not empty.\n *\n * @param {string | undefined} part\n *   Thing.\n * @param {string} name\n *   Part name.\n * @returns {asserts part is string}\n *   Nothing.\n */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty')\n  }\n}\n\n/**\n * Assert `path` exists.\n *\n * @param {string | undefined} path\n *   Path.\n * @param {string} name\n *   Dependency name.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too')\n  }\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","export const CallableInstance =\n  /**\n   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}\n   */\n  (\n    /** @type {unknown} */\n    (\n      /**\n       * @this {Function}\n       * @param {string | symbol} property\n       * @returns {(...parameters: Array<unknown>) => unknown}\n       */\n      function (property) {\n        const self = this\n        const constr = self.constructor\n        const proto = /** @type {Record<string | symbol, Function>} */ (\n          // Prototypes do exist.\n          // type-coverage:ignore-next-line\n          constr.prototype\n        )\n        const value = proto[property]\n        /** @type {(...parameters: Array<unknown>) => unknown} */\n        const apply = function () {\n          return value.apply(apply, arguments)\n        }\n\n        Object.setPrototypeOf(apply, proto)\n\n        // Not needed for us in `unified`: we only call this on the `copy`\n        // function,\n        // and we don't need to add its fields (`length`, `name`)\n        // over.\n        // See also: GH-246.\n        // const names = Object.getOwnPropertyNames(value)\n        //\n        // for (const p of names) {\n        //   const descriptor = Object.getOwnPropertyDescriptor(value, p)\n        //   if (descriptor) Object.defineProperty(apply, p, descriptor)\n        // }\n\n        return apply\n      }\n    )\n  )\n","/**\n * @typedef {import('trough').Pipeline} Pipeline\n *\n * @typedef {import('unist').Node} Node\n *\n * @typedef {import('vfile').Compatible} Compatible\n * @typedef {import('vfile').Value} Value\n *\n * @typedef {import('../index.js').CompileResultMap} CompileResultMap\n * @typedef {import('../index.js').Data} Data\n * @typedef {import('../index.js').Settings} Settings\n */\n\n/**\n * @typedef {CompileResultMap[keyof CompileResultMap]} CompileResults\n *   Acceptable results from compilers.\n *\n *   To register custom results, add them to\n *   {@linkcode CompileResultMap}.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the compiler receives (default: `Node`).\n * @template {CompileResults} [Result=CompileResults]\n *   The thing that the compiler yields (default: `CompileResults`).\n * @callback Compiler\n *   A **compiler** handles the compiling of a syntax tree to something else\n *   (in most cases, text) (TypeScript type).\n *\n *   It is used in the stringify phase and called with a {@linkcode Node}\n *   and {@linkcode VFile} representation of the document to compile.\n *   It should return the textual representation of the given tree (typically\n *   `string`).\n *\n *   > **Note**: unified typically compiles by serializing: most compilers\n *   > return `string` (or `Uint8Array`).\n *   > Some compilers, such as the one configured with\n *   > [`rehype-react`][rehype-react], return other values (in this case, a\n *   > React tree).\n *   > If you’re using a compiler that doesn’t serialize, expect different\n *   > result values.\n *   >\n *   > To register custom results in TypeScript, add them to\n *   > {@linkcode CompileResultMap}.\n *\n *   [rehype-react]: https://github.com/rehypejs/rehype-react\n * @param {Tree} tree\n *   Tree to compile.\n * @param {VFile} file\n *   File associated with `tree`.\n * @returns {Result}\n *   New content: compiled text (`string` or `Uint8Array`, for `file.value`) or\n *   something else (for `file.result`).\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the parser yields (default: `Node`)\n * @callback Parser\n *   A **parser** handles the parsing of text to a syntax tree.\n *\n *   It is used in the parse phase and is called with a `string` and\n *   {@linkcode VFile} of the document to parse.\n *   It must return the syntax tree representation of the given file\n *   ({@linkcode Node}).\n * @param {string} document\n *   Document to parse.\n * @param {VFile} file\n *   File associated with `document`.\n * @returns {Tree}\n *   Node representing the given file.\n */\n\n/**\n * @typedef {(\n *   Plugin<Array<any>, any, any> |\n *   PluginTuple<Array<any>, any, any> |\n *   Preset\n * )} Pluggable\n *   Union of the different ways to add plugins and settings.\n */\n\n/**\n * @typedef {Array<Pluggable>} PluggableList\n *   List of plugins and presets.\n */\n\n// Note: we can’t use `callback` yet as it messes up `this`:\n//  <https://github.com/microsoft/TypeScript/issues/55197>.\n/**\n * @template {Array<unknown>} [PluginParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=Node]\n *   Value that is expected as input (default: `Node`).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@linkcode Parser}, this should be\n *       `string`.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be the\n *       node it expects.\n * @template [Output=Input]\n *   Value that is yielded as output (default: `Input`).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@linkcode Parser}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be\n *       result it yields.\n * @typedef {(\n *   (this: Processor, ...parameters: PluginParameters) =>\n *     Input extends string ? // Parser.\n *        Output extends Node | undefined ? undefined | void : never :\n *     Output extends CompileResults ? // Compiler.\n *        Input extends Node | undefined ? undefined | void : never :\n *     Transformer<\n *       Input extends Node ? Input : Node,\n *       Output extends Node ? Output : Node\n *     > | undefined | void\n * )} Plugin\n *   Single plugin.\n *\n *   Plugins configure the processors they are applied on in the following\n *   ways:\n *\n *   *   they change the processor, such as the parser, the compiler, or by\n *       configuring data\n *   *   they specify how to handle trees and files\n *\n *   In practice, they are functions that can receive options and configure the\n *   processor (`this`).\n *\n *   > **Note**: plugins are called when the processor is *frozen*, not when\n *   > they are applied.\n */\n\n/**\n * Tuple of a plugin and its configuration.\n *\n * The first item is a plugin, the rest are its parameters.\n *\n * @template {Array<unknown>} [TupleParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=undefined]\n *   Value that is expected as input (optional).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@linkcode Parser}, this should be\n *       `string`.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be the\n *       node it expects.\n * @template [Output=undefined] (optional).\n *   Value that is yielded as output.\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@linkcode Parser}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be\n *       result it yields.\n * @typedef {(\n *   [\n *     plugin: Plugin<TupleParameters, Input, Output>,\n *     ...parameters: TupleParameters\n *   ]\n * )} PluginTuple\n */\n\n/**\n * @typedef Preset\n *   Sharable configuration.\n *\n *   They can contain plugins and settings.\n * @property {PluggableList | undefined} [plugins]\n *   List of plugins and presets (optional).\n * @property {Settings | undefined} [settings]\n *   Shared settings for parsers and compilers (optional).\n */\n\n/**\n * @template {VFile} [File=VFile]\n *   The file that the callback receives (default: `VFile`).\n * @callback ProcessCallback\n *   Callback called when the process is done.\n *\n *   Called with either an error or a result.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {File | undefined} [file]\n *   Processed file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The tree that the callback receives (default: `Node`).\n * @callback RunCallback\n *   Callback called when transformers are done.\n *\n *   Called with either an error or results.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {Tree | undefined} [tree]\n *   Transformed tree (optional).\n * @param {VFile | undefined} [file]\n *   File (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Output=Node]\n *   Node type that the transformer yields (default: `Node`).\n * @callback TransformCallback\n *   Callback passed to transforms.\n *\n *   If the signature of a `transformer` accepts a third argument, the\n *   transformer may perform asynchronous operations, and must call it.\n * @param {Error | undefined} [error]\n *   Fatal error to stop the process (optional).\n * @param {Output | undefined} [tree]\n *   New, changed, tree (optional).\n * @param {VFile | undefined} [file]\n *   New, changed, file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Input=Node]\n *   Node type that the transformer expects (default: `Node`).\n * @template {Node} [Output=Input]\n *   Node type that the transformer yields (default: `Input`).\n * @callback Transformer\n *   Transformers handle syntax trees and files.\n *\n *   They are functions that are called each time a syntax tree and file are\n *   passed through the run phase.\n *   When an error occurs in them (either because it’s thrown, returned,\n *   rejected, or passed to `next`), the process stops.\n *\n *   The run phase is handled by [`trough`][trough], see its documentation for\n *   the exact semantics of these functions.\n *\n *   > **Note**: you should likely ignore `next`: don’t accept it.\n *   > it supports callback-style async work.\n *   > But promises are likely easier to reason about.\n *\n *   [trough]: https://github.com/wooorm/trough#function-fninput-next\n * @param {Input} tree\n *   Tree to handle.\n * @param {VFile} file\n *   File to handle.\n * @param {TransformCallback<Output>} next\n *   Callback.\n * @returns {(\n *   Promise<Output | undefined | void> |\n *   Promise<never> | // For some reason this is needed separately.\n *   Output |\n *   Error |\n *   undefined |\n *   void\n * )}\n *   If you accept `next`, nothing.\n *   Otherwise:\n *\n *   *   `Error` — fatal error to stop the process\n *   *   `Promise<undefined>` or `undefined` — the next transformer keeps using\n *       same tree\n *   *   `Promise<Node>` or `Node` — new, changed, tree\n */\n\n/**\n * @template {Node | undefined} ParseTree\n *   Output of `parse`.\n * @template {Node | undefined} HeadTree\n *   Input for `run`.\n * @template {Node | undefined} TailTree\n *   Output for `run`.\n * @template {Node | undefined} CompileTree\n *   Input of `stringify`.\n * @template {CompileResults | undefined} CompileResult\n *   Output of `stringify`.\n * @template {Node | string | undefined} Input\n *   Input of plugin.\n * @template Output\n *   Output of plugin (optional).\n * @typedef {(\n *   Input extends string\n *     ? Output extends Node | undefined\n *       ? // Parser.\n *         Processor<\n *           Output extends undefined ? ParseTree : Output,\n *           HeadTree,\n *           TailTree,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Output extends CompileResults\n *     ? Input extends Node | undefined\n *       ? // Compiler.\n *         Processor<\n *           ParseTree,\n *           HeadTree,\n *           TailTree,\n *           Input extends undefined ? CompileTree : Input,\n *           Output extends undefined ? CompileResult : Output\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Input extends Node | undefined\n *     ? Output extends Node | undefined\n *       ? // Transform.\n *         Processor<\n *           ParseTree,\n *           HeadTree extends undefined ? Input : HeadTree,\n *           Output extends undefined ? TailTree : Output,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : // Unknown.\n *       Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n * )} UsePlugin\n *   Create a processor based on the input/output of a {@link Plugin plugin}.\n */\n\n/**\n * @template {CompileResults | undefined} Result\n *   Node type that the transformer yields.\n * @typedef {(\n *   Result extends Value | undefined ?\n *     VFile :\n *     VFile & {result: Result}\n *   )} VFileWithOutput\n *   Type to generate a {@linkcode VFile} corresponding to a compiler result.\n *\n *   If a result that is not acceptable on a `VFile` is used, that will\n *   be stored on the `result` field of {@linkcode VFile}.\n */\n\nimport {bail} from 'bail'\nimport extend from 'extend'\nimport {ok as assert} from 'devlop'\nimport isPlainObj from 'is-plain-obj'\nimport {trough} from 'trough'\nimport {VFile} from 'vfile'\nimport {CallableInstance} from './callable-instance.js'\n\n// To do: next major: drop `Compiler`, `Parser`: prefer lowercase.\n\n// To do: we could start yielding `never` in TS when a parser is missing and\n// `parse` is called.\n// Currently, we allow directly setting `processor.parser`, which is untyped.\n\nconst own = {}.hasOwnProperty\n\n/**\n * @template {Node | undefined} [ParseTree=undefined]\n *   Output of `parse` (optional).\n * @template {Node | undefined} [HeadTree=undefined]\n *   Input for `run` (optional).\n * @template {Node | undefined} [TailTree=undefined]\n *   Output for `run` (optional).\n * @template {Node | undefined} [CompileTree=undefined]\n *   Input of `stringify` (optional).\n * @template {CompileResults | undefined} [CompileResult=undefined]\n *   Output of `stringify` (optional).\n * @extends {CallableInstance<[], Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>>}\n */\nexport class Processor extends CallableInstance {\n  /**\n   * Create a processor.\n   */\n  constructor() {\n    // If `Processor()` is called (w/o new), `copy` is called instead.\n    super('copy')\n\n    /**\n     * Compiler to use (deprecated).\n     *\n     * @deprecated\n     *   Use `compiler` instead.\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.Compiler = undefined\n\n    /**\n     * Parser to use (deprecated).\n     *\n     * @deprecated\n     *   Use `parser` instead.\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.Parser = undefined\n\n    // Note: the following fields are considered private.\n    // However, they are needed for tests, and TSC generates an untyped\n    // `private freezeIndex` field for, which trips `type-coverage` up.\n    // Instead, we use `@deprecated` to visualize that they shouldn’t be used.\n    /**\n     * Internal list of configured plugins.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Array<PluginTuple<Array<unknown>>>}\n     */\n    this.attachers = []\n\n    /**\n     * Compiler to use.\n     *\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.compiler = undefined\n\n    /**\n     * Internal state to track where we are while freezing.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {number}\n     */\n    this.freezeIndex = -1\n\n    /**\n     * Internal state to track whether we’re frozen.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {boolean | undefined}\n     */\n    this.frozen = undefined\n\n    /**\n     * Internal state.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Data}\n     */\n    this.namespace = {}\n\n    /**\n     * Parser to use.\n     *\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.parser = undefined\n\n    /**\n     * Internal list of configured transformers.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Pipeline}\n     */\n    this.transformers = trough()\n  }\n\n  /**\n   * Copy a processor.\n   *\n   * @deprecated\n   *   This is a private internal method and should not be used.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   New *unfrozen* processor ({@linkcode Processor}) that is\n   *   configured to work the same as its ancestor.\n   *   When the descendant processor is configured in the future it does not\n   *   affect the ancestral processor.\n   */\n  copy() {\n    // Cast as the type parameters will be the same after attaching.\n    const destination =\n      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */ (\n        new Processor()\n      )\n    let index = -1\n\n    while (++index < this.attachers.length) {\n      const attacher = this.attachers[index]\n      destination.use(...attacher)\n    }\n\n    destination.data(extend(true, {}, this.namespace))\n\n    return destination\n  }\n\n  /**\n   * Configure the processor with info available to all plugins.\n   * Information is stored in an object.\n   *\n   * Typically, options can be given to a specific plugin, but sometimes it\n   * makes sense to have information shared with several plugins.\n   * For example, a list of HTML elements that are self-closing, which is\n   * needed during all phases.\n   *\n   * > **Note**: setting information cannot occur on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * > **Note**: to register custom data in TypeScript, augment the\n   * > {@linkcode Data} interface.\n   *\n   * @example\n   *   This example show how to get and set info:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   const processor = unified().data('alpha', 'bravo')\n   *\n   *   processor.data('alpha') // => 'bravo'\n   *\n   *   processor.data() // => {alpha: 'bravo'}\n   *\n   *   processor.data({charlie: 'delta'})\n   *\n   *   processor.data() // => {charlie: 'delta'}\n   *   ```\n   *\n   * @template {keyof Data} Key\n   *\n   * @overload\n   * @returns {Data}\n   *\n   * @overload\n   * @param {Data} dataset\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Key} key\n   * @returns {Data[Key]}\n   *\n   * @overload\n   * @param {Key} key\n   * @param {Data[Key]} value\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @param {Data | Key} [key]\n   *   Key to get or set, or entire dataset to set, or nothing to get the\n   *   entire dataset (optional).\n   * @param {Data[Key]} [value]\n   *   Value to set (optional).\n   * @returns {unknown}\n   *   The current processor when setting, the value at `key` when getting, or\n   *   the entire dataset when getting without key.\n   */\n  data(key, value) {\n    if (typeof key === 'string') {\n      // Set `key`.\n      if (arguments.length === 2) {\n        assertUnfrozen('data', this.frozen)\n        this.namespace[key] = value\n        return this\n      }\n\n      // Get `key`.\n      return (own.call(this.namespace, key) && this.namespace[key]) || undefined\n    }\n\n    // Set space.\n    if (key) {\n      assertUnfrozen('data', this.frozen)\n      this.namespace = key\n      return this\n    }\n\n    // Get space.\n    return this.namespace\n  }\n\n  /**\n   * Freeze a processor.\n   *\n   * Frozen processors are meant to be extended and not to be configured\n   * directly.\n   *\n   * When a processor is frozen it cannot be unfrozen.\n   * New processors working the same way can be created by calling the\n   * processor.\n   *\n   * It’s possible to freeze processors explicitly by calling `.freeze()`.\n   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,\n   * `.stringify()`, `.process()`, or `.processSync()` are called.\n   *\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   The current processor.\n   */\n  freeze() {\n    if (this.frozen) {\n      return this\n    }\n\n    // Cast so that we can type plugins easier.\n    // Plugins are supposed to be usable on different processors, not just on\n    // this exact processor.\n    const self = /** @type {Processor} */ (/** @type {unknown} */ (this))\n\n    while (++this.freezeIndex < this.attachers.length) {\n      const [attacher, ...options] = this.attachers[this.freezeIndex]\n\n      if (options[0] === false) {\n        continue\n      }\n\n      if (options[0] === true) {\n        options[0] = undefined\n      }\n\n      const transformer = attacher.call(self, ...options)\n\n      if (typeof transformer === 'function') {\n        this.transformers.use(transformer)\n      }\n    }\n\n    this.frozen = true\n    this.freezeIndex = Number.POSITIVE_INFINITY\n\n    return this\n  }\n\n  /**\n   * Parse text to a syntax tree.\n   *\n   * > **Note**: `parse` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `parse` performs the parse phase, not the run phase or other\n   * > phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   file to parse (optional); typically `string` or `VFile`; any value\n   *   accepted as `x` in `new VFile(x)`.\n   * @returns {ParseTree extends undefined ? Node : ParseTree}\n   *   Syntax tree representing `file`.\n   */\n  parse(file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const parser = this.parser || this.Parser\n    assertParser('parse', parser)\n    return parser(String(realFile), realFile)\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * > **Note**: `process` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `process` performs the parse, run, and stringify phases.\n   *\n   * @overload\n   * @param {Compatible | undefined} file\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<VFileWithOutput<CompileResult>>}\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`]; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]\n   *   Callback (optional).\n   * @returns {Promise<VFile> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise a promise, rejected with a fatal error or resolved with the\n   *   processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  process(file, done) {\n    const self = this\n\n    this.freeze()\n    assertParser('process', this.parser || this.Parser)\n    assertCompiler('process', this.compiler || this.Compiler)\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {((file: VFileWithOutput<CompileResult>) => undefined | void) | undefined} resolve\n     * @param {(error: Error | undefined) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      const realFile = vfile(file)\n      // Assume `ParseTree` (the result of the parser) matches `HeadTree` (the\n      // input of the first transform).\n      const parseTree =\n        /** @type {HeadTree extends undefined ? Node : HeadTree} */ (\n          /** @type {unknown} */ (self.parse(realFile))\n        )\n\n      self.run(parseTree, realFile, function (error, tree, file) {\n        if (error || !tree || !file) {\n          return realDone(error)\n        }\n\n        // Assume `TailTree` (the output of the last transform) matches\n        // `CompileTree` (the input of the compiler).\n        const compileTree =\n          /** @type {CompileTree extends undefined ? Node : CompileTree} */ (\n            /** @type {unknown} */ (tree)\n          )\n\n        const compileResult = self.stringify(compileTree, file)\n\n        if (looksLikeAValue(compileResult)) {\n          file.value = compileResult\n        } else {\n          file.result = compileResult\n        }\n\n        realDone(error, /** @type {VFileWithOutput<CompileResult>} */ (file))\n      })\n\n      /**\n       * @param {Error | undefined} error\n       * @param {VFileWithOutput<CompileResult> | undefined} [file]\n       * @returns {undefined}\n       */\n      function realDone(error, file) {\n        if (error || !file) {\n          reject(error)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `processSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `processSync` performs the parse, run, and stringify phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @returns {VFileWithOutput<CompileResult>}\n   *   The processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  processSync(file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {VFileWithOutput<CompileResult> | undefined} */\n    let result\n\n    this.freeze()\n    assertParser('processSync', this.parser || this.Parser)\n    assertCompiler('processSync', this.compiler || this.Compiler)\n\n    this.process(file, realDone)\n    assertDone('processSync', 'process', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n\n    return result\n\n    /**\n     * @type {ProcessCallback<VFileWithOutput<CompileResult>>}\n     */\n    function realDone(error, file) {\n      complete = true\n      bail(error)\n      result = file\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * > **Note**: `run` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `run` performs the run phase, not other phases.\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} file\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {(\n   *   RunCallback<TailTree extends undefined ? Node : TailTree> |\n   *   Compatible\n   * )} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]\n   *   Callback (optional).\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise, a promise rejected with a fatal error or resolved with the\n   *   transformed tree.\n   */\n  run(tree, file, done) {\n    assertNode(tree)\n    this.freeze()\n\n    const transformers = this.transformers\n\n    if (!done && typeof file === 'function') {\n      done = file\n      file = undefined\n    }\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {(\n     *   ((tree: TailTree extends undefined ? Node : TailTree) => undefined | void) |\n     *   undefined\n     * )} resolve\n     * @param {(error: Error) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      assert(\n        typeof file !== 'function',\n        '`file` can’t be a `done` anymore, we checked'\n      )\n      const realFile = vfile(file)\n      transformers.run(tree, realFile, realDone)\n\n      /**\n       * @param {Error | undefined} error\n       * @param {Node} outputTree\n       * @param {VFile} file\n       * @returns {undefined}\n       */\n      function realDone(error, outputTree, file) {\n        const resultingTree =\n          /** @type {TailTree extends undefined ? Node : TailTree} */ (\n            outputTree || tree\n          )\n\n        if (error) {\n          reject(error)\n        } else if (resolve) {\n          resolve(resultingTree)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, resultingTree, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `runSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `runSync` performs the run phase, not other phases.\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {TailTree extends undefined ? Node : TailTree}\n   *   Transformed tree.\n   */\n  runSync(tree, file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {(TailTree extends undefined ? Node : TailTree) | undefined} */\n    let result\n\n    this.run(tree, file, realDone)\n\n    assertDone('runSync', 'run', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n    return result\n\n    /**\n     * @type {RunCallback<TailTree extends undefined ? Node : TailTree>}\n     */\n    function realDone(error, tree) {\n      bail(error)\n      result = tree\n      complete = true\n    }\n  }\n\n  /**\n   * Compile a syntax tree.\n   *\n   * > **Note**: `stringify` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `stringify` performs the stringify phase, not the run phase\n   * > or other phases.\n   *\n   * @param {CompileTree extends undefined ? Node : CompileTree} tree\n   *   Tree to compile.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {CompileResult extends undefined ? Value : CompileResult}\n   *   Textual representation of the tree (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most compilers\n   *   > return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  stringify(tree, file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const compiler = this.compiler || this.Compiler\n    assertCompiler('stringify', compiler)\n    assertNode(tree)\n\n    return compiler(tree, realFile)\n  }\n\n  /**\n   * Configure the processor to use a plugin, a list of usable values, or a\n   * preset.\n   *\n   * If the processor is already using a plugin, the previous plugin\n   * configuration is changed based on the options that are passed in.\n   * In other words, the plugin is not added a second time.\n   *\n   * > **Note**: `use` cannot be called on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * @example\n   *   There are many ways to pass plugins to `.use()`.\n   *   This example gives an overview:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   unified()\n   *     // Plugin with options:\n   *     .use(pluginA, {x: true, y: true})\n   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):\n   *     .use(pluginA, {y: false, z: true})\n   *     // Plugins:\n   *     .use([pluginB, pluginC])\n   *     // Two plugins, the second with options:\n   *     .use([pluginD, [pluginE, {}]])\n   *     // Preset with plugins and settings:\n   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})\n   *     // Settings only:\n   *     .use({settings: {position: false}})\n   *   ```\n   *\n   * @template {Array<unknown>} [Parameters=[]]\n   * @template {Node | string | undefined} [Input=undefined]\n   * @template [Output=Input]\n   *\n   * @overload\n   * @param {Preset | null | undefined} [preset]\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {PluggableList} list\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Plugin<Parameters, Input, Output>} plugin\n   * @param {...(Parameters | [boolean])} parameters\n   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}\n   *\n   * @param {PluggableList | Plugin | Preset | null | undefined} value\n   *   Usable value.\n   * @param {...unknown} parameters\n   *   Parameters, when a plugin is given as a usable value.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   Current processor.\n   */\n  use(value, ...parameters) {\n    const attachers = this.attachers\n    const namespace = this.namespace\n\n    assertUnfrozen('use', this.frozen)\n\n    if (value === null || value === undefined) {\n      // Empty.\n    } else if (typeof value === 'function') {\n      addPlugin(value, parameters)\n    } else if (typeof value === 'object') {\n      if (Array.isArray(value)) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new TypeError('Expected usable value, not `' + value + '`')\n    }\n\n    return this\n\n    /**\n     * @param {Pluggable} value\n     * @returns {undefined}\n     */\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value, [])\n      } else if (typeof value === 'object') {\n        if (Array.isArray(value)) {\n          const [plugin, ...parameters] =\n            /** @type {PluginTuple<Array<unknown>>} */ (value)\n          addPlugin(plugin, parameters)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new TypeError('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    /**\n     * @param {Preset} result\n     * @returns {undefined}\n     */\n    function addPreset(result) {\n      if (!('plugins' in result) && !('settings' in result)) {\n        throw new Error(\n          'Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither'\n        )\n      }\n\n      addList(result.plugins)\n\n      if (result.settings) {\n        namespace.settings = extend(true, namespace.settings, result.settings)\n      }\n    }\n\n    /**\n     * @param {PluggableList | null | undefined} plugins\n     * @returns {undefined}\n     */\n    function addList(plugins) {\n      let index = -1\n\n      if (plugins === null || plugins === undefined) {\n        // Empty.\n      } else if (Array.isArray(plugins)) {\n        while (++index < plugins.length) {\n          const thing = plugins[index]\n          add(thing)\n        }\n      } else {\n        throw new TypeError('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    /**\n     * @param {Plugin} plugin\n     * @param {Array<unknown>} parameters\n     * @returns {undefined}\n     */\n    function addPlugin(plugin, parameters) {\n      let index = -1\n      let entryIndex = -1\n\n      while (++index < attachers.length) {\n        if (attachers[index][0] === plugin) {\n          entryIndex = index\n          break\n        }\n      }\n\n      if (entryIndex === -1) {\n        attachers.push([plugin, ...parameters])\n      }\n      // Only set if there was at least a `primary` value, otherwise we’d change\n      // `arguments.length`.\n      else if (parameters.length > 0) {\n        let [primary, ...rest] = parameters\n        const currentPrimary = attachers[entryIndex][1]\n        if (isPlainObj(currentPrimary) && isPlainObj(primary)) {\n          primary = extend(true, currentPrimary, primary)\n        }\n\n        attachers[entryIndex] = [plugin, primary, ...rest]\n      }\n    }\n  }\n}\n\n// Note: this returns a *callable* instance.\n// That’s why it’s documented as a function.\n/**\n * Create a new processor.\n *\n * @example\n *   This example shows how a new processor can be created (from `remark`) and linked\n *   to **stdin**(4) and **stdout**(4).\n *\n *   ```js\n *   import process from 'node:process'\n *   import concatStream from 'concat-stream'\n *   import {remark} from 'remark'\n *\n *   process.stdin.pipe(\n *     concatStream(function (buf) {\n *       process.stdout.write(String(remark().processSync(buf)))\n *     })\n *   )\n *   ```\n *\n * @returns\n *   New *unfrozen* processor (`processor`).\n *\n *   This processor is configured to work the same as its ancestor.\n *   When the descendant processor is configured in the future it does not\n *   affect the ancestral processor.\n */\nexport const unified = new Processor().freeze()\n\n/**\n * Assert a parser is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Parser}\n */\nfunction assertParser(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `parser`')\n  }\n}\n\n/**\n * Assert a compiler is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Compiler}\n */\nfunction assertCompiler(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `compiler`')\n  }\n}\n\n/**\n * Assert the processor is not frozen.\n *\n * @param {string} name\n * @param {unknown} frozen\n * @returns {asserts frozen is false}\n */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      'Cannot call `' +\n        name +\n        '` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.'\n    )\n  }\n}\n\n/**\n * Assert `node` is a unist node.\n *\n * @param {unknown} node\n * @returns {asserts node is Node}\n */\nfunction assertNode(node) {\n  // `isPlainObj` unfortunately uses `any` instead of `unknown`.\n  // type-coverage:ignore-next-line\n  if (!isPlainObj(node) || typeof node.type !== 'string') {\n    throw new TypeError('Expected node, got `' + node + '`')\n    // Fine.\n  }\n}\n\n/**\n * Assert that `complete` is `true`.\n *\n * @param {string} name\n * @param {string} asyncName\n * @param {unknown} complete\n * @returns {asserts complete is true}\n */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {VFile}\n */\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value)\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {value is VFile}\n */\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'message' in value &&\n      'messages' in value\n  )\n}\n\n/**\n * @param {unknown} [value]\n * @returns {value is Value}\n */\nfunction looksLikeAValue(value) {\n  return typeof value === 'string' || isUint8Array(value)\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","/**\n * @import {Element, Nodes, Parents, Root} from 'hast'\n * @import {Root as MdastRoot} from 'mdast'\n * @import {ComponentType, JSX, ReactElement, ReactNode} from 'react'\n * @import {Options as RemarkRehypeOptions} from 'remark-rehype'\n * @import {BuildVisitor} from 'unist-util-visit'\n * @import {PluggableList, Processor} from 'unified'\n */\n\n/**\n * @callback AllowElement\n *   Filter elements.\n * @param {Readonly<Element>} element\n *   Element to check.\n * @param {number} index\n *   Index of `element` in `parent`.\n * @param {Readonly<Parents> | undefined} parent\n *   Parent of `element`.\n * @returns {boolean | null | undefined}\n *   Whether to allow `element` (default: `false`).\n */\n\n/**\n * @typedef ExtraProps\n *   Extra fields we pass.\n * @property {Element | undefined} [node]\n *   passed when `passNode` is on.\n */\n\n/**\n * @typedef {{\n *   [Key in keyof JSX.IntrinsicElements]?: ComponentType<JSX.IntrinsicElements[Key] & ExtraProps> | keyof JSX.IntrinsicElements\n * }} Components\n *   Map tag names to components.\n */\n\n/**\n * @typedef Deprecation\n *   Deprecation.\n * @property {string} from\n *   Old field.\n * @property {string} id\n *   ID in readme.\n * @property {keyof Options} [to]\n *   New field.\n */\n\n/**\n * @typedef Options\n *   Configuration.\n * @property {AllowElement | null | undefined} [allowElement]\n *   Filter elements (optional);\n *   `allowedElements` / `disallowedElements` is used first.\n * @property {ReadonlyArray<string> | null | undefined} [allowedElements]\n *   Tag names to allow (default: all tag names);\n *   cannot combine w/ `disallowedElements`.\n * @property {string | null | undefined} [children]\n *   Markdown.\n * @property {Components | null | undefined} [components]\n *   Map tag names to components.\n * @property {ReadonlyArray<string> | null | undefined} [disallowedElements]\n *   Tag names to disallow (default: `[]`);\n *   cannot combine w/ `allowedElements`.\n * @property {PluggableList | null | undefined} [rehypePlugins]\n *   List of rehype plugins to use.\n * @property {PluggableList | null | undefined} [remarkPlugins]\n *   List of remark plugins to use.\n * @property {Readonly<RemarkRehypeOptions> | null | undefined} [remarkRehypeOptions]\n *   Options to pass through to `remark-rehype`.\n * @property {boolean | null | undefined} [skipHtml=false]\n *   Ignore HTML in markdown completely (default: `false`).\n * @property {boolean | null | undefined} [unwrapDisallowed=false]\n *   Extract (unwrap) what’s in disallowed elements (default: `false`);\n *   normally when say `strong` is not allowed, it and it’s children are dropped,\n *   with `unwrapDisallowed` the element itself is replaced by its children.\n * @property {UrlTransform | null | undefined} [urlTransform]\n *   Change URLs (default: `defaultUrlTransform`)\n */\n\n/**\n * @typedef HooksOptionsOnly\n *   Configuration specifically for {@linkcode MarkdownHooks}.\n * @property {ReactNode | null | undefined} [fallback]\n *   Content to render while the processor processing the markdown (optional).\n */\n\n/**\n * @typedef {Options & HooksOptionsOnly} HooksOptions\n *   Configuration for {@linkcode MarkdownHooks};\n *   extends the regular {@linkcode Options} with a `fallback` prop.\n */\n\n/**\n * @callback UrlTransform\n *   Transform all URLs.\n * @param {string} url\n *   URL.\n * @param {string} key\n *   Property name (example: `'href'`).\n * @param {Readonly<Element>} node\n *   Node.\n * @returns {string | null | undefined}\n *   Transformed URL (optional).\n */\n\nimport {unreachable} from 'devlop'\nimport {toJsxRuntime} from 'hast-util-to-jsx-runtime'\nimport {urlAttributes} from 'html-url-attributes'\nimport {Fragment, jsx, jsxs} from 'react/jsx-runtime'\nimport {useEffect, useState} from 'react'\nimport remarkParse from 'remark-parse'\nimport remarkRehype from 'remark-rehype'\nimport {unified} from 'unified'\nimport {visit} from 'unist-util-visit'\nimport {VFile} from 'vfile'\n\nconst changelog =\n  'https://github.com/remarkjs/react-markdown/blob/main/changelog.md'\n\n/** @type {PluggableList} */\nconst emptyPlugins = []\n/** @type {Readonly<RemarkRehypeOptions>} */\nconst emptyRemarkRehypeOptions = {allowDangerousHtml: true}\nconst safeProtocol = /^(https?|ircs?|mailto|xmpp)$/i\n\n// Mutable because we `delete` any time it’s used and a message is sent.\n/** @type {ReadonlyArray<Readonly<Deprecation>>} */\nconst deprecations = [\n  {from: 'astPlugins', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'allowDangerousHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {\n    from: 'allowNode',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowElement'\n  },\n  {\n    from: 'allowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowedElements'\n  },\n  {from: 'className', id: 'remove-classname'},\n  {\n    from: 'disallowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'disallowedElements'\n  },\n  {from: 'escapeHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'includeElementIndex', id: '#remove-includeelementindex'},\n  {\n    from: 'includeNodeIndex',\n    id: 'change-includenodeindex-to-includeelementindex'\n  },\n  {from: 'linkTarget', id: 'remove-linktarget'},\n  {from: 'plugins', id: 'change-plugins-to-remarkplugins', to: 'remarkPlugins'},\n  {from: 'rawSourcePos', id: '#remove-rawsourcepos'},\n  {from: 'renderers', id: 'change-renderers-to-components', to: 'components'},\n  {from: 'source', id: 'change-source-to-children', to: 'children'},\n  {from: 'sourcePos', id: '#remove-sourcepos'},\n  {from: 'transformImageUri', id: '#add-urltransform', to: 'urlTransform'},\n  {from: 'transformLinkUri', id: '#add-urltransform', to: 'urlTransform'}\n]\n\n/**\n * Component to render markdown.\n *\n * This is a synchronous component.\n * When using async plugins,\n * see {@linkcode MarkdownAsync} or {@linkcode MarkdownHooks}.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {ReactElement}\n *   React element.\n */\nexport function Markdown(options) {\n  const processor = createProcessor(options)\n  const file = createFile(options)\n  return post(processor.runSync(processor.parse(file), file), options)\n}\n\n/**\n * Component to render markdown with support for async plugins\n * through async/await.\n *\n * Components returning promises are supported on the server.\n * For async support on the client,\n * see {@linkcode MarkdownHooks}.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {Promise<ReactElement>}\n *   Promise to a React element.\n */\nexport async function MarkdownAsync(options) {\n  const processor = createProcessor(options)\n  const file = createFile(options)\n  const tree = await processor.run(processor.parse(file), file)\n  return post(tree, options)\n}\n\n/**\n * Component to render markdown with support for async plugins through hooks.\n *\n * This uses `useEffect` and `useState` hooks.\n * Hooks run on the client and do not immediately render something.\n * For async support on the server,\n * see {@linkcode MarkdownAsync}.\n *\n * @param {Readonly<HooksOptions>} options\n *   Props.\n * @returns {ReactNode}\n *   React node.\n */\nexport function MarkdownHooks(options) {\n  const processor = createProcessor(options)\n  const [error, setError] = useState(\n    /** @type {Error | undefined} */ (undefined)\n  )\n  const [tree, setTree] = useState(/** @type {Root | undefined} */ (undefined))\n\n  useEffect(\n    function () {\n      let cancelled = false\n      const file = createFile(options)\n\n      processor.run(processor.parse(file), file, function (error, tree) {\n        if (!cancelled) {\n          setError(error)\n          setTree(tree)\n        }\n      })\n\n      /**\n       * @returns {undefined}\n       *   Nothing.\n       */\n      return function () {\n        cancelled = true\n      }\n    },\n    [\n      options.children,\n      options.rehypePlugins,\n      options.remarkPlugins,\n      options.remarkRehypeOptions\n    ]\n  )\n\n  if (error) throw error\n\n  return tree ? post(tree, options) : options.fallback\n}\n\n/**\n * Set up the `unified` processor.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {Processor<MdastRoot, MdastRoot, Root, undefined, undefined>}\n *   Result.\n */\nfunction createProcessor(options) {\n  const rehypePlugins = options.rehypePlugins || emptyPlugins\n  const remarkPlugins = options.remarkPlugins || emptyPlugins\n  const remarkRehypeOptions = options.remarkRehypeOptions\n    ? {...options.remarkRehypeOptions, ...emptyRemarkRehypeOptions}\n    : emptyRemarkRehypeOptions\n\n  const processor = unified()\n    .use(remarkParse)\n    .use(remarkPlugins)\n    .use(remarkRehype, remarkRehypeOptions)\n    .use(rehypePlugins)\n\n  return processor\n}\n\n/**\n * Set up the virtual file.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {VFile}\n *   Result.\n */\nfunction createFile(options) {\n  const children = options.children || ''\n  const file = new VFile()\n\n  if (typeof children === 'string') {\n    file.value = children\n  } else {\n    unreachable(\n      'Unexpected value `' +\n        children +\n        '` for `children` prop, expected `string`'\n    )\n  }\n\n  return file\n}\n\n/**\n * Process the result from unified some more.\n *\n * @param {Nodes} tree\n *   Tree.\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {ReactElement}\n *   React element.\n */\nfunction post(tree, options) {\n  const allowedElements = options.allowedElements\n  const allowElement = options.allowElement\n  const components = options.components\n  const disallowedElements = options.disallowedElements\n  const skipHtml = options.skipHtml\n  const unwrapDisallowed = options.unwrapDisallowed\n  const urlTransform = options.urlTransform || defaultUrlTransform\n\n  for (const deprecation of deprecations) {\n    if (Object.hasOwn(options, deprecation.from)) {\n      unreachable(\n        'Unexpected `' +\n          deprecation.from +\n          '` prop, ' +\n          (deprecation.to\n            ? 'use `' + deprecation.to + '` instead'\n            : 'remove it') +\n          ' (see <' +\n          changelog +\n          '#' +\n          deprecation.id +\n          '> for more info)'\n      )\n    }\n  }\n\n  if (allowedElements && disallowedElements) {\n    unreachable(\n      'Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other'\n    )\n  }\n\n  visit(tree, transform)\n\n  return toJsxRuntime(tree, {\n    Fragment,\n    components,\n    ignoreInvalidStyle: true,\n    jsx,\n    jsxs,\n    passKeys: true,\n    passNode: true\n  })\n\n  /** @type {BuildVisitor<Root>} */\n  function transform(node, index, parent) {\n    if (node.type === 'raw' && parent && typeof index === 'number') {\n      if (skipHtml) {\n        parent.children.splice(index, 1)\n      } else {\n        parent.children[index] = {type: 'text', value: node.value}\n      }\n\n      return index\n    }\n\n    if (node.type === 'element') {\n      /** @type {string} */\n      let key\n\n      for (key in urlAttributes) {\n        if (\n          Object.hasOwn(urlAttributes, key) &&\n          Object.hasOwn(node.properties, key)\n        ) {\n          const value = node.properties[key]\n          const test = urlAttributes[key]\n          if (test === null || test.includes(node.tagName)) {\n            node.properties[key] = urlTransform(String(value || ''), key, node)\n          }\n        }\n      }\n    }\n\n    if (node.type === 'element') {\n      let remove = allowedElements\n        ? !allowedElements.includes(node.tagName)\n        : disallowedElements\n          ? disallowedElements.includes(node.tagName)\n          : false\n\n      if (!remove && allowElement && typeof index === 'number') {\n        remove = !allowElement(node, index, parent)\n      }\n\n      if (remove && parent && typeof index === 'number') {\n        if (unwrapDisallowed && node.children) {\n          parent.children.splice(index, 1, ...node.children)\n        } else {\n          parent.children.splice(index, 1)\n        }\n\n        return index\n      }\n    }\n  }\n}\n\n/**\n * Make a URL safe.\n *\n * @satisfies {UrlTransform}\n * @param {string} value\n *   URL.\n * @returns {string}\n *   Safe URL.\n */\nexport function defaultUrlTransform(value) {\n  // Same as:\n  // <https://github.com/micromark/micromark/blob/929275e/packages/micromark-util-sanitize-uri/dev/index.js#L34>\n  // But without the `encode` part.\n  const colon = value.indexOf(':')\n  const questionMark = value.indexOf('?')\n  const numberSign = value.indexOf('#')\n  const slash = value.indexOf('/')\n\n  if (\n    // If there is no protocol, it’s relative.\n    colon === -1 ||\n    // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    (slash !== -1 && colon > slash) ||\n    (questionMark !== -1 && colon > questionMark) ||\n    (numberSign !== -1 && colon > numberSign) ||\n    // It is a protocol, it should be allowed.\n    safeProtocol.test(value.slice(0, colon))\n  ) {\n    return value\n  }\n\n  return ''\n}\n","import React, { useState } from 'react';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\ninterface TruncatedTextProps {\r\n  text: string;\r\n  maxLength?: number;\r\n  className?: string;\r\n  tooltipEnabled?: boolean;\r\n  as?: React.ElementType;\r\n}\r\n\r\n/**\r\n * Composant pour afficher du texte tronqué avec une infobulle optionnelle\r\n * montrant le texte complet au survol\r\n */\r\nexport const TruncatedText: React.FC<TruncatedTextProps> = ({\r\n  text,\r\n  maxLength = 50,\r\n  className = \"\",\r\n  tooltipEnabled = false,\r\n  as: Component = \"span\"\r\n}) => {\r\n  const [isTooltipOpen, setIsTooltipOpen] = useState(false);\r\n  \r\n  // Si le texte est plus court que la longueur maximale, l'afficher tel quel\r\n  if (!text || text.length <= maxLength) {\r\n    return <Component className={className}>{text}</Component>;\r\n  }\r\n  \r\n  // Tronquer le texte et ajouter des points de suspension\r\n  const truncatedText = `${text.substring(0, maxLength)}...`;\r\n  \r\n  // Si les infobulles sont désactivées, afficher simplement le texte tronqué\r\n  if (!tooltipEnabled) {\r\n    return <Component className={className}>{truncatedText}</Component>;\r\n  }\r\n  \r\n  // Sinon, afficher le texte tronqué avec une infobulle\r\n  return (\r\n    <TooltipProvider>\r\n      <Tooltip open={isTooltipOpen} onOpenChange={setIsTooltipOpen}>\r\n        <TooltipTrigger asChild>\r\n          <Component \r\n            className={`${className} cursor-help`}\r\n            onMouseEnter={() => setIsTooltipOpen(true)}\r\n            onMouseLeave={() => setIsTooltipOpen(false)}\r\n            onTouchStart={() => setIsTooltipOpen(true)}\r\n            onTouchEnd={() => setIsTooltipOpen(false)}\r\n          >\r\n            {truncatedText}\r\n          </Component>\r\n        </TooltipTrigger>\r\n        <TooltipContent className=\"max-w-xs bg-white text-black p-2 rounded shadow-md border border-gray-200\">\r\n          <p>{text}</p>\r\n        </TooltipContent>\r\n      </Tooltip>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n","import { Event } from \"@/data/events\";\nimport { createLogger } from \"@/utils/logger\";\n\n// Créer un logger pour le service de calendrier\nconst logger = createLogger('calendarService');\n\n/**\n * Types d'erreurs possibles lors de l'ajout au calendrier\n */\nexport enum CalendarErrorType {\n  NOT_SUPPORTED = \"NOT_SUPPORTED\",\n  PERMISSION_DENIED = \"PERMISSION_DENIED\",\n  GENERAL_ERROR = \"GENERAL_ERROR\"\n}\n\n/**\n * Résultat de l'opération d'ajout au calendrier\n */\nexport interface CalendarResult {\n  success: boolean;\n  errorType?: CalendarErrorType;\n  errorMessage?: string;\n}\n\n/**\n * Vérifie si l'API de calendrier est disponible sur l'appareil\n */\nexport const isCalendarSupported = (): boolean => {\n  // Vérifier si nous sommes dans un navigateur mobile\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  \n  // Vérifier si l'API Web Share est disponible (indicateur indirect de support)\n  const hasWebShare = 'share' in navigator && 'canShare' in navigator;\n  \n  // Sur iOS, nous pouvons utiliser des liens webcal://\n  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n  \n  // Sur desktop, nous pouvons toujours proposer le téléchargement du fichier .ics\n  const isDesktop = !isMobile;\n  \n  logger.info(\"Vérification du support calendrier\", { \n    isMobile, \n    hasWebShare, \n    isIOS, \n    isDesktop,\n    userAgent: navigator.userAgent \n  });\n  \n  // Retourner true pour tous les appareils\n  // - Sur mobile avec Web Share: utiliser l'API de partage\n  // - Sur iOS: utiliser les liens webcal://\n  // - Sur desktop: proposer le téléchargement du fichier .ics\n  return hasWebShare || isIOS || isDesktop;\n};\n\n/**\n * Formate un événement pour l'export vers le calendrier\n */\nconst formatEventForCalendar = (event: Event): string => {\n  // Déterminer la date de l'événement en fonction du jour (samedi ou dimanche)\n  const now = new Date();\n  const currentYear = now.getFullYear();\n  \n  // Trouver la date du prochain samedi ou dimanche en fonction des jours de l'événement\n  let eventDate = new Date();\n  if (event.days.includes('samedi')) {\n    // Trouver le prochain samedi (jour 6)\n    while (eventDate.getDay() !== 6) {\n      eventDate.setDate(eventDate.getDate() + 1);\n    }\n  } else if (event.days.includes('dimanche')) {\n    // Trouver le prochain dimanche (jour 0)\n    while (eventDate.getDay() !== 0) {\n      eventDate.setDate(eventDate.getDate() + 1);\n    }\n  }\n  \n  // Extraire les heures de début et de fin\n  const startTime = event.time.split(' - ')[0];\n  const endTime = event.time.split(' - ')[1] || (parseInt(startTime.split('h')[0]) + 1) + 'h00';\n  \n  // Formater les dates de début et de fin au format iCalendar\n  const startDate = new Date(eventDate);\n  const [startHour, startMinute] = startTime.split('h').map(part => parseInt(part) || 0);\n  startDate.setHours(startHour, startMinute, 0);\n  \n  const endDate = new Date(eventDate);\n  const [endHour, endMinute] = endTime.split('h').map(part => parseInt(part) || 0);\n  endDate.setHours(endHour, endMinute, 0);\n  \n  // Formater au format iCalendar (RFC 5545)\n  const formatDate = (date: Date): string => {\n    return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\n  };\n  \n  const formatText = (text: string): string => {\n    return text.replace(/\\n/g, '\\\\n').replace(/,/g, '\\\\,');\n  };\n  \n  // Créer l'événement au format iCalendar\n  const icalEvent = [\n    'BEGIN:VCALENDAR',\n    'VERSION:2.0',\n    'PRODID:-//Collectif Feydeau//App//FR',\n    'CALSCALE:GREGORIAN',\n    'METHOD:PUBLISH',\n    'BEGIN:VEVENT',\n    `UID:${event.id}@collectif-feydeau.app`,\n    `DTSTAMP:${formatDate(new Date())}`,\n    `DTSTART:${formatDate(startDate)}`,\n    `DTEND:${formatDate(endDate)}`,\n    `SUMMARY:${formatText(event.title)}`,\n    `DESCRIPTION:${formatText(event.artistBio || '')}`,\n    `LOCATION:${formatText('Île Feydeau, Nantes')}`,\n    'END:VEVENT',\n    'END:VCALENDAR'\n  ].join('\\r\\n');\n  \n  return icalEvent;\n};\n\n/**\n * Ajoute un événement au calendrier de l'appareil\n * Utilise différentes approches selon la plateforme\n */\nexport const addToCalendar = async (event: Event): Promise<CalendarResult> => {\n  try {\n    // Toujours retourner true pour la vérification de support\n    // Nous allons gérer les différentes plateformes directement\n    \n    // Formater l'événement au format iCalendar\n    const icalEvent = formatEventForCalendar(event);\n    \n    // Détecter les plateformes\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    const isAndroid = /Android/i.test(navigator.userAgent);\n    const isMobile = isIOS || isAndroid || /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    \n    logger.info(\"Détection de plateforme\", { isIOS, isAndroid, isMobile, userAgent: navigator.userAgent });\n    \n    // Créer le blob pour toutes les plateformes\n    const blob = new Blob([icalEvent], { type: 'text/calendar;charset=utf-8' });\n    \n    // Approche spécifique pour iOS\n    if (isIOS) {\n      try {\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url.replace('blob:', 'webcal:');\n        link.setAttribute('download', `${event.title.replace(/\\s+/g, '_')}.ics`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        setTimeout(() => URL.revokeObjectURL(url), 100);\n        \n        logger.info(\"Événement ajouté au calendrier iOS\", { eventId: event.id });\n        return { success: true };\n      } catch (iosError) {\n        logger.warn(\"Erreur lors de l'ajout au calendrier iOS\", { iosError });\n        // Continuer avec la méthode alternative\n      }\n    }\n    \n    // Approche spécifique pour Android\n    if (isAndroid) {\n      try {\n        // Sur Android, essayer d'abord le partage simple\n        if (navigator.share) {\n          // Créer une URL temporaire pour le fichier .ics\n          const url = URL.createObjectURL(blob);\n          \n          // Partager un lien et des informations\n          await navigator.share({\n            title: `Ajouter \"${event.title}\" à votre calendrier`,\n            text: `Événement: ${event.title} - ${event.days.join(' et ')} à ${event.time}\\nLieu: Île Feydeau, Nantes`,\n            url: window.location.href // Utiliser l'URL actuelle comme fallback\n          });\n          \n          setTimeout(() => URL.revokeObjectURL(url), 100);\n          logger.info(\"Informations partagées pour ajout au calendrier Android\", { eventId: event.id });\n          return { success: true };\n        }\n      } catch (androidError) {\n      }\n    }\n    \n    // Essayer le partage de fichier (pour les appareils mobiles qui le supportent)\n    if (isMobile && navigator.share) {\n      try {\n        // Créer un fichier à partir du blob\n        const file = new File([blob], `${event.title.replace(/\\s+/g, '_')}.ics`, { type: 'text/calendar' });\n        \n        // Vérifier si le partage de fichier est supporté\n        if (navigator.canShare && navigator.canShare({ files: [file] })) {\n          await navigator.share({\n            files: [file],\n            title: `Ajouter \"${event.title}\" à votre calendrier`,\n            text: `Événement: ${event.title} - ${event.days.join(' et ')} à ${event.time}`\n          });\n          \n          logger.info(\"Fichier partagé pour ajout au calendrier\", { eventId: event.id });\n          return { success: true };\n        }\n      } catch (shareError) {\n        logger.warn(\"Erreur lors du partage de fichier\", { shareError });\n        // Continuer avec le téléchargement direct\n      }\n    }\n    \n    // Méthode universelle : téléchargement direct du fichier .ics\n    // Cette méthode fonctionne sur la plupart des navigateurs desktop\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.setAttribute('download', `${event.title.replace(/\\s+/g, '_')}.ics`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n    \n    logger.info(\"Fichier .ics téléchargé\", { eventId: event.id, platform: isAndroid ? 'Android' : isIOS ? 'iOS' : 'Desktop' });\n    return { success: true };\n  } catch (error) {\n    logger.error(\"Erreur lors de l'ajout au calendrier\", { error });\n    return {\n      success: false,\n      errorType: CalendarErrorType.GENERAL_ERROR,\n      errorMessage: error instanceof Error ? error.message : \"Une erreur inconnue est survenue\"\n    };\n  }\n};\n\n/**\n * Crée un rappel pour un événement\n * Utilise les notifications natives si disponibles, sinon utilise le système de notification interne\n */\nexport const createReminder = async (event: Event, reminderTime: Date): Promise<CalendarResult> => {\n  try {\n    // Vérifier si les notifications sont supportées\n    if (!('Notification' in window)) {\n      logger.warn(\"Notifications non supportées\");\n      return {\n        success: false,\n        errorType: CalendarErrorType.NOT_SUPPORTED,\n        errorMessage: \"Les notifications ne sont pas supportées sur cet appareil\"\n      };\n    }\n    \n    // Demander la permission si nécessaire\n    if (Notification.permission !== 'granted') {\n      const permission = await Notification.requestPermission();\n      if (permission !== 'granted') {\n        logger.warn(\"Permission de notification refusée\");\n        return {\n          success: false,\n          errorType: CalendarErrorType.PERMISSION_DENIED,\n          errorMessage: \"Permission refusée pour les notifications\"\n        };\n      }\n    }\n    \n    // Calculer le délai jusqu'au rappel\n    const now = new Date();\n    const timeUntilReminder = reminderTime.getTime() - now.getTime();\n    \n    if (timeUntilReminder <= 0) {\n      logger.warn(\"La date de rappel est déjà passée\");\n      return {\n        success: false,\n        errorType: CalendarErrorType.GENERAL_ERROR,\n        errorMessage: \"La date de rappel est déjà passée\"\n      };\n    }\n    \n    // Enregistrer le rappel dans le service worker si disponible\n    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n      navigator.serviceWorker.controller.postMessage({\n        type: 'SCHEDULE_NOTIFICATION',\n        payload: {\n          id: `reminder-${event.id}`,\n          title: `Rappel: ${event.title}`,\n          body: `${event.days.join(' et ')} à ${event.time} - Île Feydeau, Nantes`,\n          timestamp: reminderTime.getTime()\n        }\n      });\n      \n      logger.info(\"Rappel programmé via service worker\", { \n        eventId: event.id, \n        reminderTime: reminderTime.toISOString() \n      });\n      \n      return { success: true };\n    } else {\n      // Fallback: utiliser setTimeout (ne fonctionne que si l'application reste ouverte)\n      setTimeout(() => {\n        new Notification(`Rappel: ${event.title}`, {\n          body: `${event.days.join(' et ')} à ${event.time} - Île Feydeau, Nantes`,\n          icon: '/icon-192x192.png'\n        });\n      }, timeUntilReminder);\n      \n      logger.info(\"Rappel programmé via setTimeout\", { \n        eventId: event.id, \n        reminderTime: reminderTime.toISOString() \n      });\n      \n      return { success: true };\n    }\n  } catch (error) {\n    logger.error(\"Erreur lors de la création du rappel\", { error });\n    return {\n      success: false,\n      errorType: CalendarErrorType.GENERAL_ERROR,\n      errorMessage: error instanceof Error ? error.message : \"Une erreur inconnue est survenue\"\n    };\n  }\n};\n","import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { getImagePath } from \"@/utils/imagePaths\";\nimport { setEventContributionContext } from \"@/services/contextualContributionService\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\nimport Calendar from \"lucide-react/dist/esm/icons/calendar\";\nimport Bookmark from \"lucide-react/dist/esm/icons/bookmark\";\nimport BookmarkCheck from \"lucide-react/dist/esm/icons/bookmark-check\";\nimport Info from \"lucide-react/dist/esm/icons/info\";\nimport X from \"lucide-react/dist/esm/icons/x\";\nimport Instagram from \"lucide-react/dist/esm/icons/instagram\";\nimport ChevronDown from \"lucide-react/dist/esm/icons/chevron-down\";\nimport ChevronUp from \"lucide-react/dist/esm/icons/chevron-up\";\nimport Share2 from \"lucide-react/dist/esm/icons/share-2\";\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\nimport { ShareButton } from \"@/components/ShareButton\";\nimport { saveEvent, getSavedEvents, removeSavedEvent } from \"@/services/savedEvents\";\nimport { type Event, getEventsByLocation } from \"@/data/events\";\nimport { getLocationNameById } from \"@/data/locations\";\nimport { artists } from \"@/data/artists\";\nimport { analytics, EventAction, trackInteraction } from \"@/services/firebaseAnalytics\";\nimport { InstagramCarousel } from \"@/components/InstagramCarousel\";\nimport { TruncatedText } from \"@/components/TruncatedText\";\nimport { addToCalendar, isCalendarSupported, CalendarErrorType } from \"@/services/calendarService\";\nimport { AppImage } from \"@/components/AppImage\";\n\ninterface EventDetailsProps {\n  event: Event | null;\n  isOpen: boolean;\n  onClose: () => void;\n  source: \"map\" | \"program\" | \"saved\"; // Pour savoir d'où vient l'utilisateur\n}\n\n// Composant pour afficher la description de l'artiste avec un teaser et une option pour développer\ninterface ArtistDescriptionProps {\n  text: string;\n}\n\nconst ArtistDescription = ({ text }: ArtistDescriptionProps) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  // Créer un teaser en prenant les premiers caractères du texte\n  const createTeaser = (fullText: string): string => {\n    // Environ 100-120 caractères pour 1-2 lignes\n    const maxLength = 120;\n    \n    if (fullText.length <= maxLength) return fullText;\n    \n    // Trouver le dernier espace avant la limite pour ne pas couper un mot\n    const truncated = fullText.substring(0, maxLength);\n    const lastSpaceIndex = truncated.lastIndexOf(' ');\n    \n    return truncated.substring(0, lastSpaceIndex) + '...';\n  };\n  \n  const teaser = createTeaser(text);\n  const showExpandOption = text.length > teaser.length;\n  \n  const toggleExpand = () => {\n    setIsExpanded(!isExpanded);\n  };\n  \n  return (\n    <div className=\"text-sm text-[#4a5d94]\">\n      {/* Afficher soit le teaser, soit le texte complet */}\n      <div \n        onClick={showExpandOption ? toggleExpand : undefined}\n        onKeyDown={(e) => {\n          if (showExpandOption && (e.key === 'Enter' || e.key === ' ')) {\n            e.preventDefault();\n            toggleExpand();\n          }\n        }}\n        tabIndex={showExpandOption ? 0 : undefined}\n        role={showExpandOption ? \"button\" : undefined}\n        aria-expanded={isExpanded}\n        className={showExpandOption ? \"cursor-pointer\" : \"\"}\n      >\n        <ReactMarkdown components={{\n          p: ({node, ...props}) => <p className=\"mb-3\" {...props} />,\n          h2: ({node, ...props}) => <h2 className=\"text-lg font-bold mb-2\" {...props} />,\n          h3: ({node, ...props}) => <h3 className=\"text-md font-semibold mb-2\" {...props} />,\n          hr: ({node, ...props}) => <hr className=\"my-4 border-t border-[#d8e3ff]\" {...props} />\n        }}>\n          {isExpanded ? text : teaser}\n        </ReactMarkdown>\n        \n        {/* Indicateur visuel pour développer/réduire */}\n        {showExpandOption && (\n          <div className=\"flex items-center text-xs text-[#8c9db5] mt-1\">\n            {isExpanded ? (\n              <>\n                <ChevronUp className=\"h-3 w-3 mr-1\" />\n                <span>Réduire</span>\n              </>\n            ) : (\n              <>\n                <ChevronDown className=\"h-3 w-3 mr-1\" />\n                <span>(pour voir +)</span>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport const EventDetails = ({ event, isOpen, onClose, source }: EventDetailsProps) => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  \n  // État pour les événements sauvegardés\n  const [savedEvents, setSavedEvents] = useState<Event[]>([]);\n  const [calendarSupported, setCalendarSupported] = useState<boolean>(false);\n  const [relatedEvents, setRelatedEvents] = useState<Event[]>([]);\n  \n  // Tracking: ouverture du panneau de détails\n  useEffect(() => {\n    if (isOpen && event) {\n      analytics.trackProgramInteraction(EventAction.EVENT_DETAILS, {\n        event_id: event.id,\n        event_title: event.title,\n        source\n      });\n    }\n  }, [isOpen, event, source]);\n  \n  // Vérifier si l'événement est sauvegardé au chargement\n  useEffect(() => {\n    if (event) {\n      const currentSavedEvents = getSavedEvents();\n      setSavedEvents(currentSavedEvents);\n      \n      // Vérifier si le calendrier est supporté\n      setCalendarSupported(isCalendarSupported());\n      \n      // Charger les événements liés au même lieu\n      if (event.locationId) {\n        const eventsAtSameLocation = getEventsByLocation(event.locationId)\n          .filter(e => e.id !== event.id); // Exclure l'événement actuel\n        setRelatedEvents(eventsAtSameLocation);\n      }\n    }\n  }, [event]);\n  \n  // Vérifier si l'événement actuel est sauvegardé\n  const isSaved = event ? savedEvents.some(saved => saved.id === event.id) : false;\n  \n  // Fonction pour naviguer vers la carte\n  const navigateToMap = () => {\n    if (!event) return;\n    \n    // Ajouter des logs pour déboguer\n    console.log(`[EventDetails] Navigation vers la carte pour l'événement ${event.id} au lieu ${event.locationId}`);\n    console.log(`[EventDetails] Source de navigation: ${source}`);\n    \n    // Tracking: clic \"Voir sur la carte\"\n    trackInteraction(EventAction.CLICK, 'view_on_map_button', {\n      from: 'event_details',\n      event_id: event.id,\n      location_id: event.locationId,\n      source\n    });\n    \n    // Fermer d'abord le dialogue pour éviter les problèmes de navigation\n    onClose();\n    \n    // Utiliser setTimeout pour s'assurer que le dialogue est fermé avant la navigation\n    setTimeout(() => {\n      // Naviguer vers la carte avec un paramètre fromEvent pour indiquer que nous venons des détails d'un événement\n      console.log(`[EventDetails] Redirection vers /map avec highlightLocationId=${event.locationId}`);\n      \n      navigate(`/map`, { \n        state: { \n          highlightLocationId: event.locationId,\n          fromEvent: true,\n          timestamp: new Date().getTime() // Ajouter un timestamp pour garantir que l'état est considéré comme nouveau\n        } \n      });\n    }, 100);\n  };\n  \n  // Fonction pour contribuer à la galerie communautaire avec le contexte de l'événement\n  const handleContribute = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!event) return;\n    \n    // Enregistrer le contexte de contribution\n    setEventContributionContext(event);\n    \n    // Naviguer vers la galerie communautaire, onglet contribution\n    navigate(\"/community?tab=contribute\");\n    onClose();\n    \n    // Tracking: contribution depuis un événement\n    analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, {\n      from: 'event_details',\n      event_id: event.id,\n      event_title: event.title\n    });\n  };\n\n  // Fonction pour gérer la sauvegarde/suppression d'un événement\n  const toggleSaveEvent = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!event) return;\n    \n    const isCurrentlySaved = savedEvents.some(saved => saved.id === event.id);\n    \n    if (isCurrentlySaved) {\n      // Retirer des favoris\n      removeSavedEvent(event.id);\n      setSavedEvents(getSavedEvents());\n\n      \n      // Analytics: unsave\n      analytics.trackContentInteraction(EventAction.UNSAVE, 'event', event.id, {\n        event_title: event.title,\n        source\n      });\n    } else {\n      // Ajouter aux favoris\n      saveEvent(event);\n      setSavedEvents(getSavedEvents());\n      \n      \n      // Analytics: save\n      analytics.trackContentInteraction(EventAction.SAVE, 'event', event.id, {\n        event_title: event.title,\n        source\n      });\n    }\n  };\n  \n  // Fonction pour ajouter un événement au calendrier\n  const handleAddToCalendar = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!event) return;\n    \n    try {\n      // Tracking: CTA ajouter au calendrier\n      analytics.trackProgramCTA('add_to_calendar', event.id);\n      \n      // Ajouter l'événement au calendrier\n      const result = await addToCalendar(event);\n      \n      if (result.success) {\n        toast({\n          title: \"Événement ajouté au calendrier\",\n          description: `${event.title} a été ajouté à votre calendrier.`,\n        });\n      } else {\n        // Gérer les différents types d'erreurs\n        if (result.errorType === CalendarErrorType.NOT_SUPPORTED) {\n          toast({\n            title: \"Fonctionnalité non supportée\",\n            description: \"Votre appareil ne supporte pas l'ajout au calendrier.\",\n            variant: \"destructive\"\n          });\n        } else {\n          toast({\n            title: \"Erreur\",\n            description: result.errorMessage || \"Une erreur est survenue lors de l'ajout au calendrier.\",\n            variant: \"destructive\"\n          });\n          analytics.trackError(EventAction.API_ERROR, 'add_to_calendar', {\n            event_id: event.id,\n            error_message: result.errorMessage\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'ajout au calendrier:\", error);\n      toast({\n        title: \"Erreur\",\n        description: \"Une erreur inattendue est survenue.\",\n        variant: \"destructive\"\n      });\n      analytics.trackError(EventAction.API_ERROR, 'add_to_calendar_exception', {\n        event_id: event?.id,\n        error_message: (error as Error)?.message\n      });\n    }\n  };\n  \n  // Si pas d'événement ou si le dialogue n'est pas ouvert, ne rien afficher\n  if (!event || !isOpen) return null;\n  \n  // Déterminer si l'événement est sauvegardé\n  const isEventSaved = isSaved;\n  \n  // Récupérer l'artiste correspondant à l'événement\n  const artist = artists.find(artist => artist.id === event.artistId);\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent \n        className=\"w-[95vw] sm:w-[90vw] md:w-[80vw] lg:max-w-md max-h-[85vh] overflow-y-auto pt-14\"\n        aria-describedby=\"event-details-description\"\n      >\n        <div id=\"event-details-description\" className=\"sr-only\">\n          Détails de l'événement sélectionné\n        </div>\n        {/* Barre d'icônes en haut */}\n        <div className=\"absolute top-0 left-0 right-0 flex justify-end items-center p-3 bg-white z-10\">\n          <div className=\"flex space-x-4\">\n            <button\n              className={`flex items-center justify-center h-10 w-10 rounded-full border ${isEventSaved ? \"border-[#ff7a45] text-[#ff7a45]\" : \"border-gray-300 text-gray-500\"} transition-all duration-200 hover:shadow-sm`}\n              onClick={toggleSaveEvent}\n              title={isEventSaved ? \"Retirer des favoris\" : \"Ajouter aux favoris\"}\n              type=\"button\"\n            >\n              {isEventSaved ? (\n                <BookmarkCheck className=\"h-5 w-5\" />\n              ) : (\n                <Bookmark className=\"h-5 w-5\" />\n              )}\n            </button>\n            \n            <ShareButton\n              title={`${event.title} - Île Feydeau`}\n              text={`Découvrez ${event.title} par ${event.artistName} sur l'Île Feydeau à Nantes!`}\n              url={window.location.href}\n            />\n            \n            <button\n              className=\"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-gray-500 transition-all duration-200 hover:shadow-sm\"\n              onClick={onClose}\n              title=\"Fermer\"\n              type=\"button\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n        \n        <div className={`h-1 ${event.type === \"exposition\" ? \"bg-[#4a5d94]\" : \"bg-[#ff7a45]\"}`} />\n        \n        <DialogHeader className=\"sr-only\">\n          <DialogTitle>{event.title}</DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"py-2 px-1 overflow-x-hidden\">\n          {event.type === \"exposition\" ? (\n            <>\n              <div className=\"bg-[#e0ebff] p-3 rounded-lg mb-2\">\n                <h3 className=\"text-lg font-medium text-[#1a2138] break-words\">\n                  {/* Pas de troncature pour le titre principal, mais utilisation de break-words */}\n                  {event.title}\n                </h3>\n              </div>\n              <p className=\"text-sm text-[#4a5d94] mb-2\">\n                <TruncatedText \n                  text={event.artistName} \n                  maxLength={40} \n                  className=\"text-sm text-[#4a5d94]\"\n                />\n              </p>\n            </>\n          ) : (\n            <div className=\"bg-[#f9f2ee] p-3 rounded-lg mb-3\">\n              <h3 className=\"text-lg font-medium text-[#1a2138] break-words\">\n                {/* Pas de troncature pour le titre principal, mais utilisation de break-words */}\n                {event.title}\n              </h3>\n            </div>\n          )}\n          <div className=\"flex items-center mb-4\">\n            <MapPin className=\"h-3 w-3 mr-1 text-[#8c9db5]\" />\n            <p className=\"text-xs text-[#8c9db5]\">\n              <TruncatedText \n                text={`${getLocationNameById(event.locationId)} • ${event.time}`} \n                maxLength={40} \n                className=\"text-xs text-[#8c9db5]\"\n              />\n            </p>\n          </div>\n          \n          <div className=\"bg-[#f0f5ff] p-3 rounded-lg mb-4\">\n            {/* Afficher la présentation de l'artiste si disponible */}\n            {artist?.presentation && (\n              <ArtistDescription text={artist.presentation} />\n            )}\n            \n            {/* Afficher les informations complètes de l'artiste pour les concerts */}\n            {event.type === \"concert\" && artist && (\n              <div className=\"space-y-4\">\n                {/* Email de contact */}\n                {artist.email && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">Contact email:</h4>\n                    <a \n                      href={`mailto:${artist.email}`} \n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      {artist.email}\n                    </a>\n                  </div>\n                )}\n\n                {/* Site web */}\n                {artist.website && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">Site web:</h4>\n                    <a \n                      href={artist.website} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\" \n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      {artist.website.replace(/^https?:\\/\\//, '').replace(/\\/$/, '')}\n                    </a>\n                  </div>\n                )}\n\n                {/* Téléphone */}\n                {artist.phone && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">Téléphone:</h4>\n                    <a \n                      href={`tel:${artist.phone}`} \n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      {artist.phone}\n                    </a>\n                  </div>\n                )}\n\n                {/* Facebook */}\n                {artist.facebook && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">Facebook:</h4>\n                    <span className=\"text-sm text-gray-700\">{artist.facebook}</span>\n                  </div>\n                )}\n\n                {/* YouTube */}\n                {artist.youtube && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">YouTube:</h4>\n                    <a \n                      href={artist.youtube} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\" \n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      {artist.youtube.replace(/^https?:\\/\\//, '').replace(/\\/$/, '')}\n                    </a>\n                  </div>\n                )}\n\n                {/* TikTok */}\n                {artist.tiktok && (\n                  <div>\n                    <h4 className=\"text-xs font-medium mb-1 text-[#4a5d94]\">TikTok:</h4>\n                    <a \n                      href={artist.tiktok} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\" \n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      {artist.tiktok.replace(/^https?:\\/\\//, '').replace(/\\/$/, '')}\n                    </a>\n                  </div>\n                )}\n\n                {/* Directeur/Chef */}\n                {artist.director && (\n                  <div className=\"flex items-center mb-2\">\n                    <span className=\"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2\">Direction:</span>\n                    <span className=\"text-sm text-gray-700\">{artist.director}</span>\n                  </div>\n                )}\n\n                {/* Membres */}\n                {artist.members && (\n                  <div className=\"flex items-center mb-2\">\n                    <span className=\"text-xs font-medium text-gray-500 uppercase tracking-wider mr-2\">Membres:</span>\n                    <span className=\"text-sm text-gray-700\">{artist.members}</span>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Afficher les photos pour les concerts si disponibles */}\n            {event.type === \"concert\" && artist?.photos && artist.photos.length > 0 && (\n              <div className=\"mt-6\">\n                <h4 className=\"text-sm font-medium mb-3 text-[#4a5d94] flex items-center\">\n                  <span className=\"w-2 h-2 rounded-full bg-[#4a5d94] mr-2\"></span>\n                  Photos\n                </h4>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full\">\n                  {artist.photos.map((photo, index) => (\n                    <div key={index} className=\"relative pb-[75%] overflow-hidden rounded-lg\">\n                      <img \n                        src={getImagePath(photo)} \n                        alt={`${event.artistName} - photo ${index + 1}`}\n                        className=\"absolute top-0 left-0 object-cover w-full h-full\"\n                        loading=\"lazy\"\n                        onError={(e) => {\n                          console.error(`Erreur de chargement de l'image: ${photo}`);\n                          e.currentTarget.style.display = 'none';\n                        }}\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {/* Affichage des vidéos si présentes */}\n            {event.type === \"concert\" && artist?.videos && artist.videos.length > 0 && (\n              <div className=\"mt-6\">\n                <h4 className=\"text-sm font-medium mb-3 text-[#4a5d94] flex items-center\">\n                  <span className=\"w-2 h-2 rounded-full bg-[#4a5d94] mr-2\"></span>\n                  Vidéos\n                </h4>\n                <div className=\"grid grid-cols-1 gap-4 w-full\">\n                  {artist.videos.map((videoUrl, index) => {\n                    // Déterminer le type de vidéo (YouTube, Vimeo, etc.)\n                    let embedUrl = videoUrl;\n                    \n                    // Traitement des URLs YouTube\n                    if (videoUrl.includes('youtube.com') || videoUrl.includes('youtu.be')) {\n                      // Extraire l'ID de la vidéo YouTube\n                      let videoId = '';\n                      \n                      if (videoUrl.includes('youtube.com/watch?v=')) {\n                        videoId = videoUrl.split('v=')[1];\n                        // Gérer les paramètres supplémentaires\n                        const ampersandPosition = videoId.indexOf('&');\n                        if (ampersandPosition !== -1) {\n                          videoId = videoId.substring(0, ampersandPosition);\n                        }\n                      } else if (videoUrl.includes('youtu.be/')) {\n                        videoId = videoUrl.split('youtu.be/')[1];\n                      }\n                      \n                      if (videoId) {\n                        embedUrl = `https://www.youtube.com/embed/${videoId}`;\n                      }\n                    }\n                    // Traitement des URLs Vimeo (à ajouter si nécessaire)\n                    // else if (videoUrl.includes('vimeo.com')) { ... }\n                    \n                    return (\n                      <div key={index} className=\"relative w-full pb-[56.25%] overflow-hidden rounded-lg\">\n                        <iframe\n                          src={embedUrl}\n                          title={`${event.artistName} - vidéo ${index + 1}`}\n                          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                          allowFullScreen\n                          className=\"absolute top-0 left-0 w-full h-full\"\n                          loading=\"lazy\"\n                        ></iframe>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n            \n            {/* Nous ne montrons plus l'adresse Instagram car le widget l'affiche déjà */}\n            \n            {/* Instagram Embed - Show actual Instagram feed */}\n            {artist && artist.instagram && artist.instagram.includes('instagram') && (() => {\n              // Extract handle robustly (handles trailing slashes and query params)\n              const extractInstagramHandle = (url: string): string => {\n                try {\n                  const u = new URL(url);\n                  const cleanedPath = u.pathname.replace(/\\/$/, \"\");\n                  const parts = cleanedPath.split('/').filter(Boolean);\n                  return parts.pop() || \"\";\n                } catch {\n                  const cleaned = url.split('?')[0].replace(/\\/$/, \"\");\n                  const parts = cleaned.split('/').filter(Boolean);\n                  return parts.pop() || \"\";\n                }\n              };\n              const handle = extractInstagramHandle(artist.instagram);\n              if (!handle) return null;\n              return (\n              <div className=\"border-t border-[#d8e3ff] pt-4 mt-4\">\n                {/* <h4 className=\"text-sm font-medium mb-3 text-[#4a5d94] flex items-center\">\n                  <span className=\"w-2 h-2 rounded-full bg-[#4a5d94] mr-2\"></span>\n                  Photos Instagram de l'artiste\n                </h4> */}\n                <div \n                  className=\"instagram-embed-container w-full overflow-hidden rounded-lg relative\" \n                  style={{\n                    paddingBottom: '100%',\n                    height: 0\n                  }}\n                >\n                  <iframe\n                    title={`Instagram feed de ${event.artistName}`}\n                    src={`https://www.instagram.com/${handle}/embed?hidecaption=1&header=0`}\n                    width=\"100%\"\n                    height=\"100%\"\n                    frameBorder=\"0\"\n                    scrolling=\"no\"\n                    allowtransparency=\"true\"\n                    loading=\"lazy\"\n                    style={{\n                      position: 'absolute',\n                      top: '-43px',\n                      left: 0,\n                      width: '100%',\n                      height: 'calc(100% + 43px)'\n                    }}\n                  ></iframe>\n                </div>\n              </div>\n              );\n            })()}\n            \n            <div className=\"flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-2 mt-6 border-t border-[#d8e3ff] pt-4\">\n              {source === \"program\" ? (\n                <Button \n                  className=\"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm\"\n                  onClick={navigateToMap}\n                >\n                  <MapPin className=\"h-4 w-4 mr-2\" />\n                  Voir sur la carte\n                </Button>\n              ) : (\n                <Button \n                  className=\"bg-[#ff7a45] hover:bg-[#ff9d6e] flex-1 text-xs sm:text-sm\"\n                  onClick={() => navigate(\"/program\")}\n                >\n                  <Calendar className=\"h-4 w-4 mr-2\" />\n                  Voir le programme\n                </Button>\n              )}\n              \n              <Button \n                variant=\"outline\"\n                className=\"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm\"\n                onClick={() => {\n                  if (event) {\n                    // Tracking: clic histoire du lieu\n                    trackInteraction(EventAction.CLICK, 'history_button', {\n                      from: 'event_details',\n                      event_id: event.id,\n                      location_id: event.locationId\n                    });\n                    // Tracking: vue de l'histoire du bâtiment (déclenchée depuis détails)\n                    analytics.trackBuildingHistoryView(event.locationId, 'from_event_details');\n                  }\n                  navigate('/location-history', { \n                    state: { \n                      selectedLocationId: event.locationId,\n                      fromEvent: true\n                    } \n                  });\n                  onClose();\n                }}\n              >\n                <Info className=\"h-4 w-4 mr-2\" />\n                Histoire du lieu\n              </Button>\n            </div>\n            \n            {/* Bouton pour ajouter au calendrier */}\n            <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3\">\n              <Button \n                variant=\"outline\"\n                className=\"border-[#4a5d94] text-[#4a5d94] flex-1 text-xs sm:text-sm min-w-0\"\n                onClick={handleAddToCalendar}\n                disabled={!calendarSupported}\n              >\n                {calendarSupported ? (\n                  <>\n                    <Calendar className=\"h-4 w-4 mr-2 shrink-0\" />\n                    <span className=\"truncate\">Ajouter au calendrier</span>\n                  </>\n                ) : (\n                  <>\n                    <Share2 className=\"h-4 w-4 mr-2 shrink-0\" />\n                    <span className=\"truncate\">Partager l'événement</span>\n                  </>\n                )}\n              </Button>\n              \n              <Button \n                variant=\"outline\"\n                className=\"border-[#ff7a45] text-[#ff7a45] flex-1 text-xs sm:text-sm min-w-0\"\n                onClick={handleContribute}\n              >\n                <Camera className=\"h-4 w-4 mr-2 shrink-0\" />\n                <span className=\"truncate\">Partager un souvenir</span>\n              </Button>\n            </div>\n            \n            <Button \n              className=\"w-full mt-3 border-[#8c9db5] text-[#8c9db5] text-xs sm:text-sm\"\n              variant=\"outline\"\n              onClick={onClose}\n            >\n              Retour\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { Event } from \"@/data/events\";\nimport { Location } from \"@/data/locations\";\nimport { createLogger } from \"@/utils/logger\";\n\n// Créer un logger pour le service de validation\nconst logger = createLogger('ValidationService');\n\n// Types pour les erreurs de validation\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: ValidationError[];\n}\n\n// Fonctions de validation pour les événements\nexport const validateEvent = (event: Event): ValidationResult => {\n  const errors: ValidationError[] = [];\n  \n  // Validation des champs obligatoires\n  if (!event.id) {\n    errors.push({ field: 'id', message: 'L\\'identifiant est obligatoire' });\n  } else if (!/^[a-z0-9-]+$/.test(event.id)) {\n    errors.push({ field: 'id', message: 'L\\'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets' });\n  }\n  \n  if (!event.title || event.title.trim() === '') {\n    errors.push({ field: 'title', message: 'Le titre est obligatoire' });\n  }\n  \n  if (!event.artistName || event.artistName.trim() === '') {\n    errors.push({ field: 'artistName', message: 'Le nom de l\\'artiste est obligatoire' });\n  }\n  \n  if (!event.type) {\n    errors.push({ field: 'type', message: 'Le type d\\'événement est obligatoire' });\n  } else if (event.type !== 'exposition' && event.type !== 'concert') {\n    errors.push({ field: 'type', message: 'Le type d\\'événement doit être \"exposition\" ou \"concert\"' });\n  }\n  \n  if (!event.artistBio || event.artistBio.trim() === '') {\n    errors.push({ field: 'artistBio', message: 'La biographie de l\\'artiste est obligatoire' });\n  }\n  \n  if (!event.time || event.time.trim() === '') {\n    errors.push({ field: 'time', message: 'L\\'heure est obligatoire' });\n  }\n  \n  if (!event.days || event.days.length === 0) {\n    errors.push({ field: 'days', message: 'Au moins un jour doit être sélectionné' });\n  } else {\n    for (const day of event.days) {\n      if (day !== 'samedi' && day !== 'dimanche') {\n        errors.push({ field: 'days', message: 'Les jours doivent être \"samedi\" ou \"dimanche\"' });\n        break;\n      }\n    }\n  }\n  \n  if (!event.locationName || event.locationName.trim() === '') {\n    errors.push({ field: 'locationName', message: 'Le nom du lieu est obligatoire' });\n  }\n  \n  \n  // Journalisation des résultats de validation\n  if (errors.length > 0) {\n    logger.warn(`Validation de l'événement ${event.id} échouée`, { errors });\n  } else {\n    logger.info(`Validation de l'événement ${event.id} réussie`);\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n// Fonctions de validation pour les lieux\nexport const validateLocation = (location: Location): ValidationResult => {\n  const errors: ValidationError[] = [];\n  \n  // Validation des champs obligatoires\n  if (!location.id) {\n    errors.push({ field: 'id', message: 'L\\'identifiant est obligatoire' });\n  } else if (!/^[a-z0-9-]+$/.test(location.id)) {\n    errors.push({ field: 'id', message: 'L\\'identifiant doit contenir uniquement des lettres minuscules, des chiffres et des tirets' });\n  }\n  \n  if (!location.name || location.name.trim() === '') {\n    errors.push({ field: 'name', message: 'Le nom est obligatoire' });\n  }\n  \n  if (!location.description || location.description.trim() === '') {\n    errors.push({ field: 'description', message: 'La description est obligatoire' });\n  }\n  \n  // La propriété events a été supprimée suite à la refactorisation\n  // Les événements sont maintenant liés aux lieux via leur propriété locationId\n  \n  // Validation des coordonnées\n  if (typeof location.x !== 'number') {\n    errors.push({ field: 'x', message: 'La coordonnée X doit être un nombre' });\n  }\n  \n  if (typeof location.y !== 'number') {\n    errors.push({ field: 'y', message: 'La coordonnée Y doit être un nombre' });\n  }\n  \n  // Journalisation des résultats de validation\n  if (errors.length > 0) {\n    logger.warn(`Validation du lieu ${location.id} échouée`, { errors });\n  } else {\n    logger.info(`Validation du lieu ${location.id} réussie`);\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n// Fonction utilitaire pour formater les erreurs de validation en message lisible\nexport const formatValidationErrors = (errors: ValidationError[]): string => {\n  return errors.map(error => `${error.field}: ${error.message}`).join('\\n');\n};\n","import { Event, events as initialEvents } from \"@/data/events\";\r\nimport { Location, locations as initialLocations } from \"@/data/locations\";\r\nimport { createLogger } from \"@/utils/logger\";\r\nimport { validateEvent, validateLocation, formatValidationErrors } from \"@/services/validationService\";\r\n\r\n// Créer un logger pour le service de données\r\nconst logger = createLogger('DataService');\r\n\r\n// Types pour les données gérées par le service\r\nexport interface DataState {\r\n  events: Event[];\r\n  locations: Location[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\n// État initial des données\r\nconst initialState: DataState = {\r\n  events: initialEvents,\r\n  locations: initialLocations,\r\n  isLoading: false,\r\n  error: null\r\n};\r\n\r\n// Singleton pour le service de données\r\nclass DataService {\r\n  private static instance: DataService;\r\n  private state: DataState;\r\n  private listeners: ((state: DataState) => void)[] = [];\r\n\r\n  private constructor() {\r\n    logger.info('Initialisation du service de données');\r\n    this.state = this.loadFromLocalStorage() || initialState;\r\n  }\r\n\r\n  public static getInstance(): DataService {\r\n    if (!DataService.instance) {\r\n      DataService.instance = new DataService();\r\n    }\r\n    return DataService.instance;\r\n  }\r\n\r\n  // Méthodes pour récupérer les données\r\n  public getState(): DataState {\r\n    return { ...this.state };\r\n  }\r\n\r\n  public getEvents(): Event[] {\r\n    return [...this.state.events];\r\n  }\r\n\r\n  public getLocations(): Location[] {\r\n    return [...this.state.locations];\r\n  }\r\n\r\n  public getEventById(id: string): Event | undefined {\r\n    return this.state.events.find(event => event.id === id);\r\n  }\r\n\r\n  public getLocationById(id: string): Location | undefined {\r\n    return this.state.locations.find(location => location.id === id);\r\n  }\r\n\r\n  public getEventsByLocationId(locationId: string): Event[] {\r\n    return this.state.events.filter(event => event.locationId === locationId);\r\n  }\r\n\r\n  // Méthodes pour mettre à jour les données\r\n  public updateEvent(updatedEvent: Event): { success: boolean; error?: string } {\r\n    logger.info(`Mise à jour de l'événement ${updatedEvent.id}`);\r\n    \r\n    // Valider l'événement avant la mise à jour\r\n    const validationResult = validateEvent(updatedEvent);\r\n    \r\n    if (!validationResult.isValid) {\r\n      const errorMessage = formatValidationErrors(validationResult.errors);\r\n      logger.error(`Validation échouée pour l'événement ${updatedEvent.id}`, errorMessage);\r\n      \r\n      this.setState({\r\n        ...this.state,\r\n        error: `Erreur de validation: ${errorMessage}`\r\n      });\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      events: this.state.events.map(event => \r\n        event.id === updatedEvent.id ? updatedEvent : event\r\n      ),\r\n      error: null\r\n    });\r\n    \r\n    return { success: true };\r\n  }\r\n\r\n  public updateLocation(updatedLocation: Location): { success: boolean; error?: string } {\r\n    logger.info(`Mise à jour du lieu ${updatedLocation.id}`);\r\n    \r\n    // Valider le lieu avant la mise à jour\r\n    const validationResult = validateLocation(updatedLocation);\r\n    \r\n    if (!validationResult.isValid) {\r\n      const errorMessage = formatValidationErrors(validationResult.errors);\r\n      logger.error(`Validation échouée pour le lieu ${updatedLocation.id}`, errorMessage);\r\n      \r\n      this.setState({\r\n        ...this.state,\r\n        error: `Erreur de validation: ${errorMessage}`\r\n      });\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      locations: this.state.locations.map(location => \r\n        location.id === updatedLocation.id ? updatedLocation : location\r\n      ),\r\n      error: null\r\n    });\r\n    \r\n    return { success: true };\r\n  }\r\n\r\n  public addEvent(newEvent: Event): { success: boolean; error?: string } {\r\n    logger.info(`Ajout d'un nouvel événement: ${newEvent.title}`);\r\n    \r\n    // Vérifier si l'ID existe déjà\r\n    if (this.state.events.some(event => event.id === newEvent.id)) {\r\n      const errorMessage = `Un événement avec l'ID ${newEvent.id} existe déjà`;\r\n      logger.error(errorMessage);\r\n      this.setState({\r\n        ...this.state,\r\n        error: errorMessage\r\n      });\r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    // Valider l'événement avant l'ajout\r\n    const validationResult = validateEvent(newEvent);\r\n    \r\n    if (!validationResult.isValid) {\r\n      const errorMessage = formatValidationErrors(validationResult.errors);\r\n      logger.error(`Validation échouée pour le nouvel événement`, errorMessage);\r\n      \r\n      this.setState({\r\n        ...this.state,\r\n        error: `Erreur de validation: ${errorMessage}`\r\n      });\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      events: [...this.state.events, newEvent],\r\n      error: null\r\n    });\r\n    \r\n    return { success: true };\r\n  }\r\n\r\n  public addLocation(newLocation: Location): { success: boolean; error?: string } {\r\n    logger.info(`Ajout d'un nouveau lieu: ${newLocation.name}`);\r\n    \r\n    // Vérifier si l'ID existe déjà\r\n    if (this.state.locations.some(location => location.id === newLocation.id)) {\r\n      const errorMessage = `Un lieu avec l'ID ${newLocation.id} existe déjà`;\r\n      logger.error(errorMessage);\r\n      this.setState({\r\n        ...this.state,\r\n        error: errorMessage\r\n      });\r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    // Valider le lieu avant l'ajout\r\n    const validationResult = validateLocation(newLocation);\r\n    \r\n    if (!validationResult.isValid) {\r\n      const errorMessage = formatValidationErrors(validationResult.errors);\r\n      logger.error(`Validation échouée pour le nouveau lieu`, errorMessage);\r\n      \r\n      this.setState({\r\n        ...this.state,\r\n        error: `Erreur de validation: ${errorMessage}`\r\n      });\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      locations: [...this.state.locations, newLocation],\r\n      error: null\r\n    });\r\n    \r\n    return { success: true };\r\n  }\r\n\r\n  public removeEvent(eventId: string): void {\r\n    logger.info(`Suppression de l'événement ${eventId}`);\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      events: this.state.events.filter(event => event.id !== eventId)\r\n    });\r\n  }\r\n\r\n  public removeLocation(locationId: string): void {\r\n    logger.info(`Suppression du lieu ${locationId}`);\r\n    \r\n    this.setState({\r\n      ...this.state,\r\n      locations: this.state.locations.filter(location => location.id !== locationId)\r\n    });\r\n  }\r\n\r\n  // Méthodes pour la persistance des données\r\n  public saveToLocalStorage(): void {\r\n    logger.info('Sauvegarde des données dans le localStorage');\r\n    \r\n    try {\r\n      // Log détaillé des données avant sauvegarde\r\n      logger.debug('Détails des données à sauvegarder', {\r\n        eventsCount: this.state.events.length,\r\n        locationsCount: this.state.locations.length,\r\n        firstLocation: this.state.locations[0] ? {\r\n          id: this.state.locations[0].id,\r\n          name: this.state.locations[0].name,\r\n          x: this.state.locations[0].x,\r\n          y: this.state.locations[0].y\r\n        } : 'Aucun lieu'\r\n      });\r\n      \r\n      // Sauvegarde des données\r\n      localStorage.setItem('events', JSON.stringify(this.state.events));\r\n      localStorage.setItem('locations', JSON.stringify(this.state.locations));\r\n      \r\n      // Vérification de la sauvegarde\r\n      const savedLocations = localStorage.getItem('locations');\r\n      if (savedLocations) {\r\n        const parsedLocations = JSON.parse(savedLocations);\r\n        logger.debug('Vérification de la sauvegarde', {\r\n          savedLocationsCount: parsedLocations.length,\r\n          firstSavedLocation: parsedLocations[0] ? {\r\n            id: parsedLocations[0].id,\r\n            name: parsedLocations[0].name,\r\n            x: parsedLocations[0].x,\r\n            y: parsedLocations[0].y\r\n          } : 'Aucun lieu'\r\n        });\r\n      }\r\n      \r\n      logger.info('Données sauvegardées avec succès dans le localStorage');\r\n    } catch (error) {\r\n      logger.error('Erreur lors de la sauvegarde des données', error);\r\n      this.setState({\r\n        ...this.state,\r\n        error: 'Erreur lors de la sauvegarde des données'\r\n      });\r\n    }\r\n  }\r\n\r\n  private loadFromLocalStorage(): DataState | null {\r\n    logger.info('Chargement des données depuis le localStorage');\r\n    \r\n    try {\r\n      // Récupérer les données du localStorage\r\n      const eventsData = localStorage.getItem('events');\r\n      const locationsData = localStorage.getItem('locations');\r\n      \r\n      // Log des données récupérées\r\n      logger.debug('Données récupérées du localStorage', {\r\n        eventsDataExists: !!eventsData,\r\n        locationsDataExists: !!locationsData,\r\n        eventsDataLength: eventsData ? eventsData.length : 0,\r\n        locationsDataLength: locationsData ? locationsData.length : 0\r\n      });\r\n      \r\n      if (!eventsData || !locationsData) {\r\n        logger.info('Aucune donnée trouvée dans le localStorage');\r\n        return null;\r\n      }\r\n      \r\n      // Parser les données\r\n      const parsedEvents = JSON.parse(eventsData);\r\n      const parsedLocations = JSON.parse(locationsData);\r\n      \r\n      // Log des données parsées\r\n      logger.debug('Données parsées du localStorage', {\r\n        eventsCount: parsedEvents.length,\r\n        locationsCount: parsedLocations.length,\r\n        firstLocation: parsedLocations[0] ? {\r\n          id: parsedLocations[0].id,\r\n          name: parsedLocations[0].name,\r\n          x: parsedLocations[0].x,\r\n          y: parsedLocations[0].y\r\n        } : 'Aucun lieu'\r\n      });\r\n      \r\n      logger.info('Données chargées avec succès depuis le localStorage');\r\n      \r\n      return {\r\n        events: parsedEvents,\r\n        locations: parsedLocations,\r\n        isLoading: false,\r\n        error: null\r\n      };\r\n    } catch (error) {\r\n      logger.error('Erreur lors du chargement des données', error);\r\n      return {\r\n        ...initialState,\r\n        error: 'Erreur lors du chargement des données'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Méthodes pour l'import/export des données\r\n  public exportData(): string {\r\n    logger.info('Export des données au format JSON');\r\n    \r\n    try {\r\n      const exportData = {\r\n        events: this.state.events,\r\n        locations: this.state.locations,\r\n        exportDate: new Date().toISOString()\r\n      };\r\n      \r\n      return JSON.stringify(exportData, null, 2);\r\n    } catch (error) {\r\n      logger.error('Erreur lors de l\\'export des données', error);\r\n      this.setState({\r\n        ...this.state,\r\n        error: 'Erreur lors de l\\'export des données'\r\n      });\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public importData(jsonData: string): boolean {\r\n    logger.info('Import des données depuis JSON');\r\n    \r\n    try {\r\n      const importedData = JSON.parse(jsonData);\r\n      \r\n      if (!importedData.events || !importedData.locations) {\r\n        logger.error('Format de données invalide');\r\n        this.setState({\r\n          ...this.state,\r\n          error: 'Format de données invalide'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      this.setState({\r\n        ...this.state,\r\n        events: importedData.events,\r\n        locations: importedData.locations,\r\n        error: null\r\n      });\r\n      \r\n      this.saveToLocalStorage();\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('Erreur lors de l\\'import des données', error);\r\n      this.setState({\r\n        ...this.state,\r\n        error: 'Erreur lors de l\\'import des données'\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Système d'abonnement pour notifier les composants des changements\r\n  public subscribe(listener: (state: DataState) => void): () => void {\r\n    this.listeners.push(listener);\r\n    \r\n    // Retourner une fonction pour se désabonner\r\n    return () => {\r\n      this.listeners = this.listeners.filter(l => l !== listener);\r\n    };\r\n  }\r\n\r\n  private setState(newState: DataState): void {\r\n    this.state = newState;\r\n    \r\n    // Notifier tous les abonnés\r\n    this.listeners.forEach(listener => listener(this.state));\r\n    \r\n    // Sauvegarder automatiquement les changements\r\n    this.saveToLocalStorage();\r\n  }\r\n}\r\n\r\n// Exporter l'instance unique du service\r\nexport const dataService = DataService.getInstance();\r\n\r\n// Fonction utilitaire pour récupérer un événement par ID\r\nexport const getEventById = (id: string): Event | undefined => {\r\n  return dataService.getEventById(id);\r\n};\r\n\r\n// Fonction utilitaire pour récupérer un lieu par ID\r\nexport const getLocationById = (id: string): Location | undefined => {\r\n  return dataService.getLocationById(id);\r\n};\r\n\r\n// Fonction utilitaire pour récupérer l'ID du lieu d'un événement\r\nexport const getLocationIdForEvent = (event: Event): string => {\r\n  return event.locationId;\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { dataService, DataState } from '@/services/dataService';\r\nimport { Event } from '@/data/events';\r\nimport { Location } from '@/data/locations';\r\nimport { createLogger } from '@/utils/logger';\r\n\r\n// Créer un logger pour le hook\r\nconst logger = createLogger('useData');\r\n\r\n/**\r\n * Hook personnalisé pour accéder et manipuler les données de l'application\r\n */\r\nexport const useData = () => {\r\n  const [state, setState] = useState<DataState>(dataService.getState());\r\n\r\n  useEffect(() => {\r\n    logger.info('Initialisation du hook useData');\r\n    \r\n    // S'abonner aux changements du service de données\r\n    const unsubscribe = dataService.subscribe(newState => {\r\n      setState(newState);\r\n    });\r\n    \r\n    // Se désabonner lors du démontage du composant\r\n    return () => {\r\n      logger.info('Nettoyage du hook useData');\r\n      unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  // Fonctions pour récupérer les données\r\n  const getEvents = (): Event[] => state.events;\r\n  const getLocations = (): Location[] => state.locations;\r\n  \r\n  const getEventById = (id: string): Event | undefined => \r\n    state.events.find(event => event.id === id);\r\n  \r\n  const getLocationById = (id: string): Location | undefined => \r\n    state.locations.find(location => location.id === id);\r\n  \r\n  const getEventsByLocationId = (locationId: string): Event[] => {\r\n    if (!locationId) return [];\r\n    \r\n    // Filtrer les événements qui ont ce locationId\r\n    return state.events.filter(event => event.locationId === locationId);\r\n  };\r\n\r\n  // Fonctions pour mettre à jour les données\r\n  const updateEvent = (updatedEvent: Event): { success: boolean; error?: string } => {\r\n    logger.info(`Mise à jour de l'événement ${updatedEvent.id}`);\r\n    return dataService.updateEvent(updatedEvent);\r\n  };\r\n\r\n  const updateLocation = (updatedLocation: Location): { success: boolean; error?: string } => {\r\n    logger.info(`Mise à jour du lieu ${updatedLocation.id}`);\r\n    return dataService.updateLocation(updatedLocation);\r\n  };\r\n\r\n  const addEvent = (newEvent: Event): { success: boolean; error?: string } => {\r\n    logger.info(`Ajout d'un nouvel événement: ${newEvent.title}`);\r\n    return dataService.addEvent(newEvent);\r\n  };\r\n\r\n  const addLocation = (newLocation: Location): { success: boolean; error?: string } => {\r\n    logger.info(`Ajout d'un nouveau lieu: ${newLocation.name}`);\r\n    return dataService.addLocation(newLocation);\r\n  };\r\n\r\n  const removeEvent = (eventId: string): void => {\r\n    logger.info(`Suppression de l'événement ${eventId}`);\r\n    dataService.removeEvent(eventId);\r\n  };\r\n\r\n  const removeLocation = (locationId: string): void => {\r\n    logger.info(`Suppression du lieu ${locationId}`);\r\n    dataService.removeLocation(locationId);\r\n  };\r\n\r\n  // Fonctions pour l'import/export des données\r\n  const exportData = (): string => {\r\n    logger.info('Export des données');\r\n    return dataService.exportData();\r\n  };\r\n\r\n  const importData = (jsonData: string): boolean => {\r\n    logger.info('Import des données');\r\n    return dataService.importData(jsonData);\r\n  };\r\n\r\n  return {\r\n    // État\r\n    events: state.events,\r\n    locations: state.locations,\r\n    isLoading: state.isLoading,\r\n    error: state.error,\r\n    \r\n    // Getters\r\n    getEvents,\r\n    getLocations,\r\n    getEventById,\r\n    getLocationById,\r\n    getEventsByLocationId,\r\n    \r\n    // Setters\r\n    updateEvent,\r\n    updateLocation,\r\n    addEvent,\r\n    addLocation,\r\n    removeEvent,\r\n    removeLocation,\r\n    \r\n    // Import/Export\r\n    exportData,\r\n    importData\r\n  };\r\n};\r\n\r\n/**\r\n * Hook spécialisé pour les événements uniquement\r\n */\r\nexport const useEvents = () => {\r\n  const { \r\n    events, \r\n    isLoading, \r\n    error, \r\n    getEventById, \r\n    getEventsByLocationId,\r\n    addEvent, \r\n    updateEvent, \r\n    removeEvent \r\n  } = useData();\r\n  \r\n  return {\r\n    events,\r\n    isLoading,\r\n    error,\r\n    getEventById,\r\n    getEventsByLocationId,\r\n    addEvent,\r\n    updateEvent,\r\n    removeEvent\r\n  };\r\n};\r\n\r\n/**\r\n * Hook spécialisé pour les lieux uniquement\r\n */\r\nexport const useLocations = () => {\r\n  const { \r\n    locations, \r\n    isLoading, \r\n    error, \r\n    getLocationById, \r\n    getEventsByLocationId,\r\n    addLocation, \r\n    updateLocation, \r\n    removeLocation \r\n  } = useData();\r\n  \r\n  return {\r\n    locations,\r\n    isLoading,\r\n    error,\r\n    getLocationById,\r\n    getEventsByLocationId,\r\n    addLocation,\r\n    updateLocation,\r\n    removeLocation\r\n  };\r\n};\r\n","import { useState, useEffect, useRef, useMemo } from \"react\";\nimport UserLocation, { GeoPosition } from \"@/components/UserLocation\";\nimport ProximityGuide from \"@/components/ProximityGuide\";\nimport NavigationGuideSimple from \"@/components/NavigationGuideSimple\";\nimport LocationActivator from \"@/components/LocationActivator\";\nimport AudioActivator from \"@/components/AudioActivator\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { createLogger } from \"@/utils/logger\";\nimport { MapComponent, MAP_WIDTH, MAP_HEIGHT } from \"@/components/MapComponent\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { SettingsToggle } from \"@/components/SettingsToggle\";\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport ArrowLeft from \"lucide-react/dist/esm/icons/arrow-left\";\nimport X from \"lucide-react/dist/esm/icons/x\";\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\nimport Info from \"lucide-react/dist/esm/icons/info\";\nimport Calendar from \"lucide-react/dist/esm/icons/calendar\";\nimport Bookmark from \"lucide-react/dist/esm/icons/bookmark\";\nimport BookmarkCheck from \"lucide-react/dist/esm/icons/bookmark-check\";\nimport Navigation from \"lucide-react/dist/esm/icons/navigation\";\nimport { VisitProgress } from \"@/components/VisitProgress\";\nimport { ShareButton } from \"@/components/ShareButton\";\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\nimport { EventDetails } from \"@/components/EventDetails\";\nimport { type Event, events, getLocationIdForEvent } from \"@/data/events\";\nimport { useData, useEvents, useLocations } from \"@/hooks/useData\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { saveEvent, removeSavedEvent, getSavedEvents } from \"../services/savedEvents\";\nimport { unlockAchievement, AchievementType } from \"../services/achievements\";\n// Créer un logger pour le composant Map\nconst logger = createLogger('Map');\n\ninterface MapProps {\n  fullScreen?: boolean;\n}\n\nconst Map = ({ fullScreen = false }: MapProps) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  // Utiliser les hooks pour accéder aux données centralisées\n  const { locations } = useLocations();\n  const { getEventById, getEventsByLocationId } = useEvents();\n  \n  // Utiliser directement les emplacements du service de données\n  const [mapLocations, setMapLocations] = useState(locations);\n  const [savedEventIds, setSavedEventIds] = useState<string[]>([]);\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  const [activeLocation, setActiveLocation] = useState<string | null>(null);\n  const [highlightedLocation, setHighlightedLocation] = useState<string | null>(null);\n  \n  // État pour la position de l'utilisateur sur la carte et GPS\n  const [userPosition, setUserPosition] = useState<{ x: number, y: number } | null>(null);\n  const [userGpsPosition, setUserGpsPosition] = useState<GeoPosition | null>(null);\n  const [mapScale, setMapScale] = useState<number>(1); // Stocker le facteur d'échelle de la carte\n  \n  // État pour la navigation\n  const [navigationTarget, setNavigationTarget] = useState<string | null>(null);\n  const [permissionDenied, setPermissionDenied] = useState(false);\n  const [showLocationFeatures, setShowLocationFeatures] = useState(false);\n  const [locationPermissionRequested, setLocationPermissionRequested] = useState(false);\n  \n  // Détection de l'environnement de développement désactivée pour les tests sur le terrain\n  const isDevelopmentEnvironment = useMemo(() => {\n    // Force à false pour les tests sur le terrain\n    return false;\n  }, []);\n\n  // Tracker les changements de zoom de la carte\n  useEffect(() => {\n    analytics.trackInteraction(EventAction.ZOOM, 'map', { scale: mapScale });\n  }, [mapScale]);\n  \n  // Initialiser les données des lieux en incluant l'état de visite\n  useEffect(() => {\n    // Page view + map load\n    analytics.trackPageView('/map', 'Carte');\n    analytics.trackMapInteraction(EventAction.MAP_LOAD, {\n      total_locations: locations.length\n    });\n\n    // Essayer de charger les lieux avec leur état de visite depuis le localStorage\n    const savedLocations = localStorage.getItem(\"mapLocations\");\n    if (savedLocations) {\n      try {\n        const parsedLocations = JSON.parse(savedLocations);\n        // Fusionner les données sauvegardées avec les données actuelles\n        const mergedLocations = locations.map(loc => {\n          const savedLoc = parsedLocations.find((saved: any) => saved.id === loc.id);\n          return savedLoc ? { ...loc, visited: savedLoc.visited } : loc;\n        });\n        setMapLocations(mergedLocations);\n      } catch (error) {\n        logger.error('Erreur lors du chargement des lieux visités', { error });\n      }\n    }\n  }, [locations]);\n  \n  // Charger les événements sauvegardés depuis le service\n  useEffect(() => {\n    const savedEventsData = getSavedEvents();\n    const savedIds = savedEventsData.map(event => event.id);\n    setSavedEventIds(savedIds);\n  }, [isDevelopmentEnvironment]);\n  \n  // Recharger les événements sauvegardés lorsqu'on ferme la vue détaillée d'un événement\n  useEffect(() => {\n    if (!selectedEvent) {\n      // Quand on ferme la vue détaillée, on recharge les événements sauvegardés\n      const savedEventsData = getSavedEvents();\n      const savedIds = savedEventsData.map(event => event.id);\n      setSavedEventIds(savedIds);\n    }\n  }, [selectedEvent]);\n  \n  // Mettre à jour les emplacements lorsque les données changent\n  useEffect(() => {\n    logger.info('Mise à jour des emplacements sur la carte depuis le service de données');\n    setMapLocations(locations);\n  }, [locations]);\n  \n  // Fonction pour sauvegarder/retirer un événement des favoris\n  const handleSaveEvent = (event: Event, e: React.MouseEvent) => {\n    e.stopPropagation();\n    logger.info(`Tentative de sauvegarde de l'événement: ${event.id} depuis la carte`);\n    \n    const isEventSaved = savedEventIds.includes(event.id);\n    \n    if (!isEventSaved) {\n      // Ajouter l'événement aux favoris en utilisant le service\n      saveEvent(event);\n      // Mettre à jour l'état local\n      setSavedEventIds([...savedEventIds, event.id]);\n      // Analytics: sauvegarde\n      analytics.trackContentInteraction(EventAction.SAVE, 'event', event.id, { source: 'map' });\n      \n      // toast({\n      //   title: \"Événement sauvegardé\",\n      //   description: `${event.title} a été ajouté à vos favoris.`,\n      // });\n      \n      logger.info(`Événement ${event.id} sauvegardé avec succès depuis la carte`);\n    } else {\n      // Retirer l'événement des favoris en utilisant le service\n      removeSavedEvent(event.id);\n      // Mettre à jour l'état local\n      setSavedEventIds(savedEventIds.filter(id => id !== event.id));\n      // Analytics: désactivation de la sauvegarde\n      analytics.trackContentInteraction(EventAction.UNSAVE, 'event', event.id, { source: 'map' });\n      \n      // toast({\n      //   title: \"Événement retiré\",\n      //   description: `${event.title} a été retiré de vos favoris.`,\n      // });\n      \n      logger.info(`Événement ${event.id} retiré avec succès depuis la carte`);\n    }\n  };\n  \n  // Effet pour mettre en évidence le lieu lorsqu'on arrive depuis l'histoire complète ou l'admin\n  useEffect(() => {\n    // Vérifier si on a un ID de lieu à mettre en évidence dans l'état de location\n    const highlightId = location.state?.highlightLocationId;\n    const fromEvent = location.state?.fromEvent === true;\n    const fromHistory = location.state?.fromHistory === true;\n    \n    // Vérifier si on a un ID de lieu à mettre en évidence dans les paramètres d'URL\n    const searchParams = new URLSearchParams(window.location.search);\n    const highlightParam = searchParams.get('highlight');\n    const locationParam = searchParams.get('location');\n    const eventParam = searchParams.get('event');\n    \n    // Utiliser l'ID du paramètre d'URL ou de l'état de location\n    const locationIdToHighlight = highlightParam || locationParam || highlightId || eventParam;\n    \n    // Si aucun lieu à mettre en évidence, ne rien faire\n    if (!locationIdToHighlight) {\n      return;\n    }\n    \n    logger.info(`Mise en évidence du lieu avec ID: ${locationIdToHighlight}`);\n    \n    // Convertir l'ID d'événement en ID de lieu si nécessaire\n    let locationIdToUse = locationIdToHighlight;\n    \n    // Si c'est un ID d'événement, le convertir en ID de lieu\n    if (eventParam && locationIdToHighlight === eventParam) {\n      const event = events.find(e => e.id === eventParam);\n      if (event) {\n        locationIdToUse = event.locationId;\n        logger.debug(`Conversion de l'ID d'événement ${eventParam} en ID de lieu ${locationIdToUse}`);\n        \n        // Ouvrir automatiquement les détails de l'événement\n        setTimeout(() => {\n          setSelectedEvent(event);\n          logger.info(`Ouverture automatique des détails de l'événement ${event.id}`);\n        }, 500); // Petit délai pour permettre à la carte de se charger d'abord\n      }\n    }\n    \n    // Trouver l'emplacement correspondant\n    let locationToHighlight = mapLocations.find(loc => loc.id === locationIdToUse);\n    \n    // Si le lieu n'est pas trouvé directement, essayer de trouver un lieu dont l'ID commence par locationIdToUse\n    // Cela permet de gérer les cas où on passe un ID partiel comme \"quai-turenne\" au lieu de \"quai-turenne-8\"\n    if (!locationToHighlight && locationIdToUse) {\n      locationToHighlight = mapLocations.find(loc => loc.id.startsWith(locationIdToUse));\n      if (locationToHighlight) {\n        logger.info(`Lieu avec ID exact ${locationIdToUse} non trouvé, mais un lieu correspondant a été trouvé: ${locationToHighlight.id}`);\n        locationIdToUse = locationToHighlight.id; // Mettre à jour l'ID avec celui qui a été trouvé\n      }\n    }\n    \n    if (locationToHighlight) {\n      logger.debug('Lieu trouvé pour mise en évidence', { \n        id: locationToHighlight.id, \n        name: locationToHighlight.name,\n        x: locationToHighlight.x,\n        y: locationToHighlight.y\n      });\n      \n      // Mettre en évidence le lieu (maintenant sans limite de temps)\n      // La mise en évidence restera active jusqu'à ce que l'utilisateur interagisse avec la carte\n      setHighlightedLocation(locationIdToUse);\n      \n      // N'ouvrir la programmation que si nous ne venons pas de l'historique ou des détails d'événement\n      if (!fromHistory && !fromEvent) {\n        setActiveLocation(locationIdToUse);\n      }\n      \n      logger.debug(`Mise en évidence permanente du lieu ${locationIdToUse} jusqu'à la prochaine action utilisateur`);\n    } else {\n      logger.warn(`Lieu avec ID ${locationIdToHighlight} non trouvé dans mapLocations`);\n    }\n  }, [location, mapLocations, events]);\n  \n  const handleLocationClick = (locationId: string) => {\n    logger.info(`Clic sur l'emplacement ${locationId}`);\n    \n    // Stocker l'ID du lieu actif pour la mise en évidence\n    setHighlightedLocation(locationId);\n    \n    // Définir le lieu comme actif pour afficher ses détails\n    setActiveLocation(locationId);\n    \n    // Trouver les événements associés à ce lieu en utilisant la propriété locationId des événements\n    const eventsData = getEventsByLocationId(locationId);\n    logger.debug(`Récupération des événements pour le lieu ${locationId} via getEventsByLocationId`, eventsData);\n    logger.debug(`Événements trouvés pour ${locationId}`, eventsData);\n    // Analytics: vue de lieu depuis la carte\n    const loc = mapLocations.find(l => l.id === locationId);\n    if (loc) {\n      analytics.trackBuildingView(loc.id, loc.name);\n    }\n    analytics.trackMapInteraction(EventAction.LOCATION_VIEW, {\n      building_id: locationId,\n      from: 'map'\n    });\n    \n    // Toujours afficher d'abord les informations du lieu, jamais directement l'événement\n    setSelectedEvent(null);\n  };\n\n  const markLocationAsVisited = (locationId: string, visited: boolean) => {\n    const updatedLocations = mapLocations.map(loc => \n      loc.id === locationId ? { ...loc, visited } : loc\n    );\n    \n    setMapLocations(updatedLocations);\n    localStorage.setItem('mapLocations', JSON.stringify(updatedLocations));\n    // Analytics: marquage visité\n    analytics.trackFeatureUse('location_mark_visited', { location_id: locationId, visited });\n    \n    // Conserver la mise en évidence du lieu même après l'avoir marqué comme visité\n    // Cela permet à l'utilisateur de voir le lieu mis en évidence lorsqu'il revient à la carte\n    setHighlightedLocation(locationId);\n    \n    // toast({\n    //   title: visited ? \"Lieu marqué comme visité\" : \"Lieu marqué comme non visité\",\n    //   description: `${mapLocations.find(l => l.id === locationId)?.name} a été mis à jour.`,\n    // });\n    \n    // Si le lieu est marqué comme visité, déclencher les achievements appropriés\n    if (visited) {\n      logger.info(`Lieu ${locationId} marqué comme visité, vérification des achievements`);\n      \n      // Vérifier si tous les lieux ont été visités\n      const allVisited = updatedLocations.every(loc => loc.visited);\n      if (allVisited) {\n        logger.info('Tous les lieux ont été visités, déblocage de l\\'achievement ALL_LOCATIONS_VISITED');\n        unlockAchievement(AchievementType.ALL_LOCATIONS_VISITED);\n      }\n    }\n  };\n\n  // Cette fonction n'est plus nécessaire car elle est gérée par le composant EventDetails\n\n  const getLocationEvents = (locationId: string) => {\n    // Utiliser la fonction getEventsByLocationId du hook useEvents\n    // qui a été mise à jour pour fonctionner avec la nouvelle structure de données\n    const eventsWithThisLocation = getEventsByLocationId(locationId);\n    \n    logger.debug(`Événements trouvés pour ${locationId} via getEventsByLocationId`, eventsWithThisLocation);\n    \n    return eventsWithThisLocation;\n  };\n\n  // Calculate visited locations count\n  const visitedCount = mapLocations.filter(loc => loc.visited).length;\n  const totalCount = mapLocations.length;\n\n  // Fonction pour réactiver la localisation si l'utilisateur a précédemment refusé\n  const reactivateLocation = () => {\n    localStorage.setItem('locationConsent', 'granted');\n    setShowLocationFeatures(true);\n    setLocationPermissionRequested(false); // Force la réinitialisation du processus de demande\n    setPermissionDenied(false); // Réinitialiser l'état de permission refusée\n  };\n\n  // Demander l'autorisation de localisation au chargement de la page\n  useEffect(() => {\n    // En environnement de développement, activer automatiquement la localisation sans demander\n    if (isDevelopmentEnvironment) {\n      setLocationPermissionRequested(true);\n      setPermissionDenied(false);\n      setShowLocationFeatures(true);\n      localStorage.setItem('locationConsent', 'granted');\n      logger.info('Environnement de développement détecté, localisation activée automatiquement');\n      return;\n    }\n    \n    // En production, réinitialiser les états pour forcer une nouvelle demande d'autorisation\n    localStorage.removeItem('locationConsent');\n    setLocationPermissionRequested(false);\n    setPermissionDenied(false);\n    setShowLocationFeatures(false);\n  }, []);\n\n  // Fonction pour mettre à jour la position de l'utilisateur\n  const handleLocationUpdate = (x: number, y: number, gpsPosition?: GeoPosition) => {\n    setUserPosition({ x, y });\n    if (gpsPosition) {\n      setUserGpsPosition(gpsPosition);\n    }\n    // Log seulement 0.1% des mises à jour pour réduire drastiquement le bruit dans la console\n    // if (process.env.NODE_ENV === 'development' && Math.random() < 0.001) {\n    //   logger.info('Position utilisateur mise à jour sur la carte', { x, y, gps: gpsPosition });\n    // }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white pb-20 overflow-x-hidden\">\n      <div className=\"max-w-screen-lg mx-auto px-4 pt-4\">\n        <header className=\"mb-2 flex items-center justify-between\">\n          <div className=\"w-1/4\"></div>\n          <h1 className=\"text-xl font-bold text-[#4a5d94] text-center\">Carte</h1>\n          <div className=\"flex items-center space-x-2 w-1/4 justify-end\">\n            <ShareButton \n              title=\"Parcours Île Feydeau\" \n              text=\"Découvrez mon parcours sur l'Île Feydeau à Nantes!\" \n            />\n          </div>\n        </header>\n        \n        {/* Légende sous le titre - toujours visible */}\n        <div className=\"flex items-center justify-center mb-4 text-sm text-[#4a5d94] fade-in\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center\">\n              <div className=\"flex items-center justify-center w-5 h-5 bg-[#4CAF50] rounded-full mr-1 text-white text-xs font-medium\">\n                {visitedCount}\n              </div>\n              <span className=\"text-xs\">{visitedCount > 1 ? 'Visités' : 'Visité'}</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"flex items-center justify-center w-5 h-5 bg-[#4a5d94] rounded-full mr-1 text-white text-xs font-medium\">\n                {totalCount - visitedCount}\n              </div>\n              <span className=\"text-xs\">À découvrir</span>\n            </div>\n          </div>\n        </div>\n        \n\n        \n        {/* Boutons d'activation de la localisation et du son */}\n        <div className=\"flex justify-center gap-2 my-2\">\n          <LocationActivator \n            onLocationEnabled={() => {\n              setPermissionDenied(false);\n              setShowLocationFeatures(true);\n              setLocationPermissionRequested(true);\n              logger.info('Localisation activée manuellement par l\\'utilisateur');\n              analytics.trackMapInteraction(EventAction.USER_LOCATION, { granted: true });\n            }}\n            onLocationDenied={() => {\n              setPermissionDenied(true);\n              setShowLocationFeatures(false);\n              logger.warn('Localisation refusée par l\\'utilisateur');\n              analytics.trackMapInteraction(EventAction.USER_LOCATION, { granted: false });\n            }}\n            onLocationDisabled={() => {\n              setShowLocationFeatures(false);\n              setNavigationTarget(null); // Arrêter la navigation en cours\n              logger.info('Localisation désactivée manuellement par l\\'utilisateur');\n              analytics.trackMapInteraction(EventAction.USER_LOCATION, { granted: false, disabled: true });\n            }}\n          />\n          \n          <AudioActivator \n            onAudioEnabled={() => {\n              logger.info('Son activé manuellement par l\\'utilisateur');\n              analytics.trackFeatureUse('map_sound_toggle', { enabled: true });\n            }}\n            onAudioDisabled={() => {\n              logger.info('Son désactivé par l\\'utilisateur');\n              analytics.trackFeatureUse('map_sound_toggle', { enabled: false });\n            }}\n          />\n        </div>\n        \n        <div className=\"relative\">\n          {/* Map container */}\n          <div className=\"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full\">\n            <div className=\"relative h-full\">\n              <MapComponent \n                locations={mapLocations}\n                activeLocation={activeLocation}\n                highlightedLocation={highlightedLocation}\n                onClick={(e) => {\n                  // Récupérer l'ID du lieu depuis l'élément cliqué\n                  const locationId = e.currentTarget.dataset.locationId || e.currentTarget.id.replace('location-', '');\n                  if (locationId) {\n                    handleLocationClick(locationId);\n                  } else {\n                    // Clic sur l'arrière-plan de la carte\n                    analytics.trackInteraction(EventAction.CLICK, 'map_background');\n                  }\n                }}\n                readOnly={false}\n                onScaleChange={setMapScale}\n                onPanStart={({ x, y }) => {\n                  analytics.trackMapInteraction(EventAction.DRAG, {\n                    phase: 'start',\n                    x: Math.round(x),\n                    y: Math.round(y)\n                  });\n                }}\n                onPanEnd={({ totalDx, totalDy, distance, durationMs }) => {\n                  analytics.trackMapInteraction(EventAction.DRAG, {\n                    total_dx: Math.round(totalDx),\n                    total_dy: Math.round(totalDy),\n                    distance: Math.round(distance),\n                    duration_ms: Math.round(durationMs)\n                  });\n                }}\n                userLocationProps={showLocationFeatures ? {\n                  onLocationUpdate: handleLocationUpdate,\n                  showNavigation: false,\n                  onPermissionChange: (denied) => setPermissionDenied(denied)\n                } : undefined}\n                navigationProps={navigationTarget && userPosition && userGpsPosition ? {\n                  userPosition: userGpsPosition,\n                  targetLocation: mapLocations.find(loc => loc.id === navigationTarget) || null,\n                  onClose: () => setNavigationTarget(null)\n                } : undefined}\n              />\n              \n            \n              {/* Message d'erreur et bouton pour réactiver la localisation - caché en mode développement */}\n              {permissionDenied && !isDevelopmentEnvironment && (\n                <div className=\"absolute top-0 left-0 right-0 z-50 bg-red-500 text-white p-2 text-center\">\n                  <div className=\"mb-2\">Accès refusé - Vous avez refusé l'accès à votre position.</div>\n                  <Button\n                    size=\"sm\"\n                    onClick={reactivateLocation}\n                    className=\"bg-white text-red-500 hover:bg-gray-100 text-xs\"\n                  >\n                    Activer la localisation\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* La légende a été déplacée sous le titre */}\n        </div>\n        \n\n        \n      \n      </div>\n      \n      {/* Removed visit confirmation dialog */}\n      \n      {/* Location details overlay */}\n      {activeLocation && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center\" onClick={() => setActiveLocation(null)}>\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"flex justify-between items-start mb-4\">\n              <h2 className=\"text-xl font-bold text-[#4a5d94]\">\n                {mapLocations.find(l => l.id === activeLocation)?.name}\n              </h2>\n              <Button variant=\"ghost\" size=\"sm\" className=\"-mt-2 -mr-2\" onClick={() => {\n                if (activeLocation) {\n                  analytics.trackInteraction(EventAction.BACK, 'location_details_close', { building_id: activeLocation });\n                }\n                setActiveLocation(null);\n              }}>\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            \n            <p className=\"text-sm text-[#8c9db5] mb-3\">\n              {/* Display location if available */}\n              Île Feydeau, Nantes\n            </p>\n            \n            <p className=\"text-sm text-[#4a5d94] mb-4\">\n              {mapLocations.find(l => l.id === activeLocation)?.description}\n            </p>\n            \n            <Button \n              size=\"sm\" \n              variant=\"outline\" \n              className=\"text-xs border-[#4a5d94] text-[#4a5d94]\"\n              onClick={() => {\n                // S'assurer que activeLocation est défini avant de naviguer\n                if (activeLocation) {\n                  logger.info(`Navigation vers l'histoire du lieu: ${activeLocation}`);\n                  const loc = mapLocations.find(l => l.id === activeLocation);\n                  if (loc) {\n                    analytics.trackBuildingHistoryView(loc.id, 'from_map');\n                  }\n                  analytics.trackInteraction(EventAction.CLICK, 'history_button', { from: 'map', building_id: activeLocation });\n                  navigate('/location-history', { \n                    state: { selectedLocationId: activeLocation }\n                  });\n                } else {\n                  logger.warn('Tentative de navigation vers l\\'histoire d\\'un lieu non sélectionné');\n                }\n              }}\n            >\n              <Info className=\"h-3 w-3 mr-1\" />\n              Histoire du lieu\n            </Button>\n            \n            <div className=\"mb-6\"></div>\n            \n            {getLocationEvents(activeLocation).length > 0 && (\n              <div className=\"mb-4\">\n                <h3 className=\"font-medium text-[#1a2138] mb-2\">Événements à cet endroit:</h3>\n                <div className=\"space-y-2 max-h-[40vh] overflow-y-auto pr-2 -mr-2\">\n                  {getLocationEvents(activeLocation).map((event) => (\n                    <div \n                      key={event.id} \n                      className={`bg-[#f0f5ff] p-3 rounded-lg cursor-pointer hover:bg-[#e0ebff] transition-colors ${savedEventIds.includes(event.id) ? 'border-l-4 border-l-[#ff7a45]' : ''}`}\n                    >\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\" onClick={() => {\n                          analytics.trackProgramInteraction(EventAction.EVENT_DETAILS, { event_id: event.id, source: 'map' });\n                          setSelectedEvent(event);\n                        }}>\n                          <p className=\"font-medium text-[#1a2138]\">{event.title}</p>\n                          <div className=\"flex items-center mt-1\">\n                            <Calendar className=\"h-3 w-3 mr-1 text-[#8c9db5]\" />\n                            <p className=\"text-xs text-[#8c9db5]\">{event.days.map(day => day === \"samedi\" ? \"Sa\" : \"Di\").join(\"/\")}, {event.time}</p>\n                          </div>\n                          <p className=\"text-xs text-[#4a5d94] mt-1\">{event.artistName}</p>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"p-1 h-auto\"\n                          onClick={(e) => handleSaveEvent(event, e)}\n                        >\n                          {savedEventIds.includes(event.id) ? (\n                            <BookmarkCheck className=\"h-5 w-5 text-[#ff7a45]\" />\n                          ) : (\n                            <Bookmark className=\"h-5 w-5 text-[#8c9db5]\" />\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-between mb-4\">\n              <Button\n                variant=\"outline\"\n                className=\"border-[#4a5d94] text-[#4a5d94] text-xs sm:text-sm px-1 sm:px-2 min-h-[44px]\"\n                onClick={() => activeLocation && markLocationAsVisited(activeLocation, !mapLocations.find(l => l.id === activeLocation)?.visited)}\n              >\n                {mapLocations.find(l => l.id === activeLocation)?.visited ? 'Non visité' : 'Marquer visité'}\n              </Button>\n              \n              <Button \n                className=\"bg-[#ff7a45] hover:bg-[#ff9d6e] text-sm min-h-[44px]\"\n                onClick={() => {\n                  // Fermer la vue détaillée mais conserver la mise en évidence du lieu\n                  // Le lieu reste en surbrillance grâce à highlightedLocation qui n'est pas réinitialisé\n                  if (activeLocation) {\n                    analytics.trackInteraction(EventAction.BACK, 'location_details_back', { building_id: activeLocation });\n                  }\n                  setActiveLocation(null);\n                }}\n              >\n                Retour à la carte\n              </Button>\n            </div>\n            \n            {/* Bouton de navigation - visible uniquement si la géolocalisation est active */}\n            {showLocationFeatures && (\n              <div className=\"mb-16\">\n                <Button \n                  variant=\"secondary\" \n                  className=\"w-full text-sm bg-[#f0f5ff] text-[#4a5d94] hover:bg-[#d8e3ff] min-h-[44px]\"\n                  onClick={() => {\n                    // Utiliser l'ID du lieu actif\n                    if (activeLocation) {\n                      setNavigationTarget(activeLocation);\n                      setActiveLocation(null); // Fermer la vue détaillée\n                      analytics.trackMapInteraction(EventAction.ROUTE_CALCULATE, {\n                        building_id: activeLocation,\n                        has_user_position: !!userPosition\n                      });\n                    }\n                  }}\n                >\n                  <Navigation className=\"h-4 w-4 mr-2\" />\n                  Me guider vers ce lieu\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      \n      {/* Event details using the unified component */}\n      <EventDetails \n        event={selectedEvent}\n        isOpen={!!selectedEvent}\n        onClose={() => {\n          setSelectedEvent(null);\n          setHighlightedLocation(null); // Réinitialiser la mise en évidence\n        }}\n        source=\"map\"\n      />\n      \n      {/* Boîte de dialogue de consentement de localisation retirée */}\n      \n      {/* Bottom Navigation */}\n      <BottomNavigation />\n      \n      {/* Guide de navigation (si un lieu est sélectionné pour la navigation) */}\n      {/* Le NavigationGuide est maintenant intégré dans le MapComponent */}\n\n    </div>\n  );\n};\n\nexport default Map;\n","import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport Music from \"lucide-react/dist/esm/icons/music\";\r\nimport ImageIcon from \"lucide-react/dist/esm/icons/image\";\r\n\r\ninterface EventFilterProps {\r\n  onFilterChange: (filter: string) => void;\r\n  currentFilter: string;\r\n}\r\n\r\nexport function EventFilter({ onFilterChange, currentFilter }: EventFilterProps) {\r\n  return (\r\n    <div className=\"flex space-x-2 mb-4\">\r\n      <Button\r\n        variant={currentFilter === \"all\" ? \"default\" : \"outline\"}\r\n        size=\"sm\"\r\n        onClick={() => onFilterChange(\"all\")}\r\n        className={currentFilter === \"all\" ? \"bg-[#ff7a45] hover:bg-[#ff9d6e]\" : \"\"}\r\n      >\r\n        Tous\r\n      </Button>\r\n      <Button\r\n        variant={currentFilter === \"exposition\" ? \"default\" : \"outline\"}\r\n        size=\"sm\"\r\n        onClick={() => onFilterChange(\"exposition\")}\r\n        className={currentFilter === \"exposition\" ? \"bg-[#ff7a45] hover:bg-[#ff9d6e]\" : \"\"}\r\n      >\r\n        <ImageIcon className=\"h-4 w-4 mr-2\" />\r\n        Expositions\r\n      </Button>\r\n      <Button\r\n        variant={currentFilter === \"concert\" ? \"default\" : \"outline\"}\r\n        size=\"sm\"\r\n        onClick={() => onFilterChange(\"concert\")}\r\n        className={currentFilter === \"concert\" ? \"bg-[#ff7a45] hover:bg-[#ff9d6e]\" : \"\"}\r\n      >\r\n        <Music className=\"h-4 w-4 mr-2\" />\r\n        Concerts\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n","import { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Event } from \"@/data/events\";\r\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\r\nimport Bookmark from \"lucide-react/dist/esm/icons/bookmark\";\r\nimport BookmarkCheck from \"lucide-react/dist/esm/icons/bookmark-check\";\r\nimport Clock from \"lucide-react/dist/esm/icons/clock\";\r\nimport { TruncatedText } from \"@/components/TruncatedText\";\r\n\r\nimport React from \"react\";\r\n\r\nexport interface EventCardProps {\r\n  event: Event;\r\n  isSaved: boolean;\r\n  onEventClick: () => void;\r\n  onSaveClick: (e: React.MouseEvent) => void;\r\n}\r\n\r\nexport const EventCard = ({ event, isSaved, onEventClick, onSaveClick }: EventCardProps) => {\r\n  return (\r\n    <Card \r\n      className=\"shadow-md border-0 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1\"\r\n      onClick={onEventClick}\r\n    >\r\n      <div className={`h-1 ${event.type === \"exposition\" ? \"bg-[#4a5d94]\" : \"bg-[#ff7a45]\"}`} />\r\n      <CardContent className=\"p-4\">\r\n        <div className=\"flex justify-between items-start\">\r\n          <div>\r\n            <h3 className=\"font-medium text-[#1a2138]\">\r\n              <TruncatedText \r\n                text={event.title} \r\n                maxLength={25} \r\n                className=\"font-medium text-[#1a2138]\"\r\n              />\r\n            </h3>\r\n            {/* N'afficher le nom de l'artiste que pour les expositions */}\r\n            {event.type === \"exposition\" && (\r\n              <p className=\"text-sm text-[#4a5d94]\">\r\n                <TruncatedText \r\n                  text={event.artistName} \r\n                  maxLength={20} \r\n                  className=\"text-sm text-[#4a5d94]\"\r\n                />\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-col space-y-1 mt-1\">\r\n              {/* Horaires avec icône d'horloge */}\r\n              <div className=\"flex items-center\">\r\n                <Clock className=\"h-3 w-3 mr-1 text-[#ff7a45]\" />\r\n                <p className=\"text-xs font-medium text-[#ff7a45]\">\r\n                  {event.time}\r\n                </p>\r\n              </div>\r\n              \r\n              {/* Lieu avec icône de localisation */}\r\n              <div className=\"flex items-center\">\r\n                <MapPin className=\"h-3 w-3 mr-1 text-[#8c9db5]\" />\r\n                <p className=\"text-xs text-[#8c9db5]\">\r\n                  <TruncatedText \r\n                    text={event.locationName}\r\n                    maxLength={30} \r\n                    className=\"text-xs text-[#8c9db5]\"\r\n                  />\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex flex-col items-end space-y-1\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"p-1 h-auto\"\r\n              onClick={onSaveClick}\r\n            >\r\n              {isSaved ? (\r\n                <BookmarkCheck className=\"h-5 w-5 text-[#ff7a45]\" />\r\n              ) : (\r\n                <Bookmark className=\"h-5 w-5 text-[#8c9db5]\" />\r\n              )}\r\n            </Button>\r\n            <span className={`text-xs px-2 py-1 rounded-full ${\r\n              event.type === \"exposition\" \r\n                ? \"bg-[#e0ebff] text-[#4a5d94]\" \r\n                : \"bg-[#fff2ee] text-[#ff7a45]\"\r\n            }`}>\r\n              {event.type === \"exposition\" ? \"Exposition\" : \"Concert\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { analytics, EventAction, trackInteraction } from \"@/services/firebaseAnalytics\";\nimport ArrowLeft from \"lucide-react/dist/esm/icons/arrow-left\";\nimport Calendar from \"lucide-react/dist/esm/icons/calendar\";\nimport { useNavigate } from \"react-router-dom\";\nimport { events, getEventsByDay, type Event } from \"@/data/events\";\nimport { EventFilter } from \"@/components/EventFilter\";\nimport { ShareButton } from \"@/components/ShareButton\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\nimport { EventDetails } from \"@/components/EventDetails\";\nimport { EventCard } from \"@/components/EventCard\";\nimport { getSavedEvents, saveEvent, removeSavedEvent } from \"../services/savedEvents\";\n\nconst Program = () => {\n  const navigate = useNavigate();\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  const [currentFilter, setCurrentFilter] = useState<string>(\"all\");\n  const [savedEventIds, setSavedEventIds] = useState<string[]>([]);\n  \n  // Page view\n  useEffect(() => {\n    analytics.trackPageView('/program', 'Programme');\n  }, []);\n\n  useEffect(() => {\n    // Charger les événements sauvegardés depuis le service\n    const savedEvents = getSavedEvents();\n    // Extraire les IDs des événements sauvegardés\n    const savedIds = savedEvents.map(event => event.id);\n    setSavedEventIds(savedIds);\n  }, []);\n\n  const handleSaveEvent = (event: Event, e: React.MouseEvent) => {\n    e.stopPropagation();\n    console.log(`[Program] Tentative de sauvegarde de l'événement: ${event.id}`);\n    \n    const isEventSaved = savedEventIds.includes(event.id);\n    \n    if (!isEventSaved) {\n      // Ajouter l'événement aux favoris en utilisant le service\n      saveEvent(event);\n      // Mettre à jour l'état local\n      setSavedEventIds([...savedEventIds, event.id]);\n      \n      // toast({\n      //   title: \"Événement sauvegardé\",\n      //   description: `${event.title} a été ajouté à vos favoris.`,\n      // });\n      \n      console.log(`[Program] Événement ${event.id} sauvegardé avec succès`);\n      // Analytics: save\n      analytics.trackContentInteraction(EventAction.SAVE, 'event', event.id, {\n        event_title: event.title,\n        source: 'program'\n      });\n    } else {\n      // Retirer l'événement des favoris en utilisant le service\n      removeSavedEvent(event.id);\n      // Mettre à jour l'état local\n      setSavedEventIds(savedEventIds.filter(id => id !== event.id));\n      \n      // toast({\n      //   title: \"Événement retiré\",\n      //   description: `${event.title} a été retiré de vos favoris.`,\n      // });\n      \n      console.log(`[Program] Événement ${event.id} retiré avec succès`);\n      // Analytics: unsave\n      analytics.trackContentInteraction(EventAction.UNSAVE, 'event', event.id, {\n        event_title: event.title,\n        source: 'program'\n      });\n    }\n  };\n  \n  const handleViewOnMap = (event: Event) => {\n    // Tracking: view on map from program\n    trackInteraction(EventAction.CLICK, 'program_view_on_map', { event_id: event.id });\n    navigate(`/map?location=${event.id}`);\n  };\n\n  // Track filter changes\n  const handleFilterChange = (filter: string) => {\n    setCurrentFilter(filter);\n    analytics.trackProgramInteraction(EventAction.FILTER, { filter });\n  };\n  \n  const filterEvents = (events: Event[], filter: string) => {\n    if (filter === \"all\") return events;\n    return events.filter(event => event.type === filter);\n  };\n  \n  // Parse \"HHhMM - HHhMM\" and return minutes since midnight for the start time\n  const startMinutes = (timeRange: string): number => {\n    // Examples: \"14h00 - 14h30\", \"12h00 - 19h00\"\n    const match = timeRange.match(/(\\d{1,2})h(\\d{2})/);\n    if (!match) return Number.MAX_SAFE_INTEGER; // place unknowns at the end\n    const h = parseInt(match[1], 10);\n    const m = parseInt(match[2], 10);\n    return h * 60 + m;\n  };\n\n  const sortByStartTime = (items: Event[]): Event[] => {\n    return [...items].sort((a, b) => startMinutes(a.time) - startMinutes(b.time));\n  };\n  \n  return (\n    <div className=\"min-h-screen app-gradient pb-20\">\n      <div className=\"max-w-md mx-auto px-4 pt-4\">\n        <header className=\"mb-2 flex items-center justify-between\">\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate(\"/\")}>\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour\n          </Button>\n          <h1 className=\"text-xl font-bold text-[#ff7a45]\">Programme</h1>\n          <div className=\"flex items-center space-x-2\">\n  <Button\n    variant=\"ghost\"\n    size=\"icon\"\n    aria-label=\"Ajouter au calendrier\"\n    className=\"flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 text-[#4a5d94] transition-all duration-200 hover:shadow-sm\"\n    onClick={async () => {\n      try {\n        analytics.trackProgramCTA('add_to_calendar');\n        const { addToCalendar } = await import(\"../services/calendarService\");\n        const allEvents = events;\n        // Ajoute tous les événements du programme au calendrier\n        let successCount = 0;\n        let errorCount = 0;\n        for (const event of allEvents) {\n          const result = await addToCalendar(event);\n          if (result.success) {\n            successCount++;\n          } else {\n            errorCount++;\n          }\n        }\n        if (successCount > 0) {\n          toast({\n            title: \"Événements ajoutés au calendrier\",\n            description: `${successCount} événement(s) ajouté(s) avec succès.`,\n          });\n        }\n        if (errorCount > 0) {\n          toast({\n            title: \"Erreur lors de l'ajout au calendrier\",\n            description: `${errorCount} événement(s) n'ont pas pu être ajoutés.`,\n            variant: \"destructive\",\n          });\n          analytics.trackError(EventAction.API_ERROR, 'program_add_all_to_calendar_errors', { error_count: errorCount });\n        }\n      } catch (error) {\n        toast({\n          title: \"Erreur inattendue\",\n          description: error instanceof Error ? error.message : \"Impossible d'ajouter au calendrier.\",\n          variant: \"destructive\",\n        });\n        analytics.trackError(EventAction.API_ERROR, 'program_add_all_to_calendar_exception', { message: (error as Error)?.message });\n      }\n    }}\n  >\n    <Calendar className=\"h-5 w-5\" />\n  </Button>\n</div>\n        </header>\n        \n        {/* Event type filter */}\n        <div className=\"mb-4 fade-in\">\n          <EventFilter onFilterChange={handleFilterChange} currentFilter={currentFilter} />\n        </div>\n        \n        <div className=\"text-center mb-4 text-sm text-[#ff7a45] slide-in-bottom\">\n        </div>\n        \n        <Tabs defaultValue=\"samedi\" className=\"w-full\">\n          <TabsList className=\"grid grid-cols-2 mb-4 bg-[#e0ebff]\">\n            <TabsTrigger \n              value=\"samedi\" \n              className=\"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white\"\n            >\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              Samedi\n            </TabsTrigger>\n            <TabsTrigger \n              value=\"dimanche\"\n              className=\"data-[state=active]:bg-[#ff7a45] data-[state=active]:text-white\"\n            >\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              Dimanche\n            </TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"samedi\" className=\"space-y-4\">\n            {sortByStartTime(filterEvents(getEventsByDay(\"samedi\"), currentFilter)).map((event, index) => {\n                const eventKey = `samedi-${event.id}-${index}`;\n                return (\n                  <div key={eventKey}>\n                    <EventCard\n                      event={event}\n                      isSaved={savedEventIds.includes(event.id)}\n                      onEventClick={() => {\n                        setSelectedEvent(event);\n                        // Analytics: event view from list\n                        analytics.trackConcertView(event.id, event.title);\n                      }}\n                      onSaveClick={(e) => handleSaveEvent(event, e)}\n                    />\n                  </div>\n                );\n              })}\n              \n            {filterEvents(getEventsByDay(\"samedi\"), currentFilter).length === 0 && (\n              <div className=\"text-center py-8 text-[#8c9db5]\">\n                <p>Aucun événement ne correspond à ce filtre pour ce jour.</p>\n              </div>\n            )}\n          </TabsContent>\n          \n          <TabsContent value=\"dimanche\" className=\"space-y-4\">\n            {sortByStartTime(filterEvents(getEventsByDay(\"dimanche\"), currentFilter)).map((event, index) => {\n                const eventKey = `dimanche-${event.id}-${index}`;\n                return (\n                  <div key={eventKey}>\n                    <EventCard\n                      event={event}\n                      isSaved={savedEventIds.includes(event.id)}\n                      onEventClick={() => {\n                        setSelectedEvent(event);\n                        // Analytics: event view from list\n                        analytics.trackConcertView(event.id, event.title);\n                      }}\n                      onSaveClick={(e) => handleSaveEvent(event, e)}\n                    />\n                  </div>\n                );\n              })}\n              \n            {filterEvents(getEventsByDay(\"dimanche\"), currentFilter).length === 0 && (\n              <div className=\"text-center py-8 text-[#8c9db5]\">\n                <p>Aucun événement ne correspond à ce filtre pour ce jour.</p>\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Utiliser le composant EventDetails unifié */}\n        <EventDetails \n          event={selectedEvent}\n          isOpen={!!selectedEvent}\n          onClose={() => setSelectedEvent(null)}\r\n          source=\"program\"\r\n        />\r\n      </div>\r\n      \r\n      {/* Bottom Navigation */}\r\n      <BottomNavigation />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Program;\r\n","\r\n// About the association\r\nexport type AboutInfo = {\r\n  history: string;\r\n  mission: string;\r\n  neighborhood: string;\r\n  event: string;\r\n};\r\n\r\nexport const aboutInfo: AboutInfo = {\r\n  history: \"Notre association est née de la volonté commune des habitants de ce quartier historique de Nantes, situé sur ce qui était autrefois une île. Fondée en 2017, elle regroupe 20 passionnés déterminés à préserver et partager le patrimoine unique de ce lieu.\",\r\n  \r\n  mission: \"Nous œuvrons pour la préservation de notre patrimoine architectural et culturel, tout en favorisant l'accès à l'art et à la culture pour tous. Chaque année, le troisième week-end de septembre, nous ouvrons nos portes au public pour partager ce lieu exceptionnel à travers des expositions et concerts.\",\r\n  \r\n  neighborhood: \"Situé au cœur de Nantes, notre quartier était autrefois une île entourée par les bras de la Loire. Au fil des siècles, l'urbanisation a transformé le paysage, mais nous conservons précieusement l'héritage architectural et l'esprit communautaire qui caractérisent ce lieu si particulier.\",\r\n  \r\n  event: \"Notre événement annuel transforme le quartier en une galerie d'art vivante où les visiteurs peuvent découvrir des expositions dans les halls historiques et profiter de concerts dans notre cour intérieure. C'est l'occasion de rencontrer des artistes locaux et de vivre une expérience culturelle unique dans un cadre exceptionnel.\"\r\n};\r\n","// Association information\r\nexport type AssociationInfo = {\r\n  name: string;\r\n  shortName: string;\r\n  description: string;\r\n  yearFounded: number;\r\n  memberCount: number;\r\n  eventWeekend: string;\r\n  contactEmail: string;\r\n  instagram: string;\r\n};\r\n\r\nexport const associationInfo: AssociationInfo = {\r\n  name: \"Collectif Ile Feydeau\",\r\n  shortName: \"FEYDEAU\",\r\n  description: \"Association culturelle mettant en valeur le patrimoine historique d'un ancien quartier insulaire de Nantes.\",\r\n  yearFounded: 2017,\r\n  memberCount: 20,\r\n  eventWeekend: \"Troisième week-end de septembre\",\r\n  contactEmail: \"collectif.ile.feydeau@gmail.com\",\r\n  instagram: \"https://www.instagram.com/collectif_ile_feydeau\"\r\n};\r\n","// Team members data\r\nexport type TeamMember = {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  description: string;\r\n  image?: string;\r\n};\r\n\r\nexport const teamMembers: TeamMember[] = [\r\n  {\r\n    id: \"member1\",\r\n    name: \"Julien Fritsch\",\r\n    role: \"Président\",\r\n    description: \"Organisateur du projet.\"\r\n  },\r\n  {\r\n    id: \"member2\",\r\n    name: \"Philippe Châtel\",\r\n    role: \"Trésorier\",\r\n    description: \"Coordonne les communications et partenariats artistiques.\"\r\n  },\r\n  {\r\n    id: \"member3\",\r\n    name: \"Edwige Filleux\",\r\n    role: \"Secrétaire\",\r\n    description: \"Fondation de l'association.\"\r\n  }\r\n];\r\n","import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ArrowLeft, Users, Heart } from \"lucide-react\";\nimport Instagram from \"lucide-react/dist/esm/icons/instagram\";\nimport Twitter from \"lucide-react/dist/esm/icons/twitter\";\nimport { useNavigate } from \"react-router-dom\";\nimport { aboutInfo } from \"@/data/about\";\nimport { associationInfo } from \"@/data/association\";\nimport { teamMembers } from \"@/data/team\";\nimport { ShareButton } from \"@/components/ShareButton\";\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\nimport { getImagePath } from \"@/utils/imagePaths\";\n\nconst About = () => {\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden\">\n      <div className=\"max-w-screen-lg mx-auto\">\n        <header className=\"mb-2 flex items-center justify-between\">\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate(\"/map\")}> \n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour\n          </Button>\n          <h1 className=\"text-xl font-bold text-[#4a5d94]\">À propos</h1>\n          <ShareButton \n            title=\"À propos du Collectif Île Feydeau\" \n            text=\"Découvrez l'histoire et la mission du Collectif Île Feydeau à Nantes!\" \n          />\n        </header>\n        \n        <Tabs defaultValue=\"association\" className=\"w-full mb-6\">\n          <TabsList className=\"grid grid-cols-4 mb-4\">\n            <TabsTrigger value=\"association\">Association</TabsTrigger>\n            <TabsTrigger value=\"history\">Histoire</TabsTrigger>\n            <TabsTrigger value=\"team\">Équipes</TabsTrigger>\n            <TabsTrigger value=\"support\">Nous aider</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"history\" className=\"space-y-4\">\n            <div className=\"bg-white rounded-lg p-6 shadow-md\">\n              <h2 className=\"text-lg font-semibold mb-3\">Histoire de l'Île Feydeau</h2>\n              <p className=\"text-gray-700 mb-4\">\n                L'Île Feydeau est un quartier historique de Nantes, construit au XVIIIe siècle sur une île de la Loire. \n                Ce lotissement, conçu par l'architecte Jean-Baptiste Ceineray, est un exemple remarquable \n                d'architecture néoclassique et témoigne de la prospérité des armateurs et négociants nantais de l'époque.\n              </p>\n              \n              <div className=\"mt-4 flex justify-center\">\n                <Button \n                  variant=\"outline\" \n                  className=\"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white\"\n                  onClick={() => navigate(\"/location-history\")}\n                >\n                  Voir l'histoire détaillée des lieux \n                </Button>\n              </div>\n\n              \n              <div className=\"mt-8\"></div>\n              <h2 className=\"text-lg font-semibold mb-3\">Architecture unique</h2>\n              <p className=\"text-gray-700 mb-4\">\n                Les immeubles de l'Île Feydeau se caractérisent par leurs façades ornées de mascarons, \n                leurs balcons en fer forgé et leur soubassement en granit. L'affaissement des bâtiments, \n                dû à la nature marécageuse du sol, confère à l'ensemble une silhouette légèrement penchée, \n                caractéristique de ce quartier.\n              </p>\n              \n\n              \n              <h2 className=\"text-lg font-semibold mb-3\">Patrimoine préservé</h2>\n              <p className=\"text-gray-700 mb-4\">\n                Aujourd'hui, l'Île Feydeau n'est plus une île suite aux travaux de comblement de la Loire, \n                mais son patrimoine architectural est préservé et valorisé. De nombreux immeubles sont classés \n                ou inscrits aux Monuments Historiques, témoignant de l'importance de ce quartier dans l'histoire de Nantes.\n              </p>\n              \n\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"association\" className=\"space-y-4\">\n          <div className=\"flex flex-col md:flex-row items-center justify-center md:space-x-4 space-y-3 md:space-y-0 mt-4 mb-2 p-4 bg-white rounded-lg shadow-md\">\n                <a href=\"https://www.instagram.com/ilefeydeau/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center text-gray-700 hover:text-[#E1306C] transition-colors w-full md:w-auto justify-center\">\n                  <Instagram className=\"h-5 w-5 mr-2\" />\n                  <span>@ilefeydeau</span>\n                </a>\n                <a href=\"https://x.com/Ilefeydeau\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center text-gray-700 hover:text-[#1DA1F2] transition-colors w-full md:w-auto justify-center\">\n                  <Twitter className=\"h-5 w-5 mr-2\" />\n                  <span>@Ilefeydeau</span>\n                </a>\n                <a href={`mailto:${associationInfo.contactEmail}`} className=\"flex items-center text-gray-700 hover:text-[#4285F4] transition-colors w-full md:w-auto justify-center break-all\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"h-5 w-5 mr-2 flex-shrink-0\">\n                    <rect width=\"20\" height=\"16\" x=\"2\" y=\"4\" rx=\"2\" />\n                    <path d=\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\" />\n                  </svg>\n                  <span className=\"truncate\">{associationInfo.contactEmail}</span>\n                </a>\n              </div>\n            <div className=\"bg-white rounded-lg p-6 shadow-md mb-4\">\n              <h2 className=\"text-lg font-semibold mb-3\">Découvrez notre collectif en vidéo</h2>\n              <div className=\"aspect-video w-full mb-4 bg-gray-100 rounded overflow-hidden\">\n                <video \n                  className=\"w-full h-full object-contain\" \n                  controls \n                  playsInline\n                  poster={getImagePath(\"intro-video-image.png\")}\n                  src={getImagePath(\"/video/intro-video.mp4\")}\n                  aria-label=\"Vidéo de présentation du Collectif Île Feydeau\"\n                />\n              </div>\n              <p className=\"text-gray-700 text-sm italic text-center\">\n                Vidéo d'introduction du Collectif Île Feydeau (45 secondes)\n              </p>\n            </div>\n\n             \n            <div className=\"bg-white rounded-lg p-6 shadow-md\">\n              \n              <h2 className=\"text-lg font-semibold mb-3\">Notre histoire</h2>\n              <p className=\"text-gray-700 mb-4\">\n                {aboutInfo.history}\n              </p>\n              \n              <h2 className=\"text-lg font-semibold mb-3\">Notre mission</h2>\n              <p className=\"text-gray-700 mb-4\">\n                {aboutInfo.mission}\n              </p>\n              \n              <h2 className=\"text-lg font-semibold mb-3\">Notre quartier</h2>\n              <p className=\"text-gray-700 mb-4\">\n                {aboutInfo.neighborhood}\n              </p>\n              \n              <h2 className=\"text-lg font-semibold mb-3\">Événement annuel</h2>\n              <p className=\"text-gray-700 mb-4\">\n                {aboutInfo.event}\n              </p>\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"team\" className=\"space-y-4\">\n            <div className=\"bg-white rounded-lg p-6 shadow-md mb-4\">\n              <p className=\"text-gray-700\">\n                Notre association compte {associationInfo.memberCount} membres actifs, tous habitants du quartier et passionnés \n                par sa valorisation. Voici quelques-uns des membres du bureau qui coordonnent nos actions.\n              </p>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {teamMembers.map((member) => (\n                <Card key={member.id}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"min-w-[48px] w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center overflow-hidden\">\n                        <span className=\"text-purple-600 font-semibold text-center\">\n                          {member.name.split(' ').map(n => n[0]).join('')}\n                        </span>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-medium truncate\">{member.name}</h3>\n                        <p className=\"text-sm text-purple-600\">{member.role}</p>\n                        <p className=\"text-sm text-gray-500 mt-1 line-clamp-2\">{member.description}</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"support\" className=\"space-y-4\">\n            <div className=\"bg-white rounded-lg p-6 shadow-md mb-4\">\n              <h2 className=\"text-lg font-semibold mb-3\">Comment nous aider ?</h2>\n              <p className=\"text-gray-700 mb-4\">\n                Plusieurs façons s'offrent à vous pour soutenir notre association et contribuer \n                à la préservation et l'animation de ce lieu historique de Nantes.\n              </p>\n              \n              <div className=\"space-y-4 mt-6\">\n                <div className=\"border-l-4 border-red-500 pl-4 py-2\">\n                  <h3 className=\"font-medium flex items-center\">\n                    <Heart className=\"h-5 w-5 mr-2 text-red-500\" />\n                    Faire un don\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Soutenez financièrement nos actions de préservation et de valorisation du patrimoine.\n                  </p>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"mt-2\" \n                    onClick={() => navigate(\"/donate\")}\n                  >\n                    <Heart className=\"h-4 w-4 mr-2 text-red-500\" />\n                    Accéder à la page de don\n                  </Button>\n                </div>\n                \n                <div className=\"border-l-4 border-blue-500 pl-4 py-2\">\n                  <h3 className=\"font-medium flex items-center\">\n                    <Users className=\"h-5 w-5 mr-2 text-blue-500\" />\n                    Devenir membre\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Rejoignez notre équipe de bénévoles et participez activement à nos projets.\n                    Contactez-nous à <a href={`mailto:${associationInfo.contactEmail}`} className=\"text-blue-600 hover:underline\">{associationInfo.contactEmail}</a>.\n                  </p>\n                </div>\n                \n                <div className=\"border-l-4 border-green-500 pl-4 py-2\">\n                  <h3 className=\"font-medium flex items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"h-5 w-5 mr-2 text-green-500\">\n                      <rect width=\"20\" height=\"16\" x=\"2\" y=\"4\" rx=\"2\" />\n                      <path d=\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\" />\n                    </svg>\n                    Proposer une idée\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Vous avez des idées pour améliorer notre événement annuel ou pour d'autres projets ? \n                    Contactez-nous à <a href={`mailto:${associationInfo.contactEmail}`} className=\"text-blue-600 hover:underline\">{associationInfo.contactEmail}</a>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n      \n      {/* Bottom Navigation */}\n      <BottomNavigation />\n    </div>\n  );\n};\n\nexport default About;\n","import { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { ArrowLeft, Heart } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ShareButton } from \"@/components/ShareButton\";\r\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\r\nimport { useEffect } from \"react\";\r\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\r\n\r\nconst Donate = () => {\r\n  const navigate = useNavigate();\r\n  \r\n  // Track donation page view and open\r\n  useEffect(() => {\r\n    analytics.trackPageView(\"/donate\", \"Faire un don\");\r\n    analytics.trackDonationPageOpen(\"app\");\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen app-gradient pb-20 px-4 pt-4 overflow-x-hidden\">\r\n      <div className=\"max-w-screen-lg mx-auto\">\r\n        <header className=\"mb-2 flex items-center justify-between\">\r\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => { analytics.trackDonationInteraction(EventAction.DONATION_CANCEL, { method: \"helloasso\", reason: \"back_click\" }); navigate(\"/map\"); }}>\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Retour\r\n          </Button>\r\n          <h1 className=\"text-xl font-bold text-[#ff7a45]\">Faire un don</h1>\r\n          <ShareButton \r\n            title=\"Faire un don au Collectif Île Feydeau\" \r\n            text=\"Soutenez les actions du Collectif Île Feydeau pour la préservation du patrimoine nantais!\" \r\n          />\r\n        </header>\r\n        \r\n        <Card className=\"mb-6\">\r\n          <CardContent className=\"p-6\">\r\n            {/*\r\n            <div className=\"flex flex-col items-center text-center mb-6\">\r\n              <Heart className=\"h-12 w-12 text-red-500 mb-4\" />\r\n              <h2 className=\"text-xl font-bold mb-2\">Soutenez notre association</h2>\r\n            </div>\r\n            */}\r\n            \r\n            <div className=\"space-y-4\">\r\n              {/*\r\n              <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                <h3 className=\"font-medium mb-2\">Pourquoi faire un don ?</h3>\r\n                <ul className=\"text-sm space-y-2\">\r\n                  <li>• Organisation d'événements culturels</li>\r\n                  <li>• Création de contenus pédagogiques</li>\r\n                  <li>• Développement de projets communautaires</li>\r\n                  <li>• 66% de votre don est déductible de votre impôt sur le revenu</li>\r\n                </ul>\r\n              </div>\r\n              */}\r\n\r\n              {/* Intégration HelloAsso - widget intégré */}\r\n              <iframe\r\n                id=\"haWidget\"\r\n                title=\"Formulaire de don HelloAsso\"\r\n                scrolling=\"auto\"\r\n                src=\"https://www.helloasso.com/associations/collectif-feydeau/formulaires/1/widget\"\r\n                style={{ width: \"100%\", height: \"750px\", border: \"none\" }}\r\n                // Track widget load as a donation_start signal\r\n                onLoad={() => analytics.trackDonationInteraction(EventAction.DONATION_START, { method: \"helloasso\", widget_loaded: true })}\r\n              />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        \r\n        <div className=\"text-center text-sm text-gray-600\">\r\n          <p>Pour toute question concernant les dons, contactez-nous à :</p>\r\n          <p className=\"font-medium\">\r\n            <a href=\"mailto:collectif.ile.feydeau@gmail.com\" className=\"text-blue-600 hover:underline\">\r\n              collectif.ile.feydeau@gmail.com\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Bottom Navigation */}\r\n      <BottomNavigation />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Donate;\r\n","import { useLocation } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst NotFound = () => {\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    console.error(\r\n      \"404 Error: User attempted to access non-existent route:\",\r\n      location.pathname\r\n    );\r\n  }, [location.pathname]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n      <div className=\"text-center\">\r\n        <h1 className=\"text-4xl font-bold mb-4\">404</h1>\r\n        <p className=\"text-xl text-gray-600 mb-4\">Oops! Page not found</p>\r\n        <a href=\"/\" className=\"text-blue-500 hover:text-blue-700 underline\">\r\n          Return to Home\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { getImagePath } from \"@/utils/imagePaths\";\r\n\r\ninterface SplashScreenProps {\r\n  onComplete: () => void;\r\n  isFirstVisit: boolean;\r\n}\r\n\r\nconst SplashScreen = ({ onComplete, isFirstVisit }: SplashScreenProps) => {\r\n  const [animationComplete, setAnimationComplete] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Durée totale de l'animation en ms\r\n    const animationDuration = 2000;\r\n    \r\n    // Marquer l'animation comme terminée après la durée spécifiée\r\n    const timer = setTimeout(() => {\r\n      setAnimationComplete(true);\r\n      \r\n      // Attendre un peu après l'animation avant de naviguer\r\n      setTimeout(() => {\r\n        onComplete();\r\n      }, 300);\r\n    }, animationDuration);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, [onComplete]);\r\n\r\n  // Variantes pour l'animation du logo\r\n  const logoVariants = {\r\n    hidden: { opacity: 0, scale: 0.8 },\r\n    visible: { \r\n      opacity: 1, \r\n      scale: 1,\r\n      transition: { \r\n        duration: 0.8,\r\n        ease: \"easeOut\"\r\n      }\r\n    },\r\n    exit: {\r\n      opacity: 0,\r\n      scale: 1.1,\r\n      transition: { \r\n        duration: 0.3,\r\n        ease: \"easeIn\"\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      className=\"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-blue-50 to-blue-100 z-50\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <motion.div\r\n        className=\"flex flex-col items-center\"\r\n        variants={logoVariants}\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n        exit=\"exit\"\r\n      >\r\n        <motion.h1 \r\n          className=\"text-2xl font-bold text-[#4a5d94] mb-2\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.5, duration: 0.5 }}\r\n        >\r\n          1 Hall 1 Artiste 2025\r\n        </motion.h1>\r\n        <motion.img \r\n          src={getImagePath('/Logo.png')} \r\n          alt=\"Collectif Feydeau Logo\" \r\n          className=\"w-48 h-48 object-contain mb-6\"\r\n        />\r\n\r\n        <motion.h2\r\n          className=\"text-xl font-semibold text-[#4a5d94] mb-3\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.7, duration: 0.5 }}\r\n        >\r\n          Collectif Feydeau\r\n        </motion.h2>\r\n        <motion.p\r\n          className=\"text-sm text-gray-600 text-center max-w-xs px-4\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.8, duration: 0.5 }}\r\n        >\r\n          {isFirstVisit \r\n            ? \"Bienvenue dans l'application du Collectif Île Feydeau\" \r\n            : \"Découvrez le patrimoine historique de l'Île Feydeau\"}\r\n        </motion.p>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default SplashScreen;\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","\"use client\";\n\n// packages/react/label/src/Label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n","import { Event } from \"@/data/events\";\nimport { Location } from \"@/data/locations\";\nimport { createLogger } from \"@/utils/logger\";\nimport { dataService } from \"./dataService\";\nimport { validateEvent, validateLocation } from \"./validationService\";\n\n// Créer un logger pour le service d'import/export\nconst logger = createLogger('ImportExportService');\n\n// Types pour les données d'import/export\nexport interface ExportData {\n  events: Event[];\n  locations: Location[];\n  exportDate: string;\n  version: string;\n}\n\nexport interface ImportResult {\n  success: boolean;\n  message: string;\n  importedEvents?: number;\n  importedLocations?: number;\n  errors?: string[];\n}\n\n// Version actuelle du format d'export\nconst EXPORT_VERSION = \"1.0.0\";\n\n/**\n * Exporte toutes les données de l'application au format JSON\n */\nexport const exportAllData = (): string => {\n  logger.info('Exportation de toutes les données');\n  \n  try {\n    const { events, locations } = dataService.getState();\n    \n    const exportData: ExportData = {\n      events,\n      locations,\n      exportDate: new Date().toISOString(),\n      version: EXPORT_VERSION\n    };\n    \n    const jsonData = JSON.stringify(exportData, null, 2);\n    logger.info(`Exportation réussie: ${events.length} événements et ${locations.length} lieux`);\n    \n    return jsonData;\n  } catch (error) {\n    logger.error('Erreur lors de l\\'exportation des données', error);\n    throw new Error('Erreur lors de l\\'exportation des données');\n  }\n};\n\n/**\n * Exporte uniquement les événements au format JSON\n */\nexport const exportEvents = (): string => {\n  logger.info('Exportation des événements');\n  \n  try {\n    const { events } = dataService.getState();\n    \n    const exportData = {\n      events,\n      exportDate: new Date().toISOString(),\n      version: EXPORT_VERSION\n    };\n    \n    const jsonData = JSON.stringify(exportData, null, 2);\n    logger.info(`Exportation réussie: ${events.length} événements`);\n    \n    return jsonData;\n  } catch (error) {\n    logger.error('Erreur lors de l\\'exportation des événements', error);\n    throw new Error('Erreur lors de l\\'exportation des événements');\n  }\n};\n\n/**\n * Exporte uniquement les lieux au format JSON\n */\nexport const exportLocations = (): string => {\n  logger.info('Exportation des lieux');\n  \n  try {\n    const { locations } = dataService.getState();\n    \n    const exportData = {\n      locations,\n      exportDate: new Date().toISOString(),\n      version: EXPORT_VERSION\n    };\n    \n    const jsonData = JSON.stringify(exportData, null, 2);\n    logger.info(`Exportation réussie: ${locations.length} lieux`);\n    \n    return jsonData;\n  } catch (error) {\n    logger.error('Erreur lors de l\\'exportation des lieux', error);\n    throw new Error('Erreur lors de l\\'exportation des lieux');\n  }\n};\n\n/**\n * Exporte les données au format CSV\n */\nexport const exportEventsToCSV = (): string => {\n  logger.info('Exportation des événements au format CSV');\n  \n  try {\n    const { events } = dataService.getState();\n    \n    // Définir les en-têtes CSV\n    const headers = [\n      'id',\n      'title',\n      'artistName',\n      'type',\n      'artistBio',\n      'time',\n      'days',\n      'locationName'\n    ];\n    \n    // Convertir les événements en lignes CSV\n    const rows = events.map(event => {\n      const values = [\n        event.id,\n        `\"${event.title.replace(/\"/g, '\"\"')}\"`,\n        `\"${event.artistName.replace(/\"/g, '\"\"')}\"`,\n        event.type,\n        `\"${event.artistBio.replace(/\"/g, '\"\"')}\"`,\n        `\"${event.time.replace(/\"/g, '\"\"')}\"`,\n        `\"${event.days.join(',')}\"`,\n        `\"${event.locationName.replace(/\"/g, '\"\"')}\"`\n      ];\n      \n      return values.join(',');\n    });\n    \n    // Assembler le CSV final\n    const csv = [headers.join(','), ...rows].join('\\n');\n    logger.info(`Exportation CSV réussie: ${events.length} événements`);\n    \n    return csv;\n  } catch (error) {\n    logger.error('Erreur lors de l\\'exportation des événements au format CSV', error);\n    throw new Error('Erreur lors de l\\'exportation des événements au format CSV');\n  }\n};\n\n/**\n * Importe des données depuis un fichier JSON\n */\nexport const importData = (jsonData: string): ImportResult => {\n  logger.info('Importation de données depuis JSON');\n  \n  try {\n    const importedData = JSON.parse(jsonData);\n    const errors: string[] = [];\n    let importedEvents = 0;\n    let importedLocations = 0;\n    \n    // Vérifier la structure des données importées\n    if (!importedData) {\n      return {\n        success: false,\n        message: 'Données d\\'importation invalides',\n        errors: ['Format JSON invalide']\n      };\n    }\n    \n    // Importer les lieux si présents\n    if (importedData.locations && Array.isArray(importedData.locations)) {\n      logger.info(`Tentative d'importation de ${importedData.locations.length} lieux`);\n      \n      for (const location of importedData.locations) {\n        // Valider chaque lieu\n        const validationResult = validateLocation(location);\n        \n        if (validationResult.isValid) {\n          const result = dataService.addLocation(location);\n          \n          if (result.success) {\n            importedLocations++;\n          } else if (result.error) {\n            errors.push(`Erreur lors de l'importation du lieu ${location.id || 'sans ID'}: ${result.error}`);\n          }\n        } else {\n          const errorFields = validationResult.errors.map(e => `${e.field}: ${e.message}`).join(', ');\n          errors.push(`Validation échouée pour le lieu ${location.id || 'sans ID'}: ${errorFields}`);\n        }\n      }\n    }\n    \n    // Importer les événements si présents\n    if (importedData.events && Array.isArray(importedData.events)) {\n      logger.info(`Tentative d'importation de ${importedData.events.length} événements`);\n      \n      for (const event of importedData.events) {\n        // Valider chaque événement\n        const validationResult = validateEvent(event);\n        \n        if (validationResult.isValid) {\n          const result = dataService.addEvent(event);\n          \n          if (result.success) {\n            importedEvents++;\n          } else if (result.error) {\n            errors.push(`Erreur lors de l'importation de l'événement ${event.id || 'sans ID'}: ${result.error}`);\n          }\n        } else {\n          const errorFields = validationResult.errors.map(e => `${e.field}: ${e.message}`).join(', ');\n          errors.push(`Validation échouée pour l'événement ${event.id || 'sans ID'}: ${errorFields}`);\n        }\n      }\n    }\n    \n    // Générer le message de résultat\n    let message = '';\n    if (importedLocations > 0) {\n      message += `${importedLocations} lieu(x) importé(s). `;\n    }\n    \n    if (importedEvents > 0) {\n      message += `${importedEvents} événement(s) importé(s).`;\n    }\n    \n    if (importedLocations === 0 && importedEvents === 0) {\n      message = 'Aucune donnée importée.';\n    }\n    \n    // Sauvegarder les changements\n    dataService.saveToLocalStorage();\n    \n    return {\n      success: importedEvents > 0 || importedLocations > 0,\n      message,\n      importedEvents,\n      importedLocations,\n      errors: errors.length > 0 ? errors : undefined\n    };\n  } catch (error) {\n    logger.error('Erreur lors de l\\'importation des données', error);\n    \n    return {\n      success: false,\n      message: 'Erreur lors de l\\'importation des données',\n      errors: [(error as Error).message]\n    };\n  }\n};\n\n/**\n * Importe des événements depuis un fichier CSV\n */\nexport const importEventsFromCSV = (csvData: string): ImportResult => {\n  logger.info('Importation d\\'événements depuis CSV');\n  \n  try {\n    // Découper le CSV en lignes\n    const lines = csvData.split('\\n').filter(line => line.trim() !== '');\n    \n    if (lines.length < 2) {\n      return {\n        success: false,\n        message: 'Le fichier CSV ne contient pas suffisamment de données',\n        errors: ['Format CSV invalide']\n      };\n    }\n    \n    // Extraire les en-têtes\n    const headers = lines[0].split(',');\n    \n    // Vérifier que les en-têtes nécessaires sont présents\n    const requiredHeaders = ['id', 'title', 'artistName', 'type', 'locationName'];\n    const missingHeaders = requiredHeaders.filter(header => !headers.includes(header));\n    \n    if (missingHeaders.length > 0) {\n      return {\n        success: false,\n        message: `En-têtes manquants dans le fichier CSV: ${missingHeaders.join(', ')}`,\n        errors: [`En-têtes manquants: ${missingHeaders.join(', ')}`]\n      };\n    }\n    \n    // Fonction pour parser une ligne CSV en tenant compte des guillemets\n    const parseCSVLine = (line: string): string[] => {\n      const values: string[] = [];\n      let currentValue = '';\n      let insideQuotes = false;\n      \n      for (let i = 0; i < line.length; i++) {\n        const char = line[i];\n        \n        if (char === '\"') {\n          // Si nous avons deux guillemets consécutifs à l'intérieur d'une chaîne entre guillemets\n          if (insideQuotes && i + 1 < line.length && line[i + 1] === '\"') {\n            currentValue += '\"';\n            i++; // Sauter le prochain guillemet\n          } else {\n            // Basculer l'état \"à l'intérieur des guillemets\"\n            insideQuotes = !insideQuotes;\n          }\n        } else if (char === ',' && !insideQuotes) {\n          // Fin d'une valeur\n          values.push(currentValue);\n          currentValue = '';\n        } else {\n          // Ajouter le caractère à la valeur actuelle\n          currentValue += char;\n        }\n      }\n      \n      // Ajouter la dernière valeur\n      values.push(currentValue);\n      \n      return values;\n    };\n    \n    // Convertir les lignes en événements\n    const events: Event[] = [];\n    const errors: string[] = [];\n    \n    for (let i = 1; i < lines.length; i++) {\n      try {\n        const values = parseCSVLine(lines[i]);\n        const event: any = {};\n        \n        // Associer chaque valeur à son en-tête\n        for (let j = 0; j < headers.length; j++) {\n          if (j < values.length) {\n            const header = headers[j];\n            let value = values[j];\n            \n            // Convertir certains champs en types spécifiques\n            if (header === 'x' || header === 'y') {\n              event[header] = parseFloat(value);\n            } else if (header === 'days') {\n              event[header] = value.split(',').map(day => day.trim());\n            } else {\n              event[header] = value;\n            }\n          }\n        }\n        \n        // Valider l'événement\n        const validationResult = validateEvent(event as Event);\n        \n        if (validationResult.isValid) {\n          events.push(event as Event);\n        } else {\n          const errorFields = validationResult.errors.map(e => `${e.field}: ${e.message}`).join(', ');\n          errors.push(`Ligne ${i + 1}: Validation échouée - ${errorFields}`);\n        }\n      } catch (error) {\n        errors.push(`Erreur lors du traitement de la ligne ${i + 1}: ${(error as Error).message}`);\n      }\n    }\n    \n    // Importer les événements valides\n    let importedCount = 0;\n    \n    for (const event of events) {\n      const result = dataService.addEvent(event);\n      \n      if (result.success) {\n        importedCount++;\n      } else if (result.error) {\n        errors.push(`Erreur lors de l'importation de l'événement ${event.id}: ${result.error}`);\n      }\n    }\n    \n    // Sauvegarder les changements\n    dataService.saveToLocalStorage();\n    \n    return {\n      success: importedCount > 0,\n      message: `${importedCount} événement(s) importé(s) sur ${events.length} événements valides.`,\n      importedEvents: importedCount,\n      errors: errors.length > 0 ? errors : undefined\n    };\n  } catch (error) {\n    logger.error('Erreur lors de l\\'importation des événements depuis CSV', error);\n    \n    return {\n      success: false,\n      message: 'Erreur lors de l\\'importation des événements depuis CSV',\n      errors: [(error as Error).message]\n    };\n  }\n};\n","import React from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { exportAllData, exportEvents, exportEventsToCSV, importData, importEventsFromCSV } from '@/services/importExportService';\r\n\r\nexport const ImportExportPanel: React.FC = () => {\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n  const csvInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const handleExportAll = () => {\r\n    try {\r\n      const data = exportAllData();\r\n      downloadFile(data, `feydeau-export-${new Date().toISOString().split('T')[0]}.json`, 'application/json');\r\n    } catch (error) {\r\n      console.error('Erreur d\\'exportation', error);\r\n    }\r\n  };\r\n\r\n  const handleExportEvents = () => {\r\n    try {\r\n      const data = exportEvents();\r\n      downloadFile(data, `feydeau-events-${new Date().toISOString().split('T')[0]}.json`, 'application/json');\r\n    } catch (error) {\r\n      console.error('Erreur d\\'exportation des événements', error);\r\n    }\r\n  };\r\n\r\n  const handleExportEventsCSV = () => {\r\n    try {\r\n      const data = exportEventsToCSV();\r\n      downloadFile(data, `feydeau-events-${new Date().toISOString().split('T')[0]}.csv`, 'text/csv;charset=utf-8');\r\n    } catch (error) {\r\n      console.error('Erreur d\\'exportation des événements au format CSV', error);\r\n    }\r\n  };\r\n\r\n  const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const content = e.target?.result as string;\r\n        const result = importData(content);\r\n        \r\n        if (result.success) {\r\n          console.log('Importation réussie:', result.message);\r\n        } else {\r\n          console.error('Erreurs lors de l\\'importation:', result.message);\r\n          \r\n          if (result.errors && result.errors.length > 0) {\r\n            console.error('Erreurs d\\'importation:', result.errors);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur d\\'importation des données', error);\r\n      }\r\n      \r\n      // Réinitialiser l'input file\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    };\r\n    \r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const content = e.target?.result as string;\r\n        const result = importEventsFromCSV(content);\r\n        \r\n        if (result.success) {\r\n          console.log('Importation CSV réussie:', result.message);\r\n        } else {\r\n          console.error('Erreurs lors de l\\'importation CSV:', result.message);\r\n          \r\n          if (result.errors && result.errors.length > 0) {\r\n            console.error('Erreurs d\\'importation CSV:', result.errors);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur d\\'importation CSV', error);\r\n      }\r\n      \r\n      // Réinitialiser l'input file\r\n      if (csvInputRef.current) {\r\n        csvInputRef.current.value = '';\r\n      }\r\n    };\r\n    \r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const downloadFile = (data: string, filename: string, type: string) => {\r\n    const blob = new Blob([data], { type });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <h2 className=\"text-lg font-semibold\">Import/Export de données</h2>\r\n      \r\n      <div className=\"space-y-2\">\r\n        <h3 className=\"text-md font-medium\">Exportation</h3>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Button onClick={handleExportAll}>\r\n            Exporter toutes les données\r\n          </Button>\r\n          <Button onClick={handleExportEvents}>\r\n            Exporter les événements\r\n          </Button>\r\n          <Button onClick={handleExportEventsCSV}>\r\n            Exporter les événements (CSV)\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"space-y-2\">\r\n        <h3 className=\"text-md font-medium\">Importation</h3>\r\n        <div className=\"flex flex-col gap-2\">\r\n          <div>\r\n            <Button onClick={() => fileInputRef.current?.click()}>\r\n              Importer depuis JSON\r\n            </Button>\r\n            <input\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              onChange={handleImport}\r\n              accept=\".json\"\r\n              className=\"hidden\"\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <Button onClick={() => csvInputRef.current?.click()}>\r\n              Importer événements depuis CSV\r\n            </Button>\r\n            <input\r\n              type=\"file\"\r\n              ref={csvInputRef}\r\n              onChange={handleImportCSV}\r\n              accept=\".csv\"\r\n              className=\"hidden\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","\"use client\";\n\n// packages/react/checkbox/src/Checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProvider, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked = false, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked,\n      onChange: onCheckedChange\n    });\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form2 = button?.form;\n      if (form2) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form2.addEventListener(\"reset\", reset);\n        return () => form2.removeEventListener(\"reset\", reset);\n      }\n    }, [button, setChecked]);\n    return /* @__PURE__ */ jsxs(CheckboxProvider, { scope: __scopeCheckbox, state: checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"checkbox\",\n          \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...checkboxProps,\n          ref: composedRefs,\n          onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n            if (event.key === \"Enter\") event.preventDefault();\n          }),\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        BubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" },\n          defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked\n        }\n      )\n    ] });\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isIndeterminate(context.state) || context.state === true, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.state),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef,\n        style: { pointerEvents: \"none\", ...props.style }\n      }\n    ) });\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BubbleInput = (props) => {\n  const { control, checked, bubbles = true, defaultChecked, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevChecked = usePrevious(checked);\n  const controlSize = useSize(control);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"checked\");\n    const setChecked = descriptor.set;\n    if (prevChecked !== checked && setChecked) {\n      const event = new Event(\"click\", { bubbles });\n      input.indeterminate = isIndeterminate(checked);\n      setChecked.call(input, isIndeterminate(checked) ? false : checked);\n      input.dispatchEvent(event);\n    }\n  }, [prevChecked, checked, bubbles]);\n  const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n  return /* @__PURE__ */ jsx(\n    \"input\",\n    {\n      type: \"checkbox\",\n      \"aria-hidden\": true,\n      defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n      ...inputProps,\n      tabIndex: -1,\n      ref,\n      style: {\n        ...props.style,\n        ...controlSize,\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        opacity: 0,\n        margin: 0\n      }\n    }\n  );\n};\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Checkbox;\nvar Indicator = CheckboxIndicator;\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  Indicator,\n  Root,\n  createCheckboxScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Event } from \"@/data/events\";\nimport { Location } from \"@/data/locations\";\nimport { useData, useEvents, useLocations } from \"@/hooks/useData\";\nimport { createLogger } from \"@/utils/logger\";\nimport { v4 as uuidv4 } from 'uuid';\n\n// Créer un logger pour le composant EventForm\nconst logger = createLogger('EventForm');\n\ninterface EventFormProps {\n  onSuccess?: () => void;\n  editingEvent?: Event;\n}\n\nexport function EventForm({ onSuccess, editingEvent }: EventFormProps) {\n  const { locations } = useLocations();\n  const { addEvent, updateEvent } = useData();\n  \n  const [formData, setFormData] = useState<Partial<Event>>(\n    editingEvent || {\n      id: uuidv4(),\n      title: \"\",\n      artistName: \"\",\n      type: \"exposition\",\n      description: \"\",\n      artistBio: \"\",\n      time: \"\",\n      days: [],\n      locationId: \"\",\n      locationName: \"\"\n    }\n  );\n  \n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitMessage, setSubmitMessage] = useState({ text: \"\", type: \"\" });\n  \n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Effacer l'erreur pour ce champ si elle existe\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n  \n  const handleSelectChange = (name: string, value: string) => {\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Si on change de lieu, mettre à jour les coordonnées et le nom du lieu\n    if (name === \"locationId\") {\n      const selectedLocation = locations.find(loc => loc.id === value);\n      if (selectedLocation) {\n        setFormData(prev => ({ \n          ...prev, \n          locationName: selectedLocation.name\n        }));\n      }\n    }\n    \n    // Effacer l'erreur pour ce champ si elle existe\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n  \n  const handleDayChange = (day: \"samedi\" | \"dimanche\", checked: boolean) => {\n    setFormData(prev => {\n      const currentDays = prev.days as (\"samedi\" | \"dimanche\")[] || [];\n      let newDays: (\"samedi\" | \"dimanche\")[];\n      \n      if (checked) {\n        newDays = [...currentDays, day];\n      } else {\n        newDays = currentDays.filter(d => d !== day);\n      }\n      \n      return { ...prev, days: newDays };\n    });\n    \n    // Effacer l'erreur pour ce champ si elle existe\n    if (errors.days) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors.days;\n        return newErrors;\n      });\n    }\n  };\n  \n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    // Validation des champs obligatoires\n    if (!formData.title?.trim()) {\n      newErrors.title = \"Le titre est obligatoire\";\n    }\n    \n    if (!formData.artistName?.trim()) {\n      newErrors.artistName = \"Le nom de l'artiste est obligatoire\";\n    }\n    \n    if (!formData.description?.trim()) {\n      newErrors.description = \"La description est obligatoire\";\n    }\n    \n    if (!formData.locationId) {\n      newErrors.locationId = \"Veuillez sélectionner un lieu\";\n    }\n    \n    if (!formData.days || formData.days.length === 0) {\n      newErrors.days = \"Veuillez sélectionner au moins un jour\";\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      setSubmitMessage({\n        text: \"Veuillez corriger les erreurs dans le formulaire\",\n        type: \"error\"\n      });\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setSubmitMessage({ text: \"\", type: \"\" });\n    \n    try {\n      logger.info(`${editingEvent ? 'Mise à jour' : 'Création'} d'un événement`);\n      logger.debug('Données de l\\'événement', formData);\n      \n      const eventData = formData as Event;\n      \n      let result;\n      if (editingEvent) {\n        result = updateEvent(eventData);\n      } else {\n        result = addEvent(eventData);\n      }\n      \n      if (result.success) {\n        setSubmitMessage({\n          text: `Événement ${editingEvent ? 'mis à jour' : 'créé'} avec succès`,\n          type: \"success\"\n        });\n        \n        if (!editingEvent) {\n          // Réinitialiser le formulaire pour un nouvel événement\n          setFormData({\n            id: uuidv4(),\n            title: \"\",\n            artistName: \"\",\n            type: \"exposition\",\n            description: \"\",\n            artistBio: \"\",\n            time: \"\",\n            days: [],\n            locationId: \"\",\n            locationName: \"\"\n          });\n        }\n        \n        if (onSuccess) {\n          onSuccess();\n        }\n      } else {\n        setSubmitMessage({\n          text: `Erreur: ${result.error}`,\n          type: \"error\"\n        });\n      }\n    } catch (error) {\n      logger.error('Erreur lors de la soumission du formulaire', error);\n      setSubmitMessage({\n        text: `Une erreur est survenue: ${error}`,\n        type: \"error\"\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <Card className=\"w-full max-w-3xl mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"text-[#4a5d94]\">\n          {editingEvent ? \"Modifier un événement\" : \"Ajouter un nouvel événement\"}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Titre de l'événement *</Label>\n            <Input\n              id=\"title\"\n              name=\"title\"\n              value={formData.title || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"Titre de l'événement\"\n              className={errors.title ? \"border-red-500\" : \"\"}\n            />\n            {errors.title && <p className=\"text-red-500 text-sm\">{errors.title}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"artistName\">Nom de l'artiste *</Label>\n            <Input\n              id=\"artistName\"\n              name=\"artistName\"\n              value={formData.artistName || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"Nom de l'artiste\"\n              className={errors.artistName ? \"border-red-500\" : \"\"}\n            />\n            {errors.artistName && <p className=\"text-red-500 text-sm\">{errors.artistName}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"type\">Type d'événement *</Label>\n            <Select\n              value={formData.type}\n              onValueChange={(value) => handleSelectChange(\"type\", value)}\n            >\n              <SelectTrigger className={errors.type ? \"border-red-500\" : \"\"}>\n                <SelectValue placeholder=\"Sélectionner un type\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"exposition\">Exposition</SelectItem>\n                <SelectItem value=\"concert\">Concert</SelectItem>\n              </SelectContent>\n            </Select>\n            {errors.type && <p className=\"text-red-500 text-sm\">{errors.type}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Description *</Label>\n            <Textarea\n              id=\"description\"\n              name=\"description\"\n              value={formData.description || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"Description de l'événement\"\n              className={`min-h-24 ${errors.description ? \"border-red-500\" : \"\"}`}\n            />\n            {errors.description && <p className=\"text-red-500 text-sm\">{errors.description}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"artistBio\">Biographie de l'artiste</Label>\n            <Textarea\n              id=\"artistBio\"\n              name=\"artistBio\"\n              value={formData.artistBio || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"Biographie de l'artiste\"\n              className=\"min-h-24\"\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"time\">Horaires</Label>\n            <Input\n              id=\"time\"\n              name=\"time\"\n              value={formData.time || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"Ex: 10h00 - 18h00\"\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label>Jours *</Label>\n            <div className=\"flex space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"samedi\"\n                  checked={formData.days?.includes(\"samedi\") || false}\n                  onCheckedChange={(checked) => handleDayChange(\"samedi\", checked as boolean)}\n                />\n                <Label htmlFor=\"samedi\" className=\"cursor-pointer\">Samedi</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"dimanche\"\n                  checked={formData.days?.includes(\"dimanche\") || false}\n                  onCheckedChange={(checked) => handleDayChange(\"dimanche\", checked as boolean)}\n                />\n                <Label htmlFor=\"dimanche\" className=\"cursor-pointer\">Dimanche</Label>\n              </div>\n            </div>\n            {errors.days && <p className=\"text-red-500 text-sm\">{errors.days}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"locationId\">Lieu *</Label>\n            <Select\n              value={formData.locationId}\n              onValueChange={(value) => handleSelectChange(\"locationId\", value)}\n            >\n              <SelectTrigger className={errors.locationId ? \"border-red-500\" : \"\"}>\n                <SelectValue placeholder=\"Sélectionner un lieu\" />\n              </SelectTrigger>\n              <SelectContent>\n                {locations.map((location) => (\n                  <SelectItem key={location.id} value={location.id}>\n                    {location.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {errors.locationId && <p className=\"text-red-500 text-sm\">{errors.locationId}</p>}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"image\">URL de l'image (optionnel)</Label>\n            <Input\n              id=\"image\"\n              name=\"image\"\n              value={formData.image || \"\"}\n              onChange={handleInputChange}\n              placeholder=\"URL de l'image\"\n            />\n          </div>\n          \n          <CardFooter className=\"flex justify-between px-0\">\n            <Button \n              type=\"submit\" \n              disabled={isSubmitting}\n              className=\"bg-[#4a5d94] hover:bg-[#3a4d84]\"\n            >\n              {isSubmitting ? \"En cours...\" : (editingEvent ? \"Mettre à jour\" : \"Ajouter l'événement\")}\n            </Button>\n            \n            {submitMessage.text && (\n              <p className={`text-sm ${submitMessage.type === \"error\" ? \"text-red-500\" : \"text-green-500\"}`}>\n                {submitMessage.text}\n              </p>\n            )}\n          </CardFooter>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","import React, { useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { createLogger } from \"@/utils/logger\";\r\nimport Lock from 'lucide-react/dist/esm/icons/lock';\r\n\r\n// Créer un logger pour le composant AdminLogin\r\nconst logger = createLogger('AdminLogin');\r\n\r\n// Code PIN pour l'accès administrateur\r\nconst ADMIN_PIN = '5321';\r\n\r\ninterface AdminLoginProps {\r\n  onLogin: () => void;\r\n}\r\n\r\nexport const AdminLogin: React.FC<AdminLoginProps> = ({ onLogin }) => {\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(false);\r\n  const [attempts, setAttempts] = useState(0);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (password === ADMIN_PIN) {\r\n      logger.info('Connexion administrateur réussie');\r\n      \r\n      // Stocker l'état d'authentification dans sessionStorage (valide jusqu'à la fermeture du navigateur)\r\n      sessionStorage.setItem('adminAuthenticated', 'true');\r\n      \r\n      // Appeler le callback de connexion\r\n      onLogin();\r\n    } else {\r\n      logger.warn('Tentative de connexion administrateur échouée');\r\n      setError(true);\r\n      setAttempts(attempts + 1);\r\n      setPassword('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-[70vh]\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-1\">\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"bg-[#4a5d94] p-3 rounded-full\">\r\n              <Lock className=\"h-6 w-6 text-white\" />\r\n            </div>\r\n          </div>\r\n          <CardTitle className=\"text-2xl text-center text-[#4a5d94]\">\r\n            Accès Administrateur\r\n          </CardTitle>\r\n          <CardDescription className=\"text-center\">\r\n            Veuillez entrer le mot de passe pour accéder à l'interface d'administration\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"password\">Code PIN</Label>\r\n                <Input\r\n                  id=\"password\"\r\n                  type=\"number\"\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  maxLength={4}\r\n                  value={password}\r\n                  onChange={(e) => {\r\n                    // Limiter à 4 chiffres\r\n                    if (e.target.value.length <= 4) {\r\n                      setPassword(e.target.value);\r\n                      if (error) setError(false);\r\n                    }\r\n                  }}\r\n                  className={`text-center text-2xl tracking-widest ${error ? \"border-red-500\" : \"\"}`}\r\n                  placeholder=\"____\"\r\n                />\r\n                {error && (\r\n                  <p className=\"text-sm text-red-500 text-center\">\r\n                    Code PIN incorrect. {attempts > 1 ? `${attempts} tentatives échouées.` : ''}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <Button type=\"submit\" className=\"w-full bg-[#4a5d94]\">\r\n                Se connecter\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","/**\n * 🚀 RÉVOLUTION : Service Cloudinary pur pour la galerie communautaire\n * Plus de GitHub, plus de workflows, plus de complexité !\n * VERSION: 2.1.0 - Firebase fix double slash\n */\n\nimport { CommunityEntry, SubmissionParams, ModerationStatus } from \"../types/communityTypes\";\n\n// Configuration Cloudinary\nconst CLOUDINARY_CLOUD_NAME = 'dpatqkgsc';\nconst CLOUDINARY_API_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}`;\n\n// Configuration Firebase pour synchronisation temps réel\nconst FIREBASE_CONFIG = {\n  databaseURL: \"https://collectif-feydeau-default-rtdb.europe-west1.firebasedatabase.app\"\n};\n\n/**\n * 🚀 Récupère toutes les photos depuis Cloudinary (INSTANTANÉ)\n */\nexport async function fetchCommunityEntries(): Promise<CommunityEntry[]> {\n  try {\n    // 🗑️ TABLE RASE : Effacer toutes les anciennes contributions au premier chargement SEULEMENT\n    const isFirstLoad = !localStorage.getItem('cloudinary_revolution_started');\n    if (isFirstLoad) {\n      localStorage.removeItem('community_entries');\n      localStorage.setItem('cloudinary_revolution_started', 'true');\n      console.log('[CloudinaryService] ✅ Système initialisé v2.1.0');\n    }\n    \n    // 🔥 FIREBASE PUR : Une seule source de vérité !\n    const response = await fetch(`${FIREBASE_CONFIG.databaseURL}/community-photos.json`);\n    \n    if (!response.ok) {\n      console.error('[CloudinaryService] ❌ Firebase erreur:', response.status);\n      return [];\n    }\n    \n    const firebaseData = await response.json();\n    const firebaseEntries = firebaseData ? Object.values(firebaseData) as CommunityEntry[] : [];\n    \n    console.log(`[CloudinaryService] ✅ ${firebaseEntries.length} photos chargées`);\n    \n    return firebaseEntries.sort((a: CommunityEntry, b: CommunityEntry) => \n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n    );\n    \n  } catch (error) {\n    console.error('[CloudinaryService] Erreur:', error);\n    return [];\n  }\n}\n\n/**\n * 🗑️ RÉVOLUTION : Effacer toutes les anciennes contributions\n */\nexport function clearAllContributions(): void {\n  console.log('[CloudinaryService] 🗑️ TABLE RASE : Suppression de toutes les contributions !');\n  localStorage.removeItem('community_entries');\n  console.log('[CloudinaryService] ✅ Toutes les contributions supprimées ! Nouveau départ !');\n}\n\n/**\n * ⚡ Soumission instantanée (0 seconde !)\n */\nexport async function submitContribution(params: SubmissionParams): Promise<CommunityEntry> {\n  const finalImageUrl = params.cloudinaryUrl || params.imageUrl;\n  if (!finalImageUrl) {\n    throw new Error('URL Cloudinary manquante');\n  }\n\n  // Extraire le public_id depuis l'URL Cloudinary\n  const publicIdMatch = finalImageUrl.match(/\\/v\\d+\\/([^\\.]+)/);\n  const publicId = publicIdMatch ? publicIdMatch[1] : `photo_${Date.now()}`;\n\n  // Créer l'entrée\n  const newEntry: CommunityEntry = {\n    id: publicId,\n    type: params.type,\n    displayName: params.displayName?.trim() || 'Anonyme',\n    content: params.content?.trim() || '',\n    imageUrl: finalImageUrl,\n    thumbnailUrl: finalImageUrl,\n    description: params.description?.trim() || '',\n    createdAt: new Date().toISOString(),\n    timestamp: new Date().toISOString(),\n    moderation: {\n      status: 'approved' as ModerationStatus,\n      moderatedAt: new Date().toISOString()\n    }\n  };\n  \n  // 🔥 SAUVEGARDER dans Firebase\n  const response = await fetch(`${FIREBASE_CONFIG.databaseURL}/community-photos/${newEntry.id}.json`, {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(newEntry)\n  });\n  \n  if (!response.ok) {\n    throw new Error('Impossible de sauvegarder la photo. Vérifiez votre connexion.');\n  }\n  \n  console.log('[CloudinaryService] ✅ Photo sauvegardée');\n  \n  // Toast instantané de succès\n  if (typeof window !== 'undefined') {\n    // Déclencher un événement pour le toast\n    window.dispatchEvent(new CustomEvent('community-photo-added', {\n      detail: { \n        message: '🎉 Photo ajoutée instantanément !',\n        description: 'Votre photo est visible immédiatement sur tous les appareils.',\n        type: 'success'\n      }\n    }));\n  }\n  \n  return newEntry;\n}\n\n/**\n * 🗑️ Suppression admin via tags Cloudinary\n */\nexport async function deleteCommunityEntry(entryId: string): Promise<void> {\n  // 🗑️ SUPPRESSION dans Firebase\n  const response = await fetch(`${FIREBASE_CONFIG.databaseURL}/community-photos/${entryId}.json`, {\n    method: 'DELETE'\n  });\n  \n  if (!response.ok) {\n    throw new Error('Impossible de supprimer la photo');\n  }\n  \n  console.log('[CloudinaryService] ✅ Photo supprimée');\n}\n","/**\n * 🚀 RÉVOLUTION CLOUDINARY : Service communautaire ultra-simple\n * Fini GitHub, fini les workflows, fini la complexité !\n */\n\n// Import des types\nimport { CommunityEntry, SubmissionParams, ModerationStatus, ModerationResult } from \"../types/communityTypes\";\n\n// 🚀 RÉVOLUTION : Tout vient du service Cloudinary pur !\nexport { \n  fetchCommunityEntries, \n  submitContribution, \n  deleteCommunityEntry \n} from './cloudinaryService';\n\n// Export des fonctions locales définies ci-dessous\n\n// Fonctions utilitaires conservées pour compatibilité\nexport function getStoredEntries(): CommunityEntry[] {\n  try {\n    const stored = localStorage.getItem('community_entries');\n    return stored ? JSON.parse(stored) : [];\n  } catch (error) {\n    console.error('[CommunityService] Erreur lecture localStorage:', error);\n    return [];\n  }\n}\n\nexport function saveEntries(entries: CommunityEntry[]): void {\n  try {\n    localStorage.setItem('community_entries', JSON.stringify(entries));\n    console.log(`[CommunityService] ${entries.length} entrées sauvegardées`);\n  } catch (error) {\n    console.error('[CommunityService] Erreur sauvegarde localStorage:', error);\n  }\n}\n\n// Fonctions de modération conservées\nexport async function moderateEntry(entryId: string, decision: 'approve' | 'reject', reason?: string): Promise<ModerationResult> {\n  console.log(`[CommunityService] Modération de l'entrée ${entryId}: ${decision}`);\n  \n  const entries = getStoredEntries();\n  const entryIndex = entries.findIndex(entry => entry.id === entryId);\n  \n  if (entryIndex === -1) {\n    return {\n      success: false,\n      error: 'Entrée non trouvée'\n    };\n  }\n\n  const entry = entries[entryIndex];\n  entry.moderation = {\n    status: decision === 'approve' ? 'approved' : 'rejected',\n    moderatedAt: new Date().toISOString(),\n    reason\n  };\n\n  entries[entryIndex] = entry;\n  saveEntries(entries);\n\n  return {\n    success: true,\n    entry\n  };\n}\n\nexport async function restoreEntry(entryId: string): Promise<void> {\n  const entries = getStoredEntries();\n  const updatedEntries = entries.map(entry => \n    entry.id === entryId \n      ? { ...entry, moderation: { status: 'pending' as ModerationStatus, moderatedAt: null } }\n      : entry\n  );\n  \n  saveEntries(updatedEntries);\n  console.log(`[CommunityService] Entrée ${entryId} restaurée`);\n}\n\n// Alias pour compatibilité avec CommunityManagement\nexport const restoreCommunityEntry = restoreEntry;\n","/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument) {\n  const argStr = Object.prototype.toString.call(argument);\n\n  // Clone the date\n  if (\n    argument instanceof Date ||\n    (typeof argument === \"object\" && argStr === \"[object Date]\")\n  ) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new argument.constructor(+argument);\n  } else if (\n    typeof argument === \"number\" ||\n    argStr === \"[object Number]\" ||\n    typeof argument === \"string\" ||\n    argStr === \"[object String]\"\n  ) {\n    // TODO: Can we get rid of as?\n    return new Date(argument);\n  } else {\n    // TODO: Can we get rid of as?\n    return new Date(NaN);\n  }\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from 'date-fns'\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use contrustor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   )\n * }\n */\nexport function constructFrom(date, value) {\n  if (date instanceof Date) {\n    return new date.constructor(value);\n  } else {\n    return new Date(value);\n  }\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occures every 4 years, except for years that are divisable by 100 and not divisable by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","import { toDate } from \"./toDate.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { startOfWeek } from \"./startOfWeek.mjs\";\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date) {\n  return startOfWeek(date, { weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;\n","import { constructFrom } from \"./constructFrom.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date) {\n  const _date = toDate(date);\n  const year = _date.getFullYear();\n\n  const fourthOfJanuaryOfNextYear = constructFrom(date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n\n  const fourthOfJanuaryOfThisYear = constructFrom(date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date) {\n  const _date = toDate(date);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import { toDate } from \"../toDate.mjs\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(\n    Date.UTC(\n      _date.getFullYear(),\n      _date.getMonth(),\n      _date.getDate(),\n      _date.getHours(),\n      _date.getMinutes(),\n      _date.getSeconds(),\n      _date.getMilliseconds(),\n    ),\n  );\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}\n","import { millisecondsInDay } from \"./constants.mjs\";\nimport { startOfDay } from \"./startOfDay.mjs\";\nimport { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.mjs\";\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(dateLeft, dateRight) {\n  const startOfDayLeft = startOfDay(dateLeft);\n  const startOfDayRight = startOfDay(dateRight);\n\n  const timestampLeft =\n    +startOfDayLeft - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  const timestampRight =\n    +startOfDayRight - getTimezoneOffsetInMilliseconds(startOfDayRight);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((timestampLeft - timestampRight) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;\n","import { getISOWeekYear } from \"./getISOWeekYear.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date) {\n  const year = getISOWeekYear(date);\n  const fourthOfJanuary = constructFrom(date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;\n","/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param value - The value to check\n *\n * @returns True if the given value is a date\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\nexport function isDate(value) {\n  return (\n    value instanceof Date ||\n    (typeof value === \"object\" &&\n      Object.prototype.toString.call(value) === \"[object Date]\")\n  );\n}\n\n// Fallback for modularized imports:\nexport default isDate;\n","import { isDate } from \"./isDate.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate](https://date-fns.org/docs/toDate)\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to check\n *\n * @returns The date is valid\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertable into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\nexport function isValid(date) {\n  if (!isDate(date) && typeof date !== \"number\") {\n    return false;\n  }\n  const _date = toDate(date);\n  return !isNaN(Number(_date));\n}\n\n// Fallback for modularized imports:\nexport default isValid;\n","import { toDate } from \"./toDate.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date) {\n  const cleanDate = toDate(date);\n  const _date = constructFrom(date, 0);\n  _date.setFullYear(cleanDate.getFullYear(), 0, 1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\",\n  },\n\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\",\n  },\n\n  halfAMinute: \"half a minute\",\n\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\",\n  },\n\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\",\n  },\n\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\",\n  },\n\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\",\n  },\n\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\",\n  },\n\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\",\n  },\n\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\",\n  },\n\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\",\n  },\n\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\",\n  },\n\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\",\n  },\n\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\",\n  },\n\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\",\n  },\n\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\",\n  },\n};\n\nexport const formatDistance = (token, count, options) => {\n  let result;\n\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n\n  return result;\n};\n","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}\n","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.mjs\";\n\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\",\n};\n\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\",\n};\n\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\",\n};\n\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\",\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\",\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\",\n  }),\n};\n","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\",\n};\n\nexport const formatRelative = (token, _date, _baseDate, _options) =>\n  formatRelativeLocale[token];\n","/* eslint-disable no-unused-vars */\n\n/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n\n      valuesArray =\n        args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}\n","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.mjs\";\n\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"],\n};\n\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"],\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ],\n\n  wide: [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ],\n};\n\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ],\n};\n\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n};\n\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n};\n\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\n\nexport const localize = {\n  ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\",\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: (quarter) => quarter - 1,\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\",\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\",\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\",\n  }),\n};\n","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n\n    const matchPattern =\n      (width && args.matchPatterns[width]) ||\n      args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n\n    const parsePatterns =\n      (width && args.parsePatterns[width]) ||\n      args.parsePatterns[args.defaultParseWidth];\n\n    const key = Array.isArray(parsePatterns)\n      ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString))\n      : // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n        findKey(parsePatterns, (pattern) => pattern.test(matchedString));\n\n    let value;\n\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n        options.valueCallback(value)\n      : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (\n      Object.prototype.hasOwnProperty.call(object, key) &&\n      predicate(object[key])\n    ) {\n      return key;\n    }\n  }\n  return undefined;\n}\n\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\n","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback\n      ? args.valueCallback(parseResult[0])\n      : parseResult[0];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n","import { buildMatchFn } from \"../../_lib/buildMatchFn.mjs\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.mjs\";\n\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\n\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i,\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i],\n};\n\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i,\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i],\n};\n\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,\n};\nconst parseMonthPatterns = {\n  narrow: [\n    /^j/i,\n    /^f/i,\n    /^m/i,\n    /^a/i,\n    /^m/i,\n    /^j/i,\n    /^j/i,\n    /^a/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n\n  any: [\n    /^ja/i,\n    /^f/i,\n    /^mar/i,\n    /^ap/i,\n    /^may/i,\n    /^jun/i,\n    /^jul/i,\n    /^au/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n};\n\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i,\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i],\n};\n\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i,\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i,\n  },\n};\n\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: (value) => parseInt(value, 10),\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: (index) => index + 1,\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\",\n  }),\n};\n","import { formatDistance } from \"./en-US/_lib/formatDistance.mjs\";\nimport { formatLong } from \"./en-US/_lib/formatLong.mjs\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.mjs\";\nimport { localize } from \"./en-US/_lib/localize.mjs\";\nimport { match } from \"./en-US/_lib/match.mjs\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1,\n  },\n};\n\n// Fallback for modularized imports:\nexport default enUS;\n","import { differenceInCalendarDays } from \"./differenceInCalendarDays.mjs\";\nimport { startOfYear } from \"./startOfYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date) {\n  const _date = toDate(date);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;\n","import { millisecondsInWeek } from \"./constants.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date) {\n  const _date = toDate(date);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;\n","import { constructFrom } from \"./constructFrom.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { toDate } from \"./toDate.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date);\n  const year = _date.getFullYear();\n\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const firstWeekOfNextYear = constructFrom(date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n\n  const firstWeekOfThisYear = constructFrom(date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;\n","import { constructFrom } from \"./constructFrom.mjs\";\nimport { getWeekYear } from \"./getWeekYear.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;\n","import { millisecondsInWeek } from \"./constants.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { startOfWeekYear } from \"./startOfWeekYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\n\nexport function getWeek(date, options) {\n  const _date = toDate(date);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;\n","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}\n","import { addLeadingZeros } from \"../addLeadingZeros.mjs\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(\n      milliseconds * Math.pow(10, numberOfDigits - 3),\n    );\n    return addLeadingZeros(fractionalSeconds, token.length);\n  },\n};\n","import { getDayOfYear } from \"../../getDayOfYear.mjs\";\nimport { getISOWeek } from \"../../getISOWeek.mjs\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.mjs\";\nimport { getWeek } from \"../../getWeek.mjs\";\nimport { getWeekYear } from \"../../getWeekYear.mjs\";\nimport { addLeadingZeros } from \"../addLeadingZeros.mjs\";\nimport { lightFormatters } from \"./lightFormatters.mjs\";\n\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\",\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, { width: \"abbreviated\" });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, { width: \"narrow\" });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, { width: \"wide\" });\n    }\n  },\n\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, { unit: \"year\" });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, { unit: \"year\" });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"formatting\" });\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"standalone\" });\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), { unit: \"date\" });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, { unit: \"dayOfYear\" });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\",\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, { unit: \"day\" });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"aaa\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"bbb\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), { unit: \"hour\" });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), { unit: \"minute\" });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), { unit: \"second\" });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(date.getTime() / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    const timestamp = date.getTime();\n    return addLeadingZeros(timestamp, token.length);\n  },\n};\n\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\n\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({ width: \"short\" });\n    case \"PP\":\n      return formatLong.date({ width: \"medium\" });\n    case \"PPP\":\n      return formatLong.date({ width: \"long\" });\n    case \"PPPP\":\n    default:\n      return formatLong.date({ width: \"full\" });\n  }\n};\n\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({ width: \"short\" });\n    case \"pp\":\n      return formatLong.time({ width: \"medium\" });\n    case \"ppp\":\n      return formatLong.time({ width: \"long\" });\n    case \"pppp\":\n    default:\n      return formatLong.time({ width: \"full\" });\n  }\n};\n\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  let dateTimeFormat;\n\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({ width: \"short\" });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"medium\" });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"long\" });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({ width: \"full\" });\n      break;\n  }\n\n  return dateTimeFormat\n    .replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong))\n    .replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\n\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter,\n};\n","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\n\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\n\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\n\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\n\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\n\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}\n","import { defaultLocale } from \"./_lib/defaultLocale.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\nimport { formatters } from \"./_lib/format/formatters.mjs\";\nimport { longFormatters } from \"./_lib/format/longFormatters.mjs\";\nimport {\n  isProtectedDayOfYearToken,\n  isProtectedWeekYearToken,\n  warnOrThrowProtectedError,\n} from \"./_lib/protectedTokens.mjs\";\nimport { isValid } from \"./isValid.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp =\n  /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const originalDate = toDate(date);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  let parts = formatStr\n    .match(longFormattingTokensRegExp)\n    .map((substring) => {\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n        const longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong);\n      }\n      return substring;\n    })\n    .join(\"\")\n    .match(formattingTokensRegExp)\n    .map((substring) => {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return { isToken: false, value: \"'\" };\n      }\n\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return { isToken: false, value: cleanEscapedString(substring) };\n      }\n\n      if (formatters[firstCharacter]) {\n        return { isToken: true, value: substring };\n      }\n\n      if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n        throw new RangeError(\n          \"Format string contains an unescaped latin alphabet character `\" +\n            firstCharacter +\n            \"`\",\n        );\n      }\n\n      return { isToken: false, value: substring };\n    });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale,\n  };\n\n  return parts\n    .map((part) => {\n      if (!part.isToken) return part.value;\n\n      const token = part.value;\n\n      if (\n        (!options?.useAdditionalWeekYearTokens &&\n          isProtectedWeekYearToken(token)) ||\n        (!options?.useAdditionalDayOfYearTokens &&\n          isProtectedDayOfYearToken(token))\n      ) {\n        warnOrThrowProtectedError(token, formatStr, String(date));\n      }\n\n      const formatter = formatters[token[0]];\n      return formatter(originalDate, token, locale.localize, formatterOptions);\n    })\n    .join(\"\");\n}\n\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"moins d’une seconde\",\n    other: \"moins de {{count}} secondes\",\n  },\n\n  xSeconds: {\n    one: \"1 seconde\",\n    other: \"{{count}} secondes\",\n  },\n\n  halfAMinute: \"30 secondes\",\n\n  lessThanXMinutes: {\n    one: \"moins d’une minute\",\n    other: \"moins de {{count}} minutes\",\n  },\n\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\",\n  },\n\n  aboutXHours: {\n    one: \"environ 1 heure\",\n    other: \"environ {{count}} heures\",\n  },\n\n  xHours: {\n    one: \"1 heure\",\n    other: \"{{count}} heures\",\n  },\n\n  xDays: {\n    one: \"1 jour\",\n    other: \"{{count}} jours\",\n  },\n\n  aboutXWeeks: {\n    one: \"environ 1 semaine\",\n    other: \"environ {{count}} semaines\",\n  },\n\n  xWeeks: {\n    one: \"1 semaine\",\n    other: \"{{count}} semaines\",\n  },\n\n  aboutXMonths: {\n    one: \"environ 1 mois\",\n    other: \"environ {{count}} mois\",\n  },\n\n  xMonths: {\n    one: \"1 mois\",\n    other: \"{{count}} mois\",\n  },\n\n  aboutXYears: {\n    one: \"environ 1 an\",\n    other: \"environ {{count}} ans\",\n  },\n\n  xYears: {\n    one: \"1 an\",\n    other: \"{{count}} ans\",\n  },\n\n  overXYears: {\n    one: \"plus d’un an\",\n    other: \"plus de {{count}} ans\",\n  },\n\n  almostXYears: {\n    one: \"presqu’un an\",\n    other: \"presque {{count}} ans\",\n  },\n};\n\nexport const formatDistance = (token, count, options) => {\n  let result;\n  const form = formatDistanceLocale[token];\n  if (typeof form === \"string\") {\n    result = form;\n  } else if (count === 1) {\n    result = form.one;\n  } else {\n    result = form.other.replace(\"{{count}}\", String(count));\n  }\n\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"dans \" + result;\n    } else {\n      return \"il y a \" + result;\n    }\n  }\n\n  return result;\n};\n","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.mjs\";\n\nconst dateFormats = {\n  full: \"EEEE d MMMM y\",\n  long: \"d MMMM y\",\n  medium: \"d MMM y\",\n  short: \"dd/MM/y\",\n};\n\nconst timeFormats = {\n  full: \"HH:mm:ss zzzz\",\n  long: \"HH:mm:ss z\",\n  medium: \"HH:mm:ss\",\n  short: \"HH:mm\",\n};\n\nconst dateTimeFormats = {\n  full: \"{{date}} 'à' {{time}}\",\n  long: \"{{date}} 'à' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\",\n};\n\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\",\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\",\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\",\n  }),\n};\n","const formatRelativeLocale = {\n  lastWeek: \"eeee 'dernier à' p\",\n  yesterday: \"'hier à' p\",\n  today: \"'aujourd’hui à' p\",\n  tomorrow: \"'demain à' p'\",\n  nextWeek: \"eeee 'prochain à' p\",\n  other: \"P\",\n};\n\nexport const formatRelative = (token, _date, _baseDate, _options) =>\n  formatRelativeLocale[token];\n","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.mjs\";\n\nconst eraValues = {\n  narrow: [\"av. J.-C\", \"ap. J.-C\"],\n  abbreviated: [\"av. J.-C\", \"ap. J.-C\"],\n  wide: [\"avant Jésus-Christ\", \"après Jésus-Christ\"],\n};\n\nconst quarterValues = {\n  narrow: [\"T1\", \"T2\", \"T3\", \"T4\"],\n  abbreviated: [\"1er trim.\", \"2ème trim.\", \"3ème trim.\", \"4ème trim.\"],\n  wide: [\"1er trimestre\", \"2ème trimestre\", \"3ème trimestre\", \"4ème trimestre\"],\n};\n\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\n    \"janv.\",\n    \"févr.\",\n    \"mars\",\n    \"avr.\",\n    \"mai\",\n    \"juin\",\n    \"juil.\",\n    \"août\",\n    \"sept.\",\n    \"oct.\",\n    \"nov.\",\n    \"déc.\",\n  ],\n\n  wide: [\n    \"janvier\",\n    \"février\",\n    \"mars\",\n    \"avril\",\n    \"mai\",\n    \"juin\",\n    \"juillet\",\n    \"août\",\n    \"septembre\",\n    \"octobre\",\n    \"novembre\",\n    \"décembre\",\n  ],\n};\n\nconst dayValues = {\n  narrow: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"],\n  short: [\"di\", \"lu\", \"ma\", \"me\", \"je\", \"ve\", \"sa\"],\n  abbreviated: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\n  wide: [\n    \"dimanche\",\n    \"lundi\",\n    \"mardi\",\n    \"mercredi\",\n    \"jeudi\",\n    \"vendredi\",\n    \"samedi\",\n  ],\n};\n\nconst dayPeriodValues = {\n  narrow: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"minuit\",\n    noon: \"midi\",\n    morning: \"mat.\",\n    afternoon: \"ap.m.\",\n    evening: \"soir\",\n    night: \"mat.\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"minuit\",\n    noon: \"midi\",\n    morning: \"matin\",\n    afternoon: \"après-midi\",\n    evening: \"soir\",\n    night: \"matin\",\n  },\n  wide: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"minuit\",\n    noon: \"midi\",\n    morning: \"du matin\",\n    afternoon: \"de l’après-midi\",\n    evening: \"du soir\",\n    night: \"du matin\",\n  },\n};\n\nconst ordinalNumber = (dirtyNumber, options) => {\n  const number = Number(dirtyNumber);\n  const unit = options?.unit;\n\n  if (number === 0) return \"0\";\n\n  const feminineUnits = [\"year\", \"week\", \"hour\", \"minute\", \"second\"];\n  let suffix;\n\n  if (number === 1) {\n    suffix = unit && feminineUnits.includes(unit) ? \"ère\" : \"er\";\n  } else {\n    suffix = \"ème\";\n  }\n\n  return number + suffix;\n};\n\nconst LONG_MONTHS_TOKENS = [\"MMM\", \"MMMM\"];\n\nexport const localize = {\n  preprocessor: (date, parts) => {\n    // Replaces the `do` tokens with `d` when used with long month tokens and the day of the month is greater than one.\n    // Use case \"do MMMM\" => 1er août, 29 août\n    // see https://github.com/date-fns/date-fns/issues/1391\n\n    if (date.getDate() === 1) return parts;\n\n    const hasLongMonthToken = parts.some(\n      (part) => part.isToken && LONG_MONTHS_TOKENS.includes(part.value),\n    );\n\n    if (!hasLongMonthToken) return parts;\n\n    return parts.map((part) =>\n      part.isToken && part.value === \"do\"\n        ? { isToken: true, value: \"d\" }\n        : part,\n    );\n  },\n\n  ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\",\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: (quarter) => quarter - 1,\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\",\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\",\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n  }),\n};\n","import { buildMatchFn } from \"../../_lib/buildMatchFn.mjs\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.mjs\";\n\nconst matchOrdinalNumberPattern = /^(\\d+)(ième|ère|ème|er|e)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\n\nconst matchEraPatterns = {\n  narrow: /^(av\\.J\\.C|ap\\.J\\.C|ap\\.J\\.-C)/i,\n  abbreviated: /^(av\\.J\\.-C|av\\.J-C|apr\\.J\\.-C|apr\\.J-C|ap\\.J-C)/i,\n  wide: /^(avant Jésus-Christ|après Jésus-Christ)/i,\n};\nconst parseEraPatterns = {\n  any: [/^av/i, /^ap/i],\n};\n\nconst matchQuarterPatterns = {\n  narrow: /^T?[1234]/i,\n  abbreviated: /^[1234](er|ème|e)? trim\\.?/i,\n  wide: /^[1234](er|ème|e)? trimestre/i,\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i],\n};\n\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated:\n    /^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\\.?/i,\n  wide: /^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,\n};\nconst parseMonthPatterns = {\n  narrow: [\n    /^j/i,\n    /^f/i,\n    /^m/i,\n    /^a/i,\n    /^m/i,\n    /^j/i,\n    /^j/i,\n    /^a/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n\n  any: [\n    /^ja/i,\n    /^f/i,\n    /^mar/i,\n    /^av/i,\n    /^ma/i,\n    /^juin/i,\n    /^juil/i,\n    /^ao/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n};\n\nconst matchDayPatterns = {\n  narrow: /^[lmjvsd]/i,\n  short: /^(di|lu|ma|me|je|ve|sa)/i,\n  abbreviated: /^(dim|lun|mar|mer|jeu|ven|sam)\\.?/i,\n  wide: /^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i,\n};\nconst parseDayPatterns = {\n  narrow: [/^d/i, /^l/i, /^m/i, /^m/i, /^j/i, /^v/i, /^s/i],\n  any: [/^di/i, /^lu/i, /^ma/i, /^me/i, /^je/i, /^ve/i, /^sa/i],\n};\n\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|minuit|midi|mat\\.?|ap\\.?m\\.?|soir|nuit)/i,\n  any: /^([ap]\\.?\\s?m\\.?|du matin|de l'après[-\\s]midi|du soir|de la nuit)/i,\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^min/i,\n    noon: /^mid/i,\n    morning: /mat/i,\n    afternoon: /ap/i,\n    evening: /soir/i,\n    night: /nuit/i,\n  },\n};\n\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: (value) => parseInt(value),\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: (index) => index + 1,\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\",\n  }),\n};\n","import { formatDistance } from \"./fr/_lib/formatDistance.mjs\";\nimport { formatLong } from \"./fr/_lib/formatLong.mjs\";\nimport { formatRelative } from \"./fr/_lib/formatRelative.mjs\";\nimport { localize } from \"./fr/_lib/localize.mjs\";\nimport { match } from \"./fr/_lib/match.mjs\";\n\n/**\n * @category Locales\n * @summary French locale.\n * @language French\n * @iso-639-2 fra\n * @author Jean Dupouy [@izeau](https://github.com/izeau)\n * @author François B [@fbonzon](https://github.com/fbonzon)\n */\nexport const fr = {\n  code: \"fr\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 1 /* Monday */,\n    firstWeekContainsDate: 4,\n  },\n};\n\n// Fallback for modularized imports:\nexport default fr;\n","import React, { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { createLogger } from \"@/utils/logger\";\nimport { fetchCommunityEntries, deleteCommunityEntry, restoreCommunityEntry } from \"@/services/communityServiceBridge\";\nimport { CommunityEntry } from \"@/types/communityTypes\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { format } from \"date-fns\";\nimport { fr } from \"date-fns/locale\";\n// Import des icônes individuellement\nimport Loader from \"lucide-react/dist/esm/icons/loader\";\nimport Trash from \"lucide-react/dist/esm/icons/trash\";\nimport CheckCircle from \"lucide-react/dist/esm/icons/check-circle\";\nimport XCircle from \"lucide-react/dist/esm/icons/x-circle\";\n\n// Créer un logger pour le composant\nconst logger = createLogger('CommunityManagement');\n\nexport function CommunityManagement() {\n  const [entries, setEntries] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [deleting, setDeleting] = useState<string | null>(null);\n  const [restoring, setRestoring] = useState<string | null>(null);\n\n  // Charger les contributions au chargement du composant\n  useEffect(() => {\n    loadEntries();\n  }, []);\n\n  // Fonction pour charger les contributions\n  const loadEntries = async () => {\n    try {\n      setLoading(true);\n      const data = await fetchCommunityEntries();\n      logger.info(`${data.length} contributions chargées`);\n      setEntries(data as any[]);\n    } catch (error) {\n      logger.error('Erreur lors du chargement des contributions', error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de charger les contributions\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fonction pour supprimer une contribution\n  const handleDelete = async (entryId: string) => {\n    try {\n      setDeleting(entryId);\n      logger.info(`Suppression de la contribution ${entryId}`);\n      \n      await deleteCommunityEntry(entryId);\n      \n      // Mettre à jour la liste des contributions\n      setEntries(prev => prev.filter(entry => entry.id !== entryId));\n      \n      toast({\n        title: \"Succès\",\n        description: \"Contribution supprimée avec succès\",\n        variant: \"default\"\n      });\n    } catch (error) {\n      logger.error(`Erreur lors de la suppression de la contribution ${entryId}`, error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de supprimer la contribution\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setDeleting(null);\n    }\n  };\n\n  // Fonction pour restaurer une contribution\n  const handleRestore = async (entryId: string) => {\n    try {\n      setRestoring(entryId);\n      logger.info(`Restauration de la contribution ${entryId}`);\n      \n      await restoreCommunityEntry(entryId);\n      \n      // Mettre à jour la liste des contributions\n      setEntries(prev => prev.map(entry => entry.id === entryId ? { ...entry, moderation: { status: 'pending' } } : entry));\n      \n      toast({\n        title: \"Succès\",\n        description: \"Contribution restaurée avec succès\",\n        variant: \"default\"\n      });\n    } catch (error) {\n      logger.error(`Erreur lors de la restauration de la contribution ${entryId}`, error);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de restaurer la contribution\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setRestoring(null);\n    }\n  };\n\n  // Fonction pour formater la date\n  const formatDate = (dateString: string) => {\n    try {\n      if (!dateString) return \"Date inconnue\";\n      const date = new Date(dateString);\n      if (isNaN(date.getTime())) return \"Date invalide\";\n      return format(date, \"dd/MM/yyyy HH:mm\", { locale: fr });\n    } catch (error) {\n      return \"Date invalide\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-lg font-semibold\">Gestion des contributions communautaires</h2>\n        <Button \n          onClick={loadEntries} \n          variant=\"outline\" \n          size=\"sm\"\n          disabled={loading}\n        >\n          {loading ? <Loader className=\"h-4 w-4 animate-spin mr-2\" /> : null}\n          Actualiser\n        </Button>\n      </div>\n\n      <Tabs defaultValue=\"all\">\n        <TabsList className=\"mb-4\">\n          <TabsTrigger value=\"all\">Toutes</TabsTrigger>\n          <TabsTrigger value=\"photos\">Photos</TabsTrigger>\n          <TabsTrigger value=\"testimonials\">Témoignages</TabsTrigger>\n          <TabsTrigger value=\"pending\">En attente</TabsTrigger>\n          <TabsTrigger value=\"archived\">Archivées</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"all\">\n          {renderEntries(entries.filter(entry => entry.moderation?.status !== 'rejected'), deleting, handleDelete)}\n        </TabsContent>\n\n        <TabsContent value=\"photos\">\n          {renderEntries(entries.filter(entry => entry.type === 'photo' && entry.moderation?.status !== 'rejected'), deleting, handleDelete)}\n        </TabsContent>\n\n        <TabsContent value=\"testimonials\">\n          {renderEntries(entries.filter(entry => entry.type === 'testimonial' && entry.moderation?.status !== 'rejected'), deleting, handleDelete)}\n        </TabsContent>\n\n        <TabsContent value=\"pending\">\n          {renderEntries(\n            entries.filter(entry => entry.moderation?.status === 'pending'),\n            deleting,\n            handleDelete\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"archived\">\n          {renderArchivedEntries(\n            entries.filter(entry => entry.moderation?.status === 'rejected'),\n            restoring,\n            handleRestore\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n\n  // Fonction pour afficher les contributions\n  function renderEntries(entriesToRender: CommunityEntry[], deletingId: string | null, onDelete: (id: string) => void) {\n    if (loading) {\n      return (\n        <div className=\"flex justify-center items-center py-12\">\n          <Loader className=\"h-8 w-8 animate-spin text-gray-500\" />\n        </div>\n      );\n    }\n\n    if (entriesToRender.length === 0) {\n      return (\n        <div className=\"text-center py-12 text-gray-500\">\n          Aucune contribution trouvée\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {entriesToRender.map(entry => (\n          <Card key={entry.id} className=\"overflow-hidden\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <p className=\"font-medium\">{entry.displayName || \"Anonyme\"}</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {entry.type === 'photo' ? 'Photo' : 'Témoignage'} • {formatDate(entry.timestamp || entry.createdAt)}\n                  </p>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {entry.moderation?.status === 'approved' ? (\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  ) : entry.moderation?.status === 'rejected' ? (\n                    <XCircle className=\"h-5 w-5 text-red-500\" />\n                  ) : (\n                    <div className=\"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full\">En attente</div>\n                  )}\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\"\n                    className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\n                    onClick={() => onDelete(entry.id)}\n                    disabled={deletingId === entry.id}\n                  >\n                    {deletingId === entry.id ? (\n                      <Loader className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <Trash className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n\n              {entry.type === 'photo' && entry.imageUrl && (\n                <div className=\"mt-3 relative pt-[56.25%]\">\n                  <img \n                    src={entry.imageUrl} \n                    alt={`Contribution de ${entry.displayName}`}\n                    className=\"absolute top-0 left-0 w-full h-full object-cover rounded-md\"\n                    onError={(e) => {\n                      const basePath = typeof window !== 'undefined' && window.location.hostname.includes('github.io')\n                        ? '/1Hall1Artiste'\n                        : '';\n                      e.currentTarget.src = `${basePath}/images/placeholder-image.jpg`;\n                    }}\n                  />\n                </div>\n              )}\n\n              {entry.type === 'testimonial' && entry.content && (\n                <div className=\"mt-3 p-3 bg-gray-50 rounded-md\">\n                  <p className=\"text-gray-700\">{entry.content}</p>\n                </div>\n              )}\n\n              <div className=\"mt-3 text-sm text-gray-500\">\n                <p>ID: {entry.id}</p>\n                {entry.eventId && <p>Événement: {entry.eventId}</p>}\n                {entry.locationId && <p>Lieu: {entry.locationId}</p>}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  // Fonction pour afficher les contributions archivées\n  function renderArchivedEntries(entriesToRender: CommunityEntry[], restoringId: string | null, onRestore: (id: string) => void) {\n    if (loading) {\n      return (\n        <div className=\"flex justify-center items-center py-12\">\n          <Loader className=\"h-8 w-8 animate-spin text-gray-500\" />\n        </div>\n      );\n    }\n\n    if (entriesToRender.length === 0) {\n      return (\n        <div className=\"text-center py-12 text-gray-500\">\n          Aucune contribution archivée trouvée\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {entriesToRender.map(entry => (\n          <Card key={entry.id} className=\"overflow-hidden\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <p className=\"font-medium\">{entry.displayName || \"Anonyme\"}</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {entry.type === 'photo' ? 'Photo' : 'Témoignage'} • {formatDate(entry.timestamp || entry.createdAt)}\n                  </p>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <XCircle className=\"h-5 w-5 text-red-500\" />\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\"\n                    className=\"text-blue-500 hover:text-blue-700 hover:bg-blue-50\"\n                    onClick={() => onRestore(entry.id)}\n                    disabled={restoringId === entry.id}\n                  >\n                    {restoringId === entry.id ? (\n                      <Loader className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <CheckCircle className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n\n              {entry.type === 'photo' && entry.imageUrl && (\n                <div className=\"mt-3 relative pt-[56.25%]\">\n                  <img \n                    src={entry.imageUrl} \n                    alt={`Contribution de ${entry.displayName}`}\n                    className=\"absolute top-0 left-0 w-full h-full object-cover rounded-md\"\n                    onError={(e) => {\n                      const basePath = typeof window !== 'undefined' && window.location.hostname.includes('github.io')\n                        ? '/1Hall1Artiste'\n                        : '';\n                      e.currentTarget.src = `${basePath}/images/placeholder-image.jpg`;\n                    }}\n                  />\n                </div>\n              )}\n\n              {entry.type === 'testimonial' && entry.content && (\n                <div className=\"mt-3 p-3 bg-gray-50 rounded-md\">\n                  <p className=\"text-gray-700\">{entry.content}</p>\n                </div>\n              )}\n\n              <div className=\"mt-3 text-sm text-gray-500\">\n                <p>ID: {entry.id}</p>\n                {entry.eventId && <p>Événement: {entry.eventId}</p>}\n                {entry.locationId && <p>Lieu: {entry.locationId}</p>}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n}\n","import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Location } from \"@/data/locations\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { createLogger } from \"@/utils/logger\";\nimport { MapComponent, MAP_WIDTH, MAP_HEIGHT } from \"@/components/MapComponent\";\nimport { useData, useEvents, useLocations } from \"@/hooks/useData\";\nimport { ImportExportPanel } from \"@/components/ImportExportPanel\";\nimport { EventForm } from \"@/components/EventForm\";\nimport { AdminLogin } from \"@/components/AdminLogin\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { CommunityManagement } from \"@/components/CommunityManagement\";\n\n// Créer un logger pour le composant Admin\nconst logger = createLogger('Admin');\n\nexport default function Admin() {\n  logger.info('Initialisation du composant Admin');\n  \n  const navigate = useNavigate();\n  // Utiliser les hooks personnalisés pour accéder aux données\n  const { events } = useEvents();\n  const { locations } = useLocations();\n  const { updateEvent, updateLocation } = useData();\n  \n  const [mapLocations, setMapLocations] = useState<Location[]>([]);\n  const [activeLocation, setActiveLocation] = useState<string | null>(null);\n  const [coordinates, setCoordinates] = useState<{ x: number; y: number }>({ x: 0, y: 0 });\n  const [mapClicked, setMapClicked] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  \n  // Vérifier si l'utilisateur est déjà authentifié (session storage)\n  useEffect(() => {\n    const adminAuthenticated = sessionStorage.getItem('adminAuthenticated');\n    if (adminAuthenticated === 'true') {\n      setIsAuthenticated(true);\n    }\n  }, []);\n  \n  useEffect(() => {\n    // Utiliser les lieux au lieu des événements pour éviter les doublons\n    logger.info('Chargement initial des lieux');\n    logger.debug('Données de lieux chargées', locations);\n    setMapLocations(locations);\n  }, [locations]);\n\n  const handleLocationSelect = (locationId: string) => {\n    logger.info(`Sélection du lieu ${locationId}`);\n    setActiveLocation(locationId);\n    \n    const location = mapLocations.find(loc => loc.id === locationId);\n    if (location) {\n      setCoordinates({ x: location.x, y: location.y });\n    }\n  };\n\n  const handleMapClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    logger.info('Clic sur la carte');\n    \n    try {\n      // Obtenir les coordonnées du clic\n      const x = Math.round(e.nativeEvent.offsetX);\n      const y = Math.round(e.nativeEvent.offsetY);\n      \n      // Log des coordonnées pour référence\n      logger.info(`Coordonnées du clic: x=${x}, y=${y}`);\n      \n      // Définir les coordonnées pour le point sélectionné\n      setCoordinates({ x, y });\n      setMapClicked(true);\n      \n      // Tester immédiatement les nouvelles coordonnées\n      testCoordinatesOnMap();\n    } catch (error) {\n      logger.error('Erreur lors du clic sur la carte', error);\n    }\n  };\n\n  const handleUpdateCoordinates = () => {\n    logger.info('Demande de mise à jour des coordonnées');\n    logger.debug('État actuel', { activeLocation, coordinates, mapClicked });\n    \n    try {\n      if (!activeLocation) {\n        logger.warn('Tentative de mise à jour sans lieu sélectionné');\n        alert(\"Veuillez d'abord sélectionner un lieu\");\n        return;\n      }\n      \n      if (!mapClicked && (!coordinates.x || !coordinates.y)) {\n        logger.warn('Tentative de mise à jour avec des coordonnées invalides');\n        alert(\"Veuillez cliquer sur la carte pour définir les nouvelles coordonnées\");\n        return;\n      }\n      \n      // Mettre à jour les coordonnées dans l'état local\n      const updatedLocations = mapLocations.map(location => {\n        if (location.id === activeLocation) {\n          logger.debug('Mise à jour des coordonnées pour', {\n            id: location.id,\n            name: location.name,\n            oldX: location.x,\n            oldY: location.y,\n            newX: coordinates.x,\n            newY: coordinates.y\n          });\n          return { ...location, x: coordinates.x, y: coordinates.y };\n        }\n        return location;\n      });\n      \n      setMapLocations(updatedLocations);\n      setMapClicked(false);\n      \n      // Nous n'utilisons plus localStorage directement, tout passe par le service de données\n      logger.info('Mise à jour des coordonnées via le service de données');\n      logger.debug('Nouvelles coordonnées', updatedLocations);\n      \n      // Mettre à jour les coordonnées dans l'application en utilisant le service de données centralisé\n      const locationToUpdate = locations.find(loc => loc.id === activeLocation);\n      \n      if (locationToUpdate) {\n        logger.info(`Mise à jour des coordonnées dans le service de données pour ${locationToUpdate.name}`);\n        \n        // Créer une copie mise à jour du lieu\n        const updatedLocation = { \n          ...locationToUpdate, \n          x: coordinates.x, \n          y: coordinates.y \n        };\n        \n        // Mettre à jour le lieu via le service de données\n        const updateResult = updateLocation(updatedLocation);\n        \n        if (updateResult.success) {\n          logger.debug('Coordonnées mises à jour dans le service de données', {\n            id: updatedLocation.id,\n            name: updatedLocation.name,\n            oldX: locationToUpdate.x,\n            oldY: locationToUpdate.y,\n            newX: coordinates.x,\n            newY: coordinates.y\n          });\n          \n          // Mettre à jour les événements associés à ce lieu\n          const locationEvents = events.filter(event => event.locationName === updatedLocation.name);\n          logger.info(`Mise à jour de ${locationEvents.length} événements associés au lieu ${updatedLocation.name}`);\n          \n          // Note: Les événements n'ont pas de coordonnées x,y directes\n          // Ils héritent des coordonnées de leur lieu via locationId\n          logger.info(`${locationEvents.length} événements associés au lieu ${updatedLocation.name} hériteront automatiquement des nouvelles coordonnées`);\n          \n          logger.info(`Coordonnées mises à jour pour ${updatedLocation.name} et ${locationEvents.length} événements associés`);\n        } else {\n          logger.error(`Erreur lors de la mise à jour du lieu ${locationToUpdate.id}`, updateResult.error);\n        }\n      } else {\n        logger.warn(`Lieu avec ID ${activeLocation} non trouvé dans la liste globale des lieux`);\n      }\n      \n      // Afficher une confirmation sans redirection\n      const locationName = mapLocations.find(l => l.id === activeLocation)?.name;\n      logger.info(`Confirmation de mise à jour pour ${locationName}`);\n      alert(`Coordonnées mises à jour pour ${locationName}\\nX: ${coordinates.x}, Y: ${coordinates.y}\\n\\nLes modifications ont été enregistrées avec succès.`);\n    } catch (error) {\n      logger.error('Erreur lors de la mise à jour des coordonnées', error);\n      alert(`Erreur lors de la mise à jour des coordonnées: ${error}`);\n    }\n  };\n\n  const testCoordinatesOnMap = () => {\n    logger.info('Test des coordonnées sur la carte');\n    \n    if (!activeLocation) {\n      logger.warn('Tentative de test sans lieu sélectionné');\n      alert(\"Veuillez d'abord sélectionner un lieu\");\n      return;\n    }\n    \n    // Créer une copie temporaire des lieux avec les nouvelles coordonnées pour le lieu actif\n    const testLocations = mapLocations.map(location => {\n      if (location.id === activeLocation) {\n        // Utiliser les coordonnées actuelles du formulaire\n        const newLocation = { ...location, x: coordinates.x, y: coordinates.y };\n        logger.debug('Mise à jour temporaire des coordonnées pour le test', {\n          id: location.id,\n          name: location.name,\n          oldX: location.x,\n          oldY: location.y,\n          newX: coordinates.x,\n          newY: coordinates.y\n        });\n        return newLocation;\n      }\n      return location;\n    });\n    \n    // Mettre à jour l'état local pour afficher les nouvelles coordonnées sur la carte\n    setMapLocations(testLocations);\n    logger.info('Coordonnées de test appliquées temporairement', coordinates);\n  };\n\n  const exportLocations = () => {\n    logger.info('Exportation des coordonnées');\n    \n    try {\n      const locationsData = JSON.stringify(mapLocations, null, 2);\n      const blob = new Blob([locationsData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      \n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'locations.json';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      \n      logger.info('Exportation des coordonnées réussie');\n    } catch (error) {\n      logger.error('Erreur lors de l\\'exportation des coordonnées', error);\n      alert(`Erreur lors de l'exportation des coordonnées: ${error}`);\n    }\n  };\n\n  const handleLogin = () => {\n    setIsAuthenticated(true);\n    sessionStorage.setItem('adminAuthenticated', 'true');\n  };\n  \n  const clearLocalStorage = () => {\n    localStorage.clear();\n    toast({\n      title: \"LocalStorage vidé\",\n      description: \"Toutes les données locales ont été effacées.\",\n      variant: \"destructive\"\n    });\n    logger.info('LocalStorage vidé par l\\'administrateur');\n    setTimeout(() => window.location.reload(), 1500);\n  };\n  \n  const resetOnboarding = () => {\n    localStorage.removeItem('hasSeenOnboarding');\n    toast({\n      title: \"Onboarding réinitialisé\",\n      description: \"L'onboarding s'affichera au prochain chargement de l'application.\",\n    });\n    logger.info('Onboarding réinitialisé par l\\'administrateur');\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"container mx-auto py-4 px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-6 flex items-center\">\n          <Button\n            variant=\"ghost\"\n            className=\"mr-2 p-0 h-auto\"\n            onClick={() => navigate(-1)}\n          >\n            <ArrowLeft className=\"h-6 w-6\" />\n          </Button>\n          <h1 className=\"text-2xl font-bold text-[#4a5d94]\">Administration</h1>\n        </div>\n        \n        <AdminLogin onLogin={handleLogin} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto py-4 px-4 sm:px-6 lg:px-8\">\n      <div className=\"mb-6 flex items-center\">\n        <Button\n          variant=\"ghost\"\n          className=\"mr-2 p-0 h-auto\"\n          onClick={() => navigate(-1)}\n        >\n          <ArrowLeft className=\"h-6 w-6\" />\n        </Button>\n        <h1 className=\"text-2xl font-bold text-[#4a5d94]\">Administration</h1>\n      </div>\n      \n      <div className=\"space-y-6\">\n        <Tabs defaultValue=\"coordinates\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-5\">\n            <TabsTrigger value=\"events\">Événements</TabsTrigger>\n            <TabsTrigger value=\"locations\">Lieux</TabsTrigger>\n            <TabsTrigger value=\"community\">Contributions</TabsTrigger>\n            <TabsTrigger value=\"import-export\">Import/Export</TabsTrigger>\n            <TabsTrigger value=\"reset\">Réinitialisation</TabsTrigger>\n          </TabsList>\n          \n          {/* Onglet de gestion des coordonnées */}\n          <TabsContent value=\"locations\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-[#4a5d94]\">Gestion des coordonnées</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 gap-4\">\n                  <div>\n                    <h2 className=\"text-lg font-semibold mb-2\">Lieux</h2>\n                    <p className=\"text-sm text-gray-500 mb-2\">Sélectionnez un lieu pour modifier ses coordonnées</p>\n                    \n                    <div className=\"space-y-2\">\n                      {mapLocations.map(location => (\n                        <Button\n                          key={location.id}\n                          variant={activeLocation === location.id ? \"default\" : \"outline\"}\n                          className={`w-full justify-start ${activeLocation === location.id ? 'bg-[#4a5d94]' : ''}`}\n                          onClick={() => handleLocationSelect(location.id)}\n                        >\n                          {location.name}\n                        </Button>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {activeLocation && (\n                    <div>\n                      <h2 className=\"text-lg font-semibold mb-2\">Coordonnées</h2>\n                      <p className=\"text-sm text-gray-500 mb-2\">\n                        Modifiez les coordonnées du lieu sélectionné\n                      </p>\n                      \n                      <div className=\"grid grid-cols-2 gap-4 mb-2\">\n                        <div>\n                          <Label htmlFor=\"new-x\">X</Label>\n                          <Input \n                            id=\"new-x\" \n                            type=\"number\" \n                            value={coordinates.x}\n                            onChange={(e) => setCoordinates({...coordinates, x: e.target.value ? parseInt(e.target.value) : 0})}\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"new-y\">Y</Label>\n                          <Input \n                            id=\"new-y\" \n                            type=\"number\" \n                            value={coordinates.y}\n                            onChange={(e) => setCoordinates({...coordinates, y: e.target.value ? parseInt(e.target.value) : 0})}\n                          />\n                        </div>\n                      </div>\n                      \n                      <Button \n                        className=\"w-full bg-[#4a5d94] mb-2\" \n                        onClick={handleUpdateCoordinates}\n                      >\n                        Mettre à jour les coordonnées\n                      </Button>\n                      \n                      <Button \n                        className=\"w-full bg-[#ff7a45] mb-2\" \n                        onClick={testCoordinatesOnMap}\n                      >\n                        Tester sur la carte\n                      </Button>\n                    </div>\n                  )}\n                  \n                  <div className=\"relative\">\n                    <h2 className=\"text-lg font-semibold mb-2\">Carte</h2>\n                    <p className=\"text-sm text-gray-500 mb-2\">Cliquez sur la carte pour définir la position du lieu sélectionné</p>\n                    \n                    <div className=\"bg-white rounded-lg mb-4 border-0 transition-all duration-300 hover:shadow-lg w-full\">\n                      <div className=\"flex justify-center\">\n                        <MapComponent \n                          locations={mapLocations} \n                          activeLocation={activeLocation} \n                          onClick={handleMapClick} \n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          {/* Onglet de gestion des événements */}\n          <TabsContent value=\"events\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-[#4a5d94]\">Gestion des événements</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <EventForm onSuccess={() => {\n                  logger.info('Événement ajouté avec succès');\n                }} />\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          {/* Onglet de gestion des contributions */}\n          <TabsContent value=\"community\" className=\"space-y-4\">\n            <CommunityManagement />\n          </TabsContent>\n          \n          {/* Onglet d'import/export */}\n          <TabsContent value=\"import-export\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-[#4a5d94]\">Import / Export des données</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ImportExportPanel />\n                \n                <div className=\"mt-4\">\n                  <Button \n                    className=\"w-full bg-[#4a5d94]\" \n                    onClick={exportLocations}\n                  >\n                    Exporter les coordonnées\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          {/* Onglet de réinitialisation */}\n          <TabsContent value=\"reset\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-[#4a5d94]\">Réinitialisation des données</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  <div>\n                    <h2 className=\"text-lg font-semibold mb-2\">Réinitialisation du localStorage</h2>\n                    <p className=\"text-sm text-gray-500 mb-4\">\n                      Attention : cette action effacera toutes les données locales de l'application, y compris les événements sauvegardés, les lieux visités et les préférences utilisateur.                      \n                    </p>\n                    <Button \n                      onClick={clearLocalStorage}\n                      className=\"w-full bg-red-600 hover:bg-red-700 text-white\"\n                    >\n                      Vider le localStorage\n                    </Button>\n                  </div>\n                  \n                  <div>\n                    <h2 className=\"text-lg font-semibold mb-2\">Réinitialisation de l'onboarding</h2>\n                    <p className=\"text-sm text-gray-500 mb-4\">\n                      Cette action réinitialisera uniquement l'onboarding. L'écran d'accueil s'affichera au prochain chargement de l'application.\n                    </p>\n                    <Button \n                      onClick={resetOnboarding}\n                      className=\"w-full bg-gray-800 hover:bg-gray-900 text-white\"\n                    >\n                      Réinitialiser l'onboarding\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { SavedEvent, getSavedEvents, removeSavedEvent, setEventNotification } from \"@/services/savedEvents\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ArrowLeft, Calendar, MapPin, Info } from \"lucide-react\";\r\nimport Share2 from \"lucide-react/dist/esm/icons/share-2\";\r\nimport Clock from \"lucide-react/dist/esm/icons/clock\";\r\nimport Trash2 from \"lucide-react/dist/esm/icons/trash-2\";\r\nimport Bell from \"lucide-react/dist/esm/icons/bell\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { format } from \"date-fns\";\r\nimport { fr } from \"date-fns/locale\";\r\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\r\nimport Celebration from \"@/components/Celebration\";\r\nimport { AchievementType, getAchievementCelebrationMessage, isAchievementUnlocked } from \"@/services/achievements\";\r\nimport { EventDetails } from \"@/components/EventDetails\";\r\nimport { Event } from \"@/data/events\";\r\nimport { addToCalendar, isCalendarSupported, CalendarErrorType } from \"@/services/calendarService\";\r\nimport { createLogger } from \"@/utils/logger\";\r\nimport { toast } from \"@/components/ui/use-toast\";\r\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\r\n\r\n// Créer un logger pour la page des événements sauvegardés\r\nconst logger = createLogger('SavedEvents');\r\n\r\nexport default function SavedEvents() {\r\n  const navigate = useNavigate();\r\n  const [savedEvents, setSavedEvents] = useState<SavedEvent[]>([]);\r\n  const [notificationDate, setNotificationDate] = useState<string>(\"\");\r\n  const [notificationTime, setNotificationTime] = useState<string>(\"\");\r\n  const [activeEvent, setActiveEvent] = useState<string | null>(null);\r\n  \r\n  // États pour les détails d'événement\r\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\r\n  const [eventDetailsOpen, setEventDetailsOpen] = useState<boolean>(false);\r\n  \r\n  // États pour les célébrations\r\n  const [showFirstSavedCelebration, setShowFirstSavedCelebration] = useState<boolean>(false);\r\n  const [showMultipleSavedCelebration, setShowMultipleSavedCelebration] = useState<boolean>(false);\r\n  const [showNotificationCelebration, setShowNotificationCelebration] = useState<boolean>(false);\r\n  \r\n  // État pour indiquer si le calendrier est supporté - toujours activé maintenant\r\n  const [calendarSupported, setCalendarSupported] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    // Charger les événements sauvegardés\r\n    setSavedEvents(getSavedEvents());\r\n    \r\n    // Toujours activer le support calendrier\r\n    setCalendarSupported(true);\r\n    \r\n    // Analytics: page view\r\n    analytics.trackPageView(\"/saved\", \"Événements enregistrés\");\r\n    \r\n    // Vérifier si des réalisations ont été débloquées récemment\r\n    // et si la célébration n'a pas encore été montrée\r\n    const celebrationsShown = localStorage.getItem('celebrationsShown');\r\n    const shownCelebrations = celebrationsShown ? JSON.parse(celebrationsShown) : {};\r\n    \r\n    if (isAchievementUnlocked(AchievementType.FIRST_EVENT_SAVED) && !shownCelebrations[AchievementType.FIRST_EVENT_SAVED]) {\r\n      setShowFirstSavedCelebration(true);\r\n      // Marquer cette célébration comme montrée\r\n      shownCelebrations[AchievementType.FIRST_EVENT_SAVED] = true;\r\n    }\r\n    \r\n    if (isAchievementUnlocked(AchievementType.MULTIPLE_EVENTS_SAVED) && !shownCelebrations[AchievementType.MULTIPLE_EVENTS_SAVED]) {\r\n      setShowMultipleSavedCelebration(true);\r\n      // Marquer cette célébration comme montrée\r\n      shownCelebrations[AchievementType.MULTIPLE_EVENTS_SAVED] = true;\r\n    }\r\n    \r\n    if (isAchievementUnlocked(AchievementType.NOTIFICATION_SET) && !shownCelebrations[AchievementType.NOTIFICATION_SET]) {\r\n      setShowNotificationCelebration(true);\r\n      // Marquer cette célébration comme montrée\r\n      shownCelebrations[AchievementType.NOTIFICATION_SET] = true;\r\n    }\r\n    \r\n    // Sauvegarder l'état des célébrations montrées\r\n    localStorage.setItem('celebrationsShown', JSON.stringify(shownCelebrations));\r\n  }, []);\r\n\r\n  const handleRemoveEvent = (eventId: string) => {\r\n    const updatedEvents = removeSavedEvent(eventId);\r\n    setSavedEvents(updatedEvents);\r\n    // Analytics: unsave\r\n    analytics.trackContentInteraction(EventAction.UNSAVE, \"event\", eventId, { source: \"saved\" });\r\n  };\r\n\r\n  const handleSetNotification = (eventId: string) => {\r\n    if (!notificationDate || !notificationTime) return;\r\n    \r\n    const notificationDateTime = new Date(`${notificationDate}T${notificationTime}`);\r\n    const updatedEvents = setEventNotification(eventId, notificationDateTime.toISOString());\r\n    setSavedEvents(updatedEvents);\r\n    setActiveEvent(null);\r\n    setNotificationDate(\"\");\r\n    setNotificationTime(\"\");\r\n    // Analytics: reminder set\r\n    analytics.trackProgramInteraction(EventAction.EVENT_REMINDER, { event_id: eventId, reminder_at: notificationDateTime.toISOString(), source: \"saved\" });\r\n  };\r\n  \r\n  // Fonction pour ajouter un événement au calendrier\r\n  const handleAddToCalendar = async (event: SavedEvent) => {\r\n    try {\r\n      logger.info(\"Tentative d'ajout au calendrier\", { eventId: event.id });\r\n      \r\n      const result = await addToCalendar(event);\r\n      \r\n      if (result.success) {\r\n        toast({\r\n          title: \"Ajout au calendrier\",\r\n          description: \"L'événement a été ajouté à votre calendrier\",\r\n          variant: \"default\"\r\n        });\r\n        logger.info(\"Ajout au calendrier réussi\", { eventId: event.id });\r\n        // Analytics: add to calendar success\r\n        analytics.trackProgramInteraction(EventAction.CLICK, { cta_action: \"add_to_calendar\", event_id: event.id, success: true, source: \"saved\" });\r\n      } else {\r\n        let errorMessage = \"Une erreur est survenue lors de l'ajout au calendrier\";\r\n        \r\n        if (result.errorType === CalendarErrorType.NOT_SUPPORTED) {\r\n          errorMessage = \"L'ajout au calendrier n'est pas supporté sur cet appareil\";\r\n        } else if (result.errorType === CalendarErrorType.PERMISSION_DENIED) {\r\n          errorMessage = \"Permission refusée pour accéder au calendrier\";\r\n        }\r\n        \r\n        toast({\r\n          title: \"Erreur\",\r\n          description: errorMessage,\r\n          variant: \"destructive\"\r\n        });\r\n        logger.error(\"Erreur lors de l'ajout au calendrier\", { \r\n          eventId: event.id, \r\n          errorType: result.errorType,\r\n          errorMessage: result.errorMessage\r\n        });\r\n        // Analytics: add to calendar failure\r\n        analytics.trackProgramInteraction(EventAction.CLICK, { cta_action: \"add_to_calendar\", event_id: event.id, success: false, error_type: result.errorType, source: \"saved\" });\r\n      }\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Erreur\",\r\n        description: \"Une erreur inattendue est survenue\",\r\n        variant: \"destructive\"\r\n      });\r\n      logger.error(\"Exception lors de l'ajout au calendrier\", { error });\r\n      // Analytics: add to calendar exception\r\n      analytics.trackProgramInteraction(EventAction.CLICK, { cta_action: \"add_to_calendar\", event_id: event.id, success: false, exception: true, source: \"saved\" });\r\n    }\r\n  };\r\n\r\n  const formatEventDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return format(date, \"EEEE d MMMM yyyy\", { locale: fr });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white pb-20\">\r\n      {/* Composants de célébration */}\r\n      <Celebration \r\n        trigger={showFirstSavedCelebration} \r\n        message={getAchievementCelebrationMessage(AchievementType.FIRST_EVENT_SAVED)} \r\n        onComplete={() => setShowFirstSavedCelebration(false)}\r\n      />\r\n      <Celebration \r\n        trigger={showMultipleSavedCelebration} \r\n        message={getAchievementCelebrationMessage(AchievementType.MULTIPLE_EVENTS_SAVED)} \r\n        onComplete={() => setShowMultipleSavedCelebration(false)}\r\n      />\r\n      <Celebration \r\n        trigger={showNotificationCelebration} \r\n        message={getAchievementCelebrationMessage(AchievementType.NOTIFICATION_SET)} \r\n        onComplete={() => setShowNotificationCelebration(false)}\r\n      />\r\n      \r\n      <div className=\"max-w-md mx-auto px-4 pt-4\">\r\n        <header className=\"mb-4 flex items-center justify-between\">\r\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => { analytics.trackInteraction(EventAction.BACK, \"button\", { from: \"saved_events\" }); navigate(\"/\"); }}>\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Retour\r\n          </Button>\r\n          <h1 className=\"text-xl font-bold text-[#4a5d94]\">Événements enregistrés</h1>\r\n          <div className=\"w-20\"></div>\r\n        </header>\r\n\r\n        {savedEvents.length === 0 ? (\r\n          <div className=\"text-center py-10\">\r\n            <p className=\"text-gray-500\">Vous n'avez pas encore sauvegardé d'événements.</p>\r\n            <Button \r\n              className=\"mt-4 bg-[#4a5d94]\"\r\n              onClick={() => navigate(\"/program\")}\r\n            >\r\n              Voir le programme\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {savedEvents.map((event) => (\r\n              <Card key={event.id} className=\"border-[#e0ebff]\">\r\n                <CardHeader className=\"py-1 px-3\">\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <CardTitle className=\"text-base font-medium\">{event.title}</CardTitle>\r\n                    <div className=\"flex items-center\">\r\n                      {!event.notificationTime && (\r\n                        <Button \r\n                          variant=\"ghost\" \r\n                          size=\"sm\" \r\n                          className=\"text-[#4a5d94] h-7 w-7 p-0 mr-1\"\r\n                          onClick={() => setActiveEvent(event.id)}\r\n                        >\r\n                          <Bell className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      )}\r\n                      {calendarSupported && (\r\n                        <Button \r\n                          variant=\"ghost\" \r\n                          size=\"sm\" \r\n                          className=\"text-[#4a5d94] h-7 w-7 p-0 mr-1\"\r\n                          onClick={() => handleAddToCalendar(event)}\r\n                          title=\"Ajouter au calendrier\"\r\n                        >\r\n                          <Calendar className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      )}\r\n                      <Button \r\n                        variant=\"ghost\" \r\n                        size=\"sm\" \r\n                        className=\"text-red-500 h-7 w-7 p-0\"\r\n                        onClick={() => handleRemoveEvent(event.id)}\r\n                      >\r\n                        <Trash2 className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent className=\"py-1 px-3 pt-0\">\r\n                  <div className=\"space-y-1 text-xs\">\r\n                    <div className=\"flex items-center text-gray-600\">\r\n                      <Calendar className=\"h-3 w-3 mr-1\" />\r\n                      <span>{event.days.map(day => day === \"samedi\" ? \"Sa\" : \"Di\").join(\"/\")}, {event.time}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center text-gray-600\">\r\n                        <MapPin className=\"h-3 w-3 mr-1\" />\r\n                        <span>{event.locationName}</span>\r\n                      </div>\r\n                      \r\n                      {/* Bouton pour voir les détails de l'événement (plus petit, sur le côté) */}\r\n                      <Button \r\n                        variant=\"ghost\" \r\n                        size=\"sm\" \r\n                        className=\"h-6 px-2 text-[#4a5d94] hover:bg-[#e0ebff] text-xs flex items-center justify-center transition-all duration-200\"\r\n                        onClick={() => {\r\n                          // Ouvrir directement les détails de l'événement\r\n                          setEventDetailsOpen(true);\r\n                          setSelectedEvent(event);\r\n                          // Analytics: open event details\r\n                          analytics.trackProgramInteraction(EventAction.EVENT_DETAILS, { event_id: event.id, source: \"saved\" });\r\n                        }}\r\n                      >\r\n                        <Info className=\"h-3 w-3 mr-1\" />\r\n                        Détails\r\n                      </Button>\r\n                    </div>\r\n                    \r\n                    {event.notificationTime && (\r\n                      <div className=\"flex items-center text-[#4a5d94]\">\r\n                        <Bell className=\"h-3 w-3 mr-1\" />\r\n                        <span>Rappel: {formatEventDate(event.notificationTime)}</span>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {activeEvent === event.id ? (\r\n                      <div className=\"mt-2 p-2 bg-[#f0f5ff] rounded-md\">\r\n                        <div className=\"mb-2\">\r\n                          <Label className=\"text-xs mb-1 block\">Choisir un rappel</Label>\r\n                          <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              size=\"sm\" \r\n                              className=\"h-8 text-xs w-full\"\r\n                              onClick={() => {\r\n                                // 1 jour avant l'événement\r\n                                // Utiliser le premier jour de l'événement\r\n                                const eventDay = event.days[0]; // samedi ou dimanche\r\n                                const eventDate = new Date();\r\n                                // Trouver le prochain samedi ou dimanche\r\n                                const dayIndex = eventDay === 'samedi' ? 6 : 0; // 6 pour samedi, 0 pour dimanche\r\n                                while (eventDate.getDay() !== dayIndex) {\r\n                                  eventDate.setDate(eventDate.getDate() + 1);\r\n                                }\r\n                                const reminderDate = new Date(eventDate);\r\n                                reminderDate.setDate(reminderDate.getDate() - 1);\r\n                                setNotificationDate(reminderDate.toISOString().split('T')[0]);\r\n                                setNotificationTime('10:00');\r\n                                handleSetNotification(event.id);\r\n                              }}\r\n                            >\r\n                              1 jour avant\r\n                            </Button>\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              size=\"sm\" \r\n                              className=\"h-8 text-xs w-full\"\r\n                              onClick={() => {\r\n                                // 3 heures avant l'événement\r\n                                // Utiliser le premier jour de l'événement\r\n                                const eventDay = event.days[0]; // samedi ou dimanche\r\n                                const eventDate = new Date();\r\n                                // Trouver le prochain samedi ou dimanche\r\n                                const dayIndex = eventDay === 'samedi' ? 6 : 0; // 6 pour samedi, 0 pour dimanche\r\n                                while (eventDate.getDay() !== dayIndex) {\r\n                                  eventDate.setDate(eventDate.getDate() + 1);\r\n                                }\r\n                                const eventTime = event.time.split('h');\r\n                                eventDate.setHours(parseInt(eventTime[0]), parseInt(eventTime[1] || '0'), 0);\r\n                                const reminderDate = new Date(eventDate);\r\n                                reminderDate.setHours(reminderDate.getHours() - 3);\r\n                                setNotificationDate(reminderDate.toISOString().split('T')[0]);\r\n                                setNotificationTime(`${reminderDate.getHours().toString().padStart(2, '0')}:${reminderDate.getMinutes().toString().padStart(2, '0')}`);\r\n                                handleSetNotification(event.id);\r\n                              }}\r\n                            >\r\n                              3 heures avant\r\n                            </Button>\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              size=\"sm\" \r\n                              className=\"h-8 text-xs w-full\"\r\n                              onClick={() => {\r\n                                // Le matin même\r\n                                // Utiliser le premier jour de l'événement\r\n                                const eventDay = event.days[0]; // samedi ou dimanche\r\n                                const eventDate = new Date();\r\n                                // Trouver le prochain samedi ou dimanche\r\n                                const dayIndex = eventDay === 'samedi' ? 6 : 0; // 6 pour samedi, 0 pour dimanche\r\n                                while (eventDate.getDay() !== dayIndex) {\r\n                                  eventDate.setDate(eventDate.getDate() + 1);\r\n                                }\r\n                                setNotificationDate(eventDate.toISOString().split('T')[0]);\r\n                                setNotificationTime('08:00');\r\n                                handleSetNotification(event.id);\r\n                              }}\r\n                            >\r\n                              Le matin même\r\n                            </Button>\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              size=\"sm\" \r\n                              className=\"h-8 text-xs w-full\"\r\n                              onClick={() => {\r\n                                // Afficher les champs de sélection précise\r\n                                // Utiliser le premier jour de l'événement\r\n                                const eventDay = event.days[0]; // samedi ou dimanche\r\n                                const eventDate = new Date();\r\n                                // Trouver le prochain samedi ou dimanche\r\n                                const dayIndex = eventDay === 'samedi' ? 6 : 0; // 6 pour samedi, 0 pour dimanche\r\n                                while (eventDate.getDay() !== dayIndex) {\r\n                                  eventDate.setDate(eventDate.getDate() + 1);\r\n                                }\r\n                                setNotificationDate(eventDate.toISOString().split('T')[0]);\r\n                                setNotificationTime('10:00');\r\n                              }}\r\n                            >\r\n                              Choix précis\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Sélection précise */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-1\">\r\n                          <div>\r\n                            <Label htmlFor={`date-${event.id}`} className=\"text-xs mb-1\">Date</Label>\r\n                            <Input \r\n                              id={`date-${event.id}`}\r\n                              type=\"date\" \r\n                              className=\"h-8 text-sm\"\r\n                              value={notificationDate}\r\n                              onChange={(e) => setNotificationDate(e.target.value)}\r\n                            />\r\n                          </div>\r\n                          <div>\r\n                            <Label htmlFor={`time-${event.id}`} className=\"text-xs mb-1\">Heure</Label>\r\n                            <Input \r\n                              id={`time-${event.id}`}\r\n                              type=\"time\" \r\n                              className=\"h-8 text-sm\"\r\n                              value={notificationTime}\r\n                              onChange={(e) => setNotificationTime(e.target.value)}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex space-x-2 mt-1\">\r\n                          <Button \r\n                            className=\"flex-1 bg-[#4a5d94] h-8 text-xs\"\r\n                            onClick={() => handleSetNotification(event.id)}\r\n                          >\r\n                            Définir\r\n                          </Button>\r\n                          <Button \r\n                            variant=\"outline\" \r\n                            className=\"flex-1 h-8 text-xs\"\r\n                            onClick={() => setActiveEvent(null)}\r\n                          >\r\n                            Annuler\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Bottom Navigation */}\r\n        <BottomNavigation />\r\n        \r\n        {/* Composant EventDetails pour afficher les détails d'un événement */}\r\n        <EventDetails \r\n          event={selectedEvent}\r\n          isOpen={eventDetailsOpen}\r\n          onClose={() => {\r\n            setEventDetailsOpen(false);\r\n            setSelectedEvent(null);\r\n          }}\r\n          source=\"saved\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef, createContext, useContext } from 'react';\nimport { Button } from '@/components/ui/button';\nimport VolumeX from 'lucide-react/dist/esm/icons/volume-x';\nimport Volume2 from 'lucide-react/dist/esm/icons/volume-2';\nimport { cn } from '@/lib/utils';\n\n// Créer un contexte pour gérer l'état audio global\nexport const AudioContext = createContext<{\n  userInteracted: boolean;\n  setUserInteracted: (value: boolean) => void;\n}>({ \n  userInteracted: false,\n  setUserInteracted: () => {}\n});\n\n// Hook personnalisé pour utiliser le contexte audio\nexport const useAudio = () => {\n  const context = useContext(AudioContext);\n  return context as {\n    userInteracted: boolean;\n    setUserInteracted: (value: boolean) => void;\n  };\n};\n\n// Fournisseur du contexte audio\ninterface AudioProviderProps {\n  children: React.ReactNode;\n}\n\nexport const AudioProvider = ({ children }: AudioProviderProps) => {\n  const [userInteracted, setUserInteracted] = useState<boolean>(false);\n  \n  return (\n    <AudioContext.Provider value={{ userInteracted, setUserInteracted }}>\n      {children}\n    </AudioContext.Provider>\n  );\n};\n\ninterface AudioPlayerProps {\n  audioSrc: string;\n  autoPlay?: boolean;\n}\n\nexport const AudioPlayer = ({ audioSrc, autoPlay = true }: AudioPlayerProps) => {\n  // Récupérer la préférence utilisateur depuis le localStorage\n  const getSavedPreference = (): boolean => {\n    const saved = localStorage.getItem('audioPlayerState');\n    return saved !== null ? saved === 'playing' : autoPlay;\n  };\n\n  const [isPlaying, setIsPlaying] = useState(getSavedPreference());\n  const [isAnimating, setIsAnimating] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n\n  // Initialiser l'audio\n  useEffect(() => {\n    if (audioRef.current) {\n      // Configurer l'audio\n      audioRef.current.volume = 0.5;\n      audioRef.current.loop = true;\n      \n      // Nettoyage lors du démontage\n      return () => {\n        if (audioRef.current) {\n          audioRef.current.pause();\n        }\n      };\n    }\n  }, []);\n  \n  // Gérer les changements d'état de lecture\n  useEffect(() => {\n    if (audioRef.current) {\n      // Mettre à jour l'état de lecture\n      if (isPlaying) {\n        const playPromise = audioRef.current.play();\n        if (playPromise !== undefined) {\n          playPromise.catch(error => {\n            console.log(\"Erreur lors de la lecture:\", error);\n            setIsPlaying(false);\n            setIsAnimating(false);\n          });\n        }\n        setIsAnimating(true);\n      } else {\n        audioRef.current.pause();\n        setIsAnimating(false);\n      }\n      \n      // Sauvegarder la préférence utilisateur\n      localStorage.setItem('audioPlayerState', isPlaying ? 'playing' : 'paused');\n    }\n  }, [isPlaying]);\n\n  const togglePlayback = () => {\n    // Basculer l'état de lecture\n    setIsPlaying(!isPlaying);\n  };\n\n  return (\n    <>\n      {/* Élément audio natif caché */}\n      <audio \n        ref={audioRef}\n        src={audioSrc} \n        loop \n        preload=\"auto\"\n        playsInline\n        style={{ display: 'none' }}\n      />\n      \n      <Button\n        variant=\"outline\"\n        size=\"icon\"\n        className={cn(\n          \"rounded-full bg-white/90 hover:bg-white shadow-md relative\",\n          isAnimating && \"overflow-visible\"\n        )}\n        onClick={togglePlayback}\n        title={isPlaying ? \"Couper le son d'ambiance\" : \"Jouer le son d'ambiance\"}\n      >\n        {/* Cercles d'animation pour indiquer que le son joue */}\n        {isAnimating && (\n          <>\n            <span className=\"absolute inset-0 rounded-full animate-ping-slow bg-[#4a5d94]/10\"></span>\n            <span className=\"absolute inset-[-4px] rounded-full animate-ping-slow animation-delay-300 bg-[#4a5d94]/5\"></span>\n          </>\n        )}\n        {isPlaying ? (\n          <Volume2 className=\"h-5 w-5 text-[#4a5d94]\" />\n        ) : (\n          <VolumeX className=\"h-5 w-5 text-[#4a5d94]\" />\n        )}\n      </Button>\n    </>\n  );\n};\n","import { useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { \n  analytics, \n  trackPageView, \n  trackEvent, \n  trackInteraction,\n  trackSwipe,\n  trackFeatureUse,\n  EventCategory,\n  EventAction,\n  EventProperties\n} from '../services/firebaseAnalytics';\n\n/**\n * Hook personnalisé pour utiliser Firebase Analytics dans les composants React\n * Permet de suivre automatiquement les vues de page et fournit des méthodes pour\n * suivre d'autres types d'événements\n */\nexport function useAnalytics() {\n  const location = useLocation();\n  const previousPath = useRef<string | null>(null);\n\n  // Suivre automatiquement les changements de page\n  useEffect(() => {\n    const currentPath = location.pathname;\n    const pageTitle = document.title;\n\n    // Suivre la vue de page\n    trackPageView(currentPath, pageTitle);\n\n    // Suivre le changement de route si ce n'est pas la première page\n    if (previousPath.current && previousPath.current !== currentPath) {\n      analytics.trackRouteChange(previousPath.current, currentPath);\n    }\n\n    // Mettre à jour le chemin précédent\n    previousPath.current = currentPath;\n  }, [location.pathname]);\n\n  // Retourner les fonctions de suivi pour une utilisation facile dans les composants\n  return {\n    // Événements génériques\n    trackEvent: (category: EventCategory, action: EventAction, properties?: EventProperties) => \n      trackEvent(category, action, properties),\n\n    // Interactions utilisateur\n    trackInteraction: (action: EventAction, element: string, properties?: EventProperties) => \n      trackInteraction(action, element, properties),\n\n    // Interactions de swipe\n    trackSwipe: (direction: 'left' | 'right' | 'up' | 'down', source: string, success: boolean, properties?: EventProperties) => \n      trackSwipe(direction, source, success, properties),\n\n    // Utilisation de fonctionnalités\n    trackFeatureUse: (featureName: string, properties?: EventProperties) => \n      trackFeatureUse(featureName, properties),\n\n    // Interactions avec le contenu\n    trackContentInteraction: (action: EventAction, contentType: string, contentId: string, properties?: EventProperties) => \n      analytics.trackContentInteraction(action, contentType, contentId, properties),\n\n    // Interactions média\n    trackMediaInteraction: (action: EventAction, mediaType: string, mediaId: string, properties?: EventProperties) => \n      analytics.trackMediaInteraction(action, mediaType, mediaId, properties),\n\n    // Interactions avec la carte\n    trackMapInteraction: (action: EventAction, properties?: EventProperties) => \n      analytics.trackMapInteraction(action, properties),\n\n    // Interactions avec le programme\n    trackProgramInteraction: (action: EventAction, properties?: EventProperties) => \n      analytics.trackProgramInteraction(action, properties),\n\n    // Interactions communautaires\n    trackCommunityInteraction: (action: EventAction, properties?: EventProperties) => \n      analytics.trackCommunityInteraction(action, properties),\n\n    // Interactions de donation\n    trackDonationInteraction: (action: EventAction, properties?: EventProperties) => \n      analytics.trackDonationInteraction(action, properties),\n\n    // Événements d'onboarding\n    trackOnboarding: (action: EventAction, properties?: EventProperties) => \n      analytics.trackOnboarding(action, properties),\n\n    // Erreurs\n    trackError: (action: EventAction, message: string, properties?: EventProperties) => \n      analytics.trackError(action, message, properties),\n  };\n}\n","import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useNavigate } from \"react-router-dom\";\nimport { motion, PanInfo } from \"framer-motion\";\nimport { OptimizedImage } from \"@/components/OptimizedImage\";\nimport { getImagePath } from \"@/utils/imagePaths\";\nimport { useAudio } from \"@/components/AudioPlayer\";\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\nimport { EventAction } from \"@/services/firebaseAnalytics\";\n\nexport default function Onboarding() {\n  const navigate = useNavigate();\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const { setUserInteracted } = useAudio();\n  const analytics = useAnalytics();\n\n  useEffect(() => {\n    // Initialisation de l'onboarding\n    analytics.trackOnboarding(EventAction.ONBOARDING_START, {\n      timestamp: new Date().toISOString()\n    });\n  }, []);\n\n  useEffect(() => {\n    const currentSlideData = slides[currentSlide];\n    // Suivi du changement de slide\n    analytics.trackOnboarding(EventAction.ONBOARDING_SLIDE_VIEW, {\n      slide_index: currentSlide,\n      slide_title: currentSlideData.title,\n      has_video: !!currentSlideData.video\n    });\n  }, [currentSlide]);\n\n  useEffect(() => {\n    console.log(\"[Onboarding] Préparation de l'interaction utilisateur\");\n    localStorage.setItem('userHasInteracted', 'true');\n    setUserInteracted(true);\n  }, [setUserInteracted]);\n\n  const slides = [\n    {\n      title: \"Bienvenue sur l'application Collectif Île Feydeau\",\n      description: [\n        \"Découvrez le <strong>patrimoine unique</strong> de l'Île Feydeau à travers notre <strong>parcours interactif</strong>.\",\n        \"Explorez les <strong>expositions</strong> et <strong>concerts</strong> organisés par les artistes du collectif.\"\n      ],\n      image: \"intro-video-image.png\",\n      video: \"/video/intro-video.mp4\"\n    },\n    {\n      title: \"Bienvenue sur l'application Collectif Île Feydeau\",\n      description: [\n        \"Découvrez le <strong>patrimoine unique</strong> de l'Île Feydeau à travers notre <strong>parcours interactif</strong>.\",\n        \"Explorez les <strong>expositions</strong> et <strong>concerts</strong> organisés par les artistes du collectif.\"\n      ],\n      image: \"/onboarding-image.webp\"\n    },\n    {\n      title: \"Programme et horaires\",\n      description: [\n        \"Consultez le <strong>programme complet</strong> des événements par jour.\",\n        \"Les <strong>horaires</strong> sont clairement indiqués pour chaque événement.\",\n        \"<strong>Filtrez</strong> par type d'événement : expositions ou concerts.\"\n      ],\n      image: \"/onboarding-image.webp\"\n    },\n    {\n      title: \"Carte interactive\",\n      description: [\n        \"<strong>Localisez</strong> tous les événements sur la <strong>carte</strong> de l'Île Feydeau.\",\n        \"<strong>Naviguez</strong> facilement entre les différents lieux.\",\n        \"<strong>Marquez</strong> les lieux que vous avez visités.\"\n      ],\n      image: \"/onboarding-image.webp\"\n    },\n    {\n      title: \"Fonctionnalités pratiques\",\n      description: [\n        \"<strong>Enregistrez</strong> vos événements favoris pour y accéder rapidement.\",\n        \"Configurez des <strong>rappels</strong> pour ne manquer aucun événement.\",\n        \"L'application fonctionne <strong>hors-ligne</strong> pour consulter le programme sans connexion.\"\n      ],\n      image: \"/onboarding-image.webp\"\n    }\n  ];\n\n  const nextSlide = () => {\n    console.log(\"[Onboarding] Interaction utilisateur via nextSlide\");\n    setUserInteracted(true);\n    localStorage.setItem('userHasInteracted', 'true');\n    analytics.trackSwipe('left', 'button', true, {\n      current_slide: currentSlide,\n      total_slides: slides.length\n    });\n    \n    if (currentSlide < slides.length - 1) {\n      setCurrentSlide(currentSlide + 1);\n    }\n    // Note: Ne plus appeler handleFinish ici car le bouton le gère directement\n  };\n\n  const prevSlide = () => {\n    console.log(\"[Onboarding] Interaction utilisateur via prevSlide\");\n    setUserInteracted(true);\n    localStorage.setItem('userHasInteracted', 'true');\n    analytics.trackSwipe('right', 'button', true, {\n      current_slide: currentSlide,\n      total_slides: slides.length\n    });\n    \n    if (currentSlide > 0) {\n      setCurrentSlide(currentSlide - 1);\n    }\n  };\n\n  const handleFinish = () => {\n    // Éviter les appels multiples\n    if (isNavigating) {\n      console.log(\"[Onboarding] Navigation déjà en cours, ignoré\");\n      return;\n    }\n    \n    try {\n      setIsNavigating(true);\n      console.log(\"[Onboarding] ===== Début de handleFinish =====\");\n      console.log(\"[Onboarding] Avant localStorage.setItem - hasSeenOnboarding actuel:\", localStorage.getItem('hasSeenOnboarding'));\n      \n      localStorage.setItem('hasSeenOnboarding', 'true');\n      console.log(\"[Onboarding] Après localStorage.setItem - hasSeenOnboarding:\", localStorage.getItem('hasSeenOnboarding'));\n      \n      // Tracker la fin de l'onboarding\n      analytics.trackOnboarding(EventAction.ONBOARDING_COMPLETE, {\n        total_slides_viewed: currentSlide + 1,\n        completion_time: new Date().toISOString()\n      });\n      \n      console.log(\"[Onboarding] URL actuelle avant navigation:\", window.location.href);\n      console.log(\"[Onboarding] Navigation vers la carte...\");\n      \n      // Navigation simple et directe\n      navigate('/map', { replace: true });\n      \n      console.log(\"[Onboarding] navigate() appelé vers /map\");\n      \n      // Vérifier après un court délai si la navigation a fonctionné\n      setTimeout(() => {\n        console.log(\"[Onboarding] URL après navigation (500ms):\", window.location.href);\n      }, 500);\n      \n    } catch (error) {\n      console.error(\"[Onboarding] Erreur lors de la finalisation de l'onboarding:\", error);\n      // Fallback simple\n      navigate('/map', { replace: true });\n    } finally {\n      // Réinitialiser le flag après un délai court\n      setTimeout(() => setIsNavigating(false), 1000);\n    }\n  };\n\n  const handleDragEnd = (event: any, info: PanInfo) => {\n    const swipeThreshold = 50;\n    if (info.offset.x < -swipeThreshold && currentSlide < slides.length - 1) {\n      // Swipe vers la gauche - slide suivante\n      analytics.trackSwipe('left', 'gesture', true, {\n        current_slide: currentSlide,\n        total_slides: slides.length,\n        swipe_distance: Math.abs(info.offset.x)\n      });\n      setCurrentSlide(currentSlide + 1);\n    } else if (info.offset.x > swipeThreshold && currentSlide > 0) {\n      // Swipe vers la droite - slide précédente\n      analytics.trackSwipe('right', 'gesture', true, {\n        current_slide: currentSlide,\n        total_slides: slides.length,\n        swipe_distance: Math.abs(info.offset.x)\n      });\n      setCurrentSlide(currentSlide - 1);\n    } else {\n      // Swipe insuffisant - pas de changement\n      analytics.trackSwipe(\n        info.offset.x < 0 ? 'left' : 'right',\n        'gesture',\n        false,\n        {\n          current_slide: currentSlide,\n          total_slides: slides.length,\n          swipe_distance: Math.abs(info.offset.x)\n        }\n      );\n    }\n  };\n\n  const handleVideoPlay = () => {\n    console.log(\"[Onboarding] Vidéo démarrée\");\n    setUserInteracted(true);\n    localStorage.setItem('userHasInteracted', 'true');\n    \n    // Tracker le démarrage de la vidéo\n    analytics.trackMediaInteraction(EventAction.PLAY, 'video', `onboarding-slide-${currentSlide}`, {\n      slide_index: currentSlide,\n      slide_title: slides[currentSlide].title\n    });\n  };\n\n  const handleVideoPause = () => {\n    console.log(\"[Onboarding] Vidéo mise en pause\");\n    \n    // Tracker la pause de la vidéo\n    analytics.trackMediaInteraction(EventAction.PAUSE, 'video', `onboarding-slide-${currentSlide}`, {\n      slide_index: currentSlide,\n      slide_title: slides[currentSlide].title\n    });\n  };\n\n  const handleVideoEnded = () => {\n    console.log(\"[Onboarding] Vidéo terminée\");\n    \n    // Tracker la fin de la vidéo\n    analytics.trackMediaInteraction(EventAction.COMPLETE, 'video', `onboarding-slide-${currentSlide}`, {\n      slide_index: currentSlide,\n      slide_title: slides[currentSlide].title\n    });\n  };\n\n  const handleSkip = () => {\n    localStorage.setItem('hasSeenOnboarding', 'true');\n    \n    // Tracker le saut de l'onboarding\n    analytics.trackOnboarding(EventAction.ONBOARDING_SKIP, {\n      skipped_at_slide: currentSlide,\n      total_slides: slides.length,\n      skip_time: new Date().toISOString()\n    });\n    \n    navigate(import.meta.env.BASE_URL || '/');\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-white relative overflow-hidden\">\n      {// Header avec le bouton de skip\n      <div className=\"p-4 flex justify-end\">\n        {/* <Button \n          onClick={handleSkip} \n          className=\"text-gray-500 hover:text-gray-700 bg-transparent hover:bg-transparent\"\n          variant=\"ghost\"\n        >\n          Passer\n        </Button> */}\n      </div> }\n      \n      {/* Indicateurs de slides */}\n      <div className=\"absolute top-4 left-0 right-0 flex justify-center z-50\">\n        <div className=\"flex space-x-2\">\n          {slides.map((_, index) => (\n            <div \n              key={index} \n              className={`h-2 w-2 rounded-full ${index === currentSlide ? 'bg-[#ff7a45]' : 'bg-gray-300'}`}\n            />\n          ))}\n        </div>\n      </div>\n      \n      {/* Overlay pour la gestion du swipe sur toute la surface - sauf sur les vidéos */}\n      <motion.div \n        className=\"absolute inset-0 z-10 pointer-events-auto touch-pan-x\"\n        drag=\"x\"\n        dragConstraints={{ left: 0, right: 0 }}\n        onDragEnd={handleDragEnd}\n        style={{ touchAction: 'pan-x' }}\n      />\n      \n      {/* Contenu principal */}\n      <div className=\"flex-1 flex flex-col overflow-hidden relative\">\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          {/* Titre en haut */}\n          <h1 className=\"text-xl md:text-2xl font-bold text-center my-4 relative\">{slides[currentSlide].title}</h1>\n          \n          {currentSlide === 0 ? (\n            /* Pour le premier slide: vidéo avec hauteur limitée */\n            <div className=\"relative overflow-hidden bg-gray-200 mb-[80px] h-[50vh] md:h-[60vh] z-20\">\n              <div className=\"absolute inset-0 flex items-center justify-center z-50\">\n                <video \n                  className=\"max-w-full max-h-full\" \n                  controls\n                  playsInline\n                  src={getImagePath(slides[currentSlide].video || '')}\n                  aria-label={`Vidéo: ${slides[currentSlide].title}`}\n                  onPlay={handleVideoPlay}\n                  onPause={handleVideoPause}\n                  onEnded={handleVideoEnded}\n                  onClick={(e) => e.stopPropagation()}\n                />\n              </div>\n            </div>\n          ) : (\n            /* Pour les autres slides: structure originale */\n            <>\n              <div className=\"relative h-[30vh] md:h-[40vh] overflow-hidden bg-gray-200\">\n                {slides[currentSlide].video ? (\n                  <div className=\"absolute inset-0 flex items-center justify-center z-50\">\n                    <video \n                      className=\"max-w-full max-h-full\" \n                      controls\n                      playsInline\n                      src={getImagePath(slides[currentSlide].video || '')}\n                      aria-label={`Vidéo: ${slides[currentSlide].title}`}\n                      onPlay={handleVideoPlay}\n                      onPause={handleVideoPause}\n                      onEnded={handleVideoEnded}\n                      onClick={(e) => e.stopPropagation()}\n                    />\n                  </div>\n                ) : (\n                  <div \n                    className=\"absolute inset-0 bg-center bg-no-repeat bg-contain\" \n                    style={{ backgroundImage: `url(${getImagePath(slides[currentSlide].image)})` }}\n                    aria-label={slides[currentSlide].title}\n                  ></div>\n                )}\n              </div>\n              \n              <div className=\"flex-1 p-4 overflow-y-auto pb-[80px]\">\n                {Array.isArray(slides[currentSlide].description) ? (\n                  <div className=\"space-y-3\">\n                    {slides[currentSlide].description.map((desc, i) => (\n                      <p key={i} className=\"text-center text-gray-600 text-sm md:text-base\" dangerouslySetInnerHTML={{ __html: desc }}></p>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-center text-gray-600 text-sm md:text-base\" dangerouslySetInnerHTML={{ __html: slides[currentSlide].description }}></p>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* Boutons de navigation - position fixe en bas */}\n      <div className=\"fixed bottom-0 left-0 right-0 p-4 flex space-x-4 border-t border-gray-100 bg-white z-50\">\n        {currentSlide > 0 && (\n          <Button \n            onClick={prevSlide}\n            className=\"flex-1 bg-gray-200 text-gray-800 hover:bg-gray-300\"\n          >\n            Précédent\n          </Button>\n        )}\n        \n        <Button \n          onClick={currentSlide === slides.length - 1 ? handleFinish : nextSlide}\n          className=\"flex-1 bg-[#4a5d94] text-white\"\n        >\n          {currentSlide === slides.length - 1 ? 'Commencer' : 'Suivant'}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\n// packages/react/scroll-area/src/ScrollArea.tsx\nimport * as React2 from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nimport { clamp } from \"@radix-ui/number\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\n// packages/react/scroll-area/src/useStateMachine.ts\nimport * as React from \"react\";\nfunction useStateMachine(initialState, machine) {\n  return React.useReducer((state, event) => {\n    const nextState = machine[state][event];\n    return nextState ?? state;\n  }, initialState);\n}\n\n// packages/react/scroll-area/src/ScrollArea.tsx\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar SCROLL_AREA_NAME = \"ScrollArea\";\nvar [createScrollAreaContext, createScrollAreaScope] = createContextScope(SCROLL_AREA_NAME);\nvar [ScrollAreaProvider, useScrollAreaContext] = createScrollAreaContext(SCROLL_AREA_NAME);\nvar ScrollArea = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeScrollArea,\n      type = \"hover\",\n      dir,\n      scrollHideDelay = 600,\n      ...scrollAreaProps\n    } = props;\n    const [scrollArea, setScrollArea] = React2.useState(null);\n    const [viewport, setViewport] = React2.useState(null);\n    const [content, setContent] = React2.useState(null);\n    const [scrollbarX, setScrollbarX] = React2.useState(null);\n    const [scrollbarY, setScrollbarY] = React2.useState(null);\n    const [cornerWidth, setCornerWidth] = React2.useState(0);\n    const [cornerHeight, setCornerHeight] = React2.useState(0);\n    const [scrollbarXEnabled, setScrollbarXEnabled] = React2.useState(false);\n    const [scrollbarYEnabled, setScrollbarYEnabled] = React2.useState(false);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setScrollArea(node));\n    const direction = useDirection(dir);\n    return /* @__PURE__ */ jsx(\n      ScrollAreaProvider,\n      {\n        scope: __scopeScrollArea,\n        type,\n        dir: direction,\n        scrollHideDelay,\n        scrollArea,\n        viewport,\n        onViewportChange: setViewport,\n        content,\n        onContentChange: setContent,\n        scrollbarX,\n        onScrollbarXChange: setScrollbarX,\n        scrollbarXEnabled,\n        onScrollbarXEnabledChange: setScrollbarXEnabled,\n        scrollbarY,\n        onScrollbarYChange: setScrollbarY,\n        scrollbarYEnabled,\n        onScrollbarYEnabledChange: setScrollbarYEnabled,\n        onCornerWidthChange: setCornerWidth,\n        onCornerHeightChange: setCornerHeight,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            ...scrollAreaProps,\n            ref: composedRefs,\n            style: {\n              position: \"relative\",\n              // Pass corner sizes as CSS vars to reduce re-renders of context consumers\n              [\"--radix-scroll-area-corner-width\"]: cornerWidth + \"px\",\n              [\"--radix-scroll-area-corner-height\"]: cornerHeight + \"px\",\n              ...props.style\n            }\n          }\n        )\n      }\n    );\n  }\n);\nScrollArea.displayName = SCROLL_AREA_NAME;\nvar VIEWPORT_NAME = \"ScrollAreaViewport\";\nvar ScrollAreaViewport = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeScrollArea, children, asChild, nonce, ...viewportProps } = props;\n    const context = useScrollAreaContext(VIEWPORT_NAME, __scopeScrollArea);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onViewportChange);\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        \"style\",\n        {\n          dangerouslySetInnerHTML: {\n            __html: `\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n`\n          },\n          nonce\n        }\n      ),\n      /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          \"data-radix-scroll-area-viewport\": \"\",\n          ...viewportProps,\n          asChild,\n          ref: composedRefs,\n          style: {\n            /**\n             * We don't support `visible` because the intention is to have at least one scrollbar\n             * if this component is used and `visible` will behave like `auto` in that case\n             * https://developer.mozilla.org/en-US/docs/Web/CSS/overflow#description\n             *\n             * We don't handle `auto` because the intention is for the native implementation\n             * to be hidden if using this component. We just want to ensure the node is scrollable\n             * so could have used either `scroll` or `auto` here. We picked `scroll` to prevent\n             * the browser from having to work out whether to render native scrollbars or not,\n             * we tell it to with the intention of hiding them in CSS.\n             */\n            overflowX: context.scrollbarXEnabled ? \"scroll\" : \"hidden\",\n            overflowY: context.scrollbarYEnabled ? \"scroll\" : \"hidden\",\n            ...props.style\n          },\n          children: getSubtree({ asChild, children }, (children2) => /* @__PURE__ */ jsx(\n            \"div\",\n            {\n              \"data-radix-scroll-area-content\": \"\",\n              ref: context.onContentChange,\n              style: { minWidth: context.scrollbarXEnabled ? \"fit-content\" : void 0 },\n              children: children2\n            }\n          ))\n        }\n      )\n    ] });\n  }\n);\nScrollAreaViewport.displayName = VIEWPORT_NAME;\nvar SCROLLBAR_NAME = \"ScrollAreaScrollbar\";\nvar ScrollAreaScrollbar = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { forceMount, ...scrollbarProps } = props;\n    const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n    const { onScrollbarXEnabledChange, onScrollbarYEnabledChange } = context;\n    const isHorizontal = props.orientation === \"horizontal\";\n    React2.useEffect(() => {\n      isHorizontal ? onScrollbarXEnabledChange(true) : onScrollbarYEnabledChange(true);\n      return () => {\n        isHorizontal ? onScrollbarXEnabledChange(false) : onScrollbarYEnabledChange(false);\n      };\n    }, [isHorizontal, onScrollbarXEnabledChange, onScrollbarYEnabledChange]);\n    return context.type === \"hover\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarHover, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"scroll\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarScroll, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"auto\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarAuto, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === \"always\" ? /* @__PURE__ */ jsx(ScrollAreaScrollbarVisible, { ...scrollbarProps, ref: forwardedRef }) : null;\n  }\n);\nScrollAreaScrollbar.displayName = SCROLLBAR_NAME;\nvar ScrollAreaScrollbarHover = React2.forwardRef((props, forwardedRef) => {\n  const { forceMount, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [visible, setVisible] = React2.useState(false);\n  React2.useEffect(() => {\n    const scrollArea = context.scrollArea;\n    let hideTimer = 0;\n    if (scrollArea) {\n      const handlePointerEnter = () => {\n        window.clearTimeout(hideTimer);\n        setVisible(true);\n      };\n      const handlePointerLeave = () => {\n        hideTimer = window.setTimeout(() => setVisible(false), context.scrollHideDelay);\n      };\n      scrollArea.addEventListener(\"pointerenter\", handlePointerEnter);\n      scrollArea.addEventListener(\"pointerleave\", handlePointerLeave);\n      return () => {\n        window.clearTimeout(hideTimer);\n        scrollArea.removeEventListener(\"pointerenter\", handlePointerEnter);\n        scrollArea.removeEventListener(\"pointerleave\", handlePointerLeave);\n      };\n    }\n  }, [context.scrollArea, context.scrollHideDelay]);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarAuto,\n    {\n      \"data-state\": visible ? \"visible\" : \"hidden\",\n      ...scrollbarProps,\n      ref: forwardedRef\n    }\n  ) });\n});\nvar ScrollAreaScrollbarScroll = React2.forwardRef((props, forwardedRef) => {\n  const { forceMount, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const isHorizontal = props.orientation === \"horizontal\";\n  const debounceScrollEnd = useDebounceCallback(() => send(\"SCROLL_END\"), 100);\n  const [state, send] = useStateMachine(\"hidden\", {\n    hidden: {\n      SCROLL: \"scrolling\"\n    },\n    scrolling: {\n      SCROLL_END: \"idle\",\n      POINTER_ENTER: \"interacting\"\n    },\n    interacting: {\n      SCROLL: \"interacting\",\n      POINTER_LEAVE: \"idle\"\n    },\n    idle: {\n      HIDE: \"hidden\",\n      SCROLL: \"scrolling\",\n      POINTER_ENTER: \"interacting\"\n    }\n  });\n  React2.useEffect(() => {\n    if (state === \"idle\") {\n      const hideTimer = window.setTimeout(() => send(\"HIDE\"), context.scrollHideDelay);\n      return () => window.clearTimeout(hideTimer);\n    }\n  }, [state, context.scrollHideDelay, send]);\n  React2.useEffect(() => {\n    const viewport = context.viewport;\n    const scrollDirection = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\n    if (viewport) {\n      let prevScrollPos = viewport[scrollDirection];\n      const handleScroll = () => {\n        const scrollPos = viewport[scrollDirection];\n        const hasScrollInDirectionChanged = prevScrollPos !== scrollPos;\n        if (hasScrollInDirectionChanged) {\n          send(\"SCROLL\");\n          debounceScrollEnd();\n        }\n        prevScrollPos = scrollPos;\n      };\n      viewport.addEventListener(\"scroll\", handleScroll);\n      return () => viewport.removeEventListener(\"scroll\", handleScroll);\n    }\n  }, [context.viewport, isHorizontal, send, debounceScrollEnd]);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || state !== \"hidden\", children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarVisible,\n    {\n      \"data-state\": state === \"hidden\" ? \"hidden\" : \"visible\",\n      ...scrollbarProps,\n      ref: forwardedRef,\n      onPointerEnter: composeEventHandlers(props.onPointerEnter, () => send(\"POINTER_ENTER\")),\n      onPointerLeave: composeEventHandlers(props.onPointerLeave, () => send(\"POINTER_LEAVE\"))\n    }\n  ) });\n});\nvar ScrollAreaScrollbarAuto = React2.forwardRef((props, forwardedRef) => {\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const { forceMount, ...scrollbarProps } = props;\n  const [visible, setVisible] = React2.useState(false);\n  const isHorizontal = props.orientation === \"horizontal\";\n  const handleResize = useDebounceCallback(() => {\n    if (context.viewport) {\n      const isOverflowX = context.viewport.offsetWidth < context.viewport.scrollWidth;\n      const isOverflowY = context.viewport.offsetHeight < context.viewport.scrollHeight;\n      setVisible(isHorizontal ? isOverflowX : isOverflowY);\n    }\n  }, 10);\n  useResizeObserver(context.viewport, handleResize);\n  useResizeObserver(context.content, handleResize);\n  return /* @__PURE__ */ jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarVisible,\n    {\n      \"data-state\": visible ? \"visible\" : \"hidden\",\n      ...scrollbarProps,\n      ref: forwardedRef\n    }\n  ) });\n});\nvar ScrollAreaScrollbarVisible = React2.forwardRef((props, forwardedRef) => {\n  const { orientation = \"vertical\", ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const thumbRef = React2.useRef(null);\n  const pointerOffsetRef = React2.useRef(0);\n  const [sizes, setSizes] = React2.useState({\n    content: 0,\n    viewport: 0,\n    scrollbar: { size: 0, paddingStart: 0, paddingEnd: 0 }\n  });\n  const thumbRatio = getThumbRatio(sizes.viewport, sizes.content);\n  const commonProps = {\n    ...scrollbarProps,\n    sizes,\n    onSizesChange: setSizes,\n    hasThumb: Boolean(thumbRatio > 0 && thumbRatio < 1),\n    onThumbChange: (thumb) => thumbRef.current = thumb,\n    onThumbPointerUp: () => pointerOffsetRef.current = 0,\n    onThumbPointerDown: (pointerPos) => pointerOffsetRef.current = pointerPos\n  };\n  function getScrollPosition(pointerPos, dir) {\n    return getScrollPositionFromPointer(pointerPos, pointerOffsetRef.current, sizes, dir);\n  }\n  if (orientation === \"horizontal\") {\n    return /* @__PURE__ */ jsx(\n      ScrollAreaScrollbarX,\n      {\n        ...commonProps,\n        ref: forwardedRef,\n        onThumbPositionChange: () => {\n          if (context.viewport && thumbRef.current) {\n            const scrollPos = context.viewport.scrollLeft;\n            const offset = getThumbOffsetFromScroll(scrollPos, sizes, context.dir);\n            thumbRef.current.style.transform = `translate3d(${offset}px, 0, 0)`;\n          }\n        },\n        onWheelScroll: (scrollPos) => {\n          if (context.viewport) context.viewport.scrollLeft = scrollPos;\n        },\n        onDragScroll: (pointerPos) => {\n          if (context.viewport) {\n            context.viewport.scrollLeft = getScrollPosition(pointerPos, context.dir);\n          }\n        }\n      }\n    );\n  }\n  if (orientation === \"vertical\") {\n    return /* @__PURE__ */ jsx(\n      ScrollAreaScrollbarY,\n      {\n        ...commonProps,\n        ref: forwardedRef,\n        onThumbPositionChange: () => {\n          if (context.viewport && thumbRef.current) {\n            const scrollPos = context.viewport.scrollTop;\n            const offset = getThumbOffsetFromScroll(scrollPos, sizes);\n            thumbRef.current.style.transform = `translate3d(0, ${offset}px, 0)`;\n          }\n        },\n        onWheelScroll: (scrollPos) => {\n          if (context.viewport) context.viewport.scrollTop = scrollPos;\n        },\n        onDragScroll: (pointerPos) => {\n          if (context.viewport) context.viewport.scrollTop = getScrollPosition(pointerPos);\n        }\n      }\n    );\n  }\n  return null;\n});\nvar ScrollAreaScrollbarX = React2.forwardRef((props, forwardedRef) => {\n  const { sizes, onSizesChange, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [computedStyle, setComputedStyle] = React2.useState();\n  const ref = React2.useRef(null);\n  const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarXChange);\n  React2.useEffect(() => {\n    if (ref.current) setComputedStyle(getComputedStyle(ref.current));\n  }, [ref]);\n  return /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarImpl,\n    {\n      \"data-orientation\": \"horizontal\",\n      ...scrollbarProps,\n      ref: composeRefs,\n      sizes,\n      style: {\n        bottom: 0,\n        left: context.dir === \"rtl\" ? \"var(--radix-scroll-area-corner-width)\" : 0,\n        right: context.dir === \"ltr\" ? \"var(--radix-scroll-area-corner-width)\" : 0,\n        [\"--radix-scroll-area-thumb-width\"]: getThumbSize(sizes) + \"px\",\n        ...props.style\n      },\n      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.x),\n      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.x),\n      onWheelScroll: (event, maxScrollPos) => {\n        if (context.viewport) {\n          const scrollPos = context.viewport.scrollLeft + event.deltaX;\n          props.onWheelScroll(scrollPos);\n          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {\n            event.preventDefault();\n          }\n        }\n      },\n      onResize: () => {\n        if (ref.current && context.viewport && computedStyle) {\n          onSizesChange({\n            content: context.viewport.scrollWidth,\n            viewport: context.viewport.offsetWidth,\n            scrollbar: {\n              size: ref.current.clientWidth,\n              paddingStart: toInt(computedStyle.paddingLeft),\n              paddingEnd: toInt(computedStyle.paddingRight)\n            }\n          });\n        }\n      }\n    }\n  );\n});\nvar ScrollAreaScrollbarY = React2.forwardRef((props, forwardedRef) => {\n  const { sizes, onSizesChange, ...scrollbarProps } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);\n  const [computedStyle, setComputedStyle] = React2.useState();\n  const ref = React2.useRef(null);\n  const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarYChange);\n  React2.useEffect(() => {\n    if (ref.current) setComputedStyle(getComputedStyle(ref.current));\n  }, [ref]);\n  return /* @__PURE__ */ jsx(\n    ScrollAreaScrollbarImpl,\n    {\n      \"data-orientation\": \"vertical\",\n      ...scrollbarProps,\n      ref: composeRefs,\n      sizes,\n      style: {\n        top: 0,\n        right: context.dir === \"ltr\" ? 0 : void 0,\n        left: context.dir === \"rtl\" ? 0 : void 0,\n        bottom: \"var(--radix-scroll-area-corner-height)\",\n        [\"--radix-scroll-area-thumb-height\"]: getThumbSize(sizes) + \"px\",\n        ...props.style\n      },\n      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.y),\n      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.y),\n      onWheelScroll: (event, maxScrollPos) => {\n        if (context.viewport) {\n          const scrollPos = context.viewport.scrollTop + event.deltaY;\n          props.onWheelScroll(scrollPos);\n          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {\n            event.preventDefault();\n          }\n        }\n      },\n      onResize: () => {\n        if (ref.current && context.viewport && computedStyle) {\n          onSizesChange({\n            content: context.viewport.scrollHeight,\n            viewport: context.viewport.offsetHeight,\n            scrollbar: {\n              size: ref.current.clientHeight,\n              paddingStart: toInt(computedStyle.paddingTop),\n              paddingEnd: toInt(computedStyle.paddingBottom)\n            }\n          });\n        }\n      }\n    }\n  );\n});\nvar [ScrollbarProvider, useScrollbarContext] = createScrollAreaContext(SCROLLBAR_NAME);\nvar ScrollAreaScrollbarImpl = React2.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeScrollArea,\n    sizes,\n    hasThumb,\n    onThumbChange,\n    onThumbPointerUp,\n    onThumbPointerDown,\n    onThumbPositionChange,\n    onDragScroll,\n    onWheelScroll,\n    onResize,\n    ...scrollbarProps\n  } = props;\n  const context = useScrollAreaContext(SCROLLBAR_NAME, __scopeScrollArea);\n  const [scrollbar, setScrollbar] = React2.useState(null);\n  const composeRefs = useComposedRefs(forwardedRef, (node) => setScrollbar(node));\n  const rectRef = React2.useRef(null);\n  const prevWebkitUserSelectRef = React2.useRef(\"\");\n  const viewport = context.viewport;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const handleWheelScroll = useCallbackRef(onWheelScroll);\n  const handleThumbPositionChange = useCallbackRef(onThumbPositionChange);\n  const handleResize = useDebounceCallback(onResize, 10);\n  function handleDragScroll(event) {\n    if (rectRef.current) {\n      const x = event.clientX - rectRef.current.left;\n      const y = event.clientY - rectRef.current.top;\n      onDragScroll({ x, y });\n    }\n  }\n  React2.useEffect(() => {\n    const handleWheel = (event) => {\n      const element = event.target;\n      const isScrollbarWheel = scrollbar?.contains(element);\n      if (isScrollbarWheel) handleWheelScroll(event, maxScrollPos);\n    };\n    document.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => document.removeEventListener(\"wheel\", handleWheel, { passive: false });\n  }, [viewport, scrollbar, maxScrollPos, handleWheelScroll]);\n  React2.useEffect(handleThumbPositionChange, [sizes, handleThumbPositionChange]);\n  useResizeObserver(scrollbar, handleResize);\n  useResizeObserver(context.content, handleResize);\n  return /* @__PURE__ */ jsx(\n    ScrollbarProvider,\n    {\n      scope: __scopeScrollArea,\n      scrollbar,\n      hasThumb,\n      onThumbChange: useCallbackRef(onThumbChange),\n      onThumbPointerUp: useCallbackRef(onThumbPointerUp),\n      onThumbPositionChange: handleThumbPositionChange,\n      onThumbPointerDown: useCallbackRef(onThumbPointerDown),\n      children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          ...scrollbarProps,\n          ref: composeRefs,\n          style: { position: \"absolute\", ...scrollbarProps.style },\n          onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n            const mainPointer = 0;\n            if (event.button === mainPointer) {\n              const element = event.target;\n              element.setPointerCapture(event.pointerId);\n              rectRef.current = scrollbar.getBoundingClientRect();\n              prevWebkitUserSelectRef.current = document.body.style.webkitUserSelect;\n              document.body.style.webkitUserSelect = \"none\";\n              if (context.viewport) context.viewport.style.scrollBehavior = \"auto\";\n              handleDragScroll(event);\n            }\n          }),\n          onPointerMove: composeEventHandlers(props.onPointerMove, handleDragScroll),\n          onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n            const element = event.target;\n            if (element.hasPointerCapture(event.pointerId)) {\n              element.releasePointerCapture(event.pointerId);\n            }\n            document.body.style.webkitUserSelect = prevWebkitUserSelectRef.current;\n            if (context.viewport) context.viewport.style.scrollBehavior = \"\";\n            rectRef.current = null;\n          })\n        }\n      )\n    }\n  );\n});\nvar THUMB_NAME = \"ScrollAreaThumb\";\nvar ScrollAreaThumb = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { forceMount, ...thumbProps } = props;\n    const scrollbarContext = useScrollbarContext(THUMB_NAME, props.__scopeScrollArea);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || scrollbarContext.hasThumb, children: /* @__PURE__ */ jsx(ScrollAreaThumbImpl, { ref: forwardedRef, ...thumbProps }) });\n  }\n);\nvar ScrollAreaThumbImpl = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeScrollArea, style, ...thumbProps } = props;\n    const scrollAreaContext = useScrollAreaContext(THUMB_NAME, __scopeScrollArea);\n    const scrollbarContext = useScrollbarContext(THUMB_NAME, __scopeScrollArea);\n    const { onThumbPositionChange } = scrollbarContext;\n    const composedRef = useComposedRefs(\n      forwardedRef,\n      (node) => scrollbarContext.onThumbChange(node)\n    );\n    const removeUnlinkedScrollListenerRef = React2.useRef();\n    const debounceScrollEnd = useDebounceCallback(() => {\n      if (removeUnlinkedScrollListenerRef.current) {\n        removeUnlinkedScrollListenerRef.current();\n        removeUnlinkedScrollListenerRef.current = void 0;\n      }\n    }, 100);\n    React2.useEffect(() => {\n      const viewport = scrollAreaContext.viewport;\n      if (viewport) {\n        const handleScroll = () => {\n          debounceScrollEnd();\n          if (!removeUnlinkedScrollListenerRef.current) {\n            const listener = addUnlinkedScrollListener(viewport, onThumbPositionChange);\n            removeUnlinkedScrollListenerRef.current = listener;\n            onThumbPositionChange();\n          }\n        };\n        onThumbPositionChange();\n        viewport.addEventListener(\"scroll\", handleScroll);\n        return () => viewport.removeEventListener(\"scroll\", handleScroll);\n      }\n    }, [scrollAreaContext.viewport, debounceScrollEnd, onThumbPositionChange]);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": scrollbarContext.hasThumb ? \"visible\" : \"hidden\",\n        ...thumbProps,\n        ref: composedRef,\n        style: {\n          width: \"var(--radix-scroll-area-thumb-width)\",\n          height: \"var(--radix-scroll-area-thumb-height)\",\n          ...style\n        },\n        onPointerDownCapture: composeEventHandlers(props.onPointerDownCapture, (event) => {\n          const thumb = event.target;\n          const thumbRect = thumb.getBoundingClientRect();\n          const x = event.clientX - thumbRect.left;\n          const y = event.clientY - thumbRect.top;\n          scrollbarContext.onThumbPointerDown({ x, y });\n        }),\n        onPointerUp: composeEventHandlers(props.onPointerUp, scrollbarContext.onThumbPointerUp)\n      }\n    );\n  }\n);\nScrollAreaThumb.displayName = THUMB_NAME;\nvar CORNER_NAME = \"ScrollAreaCorner\";\nvar ScrollAreaCorner = React2.forwardRef(\n  (props, forwardedRef) => {\n    const context = useScrollAreaContext(CORNER_NAME, props.__scopeScrollArea);\n    const hasBothScrollbarsVisible = Boolean(context.scrollbarX && context.scrollbarY);\n    const hasCorner = context.type !== \"scroll\" && hasBothScrollbarsVisible;\n    return hasCorner ? /* @__PURE__ */ jsx(ScrollAreaCornerImpl, { ...props, ref: forwardedRef }) : null;\n  }\n);\nScrollAreaCorner.displayName = CORNER_NAME;\nvar ScrollAreaCornerImpl = React2.forwardRef((props, forwardedRef) => {\n  const { __scopeScrollArea, ...cornerProps } = props;\n  const context = useScrollAreaContext(CORNER_NAME, __scopeScrollArea);\n  const [width, setWidth] = React2.useState(0);\n  const [height, setHeight] = React2.useState(0);\n  const hasSize = Boolean(width && height);\n  useResizeObserver(context.scrollbarX, () => {\n    const height2 = context.scrollbarX?.offsetHeight || 0;\n    context.onCornerHeightChange(height2);\n    setHeight(height2);\n  });\n  useResizeObserver(context.scrollbarY, () => {\n    const width2 = context.scrollbarY?.offsetWidth || 0;\n    context.onCornerWidthChange(width2);\n    setWidth(width2);\n  });\n  return hasSize ? /* @__PURE__ */ jsx(\n    Primitive.div,\n    {\n      ...cornerProps,\n      ref: forwardedRef,\n      style: {\n        width,\n        height,\n        position: \"absolute\",\n        right: context.dir === \"ltr\" ? 0 : void 0,\n        left: context.dir === \"rtl\" ? 0 : void 0,\n        bottom: 0,\n        ...props.style\n      }\n    }\n  ) : null;\n});\nfunction toInt(value) {\n  return value ? parseInt(value, 10) : 0;\n}\nfunction getThumbRatio(viewportSize, contentSize) {\n  const ratio = viewportSize / contentSize;\n  return isNaN(ratio) ? 0 : ratio;\n}\nfunction getThumbSize(sizes) {\n  const ratio = getThumbRatio(sizes.viewport, sizes.content);\n  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;\n  const thumbSize = (sizes.scrollbar.size - scrollbarPadding) * ratio;\n  return Math.max(thumbSize, 18);\n}\nfunction getScrollPositionFromPointer(pointerPos, pointerOffset, sizes, dir = \"ltr\") {\n  const thumbSizePx = getThumbSize(sizes);\n  const thumbCenter = thumbSizePx / 2;\n  const offset = pointerOffset || thumbCenter;\n  const thumbOffsetFromEnd = thumbSizePx - offset;\n  const minPointerPos = sizes.scrollbar.paddingStart + offset;\n  const maxPointerPos = sizes.scrollbar.size - sizes.scrollbar.paddingEnd - thumbOffsetFromEnd;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const scrollRange = dir === \"ltr\" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];\n  const interpolate = linearScale([minPointerPos, maxPointerPos], scrollRange);\n  return interpolate(pointerPos);\n}\nfunction getThumbOffsetFromScroll(scrollPos, sizes, dir = \"ltr\") {\n  const thumbSizePx = getThumbSize(sizes);\n  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;\n  const scrollbar = sizes.scrollbar.size - scrollbarPadding;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const maxThumbPos = scrollbar - thumbSizePx;\n  const scrollClampRange = dir === \"ltr\" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];\n  const scrollWithoutMomentum = clamp(scrollPos, scrollClampRange);\n  const interpolate = linearScale([0, maxScrollPos], [0, maxThumbPos]);\n  return interpolate(scrollWithoutMomentum);\n}\nfunction linearScale(input, output) {\n  return (value) => {\n    if (input[0] === input[1] || output[0] === output[1]) return output[0];\n    const ratio = (output[1] - output[0]) / (input[1] - input[0]);\n    return output[0] + ratio * (value - input[0]);\n  };\n}\nfunction isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos) {\n  return scrollPos > 0 && scrollPos < maxScrollPos;\n}\nvar addUnlinkedScrollListener = (node, handler = () => {\n}) => {\n  let prevPosition = { left: node.scrollLeft, top: node.scrollTop };\n  let rAF = 0;\n  (function loop() {\n    const position = { left: node.scrollLeft, top: node.scrollTop };\n    const isHorizontalScroll = prevPosition.left !== position.left;\n    const isVerticalScroll = prevPosition.top !== position.top;\n    if (isHorizontalScroll || isVerticalScroll) handler();\n    prevPosition = position;\n    rAF = window.requestAnimationFrame(loop);\n  })();\n  return () => window.cancelAnimationFrame(rAF);\n};\nfunction useDebounceCallback(callback, delay) {\n  const handleCallback = useCallbackRef(callback);\n  const debounceTimerRef = React2.useRef(0);\n  React2.useEffect(() => () => window.clearTimeout(debounceTimerRef.current), []);\n  return React2.useCallback(() => {\n    window.clearTimeout(debounceTimerRef.current);\n    debounceTimerRef.current = window.setTimeout(handleCallback, delay);\n  }, [handleCallback, delay]);\n}\nfunction useResizeObserver(element, onResize) {\n  const handleResize = useCallbackRef(onResize);\n  useLayoutEffect(() => {\n    let rAF = 0;\n    if (element) {\n      const resizeObserver = new ResizeObserver(() => {\n        cancelAnimationFrame(rAF);\n        rAF = window.requestAnimationFrame(handleResize);\n      });\n      resizeObserver.observe(element);\n      return () => {\n        window.cancelAnimationFrame(rAF);\n        resizeObserver.unobserve(element);\n      };\n    }\n  }, [element, handleResize]);\n}\nfunction getSubtree(options, content) {\n  const { asChild, children } = options;\n  if (!asChild) return typeof content === \"function\" ? content(children) : content;\n  const firstChild = React2.Children.only(children);\n  return React2.cloneElement(firstChild, {\n    children: typeof content === \"function\" ? content(firstChild.props.children) : content\n  });\n}\nvar Root = ScrollArea;\nvar Viewport = ScrollAreaViewport;\nvar Scrollbar = ScrollAreaScrollbar;\nvar Thumb = ScrollAreaThumb;\nvar Corner = ScrollAreaCorner;\nexport {\n  Corner,\n  Root,\n  ScrollArea,\n  ScrollAreaCorner,\n  ScrollAreaScrollbar,\n  ScrollAreaThumb,\n  ScrollAreaViewport,\n  Scrollbar,\n  Thumb,\n  Viewport,\n  createScrollAreaScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n","\"use client\";\n\n// packages/react/slider/src/Slider.tsx\nimport * as React from \"react\";\nimport { clamp } from \"@radix-ui/number\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar PAGE_KEYS = [\"PageUp\", \"PageDown\"];\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar BACK_KEYS = {\n  \"from-left\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowLeft\"],\n  \"from-right\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowRight\"],\n  \"from-bottom\": [\"Home\", \"PageDown\", \"ArrowDown\", \"ArrowLeft\"],\n  \"from-top\": [\"Home\", \"PageDown\", \"ArrowUp\", \"ArrowLeft\"]\n};\nvar SLIDER_NAME = \"Slider\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(SLIDER_NAME);\nvar [createSliderContext, createSliderScope] = createContextScope(SLIDER_NAME, [\n  createCollectionScope\n]);\nvar [SliderProvider, useSliderContext] = createSliderContext(SLIDER_NAME);\nvar Slider = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      name,\n      min = 0,\n      max = 100,\n      step = 1,\n      orientation = \"horizontal\",\n      disabled = false,\n      minStepsBetweenThumbs = 0,\n      defaultValue = [min],\n      value,\n      onValueChange = () => {\n      },\n      onValueCommit = () => {\n      },\n      inverted = false,\n      form,\n      ...sliderProps\n    } = props;\n    const thumbRefs = React.useRef(/* @__PURE__ */ new Set());\n    const valueIndexToChangeRef = React.useRef(0);\n    const isHorizontal = orientation === \"horizontal\";\n    const SliderOrientation = isHorizontal ? SliderHorizontal : SliderVertical;\n    const [values = [], setValues] = useControllableState({\n      prop: value,\n      defaultProp: defaultValue,\n      onChange: (value2) => {\n        const thumbs = [...thumbRefs.current];\n        thumbs[valueIndexToChangeRef.current]?.focus();\n        onValueChange(value2);\n      }\n    });\n    const valuesBeforeSlideStartRef = React.useRef(values);\n    function handleSlideStart(value2) {\n      const closestIndex = getClosestValueIndex(values, value2);\n      updateValues(value2, closestIndex);\n    }\n    function handleSlideMove(value2) {\n      updateValues(value2, valueIndexToChangeRef.current);\n    }\n    function handleSlideEnd() {\n      const prevValue = valuesBeforeSlideStartRef.current[valueIndexToChangeRef.current];\n      const nextValue = values[valueIndexToChangeRef.current];\n      const hasChanged = nextValue !== prevValue;\n      if (hasChanged) onValueCommit(values);\n    }\n    function updateValues(value2, atIndex, { commit } = { commit: false }) {\n      const decimalCount = getDecimalCount(step);\n      const snapToStep = roundValue(Math.round((value2 - min) / step) * step + min, decimalCount);\n      const nextValue = clamp(snapToStep, [min, max]);\n      setValues((prevValues = []) => {\n        const nextValues = getNextSortedValues(prevValues, nextValue, atIndex);\n        if (hasMinStepsBetweenValues(nextValues, minStepsBetweenThumbs * step)) {\n          valueIndexToChangeRef.current = nextValues.indexOf(nextValue);\n          const hasChanged = String(nextValues) !== String(prevValues);\n          if (hasChanged && commit) onValueCommit(nextValues);\n          return hasChanged ? nextValues : prevValues;\n        } else {\n          return prevValues;\n        }\n      });\n    }\n    return /* @__PURE__ */ jsx(\n      SliderProvider,\n      {\n        scope: props.__scopeSlider,\n        name,\n        disabled,\n        min,\n        max,\n        valueIndexToChangeRef,\n        thumbs: thumbRefs.current,\n        values,\n        orientation,\n        form,\n        children: /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(\n          SliderOrientation,\n          {\n            \"aria-disabled\": disabled,\n            \"data-disabled\": disabled ? \"\" : void 0,\n            ...sliderProps,\n            ref: forwardedRef,\n            onPointerDown: composeEventHandlers(sliderProps.onPointerDown, () => {\n              if (!disabled) valuesBeforeSlideStartRef.current = values;\n            }),\n            min,\n            max,\n            inverted,\n            onSlideStart: disabled ? void 0 : handleSlideStart,\n            onSlideMove: disabled ? void 0 : handleSlideMove,\n            onSlideEnd: disabled ? void 0 : handleSlideEnd,\n            onHomeKeyDown: () => !disabled && updateValues(min, 0, { commit: true }),\n            onEndKeyDown: () => !disabled && updateValues(max, values.length - 1, { commit: true }),\n            onStepKeyDown: ({ event, direction: stepDirection }) => {\n              if (!disabled) {\n                const isPageKey = PAGE_KEYS.includes(event.key);\n                const isSkipKey = isPageKey || event.shiftKey && ARROW_KEYS.includes(event.key);\n                const multiplier = isSkipKey ? 10 : 1;\n                const atIndex = valueIndexToChangeRef.current;\n                const value2 = values[atIndex];\n                const stepInDirection = step * multiplier * stepDirection;\n                updateValues(value2 + stepInDirection, atIndex, { commit: true });\n              }\n            }\n          }\n        ) }) })\n      }\n    );\n  }\n);\nSlider.displayName = SLIDER_NAME;\nvar [SliderOrientationProvider, useSliderOrientationContext] = createSliderContext(SLIDER_NAME, {\n  startEdge: \"left\",\n  endEdge: \"right\",\n  size: \"width\",\n  direction: 1\n});\nvar SliderHorizontal = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      min,\n      max,\n      dir,\n      inverted,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const [slider, setSlider] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setSlider(node));\n    const rectRef = React.useRef();\n    const direction = useDirection(dir);\n    const isDirectionLTR = direction === \"ltr\";\n    const isSlidingFromLeft = isDirectionLTR && !inverted || !isDirectionLTR && inverted;\n    function getValueFromPointer(pointerPosition) {\n      const rect = rectRef.current || slider.getBoundingClientRect();\n      const input = [0, rect.width];\n      const output = isSlidingFromLeft ? [min, max] : [max, min];\n      const value = linearScale(input, output);\n      rectRef.current = rect;\n      return value(pointerPosition - rect.left);\n    }\n    return /* @__PURE__ */ jsx(\n      SliderOrientationProvider,\n      {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromLeft ? \"left\" : \"right\",\n        endEdge: isSlidingFromLeft ? \"right\" : \"left\",\n        direction: isSlidingFromLeft ? 1 : -1,\n        size: \"width\",\n        children: /* @__PURE__ */ jsx(\n          SliderImpl,\n          {\n            dir: direction,\n            \"data-orientation\": \"horizontal\",\n            ...sliderProps,\n            ref: composedRefs,\n            style: {\n              ...sliderProps.style,\n              [\"--radix-slider-thumb-transform\"]: \"translateX(-50%)\"\n            },\n            onSlideStart: (event) => {\n              const value = getValueFromPointer(event.clientX);\n              onSlideStart?.(value);\n            },\n            onSlideMove: (event) => {\n              const value = getValueFromPointer(event.clientX);\n              onSlideMove?.(value);\n            },\n            onSlideEnd: () => {\n              rectRef.current = void 0;\n              onSlideEnd?.();\n            },\n            onStepKeyDown: (event) => {\n              const slideDirection = isSlidingFromLeft ? \"from-left\" : \"from-right\";\n              const isBackKey = BACK_KEYS[slideDirection].includes(event.key);\n              onStepKeyDown?.({ event, direction: isBackKey ? -1 : 1 });\n            }\n          }\n        )\n      }\n    );\n  }\n);\nvar SliderVertical = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      min,\n      max,\n      inverted,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const sliderRef = React.useRef(null);\n    const ref = useComposedRefs(forwardedRef, sliderRef);\n    const rectRef = React.useRef();\n    const isSlidingFromBottom = !inverted;\n    function getValueFromPointer(pointerPosition) {\n      const rect = rectRef.current || sliderRef.current.getBoundingClientRect();\n      const input = [0, rect.height];\n      const output = isSlidingFromBottom ? [max, min] : [min, max];\n      const value = linearScale(input, output);\n      rectRef.current = rect;\n      return value(pointerPosition - rect.top);\n    }\n    return /* @__PURE__ */ jsx(\n      SliderOrientationProvider,\n      {\n        scope: props.__scopeSlider,\n        startEdge: isSlidingFromBottom ? \"bottom\" : \"top\",\n        endEdge: isSlidingFromBottom ? \"top\" : \"bottom\",\n        size: \"height\",\n        direction: isSlidingFromBottom ? 1 : -1,\n        children: /* @__PURE__ */ jsx(\n          SliderImpl,\n          {\n            \"data-orientation\": \"vertical\",\n            ...sliderProps,\n            ref,\n            style: {\n              ...sliderProps.style,\n              [\"--radix-slider-thumb-transform\"]: \"translateY(50%)\"\n            },\n            onSlideStart: (event) => {\n              const value = getValueFromPointer(event.clientY);\n              onSlideStart?.(value);\n            },\n            onSlideMove: (event) => {\n              const value = getValueFromPointer(event.clientY);\n              onSlideMove?.(value);\n            },\n            onSlideEnd: () => {\n              rectRef.current = void 0;\n              onSlideEnd?.();\n            },\n            onStepKeyDown: (event) => {\n              const slideDirection = isSlidingFromBottom ? \"from-bottom\" : \"from-top\";\n              const isBackKey = BACK_KEYS[slideDirection].includes(event.key);\n              onStepKeyDown?.({ event, direction: isBackKey ? -1 : 1 });\n            }\n          }\n        )\n      }\n    );\n  }\n);\nvar SliderImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSlider,\n      onSlideStart,\n      onSlideMove,\n      onSlideEnd,\n      onHomeKeyDown,\n      onEndKeyDown,\n      onStepKeyDown,\n      ...sliderProps\n    } = props;\n    const context = useSliderContext(SLIDER_NAME, __scopeSlider);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        ...sliderProps,\n        ref: forwardedRef,\n        onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n          if (event.key === \"Home\") {\n            onHomeKeyDown(event);\n            event.preventDefault();\n          } else if (event.key === \"End\") {\n            onEndKeyDown(event);\n            event.preventDefault();\n          } else if (PAGE_KEYS.concat(ARROW_KEYS).includes(event.key)) {\n            onStepKeyDown(event);\n            event.preventDefault();\n          }\n        }),\n        onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n          const target = event.target;\n          target.setPointerCapture(event.pointerId);\n          event.preventDefault();\n          if (context.thumbs.has(target)) {\n            target.focus();\n          } else {\n            onSlideStart(event);\n          }\n        }),\n        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) onSlideMove(event);\n        }),\n        onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n          const target = event.target;\n          if (target.hasPointerCapture(event.pointerId)) {\n            target.releasePointerCapture(event.pointerId);\n            onSlideEnd(event);\n          }\n        })\n      }\n    );\n  }\n);\nvar TRACK_NAME = \"SliderTrack\";\nvar SliderTrack = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, ...trackProps } = props;\n    const context = useSliderContext(TRACK_NAME, __scopeSlider);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        \"data-orientation\": context.orientation,\n        ...trackProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSliderTrack.displayName = TRACK_NAME;\nvar RANGE_NAME = \"SliderRange\";\nvar SliderRange = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, ...rangeProps } = props;\n    const context = useSliderContext(RANGE_NAME, __scopeSlider);\n    const orientation = useSliderOrientationContext(RANGE_NAME, __scopeSlider);\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const valuesCount = context.values.length;\n    const percentages = context.values.map(\n      (value) => convertValueToPercentage(value, context.min, context.max)\n    );\n    const offsetStart = valuesCount > 1 ? Math.min(...percentages) : 0;\n    const offsetEnd = 100 - Math.max(...percentages);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-orientation\": context.orientation,\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...rangeProps,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          [orientation.startEdge]: offsetStart + \"%\",\n          [orientation.endEdge]: offsetEnd + \"%\"\n        }\n      }\n    );\n  }\n);\nSliderRange.displayName = RANGE_NAME;\nvar THUMB_NAME = \"SliderThumb\";\nvar SliderThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const getItems = useCollection(props.__scopeSlider);\n    const [thumb, setThumb] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setThumb(node));\n    const index = React.useMemo(\n      () => thumb ? getItems().findIndex((item) => item.ref.current === thumb) : -1,\n      [getItems, thumb]\n    );\n    return /* @__PURE__ */ jsx(SliderThumbImpl, { ...props, ref: composedRefs, index });\n  }\n);\nvar SliderThumbImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSlider, index, name, ...thumbProps } = props;\n    const context = useSliderContext(THUMB_NAME, __scopeSlider);\n    const orientation = useSliderOrientationContext(THUMB_NAME, __scopeSlider);\n    const [thumb, setThumb] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setThumb(node));\n    const isFormControl = thumb ? context.form || !!thumb.closest(\"form\") : true;\n    const size = useSize(thumb);\n    const value = context.values[index];\n    const percent = value === void 0 ? 0 : convertValueToPercentage(value, context.min, context.max);\n    const label = getLabel(index, context.values.length);\n    const orientationSize = size?.[orientation.size];\n    const thumbInBoundsOffset = orientationSize ? getThumbInBoundsOffset(orientationSize, percent, orientation.direction) : 0;\n    React.useEffect(() => {\n      if (thumb) {\n        context.thumbs.add(thumb);\n        return () => {\n          context.thumbs.delete(thumb);\n        };\n      }\n    }, [thumb, context.thumbs]);\n    return /* @__PURE__ */ jsxs(\n      \"span\",\n      {\n        style: {\n          transform: \"var(--radix-slider-thumb-transform)\",\n          position: \"absolute\",\n          [orientation.startEdge]: `calc(${percent}% + ${thumbInBoundsOffset}px)`\n        },\n        children: [\n          /* @__PURE__ */ jsx(Collection.ItemSlot, { scope: props.__scopeSlider, children: /* @__PURE__ */ jsx(\n            Primitive.span,\n            {\n              role: \"slider\",\n              \"aria-label\": props[\"aria-label\"] || label,\n              \"aria-valuemin\": context.min,\n              \"aria-valuenow\": value,\n              \"aria-valuemax\": context.max,\n              \"aria-orientation\": context.orientation,\n              \"data-orientation\": context.orientation,\n              \"data-disabled\": context.disabled ? \"\" : void 0,\n              tabIndex: context.disabled ? void 0 : 0,\n              ...thumbProps,\n              ref: composedRefs,\n              style: value === void 0 ? { display: \"none\" } : props.style,\n              onFocus: composeEventHandlers(props.onFocus, () => {\n                context.valueIndexToChangeRef.current = index;\n              })\n            }\n          ) }),\n          isFormControl && /* @__PURE__ */ jsx(\n            BubbleInput,\n            {\n              name: name ?? (context.name ? context.name + (context.values.length > 1 ? \"[]\" : \"\") : void 0),\n              form: context.form,\n              value\n            },\n            index\n          )\n        ]\n      }\n    );\n  }\n);\nSliderThumb.displayName = THUMB_NAME;\nvar BubbleInput = (props) => {\n  const { value, ...inputProps } = props;\n  const ref = React.useRef(null);\n  const prevValue = usePrevious(value);\n  React.useEffect(() => {\n    const input = ref.current;\n    const inputProto = window.HTMLInputElement.prototype;\n    const descriptor = Object.getOwnPropertyDescriptor(inputProto, \"value\");\n    const setValue = descriptor.set;\n    if (prevValue !== value && setValue) {\n      const event = new Event(\"input\", { bubbles: true });\n      setValue.call(input, value);\n      input.dispatchEvent(event);\n    }\n  }, [prevValue, value]);\n  return /* @__PURE__ */ jsx(\"input\", { style: { display: \"none\" }, ...inputProps, ref, defaultValue: value });\n};\nfunction getNextSortedValues(prevValues = [], nextValue, atIndex) {\n  const nextValues = [...prevValues];\n  nextValues[atIndex] = nextValue;\n  return nextValues.sort((a, b) => a - b);\n}\nfunction convertValueToPercentage(value, min, max) {\n  const maxSteps = max - min;\n  const percentPerStep = 100 / maxSteps;\n  const percentage = percentPerStep * (value - min);\n  return clamp(percentage, [0, 100]);\n}\nfunction getLabel(index, totalValues) {\n  if (totalValues > 2) {\n    return `Value ${index + 1} of ${totalValues}`;\n  } else if (totalValues === 2) {\n    return [\"Minimum\", \"Maximum\"][index];\n  } else {\n    return void 0;\n  }\n}\nfunction getClosestValueIndex(values, nextValue) {\n  if (values.length === 1) return 0;\n  const distances = values.map((value) => Math.abs(value - nextValue));\n  const closestDistance = Math.min(...distances);\n  return distances.indexOf(closestDistance);\n}\nfunction getThumbInBoundsOffset(width, left, direction) {\n  const halfWidth = width / 2;\n  const halfPercent = 50;\n  const offset = linearScale([0, halfPercent], [0, halfWidth]);\n  return (halfWidth - offset(left) * direction) * direction;\n}\nfunction getStepsBetweenValues(values) {\n  return values.slice(0, -1).map((value, index) => values[index + 1] - value);\n}\nfunction hasMinStepsBetweenValues(values, minStepsBetweenValues) {\n  if (minStepsBetweenValues > 0) {\n    const stepsBetweenValues = getStepsBetweenValues(values);\n    const actualMinStepsBetweenValues = Math.min(...stepsBetweenValues);\n    return actualMinStepsBetweenValues >= minStepsBetweenValues;\n  }\n  return true;\n}\nfunction linearScale(input, output) {\n  return (value) => {\n    if (input[0] === input[1] || output[0] === output[1]) return output[0];\n    const ratio = (output[1] - output[0]) / (input[1] - input[0]);\n    return output[0] + ratio * (value - input[0]);\n  };\n}\nfunction getDecimalCount(value) {\n  return (String(value).split(\".\")[1] || \"\").length;\n}\nfunction roundValue(value, decimalCount) {\n  const rounder = Math.pow(10, decimalCount);\n  return Math.round(value * rounder) / rounder;\n}\nvar Root = Slider;\nvar Track = SliderTrack;\nvar Range = SliderRange;\nvar Thumb = SliderThumb;\nexport {\n  Range,\n  Root,\n  Slider,\n  SliderRange,\n  SliderThumb,\n  SliderTrack,\n  Thumb,\n  Track,\n  createSliderScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Slider = React.forwardRef<\r\n  React.ElementRef<typeof SliderPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SliderPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full touch-none select-none items-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\r\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\r\n    </SliderPrimitive.Track>\r\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\r\n  </SliderPrimitive.Root>\r\n))\r\nSlider.displayName = SliderPrimitive.Root.displayName\r\n\r\nexport { Slider }\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowLeft, MapPin, Info } from \"lucide-react\";\r\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\r\nimport Loader2 from \"lucide-react/dist/esm/icons/loader-2\";\r\nimport Volume2 from \"lucide-react/dist/esm/icons/volume-2\";\r\nimport Pause from \"lucide-react/dist/esm/icons/pause\";\r\nimport Play from \"lucide-react/dist/esm/icons/play\";\r\nimport { getImagePath } from \"@/utils/imagePaths\";\r\nimport { getAssetPath } from \"@/utils/assetUtils\";\r\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { isOnline } from \"@/utils/serviceWorkerRegistration\";\r\nimport { preloadSingleHistoryImage, isHistoryImageCached } from \"@/services/offlineService\";\r\nimport { createLogger } from \"@/utils/logger\";\r\nimport { Slider } from \"@/components/ui/slider\";\r\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { locations } from \"@/data/locations\";\r\nimport { setLocationContributionContext } from \"@/services/contextualContributionService\";\r\n\r\n// Créer un logger pour le composant LocationHistory\r\nconst logger = createLogger('LocationHistory');\r\n\r\nexport function LocationHistory() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [imagesLoading, setImagesLoading] = useState<Record<string, boolean>>({});\r\n  \r\n  // États pour le lecteur audio\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [duration, setDuration] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [audioLoading, setAudioLoading] = useState(false);\r\n  \r\n  // Récupérer le locationId depuis l'état de navigation s'il existe\r\n  const locationIdFromState = location.state?.selectedLocationId;\r\n  \r\n  // Vérifier d'abord si l'ID reçu correspond à un lieu existant\r\n  const locationFromState = locationIdFromState ? locations.find(loc => loc.id === locationIdFromState) : null;\r\n  \r\n  // Filtrer uniquement les lieux qui ont un historique ou une référence à un historique\r\n  // et éliminer les doublons basés sur le nom\r\n  let locationsWithHistory = [];\r\n  const processedNames = new Set();\r\n  \r\n  // Donner priorité aux lieux avec un historique direct plutôt qu'une référence\r\n  const sortedLocations = [...locations].sort((a, b) => {\r\n    // Les lieux avec history viennent avant ceux avec historyRef\r\n    if (a.history && !b.history) return -1;\r\n    if (!a.history && b.history) return 1;\r\n    return 0;\r\n  });\r\n  \r\n  // Filtrer les lieux\r\n  for (const loc of sortedLocations) {\r\n    // Vérifier si le lieu a un historique ou une référence\r\n    if (loc.history || loc.historyRef) {\r\n      // Vérifier si on a déjà un lieu avec le même nom\r\n      if (!processedNames.has(loc.name)) {\r\n        locationsWithHistory.push(loc);\r\n        processedNames.add(loc.name);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Si le lieu reçu en paramètre a un historique ou une référence mais n'est pas dans la liste, l'ajouter\r\n  if ((locationFromState?.history || locationFromState?.historyRef) && \r\n      !locationsWithHistory.some(loc => loc.id === locationIdFromState)) {\r\n    locationsWithHistory.push(locationFromState);\r\n    // Le lieu reçu en paramètre a été ajouté à la liste\r\n  }\r\n  \r\n  const [selectedLocation, setSelectedLocation] = useState(() => {\r\n    // Si on a reçu un ID valide, l'utiliser\r\n    if (locationIdFromState && locations.find(loc => loc.id === locationIdFromState) && \r\n        (locations.find(loc => loc.id === locationIdFromState)?.history || \r\n         locations.find(loc => loc.id === locationIdFromState)?.historyRef)) {\r\n      return locationIdFromState;\r\n    }\r\n    // Sinon, utiliser le premier emplacement disponible\r\n    return locationsWithHistory[0]?.id || null;\r\n  });\r\n\r\n  // Trouver le lieu sélectionné\r\n  const selectedLocationData = locationsWithHistory.find(loc => loc.id === selectedLocation);\r\n  \r\n  // Fonctions pour le lecteur audio\r\n  const togglePlayPause = () => {\r\n    if (audioRef.current) {\r\n      if (isPlaying) {\r\n        audioRef.current.pause();\r\n        if (selectedLocationData?.id) {\r\n          analytics.trackAudio('pause', selectedLocationData.id);\r\n        }\r\n      } else {\r\n        audioRef.current.play();\r\n        if (selectedLocationData?.id) {\r\n          analytics.trackAudio('play', selectedLocationData.id);\r\n        }\r\n      }\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (audioRef.current) {\r\n      setCurrentTime(audioRef.current.currentTime);\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (audioRef.current) {\r\n      setDuration(audioRef.current.duration);\r\n      setAudioLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSliderChange = (value: number[]) => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = value[0];\r\n      setCurrentTime(value[0]);\r\n      if (selectedLocationData?.id) {\r\n        analytics.trackAudio('seek', selectedLocationData.id, value[0]);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Formater le temps en minutes:secondes\r\n  const formatTime = (time: number) => {\r\n    const minutes = Math.floor(time / 60);\r\n    const seconds = Math.floor(time % 60);\r\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n  };\r\n  \r\n  // Précharger l'image du lieu sélectionné pour le mode hors-ligne\r\n  useEffect(() => {\r\n    // Page view for history page\r\n    analytics.trackPageView(\"/history\", \"Histoire des lieux\");\r\n  }, []);\r\n\r\n  // Track building selection and section view\r\n  useEffect(() => {\r\n    if (selectedLocationData?.image) {\r\n      const imagePath = getImagePath(selectedLocationData.image);\r\n      \r\n      // Vérifier si l'image est déjà en cache\r\n      if (!isHistoryImageCached(imagePath)) {\r\n        setImagesLoading(prev => ({ ...prev, [imagePath]: true }));\r\n        \r\n        // Précharger l'image\r\n        preloadSingleHistoryImage(imagePath)\r\n          .then(success => {\r\n            logger.info(`Préchargement de l'image ${success ? 'réussi' : 'échoué'}:`, { imagePath });\r\n            setImagesLoading(prev => ({ ...prev, [imagePath]: false }));\r\n          })\r\n          .catch(error => {\r\n            logger.error(`Erreur lors du préchargement de l'image:`, { imagePath, error });\r\n            setImagesLoading(prev => ({ ...prev, [imagePath]: false }));\r\n          });\r\n      }\r\n    }\r\n    // Track building viewed and main section visible\r\n    if (selectedLocationData) {\r\n      analytics.trackBuildingView(selectedLocationData.id, selectedLocationData.name);\r\n      analytics.trackBuildingHistoryView(selectedLocationData.id, 'Histoire complète');\r\n    }\r\n  }, [selectedLocationData]);\r\n  \r\n  // Réinitialiser le lecteur audio lors du changement de lieu\r\n  useEffect(() => {\r\n    // Arrêter la lecture audio si elle est en cours\r\n    if (audioRef.current && isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n    }\r\n    \r\n    setCurrentTime(0);\r\n    setDuration(0);\r\n    \r\n    // Si le nouveau lieu a un fichier audio, préparer le lecteur\r\n    if (selectedLocationData?.audio) {\r\n      setAudioLoading(true);\r\n    }\r\n  }, [selectedLocation]);\r\n\r\n  return (\r\n    <div className=\"container max-w-md mx-auto px-4 pb-20 pt-4\">\r\n      <div className=\"flex items-center mb-4\">\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"mr-2\" \r\n          onClick={() => navigate(-1)}\r\n        >\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <h1 className=\"text-xl font-bold\">Histoire des lieux</h1>\r\n      </div>\r\n\r\n      {/* Liste déroulante des lieux */}\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-lg font-medium mb-2 text-[#4a5d94]\">Sélectionnez un lieu</h2>\r\n        <Select\r\n          value={selectedLocation}\r\n          onValueChange={(value) => setSelectedLocation(value)}\r\n        >\r\n          <SelectTrigger className=\"w-full border-[#4a5d94] text-[#4a5d94]\">\r\n            <SelectValue placeholder=\"Choisir un lieu\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {locationsWithHistory.map((location) => (\r\n              <SelectItem key={location.id} value={location.id}>\r\n                {location.name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {/* Détails du lieu sélectionné */}\r\n      {selectedLocationData ? (\r\n        <Card className=\"shadow-md border-[#d8e3ff] mb-6\">\r\n          <CardHeader className=\"pb-6\">\r\n            <div className=\"flex flex-col mb-2\">\r\n              <div className=\"flex justify-between items-center w-full mb-4\">\r\n                <CardTitle className=\"text-xl font-bold text-[#4a5d94] mr-2\">\r\n                  {selectedLocationData.name}\r\n                </CardTitle>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  size=\"sm\"\r\n                  className=\"border-[#4a5d94] text-[#4a5d94] hover:bg-[#4a5d94] hover:text-white whitespace-nowrap px-2 py-1 text-xs flex-shrink-0\"\r\n                  onClick={() => {\r\n                    // Rediriger vers la carte avec le point mis en évidence\r\n                    navigate('/map', { \r\n                      state: { \r\n                        highlightLocationId: selectedLocationData.id,\r\n                        fromHistory: true // Indiquer que la navigation vient de l'historique\r\n                      } \r\n                    });\r\n                    analytics.trackMapInteraction(EventAction.LOCATION_VIEW, {\r\n                      building_id: selectedLocationData.id,\r\n                      from: 'history_page'\r\n                    });\r\n                  }}\r\n                >\r\n                  <MapPin className=\"h-3 w-3 mr-1\" />\r\n                  Voir sur la carte\r\n                </Button>\r\n              </div>\r\n              <CardDescription className=\"text-sm text-slate-600 mt-2 mb-2\">\r\n                {selectedLocationData.description}\r\n              </CardDescription>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {selectedLocationData.image && (\r\n              <div className=\"mb-4\">\r\n                {/* Utiliser une div avec background-image comme solution de secours */}\r\n                <div \r\n                  className=\"w-full h-64 rounded-md shadow-md border border-[#d8e3ff] relative\"\r\n                  style={{\r\n                    backgroundImage: `url(${getImagePath(selectedLocationData.image)})`,\r\n                    backgroundPosition: 'center',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    backgroundSize: 'cover',\r\n                  }}\r\n                >\r\n                  {/* Indicateur de chargement */}\r\n                  {imagesLoading[getImagePath(selectedLocationData.image)] && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70\">\r\n                      <Loader2 className=\"h-8 w-8 animate-spin text-[#4a5d94]\" />\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Image cachée pour détecter les erreurs de chargement */}\r\n                  <img \r\n                    src={getImagePath(selectedLocationData.image)} \r\n                    alt={`Photo historique de ${selectedLocationData.name}`} \r\n                    className=\"hidden\"\r\n                    onError={(e) => {\r\n                      // Log l'erreur\r\n                      logger.error(`Erreur de chargement de l'image:`, { \r\n                        image: selectedLocationData.image,\r\n                        online: isOnline()\r\n                      });\r\n                      analytics.trackError(EventAction.RESOURCE_ERROR, 'history_image_load_failed', {\r\n                        image: selectedLocationData.image,\r\n                        building_id: selectedLocationData.id,\r\n                        online: isOnline()\r\n                      });\r\n                    }}\r\n                  />\r\n                </div>\r\n                <p className=\"text-xs text-center text-gray-500 mt-1\">Photo de {selectedLocationData.name}</p>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Lecteur audio si disponible */}\r\n            {selectedLocationData.audio && (\r\n              <div className=\"mb-4 p-3 bg-[#f5f8ff] rounded-md border border-[#d8e3ff]\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <div className=\"flex items-center\">\r\n                    <Volume2 className=\"h-4 w-4 text-[#4a5d94] mr-2\" />\r\n                    <span className=\"text-sm font-medium text-[#4a5d94]\">Écouter l'histoire</span>\r\n                  </div>\r\n                  <Button \r\n                    variant=\"ghost\" \r\n                    size=\"sm\" \r\n                    className=\"h-8 w-8 p-0 rounded-full\" \r\n                    onClick={togglePlayPause}\r\n                    disabled={audioLoading}\r\n                  >\r\n                    {audioLoading ? (\r\n                      <Loader2 className=\"h-4 w-4 animate-spin text-[#4a5d94]\" />\r\n                    ) : isPlaying ? (\r\n                      <Pause className=\"h-4 w-4 text-[#4a5d94]\" />\r\n                    ) : (\r\n                      <Play className=\"h-4 w-4 text-[#4a5d94]\" />\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n                \r\n                <div className=\"space-y-1\">\r\n                  <Slider\r\n                    value={[currentTime]}\r\n                    max={duration || 100}\r\n                    step={0.1}\r\n                    onValueChange={handleSliderChange}\r\n                    disabled={audioLoading}\r\n                    className=\"cursor-pointer\"\r\n                  />\r\n                  <div className=\"flex justify-between text-xs text-[#4a5d94]\">\r\n                    <span>{formatTime(currentTime)}</span>\r\n                    <span>{formatTime(duration)}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <audio\r\n                  ref={audioRef}\r\n                  src={selectedLocationData.audio ? \r\n                    (window.location.hostname.includes('github.io') \r\n                      ? `/1Hall1Artiste${selectedLocationData.audio}` \r\n                      : selectedLocationData.audio) \r\n                    : ''}\r\n                  onTimeUpdate={handleTimeUpdate}\r\n                  onLoadedMetadata={handleLoadedMetadata}\r\n                  onEnded={() => {\r\n                    setIsPlaying(false);\r\n                    if (selectedLocationData?.id) {\r\n                      analytics.trackAudio('pause', selectedLocationData.id);\r\n                    }\r\n                  }}\r\n                  onCanPlay={() => setAudioLoading(false)}\r\n                  onError={(e) => {\r\n                    console.error(\"Erreur de chargement audio:\", e, selectedLocationData.audio);\r\n                    setAudioLoading(false);\r\n                  }}\r\n                  preload=\"metadata\"\r\n                  className=\"hidden\"\r\n                />\r\n              </div>\r\n            )}\r\n            \r\n            <h3 className=\"text-base font-bold text-[#4a5d94] mb-3 pb-1 border-b border-[#d8e3ff]\">\r\n              Histoire complète\r\n            </h3>\r\n            \r\n            <ScrollArea className=\"h-[60vh] pr-4\">\r\n              <div className=\"space-y-4\">\r\n                {(() => {\r\n                  // Déterminer le contenu historique à afficher\r\n                  let historyContent = \"\";\r\n                  \r\n                  if (selectedLocationData.history) {\r\n                    // Utiliser directement l'historique du lieu\r\n                    historyContent = selectedLocationData.history;\r\n                  } else if (selectedLocationData.historyRef) {\r\n                    // Chercher l'historique référencé\r\n                    const referencedLocation = locations.find(loc => loc.id === selectedLocationData.historyRef);\r\n                    if (referencedLocation?.history) {\r\n                      historyContent = referencedLocation.history;\r\n                    }\r\n                  }\r\n                  \r\n                  // Afficher le contenu historique\r\n                  return historyContent.split('\\n\\n').map((paragraph, index) => (\r\n                    paragraph.trim() && (\r\n                      <div key={index} className=\"mb-4\">\r\n                        {paragraph.startsWith('#') ? (\r\n                          <h4 className=\"text-lg font-bold text-[#4a5d94] mb-2\">\r\n                            {paragraph.replace('#', '').trim()}\r\n                          </h4>\r\n                        ) : (\r\n                          <p className=\"text-[#4a5d94] leading-relaxed text-sm\">{paragraph}</p>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  ));\r\n                })()}\r\n              </div>\r\n            </ScrollArea>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"text-center py-10 border rounded-lg border-dashed border-gray-300 bg-gray-50\">\r\n          <Info className=\"h-10 w-10 mx-auto text-gray-400 mb-2\" />\r\n          <p className=\"text-gray-500 mb-1\">Sélectionnez un lieu</p>\r\n          <p className=\"text-gray-400 text-sm\">Pour afficher son histoire complète</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Boutons fixes */}\r\n      <div className=\"fixed bottom-20 left-0 right-0 mx-auto max-w-md px-4 z-10 space-y-2\">\r\n        {selectedLocationData && (\r\n          <Button \r\n            className=\"w-full border-[#ff7a45] text-[#ff7a45] hover:bg-[#fff5f0] text-sm min-h-[44px]\"\r\n            variant=\"outline\"\r\n            onClick={() => {\r\n              if (selectedLocationData) {\r\n                // Enregistrer le contexte de contribution\r\n                setLocationContributionContext(selectedLocationData);\r\n                \r\n                // Naviguer vers la galerie communautaire, onglet contribution\r\n                navigate(\"/community?tab=contribute\");\r\n                \r\n                analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, {\r\n                  source: 'history_page',\r\n                  building_id: selectedLocationData.id\r\n                });\r\n              }\r\n            }}\r\n          >\r\n            <Camera className=\"h-4 w-4 mr-2\" />\r\n            Partager un souvenir de ce lieu\r\n          </Button>\r\n        )}\r\n        \r\n        <Button \r\n          className=\"w-full bg-[#ff7a45] hover:bg-[#ff9d6e] text-white text-sm min-h-[44px]\"\r\n          onClick={() => {\r\n            // Rediriger vers la carte avec le lieu sélectionné mis en évidence\r\n            navigate('/map', {\r\n              state: {\r\n                highlightLocationId: selectedLocation,\r\n                fromHistory: true,\r\n                timestamp: new Date().getTime()\r\n              }\r\n            });\r\n          }}\r\n        >\r\n          <MapPin className=\"h-4 w-4 mr-2\" />\r\n          Voir sur la carte\r\n        </Button>\r\n      </div>\r\n\r\n      <BottomNavigation />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { getFirebaseAnalytics } from '@/services/firebaseConfig';\r\nimport { useAnalytics } from '@/hooks/useAnalytics';\r\nimport { EventCategory, EventAction } from '@/services/firebaseAnalytics';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Button } from '@/components/ui/button';\r\nimport Loader2 from 'lucide-react/dist/esm/icons/loader-2';\r\nimport Download from 'lucide-react/dist/esm/icons/download';\r\nimport BarChart3 from 'lucide-react/dist/esm/icons/bar-chart-3';\r\nimport PieChart from 'lucide-react/dist/esm/icons/pie-chart';\r\nimport LineChart from 'lucide-react/dist/esm/icons/line-chart';\r\nimport Activity from 'lucide-react/dist/esm/icons/activity';\r\n\r\n/**\r\n * Page d'administration pour visualiser les statistiques d'utilisation\r\n * Cette page affiche les données collectées par Firebase Analytics\r\n */\r\nexport default function Analytics() {\r\n  const analytics = useAnalytics();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [analyticsData, setAnalyticsData] = useState<any>(null);\r\n\r\n  // Suivre la vue de la page analytics\r\n  useEffect(() => {\r\n    analytics.trackFeatureUse('analytics_dashboard', {\r\n      tab: activeTab\r\n    });\r\n  }, [activeTab, analytics]);\r\n\r\n  // Simuler le chargement des données d'analytics\r\n  // Dans une implémentation réelle, vous utiliseriez l'API Firebase Analytics\r\n  useEffect(() => {\r\n    const loadAnalyticsData = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        // Simulation d'un appel API\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        // Données simulées pour la démonstration\r\n        setAnalyticsData({\r\n          overview: {\r\n            totalUsers: 1245,\r\n            activeUsers: 328,\r\n            sessionsToday: 156,\r\n            averageSessionDuration: '3m 42s',\r\n            bounceRate: '24%'\r\n          },\r\n          events: [\r\n            { name: 'onboarding_onboarding_start', count: 523, users: 523 },\r\n            { name: 'onboarding_onboarding_complete', count: 412, users: 412 },\r\n            { name: 'onboarding_onboarding_skip', count: 111, users: 111 },\r\n            { name: 'interaction_swipe', count: 2456, users: 387 },\r\n            { name: 'navigation_page_view', count: 5678, users: 523 },\r\n            { name: 'media_play', count: 345, users: 289 },\r\n            { name: 'media_complete', count: 198, users: 198 },\r\n            { name: 'feature_feature_use', count: 1234, users: 456 }\r\n          ],\r\n          topPages: [\r\n            { path: '/map', views: 1245, users: 423 },\r\n            { path: '/program', views: 987, users: 356 },\r\n            { path: '/community', views: 756, users: 289 },\r\n            { path: '/about', views: 543, users: 234 },\r\n            { path: '/saved', views: 432, users: 198 }\r\n          ],\r\n          userRetention: {\r\n            day1: '76%',\r\n            day7: '45%',\r\n            day30: '28%'\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error('Erreur lors du chargement des données analytics:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadAnalyticsData();\r\n  }, []);\r\n\r\n  // Fonction pour exporter les données au format JSON\r\n  const handleExportData = () => {\r\n    if (!analyticsData) return;\r\n\r\n    analytics.trackFeatureUse('analytics_export', {\r\n      format: 'json'\r\n    });\r\n\r\n    const dataStr = JSON.stringify(analyticsData, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\r\n    \r\n    const exportFileDefaultName = `analytics-export-${new Date().toISOString().split('T')[0]}.json`;\r\n    \r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', exportFileDefaultName);\r\n    linkElement.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 max-w-6xl\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">Statistiques d'utilisation</h1>\r\n        <Button \r\n          variant=\"outline\" \r\n          onClick={handleExportData}\r\n          disabled={isLoading || !analyticsData}\r\n        >\r\n          <Download className=\"mr-2 h-4 w-4\" />\r\n          Exporter\r\n        </Button>\r\n      </div>\r\n\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n        <TabsList className=\"grid grid-cols-4 mb-6\">\r\n          <TabsTrigger value=\"overview\">Vue d'ensemble</TabsTrigger>\r\n          <TabsTrigger value=\"events\">Événements</TabsTrigger>\r\n          <TabsTrigger value=\"pages\">Pages</TabsTrigger>\r\n          <TabsTrigger value=\"users\">Utilisateurs</TabsTrigger>\r\n        </TabsList>\r\n\r\n        {isLoading ? (\r\n          <div className=\"flex justify-center items-center h-64\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-gray-500\" />\r\n          </div>\r\n        ) : analyticsData ? (\r\n          <>\r\n            <TabsContent value=\"overview\" className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Utilisateurs totaux</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.overview.totalUsers}</h3>\r\n                    </div>\r\n                    <BarChart3 className=\"h-8 w-8 text-blue-500\" />\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Utilisateurs actifs</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.overview.activeUsers}</h3>\r\n                    </div>\r\n                    <Activity className=\"h-8 w-8 text-green-500\" />\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Sessions aujourd'hui</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.overview.sessionsToday}</h3>\r\n                    </div>\r\n                    <LineChart className=\"h-8 w-8 text-purple-500\" />\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Durée moyenne de session</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.overview.averageSessionDuration}</h3>\r\n                    </div>\r\n                    <PieChart className=\"h-8 w-8 text-orange-500\" />\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Taux de rebond</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.overview.bounceRate}</h3>\r\n                    </div>\r\n                    <Activity className=\"h-8 w-8 text-red-500\" />\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Rétention J+30</p>\r\n                      <h3 className=\"text-2xl font-bold\">{analyticsData.userRetention.day30}</h3>\r\n                    </div>\r\n                    <BarChart3 className=\"h-8 w-8 text-indigo-500\" />\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n              \r\n              <Card className=\"p-4\">\r\n                <h3 className=\"text-lg font-medium mb-4\">Rétention des utilisateurs</h3>\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-500\">Jour 1</p>\r\n                    <p className=\"text-xl font-bold\">{analyticsData.userRetention.day1}</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-500\">Jour 7</p>\r\n                    <p className=\"text-xl font-bold\">{analyticsData.userRetention.day7}</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-500\">Jour 30</p>\r\n                    <p className=\"text-xl font-bold\">{analyticsData.userRetention.day30}</p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </TabsContent>\r\n            \r\n            <TabsContent value=\"events\" className=\"space-y-4\">\r\n              <Card className=\"p-4\">\r\n                <h3 className=\"text-lg font-medium mb-4\">Événements les plus fréquents</h3>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr className=\"border-b\">\r\n                        <th className=\"text-left py-2\">Événement</th>\r\n                        <th className=\"text-right py-2\">Nombre</th>\r\n                        <th className=\"text-right py-2\">Utilisateurs</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {analyticsData.events.map((event: any, index: number) => (\r\n                        <tr key={index} className=\"border-b\">\r\n                          <td className=\"py-2\">{event.name}</td>\r\n                          <td className=\"text-right py-2\">{event.count}</td>\r\n                          <td className=\"text-right py-2\">{event.users}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </Card>\r\n            </TabsContent>\r\n            \r\n            <TabsContent value=\"pages\" className=\"space-y-4\">\r\n              <Card className=\"p-4\">\r\n                <h3 className=\"text-lg font-medium mb-4\">Pages les plus visitées</h3>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr className=\"border-b\">\r\n                        <th className=\"text-left py-2\">Page</th>\r\n                        <th className=\"text-right py-2\">Vues</th>\r\n                        <th className=\"text-right py-2\">Utilisateurs</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {analyticsData.topPages.map((page: any, index: number) => (\r\n                        <tr key={index} className=\"border-b\">\r\n                          <td className=\"py-2\">{page.path}</td>\r\n                          <td className=\"text-right py-2\">{page.views}</td>\r\n                          <td className=\"text-right py-2\">{page.users}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </Card>\r\n            </TabsContent>\r\n            \r\n            <TabsContent value=\"users\" className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Card className=\"p-4\">\r\n                  <h3 className=\"text-lg font-medium mb-4\">Nouveaux vs. Récurrents</h3>\r\n                  <div className=\"flex justify-center items-center h-48\">\r\n                    <div className=\"flex items-center space-x-8\">\r\n                      <div className=\"text-center\">\r\n                        <div className=\"text-3xl font-bold\">68%</div>\r\n                        <div className=\"text-sm text-gray-500\">Nouveaux</div>\r\n                      </div>\r\n                      <div className=\"text-center\">\r\n                        <div className=\"text-3xl font-bold\">32%</div>\r\n                        <div className=\"text-sm text-gray-500\">Récurrents</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n                \r\n                <Card className=\"p-4\">\r\n                  <h3 className=\"text-lg font-medium mb-4\">Engagement</h3>\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <div className=\"flex justify-between mb-1\">\r\n                        <span className=\"text-sm\">Onboarding complété</span>\r\n                        <span className=\"text-sm font-medium\">78%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div className=\"bg-blue-600 h-2 rounded-full\" style={{ width: '78%' }}></div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <div className=\"flex justify-between mb-1\">\r\n                        <span className=\"text-sm\">Vidéos visionnées</span>\r\n                        <span className=\"text-sm font-medium\">57%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div className=\"bg-green-500 h-2 rounded-full\" style={{ width: '57%' }}></div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <div className=\"flex justify-between mb-1\">\r\n                        <span className=\"text-sm\">Interactions carte</span>\r\n                        <span className=\"text-sm font-medium\">42%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div className=\"bg-purple-500 h-2 rounded-full\" style={{ width: '42%' }}></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n              \r\n              <Card className=\"p-4\">\r\n                <h3 className=\"text-lg font-medium mb-4\">Parcours utilisateur</h3>\r\n                <div className=\"flex flex-wrap justify-center items-center gap-2 md:gap-4\">\r\n                  <div className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm\">\r\n                    Onboarding\r\n                  </div>\r\n                  <div className=\"text-gray-400\">→</div>\r\n                  <div className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm\">\r\n                    Carte\r\n                  </div>\r\n                  <div className=\"text-gray-400\">→</div>\r\n                  <div className=\"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm\">\r\n                    Programme\r\n                  </div>\r\n                  <div className=\"text-gray-400\">→</div>\r\n                  <div className=\"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm\">\r\n                    Détails événement\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </TabsContent>\r\n          </>\r\n        ) : (\r\n          <div className=\"flex justify-center items-center h-64\">\r\n            <p className=\"text-gray-500\">Impossible de charger les données d'analytics</p>\r\n          </div>\r\n        )}\r\n      </Tabs>\r\n      \r\n      <div className=\"mt-8 text-sm text-gray-500\">\r\n        <p>Note: Ces données sont simulées à des fins de démonstration. Dans une implémentation réelle, vous utiliseriez l'API Firebase Analytics pour récupérer les données réelles.</p>\r\n        <p className=\"mt-1\">Pour accéder aux données réelles, consultez la <a href=\"https://console.firebase.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-500 hover:underline\">console Firebase</a>.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\n\ninterface PageContainerProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const PageContainer: React.FC<PageContainerProps> = ({ children, className = '' }) => {\n  return (\n    <div className={`container mx-auto px-4 py-6 max-w-screen-lg ${className}`}>\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\n\ninterface PageHeaderProps {\n  title: string;\n  subtitle?: string;\n  children?: React.ReactNode;\n}\n\nexport const PageHeader: React.FC<PageHeaderProps> = ({ title, subtitle, children }) => {\n  return (\n    <div className=\"mb-6\">\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{title}</h1>\n      {subtitle && <p className=\"text-gray-600\">{subtitle}</p>}\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\n\nvar isCheckBoxInput = (element) => element.type === 'checkbox';\n\nvar isDateObject = (value) => value instanceof Date;\n\nvar isNullOrUndefined = (value) => value == null;\n\nconst isObjectType = (value) => typeof value === 'object';\nvar isObject = (value) => !isNullOrUndefined(value) &&\n    !Array.isArray(value) &&\n    isObjectType(value) &&\n    !isDateObject(value);\n\nvar getEventValue = (event) => isObject(event) && event.target\n    ? isCheckBoxInput(event.target)\n        ? event.target.checked\n        : event.target.value\n    : event;\n\nvar getNodeParentName = (name) => name.substring(0, name.search(/\\.\\d+(\\.|$)/)) || name;\n\nvar isNameInFieldArray = (names, name) => names.has(getNodeParentName(name));\n\nvar isPlainObject = (tempObject) => {\n    const prototypeCopy = tempObject.constructor && tempObject.constructor.prototype;\n    return (isObject(prototypeCopy) && prototypeCopy.hasOwnProperty('isPrototypeOf'));\n};\n\nvar isWeb = typeof window !== 'undefined' &&\n    typeof window.HTMLElement !== 'undefined' &&\n    typeof document !== 'undefined';\n\nfunction cloneObject(data) {\n    let copy;\n    const isArray = Array.isArray(data);\n    if (data instanceof Date) {\n        copy = new Date(data);\n    }\n    else if (data instanceof Set) {\n        copy = new Set(data);\n    }\n    else if (!(isWeb && (data instanceof Blob || data instanceof FileList)) &&\n        (isArray || isObject(data))) {\n        copy = isArray ? [] : {};\n        if (!isArray && !isPlainObject(data)) {\n            copy = data;\n        }\n        else {\n            for (const key in data) {\n                if (data.hasOwnProperty(key)) {\n                    copy[key] = cloneObject(data[key]);\n                }\n            }\n        }\n    }\n    else {\n        return data;\n    }\n    return copy;\n}\n\nvar compact = (value) => Array.isArray(value) ? value.filter(Boolean) : [];\n\nvar isUndefined = (val) => val === undefined;\n\nvar get = (object, path, defaultValue) => {\n    if (!path || !isObject(object)) {\n        return defaultValue;\n    }\n    const result = compact(path.split(/[,[\\].]+?/)).reduce((result, key) => isNullOrUndefined(result) ? result : result[key], object);\n    return isUndefined(result) || result === object\n        ? isUndefined(object[path])\n            ? defaultValue\n            : object[path]\n        : result;\n};\n\nvar isBoolean = (value) => typeof value === 'boolean';\n\nvar isKey = (value) => /^\\w*$/.test(value);\n\nvar stringToPath = (input) => compact(input.replace(/[\"|']|\\]/g, '').split(/\\.|\\[/));\n\nvar set = (object, path, value) => {\n    let index = -1;\n    const tempPath = isKey(path) ? [path] : stringToPath(path);\n    const length = tempPath.length;\n    const lastIndex = length - 1;\n    while (++index < length) {\n        const key = tempPath[index];\n        let newValue = value;\n        if (index !== lastIndex) {\n            const objValue = object[key];\n            newValue =\n                isObject(objValue) || Array.isArray(objValue)\n                    ? objValue\n                    : !isNaN(+tempPath[index + 1])\n                        ? []\n                        : {};\n        }\n        if (key === '__proto__') {\n            return;\n        }\n        object[key] = newValue;\n        object = object[key];\n    }\n    return object;\n};\n\nconst EVENTS = {\n    BLUR: 'blur',\n    FOCUS_OUT: 'focusout',\n    CHANGE: 'change',\n};\nconst VALIDATION_MODE = {\n    onBlur: 'onBlur',\n    onChange: 'onChange',\n    onSubmit: 'onSubmit',\n    onTouched: 'onTouched',\n    all: 'all',\n};\nconst INPUT_VALIDATION_RULES = {\n    max: 'max',\n    min: 'min',\n    maxLength: 'maxLength',\n    minLength: 'minLength',\n    pattern: 'pattern',\n    required: 'required',\n    validate: 'validate',\n};\n\nconst HookFormContext = React.createContext(null);\n/**\n * This custom hook allows you to access the form context. useFormContext is intended to be used in deeply nested structures, where it would become inconvenient to pass the context as a prop. To be used with {@link FormProvider}.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformcontext) • [Demo](https://codesandbox.io/s/react-hook-form-v7-form-context-ytudi)\n *\n * @returns return all useForm methods\n *\n * @example\n * ```tsx\n * function App() {\n *   const methods = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   return (\n *     <FormProvider {...methods} >\n *       <form onSubmit={methods.handleSubmit(onSubmit)}>\n *         <NestedInput />\n *         <input type=\"submit\" />\n *       </form>\n *     </FormProvider>\n *   );\n * }\n *\n *  function NestedInput() {\n *   const { register } = useFormContext(); // retrieve all hook methods\n *   return <input {...register(\"test\")} />;\n * }\n * ```\n */\nconst useFormContext = () => React.useContext(HookFormContext);\n/**\n * A provider component that propagates the `useForm` methods to all children components via [React Context](https://reactjs.org/docs/context.html) API. To be used with {@link useFormContext}.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformcontext) • [Demo](https://codesandbox.io/s/react-hook-form-v7-form-context-ytudi)\n *\n * @param props - all useForm methods\n *\n * @example\n * ```tsx\n * function App() {\n *   const methods = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   return (\n *     <FormProvider {...methods} >\n *       <form onSubmit={methods.handleSubmit(onSubmit)}>\n *         <NestedInput />\n *         <input type=\"submit\" />\n *       </form>\n *     </FormProvider>\n *   );\n * }\n *\n *  function NestedInput() {\n *   const { register } = useFormContext(); // retrieve all hook methods\n *   return <input {...register(\"test\")} />;\n * }\n * ```\n */\nconst FormProvider = (props) => {\n    const { children, ...data } = props;\n    return (React.createElement(HookFormContext.Provider, { value: data }, children));\n};\n\nvar getProxyFormState = (formState, control, localProxyFormState, isRoot = true) => {\n    const result = {\n        defaultValues: control._defaultValues,\n    };\n    for (const key in formState) {\n        Object.defineProperty(result, key, {\n            get: () => {\n                const _key = key;\n                if (control._proxyFormState[_key] !== VALIDATION_MODE.all) {\n                    control._proxyFormState[_key] = !isRoot || VALIDATION_MODE.all;\n                }\n                localProxyFormState && (localProxyFormState[_key] = true);\n                return formState[_key];\n            },\n        });\n    }\n    return result;\n};\n\nvar isEmptyObject = (value) => isObject(value) && !Object.keys(value).length;\n\nvar shouldRenderFormState = (formStateData, _proxyFormState, updateFormState, isRoot) => {\n    updateFormState(formStateData);\n    const { name, ...formState } = formStateData;\n    return (isEmptyObject(formState) ||\n        Object.keys(formState).length >= Object.keys(_proxyFormState).length ||\n        Object.keys(formState).find((key) => _proxyFormState[key] ===\n            (!isRoot || VALIDATION_MODE.all)));\n};\n\nvar convertToArrayPayload = (value) => (Array.isArray(value) ? value : [value]);\n\nvar shouldSubscribeByName = (name, signalName, exact) => !name ||\n    !signalName ||\n    name === signalName ||\n    convertToArrayPayload(name).some((currentName) => currentName &&\n        (exact\n            ? currentName === signalName\n            : currentName.startsWith(signalName) ||\n                signalName.startsWith(currentName)));\n\nfunction useSubscribe(props) {\n    const _props = React.useRef(props);\n    _props.current = props;\n    React.useEffect(() => {\n        const subscription = !props.disabled &&\n            _props.current.subject &&\n            _props.current.subject.subscribe({\n                next: _props.current.next,\n            });\n        return () => {\n            subscription && subscription.unsubscribe();\n        };\n    }, [props.disabled]);\n}\n\n/**\n * This custom hook allows you to subscribe to each form state, and isolate the re-render at the custom hook level. It has its scope in terms of form state subscription, so it would not affect other useFormState and useForm. Using this hook can reduce the re-render impact on large and complex form application.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformstate) • [Demo](https://codesandbox.io/s/useformstate-75xly)\n *\n * @param props - include options on specify fields to subscribe. {@link UseFormStateReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, handleSubmit, control } = useForm({\n *     defaultValues: {\n *     firstName: \"firstName\"\n *   }});\n *   const { dirtyFields } = useFormState({\n *     control\n *   });\n *   const onSubmit = (data) => console.log(data);\n *\n *   return (\n *     <form onSubmit={handleSubmit(onSubmit)}>\n *       <input {...register(\"firstName\")} placeholder=\"First Name\" />\n *       {dirtyFields.firstName && <p>Field is dirty.</p>}\n *       <input type=\"submit\" />\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useFormState(props) {\n    const methods = useFormContext();\n    const { control = methods.control, disabled, name, exact } = props || {};\n    const [formState, updateFormState] = React.useState(control._formState);\n    const _mounted = React.useRef(true);\n    const _localProxyFormState = React.useRef({\n        isDirty: false,\n        isLoading: false,\n        dirtyFields: false,\n        touchedFields: false,\n        validatingFields: false,\n        isValidating: false,\n        isValid: false,\n        errors: false,\n    });\n    const _name = React.useRef(name);\n    _name.current = name;\n    useSubscribe({\n        disabled,\n        next: (value) => _mounted.current &&\n            shouldSubscribeByName(_name.current, value.name, exact) &&\n            shouldRenderFormState(value, _localProxyFormState.current, control._updateFormState) &&\n            updateFormState({\n                ...control._formState,\n                ...value,\n            }),\n        subject: control._subjects.state,\n    });\n    React.useEffect(() => {\n        _mounted.current = true;\n        _localProxyFormState.current.isValid && control._updateValid(true);\n        return () => {\n            _mounted.current = false;\n        };\n    }, [control]);\n    return getProxyFormState(formState, control, _localProxyFormState.current, false);\n}\n\nvar isString = (value) => typeof value === 'string';\n\nvar generateWatchOutput = (names, _names, formValues, isGlobal, defaultValue) => {\n    if (isString(names)) {\n        isGlobal && _names.watch.add(names);\n        return get(formValues, names, defaultValue);\n    }\n    if (Array.isArray(names)) {\n        return names.map((fieldName) => (isGlobal && _names.watch.add(fieldName), get(formValues, fieldName)));\n    }\n    isGlobal && (_names.watchAll = true);\n    return formValues;\n};\n\n/**\n * Custom hook to subscribe to field change and isolate re-rendering at the component level.\n *\n * @remarks\n *\n * [API](https://react-hook-form.com/docs/usewatch) • [Demo](https://codesandbox.io/s/react-hook-form-v7-ts-usewatch-h9i5e)\n *\n * @example\n * ```tsx\n * const { control } = useForm();\n * const values = useWatch({\n *   name: \"fieldName\"\n *   control,\n * })\n * ```\n */\nfunction useWatch(props) {\n    const methods = useFormContext();\n    const { control = methods.control, name, defaultValue, disabled, exact, } = props || {};\n    const _name = React.useRef(name);\n    _name.current = name;\n    useSubscribe({\n        disabled,\n        subject: control._subjects.values,\n        next: (formState) => {\n            if (shouldSubscribeByName(_name.current, formState.name, exact)) {\n                updateValue(cloneObject(generateWatchOutput(_name.current, control._names, formState.values || control._formValues, false, defaultValue)));\n            }\n        },\n    });\n    const [value, updateValue] = React.useState(control._getWatch(name, defaultValue));\n    React.useEffect(() => control._removeUnmounted());\n    return value;\n}\n\n/**\n * Custom hook to work with controlled component, this function provide you with both form and field level state. Re-render is isolated at the hook level.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usecontroller) • [Demo](https://codesandbox.io/s/usecontroller-0o8px)\n *\n * @param props - the path name to the form field value, and validation rules.\n *\n * @returns field properties, field and form state. {@link UseControllerReturn}\n *\n * @example\n * ```tsx\n * function Input(props) {\n *   const { field, fieldState, formState } = useController(props);\n *   return (\n *     <div>\n *       <input {...field} placeholder={props.name} />\n *       <p>{fieldState.isTouched && \"Touched\"}</p>\n *       <p>{formState.isSubmitted ? \"submitted\" : \"\"}</p>\n *     </div>\n *   );\n * }\n * ```\n */\nfunction useController(props) {\n    const methods = useFormContext();\n    const { name, disabled, control = methods.control, shouldUnregister } = props;\n    const isArrayField = isNameInFieldArray(control._names.array, name);\n    const value = useWatch({\n        control,\n        name,\n        defaultValue: get(control._formValues, name, get(control._defaultValues, name, props.defaultValue)),\n        exact: true,\n    });\n    const formState = useFormState({\n        control,\n        name,\n        exact: true,\n    });\n    const _registerProps = React.useRef(control.register(name, {\n        ...props.rules,\n        value,\n        ...(isBoolean(props.disabled) ? { disabled: props.disabled } : {}),\n    }));\n    React.useEffect(() => {\n        const _shouldUnregisterField = control._options.shouldUnregister || shouldUnregister;\n        const updateMounted = (name, value) => {\n            const field = get(control._fields, name);\n            if (field && field._f) {\n                field._f.mount = value;\n            }\n        };\n        updateMounted(name, true);\n        if (_shouldUnregisterField) {\n            const value = cloneObject(get(control._options.defaultValues, name));\n            set(control._defaultValues, name, value);\n            if (isUndefined(get(control._formValues, name))) {\n                set(control._formValues, name, value);\n            }\n        }\n        return () => {\n            (isArrayField\n                ? _shouldUnregisterField && !control._state.action\n                : _shouldUnregisterField)\n                ? control.unregister(name)\n                : updateMounted(name, false);\n        };\n    }, [name, control, isArrayField, shouldUnregister]);\n    React.useEffect(() => {\n        if (get(control._fields, name)) {\n            control._updateDisabledField({\n                disabled,\n                fields: control._fields,\n                name,\n                value: get(control._fields, name)._f.value,\n            });\n        }\n    }, [disabled, name, control]);\n    return {\n        field: {\n            name,\n            value,\n            ...(isBoolean(disabled) || formState.disabled\n                ? { disabled: formState.disabled || disabled }\n                : {}),\n            onChange: React.useCallback((event) => _registerProps.current.onChange({\n                target: {\n                    value: getEventValue(event),\n                    name: name,\n                },\n                type: EVENTS.CHANGE,\n            }), [name]),\n            onBlur: React.useCallback(() => _registerProps.current.onBlur({\n                target: {\n                    value: get(control._formValues, name),\n                    name: name,\n                },\n                type: EVENTS.BLUR,\n            }), [name, control]),\n            ref: React.useCallback((elm) => {\n                const field = get(control._fields, name);\n                if (field && elm) {\n                    field._f.ref = {\n                        focus: () => elm.focus(),\n                        select: () => elm.select(),\n                        setCustomValidity: (message) => elm.setCustomValidity(message),\n                        reportValidity: () => elm.reportValidity(),\n                    };\n                }\n            }, [control._fields, name]),\n        },\n        formState,\n        fieldState: Object.defineProperties({}, {\n            invalid: {\n                enumerable: true,\n                get: () => !!get(formState.errors, name),\n            },\n            isDirty: {\n                enumerable: true,\n                get: () => !!get(formState.dirtyFields, name),\n            },\n            isTouched: {\n                enumerable: true,\n                get: () => !!get(formState.touchedFields, name),\n            },\n            isValidating: {\n                enumerable: true,\n                get: () => !!get(formState.validatingFields, name),\n            },\n            error: {\n                enumerable: true,\n                get: () => get(formState.errors, name),\n            },\n        }),\n    };\n}\n\n/**\n * Component based on `useController` hook to work with controlled component.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usecontroller/controller) • [Demo](https://codesandbox.io/s/react-hook-form-v6-controller-ts-jwyzw) • [Video](https://www.youtube.com/watch?v=N2UNk_UCVyA)\n *\n * @param props - the path name to the form field value, and validation rules.\n *\n * @returns provide field handler functions, field and form state.\n *\n * @example\n * ```tsx\n * function App() {\n *   const { control } = useForm<FormValues>({\n *     defaultValues: {\n *       test: \"\"\n *     }\n *   });\n *\n *   return (\n *     <form>\n *       <Controller\n *         control={control}\n *         name=\"test\"\n *         render={({ field: { onChange, onBlur, value, ref }, formState, fieldState }) => (\n *           <>\n *             <input\n *               onChange={onChange} // send value to hook form\n *               onBlur={onBlur} // notify when input is touched\n *               value={value} // return updated value\n *               ref={ref} // set ref for focus management\n *             />\n *             <p>{formState.isSubmitted ? \"submitted\" : \"\"}</p>\n *             <p>{fieldState.isTouched ? \"touched\" : \"\"}</p>\n *           </>\n *         )}\n *       />\n *     </form>\n *   );\n * }\n * ```\n */\nconst Controller = (props) => props.render(useController(props));\n\nconst flatten = (obj) => {\n    const output = {};\n    for (const key of Object.keys(obj)) {\n        if (isObjectType(obj[key])) {\n            const nested = flatten(obj[key]);\n            for (const nestedKey of Object.keys(nested)) {\n                output[`${key}.${nestedKey}`] = nested[nestedKey];\n            }\n        }\n        else {\n            output[key] = obj[key];\n        }\n    }\n    return output;\n};\n\nconst POST_REQUEST = 'post';\n/**\n * Form component to manage submission.\n *\n * @param props - to setup submission detail. {@link FormProps}\n *\n * @returns form component or headless render prop.\n *\n * @example\n * ```tsx\n * function App() {\n *   const { control, formState: { errors } } = useForm();\n *\n *   return (\n *     <Form action=\"/api\" control={control}>\n *       <input {...register(\"name\")} />\n *       <p>{errors?.root?.server && 'Server error'}</p>\n *       <button>Submit</button>\n *     </Form>\n *   );\n * }\n * ```\n */\nfunction Form(props) {\n    const methods = useFormContext();\n    const [mounted, setMounted] = React.useState(false);\n    const { control = methods.control, onSubmit, children, action, method = POST_REQUEST, headers, encType, onError, render, onSuccess, validateStatus, ...rest } = props;\n    const submit = async (event) => {\n        let hasError = false;\n        let type = '';\n        await control.handleSubmit(async (data) => {\n            const formData = new FormData();\n            let formDataJson = '';\n            try {\n                formDataJson = JSON.stringify(data);\n            }\n            catch (_a) { }\n            const flattenFormValues = flatten(control._formValues);\n            for (const key in flattenFormValues) {\n                formData.append(key, flattenFormValues[key]);\n            }\n            if (onSubmit) {\n                await onSubmit({\n                    data,\n                    event,\n                    method,\n                    formData,\n                    formDataJson,\n                });\n            }\n            if (action) {\n                try {\n                    const shouldStringifySubmissionData = [\n                        headers && headers['Content-Type'],\n                        encType,\n                    ].some((value) => value && value.includes('json'));\n                    const response = await fetch(action, {\n                        method,\n                        headers: {\n                            ...headers,\n                            ...(encType ? { 'Content-Type': encType } : {}),\n                        },\n                        body: shouldStringifySubmissionData ? formDataJson : formData,\n                    });\n                    if (response &&\n                        (validateStatus\n                            ? !validateStatus(response.status)\n                            : response.status < 200 || response.status >= 300)) {\n                        hasError = true;\n                        onError && onError({ response });\n                        type = String(response.status);\n                    }\n                    else {\n                        onSuccess && onSuccess({ response });\n                    }\n                }\n                catch (error) {\n                    hasError = true;\n                    onError && onError({ error });\n                }\n            }\n        })(event);\n        if (hasError && props.control) {\n            props.control._subjects.state.next({\n                isSubmitSuccessful: false,\n            });\n            props.control.setError('root.server', {\n                type,\n            });\n        }\n    };\n    React.useEffect(() => {\n        setMounted(true);\n    }, []);\n    return render ? (React.createElement(React.Fragment, null, render({\n        submit,\n    }))) : (React.createElement(\"form\", { noValidate: mounted, action: action, method: method, encType: encType, onSubmit: submit, ...rest }, children));\n}\n\nvar appendErrors = (name, validateAllFieldCriteria, errors, type, message) => validateAllFieldCriteria\n    ? {\n        ...errors[name],\n        types: {\n            ...(errors[name] && errors[name].types ? errors[name].types : {}),\n            [type]: message || true,\n        },\n    }\n    : {};\n\nvar generateId = () => {\n    const d = typeof performance === 'undefined' ? Date.now() : performance.now() * 1000;\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16 + d) % 16 | 0;\n        return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n};\n\nvar getFocusFieldName = (name, index, options = {}) => options.shouldFocus || isUndefined(options.shouldFocus)\n    ? options.focusName ||\n        `${name}.${isUndefined(options.focusIndex) ? index : options.focusIndex}.`\n    : '';\n\nvar getValidationModes = (mode) => ({\n    isOnSubmit: !mode || mode === VALIDATION_MODE.onSubmit,\n    isOnBlur: mode === VALIDATION_MODE.onBlur,\n    isOnChange: mode === VALIDATION_MODE.onChange,\n    isOnAll: mode === VALIDATION_MODE.all,\n    isOnTouch: mode === VALIDATION_MODE.onTouched,\n});\n\nvar isWatched = (name, _names, isBlurEvent) => !isBlurEvent &&\n    (_names.watchAll ||\n        _names.watch.has(name) ||\n        [..._names.watch].some((watchName) => name.startsWith(watchName) &&\n            /^\\.\\w+/.test(name.slice(watchName.length))));\n\nconst iterateFieldsByAction = (fields, action, fieldsNames, abortEarly) => {\n    for (const key of fieldsNames || Object.keys(fields)) {\n        const field = get(fields, key);\n        if (field) {\n            const { _f, ...currentField } = field;\n            if (_f) {\n                if (_f.refs && _f.refs[0] && action(_f.refs[0], key) && !abortEarly) {\n                    return true;\n                }\n                else if (_f.ref && action(_f.ref, _f.name) && !abortEarly) {\n                    return true;\n                }\n                else {\n                    if (iterateFieldsByAction(currentField, action)) {\n                        break;\n                    }\n                }\n            }\n            else if (isObject(currentField)) {\n                if (iterateFieldsByAction(currentField, action)) {\n                    break;\n                }\n            }\n        }\n    }\n    return;\n};\n\nvar updateFieldArrayRootError = (errors, error, name) => {\n    const fieldArrayErrors = convertToArrayPayload(get(errors, name));\n    set(fieldArrayErrors, 'root', error[name]);\n    set(errors, name, fieldArrayErrors);\n    return errors;\n};\n\nvar isFileInput = (element) => element.type === 'file';\n\nvar isFunction = (value) => typeof value === 'function';\n\nvar isHTMLElement = (value) => {\n    if (!isWeb) {\n        return false;\n    }\n    const owner = value ? value.ownerDocument : 0;\n    return (value instanceof\n        (owner && owner.defaultView ? owner.defaultView.HTMLElement : HTMLElement));\n};\n\nvar isMessage = (value) => isString(value);\n\nvar isRadioInput = (element) => element.type === 'radio';\n\nvar isRegex = (value) => value instanceof RegExp;\n\nconst defaultResult = {\n    value: false,\n    isValid: false,\n};\nconst validResult = { value: true, isValid: true };\nvar getCheckboxValue = (options) => {\n    if (Array.isArray(options)) {\n        if (options.length > 1) {\n            const values = options\n                .filter((option) => option && option.checked && !option.disabled)\n                .map((option) => option.value);\n            return { value: values, isValid: !!values.length };\n        }\n        return options[0].checked && !options[0].disabled\n            ? // @ts-expect-error expected to work in the browser\n                options[0].attributes && !isUndefined(options[0].attributes.value)\n                    ? isUndefined(options[0].value) || options[0].value === ''\n                        ? validResult\n                        : { value: options[0].value, isValid: true }\n                    : validResult\n            : defaultResult;\n    }\n    return defaultResult;\n};\n\nconst defaultReturn = {\n    isValid: false,\n    value: null,\n};\nvar getRadioValue = (options) => Array.isArray(options)\n    ? options.reduce((previous, option) => option && option.checked && !option.disabled\n        ? {\n            isValid: true,\n            value: option.value,\n        }\n        : previous, defaultReturn)\n    : defaultReturn;\n\nfunction getValidateError(result, ref, type = 'validate') {\n    if (isMessage(result) ||\n        (Array.isArray(result) && result.every(isMessage)) ||\n        (isBoolean(result) && !result)) {\n        return {\n            type,\n            message: isMessage(result) ? result : '',\n            ref,\n        };\n    }\n}\n\nvar getValueAndMessage = (validationData) => isObject(validationData) && !isRegex(validationData)\n    ? validationData\n    : {\n        value: validationData,\n        message: '',\n    };\n\nvar validateField = async (field, formValues, validateAllFieldCriteria, shouldUseNativeValidation, isFieldArray) => {\n    const { ref, refs, required, maxLength, minLength, min, max, pattern, validate, name, valueAsNumber, mount, disabled, } = field._f;\n    const inputValue = get(formValues, name);\n    if (!mount || disabled) {\n        return {};\n    }\n    const inputRef = refs ? refs[0] : ref;\n    const setCustomValidity = (message) => {\n        if (shouldUseNativeValidation && inputRef.reportValidity) {\n            inputRef.setCustomValidity(isBoolean(message) ? '' : message || '');\n            inputRef.reportValidity();\n        }\n    };\n    const error = {};\n    const isRadio = isRadioInput(ref);\n    const isCheckBox = isCheckBoxInput(ref);\n    const isRadioOrCheckbox = isRadio || isCheckBox;\n    const isEmpty = ((valueAsNumber || isFileInput(ref)) &&\n        isUndefined(ref.value) &&\n        isUndefined(inputValue)) ||\n        (isHTMLElement(ref) && ref.value === '') ||\n        inputValue === '' ||\n        (Array.isArray(inputValue) && !inputValue.length);\n    const appendErrorsCurry = appendErrors.bind(null, name, validateAllFieldCriteria, error);\n    const getMinMaxMessage = (exceedMax, maxLengthMessage, minLengthMessage, maxType = INPUT_VALIDATION_RULES.maxLength, minType = INPUT_VALIDATION_RULES.minLength) => {\n        const message = exceedMax ? maxLengthMessage : minLengthMessage;\n        error[name] = {\n            type: exceedMax ? maxType : minType,\n            message,\n            ref,\n            ...appendErrorsCurry(exceedMax ? maxType : minType, message),\n        };\n    };\n    if (isFieldArray\n        ? !Array.isArray(inputValue) || !inputValue.length\n        : required &&\n            ((!isRadioOrCheckbox && (isEmpty || isNullOrUndefined(inputValue))) ||\n                (isBoolean(inputValue) && !inputValue) ||\n                (isCheckBox && !getCheckboxValue(refs).isValid) ||\n                (isRadio && !getRadioValue(refs).isValid))) {\n        const { value, message } = isMessage(required)\n            ? { value: !!required, message: required }\n            : getValueAndMessage(required);\n        if (value) {\n            error[name] = {\n                type: INPUT_VALIDATION_RULES.required,\n                message,\n                ref: inputRef,\n                ...appendErrorsCurry(INPUT_VALIDATION_RULES.required, message),\n            };\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(message);\n                return error;\n            }\n        }\n    }\n    if (!isEmpty && (!isNullOrUndefined(min) || !isNullOrUndefined(max))) {\n        let exceedMax;\n        let exceedMin;\n        const maxOutput = getValueAndMessage(max);\n        const minOutput = getValueAndMessage(min);\n        if (!isNullOrUndefined(inputValue) && !isNaN(inputValue)) {\n            const valueNumber = ref.valueAsNumber ||\n                (inputValue ? +inputValue : inputValue);\n            if (!isNullOrUndefined(maxOutput.value)) {\n                exceedMax = valueNumber > maxOutput.value;\n            }\n            if (!isNullOrUndefined(minOutput.value)) {\n                exceedMin = valueNumber < minOutput.value;\n            }\n        }\n        else {\n            const valueDate = ref.valueAsDate || new Date(inputValue);\n            const convertTimeToDate = (time) => new Date(new Date().toDateString() + ' ' + time);\n            const isTime = ref.type == 'time';\n            const isWeek = ref.type == 'week';\n            if (isString(maxOutput.value) && inputValue) {\n                exceedMax = isTime\n                    ? convertTimeToDate(inputValue) > convertTimeToDate(maxOutput.value)\n                    : isWeek\n                        ? inputValue > maxOutput.value\n                        : valueDate > new Date(maxOutput.value);\n            }\n            if (isString(minOutput.value) && inputValue) {\n                exceedMin = isTime\n                    ? convertTimeToDate(inputValue) < convertTimeToDate(minOutput.value)\n                    : isWeek\n                        ? inputValue < minOutput.value\n                        : valueDate < new Date(minOutput.value);\n            }\n        }\n        if (exceedMax || exceedMin) {\n            getMinMaxMessage(!!exceedMax, maxOutput.message, minOutput.message, INPUT_VALIDATION_RULES.max, INPUT_VALIDATION_RULES.min);\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(error[name].message);\n                return error;\n            }\n        }\n    }\n    if ((maxLength || minLength) &&\n        !isEmpty &&\n        (isString(inputValue) || (isFieldArray && Array.isArray(inputValue)))) {\n        const maxLengthOutput = getValueAndMessage(maxLength);\n        const minLengthOutput = getValueAndMessage(minLength);\n        const exceedMax = !isNullOrUndefined(maxLengthOutput.value) &&\n            inputValue.length > +maxLengthOutput.value;\n        const exceedMin = !isNullOrUndefined(minLengthOutput.value) &&\n            inputValue.length < +minLengthOutput.value;\n        if (exceedMax || exceedMin) {\n            getMinMaxMessage(exceedMax, maxLengthOutput.message, minLengthOutput.message);\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(error[name].message);\n                return error;\n            }\n        }\n    }\n    if (pattern && !isEmpty && isString(inputValue)) {\n        const { value: patternValue, message } = getValueAndMessage(pattern);\n        if (isRegex(patternValue) && !inputValue.match(patternValue)) {\n            error[name] = {\n                type: INPUT_VALIDATION_RULES.pattern,\n                message,\n                ref,\n                ...appendErrorsCurry(INPUT_VALIDATION_RULES.pattern, message),\n            };\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(message);\n                return error;\n            }\n        }\n    }\n    if (validate) {\n        if (isFunction(validate)) {\n            const result = await validate(inputValue, formValues);\n            const validateError = getValidateError(result, inputRef);\n            if (validateError) {\n                error[name] = {\n                    ...validateError,\n                    ...appendErrorsCurry(INPUT_VALIDATION_RULES.validate, validateError.message),\n                };\n                if (!validateAllFieldCriteria) {\n                    setCustomValidity(validateError.message);\n                    return error;\n                }\n            }\n        }\n        else if (isObject(validate)) {\n            let validationResult = {};\n            for (const key in validate) {\n                if (!isEmptyObject(validationResult) && !validateAllFieldCriteria) {\n                    break;\n                }\n                const validateError = getValidateError(await validate[key](inputValue, formValues), inputRef, key);\n                if (validateError) {\n                    validationResult = {\n                        ...validateError,\n                        ...appendErrorsCurry(key, validateError.message),\n                    };\n                    setCustomValidity(validateError.message);\n                    if (validateAllFieldCriteria) {\n                        error[name] = validationResult;\n                    }\n                }\n            }\n            if (!isEmptyObject(validationResult)) {\n                error[name] = {\n                    ref: inputRef,\n                    ...validationResult,\n                };\n                if (!validateAllFieldCriteria) {\n                    return error;\n                }\n            }\n        }\n    }\n    setCustomValidity(true);\n    return error;\n};\n\nvar appendAt = (data, value) => [\n    ...data,\n    ...convertToArrayPayload(value),\n];\n\nvar fillEmptyArray = (value) => Array.isArray(value) ? value.map(() => undefined) : undefined;\n\nfunction insert(data, index, value) {\n    return [\n        ...data.slice(0, index),\n        ...convertToArrayPayload(value),\n        ...data.slice(index),\n    ];\n}\n\nvar moveArrayAt = (data, from, to) => {\n    if (!Array.isArray(data)) {\n        return [];\n    }\n    if (isUndefined(data[to])) {\n        data[to] = undefined;\n    }\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    return data;\n};\n\nvar prependAt = (data, value) => [\n    ...convertToArrayPayload(value),\n    ...convertToArrayPayload(data),\n];\n\nfunction removeAtIndexes(data, indexes) {\n    let i = 0;\n    const temp = [...data];\n    for (const index of indexes) {\n        temp.splice(index - i, 1);\n        i++;\n    }\n    return compact(temp).length ? temp : [];\n}\nvar removeArrayAt = (data, index) => isUndefined(index)\n    ? []\n    : removeAtIndexes(data, convertToArrayPayload(index).sort((a, b) => a - b));\n\nvar swapArrayAt = (data, indexA, indexB) => {\n    [data[indexA], data[indexB]] = [data[indexB], data[indexA]];\n};\n\nfunction baseGet(object, updatePath) {\n    const length = updatePath.slice(0, -1).length;\n    let index = 0;\n    while (index < length) {\n        object = isUndefined(object) ? index++ : object[updatePath[index++]];\n    }\n    return object;\n}\nfunction isEmptyArray(obj) {\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key) && !isUndefined(obj[key])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction unset(object, path) {\n    const paths = Array.isArray(path)\n        ? path\n        : isKey(path)\n            ? [path]\n            : stringToPath(path);\n    const childObject = paths.length === 1 ? object : baseGet(object, paths);\n    const index = paths.length - 1;\n    const key = paths[index];\n    if (childObject) {\n        delete childObject[key];\n    }\n    if (index !== 0 &&\n        ((isObject(childObject) && isEmptyObject(childObject)) ||\n            (Array.isArray(childObject) && isEmptyArray(childObject)))) {\n        unset(object, paths.slice(0, -1));\n    }\n    return object;\n}\n\nvar updateAt = (fieldValues, index, value) => {\n    fieldValues[index] = value;\n    return fieldValues;\n};\n\n/**\n * A custom hook that exposes convenient methods to perform operations with a list of dynamic inputs that need to be appended, updated, removed etc. • [Demo](https://codesandbox.io/s/react-hook-form-usefieldarray-ssugn) • [Video](https://youtu.be/4MrbfGSFY2A)\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usefieldarray) • [Demo](https://codesandbox.io/s/react-hook-form-usefieldarray-ssugn)\n *\n * @param props - useFieldArray props\n *\n * @returns methods - functions to manipulate with the Field Arrays (dynamic inputs) {@link UseFieldArrayReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, control, handleSubmit, reset, trigger, setError } = useForm({\n *     defaultValues: {\n *       test: []\n *     }\n *   });\n *   const { fields, append } = useFieldArray({\n *     control,\n *     name: \"test\"\n *   });\n *\n *   return (\n *     <form onSubmit={handleSubmit(data => console.log(data))}>\n *       {fields.map((item, index) => (\n *          <input key={item.id} {...register(`test.${index}.firstName`)}  />\n *       ))}\n *       <button type=\"button\" onClick={() => append({ firstName: \"bill\" })}>\n *         append\n *       </button>\n *       <input type=\"submit\" />\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useFieldArray(props) {\n    const methods = useFormContext();\n    const { control = methods.control, name, keyName = 'id', shouldUnregister, } = props;\n    const [fields, setFields] = React.useState(control._getFieldArray(name));\n    const ids = React.useRef(control._getFieldArray(name).map(generateId));\n    const _fieldIds = React.useRef(fields);\n    const _name = React.useRef(name);\n    const _actioned = React.useRef(false);\n    _name.current = name;\n    _fieldIds.current = fields;\n    control._names.array.add(name);\n    props.rules &&\n        control.register(name, props.rules);\n    useSubscribe({\n        next: ({ values, name: fieldArrayName, }) => {\n            if (fieldArrayName === _name.current || !fieldArrayName) {\n                const fieldValues = get(values, _name.current);\n                if (Array.isArray(fieldValues)) {\n                    setFields(fieldValues);\n                    ids.current = fieldValues.map(generateId);\n                }\n            }\n        },\n        subject: control._subjects.array,\n    });\n    const updateValues = React.useCallback((updatedFieldArrayValues) => {\n        _actioned.current = true;\n        control._updateFieldArray(name, updatedFieldArrayValues);\n    }, [control, name]);\n    const append = (value, options) => {\n        const appendValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = appendAt(control._getFieldArray(name), appendValue);\n        control._names.focus = getFocusFieldName(name, updatedFieldArrayValues.length - 1, options);\n        ids.current = appendAt(ids.current, appendValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, appendAt, {\n            argA: fillEmptyArray(value),\n        });\n    };\n    const prepend = (value, options) => {\n        const prependValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = prependAt(control._getFieldArray(name), prependValue);\n        control._names.focus = getFocusFieldName(name, 0, options);\n        ids.current = prependAt(ids.current, prependValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, prependAt, {\n            argA: fillEmptyArray(value),\n        });\n    };\n    const remove = (index) => {\n        const updatedFieldArrayValues = removeArrayAt(control._getFieldArray(name), index);\n        ids.current = removeArrayAt(ids.current, index);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, removeArrayAt, {\n            argA: index,\n        });\n    };\n    const insert$1 = (index, value, options) => {\n        const insertValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = insert(control._getFieldArray(name), index, insertValue);\n        control._names.focus = getFocusFieldName(name, index, options);\n        ids.current = insert(ids.current, index, insertValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, insert, {\n            argA: index,\n            argB: fillEmptyArray(value),\n        });\n    };\n    const swap = (indexA, indexB) => {\n        const updatedFieldArrayValues = control._getFieldArray(name);\n        swapArrayAt(updatedFieldArrayValues, indexA, indexB);\n        swapArrayAt(ids.current, indexA, indexB);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, swapArrayAt, {\n            argA: indexA,\n            argB: indexB,\n        }, false);\n    };\n    const move = (from, to) => {\n        const updatedFieldArrayValues = control._getFieldArray(name);\n        moveArrayAt(updatedFieldArrayValues, from, to);\n        moveArrayAt(ids.current, from, to);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._updateFieldArray(name, updatedFieldArrayValues, moveArrayAt, {\n            argA: from,\n            argB: to,\n        }, false);\n    };\n    const update = (index, value) => {\n        const updateValue = cloneObject(value);\n        const updatedFieldArrayValues = updateAt(control._getFieldArray(name), index, updateValue);\n        ids.current = [...updatedFieldArrayValues].map((item, i) => !item || i === index ? generateId() : ids.current[i]);\n        updateValues(updatedFieldArrayValues);\n        setFields([...updatedFieldArrayValues]);\n        control._updateFieldArray(name, updatedFieldArrayValues, updateAt, {\n            argA: index,\n            argB: updateValue,\n        }, true, false);\n    };\n    const replace = (value) => {\n        const updatedFieldArrayValues = convertToArrayPayload(cloneObject(value));\n        ids.current = updatedFieldArrayValues.map(generateId);\n        updateValues([...updatedFieldArrayValues]);\n        setFields([...updatedFieldArrayValues]);\n        control._updateFieldArray(name, [...updatedFieldArrayValues], (data) => data, {}, true, false);\n    };\n    React.useEffect(() => {\n        control._state.action = false;\n        isWatched(name, control._names) &&\n            control._subjects.state.next({\n                ...control._formState,\n            });\n        if (_actioned.current &&\n            (!getValidationModes(control._options.mode).isOnSubmit ||\n                control._formState.isSubmitted)) {\n            if (control._options.resolver) {\n                control._executeSchema([name]).then((result) => {\n                    const error = get(result.errors, name);\n                    const existingError = get(control._formState.errors, name);\n                    if (existingError\n                        ? (!error && existingError.type) ||\n                            (error &&\n                                (existingError.type !== error.type ||\n                                    existingError.message !== error.message))\n                        : error && error.type) {\n                        error\n                            ? set(control._formState.errors, name, error)\n                            : unset(control._formState.errors, name);\n                        control._subjects.state.next({\n                            errors: control._formState.errors,\n                        });\n                    }\n                });\n            }\n            else {\n                const field = get(control._fields, name);\n                if (field &&\n                    field._f &&\n                    !(getValidationModes(control._options.reValidateMode).isOnSubmit &&\n                        getValidationModes(control._options.mode).isOnSubmit)) {\n                    validateField(field, control._formValues, control._options.criteriaMode === VALIDATION_MODE.all, control._options.shouldUseNativeValidation, true).then((error) => !isEmptyObject(error) &&\n                        control._subjects.state.next({\n                            errors: updateFieldArrayRootError(control._formState.errors, error, name),\n                        }));\n                }\n            }\n        }\n        control._subjects.values.next({\n            name,\n            values: { ...control._formValues },\n        });\n        control._names.focus &&\n            iterateFieldsByAction(control._fields, (ref, key) => {\n                if (control._names.focus &&\n                    key.startsWith(control._names.focus) &&\n                    ref.focus) {\n                    ref.focus();\n                    return 1;\n                }\n                return;\n            });\n        control._names.focus = '';\n        control._updateValid();\n        _actioned.current = false;\n    }, [fields, name, control]);\n    React.useEffect(() => {\n        !get(control._formValues, name) && control._updateFieldArray(name);\n        return () => {\n            (control._options.shouldUnregister || shouldUnregister) &&\n                control.unregister(name);\n        };\n    }, [name, control, keyName, shouldUnregister]);\n    return {\n        swap: React.useCallback(swap, [updateValues, name, control]),\n        move: React.useCallback(move, [updateValues, name, control]),\n        prepend: React.useCallback(prepend, [updateValues, name, control]),\n        append: React.useCallback(append, [updateValues, name, control]),\n        remove: React.useCallback(remove, [updateValues, name, control]),\n        insert: React.useCallback(insert$1, [updateValues, name, control]),\n        update: React.useCallback(update, [updateValues, name, control]),\n        replace: React.useCallback(replace, [updateValues, name, control]),\n        fields: React.useMemo(() => fields.map((field, index) => ({\n            ...field,\n            [keyName]: ids.current[index] || generateId(),\n        })), [fields, keyName]),\n    };\n}\n\nvar createSubject = () => {\n    let _observers = [];\n    const next = (value) => {\n        for (const observer of _observers) {\n            observer.next && observer.next(value);\n        }\n    };\n    const subscribe = (observer) => {\n        _observers.push(observer);\n        return {\n            unsubscribe: () => {\n                _observers = _observers.filter((o) => o !== observer);\n            },\n        };\n    };\n    const unsubscribe = () => {\n        _observers = [];\n    };\n    return {\n        get observers() {\n            return _observers;\n        },\n        next,\n        subscribe,\n        unsubscribe,\n    };\n};\n\nvar isPrimitive = (value) => isNullOrUndefined(value) || !isObjectType(value);\n\nfunction deepEqual(object1, object2) {\n    if (isPrimitive(object1) || isPrimitive(object2)) {\n        return object1 === object2;\n    }\n    if (isDateObject(object1) && isDateObject(object2)) {\n        return object1.getTime() === object2.getTime();\n    }\n    const keys1 = Object.keys(object1);\n    const keys2 = Object.keys(object2);\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    for (const key of keys1) {\n        const val1 = object1[key];\n        if (!keys2.includes(key)) {\n            return false;\n        }\n        if (key !== 'ref') {\n            const val2 = object2[key];\n            if ((isDateObject(val1) && isDateObject(val2)) ||\n                (isObject(val1) && isObject(val2)) ||\n                (Array.isArray(val1) && Array.isArray(val2))\n                ? !deepEqual(val1, val2)\n                : val1 !== val2) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nvar isMultipleSelect = (element) => element.type === `select-multiple`;\n\nvar isRadioOrCheckbox = (ref) => isRadioInput(ref) || isCheckBoxInput(ref);\n\nvar live = (ref) => isHTMLElement(ref) && ref.isConnected;\n\nvar objectHasFunction = (data) => {\n    for (const key in data) {\n        if (isFunction(data[key])) {\n            return true;\n        }\n    }\n    return false;\n};\n\nfunction markFieldsDirty(data, fields = {}) {\n    const isParentNodeArray = Array.isArray(data);\n    if (isObject(data) || isParentNodeArray) {\n        for (const key in data) {\n            if (Array.isArray(data[key]) ||\n                (isObject(data[key]) && !objectHasFunction(data[key]))) {\n                fields[key] = Array.isArray(data[key]) ? [] : {};\n                markFieldsDirty(data[key], fields[key]);\n            }\n            else if (!isNullOrUndefined(data[key])) {\n                fields[key] = true;\n            }\n        }\n    }\n    return fields;\n}\nfunction getDirtyFieldsFromDefaultValues(data, formValues, dirtyFieldsFromValues) {\n    const isParentNodeArray = Array.isArray(data);\n    if (isObject(data) || isParentNodeArray) {\n        for (const key in data) {\n            if (Array.isArray(data[key]) ||\n                (isObject(data[key]) && !objectHasFunction(data[key]))) {\n                if (isUndefined(formValues) ||\n                    isPrimitive(dirtyFieldsFromValues[key])) {\n                    dirtyFieldsFromValues[key] = Array.isArray(data[key])\n                        ? markFieldsDirty(data[key], [])\n                        : { ...markFieldsDirty(data[key]) };\n                }\n                else {\n                    getDirtyFieldsFromDefaultValues(data[key], isNullOrUndefined(formValues) ? {} : formValues[key], dirtyFieldsFromValues[key]);\n                }\n            }\n            else {\n                dirtyFieldsFromValues[key] = !deepEqual(data[key], formValues[key]);\n            }\n        }\n    }\n    return dirtyFieldsFromValues;\n}\nvar getDirtyFields = (defaultValues, formValues) => getDirtyFieldsFromDefaultValues(defaultValues, formValues, markFieldsDirty(formValues));\n\nvar getFieldValueAs = (value, { valueAsNumber, valueAsDate, setValueAs }) => isUndefined(value)\n    ? value\n    : valueAsNumber\n        ? value === ''\n            ? NaN\n            : value\n                ? +value\n                : value\n        : valueAsDate && isString(value)\n            ? new Date(value)\n            : setValueAs\n                ? setValueAs(value)\n                : value;\n\nfunction getFieldValue(_f) {\n    const ref = _f.ref;\n    if (_f.refs ? _f.refs.every((ref) => ref.disabled) : ref.disabled) {\n        return;\n    }\n    if (isFileInput(ref)) {\n        return ref.files;\n    }\n    if (isRadioInput(ref)) {\n        return getRadioValue(_f.refs).value;\n    }\n    if (isMultipleSelect(ref)) {\n        return [...ref.selectedOptions].map(({ value }) => value);\n    }\n    if (isCheckBoxInput(ref)) {\n        return getCheckboxValue(_f.refs).value;\n    }\n    return getFieldValueAs(isUndefined(ref.value) ? _f.ref.value : ref.value, _f);\n}\n\nvar getResolverOptions = (fieldsNames, _fields, criteriaMode, shouldUseNativeValidation) => {\n    const fields = {};\n    for (const name of fieldsNames) {\n        const field = get(_fields, name);\n        field && set(fields, name, field._f);\n    }\n    return {\n        criteriaMode,\n        names: [...fieldsNames],\n        fields,\n        shouldUseNativeValidation,\n    };\n};\n\nvar getRuleValue = (rule) => isUndefined(rule)\n    ? rule\n    : isRegex(rule)\n        ? rule.source\n        : isObject(rule)\n            ? isRegex(rule.value)\n                ? rule.value.source\n                : rule.value\n            : rule;\n\nconst ASYNC_FUNCTION = 'AsyncFunction';\nvar hasPromiseValidation = (fieldReference) => (!fieldReference || !fieldReference.validate) &&\n    !!((isFunction(fieldReference.validate) &&\n        fieldReference.validate.constructor.name === ASYNC_FUNCTION) ||\n        (isObject(fieldReference.validate) &&\n            Object.values(fieldReference.validate).find((validateFunction) => validateFunction.constructor.name === ASYNC_FUNCTION)));\n\nvar hasValidation = (options) => options.mount &&\n    (options.required ||\n        options.min ||\n        options.max ||\n        options.maxLength ||\n        options.minLength ||\n        options.pattern ||\n        options.validate);\n\nfunction schemaErrorLookup(errors, _fields, name) {\n    const error = get(errors, name);\n    if (error || isKey(name)) {\n        return {\n            error,\n            name,\n        };\n    }\n    const names = name.split('.');\n    while (names.length) {\n        const fieldName = names.join('.');\n        const field = get(_fields, fieldName);\n        const foundError = get(errors, fieldName);\n        if (field && !Array.isArray(field) && name !== fieldName) {\n            return { name };\n        }\n        if (foundError && foundError.type) {\n            return {\n                name: fieldName,\n                error: foundError,\n            };\n        }\n        names.pop();\n    }\n    return {\n        name,\n    };\n}\n\nvar skipValidation = (isBlurEvent, isTouched, isSubmitted, reValidateMode, mode) => {\n    if (mode.isOnAll) {\n        return false;\n    }\n    else if (!isSubmitted && mode.isOnTouch) {\n        return !(isTouched || isBlurEvent);\n    }\n    else if (isSubmitted ? reValidateMode.isOnBlur : mode.isOnBlur) {\n        return !isBlurEvent;\n    }\n    else if (isSubmitted ? reValidateMode.isOnChange : mode.isOnChange) {\n        return isBlurEvent;\n    }\n    return true;\n};\n\nvar unsetEmptyArray = (ref, name) => !compact(get(ref, name)).length && unset(ref, name);\n\nconst defaultOptions = {\n    mode: VALIDATION_MODE.onSubmit,\n    reValidateMode: VALIDATION_MODE.onChange,\n    shouldFocusError: true,\n};\nfunction createFormControl(props = {}) {\n    let _options = {\n        ...defaultOptions,\n        ...props,\n    };\n    let _formState = {\n        submitCount: 0,\n        isDirty: false,\n        isLoading: isFunction(_options.defaultValues),\n        isValidating: false,\n        isSubmitted: false,\n        isSubmitting: false,\n        isSubmitSuccessful: false,\n        isValid: false,\n        touchedFields: {},\n        dirtyFields: {},\n        validatingFields: {},\n        errors: _options.errors || {},\n        disabled: _options.disabled || false,\n    };\n    let _fields = {};\n    let _defaultValues = isObject(_options.defaultValues) || isObject(_options.values)\n        ? cloneObject(_options.defaultValues || _options.values) || {}\n        : {};\n    let _formValues = _options.shouldUnregister\n        ? {}\n        : cloneObject(_defaultValues);\n    let _state = {\n        action: false,\n        mount: false,\n        watch: false,\n    };\n    let _names = {\n        mount: new Set(),\n        unMount: new Set(),\n        array: new Set(),\n        watch: new Set(),\n    };\n    let delayErrorCallback;\n    let timer = 0;\n    const _proxyFormState = {\n        isDirty: false,\n        dirtyFields: false,\n        validatingFields: false,\n        touchedFields: false,\n        isValidating: false,\n        isValid: false,\n        errors: false,\n    };\n    const _subjects = {\n        values: createSubject(),\n        array: createSubject(),\n        state: createSubject(),\n    };\n    const validationModeBeforeSubmit = getValidationModes(_options.mode);\n    const validationModeAfterSubmit = getValidationModes(_options.reValidateMode);\n    const shouldDisplayAllAssociatedErrors = _options.criteriaMode === VALIDATION_MODE.all;\n    const debounce = (callback) => (wait) => {\n        clearTimeout(timer);\n        timer = setTimeout(callback, wait);\n    };\n    const _updateValid = async (shouldUpdateValid) => {\n        if (!props.disabled && (_proxyFormState.isValid || shouldUpdateValid)) {\n            const isValid = _options.resolver\n                ? isEmptyObject((await _executeSchema()).errors)\n                : await executeBuiltInValidation(_fields, true);\n            if (isValid !== _formState.isValid) {\n                _subjects.state.next({\n                    isValid,\n                });\n            }\n        }\n    };\n    const _updateIsValidating = (names, isValidating) => {\n        if (!props.disabled &&\n            (_proxyFormState.isValidating || _proxyFormState.validatingFields)) {\n            (names || Array.from(_names.mount)).forEach((name) => {\n                if (name) {\n                    isValidating\n                        ? set(_formState.validatingFields, name, isValidating)\n                        : unset(_formState.validatingFields, name);\n                }\n            });\n            _subjects.state.next({\n                validatingFields: _formState.validatingFields,\n                isValidating: !isEmptyObject(_formState.validatingFields),\n            });\n        }\n    };\n    const _updateFieldArray = (name, values = [], method, args, shouldSetValues = true, shouldUpdateFieldsAndState = true) => {\n        if (args && method && !props.disabled) {\n            _state.action = true;\n            if (shouldUpdateFieldsAndState && Array.isArray(get(_fields, name))) {\n                const fieldValues = method(get(_fields, name), args.argA, args.argB);\n                shouldSetValues && set(_fields, name, fieldValues);\n            }\n            if (shouldUpdateFieldsAndState &&\n                Array.isArray(get(_formState.errors, name))) {\n                const errors = method(get(_formState.errors, name), args.argA, args.argB);\n                shouldSetValues && set(_formState.errors, name, errors);\n                unsetEmptyArray(_formState.errors, name);\n            }\n            if (_proxyFormState.touchedFields &&\n                shouldUpdateFieldsAndState &&\n                Array.isArray(get(_formState.touchedFields, name))) {\n                const touchedFields = method(get(_formState.touchedFields, name), args.argA, args.argB);\n                shouldSetValues && set(_formState.touchedFields, name, touchedFields);\n            }\n            if (_proxyFormState.dirtyFields) {\n                _formState.dirtyFields = getDirtyFields(_defaultValues, _formValues);\n            }\n            _subjects.state.next({\n                name,\n                isDirty: _getDirty(name, values),\n                dirtyFields: _formState.dirtyFields,\n                errors: _formState.errors,\n                isValid: _formState.isValid,\n            });\n        }\n        else {\n            set(_formValues, name, values);\n        }\n    };\n    const updateErrors = (name, error) => {\n        set(_formState.errors, name, error);\n        _subjects.state.next({\n            errors: _formState.errors,\n        });\n    };\n    const _setErrors = (errors) => {\n        _formState.errors = errors;\n        _subjects.state.next({\n            errors: _formState.errors,\n            isValid: false,\n        });\n    };\n    const updateValidAndValue = (name, shouldSkipSetValueAs, value, ref) => {\n        const field = get(_fields, name);\n        if (field) {\n            const defaultValue = get(_formValues, name, isUndefined(value) ? get(_defaultValues, name) : value);\n            isUndefined(defaultValue) ||\n                (ref && ref.defaultChecked) ||\n                shouldSkipSetValueAs\n                ? set(_formValues, name, shouldSkipSetValueAs ? defaultValue : getFieldValue(field._f))\n                : setFieldValue(name, defaultValue);\n            _state.mount && _updateValid();\n        }\n    };\n    const updateTouchAndDirty = (name, fieldValue, isBlurEvent, shouldDirty, shouldRender) => {\n        let shouldUpdateField = false;\n        let isPreviousDirty = false;\n        const output = {\n            name,\n        };\n        if (!props.disabled) {\n            const disabledField = !!(get(_fields, name) &&\n                get(_fields, name)._f &&\n                get(_fields, name)._f.disabled);\n            if (!isBlurEvent || shouldDirty) {\n                if (_proxyFormState.isDirty) {\n                    isPreviousDirty = _formState.isDirty;\n                    _formState.isDirty = output.isDirty = _getDirty();\n                    shouldUpdateField = isPreviousDirty !== output.isDirty;\n                }\n                const isCurrentFieldPristine = disabledField || deepEqual(get(_defaultValues, name), fieldValue);\n                isPreviousDirty = !!(!disabledField && get(_formState.dirtyFields, name));\n                isCurrentFieldPristine || disabledField\n                    ? unset(_formState.dirtyFields, name)\n                    : set(_formState.dirtyFields, name, true);\n                output.dirtyFields = _formState.dirtyFields;\n                shouldUpdateField =\n                    shouldUpdateField ||\n                        (_proxyFormState.dirtyFields &&\n                            isPreviousDirty !== !isCurrentFieldPristine);\n            }\n            if (isBlurEvent) {\n                const isPreviousFieldTouched = get(_formState.touchedFields, name);\n                if (!isPreviousFieldTouched) {\n                    set(_formState.touchedFields, name, isBlurEvent);\n                    output.touchedFields = _formState.touchedFields;\n                    shouldUpdateField =\n                        shouldUpdateField ||\n                            (_proxyFormState.touchedFields &&\n                                isPreviousFieldTouched !== isBlurEvent);\n                }\n            }\n            shouldUpdateField && shouldRender && _subjects.state.next(output);\n        }\n        return shouldUpdateField ? output : {};\n    };\n    const shouldRenderByError = (name, isValid, error, fieldState) => {\n        const previousFieldError = get(_formState.errors, name);\n        const shouldUpdateValid = _proxyFormState.isValid &&\n            isBoolean(isValid) &&\n            _formState.isValid !== isValid;\n        if (props.delayError && error) {\n            delayErrorCallback = debounce(() => updateErrors(name, error));\n            delayErrorCallback(props.delayError);\n        }\n        else {\n            clearTimeout(timer);\n            delayErrorCallback = null;\n            error\n                ? set(_formState.errors, name, error)\n                : unset(_formState.errors, name);\n        }\n        if ((error ? !deepEqual(previousFieldError, error) : previousFieldError) ||\n            !isEmptyObject(fieldState) ||\n            shouldUpdateValid) {\n            const updatedFormState = {\n                ...fieldState,\n                ...(shouldUpdateValid && isBoolean(isValid) ? { isValid } : {}),\n                errors: _formState.errors,\n                name,\n            };\n            _formState = {\n                ..._formState,\n                ...updatedFormState,\n            };\n            _subjects.state.next(updatedFormState);\n        }\n    };\n    const _executeSchema = async (name) => {\n        _updateIsValidating(name, true);\n        const result = await _options.resolver(_formValues, _options.context, getResolverOptions(name || _names.mount, _fields, _options.criteriaMode, _options.shouldUseNativeValidation));\n        _updateIsValidating(name);\n        return result;\n    };\n    const executeSchemaAndUpdateState = async (names) => {\n        const { errors } = await _executeSchema(names);\n        if (names) {\n            for (const name of names) {\n                const error = get(errors, name);\n                error\n                    ? set(_formState.errors, name, error)\n                    : unset(_formState.errors, name);\n            }\n        }\n        else {\n            _formState.errors = errors;\n        }\n        return errors;\n    };\n    const executeBuiltInValidation = async (fields, shouldOnlyCheckValid, context = {\n        valid: true,\n    }) => {\n        for (const name in fields) {\n            const field = fields[name];\n            if (field) {\n                const { _f, ...fieldValue } = field;\n                if (_f) {\n                    const isFieldArrayRoot = _names.array.has(_f.name);\n                    const isPromiseFunction = field._f && hasPromiseValidation(field._f);\n                    if (isPromiseFunction && _proxyFormState.validatingFields) {\n                        _updateIsValidating([name], true);\n                    }\n                    const fieldError = await validateField(field, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation && !shouldOnlyCheckValid, isFieldArrayRoot);\n                    if (isPromiseFunction && _proxyFormState.validatingFields) {\n                        _updateIsValidating([name]);\n                    }\n                    if (fieldError[_f.name]) {\n                        context.valid = false;\n                        if (shouldOnlyCheckValid) {\n                            break;\n                        }\n                    }\n                    !shouldOnlyCheckValid &&\n                        (get(fieldError, _f.name)\n                            ? isFieldArrayRoot\n                                ? updateFieldArrayRootError(_formState.errors, fieldError, _f.name)\n                                : set(_formState.errors, _f.name, fieldError[_f.name])\n                            : unset(_formState.errors, _f.name));\n                }\n                !isEmptyObject(fieldValue) &&\n                    (await executeBuiltInValidation(fieldValue, shouldOnlyCheckValid, context));\n            }\n        }\n        return context.valid;\n    };\n    const _removeUnmounted = () => {\n        for (const name of _names.unMount) {\n            const field = get(_fields, name);\n            field &&\n                (field._f.refs\n                    ? field._f.refs.every((ref) => !live(ref))\n                    : !live(field._f.ref)) &&\n                unregister(name);\n        }\n        _names.unMount = new Set();\n    };\n    const _getDirty = (name, data) => !props.disabled &&\n        (name && data && set(_formValues, name, data),\n            !deepEqual(getValues(), _defaultValues));\n    const _getWatch = (names, defaultValue, isGlobal) => generateWatchOutput(names, _names, {\n        ...(_state.mount\n            ? _formValues\n            : isUndefined(defaultValue)\n                ? _defaultValues\n                : isString(names)\n                    ? { [names]: defaultValue }\n                    : defaultValue),\n    }, isGlobal, defaultValue);\n    const _getFieldArray = (name) => compact(get(_state.mount ? _formValues : _defaultValues, name, props.shouldUnregister ? get(_defaultValues, name, []) : []));\n    const setFieldValue = (name, value, options = {}) => {\n        const field = get(_fields, name);\n        let fieldValue = value;\n        if (field) {\n            const fieldReference = field._f;\n            if (fieldReference) {\n                !fieldReference.disabled &&\n                    set(_formValues, name, getFieldValueAs(value, fieldReference));\n                fieldValue =\n                    isHTMLElement(fieldReference.ref) && isNullOrUndefined(value)\n                        ? ''\n                        : value;\n                if (isMultipleSelect(fieldReference.ref)) {\n                    [...fieldReference.ref.options].forEach((optionRef) => (optionRef.selected = fieldValue.includes(optionRef.value)));\n                }\n                else if (fieldReference.refs) {\n                    if (isCheckBoxInput(fieldReference.ref)) {\n                        fieldReference.refs.length > 1\n                            ? fieldReference.refs.forEach((checkboxRef) => (!checkboxRef.defaultChecked || !checkboxRef.disabled) &&\n                                (checkboxRef.checked = Array.isArray(fieldValue)\n                                    ? !!fieldValue.find((data) => data === checkboxRef.value)\n                                    : fieldValue === checkboxRef.value))\n                            : fieldReference.refs[0] &&\n                                (fieldReference.refs[0].checked = !!fieldValue);\n                    }\n                    else {\n                        fieldReference.refs.forEach((radioRef) => (radioRef.checked = radioRef.value === fieldValue));\n                    }\n                }\n                else if (isFileInput(fieldReference.ref)) {\n                    fieldReference.ref.value = '';\n                }\n                else {\n                    fieldReference.ref.value = fieldValue;\n                    if (!fieldReference.ref.type) {\n                        _subjects.values.next({\n                            name,\n                            values: { ..._formValues },\n                        });\n                    }\n                }\n            }\n        }\n        (options.shouldDirty || options.shouldTouch) &&\n            updateTouchAndDirty(name, fieldValue, options.shouldTouch, options.shouldDirty, true);\n        options.shouldValidate && trigger(name);\n    };\n    const setValues = (name, value, options) => {\n        for (const fieldKey in value) {\n            const fieldValue = value[fieldKey];\n            const fieldName = `${name}.${fieldKey}`;\n            const field = get(_fields, fieldName);\n            (_names.array.has(name) ||\n                isObject(fieldValue) ||\n                (field && !field._f)) &&\n                !isDateObject(fieldValue)\n                ? setValues(fieldName, fieldValue, options)\n                : setFieldValue(fieldName, fieldValue, options);\n        }\n    };\n    const setValue = (name, value, options = {}) => {\n        const field = get(_fields, name);\n        const isFieldArray = _names.array.has(name);\n        const cloneValue = cloneObject(value);\n        set(_formValues, name, cloneValue);\n        if (isFieldArray) {\n            _subjects.array.next({\n                name,\n                values: { ..._formValues },\n            });\n            if ((_proxyFormState.isDirty || _proxyFormState.dirtyFields) &&\n                options.shouldDirty) {\n                _subjects.state.next({\n                    name,\n                    dirtyFields: getDirtyFields(_defaultValues, _formValues),\n                    isDirty: _getDirty(name, cloneValue),\n                });\n            }\n        }\n        else {\n            field && !field._f && !isNullOrUndefined(cloneValue)\n                ? setValues(name, cloneValue, options)\n                : setFieldValue(name, cloneValue, options);\n        }\n        isWatched(name, _names) && _subjects.state.next({ ..._formState });\n        _subjects.values.next({\n            name: _state.mount ? name : undefined,\n            values: { ..._formValues },\n        });\n    };\n    const onChange = async (event) => {\n        _state.mount = true;\n        const target = event.target;\n        let name = target.name;\n        let isFieldValueUpdated = true;\n        const field = get(_fields, name);\n        const getCurrentFieldValue = () => target.type ? getFieldValue(field._f) : getEventValue(event);\n        const _updateIsFieldValueUpdated = (fieldValue) => {\n            isFieldValueUpdated =\n                Number.isNaN(fieldValue) ||\n                    (isDateObject(fieldValue) && isNaN(fieldValue.getTime())) ||\n                    deepEqual(fieldValue, get(_formValues, name, fieldValue));\n        };\n        if (field) {\n            let error;\n            let isValid;\n            const fieldValue = getCurrentFieldValue();\n            const isBlurEvent = event.type === EVENTS.BLUR || event.type === EVENTS.FOCUS_OUT;\n            const shouldSkipValidation = (!hasValidation(field._f) &&\n                !_options.resolver &&\n                !get(_formState.errors, name) &&\n                !field._f.deps) ||\n                skipValidation(isBlurEvent, get(_formState.touchedFields, name), _formState.isSubmitted, validationModeAfterSubmit, validationModeBeforeSubmit);\n            const watched = isWatched(name, _names, isBlurEvent);\n            set(_formValues, name, fieldValue);\n            if (isBlurEvent) {\n                field._f.onBlur && field._f.onBlur(event);\n                delayErrorCallback && delayErrorCallback(0);\n            }\n            else if (field._f.onChange) {\n                field._f.onChange(event);\n            }\n            const fieldState = updateTouchAndDirty(name, fieldValue, isBlurEvent, false);\n            const shouldRender = !isEmptyObject(fieldState) || watched;\n            !isBlurEvent &&\n                _subjects.values.next({\n                    name,\n                    type: event.type,\n                    values: { ..._formValues },\n                });\n            if (shouldSkipValidation) {\n                if (_proxyFormState.isValid) {\n                    if (props.mode === 'onBlur') {\n                        if (isBlurEvent) {\n                            _updateValid();\n                        }\n                    }\n                    else {\n                        _updateValid();\n                    }\n                }\n                return (shouldRender &&\n                    _subjects.state.next({ name, ...(watched ? {} : fieldState) }));\n            }\n            !isBlurEvent && watched && _subjects.state.next({ ..._formState });\n            if (_options.resolver) {\n                const { errors } = await _executeSchema([name]);\n                _updateIsFieldValueUpdated(fieldValue);\n                if (isFieldValueUpdated) {\n                    const previousErrorLookupResult = schemaErrorLookup(_formState.errors, _fields, name);\n                    const errorLookupResult = schemaErrorLookup(errors, _fields, previousErrorLookupResult.name || name);\n                    error = errorLookupResult.error;\n                    name = errorLookupResult.name;\n                    isValid = isEmptyObject(errors);\n                }\n            }\n            else {\n                _updateIsValidating([name], true);\n                error = (await validateField(field, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation))[name];\n                _updateIsValidating([name]);\n                _updateIsFieldValueUpdated(fieldValue);\n                if (isFieldValueUpdated) {\n                    if (error) {\n                        isValid = false;\n                    }\n                    else if (_proxyFormState.isValid) {\n                        isValid = await executeBuiltInValidation(_fields, true);\n                    }\n                }\n            }\n            if (isFieldValueUpdated) {\n                field._f.deps &&\n                    trigger(field._f.deps);\n                shouldRenderByError(name, isValid, error, fieldState);\n            }\n        }\n    };\n    const _focusInput = (ref, key) => {\n        if (get(_formState.errors, key) && ref.focus) {\n            ref.focus();\n            return 1;\n        }\n        return;\n    };\n    const trigger = async (name, options = {}) => {\n        let isValid;\n        let validationResult;\n        const fieldNames = convertToArrayPayload(name);\n        if (_options.resolver) {\n            const errors = await executeSchemaAndUpdateState(isUndefined(name) ? name : fieldNames);\n            isValid = isEmptyObject(errors);\n            validationResult = name\n                ? !fieldNames.some((name) => get(errors, name))\n                : isValid;\n        }\n        else if (name) {\n            validationResult = (await Promise.all(fieldNames.map(async (fieldName) => {\n                const field = get(_fields, fieldName);\n                return await executeBuiltInValidation(field && field._f ? { [fieldName]: field } : field);\n            }))).every(Boolean);\n            !(!validationResult && !_formState.isValid) && _updateValid();\n        }\n        else {\n            validationResult = isValid = await executeBuiltInValidation(_fields);\n        }\n        _subjects.state.next({\n            ...(!isString(name) ||\n                (_proxyFormState.isValid && isValid !== _formState.isValid)\n                ? {}\n                : { name }),\n            ...(_options.resolver || !name ? { isValid } : {}),\n            errors: _formState.errors,\n        });\n        options.shouldFocus &&\n            !validationResult &&\n            iterateFieldsByAction(_fields, _focusInput, name ? fieldNames : _names.mount);\n        return validationResult;\n    };\n    const getValues = (fieldNames) => {\n        const values = {\n            ...(_state.mount ? _formValues : _defaultValues),\n        };\n        return isUndefined(fieldNames)\n            ? values\n            : isString(fieldNames)\n                ? get(values, fieldNames)\n                : fieldNames.map((name) => get(values, name));\n    };\n    const getFieldState = (name, formState) => ({\n        invalid: !!get((formState || _formState).errors, name),\n        isDirty: !!get((formState || _formState).dirtyFields, name),\n        error: get((formState || _formState).errors, name),\n        isValidating: !!get(_formState.validatingFields, name),\n        isTouched: !!get((formState || _formState).touchedFields, name),\n    });\n    const clearErrors = (name) => {\n        name &&\n            convertToArrayPayload(name).forEach((inputName) => unset(_formState.errors, inputName));\n        _subjects.state.next({\n            errors: name ? _formState.errors : {},\n        });\n    };\n    const setError = (name, error, options) => {\n        const ref = (get(_fields, name, { _f: {} })._f || {}).ref;\n        const currentError = get(_formState.errors, name) || {};\n        // Don't override existing error messages elsewhere in the object tree.\n        const { ref: currentRef, message, type, ...restOfErrorTree } = currentError;\n        set(_formState.errors, name, {\n            ...restOfErrorTree,\n            ...error,\n            ref,\n        });\n        _subjects.state.next({\n            name,\n            errors: _formState.errors,\n            isValid: false,\n        });\n        options && options.shouldFocus && ref && ref.focus && ref.focus();\n    };\n    const watch = (name, defaultValue) => isFunction(name)\n        ? _subjects.values.subscribe({\n            next: (payload) => name(_getWatch(undefined, defaultValue), payload),\n        })\n        : _getWatch(name, defaultValue, true);\n    const unregister = (name, options = {}) => {\n        for (const fieldName of name ? convertToArrayPayload(name) : _names.mount) {\n            _names.mount.delete(fieldName);\n            _names.array.delete(fieldName);\n            if (!options.keepValue) {\n                unset(_fields, fieldName);\n                unset(_formValues, fieldName);\n            }\n            !options.keepError && unset(_formState.errors, fieldName);\n            !options.keepDirty && unset(_formState.dirtyFields, fieldName);\n            !options.keepTouched && unset(_formState.touchedFields, fieldName);\n            !options.keepIsValidating &&\n                unset(_formState.validatingFields, fieldName);\n            !_options.shouldUnregister &&\n                !options.keepDefaultValue &&\n                unset(_defaultValues, fieldName);\n        }\n        _subjects.values.next({\n            values: { ..._formValues },\n        });\n        _subjects.state.next({\n            ..._formState,\n            ...(!options.keepDirty ? {} : { isDirty: _getDirty() }),\n        });\n        !options.keepIsValid && _updateValid();\n    };\n    const _updateDisabledField = ({ disabled, name, field, fields, value, }) => {\n        if ((isBoolean(disabled) && _state.mount) || !!disabled) {\n            const inputValue = disabled\n                ? undefined\n                : isUndefined(value)\n                    ? getFieldValue(field ? field._f : get(fields, name)._f)\n                    : value;\n            set(_formValues, name, inputValue);\n            updateTouchAndDirty(name, inputValue, false, false, true);\n        }\n    };\n    const register = (name, options = {}) => {\n        let field = get(_fields, name);\n        const disabledIsDefined = isBoolean(options.disabled) || isBoolean(props.disabled);\n        set(_fields, name, {\n            ...(field || {}),\n            _f: {\n                ...(field && field._f ? field._f : { ref: { name } }),\n                name,\n                mount: true,\n                ...options,\n            },\n        });\n        _names.mount.add(name);\n        if (field) {\n            _updateDisabledField({\n                field,\n                disabled: isBoolean(options.disabled)\n                    ? options.disabled\n                    : props.disabled,\n                name,\n                value: options.value,\n            });\n        }\n        else {\n            updateValidAndValue(name, true, options.value);\n        }\n        return {\n            ...(disabledIsDefined\n                ? { disabled: options.disabled || props.disabled }\n                : {}),\n            ...(_options.progressive\n                ? {\n                    required: !!options.required,\n                    min: getRuleValue(options.min),\n                    max: getRuleValue(options.max),\n                    minLength: getRuleValue(options.minLength),\n                    maxLength: getRuleValue(options.maxLength),\n                    pattern: getRuleValue(options.pattern),\n                }\n                : {}),\n            name,\n            onChange,\n            onBlur: onChange,\n            ref: (ref) => {\n                if (ref) {\n                    register(name, options);\n                    field = get(_fields, name);\n                    const fieldRef = isUndefined(ref.value)\n                        ? ref.querySelectorAll\n                            ? ref.querySelectorAll('input,select,textarea')[0] || ref\n                            : ref\n                        : ref;\n                    const radioOrCheckbox = isRadioOrCheckbox(fieldRef);\n                    const refs = field._f.refs || [];\n                    if (radioOrCheckbox\n                        ? refs.find((option) => option === fieldRef)\n                        : fieldRef === field._f.ref) {\n                        return;\n                    }\n                    set(_fields, name, {\n                        _f: {\n                            ...field._f,\n                            ...(radioOrCheckbox\n                                ? {\n                                    refs: [\n                                        ...refs.filter(live),\n                                        fieldRef,\n                                        ...(Array.isArray(get(_defaultValues, name)) ? [{}] : []),\n                                    ],\n                                    ref: { type: fieldRef.type, name },\n                                }\n                                : { ref: fieldRef }),\n                        },\n                    });\n                    updateValidAndValue(name, false, undefined, fieldRef);\n                }\n                else {\n                    field = get(_fields, name, {});\n                    if (field._f) {\n                        field._f.mount = false;\n                    }\n                    (_options.shouldUnregister || options.shouldUnregister) &&\n                        !(isNameInFieldArray(_names.array, name) && _state.action) &&\n                        _names.unMount.add(name);\n                }\n            },\n        };\n    };\n    const _focusError = () => _options.shouldFocusError &&\n        iterateFieldsByAction(_fields, _focusInput, _names.mount);\n    const _disableForm = (disabled) => {\n        if (isBoolean(disabled)) {\n            _subjects.state.next({ disabled });\n            iterateFieldsByAction(_fields, (ref, name) => {\n                const currentField = get(_fields, name);\n                if (currentField) {\n                    ref.disabled = currentField._f.disabled || disabled;\n                    if (Array.isArray(currentField._f.refs)) {\n                        currentField._f.refs.forEach((inputRef) => {\n                            inputRef.disabled = currentField._f.disabled || disabled;\n                        });\n                    }\n                }\n            }, 0, false);\n        }\n    };\n    const handleSubmit = (onValid, onInvalid) => async (e) => {\n        let onValidError = undefined;\n        if (e) {\n            e.preventDefault && e.preventDefault();\n            e.persist && e.persist();\n        }\n        let fieldValues = cloneObject(_formValues);\n        _subjects.state.next({\n            isSubmitting: true,\n        });\n        if (_options.resolver) {\n            const { errors, values } = await _executeSchema();\n            _formState.errors = errors;\n            fieldValues = values;\n        }\n        else {\n            await executeBuiltInValidation(_fields);\n        }\n        unset(_formState.errors, 'root');\n        if (isEmptyObject(_formState.errors)) {\n            _subjects.state.next({\n                errors: {},\n            });\n            try {\n                await onValid(fieldValues, e);\n            }\n            catch (error) {\n                onValidError = error;\n            }\n        }\n        else {\n            if (onInvalid) {\n                await onInvalid({ ..._formState.errors }, e);\n            }\n            _focusError();\n            setTimeout(_focusError);\n        }\n        _subjects.state.next({\n            isSubmitted: true,\n            isSubmitting: false,\n            isSubmitSuccessful: isEmptyObject(_formState.errors) && !onValidError,\n            submitCount: _formState.submitCount + 1,\n            errors: _formState.errors,\n        });\n        if (onValidError) {\n            throw onValidError;\n        }\n    };\n    const resetField = (name, options = {}) => {\n        if (get(_fields, name)) {\n            if (isUndefined(options.defaultValue)) {\n                setValue(name, cloneObject(get(_defaultValues, name)));\n            }\n            else {\n                setValue(name, options.defaultValue);\n                set(_defaultValues, name, cloneObject(options.defaultValue));\n            }\n            if (!options.keepTouched) {\n                unset(_formState.touchedFields, name);\n            }\n            if (!options.keepDirty) {\n                unset(_formState.dirtyFields, name);\n                _formState.isDirty = options.defaultValue\n                    ? _getDirty(name, cloneObject(get(_defaultValues, name)))\n                    : _getDirty();\n            }\n            if (!options.keepError) {\n                unset(_formState.errors, name);\n                _proxyFormState.isValid && _updateValid();\n            }\n            _subjects.state.next({ ..._formState });\n        }\n    };\n    const _reset = (formValues, keepStateOptions = {}) => {\n        const updatedValues = formValues ? cloneObject(formValues) : _defaultValues;\n        const cloneUpdatedValues = cloneObject(updatedValues);\n        const isEmptyResetValues = isEmptyObject(formValues);\n        const values = isEmptyResetValues ? _defaultValues : cloneUpdatedValues;\n        if (!keepStateOptions.keepDefaultValues) {\n            _defaultValues = updatedValues;\n        }\n        if (!keepStateOptions.keepValues) {\n            if (keepStateOptions.keepDirtyValues) {\n                const fieldsToCheck = new Set([\n                    ..._names.mount,\n                    ...Object.keys(getDirtyFields(_defaultValues, _formValues)),\n                ]);\n                for (const fieldName of Array.from(fieldsToCheck)) {\n                    get(_formState.dirtyFields, fieldName)\n                        ? set(values, fieldName, get(_formValues, fieldName))\n                        : setValue(fieldName, get(values, fieldName));\n                }\n            }\n            else {\n                if (isWeb && isUndefined(formValues)) {\n                    for (const name of _names.mount) {\n                        const field = get(_fields, name);\n                        if (field && field._f) {\n                            const fieldReference = Array.isArray(field._f.refs)\n                                ? field._f.refs[0]\n                                : field._f.ref;\n                            if (isHTMLElement(fieldReference)) {\n                                const form = fieldReference.closest('form');\n                                if (form) {\n                                    form.reset();\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                _fields = {};\n            }\n            _formValues = props.shouldUnregister\n                ? keepStateOptions.keepDefaultValues\n                    ? cloneObject(_defaultValues)\n                    : {}\n                : cloneObject(values);\n            _subjects.array.next({\n                values: { ...values },\n            });\n            _subjects.values.next({\n                values: { ...values },\n            });\n        }\n        _names = {\n            mount: keepStateOptions.keepDirtyValues ? _names.mount : new Set(),\n            unMount: new Set(),\n            array: new Set(),\n            watch: new Set(),\n            watchAll: false,\n            focus: '',\n        };\n        _state.mount =\n            !_proxyFormState.isValid ||\n                !!keepStateOptions.keepIsValid ||\n                !!keepStateOptions.keepDirtyValues;\n        _state.watch = !!props.shouldUnregister;\n        _subjects.state.next({\n            submitCount: keepStateOptions.keepSubmitCount\n                ? _formState.submitCount\n                : 0,\n            isDirty: isEmptyResetValues\n                ? false\n                : keepStateOptions.keepDirty\n                    ? _formState.isDirty\n                    : !!(keepStateOptions.keepDefaultValues &&\n                        !deepEqual(formValues, _defaultValues)),\n            isSubmitted: keepStateOptions.keepIsSubmitted\n                ? _formState.isSubmitted\n                : false,\n            dirtyFields: isEmptyResetValues\n                ? {}\n                : keepStateOptions.keepDirtyValues\n                    ? keepStateOptions.keepDefaultValues && _formValues\n                        ? getDirtyFields(_defaultValues, _formValues)\n                        : _formState.dirtyFields\n                    : keepStateOptions.keepDefaultValues && formValues\n                        ? getDirtyFields(_defaultValues, formValues)\n                        : keepStateOptions.keepDirty\n                            ? _formState.dirtyFields\n                            : {},\n            touchedFields: keepStateOptions.keepTouched\n                ? _formState.touchedFields\n                : {},\n            errors: keepStateOptions.keepErrors ? _formState.errors : {},\n            isSubmitSuccessful: keepStateOptions.keepIsSubmitSuccessful\n                ? _formState.isSubmitSuccessful\n                : false,\n            isSubmitting: false,\n        });\n    };\n    const reset = (formValues, keepStateOptions) => _reset(isFunction(formValues)\n        ? formValues(_formValues)\n        : formValues, keepStateOptions);\n    const setFocus = (name, options = {}) => {\n        const field = get(_fields, name);\n        const fieldReference = field && field._f;\n        if (fieldReference) {\n            const fieldRef = fieldReference.refs\n                ? fieldReference.refs[0]\n                : fieldReference.ref;\n            if (fieldRef.focus) {\n                fieldRef.focus();\n                options.shouldSelect && fieldRef.select();\n            }\n        }\n    };\n    const _updateFormState = (updatedFormState) => {\n        _formState = {\n            ..._formState,\n            ...updatedFormState,\n        };\n    };\n    const _resetDefaultValues = () => isFunction(_options.defaultValues) &&\n        _options.defaultValues().then((values) => {\n            reset(values, _options.resetOptions);\n            _subjects.state.next({\n                isLoading: false,\n            });\n        });\n    return {\n        control: {\n            register,\n            unregister,\n            getFieldState,\n            handleSubmit,\n            setError,\n            _executeSchema,\n            _getWatch,\n            _getDirty,\n            _updateValid,\n            _removeUnmounted,\n            _updateFieldArray,\n            _updateDisabledField,\n            _getFieldArray,\n            _reset,\n            _resetDefaultValues,\n            _updateFormState,\n            _disableForm,\n            _subjects,\n            _proxyFormState,\n            _setErrors,\n            get _fields() {\n                return _fields;\n            },\n            get _formValues() {\n                return _formValues;\n            },\n            get _state() {\n                return _state;\n            },\n            set _state(value) {\n                _state = value;\n            },\n            get _defaultValues() {\n                return _defaultValues;\n            },\n            get _names() {\n                return _names;\n            },\n            set _names(value) {\n                _names = value;\n            },\n            get _formState() {\n                return _formState;\n            },\n            set _formState(value) {\n                _formState = value;\n            },\n            get _options() {\n                return _options;\n            },\n            set _options(value) {\n                _options = {\n                    ..._options,\n                    ...value,\n                };\n            },\n        },\n        trigger,\n        register,\n        handleSubmit,\n        watch,\n        setValue,\n        getValues,\n        reset,\n        resetField,\n        clearErrors,\n        unregister,\n        setError,\n        setFocus,\n        getFieldState,\n    };\n}\n\n/**\n * Custom hook to manage the entire form.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useform) • [Demo](https://codesandbox.io/s/react-hook-form-get-started-ts-5ksmm) • [Video](https://www.youtube.com/watch?v=RkXv4AXXC_4)\n *\n * @param props - form configuration and validation parameters.\n *\n * @returns methods - individual functions to manage the form state. {@link UseFormReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, handleSubmit, watch, formState: { errors } } = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   console.log(watch(\"example\"));\n *\n *   return (\n *     <form onSubmit={handleSubmit(onSubmit)}>\n *       <input defaultValue=\"test\" {...register(\"example\")} />\n *       <input {...register(\"exampleRequired\", { required: true })} />\n *       {errors.exampleRequired && <span>This field is required</span>}\n *       <button>Submit</button>\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useForm(props = {}) {\n    const _formControl = React.useRef();\n    const _values = React.useRef();\n    const [formState, updateFormState] = React.useState({\n        isDirty: false,\n        isValidating: false,\n        isLoading: isFunction(props.defaultValues),\n        isSubmitted: false,\n        isSubmitting: false,\n        isSubmitSuccessful: false,\n        isValid: false,\n        submitCount: 0,\n        dirtyFields: {},\n        touchedFields: {},\n        validatingFields: {},\n        errors: props.errors || {},\n        disabled: props.disabled || false,\n        defaultValues: isFunction(props.defaultValues)\n            ? undefined\n            : props.defaultValues,\n    });\n    if (!_formControl.current) {\n        _formControl.current = {\n            ...createFormControl(props),\n            formState,\n        };\n    }\n    const control = _formControl.current.control;\n    control._options = props;\n    useSubscribe({\n        subject: control._subjects.state,\n        next: (value) => {\n            if (shouldRenderFormState(value, control._proxyFormState, control._updateFormState, true)) {\n                updateFormState({ ...control._formState });\n            }\n        },\n    });\n    React.useEffect(() => control._disableForm(props.disabled), [control, props.disabled]);\n    React.useEffect(() => {\n        if (control._proxyFormState.isDirty) {\n            const isDirty = control._getDirty();\n            if (isDirty !== formState.isDirty) {\n                control._subjects.state.next({\n                    isDirty,\n                });\n            }\n        }\n    }, [control, formState.isDirty]);\n    React.useEffect(() => {\n        if (props.values && !deepEqual(props.values, _values.current)) {\n            control._reset(props.values, control._options.resetOptions);\n            _values.current = props.values;\n            updateFormState((state) => ({ ...state }));\n        }\n        else {\n            control._resetDefaultValues();\n        }\n    }, [props.values, control]);\n    React.useEffect(() => {\n        if (props.errors) {\n            control._setErrors(props.errors);\n        }\n    }, [props.errors, control]);\n    React.useEffect(() => {\n        if (!control._state.mount) {\n            control._updateValid();\n            control._state.mount = true;\n        }\n        if (control._state.watch) {\n            control._state.watch = false;\n            control._subjects.state.next({ ...control._formState });\n        }\n        control._removeUnmounted();\n    });\n    React.useEffect(() => {\n        props.shouldUnregister &&\n            control._subjects.values.next({\n                values: control._getWatch(),\n            });\n    }, [props.shouldUnregister, control]);\n    React.useEffect(() => {\n        if (_formControl.current) {\n            _formControl.current.watch = _formControl.current.watch.bind({});\n        }\n    }, [formState]);\n    _formControl.current.formState = getProxyFormState(formState, control);\n    return _formControl.current;\n}\n\nexport { Controller, Form, FormProvider, appendErrors, get, set, useController, useFieldArray, useForm, useFormContext, useFormState, useWatch };\n//# sourceMappingURL=index.esm.mjs.map\n","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n","// packages/react/context/src/createContext.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createContext2(rootComponentName, defaultContext) {\n  const Context = React.createContext(defaultContext);\n  function Provider(props) {\n    const { children, ...context } = props;\n    const value = React.useMemo(() => context, Object.values(context));\n    return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n  }\n  function useContext2(consumerName) {\n    const context = React.useContext(Context);\n    if (context) return context;\n    if (defaultContext !== void 0) return defaultContext;\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n  }\n  Provider.displayName = rootComponentName + \"Provider\";\n  return [Provider, useContext2];\n}\nfunction createContextScope(scopeName, createContextScopeDeps = []) {\n  let defaultContexts = [];\n  function createContext3(rootComponentName, defaultContext) {\n    const BaseContext = React.createContext(defaultContext);\n    const index = defaultContexts.length;\n    defaultContexts = [...defaultContexts, defaultContext];\n    function Provider(props) {\n      const { scope, children, ...context } = props;\n      const Context = scope?.[scopeName][index] || BaseContext;\n      const value = React.useMemo(() => context, Object.values(context));\n      return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n    }\n    function useContext2(consumerName, scope) {\n      const Context = scope?.[scopeName][index] || BaseContext;\n      const context = React.useContext(Context);\n      if (context) return context;\n      if (defaultContext !== void 0) return defaultContext;\n      throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n    }\n    Provider.displayName = rootComponentName + \"Provider\";\n    return [Provider, useContext2];\n  }\n  const createScope = () => {\n    const scopeContexts = defaultContexts.map((defaultContext) => {\n      return React.createContext(defaultContext);\n    });\n    return function useScope(scope) {\n      const contexts = scope?.[scopeName] || scopeContexts;\n      return React.useMemo(\n        () => ({ [`__scope${scopeName}`]: { ...scope, [scopeName]: contexts } }),\n        [scope, contexts]\n      );\n    };\n  };\n  createScope.scopeName = scopeName;\n  return [createContext3, composeContextScopes(createScope, ...createContextScopeDeps)];\n}\nfunction composeContextScopes(...scopes) {\n  const baseScope = scopes[0];\n  if (scopes.length === 1) return baseScope;\n  const createScope = () => {\n    const scopeHooks = scopes.map((createScope2) => ({\n      useScope: createScope2(),\n      scopeName: createScope2.scopeName\n    }));\n    return function useComposedScopes(overrideScopes) {\n      const nextScopes = scopeHooks.reduce((nextScopes2, { useScope, scopeName }) => {\n        const scopeProps = useScope(overrideScopes);\n        const currentScope = scopeProps[`__scope${scopeName}`];\n        return { ...nextScopes2, ...currentScope };\n      }, {});\n      return React.useMemo(() => ({ [`__scope${baseScope.scopeName}`]: nextScopes }), [nextScopes]);\n    };\n  };\n  createScope.scopeName = baseScope.scopeName;\n  return createScope;\n}\nexport {\n  createContext2 as createContext,\n  createContextScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// packages/react/progress/src/Progress.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar PROGRESS_NAME = \"Progress\";\nvar DEFAULT_MAX = 100;\nvar [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\nvar [ProgressProvider, useProgressContext] = createProgressContext(PROGRESS_NAME);\nvar Progress = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : void 0;\n    return /* @__PURE__ */ jsx(ProgressProvider, { scope: __scopeProgress, value, max, children: /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"aria-valuemax\": max,\n        \"aria-valuemin\": 0,\n        \"aria-valuenow\": isNumber(value) ? value : void 0,\n        \"aria-valuetext\": valueLabel,\n        role: \"progressbar\",\n        \"data-state\": getProgressState(value, max),\n        \"data-value\": value ?? void 0,\n        \"data-max\": max,\n        ...progressProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nProgress.displayName = PROGRESS_NAME;\nvar INDICATOR_NAME = \"ProgressIndicator\";\nvar ProgressIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": getProgressState(context.value, context.max),\n        \"data-value\": context.value ?? void 0,\n        \"data-max\": context.max,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nProgressIndicator.displayName = INDICATOR_NAME;\nfunction defaultGetValueLabel(value, max) {\n  return `${Math.round(value / max * 100)}%`;\n}\nfunction getProgressState(value, maxValue) {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isValidMaxNumber(max) {\n  return isNumber(max) && !isNaN(max) && max > 0;\n}\nfunction isValidValueNumber(value, max) {\n  return isNumber(value) && !isNaN(value) && value <= max && value >= 0;\n}\nfunction getInvalidMaxError(propValue, componentName) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\nfunction getInvalidValueError(propValue, componentName) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\nvar Root = Progress;\nvar Indicator = ProgressIndicator;\nexport {\n  Indicator,\n  Progress,\n  ProgressIndicator,\n  Root,\n  createProgressScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n","/**\r\n * Utilitaire pour la compression d'images côté client\r\n */\r\n\r\nexport interface CompressionOptions {\r\n  maxWidth?: number;\r\n  maxHeight?: number;\r\n  quality?: number;\r\n  format?: 'jpeg' | 'webp' | 'png';\r\n  maxSizeKB?: number;\r\n}\r\n\r\nexport interface CompressionResult {\r\n  file: File;\r\n  originalSize: number;\r\n  compressedSize: number;\r\n  compressionRatio: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\n/**\r\n * Compresse une image en utilisant Canvas\r\n */\r\nexport const compressImage = async (\r\n  file: File,\r\n  options: CompressionOptions = {}\r\n): Promise<CompressionResult> => {\r\n  const {\r\n    maxWidth = 1920,\r\n    maxHeight = 1080,\r\n    quality = 0.8,\r\n    format = 'jpeg',\r\n    maxSizeKB = 2048 // 2MB par défaut\r\n  } = options;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    if (!ctx) {\r\n      reject(new Error('Impossible de créer le contexte Canvas'));\r\n      return;\r\n    }\r\n\r\n    img.onload = () => {\r\n      // Calculer les nouvelles dimensions en gardant le ratio\r\n      const { width: newWidth, height: newHeight } = calculateDimensions(\r\n        img.width,\r\n        img.height,\r\n        maxWidth,\r\n        maxHeight\r\n      );\r\n\r\n      // Configurer le canvas\r\n      canvas.width = newWidth;\r\n      canvas.height = newHeight;\r\n\r\n      // Améliorer la qualité de redimensionnement\r\n      ctx.imageSmoothingEnabled = true;\r\n      ctx.imageSmoothingQuality = 'high';\r\n\r\n      // Dessiner l'image redimensionnée\r\n      ctx.drawImage(img, 0, 0, newWidth, newHeight);\r\n\r\n      // Convertir en blob avec compression\r\n      const mimeType = `image/${format}`;\r\n      \r\n      canvas.toBlob(\r\n        async (blob) => {\r\n          if (!blob) {\r\n            reject(new Error('Échec de la compression'));\r\n            return;\r\n          }\r\n\r\n          let finalBlob = blob;\r\n          let currentQuality = quality;\r\n\r\n          // Si l'image est encore trop grosse, réduire la qualité\r\n          if (blob.size > maxSizeKB * 1024 && format !== 'png') {\r\n            finalBlob = await reduceQualityUntilSize(\r\n              canvas,\r\n              mimeType,\r\n              maxSizeKB * 1024,\r\n              quality\r\n            );\r\n          }\r\n\r\n          // Créer le fichier final\r\n          const compressedFile = new File(\r\n            [finalBlob],\r\n            `compressed_${file.name.replace(/\\.[^/.]+$/, '')}.${format}`,\r\n            { type: mimeType }\r\n          );\r\n\r\n          const result: CompressionResult = {\r\n            file: compressedFile,\r\n            originalSize: file.size,\r\n            compressedSize: finalBlob.size,\r\n            compressionRatio: Math.round((1 - finalBlob.size / file.size) * 100),\r\n            width: newWidth,\r\n            height: newHeight\r\n          };\r\n\r\n          resolve(result);\r\n        },\r\n        mimeType,\r\n        quality\r\n      );\r\n    };\r\n\r\n    img.onerror = () => {\r\n      reject(new Error('Impossible de charger l\\'image'));\r\n    };\r\n\r\n    // Charger l'image\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Calcule les nouvelles dimensions en gardant le ratio d'aspect\r\n */\r\nconst calculateDimensions = (\r\n  originalWidth: number,\r\n  originalHeight: number,\r\n  maxWidth: number,\r\n  maxHeight: number\r\n): { width: number; height: number } => {\r\n  let { width, height } = { width: originalWidth, height: originalHeight };\r\n\r\n  // Si l'image est plus petite que les limites, ne pas l'agrandir\r\n  if (width <= maxWidth && height <= maxHeight) {\r\n    return { width, height };\r\n  }\r\n\r\n  // Calculer le ratio de redimensionnement\r\n  const widthRatio = maxWidth / width;\r\n  const heightRatio = maxHeight / height;\r\n  const ratio = Math.min(widthRatio, heightRatio);\r\n\r\n  return {\r\n    width: Math.round(width * ratio),\r\n    height: Math.round(height * ratio)\r\n  };\r\n};\r\n\r\n/**\r\n * Réduit progressivement la qualité jusqu'à atteindre la taille cible\r\n */\r\nconst reduceQualityUntilSize = async (\r\n  canvas: HTMLCanvasElement,\r\n  mimeType: string,\r\n  maxSize: number,\r\n  initialQuality: number\r\n): Promise<Blob> => {\r\n  let quality = initialQuality;\r\n  let blob: Blob | null = null;\r\n\r\n  while (quality > 0.1) {\r\n    blob = await new Promise<Blob | null>((resolve) => {\r\n      canvas.toBlob(resolve, mimeType, quality);\r\n    });\r\n\r\n    if (blob && blob.size <= maxSize) {\r\n      break;\r\n    }\r\n\r\n    quality -= 0.1;\r\n  }\r\n\r\n  return blob || new Blob();\r\n};\r\n\r\n/**\r\n * Valide si un fichier est une image supportée\r\n */\r\nexport const validateImageFile = (file: File): { valid: boolean; error?: string } => {\r\n  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\r\n  const maxSizeMB = 50; // 50MB max pour le fichier original\r\n\r\n  if (!allowedTypes.includes(file.type)) {\r\n    return {\r\n      valid: false,\r\n      error: 'Format non supporté. Utilisez JPG, PNG ou WebP.'\r\n    };\r\n  }\r\n\r\n  if (file.size > maxSizeMB * 1024 * 1024) {\r\n    return {\r\n      valid: false,\r\n      error: `Fichier trop volumineux. Maximum ${maxSizeMB}MB.`\r\n    };\r\n  }\r\n\r\n  return { valid: true };\r\n};\r\n\r\n/**\r\n * Obtient les dimensions d'une image sans la charger complètement\r\n */\r\nexport const getImageDimensions = (file: File): Promise<{ width: number; height: number }> => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    \r\n    img.onload = () => {\r\n      resolve({\r\n        width: img.naturalWidth,\r\n        height: img.naturalHeight\r\n      });\r\n      URL.revokeObjectURL(img.src);\r\n    };\r\n\r\n    img.onerror = () => {\r\n      reject(new Error('Impossible de lire les dimensions de l\\'image'));\r\n      URL.revokeObjectURL(img.src);\r\n    };\r\n\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Formate la taille d'un fichier en format lisible\r\n */\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 B';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['B', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\r\n};\r\n","import { useEffect, useRef } from 'react';\r\n\r\ninterface AutoSaveOptions {\r\n  key: string; // Clé unique pour le localStorage\r\n  data: any; // Données à sauvegarder\r\n  delay?: number; // Délai en ms avant sauvegarde (défaut: 1000ms)\r\n  enabled?: boolean; // Activer/désactiver l'auto-save\r\n}\r\n\r\n// Fonction debounce native\r\nfunction debounce<T extends (...args: any[]) => any>(func: T, delay: number): T & { cancel: () => void } {\r\n  let timeoutId: NodeJS.Timeout;\r\n  const debouncedFunc = ((...args: any[]) => {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => func.apply(null, args), delay);\r\n  }) as T & { cancel: () => void };\r\n  \r\n  debouncedFunc.cancel = () => {\r\n    clearTimeout(timeoutId);\r\n  };\r\n  \r\n  return debouncedFunc;\r\n}\r\n\r\nexport const useAutoSave = ({ key, data, delay = 1000, enabled = true }: AutoSaveOptions) => {\r\n  const debouncedSaveRef = useRef<ReturnType<typeof debounce> | null>(null);\r\n\r\n  // Fonction de sauvegarde\r\n  const saveToLocalStorage = (dataToSave: any) => {\r\n    try {\r\n      const serializedData = JSON.stringify({\r\n        data: dataToSave,\r\n        timestamp: Date.now(),\r\n        version: '1.0'\r\n      });\r\n      localStorage.setItem(`draft_${key}`, serializedData);\r\n      console.log(`[AutoSave] Brouillon sauvegardé: ${key}`);\r\n    } catch (error) {\r\n      console.error(`[AutoSave] Erreur sauvegarde ${key}:`, error);\r\n    }\r\n  };\r\n\r\n  // Fonction de récupération\r\n  const loadFromLocalStorage = (): any | null => {\r\n    try {\r\n      const serializedData = localStorage.getItem(`draft_${key}`);\r\n      if (!serializedData) return null;\r\n\r\n      const parsed = JSON.parse(serializedData);\r\n      \r\n      // Vérifier si le brouillon n'est pas trop ancien (24h max)\r\n      const maxAge = 24 * 60 * 60 * 1000; // 24 heures\r\n      if (Date.now() - parsed.timestamp > maxAge) {\r\n        localStorage.removeItem(`draft_${key}`);\r\n        return null;\r\n      }\r\n\r\n      console.log(`[AutoSave] Brouillon récupéré: ${key}`);\r\n      return parsed.data;\r\n    } catch (error) {\r\n      console.error(`[AutoSave] Erreur récupération ${key}:`, error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Fonction de suppression\r\n  const clearDraft = () => {\r\n    try {\r\n      localStorage.removeItem(`draft_${key}`);\r\n      console.log(`[AutoSave] Brouillon supprimé: ${key}`);\r\n    } catch (error) {\r\n      console.error(`[AutoSave] Erreur suppression ${key}:`, error);\r\n    }\r\n  };\r\n\r\n  // Créer la fonction debounced\r\n  useEffect(() => {\r\n    debouncedSaveRef.current = debounce(saveToLocalStorage, delay);\r\n    \r\n    return () => {\r\n      if (debouncedSaveRef.current) {\r\n        debouncedSaveRef.current.cancel();\r\n      }\r\n    };\r\n  }, [delay]);\r\n\r\n  // Auto-save quand les données changent\r\n  useEffect(() => {\r\n    if (!enabled || !data) return;\r\n\r\n    // Ne pas sauvegarder si les données sont vides\r\n    const isEmpty = typeof data === 'object' && Object.keys(data).length === 0;\r\n    if (isEmpty) return;\r\n\r\n    debouncedSaveRef.current?.(data);\r\n  }, [data, enabled]);\r\n\r\n  return {\r\n    loadDraft: loadFromLocalStorage,\r\n    clearDraft,\r\n    hasDraft: () => {\r\n      try {\r\n        return localStorage.getItem(`draft_${key}`) !== null;\r\n      } catch {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n};\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\r\nimport Upload from \"lucide-react/dist/esm/icons/upload\";\r\nimport Loader2 from \"lucide-react/dist/esm/icons/loader-2\";\r\nimport Info from \"lucide-react/dist/esm/icons/info\";\r\nimport CheckCircle from \"lucide-react/dist/esm/icons/check-circle\";\r\nimport Clock from \"lucide-react/dist/esm/icons/clock\";\r\nimport Zap from \"lucide-react/dist/esm/icons/zap\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\n\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Input } from \"../../components/ui/input\";\r\nimport { Textarea } from \"../../components/ui/textarea\";\r\nimport { Label } from \"../../components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"../../components/ui/radio-group\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../../components/ui/select\";\r\nimport { Alert, AlertDescription } from \"../../components/ui/alert\";\r\nimport { Progress } from \"../../components/ui/progress\";\r\nimport { toast } from \"../../components/ui/use-toast\";\r\n\r\nimport { CommunityEntry, EntryType, SubmissionParams, ModerationResult } from \"../../types/communityTypes\";\r\nimport { submitContribution } from \"../../services/communityServiceBridge\";\r\nimport { AnonymousSessionService } from \"../../services/anonymousSessionService\";\r\nimport { getContributionContext, clearContributionContext, enrichSubmissionWithContext } from \"../../services/contextualContributionService\";\r\nimport { events } from \"../../data/events\";\r\nimport { locations } from \"../../data/locations\";\r\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\r\nimport { compressImage, validateImageFile, formatFileSize, CompressionResult } from \"../../utils/imageCompression\";\r\nimport { useAutoSave } from \"../../hooks/useAutoSave\";\r\n\r\ninterface ContributionFormProps {\r\n  onSubmit: (newEntry: CommunityEntry) => void;\r\n}\r\n\r\nexport const ContributionForm: React.FC<ContributionFormProps> = ({ onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\r\n  const [contributionContext, setContributionContext] = useState<any>(null);\r\n  const [selectedEventId, setSelectedEventId] = useState<string>(\"\");\r\n  const [selectedLocationId, setSelectedLocationId] = useState<string>(\"\");\r\n  const [isCompressing, setIsCompressing] = useState(false);\r\n  const [compressionProgress, setCompressionProgress] = useState(0);\r\n  const [compressionResult, setCompressionResult] = useState<CompressionResult | null>(null);\r\n  const [showDraftNotification, setShowDraftNotification] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const { register, handleSubmit, reset, setValue, formState: { errors }, control } = useForm<SubmissionParams>();\r\n  \r\n  // Surveiller les changements du formulaire pour l'auto-save\r\n  const watchedFields = useWatch({ control });\r\n  \r\n  // Auto-save hook\r\n  const { loadDraft, clearDraft, hasDraft } = useAutoSave({\r\n    key: 'contribution_form',\r\n    data: {\r\n      ...watchedFields,\r\n      selectedEventId,\r\n      selectedLocationId,\r\n      imagePreview: imagePreview ? 'has_image' : null // Ne pas sauvegarder l'image elle-même\r\n    },\r\n    delay: 2000, // Sauvegarder 2 secondes après la dernière modification\r\n    enabled: !isSubmitted // Désactiver après soumission\r\n  });\r\n\r\n  // Récupérer le brouillon au chargement\r\n  useEffect(() => {\r\n    const draft = loadDraft();\r\n    if (draft && hasDraft()) {\r\n      setShowDraftNotification(true);\r\n    }\r\n  }, [loadDraft, hasDraft]);\r\n  \r\n  // Récupérer le contexte de contribution au chargement\r\n  useEffect(() => {\r\n    const context = getContributionContext();\r\n    if (context) {\r\n      setContributionContext(context);\r\n      console.log(\"[ContributionForm] Contexte reçu:\", context);\r\n      \r\n      // Pré-remplir les champs du formulaire en fonction du contexte\r\n      if (context.type === \"event\") {\r\n        // Pré-remplir l'événement\r\n        setValue(\"eventId\", context.id);\r\n        setSelectedEventId(context.id);\r\n        console.log(\"[ContributionForm] Contexte événement défini:\", context.id);\r\n        console.log(\"[ContributionForm] Liste des événements disponibles:\", events.map(e => e.id));\r\n        console.log(\"[ContributionForm] L'ID de l'événement est-il dans la liste ?\", events.some(e => e.id === context.id));\r\n        \r\n        // Si l'événement a un lieu associé, pré-remplir également le lieu\r\n        if (context.locationId) {\r\n          setValue(\"locationId\", context.locationId);\r\n          setSelectedLocationId(context.locationId);\r\n          console.log(\"[ContributionForm] Lieu associé à l'événement pré-rempli:\", context.locationId);\r\n          console.log(\"[ContributionForm] Le lieu associé est-il dans la liste ?\", locations.some(l => l.id === context.locationId));\r\n        }\r\n      } else if (context.type === \"location\") {\r\n        // Pré-remplir le lieu\r\n        setValue(\"locationId\", context.id);\r\n        setSelectedLocationId(context.id);\r\n        console.log(\"[ContributionForm] Contexte lieu défini:\", context.id);\r\n        console.log(\"[ContributionForm] Liste des lieux disponibles:\", locations.map(l => l.id));\r\n        console.log(\"[ContributionForm] L'ID du lieu est-il dans la liste ?\", locations.some(l => l.id === context.id));\r\n        \r\n        // Vérifier si le lieu existe dans la liste\r\n        const locationExists = locations.some(l => l.id === context.id);\r\n        if (!locationExists) {\r\n          console.warn(\"[ContributionForm] ATTENTION: L'ID du lieu dans le contexte ne correspond à aucun lieu disponible dans la liste déroulante\");\r\n        }\r\n      }\r\n    }\r\n    // Analytics: user opened contribution form\r\n    analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'open_form' });\r\n  }, [setValue]);\r\n\r\n  // Gérer le changement d'image avec compression\r\n  const handleImageChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log('🔥 [handleImageChange] FONCTION APPELÉE !', e.target.files?.length, 'fichier(s)');\r\n    \r\n    try {\r\n      const file = e.target.files?.[0];\r\n      if (!file) return;\r\n\r\n      // Validation du fichier\r\n      const validation = validateImageFile(file);\r\n      if (!validation.valid) {\r\n        alert(validation.error);\r\n        return;\r\n      }\r\n\r\n      console.log('[ContributionForm] Début compression:', file.name, formatFileSize(file.size));\r\n      setIsCompressing(true);\r\n      setCompressionProgress(0);\r\n\r\n      // Simulation de progression pour l'UX\r\n      const progressInterval = setInterval(() => {\r\n        setCompressionProgress(prev => Math.min(prev + 10, 90));\r\n      }, 100);\r\n\r\n      try {\r\n        // Compression de l'image\r\n        const compressionResult = await compressImage(file, {\r\n          maxWidth: 1920,\r\n          maxHeight: 1080,\r\n          quality: 0.8,\r\n          format: 'jpeg',\r\n          maxSizeKB: 1024 // 1MB max après compression\r\n        });\r\n\r\n        clearInterval(progressInterval);\r\n        setCompressionProgress(100);\r\n        setCompressionResult(compressionResult);\r\n\r\n        console.log('[ContributionForm] Compression terminée:', {\r\n          original: formatFileSize(compressionResult.originalSize),\r\n          compressed: formatFileSize(compressionResult.compressedSize),\r\n          ratio: compressionResult.compressionRatio + '%',\r\n          dimensions: `${compressionResult.width}x${compressionResult.height}`\r\n        });\r\n\r\n        // Créer un aperçu local immédiatement\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n          if (event.target && event.target.result) {\r\n            setImagePreview(event.target.result as string);\r\n          }\r\n        };\r\n        reader.readAsDataURL(compressionResult.file);\r\n\r\n        // 🌩️ CLOUDINARY: Upload vers Cloudinary avec l'image compressée\r\n        const formData = new FormData();\r\n        formData.append('file', compressionResult.file);\r\n        formData.append('upload_preset', 'collectif_photos');\r\n        formData.append('cloud_name', 'dpatqkgsc');\r\n\r\n        console.log('[ContributionForm] Requête Cloudinary avec image compressée:', {\r\n          url: 'https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload',\r\n          preset: 'collectif_photos',\r\n          fileSize: compressionResult.compressedSize,\r\n          fileType: compressionResult.file.type\r\n        });\r\n\r\n        const response = await fetch(\r\n          'https://api.cloudinary.com/v1_1/dpatqkgsc/image/upload',\r\n          {\r\n            method: 'POST',\r\n            body: formData,\r\n          }\r\n        );\r\n\r\n        console.log('[ContributionForm] Cloudinary response status:', response.status, response.statusText);\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          console.log('[ContributionForm] Cloudinary response data:', data);\r\n          setValue('imageUrl', data.secure_url);\r\n          \r\n          // Analytics: successful image upload\r\n          analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { \r\n            stage: 'image_uploaded',\r\n            compression_ratio: compressionResult.compressionRatio,\r\n            original_size: compressionResult.originalSize,\r\n            compressed_size: compressionResult.compressedSize\r\n          });\r\n        } else {\r\n          const errorData = await response.text();\r\n          console.error('[ContributionForm] Erreur Cloudinary:', errorData);\r\n          throw new Error(`Erreur Cloudinary: ${response.status}`);\r\n        }\r\n\r\n      } catch (compressionError) {\r\n        clearInterval(progressInterval);\r\n        console.error('[ContributionForm] Erreur de compression:', compressionError);\r\n        alert('Erreur lors de la compression de l\\'image. Veuillez réessayer.');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('[ContributionForm] Erreur générale:', error);\r\n      alert('Erreur lors du traitement de l\\'image. Veuillez réessayer.');\r\n    } finally {\r\n      setIsCompressing(false);\r\n      setCompressionProgress(0);\r\n    }\r\n  };\r\n\r\n  // Soumettre le formulaire\r\n  const processSubmit = async (data: SubmissionParams) => {\r\n    console.log('[ContributionForm] === DÉBUT DE SOUMISSION ===');\r\n    console.log('[ContributionForm] Données reçues du formulaire:', data);\r\n    \r\n    try {\r\n      setIsSubmitting(true);\r\n      console.log('[ContributionForm] État de soumission activé');\r\n      // Analytics: contribution submit start\r\n      analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'submit_start' });\r\n\r\n      // Déterminer le type de contribution automatiquement\r\n      const hasImage = data.imageUrl || fileInputRef.current?.files?.[0];\r\n      const type: EntryType = hasImage ? \"photo\" : \"testimonial\";\r\n      console.log('[ContributionForm] Type déterminé automatiquement:', type, hasImage ? '(avec image)' : '(sans image)');\r\n\r\n      // Ajouter le type aux données\r\n      data.type = type;\r\n\r\n      // Log de l'URL Cloudinary si présente\r\n      if (data.imageUrl) {\r\n        console.log('[ContributionForm] URL Cloudinary disponible:', data.imageUrl);\r\n      } else {\r\n        console.log('[ContributionForm] Aucune URL Cloudinary disponible');\r\n      }\r\n\r\n      // Enrichir les données avec le contexte si présent\r\n      console.log('[ContributionForm] Contexte avant enrichissement:', contributionContext);\r\n      data = enrichSubmissionWithContext(data);\r\n      console.log('[ContributionForm] Données après enrichissement avec contexte:', data);\r\n\r\n      // Modérer le contenu avant soumission\r\n      console.log('[ContributionForm] Appel du service de soumission...');\r\n      // Soumettre la contribution\r\n      const newEntry = await submitContribution(data);\r\n      console.log('[ContributionForm] Contribution soumise avec succès:', newEntry);\r\n      // Analytics: contribution submit success\r\n      analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'success', entry_id: newEntry.id, type: newEntry.type });\r\n      \r\n      // Toast révolutionnaire instantané !\r\n      toast({\r\n        title: \"🚀 Photo ajoutée instantanément !\",\r\n        description: \"Votre photo est visible immédiatement sur tous les appareils. Révolution Cloudinary !\",\r\n        duration: 4000,\r\n      });\r\n      \r\n      // Afficher le message de succès\r\n      setIsSubmitted(true);\r\n      \r\n      // Réinitialiser le formulaire après un délai\r\n      setTimeout(() => {\r\n        console.log('[ContributionForm] Réinitialisation du formulaire...');\r\n        reset();\r\n        setImagePreview(null);\r\n        clearContributionContext();\r\n        setContributionContext(null);\r\n        setSelectedEventId(\"\");\r\n        setSelectedLocationId(\"\");\r\n        setIsSubmitted(false);\r\n        console.log('[ContributionForm] Formulaire réinitialisé');\r\n      }, 5000); // Afficher le message pendant 5 secondes\r\n      \r\n      // Notifier le parent\r\n      console.log('[ContributionForm] Notification du composant parent...');\r\n      onSubmit(newEntry);\r\n      console.log('[ContributionForm] === SOUMISSION TERMINÉE AVEC SUCCÈS ===');\r\n      \r\n    } catch (error) {\r\n      console.error(\"[ContributionForm] === ERREUR LORS DE LA SOUMISSION ===\");\r\n      console.error(\"[ContributionForm] Erreur détaillée:\", error);\r\n      console.error(\"[ContributionForm] Stack trace:\", error instanceof Error ? error.stack : 'N/A');\r\n      // Gérer l'erreur (pourrait être amélioré avec un système de notification)\r\n      alert(\"Une erreur est survenue lors de l'envoi de votre contribution. Veuillez réessayer.\");\r\n      // Analytics: contribution submit failure\r\n      analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'failure' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      console.log('[ContributionForm] État de soumission désactivé');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className=\"space-y-6 pb-20\"\r\n    >\r\n      <div className=\"space-y-2\">\r\n        <h2 className=\"text-xl font-semibold\">Partagez votre expérience</h2>\r\n        <p className=\"text-sm text-slate-500\">\r\n          Contribuez à la mémoire collective de l'île Feydeau en partageant vos photos et témoignages.\r\n        </p>\r\n        \r\n        {/* Message de succès après soumission */}\r\n        {isSubmitted && (\r\n          <Alert className=\"mt-4 bg-blue-50 border-blue-300 border-2\">\r\n            <Clock className=\"h-5 w-5 text-blue-600\" />\r\n            <AlertDescription className=\"space-y-3\">\r\n              <div className=\"font-bold text-blue-900 text-lg\">\r\n                📤 Contribution envoyée !\r\n              </div>\r\n              <div className=\"bg-blue-100 p-3 rounded-lg border border-blue-200\">\r\n                <div className=\"flex items-center gap-2 text-blue-800 font-medium\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  <span>⏱️ Votre photo sera visible dans 1-2 minutes</span>\r\n                </div>\r\n                <div className=\"text-sm text-blue-700 mt-1\">\r\n                  Le temps que notre système traite automatiquement votre contribution\r\n                </div>\r\n              </div>\r\n              <div className=\"text-sm text-blue-600\">\r\n                ✨ Merci de contribuer à la mémoire collective de l'île Feydeau !\r\n              </div>\r\n            </AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Afficher le contexte de contribution s'il existe */}\r\n        {contributionContext && !isSubmitted && (\r\n          <Alert className=\"mt-4 bg-blue-50 border-blue-200\">\r\n            <Info className=\"h-4 w-4 text-blue-500\" />\r\n            <AlertDescription>\r\n              Votre contribution sera associée à {contributionContext.type === \"event\" ? \"l'événement\" : \"l'emplacement\"} <strong>{contributionContext.name}</strong>\r\n            </AlertDescription>\r\n          </Alert>\r\n        )}\r\n        \r\n        {/* Afficher la notification de brouillon */}\r\n        {showDraftNotification && (\r\n          <Alert className=\"mt-4 bg-yellow-50 border-yellow-200\">\r\n            <Info className=\"h-4 w-4 text-yellow-500\" />\r\n            <AlertDescription>\r\n              Vous avez un brouillon enregistré. Souhaitez-vous le récupérer ?\r\n            </AlertDescription>\r\n          </Alert>\r\n        )}\r\n      </div>\r\n\r\n      {!isSubmitted && (\r\n        <form \r\n          onSubmit={handleSubmit(processSubmit)} \r\n          className=\"space-y-6\"\r\n          autoComplete=\"off\"\r\n          data-form-type=\"contribution\"\r\n          noValidate\r\n        >\r\n        {/* Nom d'affichage */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"displayName\">Nom d'affichage (optionnel)</Label>\r\n          <Input \r\n            id=\"displayName\" \r\n            placeholder=\"Votre nom ou pseudonyme\"\r\n            defaultValue=\"Anonyme\"\r\n            autoComplete=\"off\"\r\n            data-form-type=\"contribution-displayname\"\r\n            {...register(\"displayName\")}\r\n          />\r\n          <p className=\"text-xs text-slate-500\">\r\n            Laissez vide pour contribuer anonymement\r\n          </p>\r\n        </div>\r\n\r\n        {/* Événement associé */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"eventId\">Événement associé (optionnel)</Label>\r\n          <Select \r\n            value={selectedEventId} \r\n            onValueChange={(value) => {\r\n              setSelectedEventId(value);\r\n              setValue(\"eventId\", value);\r\n            }}\r\n          >\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Sélectionnez un événement\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {events.map((event) => (\r\n                <SelectItem key={event.id} value={event.id}>{event.title}</SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n          <input \r\n            type=\"hidden\" \r\n            {...register(\"eventId\")} \r\n            value={selectedEventId}\r\n            data-form-type=\"contribution-event\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </div>\r\n\r\n        {/* Lieu associé */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"locationId\">Lieu associé (optionnel)</Label>\r\n          <Select \r\n            value={selectedLocationId} \r\n            onValueChange={(value) => {\r\n              setSelectedLocationId(value);\r\n              setValue(\"locationId\", value);\r\n            }}\r\n          >\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Sélectionnez un lieu\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {locations.map((location) => (\r\n                <SelectItem key={location.id} value={location.id}>{location.name}</SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n          <input \r\n            type=\"hidden\" \r\n            {...register(\"locationId\")} \r\n            value={selectedLocationId}\r\n            data-form-type=\"contribution-location\"\r\n            autoComplete=\"off\"\r\n          />\r\n        </div>\r\n\r\n        {/* Champs spécifiques au type */}\r\n        <div className=\"space-y-4\">\r\n          {/* Upload d'image */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"image\">Photo</Label>\r\n            <div \r\n              className=\"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors\"\r\n              onClick={() => fileInputRef.current?.click()}\r\n            >\r\n              {imagePreview ? (\r\n                <div className=\"relative\">\r\n                  <img \r\n                    src={imagePreview} \r\n                    alt=\"Aperçu\" \r\n                    className=\"max-h-64 mx-auto rounded\" \r\n                  />\r\n                  <Button \r\n                    type=\"button\" \r\n                    variant=\"outline\" \r\n                    size=\"sm\" \r\n                    className=\"mt-2\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setImagePreview(null);\r\n                      if (fileInputRef.current) {\r\n                        fileInputRef.current.value = \"\";\r\n                      }\r\n                    }}\r\n                  >\r\n                    Changer l'image\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"py-8 flex flex-col items-center gap-2\">\r\n                  <Upload className=\"h-8 w-8 text-slate-400\" />\r\n                  <p className=\"text-sm text-slate-500\">\r\n                    Cliquez pour sélectionner une image ou glissez-déposez\r\n                  </p>\r\n                  {isCompressing && (\r\n                    <Progress value={compressionProgress} max={100} />\r\n                  )}\r\n                </div>\r\n              )}\r\n              <input \r\n                type=\"file\" \r\n                ref={fileInputRef}\r\n                accept=\"image/*\"\r\n                className=\"hidden\"\r\n                onChange={handleImageChange}\r\n                data-form-type=\"contribution-image\"\r\n                autoComplete=\"off\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"description\">Description (optionnel)</Label>\r\n            <Textarea \r\n              id=\"description\" \r\n              placeholder=\"Décrivez votre photo...\"\r\n              autoComplete=\"off\"\r\n              data-form-type=\"contribution-description\"\r\n              {...register(\"description\")}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bouton de soumission */}\r\n        <Button \r\n          type=\"submit\" \r\n          className=\"w-full\" \r\n          disabled={isSubmitting}\r\n        >\r\n          {isSubmitting ? (\r\n            <>\r\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n              Envoi en cours...\r\n            </>\r\n          ) : (\r\n            \"Partager\"\r\n          )}\r\n        </Button>\r\n        </form>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface LazyImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  placeholderSrc?: string;\r\n  blurDataURL?: string;\r\n  onLoad?: () => void;\r\n  onError?: (error: Event) => void;\r\n  priority?: boolean; // Pour les images above-the-fold\r\n}\r\n\r\nexport const LazyImage: React.FC<LazyImageProps> = ({\r\n  src,\r\n  alt,\r\n  className,\r\n  placeholderSrc,\r\n  blurDataURL,\r\n  onLoad,\r\n  onError,\r\n  priority = false\r\n}) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isInView, setIsInView] = useState(priority); // Si priority=true, charger immédiatement\r\n  const [hasError, setHasError] = useState(!src); // Si pas de src, marquer comme erreur immédiatement\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const observerRef = useRef<IntersectionObserver | null>(null);\r\n\r\n  console.log(`[LazyImage] Initialisation: ${src}, priority: ${priority}, isInView: ${isInView}`);\r\n\r\n  // Si pas de src, ne pas essayer de charger\r\n  if (!src || src === 'undefined') {\r\n    console.warn(`[LazyImage] URL d'image invalide: ${src}`);\r\n  }\r\n\r\n  // Intersection Observer pour détecter quand l'image entre dans le viewport\r\n  useEffect(() => {\r\n    if (priority) {\r\n      console.log(`[LazyImage] Priority image, skip observer: ${src}`);\r\n      return; // Skip observer si priority=true\r\n    }\r\n\r\n    console.log(`[LazyImage] Setting up observer for: ${src}`);\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          console.log(`[LazyImage] Observer callback: ${src}, isIntersecting: ${entry.isIntersecting}`);\r\n          if (entry.isIntersecting) {\r\n            setIsInView(true);\r\n            observer.unobserve(entry.target);\r\n          }\r\n        });\r\n      },\r\n      {\r\n        rootMargin: '50px', // Commencer à charger 50px avant que l'image soit visible\r\n        threshold: 0.1\r\n      }\r\n    );\r\n\r\n    observerRef.current = observer;\r\n\r\n    if (imgRef.current) {\r\n      console.log(`[LazyImage] Observing element: ${src}`);\r\n      observer.observe(imgRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (observerRef.current) {\r\n        observerRef.current.disconnect();\r\n      }\r\n    };\r\n  }, [priority, src]);\r\n\r\n  const handleLoad = () => {\r\n    console.log(`[LazyImage] Image loaded: ${src}`);\r\n    setIsLoaded(true);\r\n    onLoad?.();\r\n  };\r\n\r\n  const handleError = (error: React.SyntheticEvent<HTMLImageElement, Event>) => {\r\n    console.error(`[LazyImage] Image error: ${src}`, error);\r\n    setHasError(true);\r\n    onError?.(error.nativeEvent);\r\n  };\r\n\r\n  // Placeholder blur par défaut (base64 1x1 pixel gris)\r\n  const defaultBlurDataURL = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==';\r\n\r\n  console.log(`[LazyImage] Render state: isInView=${isInView}, isLoaded=${isLoaded}, hasError=${hasError}`);\r\n\r\n  return (\r\n    <div \r\n      ref={imgRef}\r\n      className={cn(\"relative overflow-hidden\", className)}\r\n    >\r\n      {/* Placeholder blur */}\r\n      {!isLoaded && (\r\n        <div \r\n          className=\"absolute inset-0 bg-slate-200 animate-pulse\"\r\n          style={{\r\n            backgroundImage: `url(${blurDataURL || defaultBlurDataURL})`,\r\n            backgroundSize: 'cover',\r\n            backgroundPosition: 'center',\r\n            filter: 'blur(10px)',\r\n            transform: 'scale(1.1)' // Évite les bords blancs du blur\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Image principale */}\r\n      {isInView && src && src !== 'undefined' && (\r\n        <img\r\n          src={src}\r\n          alt={alt}\r\n          className={cn(\r\n            \"w-full h-full object-cover transition-opacity duration-300\",\r\n            isLoaded ? \"opacity-100\" : \"opacity-0\"\r\n          )}\r\n          onLoad={handleLoad}\r\n          onError={handleError}\r\n          loading={priority ? \"eager\" : \"lazy\"} // Native lazy loading en backup\r\n        />\r\n      )}\r\n\r\n      {/* Indicateur de chargement */}\r\n      {isInView && !isLoaded && !hasError && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n          <div className=\"w-8 h-8 border-2 border-white/30 border-t-white/70 rounded-full animate-spin\" />\r\n        </div>\r\n      )}\r\n\r\n      {/* Erreur de chargement */}\r\n      {hasError && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-slate-100\">\r\n          <div className=\"text-center text-slate-500\">\r\n            <div className=\"text-2xl mb-2\">📷</div>\r\n            <div className=\"text-sm\">Image indisponible</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { format } from \"date-fns\";\r\nimport { fr } from \"date-fns/locale\";\r\n\r\nimport { CommunityEntry } from \"../../types/communityTypes\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { LazyImage } from \"../ui/LazyImage\";\r\n\r\ninterface GalleryGridProps {\r\n  entries: CommunityEntry[];\r\n  onEntryClick: (entry: CommunityEntry) => void;\r\n}\r\n\r\nexport const GalleryGrid: React.FC<GalleryGridProps> = ({ entries, onEntryClick }) => {\r\n  // Animation pour les éléments de la grille\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: (i: number) => ({\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: {\r\n        delay: i * 0.1,\r\n        duration: 0.5\r\n      }\r\n    })\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 pb-20\">\r\n      {entries.map((entry, index) => (\r\n        <motion.div\r\n          key={entry.id}\r\n          custom={index}\r\n          variants={itemVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          className=\"relative rounded-lg overflow-hidden\"\r\n          onClick={() => onEntryClick(entry)}\r\n        >\r\n          {entry.type === \"photo\" && (entry.thumbnailUrl || entry.imageUrl) ? (\r\n            // Affichage d'une photo\r\n            <div className=\"aspect-square relative\">\r\n              <LazyImage\r\n                src={entry.thumbnailUrl || entry.imageUrl}\r\n                alt={entry.description || \"Photo communautaire\"}\r\n                className=\"w-full h-full object-cover\"\r\n                priority={index < 6} // Charger immédiatement les 6 premières images\r\n              />\r\n              {/* Overlay avec description - visible sur mobile, hover sur desktop */}\r\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-100 md:opacity-0 md:hover:opacity-100 transition-opacity flex flex-col justify-end p-2 pb-8\">\r\n                <p className=\"text-white text-sm line-clamp-2\">{entry.description || entry.content}</p>\r\n              </div>\r\n            </div>\r\n          ) : entry.type === \"photo\" ? (\r\n            // Photo sans image (fallback)\r\n            <div className=\"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col items-center justify-center\">\r\n              <div className=\"text-4xl mb-2\">📷</div>\r\n              <p className=\"text-sm text-center text-slate-500\">Image non disponible</p>\r\n              <p className=\"text-xs text-center text-slate-400 mt-1 line-clamp-2\">{entry.content}</p>\r\n            </div>\r\n          ) : (\r\n            // Affichage d'un témoignage\r\n            <div className=\"aspect-square bg-slate-100 dark:bg-slate-800 p-3 flex flex-col\">\r\n              <p className=\"text-sm line-clamp-5 flex-grow\">{entry.content}</p>\r\n              <div className=\"mt-2 text-xs text-slate-500\">\r\n                {entry.eventId && (\r\n                  <span className=\"block truncate\">\r\n                    {entry.eventId.replace(/-/g, \" \")}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Plus de badge \"En cours\" - Système instantané ! */}\r\n\r\n          {/* Informations communes */}\r\n          <div className=\"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-xs\">\r\n            <div className=\"truncate\">\r\n              <span>{entry.displayName}</span>\r\n              <span className=\"text-xs text-slate-300 ml-1\">\r\n                {entry.timestamp && !isNaN(new Date(entry.timestamp).getTime()) \r\n                  ? format(new Date(entry.timestamp), \"d MMM\", { locale: fr })\r\n                  : \"\"}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import * as React from 'react';\n\nconst LEFT = \"Left\";\nconst RIGHT = \"Right\";\nconst UP = \"Up\";\nconst DOWN = \"Down\";\n\n/* global document */\nconst defaultProps = {\n    delta: 10,\n    preventScrollOnSwipe: false,\n    rotationAngle: 0,\n    trackMouse: false,\n    trackTouch: true,\n    swipeDuration: Infinity,\n    touchEventOptions: { passive: true },\n};\nconst initialState = {\n    first: true,\n    initial: [0, 0],\n    start: 0,\n    swiping: false,\n    xy: [0, 0],\n};\nconst mouseMove = \"mousemove\";\nconst mouseUp = \"mouseup\";\nconst touchEnd = \"touchend\";\nconst touchMove = \"touchmove\";\nconst touchStart = \"touchstart\";\nfunction getDirection(absX, absY, deltaX, deltaY) {\n    if (absX > absY) {\n        if (deltaX > 0) {\n            return RIGHT;\n        }\n        return LEFT;\n    }\n    else if (deltaY > 0) {\n        return DOWN;\n    }\n    return UP;\n}\nfunction rotateXYByAngle(pos, angle) {\n    if (angle === 0)\n        return pos;\n    const angleInRadians = (Math.PI / 180) * angle;\n    const x = pos[0] * Math.cos(angleInRadians) + pos[1] * Math.sin(angleInRadians);\n    const y = pos[1] * Math.cos(angleInRadians) - pos[0] * Math.sin(angleInRadians);\n    return [x, y];\n}\nfunction getHandlers(set, handlerProps) {\n    const onStart = (event) => {\n        const isTouch = \"touches\" in event;\n        // if more than a single touch don't track, for now...\n        if (isTouch && event.touches.length > 1)\n            return;\n        set((state, props) => {\n            // setup mouse listeners on document to track swipe since swipe can leave container\n            if (props.trackMouse && !isTouch) {\n                document.addEventListener(mouseMove, onMove);\n                document.addEventListener(mouseUp, onUp);\n            }\n            const { clientX, clientY } = isTouch ? event.touches[0] : event;\n            const xy = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n            props.onTouchStartOrOnMouseDown &&\n                props.onTouchStartOrOnMouseDown({ event });\n            return Object.assign(Object.assign(Object.assign({}, state), initialState), { initial: xy.slice(), xy, start: event.timeStamp || 0 });\n        });\n    };\n    const onMove = (event) => {\n        set((state, props) => {\n            const isTouch = \"touches\" in event;\n            // Discount a swipe if additional touches are present after\n            // a swipe has started.\n            if (isTouch && event.touches.length > 1) {\n                return state;\n            }\n            // if swipe has exceeded duration stop tracking\n            if (event.timeStamp - state.start > props.swipeDuration) {\n                return state.swiping ? Object.assign(Object.assign({}, state), { swiping: false }) : state;\n            }\n            const { clientX, clientY } = isTouch ? event.touches[0] : event;\n            const [x, y] = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n            const deltaX = x - state.xy[0];\n            const deltaY = y - state.xy[1];\n            const absX = Math.abs(deltaX);\n            const absY = Math.abs(deltaY);\n            const time = (event.timeStamp || 0) - state.start;\n            const velocity = Math.sqrt(absX * absX + absY * absY) / (time || 1);\n            const vxvy = [deltaX / (time || 1), deltaY / (time || 1)];\n            const dir = getDirection(absX, absY, deltaX, deltaY);\n            // if swipe is under delta and we have not started to track a swipe: skip update\n            const delta = typeof props.delta === \"number\"\n                ? props.delta\n                : props.delta[dir.toLowerCase()] ||\n                    defaultProps.delta;\n            if (absX < delta && absY < delta && !state.swiping)\n                return state;\n            const eventData = {\n                absX,\n                absY,\n                deltaX,\n                deltaY,\n                dir,\n                event,\n                first: state.first,\n                initial: state.initial,\n                velocity,\n                vxvy,\n            };\n            // call onSwipeStart if present and is first swipe event\n            eventData.first && props.onSwipeStart && props.onSwipeStart(eventData);\n            // call onSwiping if present\n            props.onSwiping && props.onSwiping(eventData);\n            // track if a swipe is cancelable (handler for swiping or swiped(dir) exists)\n            // so we can call preventDefault if needed\n            let cancelablePageSwipe = false;\n            if (props.onSwiping ||\n                props.onSwiped ||\n                props[`onSwiped${dir}`]) {\n                cancelablePageSwipe = true;\n            }\n            if (cancelablePageSwipe &&\n                props.preventScrollOnSwipe &&\n                props.trackTouch &&\n                event.cancelable) {\n                event.preventDefault();\n            }\n            return Object.assign(Object.assign({}, state), { \n                // first is now always false\n                first: false, eventData, swiping: true });\n        });\n    };\n    const onEnd = (event) => {\n        set((state, props) => {\n            let eventData;\n            if (state.swiping && state.eventData) {\n                // if swipe is less than duration fire swiped callbacks\n                if (event.timeStamp - state.start < props.swipeDuration) {\n                    eventData = Object.assign(Object.assign({}, state.eventData), { event });\n                    props.onSwiped && props.onSwiped(eventData);\n                    const onSwipedDir = props[`onSwiped${eventData.dir}`];\n                    onSwipedDir && onSwipedDir(eventData);\n                }\n            }\n            else {\n                props.onTap && props.onTap({ event });\n            }\n            props.onTouchEndOrOnMouseUp && props.onTouchEndOrOnMouseUp({ event });\n            return Object.assign(Object.assign(Object.assign({}, state), initialState), { eventData });\n        });\n    };\n    const cleanUpMouse = () => {\n        // safe to just call removeEventListener\n        document.removeEventListener(mouseMove, onMove);\n        document.removeEventListener(mouseUp, onUp);\n    };\n    const onUp = (e) => {\n        cleanUpMouse();\n        onEnd(e);\n    };\n    /**\n     * The value of passive on touchMove depends on `preventScrollOnSwipe`:\n     * - true => { passive: false }\n     * - false => { passive: true } // Default\n     *\n     * NOTE: When preventScrollOnSwipe is true, we attempt to call preventDefault to prevent scroll.\n     *\n     * props.touchEventOptions can also be set for all touch event listeners,\n     * but for `touchmove` specifically when `preventScrollOnSwipe` it will\n     * supersede and force passive to false.\n     *\n     */\n    const attachTouch = (el, props) => {\n        let cleanup = () => { };\n        if (el && el.addEventListener) {\n            const baseOptions = Object.assign(Object.assign({}, defaultProps.touchEventOptions), props.touchEventOptions);\n            // attach touch event listeners and handlers\n            const tls = [\n                [touchStart, onStart, baseOptions],\n                // preventScrollOnSwipe option supersedes touchEventOptions.passive\n                [\n                    touchMove,\n                    onMove,\n                    Object.assign(Object.assign({}, baseOptions), (props.preventScrollOnSwipe ? { passive: false } : {})),\n                ],\n                [touchEnd, onEnd, baseOptions],\n            ];\n            tls.forEach(([e, h, o]) => el.addEventListener(e, h, o));\n            // return properly scoped cleanup method for removing listeners, options not required\n            cleanup = () => tls.forEach(([e, h]) => el.removeEventListener(e, h));\n        }\n        return cleanup;\n    };\n    const onRef = (el) => {\n        // \"inline\" ref functions are called twice on render, once with null then again with DOM element\n        // ignore null here\n        if (el === null)\n            return;\n        set((state, props) => {\n            // if the same DOM el as previous just return state\n            if (state.el === el)\n                return state;\n            const addState = {};\n            // if new DOM el clean up old DOM and reset cleanUpTouch\n            if (state.el && state.el !== el && state.cleanUpTouch) {\n                state.cleanUpTouch();\n                addState.cleanUpTouch = void 0;\n            }\n            // only attach if we want to track touch\n            if (props.trackTouch && el) {\n                addState.cleanUpTouch = attachTouch(el, props);\n            }\n            // store event attached DOM el for comparison, clean up, and re-attachment\n            return Object.assign(Object.assign(Object.assign({}, state), { el }), addState);\n        });\n    };\n    // set ref callback to attach touch event listeners\n    const output = {\n        ref: onRef,\n    };\n    // if track mouse attach mouse down listener\n    if (handlerProps.trackMouse) {\n        output.onMouseDown = onStart;\n    }\n    return [output, attachTouch];\n}\nfunction updateTransientState(state, props, previousProps, attachTouch) {\n    // if trackTouch is off or there is no el, then remove handlers if necessary and exit\n    if (!props.trackTouch || !state.el) {\n        if (state.cleanUpTouch) {\n            state.cleanUpTouch();\n        }\n        return Object.assign(Object.assign({}, state), { cleanUpTouch: undefined });\n    }\n    // trackTouch is on, so if there are no handlers attached, attach them and exit\n    if (!state.cleanUpTouch) {\n        return Object.assign(Object.assign({}, state), { cleanUpTouch: attachTouch(state.el, props) });\n    }\n    // trackTouch is on and handlers are already attached, so if preventScrollOnSwipe changes value,\n    // remove and reattach handlers (this is required to update the passive option when attaching\n    // the handlers)\n    if (props.preventScrollOnSwipe !== previousProps.preventScrollOnSwipe ||\n        props.touchEventOptions.passive !== previousProps.touchEventOptions.passive) {\n        state.cleanUpTouch();\n        return Object.assign(Object.assign({}, state), { cleanUpTouch: attachTouch(state.el, props) });\n    }\n    return state;\n}\nfunction useSwipeable(options) {\n    const { trackMouse } = options;\n    const transientState = React.useRef(Object.assign({}, initialState));\n    const transientProps = React.useRef(Object.assign({}, defaultProps));\n    // track previous rendered props\n    const previousProps = React.useRef(Object.assign({}, transientProps.current));\n    previousProps.current = Object.assign({}, transientProps.current);\n    // update current render props & defaults\n    transientProps.current = Object.assign(Object.assign({}, defaultProps), options);\n    // Force defaults for config properties\n    let defaultKey;\n    for (defaultKey in defaultProps) {\n        if (transientProps.current[defaultKey] === void 0) {\n            transientProps.current[defaultKey] = defaultProps[defaultKey];\n        }\n    }\n    const [handlers, attachTouch] = React.useMemo(() => getHandlers((stateSetter) => (transientState.current = stateSetter(transientState.current, transientProps.current)), { trackMouse }), [trackMouse]);\n    transientState.current = updateTransientState(transientState.current, transientProps.current, previousProps.current, attachTouch);\n    return handlers;\n}\n\nexport { DOWN, LEFT, RIGHT, UP, useSwipeable };\n//# sourceMappingURL=index.js.map\n","import React, { useState, useEffect } from 'react';\n\ninterface LocalImageProps {\n  src: string;\n  alt: string;\n  className?: string;\n  fallbackSrc?: string;\n}\n\n/**\n * Composant qui gère l'affichage des images stockées localement en base64\n * Si l'URL commence par \"local:\", récupère l'image depuis localStorage\n * Sinon, utilise l'URL directement\n * Gère les erreurs et les images manquantes avec une image de secours\n */\n// Fonction utilitaire pour obtenir le chemin de base en fonction de l'environnement\nconst getBasePath = () => {\n  if (typeof window !== 'undefined' && window.location.hostname.includes('github.io')) {\n    return '/1Hall1Artiste'; // Chemin de base sur GitHub Pages\n  }\n  return ''; // Chemin de base en local\n};\n\nexport const LocalImage: React.FC<LocalImageProps> = ({ \n  src, \n  alt, \n  className = '',\n  fallbackSrc = `${getBasePath()}/images/placeholder-image.jpg` \n}) => {\n  const [imageSrc, setImageSrc] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<boolean>(false);\n  const [retryCount, setRetryCount] = useState<number>(0);\n\n  useEffect(() => {\n    const loadImage = () => {\n      setLoading(true);\n      setError(false);\n\n      try {\n        // Vérifier que src existe avant de l'utiliser\n        if (!src) {\n          console.error('LocalImage: src prop is undefined or empty');\n          setError(true);\n          setLoading(false);\n          return;\n        }\n\n        // Si l'URL commence par \"local:\", récupérer l'image depuis localStorage\n        if (src && typeof src === 'string' && src.startsWith('local:')) {\n          const imageId = src.substring(6); // Enlever le préfixe \"local:\"\n          const base64Data = localStorage.getItem(`community_image_${imageId}`);\n          \n          if (base64Data) {\n            setImageSrc(base64Data);\n          } else {\n            console.error(`Image non trouvée dans localStorage: ${imageId}`);\n            // Essayer de récupérer l'image depuis le cache du navigateur si disponible\n            if (caches && 'match' in caches && retryCount === 0) {\n              caches.open('image-cache').then(cache => {\n                cache.match(`community-images/${imageId}`).then(response => {\n                  if (response) {\n                    response.blob().then(blob => {\n                      const objectURL = URL.createObjectURL(blob);\n                      setImageSrc(objectURL);\n                      setRetryCount(prev => prev + 1);\n                    });\n                  } else {\n                    setError(true);\n                  }\n                });\n              }).catch(() => {\n                setError(true);\n              });\n            } else {\n              setError(true);\n            }\n          }\n        } else {\n          // Utiliser l'URL directement\n          setImageSrc(src);\n        }\n      } catch (err) {\n        console.error('Erreur lors du chargement de l\\'image:', err);\n        setError(true);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadImage();\n  }, [src, retryCount]);\n\n  if (loading) {\n    return (\n      <div className={`bg-gray-200 animate-pulse ${className}`}>\n        <span className=\"sr-only\">Chargement...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    // Essayer d'utiliser l'image de secours\n      // Utiliser une URL absolue pour l'image de secours\n      const absoluteFallbackSrc = fallbackSrc.startsWith('/') \n        ? window.location.origin + fallbackSrc\n        : fallbackSrc;\n        \n      return (\n      <img \n        src={absoluteFallbackSrc} \n        alt={alt} \n        className={className} \n        onError={(e) => {\n          // Si même l'image de secours échoue, afficher un placeholder\n          e.currentTarget.style.display = 'none';\n          e.currentTarget.parentElement?.classList.add('bg-gray-200', 'flex', 'items-center', 'justify-center');\n          const span = document.createElement('span');\n          span.className = 'text-sm text-gray-500';\n          span.textContent = 'Image non disponible';\n          e.currentTarget.parentElement?.appendChild(span);\n        }}\n      />\n    );\n  }\n\n  // Utiliser une URL absolue pour l'image de secours\n  const absoluteFallbackSrc = fallbackSrc.startsWith('/') \n    ? window.location.origin + fallbackSrc\n    : fallbackSrc;\n    \n  return (\n    <img \n      src={imageSrc} \n      alt={alt} \n      className={className} \n      onError={(e) => {\n        // En cas d'erreur de chargement, essayer l'image de secours\n        console.log(`Erreur de chargement de l'image, utilisation de l'image de secours`);\n        if (e.currentTarget.src !== absoluteFallbackSrc) {\n          e.currentTarget.src = absoluteFallbackSrc;\n        } else {\n          e.currentTarget.style.display = 'none';\n          e.currentTarget.parentElement?.classList.add('bg-gray-200', 'flex', 'items-center', 'justify-center');\n          const span = document.createElement('span');\n          span.className = 'text-sm text-gray-500';\n          span.textContent = 'Image non disponible';\n          e.currentTarget.parentElement?.appendChild(span);\n        }\n      }}\n    />  \n  );\n};\n","import React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport X from \"lucide-react/dist/esm/icons/x\";\r\nimport Calendar from \"lucide-react/dist/esm/icons/calendar\";\r\nimport MapPin from \"lucide-react/dist/esm/icons/map-pin\";\r\nimport ChevronLeft from \"lucide-react/dist/esm/icons/chevron-left\";\r\nimport ChevronRight from \"lucide-react/dist/esm/icons/chevron-right\";\r\nimport { format } from \"date-fns\";\r\nimport { fr } from \"date-fns/locale\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\n\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { CommunityEntry } from \"../../types/communityTypes\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { LocalImage } from \"./LocalImage\";\r\n\r\ninterface EntryDetailProps {\r\n  entry: CommunityEntry;\r\n  entries: CommunityEntry[];\r\n  currentIndex: number;\r\n  onClose: () => void;\r\n  onNavigate: (index: number) => void;\r\n}\r\n\r\nexport const EntryDetail: React.FC<EntryDetailProps> = ({ entry, entries, currentIndex, onClose, onNavigate }) => {\r\n  // Empêcher le défilement du corps lorsque le modal est ouvert\r\n  React.useEffect(() => {\r\n    document.body.style.overflow = \"hidden\";\r\n    return () => {\r\n      document.body.style.overflow = \"auto\";\r\n    };\r\n  }, []);\r\n\r\n  // Logique de navigation\r\n  const canGoPrevious = currentIndex > 0;\r\n  const canGoNext = currentIndex < entries.length - 1;\r\n\r\n  const handlePrevious = () => {\r\n    if (canGoPrevious) {\r\n      onNavigate(currentIndex - 1);\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (canGoNext) {\r\n      onNavigate(currentIndex + 1);\r\n    }\r\n  };\r\n\r\n  // Configuration du swipe\r\n  const swipeHandlers = useSwipeable({\r\n    onSwipedLeft: () => {\r\n      if (canGoNext) {\r\n        handleNext();\r\n      }\r\n    },\r\n    onSwipedRight: () => {\r\n      if (canGoPrevious) {\r\n        handlePrevious();\r\n      }\r\n    },\r\n    trackMouse: true, // Permet aussi le swipe avec la souris sur desktop\r\n    preventScrollOnSwipe: true, // Empêche le scroll pendant le swipe\r\n    delta: 50, // Distance minimum pour déclencher le swipe\r\n  });\r\n\r\n  // Gestion des touches clavier\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'ArrowLeft' && canGoPrevious) {\r\n        handlePrevious();\r\n      } else if (event.key === 'ArrowRight' && canGoNext) {\r\n        handleNext();\r\n      } else if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [canGoPrevious, canGoNext, onClose]);\r\n\r\n  // Animation pour le modal\r\n  const overlayVariants = {\r\n    hidden: { opacity: 0 },\r\n    visible: { opacity: 1 }\r\n  };\r\n\r\n  const modalVariants = {\r\n    hidden: { opacity: 0, y: 50, scale: 0.95 },\r\n    visible: { opacity: 1, y: 0, scale: 1, transition: { type: \"spring\", damping: 25, stiffness: 300 } }\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        className=\"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4\"\r\n        variants={overlayVariants}\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n        exit=\"hidden\"\r\n        onClick={onClose}\r\n      >\r\n        <motion.div\r\n          className=\"bg-white dark:bg-slate-900 rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col\"\r\n          variants={modalVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"hidden\"\r\n          onClick={(e) => e.stopPropagation()}\r\n          {...swipeHandlers} // Ajouter les handlers de swipe\r\n        >\r\n          {/* En-tête */}\r\n          <div className=\"p-4 border-b flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-medium\">{entry.displayName}</span>\r\n              <span className=\"text-sm text-slate-500\">\r\n                {format(new Date(entry.timestamp), \"d MMMM yyyy\", { locale: fr })}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              {/* Indicateur de position */}\r\n              <span className=\"text-xs text-slate-400 mr-2\">\r\n                {currentIndex + 1} / {entries.length}\r\n              </span>\r\n              \r\n              {/* Boutons de navigation */}\r\n              <Button \r\n                variant=\"ghost\" \r\n                size=\"icon\" \r\n                onClick={handlePrevious}\r\n                disabled={!canGoPrevious}\r\n                className=\"h-8 w-8\"\r\n                title=\"Photo précédente (← ou swipe droite)\"\r\n              >\r\n                <ChevronLeft size={16} />\r\n              </Button>\r\n              <Button \r\n                variant=\"ghost\" \r\n                size=\"icon\" \r\n                onClick={handleNext}\r\n                disabled={!canGoNext}\r\n                className=\"h-8 w-8\"\r\n                title=\"Photo suivante (→ ou swipe gauche)\"\r\n              >\r\n                <ChevronRight size={16} />\r\n              </Button>\r\n              \r\n              {/* Bouton fermer */}\r\n              <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"h-8 w-8\" title=\"Fermer (Échap)\">\r\n                <X size={16} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Contenu */}\r\n          <div className=\"flex-grow overflow-auto\">\r\n            {entry.type === \"photo\" ? (\r\n              <div className=\"flex flex-col\">\r\n                <div className=\"relative\">\r\n                  <LocalImage\r\n                    src={entry.imageUrl}\r\n                    alt={entry.description || \"Photo communautaire\"}\r\n                    className=\"w-full h-auto\"\r\n                  />\r\n                  \r\n                  {/* Indicateurs visuels de swipe sur mobile */}\r\n                  <div className=\"absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-black/20 to-transparent pointer-events-none md:hidden flex items-center justify-start pl-2\">\r\n                    {canGoPrevious && (\r\n                      <ChevronLeft className=\"text-white/60\" size={20} />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-black/20 to-transparent pointer-events-none md:hidden flex items-center justify-end pr-2\">\r\n                    {canGoNext && (\r\n                      <ChevronRight className=\"text-white/60\" size={20} />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {entry.description && (\r\n                  <p className=\"p-4 text-sm\">{entry.description}</p>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4\">\r\n                <p className=\"text-lg\">{entry.content}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Métadonnées */}\r\n            <div className=\"p-4 text-sm text-slate-500 space-y-2\">\r\n              {entry.eventId && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Calendar size={16} />\r\n                  <span>{entry.eventId.replace(/-/g, \" \")}</span>\r\n                </div>\r\n              )}\r\n              {entry.locationId && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin size={16} />\r\n                  <span>{entry.locationId.replace(/-/g, \" \")}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Pied de page avec instructions */}\r\n          <div className=\"p-4 border-t\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm text-slate-500\">\r\n                Partagé le {format(new Date(entry.timestamp), \"d MMMM yyyy à HH:mm\", { locale: fr })}\r\n              </span>\r\n              <span className=\"text-xs text-slate-400 md:hidden\">\r\n                Swipe ← → pour naviguer\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport RefreshCw from 'lucide-react/dist/esm/icons/refresh-cw';\r\n\r\ninterface PullToRefreshProps {\r\n  onRefresh: () => Promise<void>;\r\n  children: React.ReactNode;\r\n  disabled?: boolean;\r\n  threshold?: number; // Distance en px pour déclencher le refresh\r\n}\r\n\r\nexport const PullToRefresh: React.FC<PullToRefreshProps> = ({\r\n  onRefresh,\r\n  children,\r\n  disabled = false,\r\n  threshold = 80\r\n}) => {\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [pullDistance, setPullDistance] = useState(0);\r\n  const [isPulling, setIsPulling] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleRefresh = async () => {\r\n    if (disabled || isRefreshing) return;\r\n    \r\n    setIsRefreshing(true);\r\n    try {\r\n      await onRefresh();\r\n    } finally {\r\n      setIsRefreshing(false);\r\n      setPullDistance(0);\r\n      setIsPulling(false);\r\n    }\r\n  };\r\n\r\n  // Gestion tactile\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    if (disabled || isRefreshing) return;\r\n    \r\n    const container = containerRef.current;\r\n    if (!container || container.scrollTop > 0) return;\r\n    \r\n    setStartY(e.touches[0].clientY);\r\n    setIsPulling(true);\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    if (!isPulling || disabled || isRefreshing) return;\r\n    \r\n    const container = containerRef.current;\r\n    if (!container || container.scrollTop > 0) {\r\n      setIsPulling(false);\r\n      setPullDistance(0);\r\n      return;\r\n    }\r\n    \r\n    const currentY = e.touches[0].clientY;\r\n    const distance = Math.max(0, currentY - startY);\r\n    \r\n    // Résistance progressive\r\n    const resistance = Math.min(distance * 0.5, threshold * 1.5);\r\n    setPullDistance(resistance);\r\n    \r\n    // Empêcher le scroll si on tire vers le bas\r\n    if (distance > 10) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    if (!isPulling || disabled || isRefreshing) return;\r\n    \r\n    if (pullDistance >= threshold) {\r\n      handleRefresh();\r\n    } else {\r\n      setPullDistance(0);\r\n      setIsPulling(false);\r\n    }\r\n  };\r\n\r\n  // Gestion souris (pour desktop)\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (disabled || isRefreshing) return;\r\n    \r\n    const container = containerRef.current;\r\n    if (!container || container.scrollTop > 0) return;\r\n    \r\n    setStartY(e.clientY);\r\n    setIsPulling(true);\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isPulling || disabled || isRefreshing) return;\r\n    \r\n    const container = containerRef.current;\r\n    if (!container || container.scrollTop > 0) {\r\n      setIsPulling(false);\r\n      setPullDistance(0);\r\n      return;\r\n    }\r\n    \r\n    const distance = Math.max(0, e.clientY - startY);\r\n    const resistance = Math.min(distance * 0.3, threshold * 1.5);\r\n    setPullDistance(resistance);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!isPulling || disabled || isRefreshing) return;\r\n    \r\n    if (pullDistance >= threshold) {\r\n      handleRefresh();\r\n    } else {\r\n      setPullDistance(0);\r\n      setIsPulling(false);\r\n    }\r\n  };\r\n\r\n  // Nettoyage des événements souris globaux\r\n  useEffect(() => {\r\n    if (isPulling) {\r\n      const handleGlobalMouseMove = (e: MouseEvent) => {\r\n        if (!isPulling) return;\r\n        const distance = Math.max(0, e.clientY - startY);\r\n        const resistance = Math.min(distance * 0.3, threshold * 1.5);\r\n        setPullDistance(resistance);\r\n      };\r\n\r\n      const handleGlobalMouseUp = () => {\r\n        if (pullDistance >= threshold) {\r\n          handleRefresh();\r\n        } else {\r\n          setPullDistance(0);\r\n          setIsPulling(false);\r\n        }\r\n      };\r\n\r\n      document.addEventListener('mousemove', handleGlobalMouseMove);\r\n      document.addEventListener('mouseup', handleGlobalMouseUp);\r\n\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleGlobalMouseMove);\r\n        document.removeEventListener('mouseup', handleGlobalMouseUp);\r\n      };\r\n    }\r\n  }, [isPulling, startY, pullDistance, threshold]);\r\n\r\n  const shouldTrigger = pullDistance >= threshold;\r\n  const progress = Math.min(pullDistance / threshold, 1);\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"relative h-full overflow-auto\"\r\n      onTouchStart={handleTouchStart}\r\n      onTouchMove={handleTouchMove}\r\n      onTouchEnd={handleTouchEnd}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      style={{\r\n        transform: `translateY(${Math.min(pullDistance * 0.5, 40)}px)`,\r\n        transition: isPulling ? 'none' : 'transform 0.3s ease-out'\r\n      }}\r\n    >\r\n      {/* Indicateur de pull-to-refresh */}\r\n      <AnimatePresence>\r\n        {(isPulling || isRefreshing) && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -50 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -50 }}\r\n            className=\"absolute top-0 left-0 right-0 z-10 flex items-center justify-center py-4\"\r\n            style={{\r\n              transform: `translateY(-${Math.max(0, 60 - pullDistance)}px)`\r\n            }}\r\n          >\r\n            <div className=\"flex items-center gap-2 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg\">\r\n              <RefreshCw \r\n                className={`transition-all duration-200 ${\r\n                  isRefreshing ? 'animate-spin' : ''\r\n                } ${shouldTrigger ? 'text-green-500' : 'text-slate-500'}`}\r\n                size={16}\r\n                style={{\r\n                  transform: `rotate(${progress * 180}deg)`\r\n                }}\r\n              />\r\n              <span className={`text-sm font-medium transition-colors ${\r\n                shouldTrigger ? 'text-green-500' : 'text-slate-500'\r\n              }`}>\r\n                {isRefreshing \r\n                  ? 'Actualisation...' \r\n                  : shouldTrigger \r\n                    ? 'Relâcher pour actualiser' \r\n                    : 'Tirer pour actualiser'\r\n                }\r\n              </span>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Contenu */}\r\n      <div className=\"min-h-full\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../components/ui/tabs\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport Loader2 from \"lucide-react/dist/esm/icons/loader-2\";\r\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\r\nimport MessageSquare from \"lucide-react/dist/esm/icons/message-square\";\r\nimport Filter from \"lucide-react/dist/esm/icons/filter\";\r\nimport { useToast } from \"../components/ui/use-toast\";\r\nimport { BottomNavigation } from \"../components/BottomNavigation\";\r\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\r\n\r\n// Types\r\nimport { CommunityEntry, EntryType } from \"../types/communityTypes\";\r\n\r\n// Services\r\nimport { fetchCommunityEntries } from \"../services/communityServiceBridge\";\r\n\r\n// Composants\r\nimport { PageContainer } from \"../components/PageContainer\";\r\nimport { PageHeader } from \"../components/PageHeader\";\r\nimport { ContributionForm } from \"../components/community/ContributionForm\";\r\nimport { GalleryGrid } from \"../components/community/GalleryGrid\";\r\nimport { EntryDetail } from \"../components/community/EntryDetail\";\r\nimport { PullToRefresh } from \"../components/community/PullToRefresh\";\r\n\r\nconst CommunityGallery: React.FC = () => {\r\n  const { toast } = useToast();\r\n  const location = useLocation();\r\n  const [entries, setEntries] = useState<CommunityEntry[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [filter, setFilter] = useState<\"all\" | \"photo\" | \"testimonial\">(\"all\");\r\n  const [activeTab, setActiveTab] = useState<\"gallery\" | \"contribute\">(\"gallery\");\r\n  const [lastKnownCount, setLastKnownCount] = useState<number>(0);\r\n  const [selectedEntry, setSelectedEntry] = useState<CommunityEntry | null>(null);\r\n  const [selectedIndex, setSelectedIndex] = useState<number>(0);\r\n\r\n  // Vérifier si un onglet est spécifié dans l'URL\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    const tabParam = params.get('tab');\r\n    \r\n    if (tabParam === 'contribute') {\r\n      setActiveTab('contribute');\r\n      // Analytics: user landed directly on contribute tab\r\n      analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'start', source: 'url_param' });\r\n    }\r\n  }, [location]);\r\n\r\n  // Charger les entrées au chargement de la page\r\n  const loadEntries = async (showNewNotification = false) => {\r\n    try {\r\n      setError(null);\r\n      const data = await fetchCommunityEntries();\r\n      \r\n      // Vérifier s'il y a de nouvelles contributions\r\n      if (showNewNotification && lastKnownCount > 0 && data.length > lastKnownCount) {\r\n        const newCount = data.length - lastKnownCount;\r\n        toast({\r\n          title: \"🎉 Nouvelles contributions !\",\r\n          description: `${newCount} nouvelle${newCount > 1 ? 's' : ''} contribution${newCount > 1 ? 's' : ''} ajoutée${newCount > 1 ? 's' : ''}`,\r\n          duration: 5000\r\n        });\r\n      }\r\n      \r\n      setEntries(data);\r\n      setLastKnownCount(data.length);\r\n      \r\n      // Analytics: successful load\r\n      analytics.trackCommunityInteraction(EventAction.VIEW, { \r\n        content_type: 'gallery', \r\n        entries_count: data.length \r\n      });\r\n    } catch (err) {\r\n      console.error('Erreur lors du chargement des entrées:', err);\r\n      setError('Impossible de charger les contributions. Veuillez réessayer.');\r\n      \r\n      // Analytics: load error\r\n      analytics.trackCommunityInteraction(EventAction.VIEW, { \r\n        content_type: 'gallery', \r\n        error: 'load_failed' \r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadEntries();\r\n  }, []);\r\n\r\n  // Vérification périodique des nouvelles contributions (toutes les 2 minutes)\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (activeTab === \"gallery\") {\r\n        console.log('[CommunityGallery] Vérification des nouvelles contributions...');\r\n        loadEntries(true);\r\n      }\r\n    }, 2 * 60 * 1000); // 2 minutes\r\n\r\n    return () => clearInterval(interval);\r\n  }, [activeTab, lastKnownCount]);\r\n\r\n  // Fonction de rafraîchissement pour Pull-to-Refresh\r\n  const handleRefresh = async () => {\r\n    await loadEntries();\r\n    \r\n    // Toast de confirmation\r\n    toast({\r\n      title: \"✅ Galerie actualisée\",\r\n      description: \"Les dernières contributions ont été chargées\",\r\n      duration: 2000\r\n    });\r\n    \r\n    // Analytics: manual refresh\r\n    analytics.trackCommunityInteraction(EventAction.VIEW, { \r\n      content_type: 'gallery', \r\n      action: 'manual_refresh' \r\n    });\r\n  };\r\n\r\n  // Gérer l'ajout d'une nouvelle contribution\r\n  const handleNewContribution = (newEntry: CommunityEntry) => {\r\n    setEntries(prevEntries => [newEntry, ...prevEntries]);\r\n    setActiveTab(\"gallery\");\r\n    \r\n    // Toast de succès\r\n    toast({\r\n      title: \"🎉 Contribution envoyée !\",\r\n      description: \"Votre contribution sera visible dans quelques minutes\",\r\n      duration: 4000\r\n    });\r\n    \r\n    // Analytics: new contribution\r\n    analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { \r\n      stage: 'completed', \r\n      content_type: newEntry.type \r\n    });\r\n  };\r\n\r\n  // Filtrer les entrées selon le filtre actuel\r\n  const filteredEntries = entries.filter(entry => {\r\n    // Exclure les entrées rejetées (supprimées par l'admin)\r\n    if (entry.moderation?.status === 'rejected') {\r\n      return false;\r\n    }\r\n    \r\n    // Filtrer par type\r\n    if (filter === \"all\") return true;\r\n    return entry.type === filter;\r\n  });\r\n\r\n  return (\r\n    <PageContainer>\r\n      <PageHeader \r\n        title=\"Galerie Communautaire\" \r\n        subtitle=\"Partagez vos moments et découvrez ceux des autres\"\r\n      />\r\n      \r\n      <motion.div\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n        className=\"flex flex-col h-full pb-32\" // Augmentation du padding-bottom pour le menu\r\n      >\r\n        <Tabs \r\n          value={activeTab} \r\n          onValueChange={(value) => {\r\n            setActiveTab(value as \"gallery\" | \"contribute\");\r\n            if (value === 'contribute') {\r\n              analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'start', source: 'tab_click' });\r\n            }\r\n          }}\r\n          className=\"w-full\"\r\n        >\r\n          <TabsList className=\"grid w-full grid-cols-2 mb-4\">\r\n            <TabsTrigger value=\"gallery\" className=\"flex items-center gap-2\">\r\n              <Camera size={16} />\r\n              <span>Galerie</span>\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"contribute\" className=\"flex items-center gap-2\">\r\n              <MessageSquare size={16} />\r\n              <span>Contribuer</span>\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"gallery\" className=\"h-full\">\r\n            <PullToRefresh \r\n              onRefresh={handleRefresh}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center justify-center h-64\">\r\n                  <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n                </div>\r\n              ) : error ? (\r\n                <div className=\"flex flex-col items-center justify-center h-64 text-center\">\r\n                  <p className=\"text-red-500 mb-4\">{error}</p>\r\n                  <Button onClick={() => window.location.reload()}>Réessayer</Button>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Filtres */}\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Filter size={16} />\r\n                      <span className=\"text-sm font-medium\">Filtrer:</span>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button \r\n                        variant={filter === \"all\" ? \"default\" : \"outline\"} \r\n                        size=\"sm\" \r\n                        onClick={() => { setFilter(\"all\"); analytics.trackCommunityInteraction(EventAction.FILTER, { filter: 'all' }); }}\r\n                      >\r\n                        Tous\r\n                      </Button>\r\n                      <Button \r\n                        variant={filter === \"photo\" ? \"default\" : \"outline\"} \r\n                        size=\"sm\" \r\n                        onClick={() => { setFilter(\"photo\"); analytics.trackCommunityInteraction(EventAction.FILTER, { filter: 'photo' }); }}\r\n                      >\r\n                        Photos\r\n                      </Button>\r\n                      <Button \r\n                        variant={filter === \"testimonial\" ? \"default\" : \"outline\"} \r\n                        size=\"sm\" \r\n                        onClick={() => { setFilter(\"testimonial\"); analytics.trackCommunityInteraction(EventAction.FILTER, { filter: 'testimonial' }); }}\r\n                      >\r\n                        Témoignages\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Grille de la galerie */}\r\n                  {filteredEntries.length > 0 ? (\r\n                    <GalleryGrid \r\n                      entries={filteredEntries} \r\n                      onEntryClick={(entry) => { \r\n                        const index = filteredEntries.findIndex(e => e.id === entry.id);\r\n                        setSelectedIndex(index);\r\n                        setSelectedEntry(entry);\r\n                        analytics.trackCommunityInteraction(EventAction.VIEW, { content_type: 'entry', entry_id: entry.id });\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    <div className=\"flex flex-col items-center justify-center h-64 text-center\">\r\n                      <p className=\"text-gray-500 mb-4\">Aucune contribution dans cette catégorie</p>\r\n                      <Button onClick={() => { analytics.trackCommunityInteraction(EventAction.CONTRIBUTION, { stage: 'start', source: 'empty_state' }); setActiveTab(\"contribute\"); }}>Soyez le premier à contribuer</Button>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </PullToRefresh>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"contribute\" className=\"h-full\">\r\n            <ContributionForm onSubmit={handleNewContribution} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </motion.div>\r\n\r\n      {/* Modal de détail d'une entrée */}\r\n      {selectedEntry && (\r\n        <EntryDetail \r\n          entry={selectedEntry}\r\n          entries={filteredEntries}\r\n          currentIndex={selectedIndex}\r\n          onClose={() => setSelectedEntry(null)}\r\n          onNavigate={(index) => {\r\n            setSelectedIndex(index);\r\n            setSelectedEntry(filteredEntries[index]);\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Menu de navigation du bas */}\r\n      <BottomNavigation />\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default CommunityGallery;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useSwipeable } from \"react-swipeable\";\nimport { Button } from \"@/components/ui/button\";\nimport { AnimatedPageTransition } from \"@/components/AnimatedPageTransition\";\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\n\ninterface HistoricalPhoto {\n  id: string;\n  path: string;\n  loaded?: boolean;\n}\n\nconst HistoricalGallery: React.FC = () => {\n  const navigate = useNavigate();\n  const [photos, setPhotos] = useState<HistoricalPhoto[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedPhoto, setSelectedPhoto] = useState<HistoricalPhoto | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number>(-1);\n\n  // Fonction pour charger les photos avec lazy loading natif\n  const loadPhotos = useCallback(async () => {\n    try {\n      // Créer un tableau pour stocker les chemins des photos\n      const photoList: HistoricalPhoto[] = [];\n      \n      // Déterminer le préfixe de base en fonction de l'environnement\n      const basePath = window.location.hostname.includes('github.io')\n        ? '/1Hall1Artiste/images/historical'\n        : '/images/historical';\n      \n      // Ajouter les photos du dossier historical (151 photos connues)\n      for (let i = 1; i <= 151; i++) {\n        photoList.push({\n          id: `photos-${i}`,\n          path: `${basePath}/photos-${i}.jpg`, // Extension par défaut, le navigateur gère les erreurs\n          loaded: false\n        });\n      }\n      \n      console.log(`[HistoricalGallery] ${photoList.length} photos chargées`);\n      setPhotos(photoList);\n      setLoading(false);\n      \n      // Tracker l'ouverture de la galerie\n      analytics.trackFeatureUse('historical_gallery', {\n        photo_count: photoList.length,\n        timestamp: new Date().toISOString()\n      });\n      \n    } catch (error) {\n      console.error('Erreur lors du chargement des photos:', error);\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadPhotos();\n  }, [loadPhotos]);\n\n  // Gérer les erreurs de chargement d'image\n  const handleImageError = (index: number) => {\n    // Essayer différents formats d'image\n    setPhotos(prevPhotos => {\n      const updatedPhotos = [...prevPhotos];\n      const currentPath = updatedPhotos[index].path;\n      \n      // Déterminer le préfixe de base en fonction de l'environnement\n      const baseDir = window.location.hostname.includes('github.io')\n        ? '/1Hall1Artiste/images/historical'\n        : '/images/historical';\n      \n      const basePath = `${baseDir}/photos-${index + 1}`;\n      \n      // Séquence de formats à essayer\n      if (currentPath.endsWith('.jpg')) {\n        // Si .jpg échoue, essayer .jpeg\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: `${basePath}.jpeg`\n        };\n      } else if (currentPath.endsWith('.jpeg')) {\n        // Si .jpeg échoue, essayer .png\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: `${basePath}.png`\n        };\n      } else if (currentPath.endsWith('.png')) {\n        // Si .png échoue, essayer .JPG (majuscules)\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: `${basePath}.JPG`\n        };\n      } else if (currentPath.endsWith('.JPG')) {\n        // Si .JPG échoue, essayer .JPEG (majuscules)\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: `${basePath}.JPEG`\n        };\n      } else if (currentPath.endsWith('.JPEG')) {\n        // Si .JPEG échoue, essayer .PNG (majuscules)\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: `${basePath}.PNG`\n        };\n      } else if (currentPath.endsWith('.PNG')) {\n        // Si toutes les tentatives échouent, utiliser le placeholder\n        updatedPhotos[index] = {\n          ...updatedPhotos[index],\n          path: '/placeholder.svg'\n        };\n      }\n      \n      return updatedPhotos;\n    });\n  };\n\n  // Ouvrir la modal de photo\n  const openPhotoModal = (photo: HistoricalPhoto, index: number) => {\n    setSelectedPhoto(photo);\n    setSelectedIndex(index);\n    \n    // Tracker la visualisation de la photo\n    analytics.trackContentInteraction(EventAction.VIEW, 'historical_photo', photo.id, {\n      photo_index: index,\n      timestamp: new Date().toISOString()\n    });\n  };\n\n  // Fermer la modal de photo\n  const closePhotoModal = () => {\n    setSelectedPhoto(null);\n    setSelectedIndex(-1);\n  };\n\n  // Navigation dans la modal\n  const navigatePhoto = (direction: 'prev' | 'next') => {\n    if (selectedIndex === -1) return;\n    \n    let newIndex = selectedIndex;\n    if (direction === 'prev') {\n      newIndex = selectedIndex > 0 ? selectedIndex - 1 : photos.length - 1;\n    } else {\n      newIndex = selectedIndex < photos.length - 1 ? selectedIndex + 1 : 0;\n    }\n    \n    setSelectedIndex(newIndex);\n    setSelectedPhoto(photos[newIndex]);\n  };\n\n  // Gérer les touches du clavier\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (!selectedPhoto) return;\n      \n      switch (e.key) {\n        case 'Escape':\n          closePhotoModal();\n          break;\n        case 'ArrowLeft':\n          navigatePhoto('prev');\n          break;\n        case 'ArrowRight':\n          navigatePhoto('next');\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [selectedPhoto, selectedIndex]);\n\n  // Animation pour les éléments de la grille\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: (i: number) => ({\n      opacity: 1,\n      y: 0,\n      transition: {\n        delay: i * 0.02,\n        duration: 0.3\n      }\n    })\n  };\n\n  const handlers = useSwipeable({\n    onSwipedLeft: () => {\n      if (selectedPhoto) {\n        navigatePhoto('next');\n      }\n    },\n    onSwipedRight: () => {\n      if (selectedPhoto) {\n        navigatePhoto('prev');\n      }\n    },\n    trackMouse: true, // Permet le swipe avec la souris sur desktop\n    preventScrollOnSwipe: true, // Empêche le scroll pendant le swipe\n    delta: 50, // Distance minimum pour déclencher le swipe (50px)\n    swipeDuration: 500, // Durée maximum du swipe (500ms)\n  });\n\n  return (\n    <AnimatedPageTransition>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n        {/* Header */}\n        <div className=\"sticky top-0 z-40 bg-white/80 backdrop-blur-sm border-b border-slate-200\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\" \n                  onClick={() => navigate(-1)}\n                  className=\"rounded-full\"\n                >\n                  ←\n                  <span className=\"sr-only\">Retour</span>\n                </Button>\n                <div>\n                  <h1 className=\"text-2xl font-bold text-slate-900\">Galerie Historique</h1>\n                  <p className=\"text-slate-600\">Photos d'époque de l'Île Feydeau</p>\n                </div>\n              </div>\n              <div className=\"text-sm text-slate-500\">\n                {photos.length} photos\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Contenu principal */}\n        <div className=\"container mx-auto px-4 py-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center min-h-96\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600\"></div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              {photos.map((photo, index) => (\n                <motion.div\n                  key={photo.id}\n                  custom={index}\n                  variants={itemVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  className=\"relative aspect-square rounded-lg overflow-hidden cursor-pointer group\"\n                  onClick={() => openPhotoModal(photo, index)}\n                >\n                  <img\n                    src={photo.path} \n                    alt={`Photo historique ${index + 1}`}\n                    className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110\"\n                    loading={index < 8 ? \"eager\" : \"lazy\"} // Native lazy loading\n                    onLoad={() => {\n                      setPhotos(prev => prev.map(p => \n                        p.id === photo.id ? { ...p, loaded: true } : p\n                      ));\n                    }}\n                    onError={(e) => {\n                      console.warn(`Erreur chargement image ${photo.path}`);\n                      // Si l'image n'existe pas, on cache l'élément\n                      const target = e.target as HTMLImageElement;\n                      target.style.display = 'none';\n                      // Ou on peut masquer tout le container\n                      const container = target.closest('.aspect-square');\n                      if (container) {\n                        (container as HTMLElement).style.display = 'none';\n                      }\n                    }}\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2\">\n                    <span className=\"text-white text-xs font-medium\">\n                      Photo {index + 1}\n                    </span>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Modal de visualisation plein écran */}\n        <AnimatePresence>\n          {selectedPhoto && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"fixed inset-0 z-50 bg-black/90 flex items-center justify-center\"\n              onClick={closePhotoModal}\n              {...handlers}\n            >\n              {/* Bouton fermer */}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute top-4 right-4 z-10 text-white hover:bg-white/20 rounded-full\"\n                onClick={closePhotoModal}\n              >\n                <span className=\"sr-only\">Fermer</span>\n                <span className=\"text-2xl\">&times;</span>\n              </Button>\n\n              {/* Boutons de navigation */}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  navigatePhoto('prev');\n                }}\n                title=\"Photo précédente (← ou swipe droite)\"\n              >\n                ←\n              </Button>\n\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 rounded-full\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  navigatePhoto('next');\n                }}\n                title=\"Photo suivante (→ ou swipe gauche)\"\n              >\n                →\n              </Button>\n\n              {/* Indicateur de position */}\n              <div className=\"absolute top-4 left-1/2 -translate-x-1/2 z-10 text-white text-sm bg-black/50 px-3 py-1 rounded-full\">\n                {selectedIndex + 1} / {photos.length}\n              </div>\n\n              {/* Instructions swipe sur mobile */}\n              <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 text-white/70 text-xs bg-black/50 px-3 py-1 rounded-full md:hidden\">\n                Swipe ← → pour naviguer\n              </div>\n\n              {/* Image */}\n              <motion.img\n                key={selectedPhoto.id}\n                initial={{ scale: 0.8, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                exit={{ scale: 0.8, opacity: 0 }}\n                src={selectedPhoto.path}\n                alt={`Photo historique ${selectedIndex + 1}`}\n                className=\"max-h-full max-w-full object-contain\"\n                onClick={(e) => e.stopPropagation()}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </AnimatedPageTransition>\n  );\n};\n\nexport default HistoricalGallery;\n","import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ArrowLeft } from \"lucide-react\";\nimport Camera from \"lucide-react/dist/esm/icons/camera\";\nimport History from \"lucide-react/dist/esm/icons/history\";\nimport { Button } from \"@/components/ui/button\";\nimport { AnimatedPageTransition } from \"@/components/AnimatedPageTransition\";\nimport { analytics, EventAction } from \"@/services/firebaseAnalytics\";\nimport { BottomNavigation } from \"@/components/BottomNavigation\";\n\nconst Galleries: React.FC = () => {\n  const navigate = useNavigate();\n\n  const handleGalleryClick = (galleryType: string) => {\n    // Tracker l'événement de clic sur une galerie\n    analytics.trackContentInteraction(EventAction.VIEW, 'gallery', galleryType, {\n      gallery_type: galleryType,\n      timestamp: new Date().toISOString()\n    });\n\n    // Naviguer vers la galerie sélectionnée\n    navigate(`/${galleryType}`);\n  };\n\n  return (\n    <AnimatedPageTransition>\n      <div className=\"min-h-screen bg-white flex flex-col\">\n        {/* Header avec titre et bouton retour */}\n        <div className=\"sticky top-0 z-10 bg-white shadow-sm\">\n          <div className=\"flex items-center h-16 px-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              className=\"mr-2\" \n              onClick={() => navigate(-1)}\n            >\n              <ArrowLeft className=\"h-6 w-6\" />\n              <span className=\"sr-only\">Retour</span>\n            </Button>\n            <h1 className=\"text-xl font-semibold\">Galeries</h1>\n          </div>\n        </div>\n\n        {/* Contenu principal */}\n        <div className=\"flex-1 p-4 pb-20\"> {/* Added pb-20 to provide space for the bottom navigation */}\n          <div className=\"grid grid-cols-1 gap-4\">\n            {/* Galerie de la communauté */}\n            <div \n              className=\"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => handleGalleryClick(\"community\")}\n            >\n              <div className=\"relative h-40 bg-gray-100\">\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <Camera className=\"h-12 w-12 text-gray-400\" />\n                </div>\n              </div>\n              <div className=\"p-4\">\n                <h2 className=\"text-lg font-medium\">Photos de la communauté</h2>\n                <p className=\"text-gray-600 mt-1\">\n                  Découvrez les photos partagées par la communauté de l'Île Feydeau\n                </p>\n              </div>\n            </div>\n\n            {/* Galerie historique */}\n            <div \n              className=\"bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => handleGalleryClick(\"historical\")}\n            >\n              <div className=\"relative h-40 bg-gray-100\">\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <History className=\"h-12 w-12 text-gray-400\" />\n                </div>\n              </div>\n              <div className=\"p-4\">\n                <h2 className=\"text-lg font-medium\">Photos historiques</h2>\n                <p className=\"text-gray-600 mt-1\">\n                  Explorez notre collection de 165 photos historiques de l'Île Feydeau\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Bottom Navigation */}\n        <BottomNavigation />\n      </div>\n    </AnimatedPageTransition>\n  );\n};\n\nexport default Galleries;\n","import { getAnalytics, setAnalyticsCollectionEnabled, isSupported, setUserId } from \"firebase/analytics\";\nimport { getFirebaseApp } from \"../services/firebaseConfig\";\n\n/**\n * Active le mode debug pour Firebase Analytics\n * À utiliser uniquement en développement\n */\nexport const initFirebaseDebug = async () => {\n  try {\n    // Vérifier si Analytics est supporté\n    const supported = await isSupported();\n    if (!supported) {\n      console.warn(\"[FirebaseDebug] Analytics n'est pas supporté dans cet environnement\");\n      return;\n    }\n\n    // Obtenir l'instance Analytics\n    const app = getFirebaseApp();\n    if (!app) {\n      console.warn('Firebase non initialisé, impossible d\\'utiliser Analytics');\n      return;\n    }\n    const analytics = getAnalytics(app);\n    \n    // Activer la collecte de données\n    setAnalyticsCollectionEnabled(analytics, true);\n    \n    // Activer le mode debug via les méthodes disponibles\n    // Note: Firebase Analytics n'a pas de méthode setDebugMode officielle\n    // On utilise d'autres approches pour activer le debug\n    \n    // Définir un ID utilisateur pour le debug\n    const debugUserId = `debug-user-${Date.now()}`;\n    setUserId(analytics, debugUserId);\n    \n    // Ajouter les paramètres de requête pour activer le mode debug\n    const url = new URL(window.location.href);\n    url.searchParams.set('firebase_debug', 'true');\n    url.searchParams.set('debug_mode', 'true');\n    url.searchParams.set('debug_view', 'true');\n    window.history.replaceState({}, document.title, url.toString());\n    \n    // Définir la variable globale pour le debug Firebase\n    // @ts-ignore - Cette propriété n'est pas dans les types mais est utilisée par Firebase\n    window.self.FIREBASE_ANALYTICS_DEBUG_MODE = true;\n    \n    console.log(\"[FirebaseDebug] Mode debug activé pour Firebase Analytics\");\n    console.log(`[FirebaseDebug] ID utilisateur de debug: ${debugUserId}`);\n    \n    // Afficher les instructions pour voir les événements dans DebugView\n    console.info(\n      \"%c[FirebaseDebug] Pour voir les événements dans DebugView: %c\\n\" +\n      \"1. Ouvrez la console Firebase\\n\" +\n      \"2. Allez dans Analytics > DebugView\\n\" +\n      \"3. Sélectionnez votre appareil de debug\",\n      \"color: #4285F4; font-weight: bold;\", \"color: #000;\"\n    );\n  } catch (error) {\n    console.error(\"[FirebaseDebug] Erreur lors de l'initialisation du mode debug:\", error);\n  }\n};\n\n/**\n * Force l'envoi d'un événement de test pour vérifier que DebugView fonctionne\n */\nexport const sendTestEvent = () => {\n  try {\n    const app = getFirebaseApp();\n    if (!app) {\n      console.warn('Firebase non initialisé, impossible d\\'utiliser Analytics');\n      return;\n    }\n    const analytics = getAnalytics(app);\n    if (!analytics) {\n      console.warn(\"[FirebaseDebug] Analytics non disponible pour l'événement de test\");\n      return;\n    }\n    \n    // Importer logEvent dynamiquement pour éviter les erreurs de compilation\n    import('firebase/analytics').then(({ logEvent }) => {\n      logEvent(analytics, 'test_debug_event', {\n        timestamp: new Date().toISOString(),\n        debug: true\n      });\n      console.log(\"[FirebaseDebug] Événement de test envoyé\");\n    });\n  } catch (error) {\n    console.error(\"[FirebaseDebug] Erreur lors de l'envoi de l'événement de test:\", error);\n  }\n};\n","/**\n * Utilitaire pour activer le mode debug de Google Analytics\n * Utilise l'API gtag directement pour forcer le mode debug\n */\n\n// Définir gtag comme une fonction globale\ndeclare global {\n  interface Window {\n    gtag: (...args: any[]) => void;\n    dataLayer: any[];\n  }\n}\n\n/**\n * Initialise le mode debug pour Google Analytics\n */\nexport const initGtagDebug = () => {\n  try {\n    // Initialiser dataLayer si nécessaire\n    window.dataLayer = window.dataLayer || [];\n    \n    // Définir la fonction gtag\n    window.gtag = function() {\n      window.dataLayer.push(arguments);\n    };\n    \n    // Activer le mode debug\n    window.gtag('config', 'G-D6K43TLW5Y', {\n      debug_mode: true,\n      send_page_view: false // Ne pas envoyer de page view automatiquement\n    });\n    \n    console.log('[GtagDebug] Mode debug activé pour Google Analytics');\n    \n    // Ajouter le script de debug\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = `https://www.googletagmanager.com/gtag/js?id=G-D6K43TLW5Y&debug=1`;\n    document.head.appendChild(script);\n    \n    // Forcer les paramètres d'URL pour le debug\n    const url = new URL(window.location.href);\n    url.searchParams.set('gtm_debug', 'x');\n    url.searchParams.set('gtm_debug_session', 'x');\n    window.history.replaceState({}, document.title, url.toString());\n    \n  } catch (error) {\n    console.error('[GtagDebug] Erreur lors de l\\'initialisation du mode debug:', error);\n  }\n};\n\n/**\n * Envoie un événement de test via gtag\n */\nexport const sendGtagTestEvent = () => {\n  try {\n    if (!window.gtag) {\n      console.warn('[GtagDebug] gtag n\\'est pas initialisé');\n      return;\n    }\n    \n    // Envoyer un événement de test\n    window.gtag('event', 'test_event', {\n      event_category: 'debug',\n      event_label: 'test_label',\n      debug_mode: true,\n      timestamp: new Date().toISOString()\n    });\n    \n    console.log('[GtagDebug] Événement de test envoyé via gtag');\n  } catch (error) {\n    console.error('[GtagDebug] Erreur lors de l\\'envoi de l\\'événement de test:', error);\n  }\n};\n","/**\n * Utilitaire de diagnostic pour Firebase Analytics\n * Permet de vérifier si la configuration est correcte et si les événements peuvent être envoyés\n */\n\nimport { getFirebaseAnalytics } from '../services/firebaseConfig';\nimport { getFirebaseApp } from '../services/firebaseConfig';\nimport { getAnalytics, isSupported, setAnalyticsCollectionEnabled } from 'firebase/analytics';\n\ninterface DiagnosticResult {\n  success: boolean;\n  message: string;\n  details?: any;\n}\n\n/**\n * Vérifie si Firebase Analytics est correctement configuré\n */\nexport const runAnalyticsDiagnostics = async (): Promise<DiagnosticResult[]> => {\n  const results: DiagnosticResult[] = [];\n  \n  try {\n    // 1. Vérifier si Analytics est supporté dans cet environnement\n    const supported = await isSupported();\n    results.push({\n      success: supported,\n      message: supported \n        ? \"Firebase Analytics est supporté dans cet environnement\" \n        : \"Firebase Analytics n'est PAS supporté dans cet environnement\"\n    });\n    \n    if (!supported) {\n      return results;\n    }\n    \n    // 2. Vérifier si Firebase est initialisé\n    const app = getFirebaseApp();\n    const isFirebaseInitialized = !!app;\n    results.push({\n      success: isFirebaseInitialized,\n      message: isFirebaseInitialized \n        ? \"Firebase est correctement initialisé\" \n        : \"Firebase n'est PAS initialisé\"\n    });\n    \n    if (!isFirebaseInitialized) {\n      return results;\n    }\n    \n    // 3. Vérifier la configuration Firebase\n    const config = app ? app.options : {};\n    const hasMeasurementId = !!config.measurementId;\n    results.push({\n      success: hasMeasurementId,\n      message: hasMeasurementId \n        ? \"MeasurementId est configuré\" \n        : \"MeasurementId est MANQUANT dans la configuration\",\n      details: {\n        measurementId: config.measurementId || \"Non défini\",\n        apiKey: config.apiKey ? \"Configuré\" : \"Non configuré\",\n        projectId: config.projectId || \"Non défini\"\n      }\n    });\n    \n    // 4. Vérifier si Analytics peut être initialisé\n    let analytics = null;\n    try {\n      if (app) {\n        analytics = getAnalytics(app);\n      } else {\n        console.warn('Firebase non initialisé, impossible d\\'utiliser Analytics');\n      }\n      results.push({\n        success: !!analytics,\n        message: !!analytics \n          ? \"Analytics a été initialisé avec succès\" \n          : \"Échec de l'initialisation d'Analytics\"\n      });\n    } catch (error) {\n      results.push({\n        success: false,\n        message: \"Erreur lors de l'initialisation d'Analytics\",\n        details: { error: error instanceof Error ? error.message : String(error) }\n      });\n      return results;\n    }\n    \n    // 5. Vérifier les paramètres de debug dans l'URL\n    const url = new URL(window.location.href);\n    const hasFirebaseDebug = url.searchParams.has('firebase_debug');\n    const hasDebugMode = url.searchParams.has('debug_mode');\n    const hasGtmDebug = url.searchParams.has('gtm_debug');\n    \n    results.push({\n      success: hasFirebaseDebug || hasDebugMode || hasGtmDebug,\n      message: (hasFirebaseDebug || hasDebugMode || hasGtmDebug)\n        ? \"Paramètres de debug détectés dans l'URL\" \n        : \"Aucun paramètre de debug dans l'URL\",\n      details: {\n        firebase_debug: hasFirebaseDebug ? \"Présent\" : \"Absent\",\n        debug_mode: hasDebugMode ? \"Présent\" : \"Absent\",\n        gtm_debug: hasGtmDebug ? \"Présent\" : \"Absent\"\n      }\n    });\n    \n    // 6. Vérifier si la collecte de données est activée\n    try {\n      // Activer la collecte pour le test\n      setAnalyticsCollectionEnabled(analytics, true);\n      results.push({\n        success: true,\n        message: \"La collecte de données Analytics est activée\"\n      });\n    } catch (error) {\n      results.push({\n        success: false,\n        message: \"Erreur lors de l'activation de la collecte de données\",\n        details: { error: error instanceof Error ? error.message : String(error) }\n      });\n    }\n    \n    // 7. Vérifier si window.gtag est disponible (pour le mode debug)\n    const hasGtag = typeof window.gtag === 'function';\n    results.push({\n      success: hasGtag,\n      message: hasGtag \n        ? \"La fonction gtag est disponible\" \n        : \"La fonction gtag n'est PAS disponible\"\n    });\n    \n    // 8. Vérifier les bloqueurs potentiels\n    const potentialBlockers = checkForBlockers();\n    results.push({\n      success: potentialBlockers.length === 0,\n      message: potentialBlockers.length === 0\n        ? \"Aucun bloqueur potentiel détecté\"\n        : `${potentialBlockers.length} bloqueur(s) potentiel(s) détecté(s)`,\n      details: { blockers: potentialBlockers }\n    });\n    \n  } catch (error) {\n    results.push({\n      success: false,\n      message: \"Erreur lors du diagnostic\",\n      details: { error: error instanceof Error ? error.message : String(error) }\n    });\n  }\n  \n  return results;\n};\n\n/**\n * Vérifie la présence potentielle de bloqueurs\n */\nfunction checkForBlockers(): string[] {\n  const blockers: string[] = [];\n  \n  // Vérifier si des extensions de blocage courantes sont détectées\n  if (document.getElementById('adblock-detector') || \n      document.getElementById('ublock-detector') ||\n      document.getElementById('adblock-notice')) {\n    blockers.push(\"Bloqueur de publicités détecté\");\n  }\n  \n  // Vérifier si les cookies sont bloqués\n  try {\n    document.cookie = \"testcookie=1; SameSite=Lax; Secure\";\n    if (document.cookie.indexOf(\"testcookie=\") === -1) {\n      blockers.push(\"Les cookies sont bloqués\");\n    }\n  } catch (e) {\n    blockers.push(\"Erreur lors du test des cookies\");\n  }\n  \n  // Vérifier si localStorage est disponible\n  try {\n    localStorage.setItem('test', 'test');\n    localStorage.removeItem('test');\n  } catch (e) {\n    blockers.push(\"localStorage n'est pas disponible\");\n  }\n  \n  // Vérifier si le navigateur est en mode privé/incognito (peut affecter certains trackers)\n  // Note: Ces API sont spécifiques à certains navigateurs et nécessitent des types personnalisés\n  interface FileSystem {\n    root: any;\n  }\n  \n  interface FileError {\n    code: number;\n  }\n  \n  type RequestFileSystemCallback = (fs: FileSystem) => void;\n  type ErrorCallback = (err: FileError) => void;\n  \n  interface RequestFileSystemFunction {\n    (type: number, size: number, successCallback: RequestFileSystemCallback, errorCallback?: ErrorCallback): void;\n  }\n  \n  // Définir les constantes manquantes\n  const TEMPORARY = 0;\n  \n  // Utiliser des cast de type pour accéder aux API non standard\n  const requestFS = ((window as any).RequestFileSystem || (window as any).webkitRequestFileSystem) as RequestFileSystemFunction | undefined;\n  \n  if (requestFS) {\n    try {\n      requestFS(TEMPORARY, 100, \n        () => {}, // Rien à faire si ce n'est pas en mode privé\n        () => { blockers.push(\"Navigation privée détectée\"); }\n      );\n    } catch (e) {\n      // Ignorer les erreurs, cette vérification est optionnelle\n    }\n  }\n  \n  return blockers;\n}\n\n/**\n * Exécute le diagnostic et affiche les résultats dans la console\n */\nexport const runAndLogDiagnostics = async () => {\n  console.group('🔍 Diagnostic Firebase Analytics');\n  console.log('Démarrage du diagnostic...');\n  \n  const results = await runAnalyticsDiagnostics();\n  \n  let successCount = 0;\n  let failureCount = 0;\n  \n  results.forEach((result, index) => {\n    if (result.success) {\n      successCount++;\n      console.log(`✅ ${index + 1}. ${result.message}`);\n    } else {\n      failureCount++;\n      console.warn(`❌ ${index + 1}. ${result.message}`);\n    }\n    \n    if (result.details) {\n      console.log('  Détails:', result.details);\n    }\n  });\n  \n  console.log(`\\nRésultat: ${successCount} succès, ${failureCount} problèmes`);\n  \n  if (failureCount > 0) {\n    console.log('\\nRecommandations:');\n    console.log('1. Vérifiez que la configuration Firebase est correcte');\n    console.log('2. Assurez-vous que les paramètres de debug sont présents dans l\\'URL');\n    console.log('3. Désactivez les bloqueurs de publicités');\n    console.log('4. Utilisez Chrome pour les tests');\n    console.log('5. Vérifiez que le measurementId correspond à votre projet Google Analytics');\n  }\n  \n  console.groupEnd();\n  \n  return {\n    results,\n    summary: {\n      total: results.length,\n      success: successCount,\n      failure: failureCount\n    }\n  };\n};\n","import React, { useState, useEffect } from 'react';\nimport { analytics } from '../services/firebaseAnalytics';\nimport { EventCategory, EventAction } from '../services/firebaseAnalytics';\nimport { sendTestEvent } from './firebaseDebug';\nimport { sendGtagTestEvent } from './gtag-debug';\nimport { runAndLogDiagnostics } from './analytics-diagnostics';\n\n/**\n * Composant de débogage pour Firebase Analytics\n * Permet d'envoyer des événements de test pour vérifier le fonctionnement de DebugView\n */\nexport default function AnalyticsDebugger() {\n  const [eventLog, setEventLog] = useState<string[]>([]);\n  const [debugMode, setDebugMode] = useState<string>('firebase'); // 'firebase' ou 'gtag'\n  const [urlParams, setUrlParams] = useState<string>('');\n  const [diagnosticResults, setDiagnosticResults] = useState<any>(null);\n  const [runningDiagnostic, setRunningDiagnostic] = useState<boolean>(false);\n  \n  // Effet pour vérifier les paramètres d'URL au chargement\n  useEffect(() => {\n    const url = new URL(window.location.href);\n    const params = [];\n    \n    if (url.searchParams.has('firebase_debug')) {\n      params.push('firebase_debug=true');\n    }\n    \n    if (url.searchParams.has('gtm_debug')) {\n      params.push('gtm_debug=x');\n    }\n    \n    if (url.searchParams.has('debug_mode')) {\n      params.push('debug_mode=true');\n    }\n    \n    setUrlParams(params.join(', ') || 'Aucun paramètre de debug détecté');\n    \n    // Ajouter un message initial au log\n    logEvent('Debugger initialisé');\n  }, []);\n  \n  const logEvent = (message: string) => {\n    setEventLog(prev => [...prev, `${new Date().toLocaleTimeString()}: ${message}`]);\n  };\n  \n  const handleSendTestEvent = () => {\n    if (debugMode === 'firebase') {\n      sendTestEvent();\n      logEvent('Événement de test Firebase envoyé');\n    } else {\n      sendGtagTestEvent();\n      logEvent('Événement de test Gtag envoyé');\n    }\n  };\n  \n  const handleSendPageView = () => {\n    analytics.trackPageView('/debug-page', 'Page de débogage');\n    logEvent('Événement page_view envoyé via Firebase Analytics');\n    \n    // Envoyer aussi via gtag si ce mode est sélectionné\n    if (debugMode === 'gtag' && window.gtag) {\n      window.gtag('event', 'page_view', {\n        page_title: 'Page de débogage',\n        page_path: '/debug-page',\n        debug_mode: true\n      });\n      logEvent('Événement page_view envoyé via Gtag');\n    }\n  };\n  \n  const handleSendOnboardingComplete = () => {\n    analytics.trackOnboarding(EventAction.ONBOARDING_COMPLETE, {\n      total_slides_viewed: 5,\n      completion_time: new Date().toISOString()\n    });\n    logEvent('Événement onboarding_complete envoyé');\n  };\n  \n  const handleSendMapInteraction = () => {\n    analytics.trackMapInteraction(EventAction.MAP_LOAD, {\n      map_type: 'debug',\n      load_time: 1200\n    });\n    logEvent('Événement map_load envoyé');\n  };\n  \n  const handleSendCustomEvent = () => {\n    analytics.trackEvent(\n      EventCategory.FEATURE, \n      EventAction.FEATURE_USE, \n      { feature_name: 'analytics_debugger', custom_param: 'test_value' }\n    );\n    logEvent('Événement personnalisé feature_feature_use envoyé');\n  };\n  \n  // Fonction pour ajouter ou mettre à jour les paramètres d'URL\n  const addDebugParams = () => {\n    const url = new URL(window.location.href);\n    url.searchParams.set('firebase_debug', 'true');\n    url.searchParams.set('debug_mode', 'true');\n    url.searchParams.set('gtm_debug', 'x');\n    window.history.replaceState({}, document.title, url.toString());\n    \n    setUrlParams('firebase_debug=true, debug_mode=true, gtm_debug=x');\n    logEvent('Paramètres de debug ajoutés à l\\'URL');\n  };\n  \n  // Fonction pour vider les logs\n  const clearLogs = () => {\n    setEventLog([]);\n    logEvent('Logs effacés');\n  };\n  \n  // Fonction pour exécuter le diagnostic\n  const handleRunDiagnostic = async () => {\n    setRunningDiagnostic(true);\n    logEvent('Démarrage du diagnostic...');\n    \n    try {\n      const diagnosticResult = await runAndLogDiagnostics();\n      setDiagnosticResults(diagnosticResult);\n      logEvent(`Diagnostic terminé: ${diagnosticResult.summary.success} succès, ${diagnosticResult.summary.failure} problèmes`);\n    } catch (error) {\n      logEvent(`Erreur lors du diagnostic: ${error instanceof Error ? error.message : String(error)}`);\n    } finally {\n      setRunningDiagnostic(false);\n    }\n  };\n  \n  return (\n    <div className=\"p-4 bg-white rounded-lg shadow-md max-w-3xl mx-auto my-8\">\n      <h1 className=\"text-2xl font-bold mb-4\">Analytics Debugger</h1>\n      \n      <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded\">\n        <h2 className=\"font-semibold mb-2\">État du débogage</h2>\n        <div className=\"text-sm\">\n          <p><span className=\"font-medium\">Mode:</span> {debugMode === 'firebase' ? 'Firebase Analytics' : 'Google Tag Manager'}</p>\n          <p><span className=\"font-medium\">Paramètres URL:</span> {urlParams}</p>\n        </div>\n      </div>\n      \n      <div className=\"mb-4\">\n        <h2 className=\"font-semibold mb-2\">Mode de débogage</h2>\n        <div className=\"flex gap-3\">\n          <button \n            onClick={() => setDebugMode('firebase')}\n            className={`px-3 py-1 rounded ${debugMode === 'firebase' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Firebase Analytics\n          </button>\n          <button \n            onClick={() => setDebugMode('gtag')}\n            className={`px-3 py-1 rounded ${debugMode === 'gtag' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}\n          >\n            Google Tag (gtag)\n          </button>\n        </div>\n        \n        <div className=\"mt-3\">\n          <button\n            onClick={handleRunDiagnostic}\n            disabled={runningDiagnostic}\n            className={`w-full py-2 px-4 rounded ${runningDiagnostic ? 'bg-gray-400' : 'bg-green-600 hover:bg-green-700'} text-white flex items-center justify-center`}\n          >\n            {runningDiagnostic ? (\n              <>\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Exécution du diagnostic...\n              </>\n            ) : 'Exécuter le diagnostic'}\n          </button>\n        </div>\n      </div>\n      \n      {diagnosticResults && (\n        <div className=\"mb-4 p-3 border rounded bg-gray-50\">\n          <h2 className=\"font-semibold mb-2\">Résultats du diagnostic</h2>\n          <div className=\"text-sm\">\n            <div className=\"flex justify-between mb-2\">\n              <span>Tests réussis:</span>\n              <span className=\"font-medium text-green-600\">{diagnosticResults.summary.success} / {diagnosticResults.summary.total}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Problèmes détectés:</span>\n              <span className={`font-medium ${diagnosticResults.summary.failure > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                {diagnosticResults.summary.failure}\n              </span>\n            </div>\n            \n            {diagnosticResults.summary.failure > 0 && (\n              <div className=\"mt-2 text-xs text-red-600\">\n                Des problèmes ont été détectés. Consultez la console du navigateur pour plus de détails.\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"grid grid-cols-2 gap-3 mb-6\">\n        <button \n          onClick={handleSendTestEvent}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded\"\n        >\n          Envoyer événement de test\n        </button>\n        \n        <button \n          onClick={handleSendPageView}\n          className=\"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded\"\n        >\n          Simuler page_view\n        </button>\n        \n        <button \n          onClick={handleSendOnboardingComplete}\n          className=\"bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded\"\n        >\n          Simuler onboarding_complete\n        </button>\n        \n        <button \n          onClick={handleSendMapInteraction}\n          className=\"bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded\"\n        >\n          Simuler map_load\n        </button>\n        \n        <button \n          onClick={handleSendCustomEvent}\n          className=\"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded\"\n        >\n          Envoyer événement personnalisé\n        </button>\n        \n        <button \n          onClick={addDebugParams}\n          className=\"bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded\"\n        >\n          Ajouter paramètres debug à l'URL\n        </button>\n      </div>\n      \n      <div className=\"border border-gray-200 rounded p-3 bg-gray-50\">\n        <div className=\"flex justify-between items-center mb-2\">\n          <h2 className=\"text-lg font-semibold\">Journal des événements</h2>\n          <button \n            onClick={clearLogs}\n            className=\"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded\"\n          >\n            Effacer\n          </button>\n        </div>\n        <div className=\"h-48 overflow-y-auto text-sm\">\n          {eventLog.length === 0 ? (\n            <p className=\"text-gray-500 italic\">Aucun événement envoyé</p>\n          ) : (\n            <ul className=\"space-y-1\">\n              {eventLog.map((log, index) => (\n                <li key={index} className=\"border-b border-gray-100 pb-1\">{log}</li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n      \n      <div className=\"mt-6 text-sm text-gray-600\">\n        <h3 className=\"font-semibold\">Instructions:</h3>\n        <ol className=\"list-decimal pl-5 space-y-1 mt-2\">\n          <li>Assurez-vous que l'URL contient les paramètres de debug (<code>?firebase_debug=true</code>)</li>\n          <li>Ouvrez la console Firebase &gt; Analytics &gt; DebugView</li>\n          <li>Ouvrez également Google Analytics &gt; Rapports &gt; Temps réel</li>\n          <li>Cliquez sur les boutons ci-dessus pour envoyer des événements de test</li>\n          <li>Vérifiez que les événements apparaissent dans DebugView ou dans les rapports temps réel</li>\n          <li>Si rien n'apparaît, essayez de changer de mode (Firebase/Gtag) et réessayez</li>\n        </ol>\n        \n        <div className=\"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded\">\n          <p className=\"font-semibold\">Résolution de problèmes:</p>\n          <ul className=\"list-disc pl-5 mt-1\">\n            <li>Vérifiez que vous n'avez pas de bloqueur de publicités actif</li>\n            <li>Utilisez Chrome plutôt qu'un autre navigateur</li>\n            <li>Vérifiez que la configuration Firebase est correcte</li>\n            <li>Consultez la console du navigateur pour voir les erreurs éventuelles</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { initEmailJS, checkAndSendErrors, setupGlobalErrorHandler } from \"./services/errorTracking\";\nimport { initFirebaseAnalytics } from \"./services/firebaseConfig\";\nimport { analytics, EventAction } from \"./services/firebaseAnalytics\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { Celebration } from \"./components/Celebration\";\nimport { AchievementType, getAchievementCelebrationMessage } from \"./services/achievements\";\nimport { AudioPlayer } from \"./components/AudioPlayer\";\nimport { Toaster as Sonner } from \"@/components/ui/sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { Routes, Route, useLocation, Navigate, useNavigate } from \"react-router-dom\";\nimport { HashRouter } from \"react-router-dom/dist/index\";\nimport { AnimatePresence } from \"framer-motion\";\n\n// Contextes\nimport { NavigationProvider } from \"./contexts/NavigationContext\";\nimport { LoadingProvider } from \"./contexts/LoadingContext\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\n// Composants\nimport { AnimatedPageTransition, isSwipeableRoute } from \"./components/AnimatedPageTransition\";\nimport OfflineIndicator from \"./components/OfflineIndicator\";\n\n// Utilitaires\nimport { registerServiceWorker } from \"./utils/serviceWorkerRegistration\";\nimport { preloadAllOfflineData } from \"./services/offlineService\";\n\n// Pages\nimport Map from \"./pages/Map\";\nimport Program from \"./pages/Program\";\nimport About from \"./pages/About\";\nimport Donate from \"./pages/Donate\";\nimport NotFound from \"./pages/NotFound\";\nimport SplashScreen from \"./pages/SplashScreen\";\nimport Admin from \"./pages/Admin\";\nimport SavedEvents from \"./pages/SavedEvents\";\nimport Onboarding from \"./pages/Onboarding\";\nimport { LocationHistory } from \"./pages/LocationHistory\";\nimport Analytics from \"./pages/Analytics\";\nimport CommunityGallery from \"./pages/CommunityGallery\";\nimport HistoricalGallery from \"./pages/HistoricalGallery\";\nimport Galleries from \"./pages/Galleries\";\nimport AnalyticsDebugger from \"./debug/AnalyticsDebugger\";\n\nconst queryClient = new QueryClient();\n\n// Type définition pour la configuration des routes\ninterface RouteConfig {\n  path: string;\n  component: React.ComponentType;\n  swipeable?: boolean;\n}\n\n/**\n * Composant qui gère les transitions entre les routes\n */\nconst AnimatedRoutes: React.FC = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const prevPathRef = useRef<string>(location.pathname);\n  \n  // État pour suivre si l'utilisateur a déjà vu l'onboarding\n  const [hasSeenOnboarding, setHasSeenOnboarding] = useState<boolean>(() => {\n    const storedValue = localStorage.getItem('hasSeenOnboarding');\n    return storedValue === 'true';\n  });\n  \n  // Surveiller les changements du localStorage pour hasSeenOnboarding\n  useEffect(() => {\n    console.log('[App] Initialisation des écouteurs d\\'événements d\\'onboarding');\n    \n    // Fonction pour vérifier les changements du localStorage\n    const handleStorageChange = () => {\n      const storedValue = localStorage.getItem('hasSeenOnboarding');\n      const newValue = storedValue === 'true';\n      \n      // Early return si la valeur n'a pas changé pour éviter des re-renders inutiles\n      if (newValue !== hasSeenOnboarding) {\n        console.log('[App] Mise à jour de hasSeenOnboarding depuis localStorage:', newValue);\n        setHasSeenOnboarding(newValue);\n      }\n    };\n\n    // Écouter les changements du localStorage\n    window.addEventListener('storage', handleStorageChange);\n    \n    // Vérifier aussi périodiquement avec une fréquence réduite (500ms au lieu de 100ms)\n    const interval = setInterval(handleStorageChange, 500);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n      clearInterval(interval);\n    };\n  }, [hasSeenOnboarding]);\n\n  // État pour l'écran d'accueil\n  const [showSplash, setShowSplash] = useState<boolean>(true);\n  \n  // Gérer la fin de l'écran d'accueil\n  const handleSplashComplete = () => {\n    setShowSplash(false);\n    // Si c'est la première visite, aller à l'onboarding\n    if (!hasSeenOnboarding) {\n      navigate('/onboarding');\n    }\n    // Sinon, rester sur la page actuelle (ne pas forcer la redirection vers /map)\n  };\n  \n  // Vérifier si c'est la première visite\n  useEffect(() => {\n    console.log('[App] useEffect navigation - État actuel:', {\n      showSplash,\n      hasSeenOnboarding,\n      pathname: location.pathname\n    });\n    \n    // Ne rien faire si l'écran d'accueil est encore affiché\n    if (showSplash) {\n      console.log('[App] Écran d\\'accueil encore affiché, aucune action');\n      return;\n    }\n    \n    // Si c'est la première visite et que l'utilisateur n'est pas déjà sur la page d'onboarding\n    if (!hasSeenOnboarding && location.pathname !== '/onboarding') {\n      console.log('[App] Redirection vers onboarding depuis:', location.pathname);\n      navigate('/onboarding');\n    } else if (hasSeenOnboarding && location.pathname === '/onboarding') {\n      console.log('[App] Onboarding terminé, redirection vers /map');\n      navigate('/map');\n    } else {\n      console.log('[App] Aucune action de navigation nécessaire');\n    }\n  }, [hasSeenOnboarding, location.pathname, navigate, showSplash]);\n\n  // Track route changes for analytics\n  useEffect(() => {\n    const previousPath = prevPathRef.current;\n    const currentPath = location.pathname;\n    if (previousPath !== currentPath) {\n      analytics.trackRouteChange(previousPath, currentPath);\n      prevPathRef.current = currentPath;\n    }\n  }, [location.pathname]);\n  \n  // Marquer l'onboarding comme vu\n  const handleOnboardingComplete = () => {\n    localStorage.setItem('hasSeenOnboarding', 'true');\n    setHasSeenOnboarding(true);\n    navigate('/map');\n  };\n  \n  // Configuration des routes principales\n  const mainRoutes: RouteConfig[] = [\n    { path: '/map', component: Map, swipeable: true },\n    // Route de débogage pour Firebase Analytics (uniquement en dev)\n    { path: '/debug-analytics', component: AnalyticsDebugger },\n    { path: '/program', component: Program, swipeable: true },\n    { path: '/saved', component: SavedEvents, swipeable: true },\n    { path: '/community', component: CommunityGallery, swipeable: true },\n    { path: '/galleries', component: Galleries, swipeable: false },\n    { path: '/historical', component: HistoricalGallery, swipeable: false },\n    { path: '/about', component: About, swipeable: true },\n    { path: '/donate', component: Donate, swipeable: true },\n  ];\n  \n  // Configuration des routes secondaires\n  const secondaryRoutes: RouteConfig[] = [\n    { path: '/admin', component: Admin },\n    { path: '/onboarding', component: Onboarding },\n    { path: '/location-history', component: LocationHistory },\n    { path: '/analytics', component: Analytics },\n  ];\n  \n  // Vérifier si la page actuelle supporte la navigation par gestes\n  const isSwipeablePage = isSwipeableRoute(location.pathname);\n  \n  // Fonction pour rendre une route avec le bon wrapper\n  const renderRouteElement = (Component: React.ComponentType, enableSwipe: boolean = false): React.ReactElement => (\n    <AnimatedPageTransition enableSwipe={enableSwipe}>\n      <Component />\n    </AnimatedPageTransition>\n  );\n  \n  // Si l'écran d'accueil est actif, le montrer au lieu des routes\n  if (showSplash) {\n    return (\n      <SplashScreen \n        onComplete={handleSplashComplete} \n        isFirstVisit={!hasSeenOnboarding} \n      />\n    );\n  }\n  \n  return (\n    <AnimatePresence mode=\"wait\">\n      <Routes location={location} key={location.pathname}>\n        {/* Rediriger vers l'onboarding lors de la première visite, sinon vers la carte */}\n        <Route path=\"/\" element={\n          hasSeenOnboarding ? (\n            <Navigate to=\"/map\" replace />\n          ) : (\n            <Navigate to=\"/onboarding\" replace />\n          )\n        } />\n        \n\n        {/* Routes principales avec navigation par gestes */}\n        {mainRoutes.map(route => (\n          <Route \n            key={route.path}\n            path={route.path} \n            element={renderRouteElement(route.component, isSwipeablePage && route.swipeable)}\n          />\n        ))}\n        \n        {/* Routes secondaires sans navigation par gestes */}\n        {secondaryRoutes.map(route => (\n          <Route \n            key={route.path}\n            path={route.path} \n            element={renderRouteElement(route.component)}\n          />\n        ))}\n        \n        {/* Route 404 */}\n        <Route path=\"*\" element={renderRouteElement(NotFound)} />\n      </Routes>\n    </AnimatePresence>\n  );\n};\n\nconst AppContent: React.FC = () => {\n  return <AnimatedRoutes />;\n};\n\n// Créer un événement personnalisé pour les achievements\nexport const achievementEvent = new EventTarget();\n\n// Type pour l'événement d'achievement\nexport interface AchievementEventDetail {\n  type: AchievementType;\n  message: string;\n}\n\n// Fonction pour déclencher un événement d'achievement\nexport const triggerAchievementEvent = (type: AchievementType) => {\n  const message = getAchievementCelebrationMessage(type);\n  if (message) {\n    const event = new CustomEvent<AchievementEventDetail>('achievement', {\n      detail: { type, message }\n    });\n    achievementEvent.dispatchEvent(event);\n  }\n};\n\nconst App: React.FC = () => {\n  // État pour les célébrations\n  const [celebration, setCelebration] = useState<{\n    show: boolean;\n    message: string;\n  }>({ show: false, message: '' });\n\n  // Écouter les événements d'achievement\n  useEffect(() => {\n    console.log('[App] Initialisation des écouteurs d\\'événements d\\'achievement');\n    \n    // Gestionnaire pour l'événement interne\n    const handleInternalAchievement = (event: Event) => {\n      const customEvent = event as CustomEvent<AchievementEventDetail>;\n      console.log('[App] Événement interne achievement reçu:', customEvent.detail);\n      \n      setCelebration({\n        show: true,\n        message: customEvent.detail.message\n      });\n      console.log('[App] Célébration activée avec le message:', customEvent.detail.message);\n    };\n\n    // Gestionnaire pour l'événement global\n    const handleGlobalAchievement = (event: Event) => {\n      const customEvent = event as CustomEvent<AchievementEventDetail>;\n      console.log('[App] Événement global app-achievement reçu:', customEvent.detail);\n      \n      setCelebration({\n        show: true,\n        message: customEvent.detail.message\n      });\n      console.log('[App] Célébration activée avec le message:', customEvent.detail.message);\n    };\n\n    // Ajouter les écouteurs\n    console.log('[App] Ajout de l\\'écouteur pour l\\'événement interne \"achievement\"');\n    achievementEvent.addEventListener('achievement', handleInternalAchievement);\n    \n    console.log('[App] Ajout de l\\'écouteur pour l\\'événement global \"app-achievement\"');\n    window.addEventListener('app-achievement', handleGlobalAchievement);\n\n    // Fonction de test globale pour réinitialiser l'onboarding\n    (window as any).resetOnboardingTest = () => {\n      console.log('[App] [TEST] Réinitialisation de l\\'onboarding...');\n      localStorage.removeItem('hasSeenOnboarding');\n      window.location.reload();\n    };\n\n    console.log('[App] [TEST] Fonction resetOnboardingTest() disponible dans la console');\n\n    // Nettoyer les écouteurs d'événements lors du démontage\n    return () => {\n      console.log('[App] Nettoyage des écouteurs d\\'événements');\n      achievementEvent.removeEventListener('achievement', handleInternalAchievement);\n      window.removeEventListener('app-achievement', handleGlobalAchievement);\n    };\n  }, []);\n\n  // Register service worker and initialize error reporting\n  useEffect(() => {\n    // Afficher la base URL détectée\n    console.log('[App] Base URL détectée:', (window as any).APP_CONFIG?.BASE_URL || '/');\n    \n    // Initialiser le service worker\n    registerServiceWorker();\n    \n    // Initialiser le suivi des erreurs\n    setupGlobalErrorHandler();\n    initEmailJS();\n    \n    // Initialiser Firebase Analytics (nouveau système)\n    initFirebaseAnalytics();\n    console.log('[App] Firebase Analytics initialisé');\n    \n    // Démarrer une nouvelle session analytics\n    analytics.startSession();\n    \n    // Suivre l'événement de démarrage de l'application (Firebase)\n    analytics.trackFeatureUse('app_start', {\n      timestamp: new Date().toISOString(),\n      referrer: document.referrer || 'direct'\n    });\n    \n    // Vérifier et envoyer les erreurs toutes les 30 minutes\n    // Synchroniser également les données d'analyse\n    const errorCheckInterval = setInterval(() => {\n      checkAndSendErrors();\n    }, 30 * 60 * 1000);\n    \n    // Vérifier et envoyer les erreurs stockées\n    checkAndSendErrors();\n    \n    // Configurer le gestionnaire d'erreurs global\n    setupGlobalErrorHandler();\n    \n    // Enregistrer le service worker pour le mode hors ligne\n    registerServiceWorker();\n    \n    // Précharger les données hors ligne\n    preloadAllOfflineData();\n    \n    // Nettoyer la session analytics à la fermeture\n    return () => {\n      analytics.endSession();\n    };\n  }, []);\n\n  // First-load performance metrics\n  useEffect(() => {\n    try {\n      // Load time (Navigation Timing)\n      const navEntries = performance.getEntriesByType('navigation') as PerformanceNavigationTiming[];\n      if (navEntries && navEntries.length > 0) {\n        const nav = navEntries[0];\n        const loadTime = nav.loadEventEnd - nav.startTime;\n        if (isFinite(loadTime) && loadTime >= 0) {\n          analytics.trackPerformance(EventAction.LOAD_TIME, Math.round(loadTime));\n        }\n      } else if ((performance as any).timing) {\n        const t = (performance as any).timing as PerformanceTiming;\n        const loadTime = t.loadEventEnd - t.navigationStart;\n        if (isFinite(loadTime) && loadTime >= 0) {\n          analytics.trackPerformance(EventAction.LOAD_TIME, Math.round(loadTime));\n        }\n      }\n\n      // FP & FCP\n      if ('PerformanceObserver' in window) {\n        const paintObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            const name = (entry as any).name;\n            if (name === 'first-paint') {\n              analytics.trackPerformance(EventAction.FIRST_PAINT, Math.round(entry.startTime));\n            } else if (name === 'first-contentful-paint') {\n              analytics.trackPerformance(EventAction.FIRST_CONTENTFUL_PAINT, Math.round(entry.startTime));\n            }\n          }\n        });\n        try {\n          paintObserver.observe({ type: 'paint', buffered: true } as PerformanceObserverInit);\n        } catch (_) { /* noop */ }\n\n        // FID\n        const fidObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries() as PerformanceEventTiming[]) {\n            const fid = entry.processingStart - entry.startTime;\n            if (isFinite(fid) && fid >= 0) {\n              analytics.trackPerformance(EventAction.FIRST_INPUT_DELAY, Math.round(fid), {\n                name: entry.name,\n                duration: Math.round(entry.duration)\n              });\n            }\n          }\n        });\n        try {\n          fidObserver.observe({ type: 'first-input', buffered: true } as PerformanceObserverInit);\n        } catch (_) { /* noop */ }\n      }\n    } catch (err) {\n      if (import.meta.env.DEV) {\n        console.warn('[Perf] metrics collection failed', err);\n      }\n    }\n  }, []);\n\n  // Fonction pour réinitialiser l'onboarding\n  const resetOnboarding = () => {\n    localStorage.removeItem('hasSeenOnboarding');\n    console.log('[App] Onboarding réinitialisé, rechargement de la page...');\n    // Forcer l'affichage de l'écran d'accueil avant l'onboarding\n    window.location.reload();\n  };\n  \n  // Fonction pour tester les confettis\n  const testConfetti = () => {\n    console.log('[App] Test manuel des confettis');\n    setCelebration({\n      show: true,\n      message: 'Test des confettis!'\n    });\n  };\n  \n  // Fonction pour tester les achievements\n  const testAchievement = (type: AchievementType) => {\n    console.log(`[App] Test manuel de l'achievement ${type}`);\n    // Déclencher directement l'événement global\n    const message = getAchievementCelebrationMessage(type);\n    if (message) {\n      const event = new CustomEvent('app-achievement', {\n        detail: { type, message }\n      });\n      window.dispatchEvent(event);\n    }\n  };\n  \n  // Fonction pour vider le localStorage\n  const clearLocalStorage = () => {\n    console.log('[App] Nettoyage du localStorage...');\n    localStorage.clear();\n    toast({\n      title: \"LocalStorage vidé\",\n      description: \"Toutes les données locales ont été effacées.\",\n      variant: \"destructive\"\n    });\n    setTimeout(() => window.location.reload(), 1500);\n  };\n\n  // Aucun code de gestion de localisation n'est nécessaire ici\n  // La gestion de la localisation est maintenant gérée directement dans le composant AudioActivator\n  \n  // Déterminer le chemin audio en fonction de l'environnement\n  const audioPath = window.location.hostname.includes('github.io')\n    ? '/1Hall1Artiste/audio/Port-marchand.mp3'\n    : '/audio/Port-marchand.mp3';\n    \n  return (\n    <QueryClientProvider client={queryClient}>\n      <LoadingProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Sonner />\n            <HashRouter>\n              <NavigationProvider>\n                <AppContent />\n                <OfflineIndicator />\n                {celebration.show && (\n                  <Celebration \n                    trigger={celebration.show} \n                    message={celebration.message} \n                    duration={5000}\n                    onComplete={() => setCelebration({ show: false, message: '' })}\n                  />\n                )}\n              </NavigationProvider>\n            </HashRouter>\n        </TooltipProvider>\n      </LoadingProvider>\n    </QueryClientProvider>\n  );\n};\n\nexport default App;\n","/**\r\n * Système de gestion des erreurs et de journalisation pour l'application\r\n * Ce fichier initialise les gestionnaires d'erreurs globaux et le système de logs\r\n */\r\n\r\nimport { initErrorHandlers, createLogViewer, createLogger } from './logger';\r\n\r\nconst logger = createLogger('ErrorHandling');\r\n\r\n/**\r\n * Initialise le système de gestion des erreurs\r\n * À appeler dans le composant racine de l'application\r\n */\r\nexport function initErrorHandlingSystem() {\r\n  // Initialiser les gestionnaires d'erreurs globaux\r\n  initErrorHandlers();\r\n  \r\n  // Créer le visualiseur de logs (uniquement en développement)\r\n  if (process.env.NODE_ENV === 'development') {\r\n    const logViewer = createLogViewer();\r\n    \r\n    // Exposer le logViewer dans la console pour le débogage\r\n    (window as any).__logViewer = logViewer;\r\n    \r\n    logger.info('Système de visualisation des logs initialisé (appuyez sur le bouton \"Logs\" pour voir les logs)');\r\n  }\r\n  \r\n  logger.info('Système de gestion des erreurs initialisé');\r\n}\r\n\r\n/**\r\n * Enregistre une erreur avec des informations contextuelles\r\n * @param error L'erreur à enregistrer\r\n * @param context Informations contextuelles supplémentaires\r\n */\r\nexport function logError(error: Error, context?: Record<string, any>) {\r\n  logger.error(`Erreur: ${error.message}`, {\r\n    name: error.name,\r\n    stack: error.stack,\r\n    ...context\r\n  });\r\n}\r\n\r\n/**\r\n * Enregistre une erreur liée à l'API\r\n * @param endpoint Point d'accès de l'API\r\n * @param error L'erreur à enregistrer\r\n */\r\nexport function logApiError(endpoint: string, error: any) {\r\n  logger.error(`Erreur API (${endpoint})`, {\r\n    status: error.status,\r\n    statusText: error.statusText,\r\n    message: error.message,\r\n    data: error.data\r\n  });\r\n}\r\n","import { createRoot } from 'react-dom/client'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\nimport './styles/animations.css'\r\nimport './styles/responsive.css'\r\nimport { initErrorHandlingSystem } from './utils/errorHandling'\r\nimport { initFirebaseDebug, sendTestEvent } from './debug/firebaseDebug'\r\nimport { initGtagDebug, sendGtagTestEvent } from './debug/gtag-debug'\r\n\r\n// La gestion des logs est maintenant gérée par le système de logging centralisé\r\n// dans utils/logger.ts\r\n\r\n// Initialiser le système de gestion des erreurs\r\ninitErrorHandlingSystem();\r\n\r\n// Initialiser le mode debug Firebase en développement\r\nif (import.meta.env.DEV) {\r\n  // Méthode 1: Firebase Debug\r\n  initFirebaseDebug();\r\n  \r\n  // Méthode 2: Gtag Debug (alternative)\r\n  initGtagDebug();\r\n  \r\n  // Envoyer des événements de test après un court délai\r\n  setTimeout(() => {\r\n    // Tester les deux méthodes\r\n    sendTestEvent();\r\n    sendGtagTestEvent();\r\n    console.log(\"[Main] Événements de test envoyés depuis main.tsx\");\r\n  }, 2000);\r\n}\r\n\r\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\r\n"],"file":"assets/index-vhJyd_of.js"}